<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Transforms/Scalar/LoopDistribute.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a72932e0778af28115095468f6286ff8.html">Transforms</a></li><li class="navelem"><a class="el" href="dir_e6e1f1f37d351595fa984b942927b205.html">Scalar</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">LoopDistribute.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="LoopDistribute_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- LoopDistribute.cpp - Loop Distribution Pass ------------------------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This file implements the Loop Distribution Pass.  Its main focus is to</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// distribute loops that cannot be vectorized due to dependence cycles.  It</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// tries to isolate the offending dependences into a new loop allowing</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// vectorization of the remaining parts.</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// For dependence analysis, the pass uses the LoopVectorizer&#39;s</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">// LoopAccessAnalysis.  Because this analysis presumes no change in the order of</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">// memory operations, special care is taken to preserve the lexical order of</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">// these operations.</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">// Similarly to the Vectorizer, the pass also supports loop versioning to</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// run-time disambiguate potentially overlapping arrays.</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160; </div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopDistribute_8h.html">llvm/Transforms/Scalar/LoopDistribute.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseMap_8h.html">llvm/ADT/DenseMap.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DepthFirstIterator_8h.html">llvm/ADT/DepthFirstIterator.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="EquivalenceClasses_8h.html">llvm/ADT/EquivalenceClasses.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="STLExtras_8h.html">llvm/ADT/STLExtras.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallPtrSet_8h.html">llvm/ADT/SmallPtrSet.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallVector_8h.html">llvm/ADT/SmallVector.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="StringRef_8h.html">llvm/ADT/StringRef.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Twine_8h.html">llvm/ADT/Twine.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="iterator__range_8h.html">llvm/ADT/iterator_range.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AssumptionCache_8h.html">llvm/Analysis/AssumptionCache.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="GlobalsModRef_8h.html">llvm/Analysis/GlobalsModRef.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopAccessAnalysis_8h.html">llvm/Analysis/LoopAccessAnalysis.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopAnalysisManager_8h.html">llvm/Analysis/LoopAnalysisManager.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopInfo_8h.html">llvm/Analysis/LoopInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="OptimizationRemarkEmitter_8h.html">llvm/Analysis/OptimizationRemarkEmitter.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ScalarEvolution_8h.html">llvm/Analysis/ScalarEvolution.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetLibraryInfo_8h.html">llvm/Analysis/TargetLibraryInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetTransformInfo_8h.html">llvm/Analysis/TargetTransformInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlock_8h.html">llvm/IR/BasicBlock.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constants_8h.html">llvm/IR/Constants.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DiagnosticInfo_8h.html">llvm/IR/DiagnosticInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Dominators_8h.html">llvm/IR/Dominators.h</a>&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Function_8h.html">llvm/IR/Function.h</a>&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2Instruction_8h.html">llvm/IR/Instruction.h</a>&quot;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Instructions_8h.html">llvm/IR/Instructions.h</a>&quot;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LLVMContext_8h.html">llvm/IR/LLVMContext.h</a>&quot;</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Metadata_8h.html">llvm/IR/Metadata.h</a>&quot;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PassManager_8h.html">llvm/IR/PassManager.h</a>&quot;</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Value_8h.html">llvm/IR/Value.h</a>&quot;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InitializePasses_8h.html">llvm/InitializePasses.h</a>&quot;</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Pass_8h.html">llvm/Pass.h</a>&quot;</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Casting_8h.html">llvm/Support/Casting.h</a>&quot;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Transforms_2Scalar_8h.html">llvm/Transforms/Scalar.h</a>&quot;</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlockUtils_8h.html">llvm/Transforms/Utils/BasicBlockUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Cloning_8h.html">llvm/Transforms/Utils/Cloning.h</a>&quot;</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopUtils_8h.html">llvm/Transforms/Utils/LoopUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopVersioning_8h.html">llvm/Transforms/Utils/LoopVersioning.h</a>&quot;</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueMapper_8h.html">llvm/Transforms/Utils/ValueMapper.h</a>&quot;</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">#include &lt;functional&gt;</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor">#include &lt;list&gt;</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">#include &lt;tuple&gt;</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160; </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="LoopDistribute_8cpp.html#a77bc1cce3ba138324f4c8a8a107dd0cc">   75</a></span>&#160;<span class="preprocessor">#define LDIST_NAME &quot;loop-distribute&quot;</span></div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="LoopDistribute_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   76</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE LDIST_NAME</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">/// @{</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">/// Metadata attribute names</span></div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="LoopDistribute_8cpp.html#aabc8ed42404f2c38c26bcf05be144fe8">   80</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> <a class="code" href="LoopDistribute_8cpp.html#aabc8ed42404f2c38c26bcf05be144fe8">LLVMLoopDistributeFollowupAll</a> =</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="stringliteral">&quot;llvm.loop.distribute.followup_all&quot;</span>;</div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="LoopDistribute_8cpp.html#a0e223b220eee303ce1cb10e76a0b11af">   82</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> <a class="code" href="LoopDistribute_8cpp.html#a0e223b220eee303ce1cb10e76a0b11af">LLVMLoopDistributeFollowupCoincident</a> =</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="stringliteral">&quot;llvm.loop.distribute.followup_coincident&quot;</span>;</div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="LoopDistribute_8cpp.html#a77dc93bcea21a71e8fbe91889992d399">   84</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> <a class="code" href="LoopDistribute_8cpp.html#a77dc93bcea21a71e8fbe91889992d399">LLVMLoopDistributeFollowupSequential</a> =</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="stringliteral">&quot;llvm.loop.distribute.followup_sequential&quot;</span>;</div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="LoopDistribute_8cpp.html#ad745c62caa5526f1182d11cb604f5107">   86</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> <a class="code" href="LoopDistribute_8cpp.html#ad745c62caa5526f1182d11cb604f5107">LLVMLoopDistributeFollowupFallback</a> =</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="stringliteral">&quot;llvm.loop.distribute.followup_fallback&quot;</span>;<span class="comment"></span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">/// @}</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <a class="code" href="LoopDistribute_8cpp.html#a55066973bd6341f2bf872fe68071a1ef">LDistVerify</a>(<span class="stringliteral">&quot;loop-distribute-verify&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Turn on DominatorTree and LoopInfo verification &quot;</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                         <span class="stringliteral">&quot;after Loop Distribution&quot;</span>),</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>));</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="LoopDistribute_8cpp.html#a7b5c7ecd20091387977bde6b693081b5">DistributeNonIfConvertible</a>(</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="stringliteral">&quot;loop-distribute-non-if-convertible&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Whether to distribute into a loop that may not be &quot;</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;             <span class="stringliteral">&quot;if-convertible by the loop vectorizer&quot;</span>),</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>));</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160; </div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="LoopDistribute_8cpp.html#a955b21fc648dee43230e2c430bcb344a">DistributeSCEVCheckThreshold</a>(</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="stringliteral">&quot;loop-distribute-scev-check-threshold&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(8), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;The maximum number of SCEV checks allowed for Loop &quot;</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;             <span class="stringliteral">&quot;Distribution&quot;</span>));</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="LoopDistribute_8cpp.html#a62a04cc3957acaab65259acd5469c7f5">PragmaDistributeSCEVCheckThreshold</a>(</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="stringliteral">&quot;loop-distribute-scev-check-threshold-with-pragma&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(128),</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="stringliteral">&quot;The maximum number of SCEV checks allowed for Loop &quot;</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <span class="stringliteral">&quot;Distribution for loop marked with #pragma loop distribute(enable)&quot;</span>));</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="LoopDistribute_8cpp.html#a1b65573ee8495bf5e8f92c2adebeffc4">EnableLoopDistribute</a>(</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="stringliteral">&quot;enable-loop-distribute&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Enable the new, experimental LoopDistribution Pass&quot;</span>),</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>));</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumLoopsDistributed, <span class="stringliteral">&quot;Number of loops distributed&quot;</span>);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">/// Maintains the set of instructions of the loop for a partition before</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">/// cloning.  After cloning, it hosts the new loop.</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment"></span><span class="keyword">class </span>InstPartition {</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="keyword">using</span> InstructionSet = <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Instruction *, 8&gt;</a>;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  InstPartition(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <span class="keywordtype">bool</span> DepCycle = <span class="keyword">false</span>)</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;      : DepCycle(DepCycle), OrigLoop(L) {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    Set.insert(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  }</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">  /// Returns whether this partition contains a dependence cycle.</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> hasDepCycle()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> DepCycle; }</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">  /// Adds an instruction to this partition.</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="namespacellvm_1_1ARM__AM.html#a5d0557608eaebed12bc00812724ba2cdae6bcee28992dab735eaa43f5dfa48a09">add</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) { Set.insert(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>); }</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">  /// Collection accessors.</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment"></span>  InstructionSet::iterator <a class="code" href="namespacellvm_1_1sys_1_1path.html#a00a76a729b319dc47beffbe07325565f">begin</a>() { <span class="keywordflow">return</span> Set.<a class="code" href="classllvm_1_1sys_1_1path_1_1const__iterator.html#a88c072843122519fd4f3547f2a0ab178">begin</a>(); }</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  InstructionSet::iterator <a class="code" href="namespacellvm_1_1sys_1_1path.html#a214ec2f04ffd92636ed4bd2717607a1d">end</a>() { <span class="keywordflow">return</span> Set.<a class="code" href="classllvm_1_1sys_1_1path_1_1const__iterator.html#a8a503d1cbee10d1b8c8f5ac2a03b90df">end</a>(); }</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  InstructionSet::const_iterator <a class="code" href="namespacellvm_1_1sys_1_1path.html#a00a76a729b319dc47beffbe07325565f">begin</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> Set.<a class="code" href="classllvm_1_1sys_1_1path_1_1const__iterator.html#a88c072843122519fd4f3547f2a0ab178">begin</a>(); }</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  InstructionSet::const_iterator <a class="code" href="namespacellvm_1_1sys_1_1path.html#a214ec2f04ffd92636ed4bd2717607a1d">end</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> Set.<a class="code" href="classllvm_1_1sys_1_1path_1_1const__iterator.html#a8a503d1cbee10d1b8c8f5ac2a03b90df">end</a>(); }</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <span class="keywordtype">bool</span> empty()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> Set.empty(); }</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">  /// Moves this partition into \p Other.  This partition becomes empty</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">  /// after this.</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> moveTo(InstPartition &amp;Other) {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.Set.insert(Set.begin(), Set.end());</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    Set.clear();</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.DepCycle |= DepCycle;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  }</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">  /// Populates the partition with a transitive closure of all the</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">  /// instructions that the seeded instructions dependent on.</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> populateUsedSet() {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="comment">// FIXME: We currently don&#39;t use control-dependence but simply include all</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="comment">// blocks (possibly empty at the end) and let simplifycfg mostly clean this</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="comment">// up.</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> : OrigLoop-&gt;getBlocks())</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      Set.insert(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>-&gt;getTerminator());</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="comment">// Follow the use-def chains to form a transitive closure of all the</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="comment">// instructions that the originally seeded instructions depend on.</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 8&gt;</a> Worklist(Set.begin(), Set.end());</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keywordflow">while</span> (!Worklist.empty()) {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Worklist.pop_back_val();</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      <span class="comment">// Insert instructions from the loop that we depend on.</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;operand_values()) {</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(V);</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &amp;&amp; OrigLoop-&gt;contains(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent()) &amp;&amp; Set.insert(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>).second)</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;          Worklist.push_back(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      }</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    }</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  }</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">  /// Clones the original loop.</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">  /// Updates LoopInfo and DominatorTree using the information that block \p</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">  /// LoopDomBB dominates the loop.</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Loop.html">Loop</a> *<a class="code" href="namespacellvm.html#a6f244e1d6d34701da1f29d3a762974fd">cloneLoopWithPreheader</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *InsertBefore, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *LoopDomBB,</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                               <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI,</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                               <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT) {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    ClonedLoop = <a class="code" href="namespacellvm.html#a6f244e1d6d34701da1f29d3a762974fd">::cloneLoopWithPreheader</a>(InsertBefore, LoopDomBB, OrigLoop,</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                                          VMap, <a class="code" href="classllvm_1_1Twine.html">Twine</a>(<span class="stringliteral">&quot;.ldist&quot;</span>) + <a class="code" href="classllvm_1_1Twine.html">Twine</a>(<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>),</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                                          LI, DT, ClonedLoopBlocks);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">return</span> ClonedLoop;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  }</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment">  /// The cloned loop.  If this partition is mapped to the original loop,</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment">  /// this is null.</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment"></span>  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *getClonedLoop()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> ClonedLoop; }</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">  /// Returns the loop where this partition ends up after distribution.</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">  /// If this partition is mapped to the original loop then use the block from</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">  /// the loop.</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Loop.html">Loop</a> *getDistributedLoop()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">return</span> ClonedLoop ? ClonedLoop : OrigLoop;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  }</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment">  /// The VMap that is populated by cloning and then used in</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">  /// remapinstruction to remap the cloned instructions.</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1ValueMap.html">ValueToValueMapTy</a> &amp;getVMap() { <span class="keywordflow">return</span> VMap; }</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">  /// Remaps the cloned instructions using VMap.</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> remapInstructions() {</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <a class="code" href="namespacellvm.html#ab8ec5c940fbc440c992716fbe4a48636">remapInstructionsInBlocks</a>(ClonedLoopBlocks, VMap);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  }</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">  /// Based on the set of instructions selected for this partition,</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">  /// removes the unnecessary ones.</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> removeUnusedInsts() {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 8&gt;</a> <a class="code" href="namespacellvm_1_1minidump.html#aa8cbdda4c517e8f73a3f150077295280a92e592d90b9548016776a6fb68dccded">Unused</a>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160; </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Block : OrigLoop-&gt;getBlocks())</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;Inst : *Block)</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="keywordflow">if</span> (!Set.count(&amp;Inst)) {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;          <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewInst = &amp;Inst;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;          <span class="keywordflow">if</span> (!VMap.empty())</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            NewInst = cast&lt;Instruction&gt;(VMap[NewInst]);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160; </div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!isa&lt;BranchInst&gt;(NewInst) &amp;&amp;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                 <span class="stringliteral">&quot;Branches are marked used early on&quot;</span>);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;          <a class="code" href="namespacellvm_1_1minidump.html#aa8cbdda4c517e8f73a3f150077295280a92e592d90b9548016776a6fb68dccded">Unused</a>.push_back(NewInst);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        }</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160; </div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="comment">// Delete the instructions backwards, as it has a reduced likelihood of</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="comment">// having to update as many def-use and use-def chains.</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Inst : <a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">reverse</a>(Unused)) {</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      <span class="keywordflow">if</span> (!Inst-&gt;use_empty())</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        Inst-&gt;replaceAllUsesWith(<a class="code" href="classllvm_1_1PoisonValue.html#a1bf08613fb664a2e377a9a72c59a6b66">PoisonValue::get</a>(Inst-&gt;getType()));</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      Inst-&gt;eraseFromParent();</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    }</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  }</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160; </div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#a67980a8ae101d2fda845eb750ffb1942">print</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">if</span> (DepCycle)</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  (cycle)\n&quot;</span>;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : Set)</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      <span class="comment">// Prefix with the block name.</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent()-&gt;getName() &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  }</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160; </div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <span class="keywordtype">void</span> printBlocks()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : getDistributedLoop()-&gt;getBlocks())</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  }</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160; </div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="keyword">private</span>:<span class="comment"></span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment">  /// Instructions from OrigLoop selected for this partition.</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment"></span>  InstructionSet Set;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment">  /// Whether this partition contains a dependence cycle.</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> DepCycle;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">  /// The original loop.</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Loop.html">Loop</a> *OrigLoop;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment">  /// The cloned loop.  If this partition is mapped to the original loop,</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment">  /// this is null.</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Loop.html">Loop</a> *ClonedLoop = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">  /// The blocks of ClonedLoop including the preheader.  If this</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">  /// partition is mapped to the original loop, this is empty.</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 8&gt;</a> ClonedLoopBlocks;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment">  /// These gets populated once the set of instructions have been</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment">  /// finalized. If this partition is mapped to the original loop, these are not</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">  /// set.</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1ValueMap.html">ValueToValueMapTy</a> VMap;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;};</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment">/// Holds the set of Partitions.  It populates them, merges them and then</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">/// clones the loops.</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment"></span><span class="keyword">class </span>InstPartitionContainer {</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="keyword">using</span> InstToPartitionIdT = <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Instruction *, int&gt;</a>;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  InstPartitionContainer(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT)</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      : L(L), LI(LI), DT(DT) {}</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">  /// Returns the number of partitions.</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment"></span>  <span class="keywordtype">unsigned</span> <a class="code" href="XtensaAsmBackend_8cpp.html#a13a0babfc55adc9b798c39e65ec9e8a3">getSize</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> PartitionContainer.size(); }</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment">  /// Adds \p Inst into the current partition if that is marked to</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">  /// contain cycles.  Otherwise start a new partition for it.</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> addToCyclicPartition(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst) {</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="comment">// If the current partition is non-cyclic.  Start a new one.</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordflow">if</span> (PartitionContainer.empty() || !PartitionContainer.back().hasDepCycle())</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      PartitionContainer.emplace_back(Inst, L, <span class="comment">/*DepCycle=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      PartitionContainer.back().add(Inst);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  }</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment">  /// Adds \p Inst into a partition that is not marked to contain</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment">  /// dependence cycles.</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment"></span>  <span class="comment">//  Initially we isolate memory instructions into as many partitions as</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="comment">//  possible, then later we may merge them back together.</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <span class="keywordtype">void</span> addToNewNonCyclicPartition(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst) {</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    PartitionContainer.emplace_back(Inst, L);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  }</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment">  /// Merges adjacent non-cyclic partitions.</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment">  /// The idea is that we currently only want to isolate the non-vectorizable</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment">  /// partition.  We could later allow more distribution among these partition</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment">  /// too.</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> mergeAdjacentNonCyclic() {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    mergeAdjacentPartitionsIf(</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        [](<span class="keyword">const</span> InstPartition *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>) { <span class="keywordflow">return</span> !<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>-&gt;hasDepCycle(); });</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  }</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="comment">  /// If a partition contains only conditional stores, we won&#39;t vectorize</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="comment">  /// it.  Try to merge it with a previous cyclic partition.</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> mergeNonIfConvertible() {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    mergeAdjacentPartitionsIf([&amp;](<span class="keyword">const</span> InstPartition *Partition) {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      <span class="keywordflow">if</span> (Partition-&gt;hasDepCycle())</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160; </div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      <span class="comment">// Now, check if all stores are conditional in this partition.</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      <span class="keywordtype">bool</span> seenStore = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160; </div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      <a class="code" href="lib_2Target_2README_8txt.html#a7df6ed7588301267782c2bd4b7f6899d">for</a> (<span class="keyword">auto</span> *Inst : *Partition)</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="keywordflow">if</span> (isa&lt;StoreInst&gt;(Inst)) {</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;          seenStore = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;          <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1LoopAccessInfo.html#aa67d22298695c49e80b79cb8a271928b">LoopAccessInfo::blockNeedsPredication</a>(Inst-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>(), L, DT))</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        }</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      <span class="keywordflow">return</span> seenStore;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    });</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment">  /// Merges the partitions according to various heuristics.</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> mergeBeforePopulating() {</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    mergeAdjacentNonCyclic();</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="LoopDistribute_8cpp.html#a7b5c7ecd20091387977bde6b693081b5">DistributeNonIfConvertible</a>)</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      mergeNonIfConvertible();</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  }</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment">  /// Merges partitions in order to ensure that no loads are duplicated.</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment">  /// We can&#39;t duplicate loads because that could potentially reorder them.</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment">  /// LoopAccessAnalysis provides dependency information with the context that</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment">  /// the order of memory operation is preserved.</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment">  /// Return if any partitions were merged.</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> mergeToAvoidDuplicatedLoads() {</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keyword">using</span> LoadToPartitionT = <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Instruction *, InstPartition *&gt;</a>;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keyword">using</span> ToBeMergedT = <a class="code" href="classllvm_1_1EquivalenceClasses.html">EquivalenceClasses&lt;InstPartition *&gt;</a>;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160; </div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    LoadToPartitionT LoadToPartition;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    ToBeMergedT ToBeMerged;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160; </div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="comment">// Step through the partitions and create equivalence between partitions</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="comment">// that contain the same load.  Also put partitions in between them in the</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="comment">// same equivalence class to avoid reordering of memory operations.</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keywordflow">for</span> (PartitionContainerT::iterator <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = PartitionContainer.begin(),</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                                       <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = PartitionContainer.end();</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;         <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;      <span class="keyword">auto</span> *PartI = &amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160; </div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      <span class="comment">// If a load occurs in two partitions PartI and PartJ, merge all</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      <span class="comment">// partitions (PartI, PartJ] into PartI.</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst : *PartI)</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        <span class="keywordflow">if</span> (isa&lt;LoadInst&gt;(Inst)) {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;          <span class="keywordtype">bool</span> NewElt;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;          LoadToPartitionT::iterator LoadToPart;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160; </div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;          std::tie(LoadToPart, NewElt) =</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;              LoadToPartition.insert(std::make_pair(Inst, PartI));</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;          <span class="keywordflow">if</span> (!NewElt) {</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                       &lt;&lt; <span class="stringliteral">&quot;Merging partitions due to this load in multiple &quot;</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                       &lt;&lt; <span class="stringliteral">&quot;partitions: &quot;</span> &lt;&lt; PartI &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; LoadToPart-&gt;second</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                       &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                       &lt;&lt; *Inst &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160; </div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;            <span class="keyword">auto</span> PartJ = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;              --PartJ;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;              ToBeMerged.unionSets(PartI, &amp;*PartJ);</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;            } <span class="keywordflow">while</span> (&amp;*PartJ != LoadToPart-&gt;second);</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;          }</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        }</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    }</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keywordflow">if</span> (ToBeMerged.empty())</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160; </div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="comment">// Merge the member of an equivalence class into its class leader.  This</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="comment">// makes the members empty.</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keywordflow">for</span> (ToBeMergedT::iterator <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = ToBeMerged.begin(), <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = ToBeMerged.end();</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;         <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isLeader())</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160; </div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      <span class="keyword">auto</span> PartI = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getData();</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> *PartJ : <a class="code" href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">make_range</a>(std::next(ToBeMerged.member_begin(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)),</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                                   ToBeMerged.member_end())) {</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        PartJ-&gt;moveTo(*PartI);</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;      }</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    }</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="comment">// Remove the empty partitions.</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    PartitionContainer.remove_if(</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        [](<span class="keyword">const</span> InstPartition &amp;<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>) { <span class="keywordflow">return</span> <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.empty(); });</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160; </div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  }</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment">  /// Sets up the mapping between instructions to partitions.  If the</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="comment">  /// instruction is duplicated across multiple partitions, set the entry to -1.</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> setupPartitionIdOnInstructions() {</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keywordtype">int</span> PartitionID = 0;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;Partition : PartitionContainer) {</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst : Partition) {</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        <span class="keywordtype">bool</span> NewElt;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        InstToPartitionIdT::iterator Iter;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160; </div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        std::tie(Iter, NewElt) =</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;            InstToPartitionId.insert(std::make_pair(Inst, PartitionID));</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        <span class="keywordflow">if</span> (!NewElt)</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;          Iter-&gt;second = -1;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      }</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;      ++PartitionID;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    }</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  }</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment">  /// Populates the partition with everything that the seeding</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment">  /// instructions require.</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> populateUsedSet() {</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> : PartitionContainer)</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;      <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.populateUsedSet();</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  }</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment">  /// This performs the main chunk of the work of cloning the loops for</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment">  /// the partitions.</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> cloneLoops() {</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OrigPH = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">getLoopPreheader</a>();</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="comment">// At this point the predecessor of the preheader is either the memcheck</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="comment">// block or the top part of the original preheader.</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Pred = OrigPH-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a59fb91d1691350f7d1b8e8a114e3f2a4">getSinglePredecessor</a>();</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Pred &amp;&amp; <span class="stringliteral">&quot;Preheader does not have a single predecessor&quot;</span>);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitBlock = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ab48af53a5000ecede46c76dabb4578d2">getExitBlock</a>();</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ExitBlock &amp;&amp; <span class="stringliteral">&quot;No single exit block&quot;</span>);</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <a class="code" href="classllvm_1_1Loop.html">Loop</a> *NewLoop;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160; </div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!PartitionContainer.empty() &amp;&amp; <span class="stringliteral">&quot;at least two partitions expected&quot;</span>);</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="comment">// We&#39;re cloning the preheader along with the loop so we already made sure</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="comment">// it was empty.</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(&amp;*OrigPH-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>() == OrigPH-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>() &amp;&amp;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;           <span class="stringliteral">&quot;preheader not empty&quot;</span>);</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160; </div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="comment">// Preserve the original loop ID for use after the transformation.</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *OrigLoopID = L-&gt;<a class="code" href="classllvm_1_1Loop.html#afbcd78588d5235f99698b5c30f591382">getLoopID</a>();</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160; </div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="comment">// Create a loop for each partition except the last.  Clone the original</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="comment">// loop before PH along with adding a preheader for the cloned loop.  Then</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="comment">// update PH to point to the newly added preheader.</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *TopPH = OrigPH;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a> = <a class="code" href="XtensaAsmBackend_8cpp.html#a13a0babfc55adc9b798c39e65ec9e8a3">getSize</a>() - 1;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;Part : <a class="code" href="namespacellvm.html#a02981de53fb6ffd384d39addc4d25f37">llvm::drop_begin</a>(<a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">llvm::reverse</a>(PartitionContainer))) {</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      NewLoop = Part.cloneLoopWithPreheader(TopPH, Pred, <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>, LI, DT);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160; </div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      Part.getVMap()[ExitBlock] = TopPH;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;      Part.remapInstructions();</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      setNewLoopID(OrigLoopID, &amp;Part);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;      --<a class="code" href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a>;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;      TopPH = NewLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">getLoopPreheader</a>();</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    }</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    Pred-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1User.html#a1600c7959045cb6b6a5f5a1d427ec67e">replaceUsesOfWith</a>(OrigPH, TopPH);</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160; </div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="comment">// Also set a new loop ID for the last loop.</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    setNewLoopID(OrigLoopID, &amp;PartitionContainer.back());</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160; </div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="comment">// Now go in forward order and update the immediate dominator for the</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="comment">// preheaders with the exiting block of the previous loop.  Dominance</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="comment">// within the loop is updated in cloneLoopWithPreheader.</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> Curr = PartitionContainer.cbegin(),</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;              Next = std::next(PartitionContainer.cbegin()),</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;              <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = PartitionContainer.cend();</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;         Next != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++Curr, ++Next)</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      DT-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a2881c226e1c102190d54c3b664330aba">changeImmediateDominator</a>(</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;          Next-&gt;getDistributedLoop()-&gt;getLoopPreheader(),</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;          Curr-&gt;getDistributedLoop()-&gt;getExitingBlock());</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  }</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment">  /// Removes the dead instructions from the cloned loops.</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> removeUnusedInsts() {</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;Partition : PartitionContainer)</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      Partition.removeUnusedInsts();</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  }</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="comment">  /// For each memory pointer, it computes the partitionId the pointer is</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment">  /// used in.</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="comment">  /// This returns an array of int where the I-th entry corresponds to I-th</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="comment">  /// entry in LAI.getRuntimePointerCheck().  If the pointer is used in multiple</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="comment">  /// partitions its entry is set to -1.</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;int, 8&gt;</a></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  computePartitionSetForPointers(<span class="keyword">const</span> <a class="code" href="classllvm_1_1LoopAccessInfo.html">LoopAccessInfo</a> &amp;LAI) {</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1RuntimePointerChecking.html">RuntimePointerChecking</a> *RtPtrCheck = LAI.<a class="code" href="classllvm_1_1LoopAccessInfo.html#adb954e9d6470002f8ebd563b9d611bb7">getRuntimePointerChecking</a>();</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160; </div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> = RtPtrCheck-&gt;<a class="code" href="classllvm_1_1RuntimePointerChecking.html#aa6ad96a1c2591e0a61c92e0be5776978">Pointers</a>.size();</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;int, 8&gt;</a> PtrToPartitions(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = RtPtrCheck-&gt;<a class="code" href="classllvm_1_1RuntimePointerChecking.html#aa6ad96a1c2591e0a61c92e0be5776978">Pointers</a>[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>].PointerValue;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;      <span class="keyword">auto</span> <a class="code" href="MSA_8txt.html#ab49a28dbe60da0a607449e5308b1ec3f">Instructions</a> =</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;          LAI.<a class="code" href="classllvm_1_1LoopAccessInfo.html#a219e7cd38fd20b261c252194b9ab4b92">getInstructionsForAccess</a>(<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, RtPtrCheck-&gt;<a class="code" href="classllvm_1_1RuntimePointerChecking.html#aa6ad96a1c2591e0a61c92e0be5776978">Pointers</a>[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>].IsWritePtr);</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160; </div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;      <span class="keywordtype">int</span> &amp;Partition = PtrToPartitions[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>];</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;      <span class="comment">// First set it to uninitialized.</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;      Partition = -2;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst : Instructions) {</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        <span class="comment">// Note that this could be -1 if Inst is duplicated across multiple</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        <span class="comment">// partitions.</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        <span class="keywordtype">int</span> ThisPartition = this-&gt;InstToPartitionId[Inst];</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        <span class="keywordflow">if</span> (Partition == -2)</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;          Partition = ThisPartition;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        <span class="comment">// -1 means belonging to multiple partitions.</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Partition == -1)</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Partition != (<span class="keywordtype">int</span>)ThisPartition)</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;          Partition = -1;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      }</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Partition != -2 &amp;&amp; <span class="stringliteral">&quot;Pointer not belonging to any partition&quot;</span>);</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    }</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160; </div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <span class="keywordflow">return</span> PtrToPartitions;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  }</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160; </div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#a67980a8ae101d2fda845eb750ffb1942">print</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a> = 0;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> : PartitionContainer) {</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;      <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;Partition &quot;</span> &lt;&lt; <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>++ &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; &amp;<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> &lt;&lt; <span class="stringliteral">&quot;):\n&quot;</span>;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.print();</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    }</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  }</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160; </div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#a03503773241005f01b090b9862aad304">dump</a>()<span class="keyword"> const </span>{ <a class="code" href="namespacellvm.html#a67980a8ae101d2fda845eb750ffb1942">print</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()); }</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160; </div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  <span class="keyword">friend</span> <a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="namespacellvm.html#a5ee0a415cf089775fd277550b257f74e">operator&lt;&lt;</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>,</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                                 <span class="keyword">const</span> InstPartitionContainer &amp;Partitions) {</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    Partitions.print(<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>);</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  }</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160; </div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="keywordtype">void</span> printBlocks()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a> = 0;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> : PartitionContainer) {</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\nPartition &quot;</span> &lt;&lt; <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>++ &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; &amp;<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> &lt;&lt; <span class="stringliteral">&quot;):\n&quot;</span>;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.printBlocks();</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    }</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  }</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160; </div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  <span class="keyword">using</span> PartitionContainerT = std::list&lt;InstPartition&gt;;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="comment">  /// List of partitions.</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="comment"></span>  PartitionContainerT PartitionContainer;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="comment">  /// Mapping from Instruction to partition Id.  If the instruction</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="comment">  /// belongs to multiple partitions the entry contains -1.</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="comment"></span>  InstToPartitionIdT InstToPartitionId;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160; </div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="comment">  /// The control structure to merge adjacent partitions if both satisfy</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="comment">  /// the \p Predicate.</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="comment"></span>  <span class="keyword">template</span> &lt;<span class="keyword">class</span> UnaryPredicate&gt;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  <span class="keywordtype">void</span> mergeAdjacentPartitionsIf(UnaryPredicate <a class="code" href="namespacellvm_1_1PPC.html#a14028f7fe73a11dabc6583510cc0a355">Predicate</a>) {</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    InstPartition *PrevMatch = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = PartitionContainer.begin(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != PartitionContainer.end();) {</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;      <span class="keyword">auto</span> DoesMatch = <a class="code" href="namespacellvm_1_1PPC.html#a14028f7fe73a11dabc6583510cc0a355">Predicate</a>(&amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;      <span class="keywordflow">if</span> (PrevMatch == <span class="keyword">nullptr</span> &amp;&amp; DoesMatch) {</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        PrevMatch = &amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (PrevMatch != <span class="keyword">nullptr</span> &amp;&amp; DoesMatch) {</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;moveTo(*PrevMatch);</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = PartitionContainer.erase(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        PrevMatch = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;      }</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    }</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  }</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="comment">  /// Assign new LoopIDs for the partition&#39;s cloned loop.</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> setNewLoopID(<a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *OrigLoopID, InstPartition *Part) {</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    std::optional&lt;MDNode *&gt; PartitionID = <a class="code" href="namespacellvm.html#a368216c9c116e3f30d8dd352ce1370fc">makeFollowupLoopID</a>(</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        OrigLoopID,</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        {<a class="code" href="LoopDistribute_8cpp.html#aabc8ed42404f2c38c26bcf05be144fe8">LLVMLoopDistributeFollowupAll</a>,</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;         Part-&gt;hasDepCycle() ? <a class="code" href="LoopDistribute_8cpp.html#a77dc93bcea21a71e8fbe91889992d399">LLVMLoopDistributeFollowupSequential</a></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                             : <a class="code" href="LoopDistribute_8cpp.html#a0e223b220eee303ce1cb10e76a0b11af">LLVMLoopDistributeFollowupCoincident</a>});</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="keywordflow">if</span> (PartitionID) {</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;      <a class="code" href="classllvm_1_1Loop.html">Loop</a> *NewLoop = Part-&gt;getDistributedLoop();</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      NewLoop-&gt;<a class="code" href="classllvm_1_1Loop.html#adf4be757fa30ca7fe3e8b119438100f0">setLoopID</a>(*PartitionID);</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    }</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  }</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;};</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="comment">/// For each memory instruction, this class maintains difference of the</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="comment">/// number of unsafe dependences that start out from this instruction minus</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="comment">/// those that end here.</span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="comment">/// By traversing the memory instructions in program order and accumulating this</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="comment">/// number, we know whether any unsafe dependence crosses over a program point.</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="comment"></span><span class="keyword">class </span>MemoryInstructionDependences {</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <span class="keyword">using</span> <a class="code" href="classllvm_1_1Dependence.html">Dependence</a> = <a class="code" href="structllvm_1_1MemoryDepChecker_1_1Dependence.html">MemoryDepChecker::Dependence</a>;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160; </div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  <span class="keyword">struct </span>Entry {</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <span class="keywordtype">unsigned</span> NumUnsafeDependencesStartOrEnd = 0;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160; </div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    Entry(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst) : Inst(Inst) {}</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  };</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160; </div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  <span class="keyword">using</span> AccessesType = <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Entry, 8&gt;</a>;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160; </div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  AccessesType::const_iterator <a class="code" href="namespacellvm_1_1sys_1_1path.html#a00a76a729b319dc47beffbe07325565f">begin</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> Accesses.<a class="code" href="classllvm_1_1sys_1_1path_1_1const__iterator.html#a88c072843122519fd4f3547f2a0ab178">begin</a>(); }</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  AccessesType::const_iterator <a class="code" href="namespacellvm_1_1sys_1_1path.html#a214ec2f04ffd92636ed4bd2717607a1d">end</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> Accesses.<a class="code" href="classllvm_1_1sys_1_1path_1_1const__iterator.html#a8a503d1cbee10d1b8c8f5ac2a03b90df">end</a>(); }</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160; </div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  MemoryInstructionDependences(</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Instruction *&gt;</a> &amp;Instructions,</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Dependence&gt;</a> &amp;Dependences) {</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    Accesses.append(<a class="code" href="MSA_8txt.html#ab49a28dbe60da0a607449e5308b1ec3f">Instructions</a>.begin(), <a class="code" href="MSA_8txt.html#ab49a28dbe60da0a607449e5308b1ec3f">Instructions</a>.end());</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160; </div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Backward dependences:\n&quot;</span>);</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;Dep : Dependences)</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;      <span class="keywordflow">if</span> (Dep.isPossiblyBackward()) {</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        <span class="comment">// Note that the designations source and destination follow the program</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        <span class="comment">// order, i.e. source is always first.  (The direction is given by the</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        <span class="comment">// DepType.)</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;        ++Accesses[Dep.Source].NumUnsafeDependencesStartOrEnd;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        --Accesses[Dep.Destination].NumUnsafeDependencesStartOrEnd;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160; </div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(Dep.print(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>(), 2, Instructions));</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;      }</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  }</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160; </div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  AccessesType Accesses;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;};</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="comment">/// The actual class performing the per-loop work.</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="comment"></span><span class="keyword">class </span>LoopDistributeForLoop {</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  LoopDistributeForLoop(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT,</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                        <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> *SE, <a class="code" href="classllvm_1_1LoopAccessInfoManager.html">LoopAccessInfoManager</a> &amp;LAIs,</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;                        <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> *ORE)</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;      : L(L), <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>), LI(LI), DT(DT), SE(SE), LAIs(LAIs), ORE(ORE) {</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    setForced();</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  }</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="comment">  /// Try to distribute an inner-most loop.</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> processLoop() {</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a16165c1e5da45acaa086c3a54a188d34">isInnermost</a>() &amp;&amp; <span class="stringliteral">&quot;Only process inner loops.&quot;</span>);</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160; </div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\nLDist: In \&quot;&quot;</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                      &lt;&lt; L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>()</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;\&quot; checking &quot;</span> &lt;&lt; *L &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160; </div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="comment">// Having a single exit block implies there&#39;s also one exiting block.</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <span class="keywordflow">if</span> (!L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ab48af53a5000ecede46c76dabb4578d2">getExitBlock</a>())</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="BPFISelLowering_8cpp.html#a2b587ba9b9a87de01895acc017e21db8">fail</a>(<span class="stringliteral">&quot;MultipleExitBlocks&quot;</span>, <span class="stringliteral">&quot;multiple exit blocks&quot;</span>);</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    <span class="keywordflow">if</span> (!L-&gt;<a class="code" href="classllvm_1_1Loop.html#ac233a2693163ed58305215ca2f6921e3">isLoopSimplifyForm</a>())</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="BPFISelLowering_8cpp.html#a2b587ba9b9a87de01895acc017e21db8">fail</a>(<span class="stringliteral">&quot;NotLoopSimplifyForm&quot;</span>,</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                  <span class="stringliteral">&quot;loop is not in loop-simplify form&quot;</span>);</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <span class="keywordflow">if</span> (!L-&gt;<a class="code" href="classllvm_1_1Loop.html#a94bf09763773a48bc03a0461fb572a0c">isRotatedForm</a>())</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="BPFISelLowering_8cpp.html#a2b587ba9b9a87de01895acc017e21db8">fail</a>(<span class="stringliteral">&quot;NotBottomTested&quot;</span>, <span class="stringliteral">&quot;loop is not bottom tested&quot;</span>);</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160; </div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PH = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">getLoopPreheader</a>();</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160; </div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    LAI = &amp;LAIs.getInfo(*L);</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160; </div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <span class="comment">// Currently, we only distribute to isolate the part of the loop with</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <span class="comment">// dependence cycles to enable partial vectorization.</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <span class="keywordflow">if</span> (LAI-&gt;<a class="code" href="classllvm_1_1LoopAccessInfo.html#a3e05d925e750d2cffbf3c385f3a5028c">canVectorizeMemory</a>())</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="BPFISelLowering_8cpp.html#a2b587ba9b9a87de01895acc017e21db8">fail</a>(<span class="stringliteral">&quot;MemOpsCanBeVectorized&quot;</span>,</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                  <span class="stringliteral">&quot;memory operations are safe for vectorization&quot;</span>);</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160; </div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <span class="keyword">auto</span> *Dependences = LAI-&gt;<a class="code" href="classllvm_1_1LoopAccessInfo.html#acbe724e001e95a061672be1975932c0b">getDepChecker</a>().<a class="code" href="classllvm_1_1MemoryDepChecker.html#ae53d34947eb05175be6aa8ddf8cbf8dd">getDependences</a>();</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <span class="keywordflow">if</span> (!Dependences || Dependences-&gt;empty())</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="BPFISelLowering_8cpp.html#a2b587ba9b9a87de01895acc017e21db8">fail</a>(<span class="stringliteral">&quot;NoUnsafeDeps&quot;</span>, <span class="stringliteral">&quot;no unsafe dependences to isolate&quot;</span>);</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160; </div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    InstPartitionContainer Partitions(L, LI, DT);</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160; </div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <span class="comment">// First, go through each memory operation and assign them to consecutive</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <span class="comment">// partitions (the order of partitions follows program order).  Put those</span></div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <span class="comment">// with unsafe dependences into &quot;cyclic&quot; partition otherwise put each store</span></div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="comment">// in its own &quot;non-cyclic&quot; partition (we&#39;ll merge these later).</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <span class="comment">// Note that a memory operation (e.g. Load2 below) at a program point that</span></div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <span class="comment">// has an unsafe dependence (Store3-&gt;Load1) spanning over it must be</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <span class="comment">// included in the same cyclic partition as the dependent operations.  This</span></div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="comment">// is to preserve the original program order after distribution.  E.g.:</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="comment">//                NumUnsafeDependencesStartOrEnd  NumUnsafeDependencesActive</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <span class="comment">//  Load1   -.                     1                       0-&gt;1</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <span class="comment">//  Load2    | /Unsafe/            0                       1</span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <span class="comment">//  Store3  -&#39;                    -1                       1-&gt;0</span></div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <span class="comment">//  Load4                          0                       0</span></div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <span class="comment">// NumUnsafeDependencesActive &gt; 0 indicates this situation and in this case</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <span class="comment">// we just keep assigning to the same cyclic partition until</span></div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <span class="comment">// NumUnsafeDependencesActive reaches 0.</span></div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryDepChecker.html">MemoryDepChecker</a> &amp;DepChecker = LAI-&gt;<a class="code" href="classllvm_1_1LoopAccessInfo.html#acbe724e001e95a061672be1975932c0b">getDepChecker</a>();</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    MemoryInstructionDependences MID(DepChecker.<a class="code" href="classllvm_1_1MemoryDepChecker.html#ae07adbf6fb17302a12eea675eed91d1d">getMemoryInstructions</a>(),</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;                                     *Dependences);</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160; </div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="keywordtype">int</span> NumUnsafeDependencesActive = 0;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;InstDep : MID) {</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = InstDep.Inst;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;      <span class="comment">// We update NumUnsafeDependencesActive post-instruction, catch the</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;      <span class="comment">// start of a dependence directly via NumUnsafeDependencesStartOrEnd.</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;      <span class="keywordflow">if</span> (NumUnsafeDependencesActive ||</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;          InstDep.NumUnsafeDependencesStartOrEnd &gt; 0)</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        Partitions.addToCyclicPartition(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        Partitions.addToNewNonCyclicPartition(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      NumUnsafeDependencesActive += InstDep.NumUnsafeDependencesStartOrEnd;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NumUnsafeDependencesActive &gt;= 0 &amp;&amp;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;             <span class="stringliteral">&quot;Negative number of dependences active&quot;</span>);</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    }</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160; </div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <span class="comment">// Add partitions for values used outside.  These partitions can be out of</span></div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="comment">// order from the original program order.  This is OK because if the</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="comment">// partition uses a load we will merge this partition with the original</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <span class="comment">// partition of the load that we set up in the previous loop (see</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <span class="comment">// mergeToAvoidDuplicatedLoads).</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <span class="keyword">auto</span> DefsUsedOutside = <a class="code" href="namespacellvm.html#a6880d6c7da94499220b6d7dfcc3c88d4">findDefsUsedOutsideOfLoop</a>(L);</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Inst : DefsUsedOutside)</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;      Partitions.addToNewNonCyclicPartition(Inst);</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160; </div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Seeded partitions:\n&quot;</span> &lt;&lt; Partitions);</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="keywordflow">if</span> (Partitions.getSize() &lt; 2)</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="BPFISelLowering_8cpp.html#a2b587ba9b9a87de01895acc017e21db8">fail</a>(<span class="stringliteral">&quot;CantIsolateUnsafeDeps&quot;</span>,</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;                  <span class="stringliteral">&quot;cannot isolate unsafe dependencies&quot;</span>);</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160; </div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="comment">// Run the merge heuristics: Merge non-cyclic adjacent partitions since we</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="comment">// should be able to vectorize these together.</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    Partitions.mergeBeforePopulating();</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\nMerged partitions:\n&quot;</span> &lt;&lt; Partitions);</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="keywordflow">if</span> (Partitions.getSize() &lt; 2)</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="BPFISelLowering_8cpp.html#a2b587ba9b9a87de01895acc017e21db8">fail</a>(<span class="stringliteral">&quot;CantIsolateUnsafeDeps&quot;</span>,</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                  <span class="stringliteral">&quot;cannot isolate unsafe dependencies&quot;</span>);</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160; </div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <span class="comment">// Now, populate the partitions with non-memory operations.</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    Partitions.populateUsedSet();</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\nPopulated partitions:\n&quot;</span> &lt;&lt; Partitions);</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160; </div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <span class="comment">// In order to preserve original lexical order for loads, keep them in the</span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    <span class="comment">// partition that we set up in the MemoryInstructionDependences loop.</span></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    <span class="keywordflow">if</span> (Partitions.mergeToAvoidDuplicatedLoads()) {</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\nPartitions merged to ensure unique loads:\n&quot;</span></div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                        &lt;&lt; Partitions);</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;      <span class="keywordflow">if</span> (Partitions.getSize() &lt; 2)</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="BPFISelLowering_8cpp.html#a2b587ba9b9a87de01895acc017e21db8">fail</a>(<span class="stringliteral">&quot;CantIsolateUnsafeDeps&quot;</span>,</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                    <span class="stringliteral">&quot;cannot isolate unsafe dependencies&quot;</span>);</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    }</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160; </div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    <span class="comment">// Don&#39;t distribute the loop if we need too many SCEV run-time checks, or</span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    <span class="comment">// any if it&#39;s illegal.</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SCEVPredicate.html">SCEVPredicate</a> &amp;Pred = LAI-&gt;<a class="code" href="classllvm_1_1LoopAccessInfo.html#aa9d24e39eb41447892aaf8fdcff0f16a">getPSE</a>().<a class="code" href="classllvm_1_1PredicatedScalarEvolution.html#a12a8ac8838fb851a2de5dc5275307bb6">getPredicate</a>();</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="keywordflow">if</span> (LAI-&gt;<a class="code" href="classllvm_1_1LoopAccessInfo.html#ae6f36b5423a55bfb5d188e61205bfb54">hasConvergentOp</a>() &amp;&amp; !Pred.<a class="code" href="classllvm_1_1SCEVPredicate.html#ac43f5102232a1e1819b0763536f2937a">isAlwaysTrue</a>()) {</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="BPFISelLowering_8cpp.html#a2b587ba9b9a87de01895acc017e21db8">fail</a>(<span class="stringliteral">&quot;RuntimeCheckWithConvergent&quot;</span>,</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;                  <span class="stringliteral">&quot;may not insert runtime check with convergent operation&quot;</span>);</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    }</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160; </div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <span class="keywordflow">if</span> (Pred.<a class="code" href="classllvm_1_1SCEVPredicate.html#a4e26ec305e394c496dd3f2a16c6d58e5">getComplexity</a>() &gt; (IsForced.value_or(<span class="keyword">false</span>)</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                                    ? <a class="code" href="LoopDistribute_8cpp.html#a62a04cc3957acaab65259acd5469c7f5">PragmaDistributeSCEVCheckThreshold</a></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                                    : <a class="code" href="LoopDistribute_8cpp.html#a955b21fc648dee43230e2c430bcb344a">DistributeSCEVCheckThreshold</a>))</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="BPFISelLowering_8cpp.html#a2b587ba9b9a87de01895acc017e21db8">fail</a>(<span class="stringliteral">&quot;TooManySCEVRuntimeChecks&quot;</span>,</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;                  <span class="stringliteral">&quot;too many SCEV run-time checks needed.\n&quot;</span>);</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160; </div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    <span class="keywordflow">if</span> (!IsForced.value_or(<span class="keyword">false</span>) &amp;&amp; <a class="code" href="namespacellvm.html#a7d25a8a9d14a556b1ca44f8fe0dfdd8b">hasDisableAllTransformsHint</a>(L))</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="BPFISelLowering_8cpp.html#a2b587ba9b9a87de01895acc017e21db8">fail</a>(<span class="stringliteral">&quot;HeuristicDisabled&quot;</span>, <span class="stringliteral">&quot;distribution heuristic disabled&quot;</span>);</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160; </div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\nDistributing loop: &quot;</span> &lt;&lt; *L &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <span class="comment">// We&#39;re done forming the partitions set up the reverse mapping from</span></div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    <span class="comment">// instructions to partitions.</span></div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    Partitions.setupPartitionIdOnInstructions();</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160; </div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <span class="comment">// If we need run-time checks, version the loop now.</span></div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    <span class="keyword">auto</span> PtrToPartition = Partitions.computePartitionSetForPointers(*LAI);</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> *RtPtrChecking = LAI-&gt;<a class="code" href="classllvm_1_1LoopAccessInfo.html#adb954e9d6470002f8ebd563b9d611bb7">getRuntimePointerChecking</a>();</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;AllChecks = RtPtrChecking-&gt;<a class="code" href="classllvm_1_1RuntimePointerChecking.html#ad9538136df42a114d41ee07f61793c1f">getChecks</a>();</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <span class="keyword">auto</span> Checks = includeOnlyCrossPartitionChecks(AllChecks, PtrToPartition,</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;                                                  RtPtrChecking);</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160; </div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <span class="keywordflow">if</span> (LAI-&gt;<a class="code" href="classllvm_1_1LoopAccessInfo.html#ae6f36b5423a55bfb5d188e61205bfb54">hasConvergentOp</a>() &amp;&amp; !Checks.empty()) {</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="BPFISelLowering_8cpp.html#a2b587ba9b9a87de01895acc017e21db8">fail</a>(<span class="stringliteral">&quot;RuntimeCheckWithConvergent&quot;</span>,</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;                  <span class="stringliteral">&quot;may not insert runtime check with convergent operation&quot;</span>);</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    }</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160; </div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <span class="comment">// To keep things simple have an empty preheader before we version or clone</span></div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <span class="comment">// the loop.  (Also split if this has no predecessor, i.e. entry, because we</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    <span class="comment">// rely on PH having a predecessor.)</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    <span class="keywordflow">if</span> (!PH-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a59fb91d1691350f7d1b8e8a114e3f2a4">getSinglePredecessor</a>() || &amp;*PH-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>() != PH-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>())</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;      <a class="code" href="namespacellvm.html#ad295cb34421c21507bc9cdefe1ba3f16">SplitBlock</a>(PH, PH-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>(), DT, LI);</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160; </div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    <span class="keywordflow">if</span> (!Pred.<a class="code" href="classllvm_1_1SCEVPredicate.html#ac43f5102232a1e1819b0763536f2937a">isAlwaysTrue</a>() || !Checks.empty()) {</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!LAI-&gt;<a class="code" href="classllvm_1_1LoopAccessInfo.html#ae6f36b5423a55bfb5d188e61205bfb54">hasConvergentOp</a>() &amp;&amp; <span class="stringliteral">&quot;inserting illegal loop versioning&quot;</span>);</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160; </div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;      <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *OrigLoopID = L-&gt;<a class="code" href="classllvm_1_1Loop.html#afbcd78588d5235f99698b5c30f591382">getLoopID</a>();</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160; </div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\nPointers:\n&quot;</span>);</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(LAI-&gt;<a class="code" href="classllvm_1_1LoopAccessInfo.html#adb954e9d6470002f8ebd563b9d611bb7">getRuntimePointerChecking</a>()-&gt;<a class="code" href="classllvm_1_1RuntimePointerChecking.html#a3e60690517dfc1dd58b48cbbc1e0657f">printChecks</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>(), Checks));</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;      <a class="code" href="classllvm_1_1LoopVersioning.html">LoopVersioning</a> LVer(*LAI, Checks, L, LI, DT, SE);</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;      LVer.versionLoop(DefsUsedOutside);</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;      LVer.annotateLoopWithNoAlias();</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160; </div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;      <span class="comment">// The unversioned loop will not be changed, so we inherit all attributes</span></div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;      <span class="comment">// from the original loop, but remove the loop distribution metadata to</span></div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;      <span class="comment">// avoid to distribute it again.</span></div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;      <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *UnversionedLoopID = *<a class="code" href="namespacellvm.html#a368216c9c116e3f30d8dd352ce1370fc">makeFollowupLoopID</a>(</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;          OrigLoopID,</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;          {<a class="code" href="LoopDistribute_8cpp.html#aabc8ed42404f2c38c26bcf05be144fe8">LLVMLoopDistributeFollowupAll</a>, <a class="code" href="LoopDistribute_8cpp.html#ad745c62caa5526f1182d11cb604f5107">LLVMLoopDistributeFollowupFallback</a>},</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;          <span class="stringliteral">&quot;llvm.loop.distribute.&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;      LVer.getNonVersionedLoop()-&gt;setLoopID(UnversionedLoopID);</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    }</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160; </div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="comment">// Create identical copies of the original loop for each partition and hook</span></div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    <span class="comment">// them up sequentially.</span></div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    Partitions.cloneLoops();</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160; </div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    <span class="comment">// Now, we remove the instruction from each loop that don&#39;t belong to that</span></div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <span class="comment">// partition.</span></div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    Partitions.removeUnusedInsts();</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\nAfter removing unused Instrs:\n&quot;</span>);</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(Partitions.printBlocks());</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160; </div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="LoopDistribute_8cpp.html#a55066973bd6341f2bf872fe68071a1ef">LDistVerify</a>) {</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      LI-&gt;<a class="code" href="classllvm_1_1LoopInfoBase.html#a17a8f7aba5cca5c7f9faa779a3c4bc37">verify</a>(*DT);</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DT-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a1f08f2925fec05b265e540d29066b9c8">verify</a>(<a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309ea258d0fc76498bc434cf57e73ea5adbfc">DominatorTree::VerificationLevel::Fast</a>));</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    }</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160; </div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    ++NumLoopsDistributed;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    <span class="comment">// Report the success.</span></div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    ORE-&gt;emit([&amp;]() {</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1OptimizationRemark.html">OptimizationRemark</a>(<a class="code" href="LoopDistribute_8cpp.html#a77bc1cce3ba138324f4c8a8a107dd0cc">LDIST_NAME</a>, <span class="stringliteral">&quot;Distribute&quot;</span>, L-&gt;<a class="code" href="classllvm_1_1Loop.html#a615131659002c10601eef598d42d025e">getStartLoc</a>(),</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;                                L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>())</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;distributed loop&quot;</span>;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    });</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;  }</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;<span class="comment">  /// Provide diagnostics then \return with false.</span></div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="BPFISelLowering_8cpp.html#a2b587ba9b9a87de01895acc017e21db8">fail</a>(<a class="code" href="classllvm_1_1StringRef.html">StringRef</a> RemarkName, <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> Message) {</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;Ctx = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getContext();</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <span class="keywordtype">bool</span> Forced = isForced().value_or(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160; </div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Skipping; &quot;</span> &lt;&lt; Message &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160; </div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    <span class="comment">// With Rpass-missed report that distribution failed.</span></div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    ORE-&gt;emit([&amp;]() {</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1OptimizationRemarkMissed.html">OptimizationRemarkMissed</a>(<a class="code" href="LoopDistribute_8cpp.html#a77bc1cce3ba138324f4c8a8a107dd0cc">LDIST_NAME</a>, <span class="stringliteral">&quot;NotDistributed&quot;</span>,</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;                                      L-&gt;<a class="code" href="classllvm_1_1Loop.html#a615131659002c10601eef598d42d025e">getStartLoc</a>(), L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>())</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;loop not distributed: use -Rpass-analysis=loop-distribute for &quot;</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;                <span class="stringliteral">&quot;more &quot;</span></div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;                <span class="stringliteral">&quot;info&quot;</span>;</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    });</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160; </div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    <span class="comment">// With Rpass-analysis report why.  This is on by default if distribution</span></div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <span class="comment">// was requested explicitly.</span></div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    ORE-&gt;emit(<a class="code" href="classllvm_1_1OptimizationRemarkAnalysis.html">OptimizationRemarkAnalysis</a>(</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;                  Forced ? <a class="code" href="classllvm_1_1OptimizationRemarkAnalysis.html#aa17011a05879d3698f829ff869dc9a88">OptimizationRemarkAnalysis::AlwaysPrint</a> : <a class="code" href="LoopDistribute_8cpp.html#a77bc1cce3ba138324f4c8a8a107dd0cc">LDIST_NAME</a>,</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;                  RemarkName, L-&gt;<a class="code" href="classllvm_1_1Loop.html#a615131659002c10601eef598d42d025e">getStartLoc</a>(), L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>())</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;              &lt;&lt; <span class="stringliteral">&quot;loop not distributed: &quot;</span> &lt;&lt; Message);</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160; </div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    <span class="comment">// Also issue a warning if distribution was requested explicitly but it</span></div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    <span class="comment">// failed.</span></div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    <span class="keywordflow">if</span> (Forced)</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;      Ctx.<a class="code" href="classllvm_1_1LLVMContext.html#aad03ef5cfbe6e7cad076d9e45ba06592">diagnose</a>(<a class="code" href="classllvm_1_1DiagnosticInfoOptimizationFailure.html">DiagnosticInfoOptimizationFailure</a>(</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;          *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, L-&gt;<a class="code" href="classllvm_1_1Loop.html#a615131659002c10601eef598d42d025e">getStartLoc</a>(), <span class="stringliteral">&quot;loop not distributed: failed &quot;</span></div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;                                <span class="stringliteral">&quot;explicitly specified loop distribution&quot;</span>));</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160; </div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  }</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;<span class="comment">  /// Return if distribution forced to be enabled/disabled for the loop.</span></div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;<span class="comment">  /// If the optional has a value, it indicates whether distribution was forced</span></div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;<span class="comment">  /// to be enabled (true) or disabled (false).  If the optional has no value</span></div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;<span class="comment">  /// distribution was not forced either way.</span></div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<span class="comment"></span>  <span class="keyword">const</span> std::optional&lt;bool&gt; &amp;isForced()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> IsForced; }</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160; </div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;<span class="keyword">private</span>:<span class="comment"></span></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;<span class="comment">  /// Filter out checks between pointers from the same partition.</span></div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;<span class="comment">  /// \p PtrToPartition contains the partition number for pointers.  Partition</span></div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;<span class="comment">  /// number -1 means that the pointer is used in multiple partitions.  In this</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;<span class="comment">  /// case we can&#39;t safely omit the check.</span></div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;RuntimePointerCheck, 4&gt;</a> includeOnlyCrossPartitionChecks(</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;RuntimePointerCheck&gt;</a> &amp;AllChecks,</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;int&gt;</a> &amp;PtrToPartition,</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1RuntimePointerChecking.html">RuntimePointerChecking</a> *RtPtrChecking) {</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;RuntimePointerCheck, 4&gt;</a> Checks;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160; </div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <a class="code" href="namespacellvm.html#a4d13fd05401d8eb0c97b9864a0eb6028">copy_if</a>(AllChecks, std::back_inserter(Checks),</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;            [&amp;](<span class="keyword">const</span> <a class="code" href="namespacellvm.html#a12b6596f3de8ec2382209b04c2b5444c">RuntimePointerCheck</a> &amp;<a class="code" href="Lint_8cpp.html#a2bb73b5d562083dde29e9091dd81bef3">Check</a>) {</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;              <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> PtrIdx1 : <a class="code" href="Lint_8cpp.html#a2bb73b5d562083dde29e9091dd81bef3">Check</a>.first-&gt;Members)</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                <a class="code" href="lib_2Target_2README_8txt.html#a7df6ed7588301267782c2bd4b7f6899d">for</a> (<span class="keywordtype">unsigned</span> PtrIdx2 : <a class="code" href="Lint_8cpp.html#a2bb73b5d562083dde29e9091dd81bef3">Check</a>.second-&gt;Members)</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;                  <span class="comment">// Only include this check if there is a pair of pointers</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;                  <span class="comment">// that require checking and the pointers fall into</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;                  <span class="comment">// separate partitions.</span></div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;                  <span class="comment">//</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;                  <span class="comment">// (Note that we already know at this point that the two</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;                  <span class="comment">// pointer groups need checking but it doesn&#39;t follow</span></div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;                  <span class="comment">// that each pair of pointers within the two groups need</span></div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;                  <span class="comment">// checking as well.</span></div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;                  <span class="comment">//</span></div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;                  <span class="comment">// In other words we don&#39;t want to include a check just</span></div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;                  <span class="comment">// because there is a pair of pointers between the two</span></div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;                  <span class="comment">// pointer groups that require checks and a different</span></div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;                  <span class="comment">// pair whose pointers fall into different partitions.)</span></div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;                  <a class="code" href="include_2llvm_2Support_2CMakeLists_8txt.html#aef9367eb0b7430eaf70b1f2725488f2a">if</a> (RtPtrChecking-&gt;<a class="code" href="classllvm_1_1RuntimePointerChecking.html#a6134973479f9ed6eb1920d0fe69b6bc9">needsChecking</a>(PtrIdx1, PtrIdx2) &amp;&amp;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;                      !<a class="code" href="classllvm_1_1RuntimePointerChecking.html#a8ebeb3910d03eaa4e30ef67edc21df0b">RuntimePointerChecking::arePointersInSamePartition</a>(</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;                          PtrToPartition, PtrIdx1, PtrIdx2))</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;              <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;            });</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160; </div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    <span class="keywordflow">return</span> Checks;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  }</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;<span class="comment">  /// Check whether the loop metadata is forcing distribution to be</span></div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;<span class="comment">  /// enabled/disabled.</span></div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> setForced() {</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    std::optional&lt;const MDOperand *&gt; <a class="code" href="classllvm_1_1Value.html">Value</a> =</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;        <a class="code" href="namespacellvm.html#a258cc96f624aa50b959121d772b1a134">findStringMetadataForLoop</a>(L, <span class="stringliteral">&quot;llvm.loop.distribute.enable&quot;</span>);</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1Value.html">Value</a>)</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160; </div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MDOperand.html">MDOperand</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> = *<a class="code" href="namespacellvm_1_1TargetStackID.html#a71392100eb15ba746b1f898986f5d8a5">Value</a>;</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> &amp;&amp; mdconst::hasa&lt;ConstantInt&gt;(*<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>) &amp;&amp; <span class="stringliteral">&quot;invalid metadata&quot;</span>);</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    IsForced = mdconst::extract&lt;ConstantInt&gt;(*Op)-&gt;getZExtValue();</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;  }</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160; </div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;  <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L;</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>;</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160; </div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  <span class="comment">// Analyses used.</span></div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;  <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI;</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LoopAccessInfo.html">LoopAccessInfo</a> *LAI = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;  <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT;</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;  <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> *SE;</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;  <a class="code" href="classllvm_1_1LoopAccessInfoManager.html">LoopAccessInfoManager</a> &amp;LAIs;</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;  <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> *ORE;</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;<span class="comment">  /// Indicates whether distribution is forced to be enabled/disabled for</span></div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;<span class="comment">  /// the loop.</span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;<span class="comment">  /// If the optional has a value, it indicates whether distribution was forced</span></div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;<span class="comment">  /// to be enabled (true) or disabled (false).  If the optional has no value</span></div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;<span class="comment">  /// distribution was not forced either way.</span></div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;<span class="comment"></span>  std::optional&lt;bool&gt; IsForced;</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;};</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160; </div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;} <span class="comment">// end anonymous namespace</span></div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;<span class="comment">/// Shared implementation between new and old PMs.</span></div>
<div class="line"><a name="l00969"></a><span class="lineno"><a class="line" href="LoopDistribute_8cpp.html#ae2710e7a8aa8c356be9fd34647605cad">  969</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LoopDistribute_8cpp.html#ae2710e7a8aa8c356be9fd34647605cad">runImpl</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT,</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;                    <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> *SE, <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> *ORE,</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;                    <a class="code" href="classllvm_1_1LoopAccessInfoManager.html">LoopAccessInfoManager</a> &amp;LAIs) {</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;  <span class="comment">// Build up a worklist of inner-loops to vectorize. This is necessary as the</span></div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  <span class="comment">// act of distributing a loop creates new loops and can invalidate iterators</span></div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;  <span class="comment">// across the loops.</span></div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Loop *, 8&gt;</a> Worklist;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160; </div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Loop.html">Loop</a> *TopLevelLoop : *LI)</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L : <a class="code" href="namespacellvm.html#add49d9f7abebe402adf1a57c762abeef">depth_first</a>(TopLevelLoop))</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;      <span class="comment">// We only handle inner-most loops.</span></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;      <span class="keywordflow">if</span> (L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a16165c1e5da45acaa086c3a54a188d34">isInnermost</a>())</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;        Worklist.push_back(L);</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160; </div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  <span class="comment">// Now walk the identified inner loops.</span></div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L : Worklist) {</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    LoopDistributeForLoop <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba7c9bd3f26365a95215ef02f178696ca1">LDL</a>(L, &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, LI, DT, SE, LAIs, ORE);</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160; </div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <span class="comment">// If distribution was forced for the specific loop to be</span></div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    <span class="comment">// enabled/disabled, follow that.  Otherwise use the global flag.</span></div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba7c9bd3f26365a95215ef02f178696ca1">LDL</a>.isForced().value_or(<a class="code" href="LoopDistribute_8cpp.html#a1b65573ee8495bf5e8f92c2adebeffc4">EnableLoopDistribute</a>))</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;      Changed |= <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba7c9bd3f26365a95215ef02f178696ca1">LDL</a>.processLoop();</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;  }</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160; </div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  <span class="comment">// Process each loop nest in the function.</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;}</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160; </div>
<div class="line"><a name="l00998"></a><span class="lineno"><a class="line" href="classllvm_1_1LoopDistributePass.html#ab4ccb40cf0dd5fd358dd5e0f0d4d7c6f">  998</a></span>&#160;<a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> <a class="code" href="classllvm_1_1LoopDistributePass.html#ab4ccb40cf0dd5fd358dd5e0f0d4d7c6f">LoopDistributePass::run</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>,</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;                                          <a class="code" href="classllvm_1_1AnalysisManager.html">FunctionAnalysisManager</a> &amp;AM) {</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;  <span class="keyword">auto</span> &amp;LI = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1LoopAnalysis.html">LoopAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;  <span class="keyword">auto</span> &amp;DT = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1DominatorTreeAnalysis.html">DominatorTreeAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  <span class="keyword">auto</span> &amp;SE = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1ScalarEvolutionAnalysis.html">ScalarEvolutionAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;  <span class="keyword">auto</span> &amp;ORE = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1OptimizationRemarkEmitterAnalysis.html">OptimizationRemarkEmitterAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160; </div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;  <a class="code" href="classllvm_1_1LoopAccessInfoManager.html">LoopAccessInfoManager</a> &amp;LAIs = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1LoopAccessAnalysis.html">LoopAccessAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;  <span class="keywordtype">bool</span> Changed = <a class="code" href="LoopDistribute_8cpp.html#ae2710e7a8aa8c356be9fd34647605cad">runImpl</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, &amp;LI, &amp;DT, &amp;SE, &amp;ORE, LAIs);</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;  <span class="keywordflow">if</span> (!Changed)</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;  <a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> PA;</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;  PA.<a class="code" href="classllvm_1_1PreservedAnalyses.html#ad966bea18aa62ffb9e040509adc7c99f">preserve</a>&lt;<a class="code" href="classllvm_1_1LoopAnalysis.html">LoopAnalysis</a>&gt;();</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;  PA.<a class="code" href="classllvm_1_1PreservedAnalyses.html#ad966bea18aa62ffb9e040509adc7c99f">preserve</a>&lt;<a class="code" href="classllvm_1_1DominatorTreeAnalysis.html">DominatorTreeAnalysis</a>&gt;();</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;  <span class="keywordflow">return</span> PA;</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html">llvm::PreservedAnalyses</a></div><div class="ttdoc">A set of analyses that are preserved following a run of a transformation pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00152">PassManager.h:152</a></div></div>
<div class="ttc" id="aAssumptionCache_8h_html"><div class="ttname"><a href="AssumptionCache_8h.html">AssumptionCache.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemoryDepChecker_html"><div class="ttname"><a href="classllvm_1_1MemoryDepChecker.html">llvm::MemoryDepChecker</a></div><div class="ttdoc">Checks memory dependences among accesses to the same underlying object to determine whether there vec...</div><div class="ttdef"><b>Definition:</b> <a href="LoopAccessAnalysis_8h_source.html#l00087">LoopAccessAnalysis.h:87</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkMissed_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkMissed.html">llvm::OptimizationRemarkMissed</a></div><div class="ttdoc">Diagnostic information for missed-optimization remarks.</div><div class="ttdef"><b>Definition:</b> <a href="DiagnosticInfo_8h_source.html#l00734">DiagnosticInfo.h:734</a></div></div>
<div class="ttc" id="aLoopDistribute_8cpp_html_a955b21fc648dee43230e2c430bcb344a"><div class="ttname"><a href="LoopDistribute_8cpp.html#a955b21fc648dee43230e2c430bcb344a">DistributeSCEVCheckThreshold</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; DistributeSCEVCheckThreshold(&quot;loop-distribute-scev-check-threshold&quot;, cl::init(8), cl::Hidden, cl::desc(&quot;The maximum number of SCEV checks allowed for Loop &quot; &quot;Distribution&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolutionAnalysis_html"><div class="ttname"><a href="classllvm_1_1ScalarEvolutionAnalysis.html">llvm::ScalarEvolutionAnalysis</a></div><div class="ttdoc">Analysis pass that exposes the ScalarEvolution for a function.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l02219">ScalarEvolution.h:2219</a></div></div>
<div class="ttc" id="anamespacellvm_1_1minidump_html_aa8cbdda4c517e8f73a3f150077295280a92e592d90b9548016776a6fb68dccded"><div class="ttname"><a href="namespacellvm_1_1minidump.html#aa8cbdda4c517e8f73a3f150077295280a92e592d90b9548016776a6fb68dccded">llvm::minidump::StreamType::Unused</a></div><div class="ttdeci">@ Unused</div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aclassllvm_1_1sys_1_1path_1_1const__iterator_html_a8a503d1cbee10d1b8c8f5ac2a03b90df"><div class="ttname"><a href="classllvm_1_1sys_1_1path_1_1const__iterator.html#a8a503d1cbee10d1b8c8f5ac2a03b90df">llvm::sys::path::const_iterator::end</a></div><div class="ttdeci">friend const_iterator end(StringRef path)</div><div class="ttdoc">Get end iterator over path.</div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00235">Path.cpp:235</a></div></div>
<div class="ttc" id="anamespacellvm_html_a12b6596f3de8ec2382209b04c2b5444c"><div class="ttname"><a href="namespacellvm.html#a12b6596f3de8ec2382209b04c2b5444c">llvm::RuntimePointerCheck</a></div><div class="ttdeci">std::pair&lt; const RuntimeCheckingPtrGroup *, const RuntimeCheckingPtrGroup * &gt; RuntimePointerCheck</div><div class="ttdoc">A memcheck which made up of a pair of grouped pointers.</div><div class="ttdef"><b>Definition:</b> <a href="LoopAccessAnalysis_8h_source.html#l00369">LoopAccessAnalysis.h:369</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad1a91b49e0c092818a0b82f6cc130a1b"><div class="ttname"><a href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">llvm::make_range</a></div><div class="ttdeci">iterator_range&lt; T &gt; make_range(T x, T y)</div><div class="ttdoc">Convenience function for iterating over sub-ranges.</div><div class="ttdef"><b>Definition:</b> <a href="iterator__range_8h_source.html#l00053">iterator_range.h:53</a></div></div>
<div class="ttc" id="anamespacellvm_html_a02981de53fb6ffd384d39addc4d25f37"><div class="ttname"><a href="namespacellvm.html#a02981de53fb6ffd384d39addc4d25f37">llvm::drop_begin</a></div><div class="ttdeci">auto drop_begin(T &amp;&amp;RangeOrContainer, size_t N=1)</div><div class="ttdoc">Return a range covering RangeOrContainer with the first N elements excluded.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00386">STLExtras.h:386</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_ab48af53a5000ecede46c76dabb4578d2"><div class="ttname"><a href="classllvm_1_1LoopBase.html#ab48af53a5000ecede46c76dabb4578d2">llvm::LoopBase::getExitBlock</a></div><div class="ttdeci">BlockT * getExitBlock() const</div><div class="ttdoc">If getExitBlocks would return exactly one block, return that block.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00107">LoopInfoImpl.h:107</a></div></div>
<div class="ttc" id="aclassllvm_1_1PredicatedScalarEvolution_html_a12a8ac8838fb851a2de5dc5275307bb6"><div class="ttname"><a href="classllvm_1_1PredicatedScalarEvolution.html#a12a8ac8838fb851a2de5dc5275307bb6">llvm::PredicatedScalarEvolution::getPredicate</a></div><div class="ttdeci">const SCEVPredicate &amp; getPredicate() const</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l14758">ScalarEvolution.cpp:14758</a></div></div>
<div class="ttc" id="aValueMapper_8h_html"><div class="ttname"><a href="ValueMapper_8h.html">ValueMapper.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopAccessInfoManager_html"><div class="ttname"><a href="classllvm_1_1LoopAccessInfoManager.html">llvm::LoopAccessInfoManager</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopAccessAnalysis_8h_source.html#l00769">LoopAccessAnalysis.h:769</a></div></div>
<div class="ttc" id="aMetadata_8h_html"><div class="ttname"><a href="Metadata_8h.html">Metadata.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6f244e1d6d34701da1f29d3a762974fd"><div class="ttname"><a href="namespacellvm.html#a6f244e1d6d34701da1f29d3a762974fd">llvm::cloneLoopWithPreheader</a></div><div class="ttdeci">Loop * cloneLoopWithPreheader(BasicBlock *Before, BasicBlock *LoopDomBB, Loop *OrigLoop, ValueToValueMapTy &amp;VMap, const Twine &amp;NameSuffix, LoopInfo *LI, DominatorTree *DT, SmallVectorImpl&lt; BasicBlock * &gt; &amp;Blocks)</div><div class="ttdoc">Clones a loop OrigLoop.</div><div class="ttdef"><b>Definition:</b> <a href="CloneFunction_8cpp_source.html#l00954">CloneFunction.cpp:954</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a38bee869ad41aebfef3de2641b12004c"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">llvm::BasicBlock::getParent</a></div><div class="ttdeci">const Function * getParent() const</div><div class="ttdoc">Return the enclosing method, or null if none.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00112">BasicBlock.h:112</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html_ab9d3d5412c20747fd0110a046604f09a"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">llvm::AnalysisManager::getResult</a></div><div class="ttdeci">PassT::Result &amp; getResult(IRUnitT &amp;IR, ExtraArgTs... ExtraArgs)</div><div class="ttdoc">Get the result of an analysis pass for a given IR unit.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00774">PassManager.h:774</a></div></div>
<div class="ttc" id="aTransforms_2Scalar_8h_html"><div class="ttname"><a href="Transforms_2Scalar_8h.html">Scalar.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7d25a8a9d14a556b1ca44f8fe0dfdd8b"><div class="ttname"><a href="namespacellvm.html#a7d25a8a9d14a556b1ca44f8fe0dfdd8b">llvm::hasDisableAllTransformsHint</a></div><div class="ttdeci">bool hasDisableAllTransformsHint(const Loop *L)</div><div class="ttdoc">Look for the loop attribute that disables all transformation heuristic.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8cpp_source.html#l00344">LoopUtils.cpp:344</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00059">Function.h:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html"><div class="ttname"><a href="classllvm_1_1Loop.html">llvm::Loop</a></div><div class="ttdoc">Represents a single loop in the control flow graph.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00547">LoopInfo.h:547</a></div></div>
<div class="ttc" id="aStringRef_8h_html"><div class="ttname"><a href="StringRef_8h.html">StringRef.h</a></div></div>
<div class="ttc" id="aREADME-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00411">README-SSE.txt:411</a></div></div>
<div class="ttc" id="aPass_8h_html"><div class="ttname"><a href="Pass_8h.html">Pass.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MipsISD_html_a422daf9aa810935178671306b651d69ba7c9bd3f26365a95215ef02f178696ca1"><div class="ttname"><a href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba7c9bd3f26365a95215ef02f178696ca1">llvm::MipsISD::LDL</a></div><div class="ttdeci">@ LDL</div><div class="ttdef"><b>Definition:</b> <a href="MipsISelLowering_8h_source.html#l00252">MipsISelLowering.h:252</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector&lt; Instruction *, 8 &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfoBase_html_a17a8f7aba5cca5c7f9faa779a3c4bc37"><div class="ttname"><a href="classllvm_1_1LoopInfoBase.html#a17a8f7aba5cca5c7f9faa779a3c4bc37">llvm::LoopInfoBase::verify</a></div><div class="ttdeci">void verify(const DominatorTreeBase&lt; BlockT, false &gt; &amp;DomTree) const</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00699">LoopInfoImpl.h:699</a></div></div>
<div class="ttc" id="aStatistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1EquivalenceClasses_html"><div class="ttname"><a href="classllvm_1_1EquivalenceClasses.html">llvm::EquivalenceClasses</a></div><div class="ttdoc">EquivalenceClasses - This represents a collection of equivalence classes and supports three efficient...</div><div class="ttdef"><b>Definition:</b> <a href="EquivalenceClasses_8h_source.html#l00060">EquivalenceClasses.h:60</a></div></div>
<div class="ttc" id="aLoopAccessAnalysis_8h_html"><div class="ttname"><a href="LoopAccessAnalysis_8h.html">LoopAccessAnalysis.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_a615131659002c10601eef598d42d025e"><div class="ttname"><a href="classllvm_1_1Loop.html#a615131659002c10601eef598d42d025e">llvm::Loop::getStartLoc</a></div><div class="ttdeci">DebugLoc getStartLoc() const</div><div class="ttdoc">Return the debug location of the start of this loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00631">LoopInfo.cpp:631</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html">llvm::ScalarEvolution</a></div><div class="ttdoc">The main scalar evolution driver.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l00452">ScalarEvolution.h:452</a></div></div>
<div class="ttc" id="aclassllvm_1_1Dependence_html"><div class="ttname"><a href="classllvm_1_1Dependence.html">llvm::Dependence</a></div><div class="ttdoc">Dependence - This class represents a dependence between two memory memory references in a function.</div><div class="ttdef"><b>Definition:</b> <a href="DependenceAnalysis_8h_source.html#l00071">DependenceAnalysis.h:71</a></div></div>
<div class="ttc" id="aOptimizationRemarkEmitter_8h_html"><div class="ttname"><a href="OptimizationRemarkEmitter_8h.html">OptimizationRemarkEmitter.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTree_html"><div class="ttname"><a href="classllvm_1_1DominatorTree.html">llvm::DominatorTree</a></div><div class="ttdoc">Concrete subclass of DominatorTreeBase that is used to compute a normal dominator tree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00166">Dominators.h:166</a></div></div>
<div class="ttc" id="aGlobalsModRef_8h_html"><div class="ttname"><a href="GlobalsModRef_8h.html">GlobalsModRef.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdeci">@ Hidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00138">CommandLine.h:138</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopAccessAnalysis_html"><div class="ttname"><a href="classllvm_1_1LoopAccessAnalysis.html">llvm::LoopAccessAnalysis</a></div><div class="ttdoc">This analysis provides dependence information for the memory accesses of a loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopAccessAnalysis_8h_source.html#l00829">LoopAccessAnalysis.h:829</a></div></div>
<div class="ttc" id="aScalarEvolution_8h_html"><div class="ttname"><a href="ScalarEvolution_8h.html">ScalarEvolution.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6880d6c7da94499220b6d7dfcc3c88d4"><div class="ttname"><a href="namespacellvm.html#a6880d6c7da94499220b6d7dfcc3c88d4">llvm::findDefsUsedOutsideOfLoop</a></div><div class="ttdeci">SmallVector&lt; Instruction *, 8 &gt; findDefsUsedOutsideOfLoop(Loop *L)</div><div class="ttdoc">Returns the instructions that use values defined in the loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8cpp_source.html#l00123">LoopUtils.cpp:123</a></div></div>
<div class="ttc" id="aDenseMap_8h_html"><div class="ttname"><a href="DenseMap_8h.html">DenseMap.h</a></div></div>
<div class="ttc" id="aMSA_8txt_html_ab49a28dbe60da0a607449e5308b1ec3f"><div class="ttname"><a href="MSA_8txt.html#ab49a28dbe60da0a607449e5308b1ec3f">Instructions</a></div><div class="ttdeci">Code Generation Notes for reduce the size of the ISel and reduce repetition in the implementation In a small number of this can cause even when no optimisation has taken place Instructions</div><div class="ttdef"><b>Definition:</b> <a href="MSA_8txt_source.html#l00011">MSA.txt:11</a></div></div>
<div class="ttc" id="aclassllvm_1_1RuntimePointerChecking_html_a6134973479f9ed6eb1920d0fe69b6bc9"><div class="ttname"><a href="classllvm_1_1RuntimePointerChecking.html#a6134973479f9ed6eb1920d0fe69b6bc9">llvm::RuntimePointerChecking::needsChecking</a></div><div class="ttdeci">bool needsChecking(const RuntimeCheckingPtrGroup &amp;M, const RuntimeCheckingPtrGroup &amp;N) const</div><div class="ttdoc">Decide if we need to add a check between two groups of pointers, according to needsChecking.</div><div class="ttdef"><b>Definition:</b> <a href="LoopAccessAnalysis_8cpp_source.html#l00358">LoopAccessAnalysis.cpp:358</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sys_1_1path_html_a214ec2f04ffd92636ed4bd2717607a1d"><div class="ttname"><a href="namespacellvm_1_1sys_1_1path.html#a214ec2f04ffd92636ed4bd2717607a1d">llvm::sys::path::end</a></div><div class="ttdeci">const_iterator end(StringRef path)</div><div class="ttdoc">Get end iterator over path.</div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00235">Path.cpp:235</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sys_1_1path_html_a00a76a729b319dc47beffbe07325565f"><div class="ttname"><a href="namespacellvm_1_1sys_1_1path.html#a00a76a729b319dc47beffbe07325565f">llvm::sys::path::begin</a></div><div class="ttdeci">const_iterator begin(StringRef path, Style style=Style::native)</div><div class="ttdoc">Get begin iterator over path.</div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00226">Path.cpp:226</a></div></div>
<div class="ttc" id="aLoopDistribute_8cpp_html_a62a04cc3957acaab65259acd5469c7f5"><div class="ttname"><a href="LoopDistribute_8cpp.html#a62a04cc3957acaab65259acd5469c7f5">PragmaDistributeSCEVCheckThreshold</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; PragmaDistributeSCEVCheckThreshold(&quot;loop-distribute-scev-check-threshold-with-pragma&quot;, cl::init(128), cl::Hidden, cl::desc(&quot;The maximum number of SCEV checks allowed for Loop &quot; &quot;Distribution for loop marked with #pragma loop distribute(enable)&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdoc">SmallPtrSet - This class implements a set which is optimized for holding SmallSize or less elements.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00450">SmallPtrSet.h:450</a></div></div>
<div class="ttc" id="aLoopDistribute_8cpp_html_ad745c62caa5526f1182d11cb604f5107"><div class="ttname"><a href="LoopDistribute_8cpp.html#ad745c62caa5526f1182d11cb604f5107">LLVMLoopDistributeFollowupFallback</a></div><div class="ttdeci">static const char *const LLVMLoopDistributeFollowupFallback</div><div class="ttdef"><b>Definition:</b> <a href="LoopDistribute_8cpp_source.html#l00086">LoopDistribute.cpp:86</a></div></div>
<div class="ttc" id="anamespacellvm_html_a03503773241005f01b090b9862aad304"><div class="ttname"><a href="namespacellvm.html#a03503773241005f01b090b9862aad304">llvm::dump</a></div><div class="ttdeci">void dump(const SparseBitVector&lt; ElementSize &gt; &amp;LHS, raw_ostream &amp;out)</div><div class="ttdef"><b>Definition:</b> <a href="SparseBitVector_8h_source.html#l00877">SparseBitVector.h:877</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a59fb91d1691350f7d1b8e8a114e3f2a4"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a59fb91d1691350f7d1b8e8a114e3f2a4">llvm::BasicBlock::getSinglePredecessor</a></div><div class="ttdeci">const BasicBlock * getSinglePredecessor() const</div><div class="ttdoc">Return the predecessor of this block if it has a single predecessor block.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00284">BasicBlock.cpp:284</a></div></div>
<div class="ttc" id="aSTLExtras_8h_html"><div class="ttname"><a href="STLExtras_8h.html">STLExtras.h</a></div></div>
<div class="ttc" id="aLoopDistribute_8cpp_html_aabc8ed42404f2c38c26bcf05be144fe8"><div class="ttname"><a href="LoopDistribute_8cpp.html#aabc8ed42404f2c38c26bcf05be144fe8">LLVMLoopDistributeFollowupAll</a></div><div class="ttdeci">static const char *const LLVMLoopDistributeFollowupAll</div><div class="ttdef"><b>Definition:</b> <a href="LoopDistribute_8cpp_source.html#l00080">LoopDistribute.cpp:80</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Sched_html_ac1547cccaf660851fcd6863d1e60309ea258d0fc76498bc434cf57e73ea5adbfc"><div class="ttname"><a href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309ea258d0fc76498bc434cf57e73ea5adbfc">llvm::Sched::Fast</a></div><div class="ttdeci">@ Fast</div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l00105">TargetLowering.h:105</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00101">Debug.h:101</a></div></div>
<div class="ttc" id="aDepthFirstIterator_8h_html"><div class="ttname"><a href="DepthFirstIterator_8h.html">DepthFirstIterator.h</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00055">MD5.cpp:55</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCEVPredicate_html"><div class="ttname"><a href="classllvm_1_1SCEVPredicate.html">llvm::SCEVPredicate</a></div><div class="ttdoc">This class represents an assumption made using SCEV expressions which can be checked at run-time.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l00218">ScalarEvolution.h:218</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00055">BasicBlock.h:55</a></div></div>
<div class="ttc" id="aLoopAnalysisManager_8h_html"><div class="ttname"><a href="LoopAnalysisManager_8h.html">LoopAnalysisManager.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="aIR_2Instruction_8h_html"><div class="ttname"><a href="IR_2Instruction_8h.html">Instruction.h</a></div></div>
<div class="ttc" id="aCommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="aConstants_8h_html"><div class="ttname"><a href="Constants_8h.html">Constants.h</a></div></div>
<div class="ttc" id="aLoopDistribute_8cpp_html_a1b65573ee8495bf5e8f92c2adebeffc4"><div class="ttname"><a href="LoopDistribute_8cpp.html#a1b65573ee8495bf5e8f92c2adebeffc4">EnableLoopDistribute</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; EnableLoopDistribute(&quot;enable-loop-distribute&quot;, cl::Hidden, cl::desc(&quot;Enable the new, experimental LoopDistribution Pass&quot;), cl::init(false))</div></div>
<div class="ttc" id="aclassllvm_1_1LoopAccessInfo_html_aa67d22298695c49e80b79cb8a271928b"><div class="ttname"><a href="classllvm_1_1LoopAccessInfo.html#aa67d22298695c49e80b79cb8a271928b">llvm::LoopAccessInfo::blockNeedsPredication</a></div><div class="ttdeci">static bool blockNeedsPredication(BasicBlock *BB, Loop *TheLoop, DominatorTree *DT)</div><div class="ttdoc">Return true if the block BB needs to be predicated in order for the loop to be vectorized.</div><div class="ttdef"><b>Definition:</b> <a href="LoopAccessAnalysis_8cpp_source.html#l02519">LoopAccessAnalysis.cpp:2519</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="aTwine_8h_html"><div class="ttname"><a href="Twine_8h.html">Twine.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdoc">Instruction iterator methods.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00314">BasicBlock.h:314</a></div></div>
<div class="ttc" id="aLint_8cpp_html_a2bb73b5d562083dde29e9091dd81bef3"><div class="ttname"><a href="Lint_8cpp.html#a2bb73b5d562083dde29e9091dd81bef3">Check</a></div><div class="ttdeci">#define Check(C,...)</div><div class="ttdef"><b>Definition:</b> <a href="Lint_8cpp_source.html#l00170">Lint.cpp:170</a></div></div>
<div class="ttc" id="aTargetLibraryInfo_8h_html"><div class="ttname"><a href="TargetLibraryInfo_8h.html">TargetLibraryInfo.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1dwarf_html_a5d3c920b66ea797d6adb243862fdf47a"><div class="ttname"><a href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">llvm::dwarf::Index</a></div><div class="ttdeci">Index</div><div class="ttdef"><b>Definition:</b> <a href="Dwarf_8h_source.html#l00550">Dwarf.h:550</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a7abf5fb4071cb25dbce06dfb5ee3c937"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a></div><div class="ttdeci">static GCRegistry::Add&lt; OcamlGC &gt; B(&quot;ocaml&quot;, &quot;ocaml 3.10-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00041">Instruction.h:41</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0bf75467957937ad23ad7be19f489934"><div class="ttname"><a href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">llvm::STATISTIC</a></div><div class="ttdeci">STATISTIC(NumFunctions, &quot;Total number of functions&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1raw__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__ostream.html">llvm::raw_ostream</a></div><div class="ttdoc">This class implements an extremely fast bulk output stream that can only output to a stream.</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00052">raw_ostream.h:52</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5ee0a415cf089775fd277550b257f74e"><div class="ttname"><a href="namespacellvm.html#a5ee0a415cf089775fd277550b257f74e">llvm::operator&lt;&lt;</a></div><div class="ttdeci">raw_ostream &amp; operator&lt;&lt;(raw_ostream &amp;OS, const APFixedPoint &amp;FX)</div><div class="ttdef"><b>Definition:</b> <a href="APFixedPoint_8h_source.html#l00292">APFixedPoint.h:292</a></div></div>
<div class="ttc" id="aLoopUtils_8h_html"><div class="ttname"><a href="LoopUtils_8h.html">LoopUtils.h</a></div></div>
<div class="ttc" id="aSmallPtrSet_8h_html"><div class="ttname"><a href="SmallPtrSet_8h.html">SmallPtrSet.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeBase_html_a2881c226e1c102190d54c3b664330aba"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#a2881c226e1c102190d54c3b664330aba">llvm::DominatorTreeBase::changeImmediateDominator</a></div><div class="ttdeci">void changeImmediateDominator(DomTreeNodeBase&lt; NodeT &gt; *N, DomTreeNodeBase&lt; NodeT &gt; *NewIDom)</div><div class="ttdoc">changeImmediateDominator - This method is used to update the dominator tree information when a node's...</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00672">GenericDomTree.h:672</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemoryDepChecker_html_ae53d34947eb05175be6aa8ddf8cbf8dd"><div class="ttname"><a href="classllvm_1_1MemoryDepChecker.html#ae53d34947eb05175be6aa8ddf8cbf8dd">llvm::MemoryDepChecker::getDependences</a></div><div class="ttdeci">const SmallVectorImpl&lt; Dependence &gt; * getDependences() const</div><div class="ttdoc">Returns the memory dependences.</div><div class="ttdef"><b>Definition:</b> <a href="LoopAccessAnalysis_8h_source.html#l00221">LoopAccessAnalysis.h:221</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopAccessInfo_html_ae6f36b5423a55bfb5d188e61205bfb54"><div class="ttname"><a href="classllvm_1_1LoopAccessInfo.html#ae6f36b5423a55bfb5d188e61205bfb54">llvm::LoopAccessInfo::hasConvergentOp</a></div><div class="ttdeci">bool hasConvergentOp() const</div><div class="ttdoc">Return true if there is a convergent operation in the loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopAccessAnalysis_8h_source.html#l00574">LoopAccessAnalysis.h:574</a></div></div>
<div class="ttc" id="aLoopInfo_8h_html"><div class="ttname"><a href="LoopInfo_8h.html">LoopInfo.h</a></div></div>
<div class="ttc" id="aLoopDistribute_8cpp_html_a7b5c7ecd20091387977bde6b693081b5"><div class="ttname"><a href="LoopDistribute_8cpp.html#a7b5c7ecd20091387977bde6b693081b5">DistributeNonIfConvertible</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; DistributeNonIfConvertible(&quot;loop-distribute-non-if-convertible&quot;, cl::Hidden, cl::desc(&quot;Whether to distribute into a loop that may not be &quot; &quot;if-convertible by the loop vectorizer&quot;), cl::init(false))</div></div>
<div class="ttc" id="aLoopDistribute_8cpp_html_a77bc1cce3ba138324f4c8a8a107dd0cc"><div class="ttname"><a href="LoopDistribute_8cpp.html#a77bc1cce3ba138324f4c8a8a107dd0cc">LDIST_NAME</a></div><div class="ttdeci">#define LDIST_NAME</div><div class="ttdef"><b>Definition:</b> <a href="LoopDistribute_8cpp_source.html#l00075">LoopDistribute.cpp:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_ac233a2693163ed58305215ca2f6921e3"><div class="ttname"><a href="classllvm_1_1Loop.html#ac233a2693163ed58305215ca2f6921e3">llvm::Loop::isLoopSimplifyForm</a></div><div class="ttdeci">bool isLoopSimplifyForm() const</div><div class="ttdoc">Return true if the Loop is in the form that the LoopSimplify form transforms loops to,...</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00479">LoopInfo.cpp:479</a></div></div>
<div class="ttc" id="aBasicBlock_8h_html"><div class="ttname"><a href="BasicBlock_8h.html">BasicBlock.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt&lt; bool &gt;</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PPC_html_a14028f7fe73a11dabc6583510cc0a355"><div class="ttname"><a href="namespacellvm_1_1PPC.html#a14028f7fe73a11dabc6583510cc0a355">llvm::PPC::Predicate</a></div><div class="ttdeci">Predicate</div><div class="ttdoc">Predicate - These are &quot;(BI &lt;&lt; 5) | BO&quot; for various predicates.</div><div class="ttdef"><b>Definition:</b> <a href="PPCPredicates_8h_source.html#l00026">PPCPredicates.h:26</a></div></div>
<div class="ttc" id="aclassllvm_1_1RuntimePointerChecking_html"><div class="ttname"><a href="classllvm_1_1RuntimePointerChecking.html">llvm::RuntimePointerChecking</a></div><div class="ttdoc">Holds information about the memory runtime legality checks to verify that a group of pointers do not ...</div><div class="ttdef"><b>Definition:</b> <a href="LoopAccessAnalysis_8h_source.html#l00385">LoopAccessAnalysis.h:385</a></div></div>
<div class="ttc" id="aELFObjHandler_8cpp_html_aef61945034b9431b804748fc317c5548"><div class="ttname"><a href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a></div><div class="ttdeci">uint32_t Index</div><div class="ttdef"><b>Definition:</b> <a href="ELFObjHandler_8cpp_source.html#l00083">ELFObjHandler.cpp:83</a></div></div>
<div class="ttc" id="astructllvm_1_1MemoryDepChecker_1_1Dependence_html"><div class="ttname"><a href="structllvm_1_1MemoryDepChecker_1_1Dependence.html">llvm::MemoryDepChecker::Dependence</a></div><div class="ttdoc">Dependece between memory access instructions.</div><div class="ttdef"><b>Definition:</b> <a href="LoopAccessAnalysis_8h_source.html#l00108">LoopAccessAnalysis.h:108</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_ad966bea18aa62ffb9e040509adc7c99f"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#ad966bea18aa62ffb9e040509adc7c99f">llvm::PreservedAnalyses::preserve</a></div><div class="ttdeci">void preserve()</div><div class="ttdoc">Mark an analysis as preserved.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00173">PassManager.h:173</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopVersioning_html"><div class="ttname"><a href="classllvm_1_1LoopVersioning.html">llvm::LoopVersioning</a></div><div class="ttdoc">This class emits a version of the loop where run-time checks ensure that may-alias pointers can't ove...</div><div class="ttdef"><b>Definition:</b> <a href="LoopVersioning_8h_source.html#l00041">LoopVersioning.h:41</a></div></div>
<div class="ttc" id="anamespacellvm_html_a258cc96f624aa50b959121d772b1a134"><div class="ttname"><a href="namespacellvm.html#a258cc96f624aa50b959121d772b1a134">llvm::findStringMetadataForLoop</a></div><div class="ttdeci">std::optional&lt; const MDOperand * &gt; findStringMetadataForLoop(const Loop *TheLoop, StringRef Name)</div><div class="ttdoc">Find string metadata for loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l01053">LoopInfo.cpp:1053</a></div></div>
<div class="ttc" id="anamespacellvm_html_a368216c9c116e3f30d8dd352ce1370fc"><div class="ttname"><a href="namespacellvm.html#a368216c9c116e3f30d8dd352ce1370fc">llvm::makeFollowupLoopID</a></div><div class="ttdeci">std::optional&lt; MDNode * &gt; makeFollowupLoopID(MDNode *OrigLoopID, ArrayRef&lt; StringRef &gt; FollowupAttrs, const char *InheritOptionsAttrsPrefix=&quot;&quot;, bool AlwaysNew=false)</div><div class="ttdoc">Create a new loop identifier for a loop created from a loop transformation.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8cpp_source.html#l00263">LoopUtils.cpp:263</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARM__AM_html_a5d0557608eaebed12bc00812724ba2cdae6bcee28992dab735eaa43f5dfa48a09"><div class="ttname"><a href="namespacellvm_1_1ARM__AM.html#a5d0557608eaebed12bc00812724ba2cdae6bcee28992dab735eaa43f5dfa48a09">llvm::ARM_AM::add</a></div><div class="ttdeci">@ add</div><div class="ttdef"><b>Definition:</b> <a href="ARMAddressingModes_8h_source.html#l00039">ARMAddressingModes.h:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopAccessInfo_html_a219e7cd38fd20b261c252194b9ab4b92"><div class="ttname"><a href="classllvm_1_1LoopAccessInfo.html#a219e7cd38fd20b261c252194b9ab4b92">llvm::LoopAccessInfo::getInstructionsForAccess</a></div><div class="ttdeci">SmallVector&lt; Instruction *, 4 &gt; getInstructionsForAccess(Value *Ptr, bool isWrite) const</div><div class="ttdoc">Return the list of instructions that use Ptr to read or write memory.</div><div class="ttdef"><b>Definition:</b> <a href="LoopAccessAnalysis_8h_source.html#l00608">LoopAccessAnalysis.h:608</a></div></div>
<div class="ttc" id="aclassllvm_1_1RuntimePointerChecking_html_ad9538136df42a114d41ee07f61793c1f"><div class="ttname"><a href="classllvm_1_1RuntimePointerChecking.html#ad9538136df42a114d41ee07f61793c1f">llvm::RuntimePointerChecking::getChecks</a></div><div class="ttdeci">const SmallVectorImpl&lt; RuntimePointerCheck &gt; &amp; getChecks() const</div><div class="ttdoc">Returns the checks that generateChecks created.</div><div class="ttdef"><b>Definition:</b> <a href="LoopAccessAnalysis_8h_source.html#l00447">LoopAccessAnalysis.h:447</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLVMContext_html"><div class="ttname"><a href="classllvm_1_1LLVMContext.html">llvm::LLVMContext</a></div><div class="ttdoc">This is an important class for using LLVM in a threaded context.</div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00067">LLVMContext.h:67</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00714">DenseMap.h:714</a></div></div>
<div class="ttc" id="aBPFISelLowering_8cpp_html_a2b587ba9b9a87de01895acc017e21db8"><div class="ttname"><a href="BPFISelLowering_8cpp.html#a2b587ba9b9a87de01895acc017e21db8">fail</a></div><div class="ttdeci">static void fail(const SDLoc &amp;DL, SelectionDAG &amp;DAG, const Twine &amp;Msg)</div><div class="ttdef"><b>Definition:</b> <a href="BPFISelLowering_8cpp_source.html#l00038">BPFISelLowering.cpp:38</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopAccessInfo_html_adb954e9d6470002f8ebd563b9d611bb7"><div class="ttname"><a href="classllvm_1_1LoopAccessInfo.html#adb954e9d6470002f8ebd563b9d611bb7">llvm::LoopAccessInfo::getRuntimePointerChecking</a></div><div class="ttdeci">const RuntimePointerChecking * getRuntimePointerChecking() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopAccessAnalysis_8h_source.html#l00576">LoopAccessAnalysis.h:576</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="aCloning_8h_html"><div class="ttname"><a href="Cloning_8h.html">Cloning.h</a></div></div>
<div class="ttc" id="aLoopDistribute_8cpp_html_ae2710e7a8aa8c356be9fd34647605cad"><div class="ttname"><a href="LoopDistribute_8cpp.html#ae2710e7a8aa8c356be9fd34647605cad">runImpl</a></div><div class="ttdeci">static bool runImpl(Function &amp;F, LoopInfo *LI, DominatorTree *DT, ScalarEvolution *SE, OptimizationRemarkEmitter *ORE, LoopAccessInfoManager &amp;LAIs)</div><div class="ttdoc">Shared implementation between new and old PMs.</div><div class="ttdef"><b>Definition:</b> <a href="LoopDistribute_8cpp_source.html#l00969">LoopDistribute.cpp:969</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00445">CommandLine.h:445</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopAccessInfo_html"><div class="ttname"><a href="classllvm_1_1LoopAccessInfo.html">llvm::LoopAccessInfo</a></div><div class="ttdoc">Drive the analysis of memory accesses in the loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopAccessAnalysis_8h_source.html#l00562">LoopAccessAnalysis.h:562</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_ac3280e7f76f955403fe17eacf126b90d"><div class="ttname"><a href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">llvm::LoopBase::getLoopPreheader</a></div><div class="ttdeci">BlockT * getLoopPreheader() const</div><div class="ttdoc">If there is a preheader for this loop, return it.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00183">LoopInfoImpl.h:183</a></div></div>
<div class="ttc" id="aclassllvm_1_1sys_1_1path_1_1const__iterator_html_a88c072843122519fd4f3547f2a0ab178"><div class="ttname"><a href="classllvm_1_1sys_1_1path_1_1const__iterator.html#a88c072843122519fd4f3547f2a0ab178">llvm::sys::path::const_iterator::begin</a></div><div class="ttdeci">friend const_iterator begin(StringRef path, Style style)</div><div class="ttdoc">Get begin iterator over path.</div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00226">Path.cpp:226</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="aclassllvm_1_1MemoryDepChecker_html_ae07adbf6fb17302a12eea675eed91d1d"><div class="ttname"><a href="classllvm_1_1MemoryDepChecker.html#ae07adbf6fb17302a12eea675eed91d1d">llvm::MemoryDepChecker::getMemoryInstructions</a></div><div class="ttdeci">const SmallVectorImpl&lt; Instruction * &gt; &amp; getMemoryInstructions() const</div><div class="ttdoc">The vector of memory access instructions.</div><div class="ttdef"><b>Definition:</b> <a href="LoopAccessAnalysis_8h_source.html#l00229">LoopAccessAnalysis.h:229</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopDistributePass_html_ab4ccb40cf0dd5fd358dd5e0f0d4d7c6f"><div class="ttname"><a href="classllvm_1_1LoopDistributePass.html#ab4ccb40cf0dd5fd358dd5e0f0d4d7c6f">llvm::LoopDistributePass::run</a></div><div class="ttdeci">PreservedAnalyses run(Function &amp;F, FunctionAnalysisManager &amp;AM)</div><div class="ttdef"><b>Definition:</b> <a href="LoopDistribute_8cpp_source.html#l00998">LoopDistribute.cpp:998</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopAccessInfo_html_a3e05d925e750d2cffbf3c385f3a5028c"><div class="ttname"><a href="classllvm_1_1LoopAccessInfo.html#a3e05d925e750d2cffbf3c385f3a5028c">llvm::LoopAccessInfo::canVectorizeMemory</a></div><div class="ttdeci">bool canVectorizeMemory() const</div><div class="ttdoc">Return true we can analyze the memory accesses in the loop and there are no memory dependence cycles.</div><div class="ttdef"><b>Definition:</b> <a href="LoopAccessAnalysis_8h_source.html#l00569">LoopAccessAnalysis.h:569</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCEVPredicate_html_ac43f5102232a1e1819b0763536f2937a"><div class="ttname"><a href="classllvm_1_1SCEVPredicate.html#ac43f5102232a1e1819b0763536f2937a">llvm::SCEVPredicate::isAlwaysTrue</a></div><div class="ttdeci">virtual bool isAlwaysTrue() const =0</div><div class="ttdoc">Returns true if the predicate is always true.</div></div>
<div class="ttc" id="aTargetLibraryInfo_8cpp_html_aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053"><div class="ttname"><a href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a></div><div class="ttdeci">@ Ptr</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8cpp_source.html#l00062">TargetLibraryInfo.cpp:62</a></div></div>
<div class="ttc" id="aiterator__range_8h_html"><div class="ttname"><a href="iterator__range_8h.html">iterator_range.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html"><div class="ttname"><a href="classllvm_1_1MDNode.html">llvm::MDNode</a></div><div class="ttdoc">Metadata node.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00943">Metadata.h:943</a></div></div>
<div class="ttc" id="aXtensaAsmBackend_8cpp_html_a13a0babfc55adc9b798c39e65ec9e8a3"><div class="ttname"><a href="XtensaAsmBackend_8cpp.html#a13a0babfc55adc9b798c39e65ec9e8a3">getSize</a></div><div class="ttdeci">static unsigned getSize(unsigned Kind)</div><div class="ttdef"><b>Definition:</b> <a href="XtensaAsmBackend_8cpp_source.html#l00134">XtensaAsmBackend.cpp:134</a></div></div>
<div class="ttc" id="anamespacellvm_html_a67980a8ae101d2fda845eb750ffb1942"><div class="ttname"><a href="namespacellvm.html#a67980a8ae101d2fda845eb750ffb1942">llvm::print</a></div><div class="ttdeci">Printable print(const GCNRegPressure &amp;RP, const GCNSubtarget *ST=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="GCNRegPressure_8cpp_source.html#l00138">GCNRegPressure.cpp:138</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopAccessInfo_html_acbe724e001e95a061672be1975932c0b"><div class="ttname"><a href="classllvm_1_1LoopAccessInfo.html#acbe724e001e95a061672be1975932c0b">llvm::LoopAccessInfo::getDepChecker</a></div><div class="ttdeci">const MemoryDepChecker &amp; getDepChecker() const</div><div class="ttdoc">the Memory Dependence Checker which can determine the loop-independent and loop-carried dependences b...</div><div class="ttdef"><b>Definition:</b> <a href="LoopAccessAnalysis_8h_source.html#l00604">LoopAccessAnalysis.h:604</a></div></div>
<div class="ttc" id="aLoopDistribute_8cpp_html_a77dc93bcea21a71e8fbe91889992d399"><div class="ttname"><a href="LoopDistribute_8cpp.html#a77dc93bcea21a71e8fbe91889992d399">LLVMLoopDistributeFollowupSequential</a></div><div class="ttdeci">static const char *const LLVMLoopDistributeFollowupSequential</div><div class="ttdef"><b>Definition:</b> <a href="LoopDistribute_8cpp_source.html#l00084">LoopDistribute.cpp:84</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfo_html"><div class="ttname"><a href="classllvm_1_1LoopInfo.html">llvm::LoopInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l01108">LoopInfo.h:1108</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkEmitter_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkEmitter.html">llvm::OptimizationRemarkEmitter</a></div><div class="ttdoc">The optimization diagnostic interface.</div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8h_source.html#l00033">OptimizationRemarkEmitter.h:33</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCEVPredicate_html_a4e26ec305e394c496dd3f2a16c6d58e5"><div class="ttname"><a href="classllvm_1_1SCEVPredicate.html#a4e26ec305e394c496dd3f2a16c6d58e5">llvm::SCEVPredicate::getComplexity</a></div><div class="ttdeci">virtual unsigned getComplexity() const</div><div class="ttdoc">Returns the estimated complexity of this predicate.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l00241">ScalarEvolution.h:241</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html"><div class="ttname"><a href="classllvm_1_1StringRef.html">llvm::StringRef</a></div><div class="ttdoc">StringRef - Represent a constant reference to a string, i.e.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00050">StringRef.h:50</a></div></div>
<div class="ttc" id="ainclude_2llvm_2Support_2CMakeLists_8txt_html_aef9367eb0b7430eaf70b1f2725488f2a"><div class="ttname"><a href="include_2llvm_2Support_2CMakeLists_8txt.html#aef9367eb0b7430eaf70b1f2725488f2a">if</a></div><div class="ttdeci">if(llvm_vc STREQUAL &quot;&quot;) set(fake_version_inc &quot;$</div><div class="ttdef"><b>Definition:</b> <a href="include_2llvm_2Support_2CMakeLists_8txt_source.html#l00014">CMakeLists.txt:14</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkAnalysis_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkAnalysis.html">llvm::OptimizationRemarkAnalysis</a></div><div class="ttdoc">Diagnostic information for optimization analysis remarks.</div><div class="ttdef"><b>Definition:</b> <a href="DiagnosticInfo_8h_source.html#l00780">DiagnosticInfo.h:780</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_adb5c319f5905c1d3ca9eb5df546388c5"><div class="ttname"><a href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">Return a constant reference to the value's name.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00308">Value.cpp:308</a></div></div>
<div class="ttc" id="aclassllvm_1_1ValueMap_html"><div class="ttname"><a href="classllvm_1_1ValueMap.html">llvm::ValueMap&lt; const Value *, WeakTrackingVH &gt;</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_a7df6ed7588301267782c2bd4b7f6899d"><div class="ttname"><a href="lib_2Target_2README_8txt.html#a7df6ed7588301267782c2bd4b7f6899d">for</a></div><div class="ttdeci">this could be done in SelectionDAGISel along with other special for</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00104">README.txt:104</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_a1600c7959045cb6b6a5f5a1d427ec67e"><div class="ttname"><a href="classllvm_1_1User.html#a1600c7959045cb6b6a5f5a1d427ec67e">llvm::User::replaceUsesOfWith</a></div><div class="ttdeci">bool replaceUsesOfWith(Value *From, Value *To)</div><div class="ttdoc">Replace uses of one Value with another.</div><div class="ttdef"><b>Definition:</b> <a href="User_8cpp_source.html#l00021">User.cpp:21</a></div></div>
<div class="ttc" id="aSampleProfWriter_8cpp_html_ac5f3689931c7238da06ba00cf1002c62"><div class="ttname"><a href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a></div><div class="ttdeci">raw_pwrite_stream &amp; OS</div><div class="ttdef"><b>Definition:</b> <a href="SampleProfWriter_8cpp_source.html#l00053">SampleProfWriter.cpp:53</a></div></div>
<div class="ttc" id="anamespacellvm_html_add49d9f7abebe402adf1a57c762abeef"><div class="ttname"><a href="namespacellvm.html#add49d9f7abebe402adf1a57c762abeef">llvm::depth_first</a></div><div class="ttdeci">iterator_range&lt; df_iterator&lt; T &gt; &gt; depth_first(const T &amp;G)</div><div class="ttdef"><b>Definition:</b> <a href="DepthFirstIterator_8h_source.html#l00229">DepthFirstIterator.h:229</a></div></div>
<div class="ttc" id="aclassllvm_1_1RuntimePointerChecking_html_aa6ad96a1c2591e0a61c92e0be5776978"><div class="ttname"><a href="classllvm_1_1RuntimePointerChecking.html#aa6ad96a1c2591e0a61c92e0be5776978">llvm::RuntimePointerChecking::Pointers</a></div><div class="ttdeci">SmallVector&lt; PointerInfo, 2 &gt; Pointers</div><div class="ttdoc">Information about the pointers that may require checking.</div><div class="ttdef"><b>Definition:</b> <a href="LoopAccessAnalysis_8h_source.html#l00483">LoopAccessAnalysis.h:483</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a16165c1e5da45acaa086c3a54a188d34"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a16165c1e5da45acaa086c3a54a188d34">llvm::LoopBase::isInnermost</a></div><div class="ttdeci">bool isInnermost() const</div><div class="ttdoc">Return true if the loop does not contain any (natural) loops.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00182">LoopInfo.h:182</a></div></div>
<div class="ttc" id="aclassllvm_1_1RuntimePointerChecking_html_a8ebeb3910d03eaa4e30ef67edc21df0b"><div class="ttname"><a href="classllvm_1_1RuntimePointerChecking.html#a8ebeb3910d03eaa4e30ef67edc21df0b">llvm::RuntimePointerChecking::arePointersInSamePartition</a></div><div class="ttdeci">static bool arePointersInSamePartition(const SmallVectorImpl&lt; int &gt; &amp;PtrToPartition, unsigned PtrIdx1, unsigned PtrIdx2)</div><div class="ttdoc">Check if pointers are in the same partition.</div><div class="ttdef"><b>Definition:</b> <a href="LoopAccessAnalysis_8cpp_source.html#l00546">LoopAccessAnalysis.cpp:546</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLVMContext_html_aad03ef5cfbe6e7cad076d9e45ba06592"><div class="ttname"><a href="classllvm_1_1LLVMContext.html#aad03ef5cfbe6e7cad076d9e45ba06592">llvm::LLVMContext::diagnose</a></div><div class="ttdeci">void diagnose(const DiagnosticInfo &amp;DI)</div><div class="ttdoc">Report a message to the currently installed diagnostic handler.</div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8cpp_source.html#l00248">LLVMContext.cpp:248</a></div></div>
<div class="ttc" id="aclassllvm_1_1Twine_html"><div class="ttname"><a href="classllvm_1_1Twine.html">llvm::Twine</a></div><div class="ttdoc">Twine - A lightweight data structure for efficiently representing the concatenation of temporary valu...</div><div class="ttdef"><b>Definition:</b> <a href="Twine_8h_source.html#l00081">Twine.h:81</a></div></div>
<div class="ttc" id="anamespacellvm_html_a4d13fd05401d8eb0c97b9864a0eb6028"><div class="ttname"><a href="namespacellvm.html#a4d13fd05401d8eb0c97b9864a0eb6028">llvm::copy_if</a></div><div class="ttdeci">OutputIt copy_if(R &amp;&amp;Range, OutputIt Out, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::copy_if which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01781">STLExtras.h:1781</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_adf4be757fa30ca7fe3e8b119438100f0"><div class="ttname"><a href="classllvm_1_1Loop.html#adf4be757fa30ca7fe3e8b119438100f0">llvm::Loop::setLoopID</a></div><div class="ttdeci">void setLoopID(MDNode *LoopID) const</div><div class="ttdoc">Set the llvm.loop loop id metadata for this loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00525">LoopInfo.cpp:525</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1SendMsg_html_a8594419a4ddfad2c9a79279c490e466d"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">llvm::AMDGPU::SendMsg::Op</a></div><div class="ttdeci">Op</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00357">SIDefines.h:357</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_a1258a1ff55557c27684010ebd7283712"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">llvm::PreservedAnalyses::all</a></div><div class="ttdeci">static PreservedAnalyses all()</div><div class="ttdoc">Construct a special preserved set that preserves all passes.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00158">PassManager.h:158</a></div></div>
<div class="ttc" id="aLoopDistribute_8cpp_html_a55066973bd6341f2bf872fe68071a1ef"><div class="ttname"><a href="LoopDistribute_8cpp.html#a55066973bd6341f2bf872fe68071a1ef">LDistVerify</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; LDistVerify(&quot;loop-distribute-verify&quot;, cl::Hidden, cl::desc(&quot;Turn on DominatorTree and LoopInfo verification &quot; &quot;after Loop Distribution&quot;), cl::init(false))</div></div>
<div class="ttc" id="aclassllvm_1_1RuntimePointerChecking_html_a3e60690517dfc1dd58b48cbbc1e0657f"><div class="ttname"><a href="classllvm_1_1RuntimePointerChecking.html#a3e60690517dfc1dd58b48cbbc1e0657f">llvm::RuntimePointerChecking::printChecks</a></div><div class="ttdeci">void printChecks(raw_ostream &amp;OS, const SmallVectorImpl&lt; RuntimePointerCheck &gt; &amp;Checks, unsigned Depth=0) const</div><div class="ttdoc">Print Checks.</div><div class="ttdef"><b>Definition:</b> <a href="LoopAccessAnalysis_8cpp_source.html#l00572">LoopAccessAnalysis.cpp:572</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_afbcd78588d5235f99698b5c30f591382"><div class="ttname"><a href="classllvm_1_1Loop.html#afbcd78588d5235f99698b5c30f591382">llvm::Loop::getLoopID</a></div><div class="ttdeci">MDNode * getLoopID() const</div><div class="ttdoc">Return the llvm.loop loop id metadata node for this loop if it is present.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00501">LoopInfo.cpp:501</a></div></div>
<div class="ttc" id="aCasting_8h_html"><div class="ttname"><a href="Casting_8h.html">Casting.h</a></div></div>
<div class="ttc" id="aDiagnosticInfo_8h_html"><div class="ttname"><a href="DiagnosticInfo_8h.html">DiagnosticInfo.h</a></div></div>
<div class="ttc" id="aFunction_8h_html"><div class="ttname"><a href="Function_8h.html">Function.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a58c5b170ea68b41e94ebb0019523a68f"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">llvm::LoopBase::getHeader</a></div><div class="ttdeci">BlockT * getHeader() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00105">LoopInfo.h:105</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab8ec5c940fbc440c992716fbe4a48636"><div class="ttname"><a href="namespacellvm.html#ab8ec5c940fbc440c992716fbe4a48636">llvm::remapInstructionsInBlocks</a></div><div class="ttdeci">void remapInstructionsInBlocks(ArrayRef&lt; BasicBlock * &gt; Blocks, ValueToValueMapTy &amp;VMap)</div><div class="ttdoc">Remaps instructions in Blocks using the mapping in VMap.</div><div class="ttdef"><b>Definition:</b> <a href="CloneFunction_8cpp_source.html#l00940">CloneFunction.cpp:940</a></div></div>
<div class="ttc" id="anamespacellvm_1_1TargetStackID_html_a71392100eb15ba746b1f898986f5d8a5"><div class="ttname"><a href="namespacellvm_1_1TargetStackID.html#a71392100eb15ba746b1f898986f5d8a5">llvm::TargetStackID::Value</a></div><div class="ttdeci">Value</div><div class="ttdef"><b>Definition:</b> <a href="TargetFrameLowering_8h_source.html#l00027">TargetFrameLowering.h:27</a></div></div>
<div class="ttc" id="aPassManager_8h_html"><div class="ttname"><a href="PassManager_8h.html">PassManager.h</a></div></div>
<div class="ttc" id="aEquivalenceClasses_8h_html"><div class="ttname"><a href="EquivalenceClasses_8h.html">EquivalenceClasses.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DiagnosticInfoOptimizationFailure_html"><div class="ttname"><a href="classllvm_1_1DiagnosticInfoOptimizationFailure.html">llvm::DiagnosticInfoOptimizationFailure</a></div><div class="ttdoc">Diagnostic information for optimization failures.</div><div class="ttdef"><b>Definition:</b> <a href="DiagnosticInfo_8h_source.html#l00976">DiagnosticInfo.h:976</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkAnalysis_html_aa17011a05879d3698f829ff869dc9a88"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkAnalysis.html#aa17011a05879d3698f829ff869dc9a88">llvm::OptimizationRemarkAnalysis::AlwaysPrint</a></div><div class="ttdeci">static const char * AlwaysPrint</div><div class="ttdef"><b>Definition:</b> <a href="DiagnosticInfo_8h_source.html#l00820">DiagnosticInfo.h:820</a></div></div>
<div class="ttc" id="aLoopVersioning_8h_html"><div class="ttname"><a href="LoopVersioning_8h.html">LoopVersioning.h</a></div></div>
<div class="ttc" id="aLoopDistribute_8h_html"><div class="ttname"><a href="LoopDistribute_8h.html">LoopDistribute.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeAnalysis_html"><div class="ttname"><a href="classllvm_1_1DominatorTreeAnalysis.html">llvm::DominatorTreeAnalysis</a></div><div class="ttdoc">Analysis pass which computes a DominatorTree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00279">Dominators.h:279</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemark_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemark.html">llvm::OptimizationRemark</a></div><div class="ttdoc">Diagnostic information for applied optimization remarks.</div><div class="ttdef"><b>Definition:</b> <a href="DiagnosticInfo_8h_source.html#l00689">DiagnosticInfo.h:689</a></div></div>
<div class="ttc" id="aInstructions_8h_html"><div class="ttname"><a href="Instructions_8h.html">Instructions.h</a></div></div>
<div class="ttc" id="aELFYAML_8cpp_html_a941c34da9850676ce3380813c636cff2"><div class="ttname"><a href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a></div><div class="ttdeci">std::optional&lt; std::vector&lt; StOtherPiece &gt; &gt; Other</div><div class="ttdef"><b>Definition:</b> <a href="ELFYAML_8cpp_source.html#l01260">ELFYAML.cpp:1260</a></div></div>
<div class="ttc" id="aSmallVector_8h_html"><div class="ttname"><a href="SmallVector_8h.html">SmallVector.h</a></div></div>
<div class="ttc" id="aDominators_8h_html"><div class="ttname"><a href="Dominators_8h.html">Dominators.h</a></div></div>
<div class="ttc" id="aLoopDistribute_8cpp_html_a0e223b220eee303ce1cb10e76a0b11af"><div class="ttname"><a href="LoopDistribute_8cpp.html#a0e223b220eee303ce1cb10e76a0b11af">LLVMLoopDistributeFollowupCoincident</a></div><div class="ttdeci">static const char *const LLVMLoopDistributeFollowupCoincident</div><div class="ttdef"><b>Definition:</b> <a href="LoopDistribute_8cpp_source.html#l00082">LoopDistribute.cpp:82</a></div></div>
<div class="ttc" id="aregcomp_8c_html_a0240ac851181b84ac374872dc5434ee4"><div class="ttname"><a href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></div><div class="ttdeci">#define N</div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a1a7f07aaef6a3bee130bf0e0f0536802"><div class="ttname"><a href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00090">Instruction.h:90</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeBase_html_a1f08f2925fec05b265e540d29066b9c8"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#a1f08f2925fec05b265e540d29066b9c8">llvm::DominatorTreeBase::verify</a></div><div class="ttdeci">bool verify(VerificationLevel VL=VerificationLevel::Full) const</div><div class="ttdoc">verify - checks if the tree is correct.</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00819">GenericDomTree.h:819</a></div></div>
<div class="ttc" id="aTargetTransformInfo_8h_html"><div class="ttname"><a href="TargetTransformInfo_8h.html">TargetTransformInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a8de021e28a3c04c9216ad8decf104f02"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">const Instruction * getTerminator() const LLVM_READONLY</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00127">BasicBlock.h:127</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl&lt; Instruction * &gt;</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6b0ac1fa4f05de76413c5e0ca6334035"><div class="ttname"><a href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">llvm::reverse</a></div><div class="ttdeci">auto reverse(ContainerTy &amp;&amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00484">STLExtras.h:484</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html">llvm::AnalysisManager</a></div><div class="ttdoc">A container for analyses that lazily runs them and caches their results.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00042">InstructionSimplify.h:42</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="aLLVMContext_8h_html"><div class="ttname"><a href="LLVMContext_8h.html">LLVMContext.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_a94bf09763773a48bc03a0461fb572a0c"><div class="ttname"><a href="classllvm_1_1Loop.html#a94bf09763773a48bc03a0461fb572a0c">llvm::Loop::isRotatedForm</a></div><div class="ttdeci">bool isRotatedForm() const</div><div class="ttdoc">Return true if the loop is in rotated form.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00810">LoopInfo.h:810</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00411">CommandLine.h:411</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopAccessInfo_html_aa9d24e39eb41447892aaf8fdcff0f16a"><div class="ttname"><a href="classllvm_1_1LoopAccessInfo.html#aa9d24e39eb41447892aaf8fdcff0f16a">llvm::LoopAccessInfo::getPSE</a></div><div class="ttdeci">const PredicatedScalarEvolution &amp; getPSE() const</div><div class="ttdoc">Used to add runtime SCEV checks.</div><div class="ttdef"><b>Definition:</b> <a href="LoopAccessAnalysis_8h_source.html#l00639">LoopAccessAnalysis.h:639</a></div></div>
<div class="ttc" id="araw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="aBasicBlockUtils_8h_html"><div class="ttname"><a href="BasicBlockUtils_8h.html">BasicBlockUtils.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad295cb34421c21507bc9cdefe1ba3f16"><div class="ttname"><a href="namespacellvm.html#ad295cb34421c21507bc9cdefe1ba3f16">llvm::SplitBlock</a></div><div class="ttdeci">BasicBlock * SplitBlock(BasicBlock *Old, Instruction *SplitPt, DominatorTree *DT, LoopInfo *LI=nullptr, MemorySSAUpdater *MSSAU=nullptr, const Twine &amp;BBName=&quot;&quot;, bool Before=false)</div><div class="ttdoc">Split the specified block at the specified instruction.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00935">BasicBlockUtils.cpp:935</a></div></div>
<div class="ttc" id="aValue_8h_html"><div class="ttname"><a href="Value_8h.html">Value.h</a></div></div>
<div class="ttc" id="aInitializePasses_8h_html"><div class="ttname"><a href="InitializePasses_8h.html">InitializePasses.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkEmitterAnalysis_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkEmitterAnalysis.html">llvm::OptimizationRemarkEmitterAnalysis</a></div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8h_source.html#l00164">OptimizationRemarkEmitter.h:164</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00074">Value.h:74</a></div></div>
<div class="ttc" id="aDebug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDOperand_html"><div class="ttname"><a href="classllvm_1_1MDOperand.html">llvm::MDOperand</a></div><div class="ttdoc">Tracking metadata reference owned by Metadata.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00772">Metadata.h:772</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopAnalysis_html"><div class="ttname"><a href="classllvm_1_1LoopAnalysis.html">llvm::LoopAnalysis</a></div><div class="ttdoc">Analysis pass that exposes the LoopInfo for a function.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l01268">LoopInfo.h:1268</a></div></div>
<div class="ttc" id="aclassllvm_1_1PoisonValue_html_a1bf08613fb664a2e377a9a72c59a6b66"><div class="ttname"><a href="classllvm_1_1PoisonValue.html#a1bf08613fb664a2e377a9a72c59a6b66">llvm::PoisonValue::get</a></div><div class="ttdeci">static PoisonValue * get(Type *T)</div><div class="ttdoc">Static factory methods - Return an 'poison' object of the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01759">Constants.cpp:1759</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:31:44 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Transforms/IPO/GlobalOpt.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a72932e0778af28115095468f6286ff8.html">Transforms</a></li><li class="navelem"><a class="el" href="dir_13abb262e9c52ddea8d07639819afd6c.html">IPO</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">GlobalOpt.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="GlobalOpt_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- GlobalOpt.cpp - Optimize Global Variables --------------------------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This pass transforms simple global variables that never have their address</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// taken.  If obviously true, it marks read/write globals as constant, deletes</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// variables only stored to, etc.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160; </div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="GlobalOpt_8h.html">llvm/Transforms/IPO/GlobalOpt.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseMap_8h.html">llvm/ADT/DenseMap.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="STLExtras_8h.html">llvm/ADT/STLExtras.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallPtrSet_8h.html">llvm/ADT/SmallPtrSet.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallVector_8h.html">llvm/ADT/SmallVector.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SetVector_8h.html">llvm/ADT/SetVector.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Twine_8h.html">llvm/ADT/Twine.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="iterator__range_8h.html">llvm/ADT/iterator_range.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BlockFrequencyInfo_8h.html">llvm/Analysis/BlockFrequencyInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ConstantFolding_8h.html">llvm/Analysis/ConstantFolding.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MemoryBuiltins_8h.html">llvm/Analysis/MemoryBuiltins.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetLibraryInfo_8h.html">llvm/Analysis/TargetLibraryInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetTransformInfo_8h.html">llvm/Analysis/TargetTransformInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueTracking_8h.html">llvm/Analysis/ValueTracking.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Dwarf_8h.html">llvm/BinaryFormat/Dwarf.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Attributes_8h.html">llvm/IR/Attributes.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlock_8h.html">llvm/IR/BasicBlock.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CallingConv_8h.html">llvm/IR/CallingConv.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constant_8h.html">llvm/IR/Constant.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constants_8h.html">llvm/IR/Constants.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DataLayout_8h.html">llvm/IR/DataLayout.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DebugInfoMetadata_8h.html">llvm/IR/DebugInfoMetadata.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DerivedTypes_8h.html">llvm/IR/DerivedTypes.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Dominators_8h.html">llvm/IR/Dominators.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Function_8h.html">llvm/IR/Function.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="GlobalAlias_8h.html">llvm/IR/GlobalAlias.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="GlobalValue_8h.html">llvm/IR/GlobalValue.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="GlobalVariable_8h.html">llvm/IR/GlobalVariable.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IRBuilder_8h.html">llvm/IR/IRBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstrTypes_8h.html">llvm/IR/InstrTypes.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2Instruction_8h.html">llvm/IR/Instruction.h</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Instructions_8h.html">llvm/IR/Instructions.h</a>&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IntrinsicInst_8h.html">llvm/IR/IntrinsicInst.h</a>&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Module_8h.html">llvm/IR/Module.h</a>&quot;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Operator_8h.html">llvm/IR/Operator.h</a>&quot;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Type_8h.html">llvm/IR/Type.h</a>&quot;</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Use_8h.html">llvm/IR/Use.h</a>&quot;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="User_8h.html">llvm/IR/User.h</a>&quot;</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Value_8h.html">llvm/IR/Value.h</a>&quot;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueHandle_8h.html">llvm/IR/ValueHandle.h</a>&quot;</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InitializePasses_8h.html">llvm/InitializePasses.h</a>&quot;</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Pass_8h.html">llvm/Pass.h</a>&quot;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AtomicOrdering_8h.html">llvm/Support/AtomicOrdering.h</a>&quot;</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Casting_8h.html">llvm/Support/Casting.h</a>&quot;</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Support_2ErrorHandling_8h.html">llvm/Support/ErrorHandling.h</a>&quot;</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Transforms_2IPO_8h.html">llvm/Transforms/IPO.h</a>&quot;</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CtorUtils_8h.html">llvm/Transforms/Utils/CtorUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Evaluator_8h.html">llvm/Transforms/Utils/Evaluator.h</a>&quot;</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="GlobalStatus_8h.html">llvm/Transforms/Utils/GlobalStatus.h</a>&quot;</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Transforms_2Utils_2Local_8h.html">llvm/Transforms/Utils/Local.h</a>&quot;</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">#include &lt;cstdint&gt;</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor">#include &lt;optional&gt;</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   77</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;globalopt&quot;</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumMarked    , <span class="stringliteral">&quot;Number of globals marked constant&quot;</span>);</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumUnnamed   , <span class="stringliteral">&quot;Number of globals marked unnamed_addr&quot;</span>);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumSRA       , <span class="stringliteral">&quot;Number of aggregate globals broken into scalars&quot;</span>);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumSubstitute,<span class="stringliteral">&quot;Number of globals with initializers stored into them&quot;</span>);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumDeleted   , <span class="stringliteral">&quot;Number of globals deleted&quot;</span>);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumGlobUses  , <span class="stringliteral">&quot;Number of global uses devirtualized&quot;</span>);</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumLocalized , <span class="stringliteral">&quot;Number of globals localized&quot;</span>);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumShrunkToBool  , <span class="stringliteral">&quot;Number of global vars shrunk to booleans&quot;</span>);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumFastCallFns   , <span class="stringliteral">&quot;Number of functions converted to fastcc&quot;</span>);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumCtorsEvaluated, <span class="stringliteral">&quot;Number of static ctors evaluated&quot;</span>);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumNestRemoved   , <span class="stringliteral">&quot;Number of nest attributes removed&quot;</span>);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumAliasesResolved, <span class="stringliteral">&quot;Number of global aliases resolved&quot;</span>);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumAliasesRemoved, <span class="stringliteral">&quot;Number of global aliases eliminated&quot;</span>);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumCXXDtorsRemoved, <span class="stringliteral">&quot;Number of global C++ destructors removed&quot;</span>);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumInternalFunc, <span class="stringliteral">&quot;Number of internal functions&quot;</span>);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumColdCC, <span class="stringliteral">&quot;Number of functions marked coldcc&quot;</span>);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <a class="code" href="GlobalOpt_8cpp.html#ada2105b58ae1e63c91c4a1185fc2880b">EnableColdCCStressTest</a>(<span class="stringliteral">&quot;enable-coldcc-stress-test&quot;</span>,</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                           <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Enable stress test of coldcc by adding &quot;</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                                    <span class="stringliteral">&quot;calling conv to all internal functions.&quot;</span>),</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                           <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160; </div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;int&gt;</a> <a class="code" href="GlobalOpt_8cpp.html#a78eb44f8b1ae7339f4f73c6d27146e94">ColdCCRelFreq</a>(</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="stringliteral">&quot;coldcc-rel-freq&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(2),</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="stringliteral">&quot;Maximum block frequency, expressed as a percentage of caller&#39;s &quot;</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <span class="stringliteral">&quot;entry frequency, for a call site to be considered cold for enabling&quot;</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <span class="stringliteral">&quot;coldcc&quot;</span>));</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">/// Is this global variable possibly used by a leak checker as a root?  If so,</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">/// we might not really want to eliminate the stores to it.</span></div>
<div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#ace2885fc42e68606f270bfd3180d5f26">  111</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="GlobalOpt_8cpp.html#ace2885fc42e68606f270bfd3180d5f26">isLeakCheckerRoot</a>(<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV) {</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="comment">// A global variable is a root if it is a pointer, or could plausibly contain</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="comment">// a pointer.  There are two challenges; one is that we could have a struct</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="comment">// the has an inner member which is a pointer.  We recurse through the type to</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="comment">// detect these (up to a point).  The other is that we may actually be a union</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="comment">// of a pointer and another type, and so our LLVM type is an integer which</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="comment">// gets converted into a pointer, or our type is an [i8 x #] with a pointer</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="comment">// potentially contained here.</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="keywordflow">if</span> (GV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a3ed4c5535997ad77ffee00f92430b576">hasPrivateLinkage</a>())</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Type *, 4&gt;</a> Types;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  Types.push_back(GV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a29e0b1c558b350347e2652b35b26fea8">getValueType</a>());</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="keywordtype">unsigned</span> Limit = 20;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = Types.pop_back_val();</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordflow">switch</span> (Ty-&gt;<a class="code" href="classllvm_1_1Type.html#ac7b0ed5c6d30bad74769c6e87ab0edb8">getTypeID</a>()) {</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;      <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1Type.html#a5e9e1c0dd93557be1b4ad72860f3cbdaae68df805bc15b023748c2a78b80563ff">Type::PointerTyID</a>:</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1Type.html#a5e9e1c0dd93557be1b4ad72860f3cbdaa98aa825426dd4de2d19a3de9983a2d5d">Type::FixedVectorTyID</a>:</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1Type.html#a5e9e1c0dd93557be1b4ad72860f3cbdaa6188e4e2fb839d904debf0cbe7fc11f6">Type::ScalableVectorTyID</a>:</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="keywordflow">if</span> (cast&lt;VectorType&gt;(Ty)-&gt;getElementType()-&gt;isPointerTy())</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1Type.html#a5e9e1c0dd93557be1b4ad72860f3cbdaa2989d3024a84b4dda9d77419b1648554">Type::ArrayTyID</a>:</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        Types.push_back(cast&lt;ArrayType&gt;(Ty)-&gt;getElementType());</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1Type.html#a5e9e1c0dd93557be1b4ad72860f3cbdaa812a573d23fbb37aacd025e2a0588156">Type::StructTyID</a>: {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <a class="code" href="classllvm_1_1StructType.html">StructType</a> *STy = cast&lt;StructType&gt;(Ty);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="keywordflow">if</span> (STy-&gt;<a class="code" href="classllvm_1_1StructType.html#aec7c3cecd0559788b36c46df1b2181c1">isOpaque</a>()) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Type.html">Type</a> *InnerTy : STy-&gt;<a class="code" href="classllvm_1_1StructType.html#a00f58a2c7676e4990e21efe7fdafc74d">elements</a>()) {</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;          <span class="keywordflow">if</span> (isa&lt;PointerType&gt;(InnerTy)) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;          <span class="keywordflow">if</span> (isa&lt;StructType&gt;(InnerTy) || isa&lt;ArrayType&gt;(InnerTy) ||</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;              isa&lt;VectorType&gt;(InnerTy))</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            Types.push_back(InnerTy);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        }</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      }</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    }</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordflow">if</span> (--Limit == 0) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  } <span class="keywordflow">while</span> (!Types.empty());</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;}</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">/// Given a value that is stored to a global but never read, determine whether</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment">/// it&#39;s safe to remove the store and the chain of computation that feeds the</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">/// store.</span></div>
<div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#a02c022baa01fdb4920060a670898b55a">  161</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="GlobalOpt_8cpp.html#a02c022baa01fdb4920060a670898b55a">IsSafeComputationToRemove</a>(</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *V, <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> &amp;(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; GetTLI) {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordflow">if</span> (isa&lt;Constant&gt;(V))</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordflow">if</span> (!V-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">if</span> (isa&lt;LoadInst&gt;(V) || isa&lt;InvokeInst&gt;(V) || isa&lt;Argument&gt;(V) ||</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        isa&lt;GlobalValue&gt;(V))</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#accaca14b419cbac91ca6170523084a04">isAllocationFn</a>(V, GetTLI))</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160; </div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = cast&lt;Instruction&gt;(V);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;mayHaveSideEffects())</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a> = dyn_cast&lt;GetElementPtrInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;hasAllConstantIndices())</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getNumOperands() != 1) {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    }</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    V = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  } <span class="keywordflow">while</span> (<span class="keyword">true</span>);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;}</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">/// This GV is a pointer root.  Loop over all users of the global and clean up</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">/// any that obviously don&#39;t assign the global a value that isn&#39;t dynamically</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">/// allocated.</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span></div>
<div class="line"><a name="l00192"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#adc803f628b45e58e3de84b46dd0b7d83">  192</a></span>&#160;<a class="code" href="GlobalOpt_8cpp.html#adc803f628b45e58e3de84b46dd0b7d83">CleanupPointerRootUsers</a>(<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV,</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                        <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> &amp;(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; GetTLI) {</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="comment">// A brief explanation of leak checkers.  The goal is to find bugs where</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="comment">// pointers are forgotten, causing an accumulating growth in memory</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <span class="comment">// usage over time.  The common strategy for leak checkers is to explicitly</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <span class="comment">// allow the memory pointed to by globals at exit.  This is popular because it</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <span class="comment">// also solves another problem where the main thread of a C++ program may shut</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <span class="comment">// down before other threads that are still expecting to use those globals. To</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="comment">// handle that case, we expect the program may create a singleton and never</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <span class="comment">// destroy it.</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160; </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <span class="comment">// If Dead[n].first is the only use of a malloc result, we can delete its</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="comment">// chain of computation and the store to the global in Dead[n].second.</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;Instruction *, Instruction *&gt;</a>, 32&gt; <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da2fee1a7db4e84247a193a9af1f907013">Dead</a>;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160; </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <span class="comment">// Constants can&#39;t be pointers to dynamically allocated memory.</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a>(GV-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>())) {</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;StoreInst&gt;(U)) {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getValueOperand();</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      <span class="keywordflow">if</span> (isa&lt;Constant&gt;(V)) {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(V)) {</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;hasOneUse())</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;          <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da2fee1a7db4e84247a193a9af1f907013">Dead</a>.push_back(std::make_pair(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>));</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      }</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemSetInst.html">MemSetInst</a> *MSI = dyn_cast&lt;MemSetInst&gt;(U)) {</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      <span class="keywordflow">if</span> (isa&lt;Constant&gt;(MSI-&gt;getValue())) {</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        MSI-&gt;eraseFromParent();</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(MSI-&gt;getValue())) {</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;hasOneUse())</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;          <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da2fee1a7db4e84247a193a9af1f907013">Dead</a>.push_back(std::make_pair(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, MSI));</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      }</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemTransferInst.html">MemTransferInst</a> *MTI = dyn_cast&lt;MemTransferInst&gt;(U)) {</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *MemSrc = dyn_cast&lt;GlobalVariable&gt;(MTI-&gt;getSource());</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      <span class="keywordflow">if</span> (MemSrc &amp;&amp; MemSrc-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#aa859e108741fa64681b63f0c0c672512">isConstant</a>()) {</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        MTI-&gt;eraseFromParent();</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(MTI-&gt;getSource())) {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;hasOneUse())</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;          <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da2fee1a7db4e84247a193a9af1f907013">Dead</a>.push_back(std::make_pair(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, MTI));</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      }</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantExpr.html">ConstantExpr</a> *CE = dyn_cast&lt;ConstantExpr&gt;(U)) {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      <span class="keywordflow">if</span> (CE-&gt;use_empty()) {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        CE-&gt;destroyConstant();</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      }</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;Constant&gt;(U)) {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a6b369f94d5ebc6e107a988f17b42b3eb">isSafeToDestroyConstant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)) {</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;destroyConstant();</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <span class="comment">// This could have invalidated UI, start over from scratch.</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da2fee1a7db4e84247a193a9af1f907013">Dead</a>.clear();</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <a class="code" href="GlobalOpt_8cpp.html#adc803f628b45e58e3de84b46dd0b7d83">CleanupPointerRootUsers</a>(GV, GetTLI);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      }</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    }</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  }</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160; </div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da2fee1a7db4e84247a193a9af1f907013">Dead</a>.size(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="GlobalOpt_8cpp.html#a02c022baa01fdb4920060a670898b55a">IsSafeComputationToRemove</a>(<a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da2fee1a7db4e84247a193a9af1f907013">Dead</a>[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].first, GetTLI)) {</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da2fee1a7db4e84247a193a9af1f907013">Dead</a>[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].second-&gt;eraseFromParent();</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da2fee1a7db4e84247a193a9af1f907013">Dead</a>[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].first;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#accaca14b419cbac91ca6170523084a04">isAllocationFn</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, GetTLI))</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *J = dyn_cast&lt;Instruction&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0));</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <span class="keywordflow">if</span> (!J)</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = J;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      } <span class="keywordflow">while</span> (<span class="keyword">true</span>);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    }</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  }</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;}</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment">/// We just marked GV constant.  Loop over all users of the global, cleaning up</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">/// the obvious ones.  This is largely just a quick scan over the use list to</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">/// clean up the easy and obvious cruft.  This returns true if it made a change.</span></div>
<div class="line"><a name="l00277"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#ac3cf098d54027ac28278b060376bdcbd">  277</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="GlobalOpt_8cpp.html#ac3cf098d54027ac28278b060376bdcbd">CleanupConstantGlobalUsers</a>(<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV,</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                                       <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>) {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="classllvm_1_1Init.html">Init</a> = GV-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#a0e5946885029c1bce1350d34f2539b1b">getInitializer</a>();</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;User *, 8&gt;</a> WorkList(GV-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>());</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;User *, 8&gt;</a> Visited;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;WeakTrackingVH&gt;</a> MaybeDeadInsts;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <span class="keyword">auto</span> EraseFromParent = [&amp;](<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;operands())</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *OpI = dyn_cast&lt;Instruction&gt;(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>))</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        MaybeDeadInsts.push_back(OpI);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  };</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <span class="keywordflow">while</span> (!WorkList.empty()) {</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <a class="code" href="classllvm_1_1User.html">User</a> *U = WorkList.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="keywordflow">if</span> (!Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(U).second)</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160; </div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *BO = dyn_cast&lt;BitCastOperator&gt;(U))</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      <a class="code" href="namespacellvm.html#a39d3d23a084c4544ee5903203db10e8a">append_range</a>(WorkList, BO-&gt;users());</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *ASC = dyn_cast&lt;AddrSpaceCastOperator&gt;(U))</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      <a class="code" href="namespacellvm.html#a39d3d23a084c4544ee5903203db10e8a">append_range</a>(WorkList, ASC-&gt;users());</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a> = dyn_cast&lt;GEPOperator&gt;(U))</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      <a class="code" href="namespacellvm.html#a39d3d23a084c4544ee5903203db10e8a">append_range</a>(WorkList, <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;users());</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *LI = dyn_cast&lt;LoadInst&gt;(U)) {</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      <span class="comment">// A load from a uniform value is always the same, regardless of any</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      <span class="comment">// applied offset.</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = LI-&gt;getType();</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *Res = <a class="code" href="namespacellvm.html#a9744a22c030d1c6a3d2f6ec14f5e0b39">ConstantFoldLoadFromUniformValue</a>(<a class="code" href="classllvm_1_1Init.html">Init</a>, Ty)) {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        LI-&gt;replaceAllUsesWith(Res);</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        EraseFromParent(LI);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      }</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160; </div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *PtrOp = LI-&gt;getPointerOperand();</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getIndexTypeSizeInBits(PtrOp-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()), 0);</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      PtrOp = PtrOp-&gt;<a class="code" href="classllvm_1_1Value.html#a4c539f826d954ab3bd78cdb0882540bd">stripAndAccumulateConstantOffsets</a>(</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;          <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>, <span class="comment">/* AllowNonInbounds */</span> <span class="keyword">true</span>);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      <span class="keywordflow">if</span> (PtrOp == GV) {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="classllvm_1_1Value.html">Value</a> = <a class="code" href="namespacellvm.html#a8f2a6934eba2671f2fe2a121f2e9e4e9">ConstantFoldLoadFromConst</a>(<a class="code" href="classllvm_1_1Init.html">Init</a>, Ty, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>)) {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;          LI-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(<a class="code" href="classllvm_1_1Value.html">Value</a>);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;          EraseFromParent(LI);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        }</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      }</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;StoreInst&gt;(U)) {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      <span class="comment">// Store must be unreachable or storing Init into the global.</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      EraseFromParent(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemIntrinsic.html">MemIntrinsic</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = dyn_cast&lt;MemIntrinsic&gt;(U)) { <span class="comment">// memset/cpy/mv</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a3b1c5788b85ffa254be0e834edf5cf8f">getUnderlyingObject</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getRawDest()) == GV)</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        EraseFromParent(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    }</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  }</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160; </div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  Changed |=</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      <a class="code" href="namespacellvm.html#abca8e2c525d8162fbcbb5b444cf04d21">RecursivelyDeleteTriviallyDeadInstructionsPermissive</a>(MaybeDeadInsts);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  GV-&gt;<a class="code" href="classllvm_1_1Constant.html#a960620248182018e566b095f06a605df">removeDeadConstantUsers</a>();</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;}</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment">/// Look at all uses of the global and determine which (offset, type) pairs it</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment">/// can be split into.</span></div>
<div class="line"><a name="l00340"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#ad94492a63af952fcee37ae6214544c69">  340</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="GlobalOpt_8cpp.html#ad94492a63af952fcee37ae6214544c69">collectSRATypes</a>(<a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;uint64_t, Type *&gt;</a> &amp;Types, <a class="code" href="classllvm_1_1GlobalValue.html">GlobalValue</a> *GV,</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                            <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>) {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Use *, 16&gt;</a> Worklist;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Use *, 16&gt;</a> Visited;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <span class="keyword">auto</span> AppendUses = [&amp;](<a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U : V-&gt;<a class="code" href="classllvm_1_1Value.html#aecb93439702247fe5353a9966f7cefcd">uses</a>())</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      <span class="keywordflow">if</span> (Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(&amp;U).second)</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        Worklist.push_back(&amp;U);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  };</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  AppendUses(GV);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <span class="keywordflow">while</span> (!Worklist.empty()) {</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <a class="code" href="classllvm_1_1Use.html">Use</a> *U = Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <a class="code" href="classllvm_1_1User.html">User</a> *V = U-&gt;getUser();</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160; </div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a> = dyn_cast&lt;GEPOperator&gt;(V);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keywordflow">if</span> (isa&lt;BitCastOperator&gt;(V) || isa&lt;AddrSpaceCastOperator&gt;(V) ||</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        (<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a> &amp;&amp; <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;hasAllConstantIndices())) {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      AppendUses(V);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    }</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160; </div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = <a class="code" href="namespacellvm.html#aee44336886a06f3c1b8c35c701ba8316">getLoadStorePointerOperand</a>(V)) {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;      <span class="comment">// This is storing the global address into somewhere, not storing into</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      <span class="comment">// the global.</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      <span class="keywordflow">if</span> (isa&lt;StoreInst&gt;(V) &amp;&amp; U-&gt;getOperandNo() == 0)</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160; </div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getIndexTypeSizeInBits(<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>-&gt;getType()), 0);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>-&gt;stripAndAccumulateConstantOffsets(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>,</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                                                   <span class="comment">/* AllowNonInbounds */</span> <span class="keyword">true</span>);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> != GV || <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>.getActiveBits() &gt;= 64)</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160; </div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      <span class="comment">// TODO: We currently require that all accesses at a given offset must</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      <span class="comment">// use the same type. This could be relaxed.</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = <a class="code" href="namespacellvm.html#a48b30f2688526d0f45900a47cd6b6654">getLoadStoreType</a>(V);</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      <span class="keyword">auto</span> It = Types.try_emplace(<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>.getZExtValue(), Ty).first;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      <span class="keywordflow">if</span> (Ty != It-&gt;second)</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160; </div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      <span class="comment">// Scalable types not currently supported.</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;      <span class="keywordflow">if</span> (isa&lt;ScalableVectorType&gt;(Ty))</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160; </div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    }</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="comment">// Ignore dead constant users.</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;Constant&gt;(V)) {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#a6b369f94d5ebc6e107a988f17b42b3eb">isSafeToDestroyConstant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    }</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160; </div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="comment">// Unknown user.</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  }</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160; </div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;}</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment">/// Copy over the debug info for a variable to its SRA replacements.</span></div>
<div class="line"><a name="l00402"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#a6989fb54b0ff045520a716621e13067d">  402</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="GlobalOpt_8cpp.html#a6989fb54b0ff045520a716621e13067d">transferSRADebugInfo</a>(<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV, <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *NGV,</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                                 <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> FragmentOffsetInBits,</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                                 <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> FragmentSizeInBits,</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                                 <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> VarSize) {</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;DIGlobalVariableExpression *, 1&gt;</a> GVs;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  GV-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#a7bd3c333fa06c8fae17d52a78db3fde2">getDebugInfo</a>(GVs);</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *GVE : GVs) {</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <a class="code" href="classllvm_1_1DIVariable.html">DIVariable</a> *Var = GVE-&gt;getVariable();</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <a class="code" href="classllvm_1_1DIExpression.html">DIExpression</a> *Expr = GVE-&gt;getExpression();</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    int64_t CurVarOffsetInBytes = 0;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> CurVarOffsetInBits = 0;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160; </div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="comment">// Calculate the offset (Bytes), Continue if unknown.</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keywordflow">if</span> (!Expr-&gt;<a class="code" href="classllvm_1_1DIExpression.html#a25ddc726fd7cdca07f747a5394c7c492">extractIfOffset</a>(CurVarOffsetInBytes))</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160; </div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="comment">// Ignore negative offset.</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keywordflow">if</span> (CurVarOffsetInBytes &lt; 0)</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160; </div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="comment">// Convert offset to bits.</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    CurVarOffsetInBits = CHAR_BIT * (<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a>)CurVarOffsetInBytes;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160; </div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="comment">// Current var starts after the fragment, ignore.</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keywordflow">if</span> (CurVarOffsetInBits &gt;= (FragmentOffsetInBits + FragmentSizeInBits))</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160; </div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> CurVarSize = Var-&gt;<a class="code" href="classllvm_1_1DIVariable.html#af27f1f9907c33324df8c8322573ac718">getType</a>()-&gt;<a class="code" href="classllvm_1_1DIType.html#a8b53bdd5b8f1d8cd12a392c256cb54f3">getSizeInBits</a>();</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="comment">// Current variable ends before start of fragment, ignore.</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keywordflow">if</span> (CurVarSize != 0 &amp;&amp;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        (CurVarOffsetInBits + CurVarSize) &lt;= FragmentOffsetInBits)</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160; </div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="comment">// Current variable fits in the fragment.</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="keywordflow">if</span> (CurVarOffsetInBits == FragmentOffsetInBits &amp;&amp;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        CurVarSize == FragmentSizeInBits)</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      Expr = <a class="code" href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">DIExpression::get</a>(Expr-&gt;<a class="code" href="classllvm_1_1MDNode.html#a936739514bcdb01ddd2826fa70cf15a5">getContext</a>(), {});</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="comment">// If the FragmentSize is smaller than the variable,</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="comment">// emit a fragment expression.</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (FragmentSizeInBits &lt; VarSize) {</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <a class="code" href="classllvm_1_1DIExpression.html#ab2fc167f75191e1d22e12e8e382605bb">DIExpression::createFragmentExpression</a>(</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;              Expr, FragmentOffsetInBits, FragmentSizeInBits))</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        Expr = *<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    }</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="keyword">auto</span> *NGVE = <a class="code" href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">DIGlobalVariableExpression::get</a>(GVE-&gt;getContext(), Var, Expr);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    NGV-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#aebcc339b418cae92442b394b33359705">addDebugInfo</a>(NGVE);</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  }</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;}</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="comment">/// Perform scalar replacement of aggregates on the specified global variable.</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="comment">/// This opens the door for other optimizations by exposing the behavior of the</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="comment">/// program in a more fine-grained way.  We have determined that this</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment">/// transformation is safe already.  We return the first global variable we</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="comment">/// insert so that the caller can reprocess it.</span></div>
<div class="line"><a name="l00458"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#a7c88cc0fdb561f4a44ebd45b201a07dc">  458</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *<a class="code" href="GlobalOpt_8cpp.html#a7c88cc0fdb561f4a44ebd45b201a07dc">SRAGlobal</a>(<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV, <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>) {</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(GV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a3ba1af4b9d9faa4a33729bbbecee83d1">hasLocalLinkage</a>());</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160; </div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <span class="comment">// Collect types to split into.</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;uint64_t, Type *&gt;</a> Types;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="GlobalOpt_8cpp.html#ad94492a63af952fcee37ae6214544c69">collectSRATypes</a>(Types, GV, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>) || Types.empty())</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160; </div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  <span class="comment">// Make sure we don&#39;t SRA back to the same type.</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <span class="keywordflow">if</span> (Types.size() == 1 &amp;&amp; Types.begin()-&gt;second == GV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a29e0b1c558b350347e2652b35b26fea8">getValueType</a>())</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160; </div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  <span class="comment">// Don&#39;t perform SRA if we would have to split into many globals.</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  <span class="keywordflow">if</span> (Types.size() &gt; 16)</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160; </div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  <span class="comment">// Sort by offset.</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;uint64_t, Type *&gt;</a>, 16&gt; TypesVector;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  <a class="code" href="namespacellvm.html#a39d3d23a084c4544ee5903203db10e8a">append_range</a>(TypesVector, Types);</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <a class="code" href="namespacellvm.html#a74cdbd1e4f731e7d7cd83461b8b1de0b">sort</a>(TypesVector, <a class="code" href="structllvm_1_1less__first.html">llvm::less_first</a>());</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160; </div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  <span class="comment">// Check that the types are non-overlapping.</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = 0;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;Pair : TypesVector) {</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="comment">// Overlaps with previous type.</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keywordflow">if</span> (Pair.first &lt; <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>)</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160; </div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = Pair.first + <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(Pair.second);</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  }</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160; </div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  <span class="comment">// Some accesses go beyond the end of the global, don&#39;t bother.</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> &gt; <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(GV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a29e0b1c558b350347e2652b35b26fea8">getValueType</a>()))</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160; </div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  <span class="comment">// Collect initializers for new globals.</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *OrigInit = GV-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#a0e5946885029c1bce1350d34f2539b1b">getInitializer</a>();</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;uint64_t, Constant *&gt;</a> Initializers;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;Pair : Types) {</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NewInit = <a class="code" href="namespacellvm.html#a8f2a6934eba2671f2fe2a121f2e9e4e9">ConstantFoldLoadFromConst</a>(OrigInit, Pair.second,</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                                                  <a class="code" href="classllvm_1_1APInt.html">APInt</a>(64, Pair.first), <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="keywordflow">if</span> (!NewInit) {</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Global SRA: Failed to evaluate initializer of &quot;</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                        &lt;&lt; *GV &lt;&lt; <span class="stringliteral">&quot; with type &quot;</span> &lt;&lt; *Pair.second &lt;&lt; <span class="stringliteral">&quot; at offset &quot;</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                        &lt;&lt; Pair.first &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    }</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    Initializers.<a class="code" href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">insert</a>({Pair.first, NewInit});</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  }</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160; </div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;PERFORMING GLOBAL SRA ON: &quot;</span> &lt;&lt; *GV &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160; </div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  <span class="comment">// Get the alignment of the global, either explicit or target-specific.</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  <a class="code" href="structllvm_1_1Align.html">Align</a> StartAlignment =</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;      <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getValueOrABITypeAlignment(GV-&gt;<a class="code" href="classllvm_1_1GlobalObject.html#a115ac0121663aa8365e095d095d0c633">getAlign</a>(), GV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a29e0b1c558b350347e2652b35b26fea8">getValueType</a>());</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> VarSize = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeSizeInBits(GV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a29e0b1c558b350347e2652b35b26fea8">getValueType</a>());</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160; </div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <span class="comment">// Create replacement globals.</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;uint64_t, GlobalVariable *&gt;</a> NewGlobals;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  <span class="keywordtype">unsigned</span> NameSuffix = 0;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;Pair : TypesVector) {</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = Pair.first;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = Pair.second;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *NGV = <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>(</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        *GV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>(), Ty, <span class="keyword">false</span>, <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">GlobalVariable::InternalLinkage</a>,</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        Initializers[<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>], GV-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;.&quot;</span> + <a class="code" href="classllvm_1_1Twine.html">Twine</a>(NameSuffix++), GV,</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        GV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a52126ae2091b18cecfd5ad0f0012839a">getThreadLocalMode</a>(), GV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a702d4986803a1782ba305b1c7a0f1c21">getAddressSpace</a>());</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    NGV-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#a53f47ebcc1a7ac4553ba2a2eeca596e5">copyAttributesFrom</a>(GV);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    NewGlobals.<a class="code" href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">insert</a>({<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>, NGV});</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160; </div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="comment">// Calculate the known alignment of the field.  If the original aggregate</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="comment">// had 256 byte alignment for example, something might depend on that:</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <span class="comment">// propagate info to each field.</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <a class="code" href="structllvm_1_1Align.html">Align</a> NewAlign = <a class="code" href="namespacellvm.html#acd6aa057934751aaac54e5c18bcc18eb">commonAlignment</a>(StartAlignment, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>);</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keywordflow">if</span> (NewAlign &gt; <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getABITypeAlign(Ty))</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;      NGV-&gt;<a class="code" href="classllvm_1_1GlobalObject.html#a49b398b1c83ef4d42c8f7756b443f61f">setAlignment</a>(NewAlign);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160; </div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <span class="comment">// Copy over the debug info for the variable.</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <a class="code" href="GlobalOpt_8cpp.html#a6989fb54b0ff045520a716621e13067d">transferSRADebugInfo</a>(GV, NGV, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> * 8, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSizeInBits(Ty),</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                         VarSize);</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  }</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160; </div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  <span class="comment">// Replace uses of the original global with uses of the new global.</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 16&gt;</a> Worklist;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Value *, 16&gt;</a> Visited;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;WeakTrackingVH, 16&gt;</a> DeadInsts;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  <span class="keyword">auto</span> AppendUsers = [&amp;](<a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : V-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>())</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      <span class="keywordflow">if</span> (Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(U).second)</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        Worklist.push_back(U);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  };</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  AppendUsers(GV);</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  <span class="keywordflow">while</span> (!Worklist.empty()) {</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *V = Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="keywordflow">if</span> (isa&lt;BitCastOperator&gt;(V) || isa&lt;AddrSpaceCastOperator&gt;(V) ||</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        isa&lt;GEPOperator&gt;(V)) {</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      AppendUsers(V);</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      <span class="keywordflow">if</span> (isa&lt;Instruction&gt;(V))</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        DeadInsts.push_back(V);</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    }</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160; </div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = <a class="code" href="namespacellvm.html#aee44336886a06f3c1b8c35c701ba8316">getLoadStorePointerOperand</a>(V)) {</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getIndexTypeSizeInBits(<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>-&gt;getType()), 0);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>-&gt;stripAndAccumulateConstantOffsets(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>,</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                                                   <span class="comment">/* AllowNonInbounds */</span> <span class="keyword">true</span>);</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> == GV &amp;&amp; <span class="stringliteral">&quot;Load/store must be from/to global&quot;</span>);</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *NGV = NewGlobals[<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>.getZExtValue()];</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NGV &amp;&amp; <span class="stringliteral">&quot;Must have replacement global for this offset&quot;</span>);</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160; </div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;      <span class="comment">// Update the pointer operand and recalculate alignment.</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      <a class="code" href="structllvm_1_1Align.html">Align</a> PrefAlign = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getPrefTypeAlign(<a class="code" href="namespacellvm.html#a48b30f2688526d0f45900a47cd6b6654">getLoadStoreType</a>(V));</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      <a class="code" href="structllvm_1_1Align.html">Align</a> NewAlign =</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;          <a class="code" href="namespacellvm.html#a6e7b79b3933def717c2a0f2fc6fa38e0">getOrEnforceKnownAlignment</a>(NGV, PrefAlign, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, cast&lt;Instruction&gt;(V));</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160; </div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *LI = dyn_cast&lt;LoadInst&gt;(V)) {</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        LI-&gt;setOperand(0, NGV);</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        LI-&gt;setAlignment(NewAlign);</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        <span class="keyword">auto</span> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = cast&lt;StoreInst&gt;(V);</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;setOperand(1, NGV);</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;setAlignment(NewAlign);</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;      }</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    }</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160; </div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;Constant&gt;(V) &amp;&amp; <a class="code" href="namespacellvm.html#a6b369f94d5ebc6e107a988f17b42b3eb">isSafeToDestroyConstant</a>(cast&lt;Constant&gt;(V)) &amp;&amp;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;           <span class="stringliteral">&quot;Other users can only be dead constants&quot;</span>);</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  }</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160; </div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  <span class="comment">// Delete old instructions and global.</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  <a class="code" href="namespacellvm.html#a1106b8a15061e8494873e10bb8a364e5">RecursivelyDeleteTriviallyDeadInstructions</a>(DeadInsts);</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  GV-&gt;<a class="code" href="classllvm_1_1Constant.html#a960620248182018e566b095f06a605df">removeDeadConstantUsers</a>();</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  GV-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#ae0cf03d5de37330b1eb69dd22a1d5057">eraseFromParent</a>();</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  ++NumSRA;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160; </div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NewGlobals.<a class="code" href="classllvm_1_1DenseMapBase.html#a3d95cc2d359b8d9ed5bd9504b44930b5">size</a>() &gt; 0);</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  <span class="keywordflow">return</span> NewGlobals.<a class="code" href="classllvm_1_1DenseMapBase.html#a50d461a887e200e704e5157d3b21514d">begin</a>()-&gt;second;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;}</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="comment">/// Return true if all users of the specified value will trap if the value is</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="comment">/// dynamically null.  PHIs keeps track of any phi nodes we&#39;ve seen to avoid</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="comment">/// reprocessing them.</span></div>
<div class="line"><a name="l00601"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#a2cf59a15a8b7603c5d66d8fdb117ecec">  601</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="GlobalOpt_8cpp.html#a2cf59a15a8b7603c5d66d8fdb117ecec">AllUsesOfValueWillTrapIfNull</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *V,</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                                        <a class="code" href="classllvm_1_1SmallPtrSetImpl.html">SmallPtrSetImpl&lt;const PHINode*&gt;</a> &amp;PHIs) {</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1User.html">User</a> *U : V-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>()) {</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(U)) {</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;      <span class="comment">// If null pointer is considered valid, then all uses are non-trapping.</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;      <span class="comment">// Non address-space 0 globals have already been pruned by the caller.</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a7b03ed78a8e299bde6d26a8793cd4e06">NullPointerIsDefined</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getFunction()))</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    }</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <span class="keywordflow">if</span> (isa&lt;LoadInst&gt;(U)) {</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;      <span class="comment">// Will trap.</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;StoreInst&gt;(U)) {</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getOperand(0) == V) {</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">// Storing the value.</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      }</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI = dyn_cast&lt;CallInst&gt;(U)) {</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;      <span class="keywordflow">if</span> (CI-&gt;getCalledOperand() != V) {</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">// Not calling the ptr</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;      }</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1InvokeInst.html">InvokeInst</a> *II = dyn_cast&lt;InvokeInst&gt;(U)) {</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      <span class="keywordflow">if</span> (II-&gt;getCalledOperand() != V) {</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">// Not calling the ptr</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;      }</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a> *CI = dyn_cast&lt;BitCastInst&gt;(U)) {</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="GlobalOpt_8cpp.html#a2cf59a15a8b7603c5d66d8fdb117ecec">AllUsesOfValueWillTrapIfNull</a>(CI, PHIs)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *GEPI = dyn_cast&lt;GetElementPtrInst&gt;(U)) {</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="GlobalOpt_8cpp.html#a2cf59a15a8b7603c5d66d8fdb117ecec">AllUsesOfValueWillTrapIfNull</a>(GEPI, PHIs)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast&lt;PHINode&gt;(U)) {</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;      <span class="comment">// If we&#39;ve already seen this phi node, ignore it, it has already been</span></div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;      <span class="comment">// checked.</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;      <span class="keywordflow">if</span> (PHIs.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(PN).second &amp;&amp; !<a class="code" href="GlobalOpt_8cpp.html#a2cf59a15a8b7603c5d66d8fdb117ecec">AllUsesOfValueWillTrapIfNull</a>(PN, PHIs))</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;ICmpInst&gt;(U) &amp;&amp;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;               !<a class="code" href="classllvm_1_1CmpInst.html#a3712279d70deeec90a93db09deb12d02">ICmpInst::isSigned</a>(cast&lt;ICmpInst&gt;(U)-&gt;<a class="code" href="namespacellvm_1_1PPC.html#a40c2294c9ecba721df7f29aaf05157d8">getPredicate</a>()) &amp;&amp;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;               isa&lt;LoadInst&gt;(U-&gt;getOperand(0)) &amp;&amp;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;               isa&lt;ConstantPointerNull&gt;(U-&gt;getOperand(1))) {</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;GlobalValue&gt;(cast&lt;LoadInst&gt;(U-&gt;getOperand(0))</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                                  -&gt;getPointerOperand()</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;                                  -&gt;stripPointerCasts()) &amp;&amp;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;             <span class="stringliteral">&quot;Should be GlobalVariable&quot;</span>);</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;      <span class="comment">// This and only this kind of non-signed ICmpInst is to be replaced with</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;      <span class="comment">// the comparing of the value of the created global init bool later in</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;      <span class="comment">// optimizeGlobalAddressOfAllocation for the global variable.</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    }</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  }</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;}</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="comment">/// Return true if all uses of any loads from GV will trap if the loaded value</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="comment">/// is null.  Note that this also permits comparisons of the loaded value</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="comment">/// against null, as a special case.</span></div>
<div class="line"><a name="l00654"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#a26f6a2c21d213fbcbe99a2c09d88a2c4">  654</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="GlobalOpt_8cpp.html#a26f6a2c21d213fbcbe99a2c09d88a2c4">allUsesOfLoadedValueWillTrapIfNull</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV) {</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const Value *, 4&gt;</a> Worklist;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  Worklist.push_back(GV);</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  <span class="keywordflow">while</span> (!Worklist.empty()) {</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *U : <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>-&gt;users()) {</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *LI = dyn_cast&lt;LoadInst&gt;(U)) {</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const PHINode *, 8&gt;</a> PHIs;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="GlobalOpt_8cpp.html#a2cf59a15a8b7603c5d66d8fdb117ecec">AllUsesOfValueWillTrapIfNull</a>(LI, PHIs))</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;StoreInst&gt;(U)) {</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        <span class="comment">// Ignore stores to the global.</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getPointerOperand() != <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>)</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CE = dyn_cast&lt;ConstantExpr&gt;(U)) {</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        <span class="keywordflow">if</span> (CE-&gt;stripPointerCasts() != GV)</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        <span class="comment">// Check further the ConstantExpr.</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;        Worklist.push_back(CE);</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        <span class="comment">// We don&#39;t know or understand this user, bail out.</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;      }</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    }</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;  }</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160; </div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;}</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="comment">/// Get all the loads/store uses for global variable \p GV.</span></div>
<div class="line"><a name="l00684"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#a8e68884ca018dde6dfadf535637290d0">  684</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="GlobalOpt_8cpp.html#a8e68884ca018dde6dfadf535637290d0">allUsesOfLoadAndStores</a>(<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV,</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                                   <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 4&gt;</a> &amp;<a class="code" href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a>) {</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 4&gt;</a> Worklist;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  Worklist.push_back(GV);</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  <span class="keywordflow">while</span> (!Worklist.empty()) {</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *U : <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>-&gt;users()) {</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CE = dyn_cast&lt;ConstantExpr&gt;(U)) {</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        Worklist.push_back(CE);</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;      }</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160; </div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((isa&lt;LoadInst&gt;(U) || isa&lt;StoreInst&gt;(U)) &amp;&amp;</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;             <span class="stringliteral">&quot;Expect only load or store instructions&quot;</span>);</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;      <a class="code" href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a>.push_back(U);</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    }</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  }</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;}</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160; </div>
<div class="line"><a name="l00703"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#aef572ae661cf9f5b14651ef952629c10">  703</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="GlobalOpt_8cpp.html#aef572ae661cf9f5b14651ef952629c10">OptimizeAwayTrappingUsesOfValue</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NewV) {</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> UI = V-&gt;<a class="code" href="classllvm_1_1Value.html#a158da2b6d3d938aaa15b6acd00150e2c">user_begin</a>(), <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = V-&gt;<a class="code" href="classllvm_1_1Value.html#aa22118b2b3f206bfda2ffab4cda94d64">user_end</a>(); UI != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ) {</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = cast&lt;Instruction&gt;(*UI++);</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <span class="comment">// Uses are non-trapping if null pointer is considered valid.</span></div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <span class="comment">// Non address-space 0 globals are already pruned by the caller.</span></div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a7b03ed78a8e299bde6d26a8793cd4e06">NullPointerIsDefined</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getFunction()))</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI = dyn_cast&lt;LoadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      LI-&gt;setOperand(0, NewV);</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;StoreInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getOperand(1) == V) {</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;setOperand(1, NewV);</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;      }</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;CallInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) || isa&lt;InvokeInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;      <a class="code" href="classllvm_1_1CallBase.html">CallBase</a> *CB = cast&lt;CallBase&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;      <span class="keywordflow">if</span> (CB-&gt;<a class="code" href="classllvm_1_1CallBase.html#a7ac9329ef7292ee640d87f45ce7ae05c">getCalledOperand</a>() == V) {</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        <span class="comment">// Calling through the pointer!  Turn into a direct call, but be careful</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        <span class="comment">// that the pointer is not also being passed as an argument.</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        CB-&gt;<a class="code" href="classllvm_1_1CallBase.html#ad70fe60b7ed052c6a74863944b518251">setCalledOperand</a>(NewV);</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        <span class="keywordtype">bool</span> PassedAsArg = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = CB-&gt;<a class="code" href="classllvm_1_1CallBase.html#adde2ea00dd2613ee41bfe91908e4e68e">arg_size</a>(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;          <span class="keywordflow">if</span> (CB-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) == V) {</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;            PassedAsArg = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;            CB-&gt;<a class="code" href="classllvm_1_1CallBase.html#abc10b887caad109288ffceb230493a85">setArgOperand</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, NewV);</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;          }</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160; </div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        <span class="keywordflow">if</span> (PassedAsArg) {</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;          <span class="comment">// Being passed as an argument also.  Be careful to not invalidate UI!</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;          UI = V-&gt;<a class="code" href="classllvm_1_1Value.html#a158da2b6d3d938aaa15b6acd00150e2c">user_begin</a>();</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        }</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;      }</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CastInst.html">CastInst</a> *CI = dyn_cast&lt;CastInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;      Changed |= <a class="code" href="GlobalOpt_8cpp.html#aef572ae661cf9f5b14651ef952629c10">OptimizeAwayTrappingUsesOfValue</a>(CI,</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;                                <a class="code" href="classllvm_1_1ConstantExpr.html#a49b69843927f7cd96d866768b3aec92b">ConstantExpr::getCast</a>(CI-&gt;getOpcode(),</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;                                                      NewV, CI-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()));</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;      <span class="keywordflow">if</span> (CI-&gt;use_empty()) {</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;        CI-&gt;eraseFromParent();</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;      }</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *GEPI = dyn_cast&lt;GetElementPtrInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;      <span class="comment">// Should handle GEP here.</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Constant*, 8&gt;</a> Idxs;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;      Idxs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a499ea32ca1b8d16cedfe01d1e5b08f29">reserve</a>(GEPI-&gt;getNumOperands()-1);</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">User::op_iterator</a> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = GEPI-&gt;op_begin() + 1, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = GEPI-&gt;op_end();</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;           <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;Constant&gt;(*<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>))</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;          Idxs.push_back(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;      <span class="keywordflow">if</span> (Idxs.size() == GEPI-&gt;getNumOperands()-1)</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        Changed |= <a class="code" href="GlobalOpt_8cpp.html#aef572ae661cf9f5b14651ef952629c10">OptimizeAwayTrappingUsesOfValue</a>(</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;            GEPI, <a class="code" href="classllvm_1_1ConstantExpr.html#abae3f750ce4d2edcea30f08fe9e29721">ConstantExpr::getGetElementPtr</a>(GEPI-&gt;getSourceElementType(),</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;                                                 NewV, Idxs));</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;      <span class="keywordflow">if</span> (GEPI-&gt;use_empty()) {</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;        Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        GEPI-&gt;eraseFromParent();</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;      }</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    }</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  }</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160; </div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;}</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="comment">/// The specified global has only one non-null value stored into it.  If there</span></div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="comment">/// are uses of the loaded value that would trap if the loaded value is</span></div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="comment">/// dynamically null, then we know that they cannot be reachable with a null</span></div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="comment">/// optimize away the load.</span></div>
<div class="line"><a name="l00774"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#ab7fe47fe1b533f4c9bdd23baf28f3c8c">  774</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="GlobalOpt_8cpp.html#ab7fe47fe1b533f4c9bdd23baf28f3c8c">OptimizeAwayTrappingUsesOfLoads</a>(</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV, <a class="code" href="classllvm_1_1Constant.html">Constant</a> *LV, <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> &amp;(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; GetTLI) {</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160; </div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  <span class="comment">// Keep track of whether we are able to remove all the uses of the global</span></div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  <span class="comment">// other than the store that defines it.</span></div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  <span class="keywordtype">bool</span> AllNonStoreUsesGone = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160; </div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  <span class="comment">// Replace all uses of loads with uses of uses of the stored value.</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *GlobalUser : <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a>(GV-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>())) {</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI = dyn_cast&lt;LoadInst&gt;(GlobalUser)) {</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;      Changed |= <a class="code" href="GlobalOpt_8cpp.html#aef572ae661cf9f5b14651ef952629c10">OptimizeAwayTrappingUsesOfValue</a>(LI, LV);</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;      <span class="comment">// If we were able to delete all uses of the loads</span></div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;      <span class="keywordflow">if</span> (LI-&gt;use_empty()) {</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;        LI-&gt;eraseFromParent();</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;        Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;        AllNonStoreUsesGone = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;      }</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;StoreInst&gt;(GlobalUser)) {</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;      <span class="comment">// Ignore the store that stores &quot;LV&quot; to the global.</span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(GlobalUser-&gt;getOperand(1) == GV &amp;&amp;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;             <span class="stringliteral">&quot;Must be storing *to* the global&quot;</span>);</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;      AllNonStoreUsesGone = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160; </div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;      <span class="comment">// If we get here we could have other crazy uses that are transitively</span></div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;      <span class="comment">// loaded.</span></div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((isa&lt;PHINode&gt;(GlobalUser) || isa&lt;SelectInst&gt;(GlobalUser) ||</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;              isa&lt;ConstantExpr&gt;(GlobalUser) || isa&lt;CmpInst&gt;(GlobalUser) ||</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;              isa&lt;BitCastInst&gt;(GlobalUser) ||</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;              isa&lt;GetElementPtrInst&gt;(GlobalUser)) &amp;&amp;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;             <span class="stringliteral">&quot;Only expect load and stores!&quot;</span>);</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    }</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  }</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160; </div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;  <span class="keywordflow">if</span> (Changed) {</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;OPTIMIZED LOADS FROM STORED ONCE POINTER: &quot;</span> &lt;&lt; *GV</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    ++NumGlobUses;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  }</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160; </div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  <span class="comment">// If we nuked all of the loads, then none of the stores are needed either,</span></div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  <span class="comment">// nor is the global.</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  <span class="keywordflow">if</span> (AllNonStoreUsesGone) {</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="GlobalOpt_8cpp.html#ace2885fc42e68606f270bfd3180d5f26">isLeakCheckerRoot</a>(GV)) {</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;      Changed |= <a class="code" href="GlobalOpt_8cpp.html#adc803f628b45e58e3de84b46dd0b7d83">CleanupPointerRootUsers</a>(GV, GetTLI);</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;      <a class="code" href="GlobalOpt_8cpp.html#ac3cf098d54027ac28278b060376bdcbd">CleanupConstantGlobalUsers</a>(GV, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    }</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    <span class="keywordflow">if</span> (GV-&gt;<a class="code" href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">use_empty</a>()) {</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  *** GLOBAL NOW DEAD!\n&quot;</span>);</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;      GV-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#ae0cf03d5de37330b1eb69dd22a1d5057">eraseFromParent</a>();</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;      ++NumDeleted;</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    }</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  }</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;}</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;<span class="comment">/// Walk the use list of V, constant folding all of the instructions that are</span></div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;<span class="comment">/// foldable.</span></div>
<div class="line"><a name="l00838"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#a1c6c0f8bb397fee19be6ef20f299afdf">  838</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="GlobalOpt_8cpp.html#a1c6c0f8bb397fee19be6ef20f299afdf">ConstantPropUsersOf</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;                                <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLI) {</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html#acd2fbee42afeb868be98aaae56528636">Value::user_iterator</a> UI = V-&gt;<a class="code" href="classllvm_1_1Value.html#a158da2b6d3d938aaa15b6acd00150e2c">user_begin</a>(), <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = V-&gt;<a class="code" href="classllvm_1_1Value.html#aa22118b2b3f206bfda2ffab4cda94d64">user_end</a>(); UI != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; )</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(*UI++))</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *NewC = <a class="code" href="namespacellvm.html#ab6be6270337c6f7620007555247401ce">ConstantFoldInstruction</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, TLI)) {</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;        <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;replaceAllUsesWith(NewC);</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160; </div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        <span class="comment">// Advance UI to the next non-I use to avoid invalidating it!</span></div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        <span class="comment">// Instructions could multiply use V.</span></div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        <span class="keywordflow">while</span> (UI != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> &amp;&amp; *UI == <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;          ++UI;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a627b2f86ac433d829482d5a5a0f50668">isInstructionTriviallyDead</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, TLI))</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;          <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;      }</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;}</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;<span class="comment">/// This function takes the specified global variable, and transforms the</span></div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;<span class="comment">/// program as if it always contained the result of the specified malloc.</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;<span class="comment">/// Because it is always the result of the specified malloc, there is no reason</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;<span class="comment">/// to actually DO the malloc.  Instead, turn the malloc into a global, and any</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;<span class="comment">/// loads of GV as uses of the new global.</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *</div>
<div class="line"><a name="l00860"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#aafa937ad7cb73fc0a05e6f1236953206">  860</a></span>&#160;<a class="code" href="GlobalOpt_8cpp.html#aafa937ad7cb73fc0a05e6f1236953206">OptimizeGlobalAddressOfAllocation</a>(<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV, <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI,</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;                                  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> AllocSize, <a class="code" href="classllvm_1_1Constant.html">Constant</a> *InitVal,</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;                                  <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;                                  <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLI) {</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; <span class="stringliteral">&quot;PROMOTING GLOBAL: &quot;</span> &lt;&lt; *GV &lt;&lt; <span class="stringliteral">&quot;  CALL = &quot;</span> &lt;&lt; *CI</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;                    &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160; </div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  <span class="comment">// Create global of type [AllocSize x i8].</span></div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *GlobalType = <a class="code" href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">ArrayType::get</a>(<a class="code" href="classllvm_1_1Type.html#a7ba5de75f50bb4a4ba920698edf39b28">Type::getInt8Ty</a>(GV-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>()),</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;                                    AllocSize);</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160; </div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  <span class="comment">// Create the new global variable.  The contents of the allocated memory is</span></div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;  <span class="comment">// undefined initially, so initialize with an undef value.</span></div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *NewGV = <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>(</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;      *GV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>(), GlobalType, <span class="keyword">false</span>, <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">GlobalValue::InternalLinkage</a>,</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;      <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(GlobalType), GV-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;.body&quot;</span>, <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;      GV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a52126ae2091b18cecfd5ad0f0012839a">getThreadLocalMode</a>());</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160; </div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;  <span class="comment">// Initialize the global at the point of the original call.  Note that this</span></div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;  <span class="comment">// is a different point from the initialization referred to below for the</span></div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;  <span class="comment">// nullability handling.  Sublety: We have not proven the original global was</span></div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;  <span class="comment">// only initialized once.  As such, we can not fold this into the initializer</span></div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;  <span class="comment">// of the new global as may need to re-init the storage multiple times.</span></div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;UndefValue&gt;(InitVal)) {</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>(CI-&gt;<a class="code" href="classllvm_1_1ilist__node__with__parent.html#a26708685cc8b94fe3d7092ee080dbb34">getNextNode</a>());</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    <span class="comment">// TODO: Use alignment above if align!=1</span></div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateMemSet(NewGV, InitVal, AllocSize, std::nullopt);</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  }</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160; </div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  <span class="comment">// Update users of the allocation to use the new global instead.</span></div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  <a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a> *TheBC = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  <span class="keywordflow">while</span> (!CI-&gt;<a class="code" href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">use_empty</a>()) {</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1User.html">User</a> = cast&lt;Instruction&gt;(CI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a2fd1d2dc14e22227cfa8238778ab87b8">user_back</a>());</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a> *BCI = dyn_cast&lt;BitCastInst&gt;(<a class="code" href="classllvm_1_1User.html">User</a>)) {</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;      <span class="keywordflow">if</span> (BCI-&gt;getType() == NewGV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a92041fc7f781ba4fe708eec99139b72f">getType</a>()) {</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;        BCI-&gt;replaceAllUsesWith(NewGV);</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;        BCI-&gt;eraseFromParent();</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;        BCI-&gt;setOperand(0, NewGV);</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;      }</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;      <span class="keywordflow">if</span> (!TheBC)</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;        TheBC = <span class="keyword">new</span> <a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a>(NewGV, CI-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), <span class="stringliteral">&quot;newgv&quot;</span>, CI);</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;      <a class="code" href="classllvm_1_1User.html">User</a>-&gt;<a class="code" href="classllvm_1_1User.html#a1600c7959045cb6b6a5f5a1d427ec67e">replaceUsesOfWith</a>(CI, TheBC);</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    }</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  }</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160; </div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;  <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;Constant *, 1&gt;</a> RepValues;</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;  RepValues.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(NewGV);</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160; </div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  <span class="comment">// If there is a comparison against null, we will insert a global bool to</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;  <span class="comment">// keep track of whether the global was initialized yet or not.</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *InitBool =</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>(<a class="code" href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">Type::getInt1Ty</a>(GV-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>()), <span class="keyword">false</span>,</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;                       <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">GlobalValue::InternalLinkage</a>,</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;                       <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(GV-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>()),</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;                       GV-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>()+<span class="stringliteral">&quot;.init&quot;</span>, GV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a52126ae2091b18cecfd5ad0f0012839a">getThreadLocalMode</a>());</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;  <span class="keywordtype">bool</span> InitBoolUsed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160; </div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;  <span class="comment">// Loop over all instruction uses of GV, processing them in turn.</span></div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 4&gt;</a> Guses;</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;  <a class="code" href="GlobalOpt_8cpp.html#a8e68884ca018dde6dfadf535637290d0">allUsesOfLoadAndStores</a>(GV, Guses);</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *U : Guses) {</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;StoreInst&gt;(U)) {</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;      <span class="comment">// The global is initialized when the store to it occurs. If the stored</span></div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;      <span class="comment">// value is null value, the global bool is set to false, otherwise true.</span></div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;      <span class="keyword">new</span> <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a>(<a class="code" href="classllvm_1_1ConstantInt.html#afe7d477c6022fe7123b90e3b39c58e69">ConstantInt::getBool</a>(</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;                        GV-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>(),</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;                        !isa&lt;ConstantPointerNull&gt;(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getValueOperand())),</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;                    InitBool, <span class="keyword">false</span>, <a class="code" href="structllvm_1_1Align.html">Align</a>(1), <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getOrdering(),</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;                    <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getSyncScopeID(), <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>);</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;      <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    }</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160; </div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI = cast&lt;LoadInst&gt;(U);</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    <span class="keywordflow">while</span> (!LI-&gt;<a class="code" href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">use_empty</a>()) {</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;      <a class="code" href="classllvm_1_1Use.html">Use</a> &amp;LoadUse = *LI-&gt;<a class="code" href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">use_begin</a>();</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;      <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *ICI = dyn_cast&lt;ICmpInst&gt;(LoadUse.<a class="code" href="classllvm_1_1Use.html#a50a2e57da274f8d69b9f932977379cdf">getUser</a>());</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;      <span class="keywordflow">if</span> (!ICI) {</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        <span class="keyword">auto</span> *CE = <a class="code" href="classllvm_1_1ConstantExpr.html#ae79d05dd3d0b05e080e08f8c5c33f880">ConstantExpr::getBitCast</a>(NewGV, LI-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;        RepValues.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(CE);</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;        LoadUse.<a class="code" href="classllvm_1_1Use.html#a40360b4fa7b8e6920a68e5a8a0814f1f">set</a>(CE);</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;      }</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160; </div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      <span class="comment">// Replace the cmp X, 0 with a use of the bool value.</span></div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *LV = <span class="keyword">new</span> <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a>(InitBool-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a29e0b1c558b350347e2652b35b26fea8">getValueType</a>(), InitBool,</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;                               InitBool-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;.val&quot;</span>, <span class="keyword">false</span>, <a class="code" href="structllvm_1_1Align.html">Align</a>(1),</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;                               LI-&gt;<a class="code" href="classllvm_1_1LoadInst.html#a93603fe0d4168b92a901f06015ecb2e7">getOrdering</a>(), LI-&gt;<a class="code" href="classllvm_1_1LoadInst.html#aca6c2de6950cb093f509ed2b67e02da2">getSyncScopeID</a>(), LI);</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;      InitBoolUsed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;      <span class="keywordflow">switch</span> (ICI-&gt;<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>()) {</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;      <span class="keywordflow">default</span>: <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unknown ICmp Predicate!&quot;</span>);</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>: <span class="comment">// X &lt; null -&gt; always false</span></div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;        LV = <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(GV-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>());</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a>: <span class="comment">// X &gt;= null -&gt; always true</span></div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;        LV = <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(GV-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>());</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a>:</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>:</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;        LV = <a class="code" href="classllvm_1_1BinaryOperator.html#a4f500ae0de71695b652af4c0958d8ea8">BinaryOperator::CreateNot</a>(LV, <span class="stringliteral">&quot;notinit&quot;</span>, ICI);</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>:</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>:</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        <span class="keywordflow">break</span>;  <span class="comment">// no change.</span></div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;      }</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;      ICI-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(LV);</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;      ICI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    }</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    LI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;  }</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160; </div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  <span class="comment">// If the initialization boolean was used, insert it, otherwise delete it.</span></div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;  <span class="keywordflow">if</span> (!InitBoolUsed) {</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    <span class="keywordflow">while</span> (!InitBool-&gt;<a class="code" href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">use_empty</a>())  <span class="comment">// Delete initializations</span></div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;      cast&lt;StoreInst&gt;(InitBool-&gt;<a class="code" href="classllvm_1_1Value.html#ac2e338e4c120fc3ea43099b54880f1f1">user_back</a>())-&gt;eraseFromParent();</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    <span class="keyword">delete</span> InitBool;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;  } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    GV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Module.html#aac75aa0b7583c039e8a9d4ccae280769">insertGlobalVariable</a>(GV-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>(), InitBool);</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160; </div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;  <span class="comment">// Now the GV is dead, nuke it and the allocation..</span></div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;  GV-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#ae0cf03d5de37330b1eb69dd22a1d5057">eraseFromParent</a>();</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  CI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160; </div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  <span class="comment">// To further other optimizations, loop over all users of NewGV and try to</span></div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;  <span class="comment">// constant prop them.  This will promote GEP instructions with constant</span></div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;  <span class="comment">// indices into GEP constant-exprs, which will allow global-opt to hack on it.</span></div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *CE : RepValues)</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    <a class="code" href="GlobalOpt_8cpp.html#a1c6c0f8bb397fee19be6ef20f299afdf">ConstantPropUsersOf</a>(CE, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, TLI);</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160; </div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;  <span class="keywordflow">return</span> NewGV;</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;}</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;<span class="comment">/// Scan the use-list of GV checking to make sure that there are no complex uses</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;<span class="comment">/// of GV.  We permit simple things like dereferencing the pointer, but not</span></div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;<span class="comment">/// storing through the address, unless it is to the specified global.</span></div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span></div>
<div class="line"><a name="l00998"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#a406d93c10bd410f7ef8af5c00b037b8b">  998</a></span>&#160;<a class="code" href="GlobalOpt_8cpp.html#a406d93c10bd410f7ef8af5c00b037b8b">valueIsOnlyUsedLocallyOrStoredToOneGlobal</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI,</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;                                          <span class="keyword">const</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV) {</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const Value *, 4&gt;</a> Visited;</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const Value *, 4&gt;</a> Worklist;</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  Worklist.push_back(CI);</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160; </div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  <span class="keywordflow">while</span> (!Worklist.empty()) {</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *V = Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    <span class="keywordflow">if</span> (!Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(V).second)</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160; </div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Use.html">Use</a> &amp;VUse : V-&gt;<a class="code" href="classllvm_1_1Value.html#aecb93439702247fe5353a9966f7cefcd">uses</a>()) {</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1User.html">User</a> *U = VUse.getUser();</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;      <span class="keywordflow">if</span> (isa&lt;LoadInst&gt;(U) || isa&lt;CmpInst&gt;(U))</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;        <span class="keywordflow">continue</span>; <span class="comment">// Fine, ignore.</span></div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160; </div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;StoreInst&gt;(U)) {</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getValueOperand() == V &amp;&amp;</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;            <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getPointerOperand()-&gt;stripPointerCasts() != GV)</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// Storing the pointer not into GV... bad.</span></div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;        <span class="keywordflow">continue</span>; <span class="comment">// Otherwise, storing through it, or storing into GV... fine.</span></div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;      }</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160; </div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *BCI = dyn_cast&lt;BitCastInst&gt;(U)) {</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;        Worklist.push_back(BCI);</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;      }</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160; </div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *GEPI = dyn_cast&lt;GetElementPtrInst&gt;(U)) {</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;        Worklist.push_back(GEPI);</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;      }</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160; </div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    }</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;  }</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160; </div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;}</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;<span class="comment">/// If we have a global that is only initialized with a fixed size allocation</span></div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;<span class="comment">/// try to transform the program to use global memory instead of heap</span></div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;<span class="comment">/// allocated memory. This eliminates dynamic allocation, avoids an indirection</span></div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;<span class="comment">/// accessing the data, and exposes the resultant global to further GlobalOpt.</span></div>
<div class="line"><a name="l01042"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#a1ae624f5747718933b1dabc6a03689aa"> 1042</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="GlobalOpt_8cpp.html#a1ae624f5747718933b1dabc6a03689aa">tryToOptimizeStoreOfAllocationToGlobal</a>(<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV,</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;                                                   <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI,</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;                                                   <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;                                                   <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLI) {</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#a2787d1134842ab0b9be8694d95ccbdd7">isRemovableAlloc</a>(CI, TLI))</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <span class="comment">// Must be able to remove the call when we get done..</span></div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160; </div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Int8Ty = <a class="code" href="classllvm_1_1Type.html#a7ba5de75f50bb4a4ba920698edf39b28">Type::getInt8Ty</a>(CI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6a66ebb3aa12757479a3c88de77d78f8">getFunction</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#a9fffac2512fe651f0d5e37e27f5bd51c">getContext</a>());</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *InitVal = <a class="code" href="namespacellvm.html#a108b6e33f153eda5019d322f0ac909b0">getInitialValueOfAllocation</a>(CI, TLI, Int8Ty);</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;  <span class="keywordflow">if</span> (!InitVal)</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    <span class="comment">// Must be able to emit a memset for initialization</span></div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160; </div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> AllocSize;</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#a62ba0e5ee2d86f663c6de4efda6082a7">getObjectSize</a>(CI, AllocSize, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, TLI, <a class="code" href="structllvm_1_1ObjectSizeOpts.html">ObjectSizeOpts</a>()))</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160; </div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;  <span class="comment">// Restrict this transformation to only working on small allocations</span></div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;  <span class="comment">// (2048 bytes currently), as we don&#39;t want to introduce a 16M global or</span></div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;  <span class="comment">// something.</span></div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;  <span class="keywordflow">if</span> (AllocSize &gt;= 2048)</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160; </div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;  <span class="comment">// We can&#39;t optimize this global unless all uses of it are *known* to be</span></div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;  <span class="comment">// of the malloc value, not of the null initializer value (consider a use</span></div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;  <span class="comment">// that compares the global&#39;s value against zero to see if the malloc has</span></div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;  <span class="comment">// been reached).  To do this, we check to see if all uses of the global</span></div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;  <span class="comment">// would trap if the global were null: this proves that they must all</span></div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;  <span class="comment">// happen after the malloc.</span></div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="GlobalOpt_8cpp.html#a26f6a2c21d213fbcbe99a2c09d88a2c4">allUsesOfLoadedValueWillTrapIfNull</a>(GV))</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160; </div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;  <span class="comment">// We can&#39;t optimize this if the malloc itself is used in a complex way,</span></div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;  <span class="comment">// for example, being stored into multiple globals.  This allows the</span></div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;  <span class="comment">// malloc to be stored into the specified global, loaded, gep, icmp&#39;d.</span></div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;  <span class="comment">// These are all things we could transform to using the global for.</span></div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="GlobalOpt_8cpp.html#a406d93c10bd410f7ef8af5c00b037b8b">valueIsOnlyUsedLocallyOrStoredToOneGlobal</a>(CI, GV))</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160; </div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;  <a class="code" href="GlobalOpt_8cpp.html#aafa937ad7cb73fc0a05e6f1236953206">OptimizeGlobalAddressOfAllocation</a>(GV, CI, AllocSize, InitVal, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, TLI);</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;}</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160; </div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;<span class="comment">// Try to optimize globals based on the knowledge that only one value (besides</span></div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;<span class="comment">// its initializer) is ever stored to the global.</span></div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span></div>
<div class="line"><a name="l01089"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#a13c72931678c2da267fc265c7a2afdfb"> 1089</a></span>&#160;<a class="code" href="GlobalOpt_8cpp.html#a13c72931678c2da267fc265c7a2afdfb">optimizeOnceStoredGlobal</a>(<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV, <a class="code" href="classllvm_1_1Value.html">Value</a> *StoredOnceVal,</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;                         <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;                         <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> &amp;(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; GetTLI) {</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;  <span class="comment">// Ignore no-op GEPs and bitcasts.</span></div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;  StoredOnceVal = StoredOnceVal-&gt;<a class="code" href="classllvm_1_1Value.html#a966eb231e7d4e572874d2cb49b18faea">stripPointerCasts</a>();</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160; </div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;  <span class="comment">// If we are dealing with a pointer global that is initialized to null and</span></div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;  <span class="comment">// only has one (non-null) value stored into it, then we can optimize any</span></div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;  <span class="comment">// users of the loaded value (often calls and loads) that would trap if the</span></div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;  <span class="comment">// value was null.</span></div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;  <span class="keywordflow">if</span> (GV-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#a0e5946885029c1bce1350d34f2539b1b">getInitializer</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>() &amp;&amp;</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;      GV-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#a0e5946885029c1bce1350d34f2539b1b">getInitializer</a>()-&gt;<a class="code" href="classllvm_1_1Constant.html#ae4b6abe77abf42fb02081a6cc41a0132">isNullValue</a>() &amp;&amp;</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;      StoredOnceVal-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>() &amp;&amp;</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;      !<a class="code" href="namespacellvm.html#a7b03ed78a8e299bde6d26a8793cd4e06">NullPointerIsDefined</a>(</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;          <span class="keyword">nullptr</span> <span class="comment">/* F */</span>,</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;          GV-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#a0e5946885029c1bce1350d34f2539b1b">getInitializer</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a5ab2d0b0f0b8ceec3b907184e7567197">getPointerAddressSpace</a>())) {</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *SOVC = dyn_cast&lt;Constant&gt;(StoredOnceVal)) {</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;      <span class="keywordflow">if</span> (GV-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#a0e5946885029c1bce1350d34f2539b1b">getInitializer</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() != SOVC-&gt;getType())</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;        SOVC = <a class="code" href="classllvm_1_1ConstantExpr.html#ae79d05dd3d0b05e080e08f8c5c33f880">ConstantExpr::getBitCast</a>(SOVC, GV-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#a0e5946885029c1bce1350d34f2539b1b">getInitializer</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160; </div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;      <span class="comment">// Optimize away any trapping uses of the loaded value.</span></div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="GlobalOpt_8cpp.html#ab7fe47fe1b533f4c9bdd23baf28f3c8c">OptimizeAwayTrappingUsesOfLoads</a>(GV, SOVC, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, GetTLI))</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#accaca14b419cbac91ca6170523084a04">isAllocationFn</a>(StoredOnceVal, GetTLI)) {</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CI = dyn_cast&lt;CallInst&gt;(StoredOnceVal)) {</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;        <span class="keyword">auto</span> *TLI = &amp;GetTLI(*CI-&gt;getFunction());</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="GlobalOpt_8cpp.html#a1ae624f5747718933b1dabc6a03689aa">tryToOptimizeStoreOfAllocationToGlobal</a>(GV, CI, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, TLI))</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;      }</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    }</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;  }</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160; </div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;}</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;<span class="comment">/// At this point, we have learned that the only two values ever stored into GV</span></div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;<span class="comment">/// are its initializer and OtherVal.  See if we can shrink the global into a</span></div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;<span class="comment">/// boolean and select between the two values whenever it is used.  This exposes</span></div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;<span class="comment">/// the values to other scalar optimizations.</span></div>
<div class="line"><a name="l01128"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#a77de6d50432bef62e38fd24f2030026c"> 1128</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="GlobalOpt_8cpp.html#a77de6d50432bef62e38fd24f2030026c">TryToShrinkGlobalToBoolean</a>(<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV, <a class="code" href="classllvm_1_1Constant.html">Constant</a> *OtherVal) {</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *GVElType = GV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a29e0b1c558b350347e2652b35b26fea8">getValueType</a>();</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160; </div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;  <span class="comment">// If GVElType is already i1, it is already shrunk.  If the type of the GV is</span></div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;  <span class="comment">// an FP value, pointer or vector, don&#39;t do this optimization because a select</span></div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;  <span class="comment">// between them is very expensive and unlikely to lead to later</span></div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;  <span class="comment">// simplification.  In these cases, we typically end up with &quot;cond ? v1 : v2&quot;</span></div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;  <span class="comment">// where v1 and v2 both require constant pool loads, a big loss.</span></div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;  <span class="keywordflow">if</span> (GVElType == <a class="code" href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">Type::getInt1Ty</a>(GV-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>()) ||</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;      GVElType-&gt;<a class="code" href="classllvm_1_1Type.html#aac5759c83abd6a4af236401a7cfe7a0f">isFloatingPointTy</a>() ||</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;      GVElType-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>() || GVElType-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>())</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160; </div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  <span class="comment">// Walk the use list of the global seeing if all the uses are load or store.</span></div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;  <span class="comment">// If there is anything else, bail out.</span></div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : GV-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>()) {</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    <span class="keywordflow">if</span> (!isa&lt;LoadInst&gt;(U) &amp;&amp; !isa&lt;StoreInst&gt;(U))</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a48b30f2688526d0f45900a47cd6b6654">getLoadStoreType</a>(U) != GVElType)</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;  }</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160; </div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;   *** SHRINKING TO BOOL: &quot;</span> &lt;&lt; *GV &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160; </div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;  <span class="comment">// Create the new global, initializing it to false.</span></div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;  <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *NewGV = <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>(<a class="code" href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">Type::getInt1Ty</a>(GV-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>()),</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;                                             <span class="keyword">false</span>,</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;                                             <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">GlobalValue::InternalLinkage</a>,</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;                                        <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(GV-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>()),</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;                                             GV-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>()+<span class="stringliteral">&quot;.b&quot;</span>,</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;                                             GV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a52126ae2091b18cecfd5ad0f0012839a">getThreadLocalMode</a>(),</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;                                             GV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a92041fc7f781ba4fe708eec99139b72f">getType</a>()-&gt;<a class="code" href="classllvm_1_1PointerType.html#af8aeced5e71d2589fa3e9791043af5cb">getAddressSpace</a>());</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;  NewGV-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#a53f47ebcc1a7ac4553ba2a2eeca596e5">copyAttributesFrom</a>(GV);</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;  GV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Module.html#aac75aa0b7583c039e8a9d4ccae280769">insertGlobalVariable</a>(GV-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>(), NewGV);</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160; </div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *InitVal = GV-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#a0e5946885029c1bce1350d34f2539b1b">getInitializer</a>();</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(InitVal-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() != <a class="code" href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">Type::getInt1Ty</a>(GV-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>()) &amp;&amp;</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;         <span class="stringliteral">&quot;No reason to shrink to bool!&quot;</span>);</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160; </div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;DIGlobalVariableExpression *, 1&gt;</a> GVs;</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;  GV-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#a7bd3c333fa06c8fae17d52a78db3fde2">getDebugInfo</a>(GVs);</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160; </div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;  <span class="comment">// If initialized to zero and storing one into the global, we can use a cast</span></div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;  <span class="comment">// instead of a select to synthesize the desired value.</span></div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;  <span class="keywordtype">bool</span> IsOneZero = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;  <span class="keywordtype">bool</span> EmitOneOrZero = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;  <span class="keyword">auto</span> *CI = dyn_cast&lt;ConstantInt&gt;(OtherVal);</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;  <span class="keywordflow">if</span> (CI &amp;&amp; CI-&gt;getValue().getActiveBits() &lt;= 64) {</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    IsOneZero = InitVal-&gt;<a class="code" href="classllvm_1_1Constant.html#ae4b6abe77abf42fb02081a6cc41a0132">isNullValue</a>() &amp;&amp; CI-&gt;isOne();</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160; </div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    <span class="keyword">auto</span> *CIInit = dyn_cast&lt;ConstantInt&gt;(GV-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#a0e5946885029c1bce1350d34f2539b1b">getInitializer</a>());</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    <span class="keywordflow">if</span> (CIInit &amp;&amp; CIInit-&gt;getValue().getActiveBits() &lt;= 64) {</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;      <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> ValInit = CIInit-&gt;<a class="code" href="classllvm_1_1APInt.html#a217e0207d9cc8e046c2dccbf0e4bb198">getZExtValue</a>();</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;      <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> ValOther = CI-&gt;<a class="code" href="classllvm_1_1APInt.html#a217e0207d9cc8e046c2dccbf0e4bb198">getZExtValue</a>();</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;      <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> ValMinus = ValOther - ValInit;</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160; </div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;      <span class="keywordflow">for</span>(<span class="keyword">auto</span> *GVe : GVs){</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;        <a class="code" href="classllvm_1_1DIGlobalVariable.html">DIGlobalVariable</a> *DGV = GVe-&gt;getVariable();</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;        <a class="code" href="classllvm_1_1DIExpression.html">DIExpression</a> *<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = GVe-&gt;getExpression();</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = GV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Module.html#a6d883605206368bc536cc9ded97209b8">getDataLayout</a>();</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;        <span class="keywordtype">unsigned</span> SizeInOctets =</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;            <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSizeInBits(NewGV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a29e0b1c558b350347e2652b35b26fea8">getValueType</a>()) / 8;</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160; </div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;        <span class="comment">// It is expected that the address of global optimized variable is on</span></div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;        <span class="comment">// top of the stack. After optimization, value of that variable will</span></div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;        <span class="comment">// be ether 0 for initial value or 1 for other value. The following</span></div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;        <span class="comment">// expression should return constant integer value depending on the</span></div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;        <span class="comment">// value at global object address:</span></div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;        <span class="comment">// val * (ValOther - ValInit) + ValInit:</span></div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;        <span class="comment">// DW_OP_deref DW_OP_constu &lt;ValMinus&gt;</span></div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;        <span class="comment">// DW_OP_mul DW_OP_constu &lt;ValInit&gt; DW_OP_plus DW_OP_stack_value</span></div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;        <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;uint64_t, 12&gt;</a> Ops = {</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;            dwarf::DW_OP_deref_size, SizeInOctets,</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;            dwarf::DW_OP_constu, ValMinus,</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;            dwarf::DW_OP_mul, dwarf::DW_OP_constu, ValInit,</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;            dwarf::DW_OP_plus};</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;        <span class="keywordtype">bool</span> WithStackValue = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;        <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <a class="code" href="classllvm_1_1DIExpression.html#af3a48df3735933cf1621760019e5fd8c">DIExpression::prependOpcodes</a>(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, Ops, WithStackValue);</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;        <a class="code" href="classllvm_1_1DIGlobalVariableExpression.html">DIGlobalVariableExpression</a> *DGVE =</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;          <a class="code" href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">DIGlobalVariableExpression::get</a>(NewGV-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>(), DGV, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>);</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;        NewGV-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#aebcc339b418cae92442b394b33359705">addDebugInfo</a>(DGVE);</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;     }</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;     EmitOneOrZero = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    }</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;  }</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160; </div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;  <span class="keywordflow">if</span> (EmitOneOrZero) {</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;     <span class="comment">// FIXME: This will only emit address for debugger on which will</span></div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;     <span class="comment">// be written only 0 or 1.</span></div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;     <span class="keywordflow">for</span>(<span class="keyword">auto</span> *GV : GVs)</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;       NewGV-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#aebcc339b418cae92442b394b33359705">addDebugInfo</a>(GV);</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;   }</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160; </div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;  <span class="keywordflow">while</span> (!GV-&gt;<a class="code" href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">use_empty</a>()) {</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *UI = cast&lt;Instruction&gt;(GV-&gt;<a class="code" href="classllvm_1_1Value.html#ac2e338e4c120fc3ea43099b54880f1f1">user_back</a>());</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;StoreInst&gt;(UI)) {</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;      <span class="comment">// Change the store into a boolean store.</span></div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;      <span class="keywordtype">bool</span> StoringOther = <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getOperand(0) == OtherVal;</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;      <span class="comment">// Only do this if we weren&#39;t storing a loaded value.</span></div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *StoreVal;</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;      <span class="keywordflow">if</span> (StoringOther || <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getOperand(0) == InitVal) {</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;        StoreVal = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">Type::getInt1Ty</a>(GV-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>()),</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;                                    StoringOther);</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;        <span class="comment">// Otherwise, we are storing a previously loaded copy.  To do this,</span></div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;        <span class="comment">// change the copy from copying the original value to just copying the</span></div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;        <span class="comment">// bool.</span></div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;        <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *StoredVal = cast&lt;Instruction&gt;(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getOperand(0));</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160; </div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;        <span class="comment">// If we&#39;ve already replaced the input, StoredVal will be a cast or</span></div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;        <span class="comment">// select instruction.  If not, it will be a load of the original</span></div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;        <span class="comment">// global.</span></div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI = dyn_cast&lt;LoadInst&gt;(StoredVal)) {</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(LI-&gt;getOperand(0) == GV &amp;&amp; <span class="stringliteral">&quot;Not a copy!&quot;</span>);</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;          <span class="comment">// Insert a new load, to preserve the saved value.</span></div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;          StoreVal = <span class="keyword">new</span> <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a>(NewGV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a29e0b1c558b350347e2652b35b26fea8">getValueType</a>(), NewGV,</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;                                  LI-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;.b&quot;</span>, <span class="keyword">false</span>, <a class="code" href="structllvm_1_1Align.html">Align</a>(1),</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;                                  LI-&gt;getOrdering(), LI-&gt;getSyncScopeID(), LI);</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((isa&lt;CastInst&gt;(StoredVal) || isa&lt;SelectInst&gt;(StoredVal)) &amp;&amp;</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;                 <span class="stringliteral">&quot;This is not a form that we understand!&quot;</span>);</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;          StoreVal = StoredVal-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;LoadInst&gt;(StoreVal) &amp;&amp; <span class="stringliteral">&quot;Not a load of NewGV!&quot;</span>);</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;        }</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;      }</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;      <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *NSI =</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;          <span class="keyword">new</span> <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a>(StoreVal, NewGV, <span class="keyword">false</span>, <a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(1), <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getOrdering(),</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;                        <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getSyncScopeID(), <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>);</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;      NSI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae8f5bf5cc06f696b52c709677df00fbf">setDebugLoc</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getDebugLoc());</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;      <span class="comment">// Change the load into a load of bool then a select.</span></div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;      <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI = cast&lt;LoadInst&gt;(UI);</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;      <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *NLI = <span class="keyword">new</span> <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a>(NewGV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a29e0b1c558b350347e2652b35b26fea8">getValueType</a>(), NewGV,</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;                                   LI-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;.b&quot;</span>, <span class="keyword">false</span>, <a class="code" href="structllvm_1_1Align.html">Align</a>(1),</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;                                   LI-&gt;<a class="code" href="classllvm_1_1LoadInst.html#a93603fe0d4168b92a901f06015ecb2e7">getOrdering</a>(), LI-&gt;<a class="code" href="classllvm_1_1LoadInst.html#aca6c2de6950cb093f509ed2b67e02da2">getSyncScopeID</a>(), LI);</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NSI;</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;      <span class="keywordflow">if</span> (IsOneZero)</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;        NSI = <span class="keyword">new</span> <a class="code" href="classllvm_1_1ZExtInst.html">ZExtInst</a>(NLI, LI-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), <span class="stringliteral">&quot;&quot;</span>, LI);</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;        NSI = <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(NLI, OtherVal, InitVal, <span class="stringliteral">&quot;&quot;</span>, LI);</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;      NSI-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(LI);</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;      <span class="comment">// Since LI is split into two instructions, NLI and NSI both inherit the</span></div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;      <span class="comment">// same DebugLoc</span></div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;      NLI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae8f5bf5cc06f696b52c709677df00fbf">setDebugLoc</a>(LI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">getDebugLoc</a>());</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;      NSI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae8f5bf5cc06f696b52c709677df00fbf">setDebugLoc</a>(LI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">getDebugLoc</a>());</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;      LI-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(NSI);</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    }</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    UI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;  }</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160; </div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;  <span class="comment">// Retain the name of the old global variable. People who are debugging their</span></div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;  <span class="comment">// programs may expect these variables to be named the same.</span></div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;  NewGV-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(GV);</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;  GV-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#ae0cf03d5de37330b1eb69dd22a1d5057">eraseFromParent</a>();</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;}</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160; </div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span></div>
<div class="line"><a name="l01286"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#a5a50ba4ab5027d4013cf6bc2edf66085"> 1286</a></span>&#160;<a class="code" href="GlobalOpt_8cpp.html#a5a50ba4ab5027d4013cf6bc2edf66085">deleteIfDead</a>(<a class="code" href="classllvm_1_1GlobalValue.html">GlobalValue</a> &amp;GV,</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;             <a class="code" href="classllvm_1_1SmallPtrSetImpl.html">SmallPtrSetImpl&lt;const Comdat *&gt;</a> &amp;NotDiscardableComdats,</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;             <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<span class="keywordtype">void</span>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; DeleteFnCallback = <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;  GV.<a class="code" href="classllvm_1_1Constant.html#a960620248182018e566b095f06a605df">removeDeadConstantUsers</a>();</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160; </div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;  <span class="keywordflow">if</span> (!GV.<a class="code" href="classllvm_1_1GlobalValue.html#adcb86d621c23938671ad526d3bd1f9bd">isDiscardableIfUnused</a>() &amp;&amp; !GV.<a class="code" href="classllvm_1_1GlobalValue.html#a32e606ac4c88f71f14212e42b808e7f4">isDeclaration</a>())</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160; </div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Comdat.html">Comdat</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = GV.<a class="code" href="classllvm_1_1GlobalValue.html#a43721e1e88567116e8fca545125d86bf">getComdat</a>())</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;    <span class="keywordflow">if</span> (!GV.<a class="code" href="classllvm_1_1GlobalValue.html#a3ba1af4b9d9faa4a33729bbbecee83d1">hasLocalLinkage</a>() &amp;&amp; NotDiscardableComdats.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160; </div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da2fee1a7db4e84247a193a9af1f907013">Dead</a>;</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = dyn_cast&lt;Function&gt;(&amp;GV))</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da2fee1a7db4e84247a193a9af1f907013">Dead</a> = (<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;isDeclaration() &amp;&amp; <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;use_empty()) || <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;isDefTriviallyDead();</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da2fee1a7db4e84247a193a9af1f907013">Dead</a> = GV.<a class="code" href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">use_empty</a>();</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da2fee1a7db4e84247a193a9af1f907013">Dead</a>)</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160; </div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;GLOBAL DEAD: &quot;</span> &lt;&lt; GV &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = dyn_cast&lt;Function&gt;(&amp;GV)) {</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;    <span class="keywordflow">if</span> (DeleteFnCallback)</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;      DeleteFnCallback(*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;  }</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;  GV.<a class="code" href="classllvm_1_1GlobalValue.html#a7c733400ba8d113fd2976d4fea0db981">eraseFromParent</a>();</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;  ++NumDeleted;</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;}</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160; </div>
<div class="line"><a name="l01316"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#ade4086b409f00a755cfc6c0b03f67413"> 1316</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="GlobalOpt_8cpp.html#ade4086b409f00a755cfc6c0b03f67413">isPointerValueDeadOnEntryToFunction</a>(</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="classllvm_1_1GlobalValue.html">GlobalValue</a> *GV,</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;    <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; LookupDomTree) {</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;  <span class="comment">// Find all uses of GV. We expect them all to be in F, and if we can&#39;t</span></div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;  <span class="comment">// identify any of the uses we bail out.</span></div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;  <span class="comment">// On each of these uses, identify if the memory that GV points to is</span></div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;  <span class="comment">// used/required/live at the start of the function. If it is not, for example</span></div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;  <span class="comment">// if the first thing the function does is store to the GV, the GV can</span></div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;  <span class="comment">// possibly be demoted.</span></div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;  <span class="comment">// We don&#39;t do an exhaustive search for memory operations - simply look</span></div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;  <span class="comment">// through bitcasts as they&#39;re quite common and benign.</span></div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = GV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Module.html#a6d883605206368bc536cc9ded97209b8">getDataLayout</a>();</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;LoadInst *, 4&gt;</a> Loads;</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;StoreInst *, 4&gt;</a> Stores;</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *U : GV-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>()) {</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Operator.html#aca4ffddc11c10477a4a76ada6fd5da46">Operator::getOpcode</a>(U) == Instruction::BitCast) {</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> *UU : U-&gt;users()) {</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> *LI = dyn_cast&lt;LoadInst&gt;(UU))</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;          Loads.push_back(LI);</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;StoreInst&gt;(UU))</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;          Stores.push_back(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>);</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;      }</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    }</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160; </div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(U);</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent()-&gt;getParent() == <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160; </div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *LI = dyn_cast&lt;LoadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;      Loads.push_back(LI);</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;StoreInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;      Stores.push_back(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>);</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;  }</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160; </div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;  <span class="comment">// We have identified all uses of GV into loads and stores. Now check if all</span></div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;  <span class="comment">// of them are known not to depend on the value of the global at the function</span></div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;  <span class="comment">// entry point. We do this by ensuring that every load is dominated by at</span></div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;  <span class="comment">// least one store.</span></div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;  <span class="keyword">auto</span> &amp;DT = LookupDomTree(*<span class="keyword">const_cast&lt;</span><a class="code" href="classllvm_1_1Function.html">Function</a> *<span class="keyword">&gt;</span>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>));</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160; </div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;  <span class="comment">// The below check is quadratic. Check we&#39;re not going to do too many tests.</span></div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;  <span class="comment">// FIXME: Even though this will always have worst-case quadratic time, we</span></div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;  <span class="comment">// could put effort into minimizing the average time by putting stores that</span></div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;  <span class="comment">// have been shown to dominate at least one load at the beginning of the</span></div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;  <span class="comment">// Stores array, making subsequent dominance checks more likely to succeed</span></div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;  <span class="comment">// early.</span></div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;  <span class="comment">// The threshold here is fairly large because global-&gt;local demotion is a</span></div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;  <span class="comment">// very powerful optimization should it fire.</span></div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> Threshold = 100;</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;  <span class="keywordflow">if</span> (Loads.size() * Stores.size() &gt; Threshold)</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160; </div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *L : Loads) {</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    <span class="keyword">auto</span> *LTy = L-&gt;getType();</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a7dc3069afa2ce5ea62ac2eb183e51c00">none_of</a>(Stores, [&amp;](<span class="keyword">const</span> <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>) {</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;          <span class="keyword">auto</span> *STy = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;getValueOperand()-&gt;<a class="code" href="M68kELFObjectWriter_8cpp.html#ae4a8bc3879d2282eefd72b16b12c2a37">getType</a>();</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;          <span class="comment">// The load is only dominated by the store if DomTree says so</span></div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;          <span class="comment">// and the number of bits loaded in L is less than or equal to</span></div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;          <span class="comment">// the number of bits stored in S.</span></div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;          <span class="keywordflow">return</span> DT.dominates(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>, L) &amp;&amp;</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;                 <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeStoreSize(LTy).getFixedValue() &lt;=</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;                     <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeStoreSize(STy).getFixedValue();</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;        }))</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;  }</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;  <span class="comment">// All loads have known dependences inside F, so the global can be localized.</span></div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;}</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;<span class="comment">/// C may have non-instruction users. Can all of those users be turned into</span></div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;<span class="comment">/// instructions?</span></div>
<div class="line"><a name="l01396"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#ae73941c356240efe99835aedcd1f607c"> 1396</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="GlobalOpt_8cpp.html#ae73941c356240efe99835aedcd1f607c">allNonInstructionUsersCanBeMadeInstructions</a>(<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;  <span class="comment">// We don&#39;t do this exhaustively. The most common pattern that we really need</span></div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;  <span class="comment">// to care about is a constant GEP or constant bitcast - so just looking</span></div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;  <span class="comment">// through one single ConstantExpr.</span></div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;  <span class="comment">// The set of constants that this function returns true for must be able to be</span></div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;  <span class="comment">// handled by makeAllConstantUsesInstructions.</span></div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *U : <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;users()) {</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    <span class="keywordflow">if</span> (isa&lt;Instruction&gt;(U))</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <span class="keywordflow">if</span> (!isa&lt;ConstantExpr&gt;(U))</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;      <span class="comment">// Non instruction, non-constantexpr user; cannot convert this.</span></div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *UU : U-&gt;users())</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;      <span class="keywordflow">if</span> (!isa&lt;Instruction&gt;(UU))</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;        <span class="comment">// A constantexpr used by another constant. We don&#39;t try and recurse any</span></div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;        <span class="comment">// further but just bail out at this point.</span></div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;  }</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160; </div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;}</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;<span class="comment">/// C may have non-instruction users, and</span></div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;<span class="comment">/// allNonInstructionUsersCanBeMadeInstructions has returned true. Convert the</span></div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;<span class="comment">/// non-instruction users to instructions.</span></div>
<div class="line"><a name="l01422"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#a5f0b988151a1682c86951f993be18db5"> 1422</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="GlobalOpt_8cpp.html#a5f0b988151a1682c86951f993be18db5">makeAllConstantUsesInstructions</a>(<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;ConstantExpr*,4&gt;</a> <a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>;</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *U : <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;users()) {</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;    <span class="keywordflow">if</span> (isa&lt;ConstantExpr&gt;(U))</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;      <a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>.push_back(cast&lt;ConstantExpr&gt;(U));</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;      <span class="comment">// We should never get here; allNonInstructionUsersCanBeMadeInstructions</span></div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;      <span class="comment">// should not have returned true for C.</span></div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;          isa&lt;Instruction&gt;(U) &amp;&amp;</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;          <span class="stringliteral">&quot;Can&#39;t transform non-constantexpr non-instruction to instruction!&quot;</span>);</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;  }</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160; </div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value*,4&gt;</a> UUsers;</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *U : <a class="code" href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a>) {</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;    UUsers.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    <a class="code" href="namespacellvm.html#a39d3d23a084c4544ee5903203db10e8a">append_range</a>(UUsers, U-&gt;users());</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *UU : UUsers) {</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *UI = cast&lt;Instruction&gt;(UU);</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewU = U-&gt;getAsInstruction(UI);</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;      UI-&gt;<a class="code" href="classllvm_1_1User.html#a1600c7959045cb6b6a5f5a1d427ec67e">replaceUsesOfWith</a>(U, NewU);</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;    }</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;    <span class="comment">// We&#39;ve replaced all the uses, so destroy the constant. (destroyConstant</span></div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;    <span class="comment">// will update value handles and metadata.)</span></div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;    U-&gt;destroyConstant();</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;  }</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;}</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160; </div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;<span class="comment">// For a global variable with one store, if the store dominates any loads,</span></div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;<span class="comment">// those loads will always load the stored value (as opposed to the</span></div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;<span class="comment">// initializer), even in the presence of recursion.</span></div>
<div class="line"><a name="l01453"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#ad15d45b871d3111e8da4f9b394d7c83f"> 1453</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="GlobalOpt_8cpp.html#ad15d45b871d3111e8da4f9b394d7c83f">forwardStoredOnceStore</a>(</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV, <span class="keyword">const</span> <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *StoredOnceStore,</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;    <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; LookupDomTree) {</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *StoredOnceValue = StoredOnceStore-&gt;<a class="code" href="classllvm_1_1StoreInst.html#a14298313bdf734e2db5a921cc6e861a0">getValueOperand</a>();</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;  <span class="comment">// We can do this optimization for non-constants in nosync + norecurse</span></div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;  <span class="comment">// functions, but globals used in exactly one norecurse functions are already</span></div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;  <span class="comment">// promoted to an alloca.</span></div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;Constant&gt;(StoredOnceValue))</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = StoredOnceStore-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6a66ebb3aa12757479a3c88de77d78f8">getFunction</a>();</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;LoadInst *&gt;</a> Loads;</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : GV-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>()) {</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *LI = dyn_cast&lt;LoadInst&gt;(U)) {</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;      <span class="keywordflow">if</span> (LI-&gt;getFunction() == <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> &amp;&amp;</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;          LI-&gt;getType() == StoredOnceValue-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() &amp;&amp; LI-&gt;isSimple())</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;        Loads.push_back(LI);</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;    }</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;  }</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;  <span class="comment">// Only compute DT if we have any loads to examine.</span></div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;  <span class="keywordtype">bool</span> MadeChange = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;  <span class="keywordflow">if</span> (!Loads.empty()) {</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;    <span class="keyword">auto</span> &amp;DT = LookupDomTree(*<span class="keyword">const_cast&lt;</span><a class="code" href="classllvm_1_1Function.html">Function</a> *<span class="keyword">&gt;</span>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>));</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *LI : Loads) {</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;      <span class="keywordflow">if</span> (DT.dominates(StoredOnceStore, LI)) {</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;        LI-&gt;replaceAllUsesWith(<span class="keyword">const_cast&lt;</span><a class="code" href="classllvm_1_1Value.html">Value</a> *<span class="keyword">&gt;</span>(StoredOnceValue));</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;        LI-&gt;eraseFromParent();</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;        MadeChange = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;      }</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;    }</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;  }</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;  <span class="keywordflow">return</span> MadeChange;</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;}</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;<span class="comment">/// Analyze the specified global variable and optimize</span></div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;<span class="comment">/// it if possible.  If we make a change, return true.</span></div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span></div>
<div class="line"><a name="l01489"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#adf0a129dd6c07827f4a8a5914f2d8b5b"> 1489</a></span>&#160;<a class="code" href="GlobalOpt_8cpp.html#adf0a129dd6c07827f4a8a5914f2d8b5b">processInternalGlobal</a>(<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV, <span class="keyword">const</span> <a class="code" href="structllvm_1_1GlobalStatus.html">GlobalStatus</a> &amp;<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730">GS</a>,</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;                      <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; GetTTI,</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;                      <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> &amp;(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; GetTLI,</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;                      <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; LookupDomTree) {</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;  <span class="keyword">auto</span> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = GV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Module.html#a6d883605206368bc536cc9ded97209b8">getDataLayout</a>();</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;  <span class="comment">// If this is a first class global and has only one accessing function and</span></div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;  <span class="comment">// this function is non-recursive, we replace the global with a local alloca</span></div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;  <span class="comment">// in this function.</span></div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;  <span class="comment">// NOTE: It doesn&#39;t make sense to promote non-single-value types since we</span></div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;  <span class="comment">// are just replacing static memory to stack memory.</span></div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;  <span class="comment">// If the global is in different address space, don&#39;t bring it to stack.</span></div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730">GS</a>.HasMultipleAccessingFunctions &amp;&amp;</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;      <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730">GS</a>.AccessingFunction &amp;&amp;</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;      GV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a29e0b1c558b350347e2652b35b26fea8">getValueType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a5f6edc5246188225b3f49bd5c974c759">isSingleValueType</a>() &amp;&amp;</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;      GV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a92041fc7f781ba4fe708eec99139b72f">getType</a>()-&gt;<a class="code" href="classllvm_1_1PointerType.html#af8aeced5e71d2589fa3e9791043af5cb">getAddressSpace</a>() == 0 &amp;&amp;</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;      !GV-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#a0f6dab3350ff78735031a6a62f344f18">isExternallyInitialized</a>() &amp;&amp;</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;      <a class="code" href="GlobalOpt_8cpp.html#ae73941c356240efe99835aedcd1f607c">allNonInstructionUsersCanBeMadeInstructions</a>(GV) &amp;&amp;</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;      <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730">GS</a>.AccessingFunction-&gt;doesNotRecurse() &amp;&amp;</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;      <a class="code" href="GlobalOpt_8cpp.html#ade4086b409f00a755cfc6c0b03f67413">isPointerValueDeadOnEntryToFunction</a>(<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730">GS</a>.AccessingFunction, GV,</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;                                          LookupDomTree)) {</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = GV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Module.html#a6d883605206368bc536cc9ded97209b8">getDataLayout</a>();</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160; </div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LOCALIZING GLOBAL: &quot;</span> &lt;&lt; *GV &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;FirstI = <span class="keyword">const_cast&lt;</span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a>&amp;<span class="keyword">&gt;</span>(*<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730">GS</a>.AccessingFunction</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;                                                   -&gt;getEntryBlock().begin());</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *ElemTy = GV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a29e0b1c558b350347e2652b35b26fea8">getValueType</a>();</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;    <span class="comment">// FIXME: Pass Global&#39;s alignment when globals have alignment</span></div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;    <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *Alloca = <span class="keyword">new</span> <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a>(ElemTy, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getAllocaAddrSpace(), <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;                                        GV-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>(), &amp;FirstI);</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;    <span class="keywordflow">if</span> (!isa&lt;UndefValue&gt;(GV-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#a0e5946885029c1bce1350d34f2539b1b">getInitializer</a>()))</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;      <span class="keyword">new</span> <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a>(GV-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#a0e5946885029c1bce1350d34f2539b1b">getInitializer</a>(), Alloca, &amp;FirstI);</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160; </div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;    <a class="code" href="GlobalOpt_8cpp.html#a5f0b988151a1682c86951f993be18db5">makeAllConstantUsesInstructions</a>(GV);</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160; </div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;    GV-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(Alloca);</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;    GV-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#ae0cf03d5de37330b1eb69dd22a1d5057">eraseFromParent</a>();</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;    ++NumLocalized;</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;  }</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160; </div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160; </div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;  <span class="comment">// If the global is never loaded (but may be stored to), it is dead.</span></div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;  <span class="comment">// Delete it now.</span></div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730">GS</a>.IsLoaded) {</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;GLOBAL NEVER LOADED: &quot;</span> &lt;&lt; *GV &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160; </div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="GlobalOpt_8cpp.html#ace2885fc42e68606f270bfd3180d5f26">isLeakCheckerRoot</a>(GV)) {</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;      <span class="comment">// Delete any constant stores to the global.</span></div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;      Changed = <a class="code" href="GlobalOpt_8cpp.html#adc803f628b45e58e3de84b46dd0b7d83">CleanupPointerRootUsers</a>(GV, GetTLI);</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;      <span class="comment">// Delete any stores we can find to the global.  We may not be able to</span></div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;      <span class="comment">// make it completely dead though.</span></div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;      Changed = <a class="code" href="GlobalOpt_8cpp.html#ac3cf098d54027ac28278b060376bdcbd">CleanupConstantGlobalUsers</a>(GV, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;    }</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160; </div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;    <span class="comment">// If the global is dead now, delete it.</span></div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;    <span class="keywordflow">if</span> (GV-&gt;<a class="code" href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">use_empty</a>()) {</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;      GV-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#ae0cf03d5de37330b1eb69dd22a1d5057">eraseFromParent</a>();</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;      ++NumDeleted;</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;    }</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;    <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160; </div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;  }</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730">GS</a>.StoredType &lt;= <a class="code" href="structllvm_1_1GlobalStatus.html#abe8cd5e07daf1b2bf532174823523ee7adcbfa969dc654b5812a05827152a42c5">GlobalStatus::InitializerStored</a>) {</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;MARKING CONSTANT: &quot;</span> &lt;&lt; *GV &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160; </div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;    <span class="comment">// Don&#39;t actually mark a global constant if it&#39;s atomic because atomic loads</span></div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;    <span class="comment">// are implemented by a trivial cmpxchg in some edge-cases and that usually</span></div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;    <span class="comment">// requires write access to the variable even if it&#39;s not actually changed.</span></div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730">GS</a>.Ordering == <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7a56a57d29a3f9dda8671b4d6490a94b08">AtomicOrdering::NotAtomic</a>) {</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!GV-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#aa859e108741fa64681b63f0c0c672512">isConstant</a>() &amp;&amp; <span class="stringliteral">&quot;Expected a non-constant global&quot;</span>);</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;      GV-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#a40ae67d31da67ca17ed016839faf3390">setConstant</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    }</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160; </div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;    <span class="comment">// Clean up any obviously simplifiable users now.</span></div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;    Changed |= <a class="code" href="GlobalOpt_8cpp.html#ac3cf098d54027ac28278b060376bdcbd">CleanupConstantGlobalUsers</a>(GV, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160; </div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;    <span class="comment">// If the global is dead now, just nuke it.</span></div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;    <span class="keywordflow">if</span> (GV-&gt;<a class="code" href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">use_empty</a>()) {</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;   *** Marking constant allowed us to simplify &quot;</span></div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;all users and delete global!\n&quot;</span>);</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;      GV-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#ae0cf03d5de37330b1eb69dd22a1d5057">eraseFromParent</a>();</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;      ++NumDeleted;</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;    }</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160; </div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;    <span class="comment">// Fall through to the next check; see if we can optimize further.</span></div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;    ++NumMarked;</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;  }</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;  <span class="keywordflow">if</span> (!GV-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#a0e5946885029c1bce1350d34f2539b1b">getInitializer</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a5f6edc5246188225b3f49bd5c974c759">isSingleValueType</a>()) {</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = GV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Module.html#a6d883605206368bc536cc9ded97209b8">getDataLayout</a>();</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="GlobalOpt_8cpp.html#a7c88cc0fdb561f4a44ebd45b201a07dc">SRAGlobal</a>(GV, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>))</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;  }</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *StoredOnceValue = <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730">GS</a>.getStoredOnceValue();</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730">GS</a>.StoredType == <a class="code" href="structllvm_1_1GlobalStatus.html#abe8cd5e07daf1b2bf532174823523ee7aecd55f74522361f4b8056f8b6b745699">GlobalStatus::StoredOnce</a> &amp;&amp; StoredOnceValue) {</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;StoreFn =</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;        <span class="keyword">const_cast&lt;</span><a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<span class="keyword">&gt;</span>(*<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730">GS</a>.StoredOnceStore-&gt;getFunction());</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;    <span class="keywordtype">bool</span> CanHaveNonUndefGlobalInitializer =</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;        GetTTI(StoreFn).canHaveNonUndefGlobalInitializerInAddressSpace(</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;            GV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a92041fc7f781ba4fe708eec99139b72f">getType</a>()-&gt;<a class="code" href="classllvm_1_1PointerType.html#af8aeced5e71d2589fa3e9791043af5cb">getAddressSpace</a>());</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;    <span class="comment">// If the initial value for the global was an undef value, and if only</span></div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;    <span class="comment">// one other value was stored into it, we can just change the</span></div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;    <span class="comment">// initializer to be the stored value, then delete all stores to the</span></div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;    <span class="comment">// global.  This allows us to mark it constant.</span></div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    <span class="comment">// This is restricted to address spaces that allow globals to have</span></div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    <span class="comment">// initializers. NVPTX, for example, does not support initializers for</span></div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;    <span class="comment">// shared memory (AS 3).</span></div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;    <span class="keyword">auto</span> *SOVConstant = dyn_cast&lt;Constant&gt;(StoredOnceValue);</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;    <span class="keywordflow">if</span> (SOVConstant &amp;&amp; isa&lt;UndefValue&gt;(GV-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#a0e5946885029c1bce1350d34f2539b1b">getInitializer</a>()) &amp;&amp;</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;        <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(SOVConstant-&gt;getType()) ==</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;            <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(GV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a29e0b1c558b350347e2652b35b26fea8">getValueType</a>()) &amp;&amp;</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;        CanHaveNonUndefGlobalInitializer) {</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;      <span class="keywordflow">if</span> (SOVConstant-&gt;getType() == GV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a29e0b1c558b350347e2652b35b26fea8">getValueType</a>()) {</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;        <span class="comment">// Change the initializer in place.</span></div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;        GV-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#a095f8f031d99ce3c0b25478713293dea">setInitializer</a>(SOVConstant);</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;        <span class="comment">// Create a new global with adjusted type.</span></div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;        <span class="keyword">auto</span> *NGV = <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>(</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;            *GV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>(), SOVConstant-&gt;getType(), GV-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#aa859e108741fa64681b63f0c0c672512">isConstant</a>(),</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;            GV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a3547d58a060ee2e4a29cbea85bef91af">getLinkage</a>(), SOVConstant, <span class="stringliteral">&quot;&quot;</span>, GV, GV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a52126ae2091b18cecfd5ad0f0012839a">getThreadLocalMode</a>(),</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;            GV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a702d4986803a1782ba305b1c7a0f1c21">getAddressSpace</a>());</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;        NGV-&gt;takeName(GV);</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;        NGV-&gt;copyAttributesFrom(GV);</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;        GV-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(<a class="code" href="classllvm_1_1ConstantExpr.html#ae79d05dd3d0b05e080e08f8c5c33f880">ConstantExpr::getBitCast</a>(NGV, GV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a92041fc7f781ba4fe708eec99139b72f">getType</a>()));</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;        GV-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#ae0cf03d5de37330b1eb69dd22a1d5057">eraseFromParent</a>();</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;        GV = NGV;</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;      }</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160; </div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;      <span class="comment">// Clean up any obviously simplifiable users now.</span></div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;      <a class="code" href="GlobalOpt_8cpp.html#ac3cf098d54027ac28278b060376bdcbd">CleanupConstantGlobalUsers</a>(GV, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160; </div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;      <span class="keywordflow">if</span> (GV-&gt;<a class="code" href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">use_empty</a>()) {</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;   *** Substituting initializer allowed us to &quot;</span></div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;                          &lt;&lt; <span class="stringliteral">&quot;simplify all users and delete global!\n&quot;</span>);</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;        GV-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#ae0cf03d5de37330b1eb69dd22a1d5057">eraseFromParent</a>();</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;        ++NumDeleted;</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;      }</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;      ++NumSubstitute;</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    }</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160; </div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;    <span class="comment">// Try to optimize globals based on the knowledge that only one value</span></div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    <span class="comment">// (besides its initializer) is ever stored to the global.</span></div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="GlobalOpt_8cpp.html#a13c72931678c2da267fc265c7a2afdfb">optimizeOnceStoredGlobal</a>(GV, StoredOnceValue, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, GetTLI))</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160; </div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    <span class="comment">// Try to forward the store to any loads. If we have more than one store, we</span></div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;    <span class="comment">// may have a store of the initializer between StoredOnceStore and a load.</span></div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730">GS</a>.NumStores == 1)</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="GlobalOpt_8cpp.html#ad15d45b871d3111e8da4f9b394d7c83f">forwardStoredOnceStore</a>(GV, <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730">GS</a>.StoredOnceStore, LookupDomTree))</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160; </div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;    <span class="comment">// Otherwise, if the global was not a boolean, we can shrink it to be a</span></div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;    <span class="comment">// boolean. Skip this optimization for AS that doesn&#39;t allow an initializer.</span></div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;    <span class="keywordflow">if</span> (SOVConstant &amp;&amp; <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730">GS</a>.Ordering == <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7a56a57d29a3f9dda8671b4d6490a94b08">AtomicOrdering::NotAtomic</a> &amp;&amp;</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;        (!isa&lt;UndefValue&gt;(GV-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#a0e5946885029c1bce1350d34f2539b1b">getInitializer</a>()) ||</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;         CanHaveNonUndefGlobalInitializer)) {</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="GlobalOpt_8cpp.html#a77de6d50432bef62e38fd24f2030026c">TryToShrinkGlobalToBoolean</a>(GV, SOVConstant)) {</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;        ++NumShrunkToBool;</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;      }</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;    }</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;  }</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160; </div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;}</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;<span class="comment">/// Analyze the specified global variable and optimize it if possible.  If we</span></div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;<span class="comment">/// make a change, return true.</span></div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span></div>
<div class="line"><a name="l01665"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#a5cb8771722bfd8bcbdeb391b17e6cfd6"> 1665</a></span>&#160;<a class="code" href="GlobalOpt_8cpp.html#a5cb8771722bfd8bcbdeb391b17e6cfd6">processGlobal</a>(<a class="code" href="classllvm_1_1GlobalValue.html">GlobalValue</a> &amp;GV,</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;              <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; GetTTI,</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;              <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> &amp;(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; GetTLI,</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;              <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; LookupDomTree) {</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;  <span class="keywordflow">if</span> (GV.<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>().<a class="code" href="classllvm_1_1StringRef.html#a84cd09ccc918883d51a387f0e0f374f3">startswith</a>(<span class="stringliteral">&quot;llvm.&quot;</span>))</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160; </div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;  <a class="code" href="structllvm_1_1GlobalStatus.html">GlobalStatus</a> <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730">GS</a>;</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160; </div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="structllvm_1_1GlobalStatus.html#ae58ea7b3b03443e976cbef09ac25cf00">GlobalStatus::analyzeGlobal</a>(&amp;GV, <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730">GS</a>))</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160; </div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730">GS</a>.IsCompared &amp;&amp; !GV.<a class="code" href="classllvm_1_1GlobalValue.html#ac18f876b955434599bd93fd50aad53b8">hasGlobalUnnamedAddr</a>()) {</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;    <span class="keyword">auto</span> NewUnnamedAddr = GV.<a class="code" href="classllvm_1_1GlobalValue.html#a3ba1af4b9d9faa4a33729bbbecee83d1">hasLocalLinkage</a>() ? <a class="code" href="classllvm_1_1GlobalValue.html#ae8df4be75bfc50b1eadd74e85c25fa45a4cc6684df7b4a92b1dec6fce3264fac8">GlobalValue::UnnamedAddr::Global</a></div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;                                               : <a class="code" href="classllvm_1_1GlobalValue.html#ae8df4be75bfc50b1eadd74e85c25fa45a509820290d57f333403f490dde7316f4">GlobalValue::UnnamedAddr::Local</a>;</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;    <span class="keywordflow">if</span> (NewUnnamedAddr != GV.<a class="code" href="classllvm_1_1GlobalValue.html#ac2417a3c6edd0db7a9ad84b82c4054b7">getUnnamedAddr</a>()) {</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;      GV.<a class="code" href="classllvm_1_1GlobalValue.html#a38c97622dccff7ae31fe0be3b21c9b3d">setUnnamedAddr</a>(NewUnnamedAddr);</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;      NumUnnamed++;</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    }</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;  }</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160; </div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;  <span class="comment">// Do more involved optimizations if the global is internal.</span></div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;  <span class="keywordflow">if</span> (!GV.<a class="code" href="classllvm_1_1GlobalValue.html#a3ba1af4b9d9faa4a33729bbbecee83d1">hasLocalLinkage</a>())</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;    <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160; </div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;  <span class="keyword">auto</span> *GVar = dyn_cast&lt;GlobalVariable&gt;(&amp;GV);</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;  <span class="keywordflow">if</span> (!GVar)</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;    <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160; </div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;  <span class="keywordflow">if</span> (GVar-&gt;isConstant() || !GVar-&gt;hasInitializer())</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;    <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160; </div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="GlobalOpt_8cpp.html#adf0a129dd6c07827f4a8a5914f2d8b5b">processInternalGlobal</a>(GVar, <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730">GS</a>, GetTTI, GetTLI, LookupDomTree) ||</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;         Changed;</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;}</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;<span class="comment">/// Walk all of the direct calls of the specified function, changing them to</span></div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;<span class="comment">/// FastCC.</span></div>
<div class="line"><a name="l01705"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#a7b97d3981d965c0884878bca5be437ff"> 1705</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="GlobalOpt_8cpp.html#a7b97d3981d965c0884878bca5be437ff">ChangeCalleesToFastCall</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;users()) {</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;    <span class="keywordflow">if</span> (isa&lt;BlockAddress&gt;(U))</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;    cast&lt;CallBase&gt;(U)-&gt;setCallingConv(<a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feedabc8e2ee40a84687a9e12fd08784b87ba">CallingConv::Fast</a>);</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;  }</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;}</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160; </div>
<div class="line"><a name="l01713"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#aa5d09b628a436d6957b7a0f7751bb54f"> 1713</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1AttributeList.html">AttributeList</a> <a class="code" href="GlobalOpt_8cpp.html#aa5d09b628a436d6957b7a0f7751bb54f">StripAttr</a>(<a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="classllvm_1_1AttributeList.html">AttributeList</a> <a class="code" href="README__ALTIVEC_8txt.html#a9d3ba236d13373cde794da2023acc7a0">Attrs</a>,</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;                               <a class="code" href="classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60e">Attribute::AttrKind</a> A) {</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;  <span class="keywordtype">unsigned</span> AttrIndex;</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9d3ba236d13373cde794da2023acc7a0">Attrs</a>.hasAttrSomewhere(A, &amp;AttrIndex))</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="README__ALTIVEC_8txt.html#a9d3ba236d13373cde794da2023acc7a0">Attrs</a>.<a class="code" href="classllvm_1_1Function.html#a838fded9375bdf5078b6853449ee44f5">removeAttributeAtIndex</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, AttrIndex, A);</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="README__ALTIVEC_8txt.html#a9d3ba236d13373cde794da2023acc7a0">Attrs</a>;</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;}</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160; </div>
<div class="line"><a name="l01721"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#a4e385793d373a822cffdeaa9ee8f3e19"> 1721</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="GlobalOpt_8cpp.html#a4e385793d373a822cffdeaa9ee8f3e19">RemoveAttribute</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60e">Attribute::AttrKind</a> A) {</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;  <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;setAttributes(<a class="code" href="GlobalOpt_8cpp.html#aa5d09b628a436d6957b7a0f7751bb54f">StripAttr</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getContext(), <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getAttributes(), A));</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;users()) {</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;    <span class="keywordflow">if</span> (isa&lt;BlockAddress&gt;(U))</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;    <a class="code" href="classllvm_1_1CallBase.html">CallBase</a> *CB = cast&lt;CallBase&gt;(U);</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;    CB-&gt;<a class="code" href="classllvm_1_1CallBase.html#a9da3b29e8e71b9be4645874e1721207a">setAttributes</a>(<a class="code" href="GlobalOpt_8cpp.html#aa5d09b628a436d6957b7a0f7751bb54f">StripAttr</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getContext(), CB-&gt;<a class="code" href="classllvm_1_1CallBase.html#ae0c55761fce39dd71617690b04385193">getAttributes</a>(), A));</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;  }</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;}</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;<span class="comment">/// Return true if this is a calling convention that we&#39;d like to change.  The</span></div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;<span class="comment">/// idea here is that we don&#39;t want to mess with the convention if the user</span></div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;<span class="comment">/// explicitly requested something with performance implications like coldcc,</span></div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;<span class="comment">/// GHC, or anyregcc.</span></div>
<div class="line"><a name="l01735"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#a9bcf977be0fa7a45111320b946f72f3d"> 1735</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="GlobalOpt_8cpp.html#a9bcf977be0fa7a45111320b946f72f3d">hasChangeableCC</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;  <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">CallingConv::ID</a> <a class="code" href="RISCVRedundantCopyElimination_8cpp.html#a77c69067ae8279bc00ab8757731e90d7">CC</a> = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getCallingConv();</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160; </div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;  <span class="comment">// FIXME: Is it worth transforming x86_stdcallcc and x86_fastcallcc?</span></div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="RISCVRedundantCopyElimination_8cpp.html#a77c69067ae8279bc00ab8757731e90d7">CC</a> != <a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feedafd841a49aec1539bc88abc8ff9e170fb">CallingConv::C</a> &amp;&amp; <a class="code" href="RISCVRedundantCopyElimination_8cpp.html#a77c69067ae8279bc00ab8757731e90d7">CC</a> != <a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feeda97109ccd68cac64fb38dbd24fc4589c6">CallingConv::X86_ThisCall</a>)</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160; </div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;  <span class="comment">// FIXME: Change CC for the whole chain of musttail calls when possible.</span></div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;  <span class="comment">// Can&#39;t change CC of the function that either has musttail calls, or is a</span></div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;  <span class="comment">// musttail callee itself</span></div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;users()) {</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;    <span class="keywordflow">if</span> (isa&lt;BlockAddress&gt;(U))</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;    <a class="code" href="classllvm_1_1CallInst.html">CallInst</a>* CI = dyn_cast&lt;CallInst&gt;(U);</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;    <span class="keywordflow">if</span> (!CI)</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160; </div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;    <span class="keywordflow">if</span> (CI-&gt;<a class="code" href="classllvm_1_1CallInst.html#ad3c897ba734b78e973db4622dff7bdcb">isMustTailCall</a>())</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;  }</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160; </div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.getTerminatingMustTailCall())</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160; </div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;}</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;<span class="comment">/// Return true if the block containing the call site has a BlockFrequency of</span></div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;<span class="comment">/// less than ColdCCRelFreq% of the entry block.</span></div>
<div class="line"><a name="l01766"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#a652ede21e988a4de569cdbc7863ea234"> 1766</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="GlobalOpt_8cpp.html#a652ede21e988a4de569cdbc7863ea234">isColdCallSite</a>(<a class="code" href="classllvm_1_1CallBase.html">CallBase</a> &amp;CB, <a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a> &amp;CallerBFI) {</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a> ColdProb(<a class="code" href="GlobalOpt_8cpp.html#a78eb44f8b1ae7339f4f73c6d27146e94">ColdCCRelFreq</a>, 100);</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;  <span class="keyword">auto</span> *CallSiteBB = CB.<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>();</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;  <span class="keyword">auto</span> CallSiteFreq = CallerBFI.<a class="code" href="classllvm_1_1BlockFrequencyInfo.html#ab8b72c18add22acd827f7a6cd1ff1bff">getBlockFreq</a>(CallSiteBB);</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;  <span class="keyword">auto</span> CallerEntryFreq =</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;      CallerBFI.<a class="code" href="classllvm_1_1BlockFrequencyInfo.html#ab8b72c18add22acd827f7a6cd1ff1bff">getBlockFreq</a>(&amp;(CB.<a class="code" href="classllvm_1_1CallBase.html#afac5b39bcbb90d660f83d9b4bd8c6d95">getCaller</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#ae6a4da5f41fc6a36735cc1704c01ce60">getEntryBlock</a>()));</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;  <span class="keywordflow">return</span> CallSiteFreq &lt; CallerEntryFreq * ColdProb;</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;}</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160; </div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;<span class="comment">// This function checks if the input function F is cold at all call sites. It</span></div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;<span class="comment">// also looks each call site&#39;s containing function, returning false if the</span></div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;<span class="comment">// caller function contains other non cold calls. The input vector AllCallsCold</span></div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;<span class="comment">// contains a list of functions that only have call sites in cold blocks.</span></div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span></div>
<div class="line"><a name="l01780"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#ab9256893dbe8440acbad9879ae65180d"> 1780</a></span>&#160;<a class="code" href="GlobalOpt_8cpp.html#ab9256893dbe8440acbad9879ae65180d">isValidCandidateForColdCC</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>,</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;                          <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a> &amp;(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; GetBFI,</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;                          <span class="keyword">const</span> std::vector&lt;Function *&gt; &amp;AllCallsCold) {</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160; </div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.user_empty())</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160; </div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.users()) {</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;    <span class="keywordflow">if</span> (isa&lt;BlockAddress&gt;(U))</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160; </div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;    <a class="code" href="classllvm_1_1CallBase.html">CallBase</a> &amp;CB = cast&lt;CallBase&gt;(*U);</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *CallerFunc = CB.<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>();</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;    <a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a> &amp;CallerBFI = GetBFI(*CallerFunc);</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="GlobalOpt_8cpp.html#a652ede21e988a4de569cdbc7863ea234">isColdCallSite</a>(CB, CallerBFI))</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#acd1cd968cb420c82d70926920fcdc7d7">llvm::is_contained</a>(AllCallsCold, CallerFunc))</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;  }</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;}</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160; </div>
<div class="line"><a name="l01802"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#a9ed5060153ed9e3ca21cb567997d527c"> 1802</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="GlobalOpt_8cpp.html#a9ed5060153ed9e3ca21cb567997d527c">changeCallSitesToColdCC</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;users()) {</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;    <span class="keywordflow">if</span> (isa&lt;BlockAddress&gt;(U))</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;    cast&lt;CallBase&gt;(U)-&gt;setCallingConv(<a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feeda94ec9273479164e4aec1d5d91b71dc85">CallingConv::Cold</a>);</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;  }</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;}</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160; </div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;<span class="comment">// This function iterates over all the call instructions in the input Function</span></div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;<span class="comment">// and checks that all call sites are in cold blocks and are allowed to use the</span></div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;<span class="comment">// coldcc calling convention.</span></div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span></div>
<div class="line"><a name="l01814"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#ab683b00fa6256a0ceabc698614a428e7"> 1814</a></span>&#160;<a class="code" href="GlobalOpt_8cpp.html#ab683b00fa6256a0ceabc698614a428e7">hasOnlyColdCalls</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>,</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;                 <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a> &amp;(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; GetBFI) {</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI = dyn_cast&lt;CallInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;        <span class="comment">// Skip over isline asm instructions since they aren&#39;t function calls.</span></div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;        <span class="keywordflow">if</span> (CI-&gt;isInlineAsm())</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;        <a class="code" href="classllvm_1_1Function.html">Function</a> *CalledFn = CI-&gt;getCalledFunction();</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;        <span class="keywordflow">if</span> (!CalledFn)</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;        <span class="comment">// Skip over intrinsics since they won&#39;t remain as function calls.</span></div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;        <span class="comment">// Important to do this check before the linkage check below so we</span></div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;        <span class="comment">// won&#39;t bail out on debug intrinsics, possibly making the generated</span></div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;        <span class="comment">// code dependent on the presence of debug info.</span></div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;        <span class="keywordflow">if</span> (CalledFn-&gt;<a class="code" href="classllvm_1_1Function.html#a4d0a7baab8d078065b2de10e3460892a">getIntrinsicID</a>() != <a class="code" href="namespacellvm_1_1Intrinsic.html#a35fedf4db6d756bd82501607f93c1e79aab5fb650050f184fa7c19c26abde5226">Intrinsic::not_intrinsic</a>)</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;        <span class="keywordflow">if</span> (!CalledFn-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a3ba1af4b9d9faa4a33729bbbecee83d1">hasLocalLinkage</a>())</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;        <span class="comment">// Check if it&#39;s valid to use coldcc calling convention.</span></div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="GlobalOpt_8cpp.html#a9bcf977be0fa7a45111320b946f72f3d">hasChangeableCC</a>(CalledFn) || CalledFn-&gt;<a class="code" href="classllvm_1_1Function.html#af457a58a84b500d44feb7b699aa43ec1">isVarArg</a>() ||</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;            CalledFn-&gt;<a class="code" href="classllvm_1_1Function.html#acb2d690db190a509db0f44bb0b1ed20c">hasAddressTaken</a>())</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;        <a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a> &amp;CallerBFI = GetBFI(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="GlobalOpt_8cpp.html#a652ede21e988a4de569cdbc7863ea234">isColdCallSite</a>(*CI, CallerBFI))</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;      }</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;    }</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;  }</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;}</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160; </div>
<div class="line"><a name="l01846"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#a7e0090207d4b1da753ad2d3bbb51fc4d"> 1846</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="GlobalOpt_8cpp.html#a7e0090207d4b1da753ad2d3bbb51fc4d">hasMustTailCallers</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;users()) {</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;    <a class="code" href="classllvm_1_1CallBase.html">CallBase</a> *CB = dyn_cast&lt;CallBase&gt;(U);</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;    <span class="keywordflow">if</span> (!CB) {</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;BlockAddress&gt;(U) &amp;&amp;</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;             <span class="stringliteral">&quot;Expected either CallBase or BlockAddress&quot;</span>);</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;    }</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;    <span class="keywordflow">if</span> (CB-&gt;<a class="code" href="classllvm_1_1CallBase.html#a50426b12f4acb3d9f74d0778948e9597">isMustTailCall</a>())</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;  }</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;}</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160; </div>
<div class="line"><a name="l01860"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#aacd456f21a2be87fdf19ab7e266b3a40"> 1860</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="GlobalOpt_8cpp.html#aacd456f21a2be87fdf19ab7e266b3a40">hasInvokeCallers</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;users())</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;    <span class="keywordflow">if</span> (isa&lt;InvokeInst&gt;(U))</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;}</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160; </div>
<div class="line"><a name="l01867"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#a5b064b03163c5f9304d4b702da5fa1e4"> 1867</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="GlobalOpt_8cpp.html#a5b064b03163c5f9304d4b702da5fa1e4">RemovePreallocated</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;  <a class="code" href="GlobalOpt_8cpp.html#a4e385793d373a822cffdeaa9ee8f3e19">RemoveAttribute</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, Attribute::Preallocated);</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160; </div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;  <span class="keyword">auto</span> *<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getParent();</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160; </div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getContext());</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160; </div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;  <span class="comment">// Cannot modify users() while iterating over it, so make a copy.</span></div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;User *, 4&gt;</a> PreallocatedCalls(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;users());</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : PreallocatedCalls) {</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;    <a class="code" href="classllvm_1_1CallBase.html">CallBase</a> *CB = dyn_cast&lt;CallBase&gt;(U);</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;    <span class="keywordflow">if</span> (!CB)</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160; </div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;        !CB-&gt;<a class="code" href="classllvm_1_1CallBase.html#a50426b12f4acb3d9f74d0778948e9597">isMustTailCall</a>() &amp;&amp;</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;        <span class="stringliteral">&quot;Shouldn&#39;t call RemotePreallocated() on a musttail preallocated call&quot;</span>);</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;    <span class="comment">// Create copy of call without &quot;preallocated&quot; operand bundle.</span></div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;OperandBundleDef, 1&gt;</a> OpBundles;</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;    CB-&gt;<a class="code" href="classllvm_1_1CallBase.html#a19263fff7f5b3a9d22b48151fa0d85d0">getOperandBundlesAsDefs</a>(OpBundles);</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;    <a class="code" href="classllvm_1_1CallBase.html">CallBase</a> *PreallocatedSetup = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *It = OpBundles.begin(); It != OpBundles.end(); ++It) {</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;      <span class="keywordflow">if</span> (It-&gt;getTag() == <span class="stringliteral">&quot;preallocated&quot;</span>) {</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;        PreallocatedSetup = cast&lt;CallBase&gt;(*It-&gt;input_begin());</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;        OpBundles.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a563ffc2ff61c499b3be2e00100cb72fa">erase</a>(It);</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;      }</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;    }</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PreallocatedSetup &amp;&amp; <span class="stringliteral">&quot;Did not find preallocated bundle&quot;</span>);</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> ArgCount =</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;        cast&lt;ConstantInt&gt;(PreallocatedSetup-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(0))-&gt;<a class="code" href="classllvm_1_1APInt.html#a217e0207d9cc8e046c2dccbf0e4bb198">getZExtValue</a>();</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160; </div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((isa&lt;CallInst&gt;(CB) || isa&lt;InvokeInst&gt;(CB)) &amp;&amp;</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;           <span class="stringliteral">&quot;Unknown indirect call type&quot;</span>);</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;    <a class="code" href="classllvm_1_1CallBase.html">CallBase</a> *NewCB = <a class="code" href="classllvm_1_1CallBase.html#a7d1bb46cb6e28a5907c4185157804911">CallBase::Create</a>(CB, OpBundles, CB);</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;    CB-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(NewCB);</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;    NewCB-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(CB);</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;    CB-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160; </div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(PreallocatedSetup);</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;    <span class="keyword">auto</span> *StackSave =</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(<a class="code" href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">Intrinsic::getDeclaration</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, Intrinsic::stacksave));</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160; </div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(NewCB-&gt;<a class="code" href="classllvm_1_1Instruction.html#a91bd28adea418a08cec78b72413d9d45">getNextNonDebugInstruction</a>());</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(<a class="code" href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">Intrinsic::getDeclaration</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, Intrinsic::stackrestore),</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;                       StackSave);</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160; </div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;    <span class="comment">// Replace @llvm.call.preallocated.arg() with alloca.</span></div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;    <span class="comment">// Cannot modify users() while iterating over it, so make a copy.</span></div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;    <span class="comment">// @llvm.call.preallocated.arg() can be called with the same index multiple</span></div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;    <span class="comment">// times. So for each @llvm.call.preallocated.arg(), we see if we have</span></div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;    <span class="comment">// already created a Value* for the index, and if not, create an alloca and</span></div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;    <span class="comment">// bitcast right after the @llvm.call.preallocated.setup() so that it</span></div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;    <span class="comment">// dominates all uses.</span></div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 2&gt;</a> ArgAllocas(ArgCount);</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;User *, 2&gt;</a> PreallocatedArgs(PreallocatedSetup-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>());</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="classllvm_1_1User.html">User</a> : PreallocatedArgs) {</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;      <span class="keyword">auto</span> *UseCall = cast&lt;CallBase&gt;(<a class="code" href="classllvm_1_1User.html">User</a>);</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(UseCall-&gt;getCalledFunction()-&gt;getIntrinsicID() ==</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;                 Intrinsic::call_preallocated_arg &amp;&amp;</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;             <span class="stringliteral">&quot;preallocated token use was not a llvm.call.preallocated.arg&quot;</span>);</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;      <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> AllocArgIndex =</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;          cast&lt;ConstantInt&gt;(UseCall-&gt;getArgOperand(1))-&gt;<a class="code" href="classllvm_1_1APInt.html#a217e0207d9cc8e046c2dccbf0e4bb198">getZExtValue</a>();</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *AllocaReplacement = ArgAllocas[AllocArgIndex];</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;      <span class="keywordflow">if</span> (!AllocaReplacement) {</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;        <span class="keyword">auto</span> <a class="code" href="namespacellvm.html#a2c3c18bffdc25d969233c5448bdfe7eb">AddressSpace</a> = UseCall-&gt;getType()-&gt;getPointerAddressSpace();</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;        <span class="keyword">auto</span> *ArgType =</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;            UseCall-&gt;getFnAttr(Attribute::Preallocated).getValueAsType();</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;        <span class="keyword">auto</span> *InsertBefore = PreallocatedSetup-&gt;<a class="code" href="classllvm_1_1Instruction.html#a91bd28adea418a08cec78b72413d9d45">getNextNonDebugInstruction</a>();</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(InsertBefore);</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;        <span class="keyword">auto</span> *Alloca =</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;            <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(ArgType, <a class="code" href="namespacellvm.html#a2c3c18bffdc25d969233c5448bdfe7eb">AddressSpace</a>, <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;paarg&quot;</span>);</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;        <span class="keyword">auto</span> *BitCast = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;            Alloca, <a class="code" href="classllvm_1_1Type.html#a7fe9ccd4893f4e2caa826126c09545ea">Type::getInt8PtrTy</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getContext()), UseCall-&gt;getName());</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;        ArgAllocas[AllocArgIndex] = BitCast;</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;        AllocaReplacement = BitCast;</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;      }</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160; </div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;      UseCall-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(AllocaReplacement);</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;      UseCall-&gt;eraseFromParent();</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;    }</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;    <span class="comment">// Remove @llvm.call.preallocated.setup().</span></div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;    cast&lt;Instruction&gt;(PreallocatedSetup)-&gt;eraseFromParent();</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;  }</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;}</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160; </div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span></div>
<div class="line"><a name="l01954"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#a42820c4a63faae2568e3db2ac69af37d"> 1954</a></span>&#160;<a class="code" href="GlobalOpt_8cpp.html#a42820c4a63faae2568e3db2ac69af37d">OptimizeFunctions</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M,</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;                  <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> &amp;(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; GetTLI,</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;                  <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; GetTTI,</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;                  <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a> &amp;(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; GetBFI,</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;                  <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; LookupDomTree,</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;                  <a class="code" href="classllvm_1_1SmallPtrSetImpl.html">SmallPtrSetImpl&lt;const Comdat *&gt;</a> &amp;NotDiscardableComdats,</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;                  <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<span class="keywordtype">void</span>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)&gt; ChangedCFGCallback,</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;                  <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<span class="keywordtype">void</span>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)&gt; DeleteFnCallback) {</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160; </div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160; </div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;  std::vector&lt;Function *&gt; AllCallsCold;</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> : <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>))</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="GlobalOpt_8cpp.html#ab683b00fa6256a0ceabc698614a428e7">hasOnlyColdCalls</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, GetBFI))</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;      AllCallsCold.push_back(&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160; </div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;  <span class="comment">// Optimize functions.</span></div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> : <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>)) {</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;    <span class="comment">// Don&#39;t perform global opt pass on naked functions; we don&#39;t want fast</span></div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;    <span class="comment">// calling conventions for naked functions.</span></div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.hasFnAttribute(Attribute::Naked))</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160; </div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;    <span class="comment">// Functions without names cannot be referenced outside this module.</span></div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.hasName() &amp;&amp; !<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.isDeclaration() &amp;&amp; !<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.hasLocalLinkage())</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;      <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.setLinkage(<a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">GlobalValue::InternalLinkage</a>);</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160; </div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="GlobalOpt_8cpp.html#a5a50ba4ab5027d4013cf6bc2edf66085">deleteIfDead</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, NotDiscardableComdats, DeleteFnCallback)) {</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;    }</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160; </div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;    <span class="comment">// LLVM&#39;s definition of dominance allows instructions that are cyclic</span></div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;    <span class="comment">// in unreachable blocks, e.g.:</span></div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;    <span class="comment">// %pat = select i1 %condition, @global, i16* %pat</span></div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;    <span class="comment">// because any instruction dominates an instruction in a block that&#39;s</span></div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;    <span class="comment">// not reachable from entry.</span></div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;    <span class="comment">// So, remove unreachable blocks from the function, because a) there&#39;s</span></div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;    <span class="comment">// no point in analyzing them and b) GlobalOpt should otherwise grow</span></div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;    <span class="comment">// some more complicated logic to break these cycles.</span></div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;    <span class="comment">// Notify the analysis manager that we&#39;ve modified the function&#39;s CFG.</span></div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.isDeclaration()) {</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#aec88b7682025edff7984c3b6c8da8ac9">removeUnreachableBlocks</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)) {</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;        Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;        ChangedCFGCallback(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;      }</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;    }</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160; </div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;    Changed |= <a class="code" href="GlobalOpt_8cpp.html#a5cb8771722bfd8bcbdeb391b17e6cfd6">processGlobal</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, GetTTI, GetTLI, LookupDomTree);</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160; </div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.hasLocalLinkage())</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160; </div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;    <span class="comment">// If we have an inalloca parameter that we can safely remove the</span></div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;    <span class="comment">// inalloca attribute from, do so. This unlocks optimizations that</span></div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;    <span class="comment">// wouldn&#39;t be safe in the presence of inalloca.</span></div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;    <span class="comment">// FIXME: We should also hoist alloca affected by this to the entry</span></div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;    <span class="comment">// block if possible.</span></div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getAttributes().hasAttrSomewhere(Attribute::InAlloca) &amp;&amp;</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;        !<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.hasAddressTaken() &amp;&amp; !<a class="code" href="GlobalOpt_8cpp.html#a7e0090207d4b1da753ad2d3bbb51fc4d">hasMustTailCallers</a>(&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) &amp;&amp; !<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.isVarArg()) {</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;      <a class="code" href="GlobalOpt_8cpp.html#a4e385793d373a822cffdeaa9ee8f3e19">RemoveAttribute</a>(&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, Attribute::InAlloca);</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;    }</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160; </div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;    <span class="comment">// FIXME: handle invokes</span></div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;    <span class="comment">// FIXME: handle musttail</span></div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getAttributes().hasAttrSomewhere(Attribute::Preallocated)) {</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.hasAddressTaken() &amp;&amp; !<a class="code" href="GlobalOpt_8cpp.html#a7e0090207d4b1da753ad2d3bbb51fc4d">hasMustTailCallers</a>(&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) &amp;&amp;</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;          !<a class="code" href="GlobalOpt_8cpp.html#aacd456f21a2be87fdf19ab7e266b3a40">hasInvokeCallers</a>(&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)) {</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;        <a class="code" href="GlobalOpt_8cpp.html#a5b064b03163c5f9304d4b702da5fa1e4">RemovePreallocated</a>(&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;        Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;      }</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;    }</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160; </div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="GlobalOpt_8cpp.html#a9bcf977be0fa7a45111320b946f72f3d">hasChangeableCC</a>(&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) &amp;&amp; !<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.isVarArg() &amp;&amp; !<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.hasAddressTaken()) {</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;      NumInternalFunc++;</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;      <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a> = GetTTI(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;      <span class="comment">// Change the calling convention to coldcc if either stress testing is</span></div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;      <span class="comment">// enabled or the target would like to use coldcc on functions which are</span></div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;      <span class="comment">// cold at all call sites and the callers contain no other non coldcc</span></div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;      <span class="comment">// calls.</span></div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="GlobalOpt_8cpp.html#ada2105b58ae1e63c91c4a1185fc2880b">EnableColdCCStressTest</a> ||</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;          (<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#ad30e432e7796aa46c87440cb54de2243">useColdCCForColdCall</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) &amp;&amp;</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;           <a class="code" href="GlobalOpt_8cpp.html#ab9256893dbe8440acbad9879ae65180d">isValidCandidateForColdCC</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, GetBFI, AllCallsCold))) {</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;        <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.setCallingConv(<a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feeda94ec9273479164e4aec1d5d91b71dc85">CallingConv::Cold</a>);</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;        <a class="code" href="GlobalOpt_8cpp.html#a9ed5060153ed9e3ca21cb567997d527c">changeCallSitesToColdCC</a>(&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;        Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;        NumColdCC++;</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;      }</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;    }</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160; </div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="GlobalOpt_8cpp.html#a9bcf977be0fa7a45111320b946f72f3d">hasChangeableCC</a>(&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) &amp;&amp; !<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.isVarArg() &amp;&amp; !<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.hasAddressTaken()) {</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;      <span class="comment">// If this function has a calling convention worth changing, is not a</span></div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;      <span class="comment">// varargs function, and is only called directly, promote it to use the</span></div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;      <span class="comment">// Fast calling convention.</span></div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;      <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.setCallingConv(<a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feedabc8e2ee40a84687a9e12fd08784b87ba">CallingConv::Fast</a>);</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;      <a class="code" href="GlobalOpt_8cpp.html#a7b97d3981d965c0884878bca5be437ff">ChangeCalleesToFastCall</a>(&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;      ++NumFastCallFns;</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;    }</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160; </div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getAttributes().hasAttrSomewhere(Attribute::Nest) &amp;&amp;</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;        !<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.hasAddressTaken()) {</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;      <span class="comment">// The function is not used by a trampoline intrinsic, so it is safe</span></div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;      <span class="comment">// to remove the &#39;nest&#39; attribute.</span></div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;      <a class="code" href="GlobalOpt_8cpp.html#a4e385793d373a822cffdeaa9ee8f3e19">RemoveAttribute</a>(&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, Attribute::Nest);</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;      ++NumNestRemoved;</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;    }</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;  }</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;}</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160; </div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span></div>
<div class="line"><a name="l02069"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#a8d20a7c0aa0ef76c738e2ca9e21d35d5"> 2069</a></span>&#160;<a class="code" href="GlobalOpt_8cpp.html#a8d20a7c0aa0ef76c738e2ca9e21d35d5">OptimizeGlobalVars</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M,</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;                   <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; GetTTI,</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;                   <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> &amp;(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; GetTLI,</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;                   <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; LookupDomTree,</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;                   <a class="code" href="classllvm_1_1SmallPtrSetImpl.html">SmallPtrSetImpl&lt;const Comdat *&gt;</a> &amp;NotDiscardableComdats) {</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160; </div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> &amp;GV : <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.globals())) {</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;    <span class="comment">// Global variables without names cannot be referenced outside this module.</span></div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;    <span class="keywordflow">if</span> (!GV.<a class="code" href="classllvm_1_1Value.html#ad9d88ae321b98d8a3b7f394977ae6d7f">hasName</a>() &amp;&amp; !GV.<a class="code" href="classllvm_1_1GlobalValue.html#a32e606ac4c88f71f14212e42b808e7f4">isDeclaration</a>() &amp;&amp; !GV.<a class="code" href="classllvm_1_1GlobalValue.html#a3ba1af4b9d9faa4a33729bbbecee83d1">hasLocalLinkage</a>())</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;      GV.<a class="code" href="classllvm_1_1GlobalValue.html#a687973de03d041e04b50a76d19d4fd36">setLinkage</a>(<a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">GlobalValue::InternalLinkage</a>);</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;    <span class="comment">// Simplify the initializer.</span></div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;    <span class="keywordflow">if</span> (GV.hasInitializer())</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;Constant&gt;(GV.getInitializer())) {</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;        <span class="keyword">auto</span> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getDataLayout();</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;        <span class="comment">// TLI is not used in the case of a Constant, so use default nullptr</span></div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;        <span class="comment">// for that optional parameter, since we don&#39;t have a Function to</span></div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;        <span class="comment">// provide GetTLI anyway.</span></div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *New = <a class="code" href="namespacellvm.html#a5e655fd99a56d50b071fc26d8db5fd5b">ConstantFoldConstant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <span class="comment">/*TLI*/</span> <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;        <span class="keywordflow">if</span> (New != <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;          GV.setInitializer(New);</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;      }</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160; </div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="GlobalOpt_8cpp.html#a5a50ba4ab5027d4013cf6bc2edf66085">deleteIfDead</a>(GV, NotDiscardableComdats)) {</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;    }</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160; </div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;    Changed |= <a class="code" href="GlobalOpt_8cpp.html#a5cb8771722bfd8bcbdeb391b17e6cfd6">processGlobal</a>(GV, GetTTI, GetTLI, LookupDomTree);</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;  }</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;}</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;<span class="comment">/// Evaluate static constructors in the function, if we can.  Return true if we</span></div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;<span class="comment">/// can, false otherwise.</span></div>
<div class="line"><a name="l02104"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#abf4eceb96c86c97477d4bcf8eec661e5"> 2104</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="GlobalOpt_8cpp.html#abf4eceb96c86c97477d4bcf8eec661e5">EvaluateStaticConstructor</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;                                      <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLI) {</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;  <span class="comment">// Skip external functions.</span></div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;isDeclaration())</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;  <span class="comment">// Call the function.</span></div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;  <a class="code" href="classllvm_1_1Evaluator.html">Evaluator</a> Eval(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, TLI);</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *RetValDummy;</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;  <span class="keywordtype">bool</span> EvalSuccess = Eval.<a class="code" href="classllvm_1_1Evaluator.html#aac9fd94c18d93885c8d947121ab9721e">EvaluateFunction</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, RetValDummy,</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;                                           <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Constant*, 0&gt;</a>());</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160; </div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;  <span class="keywordflow">if</span> (EvalSuccess) {</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;    ++NumCtorsEvaluated;</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160; </div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;    <span class="comment">// We succeeded at evaluation: commit the result.</span></div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;    <span class="keyword">auto</span> NewInitializers = Eval.<a class="code" href="classllvm_1_1Evaluator.html#a651b668d10e5d38787a29ced3fb897b9">getMutatedInitializers</a>();</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;FULLY EVALUATED GLOBAL CTOR FUNCTION &#39;&quot;</span></div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;                      &lt;&lt; <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getName() &lt;&lt; <span class="stringliteral">&quot;&#39; to &quot;</span> &lt;&lt; NewInitializers.size()</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; stores.\n&quot;</span>);</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;Pair : NewInitializers)</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;      Pair.first-&gt;setInitializer(Pair.second);</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV : Eval.<a class="code" href="classllvm_1_1Evaluator.html#ab5b62d945bed080da71862ecf11e114e">getInvariants</a>())</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;      GV-&gt;setConstant(<span class="keyword">true</span>);</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;  }</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160; </div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;  <span class="keywordflow">return</span> EvalSuccess;</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;}</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160; </div>
<div class="line"><a name="l02132"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#ad9ef9dbac3fbf9cc30e63d86bf9d7e34"> 2132</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="GlobalOpt_8cpp.html#ad9ef9dbac3fbf9cc30e63d86bf9d7e34">compareNames</a>(<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<span class="keyword">const</span> *A, <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<span class="keyword">const</span> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) {</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *AStripped = (*A)-&gt;<a class="code" href="classllvm_1_1Value.html#a966eb231e7d4e572874d2cb49b18faea">stripPointerCasts</a>();</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *BStripped = (*B)-&gt;<a class="code" href="classllvm_1_1Value.html#a966eb231e7d4e572874d2cb49b18faea">stripPointerCasts</a>();</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;  <span class="keywordflow">return</span> AStripped-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>().<a class="code" href="classllvm_1_1StringRef.html#ae0c6424784f132b91eb387a3ee0b57c9">compare</a>(BStripped-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>());</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;}</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160; </div>
<div class="line"><a name="l02138"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#aaf604b7b4ff087fce0b71852f5ddefbe"> 2138</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="GlobalOpt_8cpp.html#aaf604b7b4ff087fce0b71852f5ddefbe">setUsedInitializer</a>(<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> &amp;V,</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;                               <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallPtrSetImpl.html">SmallPtrSetImpl&lt;GlobalValue *&gt;</a> &amp;<a class="code" href="classllvm_1_1Init.html">Init</a>) {</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Init.html">Init</a>.empty()) {</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;    V.<a class="code" href="classllvm_1_1GlobalVariable.html#ae0cf03d5de37330b1eb69dd22a1d5057">eraseFromParent</a>();</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;  }</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160; </div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;  <span class="comment">// Type of pointer to the array of pointers.</span></div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;  <a class="code" href="classllvm_1_1PointerType.html">PointerType</a> *Int8PtrTy = <a class="code" href="classllvm_1_1Type.html#a7fe9ccd4893f4e2caa826126c09545ea">Type::getInt8PtrTy</a>(V.<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>(), 0);</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160; </div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Constant *, 8&gt;</a> UsedArray;</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1GlobalValue.html">GlobalValue</a> *GV : <a class="code" href="classllvm_1_1Init.html">Init</a>) {</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Cast</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;      = <a class="code" href="classllvm_1_1ConstantExpr.html#a28bf8984fbfb08fd27df435e631e6832">ConstantExpr::getPointerBitCastOrAddrSpaceCast</a>(GV, Int8PtrTy);</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;    UsedArray.push_back(Cast);</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;  }</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;  <span class="comment">// Sort to get deterministic order.</span></div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;  <a class="code" href="namespacellvm.html#add1eb5637dd671428b6f138ed3db6428">array_pod_sort</a>(UsedArray.begin(), UsedArray.end(), <a class="code" href="GlobalOpt_8cpp.html#ad9ef9dbac3fbf9cc30e63d86bf9d7e34">compareNames</a>);</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;  <a class="code" href="classllvm_1_1ArrayType.html">ArrayType</a> *ATy = <a class="code" href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">ArrayType::get</a>(Int8PtrTy, UsedArray.size());</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160; </div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;  <a class="code" href="classllvm_1_1Module.html">Module</a> *<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = V.<a class="code" href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>();</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;  V.<a class="code" href="classllvm_1_1GlobalVariable.html#a22e076c4cf000eba885dd00048641c6f">removeFromParent</a>();</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;  <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *<a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">NV</a> =</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;      <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>(*<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, ATy, <span class="keyword">false</span>, <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca96ad6314ba9210b223b93dc3e15baf99">GlobalValue::AppendingLinkage</a>,</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;                         <a class="code" href="classllvm_1_1ConstantArray.html#a0900dacdc7ad8e3ea0cc92993c7fd422">ConstantArray::get</a>(ATy, UsedArray), <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;  <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">NV</a>-&gt;takeName(&amp;V);</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;  <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">NV</a>-&gt;setSection(<span class="stringliteral">&quot;llvm.metadata&quot;</span>);</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;  <span class="keyword">delete</span> &amp;V;</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;}</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160; </div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;<span class="comment">/// An easy to access representation of llvm.used and llvm.compiler.used.</span></div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;<span class="comment"></span><span class="keyword">class </span>LLVMUsed {</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;GlobalValue *, 4&gt;</a> <a class="code" href="namespacellvm_1_1ZeroCallUsedRegs.html#af03f9c4ce466646943e50f317397cec0a019d1ca7d50cc54b995f60d456435e87">Used</a>;</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;GlobalValue *, 4&gt;</a> CompilerUsed;</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;  <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *UsedV;</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;  <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *CompilerUsedV;</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160; </div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;  LLVMUsed(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M) {</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;GlobalValue *, 4&gt;</a> Vec;</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;    UsedV = <a class="code" href="namespacellvm.html#afd1cdae0d7a12aa1861ac142c059f5d2">collectUsedGlobalVariables</a>(M, Vec, <span class="keyword">false</span>);</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;    <a class="code" href="namespacellvm_1_1ZeroCallUsedRegs.html#af03f9c4ce466646943e50f317397cec0a019d1ca7d50cc54b995f60d456435e87">Used</a> = {Vec.begin(), Vec.end()};</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;    Vec.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;    CompilerUsedV = <a class="code" href="namespacellvm.html#afd1cdae0d7a12aa1861ac142c059f5d2">collectUsedGlobalVariables</a>(M, Vec, <span class="keyword">true</span>);</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;    CompilerUsed = {Vec.begin(), Vec.end()};</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;  }</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160; </div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;  <span class="keyword">using</span> iterator = <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;GlobalValue *, 4&gt;::iterator</a>;</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;  <span class="keyword">using</span> used_iterator_range = <a class="code" href="classllvm_1_1iterator__range.html">iterator_range&lt;iterator&gt;</a>;</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160; </div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;  iterator usedBegin() { <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ZeroCallUsedRegs.html#af03f9c4ce466646943e50f317397cec0a019d1ca7d50cc54b995f60d456435e87">Used</a>.begin(); }</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;  iterator usedEnd() { <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ZeroCallUsedRegs.html#af03f9c4ce466646943e50f317397cec0a019d1ca7d50cc54b995f60d456435e87">Used</a>.end(); }</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160; </div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;  used_iterator_range <a class="code" href="README-SSE_8txt.html#aae2d2977835e891eef9c1569d44462d7">used</a>() {</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;    <span class="keywordflow">return</span> used_iterator_range(usedBegin(), usedEnd());</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;  }</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160; </div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;  iterator compilerUsedBegin() { <span class="keywordflow">return</span> CompilerUsed.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#abf73a826b5d6f739eb4af48ddf14c5b4">begin</a>(); }</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;  iterator compilerUsedEnd() { <span class="keywordflow">return</span> CompilerUsed.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a7004354fbee1c8cd74ed9001915e1db5">end</a>(); }</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160; </div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;  used_iterator_range compilerUsed() {</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;    <span class="keywordflow">return</span> used_iterator_range(compilerUsedBegin(), compilerUsedEnd());</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;  }</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160; </div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;  <span class="keywordtype">bool</span> usedCount(<a class="code" href="classllvm_1_1GlobalValue.html">GlobalValue</a> *GV)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ZeroCallUsedRegs.html#af03f9c4ce466646943e50f317397cec0a019d1ca7d50cc54b995f60d456435e87">Used</a>.count(GV); }</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160; </div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;  <span class="keywordtype">bool</span> compilerUsedCount(<a class="code" href="classllvm_1_1GlobalValue.html">GlobalValue</a> *GV)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;    <span class="keywordflow">return</span> CompilerUsed.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(GV);</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;  }</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160; </div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;  <span class="keywordtype">bool</span> usedErase(<a class="code" href="classllvm_1_1GlobalValue.html">GlobalValue</a> *GV) { <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ZeroCallUsedRegs.html#af03f9c4ce466646943e50f317397cec0a019d1ca7d50cc54b995f60d456435e87">Used</a>.erase(GV); }</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;  <span class="keywordtype">bool</span> compilerUsedErase(<a class="code" href="classllvm_1_1GlobalValue.html">GlobalValue</a> *GV) { <span class="keywordflow">return</span> CompilerUsed.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a11045c7973ab24a8d6315b61fa337d4e">erase</a>(GV); }</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;  <span class="keywordtype">bool</span> usedInsert(<a class="code" href="classllvm_1_1GlobalValue.html">GlobalValue</a> *GV) { <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ZeroCallUsedRegs.html#af03f9c4ce466646943e50f317397cec0a019d1ca7d50cc54b995f60d456435e87">Used</a>.insert(GV).second; }</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160; </div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;  <span class="keywordtype">bool</span> compilerUsedInsert(<a class="code" href="classllvm_1_1GlobalValue.html">GlobalValue</a> *GV) {</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;    <span class="keywordflow">return</span> CompilerUsed.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(GV).second;</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;  }</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160; </div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;  <span class="keywordtype">void</span> syncVariablesAndSets() {</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;    <span class="keywordflow">if</span> (UsedV)</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;      <a class="code" href="GlobalOpt_8cpp.html#aaf604b7b4ff087fce0b71852f5ddefbe">setUsedInitializer</a>(*UsedV, Used);</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;    <span class="keywordflow">if</span> (CompilerUsedV)</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;      <a class="code" href="GlobalOpt_8cpp.html#aaf604b7b4ff087fce0b71852f5ddefbe">setUsedInitializer</a>(*CompilerUsedV, CompilerUsed);</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;  }</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;};</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160; </div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;} <span class="comment">// end anonymous namespace</span></div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160; </div>
<div class="line"><a name="l02228"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#afa93649aba5a7b6388adff903a4a6085"> 2228</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="GlobalOpt_8cpp.html#afa93649aba5a7b6388adff903a4a6085">hasUseOtherThanLLVMUsed</a>(<a class="code" href="classllvm_1_1GlobalAlias.html">GlobalAlias</a> &amp;GA, <span class="keyword">const</span> LLVMUsed &amp;U) {</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;  <span class="keywordflow">if</span> (GA.<a class="code" href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">use_empty</a>()) <span class="comment">// No use at all.</span></div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160; </div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!U.usedCount(&amp;GA) || !U.compilerUsedCount(&amp;GA)) &amp;&amp;</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;         <span class="stringliteral">&quot;We should have removed the duplicated &quot;</span></div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;         <span class="stringliteral">&quot;element from llvm.compiler.used&quot;</span>);</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;  <span class="keywordflow">if</span> (!GA.<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;    <span class="comment">// Strictly more than one use. So at least one is not in llvm.used and</span></div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;    <span class="comment">// llvm.compiler.used.</span></div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160; </div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;  <span class="comment">// Exactly one use. Check if it is in llvm.used or llvm.compiler.used.</span></div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;  <span class="keywordflow">return</span> !U.usedCount(&amp;GA) &amp;&amp; !U.compilerUsedCount(&amp;GA);</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;}</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160; </div>
<div class="line"><a name="l02244"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#a31232d0640fc51e777d8e48e48f45c89"> 2244</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="GlobalOpt_8cpp.html#a31232d0640fc51e777d8e48e48f45c89">hasMoreThanOneUseOtherThanLLVMUsed</a>(<a class="code" href="classllvm_1_1GlobalValue.html">GlobalValue</a> &amp;V,</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;                                               <span class="keyword">const</span> LLVMUsed &amp;U) {</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> = 2;</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!U.usedCount(&amp;V) || !U.compilerUsedCount(&amp;V)) &amp;&amp;</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;         <span class="stringliteral">&quot;We should have removed the duplicated &quot;</span></div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;         <span class="stringliteral">&quot;element from llvm.compiler.used&quot;</span>);</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;  <span class="keywordflow">if</span> (U.usedCount(&amp;V) || U.compilerUsedCount(&amp;V))</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;    ++<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>;</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;  <span class="keywordflow">return</span> V.<a class="code" href="classllvm_1_1Value.html#a72fb137716cff838d389e392b9729dc9">hasNUsesOrMore</a>(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;}</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160; </div>
<div class="line"><a name="l02255"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#a6ef58549c87cd57b83dcd7ce2d92cc03"> 2255</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="GlobalOpt_8cpp.html#a6ef58549c87cd57b83dcd7ce2d92cc03">mayHaveOtherReferences</a>(<a class="code" href="classllvm_1_1GlobalAlias.html">GlobalAlias</a> &amp;GA, <span class="keyword">const</span> LLVMUsed &amp;U) {</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;  <span class="keywordflow">if</span> (!GA.<a class="code" href="classllvm_1_1GlobalValue.html#a3ba1af4b9d9faa4a33729bbbecee83d1">hasLocalLinkage</a>())</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160; </div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;  <span class="keywordflow">return</span> U.usedCount(&amp;GA) || U.compilerUsedCount(&amp;GA);</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;}</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160; </div>
<div class="line"><a name="l02262"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#ae17d0aeb924fa0611500eb8cb09a70d9"> 2262</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="GlobalOpt_8cpp.html#ae17d0aeb924fa0611500eb8cb09a70d9">hasUsesToReplace</a>(<a class="code" href="classllvm_1_1GlobalAlias.html">GlobalAlias</a> &amp;GA, <span class="keyword">const</span> LLVMUsed &amp;U,</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;                             <span class="keywordtype">bool</span> &amp;RenameTarget) {</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;  RenameTarget = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="GlobalOpt_8cpp.html#afa93649aba5a7b6388adff903a4a6085">hasUseOtherThanLLVMUsed</a>(GA, U))</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;    <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160; </div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;  <span class="comment">// If the alias is externally visible, we may still be able to simplify it.</span></div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="GlobalOpt_8cpp.html#a6ef58549c87cd57b83dcd7ce2d92cc03">mayHaveOtherReferences</a>(GA, U))</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>;</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160; </div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;  <span class="comment">// If the aliasee has internal linkage, give it the name and linkage</span></div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;  <span class="comment">// of the alias, and delete the alias.  This turns:</span></div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;  <span class="comment">//   define internal ... @f(...)</span></div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;  <span class="comment">//   @a = alias ... @f</span></div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;  <span class="comment">// into:</span></div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;  <span class="comment">//   define ... @a(...)</span></div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Aliasee = GA.<a class="code" href="classllvm_1_1GlobalAlias.html#a849b2e4fd902c501303d7fee67b076a9">getAliasee</a>();</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;  <a class="code" href="classllvm_1_1GlobalValue.html">GlobalValue</a> *<a class="code" href="classllvm_1_1Target.html">Target</a> = cast&lt;GlobalValue&gt;(Aliasee-&gt;<a class="code" href="classllvm_1_1Constant.html#a0ebfdc2c511407c9ba517ccde6cad85f">stripPointerCasts</a>());</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1Target.html">Target</a>-&gt;hasLocalLinkage())</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>;</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160; </div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;  <span class="comment">// Do not perform the transform if multiple aliases potentially target the</span></div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;  <span class="comment">// aliasee. This check also ensures that it is safe to replace the section</span></div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;  <span class="comment">// and other attributes of the aliasee with those of the alias.</span></div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="GlobalOpt_8cpp.html#a31232d0640fc51e777d8e48e48f45c89">hasMoreThanOneUseOtherThanLLVMUsed</a>(*<a class="code" href="classllvm_1_1Target.html">Target</a>, U))</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>;</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160; </div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;  RenameTarget = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;}</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160; </div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span></div>
<div class="line"><a name="l02295"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#a6c0ba55113b40b07b869ba9c06db6ca1"> 2295</a></span>&#160;<a class="code" href="GlobalOpt_8cpp.html#a6c0ba55113b40b07b869ba9c06db6ca1">OptimizeGlobalAliases</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M,</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;                      <a class="code" href="classllvm_1_1SmallPtrSetImpl.html">SmallPtrSetImpl&lt;const Comdat *&gt;</a> &amp;NotDiscardableComdats) {</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;  LLVMUsed Used(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>);</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160; </div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1GlobalValue.html">GlobalValue</a> *GV : Used.used())</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;    Used.compilerUsedErase(GV);</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160; </div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;  <span class="comment">// Return whether GV is explicitly or implicitly dso_local and not replaceable</span></div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;  <span class="comment">// by another definition in the current linkage unit.</span></div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;  <span class="keyword">auto</span> IsModuleLocal = [](<a class="code" href="classllvm_1_1GlobalValue.html">GlobalValue</a> &amp;GV) {</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="classllvm_1_1GlobalValue.html#aabf6932ed41fc64e17c0030c44eda44e">GlobalValue::isInterposableLinkage</a>(GV.<a class="code" href="classllvm_1_1GlobalValue.html#a3547d58a060ee2e4a29cbea85bef91af">getLinkage</a>()) &amp;&amp;</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;           (GV.<a class="code" href="classllvm_1_1GlobalValue.html#a19db81b6f3d3ab342972dce7756fb077">isDSOLocal</a>() || GV.<a class="code" href="classllvm_1_1GlobalValue.html#a2df2f2e94b5493e9434dbf1c483dbc72">isImplicitDSOLocal</a>());</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;  };</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160; </div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1GlobalAlias.html">GlobalAlias</a> &amp;J : <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.aliases())) {</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;    <span class="comment">// Aliases without names cannot be referenced outside this module.</span></div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;    <span class="keywordflow">if</span> (!J.hasName() &amp;&amp; !J.isDeclaration() &amp;&amp; !J.hasLocalLinkage())</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;      J.setLinkage(<a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">GlobalValue::InternalLinkage</a>);</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160; </div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="GlobalOpt_8cpp.html#a5a50ba4ab5027d4013cf6bc2edf66085">deleteIfDead</a>(J, NotDiscardableComdats)) {</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;    }</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160; </div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;    <span class="comment">// If the alias can change at link time, nothing can be done - bail out.</span></div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;    <span class="keywordflow">if</span> (!IsModuleLocal(J))</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160; </div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Aliasee = J.getAliasee();</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;    <a class="code" href="classllvm_1_1GlobalValue.html">GlobalValue</a> *<a class="code" href="classllvm_1_1Target.html">Target</a> = dyn_cast&lt;GlobalValue&gt;(Aliasee-&gt;<a class="code" href="classllvm_1_1Constant.html#a0ebfdc2c511407c9ba517ccde6cad85f">stripPointerCasts</a>());</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;    <span class="comment">// We can&#39;t trivially replace the alias with the aliasee if the aliasee is</span></div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;    <span class="comment">// non-trivial in some way. We also can&#39;t replace the alias with the aliasee</span></div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;    <span class="comment">// if the aliasee may be preemptible at runtime. On ELF, a non-preemptible</span></div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;    <span class="comment">// alias can be used to access the definition as if preemption did not</span></div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;    <span class="comment">// happen.</span></div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;    <span class="comment">// TODO: Try to handle non-zero GEPs of local aliasees.</span></div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1Target.html">Target</a> || !IsModuleLocal(*<a class="code" href="classllvm_1_1Target.html">Target</a>))</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160; </div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;    <a class="code" href="classllvm_1_1Target.html">Target</a>-&gt;removeDeadConstantUsers();</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160; </div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;    <span class="comment">// Make all users of the alias use the aliasee instead.</span></div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;    <span class="keywordtype">bool</span> RenameTarget;</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="GlobalOpt_8cpp.html#ae17d0aeb924fa0611500eb8cb09a70d9">hasUsesToReplace</a>(J, Used, RenameTarget))</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160; </div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;    J.replaceAllUsesWith(<a class="code" href="classllvm_1_1ConstantExpr.html#ae79d05dd3d0b05e080e08f8c5c33f880">ConstantExpr::getBitCast</a>(Aliasee, J.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()));</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;    ++NumAliasesResolved;</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;    Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160; </div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;    <span class="keywordflow">if</span> (RenameTarget) {</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;      <span class="comment">// Give the aliasee the name, linkage and other attributes of the alias.</span></div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;      <a class="code" href="classllvm_1_1Target.html">Target</a>-&gt;takeName(&amp;J);</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;      <a class="code" href="classllvm_1_1Target.html">Target</a>-&gt;setLinkage(J.getLinkage());</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;      <a class="code" href="classllvm_1_1Target.html">Target</a>-&gt;setDSOLocal(J.isDSOLocal());</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;      <a class="code" href="classllvm_1_1Target.html">Target</a>-&gt;setVisibility(J.getVisibility());</div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;      <a class="code" href="classllvm_1_1Target.html">Target</a>-&gt;setDLLStorageClass(J.getDLLStorageClass());</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160; </div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;      <span class="keywordflow">if</span> (Used.usedErase(&amp;J))</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;        Used.usedInsert(<a class="code" href="classllvm_1_1Target.html">Target</a>);</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160; </div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;      <span class="keywordflow">if</span> (Used.compilerUsedErase(&amp;J))</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;        Used.compilerUsedInsert(<a class="code" href="classllvm_1_1Target.html">Target</a>);</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="GlobalOpt_8cpp.html#a6ef58549c87cd57b83dcd7ce2d92cc03">mayHaveOtherReferences</a>(J, Used))</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160; </div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;    <span class="comment">// Delete the alias.</span></div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;    <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.eraseAlias(&amp;J);</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;    ++NumAliasesRemoved;</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;    Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;  }</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160; </div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;  Used.syncVariablesAndSets();</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160; </div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;}</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160; </div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Function.html">Function</a> *</div>
<div class="line"><a name="l02374"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#a84dd09fbb2a14c86a61f76b8d28d138c"> 2374</a></span>&#160;<a class="code" href="GlobalOpt_8cpp.html#a84dd09fbb2a14c86a61f76b8d28d138c">FindCXAAtExit</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> &amp;(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; GetTLI) {</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;  <span class="comment">// Hack to get a default TLI before we have actual Function.</span></div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;  <span class="keyword">auto</span> FuncIter = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.begin();</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;  <span class="keywordflow">if</span> (FuncIter == <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.end())</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;  <span class="keyword">auto</span> *TLI = &amp;GetTLI(*FuncIter);</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160; </div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;  <a class="code" href="namespacellvm.html#a26a5e408fc09c5664d2bbb2d7fae154e">LibFunc</a> <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = LibFunc_cxa_atexit;</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;  <span class="keywordflow">if</span> (!TLI-&gt;has(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>))</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160; </div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *Fn = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getFunction(TLI-&gt;getName(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>));</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;  <span class="keywordflow">if</span> (!Fn)</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160; </div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;  <span class="comment">// Now get the actual TLI for Fn.</span></div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;  TLI = &amp;GetTLI(*Fn);</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160; </div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;  <span class="comment">// Make sure that the function has the correct prototype.</span></div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;  <span class="keywordflow">if</span> (!TLI-&gt;getLibFunc(*Fn, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) || <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> != LibFunc_cxa_atexit)</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160; </div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;  <span class="keywordflow">return</span> Fn;</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;}</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;<span class="comment">/// Returns whether the given function is an empty C++ destructor and can</span></div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;<span class="comment">/// therefore be eliminated.</span></div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;<span class="comment">/// Note that we assume that other optimization passes have already simplified</span></div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;<span class="comment">/// the code so we simply check for &#39;ret&#39;.</span></div>
<div class="line"><a name="l02403"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#a7dcd20a58f4b086972bdf831bf7cf689"> 2403</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="GlobalOpt_8cpp.html#a7dcd20a58f4b086972bdf831bf7cf689">cxxDtorIsEmpty</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;Fn) {</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;  <span class="comment">// FIXME: We could eliminate C++ destructors if they&#39;re readonly/readnone and</span></div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;  <span class="comment">// nounwind, but that doesn&#39;t seem worth doing.</span></div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;  <span class="keywordflow">if</span> (Fn.<a class="code" href="classllvm_1_1GlobalValue.html#a32e606ac4c88f71f14212e42b808e7f4">isDeclaration</a>())</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160; </div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : Fn.<a class="code" href="classllvm_1_1Function.html#ae6a4da5f41fc6a36735cc1704c01ce60">getEntryBlock</a>()) {</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isDebugOrPseudoInst())</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;    <span class="keywordflow">if</span> (isa&lt;ReturnInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;  }</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;}</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160; </div>
<div class="line"><a name="l02419"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#a8bffd3c2fa90c685fc2c0e9f0787c807"> 2419</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="GlobalOpt_8cpp.html#a8bffd3c2fa90c685fc2c0e9f0787c807">OptimizeEmptyGlobalCXXDtors</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> *CXAAtExitFn) {<span class="comment"></span></div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;<span class="comment">  /// Itanium C++ ABI p3.3.5:</span></div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;<span class="comment">  ///   After constructing a global (or local static) object, that will require</span></div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;<span class="comment">  ///   destruction on exit, a termination function is registered as follows:</span></div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;<span class="comment">  ///   extern &quot;C&quot; int __cxa_atexit ( void (*f)(void *), void *p, void *d );</span></div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;<span class="comment">  ///   This registration, e.g. __cxa_atexit(f,p,d), is intended to cause the</span></div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;<span class="comment">  ///   call f(p) when DSO d is unloaded, before all such termination calls</span></div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;<span class="comment">  ///   registered before this one. It returns zero if registration is</span></div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;<span class="comment">  ///   successful, nonzero on failure.</span></div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;  <span class="comment">// This pass will look for calls to __cxa_atexit where the function is trivial</span></div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;  <span class="comment">// and remove them.</span></div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160; </div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a>(CXAAtExitFn-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>())) {</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;    <span class="comment">// We&#39;re only interested in calls. Theoretically, we could handle invoke</span></div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;    <span class="comment">// instructions as well, but neither llvm-gcc nor clang generate invokes</span></div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;    <span class="comment">// to __cxa_atexit.</span></div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;    <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI = dyn_cast&lt;CallInst&gt;(U);</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;    <span class="keywordflow">if</span> (!CI)</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160; </div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *DtorFn =</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;      dyn_cast&lt;Function&gt;(CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a966eb231e7d4e572874d2cb49b18faea">stripPointerCasts</a>());</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;    <span class="keywordflow">if</span> (!DtorFn || !<a class="code" href="GlobalOpt_8cpp.html#a7dcd20a58f4b086972bdf831bf7cf689">cxxDtorIsEmpty</a>(*DtorFn))</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160; </div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;    <span class="comment">// Just remove the call.</span></div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;    CI-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(<a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(CI-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()));</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;    CI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160; </div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;    ++NumCXXDtorsRemoved;</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160; </div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;    Changed |= <span class="keyword">true</span>;</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;  }</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160; </div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;}</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160; </div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span></div>
<div class="line"><a name="l02462"></a><span class="lineno"><a class="line" href="GlobalOpt_8cpp.html#aba35cb55d089d58ace72978cb0249dc8"> 2462</a></span>&#160;<a class="code" href="GlobalOpt_8cpp.html#aba35cb55d089d58ace72978cb0249dc8">optimizeGlobalsInModule</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;                        <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> &amp;(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; GetTLI,</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;                        <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; GetTTI,</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;                        <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a> &amp;(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; GetBFI,</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;                        <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; LookupDomTree,</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;                        <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<span class="keywordtype">void</span>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)&gt; ChangedCFGCallback,</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;                        <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<span class="keywordtype">void</span>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)&gt; DeleteFnCallback) {</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const Comdat *, 8&gt;</a> NotDiscardableComdats;</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;  <span class="keywordtype">bool</span> LocalChange = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;  std::optional&lt;uint32_t&gt; FirstNotFullyEvaluatedPriority;</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160; </div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;  <span class="keywordflow">while</span> (LocalChange) {</div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;    LocalChange = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160; </div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;    NotDiscardableComdats.<a class="code" href="classllvm_1_1SmallPtrSetImplBase.html#a16413f1a88d8baca228d0a1b4cc0bfc6">clear</a>();</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> &amp;GV : <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.globals())</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Comdat.html">Comdat</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = GV.<a class="code" href="classllvm_1_1GlobalValue.html#a43721e1e88567116e8fca545125d86bf">getComdat</a>())</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;        <span class="keywordflow">if</span> (!GV.<a class="code" href="classllvm_1_1GlobalValue.html#adcb86d621c23938671ad526d3bd1f9bd">isDiscardableIfUnused</a>() || !GV.<a class="code" href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">use_empty</a>())</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;          NotDiscardableComdats.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> : <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>)</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Comdat.html">Comdat</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getComdat())</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.isDefTriviallyDead())</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;          NotDiscardableComdats.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1GlobalAlias.html">GlobalAlias</a> &amp;GA : <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.aliases())</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Comdat.html">Comdat</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = GA.getComdat())</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;        <span class="keywordflow">if</span> (!GA.isDiscardableIfUnused() || !GA.use_empty())</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;          NotDiscardableComdats.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160; </div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;    <span class="comment">// Delete functions that are trivially dead, ccc -&gt; fastcc</span></div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;    LocalChange |= <a class="code" href="GlobalOpt_8cpp.html#a42820c4a63faae2568e3db2ac69af37d">OptimizeFunctions</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, GetTLI, GetTTI, GetBFI, LookupDomTree,</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;                                     NotDiscardableComdats, ChangedCFGCallback,</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;                                     DeleteFnCallback);</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160; </div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;    <span class="comment">// Optimize global_ctors list.</span></div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;    LocalChange |=</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;        <a class="code" href="namespacellvm.html#a71b27c25d18516bdcb3f3a44ebf6185b">optimizeGlobalCtorsList</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, [&amp;](<a class="code" href="classuint32__t.html">uint32_t</a> Priority, <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;          <span class="keywordflow">if</span> (FirstNotFullyEvaluatedPriority &amp;&amp;</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;              *FirstNotFullyEvaluatedPriority != Priority)</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;          <span class="keywordtype">bool</span> Evaluated = <a class="code" href="GlobalOpt_8cpp.html#abf4eceb96c86c97477d4bcf8eec661e5">EvaluateStaticConstructor</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, &amp;GetTLI(*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>));</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;          <span class="keywordflow">if</span> (!Evaluated)</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;            FirstNotFullyEvaluatedPriority = Priority;</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;          <span class="keywordflow">return</span> Evaluated;</div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;        });</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160; </div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;    <span class="comment">// Optimize non-address-taken globals.</span></div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;    LocalChange |= <a class="code" href="GlobalOpt_8cpp.html#a8d20a7c0aa0ef76c738e2ca9e21d35d5">OptimizeGlobalVars</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, GetTTI, GetTLI, LookupDomTree,</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;                                      NotDiscardableComdats);</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160; </div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;    <span class="comment">// Resolve aliases, when possible.</span></div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;    LocalChange |= <a class="code" href="GlobalOpt_8cpp.html#a6c0ba55113b40b07b869ba9c06db6ca1">OptimizeGlobalAliases</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, NotDiscardableComdats);</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160; </div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;    <span class="comment">// Try to remove trivial global destructors if they are not removed</span></div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;    <span class="comment">// already.</span></div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *CXAAtExitFn = <a class="code" href="GlobalOpt_8cpp.html#a84dd09fbb2a14c86a61f76b8d28d138c">FindCXAAtExit</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, GetTLI);</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;    <span class="keywordflow">if</span> (CXAAtExitFn)</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;      LocalChange |= <a class="code" href="GlobalOpt_8cpp.html#a8bffd3c2fa90c685fc2c0e9f0787c807">OptimizeEmptyGlobalCXXDtors</a>(CXAAtExitFn);</div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160; </div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;    Changed |= LocalChange;</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;  }</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160; </div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;  <span class="comment">// TODO: Move all global ctors functions to the end of the module for code</span></div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;  <span class="comment">// layout.</span></div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160; </div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;}</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160; </div>
<div class="line"><a name="l02530"></a><span class="lineno"><a class="line" href="classllvm_1_1GlobalOptPass.html#a0be1afba37502be6858f2a1c38955be8"> 2530</a></span>&#160;<a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> <a class="code" href="classllvm_1_1GlobalOptPass.html#a0be1afba37502be6858f2a1c38955be8">GlobalOptPass::run</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <a class="code" href="classllvm_1_1AnalysisManager.html">ModuleAnalysisManager</a> &amp;AM) {</div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;    <span class="keyword">auto</span> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getDataLayout();</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;    <span class="keyword">auto</span> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a> =</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;        AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1InnerAnalysisManagerProxy.html">FunctionAnalysisManagerModuleProxy</a>&gt;(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>).getManager();</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;    <span class="keyword">auto</span> LookupDomTree = [&amp;<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>](<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) -&gt; <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;{</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1DominatorTreeAnalysis.html">DominatorTreeAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;    };</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;    <span class="keyword">auto</span> GetTLI = [&amp;<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>](<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) -&gt; <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> &amp; {</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1TargetLibraryAnalysis.html">TargetLibraryAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;    };</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;    <span class="keyword">auto</span> GetTTI = [&amp;<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>](<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) -&gt; <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp; {</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1TargetIRAnalysis.html">TargetIRAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;    };</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160; </div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;    <span class="keyword">auto</span> GetBFI = [&amp;<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>](<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) -&gt; <a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a> &amp; {</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1BlockFrequencyAnalysis.html">BlockFrequencyAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;    };</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;    <span class="keyword">auto</span> ChangedCFGCallback = [&amp;<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>](<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;      <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#a64b2a209a16bcd41375b5cae12690eaa">invalidate</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="classllvm_1_1PreservedAnalyses.html#a03797a73044a81cbc6a3409d6c72ee8f">PreservedAnalyses::none</a>());</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;    };</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;    <span class="keyword">auto</span> DeleteFnCallback = [&amp;<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>](<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) { <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#a4926331431f03253ee3ec8e6e3bb9d1c">clear</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName()); };</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160; </div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="GlobalOpt_8cpp.html#aba35cb55d089d58ace72978cb0249dc8">optimizeGlobalsInModule</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, GetTLI, GetTTI, GetBFI, LookupDomTree,</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;                                 ChangedCFGCallback, DeleteFnCallback))</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160; </div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;    <a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> PA = <a class="code" href="classllvm_1_1PreservedAnalyses.html#a03797a73044a81cbc6a3409d6c72ee8f">PreservedAnalyses::none</a>();</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;    <span class="comment">// We made sure to clear analyses for deleted functions.</span></div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;    PA.<a class="code" href="classllvm_1_1PreservedAnalyses.html#ad966bea18aa62ffb9e040509adc7c99f">preserve</a>&lt;<a class="code" href="classllvm_1_1InnerAnalysisManagerProxy.html">FunctionAnalysisManagerModuleProxy</a>&gt;();</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;    <span class="comment">// The only place we modify the CFG is when calling</span></div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;    <span class="comment">// removeUnreachableBlocks(), but there we make sure to invalidate analyses</span></div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;    <span class="comment">// for modified functions.</span></div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;    PA.<a class="code" href="classllvm_1_1PreservedAnalyses.html#a937c42f77e161349ce0f999e448c7027">preserveSet</a>&lt;<a class="code" href="classllvm_1_1CFGAnalyses.html">CFGAnalyses</a>&gt;();</div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;    <span class="keywordflow">return</span> PA;</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aGlobalOpt_8cpp_html_ae73941c356240efe99835aedcd1f607c"><div class="ttname"><a href="GlobalOpt_8cpp.html#ae73941c356240efe99835aedcd1f607c">allNonInstructionUsersCanBeMadeInstructions</a></div><div class="ttdeci">static bool allNonInstructionUsersCanBeMadeInstructions(Constant *C)</div><div class="ttdoc">C may have non-instruction users.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l01396">GlobalOpt.cpp:1396</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_a7c88cc0fdb561f4a44ebd45b201a07dc"><div class="ttname"><a href="GlobalOpt_8cpp.html#a7c88cc0fdb561f4a44ebd45b201a07dc">SRAGlobal</a></div><div class="ttdeci">static GlobalVariable * SRAGlobal(GlobalVariable *GV, const DataLayout &amp;DL)</div><div class="ttdoc">Perform scalar replacement of aggregates on the specified global variable.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l00458">GlobalOpt.cpp:458</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00029">README.txt:29</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html">llvm::PreservedAnalyses</a></div><div class="ttdoc">A set of analyses that are preserved following a run of a transformation pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00152">PassManager.h:152</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a5e9e1c0dd93557be1b4ad72860f3cbdaa2989d3024a84b4dda9d77419b1648554"><div class="ttname"><a href="classllvm_1_1Type.html#a5e9e1c0dd93557be1b4ad72860f3cbdaa2989d3024a84b4dda9d77419b1648554">llvm::Type::ArrayTyID</a></div><div class="ttdeci">@ ArrayTyID</div><div class="ttdoc">Arrays.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00075">Type.h:75</a></div></div>
<div class="ttc" id="anamespacellvm_html_add1eb5637dd671428b6f138ed3db6428"><div class="ttname"><a href="namespacellvm.html#add1eb5637dd671428b6f138ed3db6428">llvm::array_pod_sort</a></div><div class="ttdeci">void array_pod_sort(IteratorTy Start, IteratorTy End)</div><div class="ttdoc">array_pod_sort - This sorts an array with the specified start and end extent.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01643">STLExtras.h:1643</a></div></div>
<div class="ttc" id="anamespacellvm_html_a1106b8a15061e8494873e10bb8a364e5"><div class="ttname"><a href="namespacellvm.html#a1106b8a15061e8494873e10bb8a364e5">llvm::RecursivelyDeleteTriviallyDeadInstructions</a></div><div class="ttdeci">bool RecursivelyDeleteTriviallyDeadInstructions(Value *V, const TargetLibraryInfo *TLI=nullptr, MemorySSAUpdater *MSSAU=nullptr, std::function&lt; void(Value *)&gt; AboutToDeleteCallback=std::function&lt; void(Value *)&gt;())</div><div class="ttdoc">If the specified value is a trivially dead instruction, delete it.</div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Utils_2Local_8cpp_source.html#l00537">Local.cpp:537</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalVariable_html_ae0cf03d5de37330b1eb69dd22a1d5057"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html#ae0cf03d5de37330b1eb69dd22a1d5057">llvm::GlobalVariable::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdoc">eraseFromParent - This method unlinks 'this' from the containing module and deletes it.</div><div class="ttdef"><b>Definition:</b> <a href="Globals_8cpp_source.html#l00468">Globals.cpp:468</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a9d3ba236d13373cde794da2023acc7a0"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9d3ba236d13373cde794da2023acc7a0">Attrs</a></div><div class="ttdeci">Function Attrs</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00215">README_ALTIVEC.txt:215</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetIRAnalysis_html"><div class="ttname"><a href="classllvm_1_1TargetIRAnalysis.html">llvm::TargetIRAnalysis</a></div><div class="ttdoc">Analysis pass providing the TargetTransformInfo.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l02626">TargetTransformInfo.h:2626</a></div></div>
<div class="ttc" id="aclassllvm_1_1DIExpression_html_ab2fc167f75191e1d22e12e8e382605bb"><div class="ttname"><a href="classllvm_1_1DIExpression.html#ab2fc167f75191e1d22e12e8e382605bb">llvm::DIExpression::createFragmentExpression</a></div><div class="ttdeci">static std::optional&lt; DIExpression * &gt; createFragmentExpression(const DIExpression *Expr, unsigned OffsetInBits, unsigned SizeInBits)</div><div class="ttdoc">Create a DIExpression to describe one part of an aggregate variable that is fragmented across multipl...</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8cpp_source.html#l01798">DebugInfoMetadata.cpp:1798</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_a13c72931678c2da267fc265c7a2afdfb"><div class="ttname"><a href="GlobalOpt_8cpp.html#a13c72931678c2da267fc265c7a2afdfb">optimizeOnceStoredGlobal</a></div><div class="ttdeci">static bool optimizeOnceStoredGlobal(GlobalVariable *GV, Value *StoredOnceVal, const DataLayout &amp;DL, function_ref&lt; TargetLibraryInfo &amp;(Function &amp;)&gt; GetTLI)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l01089">GlobalOpt.cpp:1089</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a5b166ae228ebbfdb96736d6022f3feeda97109ccd68cac64fb38dbd24fc4589c6"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feeda97109ccd68cac64fb38dbd24fc4589c6">llvm::CallingConv::X86_ThisCall</a></div><div class="ttdeci">@ X86_ThisCall</div><div class="ttdoc">Similar to X86_StdCall.</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00119">CallingConv.h:119</a></div></div>
<div class="ttc" id="aIRTranslator_8cpp_html_abe44dfdea65b4f7e11e0a608ab708b76"><div class="ttname"><a href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a></div><div class="ttdeci">IRTranslator LLVM IR MI</div><div class="ttdef"><b>Definition:</b> <a href="IRTranslator_8cpp_source.html#l00109">IRTranslator.cpp:109</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a563ffc2ff61c499b3be2e00100cb72fa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a563ffc2ff61c499b3be2e00100cb72fa">llvm::SmallVectorImpl::erase</a></div><div class="ttdeci">iterator erase(const_iterator CI)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00741">SmallVector.h:741</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_a5cb8771722bfd8bcbdeb391b17e6cfd6"><div class="ttname"><a href="GlobalOpt_8cpp.html#a5cb8771722bfd8bcbdeb391b17e6cfd6">processGlobal</a></div><div class="ttdeci">static bool processGlobal(GlobalValue &amp;GV, function_ref&lt; TargetTransformInfo &amp;(Function &amp;)&gt; GetTTI, function_ref&lt; TargetLibraryInfo &amp;(Function &amp;)&gt; GetTLI, function_ref&lt; DominatorTree &amp;(Function &amp;)&gt; LookupDomTree)</div><div class="ttdoc">Analyze the specified global variable and optimize it if possible.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l01665">GlobalOpt.cpp:1665</a></div></div>
<div class="ttc" id="aclassllvm_1_1Evaluator_html_aac9fd94c18d93885c8d947121ab9721e"><div class="ttname"><a href="classllvm_1_1Evaluator.html#aac9fd94c18d93885c8d947121ab9721e">llvm::Evaluator::EvaluateFunction</a></div><div class="ttdeci">bool EvaluateFunction(Function *F, Constant *&amp;RetVal, const SmallVectorImpl&lt; Constant * &gt; &amp;ActualArgs)</div><div class="ttdoc">Evaluate a call to function F, returning true if successful, false if we can't evaluate it.</div><div class="ttdef"><b>Definition:</b> <a href="Evaluator_8cpp_source.html#l00617">Evaluator.cpp:617</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a19263fff7f5b3a9d22b48151fa0d85d0"><div class="ttname"><a href="classllvm_1_1CallBase.html#a19263fff7f5b3a9d22b48151fa0d85d0">llvm::CallBase::getOperandBundlesAsDefs</a></div><div class="ttdeci">void getOperandBundlesAsDefs(SmallVectorImpl&lt; OperandBundleDef &gt; &amp;Defs) const</div><div class="ttdoc">Return the list of operand bundles attached to this instruction as a vector of OperandBundleDefs.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l00425">Instructions.cpp:425</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_aa75984a442f2379de0c66018201fa628"><div class="ttname"><a href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">llvm::Type::getInt1Ty</a></div><div class="ttdeci">static IntegerType * getInt1Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00238">Type.cpp:238</a></div></div>
<div class="ttc" id="alib_2Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2X86_2README_8txt_source.html#l00252">README.txt:252</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">llvm::CmpInst::ICMP_EQ</a></div><div class="ttdeci">@ ICMP_EQ</div><div class="ttdoc">equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00739">InstrTypes.h:739</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7dc3069afa2ce5ea62ac2eb183e51c00"><div class="ttname"><a href="namespacellvm.html#a7dc3069afa2ce5ea62ac2eb183e51c00">llvm::none_of</a></div><div class="ttdeci">bool none_of(R &amp;&amp;Range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::none_of which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01749">STLExtras.h:1749</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_a84dd09fbb2a14c86a61f76b8d28d138c"><div class="ttname"><a href="GlobalOpt_8cpp.html#a84dd09fbb2a14c86a61f76b8d28d138c">FindCXAAtExit</a></div><div class="ttdeci">static Function * FindCXAAtExit(Module &amp;M, function_ref&lt; TargetLibraryInfo &amp;(Function &amp;)&gt; GetTLI)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l02374">GlobalOpt.cpp:2374</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a11045c7973ab24a8d6315b61fa337d4e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a11045c7973ab24a8d6315b61fa337d4e">llvm::SmallPtrSetImpl::erase</a></div><div class="ttdeci">bool erase(PtrType Ptr)</div><div class="ttdoc">erase - If the set contains the specified pointer, remove it and return true, otherwise return false.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00379">SmallPtrSet.h:379</a></div></div>
<div class="ttc" id="aclassllvm_1_1DataLayout_html"><div class="ttname"><a href="classllvm_1_1DataLayout.html">llvm::DataLayout</a></div><div class="ttdoc">A parsed version of the target data layout string in and methods for querying it.</div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00110">DataLayout.h:110</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a3a402430a1bbe70a9282dcb0e0b6a2cd"><div class="ttname"><a href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">llvm::Value::hasOneUse</a></div><div class="ttdeci">bool hasOneUse() const</div><div class="ttdoc">Return true if there is exactly one use of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00434">Value.h:434</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a7fe9ccd4893f4e2caa826126c09545ea"><div class="ttname"><a href="classllvm_1_1Type.html#a7fe9ccd4893f4e2caa826126c09545ea">llvm::Type::getInt8PtrTy</a></div><div class="ttdeci">static PointerType * getInt8PtrTy(LLVMContext &amp;C, unsigned AS=0)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00293">Type.cpp:293</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalVariable_html_a7bd3c333fa06c8fae17d52a78db3fde2"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html#a7bd3c333fa06c8fae17d52a78db3fde2">llvm::GlobalVariable::getDebugInfo</a></div><div class="ttdeci">void getDebugInfo(SmallVectorImpl&lt; DIGlobalVariableExpression * &gt; &amp;GVs) const</div><div class="ttdoc">Fill the vector with all debug info attachements.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l01642">Metadata.cpp:1642</a></div></div>
<div class="ttc" id="aclassllvm_1_1DIType_html_a8b53bdd5b8f1d8cd12a392c256cb54f3"><div class="ttname"><a href="classllvm_1_1DIType.html#a8b53bdd5b8f1d8cd12a392c256cb54f3">llvm::DIType::getSizeInBits</a></div><div class="ttdeci">uint64_t getSizeInBits() const</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8h_source.html#l00736">DebugInfoMetadata.h:736</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_a652ede21e988a4de569cdbc7863ea234"><div class="ttname"><a href="GlobalOpt_8cpp.html#a652ede21e988a4de569cdbc7863ea234">isColdCallSite</a></div><div class="ttdeci">static bool isColdCallSite(CallBase &amp;CB, BlockFrequencyInfo &amp;CallerBFI)</div><div class="ttdoc">Return true if the block containing the call site has a BlockFrequency of less than ColdCCRelFreq% of...</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l01766">GlobalOpt.cpp:1766</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a38bee869ad41aebfef3de2641b12004c"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">llvm::BasicBlock::getParent</a></div><div class="ttdeci">const Function * getParent() const</div><div class="ttdoc">Return the enclosing method, or null if none.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00112">BasicBlock.h:112</a></div></div>
<div class="ttc" id="aIntrinsicInst_8h_html"><div class="ttname"><a href="IntrinsicInst_8h.html">IntrinsicInst.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a3b996fbf8458aafffc86cb98a68d0a47"><div class="ttname"><a href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">llvm::Type::isPointerTy</a></div><div class="ttdeci">bool isPointerTy() const</div><div class="ttdoc">True if this is an instance of PointerType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00249">Type.h:249</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalVariable_html_a40ae67d31da67ca17ed016839faf3390"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html#a40ae67d31da67ca17ed016839faf3390">llvm::GlobalVariable::setConstant</a></div><div class="ttdeci">void setConstant(bool Val)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalVariable_8h_source.html#l00153">GlobalVariable.h:153</a></div></div>
<div class="ttc" id="aAtomicOrdering_8h_html"><div class="ttname"><a href="AtomicOrdering_8h.html">AtomicOrdering.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html_ab9d3d5412c20747fd0110a046604f09a"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">llvm::AnalysisManager::getResult</a></div><div class="ttdeci">PassT::Result &amp; getResult(IRUnitT &amp;IR, ExtraArgTs... ExtraArgs)</div><div class="ttdoc">Get the result of an analysis pass for a given IR unit.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00774">PassManager.h:774</a></div></div>
<div class="ttc" id="aDebugInfoMetadata_8h_html"><div class="ttname"><a href="DebugInfoMetadata_8h.html">DebugInfoMetadata.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalVariable_html_a53f47ebcc1a7ac4553ba2a2eeca596e5"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html#a53f47ebcc1a7ac4553ba2a2eeca596e5">llvm::GlobalVariable::copyAttributesFrom</a></div><div class="ttdeci">void copyAttributesFrom(const GlobalVariable *Src)</div><div class="ttdoc">copyAttributesFrom - copy all additional attributes (those not needed to create a GlobalVariable) fro...</div><div class="ttdef"><b>Definition:</b> <a href="Globals_8cpp_source.html#l00495">Globals.cpp:495</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a91bd28adea418a08cec78b72413d9d45"><div class="ttname"><a href="classllvm_1_1Instruction.html#a91bd28adea418a08cec78b72413d9d45">llvm::Instruction::getNextNonDebugInstruction</a></div><div class="ttdeci">const Instruction * getNextNonDebugInstruction(bool SkipPseudoOp=false) const</div><div class="ttdoc">Return a pointer to the next non-debug instruction in the same basic block as 'this',...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00786">Instruction.cpp:786</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a3547d58a060ee2e4a29cbea85bef91af"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a3547d58a060ee2e4a29cbea85bef91af">llvm::GlobalValue::getLinkage</a></div><div class="ttdeci">LinkageTypes getLinkage() const</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00541">GlobalValue.h:541</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html_ae0c6424784f132b91eb387a3ee0b57c9"><div class="ttname"><a href="classllvm_1_1StringRef.html#ae0c6424784f132b91eb387a3ee0b57c9">llvm::StringRef::compare</a></div><div class="ttdeci">int compare(StringRef RHS) const</div><div class="ttdoc">compare - Compare two strings; the result is negative, zero, or positive if this string is lexicograp...</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00177">StringRef.h:177</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemTransferInst_html"><div class="ttname"><a href="classllvm_1_1MemTransferInst.html">llvm::MemTransferInst</a></div><div class="ttdoc">This class wraps the llvm.memcpy/memmove intrinsics.</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l01113">IntrinsicInst.h:1113</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a2df2f2e94b5493e9434dbf1c483dbc72"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a2df2f2e94b5493e9434dbf1c483dbc72">llvm::GlobalValue::isImplicitDSOLocal</a></div><div class="ttdeci">bool isImplicitDSOLocal() const</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00294">GlobalValue.h:294</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00059">Function.h:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html_a64b2a209a16bcd41375b5cae12690eaa"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html#a64b2a209a16bcd41375b5cae12690eaa">llvm::AnalysisManager::invalidate</a></div><div class="ttdeci">void invalidate(IRUnitT &amp;IR, const PreservedAnalyses &amp;PA)</div><div class="ttdoc">Invalidate cached analyses for an IR unit.</div><div class="ttdef"><b>Definition:</b> <a href="PassManagerImpl_8h_source.html#l00089">PassManagerImpl.h:89</a></div></div>
<div class="ttc" id="aREADME-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00411">README-SSE.txt:411</a></div></div>
<div class="ttc" id="aPass_8h_html"><div class="ttname"><a href="Pass_8h.html">Pass.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html_a4f500ae0de71695b652af4c0958d8ea8"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a4f500ae0de71695b652af4c0958d8ea8">llvm::BinaryOperator::CreateNot</a></div><div class="ttdeci">static BinaryOperator * CreateNot(Value *Op, const Twine &amp;Name=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l03006">Instructions.cpp:3006</a></div></div>
<div class="ttc" id="aclassllvm_1_1BitCastInst_html"><div class="ttname"><a href="classllvm_1_1BitCastInst.html">llvm::BitCastInst</a></div><div class="ttdoc">This class represents a no-op cast from one type to another.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l05258">Instructions.h:5258</a></div></div>
<div class="ttc" id="aclassllvm_1_1Target_html"><div class="ttname"><a href="classllvm_1_1Target.html">llvm::Target</a></div><div class="ttdoc">Target - Wrapper for Target specific information.</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegistry_8h_source.html#l00149">TargetRegistry.h:149</a></div></div>
<div class="ttc" id="aclassllvm_1_1ilist__node__with__parent_html_a26708685cc8b94fe3d7092ee080dbb34"><div class="ttname"><a href="classllvm_1_1ilist__node__with__parent.html#a26708685cc8b94fe3d7092ee080dbb34">llvm::ilist_node_with_parent::getNextNode</a></div><div class="ttdeci">NodeTy * getNextNode()</div><div class="ttdoc">Get the next node, or nullptr for the list tail.</div><div class="ttdef"><b>Definition:</b> <a href="ilist__node_8h_source.html#l00289">ilist_node.h:289</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01199">SmallVector.h:1199</a></div></div>
<div class="ttc" id="aStatistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a5b166ae228ebbfdb96736d6022f3feedabc8e2ee40a84687a9e12fd08784b87ba"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feedabc8e2ee40a84687a9e12fd08784b87ba">llvm::CallingConv::Fast</a></div><div class="ttdeci">@ Fast</div><div class="ttdoc">Attempts to make calls as fast as possible (e.g.</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00041">CallingConv.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalObject_html_a115ac0121663aa8365e095d095d0c633"><div class="ttname"><a href="classllvm_1_1GlobalObject.html#a115ac0121663aa8365e095d095d0c633">llvm::GlobalObject::getAlign</a></div><div class="ttdeci">MaybeAlign getAlign() const</div><div class="ttdoc">Returns the alignment of the given variable or function.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalObject_8h_source.html#l00079">GlobalObject.h:79</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalVariable_html_a0f6dab3350ff78735031a6a62f344f18"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html#a0f6dab3350ff78735031a6a62f344f18">llvm::GlobalVariable::isExternallyInitialized</a></div><div class="ttdeci">bool isExternallyInitialized() const</div><div class="ttdef"><b>Definition:</b> <a href="GlobalVariable_8h_source.html#l00155">GlobalVariable.h:155</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ad9d88ae321b98d8a3b7f394977ae6d7f"><div class="ttname"><a href="classllvm_1_1Value.html#ad9d88ae321b98d8a3b7f394977ae6d7f">llvm::Value::hasName</a></div><div class="ttdeci">bool hasName() const</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00261">Value.h:261</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_ab7fe47fe1b533f4c9bdd23baf28f3c8c"><div class="ttname"><a href="GlobalOpt_8cpp.html#ab7fe47fe1b533f4c9bdd23baf28f3c8c">OptimizeAwayTrappingUsesOfLoads</a></div><div class="ttdeci">static bool OptimizeAwayTrappingUsesOfLoads(GlobalVariable *GV, Constant *LV, const DataLayout &amp;DL, function_ref&lt; TargetLibraryInfo &amp;(Function &amp;)&gt; GetTLI)</div><div class="ttdoc">The specified global has only one non-null value stored into it.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l00774">GlobalOpt.cpp:774</a></div></div>
<div class="ttc" id="aSupport_2ErrorHandling_8h_html"><div class="ttname"><a href="Support_2ErrorHandling_8h.html">ErrorHandling.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html">llvm::TargetTransformInfo</a></div><div class="ttdoc">This pass provides access to the codegen interfaces that are needed for IR-level transformations.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00196">TargetTransformInfo.h:196</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_abae3f750ce4d2edcea30f08fe9e29721"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#abae3f750ce4d2edcea30f08fe9e29721">llvm::ConstantExpr::getGetElementPtr</a></div><div class="ttdeci">static Constant * getGetElementPtr(Type *Ty, Constant *C, ArrayRef&lt; Constant * &gt; IdxList, bool InBounds=false, std::optional&lt; unsigned &gt; InRangeIndex=std::nullopt, Type *OnlyIfReducedTy=nullptr)</div><div class="ttdoc">Getelementptr form.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l01245">Constants.h:1245</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a5ab2d0b0f0b8ceec3b907184e7567197"><div class="ttname"><a href="classllvm_1_1Type.html#a5ab2d0b0f0b8ceec3b907184e7567197">llvm::Type::getPointerAddressSpace</a></div><div class="ttdeci">unsigned getPointerAddressSpace() const</div><div class="ttdoc">Get the address space of this pointer or pointer vector type.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00729">DerivedTypes.h:729</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_ae6a4da5f41fc6a36735cc1704c01ce60"><div class="ttname"><a href="classllvm_1_1Function.html#ae6a4da5f41fc6a36735cc1704c01ce60">llvm::Function::getEntryBlock</a></div><div class="ttdeci">const BasicBlock &amp; getEntryBlock() const</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00735">Function.h:735</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilder_html"><div class="ttname"><a href="classllvm_1_1IRBuilder.html">llvm::IRBuilder&lt;&gt;</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_a9bcf977be0fa7a45111320b946f72f3d"><div class="ttname"><a href="GlobalOpt_8cpp.html#a9bcf977be0fa7a45111320b946f72f3d">hasChangeableCC</a></div><div class="ttdeci">static bool hasChangeableCC(Function *F)</div><div class="ttdoc">Return true if this is a calling convention that we'd like to change.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l01735">GlobalOpt.cpp:1735</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalVariable_html"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html">llvm::GlobalVariable</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalVariable_8h_source.html#l00039">GlobalVariable.h:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1PointerType_html_af8aeced5e71d2589fa3e9791043af5cb"><div class="ttname"><a href="classllvm_1_1PointerType.html#af8aeced5e71d2589fa3e9791043af5cb">llvm::PointerType::getAddressSpace</a></div><div class="ttdeci">unsigned getAddressSpace() const</div><div class="ttdoc">Return the address space of the Pointer type.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00682">DerivedTypes.h:682</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">llvm::CmpInst::ICMP_NE</a></div><div class="ttdeci">@ ICMP_NE</div><div class="ttdoc">not equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00740">InstrTypes.h:740</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_ae79d05dd3d0b05e080e08f8c5c33f880"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#ae79d05dd3d0b05e080e08f8c5c33f880">llvm::ConstantExpr::getBitCast</a></div><div class="ttdeci">static Constant * getBitCast(Constant *C, Type *Ty, bool OnlyIfReduced=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02229">Constants.cpp:2229</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalAlias_html"><div class="ttname"><a href="classllvm_1_1GlobalAlias.html">llvm::GlobalAlias</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalAlias_8h_source.html#l00028">GlobalAlias.h:28</a></div></div>
<div class="ttc" id="aValueTracking_8h_html"><div class="ttname"><a href="ValueTracking_8h.html">ValueTracking.h</a></div></div>
<div class="ttc" id="aTransforms_2Utils_2Local_8h_html"><div class="ttname"><a href="Transforms_2Utils_2Local_8h.html">Local.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_ac7b0ed5c6d30bad74769c6e87ab0edb8"><div class="ttname"><a href="classllvm_1_1Type.html#ac7b0ed5c6d30bad74769c6e87ab0edb8">llvm::Type::getTypeID</a></div><div class="ttdeci">TypeID getTypeID() const</div><div class="ttdoc">Return the type id for the type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00137">Type.h:137</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_a9ed5060153ed9e3ca21cb567997d527c"><div class="ttname"><a href="GlobalOpt_8cpp.html#a9ed5060153ed9e3ca21cb567997d527c">changeCallSitesToColdCC</a></div><div class="ttdeci">static void changeCallSitesToColdCC(Function *F)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l01802">GlobalOpt.cpp:1802</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTree_html"><div class="ttname"><a href="classllvm_1_1DominatorTree.html">llvm::DominatorTree</a></div><div class="ttdoc">Concrete subclass of DominatorTreeBase that is used to compute a normal dominator tree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00166">Dominators.h:166</a></div></div>
<div class="ttc" id="aPassBuilderBindings_8cpp_html_a83c7e5ca51099e4efa895791a02fb0ed"><div class="ttname"><a href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a></div><div class="ttdeci">FunctionAnalysisManager FAM</div><div class="ttdef"><b>Definition:</b> <a href="PassBuilderBindings_8cpp_source.html#l00059">PassBuilderBindings.cpp:59</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdeci">@ Hidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00138">CommandLine.h:138</a></div></div>
<div class="ttc" id="anamespacellvm_html_a48b30f2688526d0f45900a47cd6b6654"><div class="ttname"><a href="namespacellvm.html#a48b30f2688526d0f45900a47cd6b6654">llvm::getLoadStoreType</a></div><div class="ttdeci">Type * getLoadStoreType(Value *I)</div><div class="ttdoc">A helper function that returns the type of a load or store instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l05408">Instructions.h:5408</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a50d461a887e200e704e5157d3b21514d"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a50d461a887e200e704e5157d3b21514d">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00075">DenseMap.h:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_a03797a73044a81cbc6a3409d6c72ee8f"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#a03797a73044a81cbc6a3409d6c72ee8f">llvm::PreservedAnalyses::none</a></div><div class="ttdeci">static PreservedAnalyses none()</div><div class="ttdoc">Convenience factory function for the empty preserved set.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00155">PassManager.h:155</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a9fffac2512fe651f0d5e37e27f5bd51c"><div class="ttname"><a href="classllvm_1_1Function.html#a9fffac2512fe651f0d5e37e27f5bd51c">llvm::Function::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">getContext - Return a reference to the LLVMContext associated with this function.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00315">Function.cpp:315</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdoc">The instances of the Type class are immutable: once they are created, they are never changed.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_ad30e432e7796aa46c87440cb54de2243"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#ad30e432e7796aa46c87440cb54de2243">llvm::TargetTransformInfo::useColdCCForColdCall</a></div><div class="ttdeci">bool useColdCCForColdCall(Function &amp;F) const</div><div class="ttdoc">Return true if the input function which is cold at all call sites, should use coldcc calling conventi...</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00519">TargetTransformInfo.cpp:519</a></div></div>
<div class="ttc" id="aDenseMap_8h_html"><div class="ttname"><a href="DenseMap_8h.html">DenseMap.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_aec88b7682025edff7984c3b6c8da8ac9"><div class="ttname"><a href="namespacellvm.html#aec88b7682025edff7984c3b6c8da8ac9">llvm::removeUnreachableBlocks</a></div><div class="ttdeci">bool removeUnreachableBlocks(Function &amp;F, DomTreeUpdater *DTU=nullptr, MemorySSAUpdater *MSSAU=nullptr)</div><div class="ttdoc">Remove all blocks that can not be reached from the function's entry.</div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Utils_2Local_8cpp_source.html#l02614">Local.cpp:2614</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ZeroCallUsedRegs_html_af03f9c4ce466646943e50f317397cec0a019d1ca7d50cc54b995f60d456435e87"><div class="ttname"><a href="namespacellvm_1_1ZeroCallUsedRegs.html#af03f9c4ce466646943e50f317397cec0a019d1ca7d50cc54b995f60d456435e87">llvm::ZeroCallUsedRegs::ZeroCallUsedRegsKind::Used</a></div><div class="ttdeci">@ Used</div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_a42820c4a63faae2568e3db2ac69af37d"><div class="ttname"><a href="GlobalOpt_8cpp.html#a42820c4a63faae2568e3db2ac69af37d">OptimizeFunctions</a></div><div class="ttdeci">static bool OptimizeFunctions(Module &amp;M, function_ref&lt; TargetLibraryInfo &amp;(Function &amp;)&gt; GetTLI, function_ref&lt; TargetTransformInfo &amp;(Function &amp;)&gt; GetTTI, function_ref&lt; BlockFrequencyInfo &amp;(Function &amp;)&gt; GetBFI, function_ref&lt; DominatorTree &amp;(Function &amp;)&gt; LookupDomTree, SmallPtrSetImpl&lt; const Comdat * &gt; &amp;NotDiscardableComdats, function_ref&lt; void(Function &amp;F)&gt; ChangedCFGCallback, function_ref&lt; void(Function &amp;F)&gt; DeleteFnCallback)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l01954">GlobalOpt.cpp:1954</a></div></div>
<div class="ttc" id="aModule_8h_html"><div class="ttname"><a href="Module_8h.html">Module.h</a></div></div>
<div class="ttc" id="aMemoryBuiltins_8h_html"><div class="ttname"><a href="MemoryBuiltins_8h.html">MemoryBuiltins.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1AttributeList_html"><div class="ttname"><a href="classllvm_1_1AttributeList.html">llvm::AttributeList</a></div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00432">Attributes.h:432</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6e7b79b3933def717c2a0f2fc6fa38e0"><div class="ttname"><a href="namespacellvm.html#a6e7b79b3933def717c2a0f2fc6fa38e0">llvm::getOrEnforceKnownAlignment</a></div><div class="ttdeci">Align getOrEnforceKnownAlignment(Value *V, MaybeAlign PrefAlign, const DataLayout &amp;DL, const Instruction *CxtI=nullptr, AssumptionCache *AC=nullptr, const DominatorTree *DT=nullptr)</div><div class="ttdoc">Try to ensure that the alignment of V is at least PrefAlign bytes.</div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Utils_2Local_8cpp_source.html#l01439">Local.cpp:1439</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_ae0c55761fce39dd71617690b04385193"><div class="ttname"><a href="classllvm_1_1CallBase.html#ae0c55761fce39dd71617690b04385193">llvm::CallBase::getAttributes</a></div><div class="ttdeci">AttributeList getAttributes() const</div><div class="ttdoc">Return the parameter attributes for this call.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01484">InstrTypes.h:1484</a></div></div>
<div class="ttc" id="aclassllvm_1_1DIExpression_html_a25ddc726fd7cdca07f747a5394c7c492"><div class="ttname"><a href="classllvm_1_1DIExpression.html#a25ddc726fd7cdca07f747a5394c7c492">llvm::DIExpression::extractIfOffset</a></div><div class="ttdeci">bool extractIfOffset(int64_t &amp;Offset) const</div><div class="ttdoc">If this is a constant offset, extract it.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8cpp_source.html#l01579">DebugInfoMetadata.cpp:1579</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a5b166ae228ebbfdb96736d6022f3feedafd841a49aec1539bc88abc8ff9e170fb"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feedafd841a49aec1539bc88abc8ff9e170fb">llvm::CallingConv::C</a></div><div class="ttdeci">@ C</div><div class="ttdoc">The default llvm calling convention, compatible with C.</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00034">CallingConv.h:34</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_ae8df4be75bfc50b1eadd74e85c25fa45a4cc6684df7b4a92b1dec6fce3264fac8"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#ae8df4be75bfc50b1eadd74e85c25fa45a4cc6684df7b4a92b1dec6fce3264fac8">llvm::GlobalValue::UnnamedAddr::Global</a></div><div class="ttdeci">@ Global</div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a50426b12f4acb3d9f74d0778948e9597"><div class="ttname"><a href="classllvm_1_1CallBase.html#a50426b12f4acb3d9f74d0778948e9597">llvm::CallBase::isMustTailCall</a></div><div class="ttdeci">bool isMustTailCall() const</div><div class="ttdoc">Tests if this call site must be tail call optimized.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l00309">Instructions.cpp:309</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemIntrinsic_html"><div class="ttname"><a href="classllvm_1_1MemIntrinsic.html">llvm::MemIntrinsic</a></div><div class="ttdoc">This is the common base class for memset/memcpy/memmove.</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l01048">IntrinsicInst.h:1048</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_a2cf59a15a8b7603c5d66d8fdb117ecec"><div class="ttname"><a href="GlobalOpt_8cpp.html#a2cf59a15a8b7603c5d66d8fdb117ecec">AllUsesOfValueWillTrapIfNull</a></div><div class="ttdeci">static bool AllUsesOfValueWillTrapIfNull(const Value *V, SmallPtrSetImpl&lt; const PHINode * &gt; &amp;PHIs)</div><div class="ttdoc">Return true if all users of the specified value will trap if the value is dynamically null.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l00601">GlobalOpt.cpp:601</a></div></div>
<div class="ttc" id="astructllvm_1_1GlobalStatus_html_ae58ea7b3b03443e976cbef09ac25cf00"><div class="ttname"><a href="structllvm_1_1GlobalStatus.html#ae58ea7b3b03443e976cbef09ac25cf00">llvm::GlobalStatus::analyzeGlobal</a></div><div class="ttdeci">static bool analyzeGlobal(const Value *V, GlobalStatus &amp;GS)</div><div class="ttdoc">Look at all uses of the global and fill in the GlobalStatus structure.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalStatus_8cpp_source.html#l00192">GlobalStatus.cpp:192</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a4c539f826d954ab3bd78cdb0882540bd"><div class="ttname"><a href="classllvm_1_1Value.html#a4c539f826d954ab3bd78cdb0882540bd">llvm::Value::stripAndAccumulateConstantOffsets</a></div><div class="ttdeci">const Value * stripAndAccumulateConstantOffsets(const DataLayout &amp;DL, APInt &amp;Offset, bool AllowNonInbounds, bool AllowInvariantGroup=false, function_ref&lt; bool(Value &amp;Value, APInt &amp;Offset)&gt; ExternalAnalysis=nullptr) const</div><div class="ttdoc">Accumulate the constant offset this value has compared to a base pointer.</div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdoc">SmallPtrSet - This class implements a set which is optimized for holding SmallSize or less elements.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00450">SmallPtrSet.h:450</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ore_html_a8f5533240c6722d987a2443cba42019d"><div class="ttname"><a href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">llvm::ore::NV</a></div><div class="ttdeci">DiagnosticInfoOptimizationBase::Argument NV</div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8h_source.html#l00136">OptimizationRemarkEmitter.h:136</a></div></div>
<div class="ttc" id="aOperator_8h_html"><div class="ttname"><a href="Operator_8h.html">Operator.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a158da2b6d3d938aaa15b6acd00150e2c"><div class="ttname"><a href="classllvm_1_1Value.html#a158da2b6d3d938aaa15b6acd00150e2c">llvm::Value::user_begin</a></div><div class="ttdeci">user_iterator user_begin()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00397">Value.h:397</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9a7b5c68c90f85baaedaa854cc5002cc"><div class="ttname"><a href="namespacellvm.html#a9a7b5c68c90f85baaedaa854cc5002cc">llvm::errs</a></div><div class="ttdeci">raw_fd_ostream &amp; errs()</div><div class="ttdoc">This returns a reference to a raw_ostream for standard error.</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8cpp_source.html#l00899">raw_ostream.cpp:899</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MipsISD_html_a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8"><div class="ttname"><a href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">llvm::MipsISD::Ret</a></div><div class="ttdeci">@ Ret</div><div class="ttdef"><b>Definition:</b> <a href="MipsISelLowering_8h_source.html#l00119">MipsISelLowering.h:119</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Intrinsic_html_a35fedf4db6d756bd82501607f93c1e79aab5fb650050f184fa7c19c26abde5226"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a35fedf4db6d756bd82501607f93c1e79aab5fb650050f184fa7c19c26abde5226">llvm::Intrinsic::not_intrinsic</a></div><div class="ttdeci">@ not_intrinsic</div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l00044">Intrinsics.h:44</a></div></div>
<div class="ttc" id="aSTLExtras_8h_html"><div class="ttname"><a href="STLExtras_8h.html">STLExtras.h</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_a6c0ba55113b40b07b869ba9c06db6ca1"><div class="ttname"><a href="GlobalOpt_8cpp.html#a6c0ba55113b40b07b869ba9c06db6ca1">OptimizeGlobalAliases</a></div><div class="ttdeci">static bool OptimizeGlobalAliases(Module &amp;M, SmallPtrSetImpl&lt; const Comdat * &gt; &amp;NotDiscardableComdats)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l02295">GlobalOpt.cpp:2295</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a38c97622dccff7ae31fe0be3b21c9b3d"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a38c97622dccff7ae31fe0be3b21c9b3d">llvm::GlobalValue::setUnnamedAddr</a></div><div class="ttdeci">void setUnnamedAddr(UnnamedAddr Val)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00227">GlobalValue.h:227</a></div></div>
<div class="ttc" id="aCtorUtils_8h_html"><div class="ttname"><a href="CtorUtils_8h.html">CtorUtils.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DIExpression_html"><div class="ttname"><a href="classllvm_1_1DIExpression.html">llvm::DIExpression</a></div><div class="ttdoc">DWARF expression.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8h_source.html#l02611">DebugInfoMetadata.h:2611</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_a77de6d50432bef62e38fd24f2030026c"><div class="ttname"><a href="GlobalOpt_8cpp.html#a77de6d50432bef62e38fd24f2030026c">TryToShrinkGlobalToBoolean</a></div><div class="ttdeci">static bool TryToShrinkGlobalToBoolean(GlobalVariable *GV, Constant *OtherVal)</div><div class="ttdoc">At this point, we have learned that the only two values ever stored into GV are its initializer and O...</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l01128">GlobalOpt.cpp:1128</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayType_html"><div class="ttname"><a href="classllvm_1_1ArrayType.html">llvm::ArrayType</a></div><div class="ttdoc">Class to represent array types.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00357">DerivedTypes.h:357</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_aac5759c83abd6a4af236401a7cfe7a0f"><div class="ttname"><a href="classllvm_1_1Type.html#aac5759c83abd6a4af236401a7cfe7a0f">llvm::Type::isFloatingPointTy</a></div><div class="ttdeci">bool isFloatingPointTy() const</div><div class="ttdoc">Return true if this is one of the floating-point types.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00185">Type.h:185</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_a7b97d3981d965c0884878bca5be437ff"><div class="ttname"><a href="GlobalOpt_8cpp.html#a7b97d3981d965c0884878bca5be437ff">ChangeCalleesToFastCall</a></div><div class="ttdeci">static void ChangeCalleesToFastCall(Function *F)</div><div class="ttdoc">Walk all of the direct calls of the specified function, changing them to FastCC.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l01705">GlobalOpt.cpp:1705</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a7ba5de75f50bb4a4ba920698edf39b28"><div class="ttname"><a href="classllvm_1_1Type.html#a7ba5de75f50bb4a4ba920698edf39b28">llvm::Type::getInt8Ty</a></div><div class="ttdeci">static IntegerType * getInt8Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00239">Type.cpp:239</a></div></div>
<div class="ttc" id="aConstantFolding_8h_html"><div class="ttname"><a href="ConstantFolding_8h.html">ConstantFolding.h</a></div></div>
<div class="ttc" id="aUse_8h_html"><div class="ttname"><a href="Use_8h.html">Use.h</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00101">Debug.h:101</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html_a7d10a7b9b7f40b04d27ed97c38ea1950"><div class="ttname"><a href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">llvm::MDNode::get</a></div><div class="ttdeci">static MDTuple * get(LLVMContext &amp;Context, ArrayRef&lt; Metadata * &gt; MDs)</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l01399">Metadata.h:1399</a></div></div>
<div class="ttc" id="anamespacellvm_html_acd6aa057934751aaac54e5c18bcc18eb"><div class="ttname"><a href="namespacellvm.html#acd6aa057934751aaac54e5c18bcc18eb">llvm::commonAlignment</a></div><div class="ttdeci">Align commonAlignment(Align A, uint64_t Offset)</div><div class="ttdoc">Returns the alignment that satisfies both alignments.</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00212">Alignment.h:212</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00055">MD5.cpp:55</a></div></div>
<div class="ttc" id="anamespacellvm_html_afd1cdae0d7a12aa1861ac142c059f5d2"><div class="ttname"><a href="namespacellvm.html#afd1cdae0d7a12aa1861ac142c059f5d2">llvm::collectUsedGlobalVariables</a></div><div class="ttdeci">GlobalVariable * collectUsedGlobalVariables(const Module &amp;M, SmallVectorImpl&lt; GlobalValue * &gt; &amp;Vec, bool CompilerUsed)</div><div class="ttdoc">Given &quot;llvm.used&quot; or &quot;llvm.compiler.used&quot; as a global name, collect the initializer elements of that ...</div><div class="ttdef"><b>Definition:</b> <a href="Module_8cpp_source.html#l00807">Module.cpp:807</a></div></div>
<div class="ttc" id="aARMLowOverheadLoops_8cpp_html_a0a0971d62011c35b29ff4a2325d45e93"><div class="ttname"><a href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a></div><div class="ttdeci">SmallPtrSet&lt; MachineInstr *, 2 &gt; Uses</div><div class="ttdef"><b>Definition:</b> <a href="ARMLowOverheadLoops_8cpp_source.html#l00590">ARMLowOverheadLoops.cpp:590</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00055">BasicBlock.h:55</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_a78eb44f8b1ae7339f4f73c6d27146e94"><div class="ttname"><a href="GlobalOpt_8cpp.html#a78eb44f8b1ae7339f4f73c6d27146e94">ColdCCRelFreq</a></div><div class="ttdeci">static cl::opt&lt; int &gt; ColdCCRelFreq(&quot;coldcc-rel-freq&quot;, cl::Hidden, cl::init(2), cl::desc(&quot;Maximum block frequency, expressed as a percentage of caller's &quot; &quot;entry frequency, for a call site to be considered cold for enabling&quot; &quot;coldcc&quot;))</div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="anamespacellvm_html_accaca14b419cbac91ca6170523084a04"><div class="ttname"><a href="namespacellvm.html#accaca14b419cbac91ca6170523084a04">llvm::isAllocationFn</a></div><div class="ttdeci">bool isAllocationFn(const Value *V, const TargetLibraryInfo *TLI)</div><div class="ttdoc">Tests if a value is a call or invoke to a library function that allocates or reallocates memory (eith...</div><div class="ttdef"><b>Definition:</b> <a href="MemoryBuiltins_8cpp_source.html#l00287">MemoryBuiltins.cpp:287</a></div></div>
<div class="ttc" id="aIR_2Instruction_8h_html"><div class="ttname"><a href="IR_2Instruction_8h.html">Instruction.h</a></div></div>
<div class="ttc" id="aCommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_ae8df4be75bfc50b1eadd74e85c25fa45a509820290d57f333403f490dde7316f4"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#ae8df4be75bfc50b1eadd74e85c25fa45a509820290d57f333403f490dde7316f4">llvm::GlobalValue::UnnamedAddr::Local</a></div><div class="ttdeci">@ Local</div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a5f6edc5246188225b3f49bd5c974c759"><div class="ttname"><a href="classllvm_1_1Type.html#a5f6edc5246188225b3f49bd5c974c759">llvm::Type::isSingleValueType</a></div><div class="ttdeci">bool isSingleValueType() const</div><div class="ttdoc">Return true if the type is a valid type for a register in codegen.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00280">Type.h:280</a></div></div>
<div class="ttc" id="astructllvm_1_1GlobalStatus_html"><div class="ttname"><a href="structllvm_1_1GlobalStatus.html">llvm::GlobalStatus</a></div><div class="ttdoc">As we analyze each global, keep track of some information about it.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalStatus_8h_source.html#l00030">GlobalStatus.h:30</a></div></div>
<div class="ttc" id="aclassllvm_1_1BlockFrequencyInfo_html"><div class="ttname"><a href="classllvm_1_1BlockFrequencyInfo.html">llvm::BlockFrequencyInfo</a></div><div class="ttdoc">BlockFrequencyInfo pass uses BlockFrequencyInfoImpl implementation to estimate IR basic block frequen...</div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequencyInfo_8h_source.html#l00037">BlockFrequencyInfo.h:37</a></div></div>
<div class="ttc" id="aclassllvm_1_1StoreInst_html_a14298313bdf734e2db5a921cc6e861a0"><div class="ttname"><a href="classllvm_1_1StoreInst.html#a14298313bdf734e2db5a921cc6e861a0">llvm::StoreInst::getValueOperand</a></div><div class="ttdeci">Value * getValueOperand()</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00390">Instructions.h:390</a></div></div>
<div class="ttc" id="aclassllvm_1_1SelectInst_html_aa55fb74dd22008fdcc26a63f44576022"><div class="ttname"><a href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">llvm::SelectInst::Create</a></div><div class="ttdeci">static SelectInst * Create(Value *C, Value *S1, Value *S2, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr, Instruction *MDFrom=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01777">Instructions.h:1777</a></div></div>
<div class="ttc" id="aGlobalValue_8h_html"><div class="ttname"><a href="GlobalValue_8h.html">GlobalValue.h</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_a1c6c0f8bb397fee19be6ef20f299afdf"><div class="ttname"><a href="GlobalOpt_8cpp.html#a1c6c0f8bb397fee19be6ef20f299afdf">ConstantPropUsersOf</a></div><div class="ttdeci">static void ConstantPropUsersOf(Value *V, const DataLayout &amp;DL, TargetLibraryInfo *TLI)</div><div class="ttdoc">Walk the use list of V, constant folding all of the instructions that are foldable.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l00838">GlobalOpt.cpp:838</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a32e606ac4c88f71f14212e42b808e7f4"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a32e606ac4c88f71f14212e42b808e7f4">llvm::GlobalValue::isDeclaration</a></div><div class="ttdeci">bool isDeclaration() const</div><div class="ttdoc">Return true if the primary definition of this global value is outside of the current translation unit...</div><div class="ttdef"><b>Definition:</b> <a href="Globals_8cpp_source.html#l00275">Globals.cpp:275</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html_a84cd09ccc918883d51a387f0e0f374f3"><div class="ttname"><a href="classllvm_1_1StringRef.html#a84cd09ccc918883d51a387f0e0f374f3">llvm::StringRef::startswith</a></div><div class="ttdeci">bool startswith(StringRef Prefix) const</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00261">StringRef.h:261</a></div></div>
<div class="ttc" id="aConstants_8h_html"><div class="ttname"><a href="Constants_8h.html">Constants.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_ae4b6abe77abf42fb02081a6cc41a0132"><div class="ttname"><a href="classllvm_1_1Constant.html#ae4b6abe77abf42fb02081a6cc41a0132">llvm::Constant::isNullValue</a></div><div class="ttdeci">bool isNullValue() const</div><div class="ttdoc">Return true if this is the value that would be returned by getNullValue.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00076">Constants.cpp:76</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_ada2105b58ae1e63c91c4a1185fc2880b"><div class="ttname"><a href="GlobalOpt_8cpp.html#ada2105b58ae1e63c91c4a1185fc2880b">EnableColdCCStressTest</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; EnableColdCCStressTest(&quot;enable-coldcc-stress-test&quot;, cl::desc(&quot;Enable stress test of coldcc by adding &quot; &quot;calling conv to all internal functions.&quot;), cl::init(false), cl::Hidden)</div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_ac3cf098d54027ac28278b060376bdcbd"><div class="ttname"><a href="GlobalOpt_8cpp.html#ac3cf098d54027ac28278b060376bdcbd">CleanupConstantGlobalUsers</a></div><div class="ttdeci">static bool CleanupConstantGlobalUsers(GlobalVariable *GV, const DataLayout &amp;DL)</div><div class="ttdoc">We just marked GV constant.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l00277">GlobalOpt.cpp:277</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html"><div class="ttname"><a href="classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00044">User.h:44</a></div></div>
<div class="ttc" id="anamespacellvm_html_a26a5e408fc09c5664d2bbb2d7fae154e"><div class="ttname"><a href="namespacellvm.html#a26a5e408fc09c5664d2bbb2d7fae154e">llvm::LibFunc</a></div><div class="ttdeci">LibFunc</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00036">TargetLibraryInfo.h:36</a></div></div>
<div class="ttc" id="astructllvm_1_1less__first_html"><div class="ttname"><a href="structllvm_1_1less__first.html">llvm::less_first</a></div><div class="ttdoc">Function object to check whether the first component of a std::pair compares less than the first comp...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01477">STLExtras.h:1477</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A, *B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00086">README_ALTIVEC.txt:86</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">llvm::CmpInst::ICMP_ULE</a></div><div class="ttdeci">@ ICMP_ULE</div><div class="ttdoc">unsigned less or equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00744">InstrTypes.h:744</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_a406d93c10bd410f7ef8af5c00b037b8b"><div class="ttname"><a href="GlobalOpt_8cpp.html#a406d93c10bd410f7ef8af5c00b037b8b">valueIsOnlyUsedLocallyOrStoredToOneGlobal</a></div><div class="ttdeci">static bool valueIsOnlyUsedLocallyOrStoredToOneGlobal(const CallInst *CI, const GlobalVariable *GV)</div><div class="ttdoc">Scan the use-list of GV checking to make sure that there are no complex uses of GV.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l00998">GlobalOpt.cpp:998</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a52126ae2091b18cecfd5ad0f0012839a"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a52126ae2091b18cecfd5ad0f0012839a">llvm::GlobalValue::getThreadLocalMode</a></div><div class="ttdeci">ThreadLocalMode getThreadLocalMode() const</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00267">GlobalValue.h:267</a></div></div>
<div class="ttc" id="aTwine_8h_html"><div class="ttname"><a href="Twine_8h.html">Twine.h</a></div></div>
<div class="ttc" id="aInstrTypes_8h_html"><div class="ttname"><a href="InstrTypes_8h.html">InstrTypes.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a9da3b29e8e71b9be4645874e1721207a"><div class="ttname"><a href="classllvm_1_1CallBase.html#a9da3b29e8e71b9be4645874e1721207a">llvm::CallBase::setAttributes</a></div><div class="ttdeci">void setAttributes(AttributeList A)</div><div class="ttdoc">Set the parameter attributes for this call.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01488">InstrTypes.h:1488</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html_a4926331431f03253ee3ec8e6e3bb9d1c"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html#a4926331431f03253ee3ec8e6e3bb9d1c">llvm::AnalysisManager::clear</a></div><div class="ttdeci">void clear(IRUnitT &amp;IR, llvm::StringRef Name)</div><div class="ttdoc">Clear any cached analysis results for a single unit of IR.</div><div class="ttdef"><b>Definition:</b> <a href="PassManagerImpl_8h_source.html#l00036">PassManagerImpl.h:36</a></div></div>
<div class="ttc" id="aSIInstrInfo_8cpp_html_a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791"><div class="ttname"><a href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a></div><div class="ttdeci">@ SI</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8cpp_source.html#l07993">SIInstrInfo.cpp:7993</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a3ed4c5535997ad77ffee00f92430b576"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a3ed4c5535997ad77ffee00f92430b576">llvm::GlobalValue::hasPrivateLinkage</a></div><div class="ttdeci">bool hasPrivateLinkage() const</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00522">GlobalValue.h:522</a></div></div>
<div class="ttc" id="aTargetLibraryInfo_8h_html"><div class="ttname"><a href="TargetLibraryInfo_8h.html">TargetLibraryInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a1bc022868b23918efa44df511f4d5b61"><div class="ttname"><a href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">llvm::Type::isVectorTy</a></div><div class="ttdeci">bool isVectorTy() const</div><div class="ttdoc">True if this is an instance of VectorType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00258">Type.h:258</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_aecb93439702247fe5353a9966f7cefcd"><div class="ttname"><a href="classllvm_1_1Value.html#aecb93439702247fe5353a9966f7cefcd">llvm::Value::uses</a></div><div class="ttdeci">iterator_range&lt; use_iterator &gt; uses()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00376">Value.h:376</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a7abf5fb4071cb25dbce06dfb5ee3c937"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a></div><div class="ttdeci">static GCRegistry::Add&lt; OcamlGC &gt; B(&quot;ocaml&quot;, &quot;ocaml 3.10-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00041">Instruction.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1Operator_html_aca4ffddc11c10477a4a76ada6fd5da46"><div class="ttname"><a href="classllvm_1_1Operator.html#aca4ffddc11c10477a4a76ada6fd5da46">llvm::Operator::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const</div><div class="ttdoc">Return the opcode for this Instruction or ConstantExpr.</div><div class="ttdef"><b>Definition:</b> <a href="Operator_8h_source.html#l00041">Operator.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a217e0207d9cc8e046c2dccbf0e4bb198"><div class="ttname"><a href="classllvm_1_1APInt.html#a217e0207d9cc8e046c2dccbf0e4bb198">llvm::APInt::getZExtValue</a></div><div class="ttdeci">uint64_t getZExtValue() const</div><div class="ttdoc">Get zero extended value.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01494">APInt.h:1494</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0bf75467957937ad23ad7be19f489934"><div class="ttname"><a href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">llvm::STATISTIC</a></div><div class="ttdeci">STATISTIC(NumFunctions, &quot;Total number of functions&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1UndefValue_html_a4ae5ff22b700a42bcc5d889233721335"><div class="ttname"><a href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">llvm::UndefValue::get</a></div><div class="ttdeci">static UndefValue * get(Type *T)</div><div class="ttdoc">Static factory methods - Return an 'undef' object of the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01740">Constants.cpp:1740</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a969709dd49c28865a482d8b870f87c46"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">llvm::ConstantInt::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, uint64_t V, bool IsSigned=false)</div><div class="ttdoc">If Ty is a vector type, return a Constant with a splat of the given value.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00887">Constants.cpp:887</a></div></div>
<div class="ttc" id="aclassllvm_1_1Use_html_a50a2e57da274f8d69b9f932977379cdf"><div class="ttname"><a href="classllvm_1_1Use.html#a50a2e57da274f8d69b9f932977379cdf">llvm::Use::getUser</a></div><div class="ttdeci">User * getUser() const</div><div class="ttdoc">Returns the User that contains this Use.</div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00072">Use.h:72</a></div></div>
<div class="ttc" id="aclassllvm_1_1Evaluator_html_a651b668d10e5d38787a29ced3fb897b9"><div class="ttname"><a href="classllvm_1_1Evaluator.html#a651b668d10e5d38787a29ced3fb897b9">llvm::Evaluator::getMutatedInitializers</a></div><div class="ttdeci">DenseMap&lt; GlobalVariable *, Constant * &gt; getMutatedInitializers() const</div><div class="ttdef"><b>Definition:</b> <a href="Evaluator_8h_source.html#l00102">Evaluator.h:102</a></div></div>
<div class="ttc" id="anamespacellvm_html_a3b1c5788b85ffa254be0e834edf5cf8f"><div class="ttname"><a href="namespacellvm.html#a3b1c5788b85ffa254be0e834edf5cf8f">llvm::getUnderlyingObject</a></div><div class="ttdeci">const Value * getUnderlyingObject(const Value *V, unsigned MaxLookup=6)</div><div class="ttdoc">This method strips off any GEP address adjustments and pointer casts from the specified value,...</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l04567">ValueTracking.cpp:4567</a></div></div>
<div class="ttc" id="aSmallPtrSet_8h_html"><div class="ttname"><a href="SmallPtrSet_8h.html">SmallPtrSet.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a5e9e1c0dd93557be1b4ad72860f3cbdaae68df805bc15b023748c2a78b80563ff"><div class="ttname"><a href="classllvm_1_1Type.html#a5e9e1c0dd93557be1b4ad72860f3cbdaae68df805bc15b023748c2a78b80563ff">llvm::Type::PointerTyID</a></div><div class="ttdeci">@ PointerTyID</div><div class="ttdoc">Pointers.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00073">Type.h:73</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_ac18f876b955434599bd93fd50aad53b8"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#ac18f876b955434599bd93fd50aad53b8">llvm::GlobalValue::hasGlobalUnnamedAddr</a></div><div class="ttdeci">bool hasGlobalUnnamedAddr() const</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00211">GlobalValue.h:211</a></div></div>
<div class="ttc" id="aclassllvm_1_1Evaluator_html_ab5b62d945bed080da71862ecf11e114e"><div class="ttname"><a href="classllvm_1_1Evaluator.html#ab5b62d945bed080da71862ecf11e114e">llvm::Evaluator::getInvariants</a></div><div class="ttdeci">const SmallPtrSetImpl&lt; GlobalVariable * &gt; &amp; getInvariants() const</div><div class="ttdef"><b>Definition:</b> <a href="Evaluator_8h_source.html#l00109">Evaluator.h:109</a></div></div>
<div class="ttc" id="aELFObjHandler_8cpp_html_a043cdaf7b89aaeeb127be5d93411637f"><div class="ttname"><a href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a></div><div class="ttdeci">uint64_t Align</div><div class="ttdef"><b>Definition:</b> <a href="ELFObjHandler_8cpp_source.html#l00082">ELFObjHandler.cpp:82</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">llvm::GlobalValue::InternalLinkage</a></div><div class="ttdeci">@ InternalLinkage</div><div class="ttdoc">Rename collisions when linking (static functions).</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00055">GlobalValue.h:55</a></div></div>
<div class="ttc" id="astructllvm_1_1Align_html"><div class="ttname"><a href="structllvm_1_1Align.html">llvm::Align</a></div><div class="ttdoc">This struct is a compact representation of a valid (non-zero power of two) alignment.</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00039">Alignment.h:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1Comdat_html"><div class="ttname"><a href="classllvm_1_1Comdat.html">llvm::Comdat</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Comdat_8h_source.html#l00033">Comdat.h:33</a></div></div>
<div class="ttc" id="anamespacellvm_html_a2c3c18bffdc25d969233c5448bdfe7eb"><div class="ttname"><a href="namespacellvm.html#a2c3c18bffdc25d969233c5448bdfe7eb">llvm::AddressSpace</a></div><div class="ttdeci">AddressSpace</div><div class="ttdef"><b>Definition:</b> <a href="NVPTXBaseInfo_8h_source.html#l00021">NVPTXBaseInfo.h:21</a></div></div>
<div class="ttc" id="aclassllvm_1_1BlockFrequencyAnalysis_html"><div class="ttname"><a href="classllvm_1_1BlockFrequencyAnalysis.html">llvm::BlockFrequencyAnalysis</a></div><div class="ttdoc">Analysis pass which computes BlockFrequencyInfo.</div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequencyInfo_8h_source.html#l00112">BlockFrequencyInfo.h:112</a></div></div>
<div class="ttc" id="anamespacellvm_html_a62ba0e5ee2d86f663c6de4efda6082a7"><div class="ttname"><a href="namespacellvm.html#a62ba0e5ee2d86f663c6de4efda6082a7">llvm::getObjectSize</a></div><div class="ttdeci">bool getObjectSize(const Value *Ptr, uint64_t &amp;Size, const DataLayout &amp;DL, const TargetLibraryInfo *TLI, ObjectSizeOpts Opts={})</div><div class="ttdoc">Compute the size of the object pointed by Ptr.</div><div class="ttdef"><b>Definition:</b> <a href="MemoryBuiltins_8cpp_source.html#l00578">MemoryBuiltins.cpp:578</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6b369f94d5ebc6e107a988f17b42b3eb"><div class="ttname"><a href="namespacellvm.html#a6b369f94d5ebc6e107a988f17b42b3eb">llvm::isSafeToDestroyConstant</a></div><div class="ttdeci">bool isSafeToDestroyConstant(const Constant *C)</div><div class="ttdoc">It is safe to destroy a constant iff it is only used by constants itself.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalStatus_8cpp_source.html#l00043">GlobalStatus.cpp:43</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html_aca6c2de6950cb093f509ed2b67e02da2"><div class="ttname"><a href="classllvm_1_1LoadInst.html#aca6c2de6950cb093f509ed2b67e02da2">llvm::LoadInst::getSyncScopeID</a></div><div class="ttdeci">SyncScope::ID getSyncScopeID() const</div><div class="ttdoc">Returns the synchronization scope ID of this load instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00239">Instructions.h:239</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a9d7de807ebdfe1819df3ff6cb0f16158"><div class="ttname"><a href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">llvm::Value::use_empty</a></div><div class="ttdeci">bool use_empty() const</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00344">Value.h:344</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a188c0836f8c3528401f1c236fd93b977"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">llvm::CallingConv::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdoc">LLVM IR allows to use arbitrary numbers as calling convention identifiers.</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00024">CallingConv.h:24</a></div></div>
<div class="ttc" id="aType_8h_html"><div class="ttname"><a href="Type_8h.html">Type.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_afac5b39bcbb90d660f83d9b4bd8c6d95"><div class="ttname"><a href="classllvm_1_1CallBase.html#afac5b39bcbb90d660f83d9b4bd8c6d95">llvm::CallBase::getCaller</a></div><div class="ttdeci">Function * getCaller()</div><div class="ttdoc">Helper to get the caller (the parent function).</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l00293">Instructions.cpp:293</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemSetInst_html"><div class="ttname"><a href="classllvm_1_1MemSetInst.html">llvm::MemSetInst</a></div><div class="ttdoc">This class wraps the llvm.memset and llvm.memset.inline intrinsics.</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l01080">IntrinsicInst.h:1080</a></div></div>
<div class="ttc" id="aEvaluator_8h_html"><div class="ttname"><a href="Evaluator_8h.html">Evaluator.h</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_ad94492a63af952fcee37ae6214544c69"><div class="ttname"><a href="GlobalOpt_8cpp.html#ad94492a63af952fcee37ae6214544c69">collectSRATypes</a></div><div class="ttdeci">static bool collectSRATypes(DenseMap&lt; uint64_t, Type * &gt; &amp;Types, GlobalValue *GV, const DataLayout &amp;DL)</div><div class="ttdoc">Look at all uses of the global and determine which (offset, type) pairs it can be split into.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l00340">GlobalOpt.cpp:340</a></div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_a07ed0bfaa124c15897944fe3eaa971ab"><div class="ttname"><a href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned long or uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="aclassllvm_1_1InvokeInst_html"><div class="ttname"><a href="classllvm_1_1InvokeInst.html">llvm::InvokeInst</a></div><div class="ttdoc">Invoke instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03814">Instructions.h:3814</a></div></div>
<div class="ttc" id="anamespacellvm_html_a74cdbd1e4f731e7d7cd83461b8b1de0b"><div class="ttname"><a href="namespacellvm.html#a74cdbd1e4f731e7d7cd83461b8b1de0b">llvm::sort</a></div><div class="ttdeci">void sort(IteratorTy Start, IteratorTy End)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01683">STLExtras.h:1683</a></div></div>
<div class="ttc" id="aclassllvm_1_1function__ref_html"><div class="ttname"><a href="classllvm_1_1function__ref.html">llvm::function_ref</a></div><div class="ttdoc">An efficient, type-erasing, non-owning reference to a callable.</div><div class="ttdef"><b>Definition:</b> <a href="STLFunctionalExtras_8h_source.html#l00036">STLFunctionalExtras.h:36</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_aa22118b2b3f206bfda2ffab4cda94d64"><div class="ttname"><a href="classllvm_1_1Value.html#aa22118b2b3f206bfda2ffab4cda94d64">llvm::Value::user_end</a></div><div class="ttdeci">user_iterator user_end()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00405">Value.h:405</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ac2e338e4c120fc3ea43099b54880f1f1"><div class="ttname"><a href="classllvm_1_1Value.html#ac2e338e4c120fc3ea43099b54880f1f1">llvm::Value::user_back</a></div><div class="ttdeci">User * user_back()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00407">Value.h:407</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_aba35cb55d089d58ace72978cb0249dc8"><div class="ttname"><a href="GlobalOpt_8cpp.html#aba35cb55d089d58ace72978cb0249dc8">optimizeGlobalsInModule</a></div><div class="ttdeci">static bool optimizeGlobalsInModule(Module &amp;M, const DataLayout &amp;DL, function_ref&lt; TargetLibraryInfo &amp;(Function &amp;)&gt; GetTLI, function_ref&lt; TargetTransformInfo &amp;(Function &amp;)&gt; GetTTI, function_ref&lt; BlockFrequencyInfo &amp;(Function &amp;)&gt; GetBFI, function_ref&lt; DominatorTree &amp;(Function &amp;)&gt; LookupDomTree, function_ref&lt; void(Function &amp;F)&gt; ChangedCFGCallback, function_ref&lt; void(Function &amp;F)&gt; DeleteFnCallback)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l02462">GlobalOpt.cpp:2462</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalVariable_html_aebcc339b418cae92442b394b33359705"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html#aebcc339b418cae92442b394b33359705">llvm::GlobalVariable::addDebugInfo</a></div><div class="ttdeci">void addDebugInfo(DIGlobalVariableExpression *GV)</div><div class="ttdoc">Attach a DIGlobalVariableExpression.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l01638">Metadata.cpp:1638</a></div></div>
<div class="ttc" id="aclassllvm_1_1Use_html_a40360b4fa7b8e6920a68e5a8a0814f1f"><div class="ttname"><a href="classllvm_1_1Use.html#a40360b4fa7b8e6920a68e5a8a0814f1f">llvm::Use::set</a></div><div class="ttdeci">void set(Value *Val)</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00865">Value.h:865</a></div></div>
<div class="ttc" id="aBasicBlock_8h_html"><div class="ttname"><a href="BasicBlock_8h.html">BasicBlock.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt&lt; bool &gt;</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_ace2885fc42e68606f270bfd3180d5f26"><div class="ttname"><a href="GlobalOpt_8cpp.html#ace2885fc42e68606f270bfd3180d5f26">isLeakCheckerRoot</a></div><div class="ttdeci">static bool isLeakCheckerRoot(GlobalVariable *GV)</div><div class="ttdoc">Is this global variable possibly used by a leak checker as a root? If so, we might not really want to...</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l00111">GlobalOpt.cpp:111</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_a6ef58549c87cd57b83dcd7ce2d92cc03"><div class="ttname"><a href="GlobalOpt_8cpp.html#a6ef58549c87cd57b83dcd7ce2d92cc03">mayHaveOtherReferences</a></div><div class="ttdeci">static bool mayHaveOtherReferences(GlobalAlias &amp;GA, const LLVMUsed &amp;U)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l02255">GlobalOpt.cpp:2255</a></div></div>
<div class="ttc" id="aclassllvm_1_1StoreInst_html"><div class="ttname"><a href="classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdoc">An instruction for storing to memory.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00301">Instructions.h:301</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html"><div class="ttname"><a href="classllvm_1_1GlobalValue.html">llvm::GlobalValue</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00044">GlobalValue.h:44</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_afa93649aba5a7b6388adff903a4a6085"><div class="ttname"><a href="GlobalOpt_8cpp.html#afa93649aba5a7b6388adff903a4a6085">hasUseOtherThanLLVMUsed</a></div><div class="ttdeci">static bool hasUseOtherThanLLVMUsed(GlobalAlias &amp;GA, const LLVMUsed &amp;U)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l02228">GlobalOpt.cpp:2228</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalVariable_html_a0e5946885029c1bce1350d34f2539b1b"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html#a0e5946885029c1bce1350d34f2539b1b">llvm::GlobalVariable::getInitializer</a></div><div class="ttdeci">const Constant * getInitializer() const</div><div class="ttdoc">getInitializer - Return the initializer for this global variable.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalVariable_8h_source.html#l00135">GlobalVariable.h:135</a></div></div>
<div class="ttc" id="anamespacellvm_html_a108b6e33f153eda5019d322f0ac909b0"><div class="ttname"><a href="namespacellvm.html#a108b6e33f153eda5019d322f0ac909b0">llvm::getInitialValueOfAllocation</a></div><div class="ttdeci">Constant * getInitialValueOfAllocation(const Value *V, const TargetLibraryInfo *TLI, Type *Ty)</div><div class="ttdoc">If this is a call to an allocation function that initializes memory to a fixed value,...</div><div class="ttdef"><b>Definition:</b> <a href="MemoryBuiltins_8cpp_source.html#l00428">MemoryBuiltins.cpp:428</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html"><div class="ttname"><a href="classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">This is an important base class in LLVM.</div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_a4e385793d373a822cffdeaa9ee8f3e19"><div class="ttname"><a href="GlobalOpt_8cpp.html#a4e385793d373a822cffdeaa9ee8f3e19">RemoveAttribute</a></div><div class="ttdeci">static void RemoveAttribute(Function *F, Attribute::AttrKind A)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l01721">GlobalOpt.cpp:1721</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ae6b978645b8ac72d1a35e1298ffdd4f0"><div class="ttname"><a href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">SymbolTableList&lt; Instruction &gt;::iterator eraseFromParent()</div><div class="ttdoc">This method unlinks 'this' from the containing basic block and deletes it.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00082">Instruction.cpp:82</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_ade4086b409f00a755cfc6c0b03f67413"><div class="ttname"><a href="GlobalOpt_8cpp.html#ade4086b409f00a755cfc6c0b03f67413">isPointerValueDeadOnEntryToFunction</a></div><div class="ttdeci">static bool isPointerValueDeadOnEntryToFunction(const Function *F, GlobalValue *GV, function_ref&lt; DominatorTree &amp;(Function &amp;)&gt; LookupDomTree)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l01316">GlobalOpt.cpp:1316</a></div></div>
<div class="ttc" id="aclassllvm_1_1ICmpInst_html"><div class="ttname"><a href="classllvm_1_1ICmpInst.html">llvm::ICmpInst</a></div><div class="ttdoc">This instruction compares its operands according to the predicate given to the constructor.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01197">Instructions.h:1197</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a9e1fc23a17e97d2d1732e753ae9251ac"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">llvm::GlobalValue::getParent</a></div><div class="ttdeci">Module * getParent()</div><div class="ttdoc">Get the module that this global value is contained inside of...</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00652">GlobalValue.h:652</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a7004354fbee1c8cd74ed9001915e1db5"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a7004354fbee1c8cd74ed9001915e1db5">llvm::SmallPtrSetImpl::end</a></div><div class="ttdeci">iterator end() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00408">SmallPtrSet.h:408</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a2fd1d2dc14e22227cfa8238778ab87b8"><div class="ttname"><a href="classllvm_1_1Instruction.html#a2fd1d2dc14e22227cfa8238778ab87b8">llvm::Instruction::user_back</a></div><div class="ttdeci">Instruction * user_back()</div><div class="ttdoc">Specialize the methods defined in Value, as we know that an instruction can only be used by other ins...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00087">Instruction.h:87</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_ad966bea18aa62ffb9e040509adc7c99f"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#ad966bea18aa62ffb9e040509adc7c99f">llvm::PreservedAnalyses::preserve</a></div><div class="ttdeci">void preserve()</div><div class="ttdoc">Mark an analysis as preserved.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00173">PassManager.h:173</a></div></div>
<div class="ttc" id="aTransforms_2IPO_8h_html"><div class="ttname"><a href="Transforms_2IPO_8h.html">IPO.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1StructType_html_aec7c3cecd0559788b36c46df1b2181c1"><div class="ttname"><a href="classllvm_1_1StructType.html#aec7c3cecd0559788b36c46df1b2181c1">llvm::StructType::isOpaque</a></div><div class="ttdeci">bool isOpaque() const</div><div class="ttdoc">Return true if this is a type with an identity that has no body specified yet.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00281">DerivedTypes.h:281</a></div></div>
<div class="ttc" id="aGlobalStatus_8h_html"><div class="ttname"><a href="GlobalStatus_8h.html">GlobalStatus.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DIGlobalVariable_html"><div class="ttname"><a href="classllvm_1_1DIGlobalVariable.html">llvm::DIGlobalVariable</a></div><div class="ttdoc">Global variables.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8h_source.html#l03026">DebugInfoMetadata.h:3026</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLVMContext_html"><div class="ttname"><a href="classllvm_1_1LLVMContext.html">llvm::LLVMContext</a></div><div class="ttdoc">This is an important class for using LLVM in a threaded context.</div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00067">LLVMContext.h:67</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a72fb137716cff838d389e392b9729dc9"><div class="ttname"><a href="classllvm_1_1Value.html#a72fb137716cff838d389e392b9729dc9">llvm::Value::hasNUsesOrMore</a></div><div class="ttdeci">bool hasNUsesOrMore(unsigned N) const</div><div class="ttdoc">Return true if this value has N uses or more.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00152">Value.cpp:152</a></div></div>
<div class="ttc" id="anamespacellvm_1_1numbers_html_a92f4283d4e0e2ea1776894b3ae93640f"><div class="ttname"><a href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">llvm::numbers::e</a></div><div class="ttdeci">constexpr double e</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00031">MathExtras.h:31</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00714">DenseMap.h:714</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9744a22c030d1c6a3d2f6ec14f5e0b39"><div class="ttname"><a href="namespacellvm.html#a9744a22c030d1c6a3d2f6ec14f5e0b39">llvm::ConstantFoldLoadFromUniformValue</a></div><div class="ttdeci">Constant * ConstantFoldLoadFromUniformValue(Constant *C, Type *Ty)</div><div class="ttdoc">If C is a uniform value where all bits are the same (either all zero, all ones, all undef or all pois...</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFolding_8cpp_source.html#l00757">ConstantFolding.cpp:757</a></div></div>
<div class="ttc" id="aclassllvm_1_1Evaluator_html"><div class="ttname"><a href="classllvm_1_1Evaluator.html">llvm::Evaluator</a></div><div class="ttdoc">This class evaluates LLVM IR, producing the Constant representing each SSA instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Evaluator_8h_source.html#l00037">Evaluator.h:37</a></div></div>
<div class="ttc" id="aclassllvm_1_1GetElementPtrInst_html"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html">llvm::GetElementPtrInst</a></div><div class="ttdoc">an instruction for type-safe pointer arithmetic to access elements of arrays and structs</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00940">Instructions.h:940</a></div></div>
<div class="ttc" id="aclassllvm_1_1Attribute_html_aab7ee4b8fd1d3e7e4cea87868855e60e"><div class="ttname"><a href="classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60e">llvm::Attribute::AttrKind</a></div><div class="ttdeci">AttrKind</div><div class="ttdoc">This enumeration lists the attributes that can be associated with parameters, function results,...</div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00086">Attributes.h:86</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00445">CommandLine.h:445</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8154638df88e4eaa568b67b23d463dac"><div class="ttname"><a href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a></div><div class="ttdeci">iterator_range&lt; early_inc_iterator_impl&lt; detail::IterOfRange&lt; RangeT &gt; &gt; &gt; make_early_inc_range(RangeT &amp;&amp;Range)</div><div class="ttdoc">Make a range that does early increment to allow mutation of the underlying range without disrupting i...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00721">STLExtras.h:721</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_abf73a826b5d6f739eb4af48ddf14c5b4"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#abf73a826b5d6f739eb4af48ddf14c5b4">llvm::SmallPtrSetImpl::begin</a></div><div class="ttdeci">iterator begin() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00403">SmallPtrSet.h:403</a></div></div>
<div class="ttc" id="aclassllvm_1_1PointerType_html"><div class="ttname"><a href="classllvm_1_1PointerType.html">llvm::PointerType</a></div><div class="ttdoc">Class to represent pointers.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00632">DerivedTypes.h:632</a></div></div>
<div class="ttc" id="anamespacellvm_html_acd1cd968cb420c82d70926920fcdc7d7"><div class="ttname"><a href="namespacellvm.html#acd1cd968cb420c82d70926920fcdc7d7">llvm::is_contained</a></div><div class="ttdeci">bool is_contained(R &amp;&amp;Range, const E &amp;Element)</div><div class="ttdoc">Wrapper function around std::find to detect if an element exists in a container.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01869">STLExtras.h:1869</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a687973de03d041e04b50a76d19d4fd36"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a687973de03d041e04b50a76d19d4fd36">llvm::GlobalValue::setLinkage</a></div><div class="ttdeci">void setLinkage(LinkageTypes LT)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00532">GlobalValue.h:532</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ae8f5bf5cc06f696b52c709677df00fbf"><div class="ttname"><a href="classllvm_1_1Instruction.html#ae8f5bf5cc06f696b52c709677df00fbf">llvm::Instruction::setDebugLoc</a></div><div class="ttdeci">void setDebugLoc(DebugLoc Loc)</div><div class="ttdoc">Set the debug location information for this instruction.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00355">Instruction.h:355</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_adcb86d621c23938671ad526d3bd1f9bd"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#adcb86d621c23938671ad526d3bd1f9bd">llvm::GlobalValue::isDiscardableIfUnused</a></div><div class="ttdeci">static bool isDiscardableIfUnused(LinkageTypes Linkage)</div><div class="ttdoc">Whether the definition of this global may be discarded if it is not used in its compilation unit.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00444">GlobalValue.h:444</a></div></div>
<div class="ttc" id="aIRBuilder_8h_html"><div class="ttname"><a href="IRBuilder_8h.html">IRBuilder.h</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a702d4986803a1782ba305b1c7a0f1c21"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a702d4986803a1782ba305b1c7a0f1c21">llvm::GlobalValue::getAddressSpace</a></div><div class="ttdeci">unsigned getAddressSpace() const</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00201">GlobalValue.h:201</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a49b69843927f7cd96d866768b3aec92b"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a49b69843927f7cd96d866768b3aec92b">llvm::ConstantExpr::getCast</a></div><div class="ttdeci">static Constant * getCast(unsigned ops, Constant *C, Type *Ty, bool OnlyIfReduced=false)</div><div class="ttdoc">Convenience function for getting a Cast operation.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01973">Constants.cpp:1973</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a3ba1af4b9d9faa4a33729bbbecee83d1"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a3ba1af4b9d9faa4a33729bbbecee83d1">llvm::GlobalValue::hasLocalLinkage</a></div><div class="ttdeci">bool hasLocalLinkage() const</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00523">GlobalValue.h:523</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">llvm::CmpInst::ICMP_UGE</a></div><div class="ttdeci">@ ICMP_UGE</div><div class="ttdoc">unsigned greater or equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00742">InstrTypes.h:742</a></div></div>
<div class="ttc" id="aTargetLibraryInfo_8cpp_html_aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053"><div class="ttname"><a href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a></div><div class="ttdeci">@ Ptr</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8cpp_source.html#l00062">TargetLibraryInfo.cpp:62</a></div></div>
<div class="ttc" id="aiterator__range_8h_html"><div class="ttname"><a href="iterator__range_8h.html">iterator_range.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a413abcab8dbc3900fc2fde96a5d8fca6"><div class="ttname"><a href="classllvm_1_1Value.html#a413abcab8dbc3900fc2fde96a5d8fca6">llvm::Value::use_begin</a></div><div class="ttdeci">use_iterator use_begin()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00360">Value.h:360</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_ae17d0aeb924fa0611500eb8cb09a70d9"><div class="ttname"><a href="GlobalOpt_8cpp.html#ae17d0aeb924fa0611500eb8cb09a70d9">hasUsesToReplace</a></div><div class="ttdeci">static bool hasUsesToReplace(GlobalAlias &amp;GA, const LLVMUsed &amp;U, bool &amp;RenameTarget)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l02262">GlobalOpt.cpp:2262</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayType_html_adf411edc4f135b570ab218079474ce77"><div class="ttname"><a href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">llvm::ArrayType::get</a></div><div class="ttdeci">static ArrayType * get(Type *ElementType, uint64_t NumElements)</div><div class="ttdoc">This static method is the primary way to construct an ArrayType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00640">Type.cpp:640</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_aa5d09b628a436d6957b7a0f7751bb54f"><div class="ttname"><a href="GlobalOpt_8cpp.html#aa5d09b628a436d6957b7a0f7751bb54f">StripAttr</a></div><div class="ttdeci">static AttributeList StripAttr(LLVMContext &amp;C, AttributeList Attrs, Attribute::AttrKind A)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l01713">GlobalOpt.cpp:1713</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html"><div class="ttname"><a href="classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">A Module instance is used to store all the information related to an LLVM module.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00065">Module.h:65</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_aef572ae661cf9f5b14651ef952629c10"><div class="ttname"><a href="GlobalOpt_8cpp.html#aef572ae661cf9f5b14651ef952629c10">OptimizeAwayTrappingUsesOfValue</a></div><div class="ttdeci">static bool OptimizeAwayTrappingUsesOfValue(Value *V, Constant *NewV)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l00703">GlobalOpt.cpp:703</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a7d1bb46cb6e28a5907c4185157804911"><div class="ttname"><a href="classllvm_1_1CallBase.html#a7d1bb46cb6e28a5907c4185157804911">llvm::CallBase::Create</a></div><div class="ttdeci">static CallBase * Create(CallBase *CB, ArrayRef&lt; OperandBundleDef &gt; Bundles, Instruction *InsertPt=nullptr)</div><div class="ttdoc">Create a clone of CB with a different set of operand bundles and insert it before InsertPt.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l00266">Instructions.cpp:266</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a1f475b0df44ebd7169e720fa1bf9169e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">llvm::SmallPtrSetImpl::count</a></div><div class="ttdeci">size_type count(ConstPtrType Ptr) const</div><div class="ttdoc">count - Return 1 if the specified pointer is in the set, 0 otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00383">SmallPtrSet.h:383</a></div></div>
<div class="ttc" id="aAssumeBundleBuilder_8cpp_html_afb136e0532bcaed86521b462e6538d62"><div class="ttname"><a href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a></div><div class="ttdeci">assume Assume Builder</div><div class="ttdef"><b>Definition:</b> <a href="AssumeBundleBuilder_8cpp_source.html#l00651">AssumeBundleBuilder.cpp:651</a></div></div>
<div class="ttc" id="aclassllvm_1_1ZExtInst_html"><div class="ttname"><a href="classllvm_1_1ZExtInst.html">llvm::ZExtInst</a></div><div class="ttdoc">This class represents zero extension of integer types.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l04852">Instructions.h:4852</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html"><div class="ttname"><a href="classllvm_1_1APInt.html">llvm::APInt</a></div><div class="ttdoc">Class for arbitrary precision integers.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00075">APInt.h:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_a72d928b7fc2c5f2d56c6ac0265fd9c6e"><div class="ttname"><a href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallDenseSet&lt; T, N &gt; &gt;::insert</a></div><div class="ttdeci">bool insert(const value_type &amp;X)</div><div class="ttdoc">Insert a new element into the SetVector.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00141">SetVector.h:141</a></div></div>
<div class="ttc" id="aM68kELFObjectWriter_8cpp_html_ae4a8bc3879d2282eefd72b16b12c2a37"><div class="ttname"><a href="M68kELFObjectWriter_8cpp.html#ae4a8bc3879d2282eefd72b16b12c2a37">getType</a></div><div class="ttdeci">static M68kRelType getType(unsigned Kind, MCSymbolRefExpr::VariantKind &amp;Modifier, bool &amp;IsPCRel)</div><div class="ttdef"><b>Definition:</b> <a href="M68kELFObjectWriter_8cpp_source.html#l00048">M68kELFObjectWriter.cpp:48</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_aedfa75f0c85c4aa85b257f066fbea57ca96ad6314ba9210b223b93dc3e15baf99"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca96ad6314ba9210b223b93dc3e15baf99">llvm::GlobalValue::AppendingLinkage</a></div><div class="ttdeci">@ AppendingLinkage</div><div class="ttdoc">Special purpose, only applies to global arrays.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00054">GlobalValue.h:54</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_a8bffd3c2fa90c685fc2c0e9f0787c807"><div class="ttname"><a href="GlobalOpt_8cpp.html#a8bffd3c2fa90c685fc2c0e9f0787c807">OptimizeEmptyGlobalCXXDtors</a></div><div class="ttdeci">static bool OptimizeEmptyGlobalCXXDtors(Function *CXAAtExitFn)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l02419">GlobalOpt.cpp:2419</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a4d0a7baab8d078065b2de10e3460892a"><div class="ttname"><a href="classllvm_1_1Function.html#a4d0a7baab8d078065b2de10e3460892a">llvm::Function::getIntrinsicID</a></div><div class="ttdeci">Intrinsic::ID getIntrinsicID() const LLVM_READONLY</div><div class="ttdoc">getIntrinsicID - This method returns the ID number of the specified function, or Intrinsic::not_intri...</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00204">Function.h:204</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8f2a6934eba2671f2fe2a121f2e9e4e9"><div class="ttname"><a href="namespacellvm.html#a8f2a6934eba2671f2fe2a121f2e9e4e9">llvm::ConstantFoldLoadFromConst</a></div><div class="ttdeci">Constant * ConstantFoldLoadFromConst(Constant *C, Type *Ty, const APInt &amp;Offset, const DataLayout &amp;DL)</div><div class="ttdoc">Extract value of C at the given Offset reinterpreted as Ty.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFolding_8cpp_source.html#l00698">ConstantFolding.cpp:698</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImplBase_html_a16413f1a88d8baca228d0a1b4cc0bfc6"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImplBase.html#a16413f1a88d8baca228d0a1b4cc0bfc6">llvm::SmallPtrSetImplBase::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00095">SmallPtrSet.h:95</a></div></div>
<div class="ttc" id="anamespacellvm_html_a627b2f86ac433d829482d5a5a0f50668"><div class="ttname"><a href="namespacellvm.html#a627b2f86ac433d829482d5a5a0f50668">llvm::isInstructionTriviallyDead</a></div><div class="ttdeci">bool isInstructionTriviallyDead(Instruction *I, const TargetLibraryInfo *TLI=nullptr)</div><div class="ttdoc">Return true if the result produced by the instruction is not used, and the instruction will return.</div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Utils_2Local_8cpp_source.html#l00398">Local.cpp:398</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_a960620248182018e566b095f06a605df"><div class="ttname"><a href="classllvm_1_1Constant.html#a960620248182018e566b095f06a605df">llvm::Constant::removeDeadConstantUsers</a></div><div class="ttdeci">void removeDeadConstantUsers() const</div><div class="ttdoc">If there are any dead constant users dangling off of this constant, remove them.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00710">Constants.cpp:710</a></div></div>
<div class="ttc" id="aDataLayout_8h_html"><div class="ttname"><a href="DataLayout_8h.html">DataLayout.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1StructType_html"><div class="ttname"><a href="classllvm_1_1StructType.html">llvm::StructType</a></div><div class="ttdoc">Class to represent struct types.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00213">DerivedTypes.h:213</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_adf0a129dd6c07827f4a8a5914f2d8b5b"><div class="ttname"><a href="GlobalOpt_8cpp.html#adf0a129dd6c07827f4a8a5914f2d8b5b">processInternalGlobal</a></div><div class="ttdeci">static bool processInternalGlobal(GlobalVariable *GV, const GlobalStatus &amp;GS, function_ref&lt; TargetTransformInfo &amp;(Function &amp;)&gt; GetTTI, function_ref&lt; TargetLibraryInfo &amp;(Function &amp;)&gt; GetTLI, function_ref&lt; DominatorTree &amp;(Function &amp;)&gt; LookupDomTree)</div><div class="ttdoc">Analyze the specified global variable and optimize it if possible.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l01489">GlobalOpt.cpp:1489</a></div></div>
<div class="ttc" id="aDwarf_8h_html"><div class="ttname"><a href="Dwarf_8h.html">Dwarf.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">llvm::CmpInst::ICMP_ULT</a></div><div class="ttdeci">@ ICMP_ULT</div><div class="ttdoc">unsigned less than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00743">InstrTypes.h:743</a></div></div>
<div class="ttc" id="anamespacellvm_html_a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4"><div class="ttname"><a href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">llvm::Offset</a></div><div class="ttdeci">@ Offset</div><div class="ttdef"><b>Definition:</b> <a href="DWP_8cpp_source.html#l00406">DWP.cpp:406</a></div></div>
<div class="ttc" id="aSupport_2ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdoc">Marks that the current location is not supposed to be reachable.</div><div class="ttdef"><b>Definition:</b> <a href="Support_2ErrorHandling_8h_source.html#l00143">ErrorHandling.h:143</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a6393a2d4fe7e10b28a0dcc35f881567b"><div class="ttname"><a href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const</div><div class="ttdoc">All values are typed, get the type of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00255">Value.h:255</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_adc803f628b45e58e3de84b46dd0b7d83"><div class="ttname"><a href="GlobalOpt_8cpp.html#adc803f628b45e58e3de84b46dd0b7d83">CleanupPointerRootUsers</a></div><div class="ttdeci">static bool CleanupPointerRootUsers(GlobalVariable *GV, function_ref&lt; TargetLibraryInfo &amp;(Function &amp;)&gt; GetTLI)</div><div class="ttdoc">This GV is a pointer root.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l00192">GlobalOpt.cpp:192</a></div></div>
<div class="ttc" id="aclassllvm_1_1CFGAnalyses_html"><div class="ttname"><a href="classllvm_1_1CFGAnalyses.html">llvm::CFGAnalyses</a></div><div class="ttdoc">Represents analyses that only rely on functions' control flow.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00113">PassManager.h:113</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a6a66ebb3aa12757479a3c88de77d78f8"><div class="ttname"><a href="classllvm_1_1Instruction.html#a6a66ebb3aa12757479a3c88de77d78f8">llvm::Instruction::getFunction</a></div><div class="ttdeci">const Function * getFunction() const</div><div class="ttdoc">Return the function this instruction belongs to.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00074">Instruction.cpp:74</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html_aac75aa0b7583c039e8a9d4ccae280769"><div class="ttname"><a href="classllvm_1_1Module.html#aac75aa0b7583c039e8a9d4ccae280769">llvm::Module::insertGlobalVariable</a></div><div class="ttdeci">void insertGlobalVariable(GlobalVariable *GV)</div><div class="ttdoc">Insert global variable GV at the end of the global variable list and take ownership.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00551">Module.h:551</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdoc">Change all uses of this to point to a new Value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00532">Value.cpp:532</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_aafa937ad7cb73fc0a05e6f1236953206"><div class="ttname"><a href="GlobalOpt_8cpp.html#aafa937ad7cb73fc0a05e6f1236953206">OptimizeGlobalAddressOfAllocation</a></div><div class="ttdeci">static GlobalVariable * OptimizeGlobalAddressOfAllocation(GlobalVariable *GV, CallInst *CI, uint64_t AllocSize, Constant *InitVal, const DataLayout &amp;DL, TargetLibraryInfo *TLI)</div><div class="ttdoc">This function takes the specified global variable, and transforms the program as if it always contain...</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l00860">GlobalOpt.cpp:860</a></div></div>
<div class="ttc" id="aclassuint32__t_html"><div class="ttname"><a href="classuint32__t.html">uint32_t</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbability_html"><div class="ttname"><a href="classllvm_1_1BranchProbability.html">llvm::BranchProbability</a></div><div class="ttdef"><b>Definition:</b> <a href="BranchProbability_8h_source.html#l00030">BranchProbability.h:30</a></div></div>
<div class="ttc" id="anamespacellvm_html_a39d3d23a084c4544ee5903203db10e8a"><div class="ttname"><a href="namespacellvm.html#a39d3d23a084c4544ee5903203db10e8a">llvm::append_range</a></div><div class="ttdeci">void append_range(Container &amp;C, Range &amp;&amp;R)</div><div class="ttdoc">Wrapper function to append a range to a container.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l02014">STLExtras.h:2014</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ab3fc0225d8aaf8434026c3573f961f2c"><div class="ttname"><a href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">All values hold a context through their type.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00994">Value.cpp:994</a></div></div>
<div class="ttc" id="aclassllvm_1_1ilist__node__impl_html_af719fc783be6589465137d997701a432"><div class="ttname"><a href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">llvm::ilist_node_impl::getIterator</a></div><div class="ttdeci">self_iterator getIterator()</div><div class="ttdef"><b>Definition:</b> <a href="ilist__node_8h_source.html#l00082">ilist_node.h:82</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_ad467c4ab9119043f9b7750ab986be61a"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a></div><div class="ttdeci">MachineBasicBlock MachineBasicBlock::iterator DebugLoc DL</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00076">AArch64SLSHardening.cpp:76</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_a1b45f45820a60c09244a87eb59824aec"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a></div><div class="ttdeci">add sub stmia L5 ldr r0 bl L_printf $stub Instead of a and a wouldn t it be better to do three moves *Return an aggregate type is even return S</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00210">README.txt:210</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_aacd456f21a2be87fdf19ab7e266b3a40"><div class="ttname"><a href="GlobalOpt_8cpp.html#aacd456f21a2be87fdf19ab7e266b3a40">hasInvokeCallers</a></div><div class="ttdeci">static bool hasInvokeCallers(Function *F)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l01860">GlobalOpt.cpp:1860</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_a7e0090207d4b1da753ad2d3bbb51fc4d"><div class="ttname"><a href="GlobalOpt_8cpp.html#a7e0090207d4b1da753ad2d3bbb51fc4d">hasMustTailCallers</a></div><div class="ttdeci">static bool hasMustTailCallers(Function *F)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l01846">GlobalOpt.cpp:1846</a></div></div>
<div class="ttc" id="aRISCVRedundantCopyElimination_8cpp_html_a77c69067ae8279bc00ab8757731e90d7"><div class="ttname"><a href="RISCVRedundantCopyElimination_8cpp.html#a77c69067ae8279bc00ab8757731e90d7">CC</a></div><div class="ttdeci">auto CC</div><div class="ttdef"><b>Definition:</b> <a href="RISCVRedundantCopyElimination_8cpp_source.html#l00079">RISCVRedundantCopyElimination.cpp:79</a></div></div>
<div class="ttc" id="astructllvm_1_1ObjectSizeOpts_html"><div class="ttname"><a href="structllvm_1_1ObjectSizeOpts.html">llvm::ObjectSizeOpts</a></div><div class="ttdoc">Various options to control the behavior of getObjectSize.</div><div class="ttdef"><b>Definition:</b> <a href="MemoryBuiltins_8h_source.html#l00139">MemoryBuiltins.h:139</a></div></div>
<div class="ttc" id="aclassllvm_1_1CastInst_html"><div class="ttname"><a href="classllvm_1_1CastInst.html">llvm::CastInst</a></div><div class="ttdoc">This is the base class for all instructions that perform data casts.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00428">InstrTypes.h:428</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallInst_html_ad3c897ba734b78e973db4622dff7bdcb"><div class="ttname"><a href="classllvm_1_1CallInst.html#ad3c897ba734b78e973db4622dff7bdcb">llvm::CallInst::isMustTailCall</a></div><div class="ttdeci">bool isMustTailCall() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01682">Instructions.h:1682</a></div></div>
<div class="ttc" id="aBlockFrequencyInfo_8h_html"><div class="ttname"><a href="BlockFrequencyInfo_8h.html">BlockFrequencyInfo.h</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_ab9256893dbe8440acbad9879ae65180d"><div class="ttname"><a href="GlobalOpt_8cpp.html#ab9256893dbe8440acbad9879ae65180d">isValidCandidateForColdCC</a></div><div class="ttdeci">static bool isValidCandidateForColdCC(Function &amp;F, function_ref&lt; BlockFrequencyInfo &amp;(Function &amp;)&gt; GetBFI, const std::vector&lt; Function * &gt; &amp;AllCallsCold)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l01780">GlobalOpt.cpp:1780</a></div></div>
<div class="ttc" id="aclassllvm_1_1DIVariable_html"><div class="ttname"><a href="classllvm_1_1DIVariable.html">llvm::DIVariable</a></div><div class="ttdoc">Base class for variables.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8h_source.html#l02545">DebugInfoMetadata.h:2545</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html_a93603fe0d4168b92a901f06015ecb2e7"><div class="ttname"><a href="classllvm_1_1LoadInst.html#a93603fe0d4168b92a901f06015ecb2e7">llvm::LoadInst::getOrdering</a></div><div class="ttdeci">AtomicOrdering getOrdering() const</div><div class="ttdoc">Returns the ordering constraint of this load instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00229">Instructions.h:229</a></div></div>
<div class="ttc" id="astructllvm_1_1GlobalStatus_html_abe8cd5e07daf1b2bf532174823523ee7adcbfa969dc654b5812a05827152a42c5"><div class="ttname"><a href="structllvm_1_1GlobalStatus.html#abe8cd5e07daf1b2bf532174823523ee7adcbfa969dc654b5812a05827152a42c5">llvm::GlobalStatus::InitializerStored</a></div><div class="ttdeci">@ InitializerStored</div><div class="ttdoc">This global is stored to, but the only thing stored is the constant it was initialized with.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalStatus_8h_source.html#l00048">GlobalStatus.h:48</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_acb2d690db190a509db0f44bb0b1ed20c"><div class="ttname"><a href="classllvm_1_1Function.html#acb2d690db190a509db0f44bb0b1ed20c">llvm::Function::hasAddressTaken</a></div><div class="ttdeci">bool hasAddressTaken(const User **=nullptr, bool IgnoreCallbackUses=false, bool IgnoreAssumeLikeCalls=true, bool IngoreLLVMUsed=false, bool IgnoreARCAttachedCall=false) const</div><div class="ttdoc">hasAddressTaken - returns true if there are any uses of this function other than direct calls or invo...</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l01904">Function.cpp:1904</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalAlias_html_a849b2e4fd902c501303d7fee67b076a9"><div class="ttname"><a href="classllvm_1_1GlobalAlias.html#a849b2e4fd902c501303d7fee67b076a9">llvm::GlobalAlias::getAliasee</a></div><div class="ttdeci">const Constant * getAliasee() const</div><div class="ttdef"><b>Definition:</b> <a href="GlobalAlias_8h_source.html#l00084">GlobalAlias.h:84</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_adb5c319f5905c1d3ca9eb5df546388c5"><div class="ttname"><a href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">Return a constant reference to the value's name.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00308">Value.cpp:308</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html"><div class="ttname"><a href="classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdoc">An instruction for reading from memory.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00177">Instructions.h:177</a></div></div>
<div class="ttc" id="aValueHandle_8h_html"><div class="ttname"><a href="ValueHandle_8h.html">ValueHandle.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a99f811d53704275b4158c62a2dd138d9"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const std::pair&lt; KeyT, ValueT &gt; &amp;KV)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00207">DenseMap.h:207</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_abc10b887caad109288ffceb230493a85"><div class="ttname"><a href="classllvm_1_1CallBase.html#abc10b887caad109288ffceb230493a85">llvm::CallBase::setArgOperand</a></div><div class="ttdeci">void setArgOperand(unsigned i, Value *v)</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01356">InstrTypes.h:1356</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_a0ebfdc2c511407c9ba517ccde6cad85f"><div class="ttname"><a href="classllvm_1_1Constant.html#a0ebfdc2c511407c9ba517ccde6cad85f">llvm::Constant::stripPointerCasts</a></div><div class="ttdeci">const Constant * stripPointerCasts() const</div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00213">Constant.h:213</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_a1600c7959045cb6b6a5f5a1d427ec67e"><div class="ttname"><a href="classllvm_1_1User.html#a1600c7959045cb6b6a5f5a1d427ec67e">llvm::User::replaceUsesOfWith</a></div><div class="ttdeci">bool replaceUsesOfWith(Value *From, Value *To)</div><div class="ttdoc">Replace uses of one Value with another.</div><div class="ttdef"><b>Definition:</b> <a href="User_8cpp_source.html#l00021">User.cpp:21</a></div></div>
<div class="ttc" id="aclassllvm_1_1Init_html"><div class="ttname"><a href="classllvm_1_1Init.html">llvm::Init</a></div><div class="ttdef"><b>Definition:</b> <a href="Record_8h_source.html#l00282">Record.h:282</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a7c733400ba8d113fd2976d4fea0db981"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a7c733400ba8d113fd2976d4fea0db981">llvm::GlobalValue::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdoc">This method unlinks 'this' from the containing module and deletes it.</div><div class="ttdef"><b>Definition:</b> <a href="Globals_8cpp_source.html#l00088">Globals.cpp:88</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Intrinsic_html_aefa39f6b622360ce4e947feb9f671b73"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">llvm::Intrinsic::getDeclaration</a></div><div class="ttdeci">Function * getDeclaration(Module *M, ID id, ArrayRef&lt; Type * &gt; Tys=std::nullopt)</div><div class="ttdoc">Create or insert an LLVM Function declaration for an intrinsic, and return it.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l01502">Function.cpp:1502</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a966eb231e7d4e572874d2cb49b18faea"><div class="ttname"><a href="classllvm_1_1Value.html#a966eb231e7d4e572874d2cb49b18faea">llvm::Value::stripPointerCasts</a></div><div class="ttdeci">const Value * stripPointerCasts() const</div><div class="ttdoc">Strip off pointer casts, all-zero GEPs and address space casts.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00685">Value.cpp:685</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_aa7cce62ac5cc6df09cce0535874336b7"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">llvm::ConstantInt::getFalse</a></div><div class="ttdeci">static ConstantInt * getFalse(LLVMContext &amp;Context)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00842">Constants.cpp:842</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_ac2417a3c6edd0db7a9ad84b82c4054b7"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#ac2417a3c6edd0db7a9ad84b82c4054b7">llvm::GlobalValue::getUnnamedAddr</a></div><div class="ttdeci">UnnamedAddr getUnnamedAddr() const</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00224">GlobalValue.h:224</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html_a936739514bcdb01ddd2826fa70cf15a5"><div class="ttname"><a href="classllvm_1_1MDNode.html#a936739514bcdb01ddd2826fa70cf15a5">llvm::MDNode::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l01107">Metadata.h:1107</a></div></div>
<div class="ttc" id="aCallingConv_8h_html"><div class="ttname"><a href="CallingConv_8h.html">CallingConv.h</a></div></div>
<div class="ttc" id="aAttributes_8h_html"><div class="ttname"><a href="Attributes_8h.html">Attributes.h</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_a7dcd20a58f4b086972bdf831bf7cf689"><div class="ttname"><a href="GlobalOpt_8cpp.html#a7dcd20a58f4b086972bdf831bf7cf689">cxxDtorIsEmpty</a></div><div class="ttdeci">static bool cxxDtorIsEmpty(const Function &amp;Fn)</div><div class="ttdoc">Returns whether the given function is an empty C++ destructor and can therefore be eliminated.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l02403">GlobalOpt.cpp:2403</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_a8d20a7c0aa0ef76c738e2ca9e21d35d5"><div class="ttname"><a href="GlobalOpt_8cpp.html#a8d20a7c0aa0ef76c738e2ca9e21d35d5">OptimizeGlobalVars</a></div><div class="ttdeci">static bool OptimizeGlobalVars(Module &amp;M, function_ref&lt; TargetTransformInfo &amp;(Function &amp;)&gt; GetTTI, function_ref&lt; TargetLibraryInfo &amp;(Function &amp;)&gt; GetTLI, function_ref&lt; DominatorTree &amp;(Function &amp;)&gt; LookupDomTree, SmallPtrSetImpl&lt; const Comdat * &gt; &amp;NotDiscardableComdats)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l02069">GlobalOpt.cpp:2069</a></div></div>
<div class="ttc" id="aConstant_8h_html"><div class="ttname"><a href="Constant_8h.html">Constant.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Twine_html"><div class="ttname"><a href="classllvm_1_1Twine.html">llvm::Twine</a></div><div class="ttdoc">Twine - A lightweight data structure for efficiently representing the concatenation of temporary valu...</div><div class="ttdef"><b>Definition:</b> <a href="Twine_8h_source.html#l00081">Twine.h:81</a></div></div>
<div class="ttc" id="aclassllvm_1_1DIExpression_html_af3a48df3735933cf1621760019e5fd8c"><div class="ttname"><a href="classllvm_1_1DIExpression.html#af3a48df3735933cf1621760019e5fd8c">llvm::DIExpression::prependOpcodes</a></div><div class="ttdeci">static DIExpression * prependOpcodes(const DIExpression *Expr, SmallVectorImpl&lt; uint64_t &gt; &amp;Ops, bool StackValue=false, bool EntryValue=false)</div><div class="ttdoc">Prepend DIExpr with the given opcodes and optionally turn it into a stack value.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8cpp_source.html#l01708">DebugInfoMetadata.cpp:1708</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_a31232d0640fc51e777d8e48e48f45c89"><div class="ttname"><a href="GlobalOpt_8cpp.html#a31232d0640fc51e777d8e48e48f45c89">hasMoreThanOneUseOtherThanLLVMUsed</a></div><div class="ttdeci">static bool hasMoreThanOneUseOtherThanLLVMUsed(GlobalValue &amp;V, const LLVMUsed &amp;U)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l02244">GlobalOpt.cpp:2244</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html">llvm::ConstantExpr</a></div><div class="ttdoc">A constant value that is initialized with an expression using other constant values.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00998">Constants.h:998</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a82dbbd8e3688b0bc1eedb338864d0d0c"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">llvm::ConstantInt::getTrue</a></div><div class="ttdeci">static ConstantInt * getTrue(LLVMContext &amp;Context)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00835">Constants.cpp:835</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PPC_html_a40c2294c9ecba721df7f29aaf05157d8"><div class="ttname"><a href="namespacellvm_1_1PPC.html#a40c2294c9ecba721df7f29aaf05157d8">llvm::PPC::getPredicate</a></div><div class="ttdeci">Predicate getPredicate(unsigned Condition, unsigned Hint)</div><div class="ttdoc">Return predicate consisting of specified condition and hint bits.</div><div class="ttdef"><b>Definition:</b> <a href="PPCPredicates_8h_source.html#l00087">PPCPredicates.h:87</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_aa6574d526b3e38a28f688a7bb4325c2c"><div class="ttname"><a href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">llvm::Constant::getNullValue</a></div><div class="ttdeci">static Constant * getNullValue(Type *Ty)</div><div class="ttdoc">Constructor to create a '0' constant of arbitrary type.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00356">Constants.cpp:356</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a838fded9375bdf5078b6853449ee44f5"><div class="ttname"><a href="classllvm_1_1Function.html#a838fded9375bdf5078b6853449ee44f5">llvm::Function::removeAttributeAtIndex</a></div><div class="ttdeci">void removeAttributeAtIndex(unsigned i, Attribute::AttrKind Kind)</div><div class="ttdoc">removes the attribute from the list of attributes.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00590">Function.cpp:590</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_acd2fbee42afeb868be98aaae56528636"><div class="ttname"><a href="classllvm_1_1Value.html#acd2fbee42afeb868be98aaae56528636">llvm::Value::user_iterator</a></div><div class="ttdeci">user_iterator_impl&lt; User &gt; user_iterator</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00390">Value.h:390</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_ad9ef9dbac3fbf9cc30e63d86bf9d7e34"><div class="ttname"><a href="GlobalOpt_8cpp.html#ad9ef9dbac3fbf9cc30e63d86bf9d7e34">compareNames</a></div><div class="ttdeci">static int compareNames(Constant *const *A, Constant *const *B)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l02132">GlobalOpt.cpp:2132</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_aabf6932ed41fc64e17c0030c44eda44e"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aabf6932ed41fc64e17c0030c44eda44e">llvm::GlobalValue::isInterposableLinkage</a></div><div class="ttdeci">static bool isInterposableLinkage(LinkageTypes Linkage)</div><div class="ttdoc">Whether the definition of this global may be replaced by something non-equivalent at link time.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00420">GlobalValue.h:420</a></div></div>
<div class="ttc" id="aclassllvm_1_1StructType_html_a00f58a2c7676e4990e21efe7fdafc74d"><div class="ttname"><a href="classllvm_1_1StructType.html#a00f58a2c7676e4990e21efe7fdafc74d">llvm::StructType::elements</a></div><div class="ttdeci">ArrayRef&lt; Type * &gt; elements() const</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00319">DerivedTypes.h:319</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1SendMsg_html_a8594419a4ddfad2c9a79279c490e466d"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">llvm::AMDGPU::SendMsg::Op</a></div><div class="ttdeci">Op</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00357">SIDefines.h:357</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_a1258a1ff55557c27684010ebd7283712"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">llvm::PreservedAnalyses::all</a></div><div class="ttdeci">static PreservedAnalyses all()</div><div class="ttdoc">Construct a special preserved set that preserves all passes.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00158">PassManager.h:158</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_afe7d477c6022fe7123b90e3b39c58e69"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#afe7d477c6022fe7123b90e3b39c58e69">llvm::ConstantInt::getBool</a></div><div class="ttdeci">static ConstantInt * getBool(LLVMContext &amp;Context, bool V)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00849">Constants.cpp:849</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a5e9e1c0dd93557be1b4ad72860f3cbdaa98aa825426dd4de2d19a3de9983a2d5d"><div class="ttname"><a href="classllvm_1_1Type.html#a5e9e1c0dd93557be1b4ad72860f3cbdaa98aa825426dd4de2d19a3de9983a2d5d">llvm::Type::FixedVectorTyID</a></div><div class="ttdeci">@ FixedVectorTyID</div><div class="ttdoc">Fixed width SIMD vector type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00076">Type.h:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_adde2ea00dd2613ee41bfe91908e4e68e"><div class="ttname"><a href="classllvm_1_1CallBase.html#adde2ea00dd2613ee41bfe91908e4e68e">llvm::CallBase::arg_size</a></div><div class="ttdeci">unsigned arg_size() const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01349">InstrTypes.h:1349</a></div></div>
<div class="ttc" id="aGlobalVariable_8h_html"><div class="ttname"><a href="GlobalVariable_8h.html">GlobalVariable.h</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_abf4eceb96c86c97477d4bcf8eec661e5"><div class="ttname"><a href="GlobalOpt_8cpp.html#abf4eceb96c86c97477d4bcf8eec661e5">EvaluateStaticConstructor</a></div><div class="ttdeci">static bool EvaluateStaticConstructor(Function *F, const DataLayout &amp;DL, TargetLibraryInfo *TLI)</div><div class="ttdoc">Evaluate static constructors in the function, if we can.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l02104">GlobalOpt.cpp:2104</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a43721e1e88567116e8fca545125d86bf"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a43721e1e88567116e8fca545125d86bf">llvm::GlobalValue::getComdat</a></div><div class="ttdeci">const Comdat * getComdat() const</div><div class="ttdef"><b>Definition:</b> <a href="Globals_8cpp_source.html#l00185">Globals.cpp:185</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_a8e68884ca018dde6dfadf535637290d0"><div class="ttname"><a href="GlobalOpt_8cpp.html#a8e68884ca018dde6dfadf535637290d0">allUsesOfLoadAndStores</a></div><div class="ttdeci">static void allUsesOfLoadAndStores(GlobalVariable *GV, SmallVector&lt; Value *, 4 &gt; &amp;Uses)</div><div class="ttdoc">Get all the loads/store uses for global variable GV.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l00684">GlobalOpt.cpp:684</a></div></div>
<div class="ttc" id="aCasting_8h_html"><div class="ttname"><a href="Casting_8h.html">Casting.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a2787d1134842ab0b9be8694d95ccbdd7"><div class="ttname"><a href="namespacellvm.html#a2787d1134842ab0b9be8694d95ccbdd7">llvm::isRemovableAlloc</a></div><div class="ttdeci">bool isRemovableAlloc(const CallBase *V, const TargetLibraryInfo *TLI)</div><div class="ttdoc">Return true if this is a call to an allocation function that does not have side effects that we are r...</div><div class="ttdef"><b>Definition:</b> <a href="MemoryBuiltins_8cpp_source.html#l00330">MemoryBuiltins.cpp:330</a></div></div>
<div class="ttc" id="aFunction_8h_html"><div class="ttname"><a href="Function_8h.html">Function.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a3d95cc2d359b8d9ed5bd9504b44930b5"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a3d95cc2d359b8d9ed5bd9504b44930b5">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::size</a></div><div class="ttdeci">unsigned size() const</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00099">DenseMap.h:99</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a3712279d70deeec90a93db09deb12d02"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a3712279d70deeec90a93db09deb12d02">llvm::CmpInst::isSigned</a></div><div class="ttdeci">bool isSigned() const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00957">InstrTypes.h:957</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLibraryInfo_html"><div class="ttname"><a href="classllvm_1_1TargetLibraryInfo.html">llvm::TargetLibraryInfo</a></div><div class="ttdoc">Provides information about what library functions are available for the current target.</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00234">TargetLibraryInfo.h:234</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantArray_html_a0900dacdc7ad8e3ea0cc92993c7fd422"><div class="ttname"><a href="classllvm_1_1ConstantArray.html#a0900dacdc7ad8e3ea0cc92993c7fd422">llvm::ConstantArray::get</a></div><div class="ttdeci">static Constant * get(ArrayType *T, ArrayRef&lt; Constant * &gt; V)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01249">Constants.cpp:1249</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00614">SmallVector.h:614</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_a5f0b988151a1682c86951f993be18db5"><div class="ttname"><a href="GlobalOpt_8cpp.html#a5f0b988151a1682c86951f993be18db5">makeAllConstantUsesInstructions</a></div><div class="ttdeci">static void makeAllConstantUsesInstructions(Constant *C)</div><div class="ttdoc">C may have non-instruction users, and allNonInstructionUsersCanBeMadeInstructions has returned true.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l01422">GlobalOpt.cpp:1422</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a7ac9329ef7292ee640d87f45ce7ae05c"><div class="ttname"><a href="classllvm_1_1CallBase.html#a7ac9329ef7292ee640d87f45ce7ae05c">llvm::CallBase::getCalledOperand</a></div><div class="ttdeci">Value * getCalledOperand() const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01399">InstrTypes.h:1399</a></div></div>
<div class="ttc" id="aclassllvm_1_1BlockFrequencyInfo_html_ab8b72c18add22acd827f7a6cd1ff1bff"><div class="ttname"><a href="classllvm_1_1BlockFrequencyInfo.html#ab8b72c18add22acd827f7a6cd1ff1bff">llvm::BlockFrequencyInfo::getBlockFreq</a></div><div class="ttdeci">BlockFrequency getBlockFreq(const BasicBlock *BB) const</div><div class="ttdoc">getblockFreq - Return block frequency.</div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequencyInfo_8cpp_source.html#l00203">BlockFrequencyInfo.cpp:203</a></div></div>
<div class="ttc" id="aclassllvm_1_1DIGlobalVariableExpression_html"><div class="ttname"><a href="classllvm_1_1DIGlobalVariableExpression.html">llvm::DIGlobalVariableExpression</a></div><div class="ttdoc">A pair of DIGlobalVariable and DIExpression.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8h_source.html#l03470">DebugInfoMetadata.h:3470</a></div></div>
<div class="ttc" id="aGlobalAlias_8h_html"><div class="ttname"><a href="GlobalAlias_8h.html">GlobalAlias.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalOptPass_html_a0be1afba37502be6858f2a1c38955be8"><div class="ttname"><a href="classllvm_1_1GlobalOptPass.html#a0be1afba37502be6858f2a1c38955be8">llvm::GlobalOptPass::run</a></div><div class="ttdeci">PreservedAnalyses run(Module &amp;M, ModuleAnalysisManager &amp;AM)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l02530">GlobalOpt.cpp:2530</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_ad70fe60b7ed052c6a74863944b518251"><div class="ttname"><a href="classllvm_1_1CallBase.html#ad70fe60b7ed052c6a74863944b518251">llvm::CallBase::setCalledOperand</a></div><div class="ttdeci">void setCalledOperand(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01442">InstrTypes.h:1442</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_a6989fb54b0ff045520a716621e13067d"><div class="ttname"><a href="GlobalOpt_8cpp.html#a6989fb54b0ff045520a716621e13067d">transferSRADebugInfo</a></div><div class="ttdeci">static void transferSRADebugInfo(GlobalVariable *GV, GlobalVariable *NGV, uint64_t FragmentOffsetInBits, uint64_t FragmentSizeInBits, uint64_t VarSize)</div><div class="ttdoc">Copy over the debug info for a variable to its SRA replacements.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l00402">GlobalOpt.cpp:402</a></div></div>
<div class="ttc" id="anamespacellvm_html_a71b27c25d18516bdcb3f3a44ebf6185b"><div class="ttname"><a href="namespacellvm.html#a71b27c25d18516bdcb3f3a44ebf6185b">llvm::optimizeGlobalCtorsList</a></div><div class="ttdeci">bool optimizeGlobalCtorsList(Module &amp;M, function_ref&lt; bool(uint32_t, Function *)&gt; ShouldRemove)</div><div class="ttdoc">Call &quot;ShouldRemove&quot; for every entry in M's global_ctor list and remove the entries for which it retur...</div><div class="ttdef"><b>Definition:</b> <a href="CtorUtils_8cpp_source.html#l00113">CtorUtils.cpp:113</a></div></div>
<div class="ttc" id="astructllvm_1_1GlobalStatus_html_abe8cd5e07daf1b2bf532174823523ee7aecd55f74522361f4b8056f8b6b745699"><div class="ttname"><a href="structllvm_1_1GlobalStatus.html#abe8cd5e07daf1b2bf532174823523ee7aecd55f74522361f4b8056f8b6b745699">llvm::GlobalStatus::StoredOnce</a></div><div class="ttdeci">@ StoredOnce</div><div class="ttdoc">This global is stored to, but only its initializer and one other value is ever stored to it.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalStatus_8h_source.html#l00054">GlobalStatus.h:54</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeAnalysis_html"><div class="ttname"><a href="classllvm_1_1DominatorTreeAnalysis.html">llvm::DominatorTreeAnalysis</a></div><div class="ttdoc">Analysis pass which computes a DominatorTree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00279">Dominators.h:279</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_af457a58a84b500d44feb7b699aa43ec1"><div class="ttname"><a href="classllvm_1_1Function.html#af457a58a84b500d44feb7b699aa43ec1">llvm::Function::isVarArg</a></div><div class="ttdeci">bool isVarArg() const</div><div class="ttdoc">isVarArg - Return true if this function takes a variable number of arguments.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00187">Function.h:187</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a5e9e1c0dd93557be1b4ad72860f3cbdaa812a573d23fbb37aacd025e2a0588156"><div class="ttname"><a href="classllvm_1_1Type.html#a5e9e1c0dd93557be1b4ad72860f3cbdaa812a573d23fbb37aacd025e2a0588156">llvm::Type::StructTyID</a></div><div class="ttdeci">@ StructTyID</div><div class="ttdoc">Structures.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00074">Type.h:74</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_a26f6a2c21d213fbcbe99a2c09d88a2c4"><div class="ttname"><a href="GlobalOpt_8cpp.html#a26f6a2c21d213fbcbe99a2c09d88a2c4">allUsesOfLoadedValueWillTrapIfNull</a></div><div class="ttdeci">static bool allUsesOfLoadedValueWillTrapIfNull(const GlobalVariable *GV)</div><div class="ttdoc">Return true if all uses of any loads from GV will trap if the loaded value is null.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l00654">GlobalOpt.cpp:654</a></div></div>
<div class="ttc" id="aInstructions_8h_html"><div class="ttname"><a href="Instructions_8h.html">Instructions.h</a></div></div>
<div class="ttc" id="aGlobalOpt_8h_html"><div class="ttname"><a href="GlobalOpt_8h.html">GlobalOpt.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_a937c42f77e161349ce0f999e448c7027"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#a937c42f77e161349ce0f999e448c7027">llvm::PreservedAnalyses::preserveSet</a></div><div class="ttdeci">void preserveSet()</div><div class="ttdoc">Mark an analysis set as preserved.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00188">PassManager.h:188</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a28bf8984fbfb08fd27df435e631e6832"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a28bf8984fbfb08fd27df435e631e6832">llvm::ConstantExpr::getPointerBitCastOrAddrSpaceCast</a></div><div class="ttdeci">static Constant * getPointerBitCastOrAddrSpaceCast(Constant *C, Type *Ty)</div><div class="ttdoc">Create a BitCast or AddrSpaceCast for a pointer type depending on the address space.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02056">Constants.cpp:2056</a></div></div>
<div class="ttc" id="aSmallVector_8h_html"><div class="ttname"><a href="SmallVector_8h.html">SmallVector.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ab4f3bf98b5054831b608852e33427814"><div class="ttname"><a href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">llvm::Instruction::getDebugLoc</a></div><div class="ttdeci">const DebugLoc &amp; getDebugLoc() const</div><div class="ttdoc">Return the debug location for this node as a DebugLoc.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00358">Instruction.h:358</a></div></div>
<div class="ttc" id="aUser_8h_html"><div class="ttname"><a href="User_8h.html">User.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalVariable_html_aa859e108741fa64681b63f0c0c672512"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html#aa859e108741fa64681b63f0c0c672512">llvm::GlobalVariable::isConstant</a></div><div class="ttdeci">bool isConstant() const</div><div class="ttdoc">If the value is a global constant, its value is immutable throughout the runtime execution of the pro...</div><div class="ttdef"><b>Definition:</b> <a href="GlobalVariable_8h_source.html#l00152">GlobalVariable.h:152</a></div></div>
<div class="ttc" id="aREADME-SSE_8txt_html_aae2d2977835e891eef9c1569d44462d7"><div class="ttname"><a href="README-SSE_8txt.html#aae2d2977835e891eef9c1569d44462d7">used</a></div><div class="ttdeci">This might compile to this xmm1 xorps xmm0 movss xmm0 ret Now consider if the code caused xmm1 to get spilled This might produce this xmm1 movaps xmm0 movaps xmm1 movss xmm0 ret since the reload is only used by these we could fold it into the producing something like xmm1 movaps xmm0 ret saving two instructions The basic idea is that a reload from a spill if only one byte chunk is used</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00270">README-SSE.txt:270</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">llvm::CmpInst::ICMP_UGT</a></div><div class="ttdeci">@ ICMP_UGT</div><div class="ttdoc">unsigned greater than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00741">InstrTypes.h:741</a></div></div>
<div class="ttc" id="aDominators_8h_html"><div class="ttname"><a href="Dominators_8h.html">Dominators.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_ab2caa29167597390ab2fc3cf30d70389"><div class="ttname"><a href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">llvm::CallBase::getArgOperand</a></div><div class="ttdeci">Value * getArgOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01351">InstrTypes.h:1351</a></div></div>
<div class="ttc" id="aregcomp_8c_html_a0240ac851181b84ac374872dc5434ee4"><div class="ttname"><a href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></div><div class="ttdeci">#define N</div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_a02c022baa01fdb4920060a670898b55a"><div class="ttname"><a href="GlobalOpt_8cpp.html#a02c022baa01fdb4920060a670898b55a">IsSafeComputationToRemove</a></div><div class="ttdeci">static bool IsSafeComputationToRemove(Value *V, function_ref&lt; TargetLibraryInfo &amp;(Function &amp;)&gt; GetTLI)</div><div class="ttdoc">Given a value that is stored to a global but never read, determine whether it's safe to remove the st...</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l00161">GlobalOpt.cpp:161</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a1a7f07aaef6a3bee130bf0e0f0536802"><div class="ttname"><a href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00090">Instruction.h:90</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a0c8ffe664a36e30d49c84d0aded2fe08"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">llvm::SmallVectorImpl::pop_back_val</a></div><div class="ttdeci">T pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00677">SmallVector.h:677</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_aa7414ba9f658ff1287d22a4b8fe81bcb"><div class="ttname"><a href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">llvm::CmpInst::getPredicate</a></div><div class="ttdeci">Predicate getPredicate() const</div><div class="ttdoc">Return the predicate for this instruction.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00808">InstrTypes.h:808</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_a5a50ba4ab5027d4013cf6bc2edf66085"><div class="ttname"><a href="GlobalOpt_8cpp.html#a5a50ba4ab5027d4013cf6bc2edf66085">deleteIfDead</a></div><div class="ttdeci">static bool deleteIfDead(GlobalValue &amp;GV, SmallPtrSetImpl&lt; const Comdat * &gt; &amp;NotDiscardableComdats, function_ref&lt; void(Function &amp;)&gt; DeleteFnCallback=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l01286">GlobalOpt.cpp:1286</a></div></div>
<div class="ttc" id="aIVUsers_8cpp_html_a4e5b9edb51eec9dbca592075eb64dfcb"><div class="ttname"><a href="IVUsers_8cpp.html#a4e5b9edb51eec9dbca592075eb64dfcb">Users</a></div><div class="ttdeci">iv Induction Variable Users</div><div class="ttdef"><b>Definition:</b> <a href="IVUsers_8cpp_source.html#l00048">IVUsers.cpp:48</a></div></div>
<div class="ttc" id="aTargetTransformInfo_8h_html"><div class="ttname"><a href="TargetTransformInfo_8h.html">TargetTransformInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1iterator__range_html"><div class="ttname"><a href="classllvm_1_1iterator__range.html">llvm::iterator_range</a></div><div class="ttdoc">A range adaptor for a pair of iterators.</div><div class="ttdef"><b>Definition:</b> <a href="iterator__range_8h_source.html#l00030">iterator_range.h:30</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html"><div class="ttname"><a href="classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02708">Instructions.h:2708</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_ad15d45b871d3111e8da4f9b394d7c83f"><div class="ttname"><a href="GlobalOpt_8cpp.html#ad15d45b871d3111e8da4f9b394d7c83f">forwardStoredOnceStore</a></div><div class="ttdeci">static bool forwardStoredOnceStore(GlobalVariable *GV, const StoreInst *StoredOnceStore, function_ref&lt; DominatorTree &amp;(Function &amp;)&gt; LookupDomTree)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l01453">GlobalOpt.cpp:1453</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5e655fd99a56d50b071fc26d8db5fd5b"><div class="ttname"><a href="namespacellvm.html#a5e655fd99a56d50b071fc26d8db5fd5b">llvm::ConstantFoldConstant</a></div><div class="ttdeci">Constant * ConstantFoldConstant(const Constant *C, const DataLayout &amp;DL, const TargetLibraryInfo *TLI=nullptr)</div><div class="ttdoc">ConstantFoldConstant - Fold the constant using the specified DataLayout.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFolding_8cpp_source.html#l01203">ConstantFolding.cpp:1203</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html"><div class="ttname"><a href="classllvm_1_1CallBase.html">llvm::CallBase</a></div><div class="ttdoc">Base class for all callable instructions (InvokeInst and CallInst) Holds everything related to callin...</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01184">InstrTypes.h:1184</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a5e9e1c0dd93557be1b4ad72860f3cbdaa6188e4e2fb839d904debf0cbe7fc11f6"><div class="ttname"><a href="classllvm_1_1Type.html#a5e9e1c0dd93557be1b4ad72860f3cbdaa6188e4e2fb839d904debf0cbe7fc11f6">llvm::Type::ScalableVectorTyID</a></div><div class="ttdeci">@ ScalableVectorTyID</div><div class="ttdoc">Scalable SIMD vector type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00077">Type.h:77</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a92041fc7f781ba4fe708eec99139b72f"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a92041fc7f781ba4fe708eec99139b72f">llvm::GlobalValue::getType</a></div><div class="ttdeci">PointerType * getType() const</div><div class="ttdoc">Global values are always pointers.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00290">GlobalValue.h:290</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html_a6d883605206368bc536cc9ded97209b8"><div class="ttname"><a href="classllvm_1_1Module.html#a6d883605206368bc536cc9ded97209b8">llvm::Module::getDataLayout</a></div><div class="ttdeci">const DataLayout &amp; getDataLayout() const</div><div class="ttdoc">Get the data layout for the module's target platform.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8cpp_source.html#l00398">Module.cpp:398</a></div></div>
<div class="ttc" id="aDerivedTypes_8h_html"><div class="ttname"><a href="DerivedTypes_8h.html">DerivedTypes.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html">llvm::SmallPtrSetImpl&lt; const PHINode * &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallSetVector_html"><div class="ttname"><a href="classllvm_1_1SmallSetVector.html">llvm::SmallSetVector</a></div><div class="ttdoc">A SetVector that performs no allocations if smaller than a certain size.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00300">SetVector.h:300</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html">llvm::AnalysisManager</a></div><div class="ttdoc">A container for analyses that lazily runs them and caches their results.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00042">InstructionSimplify.h:42</a></div></div>
<div class="ttc" id="anamespacellvm_html_aee44336886a06f3c1b8c35c701ba8316"><div class="ttname"><a href="namespacellvm.html#aee44336886a06f3c1b8c35c701ba8316">llvm::getLoadStorePointerOperand</a></div><div class="ttdeci">const Value * getLoadStorePointerOperand(const Value *V)</div><div class="ttdoc">A helper function that returns the pointer operand of a load or store instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l05363">Instructions.h:5363</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a29e0b1c558b350347e2652b35b26fea8"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a29e0b1c558b350347e2652b35b26fea8">llvm::GlobalValue::getValueType</a></div><div class="ttdeci">Type * getValueType() const</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00292">GlobalValue.h:292</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerAnalysisManagerProxy_html"><div class="ttname"><a href="classllvm_1_1InnerAnalysisManagerProxy.html">llvm::InnerAnalysisManagerProxy</a></div><div class="ttdoc">An analysis over an &quot;outer&quot; IR unit that provides access to an analysis manager over an &quot;inner&quot; IR un...</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00931">PassManager.h:931</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallInst_html"><div class="ttname"><a href="classllvm_1_1CallInst.html">llvm::CallInst</a></div><div class="ttdoc">This class represents a function call, abstracting a target machine's calling convention.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01485">Instructions.h:1485</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="aHexagonCommonGEP_8cpp_html_ad532e8710e50302e0a376b61c91fa91d"><div class="ttname"><a href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a></div><div class="ttdeci">Hexagon Common GEP</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCommonGEP_8cpp_source.html#l00171">HexagonCommonGEP.cpp:171</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ae855357b6c5e6e7ed1869272708a3a84"><div class="ttname"><a href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">llvm::Value::takeName</a></div><div class="ttdeci">void takeName(Value *V)</div><div class="ttdoc">Transfer the name from V to this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00381">Value.cpp:381</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalObject_html_a49b398b1c83ef4d42c8f7756b443f61f"><div class="ttname"><a href="classllvm_1_1GlobalObject.html#a49b398b1c83ef4d42c8f7756b443f61f">llvm::GlobalObject::setAlignment</a></div><div class="ttdeci">void setAlignment(Align Align)</div><div class="ttdoc">Sets the alignment attribute of the GlobalObject.</div><div class="ttdef"><b>Definition:</b> <a href="Globals_8cpp_source.html#l00130">Globals.cpp:130</a></div></div>
<div class="ttc" id="aclassllvm_1_1AllocaInst_html"><div class="ttname"><a href="classllvm_1_1AllocaInst.html">llvm::AllocaInst</a></div><div class="ttdoc">an instruction to allocate memory on the stack</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00058">Instructions.h:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_abe1de1520a21f77ac57cc210bf0fb0b4"><div class="ttname"><a href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00169">User.h:169</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00411">CommandLine.h:411</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RegState_html_aef4cc0c855dc833e2a9d58a50703320da2fee1a7db4e84247a193a9af1f907013"><div class="ttname"><a href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da2fee1a7db4e84247a193a9af1f907013">llvm::RegState::Dead</a></div><div class="ttdeci">@ Dead</div><div class="ttdoc">Unused definition.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00050">MachineInstrBuilder.h:50</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab6be6270337c6f7620007555247401ce"><div class="ttname"><a href="namespacellvm.html#ab6be6270337c6f7620007555247401ce">llvm::ConstantFoldInstruction</a></div><div class="ttdeci">Constant * ConstantFoldInstruction(Instruction *I, const DataLayout &amp;DL, const TargetLibraryInfo *TLI=nullptr)</div><div class="ttdoc">ConstantFoldInstruction - Try to constant fold the specified instruction.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFolding_8cpp_source.html#l01155">ConstantFolding.cpp:1155</a></div></div>
<div class="ttc" id="araw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalVariable_html_a22e076c4cf000eba885dd00048641c6f"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html#a22e076c4cf000eba885dd00048641c6f">llvm::GlobalVariable::removeFromParent</a></div><div class="ttdeci">void removeFromParent()</div><div class="ttdoc">removeFromParent - This method unlinks 'this' from the containing module, but does not delete it.</div><div class="ttdef"><b>Definition:</b> <a href="Globals_8cpp_source.html#l00464">Globals.cpp:464</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7b03ed78a8e299bde6d26a8793cd4e06"><div class="ttname"><a href="namespacellvm.html#a7b03ed78a8e299bde6d26a8793cd4e06">llvm::NullPointerIsDefined</a></div><div class="ttdeci">bool NullPointerIsDefined(const Function *F, unsigned AS=0)</div><div class="ttdoc">Check whether null pointer dereferencing is considered undefined behavior for a given function or an ...</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l02136">Function.cpp:2136</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a5b166ae228ebbfdb96736d6022f3feeda94ec9273479164e4aec1d5d91b71dc85"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feeda94ec9273479164e4aec1d5d91b71dc85">llvm::CallingConv::Cold</a></div><div class="ttdeci">@ Cold</div><div class="ttdoc">Attempts to make code in the caller as efficient as possible under the assumption that the call is no...</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00047">CallingConv.h:47</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a499ea32ca1b8d16cedfe01d1e5b08f29"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a499ea32ca1b8d16cedfe01d1e5b08f29">llvm::SmallVectorImpl::reserve</a></div><div class="ttdeci">void reserve(size_type N)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00667">SmallVector.h:667</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a19db81b6f3d3ab342972dce7756fb077"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a19db81b6f3d3ab342972dce7756fb077">llvm::GlobalValue::isDSOLocal</a></div><div class="ttdeci">bool isDSOLocal() const</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00301">GlobalValue.h:301</a></div></div>
<div class="ttc" id="anamespacellvm_1_1X86AS_html_aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730"><div class="ttname"><a href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730">llvm::X86AS::GS</a></div><div class="ttdeci">@ GS</div><div class="ttdef"><b>Definition:</b> <a href="X86_8h_source.html#l00200">X86.h:200</a></div></div>
<div class="ttc" id="aValue_8h_html"><div class="ttname"><a href="Value_8h.html">Value.h</a></div></div>
<div class="ttc" id="aInitializePasses_8h_html"><div class="ttname"><a href="InitializePasses_8h.html">InitializePasses.h</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_ab683b00fa6256a0ceabc698614a428e7"><div class="ttname"><a href="GlobalOpt_8cpp.html#ab683b00fa6256a0ceabc698614a428e7">hasOnlyColdCalls</a></div><div class="ttdeci">static bool hasOnlyColdCalls(Function &amp;F, function_ref&lt; BlockFrequencyInfo &amp;(Function &amp;)&gt; GetBFI)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l01814">GlobalOpt.cpp:1814</a></div></div>
<div class="ttc" id="anamespacellvm_html_abca8e2c525d8162fbcbb5b444cf04d21"><div class="ttname"><a href="namespacellvm.html#abca8e2c525d8162fbcbb5b444cf04d21">llvm::RecursivelyDeleteTriviallyDeadInstructionsPermissive</a></div><div class="ttdeci">bool RecursivelyDeleteTriviallyDeadInstructionsPermissive(SmallVectorImpl&lt; WeakTrackingVH &gt; &amp;DeadInsts, const TargetLibraryInfo *TLI=nullptr, MemorySSAUpdater *MSSAU=nullptr, std::function&lt; void(Value *)&gt; AboutToDeleteCallback=std::function&lt; void(Value *)&gt;())</div><div class="ttdoc">Same functionality as RecursivelyDeleteTriviallyDeadInstructions, but allow instructions that are not...</div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Utils_2Local_8cpp_source.html#l00552">Local.cpp:552</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00074">Value.h:74</a></div></div>
<div class="ttc" id="aDebug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLibraryAnalysis_html"><div class="ttname"><a href="classllvm_1_1TargetLibraryAnalysis.html">llvm::TargetLibraryAnalysis</a></div><div class="ttdoc">Analysis pass providing the TargetLibraryInfo.</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00540">TargetLibraryInfo.h:540</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ab4e0512c7e1c7adaa56677e3155685f1"><div class="ttname"><a href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">llvm::Value::users</a></div><div class="ttdeci">iterator_range&lt; user_iterator &gt; users()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00421">Value.h:421</a></div></div>
<div class="ttc" id="aclassllvm_1_1DIVariable_html_af27f1f9907c33324df8c8322573ac718"><div class="ttname"><a href="classllvm_1_1DIVariable.html#af27f1f9907c33324df8c8322573ac718">llvm::DIVariable::getType</a></div><div class="ttdeci">DIType * getType() const</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8h_source.html#l02559">DebugInfoMetadata.h:2559</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9bccbe67aaab722783ca4e7c504aaaa7a56a57d29a3f9dda8671b4d6490a94b08"><div class="ttname"><a href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7a56a57d29a3f9dda8671b4d6490a94b08">llvm::AtomicOrdering::NotAtomic</a></div><div class="ttdeci">@ NotAtomic</div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_aaf604b7b4ff087fce0b71852f5ddefbe"><div class="ttname"><a href="GlobalOpt_8cpp.html#aaf604b7b4ff087fce0b71852f5ddefbe">setUsedInitializer</a></div><div class="ttdeci">static void setUsedInitializer(GlobalVariable &amp;V, const SmallPtrSetImpl&lt; GlobalValue * &gt; &amp;Init)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l02138">GlobalOpt.cpp:2138</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_a1ae624f5747718933b1dabc6a03689aa"><div class="ttname"><a href="GlobalOpt_8cpp.html#a1ae624f5747718933b1dabc6a03689aa">tryToOptimizeStoreOfAllocationToGlobal</a></div><div class="ttdeci">static bool tryToOptimizeStoreOfAllocationToGlobal(GlobalVariable *GV, CallInst *CI, const DataLayout &amp;DL, TargetLibraryInfo *TLI)</div><div class="ttdoc">If we have a global that is only initialized with a fixed size allocation try to transform the progra...</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l01042">GlobalOpt.cpp:1042</a></div></div>
<div class="ttc" id="aSetVector_8h_html"><div class="ttname"><a href="SetVector_8h.html">SetVector.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalVariable_html_a095f8f031d99ce3c0b25478713293dea"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html#a095f8f031d99ce3c0b25478713293dea">llvm::GlobalVariable::setInitializer</a></div><div class="ttdeci">void setInitializer(Constant *InitVal)</div><div class="ttdoc">setInitializer - Sets the initializer for this global variable, removing any existing initializer if ...</div><div class="ttdef"><b>Definition:</b> <a href="Globals_8cpp_source.html#l00472">Globals.cpp:472</a></div></div>
<div class="ttc" id="aclassllvm_1_1Use_html"><div class="ttname"><a href="classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdoc">A Use represents the edge between a Value definition and its users.</div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00043">Use.h:43</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a6bc6fb89fe2e91c25559a8631f56e27e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">llvm::SmallPtrSetImpl::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(PtrType Ptr)</div><div class="ttdoc">Inserts Ptr if and only if there is no element in the container equal to Ptr.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00365">SmallPtrSet.h:365</a></div></div>
<div class="ttc" id="aGlobalOpt_8cpp_html_a5b064b03163c5f9304d4b702da5fa1e4"><div class="ttname"><a href="GlobalOpt_8cpp.html#a5b064b03163c5f9304d4b702da5fa1e4">RemovePreallocated</a></div><div class="ttdeci">static void RemovePreallocated(Function *F)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalOpt_8cpp_source.html#l01867">GlobalOpt.cpp:1867</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:26:07 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

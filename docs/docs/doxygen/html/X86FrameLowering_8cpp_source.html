<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Target/X86/X86FrameLowering.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_794e483eb1cc7921d35fd149d9cc325b.html">Target</a></li><li class="navelem"><a class="el" href="dir_558b7c0c66e2ff4834e628dd4b3edd32.html">X86</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">X86FrameLowering.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="X86FrameLowering_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===-- X86FrameLowering.cpp - X86 Frame Information ----------------------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This file contains the X86 implementation of TargetFrameLowering class.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160; </div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="X86FrameLowering_8h.html">X86FrameLowering.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="X86MCTargetDesc_8h.html">MCTargetDesc/X86MCTargetDesc.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="X86InstrBuilder_8h.html">X86InstrBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="X86InstrInfo_8h.html">X86InstrInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="X86MachineFunctionInfo_8h.html">X86MachineFunctionInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="X86Subtarget_8h.html">X86Subtarget.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="X86TargetMachine_8h.html">X86TargetMachine.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallSet_8h.html">llvm/ADT/SmallSet.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LivePhysRegs_8h.html">llvm/CodeGen/LivePhysRegs.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineFrameInfo_8h.html">llvm/CodeGen/MachineFrameInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineFunction_8h.html">llvm/CodeGen/MachineFunction.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineInstrBuilder_8h.html">llvm/CodeGen/MachineInstrBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineModuleInfo_8h.html">llvm/CodeGen/MachineModuleInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineRegisterInfo_8h.html">llvm/CodeGen/MachineRegisterInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="WinEHFuncInfo_8h.html">llvm/CodeGen/WinEHFuncInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DataLayout_8h.html">llvm/IR/DataLayout.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="EHPersonalities_8h.html">llvm/IR/EHPersonalities.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Function_8h.html">llvm/IR/Function.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MCAsmInfo_8h.html">llvm/MC/MCAsmInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MCObjectFileInfo_8h.html">llvm/MC/MCObjectFileInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MCSymbol_8h.html">llvm/MC/MCSymbol.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetOptions_8h.html">llvm/Target/TargetOptions.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &lt;cstdlib&gt;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160; </div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="X86FrameLowering_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   39</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;x86-fl&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160; </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<a class="code" href="X86FrameLowering_8cpp.html#a229334f08bdd0c4fa1cce6b0d7eea76c">STATISTIC</a>(NumFrameLoopProbe, <span class="stringliteral">&quot;Number of loop stack probes used in prologue&quot;</span>);</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<a class="code" href="X86FrameLowering_8cpp.html#a229334f08bdd0c4fa1cce6b0d7eea76c">STATISTIC</a>(NumFrameExtraProbe,</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;          <span class="stringliteral">&quot;Number of extra stack probes generated in prologue&quot;</span>);</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160; </div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="classllvm_1_1X86FrameLowering.html#a116242916a44a6d4f5301270c6c4f05e">   47</a></span>&#160;<a class="code" href="classllvm_1_1X86FrameLowering.html#a116242916a44a6d4f5301270c6c4f05e">X86FrameLowering::X86FrameLowering</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1X86Subtarget.html">X86Subtarget</a> &amp;STI,</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                                   <a class="code" href="structllvm_1_1MaybeAlign.html">MaybeAlign</a> StackAlignOverride)</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    : <a class="code" href="classllvm_1_1TargetFrameLowering.html">TargetFrameLowering</a>(StackGrowsDown, StackAlignOverride.valueOrOne(),</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;                          STI.<a class="code" href="X86Disassembler_8cpp.html#a652270ec0bdb03b5a7f934524412aa7f">is64Bit</a>() ? -8 : -4),</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;      STI(STI), <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>(*STI.getInstrInfo()), <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>(STI.getRegisterInfo()) {</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="comment">// Cache a bunch of frame-related predicates for this subtarget.</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a> = <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;<a class="code" href="classllvm_1_1X86RegisterInfo.html#a92866ff258d3a2244a47257a8a4876cf">getSlotSize</a>();</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a> = <a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.is64Bit();</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <a class="code" href="classllvm_1_1X86FrameLowering.html#a7761d9f26e6c0722ee9c9d8c5e052c1c">IsLP64</a> = <a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a692f8a360f34d8e62b4940f3a8966216">isTarget64BitLP64</a>();</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="comment">// standard x86_64 and NaCl use 64-bit frame/stack pointers, x32 - 32-bit.</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <a class="code" href="classllvm_1_1X86FrameLowering.html#abb804392ca8368795013f2e5dc001ee2">Uses64BitFramePtr</a> = <a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a692f8a360f34d8e62b4940f3a8966216">isTarget64BitLP64</a>() || <a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#ae6ea07c18750ab2b37189cef9a99914a">isTargetNaCl64</a>();</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a> = <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;<a class="code" href="classllvm_1_1X86RegisterInfo.html#a75001f504c95fbf8b2286ec95e9fa169">getStackRegister</a>();</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;}</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="classllvm_1_1X86FrameLowering.html#a6696e7a9f36d7983d3593e5f4a17831f">   61</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1X86FrameLowering.html#a6696e7a9f36d7983d3593e5f4a17831f">X86FrameLowering::hasReservedCallFrame</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="keywordflow">return</span> !MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>().<a class="code" href="classllvm_1_1MachineFrameInfo.html#a0509430713d587eba74220a8375948a8">hasVarSizedObjects</a>() &amp;&amp;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;         !MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html">X86MachineFunctionInfo</a>&gt;()-&gt;getHasPushSequences() &amp;&amp;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;         !MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html">X86MachineFunctionInfo</a>&gt;()-&gt;hasPreallocatedCall();</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;}</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">/// canSimplifyCallFramePseudos - If there is a reserved call frame, the</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">/// call frame pseudos can be simplified.  Having a FP, as in the default</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">/// implementation, is not sufficient here since we can&#39;t always use it.</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">/// Use a more nuanced condition.</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span></div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="classllvm_1_1X86FrameLowering.html#a0c500b38e3912753a3b7354b88b10993">   72</a></span>&#160;<a class="code" href="classllvm_1_1X86FrameLowering.html#a0c500b38e3912753a3b7354b88b10993">X86FrameLowering::canSimplifyCallFramePseudos</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1X86FrameLowering.html#a6696e7a9f36d7983d3593e5f4a17831f">hasReservedCallFrame</a>(MF) ||</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;         MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html">X86MachineFunctionInfo</a>&gt;()-&gt;hasPreallocatedCall() ||</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;         (<a class="code" href="classllvm_1_1X86FrameLowering.html#a27de32522776b0243eaa10ae9e0c27d4">hasFP</a>(MF) &amp;&amp; !<a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;hasStackRealignment(MF)) ||</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;         <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;<a class="code" href="classllvm_1_1X86RegisterInfo.html#a0d077eae4ce42bad55b66dbf9166113d">hasBasePointer</a>(MF);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;}</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">// needsFrameIndexResolution - Do we need to perform FI resolution for</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">// this function. Normally, this is required only when the function</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">// has any stack objects. However, FI resolution actually has another job,</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">// not apparent from the title - it resolves callframesetup/destroy</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">// that were not simplified earlier.</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">// So, this is required for x86 functions that have push sequences even</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">// when there are no stack objects.</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="keywordtype">bool</span></div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="classllvm_1_1X86FrameLowering.html#a0d66887ade3ca46870e0921376f86fd1">   87</a></span>&#160;<a class="code" href="classllvm_1_1X86FrameLowering.html#a0d66887ade3ca46870e0921376f86fd1">X86FrameLowering::needsFrameIndexResolution</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="keywordflow">return</span> MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>().<a class="code" href="classllvm_1_1MachineFrameInfo.html#acb35f7f6a131a64e636d936246ebd37f">hasStackObjects</a>() ||</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;         MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html">X86MachineFunctionInfo</a>&gt;()-&gt;getHasPushSequences();</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;}</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">/// hasFP - Return true if the specified function should have a dedicated frame</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">/// pointer register.  This is true if the function has variable sized allocas</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">/// or if frame pointer elimination is disabled.</span></div>
<div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="classllvm_1_1X86FrameLowering.html#a27de32522776b0243eaa10ae9e0c27d4">   95</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1X86FrameLowering.html#a27de32522776b0243eaa10ae9e0c27d4">X86FrameLowering::hasFP</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> &amp;MFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>();</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="keywordflow">return</span> (MF.<a class="code" href="classllvm_1_1MachineFunction.html#ae68d159179d37dc7969439d842e2644f">getTarget</a>().<a class="code" href="classllvm_1_1TargetMachine.html#ab1fb67187fc37e569cc5171cbebba873">Options</a>.<a class="code" href="classllvm_1_1TargetOptions.html#aad0fc1de8197ddf2c49346c5d92a2bec">DisableFramePointerElim</a>(MF) ||</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;          <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;hasStackRealignment(MF) || MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a0509430713d587eba74220a8375948a8">hasVarSizedObjects</a>() ||</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;          MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a32125253541ab2e7ec5bbe550ecc2d0c">isFrameAddressTaken</a>() || MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a51773b6c05f392988bf6395ccd1788ce">hasOpaqueSPAdjustment</a>() ||</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;          MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html">X86MachineFunctionInfo</a>&gt;()-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#a046dd28b46bd584d050eca36d081c372">getForceFramePointer</a>() ||</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;          MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html">X86MachineFunctionInfo</a>&gt;()-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#aa136a47fd323997cfe9d1ac8419ede8f">hasPreallocatedCall</a>() ||</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;          MF.<a class="code" href="classllvm_1_1MachineFunction.html#a6799fb8536b173a2078ef97e1f0d16ec">callsUnwindInit</a>() || MF.<a class="code" href="classllvm_1_1MachineFunction.html#ad40522ac860df72189255e38782acc3f">hasEHFunclets</a>() || MF.<a class="code" href="classllvm_1_1MachineFunction.html#a768ff6dfb15d23afedd7f07501afee9e">callsEHReturn</a>() ||</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;          MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#aa7d9e2f26e4c8b32f51c455b220ce13c">hasStackMap</a>() || MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a503a8cb169aa29ac907c218692087db3">hasPatchPoint</a>() ||</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;          (isWin64Prologue(MF) &amp;&amp; MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#ac901643b9a98a52b1c323b79f28b8dcc">hasCopyImplyingStackAdjustment</a>()));</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;}</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="X86FrameLowering_8cpp.html#a6420ad77b9c213cea2ae49052e0ff55a">  107</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="X86FrameLowering_8cpp.html#a6420ad77b9c213cea2ae49052e0ff55a">getSUBriOpcode</a>(<span class="keywordtype">bool</span> IsLP64, int64_t <a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a>) {</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="keywordflow">if</span> (IsLP64) {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordflow">if</span> (isInt&lt;8&gt;(<a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a>))</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      <span class="keywordflow">return</span> X86::SUB64ri8;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordflow">return</span> X86::SUB64ri32;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordflow">if</span> (isInt&lt;8&gt;(<a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a>))</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      <span class="keywordflow">return</span> X86::SUB32ri8;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordflow">return</span> X86::SUB32ri;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  }</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;}</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="X86FrameLowering_8cpp.html#a4f415404e45ee7add2769627e39c2b53">  119</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="X86FrameLowering_8cpp.html#a4f415404e45ee7add2769627e39c2b53">getADDriOpcode</a>(<span class="keywordtype">bool</span> IsLP64, int64_t <a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a>) {</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="keywordflow">if</span> (IsLP64) {</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keywordflow">if</span> (isInt&lt;8&gt;(<a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a>))</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      <span class="keywordflow">return</span> X86::ADD64ri8;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">return</span> X86::ADD64ri32;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">if</span> (isInt&lt;8&gt;(<a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a>))</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      <span class="keywordflow">return</span> X86::ADD32ri8;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordflow">return</span> X86::ADD32ri;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  }</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;}</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="X86FrameLowering_8cpp.html#ae47fe718044419c88efa13772780b920">  131</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="X86FrameLowering_8cpp.html#ae47fe718044419c88efa13772780b920">getSUBrrOpcode</a>(<span class="keywordtype">bool</span> IsLP64) {</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="keywordflow">return</span> IsLP64 ? X86::SUB64rr : X86::SUB32rr;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;}</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160; </div>
<div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="X86FrameLowering_8cpp.html#a9eeab7cb8d11a73a02d732d54f891239">  135</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="X86FrameLowering_8cpp.html#a9eeab7cb8d11a73a02d732d54f891239">getADDrrOpcode</a>(<span class="keywordtype">bool</span> IsLP64) {</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="keywordflow">return</span> IsLP64 ? X86::ADD64rr : X86::ADD32rr;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;}</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="X86FrameLowering_8cpp.html#a76608be3df4f82c18347d1680f3b0936">  139</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="X86FrameLowering_8cpp.html#a76608be3df4f82c18347d1680f3b0936">getANDriOpcode</a>(<span class="keywordtype">bool</span> IsLP64, int64_t <a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a>) {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="keywordflow">if</span> (IsLP64) {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">if</span> (isInt&lt;8&gt;(<a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a>))</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      <span class="keywordflow">return</span> X86::AND64ri8;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordflow">return</span> X86::AND64ri32;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  }</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <span class="keywordflow">if</span> (isInt&lt;8&gt;(<a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a>))</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">return</span> X86::AND32ri8;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <span class="keywordflow">return</span> X86::AND32ri;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;}</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="X86FrameLowering_8cpp.html#a48597b35dc2ab842232cc2a5c6047401">  150</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="X86FrameLowering_8cpp.html#a48597b35dc2ab842232cc2a5c6047401">getLEArOpcode</a>(<span class="keywordtype">bool</span> IsLP64) {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="keywordflow">return</span> IsLP64 ? X86::LEA64r : X86::LEA32r;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;}</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno"><a class="line" href="X86FrameLowering_8cpp.html#a39d0dcc2605f63349a774a79927b2209">  154</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="X86FrameLowering_8cpp.html#a39d0dcc2605f63349a774a79927b2209">getMOVriOpcode</a>(<span class="keywordtype">bool</span> Use64BitReg, int64_t <a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a>) {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="keywordflow">if</span> (Use64BitReg) {</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordflow">if</span> (isUInt&lt;32&gt;(<a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a>))</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      <span class="keywordflow">return</span> X86::MOV32ri64;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">if</span> (isInt&lt;32&gt;(<a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a>))</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      <span class="keywordflow">return</span> X86::MOV64ri32;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keywordflow">return</span> X86::MOV64ri;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  }</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="keywordflow">return</span> X86::MOV32ri;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;}</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160; </div>
<div class="line"><a name="l00165"></a><span class="lineno"><a class="line" href="X86FrameLowering_8cpp.html#a833aa9ac03a9d223ea251585baaa5642">  165</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="X86FrameLowering_8cpp.html#a833aa9ac03a9d223ea251585baaa5642">isEAXLiveIn</a>(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>) {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="structllvm_1_1MachineBasicBlock_1_1RegisterMaskPair.html">MachineBasicBlock::RegisterMaskPair</a> RegMask : <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a98d240595236bf85bf1a5c5ba594bdba">liveins</a>()) {</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = RegMask.PhysReg;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> == X86::RAX || <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> == <a class="code" href="namespacellvm_1_1N86.html#a004aaa5711c58178d0371ab88bf1bd63a488c3a2a57ed8f23f0c48d8b40348af0">X86::EAX</a> || <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> == X86::AX ||</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> == <a class="code" href="README-X86-64_8txt.html#a9de23273550c17a1957b1b325a01960e">X86::AH</a> || <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> == <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">X86::AL</a>)</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  }</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160; </div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;}</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">/// Check if the flags need to be preserved before the terminators.</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">/// This would be the case, if the eflags is live-in of the region</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment">/// composed by the terminators or live-out of that region, without</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">/// being defined by a terminator.</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span></div>
<div class="line"><a name="l00182"></a><span class="lineno"><a class="line" href="X86FrameLowering_8cpp.html#a63bd353ca84282a830d803a6bf9e4c5e">  182</a></span>&#160;<a class="code" href="X86FrameLowering_8cpp.html#a63bd353ca84282a830d803a6bf9e4c5e">flagsNeedToBePreservedBeforeTheTerminators</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>) {</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7f0540de8a453a7229e35264e8edd4ac">terminators</a>()) {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordtype">bool</span> BreakNext = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO : <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.operands()) {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      <span class="keywordflow">if</span> (!MO.isReg())</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = MO.getReg();</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> != X86::EFLAGS)</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      <span class="comment">// This terminator needs an eflags that is not defined</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      <span class="comment">// by a previous another terminator:</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      <span class="comment">// EFLAGS is live-in of the region composed by the terminators.</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      <span class="keywordflow">if</span> (!MO.isDef())</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      <span class="comment">// This terminator defines the eflags, i.e., we don&#39;t need to preserve it.</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      <span class="comment">// However, we still need to check this specific terminator does not</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      <span class="comment">// read a live-in value.</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      BreakNext = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    }</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="comment">// We found a definition of the eflags, no need to preserve them.</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">if</span> (BreakNext)</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  }</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <span class="comment">// None of the terminators use or define the eflags.</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <span class="comment">// Check if they are live-out, that would imply we need to preserve them.</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Succ : <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4d2c96836214c1f13357ffb99125fb4a">successors</a>())</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keywordflow">if</span> (Succ-&gt;isLiveIn(X86::EFLAGS))</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160; </div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;}</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">/// emitSPUpdate - Emit a series of instructions to increment / decrement the</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">/// stack pointer by a constant value.</span></div>
<div class="line"><a name="l00218"></a><span class="lineno"><a class="line" href="classllvm_1_1X86FrameLowering.html#aa8a605a58ebdee20705834400bdbb922">  218</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1X86FrameLowering.html#aa8a605a58ebdee20705834400bdbb922">X86FrameLowering::emitSPUpdate</a>(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>,</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                                    <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>,</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                                    <span class="keyword">const</span> <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                                    int64_t NumBytes, <span class="keywordtype">bool</span> InEpilogue)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="keywordtype">bool</span> isSub = NumBytes &lt; 0;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = isSub ? -NumBytes : NumBytes;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518">MachineInstr::MIFlag</a> <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023">Flag</a> =</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      isSub ? <a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a> : <a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">MachineInstr::FrameDestroy</a>;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160; </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> Chunk = (1LL &lt;&lt; 31) - 1;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">getParent</a>();</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1X86Subtarget.html">X86Subtarget</a> &amp;<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a> = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1X86Subtarget.html">X86Subtarget</a>&gt;();</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1X86TargetLowering.html">X86TargetLowering</a> &amp;TLI = *<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a97b47799ffd834b0fddcc8cee6fbe234">getTargetLowering</a>();</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> EmitInlineStackProbe = TLI.<a class="code" href="classllvm_1_1X86TargetLowering.html#a5cf46104ca48a9577dc4a61cf080003a">hasInlineStackProbe</a>(MF);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160; </div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="comment">// It&#39;s ok to not take into account large chunks when probing, as the</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="comment">// allocation is split in smaller chunks anyway.</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <span class="keywordflow">if</span> (EmitInlineStackProbe &amp;&amp; !InEpilogue) {</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="comment">// This pseudo-instruction is going to be expanded, potentially using a</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="comment">// loop, by inlineStackProbe().</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::STACKALLOC_W_PROBING)).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> &gt; Chunk) {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="comment">// Rather than emit a long series of instructions for large offsets,</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="comment">// load the offset into a register and do one sub/add</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = 0;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordtype">unsigned</span> Rax = (<a class="code" href="ADT_2tmp_8txt.html#aa10ee7493bddf2c751ca6e05451ef410">unsigned</a>)(<a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a> ? X86::RAX : <a class="code" href="namespacellvm_1_1N86.html#a004aaa5711c58178d0371ab88bf1bd63a488c3a2a57ed8f23f0c48d8b40348af0">X86::EAX</a>);</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160; </div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">if</span> (isSub &amp;&amp; !<a class="code" href="X86FrameLowering_8cpp.html#a833aa9ac03a9d223ea251585baaa5642">isEAXLiveIn</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>))</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = Rax;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;      <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;<a class="code" href="classllvm_1_1X86RegisterInfo.html#a48595fc4feb49d51ed2eecbf73dadc24">findDeadCallerSavedReg</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160; </div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordtype">unsigned</span> AddSubRROpc =</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        isSub ? <a class="code" href="X86FrameLowering_8cpp.html#ae47fe718044419c88efa13772780b920">getSUBrrOpcode</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a>) : <a class="code" href="X86FrameLowering_8cpp.html#a9eeab7cb8d11a73a02d732d54f891239">getADDrrOpcode</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a>);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>) {</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(<a class="code" href="X86FrameLowering_8cpp.html#a39d0dcc2605f63349a774a79927b2209">getMOVriOpcode</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a>, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>)), <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>)</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>)</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023">Flag</a>);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(AddSubRROpc), <a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>)</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                             .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>)</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                             .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(3).setIsDead(); <span class="comment">// The EFLAGS implicit def is dead.</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> &gt; 8 * Chunk) {</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      <span class="comment">// If we would need more than 8 add or sub instructions (a &gt;16GB stack</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      <span class="comment">// frame), it&#39;s worth spilling RAX to materialize this immediate.</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      <span class="comment">//   pushq %rax</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      <span class="comment">//   movabsq +-$Offset+-SlotSize, %rax</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      <span class="comment">//   addq %rsp, %rax</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      <span class="comment">//   xchg %rax, (%rsp)</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      <span class="comment">//   movq (%rsp), %rsp</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a> &amp;&amp; <span class="stringliteral">&quot;can&#39;t have 32-bit 16GB stack frame&quot;</span>);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::PUSH64r))</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(Rax, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da9ddde91ef09476d28a088fe57f8e2921">RegState::Kill</a>)</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023">Flag</a>);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      <span class="comment">// Subtract is not commutative, so negate the offset and always use add.</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      <span class="comment">// Subtract 8 less and add 8 more to account for the PUSH we just did.</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      <span class="keywordflow">if</span> (isSub)</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = -(<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> - <a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> + <a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(<a class="code" href="X86FrameLowering_8cpp.html#a39d0dcc2605f63349a774a79927b2209">getMOVriOpcode</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a>, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>)), Rax)</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>)</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023">Flag</a>);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::ADD64rr), Rax)</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                             .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(Rax)</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                             .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(3).setIsDead(); <span class="comment">// The EFLAGS implicit def is dead.</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      <span class="comment">// Exchange the new SP in RAX with the top of the stack.</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      <a class="code" href="namespacellvm.html#afad63f3314b8553ee3c26d020b3ce09e">addRegOffset</a>(</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;          <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::XCHG64rm), Rax).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(Rax),</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;          <a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>, <span class="keyword">false</span>, 0);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      <span class="comment">// Load new SP from the top of the stack into RSP.</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      <a class="code" href="namespacellvm.html#afad63f3314b8553ee3c26d020b3ce09e">addRegOffset</a>(<a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::MOV64rm), <a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>),</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                   <a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>, <span class="keyword">false</span>, 0);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    }</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  }</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160; </div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>) {</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> ThisVal = <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>, Chunk);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">if</span> (ThisVal == <a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>) {</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      <span class="comment">// Use push / pop for slot sized adjustments as a size optimization. We</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      <span class="comment">// need to find a dead register when using pop.</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = isSub</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        ? (<a class="code" href="ADT_2tmp_8txt.html#aa10ee7493bddf2c751ca6e05451ef410">unsigned</a>)(<a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a> ? X86::RAX : <a class="code" href="namespacellvm_1_1N86.html#a004aaa5711c58178d0371ab88bf1bd63a488c3a2a57ed8f23f0c48d8b40348af0">X86::EAX</a>)</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        : <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;<a class="code" href="classllvm_1_1X86RegisterInfo.html#a48595fc4feb49d51ed2eecbf73dadc24">findDeadCallerSavedReg</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>) {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <span class="keywordtype">unsigned</span> Opc = isSub</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;          ? (<a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a> ? X86::PUSH64r : X86::PUSH32r)</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;          : (<a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a> ? X86::POP64r  : X86::POP32r);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(Opc))</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, <a class="code" href="namespacellvm.html#aa5e4d7acf58e87826a15b94d37144f2b">getDefRegState</a>(!isSub) | <a class="code" href="namespacellvm.html#aa3a1f79eb5e89f41ad5a3d8e9b2a367a">getUndefRegState</a>(isSub))</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023">Flag</a>);</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> -= ThisVal;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      }</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    }</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160; </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    BuildStackAdjustment(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, isSub ? -ThisVal : ThisVal, InEpilogue)</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023">Flag</a>);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> -= ThisVal;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  }</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;}</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160; </div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> X86FrameLowering::BuildStackAdjustment(</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>,</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, int64_t <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>, <span class="keywordtype">bool</span> InEpilogue)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> != 0 &amp;&amp; <span class="stringliteral">&quot;zero offset stack adjustment requested&quot;</span>);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160; </div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <span class="comment">// On Atom, using LEA to adjust SP is preferred, but using it in the epilogue</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <span class="comment">// is tricky.</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="keywordtype">bool</span> UseLEA;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  <span class="keywordflow">if</span> (!InEpilogue) {</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="comment">// Check if inserting the prologue at the beginning</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="comment">// of MBB would require to use LEA operations.</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="comment">// We need to use LEA operations if EFLAGS is live in, because</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="comment">// it means an instruction will read it before it gets defined.</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    UseLEA = <a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.useLeaForSP() || <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a5fc7747b752105f022c214bd2403eeee">isLiveIn</a>(X86::EFLAGS);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="comment">// If we can use LEA for SP but we shouldn&#39;t, check that none</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="comment">// of the terminators uses the eflags. Otherwise we will insert</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="comment">// a ADD that will redefine the eflags and break the condition.</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="comment">// Alternatively, we could move the ADD, but this may not be possible</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="comment">// and is an optimization anyway.</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    UseLEA = <a class="code" href="classllvm_1_1X86FrameLowering.html#ad7e593e787ba6a94dbd287c32abe4006">canUseLEAForSPInEpilogue</a>(*<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">getParent</a>());</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">if</span> (UseLEA &amp;&amp; !<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.useLeaForSP())</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      UseLEA = <a class="code" href="X86FrameLowering_8cpp.html#a63bd353ca84282a830d803a6bf9e4c5e">flagsNeedToBePreservedBeforeTheTerminators</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="comment">// If that assert breaks, that means we do not do the right thing</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="comment">// in canUseAsEpilogue.</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((UseLEA || !<a class="code" href="X86FrameLowering_8cpp.html#a63bd353ca84282a830d803a6bf9e4c5e">flagsNeedToBePreservedBeforeTheTerminators</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>)) &amp;&amp;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;           <span class="stringliteral">&quot;We shouldn&#39;t have allowed this insertion point&quot;</span>);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  }</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160; </div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="keywordflow">if</span> (UseLEA) {</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = <a class="code" href="namespacellvm.html#afad63f3314b8553ee3c26d020b3ce09e">addRegOffset</a>(<a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                              <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(<a class="code" href="X86FrameLowering_8cpp.html#a48597b35dc2ab842232cc2a5c6047401">getLEArOpcode</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#abb804392ca8368795013f2e5dc001ee2">Uses64BitFramePtr</a>)),</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                              <a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>),</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                      <a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>, <span class="keyword">false</span>, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>);</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordtype">bool</span> IsSub = <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> &lt; 0;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> AbsOffset = IsSub ? -<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> : <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> Opc = IsSub ? <a class="code" href="X86FrameLowering_8cpp.html#a6420ad77b9c213cea2ae49052e0ff55a">getSUBriOpcode</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#abb804392ca8368795013f2e5dc001ee2">Uses64BitFramePtr</a>, AbsOffset)</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                               : <a class="code" href="X86FrameLowering_8cpp.html#a4f415404e45ee7add2769627e39c2b53">getADDriOpcode</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#abb804392ca8368795013f2e5dc001ee2">Uses64BitFramePtr</a>, AbsOffset);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(Opc), <a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>)</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;             .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>)</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;             .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(AbsOffset);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(3).setIsDead(); <span class="comment">// The EFLAGS implicit def is dead.</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  }</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;}</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160; </div>
<div class="line"><a name="l00375"></a><span class="lineno"><a class="line" href="classllvm_1_1X86FrameLowering.html#af1d6349ca67f14c36e41916e41536da4">  375</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classllvm_1_1X86FrameLowering.html#af1d6349ca67f14c36e41916e41536da4">X86FrameLowering::mergeSPUpdates</a>(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>,</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                                     <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>,</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                                     <span class="keywordtype">bool</span> doMergeWithPrevious)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <span class="keywordflow">if</span> ((doMergeWithPrevious &amp;&amp; <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a> == <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>()) ||</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      (!doMergeWithPrevious &amp;&amp; <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a> == <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>()))</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160; </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> PI = doMergeWithPrevious ? std::prev(<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>) : <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160; </div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  PI = <a class="code" href="namespacellvm.html#a9256279285c60fce1b2eb1b928599461">skipDebugInstructionsBackward</a>(PI, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>());</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <span class="comment">// It is assumed that ADD/SUB/LEA instruction is succeded by one CFI</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <span class="comment">// instruction, and that there are no DBG_VALUE or other instructions between</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <span class="comment">// ADD/SUB/LEA and its corresponding CFI instruction.</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="comment">/* TODO: Add support for the case where there are multiple CFI instructions</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">    below the ADD/SUB/LEA, e.g.:</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">    ...</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment">    add</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment">    cfi_def_cfa_offset</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment">    cfi_offset</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment">    ...</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment">  */</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="keywordflow">if</span> (doMergeWithPrevious &amp;&amp; PI != <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>() &amp;&amp; PI-&gt;isCFIInstruction())</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    PI = std::prev(PI);</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160; </div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <span class="keywordtype">unsigned</span> Opc = PI-&gt;getOpcode();</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = 0;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160; </div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="keywordflow">if</span> ((Opc == X86::ADD64ri32 || Opc == X86::ADD64ri8 ||</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;       Opc == X86::ADD32ri || Opc == X86::ADD32ri8) &amp;&amp;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      PI-&gt;getOperand(0).getReg() == <a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>){</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PI-&gt;getOperand(1).getReg() == <a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = PI-&gt;getOperand(2).getImm();</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((Opc == X86::LEA32r || Opc == X86::LEA64_32r) &amp;&amp;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;             PI-&gt;getOperand(0).getReg() == <a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a> &amp;&amp;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;             PI-&gt;getOperand(1).getReg() == <a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a> &amp;&amp;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;             PI-&gt;getOperand(2).getImm() == 1 &amp;&amp;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;             PI-&gt;getOperand(3).getReg() == X86::NoRegister &amp;&amp;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;             PI-&gt;getOperand(5).getReg() == X86::NoRegister) {</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="comment">// For LEAs we have: def = lea SP, FI, noreg, Offset, noreg.</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = PI-&gt;getOperand(4).getImm();</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((Opc == X86::SUB64ri32 || Opc == X86::SUB64ri8 ||</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;              Opc == X86::SUB32ri || Opc == X86::SUB32ri8) &amp;&amp;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;             PI-&gt;getOperand(0).getReg() == <a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>) {</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PI-&gt;getOperand(1).getReg() == <a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>);</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = -PI-&gt;getOperand(2).getImm();</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160; </div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  PI = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ad26bff839257f220557ce812b2159c72">erase</a>(PI);</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <span class="keywordflow">if</span> (PI != <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>() &amp;&amp; PI-&gt;isCFIInstruction()) {</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="keyword">auto</span> CIs = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">getParent</a>()-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#ac76c4d72f8d92470ab0936e03f66e67b">getFrameInstructions</a>();</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <a class="code" href="classllvm_1_1MCCFIInstruction.html">MCCFIInstruction</a> CI = CIs[PI-&gt;getOperand(0).getCFIIndex()];</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keywordflow">if</span> (CI.<a class="code" href="classllvm_1_1MCCFIInstruction.html#a9d7ee9c6eaabde95dd9695326a77f253">getOperation</a>() == <a class="code" href="classllvm_1_1MCCFIInstruction.html#a26347ad83355eafb75fecd4bce9d7abba5822faf65b27795cd48bd44712d48927">MCCFIInstruction::OpDefCfaOffset</a> ||</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        CI.<a class="code" href="classllvm_1_1MCCFIInstruction.html#a9d7ee9c6eaabde95dd9695326a77f253">getOperation</a>() == <a class="code" href="classllvm_1_1MCCFIInstruction.html#a26347ad83355eafb75fecd4bce9d7abbaea7047186e58e6304947fbe2b12963ca">MCCFIInstruction::OpAdjustCfaOffset</a>)</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;      PI = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ad26bff839257f220557ce812b2159c72">erase</a>(PI);</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  }</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <span class="keywordflow">if</span> (!doMergeWithPrevious)</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a> = <a class="code" href="namespacellvm.html#a5bacbbd03e9261f7b30dc174f26d680c">skipDebugInstructionsForward</a>(PI, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>());</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160; </div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;}</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160; </div>
<div class="line"><a name="l00437"></a><span class="lineno"><a class="line" href="classllvm_1_1X86FrameLowering.html#aef0079a40a972f2942156b2d73bbf190">  437</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1X86FrameLowering.html#aef0079a40a972f2942156b2d73bbf190">X86FrameLowering::BuildCFI</a>(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>,</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                                <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>,</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                                <span class="keyword">const</span> <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                                <span class="keyword">const</span> <a class="code" href="classllvm_1_1MCCFIInstruction.html">MCCFIInstruction</a> &amp;CFIInst,</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                                <a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518">MachineInstr::MIFlag</a> <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023">Flag</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">getParent</a>();</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <span class="keywordtype">unsigned</span> CFIIndex = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a247230f547064b27022d70c0aeb86682">addFrameInst</a>(CFIInst);</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(TargetOpcode::CFI_INSTRUCTION))</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad51b0d1c80a9dbf0eea9162e2e3ec0dd">addCFIIndex</a>(CFIIndex)</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023">Flag</a>);</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;}</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="comment">/// Emits Dwarf Info specifying offsets of callee saved registers and</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="comment">/// frame pointer. This is called only when basic block sections are enabled.</span></div>
<div class="line"><a name="l00451"></a><span class="lineno"><a class="line" href="classllvm_1_1X86FrameLowering.html#acbd4fee4d18fa2066d758dff7168ef36">  451</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1X86FrameLowering.html#acbd4fee4d18fa2066d758dff7168ef36">X86FrameLowering::emitCalleeSavedFrameMovesFullCFA</a>(</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">getParent</a>();</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1X86FrameLowering.html#a27de32522776b0243eaa10ae9e0c27d4">hasFP</a>(MF)) {</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <a class="code" href="classllvm_1_1X86FrameLowering.html#a6c1f3151b66ea2dfd6a8b9cef815d51c">emitCalleeSavedFrameMoves</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a>{}, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  }</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineModuleInfo.html">MachineModuleInfo</a> &amp;MMI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a6691cc6c9b7341348045f8d54a14e7a7">getMMI</a>();</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MCRegisterInfo.html">MCRegisterInfo</a> *<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = MMI.<a class="code" href="classllvm_1_1MachineModuleInfo.html#af0c649dd3863684f18821123651f924c">getContext</a>().<a class="code" href="classllvm_1_1MCContext.html#a4c59f0784e520b79b9965b489ab21ceb">getRegisterInfo</a>();</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Register.html">Register</a> FramePtr = <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;<a class="code" href="classllvm_1_1X86RegisterInfo.html#a45e0af6fcebf5fd5a4584974e13c6810">getFrameRegister</a>(MF);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Register.html">Register</a> MachineFramePtr =</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;      <a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a60d014846b23498268005ffec9608bc0">isTarget64BitILP32</a>() ? <a class="code" href="classllvm_1_1Register.html">Register</a>(<a class="code" href="namespacellvm.html#a27b344a283e0620f484144889fe32064">getX86SubSuperRegister</a>(FramePtr, 64))</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                               : FramePtr;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <span class="keywordtype">unsigned</span> DwarfReg = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;getDwarfRegNum(MachineFramePtr, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  <span class="comment">// Offset = space for return address + size of the frame pointer itself.</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = (<a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a> ? 8 : 4) + (<a class="code" href="classllvm_1_1X86FrameLowering.html#abb804392ca8368795013f2e5dc001ee2">Uses64BitFramePtr</a> ? 8 : 4);</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <a class="code" href="classllvm_1_1X86FrameLowering.html#aef0079a40a972f2942156b2d73bbf190">BuildCFI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a>{},</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;           <a class="code" href="classllvm_1_1MCCFIInstruction.html#aea2b8a3efd6694a33452ed7e8716300e">MCCFIInstruction::createOffset</a>(<span class="keyword">nullptr</span>, DwarfReg, -<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>));</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  <a class="code" href="classllvm_1_1X86FrameLowering.html#a6c1f3151b66ea2dfd6a8b9cef815d51c">emitCalleeSavedFrameMoves</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a>{}, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;}</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160; </div>
<div class="line"><a name="l00472"></a><span class="lineno"><a class="line" href="classllvm_1_1X86FrameLowering.html#a6c1f3151b66ea2dfd6a8b9cef815d51c">  472</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1X86FrameLowering.html#a6c1f3151b66ea2dfd6a8b9cef815d51c">X86FrameLowering::emitCalleeSavedFrameMoves</a>(</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>,</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <span class="keywordtype">bool</span> IsPrologue)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">getParent</a>();</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> &amp;MFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>();</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <a class="code" href="classllvm_1_1MachineModuleInfo.html">MachineModuleInfo</a> &amp;MMI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a6691cc6c9b7341348045f8d54a14e7a7">getMMI</a>();</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MCRegisterInfo.html">MCRegisterInfo</a> *<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = MMI.<a class="code" href="classllvm_1_1MachineModuleInfo.html#af0c649dd3863684f18821123651f924c">getContext</a>().<a class="code" href="classllvm_1_1MCContext.html#a4c59f0784e520b79b9965b489ab21ceb">getRegisterInfo</a>();</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160; </div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  <span class="comment">// Add callee saved registers to move list.</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  <span class="keyword">const</span> std::vector&lt;CalleeSavedInfo&gt; &amp;CSI = MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#af3891aaee55272147e7bb2518842a753">getCalleeSavedInfo</a>();</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160; </div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  <span class="comment">// Calculate offsets.</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1CalleeSavedInfo.html">CalleeSavedInfo</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : CSI) {</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    int64_t <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#adf98860d7f42290f873c82a981eb0ea6">getObjectOffset</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getFrameIdx());</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getReg();</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="keywordtype">unsigned</span> DwarfReg = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;getDwarfRegNum(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160; </div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="keywordflow">if</span> (IsPrologue) {</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      <a class="code" href="classllvm_1_1X86FrameLowering.html#aef0079a40a972f2942156b2d73bbf190">BuildCFI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;               <a class="code" href="classllvm_1_1MCCFIInstruction.html#aea2b8a3efd6694a33452ed7e8716300e">MCCFIInstruction::createOffset</a>(<span class="keyword">nullptr</span>, DwarfReg, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>));</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      <a class="code" href="classllvm_1_1X86FrameLowering.html#aef0079a40a972f2942156b2d73bbf190">BuildCFI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;               <a class="code" href="classllvm_1_1MCCFIInstruction.html#a3828c9fbb57095c51896fb2499e60044">MCCFIInstruction::createRestore</a>(<span class="keyword">nullptr</span>, DwarfReg));</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    }</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  }</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;}</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160; </div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="keywordtype">void</span> X86FrameLowering::emitZeroCallUsedRegs(<a class="code" href="classllvm_1_1BitVector.html">BitVector</a> RegsToZero,</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                                            <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">getParent</a>();</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160; </div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  <span class="comment">// Insertion point.</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7f0521fa2de44271fd4b909ea7351ef3">getFirstTerminator</a>();</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160; </div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  <span class="comment">// Fake a debug loc.</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a> != <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>())</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getDebugLoc();</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160; </div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  <span class="comment">// Zero out FP stack if referenced. Do this outside of the loop below so that</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  <span class="comment">// it&#39;s done only once.</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1X86Subtarget.html">X86Subtarget</a> &amp;<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a> = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1X86Subtarget.html">X86Subtarget</a>&gt;();</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MCRegister.html">MCRegister</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> : RegsToZero.<a class="code" href="classllvm_1_1BitVector.html#a1aa4357710f3fd6e616e13b5c16dc0d8">set_bits</a>()) {</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="keywordflow">if</span> (!X86::RFP80RegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>))</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160; </div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="keywordtype">unsigned</span> NumFPRegs = <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.is64Bit() ? 8 : 7;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != NumFPRegs; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::LD_F0));</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160; </div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != NumFPRegs; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::ST_FPrr)).addReg(X86::ST0);</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  }</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160; </div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  <span class="comment">// For GPRs, we only care to clear out the 32-bit register.</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  <a class="code" href="classllvm_1_1BitVector.html">BitVector</a> GPRsToZero(<a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;getNumRegs());</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MCRegister.html">MCRegister</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> : RegsToZero.<a class="code" href="classllvm_1_1BitVector.html#a1aa4357710f3fd6e616e13b5c16dc0d8">set_bits</a>())</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;isGeneralPurposeRegister(MF, <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>)) {</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;      GPRsToZero.set(<a class="code" href="namespacellvm.html#a27b344a283e0620f484144889fe32064">getX86SubSuperRegister</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, 32));</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      RegsToZero.<a class="code" href="classllvm_1_1BitVector.html#a5109693c2cdda2a4118e7d588b51bfa6">reset</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    }</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160; </div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MCRegister.html">MCRegister</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> : GPRsToZero.set_bits())</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::XOR32rr), <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>)</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320dab502f975742e9bff6d6dd7b49439b806">RegState::Undef</a>)</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320dab502f975742e9bff6d6dd7b49439b806">RegState::Undef</a>);</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160; </div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  <span class="comment">// Zero out registers.</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MCRegister.html">MCRegister</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> : RegsToZero.<a class="code" href="classllvm_1_1BitVector.html#a1aa4357710f3fd6e616e13b5c16dc0d8">set_bits</a>()) {</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasMMX() &amp;&amp; X86::VR64RegClass.contains(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>))</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;      <span class="comment">// FIXME: Ignore MMX registers?</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160; </div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="keywordtype">unsigned</span> XorOp;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="keywordflow">if</span> (X86::VR128RegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>)) {</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;      <span class="comment">// XMM#</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasSSE1())</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      XorOp = X86::PXORrr;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (X86::VR256RegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>)) {</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      <span class="comment">// YMM#</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasAVX())</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      XorOp = X86::VPXORrr;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (X86::VR512RegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>)) {</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      <span class="comment">// ZMM#</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasAVX512())</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      XorOp = X86::VPXORYrr;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (X86::VK1RegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>) ||</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;               X86::VK2RegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>) ||</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;               X86::VK4RegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>) ||</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;               X86::VK8RegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>) ||</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;               X86::VK16RegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>)) {</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasVLX())</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      XorOp = <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasBWI() ? X86::KXORQrr : X86::KXORWrr;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    }</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160; </div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(XorOp), <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>)</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320dab502f975742e9bff6d6dd7b49439b806">RegState::Undef</a>)</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320dab502f975742e9bff6d6dd7b49439b806">RegState::Undef</a>);</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  }</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;}</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160; </div>
<div class="line"><a name="l00580"></a><span class="lineno"><a class="line" href="classllvm_1_1X86FrameLowering.html#a6a6cb0d8b5d8e3b35dee29f5e752d31c">  580</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1X86FrameLowering.html#a6a6cb0d8b5d8e3b35dee29f5e752d31c">X86FrameLowering::emitStackProbe</a>(</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>,</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <span class="keywordtype">bool</span> InProlog,</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    std::optional&lt;MachineFunction::DebugInstrOperandPair&gt; InstrNum)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1X86Subtarget.html">X86Subtarget</a> &amp;<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a> = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1X86Subtarget.html">X86Subtarget</a>&gt;();</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a7fa9b171fb4395bb4ac6eec96c47385d">isTargetWindowsCoreCLR</a>()) {</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <span class="keywordflow">if</span> (InProlog) {</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::STACKALLOC_W_PROBING))</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(0 <span class="comment">/* no explicit stack size */</span>);</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;      emitStackProbeInline(MF, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    }</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    emitStackProbeCall(MF, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, InProlog, InstrNum);</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  }</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;}</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160; </div>
<div class="line"><a name="l00597"></a><span class="lineno"><a class="line" href="classllvm_1_1X86FrameLowering.html#ad88384d07e66c382b05f793848660d90">  597</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1X86FrameLowering.html#ad88384d07e66c382b05f793848660d90">X86FrameLowering::stackProbeFunctionModifiesSP</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a17f3cb9bc2c5c8be538b3be839bbf02b">isOSWindows</a>() &amp;&amp; !<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a649bfd3c9cf9a6b1d1bab86556e866dd">isTargetWin64</a>();</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;}</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160; </div>
<div class="line"><a name="l00601"></a><span class="lineno"><a class="line" href="classllvm_1_1X86FrameLowering.html#a91705445bd9fc240a0092580cab1d092">  601</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1X86FrameLowering.html#a91705445bd9fc240a0092580cab1d092">X86FrameLowering::inlineStackProbe</a>(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF,</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                                        <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;PrologMBB)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <span class="keyword">auto</span> Where = <a class="code" href="namespacellvm.html#ac78c09ae232b2ce188ff590d51e3c268">llvm::find_if</a>(PrologMBB, [](<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == X86::STACKALLOC_W_PROBING;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  });</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  <span class="keywordflow">if</span> (Where != PrologMBB.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>()) {</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = PrologMBB.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab622d694b5fcb0edb99159f1ebdcdb6b">findDebugLoc</a>(Where);</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    emitStackProbeInline(MF, PrologMBB, Where, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    Where-&gt;eraseFromParent();</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  }</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;}</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160; </div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="keywordtype">void</span> X86FrameLowering::emitStackProbeInline(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF,</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                                            <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>,</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                                            <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>,</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                                            <span class="keyword">const</span> <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                                            <span class="keywordtype">bool</span> InProlog)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1X86Subtarget.html">X86Subtarget</a> &amp;<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a> = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1X86Subtarget.html">X86Subtarget</a>&gt;();</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a7fa9b171fb4395bb4ac6eec96c47385d">isTargetWindowsCoreCLR</a>() &amp;&amp; <a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.is64Bit())</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    emitStackProbeInlineWindowsCoreCLR64(MF, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, InProlog);</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    emitStackProbeInlineGeneric(MF, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, InProlog);</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;}</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160; </div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;<span class="keywordtype">void</span> X86FrameLowering::emitStackProbeInlineGeneric(</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>,</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <span class="keywordtype">bool</span> InProlog)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;AllocWithProbe = *<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = AllocWithProbe.<a class="code" href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">getOperand</a>(0).<a class="code" href="classllvm_1_1MachineOperand.html#a38b28a85f818b49d8806c150b8a5b4f7">getImm</a>();</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160; </div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1X86Subtarget.html">X86Subtarget</a> &amp;<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a> = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1X86Subtarget.html">X86Subtarget</a>&gt;();</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1X86TargetLowering.html">X86TargetLowering</a> &amp;TLI = *<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a97b47799ffd834b0fddcc8cee6fbe234">getTargetLowering</a>();</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!(<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.is64Bit() &amp;&amp; <a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a7fa9b171fb4395bb4ac6eec96c47385d">isTargetWindowsCoreCLR</a>()) &amp;&amp;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;         <span class="stringliteral">&quot;different expansion expected for CoreCLR 64 bit&quot;</span>);</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160; </div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  <span class="keyword">const</span> <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> StackProbeSize = TLI.getStackProbeSize(MF);</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> ProbeChunk = StackProbeSize * 8;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160; </div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> MaxAlign =</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;      <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;hasStackRealignment(MF) ? calculateMaxStackAlign(MF) : 0;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160; </div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  <span class="comment">// Synthesize a loop or unroll it, depending on the number of iterations.</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  <span class="comment">// BuildStackAlignAND ensures that only MaxAlign % StackProbeSize bits left</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <span class="comment">// between the unaligned rsp and current rsp.</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> &gt; ProbeChunk) {</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    emitStackProbeInlineGenericLoop(MF, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>,</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                                    MaxAlign % StackProbeSize);</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    emitStackProbeInlineGenericBlock(MF, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>,</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                                     MaxAlign % StackProbeSize);</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  }</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;}</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160; </div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="keywordtype">void</span> X86FrameLowering::emitStackProbeInlineGenericBlock(</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>,</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>,</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> AlignOffset)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160; </div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> NeedsDwarfCFI = needsDwarfCFI(MF);</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1codeview.html#a0cc2805b6b89a94c5b5983f95367168caf82a9de98dde777f8405bf54ed6fee23">HasFP</a> = <a class="code" href="classllvm_1_1X86FrameLowering.html#a27de32522776b0243eaa10ae9e0c27d4">hasFP</a>(MF);</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1X86Subtarget.html">X86Subtarget</a> &amp;<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a> = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1X86Subtarget.html">X86Subtarget</a>&gt;();</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1X86TargetLowering.html">X86TargetLowering</a> &amp;TLI = *<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a97b47799ffd834b0fddcc8cee6fbe234">getTargetLowering</a>();</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> MovMIOpc = <a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a> ? X86::MOV64mi32 : X86::MOV32mi;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  <span class="keyword">const</span> <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> StackProbeSize = TLI.getStackProbeSize(MF);</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160; </div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> CurrentOffset = 0;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160; </div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(AlignOffset &lt; StackProbeSize);</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160; </div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  <span class="comment">// If the offset is so small it fits within a page, there&#39;s nothing to do.</span></div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  <span class="keywordflow">if</span> (StackProbeSize &lt; <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> + AlignOffset) {</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160; </div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="namespacellvm_1_1ARM_1_1WinEH.html#abbeb84a95402989ddf5e26b616f8d9b4">StackAdjustment</a> = StackProbeSize - AlignOffset;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    BuildStackAdjustment(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, -<a class="code" href="namespacellvm_1_1ARM_1_1WinEH.html#abbeb84a95402989ddf5e26b616f8d9b4">StackAdjustment</a>, <span class="comment">/*InEpilogue=*/</span><span class="keyword">false</span>)</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <span class="keywordflow">if</span> (!HasFP &amp;&amp; NeedsDwarfCFI) {</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;      <a class="code" href="classllvm_1_1X86FrameLowering.html#aef0079a40a972f2942156b2d73bbf190">BuildCFI</a>(</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;          <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;          <a class="code" href="classllvm_1_1MCCFIInstruction.html#aba5c12cfe1d792d770234e2811c8a12e">MCCFIInstruction::createAdjustCfaOffset</a>(<span class="keyword">nullptr</span>, <a class="code" href="namespacellvm_1_1ARM_1_1WinEH.html#abbeb84a95402989ddf5e26b616f8d9b4">StackAdjustment</a>));</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    }</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160; </div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <a class="code" href="namespacellvm.html#afad63f3314b8553ee3c26d020b3ce09e">addRegOffset</a>(<a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(MovMIOpc))</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                     .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>),</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                 <a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>, <span class="keyword">false</span>, 0)</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(0)</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    NumFrameExtraProbe++;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    CurrentOffset = StackProbeSize - AlignOffset;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  }</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160; </div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  <span class="comment">// For the next N - 1 pages, just probe. I tried to take advantage of</span></div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  <span class="comment">// natural probes but it implies much more logic and there was very few</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  <span class="comment">// interesting natural probes to interleave.</span></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  <span class="keywordflow">while</span> (CurrentOffset + StackProbeSize &lt; <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>) {</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    BuildStackAdjustment(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, -StackProbeSize, <span class="comment">/*InEpilogue=*/</span><span class="keyword">false</span>)</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160; </div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    <span class="keywordflow">if</span> (!HasFP &amp;&amp; NeedsDwarfCFI) {</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;      <a class="code" href="classllvm_1_1X86FrameLowering.html#aef0079a40a972f2942156b2d73bbf190">BuildCFI</a>(</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;          <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;          <a class="code" href="classllvm_1_1MCCFIInstruction.html#aba5c12cfe1d792d770234e2811c8a12e">MCCFIInstruction::createAdjustCfaOffset</a>(<span class="keyword">nullptr</span>, StackProbeSize));</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    }</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <a class="code" href="namespacellvm.html#afad63f3314b8553ee3c26d020b3ce09e">addRegOffset</a>(<a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(MovMIOpc))</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;                     .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>),</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;                 <a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>, <span class="keyword">false</span>, 0)</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(0)</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    NumFrameExtraProbe++;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    CurrentOffset += StackProbeSize;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  }</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160; </div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  <span class="comment">// No need to probe the tail, it is smaller than a Page.</span></div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> ChunkSize = <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> - CurrentOffset;</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  <span class="keywordflow">if</span> (ChunkSize == <a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>) {</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <span class="comment">// Use push for slot sized adjustments as a size optimization,</span></div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <span class="comment">// like emitSPUpdate does when not probing.</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = <a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a> ? X86::RAX : <a class="code" href="namespacellvm_1_1N86.html#a004aaa5711c58178d0371ab88bf1bd63a488c3a2a57ed8f23f0c48d8b40348af0">X86::EAX</a>;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="keywordtype">unsigned</span> Opc = <a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a> ? X86::PUSH64r : X86::PUSH32r;</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(Opc))</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320dab502f975742e9bff6d6dd7b49439b806">RegState::Undef</a>)</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    BuildStackAdjustment(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, -ChunkSize, <span class="comment">/*InEpilogue=*/</span><span class="keyword">false</span>)</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  }</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  <span class="comment">// No need to adjust Dwarf CFA offset here, the last position of the stack has</span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;  <span class="comment">// been defined</span></div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;}</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160; </div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;<span class="keywordtype">void</span> X86FrameLowering::emitStackProbeInlineGenericLoop(</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>,</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>,</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> AlignOffset)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> &amp;&amp; <span class="stringliteral">&quot;null offset&quot;</span>);</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160; </div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7ebfe0cc2f78ae5f27e1944412606973">computeRegisterLiveness</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>, X86::EFLAGS, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>) !=</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;             <a class="code" href="classllvm_1_1MachineBasicBlock.html#af0288e181965a5ff9f0c7a75201fd142accc15fa5c7a27d461dc9a884cc9a2dc8">MachineBasicBlock::LQR_Live</a> &amp;&amp;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;         <span class="stringliteral">&quot;Inline stack probe loop will clobber live EFLAGS.&quot;</span>);</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160; </div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> NeedsDwarfCFI = needsDwarfCFI(MF);</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1codeview.html#a0cc2805b6b89a94c5b5983f95367168caf82a9de98dde777f8405bf54ed6fee23">HasFP</a> = <a class="code" href="classllvm_1_1X86FrameLowering.html#a27de32522776b0243eaa10ae9e0c27d4">hasFP</a>(MF);</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1X86Subtarget.html">X86Subtarget</a> &amp;<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a> = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1X86Subtarget.html">X86Subtarget</a>&gt;();</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1X86TargetLowering.html">X86TargetLowering</a> &amp;TLI = *<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a97b47799ffd834b0fddcc8cee6fbe234">getTargetLowering</a>();</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> MovMIOpc = <a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a> ? X86::MOV64mi32 : X86::MOV32mi;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  <span class="keyword">const</span> <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> StackProbeSize = TLI.getStackProbeSize(MF);</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160; </div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  <span class="keywordflow">if</span> (AlignOffset) {</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <span class="keywordflow">if</span> (AlignOffset &lt; StackProbeSize) {</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;      <span class="comment">// Perform a first smaller allocation followed by a probe.</span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;      BuildStackAdjustment(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, -AlignOffset, <span class="comment">/*InEpilogue=*/</span><span class="keyword">false</span>)</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160; </div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;      <a class="code" href="namespacellvm.html#afad63f3314b8553ee3c26d020b3ce09e">addRegOffset</a>(<a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(MovMIOpc))</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;                       .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>),</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;                   <a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>, <span class="keyword">false</span>, 0)</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(0)</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;      NumFrameExtraProbe++;</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;      <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> -= AlignOffset;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    }</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  }</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160; </div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  <span class="comment">// Synthesize a loop</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  NumFrameLoopProbe++;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *LLVM_BB = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a856266240556bbae90bc5ba75c156eef">getBasicBlock</a>();</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160; </div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *testMBB = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a1d483b4ac24a96c2250becb232ed4cb4">CreateMachineBasicBlock</a>(LLVM_BB);</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *tailMBB = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a1d483b4ac24a96c2250becb232ed4cb4">CreateMachineBasicBlock</a>(LLVM_BB);</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160; </div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  <a class="code" href="classllvm_1_1ilist__iterator.html">MachineFunction::iterator</a> MBBIter = ++<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>();</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;  MF.<a class="code" href="classllvm_1_1MachineFunction.html#af4c0db6d503e0ba3b8e44067023ffbba">insert</a>(MBBIter, testMBB);</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;  MF.<a class="code" href="classllvm_1_1MachineFunction.html#af4c0db6d503e0ba3b8e44067023ffbba">insert</a>(MBBIter, tailMBB);</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160; </div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> FinalStackProbed = <a class="code" href="classllvm_1_1X86FrameLowering.html#abb804392ca8368795013f2e5dc001ee2">Uses64BitFramePtr</a> ? X86::R11</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                              : <a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a>         ? X86::R11D</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;                                                : <a class="code" href="namespacellvm_1_1N86.html#a004aaa5711c58178d0371ab88bf1bd63a488c3a2a57ed8f23f0c48d8b40348af0">X86::EAX</a>;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160; </div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(TargetOpcode::COPY), FinalStackProbed)</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>)</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160; </div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;  <span class="comment">// save loop bound</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  {</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> BoundOffset = <a class="code" href="namespacellvm.html#ad9be86c95736bfa4bb0dc52322a0002a">alignDown</a>(<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>, StackProbeSize);</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> SUBOpc = <a class="code" href="X86FrameLowering_8cpp.html#a6420ad77b9c213cea2ae49052e0ff55a">getSUBriOpcode</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#abb804392ca8368795013f2e5dc001ee2">Uses64BitFramePtr</a>, BoundOffset);</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(SUBOpc), FinalStackProbed)</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(FinalStackProbed)</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(BoundOffset)</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160; </div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    <span class="comment">// while in the loop, use loop-invariant reg for CFI,</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <span class="comment">// instead of the stack pointer, which changes during the loop</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <span class="keywordflow">if</span> (!HasFP &amp;&amp; NeedsDwarfCFI) {</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;      <span class="comment">// x32 uses the same DWARF register numbers as x86-64,</span></div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;      <span class="comment">// so there isn&#39;t a register number for r11d, we must use r11 instead</span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1Register.html">Register</a> DwarfFinalStackProbed =</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;          <a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a60d014846b23498268005ffec9608bc0">isTarget64BitILP32</a>()</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;              ? <a class="code" href="classllvm_1_1Register.html">Register</a>(<a class="code" href="namespacellvm.html#a27b344a283e0620f484144889fe32064">getX86SubSuperRegister</a>(FinalStackProbed, 64))</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;              : FinalStackProbed;</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160; </div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;      <a class="code" href="classllvm_1_1X86FrameLowering.html#aef0079a40a972f2942156b2d73bbf190">BuildCFI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;               <a class="code" href="classllvm_1_1MCCFIInstruction.html#a9babd4ee8fb9fc9bb25eeac8274625d1">MCCFIInstruction::createDefCfaRegister</a>(</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;                   <span class="keyword">nullptr</span>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;getDwarfRegNum(DwarfFinalStackProbed, <span class="keyword">true</span>)));</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      <a class="code" href="classllvm_1_1X86FrameLowering.html#aef0079a40a972f2942156b2d73bbf190">BuildCFI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;               <a class="code" href="classllvm_1_1MCCFIInstruction.html#aba5c12cfe1d792d770234e2811c8a12e">MCCFIInstruction::createAdjustCfaOffset</a>(<span class="keyword">nullptr</span>, BoundOffset));</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    }</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  }</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160; </div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  <span class="comment">// allocate a page</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;  BuildStackAdjustment(*testMBB, testMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>(), <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, -StackProbeSize,</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;                       <span class="comment">/*InEpilogue=*/</span><span class="keyword">false</span>)</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160; </div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  <span class="comment">// touch the page</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  <a class="code" href="namespacellvm.html#afad63f3314b8553ee3c26d020b3ce09e">addRegOffset</a>(<a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(testMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(MovMIOpc))</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;                   .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>),</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;               <a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>, <span class="keyword">false</span>, 0)</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(0)</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160; </div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  <span class="comment">// cmp with stack pointer bound</span></div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(testMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(<a class="code" href="classllvm_1_1X86FrameLowering.html#abb804392ca8368795013f2e5dc001ee2">Uses64BitFramePtr</a> ? X86::CMP64rr : X86::CMP32rr))</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>)</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(FinalStackProbed)</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160; </div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  <span class="comment">// jump</span></div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;  <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(testMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::JCC_1))</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#af8571e8dfb010fd8ae76cc4f87aafaac">addMBB</a>(testMBB)</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm_1_1X86.html#a1a356a51a1fb4cc3c427599082cf1d2eacb2f86eaebe8b719f743d17a2d5a5f3d">X86::COND_NE</a>)</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  testMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a935e2a8884592189d8f261634a0b24c5">addSuccessor</a>(testMBB);</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  testMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a935e2a8884592189d8f261634a0b24c5">addSuccessor</a>(tailMBB);</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160; </div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  <span class="comment">// BB management</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;  tailMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#adf0023bdc4f05a7849c35b1c859580d8">splice</a>(tailMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>(), &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>());</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;  tailMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a046a35e36c4c1206711ea82ee9cb6d72">transferSuccessorsAndUpdatePHIs</a>(&amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;  <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a935e2a8884592189d8f261634a0b24c5">addSuccessor</a>(testMBB);</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160; </div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  <span class="comment">// handle tail</span></div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  <span class="keyword">const</span> <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> TailOffset = <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> % StackProbeSize;</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> TailMBBIter = tailMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>();</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  <span class="keywordflow">if</span> (TailOffset) {</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    BuildStackAdjustment(*tailMBB, TailMBBIter, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, -TailOffset,</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;                         <span class="comment">/*InEpilogue=*/</span><span class="keyword">false</span>)</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;  }</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160; </div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  <span class="comment">// after the loop, switch back to stack pointer for CFI</span></div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;  <span class="keywordflow">if</span> (!HasFP &amp;&amp; NeedsDwarfCFI) {</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    <span class="comment">// x32 uses the same DWARF register numbers as x86-64,</span></div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <span class="comment">// so there isn&#39;t a register number for esp, we must use rsp instead</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Register.html">Register</a> DwarfStackPtr =</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;        <a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a60d014846b23498268005ffec9608bc0">isTarget64BitILP32</a>()</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;            ? <a class="code" href="classllvm_1_1Register.html">Register</a>(<a class="code" href="namespacellvm.html#a27b344a283e0620f484144889fe32064">getX86SubSuperRegister</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>, 64))</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;            : <a class="code" href="classllvm_1_1Register.html">Register</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>);</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160; </div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <a class="code" href="classllvm_1_1X86FrameLowering.html#aef0079a40a972f2942156b2d73bbf190">BuildCFI</a>(*tailMBB, TailMBBIter, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;             <a class="code" href="classllvm_1_1MCCFIInstruction.html#a9babd4ee8fb9fc9bb25eeac8274625d1">MCCFIInstruction::createDefCfaRegister</a>(</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;                 <span class="keyword">nullptr</span>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;getDwarfRegNum(DwarfStackPtr, <span class="keyword">true</span>)));</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  }</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160; </div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  <span class="comment">// Update Live In information</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;  <a class="code" href="namespacellvm.html#a3f1d4b41dbb79806492f0e48e54e2222">recomputeLiveIns</a>(*testMBB);</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;  <a class="code" href="namespacellvm.html#a3f1d4b41dbb79806492f0e48e54e2222">recomputeLiveIns</a>(*tailMBB);</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;}</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160; </div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;<span class="keywordtype">void</span> X86FrameLowering::emitStackProbeInlineWindowsCoreCLR64(</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>,</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <span class="keywordtype">bool</span> InProlog)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1X86Subtarget.html">X86Subtarget</a> &amp;<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a> = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1X86Subtarget.html">X86Subtarget</a>&gt;();</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.is64Bit() &amp;&amp; <span class="stringliteral">&quot;different expansion needed for 32 bit&quot;</span>);</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a7fa9b171fb4395bb4ac6eec96c47385d">isTargetWindowsCoreCLR</a>() &amp;&amp; <span class="stringliteral">&quot;custom expansion expects CoreCLR&quot;</span>);</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> &amp;<a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a> = *<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a77c5541c3a77bc35d9c6a49ab7faf97d">getInstrInfo</a>();</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *LLVM_BB = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a856266240556bbae90bc5ba75c156eef">getBasicBlock</a>();</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160; </div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7ebfe0cc2f78ae5f27e1944412606973">computeRegisterLiveness</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>, X86::EFLAGS, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>) !=</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;             <a class="code" href="classllvm_1_1MachineBasicBlock.html#af0288e181965a5ff9f0c7a75201fd142accc15fa5c7a27d461dc9a884cc9a2dc8">MachineBasicBlock::LQR_Live</a> &amp;&amp;</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;         <span class="stringliteral">&quot;Inline stack probe loop will clobber live EFLAGS.&quot;</span>);</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160; </div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;  <span class="comment">// RAX contains the number of bytes of desired stack adjustment.</span></div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;  <span class="comment">// The handling here assumes this value has already been updated so as to</span></div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  <span class="comment">// maintain stack alignment.</span></div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  <span class="comment">// We need to exit with RSP modified by this amount and execute suitable</span></div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  <span class="comment">// page touches to notify the OS that we&#39;re growing the stack responsibly.</span></div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  <span class="comment">// All stack probing must be done without modifying RSP.</span></div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  <span class="comment">// MBB:</span></div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  <span class="comment">//    SizeReg = RAX;</span></div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  <span class="comment">//    ZeroReg = 0</span></div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  <span class="comment">//    CopyReg = RSP</span></div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  <span class="comment">//    Flags, TestReg = CopyReg - SizeReg</span></div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;  <span class="comment">//    FinalReg = !Flags.Ovf ? TestReg : ZeroReg</span></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  <span class="comment">//    LimitReg = gs magic thread env access</span></div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  <span class="comment">//    if FinalReg &gt;= LimitReg goto ContinueMBB</span></div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;  <span class="comment">// RoundBB:</span></div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  <span class="comment">//    RoundReg = page address of FinalReg</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;  <span class="comment">// LoopMBB:</span></div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  <span class="comment">//    LoopReg = PHI(LimitReg,ProbeReg)</span></div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;  <span class="comment">//    ProbeReg = LoopReg - PageSize</span></div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  <span class="comment">//    [ProbeReg] = 0</span></div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  <span class="comment">//    if (ProbeReg &gt; RoundReg) goto LoopMBB</span></div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  <span class="comment">// ContinueMBB:</span></div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  <span class="comment">//    RSP = RSP - RAX</span></div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  <span class="comment">//    [rest of original MBB]</span></div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160; </div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;  <span class="comment">// Set up the new basic blocks</span></div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *RoundMBB = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a1d483b4ac24a96c2250becb232ed4cb4">CreateMachineBasicBlock</a>(LLVM_BB);</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *LoopMBB = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a1d483b4ac24a96c2250becb232ed4cb4">CreateMachineBasicBlock</a>(LLVM_BB);</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *ContinueMBB = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a1d483b4ac24a96c2250becb232ed4cb4">CreateMachineBasicBlock</a>(LLVM_BB);</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160; </div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;  <a class="code" href="classllvm_1_1ilist__iterator.html">MachineFunction::iterator</a> MBBIter = std::next(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>());</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;  MF.<a class="code" href="classllvm_1_1MachineFunction.html#af4c0db6d503e0ba3b8e44067023ffbba">insert</a>(MBBIter, RoundMBB);</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;  MF.<a class="code" href="classllvm_1_1MachineFunction.html#af4c0db6d503e0ba3b8e44067023ffbba">insert</a>(MBBIter, LoopMBB);</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;  MF.<a class="code" href="classllvm_1_1MachineFunction.html#af4c0db6d503e0ba3b8e44067023ffbba">insert</a>(MBBIter, ContinueMBB);</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160; </div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;  <span class="comment">// Split MBB and move the tail portion down to ContinueMBB.</span></div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> BeforeMBBI = std::prev(<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>);</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  ContinueMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#adf0023bdc4f05a7849c35b1c859580d8">splice</a>(ContinueMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>(), &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>());</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;  ContinueMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a046a35e36c4c1206711ea82ee9cb6d72">transferSuccessorsAndUpdatePHIs</a>(&amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160; </div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  <span class="comment">// Some useful constants</span></div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;  <span class="keyword">const</span> int64_t ThreadEnvironmentStackLimit = 0x10;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;  <span class="keyword">const</span> int64_t <a class="code" href="ImplicitNullChecks_8cpp.html#a7c77357cccbb9291259cfcacd7324e2e">PageSize</a> = 0x1000;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;  <span class="keyword">const</span> int64_t PageMask = ~(<a class="code" href="ImplicitNullChecks_8cpp.html#a7c77357cccbb9291259cfcacd7324e2e">PageSize</a> - 1);</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160; </div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  <span class="comment">// Registers we need. For the normal case we use virtual</span></div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;  <span class="comment">// registers. For the prolog expansion we use RAX, RCX and RDX.</span></div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">getRegInfo</a>();</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *RegClass = &amp;X86::GR64RegClass;</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Register.html">Register</a> SizeReg = InProlog ? X86::RAX</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;                                    : <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5c77792a06583e0fe7a0379ad94a2809">createVirtualRegister</a>(RegClass),</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;                 ZeroReg = InProlog ? X86::RCX</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;                                    : <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5c77792a06583e0fe7a0379ad94a2809">createVirtualRegister</a>(RegClass),</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;                 CopyReg = InProlog ? X86::RDX</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;                                    : <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5c77792a06583e0fe7a0379ad94a2809">createVirtualRegister</a>(RegClass),</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;                 TestReg = InProlog ? X86::RDX</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;                                    : <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5c77792a06583e0fe7a0379ad94a2809">createVirtualRegister</a>(RegClass),</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;                 FinalReg = InProlog ? X86::RDX</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;                                     : <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5c77792a06583e0fe7a0379ad94a2809">createVirtualRegister</a>(RegClass),</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;                 RoundedReg = InProlog ? X86::RDX</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;                                       : <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5c77792a06583e0fe7a0379ad94a2809">createVirtualRegister</a>(RegClass),</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;                 LimitReg = InProlog ? X86::RCX</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;                                     : <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5c77792a06583e0fe7a0379ad94a2809">createVirtualRegister</a>(RegClass),</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;                 JoinReg = InProlog ? X86::RCX</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;                                    : <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5c77792a06583e0fe7a0379ad94a2809">createVirtualRegister</a>(RegClass),</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;                 ProbeReg = InProlog ? X86::RCX</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;                                     : <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5c77792a06583e0fe7a0379ad94a2809">createVirtualRegister</a>(RegClass);</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160; </div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;  <span class="comment">// SP-relative offsets where we can save RCX and RDX.</span></div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;  int64_t RCXShadowSlot = 0;</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;  int64_t RDXShadowSlot = 0;</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160; </div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;  <span class="comment">// If inlining in the prolog, save RCX and RDX.</span></div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;  <span class="keywordflow">if</span> (InProlog) {</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    <span class="comment">// Compute the offsets. We need to account for things already</span></div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    <span class="comment">// pushed onto the stack at this point: return address, frame</span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    <span class="comment">// pointer (if used), and callee saves.</span></div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    <a class="code" href="classllvm_1_1X86MachineFunctionInfo.html">X86MachineFunctionInfo</a> *X86FI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html">X86MachineFunctionInfo</a>&gt;();</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    <span class="keyword">const</span> int64_t CalleeSaveSize = X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#ad6e59a435273270b3ef84dc8a841c122">getCalleeSavedFrameSize</a>();</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1codeview.html#a0cc2805b6b89a94c5b5983f95367168caf82a9de98dde777f8405bf54ed6fee23">HasFP</a> = <a class="code" href="classllvm_1_1X86FrameLowering.html#a27de32522776b0243eaa10ae9e0c27d4">hasFP</a>(MF);</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160; </div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    <span class="comment">// Check if we need to spill RCX and/or RDX.</span></div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    <span class="comment">// Here we assume that no earlier prologue instruction changes RCX and/or</span></div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    <span class="comment">// RDX, so checking the block live-ins is enough.</span></div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> IsRCXLiveIn = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a5fc7747b752105f022c214bd2403eeee">isLiveIn</a>(X86::RCX);</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> IsRDXLiveIn = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a5fc7747b752105f022c214bd2403eeee">isLiveIn</a>(X86::RDX);</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    int64_t InitSlot = 8 + CalleeSaveSize + (<a class="code" href="namespacellvm_1_1codeview.html#a0cc2805b6b89a94c5b5983f95367168caf82a9de98dde777f8405bf54ed6fee23">HasFP</a> ? 8 : 0);</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    <span class="comment">// Assign the initial slot to both registers, then change RDX&#39;s slot if both</span></div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    <span class="comment">// need to be spilled.</span></div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    <span class="keywordflow">if</span> (IsRCXLiveIn)</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;      RCXShadowSlot = InitSlot;</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    <span class="keywordflow">if</span> (IsRDXLiveIn)</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;      RDXShadowSlot = InitSlot;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    <span class="keywordflow">if</span> (IsRDXLiveIn &amp;&amp; IsRCXLiveIn)</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;      RDXShadowSlot += 8;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <span class="comment">// Emit the saves if needed.</span></div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <span class="keywordflow">if</span> (IsRCXLiveIn)</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;      <a class="code" href="namespacellvm.html#afad63f3314b8553ee3c26d020b3ce09e">addRegOffset</a>(<a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(&amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::MOV64mr)), X86::RSP, <span class="keyword">false</span>,</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;                   RCXShadowSlot)</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(X86::RCX);</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    <span class="keywordflow">if</span> (IsRDXLiveIn)</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;      <a class="code" href="namespacellvm.html#afad63f3314b8553ee3c26d020b3ce09e">addRegOffset</a>(<a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(&amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::MOV64mr)), X86::RSP, <span class="keyword">false</span>,</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;                   RDXShadowSlot)</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(X86::RDX);</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <span class="comment">// Not in the prolog. Copy RAX to a virtual reg.</span></div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(&amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::MOV64rr), SizeReg).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(X86::RAX);</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;  }</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160; </div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;  <span class="comment">// Add code to MBB to check for overflow and set the new target stack pointer</span></div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;  <span class="comment">// to zero if so.</span></div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(&amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::XOR64rr), ZeroReg)</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(ZeroReg, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320dab502f975742e9bff6d6dd7b49439b806">RegState::Undef</a>)</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(ZeroReg, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320dab502f975742e9bff6d6dd7b49439b806">RegState::Undef</a>);</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;  <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(&amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::MOV64rr), CopyReg).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(X86::RSP);</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;  <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(&amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::SUB64rr), TestReg)</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(CopyReg)</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(SizeReg);</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;  <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(&amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::CMOV64rr), FinalReg)</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(TestReg)</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(ZeroReg)</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm_1_1X86.html#a1a356a51a1fb4cc3c427599082cf1d2eac9ae7c779ffc6865536d9f164ebf09b9">X86::COND_B</a>);</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160; </div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;  <span class="comment">// FinalReg now holds final stack pointer value, or zero if</span></div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;  <span class="comment">// allocation would overflow. Compare against the current stack</span></div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;  <span class="comment">// limit from the thread environment block. Note this limit is the</span></div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;  <span class="comment">// lowest touched page on the stack, not the point at which the OS</span></div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;  <span class="comment">// will cause an overflow exception, so this is just an optimization</span></div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;  <span class="comment">// to avoid unnecessarily touching pages that are below the current</span></div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;  <span class="comment">// SP but already committed to the stack by the OS.</span></div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;  <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(&amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::MOV64rm), LimitReg)</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(0)</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(1)</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(0)</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(ThreadEnvironmentStackLimit)</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730">X86::GS</a>);</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;  <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(&amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::CMP64rr)).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(FinalReg).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(LimitReg);</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;  <span class="comment">// Jump if the desired stack pointer is at or above the stack limit.</span></div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;  <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(&amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::JCC_1)).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#af8571e8dfb010fd8ae76cc4f87aafaac">addMBB</a>(ContinueMBB).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm_1_1X86.html#a1a356a51a1fb4cc3c427599082cf1d2eafeeb44274a14a14010dc990daecb39a0">X86::COND_AE</a>);</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160; </div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;  <span class="comment">// Add code to roundMBB to round the final stack pointer to a page boundary.</span></div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;  RoundMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acce9c12cc977a88dc7bc51493ce7681c">addLiveIn</a>(FinalReg);</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;  <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(RoundMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::AND64ri32), RoundedReg)</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(FinalReg)</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(PageMask);</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;  <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(RoundMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::JMP_1)).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#af8571e8dfb010fd8ae76cc4f87aafaac">addMBB</a>(LoopMBB);</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160; </div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;  <span class="comment">// LimitReg now holds the current stack limit, RoundedReg page-rounded</span></div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;  <span class="comment">// final RSP value. Add code to loopMBB to decrement LimitReg page-by-page</span></div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;  <span class="comment">// and probe until we reach RoundedReg.</span></div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;  <span class="keywordflow">if</span> (!InProlog) {</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(LoopMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">X86::PHI</a>), JoinReg)</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(LimitReg)</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#af8571e8dfb010fd8ae76cc4f87aafaac">addMBB</a>(RoundMBB)</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(ProbeReg)</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#af8571e8dfb010fd8ae76cc4f87aafaac">addMBB</a>(LoopMBB);</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;  }</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160; </div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;  LoopMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acce9c12cc977a88dc7bc51493ce7681c">addLiveIn</a>(JoinReg);</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;  <a class="code" href="namespacellvm.html#afad63f3314b8553ee3c26d020b3ce09e">addRegOffset</a>(<a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(LoopMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::LEA64r), ProbeReg), JoinReg,</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;               <span class="keyword">false</span>, -<a class="code" href="ImplicitNullChecks_8cpp.html#a7c77357cccbb9291259cfcacd7324e2e">PageSize</a>);</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160; </div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;  <span class="comment">// Probe by storing a byte onto the stack.</span></div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;  <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(LoopMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::MOV8mi))</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(ProbeReg)</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(1)</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(0)</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(0)</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(0)</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(0);</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160; </div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;  LoopMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acce9c12cc977a88dc7bc51493ce7681c">addLiveIn</a>(RoundedReg);</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;  <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(LoopMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::CMP64rr))</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(RoundedReg)</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(ProbeReg);</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;  <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(LoopMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::JCC_1)).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#af8571e8dfb010fd8ae76cc4f87aafaac">addMBB</a>(LoopMBB).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm_1_1X86.html#a1a356a51a1fb4cc3c427599082cf1d2eacb2f86eaebe8b719f743d17a2d5a5f3d">X86::COND_NE</a>);</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160; </div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> ContinueMBBI = ContinueMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#aa7dc7faaab4856b8f0014b8283e26c7b">getFirstNonPHI</a>();</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160; </div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;  <span class="comment">// If in prolog, restore RDX and RCX.</span></div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;  <span class="keywordflow">if</span> (InProlog) {</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <span class="keywordflow">if</span> (RCXShadowSlot) <span class="comment">// It means we spilled RCX in the prologue.</span></div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;      <a class="code" href="namespacellvm.html#afad63f3314b8553ee3c26d020b3ce09e">addRegOffset</a>(<a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(*ContinueMBB, ContinueMBBI, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;                           <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::MOV64rm), X86::RCX),</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;                   X86::RSP, <span class="keyword">false</span>, RCXShadowSlot);</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <span class="keywordflow">if</span> (RDXShadowSlot) <span class="comment">// It means we spilled RDX in the prologue.</span></div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;      <a class="code" href="namespacellvm.html#afad63f3314b8553ee3c26d020b3ce09e">addRegOffset</a>(<a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(*ContinueMBB, ContinueMBBI, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;                           <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::MOV64rm), X86::RDX),</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;                   X86::RSP, <span class="keyword">false</span>, RDXShadowSlot);</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;  }</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160; </div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;  <span class="comment">// Now that the probing is done, add code to continueMBB to update</span></div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;  <span class="comment">// the stack pointer for real.</span></div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;  ContinueMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acce9c12cc977a88dc7bc51493ce7681c">addLiveIn</a>(SizeReg);</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;  <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(*ContinueMBB, ContinueMBBI, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::SUB64rr), X86::RSP)</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(X86::RSP)</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(SizeReg);</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160; </div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;  <span class="comment">// Add the control flow edges we need.</span></div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;  <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a935e2a8884592189d8f261634a0b24c5">addSuccessor</a>(ContinueMBB);</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;  <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a935e2a8884592189d8f261634a0b24c5">addSuccessor</a>(RoundMBB);</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;  RoundMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a935e2a8884592189d8f261634a0b24c5">addSuccessor</a>(LoopMBB);</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;  LoopMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a935e2a8884592189d8f261634a0b24c5">addSuccessor</a>(ContinueMBB);</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;  LoopMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a935e2a8884592189d8f261634a0b24c5">addSuccessor</a>(LoopMBB);</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160; </div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;  <span class="comment">// Mark all the instructions added to the prolog as frame setup.</span></div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;  <span class="keywordflow">if</span> (InProlog) {</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    <span class="keywordflow">for</span> (++BeforeMBBI; BeforeMBBI != <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>(); ++BeforeMBBI) {</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;      BeforeMBBI-&gt;setFlag(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    }</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : *RoundMBB) {</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.setFlag(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    }</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : *LoopMBB) {</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.setFlag(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    }</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> :</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;         <a class="code" href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">llvm::make_range</a>(ContinueMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>(), ContinueMBBI)) {</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.setFlag(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    }</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;  }</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;}</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160; </div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;<span class="keywordtype">void</span> X86FrameLowering::emitStackProbeCall(</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>,</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <span class="keywordtype">bool</span> InProlog,</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    std::optional&lt;MachineFunction::DebugInstrOperandPair&gt; InstrNum)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  <span class="keywordtype">bool</span> IsLargeCodeModel = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ae68d159179d37dc7969439d842e2644f">getTarget</a>().<a class="code" href="classllvm_1_1TargetMachine.html#ae106f6c6362377b3016f0d174227e193">getCodeModel</a>() == <a class="code" href="namespacellvm_1_1CodeModel.html#afc59396a9e5809fc92938e203d91a8dfa5208f558fccf9f63423fb5385bb3e75c">CodeModel::Large</a>;</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160; </div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;  <span class="comment">// FIXME: Add indirect thunk support and remove this.</span></div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a> &amp;&amp; IsLargeCodeModel &amp;&amp; <a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#af9fd7bd9b13be1d777c9ac2ac90784c1">useIndirectThunkCalls</a>())</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    <a class="code" href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">report_fatal_error</a>(<span class="stringliteral">&quot;Emitting stack probe calls on 64-bit with the large &quot;</span></div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;                       <span class="stringliteral">&quot;code model and indirect thunks not yet implemented.&quot;</span>);</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160; </div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7ebfe0cc2f78ae5f27e1944412606973">computeRegisterLiveness</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>, X86::EFLAGS, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>) !=</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;             <a class="code" href="classllvm_1_1MachineBasicBlock.html#af0288e181965a5ff9f0c7a75201fd142accc15fa5c7a27d461dc9a884cc9a2dc8">MachineBasicBlock::LQR_Live</a> &amp;&amp;</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;         <span class="stringliteral">&quot;Stack probe calls will clobber live EFLAGS.&quot;</span>);</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160; </div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  <span class="keywordtype">unsigned</span> CallOp;</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a>)</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    CallOp = IsLargeCodeModel ? X86::CALL64r : X86::CALL64pcrel32;</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    CallOp = X86::CALLpcrel32;</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160; </div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> <a class="code" href="namespacellvm_1_1ARMBuildAttrs.html#aea10ca6bf098a425d51ac7fe65d30ed6aa10cda45fcbf7c8c9804e4e4d2e1bcdf">Symbol</a> = <a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a97b47799ffd834b0fddcc8cee6fbe234">getTargetLowering</a>()-&gt;<a class="code" href="classllvm_1_1X86TargetLowering.html#a92e17e524fe1c82a26b5433b6e9715e3">getStackProbeSymbolName</a>(MF);</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160; </div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> CI;</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> ExpansionMBBI = std::prev(<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>);</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160; </div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;  <span class="comment">// All current stack probes take AX and SP as input, clobber flags, and</span></div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;  <span class="comment">// preserve all registers. x86_64 probes leave RSP unmodified.</span></div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a> &amp;&amp; MF.<a class="code" href="classllvm_1_1MachineFunction.html#ae68d159179d37dc7969439d842e2644f">getTarget</a>().<a class="code" href="classllvm_1_1TargetMachine.html#ae106f6c6362377b3016f0d174227e193">getCodeModel</a>() == <a class="code" href="namespacellvm_1_1CodeModel.html#afc59396a9e5809fc92938e203d91a8dfa5208f558fccf9f63423fb5385bb3e75c">CodeModel::Large</a>) {</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    <span class="comment">// For the large code model, we have to call through a register. Use R11,</span></div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    <span class="comment">// as it is scratch in all supported calling conventions.</span></div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::MOV64ri), X86::R11)</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ac6672df14319c2e931c3b2c583ea837c">addExternalSymbol</a>(MF.<a class="code" href="classllvm_1_1MachineFunction.html#a6af779d02be6e05e3315887e58e8ec35">createExternalSymbolName</a>(Symbol));</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    CI = <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(CallOp)).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(X86::R11);</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    CI = <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(CallOp))</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ac6672df14319c2e931c3b2c583ea837c">addExternalSymbol</a>(MF.<a class="code" href="classllvm_1_1MachineFunction.html#a6af779d02be6e05e3315887e58e8ec35">createExternalSymbolName</a>(Symbol));</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;  }</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160; </div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;  <span class="keywordtype">unsigned</span> AX = <a class="code" href="classllvm_1_1X86FrameLowering.html#abb804392ca8368795013f2e5dc001ee2">Uses64BitFramePtr</a> ? X86::RAX : <a class="code" href="namespacellvm_1_1N86.html#a004aaa5711c58178d0371ab88bf1bd63a488c3a2a57ed8f23f0c48d8b40348af0">X86::EAX</a>;</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;  <span class="keywordtype">unsigned</span> SP = <a class="code" href="classllvm_1_1X86FrameLowering.html#abb804392ca8368795013f2e5dc001ee2">Uses64BitFramePtr</a> ? X86::RSP : <a class="code" href="namespacellvm_1_1N86.html#a004aaa5711c58178d0371ab88bf1bd63a303dfe7256beaf60eaaa93d1c418965b">X86::ESP</a>;</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;  CI.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(AX, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da0fec8ba6f4a4dc758b725205985eee99">RegState::Implicit</a>)</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(SP, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da0fec8ba6f4a4dc758b725205985eee99">RegState::Implicit</a>)</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(AX, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da72c17e2ff2d5af62a30e56ac152aa8d5">RegState::Define</a> | <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da0fec8ba6f4a4dc758b725205985eee99">RegState::Implicit</a>)</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(SP, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da72c17e2ff2d5af62a30e56ac152aa8d5">RegState::Define</a> | <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da0fec8ba6f4a4dc758b725205985eee99">RegState::Implicit</a>)</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(X86::EFLAGS, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da72c17e2ff2d5af62a30e56ac152aa8d5">RegState::Define</a> | <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da0fec8ba6f4a4dc758b725205985eee99">RegState::Implicit</a>);</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160; </div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *ModInst = CI;</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a649bfd3c9cf9a6b1d1bab86556e866dd">isTargetWin64</a>() || !<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a17f3cb9bc2c5c8be538b3be839bbf02b">isOSWindows</a>()) {</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    <span class="comment">// MSVC x32&#39;s _chkstk and cygwin/mingw&#39;s _alloca adjust %esp themselves.</span></div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    <span class="comment">// MSVC x64&#39;s __chkstk and cygwin/mingw&#39;s ___chkstk_ms do not adjust %rsp</span></div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    <span class="comment">// themselves. They also does not clobber %rax so we can reuse it when</span></div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;    <span class="comment">// adjusting %rsp.</span></div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    <span class="comment">// All other platforms do not specify a particular ABI for the stack probe</span></div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    <span class="comment">// function, so we arbitrarily define it to not adjust %esp/%rsp itself.</span></div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    ModInst =</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;        <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(<a class="code" href="X86FrameLowering_8cpp.html#ae47fe718044419c88efa13772780b920">getSUBrrOpcode</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#abb804392ca8368795013f2e5dc001ee2">Uses64BitFramePtr</a>)), SP)</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(SP)</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(AX);</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;  }</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160; </div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;  <span class="comment">// DebugInfo variable locations -- if there&#39;s an instruction number for the</span></div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;  <span class="comment">// allocation (i.e., DYN_ALLOC_*), substitute it for the instruction that</span></div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;  <span class="comment">// modifies SP.</span></div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;  <span class="keywordflow">if</span> (InstrNum) {</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a649bfd3c9cf9a6b1d1bab86556e866dd">isTargetWin64</a>() || !<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a17f3cb9bc2c5c8be538b3be839bbf02b">isOSWindows</a>()) {</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;      <span class="comment">// Label destination operand of the subtract.</span></div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;      MF.<a class="code" href="classllvm_1_1MachineFunction.html#a42d7a6aaee06630af49952b37ff1dbf7">makeDebugValueSubstitution</a>(*InstrNum,</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;                                    {ModInst-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ad26a74fb0ad868f0867cce317269d721">getDebugInstrNum</a>(), 0});</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;      <span class="comment">// Label the call. The operand number is the penultimate operand, zero</span></div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;      <span class="comment">// based.</span></div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;      <span class="keywordtype">unsigned</span> SPDefOperand = ModInst-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a432824f0975bb863478bf4ef3a5df258">getNumOperands</a>() - 2;</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;      MF.<a class="code" href="classllvm_1_1MachineFunction.html#a42d7a6aaee06630af49952b37ff1dbf7">makeDebugValueSubstitution</a>(</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;          *InstrNum, {ModInst-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ad26a74fb0ad868f0867cce317269d721">getDebugInstrNum</a>(), SPDefOperand});</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    }</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;  }</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160; </div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;  <span class="keywordflow">if</span> (InProlog) {</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    <span class="comment">// Apply the frame setup flag to all inserted instrs.</span></div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    <span class="keywordflow">for</span> (++ExpansionMBBI; ExpansionMBBI != <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>; ++ExpansionMBBI)</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;      ExpansionMBBI-&gt;setFlag(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;  }</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;}</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160; </div>
<div class="line"><a name="l01191"></a><span class="lineno"><a class="line" href="X86FrameLowering_8cpp.html#a045c9bd8c547ec3f14eba7aedf55a044"> 1191</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="X86FrameLowering_8cpp.html#a045c9bd8c547ec3f14eba7aedf55a044">calculateSetFPREG</a>(<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> SPAdjust) {</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;  <span class="comment">// Win64 ABI has a less restrictive limitation of 240; 128 works equally well</span></div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;  <span class="comment">// and might require smaller successive adjustments.</span></div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;  <span class="keyword">const</span> <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> Win64MaxSEHOffset = 128;</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> SEHFrameOffset = <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(SPAdjust, Win64MaxSEHOffset);</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  <span class="comment">// Win64 ABI requires 16-byte alignment for the UWOP_SET_FPREG opcode.</span></div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;  <span class="keywordflow">return</span> SEHFrameOffset &amp; -16;</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;}</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160; </div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;<span class="comment">// If we&#39;re forcing a stack realignment we can&#39;t rely on just the frame</span></div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;<span class="comment">// info, we need to know the ABI stack alignment as well in case we</span></div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;<span class="comment">// have a call out.  Otherwise just make sure we have some alignment - we&#39;ll</span></div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;<span class="comment">// go with the minimum SlotSize.</span></div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> X86FrameLowering::calculateMaxStackAlign(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> &amp;MFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>();</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;  <a class="code" href="structllvm_1_1Align.html">Align</a> MaxAlign = MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a3836203fac855ac3c5718b701bd13ffd">getMaxAlign</a>(); <span class="comment">// Desired stack alignment.</span></div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;  <a class="code" href="structllvm_1_1Align.html">Align</a> <a class="code" href="namespacellvm_1_1RISCVAttrs.html#aa0758ad4201d85aef168792c57ef6379">StackAlign</a> = <a class="code" href="classllvm_1_1TargetFrameLowering.html#a74d93035f53f5e8c2aaea5a8f307972d">getStackAlign</a>();</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;  <span class="keywordflow">if</span> (MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#afb28a4deafe2954b0534cc6399ce518b">hasFnAttribute</a>(<span class="stringliteral">&quot;stackrealign&quot;</span>)) {</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    <span class="keywordflow">if</span> (MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a2cc8bb867c8949943ca7d88f1db31fde">hasCalls</a>())</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;      MaxAlign = (<a class="code" href="namespacellvm_1_1RISCVAttrs.html#aa0758ad4201d85aef168792c57ef6379">StackAlign</a> &gt; MaxAlign) ? <a class="code" href="namespacellvm_1_1RISCVAttrs.html#aa0758ad4201d85aef168792c57ef6379">StackAlign</a> : MaxAlign;</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (MaxAlign &lt; <a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>)</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;      MaxAlign = <a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>);</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;  }</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;  <span class="keywordflow">return</span> MaxAlign.<a class="code" href="structllvm_1_1Align.html#a80735739b49cf97a491922c8f9af2cc1">value</a>();</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;}</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160; </div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;<span class="keywordtype">void</span> X86FrameLowering::BuildStackAlignAND(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>,</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;                                          <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>,</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;                                          <span class="keyword">const</span> <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>,</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;                                          <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> MaxAlign)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> Val = -MaxAlign;</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;  <span class="keywordtype">unsigned</span> AndOp = <a class="code" href="X86FrameLowering_8cpp.html#a76608be3df4f82c18347d1680f3b0936">getANDriOpcode</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#abb804392ca8368795013f2e5dc001ee2">Uses64BitFramePtr</a>, Val);</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160; </div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">getParent</a>();</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1X86Subtarget.html">X86Subtarget</a> &amp;<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a> = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1X86Subtarget.html">X86Subtarget</a>&gt;();</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1X86TargetLowering.html">X86TargetLowering</a> &amp;TLI = *<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a97b47799ffd834b0fddcc8cee6fbe234">getTargetLowering</a>();</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;  <span class="keyword">const</span> <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> StackProbeSize = TLI.getStackProbeSize(MF);</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> EmitInlineStackProbe = TLI.hasInlineStackProbe(MF);</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160; </div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;  <span class="comment">// We want to make sure that (in worst case) less than StackProbeSize bytes</span></div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;  <span class="comment">// are not probed after the AND. This assumption is used in</span></div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;  <span class="comment">// emitStackProbeInlineGeneric.</span></div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> == <a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a> &amp;&amp; EmitInlineStackProbe &amp;&amp; MaxAlign &gt;= StackProbeSize) {</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    {</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;      NumFrameLoopProbe++;</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;      <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *entryMBB =</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;          MF.<a class="code" href="classllvm_1_1MachineFunction.html#a1d483b4ac24a96c2250becb232ed4cb4">CreateMachineBasicBlock</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a856266240556bbae90bc5ba75c156eef">getBasicBlock</a>());</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;      <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *headMBB =</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;          MF.<a class="code" href="classllvm_1_1MachineFunction.html#a1d483b4ac24a96c2250becb232ed4cb4">CreateMachineBasicBlock</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a856266240556bbae90bc5ba75c156eef">getBasicBlock</a>());</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;      <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *bodyMBB =</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;          MF.<a class="code" href="classllvm_1_1MachineFunction.html#a1d483b4ac24a96c2250becb232ed4cb4">CreateMachineBasicBlock</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a856266240556bbae90bc5ba75c156eef">getBasicBlock</a>());</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;      <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *footMBB =</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;          MF.<a class="code" href="classllvm_1_1MachineFunction.html#a1d483b4ac24a96c2250becb232ed4cb4">CreateMachineBasicBlock</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a856266240556bbae90bc5ba75c156eef">getBasicBlock</a>());</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160; </div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;      <a class="code" href="classllvm_1_1ilist__iterator.html">MachineFunction::iterator</a> MBBIter = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>();</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;      MF.<a class="code" href="classllvm_1_1MachineFunction.html#af4c0db6d503e0ba3b8e44067023ffbba">insert</a>(MBBIter, entryMBB);</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;      MF.<a class="code" href="classllvm_1_1MachineFunction.html#af4c0db6d503e0ba3b8e44067023ffbba">insert</a>(MBBIter, headMBB);</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;      MF.<a class="code" href="classllvm_1_1MachineFunction.html#af4c0db6d503e0ba3b8e44067023ffbba">insert</a>(MBBIter, bodyMBB);</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;      MF.<a class="code" href="classllvm_1_1MachineFunction.html#af4c0db6d503e0ba3b8e44067023ffbba">insert</a>(MBBIter, footMBB);</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">unsigned</span> MovMIOpc = <a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a> ? X86::MOV64mi32 : X86::MOV32mi;</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> FinalStackProbed = <a class="code" href="classllvm_1_1X86FrameLowering.html#abb804392ca8368795013f2e5dc001ee2">Uses64BitFramePtr</a> ? X86::R11</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;                                  : <a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a>         ? X86::R11D</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;                                                    : <a class="code" href="namespacellvm_1_1N86.html#a004aaa5711c58178d0371ab88bf1bd63a488c3a2a57ed8f23f0c48d8b40348af0">X86::EAX</a>;</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160; </div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;      <span class="comment">// Setup entry block</span></div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;      {</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160; </div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;        entryMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#adf0023bdc4f05a7849c35b1c859580d8">splice</a>(entryMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>(), &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>(), <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>);</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;        <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(entryMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(TargetOpcode::COPY), FinalStackProbed)</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>)</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;        <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> =</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;            <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(entryMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(AndOp), FinalStackProbed)</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;                .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(FinalStackProbed)</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;                .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(Val)</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;                .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160; </div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;        <span class="comment">// The EFLAGS implicit def is dead.</span></div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;        <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(3).setIsDead();</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160; </div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;        <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(entryMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;                <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(<a class="code" href="classllvm_1_1X86FrameLowering.html#abb804392ca8368795013f2e5dc001ee2">Uses64BitFramePtr</a> ? X86::CMP64rr : X86::CMP32rr))</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(FinalStackProbed)</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>)</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;        <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(entryMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::JCC_1))</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#af8571e8dfb010fd8ae76cc4f87aafaac">addMBB</a>(&amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>)</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm_1_1X86.html#a1a356a51a1fb4cc3c427599082cf1d2ea80da60ed5c7b20653afe0b4b21a91ec1">X86::COND_E</a>)</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;        entryMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a935e2a8884592189d8f261634a0b24c5">addSuccessor</a>(headMBB);</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;        entryMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a935e2a8884592189d8f261634a0b24c5">addSuccessor</a>(&amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;      }</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160; </div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;      <span class="comment">// Loop entry block</span></div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160; </div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;      {</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">unsigned</span> SUBOpc =</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;            <a class="code" href="X86FrameLowering_8cpp.html#a6420ad77b9c213cea2ae49052e0ff55a">getSUBriOpcode</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#abb804392ca8368795013f2e5dc001ee2">Uses64BitFramePtr</a>, StackProbeSize);</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;        <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(headMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(SUBOpc), <a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>)</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>)</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(StackProbeSize)</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160; </div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;        <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(headMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;                <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(<a class="code" href="classllvm_1_1X86FrameLowering.html#abb804392ca8368795013f2e5dc001ee2">Uses64BitFramePtr</a> ? X86::CMP64rr : X86::CMP32rr))</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>)</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(FinalStackProbed)</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160; </div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;        <span class="comment">// jump to the footer if StackPtr &lt; FinalStackProbed</span></div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;        <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(headMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::JCC_1))</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#af8571e8dfb010fd8ae76cc4f87aafaac">addMBB</a>(footMBB)</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm_1_1X86.html#a1a356a51a1fb4cc3c427599082cf1d2eac9ae7c779ffc6865536d9f164ebf09b9">X86::COND_B</a>)</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160; </div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;        headMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a935e2a8884592189d8f261634a0b24c5">addSuccessor</a>(bodyMBB);</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;        headMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a935e2a8884592189d8f261634a0b24c5">addSuccessor</a>(footMBB);</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;      }</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160; </div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;      <span class="comment">// setup loop body</span></div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;      {</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;        <a class="code" href="namespacellvm.html#afad63f3314b8553ee3c26d020b3ce09e">addRegOffset</a>(<a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(bodyMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(MovMIOpc))</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;                         .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>),</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;                     <a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>, <span class="keyword">false</span>, 0)</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(0)</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160; </div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">unsigned</span> SUBOpc =</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;            <a class="code" href="X86FrameLowering_8cpp.html#a6420ad77b9c213cea2ae49052e0ff55a">getSUBriOpcode</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#abb804392ca8368795013f2e5dc001ee2">Uses64BitFramePtr</a>, StackProbeSize);</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;        <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(bodyMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(SUBOpc), <a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>)</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>)</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(StackProbeSize)</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160; </div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;        <span class="comment">// cmp with stack pointer bound</span></div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;        <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(bodyMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;                <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(<a class="code" href="classllvm_1_1X86FrameLowering.html#abb804392ca8368795013f2e5dc001ee2">Uses64BitFramePtr</a> ? X86::CMP64rr : X86::CMP32rr))</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(FinalStackProbed)</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>)</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160; </div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;        <span class="comment">// jump back while FinalStackProbed &lt; StackPtr</span></div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;        <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(bodyMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::JCC_1))</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#af8571e8dfb010fd8ae76cc4f87aafaac">addMBB</a>(bodyMBB)</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm_1_1X86.html#a1a356a51a1fb4cc3c427599082cf1d2eac9ae7c779ffc6865536d9f164ebf09b9">X86::COND_B</a>)</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;        bodyMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a935e2a8884592189d8f261634a0b24c5">addSuccessor</a>(bodyMBB);</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;        bodyMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a935e2a8884592189d8f261634a0b24c5">addSuccessor</a>(footMBB);</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;      }</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160; </div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;      <span class="comment">// setup loop footer</span></div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;      {</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;        <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(footMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(TargetOpcode::COPY), <a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>)</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(FinalStackProbed)</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;        <a class="code" href="namespacellvm.html#afad63f3314b8553ee3c26d020b3ce09e">addRegOffset</a>(<a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(footMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(MovMIOpc))</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;                         .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>),</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;                     <a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>, <span class="keyword">false</span>, 0)</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(0)</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;        footMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a935e2a8884592189d8f261634a0b24c5">addSuccessor</a>(&amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;      }</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160; </div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;      <a class="code" href="namespacellvm.html#a3f1d4b41dbb79806492f0e48e54e2222">recomputeLiveIns</a>(*headMBB);</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;      <a class="code" href="namespacellvm.html#a3f1d4b41dbb79806492f0e48e54e2222">recomputeLiveIns</a>(*bodyMBB);</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;      <a class="code" href="namespacellvm.html#a3f1d4b41dbb79806492f0e48e54e2222">recomputeLiveIns</a>(*footMBB);</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;      <a class="code" href="namespacellvm.html#a3f1d4b41dbb79806492f0e48e54e2222">recomputeLiveIns</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;    }</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(AndOp), <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>)</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;                           .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>)</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;                           .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(Val)</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;                           .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160; </div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    <span class="comment">// The EFLAGS implicit def is dead.</span></div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(3).setIsDead();</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;  }</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;}</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160; </div>
<div class="line"><a name="l01370"></a><span class="lineno"><a class="line" href="classllvm_1_1X86FrameLowering.html#a009e40a8d70eae94c4dc32285c717732"> 1370</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1X86FrameLowering.html#a009e40a8d70eae94c4dc32285c717732">X86FrameLowering::has128ByteRedZone</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a>&amp; MF)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;  <span class="comment">// x86-64 (non Win64) has a 128 byte red zone which is guaranteed not to be</span></div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;  <span class="comment">// clobbered by any interrupt handler.</span></div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(&amp;<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a> == &amp;MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1X86Subtarget.html">X86Subtarget</a>&gt;() &amp;&amp;</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;         <span class="stringliteral">&quot;MF used frame lowering for wrong subtarget&quot;</span>);</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;Fn = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>();</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> IsWin64CC = <a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a8c1a009c2cb9e56e7f1db7afc7ee1c97">isCallingConvWin64</a>(Fn.<a class="code" href="classllvm_1_1Function.html#a5f494edc0a569c7fc9ff4181243be1ed">getCallingConv</a>());</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a> &amp;&amp; !IsWin64CC &amp;&amp; !Fn.<a class="code" href="classllvm_1_1Function.html#afb28a4deafe2954b0534cc6399ce518b">hasFnAttribute</a>(Attribute::NoRedZone);</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;}</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;<span class="comment">/// Return true if we need to use the restricted Windows x64 prologue and</span></div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;<span class="comment">/// epilogue code patterns that can be described with WinCFI (.seh_*</span></div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;<span class="comment">/// directives).</span></div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> X86FrameLowering::isWin64Prologue(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;  <span class="keywordflow">return</span> MF.<a class="code" href="classllvm_1_1MachineFunction.html#ae68d159179d37dc7969439d842e2644f">getTarget</a>().<a class="code" href="classllvm_1_1TargetMachine.html#a171c7253c2b03171bdf22c1bd910f674">getMCAsmInfo</a>()-&gt;<a class="code" href="classllvm_1_1MCAsmInfo.html#ac158349781823fe8ff9e02d3a3533d55">usesWindowsCFI</a>();</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;}</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160; </div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;<span class="keywordtype">bool</span> X86FrameLowering::needsDwarfCFI(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;  <span class="keywordflow">return</span> !isWin64Prologue(MF) &amp;&amp; MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4f117e439113383ea819a6f7beb8ff0b">needsFrameMoves</a>();</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;}</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;<span class="comment">/// emitPrologue - Push callee-saved registers onto the stack, which</span></div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;<span class="comment">/// automatically adjust the stack pointer. Adjust the stack pointer to allocate</span></div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;<span class="comment">/// space for local variables. Also emit labels used by the exception handler to</span></div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;<span class="comment">/// generate the exception handling frames.</span></div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;<span class="comment">  Here&#39;s a gist of what gets emitted:</span></div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;<span class="comment">  ; Establish frame pointer, if needed</span></div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;<span class="comment">  [if needs FP]</span></div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;<span class="comment">      push  %rbp</span></div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;<span class="comment">      .cfi_def_cfa_offset 16</span></div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;<span class="comment">      .cfi_offset %rbp, -16</span></div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;<span class="comment">      .seh_pushreg %rpb</span></div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;<span class="comment">      mov  %rsp, %rbp</span></div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;<span class="comment">      .cfi_def_cfa_register %rbp</span></div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;<span class="comment">  ; Spill general-purpose registers</span></div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;<span class="comment">  [for all callee-saved GPRs]</span></div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;<span class="comment">      pushq %&lt;reg&gt;</span></div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;<span class="comment">      [if not needs FP]</span></div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;<span class="comment">         .cfi_def_cfa_offset (offset from RETADDR)</span></div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;<span class="comment">      .seh_pushreg %&lt;reg&gt;</span></div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;<span class="comment">  ; If the required stack alignment &gt; default stack alignment</span></div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;<span class="comment">  ; rsp needs to be re-aligned.  This creates a &quot;re-alignment gap&quot;</span></div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;<span class="comment">  ; of unknown size in the stack frame.</span></div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;<span class="comment">  [if stack needs re-alignment]</span></div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;<span class="comment">      and  $MASK, %rsp</span></div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;<span class="comment">  ; Allocate space for locals</span></div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;<span class="comment">  [if target is Windows and allocated space &gt; 4096 bytes]</span></div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;<span class="comment">      ; Windows needs special care for allocations larger</span></div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;<span class="comment">      ; than one page.</span></div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;<span class="comment">      mov $NNN, %rax</span></div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;<span class="comment">      call ___chkstk_ms/___chkstk</span></div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;<span class="comment">      sub  %rax, %rsp</span></div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;<span class="comment">  [else]</span></div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;<span class="comment">      sub  $NNN, %rsp</span></div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;<span class="comment">  [if needs FP]</span></div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;<span class="comment">      .seh_stackalloc (size of XMM spill slots)</span></div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;<span class="comment">      .seh_setframe %rbp, SEHFrameOffset ; = size of all spill slots</span></div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;<span class="comment">  [else]</span></div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;<span class="comment">      .seh_stackalloc NNN</span></div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;<span class="comment">  ; Spill XMMs</span></div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;<span class="comment">  ; Note, that while only Windows 64 ABI specifies XMMs as callee-preserved,</span></div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;<span class="comment">  ; they may get spilled on any platform, if the current function</span></div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;<span class="comment">  ; calls @llvm.eh.unwind.init</span></div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;<span class="comment">  [if needs FP]</span></div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;<span class="comment">      [for all callee-saved XMM registers]</span></div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;<span class="comment">          movaps  %&lt;xmm reg&gt;, -MMM(%rbp)</span></div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;<span class="comment">      [for all callee-saved XMM registers]</span></div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;<span class="comment">          .seh_savexmm %&lt;xmm reg&gt;, (-MMM + SEHFrameOffset)</span></div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;<span class="comment">              ; i.e. the offset relative to (%rbp - SEHFrameOffset)</span></div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;<span class="comment">  [else]</span></div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;<span class="comment">      [for all callee-saved XMM registers]</span></div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;<span class="comment">          movaps  %&lt;xmm reg&gt;, KKK(%rsp)</span></div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;<span class="comment">      [for all callee-saved XMM registers]</span></div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;<span class="comment">          .seh_savexmm %&lt;xmm reg&gt;, KKK</span></div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;<span class="comment">  .seh_endprologue</span></div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;<span class="comment">  [if needs base pointer]</span></div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;<span class="comment">      mov  %rsp, %rbx</span></div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;<span class="comment">      [if needs to restore base pointer]</span></div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;<span class="comment">          mov %rsp, -MMM(%rbp)</span></div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;<span class="comment">  ; Emit CFI info</span></div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;<span class="comment">  [if needs FP]</span></div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;<span class="comment">      [for all callee-saved registers]</span></div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;<span class="comment">          .cfi_offset %&lt;reg&gt;, (offset from %rbp)</span></div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;<span class="comment">  [else]</span></div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;<span class="comment">       .cfi_def_cfa_offset (offset from RETADDR)</span></div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;<span class="comment">      [for all callee-saved registers]</span></div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;<span class="comment">          .cfi_offset %&lt;reg&gt;, (offset from %rsp)</span></div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;<span class="comment">  Notes:</span></div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;<span class="comment">  - .seh directives are emitted only for Windows 64 ABI</span></div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;<span class="comment">  - .cv_fpo directives are emitted on win32 when emitting CodeView</span></div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;<span class="comment">  - .cfi directives are emitted for all other ABIs</span></div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;<span class="comment">  - for 32-bit code, substitute %e?? registers for %r??</span></div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160; </div>
<div class="line"><a name="l01476"></a><span class="lineno"><a class="line" href="classllvm_1_1X86FrameLowering.html#af2ab7cd691053c57c27e810c549a0300"> 1476</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1X86FrameLowering.html#af2ab7cd691053c57c27e810c549a0300">X86FrameLowering::emitPrologue</a>(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF,</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;                                    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(&amp;<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a> == &amp;MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1X86Subtarget.html">X86Subtarget</a>&gt;() &amp;&amp;</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;         <span class="stringliteral">&quot;MF used frame lowering for wrong subtarget&quot;</span>);</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>();</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;  <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> &amp;MFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>();</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;Fn = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>();</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;  <a class="code" href="classllvm_1_1MachineModuleInfo.html">MachineModuleInfo</a> &amp;MMI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a6691cc6c9b7341348045f8d54a14e7a7">getMMI</a>();</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;  <a class="code" href="classllvm_1_1X86MachineFunctionInfo.html">X86MachineFunctionInfo</a> *X86FI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html">X86MachineFunctionInfo</a>&gt;();</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> MaxAlign = calculateMaxStackAlign(MF); <span class="comment">// Desired stack alignment.</span></div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> StackSize = MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a14c39a24bf6ebbe339ae8a453c7fdd11">getStackSize</a>();    <span class="comment">// Number of bytes to allocate.</span></div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;  <span class="keywordtype">bool</span> IsFunclet = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7d2f8efd82042b4cf611ba10e9e79ed0">isEHFuncletEntry</a>();</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;  <a class="code" href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6a">EHPersonality</a> Personality = <a class="code" href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aa88183b946cc5f0e8c96b2e66e1c74a7e">EHPersonality::Unknown</a>;</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;  <span class="keywordflow">if</span> (Fn.<a class="code" href="classllvm_1_1Function.html#a6a0f6312963ee6fb0969243607174949">hasPersonalityFn</a>())</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    Personality = <a class="code" href="namespacellvm.html#a8d508f23e2580095561902c39911fb9b">classifyEHPersonality</a>(Fn.<a class="code" href="classllvm_1_1Function.html#a6f77e4e800ba4dffd63e8ddb330062aa">getPersonalityFn</a>());</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;  <span class="keywordtype">bool</span> FnHasClrFunclet =</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;      MF.<a class="code" href="classllvm_1_1MachineFunction.html#ad40522ac860df72189255e38782acc3f">hasEHFunclets</a>() &amp;&amp; Personality == <a class="code" href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aa05b0e25c98ba4300ca28989a35dab72a">EHPersonality::CoreCLR</a>;</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;  <span class="keywordtype">bool</span> IsClrFunclet = IsFunclet &amp;&amp; FnHasClrFunclet;</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;  <span class="keywordtype">bool</span> HasFP = <a class="code" href="classllvm_1_1X86FrameLowering.html#a27de32522776b0243eaa10ae9e0c27d4">hasFP</a>(MF);</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;  <span class="keywordtype">bool</span> IsWin64Prologue = isWin64Prologue(MF);</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;  <span class="keywordtype">bool</span> NeedsWin64CFI = IsWin64Prologue &amp;&amp; Fn.<a class="code" href="classllvm_1_1Function.html#ad7332117b148c3f93c1d7e58306ee748">needsUnwindTableEntry</a>();</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;  <span class="comment">// FIXME: Emit FPO data for EH funclets.</span></div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;  <span class="keywordtype">bool</span> NeedsWinFPO =</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;      !IsFunclet &amp;&amp; <a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#af92c188739e9be47b78eca0e1e622f9d">isTargetWin32</a>() &amp;&amp; MMI.<a class="code" href="classllvm_1_1MachineModuleInfo.html#a1f6aa8381a83bceb61c4be0ef73b4dfc">getModule</a>()-&gt;<a class="code" href="classllvm_1_1Module.html#a7133d921c103967178f1388c8f273da3">getCodeViewFlag</a>();</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;  <span class="keywordtype">bool</span> NeedsWinCFI = NeedsWin64CFI || NeedsWinFPO;</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;  <span class="keywordtype">bool</span> NeedsDwarfCFI = needsDwarfCFI(MF);</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> FramePtr = <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;<a class="code" href="classllvm_1_1X86RegisterInfo.html#a45e0af6fcebf5fd5a4584974e13c6810">getFrameRegister</a>(MF);</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Register.html">Register</a> MachineFramePtr =</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;      <a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a60d014846b23498268005ffec9608bc0">isTarget64BitILP32</a>()</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;          ? <a class="code" href="classllvm_1_1Register.html">Register</a>(<a class="code" href="namespacellvm.html#a27b344a283e0620f484144889fe32064">getX86SubSuperRegister</a>(FramePtr, 64)) : FramePtr;</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> BasePtr = <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;<a class="code" href="classllvm_1_1X86RegisterInfo.html#ad057cb3300544ebb741b871a45faae7d">getBaseRegister</a>();</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;  <span class="keywordtype">bool</span> HasWinCFI = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160; </div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;  <span class="comment">// Debug location must be unknown since the first debug location is used</span></div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;  <span class="comment">// to determine the end of the prologue.</span></div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>;</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160; </div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;  <span class="comment">// Space reserved for stack-based arguments when making a (ABI-guaranteed)</span></div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;  <span class="comment">// tail call.</span></div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;  <span class="keywordtype">unsigned</span> TailCallArgReserveSize = -X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#a7c7a3251bd6c1b0b89e5712c89aaa305">getTCReturnAddrDelta</a>();</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;  <span class="keywordflow">if</span> (TailCallArgReserveSize  &amp;&amp; IsWin64Prologue)</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;    <a class="code" href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">report_fatal_error</a>(<span class="stringliteral">&quot;Can&#39;t handle guaranteed tail call under win64 yet&quot;</span>);</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160; </div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> EmitStackProbeCall =</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;      <a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a97b47799ffd834b0fddcc8cee6fbe234">getTargetLowering</a>()-&gt;<a class="code" href="classllvm_1_1X86TargetLowering.html#ac9c3c65b113996cabc72bd6223410369">hasStackProbeSymbol</a>(MF);</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;  <span class="keywordtype">unsigned</span> StackProbeSize = <a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a97b47799ffd834b0fddcc8cee6fbe234">getTargetLowering</a>()-&gt;<a class="code" href="classllvm_1_1X86TargetLowering.html#af64132885aa4151887699b689283e850">getStackProbeSize</a>(MF);</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160; </div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;  <span class="keywordflow">if</span> (HasFP &amp;&amp; X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#aa92686e5bcf4b22006a54652f92254df">hasSwiftAsyncContext</a>()) {</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;    <span class="keywordflow">switch</span> (MF.<a class="code" href="classllvm_1_1MachineFunction.html#ae68d159179d37dc7969439d842e2644f">getTarget</a>().<a class="code" href="classllvm_1_1TargetMachine.html#ab1fb67187fc37e569cc5171cbebba873">Options</a>.<a class="code" href="classllvm_1_1TargetOptions.html#a66a62a15c006f8bc55698e0bea465699">SwiftAsyncFramePointer</a>) {</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a78637df2e0b9a5e2109af945b0baaf34ad21e9e46158e1ff1c0b2553c4d17cd1b">SwiftAsyncFramePointerMode::DeploymentBased</a>:</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a774ed978c421456ac91540c247cbee95">swiftAsyncContextIsDynamicallySet</a>()) {</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;        <span class="comment">// The special symbol below is absolute and has a *value* suitable to be</span></div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;        <span class="comment">// combined with the frame pointer directly.</span></div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;        <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::OR64rm), MachineFramePtr)</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#aec748fa81e1488192450f0b2a8d1aeca">addUse</a>(MachineFramePtr)</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#aec748fa81e1488192450f0b2a8d1aeca">addUse</a>(X86::RIP)</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(1)</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#aec748fa81e1488192450f0b2a8d1aeca">addUse</a>(X86::NoRegister)</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ac6672df14319c2e931c3b2c583ea837c">addExternalSymbol</a>(<span class="stringliteral">&quot;swift_async_extendedFramePointerFlags&quot;</span>,</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;                               <a class="code" href="namespacellvm_1_1X86II.html#a45cdfdabb3963ec52b198ce5d3aabc84ae39565b585476b7142228e439e80372e">X86II::MO_GOTPCREL</a>)</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#aec748fa81e1488192450f0b2a8d1aeca">addUse</a>(X86::NoRegister);</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;      }</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;      [[fallthrough]];</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160; </div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a78637df2e0b9a5e2109af945b0baaf34a68eec46437c384d8dad18d5464ebc35c">SwiftAsyncFramePointerMode::Always</a>:</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::BTS64ri8), MachineFramePtr)</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#aec748fa81e1488192450f0b2a8d1aeca">addUse</a>(MachineFramePtr)</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(60)</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160; </div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a78637df2e0b9a5e2109af945b0baaf34a6e7b34fa59e1bd229b207892956dc41c">SwiftAsyncFramePointerMode::Never</a>:</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;    }</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;  }</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160; </div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;  <span class="comment">// Re-align the stack on 64-bit if the x86-interrupt calling convention is</span></div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;  <span class="comment">// used and an error code was pushed, since the x86-64 ABI requires a 16-byte</span></div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;  <span class="comment">// stack alignment.</span></div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;  <span class="keywordflow">if</span> (Fn.<a class="code" href="classllvm_1_1Function.html#a5f494edc0a569c7fc9ff4181243be1ed">getCallingConv</a>() == <a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feeda765508a953368531a7d69d1279e6cfb1">CallingConv::X86_INTR</a> &amp;&amp; <a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a> &amp;&amp;</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;      Fn.<a class="code" href="classllvm_1_1Function.html#ac6baa801e4aea800984e760d5460662f">arg_size</a>() == 2) {</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;    StackSize += 8;</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;    MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#ae4d51e9e70d6a7fb366f2a09d10a0945">setStackSize</a>(StackSize);</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;    <a class="code" href="classllvm_1_1X86FrameLowering.html#aa8a605a58ebdee20705834400bdbb922">emitSPUpdate</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, -8, <span class="comment">/*InEpilogue=*/</span><span class="keyword">false</span>);</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;  }</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160; </div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;  <span class="comment">// If this is x86-64 and the Red Zone is not disabled, if we are a leaf</span></div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;  <span class="comment">// function, and use up to 128 bytes of stack space, don&#39;t have a frame</span></div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;  <span class="comment">// pointer, calls, or dynamic alloca then we do not need to adjust the</span></div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;  <span class="comment">// stack pointer (we fit in the Red Zone). We also check that we don&#39;t</span></div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;  <span class="comment">// push and pop from the stack.</span></div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#a009e40a8d70eae94c4dc32285c717732">has128ByteRedZone</a>(MF) &amp;&amp; !<a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;hasStackRealignment(MF) &amp;&amp;</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;      !MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a0509430713d587eba74220a8375948a8">hasVarSizedObjects</a>() &amp;&amp;             <span class="comment">// No dynamic alloca.</span></div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;      !MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a19e260b3bbf8fad8480d151e11919836">adjustsStack</a>() &amp;&amp;                   <span class="comment">// No calls.</span></div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;      !EmitStackProbeCall &amp;&amp;                   <span class="comment">// No stack probes.</span></div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;      !MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#ac901643b9a98a52b1c323b79f28b8dcc">hasCopyImplyingStackAdjustment</a>() &amp;&amp; <span class="comment">// Don&#39;t push and pop.</span></div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;      !MF.<a class="code" href="classllvm_1_1MachineFunction.html#ab499fb31e894a900402d0871eee39b75">shouldSplitStack</a>()) {                <span class="comment">// Regular stack</span></div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> MinSize =</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;        X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#ad6e59a435273270b3ef84dc8a841c122">getCalleeSavedFrameSize</a>() - X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#a7c7a3251bd6c1b0b89e5712c89aaa305">getTCReturnAddrDelta</a>();</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    <span class="keywordflow">if</span> (HasFP) MinSize += <a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>;</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;    X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#aa0d5df8154c4118afbefc1b9e8c6ad02">setUsesRedZone</a>(MinSize &gt; 0 || StackSize &gt; 0);</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;    StackSize = <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(MinSize, StackSize &gt; 128 ? StackSize - 128 : 0);</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;    MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#ae4d51e9e70d6a7fb366f2a09d10a0945">setStackSize</a>(StackSize);</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;  }</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160; </div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;  <span class="comment">// Insert stack pointer adjustment for later moving of return addr.  Only</span></div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;  <span class="comment">// applies to tail call optimized functions where the callee argument stack</span></div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;  <span class="comment">// size is bigger than the callers.</span></div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;  <span class="keywordflow">if</span> (TailCallArgReserveSize != 0) {</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;    BuildStackAdjustment(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, -(<span class="keywordtype">int</span>)TailCallArgReserveSize,</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;                         <span class="comment">/*InEpilogue=*/</span><span class="keyword">false</span>)</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;  }</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160; </div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;  <span class="comment">// Mapping for machine moves:</span></div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;  <span class="comment">//   DST: VirtualFP AND</span></div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;  <span class="comment">//        SRC: VirtualFP              =&gt; DW_CFA_def_cfa_offset</span></div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;  <span class="comment">//        ELSE                        =&gt; DW_CFA_def_cfa</span></div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;  <span class="comment">//   SRC: VirtualFP AND</span></div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;  <span class="comment">//        DST: Register               =&gt; DW_CFA_def_cfa_register</span></div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;  <span class="comment">//   ELSE</span></div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;  <span class="comment">//        OFFSET &lt; 0                  =&gt; DW_CFA_offset_extended_sf</span></div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;  <span class="comment">//        REG &lt; 64                    =&gt; DW_CFA_offset + Reg</span></div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;  <span class="comment">//        ELSE                        =&gt; DW_CFA_offset_extended</span></div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160; </div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> NumBytes = 0;</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;  <span class="keywordtype">int</span> stackGrowth = -<a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>;</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160; </div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;  <span class="comment">// Find the funclet establisher parameter</span></div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Establisher = X86::NoRegister;</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;  <span class="keywordflow">if</span> (IsClrFunclet)</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;    Establisher = <a class="code" href="classllvm_1_1X86FrameLowering.html#abb804392ca8368795013f2e5dc001ee2">Uses64BitFramePtr</a> ? X86::RCX : <a class="code" href="namespacellvm_1_1N86.html#a004aaa5711c58178d0371ab88bf1bd63a667b758702693d9dfb46e55025fc559d">X86::ECX</a>;</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (IsFunclet)</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;    Establisher = <a class="code" href="classllvm_1_1X86FrameLowering.html#abb804392ca8368795013f2e5dc001ee2">Uses64BitFramePtr</a> ? X86::RDX : <a class="code" href="namespacellvm_1_1N86.html#a004aaa5711c58178d0371ab88bf1bd63af870f9ec8a932e6d114847c22e7e9121">X86::EDX</a>;</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160; </div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;  <span class="keywordflow">if</span> (IsWin64Prologue &amp;&amp; IsFunclet &amp;&amp; !IsClrFunclet) {</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;    <span class="comment">// Immediately spill establisher into the home slot.</span></div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;    <span class="comment">// The runtime cares about this.</span></div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    <span class="comment">// MOV64mr %rdx, 16(%rsp)</span></div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;    <span class="keywordtype">unsigned</span> MOVmr = <a class="code" href="classllvm_1_1X86FrameLowering.html#abb804392ca8368795013f2e5dc001ee2">Uses64BitFramePtr</a> ? X86::MOV64mr : X86::MOV32mr;</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;    <a class="code" href="namespacellvm.html#afad63f3314b8553ee3c26d020b3ce09e">addRegOffset</a>(<a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(MOVmr)), <a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>, <span class="keyword">true</span>, 16)</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(Establisher)</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;    <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acce9c12cc977a88dc7bc51493ce7681c">addLiveIn</a>(Establisher);</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;  }</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160; </div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;  <span class="keywordflow">if</span> (HasFP) {</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(MF.<a class="code" href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">getRegInfo</a>().<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a53ca7cff9e929ba372da9780fdd44b02">isReserved</a>(MachineFramePtr) &amp;&amp; <span class="stringliteral">&quot;FP reserved&quot;</span>);</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160; </div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;    <span class="comment">// Calculate required stack adjustment.</span></div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> FrameSize = StackSize - <a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>;</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;    <span class="comment">// If required, include space for extra hidden slot for stashing base pointer.</span></div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;    <span class="keywordflow">if</span> (X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#aad8e7e85710893cb7fa03109a108a070">getRestoreBasePointer</a>())</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;      FrameSize += <a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>;</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160; </div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    NumBytes = FrameSize -</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;               (X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#ad6e59a435273270b3ef84dc8a841c122">getCalleeSavedFrameSize</a>() + TailCallArgReserveSize);</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160; </div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;    <span class="comment">// Callee-saved registers are pushed on stack before the stack is realigned.</span></div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;hasStackRealignment(MF) &amp;&amp; !IsWin64Prologue)</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;      NumBytes = <a class="code" href="namespacellvm.html#ab102f0f12dd38aeea5906b1d80c792ff">alignTo</a>(NumBytes, MaxAlign);</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160; </div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;    <span class="comment">// Save EBP/RBP into the appropriate stack slot.</span></div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(<a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a> ? X86::PUSH64r : X86::PUSH32r))</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(MachineFramePtr, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da9ddde91ef09476d28a088fe57f8e2921">RegState::Kill</a>)</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160; </div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;    <span class="keywordflow">if</span> (NeedsDwarfCFI) {</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;      <span class="comment">// Mark the place where EBP/RBP was saved.</span></div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;      <span class="comment">// Define the current CFA rule to use the provided offset.</span></div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(StackSize);</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;      <a class="code" href="classllvm_1_1X86FrameLowering.html#aef0079a40a972f2942156b2d73bbf190">BuildCFI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;               <a class="code" href="classllvm_1_1MCCFIInstruction.html#a03e76dd55b65ca0af930c3150413e148">MCCFIInstruction::cfiDefCfaOffset</a>(<span class="keyword">nullptr</span>, -2 * stackGrowth),</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;               <a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160; </div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;      <span class="comment">// Change the rule for the FramePtr to be an &quot;offset&quot; rule.</span></div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;      <span class="keywordtype">unsigned</span> DwarfFramePtr = <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;getDwarfRegNum(MachineFramePtr, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;      <a class="code" href="classllvm_1_1X86FrameLowering.html#aef0079a40a972f2942156b2d73bbf190">BuildCFI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;               <a class="code" href="classllvm_1_1MCCFIInstruction.html#aea2b8a3efd6694a33452ed7e8716300e">MCCFIInstruction::createOffset</a>(<span class="keyword">nullptr</span>, DwarfFramePtr,</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;                                              2 * stackGrowth),</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;               <a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;    }</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160; </div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;    <span class="keywordflow">if</span> (NeedsWinCFI) {</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;      HasWinCFI = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::SEH_PushReg))</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(FramePtr)</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    }</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160; </div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;    <span class="keywordflow">if</span> (!IsFunclet) {</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;      <span class="keywordflow">if</span> (X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#aa92686e5bcf4b22006a54652f92254df">hasSwiftAsyncContext</a>()) {</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9d3ba236d13373cde794da2023acc7a0">Attrs</a> = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#a7477aafbbe989ad35b96fac186d8e9fd">getAttributes</a>();</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160; </div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;        <span class="comment">// Before we update the live frame pointer we have to ensure there&#39;s a</span></div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;        <span class="comment">// valid (or null) asynchronous context in its slot just before FP in</span></div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;        <span class="comment">// the frame record, so store it now.</span></div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9d3ba236d13373cde794da2023acc7a0">Attrs</a>.hasAttrSomewhere(Attribute::SwiftAsync)) {</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;          <span class="comment">// We have an initial context in r14, store it just before the frame</span></div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;          <span class="comment">// pointer.</span></div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;          <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acce9c12cc977a88dc7bc51493ce7681c">addLiveIn</a>(X86::R14);</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;          <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::PUSH64r))</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;              .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(X86::R14)</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;              .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;          <span class="comment">// No initial context, store null so that there&#39;s no pointer that</span></div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;          <span class="comment">// could be misused.</span></div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;          <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::PUSH64i8))</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;              .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(0)</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;              .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;        }</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160; </div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;        <span class="keywordflow">if</span> (NeedsWinCFI) {</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;          HasWinCFI = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;          <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::SEH_PushReg))</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;              .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(X86::R14)</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;              .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;        }</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160; </div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;        <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::LEA64r), FramePtr)</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#aec748fa81e1488192450f0b2a8d1aeca">addUse</a>(X86::RSP)</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(1)</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#aec748fa81e1488192450f0b2a8d1aeca">addUse</a>(X86::NoRegister)</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(8)</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#aec748fa81e1488192450f0b2a8d1aeca">addUse</a>(X86::NoRegister)</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;        <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::SUB64ri8), X86::RSP)</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#aec748fa81e1488192450f0b2a8d1aeca">addUse</a>(X86::RSP)</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(8)</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;            .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;      }</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160; </div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;      <span class="keywordflow">if</span> (!IsWin64Prologue &amp;&amp; !IsFunclet) {</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;        <span class="comment">// Update EBP with the new base value.</span></div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;        <span class="keywordflow">if</span> (!X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#aa92686e5bcf4b22006a54652f92254df">hasSwiftAsyncContext</a>())</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;          <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;                  <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(<a class="code" href="classllvm_1_1X86FrameLowering.html#abb804392ca8368795013f2e5dc001ee2">Uses64BitFramePtr</a> ? X86::MOV64rr : X86::MOV32rr),</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;                  FramePtr)</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;              .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>)</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;              .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160; </div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;        <span class="keywordflow">if</span> (NeedsDwarfCFI) {</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;          <span class="comment">// Mark effective beginning of when frame pointer becomes valid.</span></div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;          <span class="comment">// Define the current CFA to use the EBP/RBP register.</span></div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;          <span class="keywordtype">unsigned</span> DwarfFramePtr = <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;getDwarfRegNum(MachineFramePtr, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;          <a class="code" href="classllvm_1_1X86FrameLowering.html#aef0079a40a972f2942156b2d73bbf190">BuildCFI</a>(</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;              <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;              <a class="code" href="classllvm_1_1MCCFIInstruction.html#a9babd4ee8fb9fc9bb25eeac8274625d1">MCCFIInstruction::createDefCfaRegister</a>(<span class="keyword">nullptr</span>, DwarfFramePtr),</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;              <a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;        }</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160; </div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;        <span class="keywordflow">if</span> (NeedsWinFPO) {</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;          <span class="comment">// .cv_fpo_setframe $FramePtr</span></div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;          HasWinCFI = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;          <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::SEH_SetFrame))</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;              .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(FramePtr)</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;              .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(0)</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;              .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;        }</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;      }</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;    }</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!IsFunclet &amp;&amp; <span class="stringliteral">&quot;funclets without FPs not yet implemented&quot;</span>);</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;    NumBytes = StackSize -</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;               (X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#ad6e59a435273270b3ef84dc8a841c122">getCalleeSavedFrameSize</a>() + TailCallArgReserveSize);</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;  }</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160; </div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;  <span class="comment">// Update the offset adjustment, which is mainly used by codeview to translate</span></div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;  <span class="comment">// from ESP to VFRAME relative local variable offsets.</span></div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;  <span class="keywordflow">if</span> (!IsFunclet) {</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;    <span class="keywordflow">if</span> (HasFP &amp;&amp; <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;hasStackRealignment(MF))</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;      MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a87a1fe769ec763a9c8f8427a017a45d7">setOffsetAdjustment</a>(-NumBytes);</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;      MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a87a1fe769ec763a9c8f8427a017a45d7">setOffsetAdjustment</a>(-StackSize);</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;  }</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160; </div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;  <span class="comment">// For EH funclets, only allocate enough space for outgoing calls. Save the</span></div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;  <span class="comment">// NumBytes value that we would&#39;ve used for the parent frame.</span></div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;  <span class="keywordtype">unsigned</span> ParentFrameNumBytes = NumBytes;</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;  <span class="keywordflow">if</span> (IsFunclet)</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;    NumBytes = getWinEHFuncletFrameSize(MF);</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160; </div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;  <span class="comment">// Skip the callee-saved push instructions.</span></div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;  <span class="keywordtype">bool</span> PushedRegs = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classllvm_1_1StackOffset.html">StackOffset</a> = 2 * stackGrowth;</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160; </div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a> != <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>() &amp;&amp;</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;         <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getFlag(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>) &amp;&amp;</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;         (<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getOpcode() == X86::PUSH32r ||</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;          <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getOpcode() == X86::PUSH64r)) {</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;    PushedRegs = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getOperand(0).getReg();</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;    ++<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>;</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160; </div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;    <span class="keywordflow">if</span> (!HasFP &amp;&amp; NeedsDwarfCFI) {</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;      <span class="comment">// Mark callee-saved push instruction.</span></div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;      <span class="comment">// Define the current CFA rule to use the provided offset.</span></div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(StackSize);</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;      <a class="code" href="classllvm_1_1X86FrameLowering.html#aef0079a40a972f2942156b2d73bbf190">BuildCFI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;               <a class="code" href="classllvm_1_1MCCFIInstruction.html#a03e76dd55b65ca0af930c3150413e148">MCCFIInstruction::cfiDefCfaOffset</a>(<span class="keyword">nullptr</span>, -<a class="code" href="classllvm_1_1StackOffset.html">StackOffset</a>),</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;               <a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;      <a class="code" href="classllvm_1_1StackOffset.html">StackOffset</a> += stackGrowth;</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;    }</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160; </div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;    <span class="keywordflow">if</span> (NeedsWinCFI) {</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;      HasWinCFI = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::SEH_PushReg))</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>)</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;    }</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;  }</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160; </div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;  <span class="comment">// Realign stack after we pushed callee-saved registers (so that we&#39;ll be</span></div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;  <span class="comment">// able to calculate their offsets from the frame pointer).</span></div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;  <span class="comment">// Don&#39;t do this for Win64, it needs to realign the stack after the prologue.</span></div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;  <span class="keywordflow">if</span> (!IsWin64Prologue &amp;&amp; !IsFunclet &amp;&amp; <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;hasStackRealignment(MF)) {</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(HasFP &amp;&amp; <span class="stringliteral">&quot;There should be a frame pointer if stack is realigned.&quot;</span>);</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;    BuildStackAlignAND(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>, MaxAlign);</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160; </div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;    <span class="keywordflow">if</span> (NeedsWinCFI) {</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;      HasWinCFI = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::SEH_StackAlign))</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(MaxAlign)</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;    }</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;  }</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160; </div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;  <span class="comment">// If there is an SUB32ri of ESP immediately before this instruction, merge</span></div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;  <span class="comment">// the two. This can be the case when tail call elimination is enabled and</span></div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;  <span class="comment">// the callee has more arguments then the caller.</span></div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;  NumBytes -= <a class="code" href="classllvm_1_1X86FrameLowering.html#af1d6349ca67f14c36e41916e41536da4">mergeSPUpdates</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160; </div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;  <span class="comment">// Adjust stack pointer: ESP -= numbytes.</span></div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160; </div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;  <span class="comment">// Windows and cygwin/mingw require a prologue helper routine when allocating</span></div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;  <span class="comment">// more than 4K bytes on the stack.  Windows uses __chkstk and cygwin/mingw</span></div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;  <span class="comment">// uses __alloca.  __alloca and the 32-bit version of __chkstk will probe the</span></div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;  <span class="comment">// stack and adjust the stack pointer in one go.  The 64-bit version of</span></div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;  <span class="comment">// __chkstk is only responsible for probing the stack.  The 64-bit prologue is</span></div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;  <span class="comment">// responsible for adjusting the stack pointer.  Touching the stack at 4K</span></div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;  <span class="comment">// increments is necessary to ensure that the guard pages used by the OS</span></div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;  <span class="comment">// virtual memory manager are allocated in correct sequence.</span></div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> AlignedNumBytes = NumBytes;</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;  <span class="keywordflow">if</span> (IsWin64Prologue &amp;&amp; !IsFunclet &amp;&amp; <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;hasStackRealignment(MF))</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;    AlignedNumBytes = <a class="code" href="namespacellvm.html#ab102f0f12dd38aeea5906b1d80c792ff">alignTo</a>(AlignedNumBytes, MaxAlign);</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;  <span class="keywordflow">if</span> (AlignedNumBytes &gt;= StackProbeSize &amp;&amp; EmitStackProbeCall) {</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#af2f0359e40743109c0db7eeebf23c2e9">getUsesRedZone</a>() &amp;&amp;</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;           <span class="stringliteral">&quot;The Red Zone is not accounted for in stack probes&quot;</span>);</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160; </div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;    <span class="comment">// Check whether EAX is livein for this block.</span></div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;    <span class="keywordtype">bool</span> isEAXAlive = <a class="code" href="X86FrameLowering_8cpp.html#a833aa9ac03a9d223ea251585baaa5642">isEAXLiveIn</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160; </div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;    <span class="keywordflow">if</span> (isEAXAlive) {</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a>) {</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;        <span class="comment">// Save RAX</span></div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;        <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::PUSH64r))</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(X86::RAX, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da9ddde91ef09476d28a088fe57f8e2921">RegState::Kill</a>)</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;        <span class="comment">// Save EAX</span></div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;        <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::PUSH32r))</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(<a class="code" href="namespacellvm_1_1N86.html#a004aaa5711c58178d0371ab88bf1bd63a488c3a2a57ed8f23f0c48d8b40348af0">X86::EAX</a>, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da9ddde91ef09476d28a088fe57f8e2921">RegState::Kill</a>)</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;      }</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;    }</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160; </div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a>) {</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;      <span class="comment">// Handle the 64-bit Windows ABI case where we need to call __chkstk.</span></div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;      <span class="comment">// Function prologue is responsible for adjusting the stack pointer.</span></div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;      int64_t Alloc = isEAXAlive ? NumBytes - 8 : NumBytes;</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(<a class="code" href="X86FrameLowering_8cpp.html#a39d0dcc2605f63349a774a79927b2209">getMOVriOpcode</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a>, Alloc)), X86::RAX)</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(Alloc)</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;      <span class="comment">// Allocate NumBytes-4 bytes on stack in case of isEAXAlive.</span></div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;      <span class="comment">// We&#39;ll also use 4 already allocated bytes for EAX.</span></div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::MOV32ri), <a class="code" href="namespacellvm_1_1N86.html#a004aaa5711c58178d0371ab88bf1bd63a488c3a2a57ed8f23f0c48d8b40348af0">X86::EAX</a>)</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(isEAXAlive ? NumBytes - 4 : NumBytes)</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;    }</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160; </div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;    <span class="comment">// Call __chkstk, __chkstk_ms, or __alloca.</span></div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;    <a class="code" href="classllvm_1_1X86FrameLowering.html#a6a6cb0d8b5d8e3b35dee29f5e752d31c">emitStackProbe</a>(MF, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160; </div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;    <span class="keywordflow">if</span> (isEAXAlive) {</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;      <span class="comment">// Restore RAX/EAX</span></div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;      <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>;</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a>)</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;        <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = <a class="code" href="namespacellvm.html#afad63f3314b8553ee3c26d020b3ce09e">addRegOffset</a>(<a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(MF, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::MOV64rm), X86::RAX),</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;                          <a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>, <span class="keyword">false</span>, NumBytes - 8);</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;        <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = <a class="code" href="namespacellvm.html#afad63f3314b8553ee3c26d020b3ce09e">addRegOffset</a>(<a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(MF, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::MOV32rm), <a class="code" href="namespacellvm_1_1N86.html#a004aaa5711c58178d0371ab88bf1bd63a488c3a2a57ed8f23f0c48d8b40348af0">X86::EAX</a>),</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;                          <a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>, <span class="keyword">false</span>, NumBytes - 4);</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;setFlag(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;      <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3435a2381e60e842e915f85c931b7dde">insert</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;    }</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (NumBytes) {</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;    <a class="code" href="classllvm_1_1X86FrameLowering.html#aa8a605a58ebdee20705834400bdbb922">emitSPUpdate</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, -(int64_t)NumBytes, <span class="comment">/*InEpilogue=*/</span><span class="keyword">false</span>);</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;  }</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160; </div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;  <span class="keywordflow">if</span> (NeedsWinCFI &amp;&amp; NumBytes) {</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;    HasWinCFI = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::SEH_StackAlloc))</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(NumBytes)</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;  }</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160; </div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;  <span class="keywordtype">int</span> SEHFrameOffset = 0;</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;  <span class="keywordtype">unsigned</span> SPOrEstablisher;</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;  <span class="keywordflow">if</span> (IsFunclet) {</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;    <span class="keywordflow">if</span> (IsClrFunclet) {</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;      <span class="comment">// The establisher parameter passed to a CLR funclet is actually a pointer</span></div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;      <span class="comment">// to the (mostly empty) frame of its nearest enclosing funclet; we have</span></div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;      <span class="comment">// to find the root function establisher frame by loading the PSPSym from</span></div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;      <span class="comment">// the intermediate frame.</span></div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;      <span class="keywordtype">unsigned</span> PSPSlotOffset = getPSPSlotOffsetFromSP(MF);</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;      <a class="code" href="structllvm_1_1MachinePointerInfo.html">MachinePointerInfo</a> NoInfo;</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;      <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acce9c12cc977a88dc7bc51493ce7681c">addLiveIn</a>(Establisher);</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;      <a class="code" href="namespacellvm.html#afad63f3314b8553ee3c26d020b3ce09e">addRegOffset</a>(<a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::MOV64rm), Establisher),</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;                   Establisher, <span class="keyword">false</span>, PSPSlotOffset)</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a47760ffd22a82283df0f5da521feca2a">addMemOperand</a>(MF.<a class="code" href="classllvm_1_1MachineFunction.html#a0d496cc15e312863869a384532968143">getMachineMemOperand</a>(</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;              NoInfo, <a class="code" href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2dda7d12be6206e5b0026c71bbcd5cb76494">MachineMemOperand::MOLoad</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>, <a class="code" href="structllvm_1_1Align.html">Align</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>)));</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;      ;</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;      <span class="comment">// Save the root establisher back into the current funclet&#39;s (mostly</span></div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;      <span class="comment">// empty) frame, in case a sub-funclet or the GC needs it.</span></div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;      <a class="code" href="namespacellvm.html#afad63f3314b8553ee3c26d020b3ce09e">addRegOffset</a>(<a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::MOV64mr)), <a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>,</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;                   <span class="keyword">false</span>, PSPSlotOffset)</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(Establisher)</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a47760ffd22a82283df0f5da521feca2a">addMemOperand</a>(MF.<a class="code" href="classllvm_1_1MachineFunction.html#a0d496cc15e312863869a384532968143">getMachineMemOperand</a>(</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;              NoInfo,</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;              <a class="code" href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2ddaed357b1367bc90a56fefa4d1b0e17374">MachineMemOperand::MOStore</a> | <a class="code" href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2dda796891d6ca349b671fce24b6d01d77a8">MachineMemOperand::MOVolatile</a>,</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;              <a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>, <a class="code" href="structllvm_1_1Align.html">Align</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>)));</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;    }</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;    SPOrEstablisher = Establisher;</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;    SPOrEstablisher = <a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>;</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;  }</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160; </div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;  <span class="keywordflow">if</span> (IsWin64Prologue &amp;&amp; HasFP) {</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;    <span class="comment">// Set RBP to a small fixed offset from RSP. In the funclet case, we base</span></div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;    <span class="comment">// this calculation on the incoming establisher, which holds the value of</span></div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;    <span class="comment">// RSP from the parent frame at the end of the prologue.</span></div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;    SEHFrameOffset = <a class="code" href="X86FrameLowering_8cpp.html#a045c9bd8c547ec3f14eba7aedf55a044">calculateSetFPREG</a>(ParentFrameNumBytes);</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;    <span class="keywordflow">if</span> (SEHFrameOffset)</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;      <a class="code" href="namespacellvm.html#afad63f3314b8553ee3c26d020b3ce09e">addRegOffset</a>(<a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::LEA64r), FramePtr),</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;                   SPOrEstablisher, <span class="keyword">false</span>, SEHFrameOffset);</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::MOV64rr), FramePtr)</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(SPOrEstablisher);</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160; </div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;    <span class="comment">// If this is not a funclet, emit the CFI describing our frame pointer.</span></div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;    <span class="keywordflow">if</span> (NeedsWinCFI &amp;&amp; !IsFunclet) {</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!NeedsWinFPO &amp;&amp; <span class="stringliteral">&quot;this setframe incompatible with FPO data&quot;</span>);</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;      HasWinCFI = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::SEH_SetFrame))</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(FramePtr)</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(SEHFrameOffset)</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ab9c9fb92464f96c0e0f326d624e82eab">isAsynchronousEHPersonality</a>(Personality))</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;        MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac828d4f05c8f8b0a1d54c492f718e510">getWinEHFuncInfo</a>()-&gt;<a class="code" href="structllvm_1_1WinEHFuncInfo.html#a38a08c28728c84e59ce6c4ef79bdabcc">SEHSetFrameOffset</a> = SEHFrameOffset;</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;    }</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (IsFunclet &amp;&amp; <a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.is32Bit()) {</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;    <span class="comment">// Reset EBP / ESI to something good for funclets.</span></div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;    <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a> = <a class="code" href="classllvm_1_1X86FrameLowering.html#a535388ac574e0f8d844662d315997b3d">restoreWin32EHStackPointers</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;    <span class="comment">// If we&#39;re a catch funclet, we can be returned to via catchret. Save ESP</span></div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;    <span class="comment">// into the registration node so that the runtime will restore it for us.</span></div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#afe9ba3711c6b7625da1425cc0a7b3f10">isCleanupFuncletEntry</a>()) {</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Personality == <a class="code" href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aab34bedfd8d86f0adbefe4ae0e708f428">EHPersonality::MSVC_CXX</a>);</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> FrameReg;</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;      <span class="keywordtype">int</span> FI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac828d4f05c8f8b0a1d54c492f718e510">getWinEHFuncInfo</a>()-&gt;<a class="code" href="structllvm_1_1WinEHFuncInfo.html#a1685e8ca2cc67569dbfdd32ad11cbe70">EHRegNodeFrameIndex</a>;</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;      int64_t EHRegOffset = <a class="code" href="classllvm_1_1X86FrameLowering.html#a84fbe17f451c957c67de546c98f2b79b">getFrameIndexReference</a>(MF, FI, FrameReg).<a class="code" href="classllvm_1_1StackOffset.html#aeb11e994c5580c80bbb0951eb05f9c80">getFixed</a>();</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;      <span class="comment">// ESP is the first field, so no extra displacement is needed.</span></div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;      <a class="code" href="namespacellvm.html#afad63f3314b8553ee3c26d020b3ce09e">addRegOffset</a>(<a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::MOV32mr)), FrameReg,</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;                   <span class="keyword">false</span>, EHRegOffset)</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(<a class="code" href="namespacellvm_1_1N86.html#a004aaa5711c58178d0371ab88bf1bd63a303dfe7256beaf60eaaa93d1c418965b">X86::ESP</a>);</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;    }</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;  }</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160; </div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a> != <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>() &amp;&amp; <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getFlag(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>)) {</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;FrameInstr = *<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>;</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;    ++<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>;</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160; </div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;    <span class="keywordflow">if</span> (NeedsWinCFI) {</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;      <span class="keywordtype">int</span> FI;</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;      <span class="keywordflow">if</span> (<span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.<a class="code" href="classllvm_1_1X86InstrInfo.html#a4d98443fd30b525106fef2ec68109579">isStoreToStackSlot</a>(FrameInstr, FI)) {</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;        <span class="keywordflow">if</span> (X86::FR64RegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>)) {</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;          <span class="keywordtype">int</span> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>;</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;          <a class="code" href="classllvm_1_1Register.html">Register</a> IgnoredFrameReg;</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;          <span class="keywordflow">if</span> (IsWin64Prologue &amp;&amp; IsFunclet)</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;            <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = <a class="code" href="classllvm_1_1X86FrameLowering.html#acd3876e593314b23ed0679279ee31dfe">getWin64EHFrameIndexRef</a>(MF, FI, IgnoredFrameReg);</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;            <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> =</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;                <a class="code" href="classllvm_1_1X86FrameLowering.html#a84fbe17f451c957c67de546c98f2b79b">getFrameIndexReference</a>(MF, FI, IgnoredFrameReg).<a class="code" href="classllvm_1_1StackOffset.html#aeb11e994c5580c80bbb0951eb05f9c80">getFixed</a>() +</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;                SEHFrameOffset;</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160; </div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;          HasWinCFI = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!NeedsWinFPO &amp;&amp; <span class="stringliteral">&quot;SEH_SaveXMM incompatible with FPO data&quot;</span>);</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;          <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::SEH_SaveXMM))</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;              .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>)</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;              .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>)</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;              .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;        }</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;      }</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;    }</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;  }</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160; </div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;  <span class="keywordflow">if</span> (NeedsWinCFI &amp;&amp; HasWinCFI)</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::SEH_EndPrologue))</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160; </div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;  <span class="keywordflow">if</span> (FnHasClrFunclet &amp;&amp; !IsFunclet) {</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;    <span class="comment">// Save the so-called Initial-SP (i.e. the value of the stack pointer</span></div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;    <span class="comment">// immediately after the prolog)  into the PSPSlot so that funclets</span></div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;    <span class="comment">// and the GC can recover it.</span></div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;    <span class="keywordtype">unsigned</span> PSPSlotOffset = getPSPSlotOffsetFromSP(MF);</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;    <span class="keyword">auto</span> PSPInfo = <a class="code" href="structllvm_1_1MachinePointerInfo.html#ad8ce1aee13dbdcc05d20284a30e83170">MachinePointerInfo::getFixedStack</a>(</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;        MF, MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac828d4f05c8f8b0a1d54c492f718e510">getWinEHFuncInfo</a>()-&gt;<a class="code" href="structllvm_1_1WinEHFuncInfo.html#a14648296e0e889504d49ee3aa956663c">PSPSymFrameIdx</a>);</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;    <a class="code" href="namespacellvm.html#afad63f3314b8553ee3c26d020b3ce09e">addRegOffset</a>(<a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::MOV64mr)), <a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>, <span class="keyword">false</span>,</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;                 PSPSlotOffset)</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>)</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a47760ffd22a82283df0f5da521feca2a">addMemOperand</a>(MF.<a class="code" href="classllvm_1_1MachineFunction.html#a0d496cc15e312863869a384532968143">getMachineMemOperand</a>(</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;            PSPInfo, <a class="code" href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2ddaed357b1367bc90a56fefa4d1b0e17374">MachineMemOperand::MOStore</a> | <a class="code" href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2dda796891d6ca349b671fce24b6d01d77a8">MachineMemOperand::MOVolatile</a>,</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;            <a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>, <a class="code" href="structllvm_1_1Align.html">Align</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>)));</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;  }</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160; </div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;  <span class="comment">// Realign stack after we spilled callee-saved registers (so that we&#39;ll be</span></div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;  <span class="comment">// able to calculate their offsets from the frame pointer).</span></div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;  <span class="comment">// Win64 requires aligning the stack after the prologue.</span></div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;  <span class="keywordflow">if</span> (IsWin64Prologue &amp;&amp; <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;hasStackRealignment(MF)) {</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(HasFP &amp;&amp; <span class="stringliteral">&quot;There should be a frame pointer if stack is realigned.&quot;</span>);</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;    BuildStackAlignAND(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, SPOrEstablisher, MaxAlign);</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;  }</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160; </div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;  <span class="comment">// We already dealt with stack realignment and funclets above.</span></div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;  <span class="keywordflow">if</span> (IsFunclet &amp;&amp; <a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.is32Bit())</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160; </div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;  <span class="comment">// If we need a base pointer, set it up here. It&#39;s whatever the value</span></div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;  <span class="comment">// of the stack pointer is at this point. Any variable size objects</span></div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;  <span class="comment">// will be allocated after this, so we can still use the base pointer</span></div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;  <span class="comment">// to reference locals.</span></div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;<a class="code" href="classllvm_1_1X86RegisterInfo.html#a0d077eae4ce42bad55b66dbf9166113d">hasBasePointer</a>(MF)) {</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;    <span class="comment">// Update the base pointer with the current stack pointer.</span></div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;    <span class="keywordtype">unsigned</span> Opc = <a class="code" href="classllvm_1_1X86FrameLowering.html#abb804392ca8368795013f2e5dc001ee2">Uses64BitFramePtr</a> ? X86::MOV64rr : X86::MOV32rr;</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(Opc), BasePtr)</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(SPOrEstablisher)</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;    <span class="keywordflow">if</span> (X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#aad8e7e85710893cb7fa03109a108a070">getRestoreBasePointer</a>()) {</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;      <span class="comment">// Stash value of base pointer.  Saving RSP instead of EBP shortens</span></div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;      <span class="comment">// dependence chain. Used by SjLj EH.</span></div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;      <span class="keywordtype">unsigned</span> Opm = <a class="code" href="classllvm_1_1X86FrameLowering.html#abb804392ca8368795013f2e5dc001ee2">Uses64BitFramePtr</a> ? X86::MOV64mr : X86::MOV32mr;</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;      <a class="code" href="namespacellvm.html#afad63f3314b8553ee3c26d020b3ce09e">addRegOffset</a>(<a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(Opm)),</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;                   FramePtr, <span class="keyword">true</span>, X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#a5e8edced8a4733e0f6d5d1f9a31f16a4">getRestoreBasePointerOffset</a>())</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(SPOrEstablisher)</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;    }</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160; </div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;    <span class="keywordflow">if</span> (X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#a8ed3059d287792eb8e73780ac551e918">getHasSEHFramePtrSave</a>() &amp;&amp; !IsFunclet) {</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;      <span class="comment">// Stash the value of the frame pointer relative to the base pointer for</span></div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;      <span class="comment">// Win32 EH. This supports Win32 EH, which does the inverse of the above:</span></div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;      <span class="comment">// it recovers the frame pointer from the base pointer rather than the</span></div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;      <span class="comment">// other way around.</span></div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;      <span class="keywordtype">unsigned</span> Opm = <a class="code" href="classllvm_1_1X86FrameLowering.html#abb804392ca8368795013f2e5dc001ee2">Uses64BitFramePtr</a> ? X86::MOV64mr : X86::MOV32mr;</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> UsedReg;</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> =</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;          <a class="code" href="classllvm_1_1X86FrameLowering.html#a84fbe17f451c957c67de546c98f2b79b">getFrameIndexReference</a>(MF, X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#a75b0fbc272791b1c8f9acaa3564abddb">getSEHFramePtrSaveIndex</a>(), UsedReg)</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;              .<a class="code" href="classllvm_1_1StackOffset.html#aeb11e994c5580c80bbb0951eb05f9c80">getFixed</a>();</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(UsedReg == BasePtr);</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;      <a class="code" href="namespacellvm.html#afad63f3314b8553ee3c26d020b3ce09e">addRegOffset</a>(<a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(Opm)), UsedReg, <span class="keyword">true</span>, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>)</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(FramePtr)</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;    }</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;  }</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160; </div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;  <span class="keywordflow">if</span> (((!HasFP &amp;&amp; NumBytes) || PushedRegs) &amp;&amp; NeedsDwarfCFI) {</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;    <span class="comment">// Mark end of stack pointer adjustment.</span></div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;    <span class="keywordflow">if</span> (!HasFP &amp;&amp; NumBytes) {</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;      <span class="comment">// Define the current CFA rule to use the provided offset.</span></div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(StackSize);</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;      <a class="code" href="classllvm_1_1X86FrameLowering.html#aef0079a40a972f2942156b2d73bbf190">BuildCFI</a>(</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;          <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;          <a class="code" href="classllvm_1_1MCCFIInstruction.html#a03e76dd55b65ca0af930c3150413e148">MCCFIInstruction::cfiDefCfaOffset</a>(<span class="keyword">nullptr</span>, StackSize - stackGrowth),</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;          <a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;    }</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160; </div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;    <span class="comment">// Emit DWARF info specifying the offsets of the callee-saved registers.</span></div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;    <a class="code" href="classllvm_1_1X86FrameLowering.html#a6c1f3151b66ea2dfd6a8b9cef815d51c">emitCalleeSavedFrameMoves</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;  }</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160; </div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;  <span class="comment">// X86 Interrupt handling function cannot assume anything about the direction</span></div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;  <span class="comment">// flag (DF in EFLAGS register). Clear this flag by creating &quot;cld&quot; instruction</span></div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;  <span class="comment">// in each prologue of interrupt handler function.</span></div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;  <span class="comment">// FIXME: Create &quot;cld&quot; instruction only in these cases:</span></div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;  <span class="comment">// 1. The interrupt handling function uses any of the &quot;rep&quot; instructions.</span></div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;  <span class="comment">// 2. Interrupt handling function calls another function.</span></div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;  <span class="keywordflow">if</span> (Fn.<a class="code" href="classllvm_1_1Function.html#a5f494edc0a569c7fc9ff4181243be1ed">getCallingConv</a>() == <a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feeda765508a953368531a7d69d1279e6cfb1">CallingConv::X86_INTR</a>)</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::CLD))</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160; </div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;  <span class="comment">// At this point we know if the function has WinCFI or not.</span></div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;  MF.<a class="code" href="classllvm_1_1MachineFunction.html#a330afa0baf556056f9c032480dd57347">setHasWinCFI</a>(HasWinCFI);</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;}</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160; </div>
<div class="line"><a name="l02085"></a><span class="lineno"><a class="line" href="classllvm_1_1X86FrameLowering.html#ad7e593e787ba6a94dbd287c32abe4006"> 2085</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1X86FrameLowering.html#ad7e593e787ba6a94dbd287c32abe4006">X86FrameLowering::canUseLEAForSPInEpilogue</a>(</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;  <span class="comment">// We can&#39;t use LEA instructions for adjusting the stack pointer if we don&#39;t</span></div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;  <span class="comment">// have a frame pointer in the Win64 ABI.  Only ADD instructions may be used</span></div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;  <span class="comment">// to deallocate the stack.</span></div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;  <span class="comment">// This means that we can use LEA for SP in two situations:</span></div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;  <span class="comment">// 1. We *aren&#39;t* using the Win64 ABI which means we are free to use LEA.</span></div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;  <span class="comment">// 2. We *have* a frame pointer which means we are permitted to use LEA.</span></div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;  <span class="keywordflow">return</span> !MF.<a class="code" href="classllvm_1_1MachineFunction.html#ae68d159179d37dc7969439d842e2644f">getTarget</a>().<a class="code" href="classllvm_1_1TargetMachine.html#a171c7253c2b03171bdf22c1bd910f674">getMCAsmInfo</a>()-&gt;<a class="code" href="classllvm_1_1MCAsmInfo.html#ac158349781823fe8ff9e02d3a3533d55">usesWindowsCFI</a>() || <a class="code" href="classllvm_1_1X86FrameLowering.html#a27de32522776b0243eaa10ae9e0c27d4">hasFP</a>(MF);</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;}</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160; </div>
<div class="line"><a name="l02096"></a><span class="lineno"><a class="line" href="X86FrameLowering_8cpp.html#a97265f2cad366f364b2bc884e589277e"> 2096</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="X86FrameLowering_8cpp.html#a97265f2cad366f364b2bc884e589277e">isFuncletReturnInstr</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode()) {</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110aec1078d911aabd272954b9125eaee6df">X86::CATCHRET</a>:</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8b3de6401453f275f010559d01834826">X86::CLEANUPRET</a>:</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;  }</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;  <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;impossible&quot;</span>);</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;}</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160; </div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;<span class="comment">// CLR funclets use a special &quot;Previous Stack Pointer Symbol&quot; slot on the</span></div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;<span class="comment">// stack. It holds a pointer to the bottom of the root function frame.  The</span></div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;<span class="comment">// establisher frame pointer passed to a nested funclet may point to the</span></div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;<span class="comment">// (mostly empty) frame of its parent funclet, but it will need to find</span></div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;<span class="comment">// the frame of the root function to access locals.  To facilitate this,</span></div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;<span class="comment">// every funclet copies the pointer to the bottom of the root function</span></div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;<span class="comment">// frame into a PSPSym slot in its own (mostly empty) stack frame. Using the</span></div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;<span class="comment">// same offset for the PSPSym in the root function frame that&#39;s used in the</span></div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;<span class="comment">// funclets&#39; frames allows each funclet to dynamically accept any ancestor</span></div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;<span class="comment">// frame as its establisher argument (the runtime doesn&#39;t guarantee the</span></div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;<span class="comment">// immediate parent for some reason lost to history), and also allows the GC,</span></div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;<span class="comment">// which uses the PSPSym for some bookkeeping, to find it in any funclet&#39;s</span></div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;<span class="comment">// frame with only a single offset reported for the entire method.</span></div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;<span class="keywordtype">unsigned</span></div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;X86FrameLowering::getPSPSlotOffsetFromSP(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;  <span class="keyword">const</span> <a class="code" href="structllvm_1_1WinEHFuncInfo.html">WinEHFuncInfo</a> &amp;<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a> = *MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac828d4f05c8f8b0a1d54c492f718e510">getWinEHFuncInfo</a>();</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> SPReg;</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = <a class="code" href="classllvm_1_1X86FrameLowering.html#afb20caf4eb8695705452f25d78a18a06">getFrameIndexReferencePreferSP</a>(MF, <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.PSPSymFrameIdx, SPReg,</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;                                              <span class="comment">/*IgnoreSPUpdates*/</span> <span class="keyword">true</span>)</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;                   .<a class="code" href="classllvm_1_1StackOffset.html#aeb11e994c5580c80bbb0951eb05f9c80">getFixed</a>();</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> &gt;= 0 &amp;&amp; SPReg == <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;<a class="code" href="classllvm_1_1X86RegisterInfo.html#a75001f504c95fbf8b2286ec95e9fa169">getStackRegister</a>());</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span><span class="keyword">&gt;</span>(<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>);</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;}</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160; </div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;<span class="keywordtype">unsigned</span></div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;X86FrameLowering::getWinEHFuncletFrameSize(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1X86MachineFunctionInfo.html">X86MachineFunctionInfo</a> *X86FI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html">X86MachineFunctionInfo</a>&gt;();</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;  <span class="comment">// This is the size of the pushed CSRs.</span></div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;  <span class="keywordtype">unsigned</span> CSSize = X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#ad6e59a435273270b3ef84dc8a841c122">getCalleeSavedFrameSize</a>();</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;  <span class="comment">// This is the size of callee saved XMMs.</span></div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; WinEHXMMSlotInfo = X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#ad1223d54741335e6b3595a7e0c528afa">getWinEHXMMSlotInfo</a>();</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;  <span class="keywordtype">unsigned</span> XMMSize = WinEHXMMSlotInfo.<a class="code" href="classllvm_1_1DenseMapBase.html#a3d95cc2d359b8d9ed5bd9504b44930b5">size</a>() *</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;                     <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;getSpillSize(X86::VR128RegClass);</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;  <span class="comment">// This is the amount of stack a funclet needs to allocate.</span></div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;  <span class="keywordtype">unsigned</span> UsedSize;</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;  <a class="code" href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6a">EHPersonality</a> Personality =</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;      <a class="code" href="namespacellvm.html#a8d508f23e2580095561902c39911fb9b">classifyEHPersonality</a>(MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#a6f77e4e800ba4dffd63e8ddb330062aa">getPersonalityFn</a>());</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;  <span class="keywordflow">if</span> (Personality == <a class="code" href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aa05b0e25c98ba4300ca28989a35dab72a">EHPersonality::CoreCLR</a>) {</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;    <span class="comment">// CLR funclets need to hold enough space to include the PSPSym, at the</span></div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;    <span class="comment">// same offset from the stack pointer (immediately after the prolog) as it</span></div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;    <span class="comment">// resides at in the main function.</span></div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;    UsedSize = getPSPSlotOffsetFromSP(MF) + <a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>;</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;    <span class="comment">// Other funclets just need enough stack for outgoing call arguments.</span></div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;    UsedSize = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>().<a class="code" href="classllvm_1_1MachineFrameInfo.html#ac50604920b4866e09017dfff36632593">getMaxCallFrameSize</a>();</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;  }</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;  <span class="comment">// RBP is not included in the callee saved register block. After pushing RBP,</span></div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;  <span class="comment">// everything is 16 byte aligned. Everything we allocate before an outgoing</span></div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;  <span class="comment">// call must also be 16 byte aligned.</span></div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;  <span class="keywordtype">unsigned</span> FrameSizeMinusRBP = <a class="code" href="namespacellvm.html#ab102f0f12dd38aeea5906b1d80c792ff">alignTo</a>(CSSize + UsedSize, <a class="code" href="classllvm_1_1TargetFrameLowering.html#a74d93035f53f5e8c2aaea5a8f307972d">getStackAlign</a>());</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;  <span class="comment">// Subtract out the size of the callee saved registers. This is how much stack</span></div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;  <span class="comment">// each funclet will allocate.</span></div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;  <span class="keywordflow">return</span> FrameSizeMinusRBP + XMMSize - CSSize;</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;}</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160; </div>
<div class="line"><a name="l02162"></a><span class="lineno"><a class="line" href="X86FrameLowering_8cpp.html#a8485a5e7c82a6e2b65a859701c4a6cb8"> 2162</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="X86FrameLowering_8cpp.html#a8485a5e7c82a6e2b65a859701c4a6cb8">isTailCallOpcode</a>(<span class="keywordtype">unsigned</span> Opc) {</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;    <span class="keywordflow">return</span> Opc == X86::TCRETURNri || Opc == X86::TCRETURNdi ||</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;        Opc == X86::TCRETURNmi ||</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;        Opc == X86::TCRETURNri64 || Opc == X86::TCRETURNdi64 ||</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;        Opc == X86::TCRETURNmi64;</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;}</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160; </div>
<div class="line"><a name="l02169"></a><span class="lineno"><a class="line" href="classllvm_1_1X86FrameLowering.html#a353d6967ff6cb7d22110de97773d65d8"> 2169</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1X86FrameLowering.html#a353d6967ff6cb7d22110de97773d65d8">X86FrameLowering::emitEpilogue</a>(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF,</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;                                    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> &amp;MFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>();</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;  <a class="code" href="classllvm_1_1X86MachineFunctionInfo.html">X86MachineFunctionInfo</a> *X86FI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html">X86MachineFunctionInfo</a>&gt;();</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023af121d798d2c14b32e81d537a1f0cff8d">Terminator</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7f0521fa2de44271fd4b909ea7351ef3">getFirstTerminator</a>();</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a> = <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023af121d798d2c14b32e81d537a1f0cff8d">Terminator</a>;</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>;</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a> != <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>())</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;    <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getDebugLoc();</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;  <span class="comment">// standard x86_64 and NaCl use 64-bit frame/stack pointers, x32 - 32-bit.</span></div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> Is64BitILP32 = <a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a60d014846b23498268005ffec9608bc0">isTarget64BitILP32</a>();</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> FramePtr = <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;<a class="code" href="classllvm_1_1X86RegisterInfo.html#a45e0af6fcebf5fd5a4584974e13c6810">getFrameRegister</a>(MF);</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> MachineFramePtr =</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;      Is64BitILP32 ? <a class="code" href="classllvm_1_1Register.html">Register</a>(<a class="code" href="namespacellvm.html#a27b344a283e0620f484144889fe32064">getX86SubSuperRegister</a>(FramePtr, 64)) : FramePtr;</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160; </div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;  <span class="keywordtype">bool</span> IsWin64Prologue = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ae68d159179d37dc7969439d842e2644f">getTarget</a>().<a class="code" href="classllvm_1_1TargetMachine.html#a171c7253c2b03171bdf22c1bd910f674">getMCAsmInfo</a>()-&gt;<a class="code" href="classllvm_1_1MCAsmInfo.html#ac158349781823fe8ff9e02d3a3533d55">usesWindowsCFI</a>();</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;  <span class="keywordtype">bool</span> NeedsWin64CFI =</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;      IsWin64Prologue &amp;&amp; MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#ad7332117b148c3f93c1d7e58306ee748">needsUnwindTableEntry</a>();</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;  <span class="keywordtype">bool</span> IsFunclet = <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a> == <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>() ? <a class="code" href="AliasAnalysis_8cpp.html#af930af31a919474bec5b29dd0d0bb8ba">false</a> : <a class="code" href="X86FrameLowering_8cpp.html#a97265f2cad366f364b2bc884e589277e">isFuncletReturnInstr</a>(*<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>);</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160; </div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;  <span class="comment">// Get the number of bytes to allocate from the FrameInfo.</span></div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> StackSize = MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a14c39a24bf6ebbe339ae8a453c7fdd11">getStackSize</a>();</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> MaxAlign = calculateMaxStackAlign(MF);</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;  <span class="keywordtype">unsigned</span> CSSize = X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#ad6e59a435273270b3ef84dc8a841c122">getCalleeSavedFrameSize</a>();</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;  <span class="keywordtype">unsigned</span> TailCallArgReserveSize = -X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#a7c7a3251bd6c1b0b89e5712c89aaa305">getTCReturnAddrDelta</a>();</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;  <span class="keywordtype">bool</span> HasFP = <a class="code" href="classllvm_1_1X86FrameLowering.html#a27de32522776b0243eaa10ae9e0c27d4">hasFP</a>(MF);</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> NumBytes = 0;</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160; </div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;  <span class="keywordtype">bool</span> NeedsDwarfCFI = (!MF.<a class="code" href="classllvm_1_1MachineFunction.html#ae68d159179d37dc7969439d842e2644f">getTarget</a>().<a class="code" href="classllvm_1_1TargetMachine.html#ad63e0e437ca71cc2b5a5d4d5aa3685f2">getTargetTriple</a>().<a class="code" href="classllvm_1_1Triple.html#ab6fdf9b428bc3d57837022121c155cbf">isOSDarwin</a>() &amp;&amp;</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;                        !MF.<a class="code" href="classllvm_1_1MachineFunction.html#ae68d159179d37dc7969439d842e2644f">getTarget</a>().<a class="code" href="classllvm_1_1TargetMachine.html#ad63e0e437ca71cc2b5a5d4d5aa3685f2">getTargetTriple</a>().<a class="code" href="classllvm_1_1Triple.html#a7736bfc4c1afef875ecf02f2a7701fe3">isOSWindows</a>()) &amp;&amp;</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;                       MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4f117e439113383ea819a6f7beb8ff0b">needsFrameMoves</a>();</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160; </div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;  <span class="keywordflow">if</span> (IsFunclet) {</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(HasFP &amp;&amp; <span class="stringliteral">&quot;EH funclets without FP not yet implemented&quot;</span>);</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;    NumBytes = getWinEHFuncletFrameSize(MF);</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (HasFP) {</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;    <span class="comment">// Calculate required stack adjustment.</span></div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> FrameSize = StackSize - <a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>;</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;    NumBytes = FrameSize - CSSize - TailCallArgReserveSize;</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160; </div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;    <span class="comment">// Callee-saved registers were pushed on stack before the stack was</span></div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;    <span class="comment">// realigned.</span></div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;hasStackRealignment(MF) &amp;&amp; !IsWin64Prologue)</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;      NumBytes = <a class="code" href="namespacellvm.html#ab102f0f12dd38aeea5906b1d80c792ff">alignTo</a>(FrameSize, MaxAlign);</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;    NumBytes = StackSize - CSSize - TailCallArgReserveSize;</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;  }</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> SEHStackAllocAmt = NumBytes;</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160; </div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;  <span class="comment">// AfterPop is the position to insert .cfi_restore.</span></div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> AfterPop = <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>;</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;  <span class="keywordflow">if</span> (HasFP) {</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;    <span class="keywordflow">if</span> (X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#aa92686e5bcf4b22006a54652f92254df">hasSwiftAsyncContext</a>()) {</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;      <span class="comment">// Discard the context.</span></div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = 16 + <a class="code" href="classllvm_1_1X86FrameLowering.html#af1d6349ca67f14c36e41916e41536da4">mergeSPUpdates</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;      <a class="code" href="classllvm_1_1X86FrameLowering.html#aa8a605a58ebdee20705834400bdbb922">emitSPUpdate</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>, <span class="comment">/*InEpilogue*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;    }</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;    <span class="comment">// Pop EBP.</span></div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(<a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a> ? X86::POP64r : X86::POP32r),</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;            MachineFramePtr)</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">MachineInstr::FrameDestroy</a>);</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160; </div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;    <span class="comment">// We need to reset FP to its untagged state on return. Bit 60 is currently</span></div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;    <span class="comment">// used to show the presence of an extended frame.</span></div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;    <span class="keywordflow">if</span> (X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#aa92686e5bcf4b22006a54652f92254df">hasSwiftAsyncContext</a>()) {</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::BTR64ri8),</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;              MachineFramePtr)</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#aec748fa81e1488192450f0b2a8d1aeca">addUse</a>(MachineFramePtr)</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(60)</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">MachineInstr::FrameDestroy</a>);</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;    }</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160; </div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;    <span class="keywordflow">if</span> (NeedsDwarfCFI) {</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;      <span class="keywordtype">unsigned</span> DwarfStackPtr =</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;          <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;getDwarfRegNum(<a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a> ? X86::RSP : <a class="code" href="namespacellvm_1_1N86.html#a004aaa5711c58178d0371ab88bf1bd63a303dfe7256beaf60eaaa93d1c418965b">X86::ESP</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;      <a class="code" href="classllvm_1_1X86FrameLowering.html#aef0079a40a972f2942156b2d73bbf190">BuildCFI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;               <a class="code" href="classllvm_1_1MCCFIInstruction.html#abda962a8d0de68f0817ed1837557713a">MCCFIInstruction::cfiDefCfa</a>(<span class="keyword">nullptr</span>, DwarfStackPtr, <a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>),</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;               <a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">MachineInstr::FrameDestroy</a>);</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#aa8d1d8d88835b75b05b14ab774785e8a">succ_empty</a>() &amp;&amp; !<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a82f5d244972c88ff03ee56d6c090ac70">isReturnBlock</a>()) {</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;        <span class="keywordtype">unsigned</span> DwarfFramePtr = <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;getDwarfRegNum(MachineFramePtr, <span class="keyword">true</span>);</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;        <a class="code" href="classllvm_1_1X86FrameLowering.html#aef0079a40a972f2942156b2d73bbf190">BuildCFI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, AfterPop, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;                 <a class="code" href="classllvm_1_1MCCFIInstruction.html#a3828c9fbb57095c51896fb2499e60044">MCCFIInstruction::createRestore</a>(<span class="keyword">nullptr</span>, DwarfFramePtr),</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;                 <a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">MachineInstr::FrameDestroy</a>);</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;        --<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>;</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;        --AfterPop;</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;      }</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;      --<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>;</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;    }</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;  }</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160; </div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> FirstCSPop = <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>;</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;  <span class="comment">// Skip the callee-saved pop instructions.</span></div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a> != <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>()) {</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;    <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> PI = std::prev(<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>);</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;    <span class="keywordtype">unsigned</span> Opc = PI-&gt;getOpcode();</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160; </div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;    <span class="keywordflow">if</span> (Opc != X86::DBG_VALUE &amp;&amp; !PI-&gt;isTerminator()) {</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;      <span class="keywordflow">if</span> ((Opc != X86::POP32r || !PI-&gt;getFlag(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">MachineInstr::FrameDestroy</a>)) &amp;&amp;</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;          (Opc != X86::POP64r || !PI-&gt;getFlag(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">MachineInstr::FrameDestroy</a>)) &amp;&amp;</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;          (Opc != X86::BTR64ri8 || !PI-&gt;getFlag(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">MachineInstr::FrameDestroy</a>)) &amp;&amp;</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;          (Opc != X86::ADD64ri8 || !PI-&gt;getFlag(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">MachineInstr::FrameDestroy</a>)))</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;      FirstCSPop = PI;</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;    }</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160; </div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;    --<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>;</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;  }</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;  <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a> = FirstCSPop;</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160; </div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;  <span class="keywordflow">if</span> (IsFunclet &amp;&amp; <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023af121d798d2c14b32e81d537a1f0cff8d">Terminator</a>-&gt;getOpcode() == <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110aec1078d911aabd272954b9125eaee6df">X86::CATCHRET</a>)</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;    emitCatchRetReturnValue(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, FirstCSPop, &amp;*<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023af121d798d2c14b32e81d537a1f0cff8d">Terminator</a>);</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160; </div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a> != <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>())</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;    <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getDebugLoc();</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;  <span class="comment">// If there is an ADD32ri or SUB32ri of ESP immediately before this</span></div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;  <span class="comment">// instruction, merge the two instructions.</span></div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;  <span class="keywordflow">if</span> (NumBytes || MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a0509430713d587eba74220a8375948a8">hasVarSizedObjects</a>())</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;    NumBytes += <a class="code" href="classllvm_1_1X86FrameLowering.html#af1d6349ca67f14c36e41916e41536da4">mergeSPUpdates</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160; </div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;  <span class="comment">// If dynamic alloca is used, then reset esp to point to the last callee-saved</span></div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;  <span class="comment">// slot before popping them off! Same applies for the case, when stack was</span></div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;  <span class="comment">// realigned. Don&#39;t do this if this was a funclet epilogue, since the funclets</span></div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;  <span class="comment">// will not do realignment or dynamic stack allocation.</span></div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;  <span class="keywordflow">if</span> (((<a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;hasStackRealignment(MF)) || MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a0509430713d587eba74220a8375948a8">hasVarSizedObjects</a>()) &amp;&amp;</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;      !IsFunclet) {</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;hasStackRealignment(MF))</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;      <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a> = FirstCSPop;</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;    <span class="keywordtype">unsigned</span> SEHFrameOffset = <a class="code" href="X86FrameLowering_8cpp.html#a045c9bd8c547ec3f14eba7aedf55a044">calculateSetFPREG</a>(SEHStackAllocAmt);</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> LEAAmount =</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;        IsWin64Prologue ? SEHStackAllocAmt - SEHFrameOffset : -CSSize;</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160; </div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;    <span class="keywordflow">if</span> (X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#aa92686e5bcf4b22006a54652f92254df">hasSwiftAsyncContext</a>())</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;      LEAAmount -= 16;</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160; </div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;    <span class="comment">// There are only two legal forms of epilogue:</span></div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;    <span class="comment">// - add SEHAllocationSize, %rsp</span></div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;    <span class="comment">// - lea SEHAllocationSize(%FramePtr), %rsp</span></div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;    <span class="comment">// &#39;mov %FramePtr, %rsp&#39; will not be recognized as an epilogue sequence.</span></div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;    <span class="comment">// However, we may use this sequence if we have a frame pointer because the</span></div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;    <span class="comment">// effects of the prologue can safely be undone.</span></div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;    <span class="keywordflow">if</span> (LEAAmount != 0) {</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;      <span class="keywordtype">unsigned</span> Opc = <a class="code" href="X86FrameLowering_8cpp.html#a48597b35dc2ab842232cc2a5c6047401">getLEArOpcode</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#abb804392ca8368795013f2e5dc001ee2">Uses64BitFramePtr</a>);</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;      <a class="code" href="namespacellvm.html#afad63f3314b8553ee3c26d020b3ce09e">addRegOffset</a>(<a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(Opc), <a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>),</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;                   FramePtr, <span class="keyword">false</span>, LEAAmount);</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;      --<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>;</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;      <span class="keywordtype">unsigned</span> Opc = (<a class="code" href="classllvm_1_1X86FrameLowering.html#abb804392ca8368795013f2e5dc001ee2">Uses64BitFramePtr</a> ? X86::MOV64rr : X86::MOV32rr);</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(Opc), <a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>)</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(FramePtr);</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;      --<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>;</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;    }</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (NumBytes) {</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;    <span class="comment">// Adjust stack pointer back: ESP += numbytes.</span></div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;    <a class="code" href="classllvm_1_1X86FrameLowering.html#aa8a605a58ebdee20705834400bdbb922">emitSPUpdate</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, NumBytes, <span class="comment">/*InEpilogue=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;    <span class="keywordflow">if</span> (!HasFP &amp;&amp; NeedsDwarfCFI) {</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;      <span class="comment">// Define the current CFA rule to use the provided offset.</span></div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;      <a class="code" href="classllvm_1_1X86FrameLowering.html#aef0079a40a972f2942156b2d73bbf190">BuildCFI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;               <a class="code" href="classllvm_1_1MCCFIInstruction.html#a03e76dd55b65ca0af930c3150413e148">MCCFIInstruction::cfiDefCfaOffset</a>(</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;                   <span class="keyword">nullptr</span>, CSSize + TailCallArgReserveSize + <a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>),</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;               <a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">MachineInstr::FrameDestroy</a>);</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;    }</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;    --<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>;</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;  }</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160; </div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;  <span class="comment">// Windows unwinder will not invoke function&#39;s exception handler if IP is</span></div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;  <span class="comment">// either in prologue or in epilogue.  This behavior causes a problem when a</span></div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;  <span class="comment">// call immediately precedes an epilogue, because the return address points</span></div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;  <span class="comment">// into the epilogue.  To cope with that, we insert an epilogue marker here,</span></div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;  <span class="comment">// then replace it with a &#39;nop&#39; if it ends up immediately after a CALL in the</span></div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;  <span class="comment">// final emitted code.</span></div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;  <span class="keywordflow">if</span> (NeedsWin64CFI &amp;&amp; MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4a8d56726b9e91d336422a546d126a0f">hasWinCFI</a>())</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::SEH_Epilogue));</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160; </div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;  <span class="keywordflow">if</span> (!HasFP &amp;&amp; NeedsDwarfCFI) {</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;    <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a> = FirstCSPop;</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;    int64_t <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = -CSSize - <a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>;</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;    <span class="comment">// Mark callee-saved pop instruction.</span></div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;    <span class="comment">// Define the current CFA rule to use the provided offset.</span></div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a> != <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>()) {</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;      <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> PI = <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>;</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;      <span class="keywordtype">unsigned</span> Opc = PI-&gt;getOpcode();</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;      ++<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>;</div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;      <span class="keywordflow">if</span> (Opc == X86::POP32r || Opc == X86::POP64r) {</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;        <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> += <a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>;</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;        <a class="code" href="classllvm_1_1X86FrameLowering.html#aef0079a40a972f2942156b2d73bbf190">BuildCFI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;                 <a class="code" href="classllvm_1_1MCCFIInstruction.html#a03e76dd55b65ca0af930c3150413e148">MCCFIInstruction::cfiDefCfaOffset</a>(<span class="keyword">nullptr</span>, -<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>),</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;                 <a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">MachineInstr::FrameDestroy</a>);</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;      }</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;    }</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;  }</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160; </div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;  <span class="comment">// Emit DWARF info specifying the restores of the callee-saved registers.</span></div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;  <span class="comment">// For epilogue with return inside or being other block without successor,</span></div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;  <span class="comment">// no need to generate .cfi_restore for callee-saved registers.</span></div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;  <span class="keywordflow">if</span> (NeedsDwarfCFI &amp;&amp; !<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#aa8d1d8d88835b75b05b14ab774785e8a">succ_empty</a>())</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;    <a class="code" href="classllvm_1_1X86FrameLowering.html#a6c1f3151b66ea2dfd6a8b9cef815d51c">emitCalleeSavedFrameMoves</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, AfterPop, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160; </div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023af121d798d2c14b32e81d537a1f0cff8d">Terminator</a> == <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>() || !<a class="code" href="X86FrameLowering_8cpp.html#a8485a5e7c82a6e2b65a859701c4a6cb8">isTailCallOpcode</a>(<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023af121d798d2c14b32e81d537a1f0cff8d">Terminator</a>-&gt;getOpcode())) {</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;    <span class="comment">// Add the return addr area delta back since we are not tail calling.</span></div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = -1 * X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#a7c7a3251bd6c1b0b89e5712c89aaa305">getTCReturnAddrDelta</a>();</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> &gt;= 0 &amp;&amp; <span class="stringliteral">&quot;TCDelta should never be positive&quot;</span>);</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>) {</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;      <span class="comment">// Check for possible merge with preceding ADD instruction.</span></div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;      <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> += <a class="code" href="classllvm_1_1X86FrameLowering.html#af1d6349ca67f14c36e41916e41536da4">mergeSPUpdates</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023af121d798d2c14b32e81d537a1f0cff8d">Terminator</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;      <a class="code" href="classllvm_1_1X86FrameLowering.html#aa8a605a58ebdee20705834400bdbb922">emitSPUpdate</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023af121d798d2c14b32e81d537a1f0cff8d">Terminator</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>, <span class="comment">/*InEpilogue=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;    }</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;  }</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160; </div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;  <span class="comment">// Emit tilerelease for AMX kernel.</span></div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;  <span class="keywordflow">if</span> (X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#a4b710e7ebaee24f8af4b79ed618c971f">hasVirtualTileReg</a>())</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023af121d798d2c14b32e81d537a1f0cff8d">Terminator</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::TILERELEASE));</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;}</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160; </div>
<div class="line"><a name="l02383"></a><span class="lineno"><a class="line" href="classllvm_1_1X86FrameLowering.html#a84fbe17f451c957c67de546c98f2b79b"> 2383</a></span>&#160;<a class="code" href="classllvm_1_1StackOffset.html">StackOffset</a> <a class="code" href="classllvm_1_1X86FrameLowering.html#a84fbe17f451c957c67de546c98f2b79b">X86FrameLowering::getFrameIndexReference</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF,</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;                                                     <span class="keywordtype">int</span> FI,</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;                                                     <a class="code" href="classllvm_1_1Register.html">Register</a> &amp;FrameReg)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> &amp;MFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>();</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160; </div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;  <span class="keywordtype">bool</span> IsFixed = MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#ae6e7e975f7a4e5d535be32068a7c67df">isFixedObjectIndex</a>(FI);</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;  <span class="comment">// We can&#39;t calculate offset from frame pointer if the stack is realigned,</span></div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;  <span class="comment">// so enforce usage of stack/base pointer.  The base pointer is used when we</span></div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;  <span class="comment">// have dynamic allocas in addition to dynamic realignment.</span></div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;<a class="code" href="classllvm_1_1X86RegisterInfo.html#a0d077eae4ce42bad55b66dbf9166113d">hasBasePointer</a>(MF))</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;    FrameReg = IsFixed ? <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;<a class="code" href="classllvm_1_1X86RegisterInfo.html#ac117c05656fb2c5fb08b1df3a4af2fe8">getFramePtr</a>() : <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;<a class="code" href="classllvm_1_1X86RegisterInfo.html#ad057cb3300544ebb741b871a45faae7d">getBaseRegister</a>();</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;hasStackRealignment(MF))</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;    FrameReg = IsFixed ? <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;<a class="code" href="classllvm_1_1X86RegisterInfo.html#ac117c05656fb2c5fb08b1df3a4af2fe8">getFramePtr</a>() : <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;<a class="code" href="classllvm_1_1X86RegisterInfo.html#a75001f504c95fbf8b2286ec95e9fa169">getStackRegister</a>();</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;    FrameReg = <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;<a class="code" href="classllvm_1_1X86RegisterInfo.html#a45e0af6fcebf5fd5a4584974e13c6810">getFrameRegister</a>(MF);</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160; </div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;  <span class="comment">// Offset will hold the offset from the stack pointer at function entry to the</span></div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;  <span class="comment">// object.</span></div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;  <span class="comment">// We need to factor in additional offsets applied during the prologue to the</span></div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;  <span class="comment">// frame, base, and stack pointer depending on which is used.</span></div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#adf98860d7f42290f873c82a981eb0ea6">getObjectOffset</a>(FI) - <a class="code" href="classllvm_1_1TargetFrameLowering.html#a6521d4d5560c03b2e6490883558b882c">getOffsetOfLocalArea</a>();</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1X86MachineFunctionInfo.html">X86MachineFunctionInfo</a> *X86FI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html">X86MachineFunctionInfo</a>&gt;();</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;  <span class="keywordtype">unsigned</span> CSSize = X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#ad6e59a435273270b3ef84dc8a841c122">getCalleeSavedFrameSize</a>();</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> StackSize = MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a14c39a24bf6ebbe339ae8a453c7fdd11">getStackSize</a>();</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;  <span class="keywordtype">bool</span> IsWin64Prologue = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ae68d159179d37dc7969439d842e2644f">getTarget</a>().<a class="code" href="classllvm_1_1TargetMachine.html#a171c7253c2b03171bdf22c1bd910f674">getMCAsmInfo</a>()-&gt;<a class="code" href="classllvm_1_1MCAsmInfo.html#ac158349781823fe8ff9e02d3a3533d55">usesWindowsCFI</a>();</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;  int64_t FPDelta = 0;</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160; </div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;  <span class="comment">// In an x86 interrupt, remove the offset we added to account for the return</span></div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;  <span class="comment">// address from any stack object allocated in the caller&#39;s frame. Interrupts</span></div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;  <span class="comment">// do not have a standard return address. Fixed objects in the current frame,</span></div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;  <span class="comment">// such as SSE register spills, should not get this treatment.</span></div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;  <span class="keywordflow">if</span> (MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#a5f494edc0a569c7fc9ff4181243be1ed">getCallingConv</a>() == <a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feeda765508a953368531a7d69d1279e6cfb1">CallingConv::X86_INTR</a> &amp;&amp;</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;      <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> &gt;= 0) {</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;    <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> += <a class="code" href="classllvm_1_1TargetFrameLowering.html#a6521d4d5560c03b2e6490883558b882c">getOffsetOfLocalArea</a>();</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;  }</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160; </div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;  <span class="keywordflow">if</span> (IsWin64Prologue) {</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a2cc8bb867c8949943ca7d88f1db31fde">hasCalls</a>() || (StackSize % 16) == 8);</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160; </div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;    <span class="comment">// Calculate required stack adjustment.</span></div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> FrameSize = StackSize - <a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>;</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;    <span class="comment">// If required, include space for extra hidden slot for stashing base pointer.</span></div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;    <span class="keywordflow">if</span> (X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#aad8e7e85710893cb7fa03109a108a070">getRestoreBasePointer</a>())</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;      FrameSize += <a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>;</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> NumBytes = FrameSize - CSSize;</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160; </div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> SEHFrameOffset = <a class="code" href="X86FrameLowering_8cpp.html#a045c9bd8c547ec3f14eba7aedf55a044">calculateSetFPREG</a>(NumBytes);</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;    <span class="keywordflow">if</span> (FI &amp;&amp; FI == X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#a7024c419adc3f16454faa53af71fb515">getFAIndex</a>())</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1StackOffset.html#a0775e5fb52ac148f4d06e7eedb34e94e">StackOffset::getFixed</a>(-SEHFrameOffset);</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160; </div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;    <span class="comment">// FPDelta is the offset from the &quot;traditional&quot; FP location of the old base</span></div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;    <span class="comment">// pointer followed by return address and the location required by the</span></div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;    <span class="comment">// restricted Win64 prologue.</span></div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;    <span class="comment">// Add FPDelta to all offsets below that go through the frame pointer.</span></div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;    FPDelta = FrameSize - SEHFrameOffset;</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a2cc8bb867c8949943ca7d88f1db31fde">hasCalls</a>() || (FPDelta % 16) == 0) &amp;&amp;</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;           <span class="stringliteral">&quot;FPDelta isn&#39;t aligned per the Win64 ABI!&quot;</span>);</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;  }</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160; </div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;  <span class="keywordflow">if</span> (FrameReg == <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;<a class="code" href="classllvm_1_1X86RegisterInfo.html#ac117c05656fb2c5fb08b1df3a4af2fe8">getFramePtr</a>()) {</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;    <span class="comment">// Skip saved EBP/RBP</span></div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;    <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> += <a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>;</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160; </div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;    <span class="comment">// Account for restricted Windows prologue.</span></div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;    <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> += FPDelta;</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160; </div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;    <span class="comment">// Skip the RETADDR move area</span></div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;    <span class="keywordtype">int</span> TailCallReturnAddrDelta = X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#a7c7a3251bd6c1b0b89e5712c89aaa305">getTCReturnAddrDelta</a>();</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;    <span class="keywordflow">if</span> (TailCallReturnAddrDelta &lt; 0)</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;      <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> -= TailCallReturnAddrDelta;</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160; </div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1StackOffset.html#a0775e5fb52ac148f4d06e7eedb34e94e">StackOffset::getFixed</a>(<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>);</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;  }</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160; </div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;  <span class="comment">// FrameReg is either the stack pointer or a base pointer. But the base is</span></div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;  <span class="comment">// located at the end of the statically known StackSize so the distinction</span></div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;  <span class="comment">// doesn&#39;t really matter.</span></div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;hasStackRealignment(MF) || <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;<a class="code" href="classllvm_1_1X86RegisterInfo.html#a0d077eae4ce42bad55b66dbf9166113d">hasBasePointer</a>(MF))</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm.html#a25f1d7ccf87af8d87fcb950f7ed758b5">isAligned</a>(MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a8320a54de0a273478de910ac3795058b">getObjectAlign</a>(FI), -(<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> + StackSize)));</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1StackOffset.html#a0775e5fb52ac148f4d06e7eedb34e94e">StackOffset::getFixed</a>(<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> + StackSize);</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;}</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160; </div>
<div class="line"><a name="l02465"></a><span class="lineno"><a class="line" href="classllvm_1_1X86FrameLowering.html#acd3876e593314b23ed0679279ee31dfe"> 2465</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classllvm_1_1X86FrameLowering.html#acd3876e593314b23ed0679279ee31dfe">X86FrameLowering::getWin64EHFrameIndexRef</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, <span class="keywordtype">int</span> FI,</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;                                              <a class="code" href="classllvm_1_1Register.html">Register</a> &amp;FrameReg)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> &amp;MFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>();</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1X86MachineFunctionInfo.html">X86MachineFunctionInfo</a> *X86FI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html">X86MachineFunctionInfo</a>&gt;();</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; WinEHXMMSlotInfo = X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#ad1223d54741335e6b3595a7e0c528afa">getWinEHXMMSlotInfo</a>();</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> <a class="code" href="README-SSE_8txt.html#abb4ce3bc3096a12d4b93460bf78bcf95">it</a> = WinEHXMMSlotInfo.find(FI);</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160; </div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="README-SSE_8txt.html#abb4ce3bc3096a12d4b93460bf78bcf95">it</a> == WinEHXMMSlotInfo.end())</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1X86FrameLowering.html#a84fbe17f451c957c67de546c98f2b79b">getFrameIndexReference</a>(MF, FI, FrameReg).<a class="code" href="classllvm_1_1StackOffset.html#aeb11e994c5580c80bbb0951eb05f9c80">getFixed</a>();</div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160; </div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;  FrameReg = <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;<a class="code" href="classllvm_1_1X86RegisterInfo.html#a75001f504c95fbf8b2286ec95e9fa169">getStackRegister</a>();</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#ad9be86c95736bfa4bb0dc52322a0002a">alignDown</a>(MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#ac50604920b4866e09017dfff36632593">getMaxCallFrameSize</a>(), <a class="code" href="classllvm_1_1TargetFrameLowering.html#a74d93035f53f5e8c2aaea5a8f307972d">getStackAlign</a>().value()) +</div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;         <a class="code" href="README-SSE_8txt.html#abb4ce3bc3096a12d4b93460bf78bcf95">it</a>-&gt;second;</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;}</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160; </div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;<a class="code" href="classllvm_1_1StackOffset.html">StackOffset</a></div>
<div class="line"><a name="l02481"></a><span class="lineno"><a class="line" href="classllvm_1_1X86FrameLowering.html#a79ebbed1ceecae3f74214e33fc8c533f"> 2481</a></span>&#160;<a class="code" href="classllvm_1_1X86FrameLowering.html#a79ebbed1ceecae3f74214e33fc8c533f">X86FrameLowering::getFrameIndexReferenceSP</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, <span class="keywordtype">int</span> FI,</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;                                           <a class="code" href="classllvm_1_1Register.html">Register</a> &amp;FrameReg,</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;                                           <span class="keywordtype">int</span> Adjustment)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> &amp;MFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>();</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;  FrameReg = <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;<a class="code" href="classllvm_1_1X86RegisterInfo.html#a75001f504c95fbf8b2286ec95e9fa169">getStackRegister</a>();</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1StackOffset.html#a0775e5fb52ac148f4d06e7eedb34e94e">StackOffset::getFixed</a>(MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#adf98860d7f42290f873c82a981eb0ea6">getObjectOffset</a>(FI) -</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;                               <a class="code" href="classllvm_1_1TargetFrameLowering.html#a6521d4d5560c03b2e6490883558b882c">getOffsetOfLocalArea</a>() + Adjustment);</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;}</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160; </div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;<a class="code" href="classllvm_1_1StackOffset.html">StackOffset</a></div>
<div class="line"><a name="l02491"></a><span class="lineno"><a class="line" href="classllvm_1_1X86FrameLowering.html#afb20caf4eb8695705452f25d78a18a06"> 2491</a></span>&#160;<a class="code" href="classllvm_1_1X86FrameLowering.html#afb20caf4eb8695705452f25d78a18a06">X86FrameLowering::getFrameIndexReferencePreferSP</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF,</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;                                                 <span class="keywordtype">int</span> FI, <a class="code" href="classllvm_1_1Register.html">Register</a> &amp;FrameReg,</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;                                                 <span class="keywordtype">bool</span> IgnoreSPUpdates)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160; </div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> &amp;MFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>();</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;  <span class="comment">// Does not include any dynamic realign.</span></div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;  <span class="keyword">const</span> <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> StackSize = MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a14c39a24bf6ebbe339ae8a453c7fdd11">getStackSize</a>();</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;  <span class="comment">// LLVM arranges the stack as follows:</span></div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;  <span class="comment">//   ...</span></div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;  <span class="comment">//   ARG2</span></div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;  <span class="comment">//   ARG1</span></div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;  <span class="comment">//   RETADDR</span></div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;  <span class="comment">//   PUSH RBP   &lt;-- RBP points here</span></div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;  <span class="comment">//   PUSH CSRs</span></div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;  <span class="comment">//   ~~~~~~~    &lt;-- possible stack realignment (non-win64)</span></div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;  <span class="comment">//   ...</span></div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;  <span class="comment">//   STACK OBJECTS</span></div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;  <span class="comment">//   ...        &lt;-- RSP after prologue points here</span></div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;  <span class="comment">//   ~~~~~~~    &lt;-- possible stack realignment (win64)</span></div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;  <span class="comment">// if (hasVarSizedObjects()):</span></div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;  <span class="comment">//   ...        &lt;-- &quot;base pointer&quot; (ESI/RBX) points here</span></div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;  <span class="comment">//   DYNAMIC ALLOCAS</span></div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;  <span class="comment">//   ...        &lt;-- RSP points here</span></div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;  <span class="comment">// Case 1: In the simple case of no stack realignment and no dynamic</span></div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;  <span class="comment">// allocas, both &quot;fixed&quot; stack objects (arguments and CSRs) are addressable</span></div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;  <span class="comment">// with fixed offsets from RSP.</span></div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;  <span class="comment">// Case 2: In the case of stack realignment with no dynamic allocas, fixed</span></div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;  <span class="comment">// stack objects are addressed with RBP and regular stack objects with RSP.</span></div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;  <span class="comment">// Case 3: In the case of dynamic allocas and stack realignment, RSP is used</span></div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;  <span class="comment">// to address stack arguments for outgoing calls and nothing else. The &quot;base</span></div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;  <span class="comment">// pointer&quot; points to local variables, and RBP points to fixed objects.</span></div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;  <span class="comment">// In cases 2 and 3, we can only answer for non-fixed stack objects, and the</span></div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;  <span class="comment">// answer we give is relative to the SP after the prologue, and not the</span></div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;  <span class="comment">// SP in the middle of the function.</span></div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160; </div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;  <span class="keywordflow">if</span> (MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#ae6e7e975f7a4e5d535be32068a7c67df">isFixedObjectIndex</a>(FI) &amp;&amp; <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;hasStackRealignment(MF) &amp;&amp;</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;      !<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a649bfd3c9cf9a6b1d1bab86556e866dd">isTargetWin64</a>())</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1X86FrameLowering.html#a84fbe17f451c957c67de546c98f2b79b">getFrameIndexReference</a>(MF, FI, FrameReg);</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160; </div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;  <span class="comment">// If !hasReservedCallFrame the function might have SP adjustement in the</span></div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;  <span class="comment">// body.  So, even though the offset is statically known, it depends on where</span></div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;  <span class="comment">// we are in the function.</span></div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;  <span class="keywordflow">if</span> (!IgnoreSPUpdates &amp;&amp; !<a class="code" href="classllvm_1_1X86FrameLowering.html#a6696e7a9f36d7983d3593e5f4a17831f">hasReservedCallFrame</a>(MF))</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1X86FrameLowering.html#a84fbe17f451c957c67de546c98f2b79b">getFrameIndexReference</a>(MF, FI, FrameReg);</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160; </div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;  <span class="comment">// We don&#39;t handle tail calls, and shouldn&#39;t be seeing them either.</span></div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html">X86MachineFunctionInfo</a>&gt;()-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#a7c7a3251bd6c1b0b89e5712c89aaa305">getTCReturnAddrDelta</a>() &gt;= 0 &amp;&amp;</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;         <span class="stringliteral">&quot;we don&#39;t handle this case!&quot;</span>);</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160; </div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;  <span class="comment">// This is how the math works out:</span></div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;  <span class="comment">//  %rsp grows (i.e. gets lower) left to right. Each box below is</span></div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;  <span class="comment">//  one word (eight bytes).  Obj0 is the stack slot we&#39;re trying to</span></div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;  <span class="comment">//  get to.</span></div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;  <span class="comment">//    ----------------------------------</span></div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;  <span class="comment">//    | BP | Obj0 | Obj1 | ... | ObjN |</span></div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;  <span class="comment">//    ----------------------------------</span></div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;  <span class="comment">//    ^    ^      ^                   ^</span></div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;  <span class="comment">//    A    B      C                   E</span></div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;  <span class="comment">// A is the incoming stack pointer.</span></div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;  <span class="comment">// (B - A) is the local area offset (-8 for x86-64) [1]</span></div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;  <span class="comment">// (C - A) is the Offset returned by MFI.getObjectOffset for Obj0 [2]</span></div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;  <span class="comment">// |(E - B)| is the StackSize (absolute value, positive).  For a</span></div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;  <span class="comment">// stack that grown down, this works out to be (B - E). [3]</span></div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;  <span class="comment">// E is also the value of %rsp after stack has been set up, and we</span></div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;  <span class="comment">// want (C - E) -- the value we can add to %rsp to get to Obj0.  Now</span></div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;  <span class="comment">// (C - E) == (C - A) - (B - A) + (B - E)</span></div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;  <span class="comment">//            { Using [1], [2] and [3] above }</span></div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;  <span class="comment">//         == getObjectOffset - LocalAreaOffset + StackSize</span></div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160; </div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1X86FrameLowering.html#a79ebbed1ceecae3f74214e33fc8c533f">getFrameIndexReferenceSP</a>(MF, FI, FrameReg, StackSize);</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;}</div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160; </div>
<div class="line"><a name="l02573"></a><span class="lineno"><a class="line" href="classllvm_1_1X86FrameLowering.html#a7c6fdca5f3b44d406ff07e43b2f140f6"> 2573</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1X86FrameLowering.html#a7c6fdca5f3b44d406ff07e43b2f140f6">X86FrameLowering::assignCalleeSavedSpillSlots</a>(</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;    <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>,</div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;    std::vector&lt;CalleeSavedInfo&gt; &amp;CSI)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;  <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> &amp;MFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>();</div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;  <a class="code" href="classllvm_1_1X86MachineFunctionInfo.html">X86MachineFunctionInfo</a> *X86FI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html">X86MachineFunctionInfo</a>&gt;();</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160; </div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;  <span class="keywordtype">unsigned</span> CalleeSavedFrameSize = 0;</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;  <span class="keywordtype">unsigned</span> XMMCalleeSavedFrameSize = 0;</div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;  <span class="keyword">auto</span> &amp;WinEHXMMSlotInfo = X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#ad1223d54741335e6b3595a7e0c528afa">getWinEHXMMSlotInfo</a>();</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;  <span class="keywordtype">int</span> SpillSlotOffset = <a class="code" href="classllvm_1_1TargetFrameLowering.html#a6521d4d5560c03b2e6490883558b882c">getOffsetOfLocalArea</a>() + X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#a7c7a3251bd6c1b0b89e5712c89aaa305">getTCReturnAddrDelta</a>();</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160; </div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;  int64_t TailCallReturnAddrDelta = X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#a7c7a3251bd6c1b0b89e5712c89aaa305">getTCReturnAddrDelta</a>();</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160; </div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;  <span class="keywordflow">if</span> (TailCallReturnAddrDelta &lt; 0) {</div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;    <span class="comment">// create RETURNADDR area</span></div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;    <span class="comment">//   arg</span></div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;    <span class="comment">//   arg</span></div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;    <span class="comment">//   RETADDR</span></div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;    <span class="comment">//   { ...</span></div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;    <span class="comment">//     RETADDR area</span></div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;    <span class="comment">//     ...</span></div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;    <span class="comment">//   }</span></div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;    <span class="comment">//   [EBP]</span></div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;    MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a03cf34252938b54f7e86c736f9fd7dc1">CreateFixedObject</a>(-TailCallReturnAddrDelta,</div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;                           TailCallReturnAddrDelta - <a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;  }</div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160; </div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;  <span class="comment">// Spill the BasePtr if it&#39;s used.</span></div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;  <span class="keywordflow">if</span> (this-&gt;TRI-&gt;hasBasePointer(MF)) {</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;    <span class="comment">// Allocate a spill slot for EBP if we have a base pointer and EH funclets.</span></div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;    <span class="keywordflow">if</span> (MF.<a class="code" href="classllvm_1_1MachineFunction.html#ad40522ac860df72189255e38782acc3f">hasEHFunclets</a>()) {</div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;      <span class="keywordtype">int</span> FI = MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a61960903871aa95a7161074c6f1eec8f">CreateSpillStackObject</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>, <a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>));</div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;      X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#aaa40c0068f7a88682bc61cd9c56fede4">setHasSEHFramePtrSave</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;      X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#af98de3669b3b297736be7a9a77b5caf1">setSEHFramePtrSaveIndex</a>(FI);</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;    }</div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;  }</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160; </div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#a27de32522776b0243eaa10ae9e0c27d4">hasFP</a>(MF)) {</div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;    <span class="comment">// emitPrologue always spills frame register the first thing.</span></div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;    SpillSlotOffset -= <a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>;</div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;    MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#ad2270087c6b8d7061c3a5e83fb61c0a6">CreateFixedSpillStackObject</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>, SpillSlotOffset);</div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160; </div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;    <span class="comment">// The async context lives directly before the frame pointer, and we</span></div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;    <span class="comment">// allocate a second slot to preserve stack alignment.</span></div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;    <span class="keywordflow">if</span> (X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#aa92686e5bcf4b22006a54652f92254df">hasSwiftAsyncContext</a>()) {</div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;      SpillSlotOffset -= <a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>;</div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;      MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#ad2270087c6b8d7061c3a5e83fb61c0a6">CreateFixedSpillStackObject</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>, SpillSlotOffset);</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;      SpillSlotOffset -= <a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>;</div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;    }</div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160; </div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;    <span class="comment">// Since emitPrologue and emitEpilogue will handle spilling and restoring of</span></div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;    <span class="comment">// the frame register, we can delete it from CSI list and not have to worry</span></div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;    <span class="comment">// about avoiding it later.</span></div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> FPReg = <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;<a class="code" href="classllvm_1_1X86RegisterInfo.html#a45e0af6fcebf5fd5a4584974e13c6810">getFrameRegister</a>(MF);</div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; CSI.size(); ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;regsOverlap(CSI[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>].getReg(),FPReg)) {</div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;        CSI.erase(CSI.begin() + <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;      }</div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;    }</div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;  }</div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160; </div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;  <span class="comment">// Assign slots for GPRs. It increases frame size.</span></div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1CalleeSavedInfo.html">CalleeSavedInfo</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">llvm::reverse</a>(CSI)) {</div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getReg();</div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160; </div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;    <span class="keywordflow">if</span> (!X86::GR64RegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>) &amp;&amp; !X86::GR32RegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>))</div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160; </div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;    SpillSlotOffset -= <a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>;</div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;    CalleeSavedFrameSize += <a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>;</div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160; </div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> = MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#ad2270087c6b8d7061c3a5e83fb61c0a6">CreateFixedSpillStackObject</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>, SpillSlotOffset);</div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;    <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.setFrameIdx(<a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a>);</div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;  }</div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160; </div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;  X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#af3682a96148f7c1e534dfa7c2726ccec">setCalleeSavedFrameSize</a>(CalleeSavedFrameSize);</div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;  MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a5ed62fb6fd245cb4efd8ea1bb4d56856">setCVBytesOfCalleeSavedRegisters</a>(CalleeSavedFrameSize);</div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160; </div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;  <span class="comment">// Assign slots for XMMs.</span></div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1CalleeSavedInfo.html">CalleeSavedInfo</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">llvm::reverse</a>(CSI)) {</div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getReg();</div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;    <span class="keywordflow">if</span> (X86::GR64RegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>) || X86::GR32RegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>))</div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160; </div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;    <span class="comment">// If this is k-register make sure we lookup via the largest legal type.</span></div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;    <a class="code" href="classllvm_1_1MVT.html">MVT</a> VT = <a class="code" href="classllvm_1_1MVT.html#a330aea6151cae3adaf5e179dcfe87346a62a222acce6360abd2726719fabc2797">MVT::Other</a>;</div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;    <span class="keywordflow">if</span> (X86::VK16RegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>))</div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;      VT = <a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.hasBWI() ? <a class="code" href="classllvm_1_1MVT.html#a330aea6151cae3adaf5e179dcfe87346abf72e9af12d6032cd765f116d3d72d9a">MVT::v64i1</a> : <a class="code" href="classllvm_1_1MVT.html#a330aea6151cae3adaf5e179dcfe87346a0ebe435f5423945489fecd670405e1a4">MVT::v16i1</a>;</div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160; </div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *RC = <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;getMinimalPhysRegClass(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, VT);</div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;    <span class="keywordtype">unsigned</span> Size = <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;getSpillSize(*RC);</div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;    <a class="code" href="structllvm_1_1Align.html">Align</a> Alignment = <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;getSpillAlign(*RC);</div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;    <span class="comment">// ensure alignment</span></div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SpillSlotOffset &lt; 0 &amp;&amp; <span class="stringliteral">&quot;SpillSlotOffset should always &lt; 0 on X86&quot;</span>);</div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;    SpillSlotOffset = -<a class="code" href="namespacellvm.html#ab102f0f12dd38aeea5906b1d80c792ff">alignTo</a>(-SpillSlotOffset, Alignment);</div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160; </div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;    <span class="comment">// spill into slot</span></div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;    SpillSlotOffset -= Size;</div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> = MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#ad2270087c6b8d7061c3a5e83fb61c0a6">CreateFixedSpillStackObject</a>(Size, SpillSlotOffset);</div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;    <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.setFrameIdx(<a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a>);</div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;    MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a1f09e99062be1101e3a2cf3ff88878f7">ensureMaxAlignment</a>(Alignment);</div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160; </div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;    <span class="comment">// Save the start offset and size of XMM in stack frame for funclets.</span></div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;    <span class="keywordflow">if</span> (X86::VR128RegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>)) {</div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;      WinEHXMMSlotInfo[<a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a>] = XMMCalleeSavedFrameSize;</div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;      XMMCalleeSavedFrameSize += Size;</div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;    }</div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;  }</div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160; </div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;}</div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160; </div>
<div class="line"><a name="l02686"></a><span class="lineno"><a class="line" href="classllvm_1_1X86FrameLowering.html#afc942a637e5d48a94d4033498b7479dd"> 2686</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1X86FrameLowering.html#afc942a637e5d48a94d4033498b7479dd">X86FrameLowering::spillCalleeSavedRegisters</a>(</div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;CalleeSavedInfo&gt;</a> CSI, <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab622d694b5fcb0edb99159f1ebdcdb6b">findDebugLoc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160; </div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;  <span class="comment">// Don&#39;t save CSRs in 32-bit EH funclets. The caller saves EBX, EBP, ESI, EDI</span></div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;  <span class="comment">// for us, and there are no XMM CSRs on Win32.</span></div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7d2f8efd82042b4cf611ba10e9e79ed0">isEHFuncletEntry</a>() &amp;&amp; <a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.is32Bit() &amp;&amp; <a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a17f3cb9bc2c5c8be538b3be839bbf02b">isOSWindows</a>())</div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160; </div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;  <span class="comment">// Push GPRs. It increases frame size.</span></div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">getParent</a>();</div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;  <span class="keywordtype">unsigned</span> Opc = <a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.is64Bit() ? X86::PUSH64r : X86::PUSH32r;</div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1CalleeSavedInfo.html">CalleeSavedInfo</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">llvm::reverse</a>(CSI)) {</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getReg();</div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160; </div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;    <span class="keywordflow">if</span> (!X86::GR64RegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>) &amp;&amp; !X86::GR32RegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>))</div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160; </div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">getRegInfo</a>();</div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;    <span class="keywordtype">bool</span> isLiveIn = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a640f34062e7189756ce67e60d5dfd629">isLiveIn</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;    <span class="keywordflow">if</span> (!isLiveIn)</div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;      <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acce9c12cc977a88dc7bc51493ce7681c">addLiveIn</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160; </div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;    <span class="comment">// Decide whether we can add a kill flag to the use.</span></div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;    <span class="keywordtype">bool</span> CanKill = !isLiveIn;</div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;    <span class="comment">// Check if any subregister is live-in</span></div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;    <span class="keywordflow">if</span> (CanKill) {</div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MCRegAliasIterator.html">MCRegAliasIterator</a> AReg(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>, <span class="keyword">false</span>); AReg.<a class="code" href="classllvm_1_1MCRegAliasIterator.html#ac336c049c12ead7be5b86e6d046f8ab0">isValid</a>(); ++AReg) {</div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a640f34062e7189756ce67e60d5dfd629">isLiveIn</a>(*AReg)) {</div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;          CanKill = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;        }</div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;      }</div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;    }</div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160; </div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;    <span class="comment">// Do not set a kill flag on values that are also marked as live-in. This</span></div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;    <span class="comment">// happens with the @llvm-returnaddress intrinsic and with arguments</span></div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;    <span class="comment">// passed in callee saved registers.</span></div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;    <span class="comment">// Omitting the kill flags is conservatively correct even if the live-in</span></div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;    <span class="comment">// is not used after all.</span></div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(Opc)).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, <a class="code" href="namespacellvm.html#aac57d4100e9a9d02522fbd724568397d">getKillRegState</a>(CanKill))</div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;  }</div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160; </div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;  <span class="comment">// Make XMM regs spilled. X86 does not have ability of push/pop XMM.</span></div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;  <span class="comment">// It can be done by spilling XMMs to stack frame.</span></div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1CalleeSavedInfo.html">CalleeSavedInfo</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">llvm::reverse</a>(CSI)) {</div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getReg();</div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;    <span class="keywordflow">if</span> (X86::GR64RegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>) || X86::GR32RegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>))</div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160; </div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;    <span class="comment">// If this is k-register make sure we lookup via the largest legal type.</span></div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;    <a class="code" href="classllvm_1_1MVT.html">MVT</a> VT = <a class="code" href="classllvm_1_1MVT.html#a330aea6151cae3adaf5e179dcfe87346a62a222acce6360abd2726719fabc2797">MVT::Other</a>;</div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;    <span class="keywordflow">if</span> (X86::VK16RegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>))</div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;      VT = <a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.hasBWI() ? <a class="code" href="classllvm_1_1MVT.html#a330aea6151cae3adaf5e179dcfe87346abf72e9af12d6032cd765f116d3d72d9a">MVT::v64i1</a> : <a class="code" href="classllvm_1_1MVT.html#a330aea6151cae3adaf5e179dcfe87346a0ebe435f5423945489fecd670405e1a4">MVT::v16i1</a>;</div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160; </div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;    <span class="comment">// Add the callee-saved register as live-in. It&#39;s killed at the spill.</span></div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;    <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acce9c12cc977a88dc7bc51493ce7681c">addLiveIn</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *RC = <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;getMinimalPhysRegClass(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, VT);</div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160; </div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;    <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.<a class="code" href="classllvm_1_1X86InstrInfo.html#af311c898afbc746344165cebfadeaf48">storeRegToStackSlot</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, <span class="keyword">true</span>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getFrameIdx(), RC, <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>,</div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;                            <a class="code" href="classllvm_1_1Register.html">Register</a>());</div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;    --<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>;</div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;setFlag(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;    ++<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>;</div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;  }</div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160; </div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;}</div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160; </div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;<span class="keywordtype">void</span> X86FrameLowering::emitCatchRetReturnValue(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>,</div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;                                               <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>,</div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;                                               <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *CatchRet)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;  <span class="comment">// SEH shouldn&#39;t use catchret.</span></div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="namespacellvm.html#ab9c9fb92464f96c0e0f326d624e82eab">isAsynchronousEHPersonality</a>(<a class="code" href="namespacellvm.html#a8d508f23e2580095561902c39911fb9b">classifyEHPersonality</a>(</div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;             <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">getParent</a>()-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#a6f77e4e800ba4dffd63e8ddb330062aa">getPersonalityFn</a>())) &amp;&amp;</div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;         <span class="stringliteral">&quot;SEH should not use CATCHRET&quot;</span>);</div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = CatchRet-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ae8ff2acea4fe63e48e8fc6cf0620ff78">getDebugLoc</a>();</div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *CatchRetTarget = CatchRet-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">getOperand</a>(0).<a class="code" href="classllvm_1_1MachineOperand.html#a9b48cb80ee1534c2b51d789b673137c1">getMBB</a>();</div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160; </div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;  <span class="comment">// Fill EAX/RAX with the address of the target block.</span></div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.is64Bit()) {</div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;    <span class="comment">// LEA64r CatchRetTarget(%rip), %rax</span></div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::LEA64r), X86::RAX)</div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(X86::RIP)</div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(0)</div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(0)</div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#af8571e8dfb010fd8ae76cc4f87aafaac">addMBB</a>(CatchRetTarget)</div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(0);</div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;    <span class="comment">// MOV32ri $CatchRetTarget, %eax</span></div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::MOV32ri), <a class="code" href="namespacellvm_1_1N86.html#a004aaa5711c58178d0371ab88bf1bd63a488c3a2a57ed8f23f0c48d8b40348af0">X86::EAX</a>)</div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#af8571e8dfb010fd8ae76cc4f87aafaac">addMBB</a>(CatchRetTarget);</div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;  }</div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160; </div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;  <span class="comment">// Record that we&#39;ve taken the address of CatchRetTarget and no longer just</span></div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;  <span class="comment">// reference it in a terminator.</span></div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;  CatchRetTarget-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#af4236a9c3c028303d301f49c7ee9a868">setMachineBlockAddressTaken</a>();</div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;}</div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160; </div>
<div class="line"><a name="l02787"></a><span class="lineno"><a class="line" href="classllvm_1_1X86FrameLowering.html#a94ed22ca5dc3213bfb96e1ddbc41952e"> 2787</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1X86FrameLowering.html#a94ed22ca5dc3213bfb96e1ddbc41952e">X86FrameLowering::restoreCalleeSavedRegisters</a>(</div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;    <a class="code" href="classllvm_1_1MutableArrayRef.html">MutableArrayRef&lt;CalleeSavedInfo&gt;</a> CSI, <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;  <span class="keywordflow">if</span> (CSI.empty())</div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160; </div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> != <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>() &amp;&amp; <a class="code" href="X86FrameLowering_8cpp.html#a97265f2cad366f364b2bc884e589277e">isFuncletReturnInstr</a>(*<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) &amp;&amp; <a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a17f3cb9bc2c5c8be538b3be839bbf02b">isOSWindows</a>()) {</div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;    <span class="comment">// Don&#39;t restore CSRs in 32-bit EH funclets. Matches</span></div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;    <span class="comment">// spillCalleeSavedRegisters.</span></div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.is32Bit())</div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;    <span class="comment">// Don&#39;t restore CSRs before an SEH catchret. SEH except blocks do not form</span></div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;    <span class="comment">// funclets. emitEpilogue transforms these to normal jumps.</span></div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOpcode() == <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110aec1078d911aabd272954b9125eaee6df">X86::CATCHRET</a>) {</div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">getParent</a>()-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>();</div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;      <span class="keywordtype">bool</span> IsSEH = <a class="code" href="namespacellvm.html#ab9c9fb92464f96c0e0f326d624e82eab">isAsynchronousEHPersonality</a>(</div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;          <a class="code" href="namespacellvm.html#a8d508f23e2580095561902c39911fb9b">classifyEHPersonality</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getPersonalityFn()));</div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;      <span class="keywordflow">if</span> (IsSEH)</div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;    }</div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;  }</div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160; </div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab622d694b5fcb0edb99159f1ebdcdb6b">findDebugLoc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160; </div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;  <span class="comment">// Reload XMMs from stack frame.</span></div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1CalleeSavedInfo.html">CalleeSavedInfo</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : CSI) {</div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getReg();</div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;    <span class="keywordflow">if</span> (X86::GR64RegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>) ||</div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;        X86::GR32RegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>))</div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160; </div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;    <span class="comment">// If this is k-register make sure we lookup via the largest legal type.</span></div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;    <a class="code" href="classllvm_1_1MVT.html">MVT</a> VT = <a class="code" href="classllvm_1_1MVT.html#a330aea6151cae3adaf5e179dcfe87346a62a222acce6360abd2726719fabc2797">MVT::Other</a>;</div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;    <span class="keywordflow">if</span> (X86::VK16RegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>))</div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;      VT = <a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.hasBWI() ? <a class="code" href="classllvm_1_1MVT.html#a330aea6151cae3adaf5e179dcfe87346abf72e9af12d6032cd765f116d3d72d9a">MVT::v64i1</a> : <a class="code" href="classllvm_1_1MVT.html#a330aea6151cae3adaf5e179dcfe87346a0ebe435f5423945489fecd670405e1a4">MVT::v16i1</a>;</div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160; </div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *RC = <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;getMinimalPhysRegClass(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, VT);</div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;    <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.<a class="code" href="classllvm_1_1X86InstrInfo.html#a4729ef7bdd10f5a76441a9d3b5503528">loadRegFromStackSlot</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getFrameIdx(), RC, <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>,</div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;                             <a class="code" href="classllvm_1_1Register.html">Register</a>());</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;  }</div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160; </div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;  <span class="comment">// POP GPRs.</span></div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;  <span class="keywordtype">unsigned</span> Opc = <a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.is64Bit() ? X86::POP64r : X86::POP32r;</div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1CalleeSavedInfo.html">CalleeSavedInfo</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : CSI) {</div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getReg();</div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;    <span class="keywordflow">if</span> (!X86::GR64RegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>) &amp;&amp;</div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;        !X86::GR32RegClass.<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>))</div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160; </div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(Opc), <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>)</div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">MachineInstr::FrameDestroy</a>);</div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;  }</div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;}</div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160; </div>
<div class="line"><a name="l02842"></a><span class="lineno"><a class="line" href="classllvm_1_1X86FrameLowering.html#a6cbb50454d9bb068f4ab6b2d08fb7abf"> 2842</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1X86FrameLowering.html#a6cbb50454d9bb068f4ab6b2d08fb7abf">X86FrameLowering::determineCalleeSaves</a>(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF,</div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;                                            <a class="code" href="classllvm_1_1BitVector.html">BitVector</a> &amp;SavedRegs,</div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;                                            <a class="code" href="classllvm_1_1RegScavenger.html">RegScavenger</a> *RS)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;  <a class="code" href="classllvm_1_1TargetFrameLowering.html#a2f26766f4dcfa6457ba405584a34d5c3">TargetFrameLowering::determineCalleeSaves</a>(MF, SavedRegs, RS);</div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160; </div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;  <span class="comment">// Spill the BasePtr if it&#39;s used.</span></div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;<a class="code" href="classllvm_1_1X86RegisterInfo.html#a0d077eae4ce42bad55b66dbf9166113d">hasBasePointer</a>(MF)){</div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> BasePtr = <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;<a class="code" href="classllvm_1_1X86RegisterInfo.html#ad057cb3300544ebb741b871a45faae7d">getBaseRegister</a>();</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a60d014846b23498268005ffec9608bc0">isTarget64BitILP32</a>())</div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;      BasePtr = <a class="code" href="namespacellvm.html#a27b344a283e0620f484144889fe32064">getX86SubSuperRegister</a>(BasePtr, 64);</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;    SavedRegs.<a class="code" href="classllvm_1_1BitVector.html#a1964207fae81f04966b2a9dcfc21cf7b">set</a>(BasePtr);</div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;  }</div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;}</div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160; </div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span></div>
<div class="line"><a name="l02857"></a><span class="lineno"><a class="line" href="X86FrameLowering_8cpp.html#ab29c5668ec7d2b12468b97aa33e5f87b"> 2857</a></span>&#160;<a class="code" href="X86FrameLowering_8cpp.html#ab29c5668ec7d2b12468b97aa33e5f87b">HasNestArgument</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> *MF) {</div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>();</div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Argument.html">Function::const_arg_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.arg_begin(), <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.arg_end();</div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++) {</div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;hasNestAttr() &amp;&amp; !<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;use_empty())</div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;  }</div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;}</div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;<span class="comment">/// GetScratchRegister - Get a temp register for performing work in the</span></div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;<span class="comment">/// segmented stack and the Erlang/HiPE stack prologue. Depending on platform</span></div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;<span class="comment">/// and the properties of the function either one or two registers will be</span></div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;<span class="comment">/// needed. Set primary to true for the first register, false for the second.</span></div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span></div>
<div class="line"><a name="l02872"></a><span class="lineno"><a class="line" href="X86FrameLowering_8cpp.html#a1021e45de682ea397f9aa6c529ac80be"> 2872</a></span>&#160;<a class="code" href="X86FrameLowering_8cpp.html#a1021e45de682ea397f9aa6c529ac80be">GetScratchRegister</a>(<span class="keywordtype">bool</span> Is64Bit, <span class="keywordtype">bool</span> IsLP64, <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, <span class="keywordtype">bool</span> Primary) {</div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;  <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">CallingConv::ID</a> <a class="code" href="namespacellvm_1_1dwarf.html#a31ace7f9af1edbbe842e91b9edb4a2a1">CallingConvention</a> = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#a5f494edc0a569c7fc9ff4181243be1ed">getCallingConv</a>();</div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160; </div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;  <span class="comment">// Erlang stuff.</span></div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1dwarf.html#a31ace7f9af1edbbe842e91b9edb4a2a1">CallingConvention</a> == <a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feeda20ddc463f96d806f369d56205ea205f5">CallingConv::HiPE</a>) {</div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;    <span class="keywordflow">if</span> (Is64Bit)</div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;      <span class="keywordflow">return</span> Primary ? X86::R14 : X86::R13;</div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;      <span class="keywordflow">return</span> Primary ? <a class="code" href="namespacellvm_1_1N86.html#a004aaa5711c58178d0371ab88bf1bd63a3037fe2787fbbc55d78cbf8ba4768dc8">X86::EBX</a> : <a class="code" href="namespacellvm_1_1N86.html#a004aaa5711c58178d0371ab88bf1bd63a90cd412049931c87618e68595357afb8">X86::EDI</a>;</div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;  }</div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160; </div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;  <span class="keywordflow">if</span> (Is64Bit) {</div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;    <span class="keywordflow">if</span> (IsLP64)</div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;      <span class="keywordflow">return</span> Primary ? X86::R11 : X86::R12;</div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;      <span class="keywordflow">return</span> Primary ? X86::R11D : X86::R12D;</div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;  }</div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160; </div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;  <span class="keywordtype">bool</span> IsNested = <a class="code" href="X86FrameLowering_8cpp.html#ab29c5668ec7d2b12468b97aa33e5f87b">HasNestArgument</a>(&amp;MF);</div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160; </div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1dwarf.html#a31ace7f9af1edbbe842e91b9edb4a2a1">CallingConvention</a> == <a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feedafde87569738f9e23963e8735f71c33eb">CallingConv::X86_FastCall</a> ||</div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;      <a class="code" href="namespacellvm_1_1dwarf.html#a31ace7f9af1edbbe842e91b9edb4a2a1">CallingConvention</a> == <a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feedabc8e2ee40a84687a9e12fd08784b87ba">CallingConv::Fast</a> ||</div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;      <a class="code" href="namespacellvm_1_1dwarf.html#a31ace7f9af1edbbe842e91b9edb4a2a1">CallingConvention</a> == <a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feedad6e9c0ff694f0fca0222e79e772b647e">CallingConv::Tail</a>) {</div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;    <span class="keywordflow">if</span> (IsNested)</div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;      <a class="code" href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">report_fatal_error</a>(<span class="stringliteral">&quot;Segmented stacks does not support fastcall with &quot;</span></div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;                         <span class="stringliteral">&quot;nested function.&quot;</span>);</div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;    <span class="keywordflow">return</span> Primary ? <a class="code" href="namespacellvm_1_1N86.html#a004aaa5711c58178d0371ab88bf1bd63a488c3a2a57ed8f23f0c48d8b40348af0">X86::EAX</a> : <a class="code" href="namespacellvm_1_1N86.html#a004aaa5711c58178d0371ab88bf1bd63a667b758702693d9dfb46e55025fc559d">X86::ECX</a>;</div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;  }</div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;  <span class="keywordflow">if</span> (IsNested)</div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;    <span class="keywordflow">return</span> Primary ? <a class="code" href="namespacellvm_1_1N86.html#a004aaa5711c58178d0371ab88bf1bd63af870f9ec8a932e6d114847c22e7e9121">X86::EDX</a> : <a class="code" href="namespacellvm_1_1N86.html#a004aaa5711c58178d0371ab88bf1bd63a488c3a2a57ed8f23f0c48d8b40348af0">X86::EAX</a>;</div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;  <span class="keywordflow">return</span> Primary ? <a class="code" href="namespacellvm_1_1N86.html#a004aaa5711c58178d0371ab88bf1bd63a667b758702693d9dfb46e55025fc559d">X86::ECX</a> : <a class="code" href="namespacellvm_1_1N86.html#a004aaa5711c58178d0371ab88bf1bd63a488c3a2a57ed8f23f0c48d8b40348af0">X86::EAX</a>;</div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;}</div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160; </div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;<span class="comment">// The stack limit in the TCB is set to this many bytes above the actual stack</span></div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;<span class="comment">// limit.</span></div>
<div class="line"><a name="l02907"></a><span class="lineno"><a class="line" href="X86FrameLowering_8cpp.html#ad6f5455eb7ba6ed74cab551099d0a952"> 2907</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="X86FrameLowering_8cpp.html#ad6f5455eb7ba6ed74cab551099d0a952">kSplitStackAvailable</a> = 256;</div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160; </div>
<div class="line"><a name="l02909"></a><span class="lineno"><a class="line" href="classllvm_1_1X86FrameLowering.html#ac8faf9a625064bfefafb7ace646815ff"> 2909</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1X86FrameLowering.html#ac8faf9a625064bfefafb7ace646815ff">X86FrameLowering::adjustForSegmentedStacks</a>(</div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;    <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;PrologueMBB)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;  <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> &amp;MFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>();</div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> StackSize;</div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;  <span class="keywordtype">unsigned</span> TlsReg, TlsOffset;</div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>;</div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160; </div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;  <span class="comment">// To support shrink-wrapping we would need to insert the new blocks</span></div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;  <span class="comment">// at the right place and update the branches to PrologueMBB.</span></div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(&amp;(*MF.<a class="code" href="classllvm_1_1MachineFunction.html#ab0789854909cf47f640a85fa2bac29c7">begin</a>()) == &amp;PrologueMBB &amp;&amp; <span class="stringliteral">&quot;Shrink-wrapping not supported yet&quot;</span>);</div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160; </div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;  <span class="keywordtype">unsigned</span> ScratchReg = <a class="code" href="X86FrameLowering_8cpp.html#a1021e45de682ea397f9aa6c529ac80be">GetScratchRegister</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a7761d9f26e6c0722ee9c9d8c5e052c1c">IsLP64</a>, MF, <span class="keyword">true</span>);</div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!MF.<a class="code" href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">getRegInfo</a>().<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a640f34062e7189756ce67e60d5dfd629">isLiveIn</a>(ScratchReg) &amp;&amp;</div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;         <span class="stringliteral">&quot;Scratch register is live-in&quot;</span>);</div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160; </div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;  <span class="keywordflow">if</span> (MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#af457a58a84b500d44feb7b699aa43ec1">isVarArg</a>())</div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;    <a class="code" href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">report_fatal_error</a>(<span class="stringliteral">&quot;Segmented stacks do not support vararg functions.&quot;</span>);</div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#affa7c48be5800f58054ccdf5a97f334e">isTargetLinux</a>() &amp;&amp; !<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a63c6ceb2fb6b48a7db60701a599a2959">isTargetDarwin</a>() &amp;&amp; !<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#af92c188739e9be47b78eca0e1e622f9d">isTargetWin32</a>() &amp;&amp;</div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;      !<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a649bfd3c9cf9a6b1d1bab86556e866dd">isTargetWin64</a>() &amp;&amp; !<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#aac9fed7d18a14e98755c75f532658b62">isTargetFreeBSD</a>() &amp;&amp;</div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;      !<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a50bd6d1ad19506c5212c853867430e57">isTargetDragonFly</a>())</div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;    <a class="code" href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">report_fatal_error</a>(<span class="stringliteral">&quot;Segmented stacks not supported on this platform.&quot;</span>);</div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160; </div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;  <span class="comment">// Eventually StackSize will be calculated by a link-time pass; which will</span></div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;  <span class="comment">// also decide whether checking code needs to be injected into this particular</span></div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;  <span class="comment">// prologue.</span></div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;  StackSize = MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a14c39a24bf6ebbe339ae8a453c7fdd11">getStackSize</a>();</div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160; </div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;  <span class="keywordflow">if</span> (!MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a00d2c6aab11836fcd2116ef07924253e">needsSplitStackProlog</a>())</div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160; </div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *allocMBB = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a1d483b4ac24a96c2250becb232ed4cb4">CreateMachineBasicBlock</a>();</div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *checkMBB = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a1d483b4ac24a96c2250becb232ed4cb4">CreateMachineBasicBlock</a>();</div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;  <a class="code" href="classllvm_1_1X86MachineFunctionInfo.html">X86MachineFunctionInfo</a> *X86FI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html">X86MachineFunctionInfo</a>&gt;();</div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;  <span class="keywordtype">bool</span> IsNested = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160; </div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;  <span class="comment">// We need to know if the function has a nest argument only in 64 bit mode.</span></div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a>)</div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;    IsNested = <a class="code" href="X86FrameLowering_8cpp.html#ab29c5668ec7d2b12468b97aa33e5f87b">HasNestArgument</a>(&amp;MF);</div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160; </div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;  <span class="comment">// The MOV R10, RAX needs to be in a different block, since the RET we emit in</span></div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;  <span class="comment">// allocMBB needs to be last (terminating) instruction.</span></div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160; </div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;LI : PrologueMBB.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a98d240595236bf85bf1a5c5ba594bdba">liveins</a>()) {</div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;    allocMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acce9c12cc977a88dc7bc51493ce7681c">addLiveIn</a>(LI);</div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;    checkMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acce9c12cc977a88dc7bc51493ce7681c">addLiveIn</a>(LI);</div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;  }</div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160; </div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;  <span class="keywordflow">if</span> (IsNested)</div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;    allocMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acce9c12cc977a88dc7bc51493ce7681c">addLiveIn</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#a7761d9f26e6c0722ee9c9d8c5e052c1c">IsLP64</a> ? X86::R10 : X86::R10D);</div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160; </div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;  MF.<a class="code" href="classllvm_1_1MachineFunction.html#a6a437bb3c4a44ac328344e5f361c7816">push_front</a>(allocMBB);</div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;  MF.<a class="code" href="classllvm_1_1MachineFunction.html#a6a437bb3c4a44ac328344e5f361c7816">push_front</a>(checkMBB);</div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160; </div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;  <span class="comment">// When the frame size is less than 256 we just compare the stack</span></div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;  <span class="comment">// boundary directly to the value of the stack pointer, per gcc.</span></div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;  <span class="keywordtype">bool</span> CompareStackPointer = StackSize &lt; <a class="code" href="X86FrameLowering_8cpp.html#ad6f5455eb7ba6ed74cab551099d0a952">kSplitStackAvailable</a>;</div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160; </div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;  <span class="comment">// Read the limit off the current stacklet off the stack_guard location.</span></div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a>) {</div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#affa7c48be5800f58054ccdf5a97f334e">isTargetLinux</a>()) {</div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;      TlsReg = <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">X86::FS</a>;</div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;      TlsOffset = <a class="code" href="classllvm_1_1X86FrameLowering.html#a7761d9f26e6c0722ee9c9d8c5e052c1c">IsLP64</a> ? 0x70 : 0x40;</div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a63c6ceb2fb6b48a7db60701a599a2959">isTargetDarwin</a>()) {</div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;      TlsReg = <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730">X86::GS</a>;</div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;      TlsOffset = 0x60 + 90*8; <span class="comment">// See pthread_machdep.h. Steal TLS slot 90.</span></div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a649bfd3c9cf9a6b1d1bab86556e866dd">isTargetWin64</a>()) {</div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;      TlsReg = <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730">X86::GS</a>;</div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;      TlsOffset = 0x28; <span class="comment">// pvArbitrary, reserved for application use</span></div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#aac9fed7d18a14e98755c75f532658b62">isTargetFreeBSD</a>()) {</div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;      TlsReg = <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">X86::FS</a>;</div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;      TlsOffset = 0x18;</div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a50bd6d1ad19506c5212c853867430e57">isTargetDragonFly</a>()) {</div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;      TlsReg = <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">X86::FS</a>;</div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;      TlsOffset = 0x20; <span class="comment">// use tls_tcb.tcb_segstack</span></div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;      <a class="code" href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">report_fatal_error</a>(<span class="stringliteral">&quot;Segmented stacks not supported on this platform.&quot;</span>);</div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;    }</div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160; </div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;    <span class="keywordflow">if</span> (CompareStackPointer)</div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;      ScratchReg = <a class="code" href="classllvm_1_1X86FrameLowering.html#a7761d9f26e6c0722ee9c9d8c5e052c1c">IsLP64</a> ? X86::RSP : <a class="code" href="namespacellvm_1_1N86.html#a004aaa5711c58178d0371ab88bf1bd63a303dfe7256beaf60eaaa93d1c418965b">X86::ESP</a>;</div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(checkMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(<a class="code" href="classllvm_1_1X86FrameLowering.html#a7761d9f26e6c0722ee9c9d8c5e052c1c">IsLP64</a> ? X86::LEA64r : X86::LEA64_32r), ScratchReg).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(X86::RSP)</div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(1).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(0).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(-StackSize).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(0);</div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160; </div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(checkMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(<a class="code" href="classllvm_1_1X86FrameLowering.html#a7761d9f26e6c0722ee9c9d8c5e052c1c">IsLP64</a> ? X86::CMP64rm : X86::CMP32rm)).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(ScratchReg)</div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(0).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(1).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(0).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(TlsOffset).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(TlsReg);</div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#affa7c48be5800f58054ccdf5a97f334e">isTargetLinux</a>()) {</div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;      TlsReg = <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730">X86::GS</a>;</div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;      TlsOffset = 0x30;</div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a63c6ceb2fb6b48a7db60701a599a2959">isTargetDarwin</a>()) {</div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;      TlsReg = <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730">X86::GS</a>;</div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;      TlsOffset = 0x48 + 90*4;</div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#af92c188739e9be47b78eca0e1e622f9d">isTargetWin32</a>()) {</div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;      TlsReg = <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">X86::FS</a>;</div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;      TlsOffset = 0x14; <span class="comment">// pvArbitrary, reserved for application use</span></div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a50bd6d1ad19506c5212c853867430e57">isTargetDragonFly</a>()) {</div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;      TlsReg = <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">X86::FS</a>;</div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;      TlsOffset = 0x10; <span class="comment">// use tls_tcb.tcb_segstack</span></div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#aac9fed7d18a14e98755c75f532658b62">isTargetFreeBSD</a>()) {</div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;      <a class="code" href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">report_fatal_error</a>(<span class="stringliteral">&quot;Segmented stacks not supported on FreeBSD i386.&quot;</span>);</div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;      <a class="code" href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">report_fatal_error</a>(<span class="stringliteral">&quot;Segmented stacks not supported on this platform.&quot;</span>);</div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;    }</div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160; </div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;    <span class="keywordflow">if</span> (CompareStackPointer)</div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;      ScratchReg = <a class="code" href="namespacellvm_1_1N86.html#a004aaa5711c58178d0371ab88bf1bd63a303dfe7256beaf60eaaa93d1c418965b">X86::ESP</a>;</div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(checkMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::LEA32r), ScratchReg).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(<a class="code" href="namespacellvm_1_1N86.html#a004aaa5711c58178d0371ab88bf1bd63a303dfe7256beaf60eaaa93d1c418965b">X86::ESP</a>)</div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(1).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(0).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(-StackSize).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(0);</div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160; </div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#affa7c48be5800f58054ccdf5a97f334e">isTargetLinux</a>() || <a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#af92c188739e9be47b78eca0e1e622f9d">isTargetWin32</a>() || <a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a649bfd3c9cf9a6b1d1bab86556e866dd">isTargetWin64</a>() ||</div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;        <a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a50bd6d1ad19506c5212c853867430e57">isTargetDragonFly</a>()) {</div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(checkMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::CMP32rm)).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(ScratchReg)</div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(0).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(0).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(0).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(TlsOffset).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(TlsReg);</div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a63c6ceb2fb6b48a7db60701a599a2959">isTargetDarwin</a>()) {</div>
<div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160; </div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;      <span class="comment">// TlsOffset doesn&#39;t fit into a mod r/m byte so we need an extra register.</span></div>
<div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;      <span class="keywordtype">unsigned</span> ScratchReg2;</div>
<div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;      <span class="keywordtype">bool</span> SaveScratch2;</div>
<div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;      <span class="keywordflow">if</span> (CompareStackPointer) {</div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;        <span class="comment">// The primary scratch register is available for holding the TLS offset.</span></div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;        ScratchReg2 = <a class="code" href="X86FrameLowering_8cpp.html#a1021e45de682ea397f9aa6c529ac80be">GetScratchRegister</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a7761d9f26e6c0722ee9c9d8c5e052c1c">IsLP64</a>, MF, <span class="keyword">true</span>);</div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;        SaveScratch2 = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;        <span class="comment">// Need to use a second register to hold the TLS offset</span></div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;        ScratchReg2 = <a class="code" href="X86FrameLowering_8cpp.html#a1021e45de682ea397f9aa6c529ac80be">GetScratchRegister</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a7761d9f26e6c0722ee9c9d8c5e052c1c">IsLP64</a>, MF, <span class="keyword">false</span>);</div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160; </div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;        <span class="comment">// Unfortunately, with fastcc the second scratch register may hold an</span></div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;        <span class="comment">// argument.</span></div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;        SaveScratch2 = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">getRegInfo</a>().<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a640f34062e7189756ce67e60d5dfd629">isLiveIn</a>(ScratchReg2);</div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;      }</div>
<div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160; </div>
<div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;      <span class="comment">// If Scratch2 is live-in then it needs to be saved.</span></div>
<div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!MF.<a class="code" href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">getRegInfo</a>().<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a640f34062e7189756ce67e60d5dfd629">isLiveIn</a>(ScratchReg2) || SaveScratch2) &amp;&amp;</div>
<div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;             <span class="stringliteral">&quot;Scratch register is live-in and not saved&quot;</span>);</div>
<div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160; </div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;      <span class="keywordflow">if</span> (SaveScratch2)</div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;        <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(checkMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::PUSH32r))</div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(ScratchReg2, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da9ddde91ef09476d28a088fe57f8e2921">RegState::Kill</a>);</div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160; </div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(checkMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::MOV32ri), ScratchReg2)</div>
<div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(TlsOffset);</div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(checkMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::CMP32rm))</div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(ScratchReg)</div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(ScratchReg2).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(1).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(0)</div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(0)</div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(TlsReg);</div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160; </div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;      <span class="keywordflow">if</span> (SaveScratch2)</div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;        <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(checkMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::POP32r), ScratchReg2);</div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;    }</div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;  }</div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160; </div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;  <span class="comment">// This jump is taken if SP &gt;= (Stacklet Limit + Stack Space required).</span></div>
<div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;  <span class="comment">// It jumps to normal execution of the function body.</span></div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;  <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(checkMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::JCC_1)).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#af8571e8dfb010fd8ae76cc4f87aafaac">addMBB</a>(&amp;PrologueMBB).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm_1_1X86.html#a1a356a51a1fb4cc3c427599082cf1d2eade92e2f17ca0acdd1ffa23d01df381df">X86::COND_A</a>);</div>
<div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160; </div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;  <span class="comment">// On 32 bit we first push the arguments size and then the frame size. On 64</span></div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;  <span class="comment">// bit, we pass the stack frame size in r10 and the argument size in r11.</span></div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a>) {</div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;    <span class="comment">// Functions with nested arguments use R10, so it needs to be saved across</span></div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;    <span class="comment">// the call to _morestack</span></div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160; </div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> RegAX = <a class="code" href="classllvm_1_1X86FrameLowering.html#a7761d9f26e6c0722ee9c9d8c5e052c1c">IsLP64</a> ? X86::RAX : <a class="code" href="namespacellvm_1_1N86.html#a004aaa5711c58178d0371ab88bf1bd63a488c3a2a57ed8f23f0c48d8b40348af0">X86::EAX</a>;</div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> Reg10 = <a class="code" href="classllvm_1_1X86FrameLowering.html#a7761d9f26e6c0722ee9c9d8c5e052c1c">IsLP64</a> ? X86::R10 : X86::R10D;</div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> Reg11 = <a class="code" href="classllvm_1_1X86FrameLowering.html#a7761d9f26e6c0722ee9c9d8c5e052c1c">IsLP64</a> ? X86::R11 : X86::R11D;</div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> MOVrr = <a class="code" href="classllvm_1_1X86FrameLowering.html#a7761d9f26e6c0722ee9c9d8c5e052c1c">IsLP64</a> ? X86::MOV64rr : X86::MOV32rr;</div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160; </div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;    <span class="keywordflow">if</span> (IsNested)</div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(allocMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(MOVrr), RegAX).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(Reg10);</div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160; </div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(allocMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(<a class="code" href="X86FrameLowering_8cpp.html#a39d0dcc2605f63349a774a79927b2209">getMOVriOpcode</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#a7761d9f26e6c0722ee9c9d8c5e052c1c">IsLP64</a>, StackSize)), Reg10)</div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(StackSize);</div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(allocMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;            <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(<a class="code" href="X86FrameLowering_8cpp.html#a39d0dcc2605f63349a774a79927b2209">getMOVriOpcode</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#a7761d9f26e6c0722ee9c9d8c5e052c1c">IsLP64</a>, X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#a2e51353f9cba613d53a5c85b94f224b1">getArgumentStackSize</a>())),</div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;            Reg11)</div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#a2e51353f9cba613d53a5c85b94f224b1">getArgumentStackSize</a>());</div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(allocMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::PUSHi32))</div>
<div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#a2e51353f9cba613d53a5c85b94f224b1">getArgumentStackSize</a>());</div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(allocMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::PUSHi32))</div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(StackSize);</div>
<div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;  }</div>
<div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160; </div>
<div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;  <span class="comment">// __morestack is in libgcc</span></div>
<div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a> &amp;&amp; MF.<a class="code" href="classllvm_1_1MachineFunction.html#ae68d159179d37dc7969439d842e2644f">getTarget</a>().<a class="code" href="classllvm_1_1TargetMachine.html#ae106f6c6362377b3016f0d174227e193">getCodeModel</a>() == <a class="code" href="namespacellvm_1_1CodeModel.html#afc59396a9e5809fc92938e203d91a8dfa5208f558fccf9f63423fb5385bb3e75c">CodeModel::Large</a>) {</div>
<div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;    <span class="comment">// Under the large code model, we cannot assume that __morestack lives</span></div>
<div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;    <span class="comment">// within 2^31 bytes of the call site, so we cannot use pc-relative</span></div>
<div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;    <span class="comment">// addressing. We cannot perform the call via a temporary register,</span></div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;    <span class="comment">// as the rax register may be used to store the static chain, and all</span></div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;    <span class="comment">// other suitable registers may be either callee-save or used for</span></div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;    <span class="comment">// parameter passing. We cannot use the stack at this point either</span></div>
<div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;    <span class="comment">// because __morestack manipulates the stack directly.</span></div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;    <span class="comment">// To avoid these issues, perform an indirect call via a read-only memory</span></div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;    <span class="comment">// location containing the address.</span></div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;    <span class="comment">// This solution is not perfect, as it assumes that the .rodata section</span></div>
<div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;    <span class="comment">// is laid out within 2^31 bytes of each function body, but this seems</span></div>
<div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;    <span class="comment">// to be sufficient for JIT.</span></div>
<div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;    <span class="comment">// FIXME: Add retpoline support and remove the error here..</span></div>
<div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#af9fd7bd9b13be1d777c9ac2ac90784c1">useIndirectThunkCalls</a>())</div>
<div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;      <a class="code" href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">report_fatal_error</a>(<span class="stringliteral">&quot;Emitting morestack calls on 64-bit with the large &quot;</span></div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;                         <span class="stringliteral">&quot;code model and thunks not yet implemented.&quot;</span>);</div>
<div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(allocMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::CALL64m))</div>
<div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(X86::RIP)</div>
<div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(0)</div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(0)</div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ac6672df14319c2e931c3b2c583ea837c">addExternalSymbol</a>(<span class="stringliteral">&quot;__morestack_addr&quot;</span>)</div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(0);</div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a>)</div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(allocMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::CALL64pcrel32))</div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ac6672df14319c2e931c3b2c583ea837c">addExternalSymbol</a>(<span class="stringliteral">&quot;__morestack&quot;</span>);</div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;      <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(allocMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::CALLpcrel32))</div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ac6672df14319c2e931c3b2c583ea837c">addExternalSymbol</a>(<span class="stringliteral">&quot;__morestack&quot;</span>);</div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;  }</div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160; </div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;  <span class="keywordflow">if</span> (IsNested)</div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(allocMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::MORESTACK_RET_RESTORE_R10));</div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(allocMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::MORESTACK_RET));</div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160; </div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;  allocMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a935e2a8884592189d8f261634a0b24c5">addSuccessor</a>(&amp;PrologueMBB);</div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160; </div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;  checkMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a935e2a8884592189d8f261634a0b24c5">addSuccessor</a>(allocMBB, <a class="code" href="classllvm_1_1BranchProbability.html#afd00958cba7080048a84cccfcef55d71">BranchProbability::getZero</a>());</div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;  checkMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a935e2a8884592189d8f261634a0b24c5">addSuccessor</a>(&amp;PrologueMBB, <a class="code" href="classllvm_1_1BranchProbability.html#a56e1b2d1999aadf4c513caee1ce5275b">BranchProbability::getOne</a>());</div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160; </div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;<span class="preprocessor">#ifdef EXPENSIVE_CHECKS</span></div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;  MF.<a class="code" href="classllvm_1_1MachineFunction.html#acbbbca8e55fe4daa61ede8c0f7b4dd5c">verify</a>();</div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;}</div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;<span class="comment">/// Lookup an ERTS parameter in the !hipe.literals named metadata node.</span></div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;<span class="comment">/// HiPE provides Erlang Runtime System-internal parameters, such as PCB offsets</span></div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;<span class="comment">/// to fields it needs, through a named metadata node &quot;hipe.literals&quot; containing</span></div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;<span class="comment">/// name-value pairs.</span></div>
<div class="line"><a name="l03148"></a><span class="lineno"><a class="line" href="X86FrameLowering_8cpp.html#ae2c3c56fbe514f4a3ee837a4af0499a8"> 3148</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="X86FrameLowering_8cpp.html#ae2c3c56fbe514f4a3ee837a4af0499a8">getHiPELiteral</a>(</div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;    <a class="code" href="classllvm_1_1NamedMDNode.html">NamedMDNode</a> *HiPELiteralsMD, <span class="keyword">const</span> <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> LiteralName) {</div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = HiPELiteralsMD-&gt;<a class="code" href="classllvm_1_1NamedMDNode.html#acde8007e0e69969423e2de52343b702f">getNumOperands</a>(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;    <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *Node = HiPELiteralsMD-&gt;<a class="code" href="classllvm_1_1NamedMDNode.html#aa24b566603d206b0e74bf63daf521078">getOperand</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;    <span class="keywordflow">if</span> (Node-&gt;getNumOperands() != 2) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;    <a class="code" href="classllvm_1_1MDString.html">MDString</a> *NodeName = dyn_cast&lt;MDString&gt;(Node-&gt;getOperand(0));</div>
<div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;    <a class="code" href="classllvm_1_1ValueAsMetadata.html">ValueAsMetadata</a> *NodeVal = dyn_cast&lt;ValueAsMetadata&gt;(Node-&gt;getOperand(1));</div>
<div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;    <span class="keywordflow">if</span> (!NodeName || !NodeVal) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;    <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *ValConst = dyn_cast_or_null&lt;ConstantInt&gt;(NodeVal-&gt;<a class="code" href="classllvm_1_1ValueAsMetadata.html#abb1fed177add0142f52d7369619a2871">getValue</a>());</div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;    <span class="keywordflow">if</span> (ValConst &amp;&amp; NodeName-&gt;<a class="code" href="classllvm_1_1MDString.html#ae44259d9edd71181ea8b89d18f27a967">getString</a>() == LiteralName) {</div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;      <span class="keywordflow">return</span> ValConst-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#ac09a21c371a9c535cbc13e8f82503aec">getZExtValue</a>();</div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;    }</div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;  }</div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160; </div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;  <a class="code" href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">report_fatal_error</a>(<span class="stringliteral">&quot;HiPE literal &quot;</span> + LiteralName</div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;                     + <span class="stringliteral">&quot; required but not provided&quot;</span>);</div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;}</div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160; </div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;<span class="comment">// Return true if there are no non-ehpad successors to MBB and there are no</span></div>
<div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;<span class="comment">// non-meta instructions between MBBI and MBB.end().</span></div>
<div class="line"><a name="l03168"></a><span class="lineno"><a class="line" href="X86FrameLowering_8cpp.html#ae31fe0327c2bb8a7d5cfbc532825e5a3"> 3168</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="X86FrameLowering_8cpp.html#ae31fe0327c2bb8a7d5cfbc532825e5a3">blockEndIsUnreachable</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>,</div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;                                  <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::const_iterator</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>) {</div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">llvm::all_of</a>(</div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;             <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4d2c96836214c1f13357ffb99125fb4a">successors</a>(),</div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;             [](<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Succ) { return Succ-&gt;isEHPad(); }) &amp;&amp;</div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;         <a class="code" href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">std::all_of</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>(), [](<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;           return MI.isMetaInstruction();</div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;         });</div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;}</div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;<span class="comment">/// Erlang programs may need a special prologue to handle the stack size they</span></div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;<span class="comment">/// might need at runtime. That is because Erlang/OTP does not implement a C</span></div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;<span class="comment">/// stack but uses a custom implementation of hybrid stack/heap architecture.</span></div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;<span class="comment">/// (for more information see Eric Stenman&#39;s Ph.D. thesis:</span></div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;<span class="comment">/// http://publications.uu.se/uu/fulltext/nbn_se_uu_diva-2688.pdf)</span></div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;<span class="comment">/// CheckStack:</span></div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;<span class="comment">///       temp0 = sp - MaxStack</span></div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;<span class="comment">///       if( temp0 &lt; SP_LIMIT(P) ) goto IncStack else goto OldStart</span></div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;<span class="comment">/// OldStart:</span></div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;<span class="comment">///       ...</span></div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;<span class="comment">/// IncStack:</span></div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;<span class="comment">///       call inc_stack   # doubles the stack space</span></div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;<span class="comment">///       temp0 = sp - MaxStack</span></div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;<span class="comment">///       if( temp0 &lt; SP_LIMIT(P) ) goto IncStack else goto OldStart</span></div>
<div class="line"><a name="l03193"></a><span class="lineno"><a class="line" href="classllvm_1_1X86FrameLowering.html#afd992a2165073c9cea53128d5b6c4145"> 3193</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1X86FrameLowering.html#afd992a2165073c9cea53128d5b6c4145">X86FrameLowering::adjustForHiPEPrologue</a>(</div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;    <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;PrologueMBB)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;  <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> &amp;MFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>();</div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>;</div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160; </div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;  <span class="comment">// To support shrink-wrapping we would need to insert the new blocks</span></div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;  <span class="comment">// at the right place and update the branches to PrologueMBB.</span></div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(&amp;(*MF.<a class="code" href="classllvm_1_1MachineFunction.html#ab0789854909cf47f640a85fa2bac29c7">begin</a>()) == &amp;PrologueMBB &amp;&amp; <span class="stringliteral">&quot;Shrink-wrapping not supported yet&quot;</span>);</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160; </div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;  <span class="comment">// HiPE-specific values</span></div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;  <a class="code" href="classllvm_1_1NamedMDNode.html">NamedMDNode</a> *HiPELiteralsMD = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a6691cc6c9b7341348045f8d54a14e7a7">getMMI</a>().<a class="code" href="classllvm_1_1MachineModuleInfo.html#a1f6aa8381a83bceb61c4be0ef73b4dfc">getModule</a>()</div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;    -&gt;<a class="code" href="classllvm_1_1Module.html#a3b35a6541507efcfdf8d270f062e6f60">getNamedMetadata</a>(<span class="stringliteral">&quot;hipe.literals&quot;</span>);</div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;  <span class="keywordflow">if</span> (!HiPELiteralsMD)</div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;    <a class="code" href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">report_fatal_error</a>(</div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;        <span class="stringliteral">&quot;Can&#39;t generate HiPE prologue without runtime parameters&quot;</span>);</div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> HipeLeafWords</div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;    = <a class="code" href="X86FrameLowering_8cpp.html#ae2c3c56fbe514f4a3ee837a4af0499a8">getHiPELiteral</a>(HiPELiteralsMD,</div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;                     <a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a> ? <span class="stringliteral">&quot;AMD64_LEAF_WORDS&quot;</span> : <span class="stringliteral">&quot;X86_LEAF_WORDS&quot;</span>);</div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> CCRegisteredArgs = <a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a> ? 6 : 5;</div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> Guaranteed = HipeLeafWords * <a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>;</div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;  <span class="keywordtype">unsigned</span> CallerStkArity = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#ac6baa801e4aea800984e760d5460662f">arg_size</a>() &gt; CCRegisteredArgs ?</div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;                            MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#ac6baa801e4aea800984e760d5460662f">arg_size</a>() - CCRegisteredArgs : 0;</div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;  <span class="keywordtype">unsigned</span> MaxStack = MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a14c39a24bf6ebbe339ae8a453c7fdd11">getStackSize</a>() + CallerStkArity*<a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a> + <a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>;</div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160; </div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#affa7c48be5800f58054ccdf5a97f334e">isTargetLinux</a>() &amp;&amp;</div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;         <span class="stringliteral">&quot;HiPE prologue is only supported on Linux operating systems.&quot;</span>);</div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160; </div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;  <span class="comment">// Compute the largest caller&#39;s frame that is needed to fit the callees&#39;</span></div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;  <span class="comment">// frames. This &#39;MaxStack&#39; is computed from:</span></div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;  <span class="comment">// a) the fixed frame size, which is the space needed for all spilled temps,</span></div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;  <span class="comment">// b) outgoing on-stack parameter areas, and</span></div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;  <span class="comment">// c) the minimum stack space this function needs to make available for the</span></div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;  <span class="comment">//    functions it calls (a tunable ABI property).</span></div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;  <span class="keywordflow">if</span> (MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a2cc8bb867c8949943ca7d88f1db31fde">hasCalls</a>()) {</div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;    <span class="keywordtype">unsigned</span> MoreStackForCalls = 0;</div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160; </div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> : MF) {</div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>) {</div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isCall())</div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160; </div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;        <span class="comment">// Get callee operand.</span></div>
<div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0);</div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160; </div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;        <span class="comment">// Only take account of global function calls (no closures etc.).</span></div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;        <span class="keywordflow">if</span> (!MO.<a class="code" href="classllvm_1_1MachineOperand.html#ab0d1155c8c38e84cbe387998fd2e517e">isGlobal</a>())</div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160; </div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = dyn_cast&lt;Function&gt;(MO.<a class="code" href="classllvm_1_1MachineOperand.html#ac8718f1c761727d429180f0ce340f7f0">getGlobal</a>());</div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)</div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160; </div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;        <span class="comment">// Do not update &#39;MaxStack&#39; for primitive and built-in functions</span></div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;        <span class="comment">// (encoded with names either starting with &quot;erlang.&quot;/&quot;bif_&quot; or not</span></div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;        <span class="comment">// having a &quot;.&quot;, such as a simple &lt;Module&gt;.&lt;Function&gt;.&lt;Arity&gt;, or an</span></div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;        <span class="comment">// &quot;_&quot;, such as the BIF &quot;suspend_0&quot;) as they are executed on another</span></div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;        <span class="comment">// stack.</span></div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getName().contains(<span class="stringliteral">&quot;erlang.&quot;</span>) || <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getName().contains(<span class="stringliteral">&quot;bif_&quot;</span>) ||</div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;            <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getName().find_first_of(<span class="stringliteral">&quot;._&quot;</span>) == <a class="code" href="classllvm_1_1StringRef.html#ad0f54a163ac500b144590640c6f1eb6b">StringRef::npos</a>)</div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160; </div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;        <span class="keywordtype">unsigned</span> CalleeStkArity =</div>
<div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;          <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;arg_size() &gt; CCRegisteredArgs ? <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;arg_size()-CCRegisteredArgs : 0;</div>
<div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;        <span class="keywordflow">if</span> (HipeLeafWords - 1 &gt; CalleeStkArity)</div>
<div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;          MoreStackForCalls = <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(MoreStackForCalls,</div>
<div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;                               (HipeLeafWords - 1 - CalleeStkArity) * <a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>);</div>
<div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;      }</div>
<div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;    }</div>
<div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;    MaxStack += MoreStackForCalls;</div>
<div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;  }</div>
<div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160; </div>
<div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;  <span class="comment">// If the stack frame needed is larger than the guaranteed then runtime checks</span></div>
<div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;  <span class="comment">// and calls to &quot;inc_stack_0&quot; BIF should be inserted in the assembly prologue.</span></div>
<div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;  <span class="keywordflow">if</span> (MaxStack &gt; Guaranteed) {</div>
<div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *stackCheckMBB = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a1d483b4ac24a96c2250becb232ed4cb4">CreateMachineBasicBlock</a>();</div>
<div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *incStackMBB = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a1d483b4ac24a96c2250becb232ed4cb4">CreateMachineBasicBlock</a>();</div>
<div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160; </div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;LI : PrologueMBB.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a98d240595236bf85bf1a5c5ba594bdba">liveins</a>()) {</div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;      stackCheckMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acce9c12cc977a88dc7bc51493ce7681c">addLiveIn</a>(LI);</div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;      incStackMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acce9c12cc977a88dc7bc51493ce7681c">addLiveIn</a>(LI);</div>
<div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;    }</div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160; </div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;    MF.<a class="code" href="classllvm_1_1MachineFunction.html#a6a437bb3c4a44ac328344e5f361c7816">push_front</a>(incStackMBB);</div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;    MF.<a class="code" href="classllvm_1_1MachineFunction.html#a6a437bb3c4a44ac328344e5f361c7816">push_front</a>(stackCheckMBB);</div>
<div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160; </div>
<div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;    <span class="keywordtype">unsigned</span> ScratchReg, SPReg, PReg, SPLimitOffset;</div>
<div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;    <span class="keywordtype">unsigned</span> LEAop, CMPop, CALLop;</div>
<div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;    SPLimitOffset = <a class="code" href="X86FrameLowering_8cpp.html#ae2c3c56fbe514f4a3ee837a4af0499a8">getHiPELiteral</a>(HiPELiteralsMD, <span class="stringliteral">&quot;P_NSP_LIMIT&quot;</span>);</div>
<div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a>) {</div>
<div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;      SPReg = X86::RSP;</div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;      PReg  = X86::RBP;</div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;      LEAop = X86::LEA64r;</div>
<div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;      CMPop = X86::CMP64rm;</div>
<div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;      CALLop = X86::CALL64pcrel32;</div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;      SPReg = <a class="code" href="namespacellvm_1_1N86.html#a004aaa5711c58178d0371ab88bf1bd63a303dfe7256beaf60eaaa93d1c418965b">X86::ESP</a>;</div>
<div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;      PReg  = X86::EBP;</div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;      LEAop = X86::LEA32r;</div>
<div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;      CMPop = X86::CMP32rm;</div>
<div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;      CALLop = X86::CALLpcrel32;</div>
<div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;    }</div>
<div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160; </div>
<div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;    ScratchReg = <a class="code" href="X86FrameLowering_8cpp.html#a1021e45de682ea397f9aa6c529ac80be">GetScratchRegister</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a7761d9f26e6c0722ee9c9d8c5e052c1c">IsLP64</a>, MF, <span class="keyword">true</span>);</div>
<div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!MF.<a class="code" href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">getRegInfo</a>().<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a640f34062e7189756ce67e60d5dfd629">isLiveIn</a>(ScratchReg) &amp;&amp;</div>
<div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;           <span class="stringliteral">&quot;HiPE prologue scratch register is live-in&quot;</span>);</div>
<div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160; </div>
<div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;    <span class="comment">// Create new MBB for StackCheck:</span></div>
<div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;    <a class="code" href="namespacellvm.html#afad63f3314b8553ee3c26d020b3ce09e">addRegOffset</a>(<a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(stackCheckMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(LEAop), ScratchReg),</div>
<div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;                 SPReg, <span class="keyword">false</span>, -MaxStack);</div>
<div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;    <span class="comment">// SPLimitOffset is in a fixed heap location (pointed by BP).</span></div>
<div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;    <a class="code" href="namespacellvm.html#afad63f3314b8553ee3c26d020b3ce09e">addRegOffset</a>(<a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(stackCheckMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(CMPop))</div>
<div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;                 .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(ScratchReg), PReg, <span class="keyword">false</span>, SPLimitOffset);</div>
<div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(stackCheckMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::JCC_1)).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#af8571e8dfb010fd8ae76cc4f87aafaac">addMBB</a>(&amp;PrologueMBB).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm_1_1X86.html#a1a356a51a1fb4cc3c427599082cf1d2eafeeb44274a14a14010dc990daecb39a0">X86::COND_AE</a>);</div>
<div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160; </div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;    <span class="comment">// Create new MBB for IncStack:</span></div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(incStackMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(CALLop)).</div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;      addExternalSymbol(<span class="stringliteral">&quot;inc_stack_0&quot;</span>);</div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;    <a class="code" href="namespacellvm.html#afad63f3314b8553ee3c26d020b3ce09e">addRegOffset</a>(<a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(incStackMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(LEAop), ScratchReg),</div>
<div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;                 SPReg, <span class="keyword">false</span>, -MaxStack);</div>
<div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;    <a class="code" href="namespacellvm.html#afad63f3314b8553ee3c26d020b3ce09e">addRegOffset</a>(<a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(incStackMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(CMPop))</div>
<div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;                 .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(ScratchReg), PReg, <span class="keyword">false</span>, SPLimitOffset);</div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(incStackMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::JCC_1)).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#af8571e8dfb010fd8ae76cc4f87aafaac">addMBB</a>(incStackMBB).<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="namespacellvm_1_1X86.html#a1a356a51a1fb4cc3c427599082cf1d2eae364c60967a7bc453d49caffc07d7bef">X86::COND_LE</a>);</div>
<div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160; </div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;    stackCheckMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a935e2a8884592189d8f261634a0b24c5">addSuccessor</a>(&amp;PrologueMBB, {99, 100});</div>
<div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;    stackCheckMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a935e2a8884592189d8f261634a0b24c5">addSuccessor</a>(incStackMBB, {1, 100});</div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;    incStackMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a935e2a8884592189d8f261634a0b24c5">addSuccessor</a>(&amp;PrologueMBB, {99, 100});</div>
<div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;    incStackMBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a935e2a8884592189d8f261634a0b24c5">addSuccessor</a>(incStackMBB, {1, 100});</div>
<div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;  }</div>
<div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;<span class="preprocessor">#ifdef EXPENSIVE_CHECKS</span></div>
<div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;  MF.<a class="code" href="classllvm_1_1MachineFunction.html#acbbbca8e55fe4daa61ede8c0f7b4dd5c">verify</a>();</div>
<div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;}</div>
<div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160; </div>
<div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;<span class="keywordtype">bool</span> X86FrameLowering::adjustStackWithPops(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>,</div>
<div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;                                           <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>,</div>
<div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;                                           <span class="keyword">const</span> <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;                                           <span class="keywordtype">int</span> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> &lt;= 0)</div>
<div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160; </div>
<div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> % <a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>)</div>
<div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160; </div>
<div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;  <span class="keywordtype">int</span> NumPops = <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> / <a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>;</div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;  <span class="comment">// This is only worth it if we have at most 2 pops.</span></div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;  <span class="keywordflow">if</span> (NumPops != 1 &amp;&amp; NumPops != 2)</div>
<div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160; </div>
<div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;  <span class="comment">// Handle only the trivial case where the adjustment directly follows</span></div>
<div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;  <span class="comment">// a call. This is the most common one, anyway.</span></div>
<div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a> == <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>())</div>
<div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> Prev = std::prev(<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>);</div>
<div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;  <span class="keywordflow">if</span> (!Prev-&gt;isCall() || !Prev-&gt;getOperand(1).isRegMask())</div>
<div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160; </div>
<div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;  <span class="keywordtype">unsigned</span> Regs[2];</div>
<div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;  <span class="keywordtype">unsigned</span> FoundRegs = 0;</div>
<div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160; </div>
<div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">getParent</a>()-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">getRegInfo</a>();</div>
<div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;RegMask = Prev-&gt;getOperand(1);</div>
<div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160; </div>
<div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;  <span class="keyword">auto</span> &amp;RegClass =</div>
<div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;      <a class="code" href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">Is64Bit</a> ? X86::GR64_NOREX_NOSPRegClass : X86::GR32_NOREX_NOSPRegClass;</div>
<div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;  <span class="comment">// Try to find up to NumPops free registers.</span></div>
<div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> Candidate : RegClass) {</div>
<div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;    <span class="comment">// Poor man&#39;s liveness:</span></div>
<div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;    <span class="comment">// Since we&#39;re immediately after a call, any register that is clobbered</span></div>
<div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;    <span class="comment">// by the call and not defined by it can be considered dead.</span></div>
<div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;    <span class="keywordflow">if</span> (!RegMask.<a class="code" href="classllvm_1_1MachineOperand.html#ae4ecf5483b94e2bb72967b80cc2008d2">clobbersPhysReg</a>(Candidate))</div>
<div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160; </div>
<div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;    <span class="comment">// Don&#39;t clobber reserved registers</span></div>
<div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a53ca7cff9e929ba372da9780fdd44b02">isReserved</a>(Candidate))</div>
<div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160; </div>
<div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;    <span class="keywordtype">bool</span> IsDef = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO : Prev-&gt;implicit_operands()) {</div>
<div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;      <span class="keywordflow">if</span> (MO.isReg() &amp;&amp; MO.isDef() &amp;&amp;</div>
<div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;          <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;isSuperOrSubRegisterEq(MO.getReg(), Candidate)) {</div>
<div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;        IsDef = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;      }</div>
<div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;    }</div>
<div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160; </div>
<div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;    <span class="keywordflow">if</span> (IsDef)</div>
<div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160; </div>
<div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;    Regs[FoundRegs++] = Candidate;</div>
<div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;    <span class="keywordflow">if</span> (FoundRegs == (<span class="keywordtype">unsigned</span>)NumPops)</div>
<div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;  }</div>
<div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160; </div>
<div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;  <span class="keywordflow">if</span> (FoundRegs == 0)</div>
<div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160; </div>
<div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;  <span class="comment">// If we found only one free register, but need two, reuse the same one twice.</span></div>
<div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;  <span class="keywordflow">while</span> (FoundRegs &lt; (<span class="keywordtype">unsigned</span>)NumPops)</div>
<div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;    Regs[FoundRegs++] = Regs[0];</div>
<div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160; </div>
<div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumPops; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;            <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.is64Bit() ? X86::POP64r : X86::POP32r), Regs[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160; </div>
<div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;}</div>
<div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160; </div>
<div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;<a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="classllvm_1_1X86FrameLowering.html#aa5f78769915f0742f77e73e45abab318">X86FrameLowering::</a></div>
<div class="line"><a name="l03402"></a><span class="lineno"><a class="line" href="classllvm_1_1X86FrameLowering.html#aa5f78769915f0742f77e73e45abab318"> 3402</a></span>&#160;<a class="code" href="classllvm_1_1X86FrameLowering.html#aa5f78769915f0742f77e73e45abab318">eliminateCallFramePseudoInstr</a>(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>,</div>
<div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;                              <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;  <span class="keywordtype">bool</span> reserveCallFrame = <a class="code" href="classllvm_1_1X86FrameLowering.html#a6696e7a9f36d7983d3593e5f4a17831f">hasReservedCallFrame</a>(MF);</div>
<div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;  <span class="keywordtype">unsigned</span> Opcode = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode();</div>
<div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;  <span class="keywordtype">bool</span> isDestroy = Opcode == <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.getCallFrameDestroyOpcode();</div>
<div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getDebugLoc(); <span class="comment">// copy DebugLoc as I will be erased.</span></div>
<div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> Amount = <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.getFrameSize(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> InternalAmt = (isDestroy || Amount) ? <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.<a class="code" href="classllvm_1_1X86InstrInfo.html#ae41024903c1885994dd8cf8a878b0fef">getFrameAdjustment</a>(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) : 0;</div>
<div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;  <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ad26bff839257f220557ce812b2159c72">erase</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;  <span class="keyword">auto</span> InsertPos = <a class="code" href="namespacellvm.html#a5bacbbd03e9261f7b30dc174f26d680c">skipDebugInstructionsForward</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>());</div>
<div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160; </div>
<div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;  <span class="comment">// Try to avoid emitting dead SP adjustments if the block end is unreachable,</span></div>
<div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;  <span class="comment">// typically because the function is marked noreturn (abort, throw,</span></div>
<div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;  <span class="comment">// assert_fail, etc).</span></div>
<div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;  <span class="keywordflow">if</span> (isDestroy &amp;&amp; <a class="code" href="X86FrameLowering_8cpp.html#ae31fe0327c2bb8a7d5cfbc532825e5a3">blockEndIsUnreachable</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160; </div>
<div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;  <span class="keywordflow">if</span> (!reserveCallFrame) {</div>
<div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;    <span class="comment">// If the stack pointer can be changed after prologue, turn the</span></div>
<div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;    <span class="comment">// adjcallstackup instruction into a &#39;sub ESP, &lt;amt&gt;&#39; and the</span></div>
<div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;    <span class="comment">// adjcallstackdown instruction into &#39;add ESP, &lt;amt&gt;&#39;</span></div>
<div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160; </div>
<div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;    <span class="comment">// We need to keep the stack aligned properly.  To do this, we round the</span></div>
<div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;    <span class="comment">// amount of space needed for the outgoing arguments up to the next</span></div>
<div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;    <span class="comment">// alignment boundary.</span></div>
<div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;    Amount = <a class="code" href="namespacellvm.html#ab102f0f12dd38aeea5906b1d80c792ff">alignTo</a>(Amount, <a class="code" href="classllvm_1_1TargetFrameLowering.html#a74d93035f53f5e8c2aaea5a8f307972d">getStackAlign</a>());</div>
<div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160; </div>
<div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>();</div>
<div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;    <span class="keywordtype">bool</span> WindowsCFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ae68d159179d37dc7969439d842e2644f">getTarget</a>().<a class="code" href="classllvm_1_1TargetMachine.html#a171c7253c2b03171bdf22c1bd910f674">getMCAsmInfo</a>()-&gt;<a class="code" href="classllvm_1_1MCAsmInfo.html#ac158349781823fe8ff9e02d3a3533d55">usesWindowsCFI</a>();</div>
<div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#a2ca3855108426698ff21517a7c884c84ab4fe87e4046ecd1f9f3d96bbf63822b3">DwarfCFI</a> = !WindowsCFI &amp;&amp; MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4f117e439113383ea819a6f7beb8ff0b">needsFrameMoves</a>();</div>
<div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160; </div>
<div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;    <span class="comment">// If we have any exception handlers in this function, and we adjust</span></div>
<div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;    <span class="comment">// the SP before calls, we may need to indicate this to the unwinder</span></div>
<div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;    <span class="comment">// using GNU_ARGS_SIZE. Note that this may be necessary even when</span></div>
<div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;    <span class="comment">// Amount == 0, because the preceding function may have set a non-0</span></div>
<div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;    <span class="comment">// GNU_ARGS_SIZE.</span></div>
<div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;    <span class="comment">// TODO: We don&#39;t need to reset this between subsequent functions,</span></div>
<div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;    <span class="comment">// if it didn&#39;t change.</span></div>
<div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;    <span class="keywordtype">bool</span> HasDwarfEHHandlers = !WindowsCFI &amp;&amp; !MF.<a class="code" href="classllvm_1_1MachineFunction.html#a414dced935fa769e37be832bb464d72d">getLandingPads</a>().empty();</div>
<div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160; </div>
<div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;    <span class="keywordflow">if</span> (HasDwarfEHHandlers &amp;&amp; !isDestroy &amp;&amp;</div>
<div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;        MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html">X86MachineFunctionInfo</a>&gt;()-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#ae14195edab055f9809a0349de0be5cce">getHasPushSequences</a>())</div>
<div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;      <a class="code" href="classllvm_1_1X86FrameLowering.html#aef0079a40a972f2942156b2d73bbf190">BuildCFI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, InsertPos, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;               <a class="code" href="classllvm_1_1MCCFIInstruction.html#a7d9d40fb566b30ef74f2db5be5b9cc75">MCCFIInstruction::createGnuArgsSize</a>(<span class="keyword">nullptr</span>, Amount));</div>
<div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160; </div>
<div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;    <span class="keywordflow">if</span> (Amount == 0)</div>
<div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160; </div>
<div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;    <span class="comment">// Factor out the amount that gets handled inside the sequence</span></div>
<div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;    <span class="comment">// (Pushes of argument for frame setup, callee pops for frame destroy)</span></div>
<div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;    Amount -= InternalAmt;</div>
<div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160; </div>
<div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;    <span class="comment">// TODO: This is needed only if we require precise CFA.</span></div>
<div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;    <span class="comment">// If this is a callee-pop calling convention, emit a CFA adjust for</span></div>
<div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;    <span class="comment">// the amount the callee popped.</span></div>
<div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;    <span class="keywordflow">if</span> (isDestroy &amp;&amp; InternalAmt &amp;&amp; <a class="code" href="namespacellvm.html#a2ca3855108426698ff21517a7c884c84ab4fe87e4046ecd1f9f3d96bbf63822b3">DwarfCFI</a> &amp;&amp; !<a class="code" href="classllvm_1_1X86FrameLowering.html#a27de32522776b0243eaa10ae9e0c27d4">hasFP</a>(MF))</div>
<div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;      <a class="code" href="classllvm_1_1X86FrameLowering.html#aef0079a40a972f2942156b2d73bbf190">BuildCFI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, InsertPos, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;               <a class="code" href="classllvm_1_1MCCFIInstruction.html#aba5c12cfe1d792d770234e2811c8a12e">MCCFIInstruction::createAdjustCfaOffset</a>(<span class="keyword">nullptr</span>, -InternalAmt));</div>
<div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160; </div>
<div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;    <span class="comment">// Add Amount to SP to destroy a frame, or subtract to setup.</span></div>
<div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;    int64_t <a class="code" href="namespacellvm_1_1ARM_1_1WinEH.html#abbeb84a95402989ddf5e26b616f8d9b4">StackAdjustment</a> = isDestroy ? Amount : -Amount;</div>
<div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160; </div>
<div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM_1_1WinEH.html#abbeb84a95402989ddf5e26b616f8d9b4">StackAdjustment</a>) {</div>
<div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;      <span class="comment">// Merge with any previous or following adjustment instruction. Note: the</span></div>
<div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;      <span class="comment">// instructions merged with here do not have CFI, so their stack</span></div>
<div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;      <span class="comment">// adjustments do not feed into CfaAdjustment.</span></div>
<div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;      <a class="code" href="namespacellvm_1_1ARM_1_1WinEH.html#abbeb84a95402989ddf5e26b616f8d9b4">StackAdjustment</a> += <a class="code" href="classllvm_1_1X86FrameLowering.html#af1d6349ca67f14c36e41916e41536da4">mergeSPUpdates</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, InsertPos, <span class="keyword">true</span>);</div>
<div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;      <a class="code" href="namespacellvm_1_1ARM_1_1WinEH.html#abbeb84a95402989ddf5e26b616f8d9b4">StackAdjustment</a> += <a class="code" href="classllvm_1_1X86FrameLowering.html#af1d6349ca67f14c36e41916e41536da4">mergeSPUpdates</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, InsertPos, <span class="keyword">false</span>);</div>
<div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160; </div>
<div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM_1_1WinEH.html#abbeb84a95402989ddf5e26b616f8d9b4">StackAdjustment</a>) {</div>
<div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;        <span class="keywordflow">if</span> (!(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.hasMinSize() &amp;&amp;</div>
<div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;              adjustStackWithPops(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, InsertPos, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="namespacellvm_1_1ARM_1_1WinEH.html#abbeb84a95402989ddf5e26b616f8d9b4">StackAdjustment</a>)))</div>
<div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;          BuildStackAdjustment(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, InsertPos, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="namespacellvm_1_1ARM_1_1WinEH.html#abbeb84a95402989ddf5e26b616f8d9b4">StackAdjustment</a>,</div>
<div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;                               <span class="comment">/*InEpilogue=*/</span><span class="keyword">false</span>);</div>
<div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;      }</div>
<div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;    }</div>
<div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160; </div>
<div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a2ca3855108426698ff21517a7c884c84ab4fe87e4046ecd1f9f3d96bbf63822b3">DwarfCFI</a> &amp;&amp; !<a class="code" href="classllvm_1_1X86FrameLowering.html#a27de32522776b0243eaa10ae9e0c27d4">hasFP</a>(MF)) {</div>
<div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;      <span class="comment">// If we don&#39;t have FP, but need to generate unwind information,</span></div>
<div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;      <span class="comment">// we need to set the correct CFA offset after the stack adjustment.</span></div>
<div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;      <span class="comment">// How much we adjust the CFA offset depends on whether we&#39;re emitting</span></div>
<div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;      <span class="comment">// CFI only for EH purposes or for debugging. EH only requires the CFA</span></div>
<div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;      <span class="comment">// offset to be correct at each call site, while for debugging we want</span></div>
<div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;      <span class="comment">// it to be more precise.</span></div>
<div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160; </div>
<div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;      int64_t CfaAdjustment = -<a class="code" href="namespacellvm_1_1ARM_1_1WinEH.html#abbeb84a95402989ddf5e26b616f8d9b4">StackAdjustment</a>;</div>
<div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;      <span class="comment">// TODO: When not using precise CFA, we also need to adjust for the</span></div>
<div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;      <span class="comment">// InternalAmt here.</span></div>
<div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;      <span class="keywordflow">if</span> (CfaAdjustment) {</div>
<div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;        <a class="code" href="classllvm_1_1X86FrameLowering.html#aef0079a40a972f2942156b2d73bbf190">BuildCFI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, InsertPos, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;                 <a class="code" href="classllvm_1_1MCCFIInstruction.html#aba5c12cfe1d792d770234e2811c8a12e">MCCFIInstruction::createAdjustCfaOffset</a>(<span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;                                                         CfaAdjustment));</div>
<div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;      }</div>
<div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;    }</div>
<div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160; </div>
<div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;  }</div>
<div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160; </div>
<div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;  <span class="keywordflow">if</span> (InternalAmt) {</div>
<div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;    <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> CI = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;    <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>();</div>
<div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;    <span class="keywordflow">while</span> (CI != <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> &amp;&amp; !std::prev(CI)-&gt;isCall())</div>
<div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;      --CI;</div>
<div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;    BuildStackAdjustment(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, CI, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, -InternalAmt, <span class="comment">/*InEpilogue=*/</span><span class="keyword">false</span>);</div>
<div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;  }</div>
<div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160; </div>
<div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;}</div>
<div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160; </div>
<div class="line"><a name="l03511"></a><span class="lineno"><a class="line" href="classllvm_1_1X86FrameLowering.html#a652c5c131aaf585181fb0ff722781118"> 3511</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1X86FrameLowering.html#a652c5c131aaf585181fb0ff722781118">X86FrameLowering::canUseAsPrologue</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">getParent</a>() &amp;&amp; <span class="stringliteral">&quot;Block is not attached to a function!&quot;</span>);</div>
<div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">getParent</a>();</div>
<div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a5fc7747b752105f022c214bd2403eeee">isLiveIn</a>(X86::EFLAGS))</div>
<div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160; </div>
<div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;  <span class="comment">// If stack probes have to loop inline or call, that will clobber EFLAGS.</span></div>
<div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;  <span class="comment">// FIXME: we could allow cases that will use emitStackProbeInlineGenericBlock.</span></div>
<div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1X86Subtarget.html">X86Subtarget</a> &amp;<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a> = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1X86Subtarget.html">X86Subtarget</a>&gt;();</div>
<div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1X86TargetLowering.html">X86TargetLowering</a> &amp;TLI = *<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a97b47799ffd834b0fddcc8cee6fbe234">getTargetLowering</a>();</div>
<div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;  <span class="keywordflow">if</span> (TLI.hasInlineStackProbe(MF) || TLI.hasStackProbeSymbol(MF))</div>
<div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160; </div>
<div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1X86MachineFunctionInfo.html">X86MachineFunctionInfo</a> *X86FI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html">X86MachineFunctionInfo</a>&gt;();</div>
<div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;  <span class="keywordflow">return</span> !<a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;hasStackRealignment(MF) &amp;&amp; !X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#aa92686e5bcf4b22006a54652f92254df">hasSwiftAsyncContext</a>();</div>
<div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;}</div>
<div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160; </div>
<div class="line"><a name="l03528"></a><span class="lineno"><a class="line" href="classllvm_1_1X86FrameLowering.html#aae24f16623a7d1df7b850c55694e9d27"> 3528</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1X86FrameLowering.html#aae24f16623a7d1df7b850c55694e9d27">X86FrameLowering::canUseAsEpilogue</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">getParent</a>() &amp;&amp; <span class="stringliteral">&quot;Block is not attached to a function!&quot;</span>);</div>
<div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160; </div>
<div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;  <span class="comment">// Win64 has strict requirements in terms of epilogue and we are</span></div>
<div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;  <span class="comment">// not taking a chance at messing with them.</span></div>
<div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;  <span class="comment">// I.e., unless this block is already an exit block, we can&#39;t use</span></div>
<div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;  <span class="comment">// it as an epilogue.</span></div>
<div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a649bfd3c9cf9a6b1d1bab86556e866dd">isTargetWin64</a>() &amp;&amp; !<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#aa8d1d8d88835b75b05b14ab774785e8a">succ_empty</a>() &amp;&amp; !<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a82f5d244972c88ff03ee56d6c090ac70">isReturnBlock</a>())</div>
<div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160; </div>
<div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;  <span class="comment">// Swift async context epilogue has a BTR instruction that clobbers parts of</span></div>
<div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;  <span class="comment">// EFLAGS.</span></div>
<div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">getParent</a>();</div>
<div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;  <span class="keywordflow">if</span> (MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html">X86MachineFunctionInfo</a>&gt;()-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#aa92686e5bcf4b22006a54652f92254df">hasSwiftAsyncContext</a>())</div>
<div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="X86FrameLowering_8cpp.html#a63bd353ca84282a830d803a6bf9e4c5e">flagsNeedToBePreservedBeforeTheTerminators</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160; </div>
<div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#ad7e593e787ba6a94dbd287c32abe4006">canUseLEAForSPInEpilogue</a>(*<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">getParent</a>()))</div>
<div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160; </div>
<div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;  <span class="comment">// If we cannot use LEA to adjust SP, we may need to use ADD, which</span></div>
<div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;  <span class="comment">// clobbers the EFLAGS. Check that we do not need to preserve it,</span></div>
<div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;  <span class="comment">// otherwise, conservatively assume this is not</span></div>
<div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;  <span class="comment">// safe to insert the epilogue here.</span></div>
<div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;  <span class="keywordflow">return</span> !<a class="code" href="X86FrameLowering_8cpp.html#a63bd353ca84282a830d803a6bf9e4c5e">flagsNeedToBePreservedBeforeTheTerminators</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;}</div>
<div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160; </div>
<div class="line"><a name="l03554"></a><span class="lineno"><a class="line" href="classllvm_1_1X86FrameLowering.html#a7e24606b8fe6124decedb17e5ffa405e"> 3554</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1X86FrameLowering.html#a7e24606b8fe6124decedb17e5ffa405e">X86FrameLowering::enableShrinkWrapping</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;  <span class="comment">// If we may need to emit frameless compact unwind information, give</span></div>
<div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;  <span class="comment">// up as this is currently broken: PR25614.</span></div>
<div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;  <span class="keywordtype">bool</span> CompactUnwind =</div>
<div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;      MF.<a class="code" href="classllvm_1_1MachineFunction.html#a6691cc6c9b7341348045f8d54a14e7a7">getMMI</a>().<a class="code" href="classllvm_1_1MachineModuleInfo.html#af0c649dd3863684f18821123651f924c">getContext</a>().<a class="code" href="classllvm_1_1MCContext.html#a3a4f79e9c6f9e277f0299783010a67dc">getObjectFileInfo</a>()-&gt;<a class="code" href="classllvm_1_1MCObjectFileInfo.html#a0883984191c9773aed756c5d55e52a90">getCompactUnwindSection</a>() !=</div>
<div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;      <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;  <span class="keywordflow">return</span> (MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#afb28a4deafe2954b0534cc6399ce518b">hasFnAttribute</a>(Attribute::NoUnwind) || <a class="code" href="classllvm_1_1X86FrameLowering.html#a27de32522776b0243eaa10ae9e0c27d4">hasFP</a>(MF) ||</div>
<div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;          !CompactUnwind) &amp;&amp;</div>
<div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;         <span class="comment">// The lowering of segmented stack and HiPE only support entry</span></div>
<div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;         <span class="comment">// blocks as prologue blocks: PR26107. This limitation may be</span></div>
<div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;         <span class="comment">// lifted if we fix:</span></div>
<div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;         <span class="comment">// - adjustForSegmentedStacks</span></div>
<div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;         <span class="comment">// - adjustForHiPEPrologue</span></div>
<div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;         MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#a5f494edc0a569c7fc9ff4181243be1ed">getCallingConv</a>() != <a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feeda20ddc463f96d806f369d56205ea205f5">CallingConv::HiPE</a> &amp;&amp;</div>
<div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;         !MF.<a class="code" href="classllvm_1_1MachineFunction.html#ab499fb31e894a900402d0871eee39b75">shouldSplitStack</a>();</div>
<div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;}</div>
<div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160; </div>
<div class="line"><a name="l03571"></a><span class="lineno"><a class="line" href="classllvm_1_1X86FrameLowering.html#a535388ac574e0f8d844662d315997b3d"> 3571</a></span>&#160;<a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="classllvm_1_1X86FrameLowering.html#a535388ac574e0f8d844662d315997b3d">X86FrameLowering::restoreWin32EHStackPointers</a>(</div>
<div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>,</div>
<div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <span class="keywordtype">bool</span> RestoreSP)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#a5cf14fb6eb48363c5fbf29622baaf853">isTargetWindowsMSVC</a>() &amp;&amp; <span class="stringliteral">&quot;funclets only supported in MSVC env&quot;</span>);</div>
<div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.<a class="code" href="classllvm_1_1X86Subtarget.html#af92c188739e9be47b78eca0e1e622f9d">isTargetWin32</a>() &amp;&amp; <span class="stringliteral">&quot;EBP/ESI restoration only required on win32&quot;</span>);</div>
<div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.is32Bit() &amp;&amp; !<a class="code" href="classllvm_1_1X86FrameLowering.html#abb804392ca8368795013f2e5dc001ee2">Uses64BitFramePtr</a> &amp;&amp;</div>
<div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;         <span class="stringliteral">&quot;restoring EBP/ESI on non-32-bit target&quot;</span>);</div>
<div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160; </div>
<div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">getParent</a>();</div>
<div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> FramePtr = <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;<a class="code" href="classllvm_1_1X86RegisterInfo.html#a45e0af6fcebf5fd5a4584974e13c6810">getFrameRegister</a>(MF);</div>
<div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> BasePtr = <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;<a class="code" href="classllvm_1_1X86RegisterInfo.html#ad057cb3300544ebb741b871a45faae7d">getBaseRegister</a>();</div>
<div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;  <a class="code" href="structllvm_1_1WinEHFuncInfo.html">WinEHFuncInfo</a> &amp;FuncInfo = *MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac828d4f05c8f8b0a1d54c492f718e510">getWinEHFuncInfo</a>();</div>
<div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;  <a class="code" href="classllvm_1_1X86MachineFunctionInfo.html">X86MachineFunctionInfo</a> *X86FI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html">X86MachineFunctionInfo</a>&gt;();</div>
<div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;  <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> &amp;MFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>();</div>
<div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160; </div>
<div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;  <span class="comment">// FIXME: Don&#39;t set FrameSetup flag in catchret case.</span></div>
<div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160; </div>
<div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;  <span class="keywordtype">int</span> FI = FuncInfo.<a class="code" href="structllvm_1_1WinEHFuncInfo.html#a1685e8ca2cc67569dbfdd32ad11cbe70">EHRegNodeFrameIndex</a>;</div>
<div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;  <span class="keywordtype">int</span> EHRegSize = MFI.getObjectSize(FI);</div>
<div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160; </div>
<div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;  <span class="keywordflow">if</span> (RestoreSP) {</div>
<div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;    <span class="comment">// MOV32rm -EHRegSize(%ebp), %esp</span></div>
<div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;    <a class="code" href="namespacellvm.html#afad63f3314b8553ee3c26d020b3ce09e">addRegOffset</a>(<a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::MOV32rm), <a class="code" href="namespacellvm_1_1N86.html#a004aaa5711c58178d0371ab88bf1bd63a303dfe7256beaf60eaaa93d1c418965b">X86::ESP</a>),</div>
<div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;                 X86::EBP, <span class="keyword">true</span>, -EHRegSize)</div>
<div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;  }</div>
<div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160; </div>
<div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> UsedReg;</div>
<div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;  <span class="keywordtype">int</span> EHRegOffset = <a class="code" href="classllvm_1_1X86FrameLowering.html#a84fbe17f451c957c67de546c98f2b79b">getFrameIndexReference</a>(MF, FI, UsedReg).<a class="code" href="classllvm_1_1StackOffset.html#aeb11e994c5580c80bbb0951eb05f9c80">getFixed</a>();</div>
<div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;  <span class="keywordtype">int</span> EndOffset = -EHRegOffset - EHRegSize;</div>
<div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;  FuncInfo.<a class="code" href="structllvm_1_1WinEHFuncInfo.html#ab2ce4d51abb0224db13a9e656c3798d4">EHRegNodeEndOffset</a> = EndOffset;</div>
<div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160; </div>
<div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;  <span class="keywordflow">if</span> (UsedReg == FramePtr) {</div>
<div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;    <span class="comment">// ADD $offset, %ebp</span></div>
<div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;    <span class="keywordtype">unsigned</span> ADDri = <a class="code" href="X86FrameLowering_8cpp.html#a4f415404e45ee7add2769627e39c2b53">getADDriOpcode</a>(<span class="keyword">false</span>, EndOffset);</div>
<div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(ADDri), FramePtr)</div>
<div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(FramePtr)</div>
<div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(EndOffset)</div>
<div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>)</div>
<div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;        -&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">getOperand</a>(3)</div>
<div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;        .<a class="code" href="classllvm_1_1MachineOperand.html#a61a42c85bd86c6ca4554e27d33c3f798">setIsDead</a>();</div>
<div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(EndOffset &gt;= 0 &amp;&amp;</div>
<div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;           <span class="stringliteral">&quot;end of registration object above normal EBP position!&quot;</span>);</div>
<div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (UsedReg == BasePtr) {</div>
<div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;    <span class="comment">// LEA offset(%ebp), %esi</span></div>
<div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;    <a class="code" href="namespacellvm.html#afad63f3314b8553ee3c26d020b3ce09e">addRegOffset</a>(<a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::LEA32r), BasePtr),</div>
<div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;                 FramePtr, <span class="keyword">false</span>, EndOffset)</div>
<div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;    <span class="comment">// MOV32rm SavedEBPOffset(%esi), %ebp</span></div>
<div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#a8ed3059d287792eb8e73780ac551e918">getHasSEHFramePtrSave</a>());</div>
<div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> =</div>
<div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;        <a class="code" href="classllvm_1_1X86FrameLowering.html#a84fbe17f451c957c67de546c98f2b79b">getFrameIndexReference</a>(MF, X86FI-&gt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html#a75b0fbc272791b1c8f9acaa3564abddb">getSEHFramePtrSaveIndex</a>(), UsedReg)</div>
<div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;            .<a class="code" href="classllvm_1_1StackOffset.html#aeb11e994c5580c80bbb0951eb05f9c80">getFixed</a>();</div>
<div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(UsedReg == BasePtr);</div>
<div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;    <a class="code" href="namespacellvm.html#afad63f3314b8553ee3c26d020b3ce09e">addRegOffset</a>(<a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::MOV32rm), FramePtr),</div>
<div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;                 UsedReg, <span class="keyword">true</span>, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>)</div>
<div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">setMIFlag</a>(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>);</div>
<div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;32-bit frames with WinEH must use FramePtr or BasePtr&quot;</span>);</div>
<div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;  }</div>
<div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>;</div>
<div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;}</div>
<div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160; </div>
<div class="line"><a name="l03634"></a><span class="lineno"><a class="line" href="classllvm_1_1X86FrameLowering.html#a5f9f26d96deb10d0d3b394fe12e2b0f5"> 3634</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classllvm_1_1X86FrameLowering.html#a5f9f26d96deb10d0d3b394fe12e2b0f5">X86FrameLowering::getInitialCFAOffset</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;<a class="code" href="classllvm_1_1X86RegisterInfo.html#a92866ff258d3a2244a47257a8a4876cf">getSlotSize</a>();</div>
<div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;}</div>
<div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160; </div>
<div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;<a class="code" href="classllvm_1_1Register.html">Register</a></div>
<div class="line"><a name="l03639"></a><span class="lineno"><a class="line" href="classllvm_1_1X86FrameLowering.html#abac406e51bd21d4da6eb9762f2f36df6"> 3639</a></span>&#160;<a class="code" href="classllvm_1_1X86FrameLowering.html#abac406e51bd21d4da6eb9762f2f36df6">X86FrameLowering::getInitialCFARegister</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;getDwarfRegNum(<a class="code" href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">StackPtr</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;}</div>
<div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160; </div>
<div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;<span class="comment">// Struct used by orderFrameObjects to help sort the stack objects.</span></div>
<div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;<span class="keyword">struct </span>X86FrameSortingObject {</div>
<div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;  <span class="keywordtype">bool</span> IsValid = <span class="keyword">false</span>;         <span class="comment">// true if we care about this Object.</span></div>
<div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;  <span class="keywordtype">unsigned</span> ObjectIndex = 0;     <span class="comment">// Index of Object into MFI list.</span></div>
<div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;  <span class="keywordtype">unsigned</span> ObjectSize = 0;      <span class="comment">// Size of Object in bytes.</span></div>
<div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;  <a class="code" href="structllvm_1_1Align.html">Align</a> ObjectAlignment = <a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(1); <span class="comment">// Alignment of Object in bytes.</span></div>
<div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;  <span class="keywordtype">unsigned</span> ObjectNumUses = 0;   <span class="comment">// Object static number of uses.</span></div>
<div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;};</div>
<div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160; </div>
<div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;<span class="comment">// The comparison function we use for std::sort to order our local</span></div>
<div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;<span class="comment">// stack symbols. The current algorithm is to use an estimated</span></div>
<div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;<span class="comment">// &quot;density&quot;. This takes into consideration the size and number of</span></div>
<div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;<span class="comment">// uses each object has in order to roughly minimize code size.</span></div>
<div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;<span class="comment">// So, for example, an object of size 16B that is referenced 5 times</span></div>
<div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;<span class="comment">// will get higher priority than 4 4B objects referenced 1 time each.</span></div>
<div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;<span class="comment">// It&#39;s not perfect and we may be able to squeeze a few more bytes out of</span></div>
<div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;<span class="comment">// it (for example : 0(esp) requires fewer bytes, symbols allocated at the</span></div>
<div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;<span class="comment">// fringe end can have special consideration, given their size is less</span></div>
<div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;<span class="comment">// important, etc.), but the algorithmic complexity grows too much to be</span></div>
<div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;<span class="comment">// worth the extra gains we get. This gets us pretty close.</span></div>
<div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;<span class="comment">// The final order leaves us with objects with highest priority going</span></div>
<div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;<span class="comment">// at the end of our list.</span></div>
<div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;<span class="keyword">struct </span>X86FrameSortingComparator {</div>
<div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">bool</span> operator()(<span class="keyword">const</span> X86FrameSortingObject &amp;A,</div>
<div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;                         <span class="keyword">const</span> X86FrameSortingObject &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> DensityAScaled, DensityBScaled;</div>
<div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160; </div>
<div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;    <span class="comment">// For consistency in our comparison, all invalid objects are placed</span></div>
<div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;    <span class="comment">// at the end. This also allows us to stop walking when we hit the</span></div>
<div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;    <span class="comment">// first invalid item after it&#39;s all sorted.</span></div>
<div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;    <span class="keywordflow">if</span> (!A.IsValid)</div>
<div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.IsValid)</div>
<div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160; </div>
<div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;    <span class="comment">// The density is calculated by doing :</span></div>
<div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;    <span class="comment">//     (double)DensityA = A.ObjectNumUses / A.ObjectSize</span></div>
<div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;    <span class="comment">//     (double)DensityB = B.ObjectNumUses / B.ObjectSize</span></div>
<div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;    <span class="comment">// Since this approach may cause inconsistencies in</span></div>
<div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;    <span class="comment">// the floating point &lt;, &gt;, == comparisons, depending on the floating</span></div>
<div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;    <span class="comment">// point model with which the compiler was built, we&#39;re going</span></div>
<div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;    <span class="comment">// to scale both sides by multiplying with</span></div>
<div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;    <span class="comment">// A.ObjectSize * B.ObjectSize. This ends up factoring away</span></div>
<div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;    <span class="comment">// the division and, with it, the need for any floating point</span></div>
<div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;    <span class="comment">// arithmetic.</span></div>
<div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;    DensityAScaled = <span class="keyword">static_cast&lt;</span><a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a><span class="keyword">&gt;</span>(A.ObjectNumUses) *</div>
<div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;      <span class="keyword">static_cast&lt;</span><a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a><span class="keyword">&gt;</span>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.ObjectSize);</div>
<div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;    DensityBScaled = <span class="keyword">static_cast&lt;</span><a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a><span class="keyword">&gt;</span>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.ObjectNumUses) *</div>
<div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;      <span class="keyword">static_cast&lt;</span><a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a><span class="keyword">&gt;</span>(A.ObjectSize);</div>
<div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160; </div>
<div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;    <span class="comment">// If the two densities are equal, prioritize highest alignment</span></div>
<div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;    <span class="comment">// objects. This allows for similar alignment objects</span></div>
<div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;    <span class="comment">// to be packed together (given the same density).</span></div>
<div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;    <span class="comment">// There&#39;s room for improvement here, also, since we can pack</span></div>
<div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;    <span class="comment">// similar alignment (different density) objects next to each</span></div>
<div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;    <span class="comment">// other to save padding. This will also require further</span></div>
<div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;    <span class="comment">// complexity/iterations, and the overall gain isn&#39;t worth it,</span></div>
<div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;    <span class="comment">// in general. Something to keep in mind, though.</span></div>
<div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;    <span class="keywordflow">if</span> (DensityAScaled == DensityBScaled)</div>
<div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;      <span class="keywordflow">return</span> A.ObjectAlignment &lt; <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.ObjectAlignment;</div>
<div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160; </div>
<div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;    <span class="keywordflow">return</span> DensityAScaled &lt; DensityBScaled;</div>
<div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;  }</div>
<div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;};</div>
<div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;} <span class="comment">// namespace</span></div>
<div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160; </div>
<div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;<span class="comment">// Order the symbols in the local stack.</span></div>
<div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;<span class="comment">// We want to place the local stack objects in some sort of sensible order.</span></div>
<div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;<span class="comment">// The heuristic we use is to try and pack them according to static number</span></div>
<div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;<span class="comment">// of uses and size of object in order to minimize code size.</span></div>
<div class="line"><a name="l03714"></a><span class="lineno"><a class="line" href="classllvm_1_1X86FrameLowering.html#adee8390bf727c3086a7b864de6c6913e"> 3714</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1X86FrameLowering.html#adee8390bf727c3086a7b864de6c6913e">X86FrameLowering::orderFrameObjects</a>(</div>
<div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;int&gt;</a> &amp;ObjectsToAllocate)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> &amp;MFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>();</div>
<div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160; </div>
<div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;  <span class="comment">// Don&#39;t waste time if there&#39;s nothing to do.</span></div>
<div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;  <span class="keywordflow">if</span> (ObjectsToAllocate.empty())</div>
<div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160; </div>
<div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;  <span class="comment">// Create an array of all MFI objects. We won&#39;t need all of these</span></div>
<div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;  <span class="comment">// objects, but we&#39;re going to create a full array of them to make</span></div>
<div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;  <span class="comment">// it easier to index into when we&#39;re counting &quot;uses&quot; down below.</span></div>
<div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;  <span class="comment">// We want to be able to easily/cheaply access an object by simply</span></div>
<div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;  <span class="comment">// indexing into it, instead of having to search for it every time.</span></div>
<div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;  std::vector&lt;X86FrameSortingObject&gt; SortingObjects(MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#ac51e2d34abb79b72afef355fac525c76">getObjectIndexEnd</a>());</div>
<div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160; </div>
<div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;  <span class="comment">// Walk the objects we care about and mark them as such in our working</span></div>
<div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;  <span class="comment">// struct.</span></div>
<div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;Obj : ObjectsToAllocate) {</div>
<div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;    SortingObjects[Obj].IsValid = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;    SortingObjects[Obj].ObjectIndex = Obj;</div>
<div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;    SortingObjects[Obj].ObjectAlignment = MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a8320a54de0a273478de910ac3795058b">getObjectAlign</a>(Obj);</div>
<div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;    <span class="comment">// Set the size.</span></div>
<div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;    <span class="keywordtype">int</span> ObjectSize = MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a9284fd53296d2a2f8ae654d000971000">getObjectSize</a>(Obj);</div>
<div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;    <span class="keywordflow">if</span> (ObjectSize == 0)</div>
<div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;      <span class="comment">// Variable size. Just use 4.</span></div>
<div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;      SortingObjects[Obj].ObjectSize = 4;</div>
<div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;      SortingObjects[Obj].ObjectSize = ObjectSize;</div>
<div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;  }</div>
<div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160; </div>
<div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;  <span class="comment">// Count the number of uses for each object.</span></div>
<div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> : MF) {</div>
<div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>) {</div>
<div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isDebugInstr())</div>
<div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO : <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.operands()) {</div>
<div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;        <span class="comment">// Check to see if it&#39;s a local stack symbol.</span></div>
<div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;        <span class="keywordflow">if</span> (!MO.isFI())</div>
<div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a> = MO.getIndex();</div>
<div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;        <span class="comment">// Check to see if it falls within our range, and is tagged</span></div>
<div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;        <span class="comment">// to require ordering.</span></div>
<div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a> &gt;= 0 &amp;&amp; <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a> &lt; MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#ac51e2d34abb79b72afef355fac525c76">getObjectIndexEnd</a>() &amp;&amp;</div>
<div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;            SortingObjects[<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>].IsValid)</div>
<div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;          SortingObjects[<a class="code" href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a>].ObjectNumUses++;</div>
<div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;      }</div>
<div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;    }</div>
<div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;  }</div>
<div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160; </div>
<div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;  <span class="comment">// Sort the objects using X86FrameSortingAlgorithm (see its comment for</span></div>
<div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;  <span class="comment">// info).</span></div>
<div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;  <a class="code" href="namespacellvm.html#a076f93c387f454f0db13d4bc7d4e7f9c">llvm::stable_sort</a>(SortingObjects, X86FrameSortingComparator());</div>
<div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160; </div>
<div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;  <span class="comment">// Now modify the original list to represent the final order that</span></div>
<div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;  <span class="comment">// we want. The order will depend on whether we&#39;re going to access them</span></div>
<div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;  <span class="comment">// from the stack pointer or the frame pointer. For SP, the list should</span></div>
<div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;  <span class="comment">// end up with the END containing objects that we want with smaller offsets.</span></div>
<div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;  <span class="comment">// For FP, it should be flipped.</span></div>
<div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;</div>
<div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;Obj : SortingObjects) {</div>
<div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;    <span class="comment">// All invalid items are sorted at the end, so it&#39;s safe to stop.</span></div>
<div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;    <span class="keywordflow">if</span> (!Obj.IsValid)</div>
<div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;    ObjectsToAllocate[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++] = Obj.ObjectIndex;</div>
<div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;  }</div>
<div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160; </div>
<div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;  <span class="comment">// Flip it if we&#39;re accessing off of the FP.</span></div>
<div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">TRI</a>-&gt;hasStackRealignment(MF) &amp;&amp; <a class="code" href="classllvm_1_1X86FrameLowering.html#a27de32522776b0243eaa10ae9e0c27d4">hasFP</a>(MF))</div>
<div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;    <a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">std::reverse</a>(ObjectsToAllocate.begin(), ObjectsToAllocate.end());</div>
<div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;}</div>
<div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160; </div>
<div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160; </div>
<div class="line"><a name="l03786"></a><span class="lineno"><a class="line" href="classllvm_1_1X86FrameLowering.html#ac7b381a1c38101d4e17121c7b993e00c"> 3786</a></span>&#160;<span class="keywordtype">unsigned</span> <a class="code" href="classllvm_1_1X86FrameLowering.html#ac7b381a1c38101d4e17121c7b993e00c">X86FrameLowering::getWinEHParentFrameOffset</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;  <span class="comment">// RDX, the parent frame pointer, is homed into 16(%rsp) in the prologue.</span></div>
<div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = 16;</div>
<div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;  <span class="comment">// RBP is immediately pushed.</span></div>
<div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;  <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> += <a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>;</div>
<div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;  <span class="comment">// All callee-saved registers are then pushed.</span></div>
<div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;  <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> += MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1X86MachineFunctionInfo.html">X86MachineFunctionInfo</a>&gt;()-&gt;getCalleeSavedFrameSize();</div>
<div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;  <span class="comment">// Every funclet allocates enough stack space for the largest outgoing call.</span></div>
<div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;  <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> += getWinEHFuncletFrameSize(MF);</div>
<div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>;</div>
<div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;}</div>
<div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160; </div>
<div class="line"><a name="l03798"></a><span class="lineno"><a class="line" href="classllvm_1_1X86FrameLowering.html#a6a8d1523f211998978b3fa0bfe8818a1"> 3798</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1X86FrameLowering.html#a6a8d1523f211998978b3fa0bfe8818a1">X86FrameLowering::processFunctionBeforeFrameFinalized</a>(</div>
<div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;    <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, <a class="code" href="classllvm_1_1RegScavenger.html">RegScavenger</a> *RS)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;  <span class="comment">// Mark the function as not having WinCFI. We will set it back to true in</span></div>
<div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;  <span class="comment">// emitPrologue if it gets called and emits CFI.</span></div>
<div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;  MF.<a class="code" href="classllvm_1_1MachineFunction.html#a330afa0baf556056f9c032480dd57347">setHasWinCFI</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160; </div>
<div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;  <span class="comment">// If we are using Windows x64 CFI, ensure that the stack is always 8 byte</span></div>
<div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;  <span class="comment">// aligned. The format doesn&#39;t support misaligned stack adjustments.</span></div>
<div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;  <span class="keywordflow">if</span> (MF.<a class="code" href="classllvm_1_1MachineFunction.html#ae68d159179d37dc7969439d842e2644f">getTarget</a>().<a class="code" href="classllvm_1_1TargetMachine.html#a171c7253c2b03171bdf22c1bd910f674">getMCAsmInfo</a>()-&gt;<a class="code" href="classllvm_1_1MCAsmInfo.html#ac158349781823fe8ff9e02d3a3533d55">usesWindowsCFI</a>())</div>
<div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;    MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>().<a class="code" href="classllvm_1_1MachineFrameInfo.html#a1f09e99062be1101e3a2cf3ff88878f7">ensureMaxAlignment</a>(<a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>));</div>
<div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160; </div>
<div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;  <span class="comment">// If this function isn&#39;t doing Win64-style C++ EH, we don&#39;t need to do</span></div>
<div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;  <span class="comment">// anything.</span></div>
<div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.is64Bit() &amp;&amp; MF.<a class="code" href="classllvm_1_1MachineFunction.html#ad40522ac860df72189255e38782acc3f">hasEHFunclets</a>() &amp;&amp;</div>
<div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;      <a class="code" href="namespacellvm.html#a8d508f23e2580095561902c39911fb9b">classifyEHPersonality</a>(MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#a6f77e4e800ba4dffd63e8ddb330062aa">getPersonalityFn</a>()) ==</div>
<div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;          <a class="code" href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aab34bedfd8d86f0adbefe4ae0e708f428">EHPersonality::MSVC_CXX</a>) {</div>
<div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;    adjustFrameForMsvcCxxEh(MF);</div>
<div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;  }</div>
<div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;}</div>
<div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160; </div>
<div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;<span class="keywordtype">void</span> X86FrameLowering::adjustFrameForMsvcCxxEh(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;  <span class="comment">// Win64 C++ EH needs to allocate the UnwindHelp object at some fixed offset</span></div>
<div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;  <span class="comment">// relative to RSP after the prologue.  Find the offset of the last fixed</span></div>
<div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;  <span class="comment">// object, so that we can allocate a slot immediately following it. If there</span></div>
<div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;  <span class="comment">// were no fixed objects, use offset -SlotSize, which is immediately after the</span></div>
<div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;  <span class="comment">// return address. Fixed objects have negative frame indices.</span></div>
<div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;  <a class="code" href="classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a> &amp;MFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">getFrameInfo</a>();</div>
<div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;  <a class="code" href="structllvm_1_1WinEHFuncInfo.html">WinEHFuncInfo</a> &amp;EHInfo = *MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac828d4f05c8f8b0a1d54c492f718e510">getWinEHFuncInfo</a>();</div>
<div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;  int64_t MinFixedObjOffset = -<a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>;</div>
<div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#ae70474766f2a88bab5b2b77bcb22212b">getObjectIndexBegin</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; 0; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;    MinFixedObjOffset = <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(MinFixedObjOffset, MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#adf98860d7f42290f873c82a981eb0ea6">getObjectOffset</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div>
<div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160; </div>
<div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="structllvm_1_1WinEHTryBlockMapEntry.html">WinEHTryBlockMapEntry</a> &amp;TBME : EHInfo.<a class="code" href="structllvm_1_1WinEHFuncInfo.html#a704147adbd0b4b79d33d444f76e8617c">TryBlockMap</a>) {</div>
<div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="structllvm_1_1WinEHHandlerType.html">WinEHHandlerType</a> &amp;<a class="code" href="MD5_8cpp.html#ae42219072d798876e6b08e6b78614ff6">H</a> : TBME.<a class="code" href="structllvm_1_1WinEHTryBlockMapEntry.html#a203f60eaca27055d5b7395fca270037e">HandlerArray</a>) {</div>
<div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a4b437632fd9b97dd36010d85eb363efe">FrameIndex</a> = <a class="code" href="MD5_8cpp.html#ae42219072d798876e6b08e6b78614ff6">H</a>.CatchObj.FrameIndex;</div>
<div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a4b437632fd9b97dd36010d85eb363efe">FrameIndex</a> != INT_MAX) {</div>
<div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;        <span class="comment">// Ensure alignment.</span></div>
<div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;        <span class="keywordtype">unsigned</span> <a class="code" href="structllvm_1_1Align.html">Align</a> = MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a8320a54de0a273478de910ac3795058b">getObjectAlign</a>(<a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a4b437632fd9b97dd36010d85eb363efe">FrameIndex</a>).<a class="code" href="structllvm_1_1Align.html#a80735739b49cf97a491922c8f9af2cc1">value</a>();</div>
<div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;        MinFixedObjOffset -= <a class="code" href="namespacellvm.html#a2816e84a08c108d18bc4665bc1817e01">std::abs</a>(MinFixedObjOffset) % <a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>;</div>
<div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;        MinFixedObjOffset -= MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a9284fd53296d2a2f8ae654d000971000">getObjectSize</a>(<a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a4b437632fd9b97dd36010d85eb363efe">FrameIndex</a>);</div>
<div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;        MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a3cd29e7edbcaceb5834eaa7d089a5bc4">setObjectOffset</a>(<a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a4b437632fd9b97dd36010d85eb363efe">FrameIndex</a>, MinFixedObjOffset);</div>
<div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;      }</div>
<div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;    }</div>
<div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;  }</div>
<div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160; </div>
<div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;  <span class="comment">// Ensure alignment.</span></div>
<div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;  MinFixedObjOffset -= <a class="code" href="namespacellvm.html#a2816e84a08c108d18bc4665bc1817e01">std::abs</a>(MinFixedObjOffset) % 8;</div>
<div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;  int64_t UnwindHelpOffset = MinFixedObjOffset - <a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>;</div>
<div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;  <span class="keywordtype">int</span> UnwindHelpFI =</div>
<div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;      MFI.<a class="code" href="classllvm_1_1MachineFrameInfo.html#a03cf34252938b54f7e86c736f9fd7dc1">CreateFixedObject</a>(<a class="code" href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">SlotSize</a>, UnwindHelpOffset, <span class="comment">/*IsImmutable=*/</span><span class="keyword">false</span>);</div>
<div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;  EHInfo.<a class="code" href="structllvm_1_1WinEHFuncInfo.html#a297243a501424b3f88e1295034db122d">UnwindHelpFrameIdx</a> = UnwindHelpFI;</div>
<div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160; </div>
<div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;  <span class="comment">// Store -2 into UnwindHelp on function entry. We have to scan forwards past</span></div>
<div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;  <span class="comment">// other frame setup instructions.</span></div>
<div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ab1063ce5e180c89490fae50511a46a29">front</a>();</div>
<div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;  <span class="keyword">auto</span> <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>();</div>
<div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a> != <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>() &amp;&amp; <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>-&gt;getFlag(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">MachineInstr::FrameSetup</a>))</div>
<div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;    ++<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>;</div>
<div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160; </div>
<div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab622d694b5fcb0edb99159f1ebdcdb6b">findDebugLoc</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>);</div>
<div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;  <a class="code" href="namespacellvm.html#ad73248c76f67b663abacff7aff17fd2c">addFrameReference</a>(<a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">TII</a>.get(X86::MOV64mi32)),</div>
<div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;                    UnwindHelpFI)</div>
<div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(-2);</div>
<div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;}</div>
<div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160; </div>
<div class="line"><a name="l03863"></a><span class="lineno"><a class="line" href="classllvm_1_1X86FrameLowering.html#af7d9e67f21b6a4968a6074b082944dc6"> 3863</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1X86FrameLowering.html#af7d9e67f21b6a4968a6074b082944dc6">X86FrameLowering::processFunctionBeforeFrameIndicesReplaced</a>(</div>
<div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;    <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, <a class="code" href="classllvm_1_1RegScavenger.html">RegScavenger</a> *RS)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">STI</a>.is32Bit() &amp;&amp; MF.<a class="code" href="classllvm_1_1MachineFunction.html#ad40522ac860df72189255e38782acc3f">hasEHFunclets</a>())</div>
<div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;    <a class="code" href="classllvm_1_1X86FrameLowering.html#afc0900cd962cd955b2b6de25731710f5">restoreWinEHStackPointersInParent</a>(MF);</div>
<div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;}</div>
<div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160; </div>
<div class="line"><a name="l03869"></a><span class="lineno"><a class="line" href="classllvm_1_1X86FrameLowering.html#afc0900cd962cd955b2b6de25731710f5"> 3869</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1X86FrameLowering.html#afc0900cd962cd955b2b6de25731710f5">X86FrameLowering::restoreWinEHStackPointersInParent</a>(</div>
<div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;    <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;  <span class="comment">// 32-bit functions have to restore stack pointers when control is transferred</span></div>
<div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;  <span class="comment">// back to the parent function. These blocks are identified as eh pads that</span></div>
<div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;  <span class="comment">// are not funclet entries.</span></div>
<div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;  <span class="keywordtype">bool</span> IsSEH = <a class="code" href="namespacellvm.html#ab9c9fb92464f96c0e0f326d624e82eab">isAsynchronousEHPersonality</a>(</div>
<div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;      <a class="code" href="namespacellvm.html#a8d508f23e2580095561902c39911fb9b">classifyEHPersonality</a>(MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#a6f77e4e800ba4dffd63e8ddb330062aa">getPersonalityFn</a>()));</div>
<div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> : MF) {</div>
<div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;    <span class="keywordtype">bool</span> NeedsRestore = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a1100bfbadd996d464150c6a68fa8dc1d">isEHPad</a>() &amp;&amp; !<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a7d2f8efd82042b4cf611ba10e9e79ed0">isEHFuncletEntry</a>();</div>
<div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;    <span class="keywordflow">if</span> (NeedsRestore)</div>
<div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;      <a class="code" href="classllvm_1_1X86FrameLowering.html#a535388ac574e0f8d844662d315997b3d">restoreWin32EHStackPointers</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>(), <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a>(),</div>
<div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;                                  <span class="comment">/*RestoreSP=*/</span>IsSEH);</div>
<div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;  }</div>
<div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a4a8d56726b9e91d336422a546d126a0f"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a4a8d56726b9e91d336422a546d126a0f">llvm::MachineFunction::hasWinCFI</a></div><div class="ttdeci">bool hasWinCFI() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00754">MachineFunction.h:754</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5d56157a385f8cd7d3e54ed87da1ba6aab34bedfd8d86f0adbefe4ae0e708f428"><div class="ttname"><a href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aab34bedfd8d86f0adbefe4ae0e708f428">llvm::EHPersonality::MSVC_CXX</a></div><div class="ttdeci">@ MSVC_CXX</div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00029">README.txt:29</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RegState_html_aef4cc0c855dc833e2a9d58a50703320dab502f975742e9bff6d6dd7b49439b806"><div class="ttname"><a href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320dab502f975742e9bff6d6dd7b49439b806">llvm::RegState::Undef</a></div><div class="ttdeci">@ Undef</div><div class="ttdoc">Value of the register doesn't matter.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00052">MachineInstrBuilder.h:52</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab102f0f12dd38aeea5906b1d80c792ff"><div class="ttname"><a href="namespacellvm.html#ab102f0f12dd38aeea5906b1d80c792ff">llvm::alignTo</a></div><div class="ttdeci">uint64_t alignTo(uint64_t Size, Align A)</div><div class="ttdoc">Returns a multiple of A needed to store Size bytes.</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00155">Alignment.h:155</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_a6696e7a9f36d7983d3593e5f4a17831f"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#a6696e7a9f36d7983d3593e5f4a17831f">llvm::X86FrameLowering::hasReservedCallFrame</a></div><div class="ttdeci">bool hasReservedCallFrame(const MachineFunction &amp;MF) const override</div><div class="ttdoc">hasReservedCallFrame - Under normal circumstances, when a frame pointer is not required,...</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l00061">X86FrameLowering.cpp:61</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab9c9fb92464f96c0e0f326d624e82eab"><div class="ttname"><a href="namespacellvm.html#ab9c9fb92464f96c0e0f326d624e82eab">llvm::isAsynchronousEHPersonality</a></div><div class="ttdeci">bool isAsynchronousEHPersonality(EHPersonality Pers)</div><div class="ttdoc">Returns true if this personality function catches asynchronous exceptions.</div><div class="ttdef"><b>Definition:</b> <a href="EHPersonalities_8h_source.html#l00049">EHPersonalities.h:49</a></div></div>
<div class="ttc" id="aX86FrameLowering_8cpp_html_a4f415404e45ee7add2769627e39c2b53"><div class="ttname"><a href="X86FrameLowering_8cpp.html#a4f415404e45ee7add2769627e39c2b53">getADDriOpcode</a></div><div class="ttdeci">static unsigned getADDriOpcode(bool IsLP64, int64_t Imm)</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l00119">X86FrameLowering.cpp:119</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_aae24f16623a7d1df7b850c55694e9d27"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#aae24f16623a7d1df7b850c55694e9d27">llvm::X86FrameLowering::canUseAsEpilogue</a></div><div class="ttdeci">bool canUseAsEpilogue(const MachineBasicBlock &amp;MBB) const override</div><div class="ttdoc">Check whether or not the given MBB can be used as a epilogue for the target.</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l03528">X86FrameLowering.cpp:3528</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_a0509430713d587eba74220a8375948a8"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a0509430713d587eba74220a8375948a8">llvm::MachineFrameInfo::hasVarSizedObjects</a></div><div class="ttdeci">bool hasVarSizedObjects() const</div><div class="ttdoc">This method may be called any time after instruction selection is complete to determine if the stack ...</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00355">MachineFrameInfo.h:355</a></div></div>
<div class="ttc" id="aclassllvm_1_1Argument_html"><div class="ttname"><a href="classllvm_1_1Argument.html">llvm::Argument</a></div><div class="ttdoc">This class represents an incoming formal argument to a Function.</div><div class="ttdef"><b>Definition:</b> <a href="Argument_8h_source.html#l00028">Argument.h:28</a></div></div>
<div class="ttc" id="anamespacellvm_1_1dwarf_html_a31ace7f9af1edbbe842e91b9edb4a2a1"><div class="ttname"><a href="namespacellvm_1_1dwarf.html#a31ace7f9af1edbbe842e91b9edb4a2a1">llvm::dwarf::CallingConvention</a></div><div class="ttdeci">CallingConvention</div><div class="ttdef"><b>Definition:</b> <a href="Dwarf_8h_source.html#l00413">Dwarf.h:413</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCContext_html_a3a4f79e9c6f9e277f0299783010a67dc"><div class="ttname"><a href="classllvm_1_1MCContext.html#a3a4f79e9c6f9e277f0299783010a67dc">llvm::MCContext::getObjectFileInfo</a></div><div class="ttdeci">const MCObjectFileInfo * getObjectFileInfo() const</div><div class="ttdef"><b>Definition:</b> <a href="MCContext_8h_source.html#l00450">MCContext.h:450</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVAttrs_html_aa0758ad4201d85aef168792c57ef6379"><div class="ttname"><a href="namespacellvm_1_1RISCVAttrs.html#aa0758ad4201d85aef168792c57ef6379">llvm::RISCVAttrs::StackAlign</a></div><div class="ttdeci">StackAlign</div><div class="ttdef"><b>Definition:</b> <a href="RISCVAttributes_8h_source.html#l00037">RISCVAttributes.h:37</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a9d3ba236d13373cde794da2023acc7a0"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9d3ba236d13373cde794da2023acc7a0">Attrs</a></div><div class="ttdeci">Function Attrs</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00215">README_ALTIVEC.txt:215</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_a1b652b91e12384b9f49bb38521b78ffe"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#a1b652b91e12384b9f49bb38521b78ffe">llvm::X86FrameLowering::TRI</a></div><div class="ttdeci">const X86RegisterInfo * TRI</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8h_source.html#l00036">X86FrameLowering.h:36</a></div></div>
<div class="ttc" id="anamespacellvm_html_a25f1d7ccf87af8d87fcb950f7ed758b5"><div class="ttname"><a href="namespacellvm.html#a25f1d7ccf87af8d87fcb950f7ed758b5">llvm::isAligned</a></div><div class="ttdeci">bool isAligned(Align Lhs, uint64_t SizeInBytes)</div><div class="ttdoc">Checks that SizeInBytes is a multiple of the alignment.</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00145">Alignment.h:145</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86MachineFunctionInfo_html_a2e51353f9cba613d53a5c85b94f224b1"><div class="ttname"><a href="classllvm_1_1X86MachineFunctionInfo.html#a2e51353f9cba613d53a5c85b94f224b1">llvm::X86MachineFunctionInfo::getArgumentStackSize</a></div><div class="ttdeci">unsigned getArgumentStackSize() const</div><div class="ttdef"><b>Definition:</b> <a href="X86MachineFunctionInfo_8h_source.html#l00191">X86MachineFunctionInfo.h:191</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_ad26a74fb0ad868f0867cce317269d721"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#ad26a74fb0ad868f0867cce317269d721">llvm::MachineInstr::getDebugInstrNum</a></div><div class="ttdeci">unsigned getDebugInstrNum()</div><div class="ttdoc">Fetch the instruction number of this MachineInstr.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8cpp_source.html#l02370">MachineInstr.cpp:2370</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_afd992a2165073c9cea53128d5b6c4145"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#afd992a2165073c9cea53128d5b6c4145">llvm::X86FrameLowering::adjustForHiPEPrologue</a></div><div class="ttdeci">void adjustForHiPEPrologue(MachineFunction &amp;MF, MachineBasicBlock &amp;PrologueMBB) const override</div><div class="ttdoc">Erlang programs may need a special prologue to handle the stack size they might need at runtime.</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l03193">X86FrameLowering.cpp:3193</a></div></div>
<div class="ttc" id="aIRTranslator_8cpp_html_abe44dfdea65b4f7e11e0a608ab708b76"><div class="ttname"><a href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a></div><div class="ttdeci">IRTranslator LLVM IR MI</div><div class="ttdef"><b>Definition:</b> <a href="IRTranslator_8cpp_source.html#l00109">IRTranslator.cpp:109</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_a4f1ceb770fe3446bfb2b3fa26858098f"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">llvm::MachineInstrBuilder::addImm</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addImm(int64_t Val) const</div><div class="ttdoc">Add a new immediate operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00131">MachineInstrBuilder.h:131</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aX86FrameLowering_8cpp_html_a045c9bd8c547ec3f14eba7aedf55a044"><div class="ttname"><a href="X86FrameLowering_8cpp.html#a045c9bd8c547ec3f14eba7aedf55a044">calculateSetFPREG</a></div><div class="ttdeci">static unsigned calculateSetFPREG(uint64_t SPAdjust)</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l01191">X86FrameLowering.cpp:1191</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_afc942a637e5d48a94d4033498b7479dd"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#afc942a637e5d48a94d4033498b7479dd">llvm::X86FrameLowering::spillCalleeSavedRegisters</a></div><div class="ttdeci">bool spillCalleeSavedRegisters(MachineBasicBlock &amp;MBB, MachineBasicBlock::iterator MI, ArrayRef&lt; CalleeSavedInfo &gt; CSI, const TargetRegisterInfo *TRI) const override</div><div class="ttdoc">spillCalleeSavedRegisters - Issues instruction(s) to spill all callee saved registers and returns tru...</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l02686">X86FrameLowering.cpp:2686</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64CC_html_abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf"><div class="ttname"><a href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">llvm::AArch64CC::AL</a></div><div class="ttdeci">@ AL</div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00269">AArch64BaseInfo.h:269</a></div></div>
<div class="ttc" id="aREADME-SSE_8txt_html_abb4ce3bc3096a12d4b93460bf78bcf95"><div class="ttname"><a href="README-SSE_8txt.html#abb4ce3bc3096a12d4b93460bf78bcf95">it</a></div><div class="ttdeci">into xmm2 addss xmm2 xmm1 xmm3 addss xmm3 movaps xmm0 unpcklps xmm0 ret seems silly when it could just be one addps Expand libm rounding functions main should enable SSE DAZ mode and other fast SSE modes Think about doing i64 math in SSE regs on x86 This testcase should have no SSE instructions in it</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00081">README-SSE.txt:81</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad1a91b49e0c092818a0b82f6cc130a1b"><div class="ttname"><a href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">llvm::make_range</a></div><div class="ttdeci">iterator_range&lt; T &gt; make_range(T x, T y)</div><div class="ttdoc">Convenience function for iterating over sub-ranges.</div><div class="ttdef"><b>Definition:</b> <a href="iterator__range_8h_source.html#l00053">iterator_range.h:53</a></div></div>
<div class="ttc" id="aclassllvm_1_1NamedMDNode_html"><div class="ttname"><a href="classllvm_1_1NamedMDNode.html">llvm::NamedMDNode</a></div><div class="ttdoc">A tuple of MDNodes.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l01587">Metadata.h:1587</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a5fc7747b752105f022c214bd2403eeee"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a5fc7747b752105f022c214bd2403eeee">llvm::MachineBasicBlock::isLiveIn</a></div><div class="ttdeci">bool isLiveIn(MCPhysReg Reg, LaneBitmask LaneMask=LaneBitmask::getAll()) const</div><div class="ttdoc">Return true if the specified register is in the live in set.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00601">MachineBasicBlock.cpp:601</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86MachineFunctionInfo_html_aad8e7e85710893cb7fa03109a108a070"><div class="ttname"><a href="classllvm_1_1X86MachineFunctionInfo.html#aad8e7e85710893cb7fa03109a108a070">llvm::X86MachineFunctionInfo::getRestoreBasePointer</a></div><div class="ttdeci">bool getRestoreBasePointer() const</div><div class="ttdef"><b>Definition:</b> <a href="X86MachineFunctionInfo_8h_source.html#l00150">X86MachineFunctionInfo.h:150</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetFrameLowering_html"><div class="ttname"><a href="classllvm_1_1TargetFrameLowering.html">llvm::TargetFrameLowering</a></div><div class="ttdoc">Information about stack frame layout on the target.</div><div class="ttdef"><b>Definition:</b> <a href="TargetFrameLowering_8h_source.html#l00043">TargetFrameLowering.h:43</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a856266240556bbae90bc5ba75c156eef"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a856266240556bbae90bc5ba75c156eef">llvm::MachineBasicBlock::getBasicBlock</a></div><div class="ttdeci">const BasicBlock * getBasicBlock() const</div><div class="ttdoc">Return the LLVM basic block that this instance corresponded to originally.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00213">MachineBasicBlock.h:213</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_a5c77792a06583e0fe7a0379ad94a2809"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a5c77792a06583e0fe7a0379ad94a2809">llvm::MachineRegisterInfo::createVirtualRegister</a></div><div class="ttdeci">Register createVirtualRegister(const TargetRegisterClass *RegClass, StringRef Name=&quot;&quot;)</div><div class="ttdoc">createVirtualRegister - Create and return a new virtual register in the function with the specified r...</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00157">MachineRegisterInfo.cpp:157</a></div></div>
<div class="ttc" id="aclassllvm_1_1NamedMDNode_html_acde8007e0e69969423e2de52343b702f"><div class="ttname"><a href="classllvm_1_1NamedMDNode.html#acde8007e0e69969423e2de52343b702f">llvm::NamedMDNode::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l01211">Metadata.cpp:1211</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineModuleInfo_html_af0c649dd3863684f18821123651f924c"><div class="ttname"><a href="classllvm_1_1MachineModuleInfo.html#af0c649dd3863684f18821123651f924c">llvm::MachineModuleInfo::getContext</a></div><div class="ttdeci">const MCContext &amp; getContext() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineModuleInfo_8h_source.html#l00139">MachineModuleInfo.h:139</a></div></div>
<div class="ttc" id="aAMDGPURewriteUndefForPHI_8cpp_html_a2e83cb1bc3f5e8986cbd14575755a134"><div class="ttname"><a href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a></div><div class="ttdeci">Rewrite undef for PHI</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPURewriteUndefForPHI_8cpp_source.html#l00101">AMDGPURewriteUndefForPHI.cpp:101</a></div></div>
<div class="ttc" id="aX86Subtarget_8h_html"><div class="ttname"><a href="X86Subtarget_8h.html">X86Subtarget.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_ac8718f1c761727d429180f0ce340f7f0"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ac8718f1c761727d429180f0ce340f7f0">llvm::MachineOperand::getGlobal</a></div><div class="ttdeci">const GlobalValue * getGlobal() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00582">MachineOperand.h:582</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html">llvm::MachineRegisterInfo</a></div><div class="ttdoc">MachineRegisterInfo - Keep track of information for virtual and physical registers,...</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00051">MachineRegisterInfo.h:51</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00059">Function.h:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86Subtarget_html_affa7c48be5800f58054ccdf5a97f334e"><div class="ttname"><a href="classllvm_1_1X86Subtarget.html#affa7c48be5800f58054ccdf5a97f334e">llvm::X86Subtarget::isTargetLinux</a></div><div class="ttdeci">bool isTargetLinux() const</div><div class="ttdef"><b>Definition:</b> <a href="X86Subtarget_8h_source.html#l00290">X86Subtarget.h:290</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCContext_html_a4c59f0784e520b79b9965b489ab21ceb"><div class="ttname"><a href="classllvm_1_1MCContext.html#a4c59f0784e520b79b9965b489ab21ceb">llvm::MCContext::getRegisterInfo</a></div><div class="ttdeci">const MCRegisterInfo * getRegisterInfo() const</div><div class="ttdef"><b>Definition:</b> <a href="MCContext_8h_source.html#l00448">MCContext.h:448</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_a27de32522776b0243eaa10ae9e0c27d4"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#a27de32522776b0243eaa10ae9e0c27d4">llvm::X86FrameLowering::hasFP</a></div><div class="ttdeci">bool hasFP(const MachineFunction &amp;MF) const override</div><div class="ttdoc">hasFP - Return true if the specified function should have a dedicated frame pointer register.</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l00095">X86FrameLowering.cpp:95</a></div></div>
<div class="ttc" id="aclassllvm_1_1BitVector_html_a1964207fae81f04966b2a9dcfc21cf7b"><div class="ttname"><a href="classllvm_1_1BitVector.html#a1964207fae81f04966b2a9dcfc21cf7b">llvm::BitVector::set</a></div><div class="ttdeci">BitVector &amp; set()</div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00344">BitVector.h:344</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86Subtarget_html_a77c5541c3a77bc35d9c6a49ab7faf97d"><div class="ttname"><a href="classllvm_1_1X86Subtarget.html#a77c5541c3a77bc35d9c6a49ab7faf97d">llvm::X86Subtarget::getInstrInfo</a></div><div class="ttdeci">const X86InstrInfo * getInstrInfo() const override</div><div class="ttdef"><b>Definition:</b> <a href="X86Subtarget_8h_source.html#l00128">X86Subtarget.h:128</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86MachineFunctionInfo_html_aa92686e5bcf4b22006a54652f92254df"><div class="ttname"><a href="classllvm_1_1X86MachineFunctionInfo.html#aa92686e5bcf4b22006a54652f92254df">llvm::X86MachineFunctionInfo::hasSwiftAsyncContext</a></div><div class="ttdeci">bool hasSwiftAsyncContext() const</div><div class="ttdef"><b>Definition:</b> <a href="X86MachineFunctionInfo_8h_source.html#l00219">X86MachineFunctionInfo.h:219</a></div></div>
<div class="ttc" id="aX86Disassembler_8cpp_html_a652270ec0bdb03b5a7f934524412aa7f"><div class="ttname"><a href="X86Disassembler_8cpp.html#a652270ec0bdb03b5a7f934524412aa7f">is64Bit</a></div><div class="ttdeci">static bool is64Bit(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="X86Disassembler_8cpp_source.html#l01015">X86Disassembler.cpp:1015</a></div></div>
<div class="ttc" id="aX86InstrBuilder_8h_html"><div class="ttname"><a href="X86InstrBuilder_8h.html">X86InstrBuilder.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_ad51b0d1c80a9dbf0eea9162e2e3ec0dd"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#ad51b0d1c80a9dbf0eea9162e2e3ec0dd">llvm::MachineInstrBuilder::addCFIIndex</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addCFIIndex(unsigned CFIIndex) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00247">MachineInstrBuilder.h:247</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_ac901643b9a98a52b1c323b79f28b8dcc"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#ac901643b9a98a52b1c323b79f28b8dcc">llvm::MachineFrameInfo::hasCopyImplyingStackAdjustment</a></div><div class="ttdeci">bool hasCopyImplyingStackAdjustment() const</div><div class="ttdoc">Returns true if the function contains operations which will lower down to instructions which manipula...</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00622">MachineFrameInfo.h:622</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a7d2f8efd82042b4cf611ba10e9e79ed0"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a7d2f8efd82042b4cf611ba10e9e79ed0">llvm::MachineBasicBlock::isEHFuncletEntry</a></div><div class="ttdeci">bool isEHFuncletEntry() const</div><div class="ttdoc">Returns true if this is the entry block of an EH funclet.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00606">MachineBasicBlock.h:606</a></div></div>
<div class="ttc" id="aAArch64AdvSIMDScalarPass_8cpp_html_a1112b818386ec01ddfdf3a5d0024eb17"><div class="ttname"><a href="AArch64AdvSIMDScalarPass_8cpp.html#a1112b818386ec01ddfdf3a5d0024eb17">contains</a></div><div class="ttdeci">return AArch64::GPR64RegClass contains(Reg)</div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_a5ed62fb6fd245cb4efd8ea1bb4d56856"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a5ed62fb6fd245cb4efd8ea1bb4d56856">llvm::MachineFrameInfo::setCVBytesOfCalleeSavedRegisters</a></div><div class="ttdeci">void setCVBytesOfCalleeSavedRegisters(unsigned S)</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00671">MachineFrameInfo.h:671</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_a6c1f3151b66ea2dfd6a8b9cef815d51c"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#a6c1f3151b66ea2dfd6a8b9cef815d51c">llvm::X86FrameLowering::emitCalleeSavedFrameMoves</a></div><div class="ttdeci">void emitCalleeSavedFrameMoves(MachineBasicBlock &amp;MBB, MachineBasicBlock::iterator MBBI, const DebugLoc &amp;DL, bool IsPrologue) const</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l00472">X86FrameLowering.cpp:472</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html_ad0f54a163ac500b144590640c6f1eb6b"><div class="ttname"><a href="classllvm_1_1StringRef.html#ad0f54a163ac500b144590640c6f1eb6b">llvm::StringRef::npos</a></div><div class="ttdeci">static constexpr size_t npos</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00052">StringRef.h:52</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86InstrInfo_html_a4d98443fd30b525106fef2ec68109579"><div class="ttname"><a href="classllvm_1_1X86InstrInfo.html#a4d98443fd30b525106fef2ec68109579">llvm::X86InstrInfo::isStoreToStackSlot</a></div><div class="ttdeci">unsigned isStoreToStackSlot(const MachineInstr &amp;MI, int &amp;FrameIndex) const override</div><div class="ttdef"><b>Definition:</b> <a href="X86InstrInfo_8cpp_source.html#l00693">X86InstrInfo.cpp:693</a></div></div>
<div class="ttc" id="aStatistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a5b166ae228ebbfdb96736d6022f3feedabc8e2ee40a84687a9e12fd08784b87ba"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feedabc8e2ee40a84687a9e12fd08784b87ba">llvm::CallingConv::Fast</a></div><div class="ttdeci">@ Fast</div><div class="ttdoc">Attempts to make calls as fast as possible (e.g.</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00041">CallingConv.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html_a7133d921c103967178f1388c8f273da3"><div class="ttname"><a href="classllvm_1_1Module.html#a7133d921c103967178f1388c8f273da3">llvm::Module::getCodeViewFlag</a></div><div class="ttdeci">unsigned getCodeViewFlag() const</div><div class="ttdoc">Returns the CodeView Version by checking module flags.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8cpp_source.html#l00568">Module.cpp:568</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86MachineFunctionInfo_html_af3682a96148f7c1e534dfa7c2726ccec"><div class="ttname"><a href="classllvm_1_1X86MachineFunctionInfo.html#af3682a96148f7c1e534dfa7c2726ccec">llvm::X86MachineFunctionInfo::setCalleeSavedFrameSize</a></div><div class="ttdeci">void setCalleeSavedFrameSize(unsigned bytes)</div><div class="ttdef"><b>Definition:</b> <a href="X86MachineFunctionInfo_8h_source.html#l00159">X86MachineFunctionInfo.h:159</a></div></div>
<div class="ttc" id="anamespacellvm_1_1N86_html_a004aaa5711c58178d0371ab88bf1bd63a667b758702693d9dfb46e55025fc559d"><div class="ttname"><a href="namespacellvm_1_1N86.html#a004aaa5711c58178d0371ab88bf1bd63a667b758702693d9dfb46e55025fc559d">llvm::N86::ECX</a></div><div class="ttdeci">@ ECX</div><div class="ttdef"><b>Definition:</b> <a href="X86MCTargetDesc_8h_source.html#l00051">X86MCTargetDesc.h:51</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a0d496cc15e312863869a384532968143"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a0d496cc15e312863869a384532968143">llvm::MachineFunction::getMachineMemOperand</a></div><div class="ttdeci">MachineMemOperand * getMachineMemOperand(MachinePointerInfo PtrInfo, MachineMemOperand::Flags f, uint64_t s, Align base_alignment, const AAMDNodes &amp;AAInfo=AAMDNodes(), const MDNode *Ranges=nullptr, SyncScope::ID SSID=SyncScope::System, AtomicOrdering Ordering=AtomicOrdering::NotAtomic, AtomicOrdering FailureOrdering=AtomicOrdering::NotAtomic)</div><div class="ttdoc">getMachineMemOperand - Allocate a new MachineMemOperand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8cpp_source.html#l00469">MachineFunction.cpp:469</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86Subtarget_html"><div class="ttname"><a href="classllvm_1_1X86Subtarget.html">llvm::X86Subtarget</a></div><div class="ttdef"><b>Definition:</b> <a href="X86Subtarget_8h_source.html#l00052">X86Subtarget.h:52</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86RegisterInfo_html_a45e0af6fcebf5fd5a4584974e13c6810"><div class="ttname"><a href="classllvm_1_1X86RegisterInfo.html#a45e0af6fcebf5fd5a4584974e13c6810">llvm::X86RegisterInfo::getFrameRegister</a></div><div class="ttdeci">Register getFrameRegister(const MachineFunction &amp;MF) const override</div><div class="ttdef"><b>Definition:</b> <a href="X86RegisterInfo_8cpp_source.html#l00911">X86RegisterInfo.cpp:911</a></div></div>
<div class="ttc" id="anamespacellvm_html_a3f1d4b41dbb79806492f0e48e54e2222"><div class="ttname"><a href="namespacellvm.html#a3f1d4b41dbb79806492f0e48e54e2222">llvm::recomputeLiveIns</a></div><div class="ttdeci">static void recomputeLiveIns(MachineBasicBlock &amp;MBB)</div><div class="ttdoc">Convenience function for recomputing live-in's for MBB.</div><div class="ttdef"><b>Definition:</b> <a href="LivePhysRegs_8h_source.html#l00198">LivePhysRegs.h:198</a></div></div>
<div class="ttc" id="anamespacellvm_1_1X86Disassembler_html_a1e59b79e1d09149912cad9c0ef2809ad"><div class="ttname"><a href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">llvm::X86Disassembler::Reg</a></div><div class="ttdeci">Reg</div><div class="ttdoc">All possible values of the reg field in the ModR/M byte.</div><div class="ttdef"><b>Definition:</b> <a href="X86DisassemblerDecoder_8h_source.html#l00462">X86DisassemblerDecoder.h:462</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86Subtarget_html_a60d014846b23498268005ffec9608bc0"><div class="ttname"><a href="classllvm_1_1X86Subtarget.html#a60d014846b23498268005ffec9608bc0">llvm::X86Subtarget::isTarget64BitILP32</a></div><div class="ttdeci">bool isTarget64BitILP32() const</div><div class="ttdoc">Is this x86_64 with the ILP32 programming model (x32 ABI)?</div><div class="ttdef"><b>Definition:</b> <a href="X86Subtarget_8h_source.html#l00179">X86Subtarget.h:179</a></div></div>
<div class="ttc" id="aclassllvm_1_1BitVector_html_a1aa4357710f3fd6e616e13b5c16dc0d8"><div class="ttname"><a href="classllvm_1_1BitVector.html#a1aa4357710f3fd6e616e13b5c16dc0d8">llvm::BitVector::set_bits</a></div><div class="ttdeci">iterator_range&lt; const_set_bits_iterator &gt; set_bits() const</div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00133">BitVector.h:133</a></div></div>
<div class="ttc" id="aX86FrameLowering_8cpp_html_a833aa9ac03a9d223ea251585baaa5642"><div class="ttname"><a href="X86FrameLowering_8cpp.html#a833aa9ac03a9d223ea251585baaa5642">isEAXLiveIn</a></div><div class="ttdeci">static bool isEAXLiveIn(MachineBasicBlock &amp;MBB)</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l00165">X86FrameLowering.cpp:165</a></div></div>
<div class="ttc" id="astructllvm_1_1WinEHHandlerType_html"><div class="ttname"><a href="structllvm_1_1WinEHHandlerType.html">llvm::WinEHHandlerType</a></div><div class="ttdef"><b>Definition:</b> <a href="WinEHFuncInfo_8h_source.html#l00060">WinEHFuncInfo.h:60</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_acbd4fee4d18fa2066d758dff7168ef36"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#acbd4fee4d18fa2066d758dff7168ef36">llvm::X86FrameLowering::emitCalleeSavedFrameMovesFullCFA</a></div><div class="ttdeci">void emitCalleeSavedFrameMovesFullCFA(MachineBasicBlock &amp;MBB, MachineBasicBlock::iterator MBBI) const override</div><div class="ttdoc">Emits Dwarf Info specifying offsets of callee saved registers and frame pointer.</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l00451">X86FrameLowering.cpp:451</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_a7c6fdca5f3b44d406ff07e43b2f140f6"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#a7c6fdca5f3b44d406ff07e43b2f140f6">llvm::X86FrameLowering::assignCalleeSavedSpillSlots</a></div><div class="ttdeci">bool assignCalleeSavedSpillSlots(MachineFunction &amp;MF, const TargetRegisterInfo *TRI, std::vector&lt; CalleeSavedInfo &gt; &amp;CSI) const override</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l02573">X86FrameLowering.cpp:2573</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a82f5d244972c88ff03ee56d6c090ac70"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a82f5d244972c88ff03ee56d6c090ac70">llvm::MachineBasicBlock::isReturnBlock</a></div><div class="ttdeci">bool isReturnBlock() const</div><div class="ttdoc">Convenience function that returns true if the block ends in a return instruction.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00892">MachineBasicBlock.h:892</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_a7e24606b8fe6124decedb17e5ffa405e"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#a7e24606b8fe6124decedb17e5ffa405e">llvm::X86FrameLowering::enableShrinkWrapping</a></div><div class="ttdeci">bool enableShrinkWrapping(const MachineFunction &amp;MF) const override</div><div class="ttdoc">Returns true if the target will correctly handle shrink wrapping.</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l03554">X86FrameLowering.cpp:3554</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a5b166ae228ebbfdb96736d6022f3feeda20ddc463f96d806f369d56205ea205f5"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feeda20ddc463f96d806f369d56205ea205f5">llvm::CallingConv::HiPE</a></div><div class="ttdeci">@ HiPE</div><div class="ttdoc">Used by the High-Performance Erlang Compiler (HiPE).</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00053">CallingConv.h:53</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_ab622d694b5fcb0edb99159f1ebdcdb6b"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ab622d694b5fcb0edb99159f1ebdcdb6b">llvm::MachineBasicBlock::findDebugLoc</a></div><div class="ttdeci">DebugLoc findDebugLoc(instr_iterator MBBI)</div><div class="ttdoc">Find the next valid DebugLoc starting at MBBI, skipping any DBG_VALUE and DBG_LABEL instructions.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l01397">MachineBasicBlock.cpp:1397</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetRegisterInfo_html"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html">llvm::TargetRegisterInfo</a></div><div class="ttdoc">TargetRegisterInfo base class - We assume that the target defines a static array of TargetRegisterDes...</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00236">TargetRegisterInfo.h:236</a></div></div>
<div class="ttc" id="aX86FrameLowering_8cpp_html_ae47fe718044419c88efa13772780b920"><div class="ttname"><a href="X86FrameLowering_8cpp.html#ae47fe718044419c88efa13772780b920">getSUBrrOpcode</a></div><div class="ttdeci">static unsigned getSUBrrOpcode(bool IsLP64)</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l00131">X86FrameLowering.cpp:131</a></div></div>
<div class="ttc" id="aMCObjectFileInfo_8h_html"><div class="ttname"><a href="MCObjectFileInfo_8h.html">MCObjectFileInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a6a437bb3c4a44ac328344e5f361c7816"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a6a437bb3c4a44ac328344e5f361c7816">llvm::MachineFunction::push_front</a></div><div class="ttdeci">void push_front(MachineBasicBlock *MBB)</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00888">MachineFunction.h:888</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_ac6baa801e4aea800984e760d5460662f"><div class="ttname"><a href="classllvm_1_1Function.html#ac6baa801e4aea800984e760d5460662f">llvm::Function::arg_size</a></div><div class="ttdeci">size_t arg_size() const</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00799">Function.h:799</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86MachineFunctionInfo_html_aaa40c0068f7a88682bc61cd9c56fede4"><div class="ttname"><a href="classllvm_1_1X86MachineFunctionInfo.html#aaa40c0068f7a88682bc61cd9c56fede4">llvm::X86MachineFunctionInfo::setHasSEHFramePtrSave</a></div><div class="ttdeci">void setHasSEHFramePtrSave(bool V)</div><div class="ttdef"><b>Definition:</b> <a href="X86MachineFunctionInfo_8h_source.html#l00198">X86MachineFunctionInfo.h:198</a></div></div>
<div class="ttc" id="astructllvm_1_1WinEHFuncInfo_html_a704147adbd0b4b79d33d444f76e8617c"><div class="ttname"><a href="structllvm_1_1WinEHFuncInfo.html#a704147adbd0b4b79d33d444f76e8617c">llvm::WinEHFuncInfo::TryBlockMap</a></div><div class="ttdeci">SmallVector&lt; WinEHTryBlockMapEntry, 4 &gt; TryBlockMap</div><div class="ttdef"><b>Definition:</b> <a href="WinEHFuncInfo_8h_source.html#l00096">WinEHFuncInfo.h:96</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbability_html_afd00958cba7080048a84cccfcef55d71"><div class="ttname"><a href="classllvm_1_1BranchProbability.html#afd00958cba7080048a84cccfcef55d71">llvm::BranchProbability::getZero</a></div><div class="ttdeci">static BranchProbability getZero()</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbability_8h_source.html#l00049">BranchProbability.h:49</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a98d240595236bf85bf1a5c5ba594bdba"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a98d240595236bf85bf1a5c5ba594bdba">llvm::MachineBasicBlock::liveins</a></div><div class="ttdeci">iterator_range&lt; livein_iterator &gt; liveins() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00453">MachineBasicBlock.h:453</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_ae4d51e9e70d6a7fb366f2a09d10a0945"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#ae4d51e9e70d6a7fb366f2a09d10a0945">llvm::MachineFrameInfo::setStackSize</a></div><div class="ttdeci">void setStackSize(uint64_t Size)</div><div class="ttdoc">Set the size of the stack.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00588">MachineFrameInfo.h:588</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_adee8390bf727c3086a7b864de6c6913e"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#adee8390bf727c3086a7b864de6c6913e">llvm::X86FrameLowering::orderFrameObjects</a></div><div class="ttdeci">void orderFrameObjects(const MachineFunction &amp;MF, SmallVectorImpl&lt; int &gt; &amp;ObjectsToAllocate) const override</div><div class="ttdoc">Order the symbols in the local stack.</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l03714">X86FrameLowering.cpp:3714</a></div></div>
<div class="ttc" id="aX86FrameLowering_8cpp_html_a76608be3df4f82c18347d1680f3b0936"><div class="ttname"><a href="X86FrameLowering_8cpp.html#a76608be3df4f82c18347d1680f3b0936">getANDriOpcode</a></div><div class="ttdeci">static unsigned getANDriOpcode(bool IsLP64, int64_t Imm)</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l00139">X86FrameLowering.cpp:139</a></div></div>
<div class="ttc" id="anamespacellvm_html_afad63f3314b8553ee3c26d020b3ce09e"><div class="ttname"><a href="namespacellvm.html#afad63f3314b8553ee3c26d020b3ce09e">llvm::addRegOffset</a></div><div class="ttdeci">static const MachineInstrBuilder &amp; addRegOffset(const MachineInstrBuilder &amp;MIB, unsigned Reg, bool isKill, int Offset)</div><div class="ttdoc">addRegOffset - This function is used to add a memory reference of the form [Reg + Offset],...</div><div class="ttdef"><b>Definition:</b> <a href="X86InstrBuilder_8h_source.html#l00157">X86InstrBuilder.h:157</a></div></div>
<div class="ttc" id="aEHPersonalities_8h_html"><div class="ttname"><a href="EHPersonalities_8h.html">EHPersonalities.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_af4c0db6d503e0ba3b8e44067023ffbba"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#af4c0db6d503e0ba3b8e44067023ffbba">llvm::MachineFunction::insert</a></div><div class="ttdeci">void insert(iterator MBBI, MachineBasicBlock *MBB)</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00889">MachineFunction.h:889</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_aa5f78769915f0742f77e73e45abab318"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#aa5f78769915f0742f77e73e45abab318">llvm::X86FrameLowering::eliminateCallFramePseudoInstr</a></div><div class="ttdeci">MachineBasicBlock::iterator eliminateCallFramePseudoInstr(MachineFunction &amp;MF, MachineBasicBlock &amp;MBB, MachineBasicBlock::iterator MI) const override</div><div class="ttdoc">This method is called during prolog/epilog code insertion to eliminate call frame setup and destroy p...</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l03402">X86FrameLowering.cpp:3402</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a6799fb8536b173a2078ef97e1f0d16ec"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a6799fb8536b173a2078ef97e1f0d16ec">llvm::MachineFunction::callsUnwindInit</a></div><div class="ttdeci">bool callsUnwindInit() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l01107">MachineFunction.h:1107</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86MachineFunctionInfo_html_a5e8edced8a4733e0f6d5d1f9a31f16a4"><div class="ttname"><a href="classllvm_1_1X86MachineFunctionInfo.html#a5e8edced8a4733e0f6d5d1f9a31f16a4">llvm::X86MachineFunctionInfo::getRestoreBasePointerOffset</a></div><div class="ttdeci">int getRestoreBasePointerOffset() const</div><div class="ttdef"><b>Definition:</b> <a href="X86MachineFunctionInfo_8h_source.html#l00152">X86MachineFunctionInfo.h:152</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab4d4bc901fedd8857f647dcc2c0d71de"><div class="ttname"><a href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">llvm::max</a></div><div class="ttdeci">Expected&lt; ExpressionValue &gt; max(const ExpressionValue &amp;Lhs, const ExpressionValue &amp;Rhs)</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8cpp_source.html#l00337">FileCheck.cpp:337</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_a652c5c131aaf585181fb0ff722781118"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#a652c5c131aaf585181fb0ff722781118">llvm::X86FrameLowering::canUseAsPrologue</a></div><div class="ttdeci">bool canUseAsPrologue(const MachineBasicBlock &amp;MBB) const override</div><div class="ttdoc">Check whether or not the given MBB can be used as a prologue for the target.</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l03511">X86FrameLowering.cpp:3511</a></div></div>
<div class="ttc" id="aX86FrameLowering_8cpp_html_ab29c5668ec7d2b12468b97aa33e5f87b"><div class="ttname"><a href="X86FrameLowering_8cpp.html#ab29c5668ec7d2b12468b97aa33e5f87b">HasNestArgument</a></div><div class="ttdeci">static bool HasNestArgument(const MachineFunction *MF)</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l02857">X86FrameLowering.cpp:2857</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_ac51e2d34abb79b72afef355fac525c76"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#ac51e2d34abb79b72afef355fac525c76">llvm::MachineFrameInfo::getObjectIndexEnd</a></div><div class="ttdeci">int getObjectIndexEnd() const</div><div class="ttdoc">Return one past the maximum frame object index.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00410">MachineFrameInfo.h:410</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a7f0540de8a453a7229e35264e8edd4ac"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a7f0540de8a453a7229e35264e8edd4ac">llvm::MachineBasicBlock::terminators</a></div><div class="ttdeci">iterator_range&lt; iterator &gt; terminators()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00329">MachineBasicBlock.h:329</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86Subtarget_html_a649bfd3c9cf9a6b1d1bab86556e866dd"><div class="ttname"><a href="classllvm_1_1X86Subtarget.html#a649bfd3c9cf9a6b1d1bab86556e866dd">llvm::X86Subtarget::isTargetWin64</a></div><div class="ttdeci">bool isTargetWin64() const</div><div class="ttdef"><b>Definition:</b> <a href="X86Subtarget_8h_source.html#l00324">X86Subtarget.h:324</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86InstrInfo_html_af311c898afbc746344165cebfadeaf48"><div class="ttname"><a href="classllvm_1_1X86InstrInfo.html#af311c898afbc746344165cebfadeaf48">llvm::X86InstrInfo::storeRegToStackSlot</a></div><div class="ttdeci">void storeRegToStackSlot(MachineBasicBlock &amp;MBB, MachineBasicBlock::iterator MI, Register SrcReg, bool isKill, int FrameIndex, const TargetRegisterClass *RC, const TargetRegisterInfo *TRI, Register VReg) const override</div><div class="ttdef"><b>Definition:</b> <a href="X86InstrInfo_8cpp_source.html#l03930">X86InstrInfo.cpp:3930</a></div></div>
<div class="ttc" id="aMachineSink_8cpp_html_a0f36ed1bc17fc1aa97fe291c439a0698"><div class="ttname"><a href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a></div><div class="ttdeci">unsigned const TargetRegisterInfo * TRI</div><div class="ttdef"><b>Definition:</b> <a href="MachineSink_8cpp_source.html#l01628">MachineSink.cpp:1628</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_ac50604920b4866e09017dfff36632593"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#ac50604920b4866e09017dfff36632593">llvm::MachineFrameInfo::getMaxCallFrameSize</a></div><div class="ttdeci">unsigned getMaxCallFrameSize() const</div><div class="ttdoc">Return the maximum size of a call frame that must be allocated for an outgoing function call.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00654">MachineFrameInfo.h:654</a></div></div>
<div class="ttc" id="anamespacellvm_1_1N86_html_a004aaa5711c58178d0371ab88bf1bd63af870f9ec8a932e6d114847c22e7e9121"><div class="ttname"><a href="namespacellvm_1_1N86.html#a004aaa5711c58178d0371ab88bf1bd63af870f9ec8a932e6d114847c22e7e9121">llvm::N86::EDX</a></div><div class="ttdeci">@ EDX</div><div class="ttdef"><b>Definition:</b> <a href="X86MCTargetDesc_8h_source.html#l00051">X86MCTargetDesc.h:51</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_a009e40a8d70eae94c4dc32285c717732"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#a009e40a8d70eae94c4dc32285c717732">llvm::X86FrameLowering::has128ByteRedZone</a></div><div class="ttdeci">bool has128ByteRedZone(const MachineFunction &amp;MF) const</div><div class="ttdoc">Return true if the function has a redzone (accessible bytes past the frame of the top of stack functi...</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l01370">X86FrameLowering.cpp:1370</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00055">MD5.cpp:55</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCCFIInstruction_html_a03e76dd55b65ca0af930c3150413e148"><div class="ttname"><a href="classllvm_1_1MCCFIInstruction.html#a03e76dd55b65ca0af930c3150413e148">llvm::MCCFIInstruction::cfiDefCfaOffset</a></div><div class="ttdeci">static MCCFIInstruction cfiDefCfaOffset(MCSymbol *L, int Offset)</div><div class="ttdoc">.cfi_def_cfa_offset modifies a rule for computing CFA.</div><div class="ttdef"><b>Definition:</b> <a href="MCDwarf_8h_source.html#l00547">MCDwarf.h:547</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa3a1f79eb5e89f41ad5a3d8e9b2a367a"><div class="ttname"><a href="namespacellvm.html#aa3a1f79eb5e89f41ad5a3d8e9b2a367a">llvm::getUndefRegState</a></div><div class="ttdeci">unsigned getUndefRegState(bool B)</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00537">MachineInstrBuilder.h:537</a></div></div>
<div class="ttc" id="aMachineRegisterInfo_8h_html"><div class="ttname"><a href="MachineRegisterInfo_8h.html">MachineRegisterInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4e4e6764dc61dbf0e8f330644880480f">llvm::MachineInstr::FrameDestroy</a></div><div class="ttdeci">@ FrameDestroy</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00086">MachineInstr.h:86</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_ac76c4d72f8d92470ab0936e03f66e67b"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ac76c4d72f8d92470ab0936e03f66e67b">llvm::MachineFunction::getFrameInstructions</a></div><div class="ttdeci">const std::vector&lt; MCCFIInstruction &gt; &amp; getFrameInstructions() const</div><div class="ttdoc">Returns a reference to a list of cfi instructions in the function's prologue.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l01072">MachineFunction.h:1072</a></div></div>
<div class="ttc" id="aX86FrameLowering_8cpp_html_a8485a5e7c82a6e2b65a859701c4a6cb8"><div class="ttname"><a href="X86FrameLowering_8cpp.html#a8485a5e7c82a6e2b65a859701c4a6cb8">isTailCallOpcode</a></div><div class="ttdeci">static bool isTailCallOpcode(unsigned Opc)</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l02162">X86FrameLowering.cpp:2162</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00055">BasicBlock.h:55</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_ad26bff839257f220557ce812b2159c72"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ad26bff839257f220557ce812b2159c72">llvm::MachineBasicBlock::erase</a></div><div class="ttdeci">instr_iterator erase(instr_iterator I)</div><div class="ttdoc">Remove an instruction from the instruction list and delete it.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l01323">MachineBasicBlock.cpp:1323</a></div></div>
<div class="ttc" id="aX86FrameLowering_8cpp_html_a63bd353ca84282a830d803a6bf9e4c5e"><div class="ttname"><a href="X86FrameLowering_8cpp.html#a63bd353ca84282a830d803a6bf9e4c5e">flagsNeedToBePreservedBeforeTheTerminators</a></div><div class="ttdeci">static bool flagsNeedToBePreservedBeforeTheTerminators(const MachineBasicBlock &amp;MBB)</div><div class="ttdoc">Check if the flags need to be preserved before the terminators.</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l00182">X86FrameLowering.cpp:182</a></div></div>
<div class="ttc" id="aX86FrameLowering_8h_html"><div class="ttname"><a href="X86FrameLowering_8h.html">X86FrameLowering.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a78637df2e0b9a5e2109af945b0baaf34a6e7b34fa59e1bd229b207892956dc41c"><div class="ttname"><a href="namespacellvm.html#a78637df2e0b9a5e2109af945b0baaf34a6e7b34fa59e1bd229b207892956dc41c">llvm::SwiftAsyncFramePointerMode::Never</a></div><div class="ttdeci">@ Never</div><div class="ttdoc">Never set the bit.</div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_acb35f7f6a131a64e636d936246ebd37f"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#acb35f7f6a131a64e636d936246ebd37f">llvm::MachineFrameInfo::hasStackObjects</a></div><div class="ttdeci">bool hasStackObjects() const</div><div class="ttdoc">Return true if there are any stack objects in this function.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00350">MachineFrameInfo.h:350</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86MachineFunctionInfo_html_ae14195edab055f9809a0349de0be5cce"><div class="ttname"><a href="classllvm_1_1X86MachineFunctionInfo.html#ae14195edab055f9809a0349de0be5cce">llvm::X86MachineFunctionInfo::getHasPushSequences</a></div><div class="ttdeci">bool getHasPushSequences() const</div><div class="ttdef"><b>Definition:</b> <a href="X86MachineFunctionInfo_8h_source.html#l00147">X86MachineFunctionInfo.h:147</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_afb20caf4eb8695705452f25d78a18a06"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#afb20caf4eb8695705452f25d78a18a06">llvm::X86FrameLowering::getFrameIndexReferencePreferSP</a></div><div class="ttdeci">StackOffset getFrameIndexReferencePreferSP(const MachineFunction &amp;MF, int FI, Register &amp;FrameReg, bool IgnoreSPUpdates) const override</div><div class="ttdoc">Same as getFrameIndexReference, except that the stack pointer (as opposed to the frame pointer) will ...</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l02491">X86FrameLowering.cpp:2491</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86MachineFunctionInfo_html_aa136a47fd323997cfe9d1ac8419ede8f"><div class="ttname"><a href="classllvm_1_1X86MachineFunctionInfo.html#aa136a47fd323997cfe9d1ac8419ede8f">llvm::X86MachineFunctionInfo::hasPreallocatedCall</a></div><div class="ttdeci">bool hasPreallocatedCall() const</div><div class="ttdef"><b>Definition:</b> <a href="X86MachineFunctionInfo_8h_source.html#l00216">X86MachineFunctionInfo.h:216</a></div></div>
<div class="ttc" id="aX86FrameLowering_8cpp_html_a9eeab7cb8d11a73a02d732d54f891239"><div class="ttname"><a href="X86FrameLowering_8cpp.html#a9eeab7cb8d11a73a02d732d54f891239">getADDrrOpcode</a></div><div class="ttdeci">static unsigned getADDrrOpcode(bool IsLP64)</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l00135">X86FrameLowering.cpp:135</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8d508f23e2580095561902c39911fb9b"><div class="ttname"><a href="namespacellvm.html#a8d508f23e2580095561902c39911fb9b">llvm::classifyEHPersonality</a></div><div class="ttdeci">EHPersonality classifyEHPersonality(const Value *Pers)</div><div class="ttdoc">See if the given exception handling personality function is one that we understand.</div><div class="ttdef"><b>Definition:</b> <a href="EHPersonalities_8cpp_source.html#l00022">EHPersonalities.cpp:22</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a935e2a8884592189d8f261634a0b24c5"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a935e2a8884592189d8f261634a0b24c5">llvm::MachineBasicBlock::addSuccessor</a></div><div class="ttdeci">void addSuccessor(MachineBasicBlock *Succ, BranchProbability Prob=BranchProbability::getUnknown())</div><div class="ttdoc">Add Succ as a successor of this MachineBasicBlock.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00772">MachineBasicBlock.cpp:772</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a5b166ae228ebbfdb96736d6022f3feeda765508a953368531a7d69d1279e6cfb1"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feeda765508a953368531a7d69d1279e6cfb1">llvm::CallingConv::X86_INTR</a></div><div class="ttdeci">@ X86_INTR</div><div class="ttdoc">x86 hardware interrupt context.</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00170">CallingConv.h:170</a></div></div>
<div class="ttc" id="aX86FrameLowering_8cpp_html_a48597b35dc2ab842232cc2a5c6047401"><div class="ttname"><a href="X86FrameLowering_8cpp.html#a48597b35dc2ab842232cc2a5c6047401">getLEArOpcode</a></div><div class="ttdeci">static unsigned getLEArOpcode(bool IsLP64)</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l00150">X86FrameLowering.cpp:150</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_afc0900cd962cd955b2b6de25731710f5"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#afc0900cd962cd955b2b6de25731710f5">llvm::X86FrameLowering::restoreWinEHStackPointersInParent</a></div><div class="ttdeci">void restoreWinEHStackPointersInParent(MachineFunction &amp;MF) const</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l03869">X86FrameLowering.cpp:3869</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html"><div class="ttname"><a href="classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">This is the shared class of boolean and integer constants.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00078">Constants.h:78</a></div></div>
<div class="ttc" id="aX86MachineFunctionInfo_8h_html"><div class="ttname"><a href="X86MachineFunctionInfo_8h.html">X86MachineFunctionInfo.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa5e4d7acf58e87826a15b94d37144f2b"><div class="ttname"><a href="namespacellvm.html#aa5e4d7acf58e87826a15b94d37144f2b">llvm::getDefRegState</a></div><div class="ttdeci">unsigned getDefRegState(bool B)</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00525">MachineInstrBuilder.h:525</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0d10fe510ced2849a8074fe81e5d04ce"><div class="ttname"><a href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">llvm::all_of</a></div><div class="ttdeci">bool all_of(R &amp;&amp;range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::all_of which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01735">STLExtras.h:1735</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_ab1063ce5e180c89490fae50511a46a29"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ab1063ce5e180c89490fae50511a46a29">llvm::MachineFunction::front</a></div><div class="ttdeci">const MachineBasicBlock &amp; front() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00882">MachineFunction.h:882</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_ad88384d07e66c382b05f793848660d90"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#ad88384d07e66c382b05f793848660d90">llvm::X86FrameLowering::stackProbeFunctionModifiesSP</a></div><div class="ttdeci">bool stackProbeFunctionModifiesSP() const override</div><div class="ttdoc">Does the stack probe function call return with a modified stack pointer?</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l00597">X86FrameLowering.cpp:597</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_ab4a6ca428289b667dd691a00e9f7e334"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">llvm::MachineFunction::getRegInfo</a></div><div class="ttdeci">MachineRegisterInfo &amp; getRegInfo()</div><div class="ttdoc">getRegInfo - Return information about the registers currently in use.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00682">MachineFunction.h:682</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetInstrInfo_html"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html">llvm::TargetInstrInfo</a></div><div class="ttdoc">TargetInstrInfo - Interface to description of machine instruction set.</div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00098">TargetInstrInfo.h:98</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetFrameLowering_html_a6521d4d5560c03b2e6490883558b882c"><div class="ttname"><a href="classllvm_1_1TargetFrameLowering.html#a6521d4d5560c03b2e6490883558b882c">llvm::TargetFrameLowering::getOffsetOfLocalArea</a></div><div class="ttdeci">int getOffsetOfLocalArea() const</div><div class="ttdoc">getOffsetOfLocalArea - This method returns the offset of the local area from the stack pointer on ent...</div><div class="ttdef"><b>Definition:</b> <a href="TargetFrameLowering_8h_source.html#l00135">TargetFrameLowering.h:135</a></div></div>
<div class="ttc" id="aImplicitNullChecks_8cpp_html_a7c77357cccbb9291259cfcacd7324e2e"><div class="ttname"><a href="ImplicitNullChecks_8cpp.html#a7c77357cccbb9291259cfcacd7324e2e">PageSize</a></div><div class="ttdeci">static cl::opt&lt; int &gt; PageSize(&quot;imp-null-check-page-size&quot;, cl::desc(&quot;The page size of the target in bytes&quot;), cl::init(4096), cl::Hidden)</div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_acd3876e593314b23ed0679279ee31dfe"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#acd3876e593314b23ed0679279ee31dfe">llvm::X86FrameLowering::getWin64EHFrameIndexRef</a></div><div class="ttdeci">int getWin64EHFrameIndexRef(const MachineFunction &amp;MF, int FI, Register &amp;SPReg) const</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l02465">X86FrameLowering.cpp:2465</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_af8571e8dfb010fd8ae76cc4f87aafaac"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#af8571e8dfb010fd8ae76cc4f87aafaac">llvm::MachineInstrBuilder::addMBB</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addMBB(MachineBasicBlock *MBB, unsigned TargetFlags=0) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00146">MachineInstrBuilder.h:146</a></div></div>
<div class="ttc" id="aclassllvm_1_1MutableArrayRef_html"><div class="ttname"><a href="classllvm_1_1MutableArrayRef.html">llvm::MutableArrayRef</a></div><div class="ttdoc">MutableArrayRef - Represent a mutable reference to an array (0 or more elements consecutively in memo...</div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00027">ArrayRef.h:27</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_a0d66887ade3ca46870e0921376f86fd1"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#a0d66887ade3ca46870e0921376f86fd1">llvm::X86FrameLowering::needsFrameIndexResolution</a></div><div class="ttdeci">bool needsFrameIndexResolution(const MachineFunction &amp;MF) const override</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l00087">X86FrameLowering.cpp:87</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86MachineFunctionInfo_html_af98de3669b3b297736be7a9a77b5caf1"><div class="ttname"><a href="classllvm_1_1X86MachineFunctionInfo.html#af98de3669b3b297736be7a9a77b5caf1">llvm::X86MachineFunctionInfo::setSEHFramePtrSaveIndex</a></div><div class="ttdeci">void setSEHFramePtrSaveIndex(int Index)</div><div class="ttdef"><b>Definition:</b> <a href="X86MachineFunctionInfo_8h_source.html#l00201">X86MachineFunctionInfo.h:201</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_a79ebbed1ceecae3f74214e33fc8c533f"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#a79ebbed1ceecae3f74214e33fc8c533f">llvm::X86FrameLowering::getFrameIndexReferenceSP</a></div><div class="ttdeci">StackOffset getFrameIndexReferenceSP(const MachineFunction &amp;MF, int FI, Register &amp;SPReg, int Adjustment) const</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l02481">X86FrameLowering.cpp:2481</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_a1f09e99062be1101e3a2cf3ff88878f7"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a1f09e99062be1101e3a2cf3ff88878f7">llvm::MachineFrameInfo::ensureMaxAlignment</a></div><div class="ttdeci">void ensureMaxAlignment(Align Alignment)</div><div class="ttdoc">Make sure the function is at least Align bytes aligned.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8cpp_source.html#l00031">MachineFrameInfo.cpp:31</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1Triple_html_ab6fdf9b428bc3d57837022121c155cbf"><div class="ttname"><a href="classllvm_1_1Triple.html#ab6fdf9b428bc3d57837022121c155cbf">llvm::Triple::isOSDarwin</a></div><div class="ttdeci">bool isOSDarwin() const</div><div class="ttdoc">Is this a &quot;Darwin&quot; OS (macOS, iOS, tvOS, watchOS, or DriverKit).</div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00518">Triple.h:518</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a38b28a85f818b49d8806c150b8a5b4f7"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a38b28a85f818b49d8806c150b8a5b4f7">llvm::MachineOperand::getImm</a></div><div class="ttdeci">int64_t getImm() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00556">MachineOperand.h:556</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_ac2dc0fa143c9f2127f0501734577a0a0"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">llvm::MachineFunction::getInfo</a></div><div class="ttdeci">Ty * getInfo()</div><div class="ttdoc">getInfo - Keep track of various per-function pieces of information for backends that would like to do...</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00770">MachineFunction.h:770</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86Subtarget_html_af92c188739e9be47b78eca0e1e622f9d"><div class="ttname"><a href="classllvm_1_1X86Subtarget.html#af92c188739e9be47b78eca0e1e622f9d">llvm::X86Subtarget::isTargetWin32</a></div><div class="ttdeci">bool isTargetWin32() const</div><div class="ttdef"><b>Definition:</b> <a href="X86Subtarget_8h_source.html#l00326">X86Subtarget.h:326</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110aec1078d911aabd272954b9125eaee6df"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110aec1078d911aabd272954b9125eaee6df">llvm::ISD::CATCHRET</a></div><div class="ttdeci">@ CATCHRET</div><div class="ttdoc">CATCHRET - Represents a return from a catch block funclet.</div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l01043">ISDOpcodes.h:1043</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetFrameLowering_html_a74d93035f53f5e8c2aaea5a8f307972d"><div class="ttname"><a href="classllvm_1_1TargetFrameLowering.html#a74d93035f53f5e8c2aaea5a8f307972d">llvm::TargetFrameLowering::getStackAlign</a></div><div class="ttdeci">Align getStackAlign() const</div><div class="ttdoc">getStackAlignment - This method returns the number of bytes to which the stack pointer must be aligne...</div><div class="ttdef"><b>Definition:</b> <a href="TargetFrameLowering_8h_source.html#l00100">TargetFrameLowering.h:100</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_a3f7a45f6e10668a5f702e26bca80d18e"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">llvm::MachineInstr::getOperand</a></div><div class="ttdeci">const MachineOperand &amp; getOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00526">MachineInstr.h:526</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_a53ca7cff9e929ba372da9780fdd44b02"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a53ca7cff9e929ba372da9780fdd44b02">llvm::MachineRegisterInfo::isReserved</a></div><div class="ttdeci">bool isReserved(MCRegister PhysReg) const</div><div class="ttdoc">isReserved - Returns true when PhysReg is a reserved register.</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00956">MachineRegisterInfo.h:956</a></div></div>
<div class="ttc" id="aAliasAnalysis_8cpp_html_af930af31a919474bec5b29dd0d0bb8ba"><div class="ttname"><a href="AliasAnalysis_8cpp.html#af930af31a919474bec5b29dd0d0bb8ba">false</a></div><div class="ttdeci">Function Alias Analysis false</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8cpp_source.html#l00769">AliasAnalysis.cpp:769</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86MachineFunctionInfo_html_a7c7a3251bd6c1b0b89e5712c89aaa305"><div class="ttname"><a href="classllvm_1_1X86MachineFunctionInfo.html#a7c7a3251bd6c1b0b89e5712c89aaa305">llvm::X86MachineFunctionInfo::getTCReturnAddrDelta</a></div><div class="ttdeci">int getTCReturnAddrDelta() const</div><div class="ttdef"><b>Definition:</b> <a href="X86MachineFunctionInfo_8h_source.html#l00170">X86MachineFunctionInfo.h:170</a></div></div>
<div class="ttc" id="anamespacellvm_1_1X86II_html_a45cdfdabb3963ec52b198ce5d3aabc84ae39565b585476b7142228e439e80372e"><div class="ttname"><a href="namespacellvm_1_1X86II.html#a45cdfdabb3963ec52b198ce5d3aabc84ae39565b585476b7142228e439e80372e">llvm::X86II::MO_GOTPCREL</a></div><div class="ttdeci">@ MO_GOTPCREL</div><div class="ttdoc">MO_GOTPCREL - On a symbol operand this indicates that the immediate is offset to the GOT entry for th...</div><div class="ttdef"><b>Definition:</b> <a href="X86BaseInfo_8h_source.html#l00442">X86BaseInfo.h:442</a></div></div>
<div class="ttc" id="astructllvm_1_1WinEHFuncInfo_html_a1685e8ca2cc67569dbfdd32ad11cbe70"><div class="ttname"><a href="structllvm_1_1WinEHFuncInfo.html#a1685e8ca2cc67569dbfdd32ad11cbe70">llvm::WinEHFuncInfo::EHRegNodeFrameIndex</a></div><div class="ttdeci">int EHRegNodeFrameIndex</div><div class="ttdef"><b>Definition:</b> <a href="WinEHFuncInfo_8h_source.html#l00107">WinEHFuncInfo.h:107</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetRegisterClass_html"><div class="ttname"><a href="classllvm_1_1TargetRegisterClass.html">llvm::TargetRegisterClass</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00045">TargetRegisterInfo.h:45</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86RegisterInfo_html_ac117c05656fb2c5fb08b1df3a4af2fe8"><div class="ttname"><a href="classllvm_1_1X86RegisterInfo.html#ac117c05656fb2c5fb08b1df3a4af2fe8">llvm::X86RegisterInfo::getFramePtr</a></div><div class="ttdeci">Register getFramePtr() const</div><div class="ttdoc">Returns physical register used as frame pointer.</div><div class="ttdef"><b>Definition:</b> <a href="X86RegisterInfo_8h_source.html#l00156">X86RegisterInfo.h:156</a></div></div>
<div class="ttc" id="aMCSymbol_8h_html"><div class="ttname"><a href="MCSymbol_8h.html">MCSymbol.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86MachineFunctionInfo_html_ad6e59a435273270b3ef84dc8a841c122"><div class="ttname"><a href="classllvm_1_1X86MachineFunctionInfo.html#ad6e59a435273270b3ef84dc8a841c122">llvm::X86MachineFunctionInfo::getCalleeSavedFrameSize</a></div><div class="ttdeci">unsigned getCalleeSavedFrameSize() const</div><div class="ttdef"><b>Definition:</b> <a href="X86MachineFunctionInfo_8h_source.html#l00158">X86MachineFunctionInfo.h:158</a></div></div>
<div class="ttc" id="aclassllvm_1_1MVT_html_a330aea6151cae3adaf5e179dcfe87346abf72e9af12d6032cd765f116d3d72d9a"><div class="ttname"><a href="classllvm_1_1MVT.html#a330aea6151cae3adaf5e179dcfe87346abf72e9af12d6032cd765f116d3d72d9a">llvm::MVT::v64i1</a></div><div class="ttdeci">@ v64i1</div><div class="ttdef"><b>Definition:</b> <a href="MachineValueType_8h_source.html#l00072">MachineValueType.h:72</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_ad7e593e787ba6a94dbd287c32abe4006"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#ad7e593e787ba6a94dbd287c32abe4006">llvm::X86FrameLowering::canUseLEAForSPInEpilogue</a></div><div class="ttdeci">bool canUseLEAForSPInEpilogue(const MachineFunction &amp;MF) const</div><div class="ttdoc">Check that LEA can be used on SP in an epilogue sequence for MF.</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l02085">X86FrameLowering.cpp:2085</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86RegisterInfo_html_ad057cb3300544ebb741b871a45faae7d"><div class="ttname"><a href="classllvm_1_1X86RegisterInfo.html#ad057cb3300544ebb741b871a45faae7d">llvm::X86RegisterInfo::getBaseRegister</a></div><div class="ttdeci">Register getBaseRegister() const</div><div class="ttdef"><b>Definition:</b> <a href="X86RegisterInfo_8h_source.html#l00151">X86RegisterInfo.h:151</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86Subtarget_html_a7fa9b171fb4395bb4ac6eec96c47385d"><div class="ttname"><a href="classllvm_1_1X86Subtarget.html#a7fa9b171fb4395bb4ac6eec96c47385d">llvm::X86Subtarget::isTargetWindowsCoreCLR</a></div><div class="ttdeci">bool isTargetWindowsCoreCLR() const</div><div class="ttdef"><b>Definition:</b> <a href="X86Subtarget_8h_source.html#l00304">X86Subtarget.h:304</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_a9eb08d8f7165ce65d875c2329952262b"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#a9eb08d8f7165ce65d875c2329952262b">llvm::X86FrameLowering::TII</a></div><div class="ttdeci">const X86InstrInfo &amp; TII</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8h_source.html#l00035">X86FrameLowering.h:35</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad73248c76f67b663abacff7aff17fd2c"><div class="ttname"><a href="namespacellvm.html#ad73248c76f67b663abacff7aff17fd2c">llvm::addFrameReference</a></div><div class="ttdeci">static const MachineInstrBuilder &amp; addFrameReference(const MachineInstrBuilder &amp;MIB, int FI, int Offset=0, bool mem=true)</div><div class="ttdoc">addFrameReference - This function is used to add a reference to the base of an abstract object on the...</div><div class="ttdef"><b>Definition:</b> <a href="PPCInstrBuilder_8h_source.html#l00032">PPCInstrBuilder.h:32</a></div></div>
<div class="ttc" id="aclassllvm_1_1MVT_html_a330aea6151cae3adaf5e179dcfe87346a0ebe435f5423945489fecd670405e1a4"><div class="ttname"><a href="classllvm_1_1MVT.html#a330aea6151cae3adaf5e179dcfe87346a0ebe435f5423945489fecd670405e1a4">llvm::MVT::v16i1</a></div><div class="ttdeci">@ v16i1</div><div class="ttdef"><b>Definition:</b> <a href="MachineValueType_8h_source.html#l00070">MachineValueType.h:70</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCObjectFileInfo_html_a0883984191c9773aed756c5d55e52a90"><div class="ttname"><a href="classllvm_1_1MCObjectFileInfo.html#a0883984191c9773aed756c5d55e52a90">llvm::MCObjectFileInfo::getCompactUnwindSection</a></div><div class="ttdeci">MCSection * getCompactUnwindSection() const</div><div class="ttdef"><b>Definition:</b> <a href="MCObjectFileInfo_8h_source.html#l00268">MCObjectFileInfo.h:268</a></div></div>
<div class="ttc" id="anamespacellvm_1_1N86_html_a004aaa5711c58178d0371ab88bf1bd63a303dfe7256beaf60eaaa93d1c418965b"><div class="ttname"><a href="namespacellvm_1_1N86.html#a004aaa5711c58178d0371ab88bf1bd63a303dfe7256beaf60eaaa93d1c418965b">llvm::N86::ESP</a></div><div class="ttdeci">@ ESP</div><div class="ttdef"><b>Definition:</b> <a href="X86MCTargetDesc_8h_source.html#l00051">X86MCTargetDesc.h:51</a></div></div>
<div class="ttc" id="anamespacellvm_html_a27b344a283e0620f484144889fe32064"><div class="ttname"><a href="namespacellvm.html#a27b344a283e0620f484144889fe32064">llvm::getX86SubSuperRegister</a></div><div class="ttdeci">MCRegister getX86SubSuperRegister(MCRegister Reg, unsigned Size, bool High=false)</div><div class="ttdef"><b>Definition:</b> <a href="X86MCTargetDesc_8cpp_source.html#l00745">X86MCTargetDesc.cpp:745</a></div></div>
<div class="ttc" id="aHexagonCopyToCombine_8cpp_html_a1d40004718218dbdf06b496766299101"><div class="ttname"><a href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a></div><div class="ttdeci">const HexagonInstrInfo * TII</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCopyToCombine_8cpp_source.html#l00125">HexagonCopyToCombine.cpp:125</a></div></div>
<div class="ttc" id="anamespacellvm_1_1dwarf_html_a5d3c920b66ea797d6adb243862fdf47a"><div class="ttname"><a href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">llvm::dwarf::Index</a></div><div class="ttdeci">Index</div><div class="ttdef"><b>Definition:</b> <a href="Dwarf_8h_source.html#l00550">Dwarf.h:550</a></div></div>
<div class="ttc" id="astructllvm_1_1MaybeAlign_html"><div class="ttname"><a href="structllvm_1_1MaybeAlign.html">llvm::MaybeAlign</a></div><div class="ttdoc">This struct is a compact representation of a valid (power of two) or undefined (0) alignment.</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00117">Alignment.h:117</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad9be86c95736bfa4bb0dc52322a0002a"><div class="ttname"><a href="namespacellvm.html#ad9be86c95736bfa4bb0dc52322a0002a">llvm::alignDown</a></div><div class="ttdeci">uint64_t alignDown(uint64_t Value, uint64_t Align, uint64_t Skew=0)</div><div class="ttdoc">Returns the largest uint64_t less than or equal to Value and is Skew mod Align.</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00533">MathExtras.h:533</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a7abf5fb4071cb25dbce06dfb5ee3c937"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a></div><div class="ttdeci">static GCRegistry::Add&lt; OcamlGC &gt; B(&quot;ocaml&quot;, &quot;ocaml 3.10-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html"><div class="ttname"><a href="classllvm_1_1MachineOperand.html">llvm::MachineOperand</a></div><div class="ttdoc">MachineOperand class - Representation of each machine instruction operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00048">MachineOperand.h:48</a></div></div>
<div class="ttc" id="anamespacellvm_1_1codeview_html_a0cc2805b6b89a94c5b5983f95367168caf82a9de98dde777f8405bf54ed6fee23"><div class="ttname"><a href="namespacellvm_1_1codeview.html#a0cc2805b6b89a94c5b5983f95367168caf82a9de98dde777f8405bf54ed6fee23">llvm::codeview::ProcSymFlags::HasFP</a></div><div class="ttdeci">@ HasFP</div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a78f1067d270179dff7915b90a03ce237">llvm::MachineInstr::FrameSetup</a></div><div class="ttdeci">@ FrameSetup</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00084">MachineInstr.h:84</a></div></div>
<div class="ttc" id="astructllvm_1_1MachineBasicBlock_1_1RegisterMaskPair_html"><div class="ttname"><a href="structllvm_1_1MachineBasicBlock_1_1RegisterMaskPair.html">llvm::MachineBasicBlock::RegisterMaskPair</a></div><div class="ttdoc">Pair of physical register and lane mask.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00100">MachineBasicBlock.h:100</a></div></div>
<div class="ttc" id="aX86FrameLowering_8cpp_html_a229334f08bdd0c4fa1cce6b0d7eea76c"><div class="ttname"><a href="X86FrameLowering_8cpp.html#a229334f08bdd0c4fa1cce6b0d7eea76c">STATISTIC</a></div><div class="ttdeci">STATISTIC(NumFrameLoopProbe, &quot;Number of loop stack probes used in prologue&quot;)</div></div>
<div class="ttc" id="anamespacellvm_1_1MCID_html_ab357441fcd1ea1f9b0d27c12700f6023"><div class="ttname"><a href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023">llvm::MCID::Flag</a></div><div class="ttdeci">Flag</div><div class="ttdoc">These should be considered private to the implementation of the MCInstrDesc class.</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00148">MCInstrDesc.h:148</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineModuleInfo_html"><div class="ttname"><a href="classllvm_1_1MachineModuleInfo.html">llvm::MachineModuleInfo</a></div><div class="ttdoc">This class contains meta information specific to a module.</div><div class="ttdef"><b>Definition:</b> <a href="MachineModuleInfo_8h_source.html#l00074">MachineModuleInfo.h:74</a></div></div>
<div class="ttc" id="aclassllvm_1_1StackOffset_html_aeb11e994c5580c80bbb0951eb05f9c80"><div class="ttname"><a href="classllvm_1_1StackOffset.html#aeb11e994c5580c80bbb0951eb05f9c80">llvm::StackOffset::getFixed</a></div><div class="ttdeci">static StackOffset getFixed(int64_t Fixed)</div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00045">TypeSize.h:45</a></div></div>
<div class="ttc" id="anamespacellvm_1_1X86_html_a1a356a51a1fb4cc3c427599082cf1d2eade92e2f17ca0acdd1ffa23d01df381df"><div class="ttname"><a href="namespacellvm_1_1X86.html#a1a356a51a1fb4cc3c427599082cf1d2eade92e2f17ca0acdd1ffa23d01df381df">llvm::X86::COND_A</a></div><div class="ttdeci">@ COND_A</div><div class="ttdef"><b>Definition:</b> <a href="X86BaseInfo_8h_source.html#l00088">X86BaseInfo.h:88</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7f2a3d4dcfee70225988aec53ff1e173"><div class="ttname"><a href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">llvm::report_fatal_error</a></div><div class="ttdeci">void report_fatal_error(Error Err, bool gen_crash_diag=true)</div><div class="ttdoc">Report a serious error, calling any installed error handler.</div><div class="ttdef"><b>Definition:</b> <a href="Testing_2Support_2Error_8cpp_source.html#l00145">Error.cpp:145</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_af7d9e67f21b6a4968a6074b082944dc6"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#af7d9e67f21b6a4968a6074b082944dc6">llvm::X86FrameLowering::processFunctionBeforeFrameIndicesReplaced</a></div><div class="ttdeci">void processFunctionBeforeFrameIndicesReplaced(MachineFunction &amp;MF, RegScavenger *RS) const override</div><div class="ttdoc">processFunctionBeforeFrameIndicesReplaced - This method is called immediately before MO_FrameIndex op...</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l03863">X86FrameLowering.cpp:3863</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a6a0f6312963ee6fb0969243607174949"><div class="ttname"><a href="classllvm_1_1Function.html#a6a0f6312963ee6fb0969243607174949">llvm::Function::hasPersonalityFn</a></div><div class="ttdeci">bool hasPersonalityFn() const</div><div class="ttdoc">Check whether this function has a personality function.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00803">Function.h:803</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_ab499fb31e894a900402d0871eee39b75"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ab499fb31e894a900402d0871eee39b75">llvm::MachineFunction::shouldSplitStack</a></div><div class="ttdeci">bool shouldSplitStack() const</div><div class="ttdoc">Should we be emitting segmented stack stuff for the function.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8cpp_source.html#l00312">MachineFunction.cpp:312</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_ab0789854909cf47f640a85fa2bac29c7"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ab0789854909cf47f640a85fa2bac29c7">llvm::MachineFunction::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00870">MachineFunction.h:870</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86TargetLowering_html"><div class="ttname"><a href="classllvm_1_1X86TargetLowering.html">llvm::X86TargetLowering</a></div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8h_source.html#l00967">X86ISelLowering.h:967</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a330afa0baf556056f9c032480dd57347"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a330afa0baf556056f9c032480dd57347">llvm::MachineFunction::setHasWinCFI</a></div><div class="ttdeci">void setHasWinCFI(bool v)</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00757">MachineFunction.h:757</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_a14c39a24bf6ebbe339ae8a453c7fdd11"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a14c39a24bf6ebbe339ae8a453c7fdd11">llvm::MachineFrameInfo::getStackSize</a></div><div class="ttdeci">uint64_t getStackSize() const</div><div class="ttdoc">Return the number of bytes that must be allocated to hold all of the fixed size frame objects.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00585">MachineFrameInfo.h:585</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCCFIInstruction_html_a9d7ee9c6eaabde95dd9695326a77f253"><div class="ttname"><a href="classllvm_1_1MCCFIInstruction.html#a9d7ee9c6eaabde95dd9695326a77f253">llvm::MCCFIInstruction::getOperation</a></div><div class="ttdeci">OpType getOperation() const</div><div class="ttdef"><b>Definition:</b> <a href="MCDwarf_8h_source.html#l00642">MCDwarf.h:642</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_a535388ac574e0f8d844662d315997b3d"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#a535388ac574e0f8d844662d315997b3d">llvm::X86FrameLowering::restoreWin32EHStackPointers</a></div><div class="ttdeci">MachineBasicBlock::iterator restoreWin32EHStackPointers(MachineBasicBlock &amp;MBB, MachineBasicBlock::iterator MBBI, const DebugLoc &amp;DL, bool RestoreSP=false) const</div><div class="ttdoc">Sets up EBP and optionally ESI based on the incoming EBP value.</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l03571">X86FrameLowering.cpp:3571</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_adf98860d7f42290f873c82a981eb0ea6"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#adf98860d7f42290f873c82a981eb0ea6">llvm::MachineFrameInfo::getObjectOffset</a></div><div class="ttdeci">int64_t getObjectOffset(int ObjectIdx) const</div><div class="ttdoc">Return the assigned stack offset of the specified object from the incoming stack pointer.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00526">MachineFrameInfo.h:526</a></div></div>
<div class="ttc" id="aCSEInfo_8cpp_html_a75f8a8519c2c9b30e7c06dc5e256fffa"><div class="ttname"><a href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a></div><div class="ttdeci">Analysis containing CSE Info</div><div class="ttdef"><b>Definition:</b> <a href="CSEInfo_8cpp_source.html#l00027">CSEInfo.cpp:27</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_afe9ba3711c6b7625da1425cc0a7b3f10"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#afe9ba3711c6b7625da1425cc0a7b3f10">llvm::MachineBasicBlock::isCleanupFuncletEntry</a></div><div class="ttdeci">bool isCleanupFuncletEntry() const</div><div class="ttdoc">Returns true if this is the entry block of a cleanup funclet.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00612">MachineBasicBlock.h:612</a></div></div>
<div class="ttc" id="aclassllvm_1_1BitVector_html"><div class="ttname"><a href="classllvm_1_1BitVector.html">llvm::BitVector</a></div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00075">BitVector.h:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_acbbbca8e55fe4daa61ede8c0f7b4dd5c"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#acbbbca8e55fe4daa61ede8c0f7b4dd5c">llvm::MachineFunction::verify</a></div><div class="ttdeci">bool verify(Pass *p=nullptr, const char *Banner=nullptr, bool AbortOnError=true) const</div><div class="ttdoc">Run the current MachineFunction through the machine code verifier, useful for debugger use.</div><div class="ttdef"><b>Definition:</b> <a href="MachineVerifier_8cpp_source.html#l00342">MachineVerifier.cpp:342</a></div></div>
<div class="ttc" id="aELFObjHandler_8cpp_html_a043cdaf7b89aaeeb127be5d93411637f"><div class="ttname"><a href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a></div><div class="ttdeci">uint64_t Align</div><div class="ttdef"><b>Definition:</b> <a href="ELFObjHandler_8cpp_source.html#l00082">ELFObjHandler.cpp:82</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_ae6e7e975f7a4e5d535be32068a7c67df"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#ae6e7e975f7a4e5d535be32068a7c67df">llvm::MachineFrameInfo::isFixedObjectIndex</a></div><div class="ttdeci">bool isFixedObjectIndex(int ObjectIdx) const</div><div class="ttdoc">Returns true if the specified index corresponds to a fixed stack object.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00688">MachineFrameInfo.h:688</a></div></div>
<div class="ttc" id="astructllvm_1_1Align_html"><div class="ttname"><a href="structllvm_1_1Align.html">llvm::Align</a></div><div class="ttdoc">This struct is a compact representation of a valid (non-zero power of two) alignment.</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00039">Alignment.h:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86Subtarget_html_a17f3cb9bc2c5c8be538b3be839bbf02b"><div class="ttname"><a href="classllvm_1_1X86Subtarget.html#a17f3cb9bc2c5c8be538b3be839bbf02b">llvm::X86Subtarget::isOSWindows</a></div><div class="ttdeci">bool isOSWindows() const</div><div class="ttdef"><b>Definition:</b> <a href="X86Subtarget_8h_source.html#l00322">X86Subtarget.h:322</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_ae70474766f2a88bab5b2b77bcb22212b"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#ae70474766f2a88bab5b2b77bcb22212b">llvm::MachineFrameInfo::getObjectIndexBegin</a></div><div class="ttdeci">int getObjectIndexBegin() const</div><div class="ttdoc">Return the minimum frame object index.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00407">MachineFrameInfo.h:407</a></div></div>
<div class="ttc" id="aclassllvm_1_1SlotIndex_html"><div class="ttname"><a href="classllvm_1_1SlotIndex.html">llvm::SlotIndex</a></div><div class="ttdoc">SlotIndex - An opaque wrapper around machine indexes.</div><div class="ttdef"><b>Definition:</b> <a href="SlotIndexes_8h_source.html#l00082">SlotIndexes.h:82</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_ac6672df14319c2e931c3b2c583ea837c"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#ac6672df14319c2e931c3b2c583ea837c">llvm::MachineInstrBuilder::addExternalSymbol</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addExternalSymbol(const char *FnName, unsigned TargetFlags=0) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00184">MachineInstrBuilder.h:184</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_a6a8d1523f211998978b3fa0bfe8818a1"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#a6a8d1523f211998978b3fa0bfe8818a1">llvm::X86FrameLowering::processFunctionBeforeFrameFinalized</a></div><div class="ttdeci">void processFunctionBeforeFrameFinalized(MachineFunction &amp;MF, RegScavenger *RS) const override</div><div class="ttdoc">processFunctionBeforeFrameFinalized - This method is called immediately before the specified function...</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l03798">X86FrameLowering.cpp:3798</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a188c0836f8c3528401f1c236fd93b977"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">llvm::CallingConv::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdoc">LLVM IR allows to use arbitrary numbers as calling convention identifiers.</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00024">CallingConv.h:24</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCCFIInstruction_html"><div class="ttname"><a href="classllvm_1_1MCCFIInstruction.html">llvm::MCCFIInstruction</a></div><div class="ttdef"><b>Definition:</b> <a href="MCDwarf_8h_source.html#l00479">MCDwarf.h:479</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCCFIInstruction_html_a9babd4ee8fb9fc9bb25eeac8274625d1"><div class="ttname"><a href="classllvm_1_1MCCFIInstruction.html#a9babd4ee8fb9fc9bb25eeac8274625d1">llvm::MCCFIInstruction::createDefCfaRegister</a></div><div class="ttdeci">static MCCFIInstruction createDefCfaRegister(MCSymbol *L, unsigned Register)</div><div class="ttdoc">.cfi_def_cfa_register modifies a rule for computing CFA.</div><div class="ttdef"><b>Definition:</b> <a href="MCDwarf_8h_source.html#l00540">MCDwarf.h:540</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86Subtarget_html_a692f8a360f34d8e62b4940f3a8966216"><div class="ttname"><a href="classllvm_1_1X86Subtarget.html#a692f8a360f34d8e62b4940f3a8966216">llvm::X86Subtarget::isTarget64BitLP64</a></div><div class="ttdeci">bool isTarget64BitLP64() const</div><div class="ttdoc">Is this x86_64 with the LP64 programming model (standard AMD64, no x32)?</div><div class="ttdef"><b>Definition:</b> <a href="X86Subtarget_8h_source.html#l00184">X86Subtarget.h:184</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html">llvm::MachineBasicBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00094">MachineBasicBlock.h:94</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_a61960903871aa95a7161074c6f1eec8f"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a61960903871aa95a7161074c6f1eec8f">llvm::MachineFrameInfo::CreateSpillStackObject</a></div><div class="ttdeci">int CreateSpillStackObject(uint64_t Size, Align Alignment)</div><div class="ttdoc">Create a new statically sized stack object that represents a spill slot, returning a nonnegative iden...</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8cpp_source.html#l00066">MachineFrameInfo.cpp:66</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a7477aafbbe989ad35b96fac186d8e9fd"><div class="ttname"><a href="classllvm_1_1Function.html#a7477aafbbe989ad35b96fac186d8e9fd">llvm::Function::getAttributes</a></div><div class="ttdeci">AttributeList getAttributes() const</div><div class="ttdoc">Return the attribute list for this Function.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00313">Function.h:313</a></div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_a07ed0bfaa124c15897944fe3eaa971ab"><div class="ttname"><a href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned long or uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetOptions_html_aad0fc1de8197ddf2c49346c5d92a2bec"><div class="ttname"><a href="classllvm_1_1TargetOptions.html#aad0fc1de8197ddf2c49346c5d92a2bec">llvm::TargetOptions::DisableFramePointerElim</a></div><div class="ttdeci">bool DisableFramePointerElim(const MachineFunction &amp;MF) const</div><div class="ttdoc">DisableFramePointerElim - This returns true if frame pointer elimination optimization should be disab...</div><div class="ttdef"><b>Definition:</b> <a href="TargetOptionsImpl_8cpp_source.html#l00023">TargetOptionsImpl.cpp:23</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a6691cc6c9b7341348045f8d54a14e7a7"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a6691cc6c9b7341348045f8d54a14e7a7">llvm::MachineFunction::getMMI</a></div><div class="ttdeci">MachineModuleInfo &amp; getMMI() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00623">MachineFunction.h:623</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a325f6b611ef9ec06798d3b4eb9572093"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">llvm::MachineFunction::getSubtarget</a></div><div class="ttdeci">const TargetSubtargetInfo &amp; getSubtarget() const</div><div class="ttdoc">getSubtarget - Return the subtarget for which this machine code is being compiled.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00672">MachineFunction.h:672</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_aa8a605a58ebdee20705834400bdbb922"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#aa8a605a58ebdee20705834400bdbb922">llvm::X86FrameLowering::emitSPUpdate</a></div><div class="ttdeci">void emitSPUpdate(MachineBasicBlock &amp;MBB, MachineBasicBlock::iterator &amp;MBBI, const DebugLoc &amp;DL, int64_t NumBytes, bool InEpilogue) const</div><div class="ttdoc">Emit a series of instructions to increment / decrement the stack pointer by a constant value.</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l00218">X86FrameLowering.cpp:218</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_a49f174e0e7941fe7dad04d4f948a2d63"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#a49f174e0e7941fe7dad04d4f948a2d63">llvm::MachineInstrBuilder::setMIFlag</a></div><div class="ttdeci">const MachineInstrBuilder &amp; setMIFlag(MachineInstr::MIFlag Flag) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00278">MachineInstrBuilder.h:278</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_afb28a4deafe2954b0534cc6399ce518b"><div class="ttname"><a href="classllvm_1_1Function.html#afb28a4deafe2954b0534cc6399ce518b">llvm::Function::hasFnAttribute</a></div><div class="ttdeci">bool hasFnAttribute(Attribute::AttrKind Kind) const</div><div class="ttdoc">Return true if the function has the attribute.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00640">Function.cpp:640</a></div></div>
<div class="ttc" id="astructllvm_1_1WinEHTryBlockMapEntry_html"><div class="ttname"><a href="structllvm_1_1WinEHTryBlockMapEntry.html">llvm::WinEHTryBlockMapEntry</a></div><div class="ttdef"><b>Definition:</b> <a href="WinEHFuncInfo_8h_source.html#l00072">WinEHFuncInfo.h:72</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_ae8ff2acea4fe63e48e8fc6cf0620ff78"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#ae8ff2acea4fe63e48e8fc6cf0620ff78">llvm::MachineInstr::getDebugLoc</a></div><div class="ttdeci">const DebugLoc &amp; getDebugLoc() const</div><div class="ttdoc">Returns the debug location id of this MachineInstr.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00445">MachineInstr.h:445</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_ae4ecf5483b94e2bb72967b80cc2008d2"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ae4ecf5483b94e2bb72967b80cc2008d2">llvm::MachineOperand::clobbersPhysReg</a></div><div class="ttdeci">static bool clobbersPhysReg(const uint32_t *RegMask, MCRegister PhysReg)</div><div class="ttdoc">clobbersPhysReg - Returns true if this RegMask clobbers PhysReg.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00646">MachineOperand.h:646</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_ad2270087c6b8d7061c3a5e83fb61c0a6"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#ad2270087c6b8d7061c3a5e83fb61c0a6">llvm::MachineFrameInfo::CreateFixedSpillStackObject</a></div><div class="ttdeci">int CreateFixedSpillStackObject(uint64_t Size, int64_t SPOffset, bool IsImmutable=false)</div><div class="ttdoc">Create a spill slot at a fixed location on the stack.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8cpp_source.html#l00102">MachineFrameInfo.cpp:102</a></div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_aa10ee7493bddf2c751ca6e05451ef410"><div class="ttname"><a href="ADT_2tmp_8txt.html#aa10ee7493bddf2c751ca6e05451ef410">unsigned</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a61a42c85bd86c6ca4554e27d33c3f798"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a61a42c85bd86c6ca4554e27d33c3f798">llvm::MachineOperand::setIsDead</a></div><div class="ttdeci">void setIsDead(bool Val=true)</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00525">MachineOperand.h:525</a></div></div>
<div class="ttc" id="astructllvm_1_1WinEHFuncInfo_html"><div class="ttname"><a href="structllvm_1_1WinEHFuncInfo.html">llvm::WinEHFuncInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="WinEHFuncInfo_8h_source.html#l00090">WinEHFuncInfo.h:90</a></div></div>
<div class="ttc" id="aX86MCTargetDesc_8h_html"><div class="ttname"><a href="X86MCTargetDesc_8h.html">X86MCTargetDesc.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1X86_html_a1a356a51a1fb4cc3c427599082cf1d2eafeeb44274a14a14010dc990daecb39a0"><div class="ttname"><a href="namespacellvm_1_1X86.html#a1a356a51a1fb4cc3c427599082cf1d2eafeeb44274a14a14010dc990daecb39a0">llvm::X86::COND_AE</a></div><div class="ttdeci">@ COND_AE</div><div class="ttdef"><b>Definition:</b> <a href="X86BaseInfo_8h_source.html#l00084">X86BaseInfo.h:84</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCCFIInstruction_html_a26347ad83355eafb75fecd4bce9d7abba5822faf65b27795cd48bd44712d48927"><div class="ttname"><a href="classllvm_1_1MCCFIInstruction.html#a26347ad83355eafb75fecd4bce9d7abba5822faf65b27795cd48bd44712d48927">llvm::MCCFIInstruction::OpDefCfaOffset</a></div><div class="ttdeci">@ OpDefCfaOffset</div><div class="ttdef"><b>Definition:</b> <a href="MCDwarf_8h_source.html#l00488">MCDwarf.h:488</a></div></div>
<div class="ttc" id="anamespacellvm_1_1N86_html_a004aaa5711c58178d0371ab88bf1bd63a90cd412049931c87618e68595357afb8"><div class="ttname"><a href="namespacellvm_1_1N86.html#a004aaa5711c58178d0371ab88bf1bd63a90cd412049931c87618e68595357afb8">llvm::N86::EDI</a></div><div class="ttdeci">@ EDI</div><div class="ttdef"><b>Definition:</b> <a href="X86MCTargetDesc_8h_source.html#l00051">X86MCTargetDesc.h:51</a></div></div>
<div class="ttc" id="aELFObjHandler_8cpp_html_aef61945034b9431b804748fc317c5548"><div class="ttname"><a href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a></div><div class="ttdeci">uint32_t Index</div><div class="ttdef"><b>Definition:</b> <a href="ELFObjHandler_8cpp_source.html#l00083">ELFObjHandler.cpp:83</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html"><div class="ttname"><a href="classllvm_1_1MachineInstr.html">llvm::MachineInstr</a></div><div class="ttdoc">Representation of each machine instruction.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00066">MachineInstr.h:66</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html">llvm::MachineInstrBuilder</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00069">MachineInstrBuilder.h:69</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86TargetLowering_html_a5cf46104ca48a9577dc4a61cf080003a"><div class="ttname"><a href="classllvm_1_1X86TargetLowering.html#a5cf46104ca48a9577dc4a61cf080003a">llvm::X86TargetLowering::hasInlineStackProbe</a></div><div class="ttdeci">bool hasInlineStackProbe(const MachineFunction &amp;MF) const override</div><div class="ttdoc">Returns true if stack probing through inline assembly is requested.</div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8cpp_source.html#l58236">X86ISelLowering.cpp:58236</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a768ff6dfb15d23afedd7f07501afee9e"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a768ff6dfb15d23afedd7f07501afee9e">llvm::MachineFunction::callsEHReturn</a></div><div class="ttdeci">bool callsEHReturn() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l01104">MachineFunction.h:1104</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_a9284fd53296d2a2f8ae654d000971000"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a9284fd53296d2a2f8ae654d000971000">llvm::MachineFrameInfo::getObjectSize</a></div><div class="ttdeci">int64_t getObjectSize(int ObjectIdx) const</div><div class="ttdoc">Return the size of the specified object.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00470">MachineFrameInfo.h:470</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86MachineFunctionInfo_html_af2f0359e40743109c0db7eeebf23c2e9"><div class="ttname"><a href="classllvm_1_1X86MachineFunctionInfo.html#af2f0359e40743109c0db7eeebf23c2e9">llvm::X86MachineFunctionInfo::getUsesRedZone</a></div><div class="ttdeci">bool getUsesRedZone() const</div><div class="ttdef"><b>Definition:</b> <a href="X86MachineFunctionInfo_8h_source.html#l00210">X86MachineFunctionInfo.h:210</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a5f494edc0a569c7fc9ff4181243be1ed"><div class="ttname"><a href="classllvm_1_1Function.html#a5f494edc0a569c7fc9ff4181243be1ed">llvm::Function::getCallingConv</a></div><div class="ttdeci">CallingConv::ID getCallingConv() const</div><div class="ttdoc">getCallingConv()/setCallingConv(CC) - These method get and set the calling convention of this functio...</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00237">Function.h:237</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCCFIInstruction_html_a7d9d40fb566b30ef74f2db5be5b9cc75"><div class="ttname"><a href="classllvm_1_1MCCFIInstruction.html#a7d9d40fb566b30ef74f2db5be5b9cc75">llvm::MCCFIInstruction::createGnuArgsSize</a></div><div class="ttdeci">static MCCFIInstruction createGnuArgsSize(MCSymbol *L, int Size)</div><div class="ttdoc">A special wrapper for .cfi_escape that indicates GNU_ARGS_SIZE.</div><div class="ttdef"><b>Definition:</b> <a href="MCDwarf_8h_source.html#l00638">MCDwarf.h:638</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARM__MB_html_ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2"><div class="ttname"><a href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">llvm::ARM_MB::ST</a></div><div class="ttdeci">@ ST</div><div class="ttdef"><b>Definition:</b> <a href="MCTargetDesc_2ARMBaseInfo_8h_source.html#l00073">ARMBaseInfo.h:73</a></div></div>
<div class="ttc" id="aREADME-X86-64_8txt_html_a9de23273550c17a1957b1b325a01960e"><div class="ttname"><a href="README-X86-64_8txt.html#a9de23273550c17a1957b1b325a01960e">AH</a></div><div class="ttdeci">AMD64 Optimization Manual has some nice information about optimizing integer multiplication by a constant How much of it applies to Intel s X86 implementation There are definite trade offs to xmm0 cvttss2siq rdx jb L3 subss xmm0 rax cvttss2siq rdx xorq rdx rax ret instead of xmm1 cvttss2siq rcx movaps xmm2 subss xmm2 cvttss2siq rax rdx xorq rax ucomiss xmm0 cmovb rax ret Seems like the jb branch has high likelihood of being taken It would have saved a few instructions It s not possible to reference AH</div><div class="ttdef"><b>Definition:</b> <a href="README-X86-64_8txt_source.html#l00044">README-X86-64.txt:44</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86MachineFunctionInfo_html_ad1223d54741335e6b3595a7e0c528afa"><div class="ttname"><a href="classllvm_1_1X86MachineFunctionInfo.html#ad1223d54741335e6b3595a7e0c528afa">llvm::X86MachineFunctionInfo::getWinEHXMMSlotInfo</a></div><div class="ttdeci">DenseMap&lt; int, unsigned &gt; &amp; getWinEHXMMSlotInfo()</div><div class="ttdef"><b>Definition:</b> <a href="X86MachineFunctionInfo_8h_source.html#l00154">X86MachineFunctionInfo.h:154</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_af2ab7cd691053c57c27e810c549a0300"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#af2ab7cd691053c57c27e810c549a0300">llvm::X86FrameLowering::emitPrologue</a></div><div class="ttdeci">void emitPrologue(MachineFunction &amp;MF, MachineBasicBlock &amp;MBB) const override</div><div class="ttdoc">emitProlog/emitEpilog - These methods insert prolog and epilog code into the function.</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l01476">X86FrameLowering.cpp:1476</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetOptions_html_a66a62a15c006f8bc55698e0bea465699"><div class="ttname"><a href="classllvm_1_1TargetOptions.html#a66a62a15c006f8bc55698e0bea465699">llvm::TargetOptions::SwiftAsyncFramePointer</a></div><div class="ttdeci">SwiftAsyncFramePointerMode SwiftAsyncFramePointer</div><div class="ttdoc">Control when and how the Swift async frame pointer bit should be set.</div><div class="ttdef"><b>Definition:</b> <a href="TargetOptions_8h_source.html#l00243">TargetOptions.h:243</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_a94ed22ca5dc3213bfb96e1ddbc41952e"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#a94ed22ca5dc3213bfb96e1ddbc41952e">llvm::X86FrameLowering::restoreCalleeSavedRegisters</a></div><div class="ttdeci">bool restoreCalleeSavedRegisters(MachineBasicBlock &amp;MBB, MachineBasicBlock::iterator MI, MutableArrayRef&lt; CalleeSavedInfo &gt; CSI, const TargetRegisterInfo *TRI) const override</div><div class="ttdoc">restoreCalleeSavedRegisters - Issues instruction(s) to restore all callee saved registers and returns...</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l02787">X86FrameLowering.cpp:2787</a></div></div>
<div class="ttc" id="astructllvm_1_1MachinePointerInfo_html"><div class="ttname"><a href="structllvm_1_1MachinePointerInfo.html">llvm::MachinePointerInfo</a></div><div class="ttdoc">This class contains a discriminated union of information about pointers in memory operands,...</div><div class="ttdef"><b>Definition:</b> <a href="MachineMemOperand_8h_source.html#l00039">MachineMemOperand.h:39</a></div></div>
<div class="ttc" id="anamespacellvm_1_1numbers_html_a92f4283d4e0e2ea1776894b3ae93640f"><div class="ttname"><a href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">llvm::numbers::e</a></div><div class="ttdeci">constexpr double e</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00031">MathExtras.h:31</a></div></div>
<div class="ttc" id="astructllvm_1_1WinEHTryBlockMapEntry_html_a203f60eaca27055d5b7395fca270037e"><div class="ttname"><a href="structllvm_1_1WinEHTryBlockMapEntry.html#a203f60eaca27055d5b7395fca270037e">llvm::WinEHTryBlockMapEntry::HandlerArray</a></div><div class="ttdeci">SmallVector&lt; WinEHHandlerType, 1 &gt; HandlerArray</div><div class="ttdef"><b>Definition:</b> <a href="WinEHFuncInfo_8h_source.html#l00076">WinEHFuncInfo.h:76</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a8b3de6401453f275f010559d01834826"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8b3de6401453f275f010559d01834826">llvm::ISD::CLEANUPRET</a></div><div class="ttdeci">@ CLEANUPRET</div><div class="ttdoc">CLEANUPRET - Represents a return from a cleanup block funclet.</div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l01047">ISDOpcodes.h:1047</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_af0288e181965a5ff9f0c7a75201fd142accc15fa5c7a27d461dc9a884cc9a2dc8"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#af0288e181965a5ff9f0c7a75201fd142accc15fa5c7a27d461dc9a884cc9a2dc8">llvm::MachineBasicBlock::LQR_Live</a></div><div class="ttdeci">@ LQR_Live</div><div class="ttdoc">Register is known to be (at least partially) live.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l01105">MachineBasicBlock.h:1105</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RegState_html_aef4cc0c855dc833e2a9d58a50703320da0fec8ba6f4a4dc758b725205985eee99"><div class="ttname"><a href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da0fec8ba6f4a4dc758b725205985eee99">llvm::RegState::Implicit</a></div><div class="ttdeci">@ Implicit</div><div class="ttdoc">Not emitted register (e.g. carry, or temporary result).</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00046">MachineInstrBuilder.h:46</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1RegScavenger_html"><div class="ttname"><a href="classllvm_1_1RegScavenger.html">llvm::RegScavenger</a></div><div class="ttdef"><b>Definition:</b> <a href="RegisterScavenging_8h_source.html#l00034">RegisterScavenging.h:34</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_a8320a54de0a273478de910ac3795058b"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a8320a54de0a273478de910ac3795058b">llvm::MachineFrameInfo::getObjectAlign</a></div><div class="ttdeci">Align getObjectAlign(int ObjectIdx) const</div><div class="ttdoc">Return the alignment of the specified stack object.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00484">MachineFrameInfo.h:484</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_a3cd29e7edbcaceb5834eaa7d089a5bc4"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a3cd29e7edbcaceb5834eaa7d089a5bc4">llvm::MachineFrameInfo::setObjectOffset</a></div><div class="ttdeci">void setObjectOffset(int ObjectIdx, int64_t SPOffset)</div><div class="ttdoc">Set the stack frame offset of the specified object.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00560">MachineFrameInfo.h:560</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_aa7dc7faaab4856b8f0014b8283e26c7b"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#aa7dc7faaab4856b8f0014b8283e26c7b">llvm::MachineBasicBlock::getFirstNonPHI</a></div><div class="ttdeci">iterator getFirstNonPHI()</div><div class="ttdoc">Returns a pointer to the first instruction in this block that is not a PHINode instruction.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00198">MachineBasicBlock.cpp:198</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a1d483b4ac24a96c2250becb232ed4cb4"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a1d483b4ac24a96c2250becb232ed4cb4">llvm::MachineFunction::CreateMachineBasicBlock</a></div><div class="ttdeci">MachineBasicBlock * CreateMachineBasicBlock(const BasicBlock *bb=nullptr)</div><div class="ttdoc">CreateMachineBasicBlock - Allocate a new MachineBasicBlock.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8cpp_source.html#l00446">MachineFunction.cpp:446</a></div></div>
<div class="ttc" id="aclassllvm_1_1NamedMDNode_html_aa24b566603d206b0e74bf63daf521078"><div class="ttname"><a href="classllvm_1_1NamedMDNode.html#aa24b566603d206b0e74bf63daf521078">llvm::NamedMDNode::getOperand</a></div><div class="ttdeci">MDNode * getOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l01215">Metadata.cpp:1215</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetMachine_html_ab1fb67187fc37e569cc5171cbebba873"><div class="ttname"><a href="classllvm_1_1TargetMachine.html#ab1fb67187fc37e569cc5171cbebba873">llvm::TargetMachine::Options</a></div><div class="ttdeci">TargetOptions Options</div><div class="ttdef"><b>Definition:</b> <a href="Target_2TargetMachine_8h_source.html#l00119">TargetMachine.h:119</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_a03cf34252938b54f7e86c736f9fd7dc1"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a03cf34252938b54f7e86c736f9fd7dc1">llvm::MachineFrameInfo::CreateFixedObject</a></div><div class="ttdeci">int CreateFixedObject(uint64_t Size, int64_t SPOffset, bool IsImmutable, bool isAliased=false)</div><div class="ttdoc">Create a new object at a fixed location on the stack.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8cpp_source.html#l00083">MachineFrameInfo.cpp:83</a></div></div>
<div class="ttc" id="aclassllvm_1_1MVT_html_a330aea6151cae3adaf5e179dcfe87346a62a222acce6360abd2726719fabc2797"><div class="ttname"><a href="classllvm_1_1MVT.html#a330aea6151cae3adaf5e179dcfe87346a62a222acce6360abd2726719fabc2797">llvm::MVT::Other</a></div><div class="ttdeci">@ Other</div><div class="ttdef"><b>Definition:</b> <a href="MachineValueType_8h_source.html#l00042">MachineValueType.h:42</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86TargetLowering_html_a92e17e524fe1c82a26b5433b6e9715e3"><div class="ttname"><a href="classllvm_1_1X86TargetLowering.html#a92e17e524fe1c82a26b5433b6e9715e3">llvm::X86TargetLowering::getStackProbeSymbolName</a></div><div class="ttdeci">StringRef getStackProbeSymbolName(const MachineFunction &amp;MF) const override</div><div class="ttdoc">Returns the name of the symbol used to emit stack probes or the empty string if not applicable.</div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8cpp_source.html#l58254">X86ISelLowering.cpp:58254</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86Subtarget_html_a97b47799ffd834b0fddcc8cee6fbe234"><div class="ttname"><a href="classllvm_1_1X86Subtarget.html#a97b47799ffd834b0fddcc8cee6fbe234">llvm::X86Subtarget::getTargetLowering</a></div><div class="ttdeci">const X86TargetLowering * getTargetLowering() const override</div><div class="ttdef"><b>Definition:</b> <a href="X86Subtarget_8h_source.html#l00124">X86Subtarget.h:124</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a18fcadd076ad53e6df94e0ca7a80a9ef"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a18fcadd076ad53e6df94e0ca7a80a9ef">llvm::MachineFunction::getFrameInfo</a></div><div class="ttdeci">MachineFrameInfo &amp; getFrameInfo()</div><div class="ttdoc">getFrameInfo - Return the frame info object for the current function.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00688">MachineFunction.h:688</a></div></div>
<div class="ttc" id="anamespacellvm_1_1X86_html_a1a356a51a1fb4cc3c427599082cf1d2eac9ae7c779ffc6865536d9f164ebf09b9"><div class="ttname"><a href="namespacellvm_1_1X86.html#a1a356a51a1fb4cc3c427599082cf1d2eac9ae7c779ffc6865536d9f164ebf09b9">llvm::X86::COND_B</a></div><div class="ttdeci">@ COND_B</div><div class="ttdef"><b>Definition:</b> <a href="X86BaseInfo_8h_source.html#l00083">X86BaseInfo.h:83</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86InstrInfo_html_a4729ef7bdd10f5a76441a9d3b5503528"><div class="ttname"><a href="classllvm_1_1X86InstrInfo.html#a4729ef7bdd10f5a76441a9d3b5503528">llvm::X86InstrInfo::loadRegFromStackSlot</a></div><div class="ttdeci">void loadRegFromStackSlot(MachineBasicBlock &amp;MBB, MachineBasicBlock::iterator MI, Register DestReg, int FrameIndex, const TargetRegisterClass *RC, const TargetRegisterInfo *TRI, Register VReg) const override</div><div class="ttdef"><b>Definition:</b> <a href="X86InstrInfo_8cpp_source.html#l03952">X86InstrInfo.cpp:3952</a></div></div>
<div class="ttc" id="anamespacellvm_1_1X86AS_html_aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f"><div class="ttname"><a href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">llvm::X86AS::FS</a></div><div class="ttdeci">@ FS</div><div class="ttdef"><b>Definition:</b> <a href="X86_8h_source.html#l00201">X86.h:201</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a4e21760f681d6f97f95c8414e7b83ea5"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">llvm::MachineBasicBlock::getParent</a></div><div class="ttdeci">const MachineFunction * getParent() const</div><div class="ttdoc">Return the MachineFunction containing this basic block.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00265">MachineBasicBlock.h:265</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_a353d6967ff6cb7d22110de97773d65d8"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#a353d6967ff6cb7d22110de97773d65d8">llvm::X86FrameLowering::emitEpilogue</a></div><div class="ttdeci">void emitEpilogue(MachineFunction &amp;MF, MachineBasicBlock &amp;MBB) const override</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l02169">X86FrameLowering.cpp:2169</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_af1d6349ca67f14c36e41916e41536da4"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#af1d6349ca67f14c36e41916e41536da4">llvm::X86FrameLowering::mergeSPUpdates</a></div><div class="ttdeci">int mergeSPUpdates(MachineBasicBlock &amp;MBB, MachineBasicBlock::iterator &amp;MBBI, bool doMergeWithPrevious) const</div><div class="ttdoc">Check the instruction before/after the passed instruction.</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l00375">X86FrameLowering.cpp:375</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_a47760ffd22a82283df0f5da521feca2a"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#a47760ffd22a82283df0f5da521feca2a">llvm::MachineInstrBuilder::addMemOperand</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addMemOperand(MachineMemOperand *MMO) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00202">MachineInstrBuilder.h:202</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86MachineFunctionInfo_html_a4b710e7ebaee24f8af4b79ed618c971f"><div class="ttname"><a href="classllvm_1_1X86MachineFunctionInfo.html#a4b710e7ebaee24f8af4b79ed618c971f">llvm::X86MachineFunctionInfo::hasVirtualTileReg</a></div><div class="ttdeci">bool hasVirtualTileReg() const</div><div class="ttdef"><b>Definition:</b> <a href="X86MachineFunctionInfo_8h_source.html#l00222">X86MachineFunctionInfo.h:222</a></div></div>
<div class="ttc" id="aX86FrameLowering_8cpp_html_ae31fe0327c2bb8a7d5cfbc532825e5a3"><div class="ttname"><a href="X86FrameLowering_8cpp.html#ae31fe0327c2bb8a7d5cfbc532825e5a3">blockEndIsUnreachable</a></div><div class="ttdeci">static bool blockEndIsUnreachable(const MachineBasicBlock &amp;MBB, MachineBasicBlock::const_iterator MBBI)</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l03168">X86FrameLowering.cpp:3168</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a414dced935fa769e37be832bb464d72d"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a414dced935fa769e37be832bb464d72d">llvm::MachineFunction::getLandingPads</a></div><div class="ttdeci">const std::vector&lt; LandingPadInfo &gt; &amp; getLandingPads() const</div><div class="ttdoc">Return a reference to the landing pad info for the current function.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l01123">MachineFunction.h:1123</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86MachineFunctionInfo_html"><div class="ttname"><a href="classllvm_1_1X86MachineFunctionInfo.html">llvm::X86MachineFunctionInfo</a></div><div class="ttdoc">X86MachineFunctionInfo - This class is derived from MachineFunction and contains private X86 target-s...</div><div class="ttdef"><b>Definition:</b> <a href="X86MachineFunctionInfo_8h_source.html#l00025">X86MachineFunctionInfo.h:25</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a42d7a6aaee06630af49952b37ff1dbf7"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a42d7a6aaee06630af49952b37ff1dbf7">llvm::MachineFunction::makeDebugValueSubstitution</a></div><div class="ttdeci">void makeDebugValueSubstitution(DebugInstrOperandPair, DebugInstrOperandPair, unsigned SubReg=0)</div><div class="ttdoc">Create a substitution between one &lt;instr,operand&gt; value to a different, new value.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8cpp_source.html#l00925">MachineFunction.cpp:925</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCCFIInstruction_html_abda962a8d0de68f0817ed1837557713a"><div class="ttname"><a href="classllvm_1_1MCCFIInstruction.html#abda962a8d0de68f0817ed1837557713a">llvm::MCCFIInstruction::cfiDefCfa</a></div><div class="ttdeci">static MCCFIInstruction cfiDefCfa(MCSymbol *L, unsigned Register, int Offset)</div><div class="ttdoc">.cfi_def_cfa defines a rule for computing CFA as: take address from Register and add Offset to it.</div><div class="ttdef"><b>Definition:</b> <a href="MCDwarf_8h_source.html#l00533">MCDwarf.h:533</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCCFIInstruction_html_a26347ad83355eafb75fecd4bce9d7abbaea7047186e58e6304947fbe2b12963ca"><div class="ttname"><a href="classllvm_1_1MCCFIInstruction.html#a26347ad83355eafb75fecd4bce9d7abbaea7047186e58e6304947fbe2b12963ca">llvm::MCCFIInstruction::OpAdjustCfaOffset</a></div><div class="ttdeci">@ OpAdjustCfaOffset</div><div class="ttdef"><b>Definition:</b> <a href="MCDwarf_8h_source.html#l00491">MCDwarf.h:491</a></div></div>
<div class="ttc" id="aMachineModuleInfo_8h_html"><div class="ttname"><a href="MachineModuleInfo_8h.html">MachineModuleInfo.h</a></div></div>
<div class="ttc" id="astructllvm_1_1WinEHFuncInfo_html_a297243a501424b3f88e1295034db122d"><div class="ttname"><a href="structllvm_1_1WinEHFuncInfo.html#a297243a501424b3f88e1295034db122d">llvm::WinEHFuncInfo::UnwindHelpFrameIdx</a></div><div class="ttdeci">int UnwindHelpFrameIdx</div><div class="ttdef"><b>Definition:</b> <a href="WinEHFuncInfo_8h_source.html#l00099">WinEHFuncInfo.h:99</a></div></div>
<div class="ttc" id="aclassllvm_1_1MVT_html"><div class="ttname"><a href="classllvm_1_1MVT.html">llvm::MVT</a></div><div class="ttdoc">Machine Value Type.</div><div class="ttdef"><b>Definition:</b> <a href="MachineValueType_8h_source.html#l00031">MachineValueType.h:31</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_ad08ed580345a51c50d9477dec1e65818"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">llvm::MachineInstrBuilder::addReg</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addReg(Register RegNo, unsigned flags=0, unsigned SubReg=0) const</div><div class="ttdoc">Add a new virtual register operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00097">MachineInstrBuilder.h:97</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86Subtarget_html_a50bd6d1ad19506c5212c853867430e57"><div class="ttname"><a href="classllvm_1_1X86Subtarget.html#a50bd6d1ad19506c5212c853867430e57">llvm::X86Subtarget::isTargetDragonFly</a></div><div class="ttdeci">bool isTargetDragonFly() const</div><div class="ttdef"><b>Definition:</b> <a href="X86Subtarget_8h_source.html#l00282">X86Subtarget.h:282</a></div></div>
<div class="ttc" id="aX86FrameLowering_8cpp_html_a1021e45de682ea397f9aa6c529ac80be"><div class="ttname"><a href="X86FrameLowering_8cpp.html#a1021e45de682ea397f9aa6c529ac80be">GetScratchRegister</a></div><div class="ttdeci">static unsigned GetScratchRegister(bool Is64Bit, bool IsLP64, const MachineFunction &amp;MF, bool Primary)</div><div class="ttdoc">GetScratchRegister - Get a temp register for performing work in the segmented stack and the Erlang/Hi...</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l02872">X86FrameLowering.cpp:2872</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_aec748fa81e1488192450f0b2a8d1aeca"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#aec748fa81e1488192450f0b2a8d1aeca">llvm::MachineInstrBuilder::addUse</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addUse(Register RegNo, unsigned Flags=0, unsigned SubReg=0) const</div><div class="ttdoc">Add a virtual register use operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00123">MachineInstrBuilder.h:123</a></div></div>
<div class="ttc" id="aclassllvm_1_1ValueAsMetadata_html_abb1fed177add0142f52d7369619a2871"><div class="ttname"><a href="classllvm_1_1ValueAsMetadata.html#abb1fed177add0142f52d7369619a2871">llvm::ValueAsMetadata::getValue</a></div><div class="ttdeci">Value * getValue() const</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00384">Metadata.h:384</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html"><div class="ttname"><a href="classllvm_1_1MDNode.html">llvm::MDNode</a></div><div class="ttdoc">Metadata node.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00943">Metadata.h:943</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_a00d2c6aab11836fcd2116ef07924253e"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a00d2c6aab11836fcd2116ef07924253e">llvm::MachineFrameInfo::needsSplitStackProlog</a></div><div class="ttdeci">bool needsSplitStackProlog() const</div><div class="ttdoc">Return true if this function requires a split stack prolog, even if it uses no stack space.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00402">MachineFrameInfo.h:402</a></div></div>
<div class="ttc" id="anamespacellvm_1_1N86_html_a004aaa5711c58178d0371ab88bf1bd63a488c3a2a57ed8f23f0c48d8b40348af0"><div class="ttname"><a href="namespacellvm_1_1N86.html#a004aaa5711c58178d0371ab88bf1bd63a488c3a2a57ed8f23f0c48d8b40348af0">llvm::N86::EAX</a></div><div class="ttdeci">@ EAX</div><div class="ttdef"><b>Definition:</b> <a href="X86MCTargetDesc_8h_source.html#l00051">X86MCTargetDesc.h:51</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_aafacf84de1cb994a92dc045f4aa1d518"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518">llvm::MachineInstr::MIFlag</a></div><div class="ttdeci">MIFlag</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00082">MachineInstr.h:82</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5d56157a385f8cd7d3e54ed87da1ba6aa05b0e25c98ba4300ca28989a35dab72a"><div class="ttname"><a href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aa05b0e25c98ba4300ca28989a35dab72a">llvm::EHPersonality::CoreCLR</a></div><div class="ttdeci">@ CoreCLR</div></div>
<div class="ttc" id="anamespacellvm_1_1X86_html_a1a356a51a1fb4cc3c427599082cf1d2eae364c60967a7bc453d49caffc07d7bef"><div class="ttname"><a href="namespacellvm_1_1X86.html#a1a356a51a1fb4cc3c427599082cf1d2eae364c60967a7bc453d49caffc07d7bef">llvm::X86::COND_LE</a></div><div class="ttdeci">@ COND_LE</div><div class="ttdef"><b>Definition:</b> <a href="X86BaseInfo_8h_source.html#l00095">X86BaseInfo.h:95</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html"><div class="ttname"><a href="classllvm_1_1MachineFunction.html">llvm::MachineFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00258">MachineFunction.h:258</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbability_html_a56e1b2d1999aadf4c513caee1ce5275b"><div class="ttname"><a href="classllvm_1_1BranchProbability.html#a56e1b2d1999aadf4c513caee1ce5275b">llvm::BranchProbability::getOne</a></div><div class="ttdeci">static BranchProbability getOne()</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbability_8h_source.html#l00050">BranchProbability.h:50</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_aa8d1d8d88835b75b05b14ab774785e8a"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#aa8d1d8d88835b75b05b14ab774785e8a">llvm::MachineBasicBlock::succ_empty</a></div><div class="ttdeci">bool succ_empty() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00388">MachineBasicBlock.h:388</a></div></div>
<div class="ttc" id="aTargetOptions_8h_html"><div class="ttname"><a href="TargetOptions_8h.html">TargetOptions.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_af3891aaee55272147e7bb2518842a753"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#af3891aaee55272147e7bb2518842a753">llvm::MachineFrameInfo::getCalleeSavedInfo</a></div><div class="ttdeci">const std::vector&lt; CalleeSavedInfo &gt; &amp; getCalleeSavedInfo() const</div><div class="ttdoc">Returns a reference to call saved info vector for the current function.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00787">MachineFrameInfo.h:787</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetMachine_html_a171c7253c2b03171bdf22c1bd910f674"><div class="ttname"><a href="classllvm_1_1TargetMachine.html#a171c7253c2b03171bdf22c1bd910f674">llvm::TargetMachine::getMCAsmInfo</a></div><div class="ttdeci">const MCAsmInfo * getMCAsmInfo() const</div><div class="ttdoc">Return target specific asm information.</div><div class="ttdef"><b>Definition:</b> <a href="Target_2TargetMachine_8h_source.html#l00213">TargetMachine.h:213</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a7f0521fa2de44271fd4b909ea7351ef3"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a7f0521fa2de44271fd4b909ea7351ef3">llvm::MachineBasicBlock::getFirstTerminator</a></div><div class="ttdeci">iterator getFirstTerminator()</div><div class="ttdoc">Returns an iterator to the first terminator instruction of this basic block.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00240">MachineBasicBlock.cpp:240</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5bacbbd03e9261f7b30dc174f26d680c"><div class="ttname"><a href="namespacellvm.html#a5bacbbd03e9261f7b30dc174f26d680c">llvm::skipDebugInstructionsForward</a></div><div class="ttdeci">IterT skipDebugInstructionsForward(IterT It, IterT End, bool SkipPseudoOp=true)</div><div class="ttdoc">Increment It until it points to a non-debug instruction or to End and return the resulting iterator.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l01299">MachineBasicBlock.h:1299</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86Subtarget_html_a63c6ceb2fb6b48a7db60701a599a2959"><div class="ttname"><a href="classllvm_1_1X86Subtarget.html#a63c6ceb2fb6b48a7db60701a599a2959">llvm::X86Subtarget::isTargetDarwin</a></div><div class="ttdeci">bool isTargetDarwin() const</div><div class="ttdef"><b>Definition:</b> <a href="X86Subtarget_8h_source.html#l00280">X86Subtarget.h:280</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_af4236a9c3c028303d301f49c7ee9a868"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#af4236a9c3c028303d301f49c7ee9a868">llvm::MachineBasicBlock::setMachineBlockAddressTaken</a></div><div class="ttdeci">void setMachineBlockAddressTaken()</div><div class="ttdoc">Set this block to indicate that its address is used as something other than the target of a terminato...</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00251">MachineBasicBlock.h:251</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef</a></div><div class="ttdoc">ArrayRef - Represent a constant reference to an array (0 or more elements consecutively in memory),...</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00033">APInt.h:33</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_a503a8cb169aa29ac907c218692087db3"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a503a8cb169aa29ac907c218692087db3">llvm::MachineFrameInfo::hasPatchPoint</a></div><div class="ttdeci">bool hasPatchPoint() const</div><div class="ttdoc">This method may be called any time after instruction selection is complete to determine if there is a...</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00389">MachineFrameInfo.h:389</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a9b48cb80ee1534c2b51d789b673137c1"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a9b48cb80ee1534c2b51d789b673137c1">llvm::MachineOperand::getMBB</a></div><div class="ttdeci">MachineBasicBlock * getMBB() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00571">MachineOperand.h:571</a></div></div>
<div class="ttc" id="anamespacellvm_html_a57f2ca0e57f4f7b13f56f9aa16af3e0d"><div class="ttname"><a href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">llvm::min</a></div><div class="ttdeci">Expected&lt; ExpressionValue &gt; min(const ExpressionValue &amp;Lhs, const ExpressionValue &amp;Rhs)</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8cpp_source.html#l00357">FileCheck.cpp:357</a></div></div>
<div class="ttc" id="aMCAsmInfo_8h_html"><div class="ttname"><a href="MCAsmInfo_8h.html">MCAsmInfo.h</a></div></div>
<div class="ttc" id="aDataLayout_8h_html"><div class="ttname"><a href="DataLayout_8h.html">DataLayout.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a4d2c96836214c1f13357ffb99125fb4a"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a4d2c96836214c1f13357ffb99125fb4a">llvm::MachineBasicBlock::successors</a></div><div class="ttdeci">iterator_range&lt; succ_iterator &gt; successors()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00396">MachineBasicBlock.h:396</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a1100bfbadd996d464150c6a68fa8dc1d"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a1100bfbadd996d464150c6a68fa8dc1d">llvm::MachineBasicBlock::isEHPad</a></div><div class="ttdeci">bool isEHPad() const</div><div class="ttdoc">Returns true if the block is a landing pad.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00580">MachineBasicBlock.h:580</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html"><div class="ttname"><a href="classllvm_1_1StringRef.html">llvm::StringRef</a></div><div class="ttdoc">StringRef - Represent a constant reference to a string, i.e.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00050">StringRef.h:50</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_adf0023bdc4f05a7849c35b1c859580d8"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#adf0023bdc4f05a7849c35b1c859580d8">llvm::MachineBasicBlock::splice</a></div><div class="ttdeci">void splice(iterator Where, MachineBasicBlock *Other, iterator From)</div><div class="ttdoc">Take an instruction from MBB 'Other' at the position From, and insert it into this MBB right before '...</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l01037">MachineBasicBlock.h:1037</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_ad5f691fdc1a09aaf6df5fef958b35a3d"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a></div><div class="ttdeci">MachineBasicBlock MachineBasicBlock::iterator MBBI</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00075">AArch64SLSHardening.cpp:75</a></div></div>
<div class="ttc" id="anamespacellvm_html_a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4"><div class="ttname"><a href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">llvm::Offset</a></div><div class="ttdeci">@ Offset</div><div class="ttdef"><b>Definition:</b> <a href="DWP_8cpp_source.html#l00406">DWP.cpp:406</a></div></div>
<div class="ttc" id="aSupport_2ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdoc">Marks that the current location is not supposed to be reachable.</div><div class="ttdef"><b>Definition:</b> <a href="Support_2ErrorHandling_8h_source.html#l00143">ErrorHandling.h:143</a></div></div>
<div class="ttc" id="aclassllvm_1_1StackOffset_html"><div class="ttname"><a href="classllvm_1_1StackOffset.html">llvm::StackOffset</a></div><div class="ttdoc">StackOffset holds a fixed and a scalable offset in bytes.</div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00036">TypeSize.h:36</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86MachineFunctionInfo_html_a7024c419adc3f16454faa53af71fb515"><div class="ttname"><a href="classllvm_1_1X86MachineFunctionInfo.html#a7024c419adc3f16454faa53af71fb515">llvm::X86MachineFunctionInfo::getFAIndex</a></div><div class="ttdeci">int getFAIndex() const</div><div class="ttdef"><b>Definition:</b> <a href="X86MachineFunctionInfo_8h_source.html#l00167">X86MachineFunctionInfo.h:167</a></div></div>
<div class="ttc" id="aclassllvm_1_1ilist__node__impl_html_af719fc783be6589465137d997701a432"><div class="ttname"><a href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">llvm::ilist_node_impl::getIterator</a></div><div class="ttdeci">self_iterator getIterator()</div><div class="ttdef"><b>Definition:</b> <a href="ilist__node_8h_source.html#l00082">ilist_node.h:82</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_ad467c4ab9119043f9b7750ab986be61a"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a></div><div class="ttdeci">MachineBasicBlock MachineBasicBlock::iterator DebugLoc DL</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00076">AArch64SLSHardening.cpp:76</a></div></div>
<div class="ttc" id="anamespacellvm_html_a78637df2e0b9a5e2109af945b0baaf34ad21e9e46158e1ff1c0b2553c4d17cd1b"><div class="ttname"><a href="namespacellvm.html#a78637df2e0b9a5e2109af945b0baaf34ad21e9e46158e1ff1c0b2553c4d17cd1b">llvm::SwiftAsyncFramePointerMode::DeploymentBased</a></div><div class="ttdeci">@ DeploymentBased</div><div class="ttdoc">Determine whether to set the bit statically or dynamically based on the deployment target.</div></div>
<div class="ttc" id="aclassllvm_1_1MCCFIInstruction_html_aba5c12cfe1d792d770234e2811c8a12e"><div class="ttname"><a href="classllvm_1_1MCCFIInstruction.html#aba5c12cfe1d792d770234e2811c8a12e">llvm::MCCFIInstruction::createAdjustCfaOffset</a></div><div class="ttdeci">static MCCFIInstruction createAdjustCfaOffset(MCSymbol *L, int Adjustment)</div><div class="ttdoc">.cfi_adjust_cfa_offset Same as .cfi_def_cfa_offset, but Offset is a relative value that is added/subt...</div><div class="ttdef"><b>Definition:</b> <a href="MCDwarf_8h_source.html#l00554">MCDwarf.h:554</a></div></div>
<div class="ttc" id="astructllvm_1_1WinEHFuncInfo_html_ab2ce4d51abb0224db13a9e656c3798d4"><div class="ttname"><a href="structllvm_1_1WinEHFuncInfo.html#ab2ce4d51abb0224db13a9e656c3798d4">llvm::WinEHFuncInfo::EHRegNodeEndOffset</a></div><div class="ttdeci">int EHRegNodeEndOffset</div><div class="ttdef"><b>Definition:</b> <a href="WinEHFuncInfo_8h_source.html#l00108">WinEHFuncInfo.h:108</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCRegisterInfo_html"><div class="ttname"><a href="classllvm_1_1MCRegisterInfo.html">llvm::MCRegisterInfo</a></div><div class="ttdoc">MCRegisterInfo base class - We assume that the target defines a static array of MCRegisterDesc object...</div><div class="ttdef"><b>Definition:</b> <a href="MCRegisterInfo_8h_source.html#l00135">MCRegisterInfo.h:135</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_ac8faf9a625064bfefafb7ace646815ff"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#ac8faf9a625064bfefafb7ace646815ff">llvm::X86FrameLowering::adjustForSegmentedStacks</a></div><div class="ttdeci">void adjustForSegmentedStacks(MachineFunction &amp;MF, MachineBasicBlock &amp;PrologueMBB) const override</div><div class="ttdoc">Adjust the prologue to have the function use segmented stacks.</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l02909">X86FrameLowering.cpp:2909</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5d56157a385f8cd7d3e54ed87da1ba6a"><div class="ttname"><a href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6a">llvm::EHPersonality</a></div><div class="ttdeci">EHPersonality</div><div class="ttdef"><b>Definition:</b> <a href="EHPersonalities_8h_source.html#l00021">EHPersonalities.h:21</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineMemOperand_html_aaa2020e47e35179234b9ea27d555b2dda796891d6ca349b671fce24b6d01d77a8"><div class="ttname"><a href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2dda796891d6ca349b671fce24b6d01d77a8">llvm::MachineMemOperand::MOVolatile</a></div><div class="ttdeci">@ MOVolatile</div><div class="ttdoc">The memory access is volatile.</div><div class="ttdef"><b>Definition:</b> <a href="MachineMemOperand_8h_source.html#l00138">MachineMemOperand.h:138</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86TargetLowering_html_ac9c3c65b113996cabc72bd6223410369"><div class="ttname"><a href="classllvm_1_1X86TargetLowering.html#ac9c3c65b113996cabc72bd6223410369">llvm::X86TargetLowering::hasStackProbeSymbol</a></div><div class="ttdeci">bool hasStackProbeSymbol(const MachineFunction &amp;MF) const override</div><div class="ttdoc">Returns true if stack probing through a function call is requested.</div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8cpp_source.html#l58231">X86ISelLowering.cpp:58231</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineMemOperand_html_aaa2020e47e35179234b9ea27d555b2dda7d12be6206e5b0026c71bbcd5cb76494"><div class="ttname"><a href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2dda7d12be6206e5b0026c71bbcd5cb76494">llvm::MachineMemOperand::MOLoad</a></div><div class="ttdeci">@ MOLoad</div><div class="ttdoc">The memory access reads data.</div><div class="ttdef"><b>Definition:</b> <a href="MachineMemOperand_8h_source.html#l00134">MachineMemOperand.h:134</a></div></div>
<div class="ttc" id="aAArch64AdvSIMDScalarPass_8cpp_html_aacd2ab195054a3e6a74bfbb9d5d571c8"><div class="ttname"><a href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a></div><div class="ttdeci">unsigned const MachineRegisterInfo * MRI</div><div class="ttdef"><b>Definition:</b> <a href="AArch64AdvSIMDScalarPass_8cpp_source.html#l00105">AArch64AdvSIMDScalarPass.cpp:105</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_a3836203fac855ac3c5718b701bd13ffd"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a3836203fac855ac3c5718b701bd13ffd">llvm::MachineFrameInfo::getMaxAlign</a></div><div class="ttdeci">Align getMaxAlign() const</div><div class="ttdoc">Return the alignment in bytes that this function must be aligned to, which is greater than the defaul...</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00601">MachineFrameInfo.h:601</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86InstrInfo_html_ae41024903c1885994dd8cf8a878b0fef"><div class="ttname"><a href="classllvm_1_1X86InstrInfo.html#ae41024903c1885994dd8cf8a878b0fef">llvm::X86InstrInfo::getFrameAdjustment</a></div><div class="ttdeci">int64_t getFrameAdjustment(const MachineInstr &amp;I) const</div><div class="ttdoc">Returns the stack pointer adjustment that happens inside the frame setup..destroy sequence (e....</div><div class="ttdef"><b>Definition:</b> <a href="X86InstrInfo_8h_source.html#l00161">X86InstrInfo.h:161</a></div></div>
<div class="ttc" id="aclassllvm_1_1Register_html"><div class="ttname"><a href="classllvm_1_1Register.html">llvm::Register</a></div><div class="ttdoc">Wrapper class representing virtual and physical registers.</div><div class="ttdef"><b>Definition:</b> <a href="Register_8h_source.html#l00019">Register.h:19</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a247230f547064b27022d70c0aeb86682"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a247230f547064b27022d70c0aeb86682">llvm::MachineFunction::addFrameInst</a></div><div class="ttdeci">unsigned addFrameInst(const MCCFIInstruction &amp;Inst)</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8cpp_source.html#l00317">MachineFunction.cpp:317</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_acce9c12cc977a88dc7bc51493ce7681c"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#acce9c12cc977a88dc7bc51493ce7681c">llvm::MachineBasicBlock::addLiveIn</a></div><div class="ttdeci">void addLiveIn(MCRegister PhysReg, LaneBitmask LaneMask=LaneBitmask::getAll())</div><div class="ttdoc">Adds the specified register as a live in.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00408">MachineBasicBlock.h:408</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_a32125253541ab2e7ec5bbe550ecc2d0c"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a32125253541ab2e7ec5bbe550ecc2d0c">llvm::MachineFrameInfo::isFrameAddressTaken</a></div><div class="ttdeci">bool isFrameAddressTaken() const</div><div class="ttdoc">This method may be called any time after instruction selection is complete to determine if there is a...</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00371">MachineFrameInfo.h:371</a></div></div>
<div class="ttc" id="astructllvm_1_1WinEHFuncInfo_html_a14648296e0e889504d49ee3aa956663c"><div class="ttname"><a href="structllvm_1_1WinEHFuncInfo.html#a14648296e0e889504d49ee3aa956663c">llvm::WinEHFuncInfo::PSPSymFrameIdx</a></div><div class="ttdeci">int PSPSymFrameIdx</div><div class="ttdef"><b>Definition:</b> <a href="WinEHFuncInfo_8h_source.html#l00100">WinEHFuncInfo.h:100</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac78c09ae232b2ce188ff590d51e3c268"><div class="ttname"><a href="namespacellvm.html#ac78c09ae232b2ce188ff590d51e3c268">llvm::find_if</a></div><div class="ttdeci">auto find_if(R &amp;&amp;Range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::find_if which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01762">STLExtras.h:1762</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_ac09a21c371a9c535cbc13e8f82503aec"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#ac09a21c371a9c535cbc13e8f82503aec">llvm::ConstantInt::getZExtValue</a></div><div class="ttdeci">uint64_t getZExtValue() const</div><div class="ttdoc">Return the constant as a 64-bit unsigned integer value after it has been zero extended as appropriate...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00141">Constants.h:141</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_a2cc8bb867c8949943ca7d88f1db31fde"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a2cc8bb867c8949943ca7d88f1db31fde">llvm::MachineFrameInfo::hasCalls</a></div><div class="ttdeci">bool hasCalls() const</div><div class="ttdoc">Return true if the current function has any function calls.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00613">MachineFrameInfo.h:613</a></div></div>
<div class="ttc" id="aclassllvm_1_1Triple_html_a7736bfc4c1afef875ecf02f2a7701fe3"><div class="ttname"><a href="classllvm_1_1Triple.html#a7736bfc4c1afef875ecf02f2a7701fe3">llvm::Triple::isOSWindows</a></div><div class="ttdeci">bool isOSWindows() const</div><div class="ttdoc">Tests whether the OS is Windows.</div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00583">Triple.h:583</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a4b437632fd9b97dd36010d85eb363efe"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a4b437632fd9b97dd36010d85eb363efe">llvm::ISD::FrameIndex</a></div><div class="ttdeci">@ FrameIndex</div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00080">ISDOpcodes.h:80</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5d56157a385f8cd7d3e54ed87da1ba6aa88183b946cc5f0e8c96b2e66e1c74a7e"><div class="ttname"><a href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aa88183b946cc5f0e8c96b2e66e1c74a7e">llvm::EHPersonality::Unknown</a></div><div class="ttdeci">@ Unknown</div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_a5958512eae2979bd2eb383977996a600"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a></div><div class="ttdeci">MachineBasicBlock &amp; MBB</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00074">AArch64SLSHardening.cpp:74</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86Subtarget_html_aac9fed7d18a14e98755c75f532658b62"><div class="ttname"><a href="classllvm_1_1X86Subtarget.html#aac9fed7d18a14e98755c75f532658b62">llvm::X86Subtarget::isTargetFreeBSD</a></div><div class="ttdeci">bool isTargetFreeBSD() const</div><div class="ttdef"><b>Definition:</b> <a href="X86Subtarget_8h_source.html#l00281">X86Subtarget.h:281</a></div></div>
<div class="ttc" id="anamespacellvm_html_a076f93c387f454f0db13d4bc7d4e7f9c"><div class="ttname"><a href="namespacellvm.html#a076f93c387f454f0db13d4bc7d4e7f9c">llvm::stable_sort</a></div><div class="ttdeci">void stable_sort(R &amp;&amp;Range)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01948">STLExtras.h:1948</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_a640f34062e7189756ce67e60d5dfd629"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a640f34062e7189756ce67e60d5dfd629">llvm::MachineRegisterInfo::isLiveIn</a></div><div class="ttdeci">bool isLiveIn(Register Reg) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00440">MachineRegisterInfo.cpp:440</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_a926474da108c2083d64a3a03742677ae"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#a926474da108c2083d64a3a03742677ae">llvm::X86FrameLowering::SlotSize</a></div><div class="ttdeci">unsigned SlotSize</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8h_source.html#l00038">X86FrameLowering.h:38</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a4b21394c138cc5ae719510bb529ee099"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">llvm::MachineFunction::getFunction</a></div><div class="ttdeci">Function &amp; getFunction()</div><div class="ttdoc">Return the LLVM function that this machine code represents.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00638">MachineFunction.h:638</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ae42219072d798876e6b08e6b78614ff6"><div class="ttname"><a href="MD5_8cpp.html#ae42219072d798876e6b08e6b78614ff6">H</a></div><div class="ttdeci">#define H(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00057">MD5.cpp:57</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a4f117e439113383ea819a6f7beb8ff0b"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a4f117e439113383ea819a6f7beb8ff0b">llvm::MachineFunction::needsFrameMoves</a></div><div class="ttdeci">bool needsFrameMoves() const</div><div class="ttdoc">True if this function needs frame moves for debug or exceptions.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8cpp_source.html#l00628">MachineFunction.cpp:628</a></div></div>
<div class="ttc" id="aclassllvm_1_1CalleeSavedInfo_html"><div class="ttname"><a href="classllvm_1_1CalleeSavedInfo.html">llvm::CalleeSavedInfo</a></div><div class="ttdoc">The CalleeSavedInfo class tracks the information need to locate where a callee saved register is in t...</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00034">MachineFrameInfo.h:34</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86Subtarget_html_a5cf14fb6eb48363c5fbf29622baaf853"><div class="ttname"><a href="classllvm_1_1X86Subtarget.html#a5cf14fb6eb48363c5fbf29622baaf853">llvm::X86Subtarget::isTargetWindowsMSVC</a></div><div class="ttdeci">bool isTargetWindowsMSVC() const</div><div class="ttdef"><b>Definition:</b> <a href="X86Subtarget_8h_source.html#l00300">X86Subtarget.h:300</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_ae68d159179d37dc7969439d842e2644f"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ae68d159179d37dc7969439d842e2644f">llvm::MachineFunction::getTarget</a></div><div class="ttdeci">const LLVMTargetMachine &amp; getTarget() const</div><div class="ttdoc">getTarget - Return the target machine this machine code is compiled with</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00668">MachineFunction.h:668</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_afeee4b43efe13447f760c28d545fe653"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#afeee4b43efe13447f760c28d545fe653">llvm::X86FrameLowering::STI</a></div><div class="ttdeci">const X86Subtarget &amp; STI</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8h_source.html#l00034">X86FrameLowering.h:34</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86Subtarget_html_a8c1a009c2cb9e56e7f1db7afc7ee1c97"><div class="ttname"><a href="classllvm_1_1X86Subtarget.html#a8c1a009c2cb9e56e7f1db7afc7ee1c97">llvm::X86Subtarget::isCallingConvWin64</a></div><div class="ttdeci">bool isCallingConvWin64(CallingConv::ID CC) const</div><div class="ttdef"><b>Definition:</b> <a href="X86Subtarget_8h_source.html#l00337">X86Subtarget.h:337</a></div></div>
<div class="ttc" id="aX86TargetMachine_8h_html"><div class="ttname"><a href="X86TargetMachine_8h.html">X86TargetMachine.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86RegisterInfo_html_a48595fc4feb49d51ed2eecbf73dadc24"><div class="ttname"><a href="classllvm_1_1X86RegisterInfo.html#a48595fc4feb49d51ed2eecbf73dadc24">llvm::X86RegisterInfo::findDeadCallerSavedReg</a></div><div class="ttdeci">unsigned findDeadCallerSavedReg(MachineBasicBlock &amp;MBB, MachineBasicBlock::iterator &amp;MBBI) const</div><div class="ttdoc">findDeadCallerSavedReg - Return a caller-saved register that isn't live when it reaches the &quot;return&quot; ...</div><div class="ttdef"><b>Definition:</b> <a href="X86RegisterInfo_8cpp_source.html#l00862">X86RegisterInfo.cpp:862</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a3435a2381e60e842e915f85c931b7dde"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a3435a2381e60e842e915f85c931b7dde">llvm::MachineBasicBlock::insert</a></div><div class="ttdeci">instr_iterator insert(instr_iterator I, MachineInstr *M)</div><div class="ttdoc">Insert MI into the instruction list before I, possibly inside a bundle.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l01336">MachineBasicBlock.cpp:1336</a></div></div>
<div class="ttc" id="aclassllvm_1_1ilist__iterator_html"><div class="ttname"><a href="classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdoc">Iterator for intrusive lists based on ilist_node.</div><div class="ttdef"><b>Definition:</b> <a href="ilist__iterator_8h_source.html#l00057">ilist_iterator.h:57</a></div></div>
<div class="ttc" id="aMachineFrameInfo_8h_html"><div class="ttname"><a href="MachineFrameInfo_8h.html">MachineFrameInfo.h</a></div></div>
<div class="ttc" id="astructllvm_1_1Align_html_a80735739b49cf97a491922c8f9af2cc1"><div class="ttname"><a href="structllvm_1_1Align.html#a80735739b49cf97a491922c8f9af2cc1">llvm::Align::value</a></div><div class="ttdeci">uint64_t value() const</div><div class="ttdoc">This is a hole in the type system and should not be abused.</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00085">Alignment.h:85</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a7ebfe0cc2f78ae5f27e1944412606973"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a7ebfe0cc2f78ae5f27e1944412606973">llvm::MachineBasicBlock::computeRegisterLiveness</a></div><div class="ttdeci">LivenessQueryResult computeRegisterLiveness(const TargetRegisterInfo *TRI, MCRegister Reg, const_iterator Before, unsigned Neighborhood=10) const</div><div class="ttdoc">Return whether (physical) register Reg has been defined and not killed as of just before Before.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l01509">MachineBasicBlock.cpp:1509</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_ac828d4f05c8f8b0a1d54c492f718e510"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ac828d4f05c8f8b0a1d54c492f718e510">llvm::MachineFunction::getWinEHFuncInfo</a></div><div class="ttdeci">const WinEHFuncInfo * getWinEHFuncInfo() const</div><div class="ttdoc">getWinEHFuncInfo - Return information about how the current function uses Windows exception handling.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00716">MachineFunction.h:716</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_a91705445bd9fc240a0092580cab1d092"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#a91705445bd9fc240a0092580cab1d092">llvm::X86FrameLowering::inlineStackProbe</a></div><div class="ttdeci">void inlineStackProbe(MachineFunction &amp;MF, MachineBasicBlock &amp;PrologMBB) const override</div><div class="ttdoc">Replace a StackProbe inline-stub with the actual probe code inline.</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l00601">X86FrameLowering.cpp:601</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86RegisterInfo_html_a0d077eae4ce42bad55b66dbf9166113d"><div class="ttname"><a href="classllvm_1_1X86RegisterInfo.html#a0d077eae4ce42bad55b66dbf9166113d">llvm::X86RegisterInfo::hasBasePointer</a></div><div class="ttdeci">bool hasBasePointer(const MachineFunction &amp;MF) const</div><div class="ttdef"><b>Definition:</b> <a href="X86RegisterInfo_8cpp_source.html#l00703">X86RegisterInfo.cpp:703</a></div></div>
<div class="ttc" id="aFunction_8h_html"><div class="ttname"><a href="Function_8h.html">Function.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a3d95cc2d359b8d9ed5bd9504b44930b5"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a3d95cc2d359b8d9ed5bd9504b44930b5">llvm::DenseMapBase::size</a></div><div class="ttdeci">unsigned size() const</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00099">DenseMap.h:99</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_a6cbb50454d9bb068f4ab6b2d08fb7abf"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#a6cbb50454d9bb068f4ab6b2d08fb7abf">llvm::X86FrameLowering::determineCalleeSaves</a></div><div class="ttdeci">void determineCalleeSaves(MachineFunction &amp;MF, BitVector &amp;SavedRegs, RegScavenger *RS=nullptr) const override</div><div class="ttdoc">This method determines which of the registers reported by TargetRegisterInfo::getCalleeSavedRegs() sh...</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l02842">X86FrameLowering.cpp:2842</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86MachineFunctionInfo_html_aa0d5df8154c4118afbefc1b9e8c6ad02"><div class="ttname"><a href="classllvm_1_1X86MachineFunctionInfo.html#aa0d5df8154c4118afbefc1b9e8c6ad02">llvm::X86MachineFunctionInfo::setUsesRedZone</a></div><div class="ttdeci">void setUsesRedZone(bool V)</div><div class="ttdef"><b>Definition:</b> <a href="X86MachineFunctionInfo_8h_source.html#l00211">X86MachineFunctionInfo.h:211</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_ad7332117b148c3f93c1d7e58306ee748"><div class="ttname"><a href="classllvm_1_1Function.html#ad7332117b148c3f93c1d7e58306ee748">llvm::Function::needsUnwindTableEntry</a></div><div class="ttdeci">bool needsUnwindTableEntry() const</div><div class="ttdoc">True if this function needs an unwind table.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00619">Function.h:619</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86MachineFunctionInfo_html_a8ed3059d287792eb8e73780ac551e918"><div class="ttname"><a href="classllvm_1_1X86MachineFunctionInfo.html#a8ed3059d287792eb8e73780ac551e918">llvm::X86MachineFunctionInfo::getHasSEHFramePtrSave</a></div><div class="ttdeci">bool getHasSEHFramePtrSave() const</div><div class="ttdef"><b>Definition:</b> <a href="X86MachineFunctionInfo_8h_source.html#l00197">X86MachineFunctionInfo.h:197</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a6f77e4e800ba4dffd63e8ddb330062aa"><div class="ttname"><a href="classllvm_1_1Function.html#a6f77e4e800ba4dffd63e8ddb330062aa">llvm::Function::getPersonalityFn</a></div><div class="ttdeci">Constant * getPersonalityFn() const</div><div class="ttdoc">Get the personality function associated with this function.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l01995">Function.cpp:1995</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_ad40522ac860df72189255e38782acc3f"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ad40522ac860df72189255e38782acc3f">llvm::MachineFunction::hasEHFunclets</a></div><div class="ttdeci">bool hasEHFunclets() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l01116">MachineFunction.h:1116</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineMemOperand_html_aaa2020e47e35179234b9ea27d555b2ddaed357b1367bc90a56fefa4d1b0e17374"><div class="ttname"><a href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2ddaed357b1367bc90a56fefa4d1b0e17374">llvm::MachineMemOperand::MOStore</a></div><div class="ttdeci">@ MOStore</div><div class="ttdoc">The memory access writes data.</div><div class="ttdef"><b>Definition:</b> <a href="MachineMemOperand_8h_source.html#l00136">MachineMemOperand.h:136</a></div></div>
<div class="ttc" id="aclassllvm_1_1BitVector_html_a5109693c2cdda2a4118e7d588b51bfa6"><div class="ttname"><a href="classllvm_1_1BitVector.html#a5109693c2cdda2a4118e7d588b51bfa6">llvm::BitVector::reset</a></div><div class="ttdeci">BitVector &amp; reset()</div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00385">BitVector.h:385</a></div></div>
<div class="ttc" id="aWinEHFuncInfo_8h_html"><div class="ttname"><a href="WinEHFuncInfo_8h.html">WinEHFuncInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_a7761d9f26e6c0722ee9c9d8c5e052c1c"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#a7761d9f26e6c0722ee9c9d8c5e052c1c">llvm::X86FrameLowering::IsLP64</a></div><div class="ttdeci">bool IsLP64</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8h_source.html#l00043">X86FrameLowering.h:43</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86MachineFunctionInfo_html_a046dd28b46bd584d050eca36d081c372"><div class="ttname"><a href="classllvm_1_1X86MachineFunctionInfo.html#a046dd28b46bd584d050eca36d081c372">llvm::X86MachineFunctionInfo::getForceFramePointer</a></div><div class="ttdeci">bool getForceFramePointer() const</div><div class="ttdef"><b>Definition:</b> <a href="X86MachineFunctionInfo_8h_source.html#l00144">X86MachineFunctionInfo.h:144</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARMBuildAttrs_html_aea10ca6bf098a425d51ac7fe65d30ed6aa10cda45fcbf7c8c9804e4e4d2e1bcdf"><div class="ttname"><a href="namespacellvm_1_1ARMBuildAttrs.html#aea10ca6bf098a425d51ac7fe65d30ed6aa10cda45fcbf7c8c9804e4e4d2e1bcdf">llvm::ARMBuildAttrs::Symbol</a></div><div class="ttdeci">@ Symbol</div><div class="ttdef"><b>Definition:</b> <a href="ARMBuildAttributes_8h_source.html#l00083">ARMBuildAttributes.h:83</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a5b166ae228ebbfdb96736d6022f3feedafde87569738f9e23963e8735f71c33eb"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feedafde87569738f9e23963e8735f71c33eb">llvm::CallingConv::X86_FastCall</a></div><div class="ttdeci">@ X86_FastCall</div><div class="ttdoc">'fast' analog of X86_StdCall.</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00100">CallingConv.h:100</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVMatInt_html_a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c"><div class="ttname"><a href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">llvm::RISCVMatInt::Imm</a></div><div class="ttdeci">@ Imm</div><div class="ttdef"><b>Definition:</b> <a href="RISCVMatInt_8h_source.html#l00023">RISCVMatInt.h:23</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_a116242916a44a6d4f5301270c6c4f05e"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#a116242916a44a6d4f5301270c6c4f05e">llvm::X86FrameLowering::X86FrameLowering</a></div><div class="ttdeci">X86FrameLowering(const X86Subtarget &amp;STI, MaybeAlign StackAlignOverride)</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l00047">X86FrameLowering.cpp:47</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CodeModel_html_afc59396a9e5809fc92938e203d91a8dfa5208f558fccf9f63423fb5385bb3e75c"><div class="ttname"><a href="namespacellvm_1_1CodeModel.html#afc59396a9e5809fc92938e203d91a8dfa5208f558fccf9f63423fb5385bb3e75c">llvm::CodeModel::Large</a></div><div class="ttdeci">@ Large</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_8h_source.html#l00031">CodeGen.h:31</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RegState_html_aef4cc0c855dc833e2a9d58a50703320da9ddde91ef09476d28a088fe57f8e2921"><div class="ttname"><a href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da9ddde91ef09476d28a088fe57f8e2921">llvm::RegState::Kill</a></div><div class="ttdeci">@ Kill</div><div class="ttdoc">The last use of a register.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00048">MachineInstrBuilder.h:48</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_af457a58a84b500d44feb7b699aa43ec1"><div class="ttname"><a href="classllvm_1_1Function.html#af457a58a84b500d44feb7b699aa43ec1">llvm::Function::isVarArg</a></div><div class="ttdeci">bool isVarArg() const</div><div class="ttdoc">isVarArg - Return true if this function takes a variable number of arguments.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00187">Function.h:187</a></div></div>
<div class="ttc" id="anamespacellvm_html_aac57d4100e9a9d02522fbd724568397d"><div class="ttname"><a href="namespacellvm.html#aac57d4100e9a9d02522fbd724568397d">llvm::getKillRegState</a></div><div class="ttdeci">unsigned getKillRegState(bool B)</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00531">MachineInstrBuilder.h:531</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCRegAliasIterator_html_ac336c049c12ead7be5b86e6d046f8ab0"><div class="ttname"><a href="classllvm_1_1MCRegAliasIterator.html#ac336c049c12ead7be5b86e6d046f8ab0">llvm::MCRegAliasIterator::isValid</a></div><div class="ttdeci">bool isValid() const</div><div class="ttdef"><b>Definition:</b> <a href="MCRegisterInfo_8h_source.html#l00813">MCRegisterInfo.h:813</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html">llvm::MachineFrameInfo</a></div><div class="ttdoc">The MachineFrameInfo class represents an abstract stack frame until prolog/epilog code is inserted.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00106">MachineFrameInfo.h:106</a></div></div>
<div class="ttc" id="anamespacellvm_html_a17e04afcf0c5efeb0eb6a9a45287b5e4"><div class="ttname"><a href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">llvm::BuildMI</a></div><div class="ttdeci">MachineInstrBuilder BuildMI(MachineFunction &amp;MF, const MIMetadata &amp;MIMD, const MCInstrDesc &amp;MCID)</div><div class="ttdoc">Builder interface. Specify how to create the initial instruction itself.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00357">MachineInstrBuilder.h:357</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9256279285c60fce1b2eb1b928599461"><div class="ttname"><a href="namespacellvm.html#a9256279285c60fce1b2eb1b928599461">llvm::skipDebugInstructionsBackward</a></div><div class="ttdeci">IterT skipDebugInstructionsBackward(IterT It, IterT Begin, bool SkipPseudoOp=true)</div><div class="ttdoc">Decrement It until it points to a non-debug instruction or to Begin and return the resulting iterator...</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l01312">MachineBasicBlock.h:1312</a></div></div>
<div class="ttc" id="astructllvm_1_1MachinePointerInfo_html_ad8ce1aee13dbdcc05d20284a30e83170"><div class="ttname"><a href="structllvm_1_1MachinePointerInfo.html#ad8ce1aee13dbdcc05d20284a30e83170">llvm::MachinePointerInfo::getFixedStack</a></div><div class="ttdeci">static MachinePointerInfo getFixedStack(MachineFunction &amp;MF, int FI, int64_t Offset=0)</div><div class="ttdoc">Return a MachinePointerInfo record that refers to the specified FrameIndex.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8cpp_source.html#l01049">MachineOperand.cpp:1049</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_ab2d91e7bec944efcbc39d8e30644f111"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">llvm::MachineBasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00309">MachineBasicBlock.h:309</a></div></div>
<div class="ttc" id="aMachineInstrBuilder_8h_html"><div class="ttname"><a href="MachineInstrBuilder_8h.html">MachineInstrBuilder.h</a></div></div>
<div class="ttc" id="aX86FrameLowering_8cpp_html_a97265f2cad366f364b2bc884e589277e"><div class="ttname"><a href="X86FrameLowering_8cpp.html#a97265f2cad366f364b2bc884e589277e">isFuncletReturnInstr</a></div><div class="ttdeci">static bool isFuncletReturnInstr(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l02096">X86FrameLowering.cpp:2096</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_a0c500b38e3912753a3b7354b88b10993"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#a0c500b38e3912753a3b7354b88b10993">llvm::X86FrameLowering::canSimplifyCallFramePseudos</a></div><div class="ttdeci">bool canSimplifyCallFramePseudos(const MachineFunction &amp;MF) const override</div><div class="ttdoc">canSimplifyCallFramePseudos - If there is a reserved call frame, the call frame pseudos can be simpli...</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l00072">X86FrameLowering.cpp:72</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86RegisterInfo_html_a92866ff258d3a2244a47257a8a4876cf"><div class="ttname"><a href="classllvm_1_1X86RegisterInfo.html#a92866ff258d3a2244a47257a8a4876cf">llvm::X86RegisterInfo::getSlotSize</a></div><div class="ttdeci">unsigned getSlotSize() const</div><div class="ttdef"><b>Definition:</b> <a href="X86RegisterInfo_8h_source.html#l00158">X86RegisterInfo.h:158</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARM_1_1WinEH_html_abbeb84a95402989ddf5e26b616f8d9b4"><div class="ttname"><a href="namespacellvm_1_1ARM_1_1WinEH.html#abbeb84a95402989ddf5e26b616f8d9b4">llvm::ARM::WinEH::StackAdjustment</a></div><div class="ttdeci">uint16_t StackAdjustment(const RuntimeFunction &amp;RF)</div><div class="ttdoc">StackAdjustment - calculated stack adjustment in words.</div><div class="ttdef"><b>Definition:</b> <a href="ARMWinEH_8h_source.html#l00199">ARMWinEH.h:199</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_a432824f0975bb863478bf4ef3a5df258"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a432824f0975bb863478bf4ef3a5df258">llvm::MachineInstr::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const</div><div class="ttdoc">Retuns the total number of operands.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00519">MachineInstr.h:519</a></div></div>
<div class="ttc" id="anamespacellvm_1_1N86_html_a004aaa5711c58178d0371ab88bf1bd63a3037fe2787fbbc55d78cbf8ba4768dc8"><div class="ttname"><a href="namespacellvm_1_1N86.html#a004aaa5711c58178d0371ab88bf1bd63a3037fe2787fbbc55d78cbf8ba4768dc8">llvm::N86::EBX</a></div><div class="ttdeci">@ EBX</div><div class="ttdef"><b>Definition:</b> <a href="X86MCTargetDesc_8h_source.html#l00051">X86MCTargetDesc.h:51</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_ab69c52bac76806c714de3de7674d8f31"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#ab69c52bac76806c714de3de7674d8f31">llvm::X86FrameLowering::Is64Bit</a></div><div class="ttdeci">bool Is64Bit</div><div class="ttdoc">Is64Bit implies that x86_64 instructions are available.</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8h_source.html#l00041">X86FrameLowering.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetMachine_html_ad63e0e437ca71cc2b5a5d4d5aa3685f2"><div class="ttname"><a href="classllvm_1_1TargetMachine.html#ad63e0e437ca71cc2b5a5d4d5aa3685f2">llvm::TargetMachine::getTargetTriple</a></div><div class="ttdeci">const Triple &amp; getTargetTriple() const</div><div class="ttdef"><b>Definition:</b> <a href="Target_2TargetMachine_8h_source.html#l00127">TargetMachine.h:127</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html_a3b35a6541507efcfdf8d270f062e6f60"><div class="ttname"><a href="classllvm_1_1Module.html#a3b35a6541507efcfdf8d270f062e6f60">llvm::Module::getNamedMetadata</a></div><div class="ttdeci">NamedMDNode * getNamedMetadata(const Twine &amp;Name) const</div><div class="ttdoc">Return the first NamedMDNode in the module with the specified name.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8cpp_source.html#l00251">Module.cpp:251</a></div></div>
<div class="ttc" id="astructllvm_1_1WinEHFuncInfo_html_a38a08c28728c84e59ce6c4ef79bdabcc"><div class="ttname"><a href="structllvm_1_1WinEHFuncInfo.html#a38a08c28728c84e59ce6c4ef79bdabcc">llvm::WinEHFuncInfo::SEHSetFrameOffset</a></div><div class="ttdeci">int SEHSetFrameOffset</div><div class="ttdef"><b>Definition:</b> <a href="WinEHFuncInfo_8h_source.html#l00110">WinEHFuncInfo.h:110</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_abb804392ca8368795013f2e5dc001ee2"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#abb804392ca8368795013f2e5dc001ee2">llvm::X86FrameLowering::Uses64BitFramePtr</a></div><div class="ttdeci">bool Uses64BitFramePtr</div><div class="ttdoc">True if the 64-bit frame or stack pointer should be used.</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8h_source.html#l00048">X86FrameLowering.h:48</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl&lt; int &gt;</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6b0ac1fa4f05de76413c5e0ca6334035"><div class="ttname"><a href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">llvm::reverse</a></div><div class="ttdeci">auto reverse(ContainerTy &amp;&amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00484">STLExtras.h:484</a></div></div>
<div class="ttc" id="aclassllvm_1_1ValueAsMetadata_html"><div class="ttname"><a href="classllvm_1_1ValueAsMetadata.html">llvm::ValueAsMetadata</a></div><div class="ttdoc">Value wrapper in the Metadata hierarchy.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00344">Metadata.h:344</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a046a35e36c4c1206711ea82ee9cb6d72"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a046a35e36c4c1206711ea82ee9cb6d72">llvm::MachineBasicBlock::transferSuccessorsAndUpdatePHIs</a></div><div class="ttdeci">void transferSuccessorsAndUpdatePHIs(MachineBasicBlock *FromMBB)</div><div class="ttdoc">Transfers all the successors, as in transferSuccessors, and update PHI operands in the successor bloc...</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00911">MachineBasicBlock.cpp:911</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_a87a1fe769ec763a9c8f8427a017a45d7"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a87a1fe769ec763a9c8f8427a017a45d7">llvm::MachineFrameInfo::setOffsetAdjustment</a></div><div class="ttdeci">void setOffsetAdjustment(int Adj)</div><div class="ttdoc">Set the correction for frame offsets.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00597">MachineFrameInfo.h:597</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCCFIInstruction_html_aea2b8a3efd6694a33452ed7e8716300e"><div class="ttname"><a href="classllvm_1_1MCCFIInstruction.html#aea2b8a3efd6694a33452ed7e8716300e">llvm::MCCFIInstruction::createOffset</a></div><div class="ttdeci">static MCCFIInstruction createOffset(MCSymbol *L, unsigned Register, int Offset)</div><div class="ttdoc">.cfi_offset Previous value of Register is saved at offset Offset from CFA.</div><div class="ttdef"><b>Definition:</b> <a href="MCDwarf_8h_source.html#l00571">MCDwarf.h:571</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86TargetLowering_html_af64132885aa4151887699b689283e850"><div class="ttname"><a href="classllvm_1_1X86TargetLowering.html#af64132885aa4151887699b689283e850">llvm::X86TargetLowering::getStackProbeSize</a></div><div class="ttdeci">unsigned getStackProbeSize(const MachineFunction &amp;MF) const</div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8cpp_source.html#l58277">X86ISelLowering.cpp:58277</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86RegisterInfo_html_a75001f504c95fbf8b2286ec95e9fa169"><div class="ttname"><a href="classllvm_1_1X86RegisterInfo.html#a75001f504c95fbf8b2286ec95e9fa169">llvm::X86RegisterInfo::getStackRegister</a></div><div class="ttdeci">Register getStackRegister() const</div><div class="ttdef"><b>Definition:</b> <a href="X86RegisterInfo_8h_source.html#l00150">X86RegisterInfo.h:150</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_a51773b6c05f392988bf6395ccd1788ce"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a51773b6c05f392988bf6395ccd1788ce">llvm::MachineFrameInfo::hasOpaqueSPAdjustment</a></div><div class="ttdeci">bool hasOpaqueSPAdjustment() const</div><div class="ttdoc">Returns true if the function contains opaque dynamic stack adjustments.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00617">MachineFrameInfo.h:617</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a5b166ae228ebbfdb96736d6022f3feedad6e9c0ff694f0fca0222e79e772b647e"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feedad6e9c0ff694f0fca0222e79e772b647e">llvm::CallingConv::Tail</a></div><div class="ttdeci">@ Tail</div><div class="ttdoc">Attemps to make calls as fast as possible while guaranteeing that tail call optimization can always b...</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00076">CallingConv.h:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetMachine_html_ae106f6c6362377b3016f0d174227e193"><div class="ttname"><a href="classllvm_1_1TargetMachine.html#ae106f6c6362377b3016f0d174227e193">llvm::TargetMachine::getCodeModel</a></div><div class="ttdeci">CodeModel::Model getCodeModel() const</div><div class="ttdoc">Returns the code model.</div><div class="ttdef"><b>Definition:</b> <a href="Target_2TargetMachine_8h_source.html#l00233">TargetMachine.h:233</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_aef0079a40a972f2942156b2d73bbf190"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#aef0079a40a972f2942156b2d73bbf190">llvm::X86FrameLowering::BuildCFI</a></div><div class="ttdeci">void BuildCFI(MachineBasicBlock &amp;MBB, MachineBasicBlock::iterator MBBI, const DebugLoc &amp;DL, const MCCFIInstruction &amp;CFIInst, MachineInstr::MIFlag Flag=MachineInstr::NoFlags) const</div><div class="ttdoc">Wraps up getting a CFI index and building a MachineInstr for it.</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l00437">X86FrameLowering.cpp:437</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a6af779d02be6e05e3315887e58e8ec35"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a6af779d02be6e05e3315887e58e8ec35">llvm::MachineFunction::createExternalSymbolName</a></div><div class="ttdeci">const char * createExternalSymbolName(StringRef Name)</div><div class="ttdoc">Allocate a string and populate it with the given external symbol name.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8cpp_source.html#l00555">MachineFunction.cpp:555</a></div></div>
<div class="ttc" id="aX86FrameLowering_8cpp_html_ae2c3c56fbe514f4a3ee837a4af0499a8"><div class="ttname"><a href="X86FrameLowering_8cpp.html#ae2c3c56fbe514f4a3ee837a4af0499a8">getHiPELiteral</a></div><div class="ttdeci">static unsigned getHiPELiteral(NamedMDNode *HiPELiteralsMD, const StringRef LiteralName)</div><div class="ttdoc">Lookup an ERTS parameter in the !hipe.literals named metadata node.</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l03148">X86FrameLowering.cpp:3148</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetFrameLowering_html_a2f26766f4dcfa6457ba405584a34d5c3"><div class="ttname"><a href="classllvm_1_1TargetFrameLowering.html#a2f26766f4dcfa6457ba405584a34d5c3">llvm::TargetFrameLowering::determineCalleeSaves</a></div><div class="ttdeci">virtual void determineCalleeSaves(MachineFunction &amp;MF, BitVector &amp;SavedRegs, RegScavenger *RS=nullptr) const</div><div class="ttdoc">This method determines which of the registers reported by TargetRegisterInfo::getCalleeSavedRegs() sh...</div><div class="ttdef"><b>Definition:</b> <a href="TargetFrameLoweringImpl_8cpp_source.html#l00082">TargetFrameLoweringImpl.cpp:82</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_aa7d9e2f26e4c8b32f51c455b220ce13c"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#aa7d9e2f26e4c8b32f51c455b220ce13c">llvm::MachineFrameInfo::hasStackMap</a></div><div class="ttdeci">bool hasStackMap() const</div><div class="ttdoc">This method may be called any time after instruction selection is complete to determine if there is a...</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00383">MachineFrameInfo.h:383</a></div></div>
<div class="ttc" id="aclassllvm_1_1DebugLoc_html"><div class="ttname"><a href="classllvm_1_1DebugLoc.html">llvm::DebugLoc</a></div><div class="ttdoc">A debug info location.</div><div class="ttdef"><b>Definition:</b> <a href="DebugLoc_8h_source.html#l00033">DebugLoc.h:33</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_ab7147559f9c35cbab44e96ecc2408c90"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#ab7147559f9c35cbab44e96ecc2408c90">llvm::X86FrameLowering::StackPtr</a></div><div class="ttdeci">unsigned StackPtr</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8h_source.html#l00050">X86FrameLowering.h:50</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFrameInfo_html_a19e260b3bbf8fad8480d151e11919836"><div class="ttname"><a href="classllvm_1_1MachineFrameInfo.html#a19e260b3bbf8fad8480d151e11919836">llvm::MachineFrameInfo::adjustsStack</a></div><div class="ttdeci">bool adjustsStack() const</div><div class="ttdoc">Return true if this function adjusts the stack – e.g., when calling another function.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFrameInfo_8h_source.html#l00609">MachineFrameInfo.h:609</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDString_html_ae44259d9edd71181ea8b89d18f27a967"><div class="ttname"><a href="classllvm_1_1MDString.html#ae44259d9edd71181ea8b89d18f27a967">llvm::MDString::getString</a></div><div class="ttdeci">StringRef getString() const</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l00507">Metadata.cpp:507</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_ac7b381a1c38101d4e17121c7b993e00c"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#ac7b381a1c38101d4e17121c7b993e00c">llvm::X86FrameLowering::getWinEHParentFrameOffset</a></div><div class="ttdeci">unsigned getWinEHParentFrameOffset(const MachineFunction &amp;MF) const override</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l03786">X86FrameLowering.cpp:3786</a></div></div>
<div class="ttc" id="aMachineFunction_8h_html"><div class="ttname"><a href="MachineFunction_8h.html">MachineFunction.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1StackOffset_html_a0775e5fb52ac148f4d06e7eedb34e94e"><div class="ttname"><a href="classllvm_1_1StackOffset.html#a0775e5fb52ac148f4d06e7eedb34e94e">llvm::StackOffset::getFixed</a></div><div class="ttdeci">int64_t getFixed() const</div><div class="ttdoc">Returns the fixed component of the stack.</div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00052">TypeSize.h:52</a></div></div>
<div class="ttc" id="aX86FrameLowering_8cpp_html_ad6f5455eb7ba6ed74cab551099d0a952"><div class="ttname"><a href="X86FrameLowering_8cpp.html#ad6f5455eb7ba6ed74cab551099d0a952">kSplitStackAvailable</a></div><div class="ttdeci">static const uint64_t kSplitStackAvailable</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l02907">X86FrameLowering.cpp:2907</a></div></div>
<div class="ttc" id="anamespacellvm_1_1X86AS_html_aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730"><div class="ttname"><a href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730">llvm::X86AS::GS</a></div><div class="ttdeci">@ GS</div><div class="ttdef"><b>Definition:</b> <a href="X86_8h_source.html#l00200">X86.h:200</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDString_html"><div class="ttname"><a href="classllvm_1_1MDString.html">llvm::MDString</a></div><div class="ttdoc">A single uniqued string.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00611">Metadata.h:611</a></div></div>
<div class="ttc" id="aX86InstrInfo_8h_html"><div class="ttname"><a href="X86InstrInfo_8h.html">X86InstrInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBundleIterator_html"><div class="ttname"><a href="classllvm_1_1MachineInstrBundleIterator.html">llvm::MachineInstrBundleIterator&lt; MachineInstr &gt;</a></div></div>
<div class="ttc" id="anamespacellvm_1_1X86_html_a1a356a51a1fb4cc3c427599082cf1d2ea80da60ed5c7b20653afe0b4b21a91ec1"><div class="ttname"><a href="namespacellvm_1_1X86.html#a1a356a51a1fb4cc3c427599082cf1d2ea80da60ed5c7b20653afe0b4b21a91ec1">llvm::X86::COND_E</a></div><div class="ttdeci">@ COND_E</div><div class="ttdef"><b>Definition:</b> <a href="X86BaseInfo_8h_source.html#l00085">X86BaseInfo.h:85</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCAsmInfo_html_ac158349781823fe8ff9e02d3a3533d55"><div class="ttname"><a href="classllvm_1_1MCAsmInfo.html#ac158349781823fe8ff9e02d3a3533d55">llvm::MCAsmInfo::usesWindowsCFI</a></div><div class="ttdeci">bool usesWindowsCFI() const</div><div class="ttdef"><b>Definition:</b> <a href="MCAsmInfo_8h_source.html#l00797">MCAsmInfo.h:797</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86MachineFunctionInfo_html_a75b0fbc272791b1c8f9acaa3564abddb"><div class="ttname"><a href="classllvm_1_1X86MachineFunctionInfo.html#a75b0fbc272791b1c8f9acaa3564abddb">llvm::X86MachineFunctionInfo::getSEHFramePtrSaveIndex</a></div><div class="ttdeci">int getSEHFramePtrSaveIndex() const</div><div class="ttdef"><b>Definition:</b> <a href="X86MachineFunctionInfo_8h_source.html#l00200">X86MachineFunctionInfo.h:200</a></div></div>
<div class="ttc" id="anamespacellvm_html_a2816e84a08c108d18bc4665bc1817e01"><div class="ttname"><a href="namespacellvm.html#a2816e84a08c108d18bc4665bc1817e01">llvm::abs</a></div><div class="ttdeci">APFloat abs(APFloat X)</div><div class="ttdoc">Returns the absolute value of the argument.</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l01332">APFloat.h:1332</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_a84fbe17f451c957c67de546c98f2b79b"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#a84fbe17f451c957c67de546c98f2b79b">llvm::X86FrameLowering::getFrameIndexReference</a></div><div class="ttdeci">StackOffset getFrameIndexReference(const MachineFunction &amp;MF, int FI, Register &amp;FrameReg) const override</div><div class="ttdoc">getFrameIndexReference - This method should return the base register and offset used to reference a f...</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l02383">X86FrameLowering.cpp:2383</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RegState_html_aef4cc0c855dc833e2a9d58a50703320da72c17e2ff2d5af62a30e56ac152aa8d5"><div class="ttname"><a href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da72c17e2ff2d5af62a30e56ac152aa8d5">llvm::RegState::Define</a></div><div class="ttdeci">@ Define</div><div class="ttdoc">Register definition.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00044">MachineInstrBuilder.h:44</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineModuleInfo_html_a1f6aa8381a83bceb61c4be0ef73b4dfc"><div class="ttname"><a href="classllvm_1_1MachineModuleInfo.html#a1f6aa8381a83bceb61c4be0ef73b4dfc">llvm::MachineModuleInfo::getModule</a></div><div class="ttdeci">const Module * getModule() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineModuleInfo_8h_source.html#l00146">MachineModuleInfo.h:146</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86Subtarget_html_af9fd7bd9b13be1d777c9ac2ac90784c1"><div class="ttname"><a href="classllvm_1_1X86Subtarget.html#af9fd7bd9b13be1d777c9ac2ac90784c1">llvm::X86Subtarget::useIndirectThunkCalls</a></div><div class="ttdeci">bool useIndirectThunkCalls() const</div><div class="ttdef"><b>Definition:</b> <a href="X86Subtarget_8h_source.html#l00231">X86Subtarget.h:231</a></div></div>
<div class="ttc" id="anamespacellvm_html_a2ca3855108426698ff21517a7c884c84ab4fe87e4046ecd1f9f3d96bbf63822b3"><div class="ttname"><a href="namespacellvm.html#a2ca3855108426698ff21517a7c884c84ab4fe87e4046ecd1f9f3d96bbf63822b3">llvm::ExceptionHandling::DwarfCFI</a></div><div class="ttdeci">@ DwarfCFI</div><div class="ttdoc">DWARF-like instruction based exceptions.</div></div>
<div class="ttc" id="anamespacellvm_1_1MCID_html_ab357441fcd1ea1f9b0d27c12700f6023af121d798d2c14b32e81d537a1f0cff8d"><div class="ttname"><a href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023af121d798d2c14b32e81d537a1f0cff8d">llvm::MCID::Terminator</a></div><div class="ttdeci">@ Terminator</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00158">MCInstrDesc.h:158</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86Subtarget_html_a774ed978c421456ac91540c247cbee95"><div class="ttname"><a href="classllvm_1_1X86Subtarget.html#a774ed978c421456ac91540c247cbee95">llvm::X86Subtarget::swiftAsyncContextIsDynamicallySet</a></div><div class="ttdeci">bool swiftAsyncContextIsDynamicallySet() const</div><div class="ttdoc">Return whether FrameLowering should always set the &quot;extended frame present&quot; bit in FP,...</div><div class="ttdef"><b>Definition:</b> <a href="X86Subtarget_8h_source.html#l00386">X86Subtarget.h:386</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86Subtarget_html_ae6ea07c18750ab2b37189cef9a99914a"><div class="ttname"><a href="classllvm_1_1X86Subtarget.html#ae6ea07c18750ab2b37189cef9a99914a">llvm::X86Subtarget::isTargetNaCl64</a></div><div class="ttdeci">bool isTargetNaCl64() const</div><div class="ttdef"><b>Definition:</b> <a href="X86Subtarget_8h_source.html#l00296">X86Subtarget.h:296</a></div></div>
<div class="ttc" id="aX86FrameLowering_8cpp_html_a6420ad77b9c213cea2ae49052e0ff55a"><div class="ttname"><a href="X86FrameLowering_8cpp.html#a6420ad77b9c213cea2ae49052e0ff55a">getSUBriOpcode</a></div><div class="ttdeci">static unsigned getSUBriOpcode(bool IsLP64, int64_t Imm)</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l00107">X86FrameLowering.cpp:107</a></div></div>
<div class="ttc" id="aDebug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="aX86FrameLowering_8cpp_html_a39d0dcc2605f63349a774a79927b2209"><div class="ttname"><a href="X86FrameLowering_8cpp.html#a39d0dcc2605f63349a774a79927b2209">getMOVriOpcode</a></div><div class="ttdeci">static unsigned getMOVriOpcode(bool Use64BitReg, int64_t Imm)</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l00154">X86FrameLowering.cpp:154</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_acbc921830578e2741be6549db716c0ce"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">llvm::MachineBasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00311">MachineBasicBlock.h:311</a></div></div>
<div class="ttc" id="anamespacellvm_html_a78637df2e0b9a5e2109af945b0baaf34a68eec46437c384d8dad18d5464ebc35c"><div class="ttname"><a href="namespacellvm.html#a78637df2e0b9a5e2109af945b0baaf34a68eec46437c384d8dad18d5464ebc35c">llvm::SwiftAsyncFramePointerMode::Always</a></div><div class="ttdeci">@ Always</div><div class="ttdoc">Always set the bit.</div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_a5f9f26d96deb10d0d3b394fe12e2b0f5"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#a5f9f26d96deb10d0d3b394fe12e2b0f5">llvm::X86FrameLowering::getInitialCFAOffset</a></div><div class="ttdeci">int getInitialCFAOffset(const MachineFunction &amp;MF) const override</div><div class="ttdoc">Return initial CFA offset value i.e.</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l03634">X86FrameLowering.cpp:3634</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCRegAliasIterator_html"><div class="ttname"><a href="classllvm_1_1MCRegAliasIterator.html">llvm::MCRegAliasIterator</a></div><div class="ttdoc">MCRegAliasIterator enumerates all registers aliasing Reg.</div><div class="ttdef"><b>Definition:</b> <a href="MCRegisterInfo_8h_source.html#l00788">MCRegisterInfo.h:788</a></div></div>
<div class="ttc" id="anamespacellvm_1_1X86_html_a1a356a51a1fb4cc3c427599082cf1d2eacb2f86eaebe8b719f743d17a2d5a5f3d"><div class="ttname"><a href="namespacellvm_1_1X86.html#a1a356a51a1fb4cc3c427599082cf1d2eacb2f86eaebe8b719f743d17a2d5a5f3d">llvm::X86::COND_NE</a></div><div class="ttdeci">@ COND_NE</div><div class="ttdef"><b>Definition:</b> <a href="X86BaseInfo_8h_source.html#l00086">X86BaseInfo.h:86</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_abac406e51bd21d4da6eb9762f2f36df6"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#abac406e51bd21d4da6eb9762f2f36df6">llvm::X86FrameLowering::getInitialCFARegister</a></div><div class="ttdeci">Register getInitialCFARegister(const MachineFunction &amp;MF) const override</div><div class="ttdoc">Return initial CFA register value i.e.</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l03639">X86FrameLowering.cpp:3639</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCRegister_html"><div class="ttname"><a href="classllvm_1_1MCRegister.html">llvm::MCRegister</a></div><div class="ttdoc">Wrapper class representing physical registers. Should be passed by value.</div><div class="ttdef"><b>Definition:</b> <a href="MCRegister_8h_source.html#l00024">MCRegister.h:24</a></div></div>
<div class="ttc" id="aSmallSet_8h_html"><div class="ttname"><a href="SmallSet_8h.html">SmallSet.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_ab0d1155c8c38e84cbe387998fd2e517e"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ab0d1155c8c38e84cbe387998fd2e517e">llvm::MachineOperand::isGlobal</a></div><div class="ttdeci">bool isGlobal() const</div><div class="ttdoc">isGlobal - Tests if this is a MO_GlobalAddress operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00347">MachineOperand.h:347</a></div></div>
<div class="ttc" id="aLivePhysRegs_8h_html"><div class="ttname"><a href="LivePhysRegs_8h.html">LivePhysRegs.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCCFIInstruction_html_a3828c9fbb57095c51896fb2499e60044"><div class="ttname"><a href="classllvm_1_1MCCFIInstruction.html#a3828c9fbb57095c51896fb2499e60044">llvm::MCCFIInstruction::createRestore</a></div><div class="ttdeci">static MCCFIInstruction createRestore(MCSymbol *L, unsigned Register)</div><div class="ttdoc">.cfi_restore says that the rule for Register is now the same as it was at the beginning of the functi...</div><div class="ttdef"><b>Definition:</b> <a href="MCDwarf_8h_source.html#l00604">MCDwarf.h:604</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86FrameLowering_html_a6a6cb0d8b5d8e3b35dee29f5e752d31c"><div class="ttname"><a href="classllvm_1_1X86FrameLowering.html#a6a6cb0d8b5d8e3b35dee29f5e752d31c">llvm::X86FrameLowering::emitStackProbe</a></div><div class="ttdeci">void emitStackProbe(MachineFunction &amp;MF, MachineBasicBlock &amp;MBB, MachineBasicBlock::iterator MBBI, const DebugLoc &amp;DL, bool InProlog, std::optional&lt; MachineFunction::DebugInstrOperandPair &gt; InstrNum=std::nullopt) const</div><div class="ttdoc">Emit target stack probe code.</div><div class="ttdef"><b>Definition:</b> <a href="X86FrameLowering_8cpp_source.html#l00580">X86FrameLowering.cpp:580</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:21:57 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

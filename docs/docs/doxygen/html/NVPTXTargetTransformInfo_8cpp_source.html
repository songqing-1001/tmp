<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Target/NVPTX/NVPTXTargetTransformInfo.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_794e483eb1cc7921d35fd149d9cc325b.html">Target</a></li><li class="navelem"><a class="el" href="dir_fe493ff4c29aeb7f930cb534e2b86d17.html">NVPTX</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">NVPTXTargetTransformInfo.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="NVPTXTargetTransformInfo_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===-- NVPTXTargetTransformInfo.cpp - NVPTX specific TTI -----------------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160; </div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="NVPTXTargetTransformInfo_8h.html">NVPTXTargetTransformInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="NVPTXUtilities_8h.html">NVPTXUtilities.h</a>&quot;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopInfo_8h.html">llvm/Analysis/LoopInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetTransformInfo_8h.html">llvm/Analysis/TargetTransformInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueTracking_8h.html">llvm/Analysis/ValueTracking.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicTTIImpl_8h.html">llvm/CodeGen/BasicTTIImpl.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CostTable_8h.html">llvm/CodeGen/CostTable.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetLowering_8h.html">llvm/CodeGen/TargetLowering.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;llvm/IR/IntrinsicsNVPTX.h&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;optional&gt;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160; </div>
<div class="line"><a name="l00022"></a><span class="lineno"><a class="line" href="NVPTXTargetTransformInfo_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   22</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;NVPTXtti&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160; </div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">// Whether the given intrinsic reads threadIdx.x/y/z.</span></div>
<div class="line"><a name="l00025"></a><span class="lineno"><a class="line" href="NVPTXTargetTransformInfo_8cpp.html#a74773d10a48b1993bc8d19a8aa05d262">   25</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="NVPTXTargetTransformInfo_8cpp.html#a74773d10a48b1993bc8d19a8aa05d262">readsThreadIndex</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *II) {</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;  <span class="keywordflow">switch</span> (II-&gt;<a class="code" href="classllvm_1_1IntrinsicInst.html#a7ff64b3625b6f9020556ed05a5f72af4">getIntrinsicID</a>()) {</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    <span class="keywordflow">default</span>: <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_read_ptx_sreg_tid_x:</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_read_ptx_sreg_tid_y:</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_read_ptx_sreg_tid_z:</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  }</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;}</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160; </div>
<div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="NVPTXTargetTransformInfo_8cpp.html#a49413e44a5e04718485c35d13fbaf833">   35</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="NVPTXTargetTransformInfo_8cpp.html#a49413e44a5e04718485c35d13fbaf833">readsLaneId</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *II) {</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  <span class="keywordflow">return</span> II-&gt;<a class="code" href="classllvm_1_1IntrinsicInst.html#a7ff64b3625b6f9020556ed05a5f72af4">getIntrinsicID</a>() == Intrinsic::nvvm_read_ptx_sreg_laneid;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;}</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160; </div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">// Whether the given intrinsic is an atomic instruction in PTX.</span></div>
<div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="NVPTXTargetTransformInfo_8cpp.html#a0c26e6982ec5a132f1367d6877e8da2b">   40</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="NVPTXTargetTransformInfo_8cpp.html#a0c26e6982ec5a132f1367d6877e8da2b">isNVVMAtomic</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *II) {</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <span class="keywordflow">switch</span> (II-&gt;<a class="code" href="classllvm_1_1IntrinsicInst.html#a7ff64b3625b6f9020556ed05a5f72af4">getIntrinsicID</a>()) {</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="keywordflow">default</span>: <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_atomic_load_inc_32:</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_atomic_load_dec_32:</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160; </div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_atomic_add_gen_f_cta:</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_atomic_add_gen_f_sys:</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_atomic_add_gen_i_cta:</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_atomic_add_gen_i_sys:</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_atomic_and_gen_i_cta:</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_atomic_and_gen_i_sys:</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_atomic_cas_gen_i_cta:</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_atomic_cas_gen_i_sys:</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_atomic_dec_gen_i_cta:</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_atomic_dec_gen_i_sys:</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_atomic_inc_gen_i_cta:</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_atomic_inc_gen_i_sys:</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_atomic_max_gen_i_cta:</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_atomic_max_gen_i_sys:</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_atomic_min_gen_i_cta:</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_atomic_min_gen_i_sys:</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_atomic_or_gen_i_cta:</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_atomic_or_gen_i_sys:</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_atomic_exch_gen_i_cta:</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_atomic_exch_gen_i_sys:</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_atomic_xor_gen_i_cta:</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_atomic_xor_gen_i_sys:</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  }</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;}</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160; </div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="classllvm_1_1NVPTXTTIImpl.html#afc5e1d7bf0db6dac9f375fd42b2105aa">   72</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1NVPTXTTIImpl.html#afc5e1d7bf0db6dac9f375fd42b2105aa">NVPTXTTIImpl::isSourceOfDivergence</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="comment">// Without inter-procedural analysis, we conservatively assume that arguments</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="comment">// to __device__ functions are divergent.</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Argument.html">Argument</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a> = dyn_cast&lt;Argument&gt;(V))</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="namespacellvm.html#ac3b262676b70a4f6a243e0133ba6a057">isKernelFunction</a>(*<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>-&gt;getParent());</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(V)) {</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="comment">// Without pointer analysis, we conservatively assume values loaded from</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="comment">// generic or local address space are divergent.</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI = dyn_cast&lt;LoadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;      <span class="keywordtype">unsigned</span> AS = LI-&gt;getPointerAddressSpace();</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;      <span class="keywordflow">return</span> AS == <a class="code" href="namespacellvm.html#a2c3c18bffdc25d969233c5448bdfe7eba0e23fc2560ea7c89459df2a39dc386f4">ADDRESS_SPACE_GENERIC</a> || AS == <a class="code" href="namespacellvm.html#a2c3c18bffdc25d969233c5448bdfe7eba6cd1d92dfbcf1649a1b4587d06fe9810">ADDRESS_SPACE_LOCAL</a>;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    }</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="comment">// Atomic instructions may cause divergence. Atomic instructions are</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="comment">// executed sequentially across all threads in a warp. Therefore, an earlier</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="comment">// executed thread may see different memory inputs than a later executed</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="comment">// thread. For example, suppose *a = 0 initially.</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="comment">//   atom.global.add.s32 d, [a], 1</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="comment">// returns 0 for the first thread that enters the critical region, and 1 for</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="comment">// the second thread.</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isAtomic())</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *II = dyn_cast&lt;IntrinsicInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      <span class="comment">// Instructions that read threadIdx are obviously divergent.</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="NVPTXTargetTransformInfo_8cpp.html#a74773d10a48b1993bc8d19a8aa05d262">readsThreadIndex</a>(II) || <a class="code" href="NVPTXTargetTransformInfo_8cpp.html#a49413e44a5e04718485c35d13fbaf833">readsLaneId</a>(II))</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      <span class="comment">// Handle the NVPTX atomic intrinsics that cannot be represented as an</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;      <span class="comment">// atomic IR instruction.</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="NVPTXTargetTransformInfo_8cpp.html#a0c26e6982ec5a132f1367d6877e8da2b">isNVVMAtomic</a>(II))</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    }</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="comment">// Conservatively consider the return value of function calls as divergent.</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="comment">// We could analyze callees with bodies more precisely using</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="comment">// inter-procedural analysis.</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordflow">if</span> (isa&lt;CallInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  }</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160; </div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;}</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">// Convert NVVM intrinsics to target-generic LLVM code where possible.</span></div>
<div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="NVPTXTargetTransformInfo_8cpp.html#a49e6ceb63a029fc277a1d2abc8a2f6aa">  116</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="NVPTXTargetTransformInfo_8cpp.html#a49e6ceb63a029fc277a1d2abc8a2f6aa">simplifyNvvmIntrinsic</a>(<a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *II, <a class="code" href="classllvm_1_1InstCombiner.html">InstCombiner</a> &amp;IC) {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="comment">// Each NVVM intrinsic we can simplify can be replaced with one of:</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="comment">//  * an LLVM intrinsic,</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="comment">//  * an LLVM cast operation,</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="comment">//  * an LLVM binary operation, or</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="comment">//  * ad-hoc LLVM IR for the particular operation.</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160; </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="comment">// Some transformations are only valid when the module&#39;s</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="comment">// flush-denormals-to-zero (ftz) setting is true/false, whereas other</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="comment">// transformations are valid regardless of the module&#39;s ftz setting.</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="keyword">enum</span> FtzRequirementTy {</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    FTZ_Any,       <span class="comment">// Any ftz setting is ok.</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    FTZ_MustBeOn,  <span class="comment">// Transformation is valid only if ftz is on.</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    FTZ_MustBeOff, <span class="comment">// Transformation is valid only if ftz is off.</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  };</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="comment">// Classes of NVVM intrinsics that can&#39;t be replaced one-to-one with a</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <span class="comment">// target-generic intrinsic, cast op, or binary op but that we can nonetheless</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <span class="comment">// simplify.</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <span class="keyword">enum</span> SpecialCase {</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    SPC_Reciprocal,</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  };</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <span class="comment">// SimplifyAction is a poor-man&#39;s variant (plus an additional flag) that</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="comment">// represents how to replace an NVVM intrinsic with target-generic LLVM IR.</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="keyword">struct </span>SimplifyAction {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="comment">// Invariant: At most one of these Optionals has a value.</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    std::optional&lt;Intrinsic::ID&gt; IID;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    std::optional&lt;Instruction::CastOps&gt; CastOp;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    std::optional&lt;Instruction::BinaryOps&gt; BinaryOp;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    std::optional&lt;SpecialCase&gt; Special;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160; </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    FtzRequirementTy FtzRequirement = FTZ_Any;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="comment">// Denormal handling is guarded by different attributes depending on the</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="comment">// type (denormal-fp-math vs denormal-fp-math-f32), take note of halfs.</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keywordtype">bool</span> IsHalfTy = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160; </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    SimplifyAction() = <span class="keywordflow">default</span>;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160; </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    SimplifyAction(<a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">Intrinsic::ID</a> IID, FtzRequirementTy FtzReq,</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                   <span class="keywordtype">bool</span> IsHalfTy = <span class="keyword">false</span>)</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        : IID(IID), FtzRequirement(FtzReq), IsHalfTy(IsHalfTy) {}</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="comment">// Cast operations don&#39;t have anything to do with FTZ, so we skip that</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="comment">// argument.</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    SimplifyAction(<a class="code" href="classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">Instruction::CastOps</a> CastOp) : CastOp(CastOp) {}</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160; </div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    SimplifyAction(<a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> BinaryOp, FtzRequirementTy FtzReq)</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        : BinaryOp(BinaryOp), FtzRequirement(FtzReq) {}</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160; </div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    SimplifyAction(SpecialCase Special, FtzRequirementTy FtzReq)</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        : Special(Special), FtzRequirement(FtzReq) {}</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  };</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160; </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="comment">// Try to generate a SimplifyAction describing how to replace our</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="comment">// IntrinsicInstr with target-generic LLVM IR.</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="keyword">const</span> SimplifyAction Action = [II]() -&gt; SimplifyAction {</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordflow">switch</span> (II-&gt;<a class="code" href="classllvm_1_1IntrinsicInst.html#a7ff64b3625b6f9020556ed05a5f72af4">getIntrinsicID</a>()) {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="comment">// NVVM intrinsics that map directly to LLVM intrinsics.</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_ceil_d:</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      <span class="keywordflow">return</span> {<a class="code" href="README-FPStack_8txt.html#a9209b9930d4d7750a6b8b38b3b4ddd6a">Intrinsic::ceil</a>, FTZ_Any};</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_ceil_f:</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      <span class="keywordflow">return</span> {<a class="code" href="README-FPStack_8txt.html#a9209b9930d4d7750a6b8b38b3b4ddd6a">Intrinsic::ceil</a>, FTZ_MustBeOff};</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_ceil_ftz_f:</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;      <span class="keywordflow">return</span> {<a class="code" href="README-FPStack_8txt.html#a9209b9930d4d7750a6b8b38b3b4ddd6a">Intrinsic::ceil</a>, FTZ_MustBeOn};</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_fabs_d:</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;      <span class="keywordflow">return</span> {Intrinsic::fabs, FTZ_Any};</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_fabs_f:</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      <span class="keywordflow">return</span> {Intrinsic::fabs, FTZ_MustBeOff};</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_fabs_ftz_f:</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      <span class="keywordflow">return</span> {Intrinsic::fabs, FTZ_MustBeOn};</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_floor_d:</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      <span class="keywordflow">return</span> {<a class="code" href="README-FPStack_8txt.html#ac25bbfa16d28ab1f83da03668addad0a">Intrinsic::floor</a>, FTZ_Any};</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_floor_f:</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      <span class="keywordflow">return</span> {<a class="code" href="README-FPStack_8txt.html#ac25bbfa16d28ab1f83da03668addad0a">Intrinsic::floor</a>, FTZ_MustBeOff};</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_floor_ftz_f:</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      <span class="keywordflow">return</span> {<a class="code" href="README-FPStack_8txt.html#ac25bbfa16d28ab1f83da03668addad0a">Intrinsic::floor</a>, FTZ_MustBeOn};</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_fma_rn_d:</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      <span class="keywordflow">return</span> {Intrinsic::fma, FTZ_Any};</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_fma_rn_f:</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      <span class="keywordflow">return</span> {Intrinsic::fma, FTZ_MustBeOff};</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_fma_rn_ftz_f:</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      <span class="keywordflow">return</span> {Intrinsic::fma, FTZ_MustBeOn};</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_fma_rn_f16:</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      <span class="keywordflow">return</span> {Intrinsic::fma, FTZ_MustBeOff, <span class="keyword">true</span>};</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_fma_rn_ftz_f16:</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;      <span class="keywordflow">return</span> {Intrinsic::fma, FTZ_MustBeOn, <span class="keyword">true</span>};</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_fma_rn_f16x2:</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      <span class="keywordflow">return</span> {Intrinsic::fma, FTZ_MustBeOff, <span class="keyword">true</span>};</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_fma_rn_ftz_f16x2:</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      <span class="keywordflow">return</span> {Intrinsic::fma, FTZ_MustBeOn, <span class="keyword">true</span>};</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_fmax_d:</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      <span class="keywordflow">return</span> {<a class="code" href="namespacellvm.html#a636de400e4dd2bc090b729329a99e75b">Intrinsic::maxnum</a>, FTZ_Any};</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_fmax_f:</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      <span class="keywordflow">return</span> {<a class="code" href="namespacellvm.html#a636de400e4dd2bc090b729329a99e75b">Intrinsic::maxnum</a>, FTZ_MustBeOff};</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_fmax_ftz_f:</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      <span class="keywordflow">return</span> {<a class="code" href="namespacellvm.html#a636de400e4dd2bc090b729329a99e75b">Intrinsic::maxnum</a>, FTZ_MustBeOn};</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_fmax_nan_f:</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      <span class="keywordflow">return</span> {<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ac394f9304a427e4d136ac39a262c0f32">Intrinsic::maximum</a>, FTZ_MustBeOff};</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_fmax_ftz_nan_f:</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      <span class="keywordflow">return</span> {<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ac394f9304a427e4d136ac39a262c0f32">Intrinsic::maximum</a>, FTZ_MustBeOn};</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_fmax_f16:</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      <span class="keywordflow">return</span> {<a class="code" href="namespacellvm.html#a636de400e4dd2bc090b729329a99e75b">Intrinsic::maxnum</a>, FTZ_MustBeOff, <span class="keyword">true</span>};</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_fmax_ftz_f16:</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      <span class="keywordflow">return</span> {<a class="code" href="namespacellvm.html#a636de400e4dd2bc090b729329a99e75b">Intrinsic::maxnum</a>, FTZ_MustBeOn, <span class="keyword">true</span>};</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_fmax_f16x2:</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      <span class="keywordflow">return</span> {<a class="code" href="namespacellvm.html#a636de400e4dd2bc090b729329a99e75b">Intrinsic::maxnum</a>, FTZ_MustBeOff, <span class="keyword">true</span>};</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_fmax_ftz_f16x2:</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      <span class="keywordflow">return</span> {<a class="code" href="namespacellvm.html#a636de400e4dd2bc090b729329a99e75b">Intrinsic::maxnum</a>, FTZ_MustBeOn, <span class="keyword">true</span>};</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_fmax_nan_f16:</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;      <span class="keywordflow">return</span> {<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ac394f9304a427e4d136ac39a262c0f32">Intrinsic::maximum</a>, FTZ_MustBeOff, <span class="keyword">true</span>};</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_fmax_ftz_nan_f16:</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      <span class="keywordflow">return</span> {<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ac394f9304a427e4d136ac39a262c0f32">Intrinsic::maximum</a>, FTZ_MustBeOn, <span class="keyword">true</span>};</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_fmax_nan_f16x2:</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      <span class="keywordflow">return</span> {<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ac394f9304a427e4d136ac39a262c0f32">Intrinsic::maximum</a>, FTZ_MustBeOff, <span class="keyword">true</span>};</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_fmax_ftz_nan_f16x2:</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      <span class="keywordflow">return</span> {<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ac394f9304a427e4d136ac39a262c0f32">Intrinsic::maximum</a>, FTZ_MustBeOn, <span class="keyword">true</span>};</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_fmin_d:</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      <span class="keywordflow">return</span> {<a class="code" href="namespacellvm.html#aa656aa475d13ec6a900414eadabe86b0">Intrinsic::minnum</a>, FTZ_Any};</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_fmin_f:</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      <span class="keywordflow">return</span> {<a class="code" href="namespacellvm.html#aa656aa475d13ec6a900414eadabe86b0">Intrinsic::minnum</a>, FTZ_MustBeOff};</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_fmin_ftz_f:</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      <span class="keywordflow">return</span> {<a class="code" href="namespacellvm.html#aa656aa475d13ec6a900414eadabe86b0">Intrinsic::minnum</a>, FTZ_MustBeOn};</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_fmin_nan_f:</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      <span class="keywordflow">return</span> {<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a3ebec767d878f6325649018816f5fbba">Intrinsic::minimum</a>, FTZ_MustBeOff};</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_fmin_ftz_nan_f:</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      <span class="keywordflow">return</span> {<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a3ebec767d878f6325649018816f5fbba">Intrinsic::minimum</a>, FTZ_MustBeOn};</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_fmin_f16:</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      <span class="keywordflow">return</span> {<a class="code" href="namespacellvm.html#aa656aa475d13ec6a900414eadabe86b0">Intrinsic::minnum</a>, FTZ_MustBeOff, <span class="keyword">true</span>};</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_fmin_ftz_f16:</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      <span class="keywordflow">return</span> {<a class="code" href="namespacellvm.html#aa656aa475d13ec6a900414eadabe86b0">Intrinsic::minnum</a>, FTZ_MustBeOn, <span class="keyword">true</span>};</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_fmin_f16x2:</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      <span class="keywordflow">return</span> {<a class="code" href="namespacellvm.html#aa656aa475d13ec6a900414eadabe86b0">Intrinsic::minnum</a>, FTZ_MustBeOff, <span class="keyword">true</span>};</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_fmin_ftz_f16x2:</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      <span class="keywordflow">return</span> {<a class="code" href="namespacellvm.html#aa656aa475d13ec6a900414eadabe86b0">Intrinsic::minnum</a>, FTZ_MustBeOn, <span class="keyword">true</span>};</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_fmin_nan_f16:</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      <span class="keywordflow">return</span> {<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a3ebec767d878f6325649018816f5fbba">Intrinsic::minimum</a>, FTZ_MustBeOff, <span class="keyword">true</span>};</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_fmin_ftz_nan_f16:</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      <span class="keywordflow">return</span> {<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a3ebec767d878f6325649018816f5fbba">Intrinsic::minimum</a>, FTZ_MustBeOn, <span class="keyword">true</span>};</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_fmin_nan_f16x2:</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      <span class="keywordflow">return</span> {<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a3ebec767d878f6325649018816f5fbba">Intrinsic::minimum</a>, FTZ_MustBeOff, <span class="keyword">true</span>};</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_fmin_ftz_nan_f16x2:</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      <span class="keywordflow">return</span> {<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a3ebec767d878f6325649018816f5fbba">Intrinsic::minimum</a>, FTZ_MustBeOn, <span class="keyword">true</span>};</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_round_d:</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      <span class="keywordflow">return</span> {<a class="code" href="xxhash_8cpp.html#ae4e947c75dafebd71b8de03cd0dbf5d6">Intrinsic::round</a>, FTZ_Any};</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_round_f:</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      <span class="keywordflow">return</span> {<a class="code" href="xxhash_8cpp.html#ae4e947c75dafebd71b8de03cd0dbf5d6">Intrinsic::round</a>, FTZ_MustBeOff};</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_round_ftz_f:</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      <span class="keywordflow">return</span> {<a class="code" href="xxhash_8cpp.html#ae4e947c75dafebd71b8de03cd0dbf5d6">Intrinsic::round</a>, FTZ_MustBeOn};</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_sqrt_rn_d:</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      <span class="keywordflow">return</span> {Intrinsic::sqrt, FTZ_Any};</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_sqrt_f:</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      <span class="comment">// nvvm_sqrt_f is a special case.  For  most intrinsics, foo_ftz_f is the</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      <span class="comment">// ftz version, and foo_f is the non-ftz version.  But nvvm_sqrt_f adopts</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      <span class="comment">// the ftz-ness of the surrounding code.  sqrt_rn_f and sqrt_rn_ftz_f are</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      <span class="comment">// the versions with explicit ftz-ness.</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      <span class="keywordflow">return</span> {Intrinsic::sqrt, FTZ_Any};</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_sqrt_rn_f:</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      <span class="keywordflow">return</span> {Intrinsic::sqrt, FTZ_MustBeOff};</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_sqrt_rn_ftz_f:</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      <span class="keywordflow">return</span> {Intrinsic::sqrt, FTZ_MustBeOn};</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_trunc_d:</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      <span class="keywordflow">return</span> {<a class="code" href="README-FPStack_8txt.html#aeb9a134c2755c0ad7801bf630a790904">Intrinsic::trunc</a>, FTZ_Any};</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_trunc_f:</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      <span class="keywordflow">return</span> {<a class="code" href="README-FPStack_8txt.html#aeb9a134c2755c0ad7801bf630a790904">Intrinsic::trunc</a>, FTZ_MustBeOff};</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_trunc_ftz_f:</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      <span class="keywordflow">return</span> {<a class="code" href="README-FPStack_8txt.html#aeb9a134c2755c0ad7801bf630a790904">Intrinsic::trunc</a>, FTZ_MustBeOn};</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="comment">// NVVM intrinsics that map to LLVM cast operations.</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="comment">// Note that llvm&#39;s target-generic conversion operators correspond to the rz</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="comment">// (round to zero) versions of the nvvm conversion intrinsics, even though</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="comment">// most everything else here uses the rn (round to nearest even) nvvm ops.</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_d2i_rz:</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_f2i_rz:</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_d2ll_rz:</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_f2ll_rz:</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      <span class="keywordflow">return</span> {Instruction::FPToSI};</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_d2ui_rz:</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_f2ui_rz:</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_d2ull_rz:</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_f2ull_rz:</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      <span class="keywordflow">return</span> {Instruction::FPToUI};</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_i2d_rz:</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_i2f_rz:</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_ll2d_rz:</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_ll2f_rz:</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      <span class="keywordflow">return</span> {Instruction::SIToFP};</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_ui2d_rz:</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_ui2f_rz:</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_ull2d_rz:</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_ull2f_rz:</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      <span class="keywordflow">return</span> {Instruction::UIToFP};</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160; </div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="comment">// NVVM intrinsics that map to LLVM binary ops.</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_add_rn_d:</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      <span class="keywordflow">return</span> {Instruction::FAdd, FTZ_Any};</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_add_rn_f:</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      <span class="keywordflow">return</span> {Instruction::FAdd, FTZ_MustBeOff};</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_add_rn_ftz_f:</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      <span class="keywordflow">return</span> {Instruction::FAdd, FTZ_MustBeOn};</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_mul_rn_d:</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      <span class="keywordflow">return</span> {Instruction::FMul, FTZ_Any};</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_mul_rn_f:</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      <span class="keywordflow">return</span> {Instruction::FMul, FTZ_MustBeOff};</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_mul_rn_ftz_f:</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      <span class="keywordflow">return</span> {Instruction::FMul, FTZ_MustBeOn};</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_div_rn_d:</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      <span class="keywordflow">return</span> {Instruction::FDiv, FTZ_Any};</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_div_rn_f:</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      <span class="keywordflow">return</span> {Instruction::FDiv, FTZ_MustBeOff};</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_div_rn_ftz_f:</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      <span class="keywordflow">return</span> {Instruction::FDiv, FTZ_MustBeOn};</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160; </div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="comment">// The remainder of cases are NVVM intrinsics that map to LLVM idioms, but</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="comment">// need special handling.</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="comment">// We seem to be missing intrinsics for rcp.approx.{ftz.}f32, which is just</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="comment">// as well.</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_rcp_rn_d:</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      <span class="keywordflow">return</span> {SPC_Reciprocal, FTZ_Any};</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_rcp_rn_f:</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      <span class="keywordflow">return</span> {SPC_Reciprocal, FTZ_MustBeOff};</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nvvm_rcp_rn_ftz_f:</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      <span class="keywordflow">return</span> {SPC_Reciprocal, FTZ_MustBeOn};</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160; </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      <span class="comment">// We do not currently simplify intrinsics that give an approximate</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      <span class="comment">// answer. These include:</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      <span class="comment">//   - nvvm_cos_approx_{f,ftz_f}</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      <span class="comment">//   - nvvm_ex2_approx_{d,f,ftz_f}</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      <span class="comment">//   - nvvm_lg2_approx_{d,f,ftz_f}</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      <span class="comment">//   - nvvm_sin_approx_{f,ftz_f}</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      <span class="comment">//   - nvvm_sqrt_approx_{f,ftz_f}</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;      <span class="comment">//   - nvvm_rsqrt_approx_{d,f,ftz_f}</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      <span class="comment">//   - nvvm_div_approx_{ftz_d,ftz_f,f}</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      <span class="comment">//   - nvvm_rcp_approx_ftz_d</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      <span class="comment">// Ideally we&#39;d encode them as e.g. &quot;fast call @llvm.cos&quot;, where &quot;fast&quot;</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      <span class="comment">// means that fastmath is enabled in the intrinsic.  Unfortunately only</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      <span class="comment">// binary operators (currently) have a fastmath bit in SelectionDAG, so</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      <span class="comment">// this information gets lost and we can&#39;t select on it.</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      <span class="comment">// TODO: div and rcp are lowered to a binary op, so these we could in</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;      <span class="comment">// theory lower them to &quot;fast fdiv&quot;.</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160; </div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    }</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  }();</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160; </div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="comment">// If Action.FtzRequirementTy is not satisfied by the module&#39;s ftz state, we</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <span class="comment">// can bail out now.  (Notice that in the case that IID is not an NVVM</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <span class="comment">// intrinsic, we don&#39;t have to look up any module metadata, as</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <span class="comment">// FtzRequirementTy will be FTZ_Any.)</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <span class="keywordflow">if</span> (Action.FtzRequirement != FTZ_Any) {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="comment">// FIXME: Broken for f64</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <a class="code" href="structllvm_1_1DenormalMode.html">DenormalMode</a> <a class="code" href="SIWholeQuadMode_8cpp.html#a0c198437833c48138f49e3589bd08773">Mode</a> = II-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6a66ebb3aa12757479a3c88de77d78f8">getFunction</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#aaf03062dde511bcc74b5d01b0a2b5736">getDenormalMode</a>(</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        Action.IsHalfTy ? <a class="code" href="structllvm_1_1APFloatBase.html#a86415bb448a78ef1fed893f9eb0f5d06">APFloat::IEEEhalf</a>() : <a class="code" href="structllvm_1_1APFloatBase.html#a0c5765e9acba977f6e462c2917276d8f">APFloat::IEEEsingle</a>());</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="keywordtype">bool</span> FtzEnabled = <a class="code" href="SIWholeQuadMode_8cpp.html#a0c198437833c48138f49e3589bd08773">Mode</a>.Output == <a class="code" href="structllvm_1_1DenormalMode.html#a29b26e3ae30f3f6ec4106ff181282893a40bc80ae1d362a1461703637e946cbd8">DenormalMode::PreserveSign</a>;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160; </div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keywordflow">if</span> (FtzEnabled != (Action.FtzRequirement == FTZ_MustBeOn))</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  }</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160; </div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <span class="comment">// Simplify to target-generic intrinsic.</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <span class="keywordflow">if</span> (Action.IID) {</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 4&gt;</a> <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>(II-&gt;<a class="code" href="classllvm_1_1CallBase.html#ac63dbb4994494c46f025715272cdb81e">args</a>());</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="comment">// All the target-generic intrinsics currently of interest to us have one</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="comment">// type argument, equal to that of the nvvm intrinsic&#39;s argument.</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *Tys[] = {II-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()};</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">CallInst::Create</a>(</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        <a class="code" href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">Intrinsic::getDeclaration</a>(II-&gt;<a class="code" href="classllvm_1_1Instruction.html#a4ba3a5be6c0e9b9e8a525de055836733">getModule</a>(), *Action.IID, Tys), <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  }</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160; </div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <span class="comment">// Simplify to target-generic binary op.</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <span class="keywordflow">if</span> (Action.BinaryOp)</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a02ce9966395063ac501ecbc1623deda4">BinaryOperator::Create</a>(*Action.BinaryOp, II-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(0),</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                                  II-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(1), II-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>());</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160; </div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="comment">// Simplify to target-generic cast op.</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <span class="keywordflow">if</span> (Action.CastOp)</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#a643fe5a9e7042f032dae78109c2b1e72">CastInst::Create</a>(*Action.CastOp, II-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(0), II-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(),</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                            II-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>());</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160; </div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <span class="comment">// All that&#39;s left are the special cases.</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="keywordflow">if</span> (!Action.Special)</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <span class="keywordflow">switch</span> (*Action.Special) {</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <span class="keywordflow">case</span> SPC_Reciprocal:</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="comment">// Simplify reciprocal.</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a02ce9966395063ac501ecbc1623deda4">BinaryOperator::Create</a>(</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        Instruction::FDiv, <a class="code" href="classllvm_1_1ConstantFP.html#a5eb8f7a5d3cfdd127ad9db2e425e14eb">ConstantFP::get</a>(II-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), 1),</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        II-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(0), II-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>());</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  }</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;All SpecialCase enumerators should be handled in switch.&quot;</span>);</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;}</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160; </div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;std::optional&lt;Instruction *&gt;</div>
<div class="line"><a name="l00416"></a><span class="lineno"><a class="line" href="classllvm_1_1NVPTXTTIImpl.html#a9489271f78c9211fa6a14f1661323ab4">  416</a></span>&#160;<a class="code" href="classllvm_1_1NVPTXTTIImpl.html#a9489271f78c9211fa6a14f1661323ab4">NVPTXTTIImpl::instCombineIntrinsic</a>(<a class="code" href="classllvm_1_1InstCombiner.html">InstCombiner</a> &amp;IC, <a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> &amp;II)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="NVPTXTargetTransformInfo_8cpp.html#a49e6ceb63a029fc277a1d2abc8a2f6aa">simplifyNvvmIntrinsic</a>(&amp;II, IC)) {</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  }</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;}</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160; </div>
<div class="line"><a name="l00423"></a><span class="lineno"><a class="line" href="classllvm_1_1NVPTXTTIImpl.html#a8e020bd94026e5aeb87f057d804597e1">  423</a></span>&#160;<a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> <a class="code" href="classllvm_1_1NVPTXTTIImpl.html#a8e020bd94026e5aeb87f057d804597e1">NVPTXTTIImpl::getArithmeticInstrCost</a>(</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordtype">unsigned</span> Opcode, <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty, <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bb">TTI::TargetCostKind</a> <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>,</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <a class="code" href="structllvm_1_1TargetTransformInfo_1_1OperandValueInfo.html">TTI::OperandValueInfo</a> Op1Info, <a class="code" href="structllvm_1_1TargetTransformInfo_1_1OperandValueInfo.html">TTI::OperandValueInfo</a> Op2Info,</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;const Value *&gt;</a> <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>,</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *CxtI) {</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  <span class="comment">// Legalize the type.</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  std::pair&lt;InstructionCost, MVT&gt; <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a968f33165430f95099556df970a6336a">LT</a> = <a class="code" href="classllvm_1_1BasicTTIImplBase.html#adf578bb2e0965837942030f0fc7e0beb">getTypeLegalizationCost</a>(Ty);</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160; </div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <span class="keywordtype">int</span> ISD = TLI-&gt;<a class="code" href="classllvm_1_1TargetLoweringBase.html#a025e6664b2f55d2c217543c34eb1f64e">InstructionOpcodeToISD</a>(Opcode);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160; </div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <span class="keywordflow">switch</span> (ISD) {</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BasicTTIImplBase.html#a2ad3fccbfc25b87c73ffcc5f352641c5">BaseT::getArithmeticInstrCost</a>(Opcode, Ty, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>, Op1Info,</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                                         Op2Info);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a>:</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a>:</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">ISD::XOR</a>:</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">ISD::OR</a>:</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">ISD::AND</a>:</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="comment">// The machine code (SASS) simulates an i64 with two i32. Therefore, we</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="comment">// estimate that arithmetic operations on i64 are twice as expensive as</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="comment">// those on types that can fit into one machine register.</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a968f33165430f95099556df970a6336a">LT</a>.second.SimpleTy == <a class="code" href="classllvm_1_1MVT.html#a330aea6151cae3adaf5e179dcfe87346a97f56253625b3fe7b371ce76722de4b8">MVT::i64</a>)</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;      <span class="keywordflow">return</span> 2 * <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a968f33165430f95099556df970a6336a">LT</a>.first;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="comment">// Delegate other cases to the basic TTI.</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BasicTTIImplBase.html#a2ad3fccbfc25b87c73ffcc5f352641c5">BaseT::getArithmeticInstrCost</a>(Opcode, Ty, <a class="code" href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a>, Op1Info,</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                                         Op2Info);</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  }</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;}</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160; </div>
<div class="line"><a name="l00453"></a><span class="lineno"><a class="line" href="classllvm_1_1NVPTXTTIImpl.html#a71ea7d50adb4500b9ca52778c045e4fc">  453</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1NVPTXTTIImpl.html#a71ea7d50adb4500b9ca52778c045e4fc">NVPTXTTIImpl::getUnrollingPreferences</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> &amp;SE,</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                                           <a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html">TTI::UnrollingPreferences</a> &amp;UP,</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                                           <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> *ORE) {</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  <a class="code" href="classllvm_1_1BasicTTIImplBase.html#a1017f6873c8e5d75aa472aa3f06b48e3">BaseT::getUnrollingPreferences</a>(L, SE, UP, ORE);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160; </div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  <span class="comment">// Enable partial unrolling and runtime unrolling, but reduce the</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <span class="comment">// threshold.  This partially unrolls small loops which are often</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  <span class="comment">// unrolled by the PTX to SASS compiler and unrolling earlier can be</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <span class="comment">// beneficial.</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#af01349dac5ea8d7fc1d5bedcc82a17b8">Partial</a> = UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ae31307b4efc5ce5311752041e7ff7cdc">Runtime</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ae28e05c1aac288aa7e4a49d858b35c46">PartialThreshold</a> = UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a21e7febf468c370793f606da5cd0e6fe">Threshold</a> / 4;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;}</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160; </div>
<div class="line"><a name="l00466"></a><span class="lineno"><a class="line" href="classllvm_1_1NVPTXTTIImpl.html#abaa5914529b5da0d48b8bfa9ca149423">  466</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1NVPTXTTIImpl.html#abaa5914529b5da0d48b8bfa9ca149423">NVPTXTTIImpl::getPeelingPreferences</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> &amp;SE,</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                                         <a class="code" href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html">TTI::PeelingPreferences</a> &amp;PP) {</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  <a class="code" href="classllvm_1_1BasicTTIImplBase.html#a9d093749d001a714592c88df0e81b3fe">BaseT::getPeelingPreferences</a>(L, SE, PP);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aclassllvm_1_1InstructionCost_html"><div class="ttname"><a href="classllvm_1_1InstructionCost.html">llvm::InstructionCost</a></div><div class="ttdef"><b>Definition:</b> <a href="InstructionCost_8h_source.html#l00029">InstructionCost.h:29</a></div></div>
<div class="ttc" id="aclassllvm_1_1Argument_html"><div class="ttname"><a href="classllvm_1_1Argument.html">llvm::Argument</a></div><div class="ttdoc">This class represents an incoming formal argument to a Function.</div><div class="ttdef"><b>Definition:</b> <a href="Argument_8h_source.html#l00028">Argument.h:28</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1UnrollingPreferences_html_ae31307b4efc5ce5311752041e7ff7cdc"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ae31307b4efc5ce5311752041e7ff7cdc">llvm::TargetTransformInfo::UnrollingPreferences::Runtime</a></div><div class="ttdeci">bool Runtime</div><div class="ttdoc">Allow runtime unrolling (unrolling of loops to expand the size of the loop body even when the number ...</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00497">TargetTransformInfo.h:497</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a706f223f760b55668fbae74202b816bb"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bb">llvm::TargetTransformInfo::TargetCostKind</a></div><div class="ttdeci">TargetCostKind</div><div class="ttdoc">The kind of cost model.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00241">TargetTransformInfo.h:241</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1UnrollingPreferences_html_ae28e05c1aac288aa7e4a49d858b35c46"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ae28e05c1aac288aa7e4a49d858b35c46">llvm::TargetTransformInfo::UnrollingPreferences::PartialThreshold</a></div><div class="ttdeci">unsigned PartialThreshold</div><div class="ttdoc">The cost threshold for the unrolled loop, like Threshold, but used for partial/runtime unrolling (set...</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00465">TargetTransformInfo.h:465</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aNVPTXTargetTransformInfo_8cpp_html_a0c26e6982ec5a132f1367d6877e8da2b"><div class="ttname"><a href="NVPTXTargetTransformInfo_8cpp.html#a0c26e6982ec5a132f1367d6877e8da2b">isNVVMAtomic</a></div><div class="ttdeci">static bool isNVVMAtomic(const IntrinsicInst *II)</div><div class="ttdef"><b>Definition:</b> <a href="NVPTXTargetTransformInfo_8cpp_source.html#l00040">NVPTXTargetTransformInfo.cpp:40</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a4ba3a5be6c0e9b9e8a525de055836733"><div class="ttname"><a href="classllvm_1_1Instruction.html#a4ba3a5be6c0e9b9e8a525de055836733">llvm::Instruction::getModule</a></div><div class="ttdeci">const Module * getModule() const</div><div class="ttdoc">Return the module owning the function this instruction belongs to or nullptr it the function does not...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00070">Instruction.cpp:70</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a7415ab9f2172c59a2ee7c7a02afa56a4">llvm::ISD::OR</a></div><div class="ttdeci">@ OR</div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00667">ISDOpcodes.h:667</a></div></div>
<div class="ttc" id="aREADME-FPStack_8txt_html_a9209b9930d4d7750a6b8b38b3b4ddd6a"><div class="ttname"><a href="README-FPStack_8txt.html#a9209b9930d4d7750a6b8b38b3b4ddd6a">ceil</a></div><div class="ttdeci">We have fiadd patterns now but the followings have the same cost and complexity We need a way to specify the later is more profitable def def The FP stackifier should handle simple permutates to reduce number of shuffle e g ceil</div><div class="ttdef"><b>Definition:</b> <a href="README-FPStack_8txt_source.html#l00054">README-FPStack.txt:54</a></div></div>
<div class="ttc" id="astructllvm_1_1APFloatBase_html_a0c5765e9acba977f6e462c2917276d8f"><div class="ttname"><a href="structllvm_1_1APFloatBase.html#a0c5765e9acba977f6e462c2917276d8f">llvm::APFloatBase::IEEEsingle</a></div><div class="ttdeci">static const fltSemantics &amp; IEEEsingle() LLVM_READNONE</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8cpp_source.html#l00244">APFloat.cpp:244</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html"><div class="ttname"><a href="classllvm_1_1Loop.html">llvm::Loop</a></div><div class="ttdoc">Represents a single loop in the control flow graph.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00547">LoopInfo.h:547</a></div></div>
<div class="ttc" id="aclassllvm_1_1IntrinsicInst_html_a7ff64b3625b6f9020556ed05a5f72af4"><div class="ttname"><a href="classllvm_1_1IntrinsicInst.html#a7ff64b3625b6f9020556ed05a5f72af4">llvm::IntrinsicInst::getIntrinsicID</a></div><div class="ttdeci">Intrinsic::ID getIntrinsicID() const</div><div class="ttdoc">Return the intrinsic ID of this intrinsic.</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00054">IntrinsicInst.h:54</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_a3ebec767d878f6325649018816f5fbba"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#a3ebec767d878f6325649018816f5fbba">minimum</a></div><div class="ttdeci">Should compile r2 movcc movcs str strb mov lr r1 movcs movcc mov lr r1 str mov mov cmp r1 movlo r2 str bx lr r0 mov mov cmp r0 movhs r2 mov r1 bx lr Some of the NEON intrinsics may be appropriate for more general either as target independent intrinsics or perhaps elsewhere in the ARM backend Some of them may also be lowered to target independent and perhaps some new SDNodes could be added For minimum</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00489">README.txt:489</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01199">SmallVector.h:1199</a></div></div>
<div class="ttc" id="anamespacellvm_html_a2c3c18bffdc25d969233c5448bdfe7eba6cd1d92dfbcf1649a1b4587d06fe9810"><div class="ttname"><a href="namespacellvm.html#a2c3c18bffdc25d969233c5448bdfe7eba6cd1d92dfbcf1649a1b4587d06fe9810">llvm::ADDRESS_SPACE_LOCAL</a></div><div class="ttdeci">@ ADDRESS_SPACE_LOCAL</div><div class="ttdef"><b>Definition:</b> <a href="NVPTXBaseInfo_8h_source.html#l00026">NVPTXBaseInfo.h:26</a></div></div>
<div class="ttc" id="aclassllvm_1_1NVPTXTTIImpl_html_a71ea7d50adb4500b9ca52778c045e4fc"><div class="ttname"><a href="classllvm_1_1NVPTXTTIImpl.html#a71ea7d50adb4500b9ca52778c045e4fc">llvm::NVPTXTTIImpl::getUnrollingPreferences</a></div><div class="ttdeci">void getUnrollingPreferences(Loop *L, ScalarEvolution &amp;SE, TTI::UnrollingPreferences &amp;UP, OptimizationRemarkEmitter *ORE)</div><div class="ttdef"><b>Definition:</b> <a href="NVPTXTargetTransformInfo_8cpp_source.html#l00453">NVPTXTargetTransformInfo.cpp:453</a></div></div>
<div class="ttc" id="aclassllvm_1_1CastInst_html_a643fe5a9e7042f032dae78109c2b1e72"><div class="ttname"><a href="classllvm_1_1CastInst.html#a643fe5a9e7042f032dae78109c2b1e72">llvm::CastInst::Create</a></div><div class="ttdeci">static CastInst * Create(Instruction::CastOps, Value *S, Type *Ty, const Twine &amp;Name=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Provides a way to construct any of the CastInst subclasses using an opcode instead of the subclass's ...</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l03354">Instructions.cpp:3354</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html">llvm::ScalarEvolution</a></div><div class="ttdoc">The main scalar evolution driver.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l00452">ScalarEvolution.h:452</a></div></div>
<div class="ttc" id="aValueTracking_8h_html"><div class="ttname"><a href="ValueTracking_8h.html">ValueTracking.h</a></div></div>
<div class="ttc" id="aNVPTXTargetTransformInfo_8cpp_html_a74773d10a48b1993bc8d19a8aa05d262"><div class="ttname"><a href="NVPTXTargetTransformInfo_8cpp.html#a74773d10a48b1993bc8d19a8aa05d262">readsThreadIndex</a></div><div class="ttdeci">static bool readsThreadIndex(const IntrinsicInst *II)</div><div class="ttdef"><b>Definition:</b> <a href="NVPTXTargetTransformInfo_8cpp_source.html#l00025">NVPTXTargetTransformInfo.cpp:25</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1UnrollingPreferences_html_af01349dac5ea8d7fc1d5bedcc82a17b8"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#af01349dac5ea8d7fc1d5bedcc82a17b8">llvm::TargetTransformInfo::UnrollingPreferences::Partial</a></div><div class="ttdeci">bool Partial</div><div class="ttdoc">Allow partial unrolling (unrolling of loops to expand the size of the loop body, not only to eliminat...</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00493">TargetTransformInfo.h:493</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdoc">The instances of the Type class are immutable: once they are created, they are never changed.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1PeelingPreferences_html"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html">llvm::TargetTransformInfo::PeelingPreferences</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00547">TargetTransformInfo.h:547</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1OperandValueInfo_html"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1OperandValueInfo.html">llvm::TargetTransformInfo::OperandValueInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00947">TargetTransformInfo.h:947</a></div></div>
<div class="ttc" id="aNVPTXTargetTransformInfo_8h_html"><div class="ttname"><a href="NVPTXTargetTransformInfo_8h.html">NVPTXTargetTransformInfo.h</a></div></div>
<div class="ttc" id="aNVPTXUtilities_8h_html"><div class="ttname"><a href="NVPTXUtilities_8h.html">NVPTXUtilities.h</a></div></div>
<div class="ttc" id="aREADME-FPStack_8txt_html_ac25bbfa16d28ab1f83da03668addad0a"><div class="ttname"><a href="README-FPStack_8txt.html#ac25bbfa16d28ab1f83da03668addad0a">floor</a></div><div class="ttdeci">We have fiadd patterns now but the followings have the same cost and complexity We need a way to specify the later is more profitable def def The FP stackifier should handle simple permutates to reduce number of shuffle e g floor</div><div class="ttdef"><b>Definition:</b> <a href="README-FPStack_8txt_source.html#l00054">README-FPStack.txt:54</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64CC_html_abfa1f7dce576430da99eed57807c7f28a968f33165430f95099556df970a6336a"><div class="ttname"><a href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28a968f33165430f95099556df970a6336a">llvm::AArch64CC::LT</a></div><div class="ttdeci">@ LT</div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00266">AArch64BaseInfo.h:266</a></div></div>
<div class="ttc" id="aAMDGPULibCalls_8cpp_html_afecf1cc1292b07f57d343c0f4d682044"><div class="ttname"><a href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a></div><div class="ttdeci">amdgpu Simplify well known AMD library false FunctionCallee Value * Arg</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULibCalls_8cpp_source.html#l00187">AMDGPULibCalls.cpp:187</a></div></div>
<div class="ttc" id="aTargetLowering_8h_html"><div class="ttname"><a href="TargetLowering_8h.html">TargetLowering.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicTTIImplBase_html_adf578bb2e0965837942030f0fc7e0beb"><div class="ttname"><a href="classllvm_1_1BasicTTIImplBase.html#adf578bb2e0965837942030f0fc7e0beb">llvm::BasicTTIImplBase&lt; NVPTXTTIImpl &gt;::getTypeLegalizationCost</a></div><div class="ttdeci">std::pair&lt; InstructionCost, MVT &gt; getTypeLegalizationCost(Type *Ty) const</div><div class="ttdoc">Estimate the cost of type-legalization and the legalized type.</div><div class="ttdef"><b>Definition:</b> <a href="BasicTTIImpl_8h_source.html#l00813">BasicTTIImpl.h:813</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicTTIImplBase_html_a1017f6873c8e5d75aa472aa3f06b48e3"><div class="ttname"><a href="classllvm_1_1BasicTTIImplBase.html#a1017f6873c8e5d75aa472aa3f06b48e3">llvm::BasicTTIImplBase&lt; NVPTXTTIImpl &gt;::getUnrollingPreferences</a></div><div class="ttdeci">void getUnrollingPreferences(Loop *L, ScalarEvolution &amp;SE, TTI::UnrollingPreferences &amp;UP, OptimizationRemarkEmitter *ORE)</div><div class="ttdef"><b>Definition:</b> <a href="BasicTTIImpl_8h_source.html#l00538">BasicTTIImpl.h:538</a></div></div>
<div class="ttc" id="astructllvm_1_1APFloatBase_html_a86415bb448a78ef1fed893f9eb0f5d06"><div class="ttname"><a href="structllvm_1_1APFloatBase.html#a86415bb448a78ef1fed893f9eb0f5d06">llvm::APFloatBase::IEEEhalf</a></div><div class="ttdeci">static const fltSemantics &amp; IEEEhalf() LLVM_READNONE</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8cpp_source.html#l00238">APFloat.cpp:238</a></div></div>
<div class="ttc" id="axxhash_8cpp_html_ae4e947c75dafebd71b8de03cd0dbf5d6"><div class="ttname"><a href="xxhash_8cpp.html#ae4e947c75dafebd71b8de03cd0dbf5d6">round</a></div><div class="ttdeci">static uint64_t round(uint64_t Acc, uint64_t Input)</div><div class="ttdef"><b>Definition:</b> <a href="xxhash_8cpp_source.html#l00056">xxhash.cpp:56</a></div></div>
<div class="ttc" id="aclassllvm_1_1NVPTXTTIImpl_html_a8e020bd94026e5aeb87f057d804597e1"><div class="ttname"><a href="classllvm_1_1NVPTXTTIImpl.html#a8e020bd94026e5aeb87f057d804597e1">llvm::NVPTXTTIImpl::getArithmeticInstrCost</a></div><div class="ttdeci">InstructionCost getArithmeticInstrCost(unsigned Opcode, Type *Ty, TTI::TargetCostKind CostKind, TTI::OperandValueInfo Op1Info={TTI::OK_AnyValue, TTI::OP_None}, TTI::OperandValueInfo Op2Info={TTI::OK_AnyValue, TTI::OP_None}, ArrayRef&lt; const Value * &gt; Args=ArrayRef&lt; const Value * &gt;(), const Instruction *CxtI=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="NVPTXTargetTransformInfo_8cpp_source.html#l00423">NVPTXTargetTransformInfo.cpp:423</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallInst_html_a850d8262cd900958b3153c4aa080b2bb"><div class="ttname"><a href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">llvm::CallInst::Create</a></div><div class="ttdeci">static CallInst * Create(FunctionType *Ty, Value *F, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01528">Instructions.h:1528</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicTTIImplBase_html_a2ad3fccbfc25b87c73ffcc5f352641c5"><div class="ttname"><a href="classllvm_1_1BasicTTIImplBase.html#a2ad3fccbfc25b87c73ffcc5f352641c5">llvm::BasicTTIImplBase&lt; NVPTXTTIImpl &gt;::getArithmeticInstrCost</a></div><div class="ttdeci">InstructionCost getArithmeticInstrCost(unsigned Opcode, Type *Ty, TTI::TargetCostKind CostKind, TTI::OperandValueInfo Opd1Info={TTI::OK_AnyValue, TTI::OP_None}, TTI::OperandValueInfo Opd2Info={TTI::OK_AnyValue, TTI::OP_None}, ArrayRef&lt; const Value * &gt; Args=ArrayRef&lt; const Value * &gt;(), const Instruction *CxtI=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="BasicTTIImpl_8h_source.html#l00849">BasicTTIImpl.h:849</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_afa0b2fa29ba074f2b6ec9ac11163f2d9"><div class="ttname"><a href="classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">llvm::Instruction::CastOps</a></div><div class="ttdeci">CastOps</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00823">Instruction.h:823</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00041">Instruction.h:41</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ac513a7da1bf74fb3e3c594da8534f2d2">llvm::ISD::AND</a></div><div class="ttdeci">@ AND</div><div class="ttdoc">Bitwise operators - logical and, logical or, logical xor.</div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00666">ISDOpcodes.h:666</a></div></div>
<div class="ttc" id="anamespacellvm_html_a636de400e4dd2bc090b729329a99e75b"><div class="ttname"><a href="namespacellvm.html#a636de400e4dd2bc090b729329a99e75b">llvm::maxnum</a></div><div class="ttdeci">LLVM_READONLY APFloat maxnum(const APFloat &amp;A, const APFloat &amp;B)</div><div class="ttdoc">Implements IEEE maxNum semantics.</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l01357">APFloat.h:1357</a></div></div>
<div class="ttc" id="aLoopInfo_8h_html"><div class="ttname"><a href="LoopInfo_8h.html">LoopInfo.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac3b262676b70a4f6a243e0133ba6a057"><div class="ttname"><a href="namespacellvm.html#ac3b262676b70a4f6a243e0133ba6a057">llvm::isKernelFunction</a></div><div class="ttdeci">bool isKernelFunction(const Function &amp;F)</div><div class="ttdef"><b>Definition:</b> <a href="NVPTXUtilities_8cpp_source.html#l00285">NVPTXUtilities.cpp:285</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1UnrollingPreferences_html"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html">llvm::TargetTransformInfo::UnrollingPreferences</a></div><div class="ttdoc">Parameters that control the generic loop unrolling transformation.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00440">TargetTransformInfo.h:440</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="astructllvm_1_1DenormalMode_html"><div class="ttname"><a href="structllvm_1_1DenormalMode.html">llvm::DenormalMode</a></div><div class="ttdoc">Represent subnormal handling kind for floating point instruction inputs and outputs.</div><div class="ttdef"><b>Definition:</b> <a href="FloatingPointMode_8h_source.html#l00069">FloatingPointMode.h:69</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_ac394f9304a427e4d136ac39a262c0f32"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#ac394f9304a427e4d136ac39a262c0f32">maximum</a></div><div class="ttdeci">Should compile r2 movcc movcs str strb mov lr r1 movcs movcc mov lr r1 str mov mov cmp r1 movlo r2 str bx lr r0 mov mov cmp r0 movhs r2 mov r1 bx lr Some of the NEON intrinsics may be appropriate for more general either as target independent intrinsics or perhaps elsewhere in the ARM backend Some of them may also be lowered to target independent and perhaps some new SDNodes could be added For maximum</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00489">README.txt:489</a></div></div>
<div class="ttc" id="aNVPTXTargetTransformInfo_8cpp_html_a49413e44a5e04718485c35d13fbaf833"><div class="ttname"><a href="NVPTXTargetTransformInfo_8cpp.html#a49413e44a5e04718485c35d13fbaf833">readsLaneId</a></div><div class="ttdeci">static bool readsLaneId(const IntrinsicInst *II)</div><div class="ttdef"><b>Definition:</b> <a href="NVPTXTargetTransformInfo_8cpp_source.html#l00035">NVPTXTargetTransformInfo.cpp:35</a></div></div>
<div class="ttc" id="aSIWholeQuadMode_8cpp_html_a0c198437833c48138f49e3589bd08773"><div class="ttname"><a href="SIWholeQuadMode_8cpp.html#a0c198437833c48138f49e3589bd08773">Mode</a></div><div class="ttdeci">SI Whole Quad Mode</div><div class="ttdef"><b>Definition:</b> <a href="SIWholeQuadMode_8cpp_source.html#l00262">SIWholeQuadMode.cpp:262</a></div></div>
<div class="ttc" id="aclassllvm_1_1NVPTXTTIImpl_html_abaa5914529b5da0d48b8bfa9ca149423"><div class="ttname"><a href="classllvm_1_1NVPTXTTIImpl.html#abaa5914529b5da0d48b8bfa9ca149423">llvm::NVPTXTTIImpl::getPeelingPreferences</a></div><div class="ttdeci">void getPeelingPreferences(Loop *L, ScalarEvolution &amp;SE, TTI::PeelingPreferences &amp;PP)</div><div class="ttdef"><b>Definition:</b> <a href="NVPTXTargetTransformInfo_8cpp_source.html#l00466">NVPTXTargetTransformInfo.cpp:466</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef</a></div><div class="ttdoc">ArrayRef - Represent a constant reference to an array (0 or more elements consecutively in memory),...</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00033">APInt.h:33</a></div></div>
<div class="ttc" id="aNVPTXTargetTransformInfo_8cpp_html_a49e6ceb63a029fc277a1d2abc8a2f6aa"><div class="ttname"><a href="NVPTXTargetTransformInfo_8cpp.html#a49e6ceb63a029fc277a1d2abc8a2f6aa">simplifyNvvmIntrinsic</a></div><div class="ttdeci">static Instruction * simplifyNvvmIntrinsic(IntrinsicInst *II, InstCombiner &amp;IC)</div><div class="ttdef"><b>Definition:</b> <a href="NVPTXTargetTransformInfo_8cpp_source.html#l00116">NVPTXTargetTransformInfo.cpp:116</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkEmitter_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkEmitter.html">llvm::OptimizationRemarkEmitter</a></div><div class="ttdoc">The optimization diagnostic interface.</div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8h_source.html#l00033">OptimizationRemarkEmitter.h:33</a></div></div>
<div class="ttc" id="aclassllvm_1_1MVT_html_a330aea6151cae3adaf5e179dcfe87346a97f56253625b3fe7b371ce76722de4b8"><div class="ttname"><a href="classllvm_1_1MVT.html#a330aea6151cae3adaf5e179dcfe87346a97f56253625b3fe7b371ce76722de4b8">llvm::MVT::i64</a></div><div class="ttdeci">@ i64</div><div class="ttdef"><b>Definition:</b> <a href="MachineValueType_8h_source.html#l00049">MachineValueType.h:49</a></div></div>
<div class="ttc" id="aSupport_2ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdoc">Marks that the current location is not supposed to be reachable.</div><div class="ttdef"><b>Definition:</b> <a href="Support_2ErrorHandling_8h_source.html#l00143">ErrorHandling.h:143</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a6393a2d4fe7e10b28a0dcc35f881567b"><div class="ttname"><a href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const</div><div class="ttdoc">All values are typed, get the type of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00255">Value.h:255</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a6a66ebb3aa12757479a3c88de77d78f8"><div class="ttname"><a href="classllvm_1_1Instruction.html#a6a66ebb3aa12757479a3c88de77d78f8">llvm::Instruction::getFunction</a></div><div class="ttdeci">const Function * getFunction() const</div><div class="ttdoc">Return the function this instruction belongs to.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00074">Instruction.cpp:74</a></div></div>
<div class="ttc" id="aCostModel_8cpp_html_a263d4048026a7c0a91393b998181f16e"><div class="ttname"><a href="CostModel_8cpp.html#a263d4048026a7c0a91393b998181f16e">CostKind</a></div><div class="ttdeci">static cl::opt&lt; TargetTransformInfo::TargetCostKind &gt; CostKind(&quot;cost-kind&quot;, cl::desc(&quot;Target cost kind&quot;), cl::init(TargetTransformInfo::TCK_RecipThroughput), cl::values(clEnumValN(TargetTransformInfo::TCK_RecipThroughput, &quot;throughput&quot;, &quot;Reciprocal throughput&quot;), clEnumValN(TargetTransformInfo::TCK_Latency, &quot;latency&quot;, &quot;Instruction latency&quot;), clEnumValN(TargetTransformInfo::TCK_CodeSize, &quot;code-size&quot;, &quot;Code size&quot;), clEnumValN(TargetTransformInfo::TCK_SizeAndLatency, &quot;size-latency&quot;, &quot;Code size and latency&quot;)))</div></div>
<div class="ttc" id="aREADME-FPStack_8txt_html_aeb9a134c2755c0ad7801bf630a790904"><div class="ttname"><a href="README-FPStack_8txt.html#aeb9a134c2755c0ad7801bf630a790904">trunc</a></div><div class="ttdeci">We have fiadd patterns now but the followings have the same cost and complexity We need a way to specify the later is more profitable def def The FP stackifier should handle simple permutates to reduce number of shuffle e g trunc</div><div class="ttdef"><b>Definition:</b> <a href="README-FPStack_8txt_source.html#l00063">README-FPStack.txt:63</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLoweringBase_html_a025e6664b2f55d2c217543c34eb1f64e"><div class="ttname"><a href="classllvm_1_1TargetLoweringBase.html#a025e6664b2f55d2c217543c34eb1f64e">llvm::TargetLoweringBase::InstructionOpcodeToISD</a></div><div class="ttdeci">int InstructionOpcodeToISD(unsigned Opcode) const</div><div class="ttdoc">Get the ISD node that corresponds to the Instruction class opcode.</div><div class="ttdef"><b>Definition:</b> <a href="TargetLoweringBase_8cpp_source.html#l01784">TargetLoweringBase.cpp:1784</a></div></div>
<div class="ttc" id="anamespacellvm_html_a2c3c18bffdc25d969233c5448bdfe7eba0e23fc2560ea7c89459df2a39dc386f4"><div class="ttname"><a href="namespacellvm.html#a2c3c18bffdc25d969233c5448bdfe7eba0e23fc2560ea7c89459df2a39dc386f4">llvm::ADDRESS_SPACE_GENERIC</a></div><div class="ttdeci">@ ADDRESS_SPACE_GENERIC</div><div class="ttdef"><b>Definition:</b> <a href="NVPTXBaseInfo_8h_source.html#l00022">NVPTXBaseInfo.h:22</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicTTIImplBase_html_a9d093749d001a714592c88df0e81b3fe"><div class="ttname"><a href="classllvm_1_1BasicTTIImplBase.html#a9d093749d001a714592c88df0e81b3fe">llvm::BasicTTIImplBase&lt; NVPTXTTIImpl &gt;::getPeelingPreferences</a></div><div class="ttdeci">void getPeelingPreferences(Loop *L, ScalarEvolution &amp;SE, TTI::PeelingPreferences &amp;PP)</div><div class="ttdef"><b>Definition:</b> <a href="BasicTTIImpl_8h_source.html#l00610">BasicTTIImpl.h:610</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_adb5c319f5905c1d3ca9eb5df546388c5"><div class="ttname"><a href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">Return a constant reference to the value's name.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00308">Value.cpp:308</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html"><div class="ttname"><a href="classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdoc">An instruction for reading from memory.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00177">Instructions.h:177</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_aaf03062dde511bcc74b5d01b0a2b5736"><div class="ttname"><a href="classllvm_1_1Function.html#aaf03062dde511bcc74b5d01b0a2b5736">llvm::Function::getDenormalMode</a></div><div class="ttdeci">DenormalMode getDenormalMode(const fltSemantics &amp;FPType) const</div><div class="ttdoc">Returns the denormal handling type for the default rounding mode of the function.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00699">Function.cpp:699</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Intrinsic_html_aefa39f6b622360ce4e947feb9f671b73"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">llvm::Intrinsic::getDeclaration</a></div><div class="ttdeci">Function * getDeclaration(Module *M, ID id, ArrayRef&lt; Type * &gt; Tys=std::nullopt)</div><div class="ttdoc">Create or insert an LLVM Function declaration for an intrinsic, and return it.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l01502">Function.cpp:1502</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a92febb83e6ba116eb7aae8e7e3f70cc1">llvm::ISD::XOR</a></div><div class="ttdeci">@ XOR</div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00668">ISDOpcodes.h:668</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa656aa475d13ec6a900414eadabe86b0"><div class="ttname"><a href="namespacellvm.html#aa656aa475d13ec6a900414eadabe86b0">llvm::minnum</a></div><div class="ttdeci">LLVM_READONLY APFloat minnum(const APFloat &amp;A, const APFloat &amp;B)</div><div class="ttdoc">Implements IEEE minNum semantics.</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l01346">APFloat.h:1346</a></div></div>
<div class="ttc" id="aCostTable_8h_html"><div class="ttname"><a href="CostTable_8h.html">CostTable.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantFP_html_a5eb8f7a5d3cfdd127ad9db2e425e14eb"><div class="ttname"><a href="classllvm_1_1ConstantFP.html#a5eb8f7a5d3cfdd127ad9db2e425e14eb">llvm::ConstantFP::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, double V)</div><div class="ttdoc">This returns a ConstantFP, or a vector containing a splat of a ConstantFP, for the specified value in...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00934">Constants.cpp:934</a></div></div>
<div class="ttc" id="aclassllvm_1_1NVPTXTTIImpl_html_a9489271f78c9211fa6a14f1661323ab4"><div class="ttname"><a href="classllvm_1_1NVPTXTTIImpl.html#a9489271f78c9211fa6a14f1661323ab4">llvm::NVPTXTTIImpl::instCombineIntrinsic</a></div><div class="ttdeci">std::optional&lt; Instruction * &gt; instCombineIntrinsic(InstCombiner &amp;IC, IntrinsicInst &amp;II) const</div><div class="ttdef"><b>Definition:</b> <a href="NVPTXTargetTransformInfo_8cpp_source.html#l00416">NVPTXTargetTransformInfo.cpp:416</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombiner_html"><div class="ttname"><a href="classllvm_1_1InstCombiner.html">llvm::InstCombiner</a></div><div class="ttdoc">The core instruction combiner logic.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombiner_8h_source.html#l00045">InstCombiner.h:45</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">llvm::ISD::ADD</a></div><div class="ttdeci">@ ADD</div><div class="ttdoc">Simple integer binary arithmetic operators.</div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00239">ISDOpcodes.h:239</a></div></div>
<div class="ttc" id="aclassllvm_1_1IntrinsicInst_html"><div class="ttname"><a href="classllvm_1_1IntrinsicInst.html">llvm::IntrinsicInst</a></div><div class="ttdoc">A wrapper class for inspecting calls to intrinsic functions.</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00047">IntrinsicInst.h:47</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ac26154a24f393f523c87cc5f8239f36c"><div class="ttname"><a href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">llvm::Instruction::BinaryOps</a></div><div class="ttdeci">BinaryOps</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00809">Instruction.h:809</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ISD_html_a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c"><div class="ttname"><a href="namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">llvm::ISD::MUL</a></div><div class="ttdeci">@ MUL</div><div class="ttdef"><b>Definition:</b> <a href="ISDOpcodes_8h_source.html#l00241">ISDOpcodes.h:241</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_ab2caa29167597390ab2fc3cf30d70389"><div class="ttname"><a href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">llvm::CallBase::getArgOperand</a></div><div class="ttdeci">Value * getArgOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01351">InstrTypes.h:1351</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1UnrollingPreferences_html_a21e7febf468c370793f606da5cd0e6fe"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a21e7febf468c370793f606da5cd0e6fe">llvm::TargetTransformInfo::UnrollingPreferences::Threshold</a></div><div class="ttdeci">unsigned Threshold</div><div class="ttdoc">The cost threshold for the unrolled loop.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00448">TargetTransformInfo.h:448</a></div></div>
<div class="ttc" id="aTargetTransformInfo_8h_html"><div class="ttname"><a href="TargetTransformInfo_8h.html">TargetTransformInfo.h</a></div></div>
<div class="ttc" id="astructllvm_1_1DenormalMode_html_a29b26e3ae30f3f6ec4106ff181282893a40bc80ae1d362a1461703637e946cbd8"><div class="ttname"><a href="structllvm_1_1DenormalMode.html#a29b26e3ae30f3f6ec4106ff181282893a40bc80ae1d362a1461703637e946cbd8">llvm::DenormalMode::PreserveSign</a></div><div class="ttdeci">@ PreserveSign</div><div class="ttdoc">The sign of a flushed-to-zero number is preserved in the sign of 0.</div><div class="ttdef"><b>Definition:</b> <a href="FloatingPointMode_8h_source.html#l00079">FloatingPointMode.h:79</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key_html_a1958a762261549463a280bac3274d6d5"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">llvm::AMDGPU::HSAMD::Kernel::Key::Args</a></div><div class="ttdeci">constexpr char Args[]</div><div class="ttdoc">Key for Kernel::Metadata::mArgs.</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUMetadata_8h_source.html#l00394">AMDGPUMetadata.h:394</a></div></div>
<div class="ttc" id="aBasicTTIImpl_8h_html"><div class="ttname"><a href="BasicTTIImpl_8h.html">BasicTTIImpl.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1NVPTXTTIImpl_html_afc5e1d7bf0db6dac9f375fd42b2105aa"><div class="ttname"><a href="classllvm_1_1NVPTXTTIImpl.html#afc5e1d7bf0db6dac9f375fd42b2105aa">llvm::NVPTXTTIImpl::isSourceOfDivergence</a></div><div class="ttdeci">bool isSourceOfDivergence(const Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="NVPTXTargetTransformInfo_8cpp_source.html#l00072">NVPTXTargetTransformInfo.cpp:72</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html_a02ce9966395063ac501ecbc1623deda4"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a02ce9966395063ac501ecbc1623deda4">llvm::BinaryOperator::Create</a></div><div class="ttdeci">static BinaryOperator * Create(BinaryOps Op, Value *S1, Value *S2, const Twine &amp;Name=Twine(), Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Construct a binary instruction, given the opcode and the two operands.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l02950">Instructions.cpp:2950</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00074">Value.h:74</a></div></div>
<div class="ttc" id="aDebug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_ac63dbb4994494c46f025715272cdb81e"><div class="ttname"><a href="classllvm_1_1CallBase.html#ac63dbb4994494c46f025715272cdb81e">llvm::CallBase::args</a></div><div class="ttdeci">iterator_range&lt; User::op_iterator &gt; args()</div><div class="ttdoc">Iteration adapter for range-for loops.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01342">InstrTypes.h:1342</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Intrinsic_html_a80add6b3b1cdaec560907995127adc16"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">llvm::Intrinsic::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00039">TargetTransformInfo.h:39</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:16:02 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

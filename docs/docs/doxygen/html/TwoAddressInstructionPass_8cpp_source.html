<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/CodeGen/TwoAddressInstructionPass.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_1e8ad0574bd6e387992681ee57691a07.html">CodeGen</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">TwoAddressInstructionPass.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="TwoAddressInstructionPass_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- TwoAddressInstructionPass.cpp - Two-Address instruction pass -------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This file implements the TwoAddress instruction pass which is used</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// by most register allocators. Two-Address instructions are rewritten</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// from:</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//     A = B op C</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">// to:</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">//     A = B</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">//     A op= C</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// Note that if a register allocator chooses to use this pass, that it</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">// has to be capable of handling the non-SSA nature of these rewritten</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">// virtual registers.</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">// It is also worth noting that the duplicate operand of the two</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">// address instruction is removed.</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160; </div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseMap_8h.html">llvm/ADT/DenseMap.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallPtrSet_8h.html">llvm/ADT/SmallPtrSet.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallVector_8h.html">llvm/ADT/SmallVector.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="iterator__range_8h.html">llvm/ADT/iterator_range.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AliasAnalysis_8h.html">llvm/Analysis/AliasAnalysis.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LiveInterval_8h.html">llvm/CodeGen/LiveInterval.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LiveIntervals_8h.html">llvm/CodeGen/LiveIntervals.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LiveVariables_8h.html">llvm/CodeGen/LiveVariables.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineBasicBlock_8h.html">llvm/CodeGen/MachineBasicBlock.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineFunction_8h.html">llvm/CodeGen/MachineFunction.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineFunctionPass_8h.html">llvm/CodeGen/MachineFunctionPass.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineInstr_8h.html">llvm/CodeGen/MachineInstr.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineInstrBuilder_8h.html">llvm/CodeGen/MachineInstrBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineOperand_8h.html">llvm/CodeGen/MachineOperand.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineRegisterInfo_8h.html">llvm/CodeGen/MachineRegisterInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CodeGen_2Passes_8h.html">llvm/CodeGen/Passes.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SlotIndexes_8h.html">llvm/CodeGen/SlotIndexes.h</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetInstrInfo_8h.html">llvm/CodeGen/TargetInstrInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetOpcodes_8h.html">llvm/CodeGen/TargetOpcodes.h</a>&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetRegisterInfo_8h.html">llvm/CodeGen/TargetRegisterInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetSubtargetInfo_8h.html">llvm/CodeGen/TargetSubtargetInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MCInstrDesc_8h.html">llvm/MC/MCInstrDesc.h</a>&quot;</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Pass_8h.html">llvm/Pass.h</a>&quot;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CodeGen_8h.html">llvm/Support/CodeGen.h</a>&quot;</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Support_2ErrorHandling_8h.html">llvm/Support/ErrorHandling.h</a>&quot;</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Target_2TargetMachine_8h.html">llvm/Target/TargetMachine.h</a>&quot;</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &lt;iterator&gt;</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="TwoAddressInstructionPass_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   65</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;twoaddressinstruction&quot;</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160; </div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumTwoAddressInstrs, <span class="stringliteral">&quot;Number of two-address instructions&quot;</span>);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumCommuted        , <span class="stringliteral">&quot;Number of instructions commuted to coalesce&quot;</span>);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumAggrCommuted    , <span class="stringliteral">&quot;Number of instructions aggressively commuted&quot;</span>);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumConvertedTo3Addr, <span class="stringliteral">&quot;Number of instructions promoted to 3-address&quot;</span>);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumReSchedUps,       <span class="stringliteral">&quot;Number of instructions re-scheduled up&quot;</span>);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumReSchedDowns,     <span class="stringliteral">&quot;Number of instructions re-scheduled down&quot;</span>);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">// Temporary flag to disable rescheduling.</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<a class="code" href="TwoAddressInstructionPass_8cpp.html#a05eb50892c09d6c2d9a8c69c36b6468f">EnableRescheduling</a>(<span class="stringliteral">&quot;twoaddr-reschedule&quot;</span>,</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                   <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Coalesce copies by rescheduling (default=true)&quot;</span>),</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                   <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">// Limit the number of dataflow edges to traverse when evaluating the benefit</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">// of commuting operands.</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="TwoAddressInstructionPass_8cpp.html#a690b8efc3175d0d1f5f2588e2bfdb378">MaxDataFlowEdge</a>(</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="stringliteral">&quot;dataflow-edge-limit&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(3),</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Maximum number of dataflow edges to traverse when evaluating &quot;</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;             <span class="stringliteral">&quot;the benefit of commuting operands&quot;</span>));</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="keyword">class </span>TwoAddressInstructionPass : <span class="keyword">public</span> <a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a> {</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> *MF;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1InstrItineraryData.html">InstrItineraryData</a> *InstrItins;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> *<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <a class="code" href="classllvm_1_1LiveVariables.html">LiveVariables</a> *LV;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <a class="code" href="classllvm_1_1LiveIntervals.html">LiveIntervals</a> *LIS;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <a class="code" href="classllvm_1_1AAResults.html">AliasAnalysis</a> *AA;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <a class="code" href="namespacellvm_1_1CodeGenOpt.html#ad7e52174abb1cfb84238ad1ac475ee36">CodeGenOpt::Level</a> OptLevel;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="comment">// The current basic block being processed.</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="comment">// Keep track the distance of a MI from the start of the current basic block.</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;MachineInstr*, unsigned&gt;</a> DistanceMap;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="comment">// Set of already processed instructions in the current block.</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;MachineInstr*, 8&gt;</a> Processed;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="comment">// A map from virtual registers to physical registers which are likely targets</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="comment">// to be coalesced to due to copies from physical registers to virtual</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <span class="comment">// registers. e.g. v1024 = move r0.</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Register, Register&gt;</a> SrcRegMap;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="comment">// A map from virtual registers to physical registers which are likely targets</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="comment">// to be coalesced to due to copies to physical registers from virtual</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="comment">// registers. e.g. r1 = move v1024.</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Register, Register&gt;</a> DstRegMap;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="keywordtype">void</span> removeClobberedSrcRegMap(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="keywordtype">bool</span> isRevCopyChain(<a class="code" href="classllvm_1_1Register.html">Register</a> FromReg, <a class="code" href="classllvm_1_1Register.html">Register</a> ToReg, <span class="keywordtype">int</span> Maxlen);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="keywordtype">bool</span> noUseAfterLastDef(<a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, <span class="keywordtype">unsigned</span> Dist, <span class="keywordtype">unsigned</span> &amp;LastDef);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160; </div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="keywordtype">bool</span> isProfitableToCommute(<a class="code" href="classllvm_1_1Register.html">Register</a> RegA, <a class="code" href="classllvm_1_1Register.html">Register</a> RegB, <a class="code" href="classllvm_1_1Register.html">Register</a> RegC,</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                             <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keywordtype">unsigned</span> Dist);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="keywordtype">bool</span> commuteInstruction(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keywordtype">unsigned</span> DstIdx,</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                          <span class="keywordtype">unsigned</span> RegBIdx, <span class="keywordtype">unsigned</span> RegCIdx, <span class="keywordtype">unsigned</span> Dist);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="keywordtype">bool</span> isProfitableToConv3Addr(<a class="code" href="classllvm_1_1Register.html">Register</a> RegA, <a class="code" href="classllvm_1_1Register.html">Register</a> RegB);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <span class="keywordtype">bool</span> convertInstTo3Addr(<a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> &amp;mi,</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                          <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> &amp;nmi, <a class="code" href="classllvm_1_1Register.html">Register</a> RegA,</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                          <a class="code" href="classllvm_1_1Register.html">Register</a> RegB, <span class="keywordtype">unsigned</span> &amp;Dist);</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="keywordtype">bool</span> isDefTooClose(<a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, <span class="keywordtype">unsigned</span> Dist, <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <span class="keywordtype">bool</span> rescheduleMIBelowKill(<a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> &amp;mi,</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                             <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> &amp;nmi, <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="keywordtype">bool</span> rescheduleKillAboveMI(<a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> &amp;mi,</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                             <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> &amp;nmi, <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="keywordtype">bool</span> tryInstructionTransform(<a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> &amp;mi,</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                               <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> &amp;nmi,</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                               <span class="keywordtype">unsigned</span> SrcIdx, <span class="keywordtype">unsigned</span> DstIdx,</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                               <span class="keywordtype">unsigned</span> &amp;Dist, <span class="keywordtype">bool</span> shouldOnlyCommute);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="keywordtype">bool</span> tryInstructionCommute(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                             <span class="keywordtype">unsigned</span> DstOpIdx,</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                             <span class="keywordtype">unsigned</span> BaseOpIdx,</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                             <span class="keywordtype">bool</span> BaseOpKilled,</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                             <span class="keywordtype">unsigned</span> Dist);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="keywordtype">void</span> scanUses(<a class="code" href="classllvm_1_1Register.html">Register</a> DstReg);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160; </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <span class="keywordtype">void</span> processCopy(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160; </div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="keyword">using</span> TiedPairList = <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;unsigned, unsigned&gt;</a>, 4&gt;;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <span class="keyword">using</span> TiedOperandMap = <a class="code" href="classllvm_1_1SmallDenseMap.html">SmallDenseMap&lt;unsigned, TiedPairList&gt;</a>;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160; </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="keywordtype">bool</span> collectTiedOperands(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, TiedOperandMap&amp;);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="keywordtype">void</span> processTiedPairs(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, TiedPairList&amp;, <span class="keywordtype">unsigned</span> &amp;Dist);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <span class="keywordtype">void</span> eliminateRegSequence(<a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a>&amp;);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="keywordtype">bool</span> processStatepoint(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, TiedOperandMap &amp;TiedOperands);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160; </div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>; <span class="comment">// Pass identification, replacement for typeid</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  TwoAddressInstructionPass() : <a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a>(<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>) {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <a class="code" href="namespacellvm.html#a70671a37747699d83fa660b2e9b18c0a">initializeTwoAddressInstructionPassPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  }</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160; </div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const override </span>{</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#af11a6ebf7ab3c388234cb6d5378439a3">setPreservesCFG</a>();</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a316c141eb121e46a1de4c395af75eb60">addUsedIfAvailable</a>&lt;<a class="code" href="classllvm_1_1AAResultsWrapperPass.html">AAResultsWrapperPass</a>&gt;();</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a316c141eb121e46a1de4c395af75eb60">addUsedIfAvailable</a>&lt;<a class="code" href="classllvm_1_1LiveVariables.html">LiveVariables</a>&gt;();</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1LiveVariables.html">LiveVariables</a>&gt;();</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1SlotIndexes.html">SlotIndexes</a>&gt;();</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1LiveIntervals.html">LiveIntervals</a>&gt;();</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a40970e5d42646fb2d9aa5f7a2c879516">addPreservedID</a>(<a class="code" href="namespacellvm.html#a60b90e9a630631cf67aaef4679ffbf62">MachineLoopInfoID</a>);</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a40970e5d42646fb2d9aa5f7a2c879516">addPreservedID</a>(<a class="code" href="namespacellvm.html#a5a36a0d02a1629e4c1c8c6c587d01e5b">MachineDominatorsID</a>);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <a class="code" href="classllvm_1_1MachineFunctionPass.html#a864fd57b4304ef933b3281d0ef85a88e">MachineFunctionPass::getAnalysisUsage</a>(AU);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment">  /// Pass entry point.</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> runOnMachineFunction(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a>&amp;) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;};</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160; </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;} <span class="comment">// end anonymous namespace</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160; </div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46">TwoAddressInstructionPass::ID</a> = 0;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="namespacellvm.html#adcdd39e0229ebb0b23f143d644d2d1f7">  193</a></span>&#160;<span class="keywordtype">char</span> &amp;<a class="code" href="namespacellvm.html#adcdd39e0229ebb0b23f143d644d2d1f7">llvm::TwoAddressInstructionPassID</a> = <a class="code" href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46">TwoAddressInstructionPass::ID</a>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<a class="code" href="TwoAddressInstructionPass_8cpp.html#ab0d20266c19b18190c410c7eea766d71">INITIALIZE_PASS_BEGIN</a>(TwoAddressInstructionPass, <a class="code" href="TwoAddressInstructionPass_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>,</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                <span class="stringliteral">&quot;Two-Address instruction pass&quot;</span>, <span class="keyword">false</span>, <span class="keyword">false</span>)</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1AAResultsWrapperPass.html">AAResultsWrapperPass</a>)</div>
<div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="TwoAddressInstructionPass_8cpp.html#a030569d5a541b6110f2ae1b6a3413a58">  198</a></span>&#160;<a class="code" href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a>(TwoAddressInstructionPass, <a class="code" href="TwoAddressInstructionPass_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>,</div>
<div class="line"><a name="l00199"></a><span class="lineno"><a class="line" href="TwoAddressInstructionPass_8cpp.html#a34b5cf133e2453a532a504197fec9171">  199</a></span>&#160;                &quot;Two-Address <a class="code" href="README__ALTIVEC_8txt.html#a3b54c55bd8a7121b30fc06cc567afcf0">instruction</a> <a class="code" href="TwoAddressInstructionPass_8cpp.html#a34b5cf133e2453a532a504197fec9171">pass</a>&quot;, <a class="code" href="namespacefalse.html">false</a>, <a class="code" href="namespacefalse.html">false</a>)</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160; </div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;static <span class="keywordtype">bool</span> <a class="code" href="TwoAddressInstructionPass_8cpp.html#a9f2b66889d0c0ea7b69a188d959d600e">isPlainlyKilled</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, <a class="code" href="classllvm_1_1LiveIntervals.html">LiveIntervals</a> *LIS);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">/// Return the MachineInstr* if it is the single def of the Reg in current BB.</span></div>
<div class="line"><a name="l00204"></a><span class="lineno"><a class="line" href="TwoAddressInstructionPass_8cpp.html#a68a25b648e0046ab93f441697d089172">  204</a></span>&#160;<span class="comment"></span>static <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="TwoAddressInstructionPass_8cpp.html#a68a25b648e0046ab93f441697d089172">getSingleDef</a>(<a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                                  <a class="code" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> *<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>) {</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a> : <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#aaa8b32a81bd37ce4b1654d8c3688eff6">def_instructions</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>)) {</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a>.getParent() != <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> || <a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a>.isDebugValue())</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>)</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> = &amp;<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a>;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> != &amp;<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a>)</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  }</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;}</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">/// Check if there is a reversed copy chain from FromReg to ToReg:</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">/// %Tmp1 = copy %Tmp2;</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">/// %FromReg = copy %Tmp1;</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">/// %ToReg = add %FromReg ...</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">/// %Tmp2 = copy %ToReg;</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">/// MaxLen specifies the maximum length of the copy chain the func</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment">/// can walk through.</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> TwoAddressInstructionPass::isRevCopyChain(<a class="code" href="classllvm_1_1Register.html">Register</a> FromReg, <a class="code" href="classllvm_1_1Register.html">Register</a> ToReg,</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                                               <span class="keywordtype">int</span> Maxlen) {</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> TmpReg = FromReg;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; Maxlen; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a> = <a class="code" href="TwoAddressInstructionPass_8cpp.html#a68a25b648e0046ab93f441697d089172">getSingleDef</a>(TmpReg, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a> || !<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>-&gt;isCopy())</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160; </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    TmpReg = <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>-&gt;getOperand(1).getReg();</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160; </div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keywordflow">if</span> (TmpReg == ToReg)</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  }</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;}</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment">/// Return true if there are no intervening uses between the last instruction</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment">/// in the MBB that defines the specified register and the two-address</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">/// instruction which is being processed. It also returns the last def location</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">/// by reference.</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> TwoAddressInstructionPass::noUseAfterLastDef(<a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, <span class="keywordtype">unsigned</span> Dist,</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                                                  <span class="keywordtype">unsigned</span> &amp;LastDef) {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  LastDef = 0;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="keywordtype">unsigned</span> LastUse = Dist;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO : <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a29b23ea3c75302a35dd7307f6915db3f">reg_operands</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>)) {</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = MO.getParent();</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getParent() != <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> || <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;isDebugValue())</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;MachineInstr*, unsigned&gt;::iterator</a> DI = DistanceMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keywordflow">if</span> (DI == DistanceMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>())</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordflow">if</span> (MO.isUse() &amp;&amp; DI-&gt;second &lt; LastUse)</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      LastUse = DI-&gt;second;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordflow">if</span> (MO.isDef() &amp;&amp; DI-&gt;second &gt; LastDef)</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      LastDef = DI-&gt;second;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  }</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160; </div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <span class="keywordflow">return</span> !(LastUse &gt; LastDef &amp;&amp; LastUse &lt; Dist);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;}</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">/// Return true if the specified MI is a copy instruction or an extract_subreg</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">/// instruction. It also returns the source and destination registers and</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">/// whether they are physical registers by reference.</span></div>
<div class="line"><a name="l00268"></a><span class="lineno"><a class="line" href="TwoAddressInstructionPass_8cpp.html#a6616256570974bd60b93306d9cbfe21a">  268</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="TwoAddressInstructionPass_8cpp.html#a6616256570974bd60b93306d9cbfe21a">isCopyToReg</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>,</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                        <a class="code" href="classllvm_1_1Register.html">Register</a> &amp;SrcReg, <a class="code" href="classllvm_1_1Register.html">Register</a> &amp;DstReg, <span class="keywordtype">bool</span> &amp;IsSrcPhys,</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                        <span class="keywordtype">bool</span> &amp;IsDstPhys) {</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  SrcReg = 0;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  DstReg = 0;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isCopy()) {</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    SrcReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isInsertSubreg() || <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isSubregToReg()) {</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    SrcReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  }</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  IsSrcPhys = SrcReg.<a class="code" href="classllvm_1_1Register.html#a13bd3dae94013a7bf38afc9391c8fa8f">isPhysical</a>();</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  IsDstPhys = DstReg.<a class="code" href="classllvm_1_1Register.html#a13bd3dae94013a7bf38afc9391c8fa8f">isPhysical</a>();</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;}</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment">/// Test if the given register value, which is used by the</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment">/// given instruction, is killed by the given instruction.</span></div>
<div class="line"><a name="l00290"></a><span class="lineno"><a class="line" href="TwoAddressInstructionPass_8cpp.html#a9f2b66889d0c0ea7b69a188d959d600e">  290</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="TwoAddressInstructionPass_8cpp.html#a9f2b66889d0c0ea7b69a188d959d600e">isPlainlyKilled</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>,</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                            <a class="code" href="classllvm_1_1LiveIntervals.html">LiveIntervals</a> *LIS) {</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <span class="keywordflow">if</span> (LIS &amp;&amp; <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>.isVirtual() &amp;&amp; !LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#aa1818a17984c50c7190464f3a04c0f3b">isNotInMIMap</a>(*<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)) {</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="comment">// FIXME: Sometimes tryInstructionTransform() will add instructions and</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="comment">// test whether they can be folded before keeping them. In this case it</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="comment">// sets a kill before recursively calling tryInstructionTransform() again.</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="comment">// If there is no interval available, we assume that this instruction is</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="comment">// one of those. A kill flag is manually inserted on the operand so the</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="comment">// check below will handle it.</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;LI = LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a25c117ac45bfbbcf69dc0b674db2d1ea">getInterval</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="comment">// This is to match the kill flag version where undefs don&#39;t have kill</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="comment">// flags.</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">if</span> (!LI.<a class="code" href="classllvm_1_1LiveRange.html#ace8519cea9fa2e688a052df670afe41e">hasAtLeastOneValue</a>())</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160; </div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> useIdx = LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a6f3043b29023d270fc4bc5062dff7cee">getInstructionIndex</a>(*<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <a class="code" href="classllvm_1_1LiveRange.html#a3fc869c7f6d53c3fbb4e572b7821dd05">LiveInterval::const_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = LI.<a class="code" href="classllvm_1_1LiveRange.html#afeb00b9049a2391c990df15692caef63">find</a>(useIdx);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != LI.<a class="code" href="classllvm_1_1LiveRange.html#a757fd6afba0f531db70e78e057d147c6">end</a>() &amp;&amp; <span class="stringliteral">&quot;Reg must be live-in to use.&quot;</span>);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;end.isBlock() &amp;&amp; <a class="code" href="classllvm_1_1SlotIndex.html#a0b73244049319d841fd11a238f35b5d1">SlotIndex::isSameInstr</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;end, useIdx);</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  }</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160; </div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;killsRegister(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;}</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="comment">/// Test if the given register value, which is used by the given</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="comment">/// instruction, is killed by the given instruction. This looks through</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="comment">/// coalescable copies to see if the original value is potentially not killed.</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment">/// For example, in this code:</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment">///   %reg1034 = copy %reg1024</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment">///   %reg1035 = copy killed %reg1025</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="comment">///   %reg1036 = add killed %reg1034, killed %reg1035</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment">/// %reg1034 is not considered to be killed, since it is copied from a</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment">/// register which is not killed. Treating it as not killed lets the</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="comment">/// normal heuristics commute the (two-address) add, which lets</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="comment">/// coalescing eliminate the extra copy.</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="comment">/// If allowFalsePositives is true then likely kills are treated as kills even</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment">/// if it can&#39;t be proven that they are kills.</span></div>
<div class="line"><a name="l00331"></a><span class="lineno"><a class="line" href="TwoAddressInstructionPass_8cpp.html#adc661c157001f2a5aca972c2d0e9f181">  331</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="TwoAddressInstructionPass_8cpp.html#adc661c157001f2a5aca972c2d0e9f181">isKilled</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>,</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                     <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> *<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>,</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                     <a class="code" href="classllvm_1_1LiveIntervals.html">LiveIntervals</a> *LIS, <span class="keywordtype">bool</span> allowFalsePositives) {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a> = &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="comment">// All uses of physical registers are likely to be kills.</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>.isPhysical() &amp;&amp; (allowFalsePositives || <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a600a2d410c09a9486e828ea34e5a9566">hasOneUse</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>)))</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="TwoAddressInstructionPass_8cpp.html#a9f2b66889d0c0ea7b69a188d959d600e">isPlainlyKilled</a>(<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a>, <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, LIS))</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>.isPhysical())</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <a class="code" href="classllvm_1_1MachineRegisterInfo_1_1defusechain__iterator.html">MachineRegisterInfo::def_iterator</a> Begin = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a56c15f3294c62d7590bb98e4d08ddeef">def_begin</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="comment">// If there are multiple defs, we can&#39;t do a simple analysis, so just</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="comment">// go with what the kill flag says.</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordflow">if</span> (std::next(Begin) != <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#aa21b132afc12ed3cead7a879506f277a">def_end</a>())</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a> = Begin-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#acad8fe90886f92eabced0c2f9bd0e6f5">getParent</a>();</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="keywordtype">bool</span> IsSrcPhys, IsDstPhys;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> SrcReg, DstReg;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="comment">// If the def is something other than a copy, then it isn&#39;t going to</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="comment">// be coalesced, so follow the kill flag.</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="TwoAddressInstructionPass_8cpp.html#a6616256570974bd60b93306d9cbfe21a">isCopyToReg</a>(*<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>, SrcReg, DstReg, IsSrcPhys, IsDstPhys))</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = SrcReg;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  }</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;}</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="comment">/// Return true if the specified MI uses the specified register as a two-address</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment">/// use. If so, return the destination register by reference.</span></div>
<div class="line"><a name="l00361"></a><span class="lineno"><a class="line" href="TwoAddressInstructionPass_8cpp.html#a11329b543886f5ac685e48ab2d45ee6c">  361</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="TwoAddressInstructionPass_8cpp.html#a11329b543886f5ac685e48ab2d45ee6c">isTwoAddrUse</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, <a class="code" href="classllvm_1_1Register.html">Register</a> &amp;DstReg) {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, NumOps = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumOperands(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != NumOps; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="keywordflow">if</span> (!MO.<a class="code" href="classllvm_1_1MachineOperand.html#a4c9594c955fec80c73ddd964b5efd554">isReg</a>() || !MO.<a class="code" href="classllvm_1_1MachineOperand.html#a69544ec8658eadeed98245dc37c3a541">isUse</a>() || MO.<a class="code" href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">getReg</a>() != <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>)</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordtype">unsigned</span> ti;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isRegTiedToDefOperand(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, &amp;ti)) {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(ti).getReg();</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    }</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  }</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;}</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment">/// Given a register, if all its uses are in the same basic block, return the</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment">/// last use instruction if it&#39;s a copy or a two-address use.</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *</div>
<div class="line"><a name="l00378"></a><span class="lineno"><a class="line" href="TwoAddressInstructionPass_8cpp.html#a5c593c6a15dc72cc97e51bfb45501c22">  378</a></span>&#160;<a class="code" href="TwoAddressInstructionPass_8cpp.html#a5c593c6a15dc72cc97e51bfb45501c22">findOnlyInterestingUse</a>(<a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>,</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                       <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> *<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>,</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                       <span class="keywordtype">bool</span> &amp;IsCopy, <a class="code" href="classllvm_1_1Register.html">Register</a> &amp;DstReg, <span class="keywordtype">bool</span> &amp;IsDstPhys,</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                       <a class="code" href="classllvm_1_1LiveIntervals.html">LiveIntervals</a> *LIS) {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> *UseOp = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO : <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5a5871d5cc628499a6d8e56734873e01">use_nodbg_operands</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>)) {</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = MO.getParent();</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getParent() != <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>)</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="TwoAddressInstructionPass_8cpp.html#a9f2b66889d0c0ea7b69a188d959d600e">isPlainlyKilled</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, LIS))</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      UseOp = &amp;MO;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  }</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="keywordflow">if</span> (!UseOp)</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a> = *UseOp-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#acad8fe90886f92eabced0c2f9bd0e6f5">getParent</a>();</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160; </div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> SrcReg;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <span class="keywordtype">bool</span> IsSrcPhys;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="TwoAddressInstructionPass_8cpp.html#a6616256570974bd60b93306d9cbfe21a">isCopyToReg</a>(<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>, SrcReg, DstReg, IsSrcPhys, IsDstPhys)) {</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    IsCopy = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a>;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  }</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  IsDstPhys = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="TwoAddressInstructionPass_8cpp.html#a11329b543886f5ac685e48ab2d45ee6c">isTwoAddrUse</a>(<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a>, <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, DstReg)) {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    IsDstPhys = DstReg.<a class="code" href="classllvm_1_1Register.html#a13bd3dae94013a7bf38afc9391c8fa8f">isPhysical</a>();</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a>;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  }</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a>.isCommutable()) {</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordtype">unsigned</span> Src1 = <a class="code" href="classllvm_1_1TargetInstrInfo.html#ae73e2be2b66dc9e4f2f90d56076d7ea9">TargetInstrInfo::CommuteAnyOperandIndex</a>;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordtype">unsigned</span> Src2 = UseOp-&gt;<a class="code" href="classllvm_1_1MachineOperand.html#a0c893675dfd5d1b1e4aea1e8211217c7">getOperandNo</a>();</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;findCommutedOpIndices(<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a>, Src1, Src2)) {</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = <a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a>.getOperand(Src1);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;      <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#a4c9594c955fec80c73ddd964b5efd554">isReg</a>() &amp;&amp; MO.<a class="code" href="classllvm_1_1MachineOperand.html#a69544ec8658eadeed98245dc37c3a541">isUse</a>() &amp;&amp;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;          <a class="code" href="TwoAddressInstructionPass_8cpp.html#a11329b543886f5ac685e48ab2d45ee6c">isTwoAddrUse</a>(<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a>, MO.<a class="code" href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">getReg</a>(), DstReg)) {</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        IsDstPhys = DstReg.<a class="code" href="classllvm_1_1Register.html#a13bd3dae94013a7bf38afc9391c8fa8f">isPhysical</a>();</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        <span class="keywordflow">return</span> &amp;<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a>;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      }</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    }</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  }</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;}</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="comment">/// Return the physical register the specified virtual register might be mapped</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment">/// to.</span></div>
<div class="line"><a name="l00422"></a><span class="lineno"><a class="line" href="TwoAddressInstructionPass_8cpp.html#a23877408ca0a8e70800e92900708baaf">  422</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1MCRegister.html">MCRegister</a> <a class="code" href="TwoAddressInstructionPass_8cpp.html#a23877408ca0a8e70800e92900708baaf">getMappedReg</a>(<a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>,</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                               <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Register, Register&gt;</a> &amp;RegMap) {</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>.isVirtual()) {</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Register, Register&gt;::iterator</a> <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = RegMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> == RegMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>())</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;second;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  }</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>.isPhysical())</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;}</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="comment">/// Return true if the two registers are equal or aliased.</span></div>
<div class="line"><a name="l00436"></a><span class="lineno"><a class="line" href="TwoAddressInstructionPass_8cpp.html#a82a4757e5e6fda3301aaf47e1bccacd8">  436</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="TwoAddressInstructionPass_8cpp.html#a82a4757e5e6fda3301aaf47e1bccacd8">regsAreCompatible</a>(<a class="code" href="classllvm_1_1Register.html">Register</a> RegA, <a class="code" href="classllvm_1_1Register.html">Register</a> RegB,</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                              <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>) {</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <span class="keywordflow">if</span> (RegA == RegB)</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  <span class="keywordflow">if</span> (!RegA || !RegB)</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>-&gt;<a class="code" href="classllvm_1_1TargetRegisterInfo.html#ab5dddfd4ef6db864a18ecdbe51331b92">regsOverlap</a>(RegA, RegB);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;}</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment">/// From RegMap remove entries mapped to a physical register which overlaps MO.</span></div>
<div class="line"><a name="l00446"></a><span class="lineno"><a class="line" href="TwoAddressInstructionPass_8cpp.html#a7520e23c64ea3d12277d5d7905a621d4">  446</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="TwoAddressInstructionPass_8cpp.html#a7520e23c64ea3d12277d5d7905a621d4">removeMapRegEntry</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO,</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                              <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Register, Register&gt;</a> &amp;RegMap,</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                              <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>) {</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      (MO.<a class="code" href="classllvm_1_1MachineOperand.html#a4c9594c955fec80c73ddd964b5efd554">isReg</a>() || MO.<a class="code" href="classllvm_1_1MachineOperand.html#a55fdcb2a9df9a69067eed1bc17a0b927">isRegMask</a>()) &amp;&amp;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      <span class="stringliteral">&quot;removeMapRegEntry must be called with a register or regmask operand.&quot;</span>);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160; </div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 2&gt;</a> Srcs;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> : RegMap) {</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> ToReg = <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.second;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keywordflow">if</span> (ToReg.<a class="code" href="classllvm_1_1Register.html#aebafd86dde59b5a05b22e8720e808a9d">isVirtual</a>())</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160; </div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#a4c9594c955fec80c73ddd964b5efd554">isReg</a>()) {</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = MO.<a class="code" href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">getReg</a>();</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>-&gt;<a class="code" href="classllvm_1_1TargetRegisterInfo.html#ab5dddfd4ef6db864a18ecdbe51331b92">regsOverlap</a>(ToReg, <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>))</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        Srcs.push_back(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.first);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#ae4ecf5483b94e2bb72967b80cc2008d2">clobbersPhysReg</a>(ToReg))</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      Srcs.push_back(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>.first);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  }</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160; </div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> SrcReg : Srcs)</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    RegMap.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a563ffc2ff61c499b3be2e00100cb72fa">erase</a>(SrcReg);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;}</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="comment">/// If a physical register is clobbered, old entries mapped to it should be</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment">/// deleted. For example</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment">///     %2:gr64 = COPY killed $rdx</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment">///     MUL64r %3:gr64, implicit-def $rax, implicit-def $rdx</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="comment">/// After the MUL instruction, $rdx contains different value than in the COPY</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="comment">/// instruction. So %2 should not map to $rdx after MUL.</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> TwoAddressInstructionPass::removeClobberedSrcRegMap(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;isCopy()) {</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="comment">// If a virtual register is copied to its mapped physical register, it</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="comment">// doesn&#39;t change the potential coalescing between them, so we don&#39;t remove</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="comment">// entries mapped to the physical register. For example</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="comment">// %100 = COPY $r8</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="comment">//     ...</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="comment">// $r8  = COPY %100</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="comment">// The first copy constructs SrcRegMap[%100] = $r8, the second copy doesn&#39;t</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="comment">// destroy the content of $r8, and should not impact SrcRegMap.</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(0).getReg();</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="keywordflow">if</span> (!Dst || Dst.isVirtual())</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160; </div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> Src = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(1).getReg();</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="TwoAddressInstructionPass_8cpp.html#a82a4757e5e6fda3301aaf47e1bccacd8">regsAreCompatible</a>(Dst, <a class="code" href="TwoAddressInstructionPass_8cpp.html#a23877408ca0a8e70800e92900708baaf">getMappedReg</a>(Src, SrcRegMap), <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>))</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  }</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160; </div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO : <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;operands()) {</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="keywordflow">if</span> (MO.isRegMask()) {</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      <a class="code" href="TwoAddressInstructionPass_8cpp.html#a7520e23c64ea3d12277d5d7905a621d4">removeMapRegEntry</a>(MO, SrcRegMap, <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    }</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="keywordflow">if</span> (!MO.isReg() || !MO.isDef())</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = MO.getReg();</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> || <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>.isVirtual())</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <a class="code" href="TwoAddressInstructionPass_8cpp.html#a7520e23c64ea3d12277d5d7905a621d4">removeMapRegEntry</a>(MO, SrcRegMap, <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>);</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  }</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;}</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160; </div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment">// Returns true if Reg is equal or aliased to at least one register in Set.</span></div>
<div class="line"><a name="l00515"></a><span class="lineno"><a class="line" href="TwoAddressInstructionPass_8cpp.html#ad442c7b9729dcf7a654433853fbbaad9">  515</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="TwoAddressInstructionPass_8cpp.html#ad442c7b9729dcf7a654433853fbbaad9">regOverlapsSet</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Register&gt;</a> &amp;Set, <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>,</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                           <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> *<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>) {</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> R : Set)</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>-&gt;<a class="code" href="classllvm_1_1TargetRegisterInfo.html#ab5dddfd4ef6db864a18ecdbe51331b92">regsOverlap</a>(R, <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>))</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160; </div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;}</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="comment">/// Return true if it&#39;s potentially profitable to commute the two-address</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="comment">/// instruction that&#39;s being processed.</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> TwoAddressInstructionPass::isProfitableToCommute(<a class="code" href="classllvm_1_1Register.html">Register</a> RegA,</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                                                      <a class="code" href="classllvm_1_1Register.html">Register</a> RegB,</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                                                      <a class="code" href="classllvm_1_1Register.html">Register</a> RegC,</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;                                                      <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;                                                      <span class="keywordtype">unsigned</span> Dist) {</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  <span class="keywordflow">if</span> (OptLevel == <a class="code" href="namespacellvm_1_1CodeGenOpt.html#ad7e52174abb1cfb84238ad1ac475ee36a451bbac85aff02d070be3c17a6bef928">CodeGenOpt::None</a>)</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160; </div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <span class="comment">// Determine if it&#39;s profitable to commute this two address instruction. In</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  <span class="comment">// general, we want no uses between this instruction and the definition of</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  <span class="comment">// the two-address register.</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  <span class="comment">// e.g.</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  <span class="comment">// %reg1028 = EXTRACT_SUBREG killed %reg1027, 1</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="comment">// %reg1029 = COPY %reg1028</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  <span class="comment">// %reg1029 = SHR8ri %reg1029, 7, implicit dead %eflags</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  <span class="comment">// insert =&gt; %reg1030 = COPY %reg1028</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  <span class="comment">// %reg1030 = ADD8rr killed %reg1028, killed %reg1029, implicit dead %eflags</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  <span class="comment">// In this case, it might not be possible to coalesce the second COPY</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  <span class="comment">// instruction if the first one is coalesced. So it would be profitable to</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  <span class="comment">// commute it:</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  <span class="comment">// %reg1028 = EXTRACT_SUBREG killed %reg1027, 1</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <span class="comment">// %reg1029 = COPY %reg1028</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  <span class="comment">// %reg1029 = SHR8ri %reg1029, 7, implicit dead %eflags</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  <span class="comment">// insert =&gt; %reg1030 = COPY %reg1029</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  <span class="comment">// %reg1030 = ADD8rr killed %reg1029, killed %reg1028, implicit dead %eflags</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160; </div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="TwoAddressInstructionPass_8cpp.html#a9f2b66889d0c0ea7b69a188d959d600e">isPlainlyKilled</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, RegC, LIS))</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160; </div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  <span class="comment">// Ok, we have something like:</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  <span class="comment">// %reg1030 = ADD8rr killed %reg1028, killed %reg1029, implicit dead %eflags</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  <span class="comment">// let&#39;s see if it&#39;s worth commuting it.</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160; </div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  <span class="comment">// Look for situations like this:</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  <span class="comment">// %reg1024 = MOV r1</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  <span class="comment">// %reg1025 = MOV r0</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  <span class="comment">// %reg1026 = ADD %reg1024, %reg1025</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  <span class="comment">// r0            = MOV %reg1026</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <span class="comment">// Commute the ADD to hopefully eliminate an otherwise unavoidable copy.</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  <a class="code" href="classllvm_1_1MCRegister.html">MCRegister</a> ToRegA = <a class="code" href="TwoAddressInstructionPass_8cpp.html#a23877408ca0a8e70800e92900708baaf">getMappedReg</a>(RegA, DstRegMap);</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  <span class="keywordflow">if</span> (ToRegA) {</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <a class="code" href="classllvm_1_1MCRegister.html">MCRegister</a> FromRegB = <a class="code" href="TwoAddressInstructionPass_8cpp.html#a23877408ca0a8e70800e92900708baaf">getMappedReg</a>(RegB, SrcRegMap);</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <a class="code" href="classllvm_1_1MCRegister.html">MCRegister</a> FromRegC = <a class="code" href="TwoAddressInstructionPass_8cpp.html#a23877408ca0a8e70800e92900708baaf">getMappedReg</a>(RegC, SrcRegMap);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <span class="keywordtype">bool</span> CompB = FromRegB &amp;&amp; <a class="code" href="TwoAddressInstructionPass_8cpp.html#a82a4757e5e6fda3301aaf47e1bccacd8">regsAreCompatible</a>(FromRegB, ToRegA, <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>);</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="keywordtype">bool</span> CompC = FromRegC &amp;&amp; <a class="code" href="TwoAddressInstructionPass_8cpp.html#a82a4757e5e6fda3301aaf47e1bccacd8">regsAreCompatible</a>(FromRegC, ToRegA, <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160; </div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="comment">// Compute if any of the following are true:</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="comment">// -RegB is not tied to a register and RegC is compatible with RegA.</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="comment">// -RegB is tied to the wrong physical register, but RegC is.</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="comment">// -RegB is tied to the wrong physical register, and RegC isn&#39;t tied.</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="keywordflow">if</span> ((!FromRegB &amp;&amp; CompC) || (FromRegB &amp;&amp; !CompB &amp;&amp; (!FromRegC || CompC)))</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="comment">// Don&#39;t compute if any of the following are true:</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="comment">// -RegC is not tied to a register and RegB is compatible with RegA.</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="comment">// -RegC is tied to the wrong physical register, but RegB is.</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="comment">// -RegC is tied to the wrong physical register, and RegB isn&#39;t tied.</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keywordflow">if</span> ((!FromRegC &amp;&amp; CompB) || (FromRegC &amp;&amp; !CompC &amp;&amp; (!FromRegB || CompB)))</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  }</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160; </div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  <span class="comment">// If there is a use of RegC between its last def (could be livein) and this</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  <span class="comment">// instruction, then bail.</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  <span class="keywordtype">unsigned</span> LastDefC = 0;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  <span class="keywordflow">if</span> (!noUseAfterLastDef(RegC, Dist, LastDefC))</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160; </div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <span class="comment">// If there is a use of RegB between its last def (could be livein) and this</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  <span class="comment">// instruction, then go ahead and make this transformation.</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  <span class="keywordtype">unsigned</span> LastDefB = 0;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  <span class="keywordflow">if</span> (!noUseAfterLastDef(RegB, Dist, LastDefB))</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160; </div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <span class="comment">// Look for situation like this:</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  <span class="comment">// %reg101 = MOV %reg100</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <span class="comment">// %reg102 = ...</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <span class="comment">// %reg103 = ADD %reg102, %reg101</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  <span class="comment">// ... = %reg103 ...</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <span class="comment">// %reg100 = MOV %reg103</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  <span class="comment">// If there is a reversed copy chain from reg101 to reg103, commute the ADD</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <span class="comment">// to eliminate an otherwise unavoidable copy.</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  <span class="comment">// FIXME:</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  <span class="comment">// We can extend the logic further: If an pair of operands in an insn has</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  <span class="comment">// been merged, the insn could be regarded as a virtual copy, and the virtual</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  <span class="comment">// copy could also be used to construct a copy chain.</span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  <span class="comment">// To more generally minimize register copies, ideally the logic of two addr</span></div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  <span class="comment">// instruction pass should be integrated with register allocation pass where</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <span class="comment">// interference graph is available.</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  <span class="keywordflow">if</span> (isRevCopyChain(RegC, RegA, <a class="code" href="TwoAddressInstructionPass_8cpp.html#a690b8efc3175d0d1f5f2588e2bfdb378">MaxDataFlowEdge</a>))</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160; </div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  <span class="keywordflow">if</span> (isRevCopyChain(RegB, RegA, <a class="code" href="TwoAddressInstructionPass_8cpp.html#a690b8efc3175d0d1f5f2588e2bfdb378">MaxDataFlowEdge</a>))</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160; </div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <span class="comment">// Look for other target specific commute preference.</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  <span class="keywordtype">bool</span> Commute;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;hasCommutePreference(*<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, Commute))</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <span class="keywordflow">return</span> Commute;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160; </div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  <span class="comment">// Since there are no intervening uses for both registers, then commute</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  <span class="comment">// if the def of RegC is closer. Its live interval is shorter.</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  <span class="keywordflow">return</span> LastDefB &amp;&amp; LastDefC &amp;&amp; LastDefC &gt; LastDefB;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;}</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="comment">/// Commute a two-address instruction and update the basic block, distance map,</span></div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="comment">/// and live variables if needed. Return true if it is successful.</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> TwoAddressInstructionPass::commuteInstruction(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                                                   <span class="keywordtype">unsigned</span> DstIdx,</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                                                   <span class="keywordtype">unsigned</span> RegBIdx,</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                                                   <span class="keywordtype">unsigned</span> RegCIdx,</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                                                   <span class="keywordtype">unsigned</span> Dist) {</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> RegC = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(RegCIdx).getReg();</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;2addr: COMMUTING  : &quot;</span> &lt;&lt; *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *NewMI = <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;commuteInstruction(*<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keyword">false</span>, RegBIdx, RegCIdx);</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160; </div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  <span class="keywordflow">if</span> (NewMI == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;2addr: COMMUTING FAILED!\n&quot;</span>);</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  }</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160; </div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;2addr: COMMUTED TO: &quot;</span> &lt;&lt; *NewMI);</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NewMI == <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> &amp;&amp;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;         <span class="stringliteral">&quot;TargetInstrInfo::commuteInstruction() should not return a new &quot;</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;         <span class="stringliteral">&quot;instruction unless it was requested.&quot;</span>);</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160; </div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  <span class="comment">// Update source register map.</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  <a class="code" href="classllvm_1_1MCRegister.html">MCRegister</a> FromRegC = <a class="code" href="TwoAddressInstructionPass_8cpp.html#a23877408ca0a8e70800e92900708baaf">getMappedReg</a>(RegC, SrcRegMap);</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  <span class="keywordflow">if</span> (FromRegC) {</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> RegA = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(DstIdx).getReg();</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    SrcRegMap[RegA] = FromRegC;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  }</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160; </div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;}</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="comment">/// Return true if it is profitable to convert the given 2-address instruction</span></div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="comment">/// to a 3-address one.</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> TwoAddressInstructionPass::isProfitableToConv3Addr(<a class="code" href="classllvm_1_1Register.html">Register</a> RegA,</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;                                                        <a class="code" href="classllvm_1_1Register.html">Register</a> RegB) {</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  <span class="comment">// Look for situations like this:</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  <span class="comment">// %reg1024 = MOV r1</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  <span class="comment">// %reg1025 = MOV r0</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;  <span class="comment">// %reg1026 = ADD %reg1024, %reg1025</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  <span class="comment">// r2            = MOV %reg1026</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  <span class="comment">// Turn ADD into a 3-address instruction to avoid a copy.</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  <a class="code" href="classllvm_1_1MCRegister.html">MCRegister</a> FromRegB = <a class="code" href="TwoAddressInstructionPass_8cpp.html#a23877408ca0a8e70800e92900708baaf">getMappedReg</a>(RegB, SrcRegMap);</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  <span class="keywordflow">if</span> (!FromRegB)</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  <a class="code" href="classllvm_1_1MCRegister.html">MCRegister</a> ToRegA = <a class="code" href="TwoAddressInstructionPass_8cpp.html#a23877408ca0a8e70800e92900708baaf">getMappedReg</a>(RegA, DstRegMap);</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  <span class="keywordflow">return</span> (ToRegA &amp;&amp; !<a class="code" href="TwoAddressInstructionPass_8cpp.html#a82a4757e5e6fda3301aaf47e1bccacd8">regsAreCompatible</a>(FromRegB, ToRegA, <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>));</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;}</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;<span class="comment">/// Convert the specified two-address instruction into a three address one.</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;<span class="comment">/// Return true if this transformation was successful.</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> TwoAddressInstructionPass::convertInstTo3Addr(</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> &amp;mi, <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> &amp;nmi,</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> RegA, <a class="code" href="classllvm_1_1Register.html">Register</a> RegB, <span class="keywordtype">unsigned</span> &amp;Dist) {</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrSpan.html">MachineInstrSpan</a> MIS(mi, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *NewMI = <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;convertToThreeAddress(*mi, LV, LIS);</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  <span class="keywordflow">if</span> (!NewMI)</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160; </div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;2addr: CONVERTING 2-ADDR: &quot;</span> &lt;&lt; *mi);</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;2addr:         TO 3-ADDR: &quot;</span> &lt;&lt; *NewMI);</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160; </div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  <span class="comment">// If the old instruction is debug value tracked, an update is required.</span></div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> OldInstrNum = mi-&gt;peekDebugInstrNum()) {</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(mi-&gt;getNumExplicitDefs() == 1);</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NewMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a9839b7e1d8811ea9d41f901ab6a0f23b">getNumExplicitDefs</a>() == 1);</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160; </div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <span class="comment">// Find the old and new def location.</span></div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <span class="keywordtype">unsigned</span> OldIdx = mi-&gt;defs().begin()-&gt;getOperandNo();</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="keywordtype">unsigned</span> NewIdx = NewMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#aae3faf8229869864f829df28a14b79a2">defs</a>().begin()-&gt;getOperandNo();</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160; </div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <span class="comment">// Record that one def has been replaced by the other.</span></div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <span class="keywordtype">unsigned</span> NewInstrNum = NewMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ad26a74fb0ad868f0867cce317269d721">getDebugInstrNum</a>();</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#a42d7a6aaee06630af49952b37ff1dbf7">makeDebugValueSubstitution</a>(std::make_pair(OldInstrNum, OldIdx),</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;                                   std::make_pair(NewInstrNum, NewIdx));</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  }</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160; </div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;  <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ad26bff839257f220557ce812b2159c72">erase</a>(mi); <span class="comment">// Nuke the old inst.</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160; </div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : MIS)</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    DistanceMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">insert</a>(std::make_pair(&amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, Dist++));</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  Dist--;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  mi = NewMI;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  nmi = std::next(mi);</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160; </div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  <span class="comment">// Update source and destination register maps.</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  SrcRegMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a1eb8504bab5f794778d82db6ac829923">erase</a>(RegA);</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  DstRegMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a1eb8504bab5f794778d82db6ac829923">erase</a>(RegB);</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;}</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;<span class="comment">/// Scan forward recursively for only uses, update maps if the use is a copy or</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="comment">/// a two-address instruction.</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> TwoAddressInstructionPass::scanUses(<a class="code" href="classllvm_1_1Register.html">Register</a> DstReg) {</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 4&gt;</a> VirtRegPairs;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  <span class="keywordtype">bool</span> IsDstPhys;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <span class="keywordtype">bool</span> IsCopy = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> NewReg;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = DstReg;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a> = <a class="code" href="TwoAddressInstructionPass_8cpp.html#a5c593c6a15dc72cc97e51bfb45501c22">findOnlyInterestingUse</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>,IsCopy,</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                                                      NewReg, IsDstPhys, LIS)) {</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="keywordflow">if</span> (IsCopy &amp;&amp; !Processed.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a>).second)</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160; </div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;MachineInstr*, unsigned&gt;::iterator</a> DI = DistanceMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a>);</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="keywordflow">if</span> (DI != DistanceMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>())</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;      <span class="comment">// Earlier in the same MBB.Reached via a back edge.</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160; </div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <span class="keywordflow">if</span> (IsDstPhys) {</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;      VirtRegPairs.push_back(NewReg);</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    }</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    SrcRegMap[NewReg] = <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    VirtRegPairs.push_back(NewReg);</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = NewReg;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  }</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160; </div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  <span class="keywordflow">if</span> (!VirtRegPairs.empty()) {</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="keywordtype">unsigned</span> ToReg = VirtRegPairs.back();</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    VirtRegPairs.pop_back();</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <span class="keywordflow">while</span> (!VirtRegPairs.empty()) {</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;      <span class="keywordtype">unsigned</span> FromReg = VirtRegPairs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;      <span class="keywordtype">bool</span> isNew = DstRegMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">insert</a>(std::make_pair(FromReg, ToReg)).second;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;      <span class="keywordflow">if</span> (!isNew)</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DstRegMap[FromReg] == ToReg &amp;&amp;<span class="stringliteral">&quot;Can&#39;t map to two dst registers!&quot;</span>);</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;      ToReg = FromReg;</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    }</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <span class="keywordtype">bool</span> isNew = DstRegMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">insert</a>(std::make_pair(DstReg, ToReg)).second;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <span class="keywordflow">if</span> (!isNew)</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DstRegMap[DstReg] == ToReg &amp;&amp; <span class="stringliteral">&quot;Can&#39;t map to two dst registers!&quot;</span>);</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  }</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;}</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="comment">/// If the specified instruction is not yet processed, process it if it&#39;s a</span></div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="comment">/// copy. For a copy instruction, we find the physical registers the</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="comment">/// source and destination registers might be mapped to. These are kept in</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;<span class="comment">/// point-to maps used to determine future optimizations. e.g.</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;<span class="comment">/// v1024 = mov r0</span></div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;<span class="comment">/// v1025 = mov r1</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="comment">/// v1026 = add v1024, v1025</span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="comment">/// r1    = mov r1026</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="comment">/// If &#39;add&#39; is a two-address instruction, v1024, v1026 are both potentially</span></div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="comment">/// coalesced to r0 (from the input side). v1025 is mapped to r1. v1026 is</span></div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="comment">/// potentially joined with r1 on the output side. It&#39;s worthwhile to commute</span></div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="comment">/// &#39;add&#39; to eliminate a copy.</span></div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> TwoAddressInstructionPass::processCopy(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;  <span class="keywordflow">if</span> (Processed.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>))</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160; </div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  <span class="keywordtype">bool</span> IsSrcPhys, IsDstPhys;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> SrcReg, DstReg;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="TwoAddressInstructionPass_8cpp.html#a6616256570974bd60b93306d9cbfe21a">isCopyToReg</a>(*<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>, SrcReg, DstReg, IsSrcPhys, IsDstPhys))</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160; </div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  <span class="keywordflow">if</span> (IsDstPhys &amp;&amp; !IsSrcPhys) {</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    DstRegMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">insert</a>(std::make_pair(SrcReg, DstReg));</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!IsDstPhys &amp;&amp; IsSrcPhys) {</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <span class="keywordtype">bool</span> isNew = SrcRegMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">insert</a>(std::make_pair(DstReg, SrcReg)).second;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    <span class="keywordflow">if</span> (!isNew)</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SrcRegMap[DstReg] == SrcReg &amp;&amp;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;             <span class="stringliteral">&quot;Can&#39;t map to two src physical registers!&quot;</span>);</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160; </div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    scanUses(DstReg);</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  }</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160; </div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  Processed.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;}</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;<span class="comment">/// If there is one more local instruction that reads &#39;Reg&#39; and it kills &#39;Reg,</span></div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;<span class="comment">/// consider moving the instruction below the kill instruction in order to</span></div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;<span class="comment">/// eliminate the need for the copy.</span></div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> TwoAddressInstructionPass::rescheduleMIBelowKill(</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> &amp;mi, <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> &amp;nmi,</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>) {</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;  <span class="comment">// Bail immediately if we don&#39;t have LV or LIS available. We use them to find</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  <span class="comment">// kills efficiently.</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;  <span class="keywordflow">if</span> (!LV &amp;&amp; !LIS)</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160; </div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = &amp;*mi;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;MachineInstr*, unsigned&gt;::iterator</a> DI = DistanceMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;  <span class="keywordflow">if</span> (DI == DistanceMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>())</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <span class="comment">// Must be created from unfolded load. Don&#39;t waste time trying this.</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160; </div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *KillMI = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  <span class="keywordflow">if</span> (LIS) {</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;LI = LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a25c117ac45bfbbcf69dc0b674db2d1ea">getInterval</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(LI.<a class="code" href="classllvm_1_1LiveRange.html#a757fd6afba0f531db70e78e057d147c6">end</a>() != LI.<a class="code" href="classllvm_1_1LiveRange.html#a9a5e7c523f12f9f164b786769de1ca47">begin</a>() &amp;&amp;</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;           <span class="stringliteral">&quot;Reg should not have empty live interval.&quot;</span>);</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160; </div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> MBBEndIdx = LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a76163707e71807054d87648aa5e00dd7">getMBBEndIdx</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>).<a class="code" href="classllvm_1_1SlotIndex.html#ac832da130f4d71a4533a69d98315fb19">getPrevSlot</a>();</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <a class="code" href="classllvm_1_1LiveRange.html#a3fc869c7f6d53c3fbb4e572b7821dd05">LiveInterval::const_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = LI.<a class="code" href="classllvm_1_1LiveRange.html#afeb00b9049a2391c990df15692caef63">find</a>(MBBEndIdx);</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != LI.<a class="code" href="classllvm_1_1LiveRange.html#a757fd6afba0f531db70e78e057d147c6">end</a>() &amp;&amp; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;start &lt; MBBEndIdx)</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160; </div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    --<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    KillMI = LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#ada0488ce8dde6e7677f28b8ddbafdcbd">getInstructionFromIndex</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;end);</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    KillMI = LV-&gt;<a class="code" href="classllvm_1_1LiveVariables.html#af73ca972d296b25a689a90fb5a0713f3">getVarInfo</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>).<a class="code" href="structllvm_1_1LiveVariables_1_1VarInfo.html#a935158aa13ae361427aa4c76d40693a0">findKill</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;  }</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  <span class="keywordflow">if</span> (!KillMI || <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> == KillMI || KillMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a1912d4fbc40c61a12b1f770ad54dfd74">isCopy</a>() || KillMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a1f3c8255141a4f5b7ed15fcf60118eb1">isCopyLike</a>())</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    <span class="comment">// Don&#39;t mess with copies, they may be coalesced later.</span></div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160; </div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;  <span class="keywordflow">if</span> (KillMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a8c161f5f015730ac6853c802c3693a41">hasUnmodeledSideEffects</a>() || KillMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a30e7d619f3195fd890116da8b3ed6bab">isCall</a>() ||</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;      KillMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a5891cdb51072f67e65f7ebd9be1205e7">isBranch</a>() || KillMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a0e85c20fe804527f12c86db38ec947ea">isTerminator</a>())</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    <span class="comment">// Don&#39;t move pass calls, etc.</span></div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160; </div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="TwoAddressInstructionPass_8cpp.html#a11329b543886f5ac685e48ab2d45ee6c">isTwoAddrUse</a>(*KillMI, <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, DstReg))</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160; </div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  <span class="keywordtype">bool</span> SeenStore = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;isSafeToMove(AA, SeenStore))</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160; </div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;<a class="code" href="classllvm_1_1HexagonInstrInfo.html#a782e0e2e0ea2a4e55daa11d53e678b54">getInstrLatency</a>(InstrItins, *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) &gt; 1)</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    <span class="comment">// FIXME: Needs more sophisticated heuristics.</span></div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160; </div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 2&gt;</a> <a class="code" href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a>;</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 2&gt;</a> Kills;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 2&gt;</a> Defs;</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO : <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;operands()) {</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <span class="keywordflow">if</span> (!MO.isReg())</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> MOReg = MO.getReg();</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <span class="keywordflow">if</span> (!MOReg)</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <span class="keywordflow">if</span> (MO.isDef())</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;      Defs.push_back(MOReg);</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;      <a class="code" href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a>.push_back(MOReg);</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;      <span class="keywordflow">if</span> (MOReg != <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> &amp;&amp; (MO.isKill() ||</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;                           (LIS &amp;&amp; <a class="code" href="TwoAddressInstructionPass_8cpp.html#a9f2b66889d0c0ea7b69a188d959d600e">isPlainlyKilled</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, MOReg, LIS))))</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        Kills.push_back(MOReg);</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    }</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  }</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160; </div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;  <span class="comment">// Move the copies connected to MI down as well.</span></div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> Begin = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>;</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> AfterMI = std::next(Begin);</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> End = AfterMI;</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  <span class="keywordflow">while</span> (End != <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>()) {</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    End = <a class="code" href="namespacellvm.html#a5bacbbd03e9261f7b30dc174f26d680c">skipDebugInstructionsForward</a>(End, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>());</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <span class="keywordflow">if</span> (End-&gt;isCopy() &amp;&amp; <a class="code" href="TwoAddressInstructionPass_8cpp.html#ad442c7b9729dcf7a654433853fbbaad9">regOverlapsSet</a>(Defs, End-&gt;getOperand(1).getReg(), <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>))</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;      Defs.push_back(End-&gt;getOperand(0).getReg());</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    ++End;</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;  }</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160; </div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  <span class="comment">// Check if the reschedule will not break dependencies.</span></div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  <span class="keywordtype">unsigned</span> NumVisited = 0;</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> KillPos = KillMI;</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  ++KillPos;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;OtherMI : <a class="code" href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">make_range</a>(End, KillPos)) {</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <span class="comment">// Debug or pseudo instructions cannot be counted against the limit.</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    <span class="keywordflow">if</span> (OtherMI.isDebugOrPseudoInstr())</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    <span class="keywordflow">if</span> (NumVisited &gt; 10)  <span class="comment">// FIXME: Arbitrary limit to reduce compile time cost.</span></div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    ++NumVisited;</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <span class="keywordflow">if</span> (OtherMI.hasUnmodeledSideEffects() || OtherMI.isCall() ||</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;        OtherMI.isBranch() || OtherMI.isTerminator())</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;      <span class="comment">// Don&#39;t move pass calls, etc.</span></div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO : OtherMI.operands()) {</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;      <span class="keywordflow">if</span> (!MO.isReg())</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> MOReg = MO.getReg();</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;      <span class="keywordflow">if</span> (!MOReg)</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;      <span class="keywordflow">if</span> (MO.isDef()) {</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="TwoAddressInstructionPass_8cpp.html#ad442c7b9729dcf7a654433853fbbaad9">regOverlapsSet</a>(<a class="code" href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a>, MOReg, <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>))</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;          <span class="comment">// Physical register use would be clobbered.</span></div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;        <span class="keywordflow">if</span> (!MO.isDead() &amp;&amp; <a class="code" href="TwoAddressInstructionPass_8cpp.html#ad442c7b9729dcf7a654433853fbbaad9">regOverlapsSet</a>(Defs, MOReg, <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>))</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;          <span class="comment">// May clobber a physical register def.</span></div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;          <span class="comment">// FIXME: This may be too conservative. It&#39;s ok if the instruction</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;          <span class="comment">// is sunken completely below the use.</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="TwoAddressInstructionPass_8cpp.html#ad442c7b9729dcf7a654433853fbbaad9">regOverlapsSet</a>(Defs, MOReg, <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>))</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;        <span class="keywordtype">bool</span> isKill =</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;            MO.isKill() || (LIS &amp;&amp; <a class="code" href="TwoAddressInstructionPass_8cpp.html#a9f2b66889d0c0ea7b69a188d959d600e">isPlainlyKilled</a>(&amp;OtherMI, MOReg, LIS));</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;        <span class="keywordflow">if</span> (MOReg != <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> &amp;&amp; ((isKill &amp;&amp; <a class="code" href="TwoAddressInstructionPass_8cpp.html#ad442c7b9729dcf7a654433853fbbaad9">regOverlapsSet</a>(<a class="code" href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a>, MOReg, <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>)) ||</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;                             <a class="code" href="TwoAddressInstructionPass_8cpp.html#ad442c7b9729dcf7a654433853fbbaad9">regOverlapsSet</a>(Kills, MOReg, <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>)))</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;          <span class="comment">// Don&#39;t want to extend other live ranges and update kills.</span></div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        <span class="keywordflow">if</span> (MOReg == <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> &amp;&amp; !isKill)</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;          <span class="comment">// We can&#39;t schedule across a use of the register in question.</span></div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;        <span class="comment">// Ensure that if this is register in question, its the kill we expect.</span></div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((MOReg != <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> || &amp;OtherMI == KillMI) &amp;&amp;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;               <span class="stringliteral">&quot;Found multiple kills of a register in a basic block&quot;</span>);</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;      }</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    }</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  }</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160; </div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  <span class="comment">// Move debug info as well.</span></div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;  <span class="keywordflow">while</span> (Begin != <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>() &amp;&amp; std::prev(Begin)-&gt;isDebugInstr())</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    --Begin;</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160; </div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  nmi = End;</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> InsertPos = KillPos;</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;  <span class="keywordflow">if</span> (LIS) {</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <span class="comment">// We have to move the copies (and any interleaved debug instructions)</span></div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    <span class="comment">// first so that the MBB is still well-formed when calling handleMove().</span></div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a> = AfterMI; <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a> != End;) {</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;      <span class="keyword">auto</span> CopyMI = <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>++;</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;      <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#adf0023bdc4f05a7849c35b1c859580d8">splice</a>(InsertPos, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, CopyMI);</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;      <span class="keywordflow">if</span> (!CopyMI-&gt;isDebugOrPseudoInstr())</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;        LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a29d12c5a65b3940bfac7b5aa1121ac70">handleMove</a>(*CopyMI);</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      InsertPos = CopyMI;</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    }</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    End = std::next(<a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>));</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  }</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160; </div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;  <span class="comment">// Copies following MI may have been moved as well.</span></div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;  <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#adf0023bdc4f05a7849c35b1c859580d8">splice</a>(InsertPos, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, Begin, End);</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;  DistanceMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a1eb8504bab5f794778d82db6ac829923">erase</a>(DI);</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160; </div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;  <span class="comment">// Update live variables</span></div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;  <span class="keywordflow">if</span> (LIS) {</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a29d12c5a65b3940bfac7b5aa1121ac70">handleMove</a>(*<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    LV-&gt;<a class="code" href="classllvm_1_1LiveVariables.html#a515b9b6464ec4cbf5133d51f63a4e489">removeVirtualRegisterKilled</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, *KillMI);</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    LV-&gt;<a class="code" href="classllvm_1_1LiveVariables.html#ae58f90c0c07a77319dd769a8588a0fa7">addVirtualRegisterKilled</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;  }</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160; </div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\trescheduled below kill: &quot;</span> &lt;&lt; *KillMI);</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;}</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;<span class="comment">/// Return true if the re-scheduling will put the given instruction too close</span></div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;<span class="comment">/// to the defs of its register dependencies.</span></div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> TwoAddressInstructionPass::isDefTooClose(<a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, <span class="keywordtype">unsigned</span> Dist,</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;                                              <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a> : <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#aaa8b32a81bd37ce4b1654d8c3688eff6">def_instructions</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>)) {</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a>.getParent() != <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> || <a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a>.isCopy() || <a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a>.isCopyLike())</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    <span class="keywordflow">if</span> (&amp;<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a> == <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">// MI is defining something KillMI uses</span></div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;MachineInstr*, unsigned&gt;::iterator</a> DDI = DistanceMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(&amp;<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a>);</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    <span class="keywordflow">if</span> (DDI == DistanceMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>())</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;  <span class="comment">// Below MI</span></div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <span class="keywordtype">unsigned</span> DefDist = DDI-&gt;second;</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Dist &gt; DefDist &amp;&amp; <span class="stringliteral">&quot;Visited def already?&quot;</span>);</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;<a class="code" href="classllvm_1_1HexagonInstrInfo.html#a782e0e2e0ea2a4e55daa11d53e678b54">getInstrLatency</a>(InstrItins, <a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a>) &gt; (Dist - DefDist))</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  }</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;}</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;<span class="comment">/// If there is one more local instruction that reads &#39;Reg&#39; and it kills &#39;Reg,</span></div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;<span class="comment">/// consider moving the kill instruction above the current two-address</span></div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;<span class="comment">/// instruction in order to eliminate the need for the copy.</span></div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> TwoAddressInstructionPass::rescheduleKillAboveMI(</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> &amp;mi, <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> &amp;nmi,</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>) {</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;  <span class="comment">// Bail immediately if we don&#39;t have LV or LIS available. We use them to find</span></div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  <span class="comment">// kills efficiently.</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;  <span class="keywordflow">if</span> (!LV &amp;&amp; !LIS)</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160; </div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = &amp;*mi;</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;MachineInstr*, unsigned&gt;::iterator</a> DI = DistanceMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;  <span class="keywordflow">if</span> (DI == DistanceMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>())</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    <span class="comment">// Must be created from unfolded load. Don&#39;t waste time trying this.</span></div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160; </div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *KillMI = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;  <span class="keywordflow">if</span> (LIS) {</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;LI = LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a25c117ac45bfbbcf69dc0b674db2d1ea">getInterval</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(LI.<a class="code" href="classllvm_1_1LiveRange.html#a757fd6afba0f531db70e78e057d147c6">end</a>() != LI.<a class="code" href="classllvm_1_1LiveRange.html#a9a5e7c523f12f9f164b786769de1ca47">begin</a>() &amp;&amp;</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;           <span class="stringliteral">&quot;Reg should not have empty live interval.&quot;</span>);</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160; </div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> MBBEndIdx = LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a76163707e71807054d87648aa5e00dd7">getMBBEndIdx</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>).<a class="code" href="classllvm_1_1SlotIndex.html#ac832da130f4d71a4533a69d98315fb19">getPrevSlot</a>();</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    <a class="code" href="classllvm_1_1LiveRange.html#a3fc869c7f6d53c3fbb4e572b7821dd05">LiveInterval::const_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = LI.<a class="code" href="classllvm_1_1LiveRange.html#afeb00b9049a2391c990df15692caef63">find</a>(MBBEndIdx);</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != LI.<a class="code" href="classllvm_1_1LiveRange.html#a757fd6afba0f531db70e78e057d147c6">end</a>() &amp;&amp; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;start &lt; MBBEndIdx)</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160; </div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    --<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    KillMI = LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#ada0488ce8dde6e7677f28b8ddbafdcbd">getInstructionFromIndex</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;end);</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    KillMI = LV-&gt;<a class="code" href="classllvm_1_1LiveVariables.html#af73ca972d296b25a689a90fb5a0713f3">getVarInfo</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>).<a class="code" href="structllvm_1_1LiveVariables_1_1VarInfo.html#a935158aa13ae361427aa4c76d40693a0">findKill</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;  }</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;  <span class="keywordflow">if</span> (!KillMI || <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> == KillMI || KillMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a1912d4fbc40c61a12b1f770ad54dfd74">isCopy</a>() || KillMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a1f3c8255141a4f5b7ed15fcf60118eb1">isCopyLike</a>())</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    <span class="comment">// Don&#39;t mess with copies, they may be coalesced later.</span></div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160; </div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg;</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="TwoAddressInstructionPass_8cpp.html#a11329b543886f5ac685e48ab2d45ee6c">isTwoAddrUse</a>(*KillMI, <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, DstReg))</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160; </div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;  <span class="keywordtype">bool</span> SeenStore = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;  <span class="keywordflow">if</span> (!KillMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a0dc6dbc2630fd5d1e5ca7ef3b51b1d63">isSafeToMove</a>(AA, SeenStore))</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160; </div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 2&gt;</a> <a class="code" href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a>;</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 2&gt;</a> Kills;</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 2&gt;</a> Defs;</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 2&gt;</a> LiveDefs;</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO : KillMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#aef0e7e42e45e15f86b2a122b56ab829c">operands</a>()) {</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <span class="keywordflow">if</span> (!MO.isReg())</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> MOReg = MO.getReg();</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <span class="keywordflow">if</span> (MO.isUse()) {</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;      <span class="keywordflow">if</span> (!MOReg)</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;      <span class="keywordflow">if</span> (isDefTooClose(MOReg, DI-&gt;second, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>))</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;      <span class="keywordtype">bool</span> isKill = MO.isKill() || (LIS &amp;&amp; <a class="code" href="TwoAddressInstructionPass_8cpp.html#a9f2b66889d0c0ea7b69a188d959d600e">isPlainlyKilled</a>(KillMI, MOReg, LIS));</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;      <span class="keywordflow">if</span> (MOReg == <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> &amp;&amp; !isKill)</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;      <a class="code" href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a>.push_back(MOReg);</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;      <span class="keywordflow">if</span> (isKill &amp;&amp; MOReg != <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>)</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;        Kills.push_back(MOReg);</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (MOReg.<a class="code" href="classllvm_1_1Register.html#a13bd3dae94013a7bf38afc9391c8fa8f">isPhysical</a>()) {</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;      Defs.push_back(MOReg);</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;      <span class="keywordflow">if</span> (!MO.isDead())</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;        LiveDefs.push_back(MOReg);</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    }</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;  }</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160; </div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;  <span class="comment">// Check if the reschedule will not break depedencies.</span></div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;  <span class="keywordtype">unsigned</span> NumVisited = 0;</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;OtherMI :</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;       <a class="code" href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">make_range</a>(mi, <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a>(KillMI))) {</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    <span class="comment">// Debug or pseudo instructions cannot be counted against the limit.</span></div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    <span class="keywordflow">if</span> (OtherMI.isDebugOrPseudoInstr())</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    <span class="keywordflow">if</span> (NumVisited &gt; 10)  <span class="comment">// FIXME: Arbitrary limit to reduce compile time cost.</span></div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    ++NumVisited;</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <span class="keywordflow">if</span> (OtherMI.hasUnmodeledSideEffects() || OtherMI.isCall() ||</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;        OtherMI.isBranch() || OtherMI.isTerminator())</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;      <span class="comment">// Don&#39;t move pass calls, etc.</span></div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 2&gt;</a> OtherDefs;</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO : OtherMI.operands()) {</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;      <span class="keywordflow">if</span> (!MO.isReg())</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> MOReg = MO.getReg();</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;      <span class="keywordflow">if</span> (!MOReg)</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;      <span class="keywordflow">if</span> (MO.isUse()) {</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="TwoAddressInstructionPass_8cpp.html#ad442c7b9729dcf7a654433853fbbaad9">regOverlapsSet</a>(Defs, MOReg, <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>))</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;          <span class="comment">// Moving KillMI can clobber the physical register if the def has</span></div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;          <span class="comment">// not been seen.</span></div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="TwoAddressInstructionPass_8cpp.html#ad442c7b9729dcf7a654433853fbbaad9">regOverlapsSet</a>(Kills, MOReg, <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>))</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;          <span class="comment">// Don&#39;t want to extend other live ranges and update kills.</span></div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;        <span class="keywordflow">if</span> (&amp;OtherMI != <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> &amp;&amp; MOReg == <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> &amp;&amp;</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;            !(MO.isKill() || (LIS &amp;&amp; <a class="code" href="TwoAddressInstructionPass_8cpp.html#a9f2b66889d0c0ea7b69a188d959d600e">isPlainlyKilled</a>(&amp;OtherMI, MOReg, LIS))))</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;          <span class="comment">// We can&#39;t schedule across a use of the register in question.</span></div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;        OtherDefs.push_back(MOReg);</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;      }</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    }</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160; </div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = OtherDefs.size(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> MOReg = OtherDefs[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="TwoAddressInstructionPass_8cpp.html#ad442c7b9729dcf7a654433853fbbaad9">regOverlapsSet</a>(<a class="code" href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a>, MOReg, <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>))</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;      <span class="keywordflow">if</span> (MOReg.<a class="code" href="classllvm_1_1Register.html#a13bd3dae94013a7bf38afc9391c8fa8f">isPhysical</a>() &amp;&amp; <a class="code" href="TwoAddressInstructionPass_8cpp.html#ad442c7b9729dcf7a654433853fbbaad9">regOverlapsSet</a>(LiveDefs, MOReg, <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>))</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;      <span class="comment">// Physical register def is seen.</span></div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;      <a class="code" href="namespacellvm.html#aa82bb12b2879425012b3742487e10964">llvm::erase_value</a>(Defs, MOReg);</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    }</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;  }</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160; </div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;  <span class="comment">// Move the old kill above MI, don&#39;t forget to move debug info as well.</span></div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> InsertPos = mi;</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;  <span class="keywordflow">while</span> (InsertPos != <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>() &amp;&amp; std::prev(InsertPos)-&gt;isDebugInstr())</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    --InsertPos;</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a> = KillMI;</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> To = std::next(<a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a>);</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;  <span class="keywordflow">while</span> (std::prev(<a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a>)-&gt;isDebugInstr())</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    --<a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a>;</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;  <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#adf0023bdc4f05a7849c35b1c859580d8">splice</a>(InsertPos, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a>, To);</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160; </div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;  nmi = std::prev(InsertPos); <span class="comment">// Backtrack so we process the moved instr.</span></div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;  DistanceMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a1eb8504bab5f794778d82db6ac829923">erase</a>(DI);</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160; </div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;  <span class="comment">// Update live variables</span></div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  <span class="keywordflow">if</span> (LIS) {</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a29d12c5a65b3940bfac7b5aa1121ac70">handleMove</a>(*KillMI);</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    LV-&gt;<a class="code" href="classllvm_1_1LiveVariables.html#a515b9b6464ec4cbf5133d51f63a4e489">removeVirtualRegisterKilled</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, *KillMI);</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    LV-&gt;<a class="code" href="classllvm_1_1LiveVariables.html#ae58f90c0c07a77319dd769a8588a0fa7">addVirtualRegisterKilled</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;  }</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160; </div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\trescheduled kill: &quot;</span> &lt;&lt; *KillMI);</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;}</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;<span class="comment">/// Tries to commute the operand &#39;BaseOpIdx&#39; and some other operand in the</span></div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;<span class="comment">/// given machine instruction to improve opportunities for coalescing and</span></div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;<span class="comment">/// elimination of a register to register copy.</span></div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;<span class="comment">/// &#39;DstOpIdx&#39; specifies the index of MI def operand.</span></div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;<span class="comment">/// &#39;BaseOpKilled&#39; specifies if the register associated with &#39;BaseOpIdx&#39;</span></div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;<span class="comment">/// operand is killed by the given instruction.</span></div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;<span class="comment">/// The &#39;Dist&#39; arguments provides the distance of MI from the start of the</span></div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;<span class="comment">/// current basic block and it is used to determine if it is profitable</span></div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;<span class="comment">/// to commute operands in the instruction.</span></div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;<span class="comment">/// Returns true if the transformation happened. Otherwise, returns false.</span></div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> TwoAddressInstructionPass::tryInstructionCommute(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;                                                      <span class="keywordtype">unsigned</span> DstOpIdx,</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;                                                      <span class="keywordtype">unsigned</span> BaseOpIdx,</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;                                                      <span class="keywordtype">bool</span> BaseOpKilled,</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;                                                      <span class="keywordtype">unsigned</span> Dist) {</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;isCommutable())</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160; </div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;  <span class="keywordtype">bool</span> MadeChange = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstOpReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(DstOpIdx).getReg();</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> BaseOpReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(BaseOpIdx).getReg();</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  <span class="keywordtype">unsigned</span> OpsNum = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getDesc().getNumOperands();</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;  <span class="keywordtype">unsigned</span> OtherOpIdx = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getDesc().getNumDefs();</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;  <span class="keywordflow">for</span> (; OtherOpIdx &lt; OpsNum; OtherOpIdx++) {</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;    <span class="comment">// The call of findCommutedOpIndices below only checks if BaseOpIdx</span></div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    <span class="comment">// and OtherOpIdx are commutable, it does not really search for</span></div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    <span class="comment">// other commutable operands and does not change the values of passed</span></div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    <span class="comment">// variables.</span></div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    <span class="keywordflow">if</span> (OtherOpIdx == BaseOpIdx || !<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(OtherOpIdx).isReg() ||</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;        !<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;findCommutedOpIndices(*<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, BaseOpIdx, OtherOpIdx))</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160; </div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> OtherOpReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(OtherOpIdx).getReg();</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;    <span class="keywordtype">bool</span> AggressiveCommute = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160; </div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    <span class="comment">// If OtherOp dies but BaseOp does not, swap the OtherOp and BaseOp</span></div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    <span class="comment">// operands. This makes the live ranges of DstOp and OtherOp joinable.</span></div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <span class="keywordtype">bool</span> OtherOpKilled = <a class="code" href="TwoAddressInstructionPass_8cpp.html#adc661c157001f2a5aca972c2d0e9f181">isKilled</a>(*<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, OtherOpReg, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>, LIS, <span class="keyword">false</span>);</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    <span class="keywordtype">bool</span> DoCommute = !BaseOpKilled &amp;&amp; OtherOpKilled;</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160; </div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    <span class="keywordflow">if</span> (!DoCommute &amp;&amp;</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;        isProfitableToCommute(DstOpReg, BaseOpReg, OtherOpReg, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, Dist)) {</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;      DoCommute = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;      AggressiveCommute = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    }</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160; </div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    <span class="comment">// If it&#39;s profitable to commute, try to do so.</span></div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    <span class="keywordflow">if</span> (DoCommute &amp;&amp; commuteInstruction(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, DstOpIdx, BaseOpIdx, OtherOpIdx,</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;                                        Dist)) {</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;      MadeChange = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;      ++NumCommuted;</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;      <span class="keywordflow">if</span> (AggressiveCommute)</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;        ++NumAggrCommuted;</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160; </div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;      <span class="comment">// There might be more than two commutable operands, update BaseOp and</span></div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;      <span class="comment">// continue scanning.</span></div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;      <span class="comment">// FIXME: This assumes that the new instruction&#39;s operands are in the</span></div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;      <span class="comment">// same positions and were simply swapped.</span></div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;      BaseOpReg = OtherOpReg;</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;      BaseOpKilled = OtherOpKilled;</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;      <span class="comment">// Resamples OpsNum in case the number of operands was reduced. This</span></div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;      <span class="comment">// happens with X86.</span></div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;      OpsNum = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getDesc().getNumOperands();</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    }</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;  }</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;  <span class="keywordflow">return</span> MadeChange;</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;}</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;<span class="comment">/// For the case where an instruction has a single pair of tied register</span></div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;<span class="comment">/// operands, attempt some transformations that may either eliminate the tied</span></div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;<span class="comment">/// operands or improve the opportunities for coalescing away the register copy.</span></div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;<span class="comment">/// Returns true if no copy needs to be inserted to untie mi&#39;s operands</span></div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;<span class="comment">/// (either because they were untied, or because mi was rescheduled, and will</span></div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;<span class="comment">/// be visited again later). If the shouldOnlyCommute flag is true, only</span></div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;<span class="comment">/// instruction commutation is attempted.</span></div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> TwoAddressInstructionPass::</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;tryInstructionTransform(<a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> &amp;mi,</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;                        <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> &amp;nmi,</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;                        <span class="keywordtype">unsigned</span> SrcIdx, <span class="keywordtype">unsigned</span> DstIdx,</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;                        <span class="keywordtype">unsigned</span> &amp;Dist, <span class="keywordtype">bool</span> shouldOnlyCommute) {</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;  <span class="keywordflow">if</span> (OptLevel == <a class="code" href="namespacellvm_1_1CodeGenOpt.html#ad7e52174abb1cfb84238ad1ac475ee36a451bbac85aff02d070be3c17a6bef928">CodeGenOpt::None</a>)</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160; </div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = *mi;</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> regA = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(DstIdx).getReg();</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> regB = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(SrcIdx).getReg();</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160; </div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(regB.<a class="code" href="classllvm_1_1Register.html#aebafd86dde59b5a05b22e8720e808a9d">isVirtual</a>() &amp;&amp; <span class="stringliteral">&quot;cannot make instruction into two-address form&quot;</span>);</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;  <span class="keywordtype">bool</span> regBKilled = <a class="code" href="TwoAddressInstructionPass_8cpp.html#adc661c157001f2a5aca972c2d0e9f181">isKilled</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, regB, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>, LIS, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160; </div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;  <span class="keywordflow">if</span> (regA.<a class="code" href="classllvm_1_1Register.html#aebafd86dde59b5a05b22e8720e808a9d">isVirtual</a>())</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    scanUses(regA);</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160; </div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;  <span class="keywordtype">bool</span> Commuted = tryInstructionCommute(&amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, DstIdx, SrcIdx, regBKilled, Dist);</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160; </div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;  <span class="comment">// If the instruction is convertible to 3 Addr, instead</span></div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;  <span class="comment">// of returning try 3 Addr transformation aggressively and</span></div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;  <span class="comment">// use this variable to check later. Because it might be better.</span></div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;  <span class="comment">// For example, we can just use `leal (%rsi,%rdi), %eax` and `ret`</span></div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;  <span class="comment">// instead of the following code.</span></div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;  <span class="comment">//   addl     %esi, %edi</span></div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;  <span class="comment">//   movl     %edi, %eax</span></div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;  <span class="comment">//   ret</span></div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;  <span class="keywordflow">if</span> (Commuted &amp;&amp; !<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isConvertibleTo3Addr())</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160; </div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;  <span class="keywordflow">if</span> (shouldOnlyCommute)</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160; </div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;  <span class="comment">// If there is one more use of regB later in the same MBB, consider</span></div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;  <span class="comment">// re-schedule this MI below it.</span></div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;  <span class="keywordflow">if</span> (!Commuted &amp;&amp; <a class="code" href="TwoAddressInstructionPass_8cpp.html#a05eb50892c09d6c2d9a8c69c36b6468f">EnableRescheduling</a> &amp;&amp; rescheduleMIBelowKill(mi, nmi, regB)) {</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    ++NumReSchedDowns;</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;  }</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160; </div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;  <span class="comment">// If we commuted, regB may have changed so we should re-sample it to avoid</span></div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;  <span class="comment">// confusing the three address conversion below.</span></div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;  <span class="keywordflow">if</span> (Commuted) {</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    regB = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(SrcIdx).getReg();</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    regBKilled = <a class="code" href="TwoAddressInstructionPass_8cpp.html#adc661c157001f2a5aca972c2d0e9f181">isKilled</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, regB, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>, LIS, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;  }</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160; </div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isConvertibleTo3Addr()) {</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    <span class="comment">// This instruction is potentially convertible to a true</span></div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    <span class="comment">// three-address instruction.  Check if it is profitable.</span></div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;    <span class="keywordflow">if</span> (!regBKilled || isProfitableToConv3Addr(regA, regB)) {</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;      <span class="comment">// Try to convert it.</span></div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;      <span class="keywordflow">if</span> (convertInstTo3Addr(mi, nmi, regA, regB, Dist)) {</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;        ++NumConvertedTo3Addr;</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">// Done with this instruction.</span></div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;      }</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    }</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;  }</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160; </div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;  <span class="comment">// Return if it is commuted but 3 addr conversion is failed.</span></div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;  <span class="keywordflow">if</span> (Commuted)</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160; </div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;  <span class="comment">// If there is one more use of regB later in the same MBB, consider</span></div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;  <span class="comment">// re-schedule it before this MI if it&#39;s legal.</span></div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="TwoAddressInstructionPass_8cpp.html#a05eb50892c09d6c2d9a8c69c36b6468f">EnableRescheduling</a> &amp;&amp; rescheduleKillAboveMI(mi, nmi, regB)) {</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;    ++NumReSchedUps;</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;  }</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160; </div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;  <span class="comment">// If this is an instruction with a load folded into it, try unfolding</span></div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;  <span class="comment">// the load, e.g. avoid this:</span></div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;  <span class="comment">//   movq %rdx, %rcx</span></div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;  <span class="comment">//   addq (%rax), %rcx</span></div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;  <span class="comment">// in favor of this:</span></div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;  <span class="comment">//   movq (%rax), %rcx</span></div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;  <span class="comment">//   addq %rdx, %rcx</span></div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;  <span class="comment">// because it&#39;s preferable to schedule a load than a register copy.</span></div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.mayLoad() &amp;&amp; !regBKilled) {</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    <span class="comment">// Determine if a load can be unfolded.</span></div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;    <span class="keywordtype">unsigned</span> LoadRegIndex;</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;    <span class="keywordtype">unsigned</span> NewOpc =</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;      <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;getOpcodeAfterMemoryUnfold(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode(),</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;                                      <span class="comment">/*UnfoldLoad=*/</span><span class="keyword">true</span>,</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;                                      <span class="comment">/*UnfoldStore=*/</span><span class="keyword">false</span>,</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;                                      &amp;LoadRegIndex);</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;    <span class="keywordflow">if</span> (NewOpc != 0) {</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1MCInstrDesc.html">MCInstrDesc</a> &amp;UnfoldMCID = <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(NewOpc);</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;      <span class="keywordflow">if</span> (UnfoldMCID.<a class="code" href="classllvm_1_1MCInstrDesc.html#a3496944fcc473dfe584e6615503a7a76">getNumDefs</a>() == 1) {</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;        <span class="comment">// Unfold the load.</span></div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;2addr:   UNFOLDING: &quot;</span> &lt;&lt; <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *RC =</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;          <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>-&gt;<a class="code" href="classllvm_1_1TargetRegisterInfo.html#a91c8fd7879e62b4a76d8c23ecef7ef23">getAllocatableClass</a>(</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;            <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;getRegClass(UnfoldMCID, LoadRegIndex, <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>, *MF));</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;        <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5c77792a06583e0fe7a0379ad94a2809">createVirtualRegister</a>(RC);</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;        <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineInstr *, 2&gt;</a> NewMIs;</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;unfoldMemoryOperand(*MF, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>,</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;                                      <span class="comment">/*UnfoldLoad=*/</span><span class="keyword">true</span>,</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;                                      <span class="comment">/*UnfoldStore=*/</span><span class="keyword">false</span>, NewMIs)) {</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;          <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;2addr: ABANDONING UNFOLD\n&quot;</span>);</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;        }</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NewMIs.size() == 2 &amp;&amp;</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;               <span class="stringliteral">&quot;Unfolded a load into multiple instructions!&quot;</span>);</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;        <span class="comment">// The load was previously folded, so this is the only use.</span></div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;        NewMIs[1]-&gt;addRegisterKilled(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>);</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160; </div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;        <span class="comment">// Tentatively insert the instructions into the block so that they</span></div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;        <span class="comment">// look &quot;normal&quot; to the transformation logic.</span></div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;        <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3435a2381e60e842e915f85c931b7dde">insert</a>(mi, NewMIs[0]);</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;        <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3435a2381e60e842e915f85c931b7dde">insert</a>(mi, NewMIs[1]);</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;        DistanceMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">insert</a>(std::make_pair(NewMIs[0], Dist++));</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;        DistanceMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">insert</a>(std::make_pair(NewMIs[1], Dist));</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160; </div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;2addr:    NEW LOAD: &quot;</span> &lt;&lt; *NewMIs[0]</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;                          &lt;&lt; <span class="stringliteral">&quot;2addr:    NEW INST: &quot;</span> &lt;&lt; *NewMIs[1]);</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160; </div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;        <span class="comment">// Transform the instruction, now that it no longer has a load.</span></div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;        <span class="keywordtype">unsigned</span> NewDstIdx = NewMIs[1]-&gt;findRegisterDefOperandIdx(regA);</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;        <span class="keywordtype">unsigned</span> NewSrcIdx = NewMIs[1]-&gt;findRegisterUseOperandIdx(regB);</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;        <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> NewMI = NewMIs[1];</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;        <span class="keywordtype">bool</span> TransformResult =</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;          tryInstructionTransform(NewMI, mi, NewSrcIdx, NewDstIdx, Dist, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;        (void)TransformResult;</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!TransformResult &amp;&amp;</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;               <span class="stringliteral">&quot;tryInstructionTransform() should return false.&quot;</span>);</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;        <span class="keywordflow">if</span> (NewMIs[1]-&gt;getOperand(NewSrcIdx).isKill()) {</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;          <span class="comment">// Success, or at least we made an improvement. Keep the unfolded</span></div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;          <span class="comment">// instructions and discard the original.</span></div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;          <span class="keywordflow">if</span> (LV) {</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO : <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.operands()) {</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;              <span class="keywordflow">if</span> (MO.isReg() &amp;&amp; MO.getReg().isVirtual()) {</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;                <span class="keywordflow">if</span> (MO.isUse()) {</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;                  <span class="keywordflow">if</span> (MO.isKill()) {</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;                    <span class="keywordflow">if</span> (NewMIs[0]-&gt;killsRegister(MO.getReg()))</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;                      LV-&gt;<a class="code" href="classllvm_1_1LiveVariables.html#a007ef08997c0b0391aaebc27e257062c">replaceKillInstruction</a>(MO.getReg(), <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, *NewMIs[0]);</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;                    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;                      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NewMIs[1]-&gt;killsRegister(MO.getReg()) &amp;&amp;</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;                             <span class="stringliteral">&quot;Kill missing after load unfold!&quot;</span>);</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;                      LV-&gt;<a class="code" href="classllvm_1_1LiveVariables.html#a007ef08997c0b0391aaebc27e257062c">replaceKillInstruction</a>(MO.getReg(), <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, *NewMIs[1]);</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;                    }</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;                  }</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (LV-&gt;<a class="code" href="classllvm_1_1LiveVariables.html#a3ce32310fd2a5d6bf58316fd2a7ad1bf">removeVirtualRegisterDead</a>(MO.getReg(), <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)) {</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;                  <span class="keywordflow">if</span> (NewMIs[1]-&gt;registerDefIsDead(MO.getReg()))</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;                    LV-&gt;<a class="code" href="classllvm_1_1LiveVariables.html#a722a7eaa41e03a18392be831f831627d">addVirtualRegisterDead</a>(MO.getReg(), *NewMIs[1]);</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;                  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;                    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NewMIs[0]-&gt;registerDefIsDead(MO.getReg()) &amp;&amp;</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;                           <span class="stringliteral">&quot;Dead flag missing after load unfold!&quot;</span>);</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;                    LV-&gt;<a class="code" href="classllvm_1_1LiveVariables.html#a722a7eaa41e03a18392be831f831627d">addVirtualRegisterDead</a>(MO.getReg(), *NewMIs[0]);</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;                  }</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;                }</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;              }</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;            }</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;            LV-&gt;<a class="code" href="classllvm_1_1LiveVariables.html#ae58f90c0c07a77319dd769a8588a0fa7">addVirtualRegisterKilled</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, *NewMIs[1]);</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;          }</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160; </div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;          <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 4&gt;</a> OrigRegs;</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;          <span class="keywordflow">if</span> (LIS) {</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO : <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.operands()) {</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;              <span class="keywordflow">if</span> (MO.isReg())</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;                OrigRegs.push_back(MO.getReg());</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;            }</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160; </div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;            LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a73f605751be73f0a910a586bb1b5d869">RemoveMachineInstrFromMaps</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;          }</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160; </div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;          <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;          DistanceMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a1eb8504bab5f794778d82db6ac829923">erase</a>(&amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160; </div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;          <span class="comment">// Update LiveIntervals.</span></div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;          <span class="keywordflow">if</span> (LIS) {</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;            <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> Begin(NewMIs[0]);</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;            <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> End(NewMIs[1]);</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;            LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a0d7e0d23a0453390a4c1e9a61afccdca">repairIntervalsInRange</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, Begin, End, OrigRegs);</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;          }</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160; </div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;          mi = NewMIs[1];</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;          <span class="comment">// Transforming didn&#39;t eliminate the tie and didn&#39;t lead to an</span></div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;          <span class="comment">// improvement. Clean up the unfolded instructions and keep the</span></div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;          <span class="comment">// original.</span></div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;          <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;2addr: ABANDONING UNFOLD\n&quot;</span>);</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;          NewMIs[0]-&gt;eraseFromParent();</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;          NewMIs[1]-&gt;eraseFromParent();</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;          DistanceMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a1eb8504bab5f794778d82db6ac829923">erase</a>(NewMIs[0]);</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;          DistanceMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a1eb8504bab5f794778d82db6ac829923">erase</a>(NewMIs[1]);</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;          Dist--;</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;        }</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;      }</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    }</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;  }</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160; </div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;}</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160; </div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;<span class="comment">// Collect tied operands of MI that need to be handled.</span></div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;<span class="comment">// Rewrite trivial cases immediately.</span></div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;<span class="comment">// Return true if any tied operands where found, including the trivial ones.</span></div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;<span class="keywordtype">bool</span> TwoAddressInstructionPass::</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;collectTiedOperands(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, TiedOperandMap &amp;TiedOperands) {</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;  <span class="keywordtype">bool</span> AnyOps = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;  <span class="keywordtype">unsigned</span> NumOps = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getNumOperands();</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160; </div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> SrcIdx = 0; SrcIdx &lt; NumOps; ++SrcIdx) {</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;    <span class="keywordtype">unsigned</span> DstIdx = 0;</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;isRegTiedToDefOperand(SrcIdx, &amp;DstIdx))</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;    AnyOps = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;    <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;SrcMO = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(SrcIdx);</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;    <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;DstMO = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(DstIdx);</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> SrcReg = SrcMO.<a class="code" href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">getReg</a>();</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = DstMO.<a class="code" href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">getReg</a>();</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;    <span class="comment">// Tied constraint already satisfied?</span></div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;    <span class="keywordflow">if</span> (SrcReg == DstReg)</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160; </div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SrcReg &amp;&amp; SrcMO.<a class="code" href="classllvm_1_1MachineOperand.html#a69544ec8658eadeed98245dc37c3a541">isUse</a>() &amp;&amp; <span class="stringliteral">&quot;two address instruction invalid&quot;</span>);</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160; </div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;    <span class="comment">// Deal with undef uses immediately - simply rewrite the src operand.</span></div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    <span class="keywordflow">if</span> (SrcMO.<a class="code" href="classllvm_1_1MachineOperand.html#a1255befbcd6e034394681b1bcd3529ff">isUndef</a>() &amp;&amp; !DstMO.<a class="code" href="classllvm_1_1MachineOperand.html#a028a8c5113d40d8c3f4427053bf36738">getSubReg</a>()) {</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;      <span class="comment">// Constrain the DstReg register class if required.</span></div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;      <span class="keywordflow">if</span> (DstReg.<a class="code" href="classllvm_1_1Register.html#aebafd86dde59b5a05b22e8720e808a9d">isVirtual</a>()) {</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *RC = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#aa363afffca4fc13a709673936b47fe33">getRegClass</a>(SrcReg);</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;        <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#ad85285685fc46db3f2b3b0bf90bf9184">constrainRegClass</a>(DstReg, RC);</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;      }</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;      SrcMO.<a class="code" href="classllvm_1_1MachineOperand.html#a682ba82f42f7903d0000ffbb13ea3b57">setReg</a>(DstReg);</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;      SrcMO.<a class="code" href="classllvm_1_1MachineOperand.html#a001d31fcea92be51d2999826b806606f">setSubReg</a>(0);</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\t\trewrite undef:\t&quot;</span> &lt;&lt; *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;    }</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    TiedOperands[SrcReg].push_back(std::make_pair(SrcIdx, DstIdx));</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;  }</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;  <span class="keywordflow">return</span> AnyOps;</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;}</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160; </div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;<span class="comment">// Process a list of tied MI operands that all use the same source register.</span></div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;<span class="comment">// The tied pairs are of the form (SrcIdx, DstIdx).</span></div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;TwoAddressInstructionPass::processTiedPairs(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;                                            TiedPairList &amp;TiedPairs,</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;                                            <span class="keywordtype">unsigned</span> &amp;Dist) {</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;  <span class="keywordtype">bool</span> IsEarlyClobber = <a class="code" href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">llvm::any_of</a>(TiedPairs, [<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>](<span class="keyword">auto</span> <span class="keyword">const</span> &amp;TP) {</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(TP.second).isEarlyClobber();</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;  });</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160; </div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;  <span class="keywordtype">bool</span> RemovedKillFlag = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;  <span class="keywordtype">bool</span> AllUsesCopied = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;  <span class="keywordtype">unsigned</span> LastCopiedReg = 0;</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;  <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> LastCopyIdx;</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> RegB = 0;</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;  <span class="keywordtype">unsigned</span> SubRegB = 0;</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;TP : TiedPairs) {</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;    <span class="keywordtype">unsigned</span> SrcIdx = TP.first;</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;    <span class="keywordtype">unsigned</span> DstIdx = TP.second;</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160; </div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;DstMO = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(DstIdx);</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> RegA = DstMO.<a class="code" href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">getReg</a>();</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160; </div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;    <span class="comment">// Grab RegB from the instruction because it may have changed if the</span></div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;    <span class="comment">// instruction was commuted.</span></div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;    RegB = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(SrcIdx).getReg();</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;    SubRegB = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(SrcIdx).getSubReg();</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160; </div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;    <span class="keywordflow">if</span> (RegA == RegB) {</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;      <span class="comment">// The register is tied to multiple destinations (or else we would</span></div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;      <span class="comment">// not have continued this far), but this use of the register</span></div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;      <span class="comment">// already matches the tied destination.  Leave it.</span></div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;      AllUsesCopied = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;    }</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;    LastCopiedReg = RegA;</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160; </div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(RegB.<a class="code" href="classllvm_1_1Register.html#aebafd86dde59b5a05b22e8720e808a9d">isVirtual</a>() &amp;&amp; <span class="stringliteral">&quot;cannot make instruction into two-address form&quot;</span>);</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160; </div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    <span class="comment">// First, verify that we don&#39;t have a use of &quot;a&quot; in the instruction</span></div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    <span class="comment">// (a = b + a for example) because our transformation will not</span></div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    <span class="comment">// work. This should never occur because we are in SSA form.</span></div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getNumOperands(); ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> == DstIdx ||</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;             !<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>).isReg() ||</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;             <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>).getReg() != RegA);</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160; </div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    <span class="comment">// Emit a copy.</span></div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;    <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> MIB = <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(*<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getParent(), <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getDebugLoc(),</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;                                      <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(TargetOpcode::COPY), RegA);</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    <span class="comment">// If this operand is folding a truncation, the truncation now moves to the</span></div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    <span class="comment">// copy so that the register classes remain valid for the operands.</span></div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(RegB, 0, SubRegB);</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *RC = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#aa363afffca4fc13a709673936b47fe33">getRegClass</a>(RegB);</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;    <span class="keywordflow">if</span> (SubRegB) {</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;      <span class="keywordflow">if</span> (RegA.<a class="code" href="classllvm_1_1Register.html#aebafd86dde59b5a05b22e8720e808a9d">isVirtual</a>()) {</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>-&gt;<a class="code" href="classllvm_1_1TargetRegisterInfo.html#af14d27fb00fd2058e8da7eec1489df19">getMatchingSuperRegClass</a>(RC, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#aa363afffca4fc13a709673936b47fe33">getRegClass</a>(RegA),</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;                                             SubRegB) &amp;&amp;</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;               <span class="stringliteral">&quot;tied subregister must be a truncation&quot;</span>);</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;        <span class="comment">// The superreg class will not be used to constrain the subreg class.</span></div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;        RC = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>-&gt;<a class="code" href="classllvm_1_1TargetRegisterInfo.html#aa5aad3f9195b1fd331f449ce9a709da2">getMatchingSuperReg</a>(RegA, SubRegB, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#aa363afffca4fc13a709673936b47fe33">getRegClass</a>(RegB))</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;               &amp;&amp; <span class="stringliteral">&quot;tied subregister must be a truncation&quot;</span>);</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;      }</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;    }</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160; </div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    <span class="comment">// Update DistanceMap.</span></div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> PrevMI = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>;</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;    --PrevMI;</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;    DistanceMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">insert</a>(std::make_pair(&amp;*PrevMI, Dist));</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;    DistanceMap[<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>] = ++Dist;</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160; </div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;    <span class="keywordflow">if</span> (LIS) {</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;      LastCopyIdx = LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a2035620c14bf7bdedfa4e2655f88d114">InsertMachineInstrInMaps</a>(*PrevMI).<a class="code" href="classllvm_1_1SlotIndex.html#ae3b98982e2036f3d26806de5ed5e02d0">getRegSlot</a>();</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160; </div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;      <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> endIdx =</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;          LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a6f3043b29023d270fc4bc5062dff7cee">getInstructionIndex</a>(*MI).<a class="code" href="classllvm_1_1SlotIndex.html#ae3b98982e2036f3d26806de5ed5e02d0">getRegSlot</a>(IsEarlyClobber);</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;      <span class="keywordflow">if</span> (RegA.<a class="code" href="classllvm_1_1Register.html#aebafd86dde59b5a05b22e8720e808a9d">isVirtual</a>()) {</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;        <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;LI = LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a25c117ac45bfbbcf69dc0b674db2d1ea">getInterval</a>(RegA);</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;        <a class="code" href="classllvm_1_1VNInfo.html">VNInfo</a> *VNI = LI.<a class="code" href="classllvm_1_1LiveRange.html#a69331ac1fdc66eee11c977845f2e472b">getNextValue</a>(LastCopyIdx, LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a11b78aceef1db7dddc7ca575c395ddaf">getVNInfoAllocator</a>());</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;        LI.<a class="code" href="classllvm_1_1LiveRange.html#a0b73c8d5ae32ca13dd02ddde86ffd0a2">addSegment</a>(<a class="code" href="structllvm_1_1LiveRange_1_1Segment.html">LiveRange::Segment</a>(LastCopyIdx, endIdx, VNI));</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> : LI.<a class="code" href="classllvm_1_1LiveInterval.html#a97dfb31f0f752a171bfe5fe49244c9be">subranges</a>()) {</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;          VNI = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.getNextValue(LastCopyIdx, LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a11b78aceef1db7dddc7ca575c395ddaf">getVNInfoAllocator</a>());</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;          <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.addSegment(<a class="code" href="structllvm_1_1LiveRange_1_1Segment.html">LiveRange::Segment</a>(LastCopyIdx, endIdx, VNI));</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;        }</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MCRegUnitIterator.html">MCRegUnitIterator</a> Unit(RegA, <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>); Unit.isValid(); ++Unit) {</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LiveRange.html">LiveRange</a> *LR = LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#af68f45baf4510224cb6ecf00019a9987">getCachedRegUnit</a>(*Unit)) {</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;            <a class="code" href="classllvm_1_1VNInfo.html">VNInfo</a> *VNI =</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;                LR-&gt;getNextValue(LastCopyIdx, LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a11b78aceef1db7dddc7ca575c395ddaf">getVNInfoAllocator</a>());</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;            LR-&gt;addSegment(<a class="code" href="structllvm_1_1LiveRange_1_1Segment.html">LiveRange::Segment</a>(LastCopyIdx, endIdx, VNI));</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;          }</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;        }</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;      }</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    }</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160; </div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\t\tprepend:\t&quot;</span> &lt;&lt; *MIB);</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160; </div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(SrcIdx);</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(MO.<a class="code" href="classllvm_1_1MachineOperand.html#a4c9594c955fec80c73ddd964b5efd554">isReg</a>() &amp;&amp; MO.<a class="code" href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">getReg</a>() == RegB &amp;&amp; MO.<a class="code" href="classllvm_1_1MachineOperand.html#a69544ec8658eadeed98245dc37c3a541">isUse</a>() &amp;&amp;</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;           <span class="stringliteral">&quot;inconsistent operand info for 2-reg pass&quot;</span>);</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;    <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#a4046212ebc647b17e811837ae4ea3afd">isKill</a>()) {</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;      MO.<a class="code" href="classllvm_1_1MachineOperand.html#a8a82683fccdef8a5ef772ef03277aee7">setIsKill</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;      RemovedKillFlag = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;    }</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160; </div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    <span class="comment">// Make sure regA is a legal regclass for the SrcIdx operand.</span></div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    <span class="keywordflow">if</span> (RegA.<a class="code" href="classllvm_1_1Register.html#aebafd86dde59b5a05b22e8720e808a9d">isVirtual</a>() &amp;&amp; RegB.<a class="code" href="classllvm_1_1Register.html#aebafd86dde59b5a05b22e8720e808a9d">isVirtual</a>())</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;      <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#ad85285685fc46db3f2b3b0bf90bf9184">constrainRegClass</a>(RegA, RC);</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    MO.<a class="code" href="classllvm_1_1MachineOperand.html#a682ba82f42f7903d0000ffbb13ea3b57">setReg</a>(RegA);</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;    <span class="comment">// The getMatchingSuper asserts guarantee that the register class projected</span></div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;    <span class="comment">// by SubRegB is compatible with RegA with no subregister. So regardless of</span></div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;    <span class="comment">// whether the dest oper writes a subreg, the source oper should not.</span></div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;    MO.<a class="code" href="classllvm_1_1MachineOperand.html#a001d31fcea92be51d2999826b806606f">setSubReg</a>(0);</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;  }</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160; </div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;  <span class="keywordflow">if</span> (AllUsesCopied) {</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;    <a class="code" href="structllvm_1_1LaneBitmask.html">LaneBitmask</a> RemainingUses = <a class="code" href="structllvm_1_1LaneBitmask.html#a9082b6aa4021114645045d9c5628eb26">LaneBitmask::getNone</a>();</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    <span class="comment">// Replace other (un-tied) uses of regB with LastCopiedReg.</span></div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO : <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;operands()) {</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;      <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#a4c9594c955fec80c73ddd964b5efd554">isReg</a>() &amp;&amp; MO.<a class="code" href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">getReg</a>() == RegB &amp;&amp; MO.<a class="code" href="classllvm_1_1MachineOperand.html#a69544ec8658eadeed98245dc37c3a541">isUse</a>()) {</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;        <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#a028a8c5113d40d8c3f4427053bf36738">getSubReg</a>() == SubRegB &amp;&amp; !IsEarlyClobber) {</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;          <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#a4046212ebc647b17e811837ae4ea3afd">isKill</a>()) {</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;            MO.<a class="code" href="classllvm_1_1MachineOperand.html#a8a82683fccdef8a5ef772ef03277aee7">setIsKill</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;            RemovedKillFlag = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;          }</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;          MO.<a class="code" href="classllvm_1_1MachineOperand.html#a682ba82f42f7903d0000ffbb13ea3b57">setReg</a>(LastCopiedReg);</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;          MO.<a class="code" href="classllvm_1_1MachineOperand.html#a001d31fcea92be51d2999826b806606f">setSubReg</a>(0);</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;          RemainingUses |= <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>-&gt;<a class="code" href="classllvm_1_1TargetRegisterInfo.html#a7a23b6fb3b79b0c2bf4bf4f0cb042840">getSubRegIndexLaneMask</a>(MO.<a class="code" href="classllvm_1_1MachineOperand.html#a028a8c5113d40d8c3f4427053bf36738">getSubReg</a>());</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;        }</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;      }</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;    }</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160; </div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;    <span class="comment">// Update live variables for regB.</span></div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;    <span class="keywordflow">if</span> (RemovedKillFlag &amp;&amp; RemainingUses.<a class="code" href="structllvm_1_1LaneBitmask.html#a60907035da962ba7bea74ffb9af977bd">none</a>() &amp;&amp; LV &amp;&amp;</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;        LV-&gt;<a class="code" href="classllvm_1_1LiveVariables.html#af73ca972d296b25a689a90fb5a0713f3">getVarInfo</a>(RegB).<a class="code" href="structllvm_1_1LiveVariables_1_1VarInfo.html#a1e808b535590177bb00545b77a324288">removeKill</a>(*<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)) {</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;      <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> PrevMI = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>;</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;      --PrevMI;</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;      LV-&gt;<a class="code" href="classllvm_1_1LiveVariables.html#ae58f90c0c07a77319dd769a8588a0fa7">addVirtualRegisterKilled</a>(RegB, *PrevMI);</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;    }</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160; </div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;    <span class="keywordflow">if</span> (RemovedKillFlag &amp;&amp; RemainingUses.<a class="code" href="structllvm_1_1LaneBitmask.html#a60907035da962ba7bea74ffb9af977bd">none</a>())</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;      SrcRegMap[LastCopiedReg] = RegB;</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160; </div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;    <span class="comment">// Update LiveIntervals.</span></div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;    <span class="keywordflow">if</span> (LIS) {</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;      <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> UseIdx = LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a6f3043b29023d270fc4bc5062dff7cee">getInstructionIndex</a>(*<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;      <span class="keyword">auto</span> <a class="code" href="lib_2Target_2README_8txt.html#ad8b6d2396f18814d213b976abe07f809">Shrink</a> = [=](<a class="code" href="classllvm_1_1LiveRange.html">LiveRange</a> &amp;LR, <a class="code" href="structllvm_1_1LaneBitmask.html">LaneBitmask</a> LaneMask) {</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;        <a class="code" href="structllvm_1_1LiveRange_1_1Segment.html">LiveRange::Segment</a> *<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> = LR.<a class="code" href="classllvm_1_1LiveRange.html#a43f03898b29d823b707f6b4883c929a4">getSegmentContaining</a>(LastCopyIdx);</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>)</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;        <span class="keywordflow">if</span> ((LaneMask &amp; RemainingUses).any())</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;end.getBaseIndex() != UseIdx)</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;        <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;end = LastCopyIdx;</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;      };</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160; </div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;      <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;LI = LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a25c117ac45bfbbcf69dc0b674db2d1ea">getInterval</a>(RegB);</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;      <span class="keywordtype">bool</span> ShrinkLI = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> : LI.<a class="code" href="classllvm_1_1LiveInterval.html#a97dfb31f0f752a171bfe5fe49244c9be">subranges</a>())</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;        ShrinkLI &amp;= <a class="code" href="lib_2Target_2README_8txt.html#ad8b6d2396f18814d213b976abe07f809">Shrink</a>(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>, <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.LaneMask);</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;      <span class="keywordflow">if</span> (ShrinkLI)</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;        <a class="code" href="lib_2Target_2README_8txt.html#ad8b6d2396f18814d213b976abe07f809">Shrink</a>(LI, <a class="code" href="structllvm_1_1LaneBitmask.html#a3714a639930eab71d7202da05ad82990">LaneBitmask::getAll</a>());</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;    }</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (RemovedKillFlag) {</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;    <span class="comment">// Some tied uses of regB matched their destination registers, so</span></div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;    <span class="comment">// regB is still used in this instruction, but a kill flag was</span></div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    <span class="comment">// removed from a different tied use of regB, so now we need to add</span></div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;    <span class="comment">// a kill flag to one of the remaining uses of regB.</span></div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO : <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;operands()) {</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;      <span class="keywordflow">if</span> (MO.<a class="code" href="classllvm_1_1MachineOperand.html#a4c9594c955fec80c73ddd964b5efd554">isReg</a>() &amp;&amp; MO.<a class="code" href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">getReg</a>() == RegB &amp;&amp; MO.<a class="code" href="classllvm_1_1MachineOperand.html#a69544ec8658eadeed98245dc37c3a541">isUse</a>()) {</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;        MO.<a class="code" href="classllvm_1_1MachineOperand.html#a8a82683fccdef8a5ef772ef03277aee7">setIsKill</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;      }</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;    }</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;  }</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;}</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160; </div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;<span class="comment">// For every tied operand pair this function transforms statepoint from</span></div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;<span class="comment">//    RegA = STATEPOINT ... RegB(tied-def N)</span></div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;<span class="comment">// to</span></div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;<span class="comment">//    RegB = STATEPOINT ... RegB(tied-def N)</span></div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;<span class="comment">// and replaces all uses of RegA with RegB.</span></div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;<span class="comment">// No extra COPY instruction is necessary because tied use is killed at</span></div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;<span class="comment">// STATEPOINT.</span></div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;<span class="keywordtype">bool</span> TwoAddressInstructionPass::processStatepoint(</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, TiedOperandMap &amp;TiedOperands) {</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160; </div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;  <span class="keywordtype">bool</span> NeedCopy = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;TO : TiedOperands) {</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> RegB = TO.first;</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;    <span class="keywordflow">if</span> (TO.second.size() != 1) {</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;      NeedCopy = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;    }</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160; </div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;    <span class="keywordtype">unsigned</span> SrcIdx = TO.second[0].first;</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;    <span class="keywordtype">unsigned</span> DstIdx = TO.second[0].second;</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160; </div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;    <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;DstMO = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(DstIdx);</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> RegA = DstMO.<a class="code" href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">getReg</a>();</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160; </div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(RegB == <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(SrcIdx).getReg());</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160; </div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;    <span class="keywordflow">if</span> (RegA == RegB)</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160; </div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;    <span class="comment">// CodeGenPrepare can sink pointer compare past statepoint, which</span></div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;    <span class="comment">// breaks assumption that statepoint kills tied-use register when</span></div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;    <span class="comment">// in SSA form (see note in IR/SafepointIRVerifier.cpp). Fall back</span></div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;    <span class="comment">// to generic tied register handling to avoid assertion failures.</span></div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;    <span class="comment">// TODO: Recompute LIS/LV information for new range here.</span></div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;    <span class="keywordflow">if</span> (LIS) {</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> &amp;UseLI = LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a25c117ac45bfbbcf69dc0b674db2d1ea">getInterval</a>(RegB);</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> &amp;DefLI = LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a25c117ac45bfbbcf69dc0b674db2d1ea">getInterval</a>(RegA);</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;      <span class="keywordflow">if</span> (DefLI.overlaps(UseLI)) {</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LIS: &quot;</span> &lt;&lt; <a class="code" href="namespacellvm.html#af085ea923a328b9fa6a1975f1a4ff987">printReg</a>(RegB, <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>, 0)</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;                          &lt;&lt; <span class="stringliteral">&quot; UseLI overlaps with DefLI\n&quot;</span>);</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;        NeedCopy = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;      }</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (LV &amp;&amp; LV-&gt;<a class="code" href="classllvm_1_1LiveVariables.html#af73ca972d296b25a689a90fb5a0713f3">getVarInfo</a>(RegB).<a class="code" href="structllvm_1_1LiveVariables_1_1VarInfo.html#a935158aa13ae361427aa4c76d40693a0">findKill</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getParent()) != <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;      <span class="comment">// Note that MachineOperand::isKill does not work here, because it</span></div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;      <span class="comment">// is set only on first register use in instruction and for statepoint</span></div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;      <span class="comment">// tied-use register will usually be found in preceeding deopt bundle.</span></div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LV: &quot;</span> &lt;&lt; <a class="code" href="namespacellvm.html#af085ea923a328b9fa6a1975f1a4ff987">printReg</a>(RegB, <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>, 0)</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot; not killed by statepoint\n&quot;</span>);</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;      NeedCopy = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;    }</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160; </div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#ad85285685fc46db3f2b3b0bf90bf9184">constrainRegClass</a>(RegB, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#aa363afffca4fc13a709673936b47fe33">getRegClass</a>(RegA))) {</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;MRI: couldn&#39;t constrain&quot;</span> &lt;&lt; <a class="code" href="namespacellvm.html#af085ea923a328b9fa6a1975f1a4ff987">printReg</a>(RegB, <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>, 0)</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot; to register class of &quot;</span> &lt;&lt; <a class="code" href="namespacellvm.html#af085ea923a328b9fa6a1975f1a4ff987">printReg</a>(RegA, <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>, 0)</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;                        &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;      NeedCopy = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    }</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;    <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#af16c39ee36e4633f821b6820f8bd52ef">replaceRegWith</a>(RegA, RegB);</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160; </div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    <span class="keywordflow">if</span> (LIS) {</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;      <a class="code" href="classllvm_1_1BumpPtrAllocatorImpl.html">VNInfo::Allocator</a> &amp;<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a> = LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a11b78aceef1db7dddc7ca575c395ddaf">getVNInfoAllocator</a>();</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;      <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;LI = LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a25c117ac45bfbbcf69dc0b674db2d1ea">getInterval</a>(RegB);</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;      <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;<a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a> = LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a25c117ac45bfbbcf69dc0b674db2d1ea">getInterval</a>(RegA);</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;VNInfo *&gt;</a> NewVNIs;</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1VNInfo.html">VNInfo</a> *VNI : <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>.valnos) {</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(VNI-&gt;<a class="code" href="classllvm_1_1VNInfo.html#ad989a0c1b26066308798f4d11a0e69df">id</a> == NewVNIs.size() &amp;&amp; <span class="stringliteral">&quot;assumed&quot;</span>);</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;        NewVNIs.push_back(LI.<a class="code" href="classllvm_1_1LiveRange.html#a7025ffbed334ad224c58306bfc33cbb7">createValueCopy</a>(VNI, A));</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;      }</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> : Other) {</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;        <a class="code" href="classllvm_1_1VNInfo.html">VNInfo</a> *VNI = NewVNIs[<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.valno-&gt;id];</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;        <a class="code" href="structllvm_1_1LiveRange_1_1Segment.html">LiveRange::Segment</a> NewSeg(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.start, <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.end, VNI);</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;        LI.<a class="code" href="classllvm_1_1LiveRange.html#a0b73c8d5ae32ca13dd02ddde86ffd0a2">addSegment</a>(NewSeg);</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;      }</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;      LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#aa07c0db20cf93bf2f558d00af34a6cb6">removeInterval</a>(RegA);</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;    }</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160; </div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;    <span class="keywordflow">if</span> (LV) {</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(SrcIdx).isKill())</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;        LV-&gt;<a class="code" href="classllvm_1_1LiveVariables.html#a515b9b6464ec4cbf5133d51f63a4e489">removeVirtualRegisterKilled</a>(RegB, *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;      <a class="code" href="structllvm_1_1LiveVariables_1_1VarInfo.html">LiveVariables::VarInfo</a> &amp;SrcInfo = LV-&gt;<a class="code" href="classllvm_1_1LiveVariables.html#af73ca972d296b25a689a90fb5a0713f3">getVarInfo</a>(RegB);</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;      <a class="code" href="structllvm_1_1LiveVariables_1_1VarInfo.html">LiveVariables::VarInfo</a> &amp;DstInfo = LV-&gt;<a class="code" href="classllvm_1_1LiveVariables.html#af73ca972d296b25a689a90fb5a0713f3">getVarInfo</a>(RegA);</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;      SrcInfo.<a class="code" href="structllvm_1_1LiveVariables_1_1VarInfo.html#a76321b20db4feab750d85c2329cfcbc6">AliveBlocks</a> |= DstInfo.<a class="code" href="structllvm_1_1LiveVariables_1_1VarInfo.html#a76321b20db4feab750d85c2329cfcbc6">AliveBlocks</a>;</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;      DstInfo.<a class="code" href="structllvm_1_1LiveVariables_1_1VarInfo.html#a76321b20db4feab750d85c2329cfcbc6">AliveBlocks</a>.<a class="code" href="classllvm_1_1SparseBitVector.html#a4f223ae1e481ce22245c3c7c7736dbe9">clear</a>();</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> *KillMI : DstInfo.<a class="code" href="structllvm_1_1LiveVariables_1_1VarInfo.html#a65c816771eca7465f5e3e0bb6624ad88">Kills</a>)</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;        LV-&gt;<a class="code" href="classllvm_1_1LiveVariables.html#ae58f90c0c07a77319dd769a8588a0fa7">addVirtualRegisterKilled</a>(RegB, *KillMI, <span class="keyword">false</span>);</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    }</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;  }</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;  <span class="keywordflow">return</span> !NeedCopy;</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;}</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;<span class="comment">/// Reduce two-address instructions to two operands.</span></div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> TwoAddressInstructionPass::runOnMachineFunction(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;Func) {</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;  MF = &amp;<a class="code" href="namespacellvm_1_1ifs.html#adfe04e1a9cc096fb571e8372debaa67ea00d0b4f2d7dcdaaef835b97cf5d1e0df">Func</a>;</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetMachine.html">TargetMachine</a> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#ab76052bb166c65901edb603a3e1f03ab">TM</a> = MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#ae68d159179d37dc7969439d842e2644f">getTarget</a>();</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;  <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = &amp;MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">getRegInfo</a>();</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;  <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a> = MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>().<a class="code" href="classllvm_1_1TargetSubtargetInfo.html#ad34f7e3cd7a9add3ab2529e267b48004">getInstrInfo</a>();</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;  <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a> = MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>().<a class="code" href="classllvm_1_1TargetSubtargetInfo.html#a87849514193302b75f50a8092f94b98a">getRegisterInfo</a>();</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;  InstrItins = MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>().<a class="code" href="classllvm_1_1TargetSubtargetInfo.html#a0bdd73a1c5968b0ee2e76e27faa31442">getInstrItineraryData</a>();</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;  LV = getAnalysisIfAvailable&lt;LiveVariables&gt;();</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;  LIS = getAnalysisIfAvailable&lt;LiveIntervals&gt;();</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *AAPass = getAnalysisIfAvailable&lt;AAResultsWrapperPass&gt;())</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;    AA = &amp;AAPass-&gt;getAAResults();</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;    AA = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;  OptLevel = <a class="code" href="PassBuilderBindings_8cpp.html#ab76052bb166c65901edb603a3e1f03ab">TM</a>.getOptLevel();</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;  <span class="comment">// Disable optimizations if requested. We cannot skip the whole pass as some</span></div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;  <span class="comment">// fixups are necessary for correctness.</span></div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;  <span class="keywordflow">if</span> (skipFunction(<a class="code" href="namespacellvm_1_1ifs.html#adfe04e1a9cc096fb571e8372debaa67ea00d0b4f2d7dcdaaef835b97cf5d1e0df">Func</a>.getFunction()))</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;    OptLevel = <a class="code" href="namespacellvm_1_1CodeGenOpt.html#ad7e52174abb1cfb84238ad1ac475ee36a451bbac85aff02d070be3c17a6bef928">CodeGenOpt::None</a>;</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160; </div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;  <span class="keywordtype">bool</span> MadeChange = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160; </div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;********** REWRITING TWO-ADDR INSTRS **********\n&quot;</span>);</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;********** Function: &quot;</span> &lt;&lt; MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#a3d142c9e7c066059e15232c56dec9e2e">getName</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160; </div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;  <span class="comment">// This pass takes the function out of SSA form.</span></div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;  <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a035f850aa2492716906dbb0610e98c90">leaveSSA</a>();</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160; </div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;  <span class="comment">// This pass will rewrite the tied-def to meet the RegConstraint.</span></div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;  MF-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#acc5e979e3fa3c222553de9b741c3e12b">getProperties</a>()</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;      .<a class="code" href="classllvm_1_1MachineFunctionProperties.html#aa0f2b6097642894ce79ff3e15c896206">set</a>(<a class="code" href="classllvm_1_1MachineFunctionProperties.html#ad85237c6c667e4713efe8921e9c32ac1a2e0aa187d296e1330d12a948094f601b">MachineFunctionProperties::Property::TiedOpsRewritten</a>);</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160; </div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;  TiedOperandMap TiedOperands;</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a> : *MF) {</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;    <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> = &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>;</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;    <span class="keywordtype">unsigned</span> Dist = 0;</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;    DistanceMap.<a class="code" href="classllvm_1_1DenseMapBase.html#adf4e7878fc0b3b8dcde545178564190d">clear</a>();</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;    SrcRegMap.<a class="code" href="classllvm_1_1DenseMapBase.html#adf4e7878fc0b3b8dcde545178564190d">clear</a>();</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;    DstRegMap.<a class="code" href="classllvm_1_1DenseMapBase.html#adf4e7878fc0b3b8dcde545178564190d">clear</a>();</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;    Processed.<a class="code" href="classllvm_1_1SmallPtrSetImplBase.html#a16413f1a88d8baca228d0a1b4cc0bfc6">clear</a>();</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> mi = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>(), me = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>();</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;         mi != me; ) {</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;      <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> nmi = std::next(mi);</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;      <span class="comment">// Skip debug instructions.</span></div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;      <span class="keywordflow">if</span> (mi-&gt;isDebugInstr()) {</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;        mi = nmi;</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;      }</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160; </div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;      <span class="comment">// Expand REG_SEQUENCE instructions. This will position mi at the first</span></div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;      <span class="comment">// expanded instruction.</span></div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;      <span class="keywordflow">if</span> (mi-&gt;isRegSequence())</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;        eliminateRegSequence(mi);</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160; </div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;      DistanceMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">insert</a>(std::make_pair(&amp;*mi, ++Dist));</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160; </div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;      processCopy(&amp;*mi);</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160; </div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;      <span class="comment">// First scan through all the tied register uses in this instruction</span></div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;      <span class="comment">// and record a list of pairs of tied operands for each register.</span></div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;      <span class="keywordflow">if</span> (!collectTiedOperands(&amp;*mi, TiedOperands)) {</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;        removeClobberedSrcRegMap(&amp;*mi);</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;        mi = nmi;</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;      }</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160; </div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;      ++NumTwoAddressInstrs;</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;      MadeChange = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="charliteral">&#39;\t&#39;</span> &lt;&lt; *mi);</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160; </div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;      <span class="comment">// If the instruction has a single pair of tied operands, try some</span></div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;      <span class="comment">// transformations that may either eliminate the tied operands or</span></div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;      <span class="comment">// improve the opportunities for coalescing away the register copy.</span></div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;      <span class="keywordflow">if</span> (TiedOperands.size() == 1) {</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;        <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;std::pair&lt;unsigned, unsigned&gt;</a>&gt; &amp;TiedPairs</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;          = TiedOperands.begin()-&gt;second;</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;        <span class="keywordflow">if</span> (TiedPairs.size() == 1) {</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;          <span class="keywordtype">unsigned</span> SrcIdx = TiedPairs[0].first;</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;          <span class="keywordtype">unsigned</span> DstIdx = TiedPairs[0].second;</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;          <a class="code" href="classllvm_1_1Register.html">Register</a> SrcReg = mi-&gt;getOperand(SrcIdx).getReg();</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;          <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = mi-&gt;getOperand(DstIdx).getReg();</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;          <span class="keywordflow">if</span> (SrcReg != DstReg &amp;&amp;</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;              tryInstructionTransform(mi, nmi, SrcIdx, DstIdx, Dist, <span class="keyword">false</span>)) {</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;            <span class="comment">// The tied operands have been eliminated or shifted further down</span></div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;            <span class="comment">// the block to ease elimination. Continue processing with &#39;nmi&#39;.</span></div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;            TiedOperands.clear();</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;            removeClobberedSrcRegMap(&amp;*mi);</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;            mi = nmi;</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;          }</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;        }</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;      }</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160; </div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;      <span class="keywordflow">if</span> (mi-&gt;getOpcode() == TargetOpcode::STATEPOINT &amp;&amp;</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;          processStatepoint(&amp;*mi, TiedOperands)) {</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;        TiedOperands.clear();</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\t\trewrite to:\t&quot;</span> &lt;&lt; *mi);</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;        mi = nmi;</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;      }</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160; </div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;      <span class="comment">// Now iterate over the information collected above.</span></div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;TO : TiedOperands) {</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;        processTiedPairs(&amp;*mi, TO.second, Dist);</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\t\trewrite to:\t&quot;</span> &lt;&lt; *mi);</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;      }</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160; </div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;      <span class="comment">// Rewrite INSERT_SUBREG as COPY now that we no longer need SSA form.</span></div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;      <span class="keywordflow">if</span> (mi-&gt;isInsertSubreg()) {</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;        <span class="comment">// From %reg = INSERT_SUBREG %reg, %subreg, subidx</span></div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;        <span class="comment">// To   %reg:subidx = COPY %subreg</span></div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;        <span class="keywordtype">unsigned</span> SubIdx = mi-&gt;getOperand(3).getImm();</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;        mi-&gt;removeOperand(3);</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(mi-&gt;getOperand(0).getSubReg() == 0 &amp;&amp; <span class="stringliteral">&quot;Unexpected subreg idx&quot;</span>);</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;        mi-&gt;getOperand(0).setSubReg(SubIdx);</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;        mi-&gt;getOperand(0).setIsUndef(mi-&gt;getOperand(1).isUndef());</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;        mi-&gt;removeOperand(1);</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;        mi-&gt;setDesc(<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(TargetOpcode::COPY));</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\t\tconvert to:\t&quot;</span> &lt;&lt; *mi);</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160; </div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;        <span class="comment">// Update LiveIntervals.</span></div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;        <span class="keywordflow">if</span> (LIS) {</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;          <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = mi-&gt;getOperand(0).getReg();</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;          <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;LI = LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a25c117ac45bfbbcf69dc0b674db2d1ea">getInterval</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;          <span class="keywordflow">if</span> (LI.<a class="code" href="classllvm_1_1LiveInterval.html#a1c198291d6ee66150b76633cda8a1749">hasSubRanges</a>()) {</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;            <span class="comment">// The COPY no longer defines subregs of %reg except for</span></div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;            <span class="comment">// %reg.subidx.</span></div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;            <a class="code" href="structllvm_1_1LaneBitmask.html">LaneBitmask</a> LaneMask =</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;                <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>-&gt;<a class="code" href="classllvm_1_1TargetRegisterInfo.html#a7a23b6fb3b79b0c2bf4bf4f0cb042840">getSubRegIndexLaneMask</a>(mi-&gt;getOperand(0).getSubReg());</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;            <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> Idx = LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a6f3043b29023d270fc4bc5062dff7cee">getInstructionIndex</a>(*mi);</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> : LI.<a class="code" href="classllvm_1_1LiveInterval.html#a97dfb31f0f752a171bfe5fe49244c9be">subranges</a>()) {</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;              <span class="keywordflow">if</span> ((<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.LaneMask &amp; LaneMask).none()) {</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;                <a class="code" href="classllvm_1_1LiveRange.html#a143c1fcb6066cb301f828ec4c18d79f4">LiveRange::iterator</a> UseSeg = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.FindSegmentContaining(Idx);</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;                <a class="code" href="classllvm_1_1LiveRange.html#a143c1fcb6066cb301f828ec4c18d79f4">LiveRange::iterator</a> DefSeg = std::next(UseSeg);</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;                <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.MergeValueNumberInto(DefSeg-&gt;valno, UseSeg-&gt;valno);</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;              }</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;            }</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160; </div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;            <span class="comment">// The COPY no longer has a use of %reg.</span></div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;            LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#ac7446b2819c44bf459763351b5bcc29b">shrinkToUses</a>(&amp;LI);</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;            <span class="comment">// The live interval for Reg did not have subranges but now it needs</span></div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;            <span class="comment">// them because we have introduced a subreg def. Recompute it.</span></div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;            LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#aa07c0db20cf93bf2f558d00af34a6cb6">removeInterval</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;            LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#aff210756ea606fd0fd721c8ccaba10c8">createAndComputeVirtRegInterval</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;          }</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;        }</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;      }</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160; </div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;      <span class="comment">// Clear TiedOperands here instead of at the top of the loop</span></div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;      <span class="comment">// since most instructions do not have tied operands.</span></div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;      TiedOperands.<a class="code" href="classllvm_1_1LiveRange.html#aa1555194b9f176612b04fbd38f49b40d">clear</a>();</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;      removeClobberedSrcRegMap(&amp;*mi);</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;      mi = nmi;</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;    }</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;  }</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160; </div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;  <span class="keywordflow">return</span> MadeChange;</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;}</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;<span class="comment">/// Eliminate a REG_SEQUENCE instruction as part of the de-ssa process.</span></div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;<span class="comment">/// The instruction is turned into a sequence of sub-register copies:</span></div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;<span class="comment">///   %dst = REG_SEQUENCE %v1, ssub0, %v2, ssub1</span></div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;<span class="comment">/// Becomes:</span></div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;<span class="comment">///   undef %dst:ssub0 = COPY %v1</span></div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;<span class="comment">///   %dst:ssub1 = COPY %v2</span></div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> TwoAddressInstructionPass::</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;eliminateRegSequence(<a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>) {</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = *<a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>;</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160; </div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 4&gt;</a> OrigRegs;</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;  <span class="keywordflow">if</span> (LIS) {</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;    OrigRegs.push_back(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg());</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumOperands(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> += 2)</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;      OrigRegs.push_back(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>).getReg());</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;  }</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160; </div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;  <span class="keywordtype">bool</span> DefEmitted = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumOperands(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> += 2) {</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;    <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;UseMO = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> SrcReg = UseMO.<a class="code" href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">getReg</a>();</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;    <span class="keywordtype">unsigned</span> SubIdx = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>+1).getImm();</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;    <span class="comment">// Nothing needs to be inserted for undef operands.</span></div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;    <span class="keywordflow">if</span> (UseMO.<a class="code" href="classllvm_1_1MachineOperand.html#a1255befbcd6e034394681b1bcd3529ff">isUndef</a>())</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160; </div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;    <span class="comment">// Defer any kill flag to the last operand using SrcReg. Otherwise, we</span></div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;    <span class="comment">// might insert a COPY that uses SrcReg after is was killed.</span></div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;    <span class="keywordtype">bool</span> isKill = UseMO.<a class="code" href="classllvm_1_1MachineOperand.html#a4046212ebc647b17e811837ae4ea3afd">isKill</a>();</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;    <span class="keywordflow">if</span> (isKill)</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> = <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> + 2; <a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> &lt; <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; <a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> += 2)</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(<a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>).getReg() == SrcReg) {</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;          <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(<a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>).setIsKill();</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;          UseMO.<a class="code" href="classllvm_1_1MachineOperand.html#a8a82683fccdef8a5ef772ef03277aee7">setIsKill</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;          isKill = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;        }</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160; </div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;    <span class="comment">// Insert the sub-register copy.</span></div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *CopyMI = <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(*<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getParent(), <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getDebugLoc(),</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;                                   <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(TargetOpcode::COPY))</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;                               .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(DstReg, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da72c17e2ff2d5af62a30e56ac152aa8d5">RegState::Define</a>, SubIdx)</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;                               .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a1ac8d27532cfd1d1f032ecbff2ba3611">add</a>(UseMO);</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160; </div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;    <span class="comment">// The first def needs an undef flag because there is no live register</span></div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;    <span class="comment">// before it.</span></div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;    <span class="keywordflow">if</span> (!DefEmitted) {</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;      CopyMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">getOperand</a>(0).<a class="code" href="classllvm_1_1MachineOperand.html#ab979122f21b7fa46d3d2d9b21983068b">setIsUndef</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;      <span class="comment">// Return an iterator pointing to the first inserted instr.</span></div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;      <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a> = CopyMI;</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;    }</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;    DefEmitted = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160; </div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;    <span class="comment">// Update LiveVariables&#39; kill info.</span></div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;    <span class="keywordflow">if</span> (LV &amp;&amp; isKill &amp;&amp; !SrcReg.<a class="code" href="classllvm_1_1Register.html#a13bd3dae94013a7bf38afc9391c8fa8f">isPhysical</a>())</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;      LV-&gt;<a class="code" href="classllvm_1_1LiveVariables.html#a007ef08997c0b0391aaebc27e257062c">replaceKillInstruction</a>(SrcReg, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, *CopyMI);</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160; </div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Inserted: &quot;</span> &lt;&lt; *CopyMI);</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;  }</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160; </div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> EndMBBI =</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;      std::next(<a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>));</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160; </div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;  <span class="keywordflow">if</span> (!DefEmitted) {</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Turned: &quot;</span> &lt;&lt; <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> &lt;&lt; <span class="stringliteral">&quot; into an IMPLICIT_DEF&quot;</span>);</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.setDesc(<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(TargetOpcode::IMPLICIT_DEF));</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumOperands() - 1, ee = 0; <a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> &gt; ee; --<a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>)</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.removeOperand(<a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>);</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;    <span class="keywordflow">if</span> (LIS)</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;      LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a73f605751be73f0a910a586bb1b5d869">RemoveMachineInstrFromMaps</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160; </div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Eliminated: &quot;</span> &lt;&lt; <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;  }</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160; </div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;  <span class="comment">// Udpate LiveIntervals.</span></div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;  <span class="keywordflow">if</span> (LIS)</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;    LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a0d7e0d23a0453390a4c1e9a61afccdca">repairIntervalsInRange</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a>, EndMBBI, OrigRegs);</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aclassllvm_1_1LiveRange_html_afeb00b9049a2391c990df15692caef63"><div class="ttname"><a href="classllvm_1_1LiveRange.html#afeb00b9049a2391c990df15692caef63">llvm::LiveRange::find</a></div><div class="ttdeci">iterator find(SlotIndex Pos)</div><div class="ttdoc">find - Return an iterator pointing to the first segment that ends after Pos, or end().</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8cpp_source.html#l00350">LiveInterval.cpp:350</a></div></div>
<div class="ttc" id="astructllvm_1_1LaneBitmask_html"><div class="ttname"><a href="structllvm_1_1LaneBitmask.html">llvm::LaneBitmask</a></div><div class="ttdef"><b>Definition:</b> <a href="LaneBitmask_8h_source.html#l00040">LaneBitmask.h:40</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00029">README.txt:29</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCInstrDesc_html_a3496944fcc473dfe584e6615503a7a76"><div class="ttname"><a href="classllvm_1_1MCInstrDesc.html#a3496944fcc473dfe584e6615503a7a76">llvm::MCInstrDesc::getNumDefs</a></div><div class="ttdeci">unsigned getNumDefs() const</div><div class="ttdoc">Return the number of MachineOperands that are register definitions.</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00247">MCInstrDesc.h:247</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_a5891cdb51072f67e65f7ebd9be1205e7"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a5891cdb51072f67e65f7ebd9be1205e7">llvm::MachineInstr::isBranch</a></div><div class="ttdeci">bool isBranch(QueryType Type=AnyInBundle) const</div><div class="ttdoc">Returns true if this is a conditional, unconditional, or indirect branch.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00904">MachineInstr.h:904</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveVariables_html_ae58f90c0c07a77319dd769a8588a0fa7"><div class="ttname"><a href="classllvm_1_1LiveVariables.html#ae58f90c0c07a77319dd769a8588a0fa7">llvm::LiveVariables::addVirtualRegisterKilled</a></div><div class="ttdeci">void addVirtualRegisterKilled(Register IncomingReg, MachineInstr &amp;MI, bool AddIfNotFound=false)</div><div class="ttdoc">addVirtualRegisterKilled - Add information about the fact that the specified register is killed after...</div><div class="ttdef"><b>Definition:</b> <a href="LiveVariables_8h_source.html#l00207">LiveVariables.h:207</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveVariables_html_a722a7eaa41e03a18392be831f831627d"><div class="ttname"><a href="classllvm_1_1LiveVariables.html#a722a7eaa41e03a18392be831f831627d">llvm::LiveVariables::addVirtualRegisterDead</a></div><div class="ttdeci">void addVirtualRegisterDead(Register IncomingReg, MachineInstr &amp;MI, bool AddIfNotFound=false)</div><div class="ttdoc">addVirtualRegisterDead - Add information about the fact that the specified register is dead after bei...</div><div class="ttdef"><b>Definition:</b> <a href="LiveVariables_8h_source.html#l00242">LiveVariables.h:242</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_ad26a74fb0ad868f0867cce317269d721"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#ad26a74fb0ad868f0867cce317269d721">llvm::MachineInstr::getDebugInstrNum</a></div><div class="ttdeci">unsigned getDebugInstrNum()</div><div class="ttdoc">Fetch the instruction number of this MachineInstr.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8cpp_source.html#l02370">MachineInstr.cpp:2370</a></div></div>
<div class="ttc" id="aIRTranslator_8cpp_html_abe44dfdea65b4f7e11e0a608ab708b76"><div class="ttname"><a href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a></div><div class="ttdeci">IRTranslator LLVM IR MI</div><div class="ttdef"><b>Definition:</b> <a href="IRTranslator_8cpp_source.html#l00109">IRTranslator.cpp:109</a></div></div>
<div class="ttc" id="aMachineInstr_8h_html"><div class="ttname"><a href="MachineInstr_8h.html">MachineInstr.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_a56c15f3294c62d7590bb98e4d08ddeef"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a56c15f3294c62d7590bb98e4d08ddeef">llvm::MachineRegisterInfo::def_begin</a></div><div class="ttdeci">def_iterator def_begin(Register RegNo) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00406">MachineRegisterInfo.h:406</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a563ffc2ff61c499b3be2e00100cb72fa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a563ffc2ff61c499b3be2e00100cb72fa">llvm::SmallVectorImpl::erase</a></div><div class="ttdeci">iterator erase(const_iterator CI)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00741">SmallVector.h:741</a></div></div>
<div class="ttc" id="anamespacellvm_1_1tgtok_html_abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a"><div class="ttname"><a href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">llvm::tgtok::Def</a></div><div class="ttdeci">@ Def</div><div class="ttdef"><b>Definition:</b> <a href="TGLexer_8h_source.html#l00050">TGLexer.h:50</a></div></div>
<div class="ttc" id="aAArch64ExpandPseudoInsts_8cpp_html_a6cf2f8996b1e9aaf2d7a435aaa62382f"><div class="ttname"><a href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a></div><div class="ttdeci">MachineInstrBuilder &amp; UseMI</div><div class="ttdef"><b>Definition:</b> <a href="AArch64ExpandPseudoInsts_8cpp_source.html#l00107">AArch64ExpandPseudoInsts.cpp:107</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad1a91b49e0c092818a0b82f6cc130a1b"><div class="ttname"><a href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">llvm::make_range</a></div><div class="ttdeci">iterator_range&lt; T &gt; make_range(T x, T y)</div><div class="ttdoc">Convenience function for iterating over sub-ranges.</div><div class="ttdef"><b>Definition:</b> <a href="iterator__range_8h_source.html#l00053">iterator_range.h:53</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64PACKey_html_abf4394f452bde3f544999858d71e4b46"><div class="ttname"><a href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46">llvm::AArch64PACKey::ID</a></div><div class="ttdeci">ID</div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00790">AArch64BaseInfo.h:790</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_a5c77792a06583e0fe7a0379ad94a2809"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a5c77792a06583e0fe7a0379ad94a2809">llvm::MachineRegisterInfo::createVirtualRegister</a></div><div class="ttdeci">Register createVirtualRegister(const TargetRegisterClass *RegClass, StringRef Name=&quot;&quot;)</div><div class="ttdoc">createVirtualRegister - Create and return a new virtual register in the function with the specified r...</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00157">MachineRegisterInfo.cpp:157</a></div></div>
<div class="ttc" id="aMCInstrDesc_8h_html"><div class="ttname"><a href="MCInstrDesc_8h.html">MCInstrDesc.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html">llvm::MachineRegisterInfo</a></div><div class="ttdoc">MachineRegisterInfo - Keep track of information for virtual and physical registers,...</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00051">MachineRegisterInfo.h:51</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_a0dc6dbc2630fd5d1e5ca7ef3b51b1d63"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a0dc6dbc2630fd5d1e5ca7ef3b51b1d63">llvm::MachineInstr::isSafeToMove</a></div><div class="ttdeci">bool isSafeToMove(AAResults *AA, bool &amp;SawStore) const</div><div class="ttdoc">Return true if it is safe to move this instruction.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8cpp_source.html#l01240">MachineInstr.cpp:1240</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_a1ac8d27532cfd1d1f032ecbff2ba3611"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#a1ac8d27532cfd1d1f032ecbff2ba3611">llvm::MachineInstrBuilder::add</a></div><div class="ttdeci">const MachineInstrBuilder &amp; add(const MachineOperand &amp;MO) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00224">MachineInstrBuilder.h:224</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrSpan_html"><div class="ttname"><a href="classllvm_1_1MachineInstrSpan.html">llvm::MachineInstrSpan</a></div><div class="ttdoc">MachineInstrSpan provides an interface to get an iteration range containing the instruction it was in...</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l01274">MachineBasicBlock.h:1274</a></div></div>
<div class="ttc" id="aclassllvm_1_1SparseBitVector_html_a4f223ae1e481ce22245c3c7c7736dbe9"><div class="ttname"><a href="classllvm_1_1SparseBitVector.html#a4f223ae1e481ce22245c3c7c7736dbe9">llvm::SparseBitVector::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SparseBitVector_8h_source.html#l00452">SparseBitVector.h:452</a></div></div>
<div class="ttc" id="aPass_8h_html"><div class="ttname"><a href="Pass_8h.html">Pass.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetSubtargetInfo_html_ad34f7e3cd7a9add3ab2529e267b48004"><div class="ttname"><a href="classllvm_1_1TargetSubtargetInfo.html#ad34f7e3cd7a9add3ab2529e267b48004">llvm::TargetSubtargetInfo::getInstrInfo</a></div><div class="ttdeci">virtual const TargetInstrInfo * getInstrInfo() const</div><div class="ttdef"><b>Definition:</b> <a href="TargetSubtargetInfo_8h_source.html#l00095">TargetSubtargetInfo.h:95</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveIntervals_html_aa1818a17984c50c7190464f3a04c0f3b"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html#aa1818a17984c50c7190464f3a04c0f3b">llvm::LiveIntervals::isNotInMIMap</a></div><div class="ttdeci">bool isNotInMIMap(const MachineInstr &amp;Instr) const</div><div class="ttdoc">Returns true if the specified machine instr has been removed or was never entered in the map.</div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervals_8h_source.html#l00215">LiveIntervals.h:215</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a8a82683fccdef8a5ef772ef03277aee7"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a8a82683fccdef8a5ef772ef03277aee7">llvm::MachineOperand::setIsKill</a></div><div class="ttdeci">void setIsKill(bool Val=true)</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00519">MachineOperand.h:519</a></div></div>
<div class="ttc" id="astructllvm_1_1LiveVariables_1_1VarInfo_html_a65c816771eca7465f5e3e0bb6624ad88"><div class="ttname"><a href="structllvm_1_1LiveVariables_1_1VarInfo.html#a65c816771eca7465f5e3e0bb6624ad88">llvm::LiveVariables::VarInfo::Kills</a></div><div class="ttdeci">std::vector&lt; MachineInstr * &gt; Kills</div><div class="ttdoc">Kills - List of MachineInstruction's which are the last use of this virtual register (kill it) in the...</div><div class="ttdef"><b>Definition:</b> <a href="LiveVariables_8h_source.html#l00090">LiveVariables.h:90</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01199">SmallVector.h:1199</a></div></div>
<div class="ttc" id="aStatistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveIntervals_html_ada0488ce8dde6e7677f28b8ddbafdcbd"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html#ada0488ce8dde6e7677f28b8ddbafdcbd">llvm::LiveIntervals::getInstructionFromIndex</a></div><div class="ttdeci">MachineInstr * getInstructionFromIndex(SlotIndex index) const</div><div class="ttdoc">Returns the instruction associated with the given index.</div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervals_8h_source.html#l00225">LiveIntervals.h:225</a></div></div>
<div class="ttc" id="aSupport_2ErrorHandling_8h_html"><div class="ttname"><a href="Support_2ErrorHandling_8h.html">ErrorHandling.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1X86Disassembler_html_a1e59b79e1d09149912cad9c0ef2809ad"><div class="ttname"><a href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">llvm::X86Disassembler::Reg</a></div><div class="ttdeci">Reg</div><div class="ttdoc">All possible values of the reg field in the ModR/M byte.</div><div class="ttdef"><b>Definition:</b> <a href="X86DisassemblerDecoder_8h_source.html#l00462">X86DisassemblerDecoder.h:462</a></div></div>
<div class="ttc" id="astructllvm_1_1LiveRange_1_1Segment_html"><div class="ttname"><a href="structllvm_1_1LiveRange_1_1Segment.html">llvm::LiveRange::Segment</a></div><div class="ttdoc">This represents a simple continuous liveness interval for a value.</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00162">LiveInterval.h:162</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallDenseMap_html"><div class="ttname"><a href="classllvm_1_1SmallDenseMap.html">llvm::SmallDenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00880">DenseMap.h:880</a></div></div>
<div class="ttc" id="aTwoAddressInstructionPass_8cpp_html_ad78e062f62e0d6e453941fb4ca843e4d"><div class="ttname"><a href="TwoAddressInstructionPass_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a></div><div class="ttdeci">#define DEBUG_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="TwoAddressInstructionPass_8cpp_source.html#l00065">TwoAddressInstructionPass.cpp:65</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunctionPass_html"><div class="ttname"><a href="classllvm_1_1MachineFunctionPass.html">llvm::MachineFunctionPass</a></div><div class="ttdoc">MachineFunctionPass - This class adapts the FunctionPass interface to allow convenient creation of pa...</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunctionPass_8h_source.html#l00030">MachineFunctionPass.h:30</a></div></div>
<div class="ttc" id="aMachineBasicBlock_8h_html"><div class="ttname"><a href="MachineBasicBlock_8h.html">MachineBasicBlock.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetSubtargetInfo_html_a87849514193302b75f50a8092f94b98a"><div class="ttname"><a href="classllvm_1_1TargetSubtargetInfo.html#a87849514193302b75f50a8092f94b98a">llvm::TargetSubtargetInfo::getRegisterInfo</a></div><div class="ttdeci">virtual const TargetRegisterInfo * getRegisterInfo() const</div><div class="ttdoc">getRegisterInfo - If register information is available, return it.</div><div class="ttdef"><b>Definition:</b> <a href="TargetSubtargetInfo_8h_source.html#l00127">TargetSubtargetInfo.h:127</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdeci">@ Hidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00138">CommandLine.h:138</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_aae3faf8229869864f829df28a14b79a2"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#aae3faf8229869864f829df28a14b79a2">llvm::MachineInstr::defs</a></div><div class="ttdeci">iterator_range&lt; mop_iterator &gt; defs()</div><div class="ttdoc">Returns a range over all explicit operands that are register definitions.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00678">MachineInstr.h:678</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a1eb8504bab5f794778d82db6ac829923"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a1eb8504bab5f794778d82db6ac829923">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::erase</a></div><div class="ttdeci">bool erase(const KeyT &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00302">DenseMap.h:302</a></div></div>
<div class="ttc" id="aTwoAddressInstructionPass_8cpp_html_ad442c7b9729dcf7a654433853fbbaad9"><div class="ttname"><a href="TwoAddressInstructionPass_8cpp.html#ad442c7b9729dcf7a654433853fbbaad9">regOverlapsSet</a></div><div class="ttdeci">static bool regOverlapsSet(const SmallVectorImpl&lt; Register &gt; &amp;Set, Register Reg, const TargetRegisterInfo *TRI)</div><div class="ttdef"><b>Definition:</b> <a href="TwoAddressInstructionPass_8cpp_source.html#l00515">TwoAddressInstructionPass.cpp:515</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetRegisterInfo_html"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html">llvm::TargetRegisterInfo</a></div><div class="ttdoc">TargetRegisterInfo base class - We assume that the target defines a static array of TargetRegisterDes...</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00236">TargetRegisterInfo.h:236</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveIntervals_html_aa07c0db20cf93bf2f558d00af34a6cb6"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html#aa07c0db20cf93bf2f558d00af34a6cb6">llvm::LiveIntervals::removeInterval</a></div><div class="ttdeci">void removeInterval(Register Reg)</div><div class="ttdoc">Interval removal.</div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervals_8h_source.html#l00143">LiveIntervals.h:143</a></div></div>
<div class="ttc" id="aDenseMap_8h_html"><div class="ttname"><a href="DenseMap_8h.html">DenseMap.h</a></div></div>
<div class="ttc" id="aTargetInstrInfo_8h_html"><div class="ttname"><a href="TargetInstrInfo_8h.html">TargetInstrInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_a1912d4fbc40c61a12b1f770ad54dfd74"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a1912d4fbc40c61a12b1f770ad54dfd74">llvm::MachineInstr::isCopy</a></div><div class="ttdeci">bool isCopy() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l01344">MachineInstr.h:1344</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdoc">SmallPtrSet - This class implements a set which is optimized for holding SmallSize or less elements.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00450">SmallPtrSet.h:450</a></div></div>
<div class="ttc" id="aTwoAddressInstructionPass_8cpp_html_a5c593c6a15dc72cc97e51bfb45501c22"><div class="ttname"><a href="TwoAddressInstructionPass_8cpp.html#a5c593c6a15dc72cc97e51bfb45501c22">findOnlyInterestingUse</a></div><div class="ttdeci">static MachineInstr * findOnlyInterestingUse(Register Reg, MachineBasicBlock *MBB, MachineRegisterInfo *MRI, const TargetInstrInfo *TII, bool &amp;IsCopy, Register &amp;DstReg, bool &amp;IsDstPhys, LiveIntervals *LIS)</div><div class="ttdoc">Given a register, if all its uses are in the same basic block, return the last use instruction if it'...</div><div class="ttdef"><b>Definition:</b> <a href="TwoAddressInstructionPass_8cpp_source.html#l00378">TwoAddressInstructionPass.cpp:378</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MipsISD_html_a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8"><div class="ttname"><a href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">llvm::MipsISD::Ret</a></div><div class="ttdeci">@ Ret</div><div class="ttdef"><b>Definition:</b> <a href="MipsISelLowering_8h_source.html#l00119">MipsISelLowering.h:119</a></div></div>
<div class="ttc" id="anamespacellvm_html_adcdd39e0229ebb0b23f143d644d2d1f7"><div class="ttname"><a href="namespacellvm.html#adcdd39e0229ebb0b23f143d644d2d1f7">llvm::TwoAddressInstructionPassID</a></div><div class="ttdeci">char &amp; TwoAddressInstructionPassID</div><div class="ttdoc">TwoAddressInstruction - This pass reduces two-address instructions to use two operands.</div><div class="ttdef"><b>Definition:</b> <a href="TwoAddressInstructionPass_8cpp_source.html#l00193">TwoAddressInstructionPass.cpp:193</a></div></div>
<div class="ttc" id="aMachineSink_8cpp_html_a0f36ed1bc17fc1aa97fe291c439a0698"><div class="ttname"><a href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a></div><div class="ttdeci">unsigned const TargetRegisterInfo * TRI</div><div class="ttdef"><b>Definition:</b> <a href="MachineSink_8cpp_source.html#l01628">MachineSink.cpp:1628</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveIntervals_html_aff210756ea606fd0fd721c8ccaba10c8"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html#aff210756ea606fd0fd721c8ccaba10c8">llvm::LiveIntervals::createAndComputeVirtRegInterval</a></div><div class="ttdeci">LiveInterval &amp; createAndComputeVirtRegInterval(Register Reg)</div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervals_8h_source.html#l00136">LiveIntervals.h:136</a></div></div>
<div class="ttc" id="astructllvm_1_1LiveVariables_1_1VarInfo_html_a935158aa13ae361427aa4c76d40693a0"><div class="ttname"><a href="structllvm_1_1LiveVariables_1_1VarInfo.html#a935158aa13ae361427aa4c76d40693a0">llvm::LiveVariables::VarInfo::findKill</a></div><div class="ttdeci">MachineInstr * findKill(const MachineBasicBlock *MBB) const</div><div class="ttdoc">findKill - Find a kill instruction in MBB. Return NULL if none is found.</div><div class="ttdef"><b>Definition:</b> <a href="LiveVariables_8cpp_source.html#l00060">LiveVariables.cpp:60</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunctionPass_html_a864fd57b4304ef933b3281d0ef85a88e"><div class="ttname"><a href="classllvm_1_1MachineFunctionPass.html#a864fd57b4304ef933b3281d0ef85a88e">llvm::MachineFunctionPass::getAnalysisUsage</a></div><div class="ttdeci">void getAnalysisUsage(AnalysisUsage &amp;AU) const override</div><div class="ttdoc">getAnalysisUsage - Subclasses that override getAnalysisUsage must call this.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunctionPass_8cpp_source.html#l00167">MachineFunctionPass.cpp:167</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00101">Debug.h:101</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveRange_html_a7025ffbed334ad224c58306bfc33cbb7"><div class="ttname"><a href="classllvm_1_1LiveRange.html#a7025ffbed334ad224c58306bfc33cbb7">llvm::LiveRange::createValueCopy</a></div><div class="ttdeci">VNInfo * createValueCopy(const VNInfo *orig, VNInfo::Allocator &amp;VNInfoAllocator)</div><div class="ttdoc">Create a copy of the given value.</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00349">LiveInterval.h:349</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveIntervals_html_a6f3043b29023d270fc4bc5062dff7cee"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html#a6f3043b29023d270fc4bc5062dff7cee">llvm::LiveIntervals::getInstructionIndex</a></div><div class="ttdeci">SlotIndex getInstructionIndex(const MachineInstr &amp;Instr) const</div><div class="ttdoc">Returns the base index of the given instruction.</div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervals_8h_source.html#l00220">LiveIntervals.h:220</a></div></div>
<div class="ttc" id="aMachineRegisterInfo_8h_html"><div class="ttname"><a href="MachineRegisterInfo_8h.html">MachineRegisterInfo.h</a></div></div>
<div class="ttc" id="aARMLowOverheadLoops_8cpp_html_a0a0971d62011c35b29ff4a2325d45e93"><div class="ttname"><a href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a></div><div class="ttdeci">SmallPtrSet&lt; MachineInstr *, 2 &gt; Uses</div><div class="ttdef"><b>Definition:</b> <a href="ARMLowOverheadLoops_8cpp_source.html#l00590">ARMLowOverheadLoops.cpp:590</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveIntervals_html_a29d12c5a65b3940bfac7b5aa1121ac70"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html#a29d12c5a65b3940bfac7b5aa1121ac70">llvm::LiveIntervals::handleMove</a></div><div class="ttdeci">void handleMove(MachineInstr &amp;MI, bool UpdateFlags=false)</div><div class="ttdoc">Call this method to notify LiveIntervals that instruction MI has been moved within a basic block.</div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervals_8cpp_source.html#l01505">LiveIntervals.cpp:1505</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_ad26bff839257f220557ce812b2159c72"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ad26bff839257f220557ce812b2159c72">llvm::MachineBasicBlock::erase</a></div><div class="ttdeci">instr_iterator erase(instr_iterator I)</div><div class="ttdoc">Remove an instruction from the instruction list and delete it.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l01323">MachineBasicBlock.cpp:1323</a></div></div>
<div class="ttc" id="aAliasAnalysis_8h_html"><div class="ttname"><a href="AliasAnalysis_8h.html">AliasAnalysis.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a4046212ebc647b17e811837ae4ea3afd"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a4046212ebc647b17e811837ae4ea3afd">llvm::MachineOperand::isKill</a></div><div class="ttdeci">bool isKill() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00399">MachineOperand.h:399</a></div></div>
<div class="ttc" id="aCommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Register_html_a13bd3dae94013a7bf38afc9391c8fa8f"><div class="ttname"><a href="classllvm_1_1Register.html#a13bd3dae94013a7bf38afc9391c8fa8f">llvm::Register::isPhysical</a></div><div class="ttdeci">bool isPhysical() const</div><div class="ttdoc">Return true if the specified register number is in the physical register namespace.</div><div class="ttdef"><b>Definition:</b> <a href="Register_8h_source.html#l00097">Register.h:97</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_ab4a6ca428289b667dd691a00e9f7e334"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">llvm::MachineFunction::getRegInfo</a></div><div class="ttdeci">MachineRegisterInfo &amp; getRegInfo()</div><div class="ttdoc">getRegInfo - Return information about the registers currently in use.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00682">MachineFunction.h:682</a></div></div>
<div class="ttc" id="astructllvm_1_1LiveVariables_1_1VarInfo_html_a1e808b535590177bb00545b77a324288"><div class="ttname"><a href="structllvm_1_1LiveVariables_1_1VarInfo.html#a1e808b535590177bb00545b77a324288">llvm::LiveVariables::VarInfo::removeKill</a></div><div class="ttdeci">bool removeKill(MachineInstr &amp;MI)</div><div class="ttdoc">removeKill - Delete a kill corresponding to the specified machine instruction.</div><div class="ttdef"><b>Definition:</b> <a href="LiveVariables_8h_source.html#l00095">LiveVariables.h:95</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_a30e7d619f3195fd890116da8b3ed6bab"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a30e7d619f3195fd890116da8b3ed6bab">llvm::MachineInstr::isCall</a></div><div class="ttdeci">bool isCall(QueryType Type=AnyInBundle) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00872">MachineInstr.h:872</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetInstrInfo_html"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html">llvm::TargetInstrInfo</a></div><div class="ttdoc">TargetInstrInfo - Interface to description of machine instruction set.</div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00098">TargetInstrInfo.h:98</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_a5a5871d5cc628499a6d8e56734873e01"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a5a5871d5cc628499a6d8e56734873e01">llvm::MachineRegisterInfo::use_nodbg_operands</a></div><div class="ttdeci">iterator_range&lt; use_nodbg_iterator &gt; use_nodbg_operands(Register Reg) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00548">MachineRegisterInfo.h:548</a></div></div>
<div class="ttc" id="aTwoAddressInstructionPass_8cpp_html_a82a4757e5e6fda3301aaf47e1bccacd8"><div class="ttname"><a href="TwoAddressInstructionPass_8cpp.html#a82a4757e5e6fda3301aaf47e1bccacd8">regsAreCompatible</a></div><div class="ttdeci">static bool regsAreCompatible(Register RegA, Register RegB, const TargetRegisterInfo *TRI)</div><div class="ttdoc">Return true if the two registers are equal or aliased.</div><div class="ttdef"><b>Definition:</b> <a href="TwoAddressInstructionPass_8cpp_source.html#l00436">TwoAddressInstructionPass.cpp:436</a></div></div>
<div class="ttc" id="aTarget_2TargetMachine_8h_html"><div class="ttname"><a href="Target_2TargetMachine_8h.html">TargetMachine.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1PassRegistry_html_a05a729900b76c89e808c6c3094921b2f"><div class="ttname"><a href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">llvm::PassRegistry::getPassRegistry</a></div><div class="ttdeci">static PassRegistry * getPassRegistry()</div><div class="ttdoc">getPassRegistry - Access the global registry object, which is automatically initialized at applicatio...</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8cpp_source.html#l00024">PassRegistry.cpp:24</a></div></div>
<div class="ttc" id="astructllvm_1_1LiveVariables_1_1VarInfo_html"><div class="ttname"><a href="structllvm_1_1LiveVariables_1_1VarInfo.html">llvm::LiveVariables::VarInfo</a></div><div class="ttdoc">VarInfo - This represents the regions where a virtual register is live in the program.</div><div class="ttdef"><b>Definition:</b> <a href="LiveVariables_8h_source.html#l00080">LiveVariables.h:80</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveRange_html_a9a5e7c523f12f9f164b786769de1ca47"><div class="ttname"><a href="classllvm_1_1LiveRange.html#a9a5e7c523f12f9f164b786769de1ca47">llvm::LiveRange::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00215">LiveInterval.h:215</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetRegisterInfo_html_a7a23b6fb3b79b0c2bf4bf4f0cb042840"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html#a7a23b6fb3b79b0c2bf4bf4f0cb042840">llvm::TargetRegisterInfo::getSubRegIndexLaneMask</a></div><div class="ttdeci">LaneBitmask getSubRegIndexLaneMask(unsigned SubIdx) const</div><div class="ttdoc">Return a bitmask representing the parts of a register that are covered by SubIdx.</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00380">TargetRegisterInfo.h:380</a></div></div>
<div class="ttc" id="aclassllvm_1_1AAResults_html"><div class="ttname"><a href="classllvm_1_1AAResults.html">llvm::AAResults</a></div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00294">AliasAnalysis.h:294</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveVariables_html_a515b9b6464ec4cbf5133d51f63a4e489"><div class="ttname"><a href="classllvm_1_1LiveVariables.html#a515b9b6464ec4cbf5133d51f63a4e489">llvm::LiveVariables::removeVirtualRegisterKilled</a></div><div class="ttdeci">bool removeVirtualRegisterKilled(Register Reg, MachineInstr &amp;MI)</div><div class="ttdoc">removeVirtualRegisterKilled - Remove the specified kill of the virtual register from the live variabl...</div><div class="ttdef"><b>Definition:</b> <a href="LiveVariables_8h_source.html#l00217">LiveVariables.h:217</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveIntervals_html_af68f45baf4510224cb6ecf00019a9987"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html#af68f45baf4510224cb6ecf00019a9987">llvm::LiveIntervals::getCachedRegUnit</a></div><div class="ttdeci">LiveRange * getCachedRegUnit(unsigned Unit)</div><div class="ttdoc">Return the live range for register unit Unit if it has already been computed, or nullptr if it hasn't...</div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervals_8h_source.html#l00400">LiveIntervals.h:400</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a69544ec8658eadeed98245dc37c3a541"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a69544ec8658eadeed98245dc37c3a541">llvm::MachineOperand::isUse</a></div><div class="ttdeci">bool isUse() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00379">MachineOperand.h:379</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_a3f7a45f6e10668a5f702e26bca80d18e"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">llvm::MachineInstr::getOperand</a></div><div class="ttdeci">const MachineOperand &amp; getOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00526">MachineInstr.h:526</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARM__PROC_html_aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5"><div class="ttname"><a href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">llvm::ARM_PROC::A</a></div><div class="ttdeci">@ A</div><div class="ttdef"><b>Definition:</b> <a href="MCTargetDesc_2ARMBaseInfo_8h_source.html#l00034">ARMBaseInfo.h:34</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveRange_html_a0b73c8d5ae32ca13dd02ddde86ffd0a2"><div class="ttname"><a href="classllvm_1_1LiveRange.html#a0b73c8d5ae32ca13dd02ddde86ffd0a2">llvm::LiveRange::addSegment</a></div><div class="ttdeci">iterator addSegment(Segment S)</div><div class="ttdoc">Add the specified Segment to this range, merging segments as appropriate.</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8cpp_source.html#l00533">LiveInterval.cpp:533</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveIntervals_html_a2035620c14bf7bdedfa4e2655f88d114"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html#a2035620c14bf7bdedfa4e2655f88d114">llvm::LiveIntervals::InsertMachineInstrInMaps</a></div><div class="ttdeci">SlotIndex InsertMachineInstrInMaps(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervals_8h_source.html#l00260">LiveIntervals.h:260</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveRange_html_a3fc869c7f6d53c3fbb4e572b7821dd05"><div class="ttname"><a href="classllvm_1_1LiveRange.html#a3fc869c7f6d53c3fbb4e572b7821dd05">llvm::LiveRange::const_iterator</a></div><div class="ttdeci">Segments::const_iterator const_iterator</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00213">LiveInterval.h:213</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a001d31fcea92be51d2999826b806606f"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a001d31fcea92be51d2999826b806606f">llvm::MachineOperand::setSubReg</a></div><div class="ttdeci">void setSubReg(unsigned subReg)</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00490">MachineOperand.h:490</a></div></div>
<div class="ttc" id="aSIInstrInfo_8cpp_html_a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791"><div class="ttname"><a href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a></div><div class="ttdeci">@ SI</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8cpp_source.html#l07993">SIInstrInfo.cpp:7993</a></div></div>
<div class="ttc" id="astructllvm_1_1LaneBitmask_html_a9082b6aa4021114645045d9c5628eb26"><div class="ttname"><a href="structllvm_1_1LaneBitmask.html#a9082b6aa4021114645045d9c5628eb26">llvm::LaneBitmask::getNone</a></div><div class="ttdeci">static constexpr LaneBitmask getNone()</div><div class="ttdef"><b>Definition:</b> <a href="LaneBitmask_8h_source.html#l00081">LaneBitmask.h:81</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetRegisterClass_html"><div class="ttname"><a href="classllvm_1_1TargetRegisterClass.html">llvm::TargetRegisterClass</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00045">TargetRegisterInfo.h:45</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdoc">Represent the analysis usage information of a pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00047">PassAnalysisSupport.h:47</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_acc5e979e3fa3c222553de9b741c3e12b"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#acc5e979e3fa3c222553de9b741c3e12b">llvm::MachineFunction::getProperties</a></div><div class="ttdeci">const MachineFunctionProperties &amp; getProperties() const</div><div class="ttdoc">Get the function properties.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00763">MachineFunction.h:763</a></div></div>
<div class="ttc" id="aLiveVariables_8h_html"><div class="ttname"><a href="LiveVariables_8h.html">LiveVariables.h</a></div></div>
<div class="ttc" id="anamespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00141">StackSlotColoring.cpp:141</a></div></div>
<div class="ttc" id="aTargetOpcodes_8h_html"><div class="ttname"><a href="TargetOpcodes_8h.html">TargetOpcodes.h</a></div></div>
<div class="ttc" id="aHexagonCopyToCombine_8cpp_html_a1d40004718218dbdf06b496766299101"><div class="ttname"><a href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a></div><div class="ttdeci">const HexagonInstrInfo * TII</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCopyToCombine_8cpp_source.html#l00125">HexagonCopyToCombine.cpp:125</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveVariables_html_a007ef08997c0b0391aaebc27e257062c"><div class="ttname"><a href="classllvm_1_1LiveVariables.html#a007ef08997c0b0391aaebc27e257062c">llvm::LiveVariables::replaceKillInstruction</a></div><div class="ttdeci">void replaceKillInstruction(Register Reg, MachineInstr &amp;OldMI, MachineInstr &amp;NewMI)</div><div class="ttdoc">replaceKillInstruction - Update register kill info by replacing a kill instruction with a new one.</div><div class="ttdef"><b>Definition:</b> <a href="LiveVariables_8cpp_source.html#l00752">LiveVariables.cpp:752</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCInstrDesc_html"><div class="ttname"><a href="classllvm_1_1MCInstrDesc.html">llvm::MCInstrDesc</a></div><div class="ttdoc">Describe properties that are true of each instruction in the target description file.</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00198">MCInstrDesc.h:198</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html"><div class="ttname"><a href="classllvm_1_1MachineOperand.html">llvm::MachineOperand</a></div><div class="ttdoc">MachineOperand class - Representation of each machine instruction operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00048">MachineOperand.h:48</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunctionProperties_html_aa0f2b6097642894ce79ff3e15c896206"><div class="ttname"><a href="classllvm_1_1MachineFunctionProperties.html#aa0f2b6097642894ce79ff3e15c896206">llvm::MachineFunctionProperties::set</a></div><div class="ttdeci">MachineFunctionProperties &amp; set(Property P)</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00197">MachineFunction.h:197</a></div></div>
<div class="ttc" id="aTwoAddressInstructionPass_8cpp_html_a34b5cf133e2453a532a504197fec9171"><div class="ttname"><a href="TwoAddressInstructionPass_8cpp.html#a34b5cf133e2453a532a504197fec9171">pass</a></div><div class="ttdeci">Two Address instruction pass</div><div class="ttdef"><b>Definition:</b> <a href="TwoAddressInstructionPass_8cpp_source.html#l00199">TwoAddressInstructionPass.cpp:199</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0bf75467957937ad23ad7be19f489934"><div class="ttname"><a href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">llvm::STATISTIC</a></div><div class="ttdeci">STATISTIC(NumFunctions, &quot;Total number of functions&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1SlotIndexes_html"><div class="ttname"><a href="classllvm_1_1SlotIndexes.html">llvm::SlotIndexes</a></div><div class="ttdoc">SlotIndexes pass.</div><div class="ttdef"><b>Definition:</b> <a href="SlotIndexes_8h_source.html#l00319">SlotIndexes.h:319</a></div></div>
<div class="ttc" id="aSmallPtrSet_8h_html"><div class="ttname"><a href="SmallPtrSet_8h.html">SmallPtrSet.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetRegisterInfo_html_af14d27fb00fd2058e8da7eec1489df19"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html#af14d27fb00fd2058e8da7eec1489df19">llvm::TargetRegisterInfo::getMatchingSuperRegClass</a></div><div class="ttdeci">virtual const TargetRegisterClass * getMatchingSuperRegClass(const TargetRegisterClass *A, const TargetRegisterClass *B, unsigned Idx) const</div><div class="ttdoc">Return a subclass of the specified register class A so that each register in it has a sub-register of...</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8cpp_source.html#l00303">TargetRegisterInfo.cpp:303</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveInterval_html"><div class="ttname"><a href="classllvm_1_1LiveInterval.html">llvm::LiveInterval</a></div><div class="ttdoc">LiveInterval - This class represents the liveness of a register, or stack slot.</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00686">LiveInterval.h:686</a></div></div>
<div class="ttc" id="aTwoAddressInstructionPass_8cpp_html_a7520e23c64ea3d12277d5d7905a621d4"><div class="ttname"><a href="TwoAddressInstructionPass_8cpp.html#a7520e23c64ea3d12277d5d7905a621d4">removeMapRegEntry</a></div><div class="ttdeci">static void removeMapRegEntry(const MachineOperand &amp;MO, DenseMap&lt; Register, Register &gt; &amp;RegMap, const TargetRegisterInfo *TRI)</div><div class="ttdoc">From RegMap remove entries mapped to a physical register which overlaps MO.</div><div class="ttdef"><b>Definition:</b> <a href="TwoAddressInstructionPass_8cpp_source.html#l00446">TwoAddressInstructionPass.cpp:446</a></div></div>
<div class="ttc" id="aclassllvm_1_1SlotIndex_html"><div class="ttname"><a href="classllvm_1_1SlotIndex.html">llvm::SlotIndex</a></div><div class="ttdoc">SlotIndex - An opaque wrapper around machine indexes.</div><div class="ttdef"><b>Definition:</b> <a href="SlotIndexes_8h_source.html#l00082">SlotIndexes.h:82</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_acad8fe90886f92eabced0c2f9bd0e6f5"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#acad8fe90886f92eabced0c2f9bd0e6f5">llvm::MachineOperand::getParent</a></div><div class="ttdeci">MachineInstr * getParent()</div><div class="ttdoc">getParent - Return the instruction that this operand belongs to.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00243">MachineOperand.h:243</a></div></div>
<div class="ttc" id="aTwoAddressInstructionPass_8cpp_html_a11329b543886f5ac685e48ab2d45ee6c"><div class="ttname"><a href="TwoAddressInstructionPass_8cpp.html#a11329b543886f5ac685e48ab2d45ee6c">isTwoAddrUse</a></div><div class="ttdeci">static bool isTwoAddrUse(MachineInstr &amp;MI, Register Reg, Register &amp;DstReg)</div><div class="ttdoc">Return true if the specified MI uses the specified register as a two-address use.</div><div class="ttdef"><b>Definition:</b> <a href="TwoAddressInstructionPass_8cpp_source.html#l00361">TwoAddressInstructionPass.cpp:361</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a188c0836f8c3528401f1c236fd93b977"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">llvm::CallingConv::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdoc">LLVM IR allows to use arbitrary numbers as calling convention identifiers.</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00024">CallingConv.h:24</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa82bb12b2879425012b3742487e10964"><div class="ttname"><a href="namespacellvm.html#aa82bb12b2879425012b3742487e10964">llvm::erase_value</a></div><div class="ttdeci">void erase_value(Container &amp;C, ValueType V)</div><div class="ttdoc">Wrapper function to remove a value from a container:</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l02006">STLExtras.h:2006</a></div></div>
<div class="ttc" id="aTwoAddressInstructionPass_8cpp_html_ab0d20266c19b18190c410c7eea766d71"><div class="ttname"><a href="TwoAddressInstructionPass_8cpp.html#ab0d20266c19b18190c410c7eea766d71">INITIALIZE_PASS_BEGIN</a></div><div class="ttdeci">INITIALIZE_PASS_BEGIN(TwoAddressInstructionPass, DEBUG_TYPE, &quot;Two-Address instruction pass&quot;, false, false) INITIALIZE_PASS_END(TwoAddressInstructionPass</div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html">llvm::MachineBasicBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00094">MachineBasicBlock.h:94</a></div></div>
<div class="ttc" id="aPassSupport_8h_html_a74ce8276b89067e806f67c45a6d92575"><div class="ttname"><a href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a></div><div class="ttdeci">#define INITIALIZE_PASS_END(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00059">PassSupport.h:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_aa363afffca4fc13a709673936b47fe33"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#aa363afffca4fc13a709673936b47fe33">llvm::MachineRegisterInfo::getRegClass</a></div><div class="ttdeci">const TargetRegisterClass * getRegClass(Register Reg) const</div><div class="ttdoc">Return the register class of the specified virtual register.</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00661">MachineRegisterInfo.h:661</a></div></div>
<div class="ttc" id="aCodeGen_2Passes_8h_html"><div class="ttname"><a href="CodeGen_2Passes_8h.html">Passes.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Register_html_aebafd86dde59b5a05b22e8720e808a9d"><div class="ttname"><a href="classllvm_1_1Register.html#aebafd86dde59b5a05b22e8720e808a9d">llvm::Register::isVirtual</a></div><div class="ttdeci">bool isVirtual() const</div><div class="ttdoc">Return true if the specified register number is in the virtual register namespace.</div><div class="ttdef"><b>Definition:</b> <a href="Register_8h_source.html#l00091">Register.h:91</a></div></div>
<div class="ttc" id="aclassllvm_1_1HexagonInstrInfo_html_a782e0e2e0ea2a4e55daa11d53e678b54"><div class="ttname"><a href="classllvm_1_1HexagonInstrInfo.html#a782e0e2e0ea2a4e55daa11d53e678b54">llvm::HexagonInstrInfo::getInstrLatency</a></div><div class="ttdeci">unsigned getInstrLatency(const InstrItineraryData *ItinData, const MachineInstr &amp;MI, unsigned *PredCost=nullptr) const override</div><div class="ttdoc">Compute the instruction latency of a given instruction.</div><div class="ttdef"><b>Definition:</b> <a href="HexagonInstrInfo_8cpp_source.html#l01968">HexagonInstrInfo.cpp:1968</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a325f6b611ef9ec06798d3b4eb9572093"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">llvm::MachineFunction::getSubtarget</a></div><div class="ttdeci">const TargetSubtargetInfo &amp; getSubtarget() const</div><div class="ttdoc">getSubtarget - Return the subtarget for which this machine code is being compiled.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00672">MachineFunction.h:672</a></div></div>
<div class="ttc" id="anamespacellvm_html_a60b90e9a630631cf67aaef4679ffbf62"><div class="ttname"><a href="namespacellvm.html#a60b90e9a630631cf67aaef4679ffbf62">llvm::MachineLoopInfoID</a></div><div class="ttdeci">char &amp; MachineLoopInfoID</div><div class="ttdoc">MachineLoopInfo - This pass is a loop analysis pass.</div><div class="ttdef"><b>Definition:</b> <a href="MachineLoopInfo_8cpp_source.html#l00043">MachineLoopInfo.cpp:43</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt&lt; bool &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_ae4ecf5483b94e2bb72967b80cc2008d2"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ae4ecf5483b94e2bb72967b80cc2008d2">llvm::MachineOperand::clobbersPhysReg</a></div><div class="ttdeci">static bool clobbersPhysReg(const uint32_t *RegMask, MCRegister PhysReg)</div><div class="ttdoc">clobbersPhysReg - Returns true if this RegMask clobbers PhysReg.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00646">MachineOperand.h:646</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a1255befbcd6e034394681b1bcd3529ff"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a1255befbcd6e034394681b1bcd3529ff">llvm::MachineOperand::isUndef</a></div><div class="ttdeci">bool isUndef() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00404">MachineOperand.h:404</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetRegisterInfo_html_ab5dddfd4ef6db864a18ecdbe51331b92"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html#ab5dddfd4ef6db864a18ecdbe51331b92">llvm::TargetRegisterInfo::regsOverlap</a></div><div class="ttdeci">bool regsOverlap(Register RegA, Register RegB) const</div><div class="ttdoc">Returns true if the two registers are equal or alias each other.</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00421">TargetRegisterInfo.h:421</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_adf4e7878fc0b3b8dcde545178564190d"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#adf4e7878fc0b3b8dcde545178564190d">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00110">DenseMap.h:110</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveRange_html_ace8519cea9fa2e688a052df670afe41e"><div class="ttname"><a href="classllvm_1_1LiveRange.html#ace8519cea9fa2e688a052df670afe41e">llvm::LiveRange::hasAtLeastOneValue</a></div><div class="ttdeci">bool hasAtLeastOneValue() const</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00309">LiveInterval.h:309</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a4c9594c955fec80c73ddd964b5efd554"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a4c9594c955fec80c73ddd964b5efd554">llvm::MachineOperand::isReg</a></div><div class="ttdeci">bool isReg() const</div><div class="ttdoc">isReg - Tests if this is a MO_Register operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00329">MachineOperand.h:329</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html"><div class="ttname"><a href="classllvm_1_1MachineInstr.html">llvm::MachineInstr</a></div><div class="ttdoc">Representation of each machine instruction.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00066">MachineInstr.h:66</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html">llvm::MachineInstrBuilder</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00069">MachineInstrBuilder.h:69</a></div></div>
<div class="ttc" id="aLiveIntervals_8h_html"><div class="ttname"><a href="LiveIntervals_8h.html">LiveIntervals.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveRange_html"><div class="ttname"><a href="classllvm_1_1LiveRange.html">llvm::LiveRange</a></div><div class="ttdoc">This class represents the liveness of a register, stack slot, etc.</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00157">LiveInterval.h:157</a></div></div>
<div class="ttc" id="aAArch64PromoteConstant_8cpp_html_a90f8350fecae261c25be85d38b451bff"><div class="ttname"><a href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a></div><div class="ttdeci">aarch64 promote const</div><div class="ttdef"><b>Definition:</b> <a href="AArch64PromoteConstant_8cpp_source.html#l00232">AArch64PromoteConstant.cpp:232</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveIntervals_html_a76163707e71807054d87648aa5e00dd7"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html#a76163707e71807054d87648aa5e00dd7">llvm::LiveIntervals::getMBBEndIdx</a></div><div class="ttdeci">SlotIndex getMBBEndIdx(const MachineBasicBlock *mbb) const</div><div class="ttdoc">Return the last index in the given basic block.</div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervals_8h_source.html#l00235">LiveIntervals.h:235</a></div></div>
<div class="ttc" id="aclassllvm_1_1VNInfo_html_ad989a0c1b26066308798f4d11a0e69df"><div class="ttname"><a href="classllvm_1_1VNInfo.html#ad989a0c1b26066308798f4d11a0e69df">llvm::VNInfo::id</a></div><div class="ttdeci">unsigned id</div><div class="ttdoc">The ID number of this value.</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00058">LiveInterval.h:58</a></div></div>
<div class="ttc" id="aSVEIntrinsicOpts_8cpp_html_a2bb87eb1bcbc74783a83ae945eb8fa36"><div class="ttname"><a href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a></div><div class="ttdeci">INITIALIZE_PASS_DEPENDENCY(DominatorTreeWrapperPass)</div></div>
<div class="ttc" id="aclassllvm_1_1BumpPtrAllocatorImpl_html"><div class="ttname"><a href="classllvm_1_1BumpPtrAllocatorImpl.html">llvm::BumpPtrAllocatorImpl</a></div><div class="ttdoc">Allocate memory in an ever growing pool, as if by bump-pointer.</div><div class="ttdef"><b>Definition:</b> <a href="Allocator_8h_source.html#l00063">Allocator.h:63</a></div></div>
<div class="ttc" id="aTwoAddressInstructionPass_8cpp_html_a23877408ca0a8e70800e92900708baaf"><div class="ttname"><a href="TwoAddressInstructionPass_8cpp.html#a23877408ca0a8e70800e92900708baaf">getMappedReg</a></div><div class="ttdeci">static MCRegister getMappedReg(Register Reg, DenseMap&lt; Register, Register &gt; &amp;RegMap)</div><div class="ttdoc">Return the physical register the specified virtual register might be mapped to.</div><div class="ttdef"><b>Definition:</b> <a href="TwoAddressInstructionPass_8cpp_source.html#l00422">TwoAddressInstructionPass.cpp:422</a></div></div>
<div class="ttc" id="anamespacellvm_1_1numbers_html_a92f4283d4e0e2ea1776894b3ae93640f"><div class="ttname"><a href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">llvm::numbers::e</a></div><div class="ttdeci">constexpr double e</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00031">MathExtras.h:31</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetRegisterInfo_html_aa5aad3f9195b1fd331f449ce9a709da2"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html#aa5aad3f9195b1fd331f449ce9a709da2">llvm::TargetRegisterInfo::getMatchingSuperReg</a></div><div class="ttdeci">MCRegister getMatchingSuperReg(MCRegister Reg, unsigned SubIdx, const TargetRegisterClass *RC) const</div><div class="ttdoc">Return a super-register of the specified register Reg so its sub-register of index SubIdx is Reg.</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00600">TargetRegisterInfo.h:600</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00714">DenseMap.h:714</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_aaa8b32a81bd37ce4b1654d8c3688eff6"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#aaa8b32a81bd37ce4b1654d8c3688eff6">llvm::MachineRegisterInfo::def_instructions</a></div><div class="ttdeci">iterator_range&lt; def_instr_iterator &gt; def_instructions(Register Reg) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00427">MachineRegisterInfo.h:427</a></div></div>
<div class="ttc" id="aTwoAddressInstructionPass_8cpp_html_a9f2b66889d0c0ea7b69a188d959d600e"><div class="ttname"><a href="TwoAddressInstructionPass_8cpp.html#a9f2b66889d0c0ea7b69a188d959d600e">isPlainlyKilled</a></div><div class="ttdeci">Two Address instruction static false bool isPlainlyKilled(MachineInstr *MI, Register Reg, LiveIntervals *LIS)</div><div class="ttdoc">Test if the given register value, which is used by the given instruction, is killed by the given inst...</div><div class="ttdef"><b>Definition:</b> <a href="TwoAddressInstructionPass_8cpp_source.html#l00290">TwoAddressInstructionPass.cpp:290</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00445">CommandLine.h:445</a></div></div>
<div class="ttc" id="aclassllvm_1_1SlotIndex_html_a0b73244049319d841fd11a238f35b5d1"><div class="ttname"><a href="classllvm_1_1SlotIndex.html#a0b73244049319d841fd11a238f35b5d1">llvm::SlotIndex::isSameInstr</a></div><div class="ttdeci">static bool isSameInstr(SlotIndex A, SlotIndex B)</div><div class="ttdoc">isSameInstr - Return true if A and B refer to the same instruction.</div><div class="ttdef"><b>Definition:</b> <a href="SlotIndexes_8h_source.html#l00198">SlotIndexes.h:198</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveRange_html_a69331ac1fdc66eee11c977845f2e472b"><div class="ttname"><a href="classllvm_1_1LiveRange.html#a69331ac1fdc66eee11c977845f2e472b">llvm::LiveRange::getNextValue</a></div><div class="ttdeci">VNInfo * getNextValue(SlotIndex def, VNInfo::Allocator &amp;VNInfoAllocator)</div><div class="ttdoc">getNextValue - Create a new value number and return it.</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00331">LiveInterval.h:331</a></div></div>
<div class="ttc" id="aMachineFunctionPass_8h_html"><div class="ttname"><a href="MachineFunctionPass_8h.html">MachineFunctionPass.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_a29b23ea3c75302a35dd7307f6915db3f"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a29b23ea3c75302a35dd7307f6915db3f">llvm::MachineRegisterInfo::reg_operands</a></div><div class="ttdeci">iterator_range&lt; reg_iterator &gt; reg_operands(Register Reg) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00308">MachineRegisterInfo.h:308</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a0c047f127ed4380a6f383d70bec4eb94"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::find</a></div><div class="ttdeci">iterator find(const_arg_type_t&lt; KeyT &gt; Val)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00150">DenseMap.h:150</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a3d142c9e7c066059e15232c56dec9e2e"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a3d142c9e7c066059e15232c56dec9e2e">llvm::MachineFunction::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">getName - Return the name of the corresponding LLVM function.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8cpp_source.html#l00582">MachineFunction.cpp:582</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="aclassllvm_1_1TargetMachine_html"><div class="ttname"><a href="classllvm_1_1TargetMachine.html">llvm::TargetMachine</a></div><div class="ttdoc">Primary interface to the complete machine description for the target machine.</div><div class="ttdef"><b>Definition:</b> <a href="Target_2TargetMachine_8h_source.html#l00078">TargetMachine.h:78</a></div></div>
<div class="ttc" id="aiterator__range_8h_html"><div class="ttname"><a href="iterator__range_8h.html">iterator_range.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveIntervals_html_ac7446b2819c44bf459763351b5bcc29b"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html#ac7446b2819c44bf459763351b5bcc29b">llvm::LiveIntervals::shrinkToUses</a></div><div class="ttdeci">bool shrinkToUses(LiveInterval *li, SmallVectorImpl&lt; MachineInstr * &gt; *dead=nullptr)</div><div class="ttdoc">After removing some uses of a register, shrink its live range to just the remaining uses.</div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervals_8cpp_source.html#l00449">LiveIntervals.cpp:449</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a55fdcb2a9df9a69067eed1bc17a0b927"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a55fdcb2a9df9a69067eed1bc17a0b927">llvm::MachineOperand::isRegMask</a></div><div class="ttdeci">bool isRegMask() const</div><div class="ttdoc">isRegMask - Tests if this is a MO_RegisterMask operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00353">MachineOperand.h:353</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a42d7a6aaee06630af49952b37ff1dbf7"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a42d7a6aaee06630af49952b37ff1dbf7">llvm::MachineFunction::makeDebugValueSubstitution</a></div><div class="ttdeci">void makeDebugValueSubstitution(DebugInstrOperandPair, DebugInstrOperandPair, unsigned SubReg=0)</div><div class="ttdoc">Create a substitution between one &lt;instr,operand&gt; value to a different, new value.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8cpp_source.html#l00925">MachineFunction.cpp:925</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_ad08ed580345a51c50d9477dec1e65818"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">llvm::MachineInstrBuilder::addReg</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addReg(Register RegNo, unsigned flags=0, unsigned SubReg=0) const</div><div class="ttdoc">Add a new virtual register operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00097">MachineInstrBuilder.h:97</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_ac0035d7c1c860501c877c20e6e93297b"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">llvm::MachineOperand::getReg</a></div><div class="ttdeci">Register getReg() const</div><div class="ttdoc">getReg - Returns the register number.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00369">MachineOperand.h:369</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_aa21b132afc12ed3cead7a879506f277a"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#aa21b132afc12ed3cead7a879506f277a">llvm::MachineRegisterInfo::def_end</a></div><div class="ttdeci">static def_iterator def_end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00409">MachineRegisterInfo.h:409</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CodeGenOpt_html_ad7e52174abb1cfb84238ad1ac475ee36a451bbac85aff02d070be3c17a6bef928"><div class="ttname"><a href="namespacellvm_1_1CodeGenOpt.html#ad7e52174abb1cfb84238ad1ac475ee36a451bbac85aff02d070be3c17a6bef928">llvm::CodeGenOpt::None</a></div><div class="ttdeci">@ None</div><div class="ttdoc">-O0</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_8h_source.html#l00058">CodeGen.h:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1SlotIndex_html_ae3b98982e2036f3d26806de5ed5e02d0"><div class="ttname"><a href="classllvm_1_1SlotIndex.html#ae3b98982e2036f3d26806de5ed5e02d0">llvm::SlotIndex::getRegSlot</a></div><div class="ttdeci">SlotIndex getRegSlot(bool EC=false) const</div><div class="ttdoc">Returns the register use/def slot in the current instruction for a normal or early-clobber def.</div><div class="ttdef"><b>Definition:</b> <a href="SlotIndexes_8h_source.html#l00259">SlotIndexes.h:259</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveIntervals_html_a25c117ac45bfbbcf69dc0b674db2d1ea"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html#a25c117ac45bfbbcf69dc0b674db2d1ea">llvm::LiveIntervals::getInterval</a></div><div class="ttdeci">LiveInterval &amp; getInterval(Register Reg)</div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervals_8h_source.html#l00112">LiveIntervals.h:112</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a1f475b0df44ebd7169e720fa1bf9169e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">llvm::SmallPtrSetImpl::count</a></div><div class="ttdeci">size_type count(ConstPtrType Ptr) const</div><div class="ttdoc">count - Return 1 if the specified pointer is in the set, 0 otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00383">SmallPtrSet.h:383</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html"><div class="ttname"><a href="classllvm_1_1MachineFunction.html">llvm::MachineFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00258">MachineFunction.h:258</a></div></div>
<div class="ttc" id="aTwoAddressInstructionPass_8cpp_html_a05eb50892c09d6c2d9a8c69c36b6468f"><div class="ttname"><a href="TwoAddressInstructionPass_8cpp.html#a05eb50892c09d6c2d9a8c69c36b6468f">EnableRescheduling</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; EnableRescheduling(&quot;twoaddr-reschedule&quot;, cl::desc(&quot;Coalesce copies by rescheduling (default=true)&quot;), cl::init(true), cl::Hidden)</div></div>
<div class="ttc" id="anamespacellvm_html_a5bacbbd03e9261f7b30dc174f26d680c"><div class="ttname"><a href="namespacellvm.html#a5bacbbd03e9261f7b30dc174f26d680c">llvm::skipDebugInstructionsForward</a></div><div class="ttdeci">IterT skipDebugInstructionsForward(IterT It, IterT End, bool SkipPseudoOp=true)</div><div class="ttdoc">Increment It until it points to a non-debug instruction or to End and return the resulting iterator.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l01299">MachineBasicBlock.h:1299</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImplBase_html_a16413f1a88d8baca228d0a1b4cc0bfc6"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImplBase.html#a16413f1a88d8baca228d0a1b4cc0bfc6">llvm::SmallPtrSetImplBase::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00095">SmallPtrSet.h:95</a></div></div>
<div class="ttc" id="anamespacellvm_html_a61d13d6824ec46c31260a4fd0997eda0"><div class="ttname"><a href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">llvm::any_of</a></div><div class="ttdeci">bool any_of(R &amp;&amp;range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::any_of which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01742">STLExtras.h:1742</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_af11a6ebf7ab3c388234cb6d5378439a3"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#af11a6ebf7ab3c388234cb6d5378439a3">llvm::AnalysisUsage::setPreservesCFG</a></div><div class="ttdeci">void setPreservesCFG()</div><div class="ttdoc">This function should be called by the pass, iff they do not:</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8cpp_source.html#l00265">Pass.cpp:265</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_adf0023bdc4f05a7849c35b1c859580d8"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#adf0023bdc4f05a7849c35b1c859580d8">llvm::MachineBasicBlock::splice</a></div><div class="ttdeci">void splice(iterator Where, MachineBasicBlock *Other, iterator From)</div><div class="ttdoc">Take an instruction from MBB 'Other' at the position From, and insert it into this MBB right before '...</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l01037">MachineBasicBlock.h:1037</a></div></div>
<div class="ttc" id="astructllvm_1_1LaneBitmask_html_a60907035da962ba7bea74ffb9af977bd"><div class="ttname"><a href="structllvm_1_1LaneBitmask.html#a60907035da962ba7bea74ffb9af977bd">llvm::LaneBitmask::none</a></div><div class="ttdeci">constexpr bool none() const</div><div class="ttdef"><b>Definition:</b> <a href="LaneBitmask_8h_source.html#l00052">LaneBitmask.h:52</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_a40970e5d42646fb2d9aa5f7a2c879516"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#a40970e5d42646fb2d9aa5f7a2c879516">llvm::AnalysisUsage::addPreservedID</a></div><div class="ttdeci">AnalysisUsage &amp; addPreservedID(const void *ID)</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00088">PassAnalysisSupport.h:88</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_ad5f691fdc1a09aaf6df5fef958b35a3d"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#ad5f691fdc1a09aaf6df5fef958b35a3d">MBBI</a></div><div class="ttdeci">MachineBasicBlock MachineBasicBlock::iterator MBBI</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00075">AArch64SLSHardening.cpp:75</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_ad8b6d2396f18814d213b976abe07f809"><div class="ttname"><a href="lib_2Target_2README_8txt.html#ad8b6d2396f18814d213b976abe07f809">Shrink</a></div><div class="ttdeci">This would be a win on but not x86 or ppc64 Shrink</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00041">README.txt:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_a884f90190bca4bd354f2d5c91c264028"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">llvm::AnalysisUsage::addPreserved</a></div><div class="ttdeci">AnalysisUsage &amp; addPreserved()</div><div class="ttdoc">Add the specified Pass class to the set of analyses preserved by this pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00098">PassAnalysisSupport.h:98</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_ab979122f21b7fa46d3d2d9b21983068b"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ab979122f21b7fa46d3d2d9b21983068b">llvm::MachineOperand::setIsUndef</a></div><div class="ttdeci">void setIsUndef(bool Val=true)</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00530">MachineOperand.h:530</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a3b54c55bd8a7121b30fc06cc567afcf0"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a3b54c55bd8a7121b30fc06cc567afcf0">instruction</a></div><div class="ttdeci">Since we know that Vector is byte aligned and we know the element offset of we should change the load into a lve *x instruction</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00037">README_ALTIVEC.txt:37</a></div></div>
<div class="ttc" id="aTwoAddressInstructionPass_8cpp_html_a68a25b648e0046ab93f441697d089172"><div class="ttname"><a href="TwoAddressInstructionPass_8cpp.html#a68a25b648e0046ab93f441697d089172">getSingleDef</a></div><div class="ttdeci">static MachineInstr * getSingleDef(Register Reg, MachineBasicBlock *BB, const MachineRegisterInfo *MRI)</div><div class="ttdoc">Return the MachineInstr* if it is the single def of the Reg in current BB.</div><div class="ttdef"><b>Definition:</b> <a href="TwoAddressInstructionPass_8cpp_source.html#l00204">TwoAddressInstructionPass.cpp:204</a></div></div>
<div class="ttc" id="aTargetSubtargetInfo_8h_html"><div class="ttname"><a href="TargetSubtargetInfo_8h.html">TargetSubtargetInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_a0e85c20fe804527f12c86db38ec947ea"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a0e85c20fe804527f12c86db38ec947ea">llvm::MachineInstr::isTerminator</a></div><div class="ttdeci">bool isTerminator(QueryType Type=AnyInBundle) const</div><div class="ttdoc">Returns true if this instruction part of the terminator for a basic block.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00896">MachineInstr.h:896</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_a1b45f45820a60c09244a87eb59824aec"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a></div><div class="ttdeci">add sub stmia L5 ldr r0 bl L_printf $stub Instead of a and a wouldn t it be better to do three moves *Return an aggregate type is even return S</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00210">README.txt:210</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunctionProperties_html_ad85237c6c667e4713efe8921e9c32ac1a2e0aa187d296e1330d12a948094f601b"><div class="ttname"><a href="classllvm_1_1MachineFunctionProperties.html#ad85237c6c667e4713efe8921e9c32ac1a2e0aa187d296e1330d12a948094f601b">llvm::MachineFunctionProperties::Property::TiedOpsRewritten</a></div><div class="ttdeci">@ TiedOpsRewritten</div></div>
<div class="ttc" id="anamespacellvm_1_1ifs_html_adfe04e1a9cc096fb571e8372debaa67ea00d0b4f2d7dcdaaef835b97cf5d1e0df"><div class="ttname"><a href="namespacellvm_1_1ifs.html#adfe04e1a9cc096fb571e8372debaa67ea00d0b4f2d7dcdaaef835b97cf5d1e0df">llvm::ifs::IFSSymbolType::Func</a></div><div class="ttdeci">@ Func</div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a99f811d53704275b4158c62a2dd138d9"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const std::pair&lt; KeyT, ValueT &gt; &amp;KV)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00207">DenseMap.h:207</a></div></div>
<div class="ttc" id="aAArch64AdvSIMDScalarPass_8cpp_html_aacd2ab195054a3e6a74bfbb9d5d571c8"><div class="ttname"><a href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a></div><div class="ttdeci">unsigned const MachineRegisterInfo * MRI</div><div class="ttdef"><b>Definition:</b> <a href="AArch64AdvSIMDScalarPass_8cpp_source.html#l00105">AArch64AdvSIMDScalarPass.cpp:105</a></div></div>
<div class="ttc" id="aclassllvm_1_1Register_html"><div class="ttname"><a href="classllvm_1_1Register.html">llvm::Register</a></div><div class="ttdoc">Wrapper class representing virtual and physical registers.</div><div class="ttdef"><b>Definition:</b> <a href="Register_8h_source.html#l00019">Register.h:19</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a028a8c5113d40d8c3f4427053bf36738"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a028a8c5113d40d8c3f4427053bf36738">llvm::MachineOperand::getSubReg</a></div><div class="ttdeci">unsigned getSubReg() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00374">MachineOperand.h:374</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_af16c39ee36e4633f821b6820f8bd52ef"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#af16c39ee36e4633f821b6820f8bd52ef">llvm::MachineRegisterInfo::replaceRegWith</a></div><div class="ttdeci">void replaceRegWith(Register FromReg, Register ToReg)</div><div class="ttdoc">replaceRegWith - Replace all instances of FromReg with ToReg in the machine function.</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00380">MachineRegisterInfo.cpp:380</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_a5958512eae2979bd2eb383977996a600"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a></div><div class="ttdeci">MachineBasicBlock &amp; MBB</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00074">AArch64SLSHardening.cpp:74</a></div></div>
<div class="ttc" id="anamespacellvm_html_a70671a37747699d83fa660b2e9b18c0a"><div class="ttname"><a href="namespacellvm.html#a70671a37747699d83fa660b2e9b18c0a">llvm::initializeTwoAddressInstructionPassPass</a></div><div class="ttdeci">void initializeTwoAddressInstructionPassPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="aTwoAddressInstructionPass_8cpp_html_a6616256570974bd60b93306d9cbfe21a"><div class="ttname"><a href="TwoAddressInstructionPass_8cpp.html#a6616256570974bd60b93306d9cbfe21a">isCopyToReg</a></div><div class="ttdeci">static bool isCopyToReg(MachineInstr &amp;MI, const TargetInstrInfo *TII, Register &amp;SrcReg, Register &amp;DstReg, bool &amp;IsSrcPhys, bool &amp;IsDstPhys)</div><div class="ttdoc">Return true if the specified MI is a copy instruction or an extract_subreg instruction.</div><div class="ttdef"><b>Definition:</b> <a href="TwoAddressInstructionPass_8cpp_source.html#l00268">TwoAddressInstructionPass.cpp:268</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_a3a76669632041022e6976766a22bd2b0"><div class="ttname"><a href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a></div><div class="ttdeci">return j(j&lt;&lt; 16)</div></div>
<div class="ttc" id="aclassllvm_1_1LiveRange_html_a143c1fcb6066cb301f828ec4c18d79f4"><div class="ttname"><a href="classllvm_1_1LiveRange.html#a143c1fcb6066cb301f828ec4c18d79f4">llvm::LiveRange::iterator</a></div><div class="ttdeci">Segments::iterator iterator</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00212">LiveInterval.h:212</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_a1f3c8255141a4f5b7ed15fcf60118eb1"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a1f3c8255141a4f5b7ed15fcf60118eb1">llvm::MachineInstr::isCopyLike</a></div><div class="ttdeci">bool isCopyLike() const</div><div class="ttdoc">Return true if the instruction behaves like a copy.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l01358">MachineInstr.h:1358</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_ae68d159179d37dc7969439d842e2644f"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ae68d159179d37dc7969439d842e2644f">llvm::MachineFunction::getTarget</a></div><div class="ttdeci">const LLVMTargetMachine &amp; getTarget() const</div><div class="ttdoc">getTarget - Return the target machine this machine code is compiled with</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00668">MachineFunction.h:668</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a65520b9c67759099e313d0f4e7b5ff9e"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00084">DenseMap.h:84</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a3435a2381e60e842e915f85c931b7dde"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a3435a2381e60e842e915f85c931b7dde">llvm::MachineBasicBlock::insert</a></div><div class="ttdeci">instr_iterator insert(instr_iterator I, MachineInstr *M)</div><div class="ttdoc">Insert MI into the instruction list before I, possibly inside a bundle.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l01336">MachineBasicBlock.cpp:1336</a></div></div>
<div class="ttc" id="aclassllvm_1_1SlotIndex_html_ac832da130f4d71a4533a69d98315fb19"><div class="ttname"><a href="classllvm_1_1SlotIndex.html#ac832da130f4d71a4533a69d98315fb19">llvm::SlotIndex::getPrevSlot</a></div><div class="ttdeci">SlotIndex getPrevSlot() const</div><div class="ttdoc">Returns the previous slot in the index list.</div><div class="ttdef"><b>Definition:</b> <a href="SlotIndexes_8h_source.html#l00294">SlotIndexes.h:294</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_a8c161f5f015730ac6853c802c3693a41"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a8c161f5f015730ac6853c802c3693a41">llvm::MachineInstr::hasUnmodeledSideEffects</a></div><div class="ttdeci">bool hasUnmodeledSideEffects() const</div><div class="ttdoc">Return true if this instruction has side effects that are not modeled by mayLoad / mayStore,...</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8cpp_source.html#l01458">MachineInstr.cpp:1458</a></div></div>
<div class="ttc" id="aTwoAddressInstructionPass_8cpp_html_a690b8efc3175d0d1f5f2588e2bfdb378"><div class="ttname"><a href="TwoAddressInstructionPass_8cpp.html#a690b8efc3175d0d1f5f2588e2bfdb378">MaxDataFlowEdge</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; MaxDataFlowEdge(&quot;dataflow-edge-limit&quot;, cl::Hidden, cl::init(3), cl::desc(&quot;Maximum number of dataflow edges to traverse when evaluating &quot; &quot;the benefit of commuting operands&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1LiveIntervals_html"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html">llvm::LiveIntervals</a></div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervals_8h_source.html#l00053">LiveIntervals.h:53</a></div></div>
<div class="ttc" id="aclassllvm_1_1VNInfo_html"><div class="ttname"><a href="classllvm_1_1VNInfo.html">llvm::VNInfo</a></div><div class="ttdoc">VNInfo - Value Number Information.</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00053">LiveInterval.h:53</a></div></div>
<div class="ttc" id="aCodeGen_8h_html"><div class="ttname"><a href="CodeGen_8h.html">CodeGen.h</a></div></div>
<div class="ttc" id="aLiveInterval_8h_html"><div class="ttname"><a href="LiveInterval_8h.html">LiveInterval.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCRegUnitIterator_html"><div class="ttname"><a href="classllvm_1_1MCRegUnitIterator.html">llvm::MCRegUnitIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="MCRegisterInfo_8h_source.html#l00680">MCRegisterInfo.h:680</a></div></div>
<div class="ttc" id="aELFYAML_8cpp_html_a941c34da9850676ce3380813c636cff2"><div class="ttname"><a href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a></div><div class="ttdeci">std::optional&lt; std::vector&lt; StOtherPiece &gt; &gt; Other</div><div class="ttdef"><b>Definition:</b> <a href="ELFYAML_8cpp_source.html#l01260">ELFYAML.cpp:1260</a></div></div>
<div class="ttc" id="aTwoAddressInstructionPass_8cpp_html_adc661c157001f2a5aca972c2d0e9f181"><div class="ttname"><a href="TwoAddressInstructionPass_8cpp.html#adc661c157001f2a5aca972c2d0e9f181">isKilled</a></div><div class="ttdeci">static bool isKilled(MachineInstr &amp;MI, Register Reg, const MachineRegisterInfo *MRI, const TargetInstrInfo *TII, LiveIntervals *LIS, bool allowFalsePositives)</div><div class="ttdoc">Test if the given register value, which is used by the given instruction, is killed by the given inst...</div><div class="ttdef"><b>Definition:</b> <a href="TwoAddressInstructionPass_8cpp_source.html#l00331">TwoAddressInstructionPass.cpp:331</a></div></div>
<div class="ttc" id="anamespacellvm_html_a17e04afcf0c5efeb0eb6a9a45287b5e4"><div class="ttname"><a href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">llvm::BuildMI</a></div><div class="ttdeci">MachineInstrBuilder BuildMI(MachineFunction &amp;MF, const MIMetadata &amp;MIMD, const MCInstrDesc &amp;MCID)</div><div class="ttdoc">Builder interface. Specify how to create the initial instruction itself.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00357">MachineInstrBuilder.h:357</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_a600a2d410c09a9486e828ea34e5a9566"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a600a2d410c09a9486e828ea34e5a9566">llvm::MachineRegisterInfo::hasOneUse</a></div><div class="ttdeci">bool hasOneUse(Register RegNo) const</div><div class="ttdoc">hasOneUse - Return true if there is exactly one instruction using the specified register.</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00532">MachineRegisterInfo.h:532</a></div></div>
<div class="ttc" id="aSmallVector_8h_html"><div class="ttname"><a href="SmallVector_8h.html">SmallVector.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_ab2d91e7bec944efcbc39d8e30644f111"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">llvm::MachineBasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00309">MachineBasicBlock.h:309</a></div></div>
<div class="ttc" id="aMachineInstrBuilder_8h_html"><div class="ttname"><a href="MachineInstrBuilder_8h.html">MachineInstrBuilder.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetSubtargetInfo_html_a0bdd73a1c5968b0ee2e76e27faa31442"><div class="ttname"><a href="classllvm_1_1TargetSubtargetInfo.html#a0bdd73a1c5968b0ee2e76e27faa31442">llvm::TargetSubtargetInfo::getInstrItineraryData</a></div><div class="ttdeci">virtual const InstrItineraryData * getInstrItineraryData() const</div><div class="ttdoc">getInstrItineraryData - Returns instruction itinerary data for the target or specific subtarget.</div><div class="ttdef"><b>Definition:</b> <a href="TargetSubtargetInfo_8h_source.html#l00135">TargetSubtargetInfo.h:135</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a682ba82f42f7903d0000ffbb13ea3b57"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a682ba82f42f7903d0000ffbb13ea3b57">llvm::MachineOperand::setReg</a></div><div class="ttdeci">void setReg(Register Reg)</div><div class="ttdoc">Change the register this operand corresponds to.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8cpp_source.html#l00061">MachineOperand.cpp:61</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveIntervals_html_a73f605751be73f0a910a586bb1b5d869"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html#a73f605751be73f0a910a586bb1b5d869">llvm::LiveIntervals::RemoveMachineInstrFromMaps</a></div><div class="ttdeci">void RemoveMachineInstrFromMaps(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervals_8h_source.html#l00270">LiveIntervals.h:270</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_a035f850aa2492716906dbb0610e98c90"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a035f850aa2492716906dbb0610e98c90">llvm::MachineRegisterInfo::leaveSSA</a></div><div class="ttdeci">void leaveSSA()</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00203">MachineRegisterInfo.h:203</a></div></div>
<div class="ttc" id="aAArch64ExpandPseudoInsts_8cpp_html_ad3ece0ac2421637044624c9b01c42466"><div class="ttname"><a href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a></div><div class="ttdeci">MachineInstrBuilder MachineInstrBuilder &amp; DefMI</div><div class="ttdef"><b>Definition:</b> <a href="AArch64ExpandPseudoInsts_8cpp_source.html#l00108">AArch64ExpandPseudoInsts.cpp:108</a></div></div>
<div class="ttc" id="aclassllvm_1_1AAResultsWrapperPass_html"><div class="ttname"><a href="classllvm_1_1AAResultsWrapperPass.html">llvm::AAResultsWrapperPass</a></div><div class="ttdoc">A wrapper pass to provide the legacy pass manager access to a suitably prepared AAResults object.</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00933">AliasAnalysis.h:933</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5a36a0d02a1629e4c1c8c6c587d01e5b"><div class="ttname"><a href="namespacellvm.html#a5a36a0d02a1629e4c1c8c6c587d01e5b">llvm::MachineDominatorsID</a></div><div class="ttdeci">char &amp; MachineDominatorsID</div><div class="ttdoc">MachineDominators - This pass is a machine dominators analysis pass.</div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a0c8ffe664a36e30d49c84d0aded2fe08"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">llvm::SmallVectorImpl::pop_back_val</a></div><div class="ttdeci">T pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00677">SmallVector.h:677</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveRange_html_a43f03898b29d823b707f6b4883c929a4"><div class="ttname"><a href="classllvm_1_1LiveRange.html#a43f03898b29d823b707f6b4883c929a4">llvm::LiveRange::getSegmentContaining</a></div><div class="ttdeci">const Segment * getSegmentContaining(SlotIndex Idx) const</div><div class="ttdoc">Return the segment that contains the specified index, or null if there is none.</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00408">LiveInterval.h:408</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveInterval_html_a1c198291d6ee66150b76633cda8a1749"><div class="ttname"><a href="classllvm_1_1LiveInterval.html#a1c198291d6ee66150b76633cda8a1749">llvm::LiveInterval::hasSubRanges</a></div><div class="ttdeci">bool hasSubRanges() const</div><div class="ttdoc">Returns true if subregister liveness information is available.</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00803">LiveInterval.h:803</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveVariables_html_af73ca972d296b25a689a90fb5a0713f3"><div class="ttname"><a href="classllvm_1_1LiveVariables.html#af73ca972d296b25a689a90fb5a0713f3">llvm::LiveVariables::getVarInfo</a></div><div class="ttdeci">VarInfo &amp; getVarInfo(Register Reg)</div><div class="ttdoc">getVarInfo - Return the VarInfo structure for the specified VIRTUAL register.</div><div class="ttdef"><b>Definition:</b> <a href="LiveVariables_8cpp_source.html#l00084">LiveVariables.cpp:84</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetRegisterInfo_html_a91c8fd7879e62b4a76d8c23ecef7ef23"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html#a91c8fd7879e62b4a76d8c23ecef7ef23">llvm::TargetRegisterInfo::getAllocatableClass</a></div><div class="ttdeci">const TargetRegisterClass * getAllocatableClass(const TargetRegisterClass *RC) const</div><div class="ttdoc">Return the maximal subclass of the given register class that is allocatable or NULL.</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8cpp_source.html#l00195">TargetRegisterInfo.cpp:195</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveRange_html_aa1555194b9f176612b04fbd38f49b40d"><div class="ttname"><a href="classllvm_1_1LiveRange.html#aa1555194b9f176612b04fbd38f49b40d">llvm::LiveRange::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00300">LiveInterval.h:300</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_ad85285685fc46db3f2b3b0bf90bf9184"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#ad85285685fc46db3f2b3b0bf90bf9184">llvm::MachineRegisterInfo::constrainRegClass</a></div><div class="ttdeci">const TargetRegisterClass * constrainRegClass(Register Reg, const TargetRegisterClass *RC, unsigned MinNumRegs=0)</div><div class="ttdoc">constrainRegClass - Constrain the register class of the specified virtual register to be a common sub...</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00083">MachineRegisterInfo.cpp:83</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_1_1defusechain__iterator_html"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo_1_1defusechain__iterator.html">llvm::MachineRegisterInfo::defusechain_iterator</a></div><div class="ttdoc">reg_begin/reg_end - Provide iteration support to walk over all definitions and uses of a register wit...</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00288">MachineRegisterInfo.h:288</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl&lt; Register &gt;</a></div></div>
<div class="ttc" id="aMachineOperand_8h_html"><div class="ttname"><a href="MachineOperand_8h.html">MachineOperand.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveIntervals_html_a0d7e0d23a0453390a4c1e9a61afccdca"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html#a0d7e0d23a0453390a4c1e9a61afccdca">llvm::LiveIntervals::repairIntervalsInRange</a></div><div class="ttdeci">void repairIntervalsInRange(MachineBasicBlock *MBB, MachineBasicBlock::iterator Begin, MachineBasicBlock::iterator End, ArrayRef&lt; Register &gt; OrigRegs)</div><div class="ttdoc">Update live intervals for instructions in a range of iterators.</div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervals_8cpp_source.html#l01647">LiveIntervals.cpp:1647</a></div></div>
<div class="ttc" id="aPassBuilderBindings_8cpp_html_ab76052bb166c65901edb603a3e1f03ab"><div class="ttname"><a href="PassBuilderBindings_8cpp.html#ab76052bb166c65901edb603a3e1f03ab">TM</a></div><div class="ttdeci">const char LLVMTargetMachineRef TM</div><div class="ttdef"><b>Definition:</b> <a href="PassBuilderBindings_8cpp_source.html#l00047">PassBuilderBindings.cpp:47</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_a316c141eb121e46a1de4c395af75eb60"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#a316c141eb121e46a1de4c395af75eb60">llvm::AnalysisUsage::addUsedIfAvailable</a></div><div class="ttdeci">AnalysisUsage &amp; addUsedIfAvailable()</div><div class="ttdoc">Add the specified Pass class to the set of analyses used by this pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00117">PassAnalysisSupport.h:117</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CodeGenOpt_html_ad7e52174abb1cfb84238ad1ac475ee36"><div class="ttname"><a href="namespacellvm_1_1CodeGenOpt.html#ad7e52174abb1cfb84238ad1ac475ee36">llvm::CodeGenOpt::Level</a></div><div class="ttdeci">Level</div><div class="ttdoc">Code generation optimization level.</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_8h_source.html#l00057">CodeGen.h:57</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveVariables_html"><div class="ttname"><a href="classllvm_1_1LiveVariables.html">llvm::LiveVariables</a></div><div class="ttdef"><b>Definition:</b> <a href="LiveVariables_8h_source.html#l00047">LiveVariables.h:47</a></div></div>
<div class="ttc" id="aBlockVerifier_8cpp_html_ae45c7d73c0ff5d177b59153ffae77f84"><div class="ttname"><a href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a></div><div class="ttdeci">BlockVerifier::State From</div><div class="ttdef"><b>Definition:</b> <a href="BlockVerifier_8cpp_source.html#l00055">BlockVerifier.cpp:55</a></div></div>
<div class="ttc" id="aSlotIndexes_8h_html"><div class="ttname"><a href="SlotIndexes_8h.html">SlotIndexes.h</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00411">CommandLine.h:411</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveVariables_html_a3ce32310fd2a5d6bf58316fd2a7ad1bf"><div class="ttname"><a href="classllvm_1_1LiveVariables.html#a3ce32310fd2a5d6bf58316fd2a7ad1bf">llvm::LiveVariables::removeVirtualRegisterDead</a></div><div class="ttdeci">bool removeVirtualRegisterDead(Register Reg, MachineInstr &amp;MI)</div><div class="ttdoc">removeVirtualRegisterDead - Remove the specified kill of the virtual register from the live variable ...</div><div class="ttdef"><b>Definition:</b> <a href="LiveVariables_8h_source.html#l00252">LiveVariables.h:252</a></div></div>
<div class="ttc" id="araw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetInstrInfo_html_ae73e2be2b66dc9e4f2f90d56076d7ea9"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#ae73e2be2b66dc9e4f2f90d56076d7ea9">llvm::TargetInstrInfo::CommuteAnyOperandIndex</a></div><div class="ttdeci">static const unsigned CommuteAnyOperandIndex</div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00441">TargetInstrInfo.h:441</a></div></div>
<div class="ttc" id="aMachineFunction_8h_html"><div class="ttname"><a href="MachineFunction_8h.html">MachineFunction.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_af085ea923a328b9fa6a1975f1a4ff987"><div class="ttname"><a href="namespacellvm.html#af085ea923a328b9fa6a1975f1a4ff987">llvm::printReg</a></div><div class="ttdeci">Printable printReg(Register Reg, const TargetRegisterInfo *TRI=nullptr, unsigned SubIdx=0, const MachineRegisterInfo *MRI=nullptr)</div><div class="ttdoc">Prints virtual and physical registers with or without a TRI instance.</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8cpp_source.html#l00111">TargetRegisterInfo.cpp:111</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBundleIterator_html"><div class="ttname"><a href="classllvm_1_1MachineInstrBundleIterator.html">llvm::MachineInstrBundleIterator&lt; MachineInstr &gt;</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RegState_html_aef4cc0c855dc833e2a9d58a50703320da72c17e2ff2d5af62a30e56ac152aa8d5"><div class="ttname"><a href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da72c17e2ff2d5af62a30e56ac152aa8d5">llvm::RegState::Define</a></div><div class="ttdeci">@ Define</div><div class="ttdoc">Register definition.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00044">MachineInstrBuilder.h:44</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_aef0e7e42e45e15f86b2a122b56ab829c"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#aef0e7e42e45e15f86b2a122b56ab829c">llvm::MachineInstr::operands</a></div><div class="ttdeci">iterator_range&lt; mop_iterator &gt; operands()</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00641">MachineInstr.h:641</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a0c893675dfd5d1b1e4aea1e8211217c7"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a0c893675dfd5d1b1e4aea1e8211217c7">llvm::MachineOperand::getOperandNo</a></div><div class="ttdeci">unsigned getOperandNo() const</div><div class="ttdoc">Returns the index of this operand in the instruction that it belongs to.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8cpp_source.html#l00056">MachineOperand.cpp:56</a></div></div>
<div class="ttc" id="aTargetRegisterInfo_8h_html"><div class="ttname"><a href="TargetRegisterInfo_8h.html">TargetRegisterInfo.h</a></div></div>
<div class="ttc" id="aDebug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstrItineraryData_html"><div class="ttname"><a href="classllvm_1_1InstrItineraryData.html">llvm::InstrItineraryData</a></div><div class="ttdoc">Itinerary data supplied by a subtarget to be used by a target.</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrItineraries_8h_source.html#l00109">MCInstrItineraries.h:109</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_acbc921830578e2741be6549db716c0ce"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">llvm::MachineBasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00311">MachineBasicBlock.h:311</a></div></div>
<div class="ttc" id="astructllvm_1_1LaneBitmask_html_a3714a639930eab71d7202da05ad82990"><div class="ttname"><a href="structllvm_1_1LaneBitmask.html#a3714a639930eab71d7202da05ad82990">llvm::LaneBitmask::getAll</a></div><div class="ttdeci">static constexpr LaneBitmask getAll()</div><div class="ttdef"><b>Definition:</b> <a href="LaneBitmask_8h_source.html#l00082">LaneBitmask.h:82</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveIntervals_html_a11b78aceef1db7dddc7ca575c395ddaf"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html#a11b78aceef1db7dddc7ca575c395ddaf">llvm::LiveIntervals::getVNInfoAllocator</a></div><div class="ttdeci">VNInfo::Allocator &amp; getVNInfoAllocator()</div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervals_8h_source.html#l00278">LiveIntervals.h:278</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_a9839b7e1d8811ea9d41f901ab6a0f23b"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a9839b7e1d8811ea9d41f901ab6a0f23b">llvm::MachineInstr::getNumExplicitDefs</a></div><div class="ttdeci">unsigned getNumExplicitDefs() const</div><div class="ttdoc">Returns the number of non-implicit definitions.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8cpp_source.html#l00753">MachineInstr.cpp:753</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveRange_html_a757fd6afba0f531db70e78e057d147c6"><div class="ttname"><a href="classllvm_1_1LiveRange.html#a757fd6afba0f531db70e78e057d147c6">llvm::LiveRange::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00216">LiveInterval.h:216</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCRegister_html"><div class="ttname"><a href="classllvm_1_1MCRegister.html">llvm::MCRegister</a></div><div class="ttdoc">Wrapper class representing physical registers. Should be passed by value.</div><div class="ttdef"><b>Definition:</b> <a href="MCRegister_8h_source.html#l00024">MCRegister.h:24</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a6bc6fb89fe2e91c25559a8631f56e27e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">llvm::SmallPtrSetImpl::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(PtrType Ptr)</div><div class="ttdoc">Inserts Ptr if and only if there is no element in the container equal to Ptr.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00365">SmallPtrSet.h:365</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveInterval_html_a97dfb31f0f752a171bfe5fe49244c9be"><div class="ttname"><a href="classllvm_1_1LiveInterval.html#a97dfb31f0f752a171bfe5fe49244c9be">llvm::LiveInterval::subranges</a></div><div class="ttdeci">iterator_range&lt; subrange_iterator &gt; subranges()</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00775">LiveInterval.h:775</a></div></div>
<div class="ttc" id="astructllvm_1_1LiveVariables_1_1VarInfo_html_a76321b20db4feab750d85c2329cfcbc6"><div class="ttname"><a href="structllvm_1_1LiveVariables_1_1VarInfo.html#a76321b20db4feab750d85c2329cfcbc6">llvm::LiveVariables::VarInfo::AliveBlocks</a></div><div class="ttdeci">SparseBitVector AliveBlocks</div><div class="ttdoc">AliveBlocks - Set of blocks in which this value is alive completely through.</div><div class="ttdef"><b>Definition:</b> <a href="LiveVariables_8h_source.html#l00085">LiveVariables.h:85</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:02:46 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

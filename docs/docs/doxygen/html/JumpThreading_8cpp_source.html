<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Transforms/Scalar/JumpThreading.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a72932e0778af28115095468f6286ff8.html">Transforms</a></li><li class="navelem"><a class="el" href="dir_e6e1f1f37d351595fa984b942927b205.html">Scalar</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">JumpThreading.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="JumpThreading_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- JumpThreading.cpp - Thread control through conditional blocks ------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This file implements the Jump Threading pass.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160; </div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="JumpThreading_8h.html">llvm/Transforms/Scalar/JumpThreading.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseMap_8h.html">llvm/ADT/DenseMap.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseSet_8h.html">llvm/ADT/DenseSet.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MapVector_8h.html">llvm/ADT/MapVector.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="STLExtras_8h.html">llvm/ADT/STLExtras.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallPtrSet_8h.html">llvm/ADT/SmallPtrSet.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallVector_8h.html">llvm/ADT/SmallVector.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AliasAnalysis_8h.html">llvm/Analysis/AliasAnalysis.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BlockFrequencyInfo_8h.html">llvm/Analysis/BlockFrequencyInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BranchProbabilityInfo_8h.html">llvm/Analysis/BranchProbabilityInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Analysis_2CFG_8h.html">llvm/Analysis/CFG.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ConstantFolding_8h.html">llvm/Analysis/ConstantFolding.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="GlobalsModRef_8h.html">llvm/Analysis/GlobalsModRef.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Analysis_2GuardUtils_8h.html">llvm/Analysis/GuardUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstructionSimplify_8h.html">llvm/Analysis/InstructionSimplify.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LazyValueInfo_8h.html">llvm/Analysis/LazyValueInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Loads_8h.html">llvm/Analysis/Loads.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopInfo_8h.html">llvm/Analysis/LoopInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MemoryLocation_8h.html">llvm/Analysis/MemoryLocation.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PostDominators_8h.html">llvm/Analysis/PostDominators.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetLibraryInfo_8h.html">llvm/Analysis/TargetLibraryInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetTransformInfo_8h.html">llvm/Analysis/TargetTransformInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueTracking_8h.html">llvm/Analysis/ValueTracking.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlock_8h.html">llvm/IR/BasicBlock.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2CFG_8h.html">llvm/IR/CFG.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constant_8h.html">llvm/IR/Constant.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ConstantRange_8h.html">llvm/IR/ConstantRange.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constants_8h.html">llvm/IR/Constants.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DataLayout_8h.html">llvm/IR/DataLayout.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2DebugInfo_8h.html">llvm/IR/DebugInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Dominators_8h.html">llvm/IR/Dominators.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Function_8h.html">llvm/IR/Function.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstrTypes_8h.html">llvm/IR/InstrTypes.h</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2Instruction_8h.html">llvm/IR/Instruction.h</a>&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Instructions_8h.html">llvm/IR/Instructions.h</a>&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IntrinsicInst_8h.html">llvm/IR/IntrinsicInst.h</a>&quot;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Intrinsics_8h.html">llvm/IR/Intrinsics.h</a>&quot;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LLVMContext_8h.html">llvm/IR/LLVMContext.h</a>&quot;</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MDBuilder_8h.html">llvm/IR/MDBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Metadata_8h.html">llvm/IR/Metadata.h</a>&quot;</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Module_8h.html">llvm/IR/Module.h</a>&quot;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PassManager_8h.html">llvm/IR/PassManager.h</a>&quot;</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PatternMatch_8h.html">llvm/IR/PatternMatch.h</a>&quot;</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ProfDataUtils_8h.html">llvm/IR/ProfDataUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Type_8h.html">llvm/IR/Type.h</a>&quot;</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Use_8h.html">llvm/IR/Use.h</a>&quot;</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Value_8h.html">llvm/IR/Value.h</a>&quot;</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InitializePasses_8h.html">llvm/InitializePasses.h</a>&quot;</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Pass_8h.html">llvm/Pass.h</a>&quot;</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BlockFrequency_8h.html">llvm/Support/BlockFrequency.h</a>&quot;</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BranchProbability_8h.html">llvm/Support/BranchProbability.h</a>&quot;</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Casting_8h.html">llvm/Support/Casting.h</a>&quot;</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Transforms_2Scalar_8h.html">llvm/Transforms/Scalar.h</a>&quot;</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlockUtils_8h.html">llvm/Transforms/Utils/BasicBlockUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Cloning_8h.html">llvm/Transforms/Utils/Cloning.h</a>&quot;</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Transforms_2Utils_2Local_8h.html">llvm/Transforms/Utils/Local.h</a>&quot;</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SSAUpdater_8h.html">llvm/Transforms/Utils/SSAUpdater.h</a>&quot;</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueMapper_8h.html">llvm/Transforms/Utils/ValueMapper.h</a>&quot;</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="preprocessor">#include &lt;cstdint&gt;</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="preprocessor">#include &lt;iterator&gt;</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="keyword">using namespace </span>jumpthreading;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="JumpThreading_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   85</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;jump-threading&quot;</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumThreads, <span class="stringliteral">&quot;Number of jumps threaded&quot;</span>);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumFolds,   <span class="stringliteral">&quot;Number of terminators folded&quot;</span>);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumDupes,   <span class="stringliteral">&quot;Number of branch blocks duplicated to eliminate phi&quot;</span>);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160; </div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<a class="code" href="JumpThreading_8cpp.html#afa7b07ed202bdb5b1b353121ddfdd4d2">BBDuplicateThreshold</a>(<span class="stringliteral">&quot;jump-threading-threshold&quot;</span>,</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;          <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Max block size to duplicate for jump threading&quot;</span>),</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;          <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(6), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<a class="code" href="JumpThreading_8cpp.html#aad39260b2dc9bc1859acbb7502a8e75a">ImplicationSearchThreshold</a>(</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="stringliteral">&quot;jump-threading-implication-search-threshold&quot;</span>,</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;The number of predecessors to search for a stronger &quot;</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;           <span class="stringliteral">&quot;condition to use to thread over a weaker condition&quot;</span>),</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(3), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="JumpThreading_8cpp.html#ad3a862acec849d6dbe540f3922773ca6">PhiDuplicateThreshold</a>(</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="stringliteral">&quot;jump-threading-phi-threshold&quot;</span>,</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Max PHIs in BB to duplicate for jump threading&quot;</span>), <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(76),</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="JumpThreading_8cpp.html#a7b4e573a5d8a85ed91db4d40daf3b405">PrintLVIAfterJumpThreading</a>(</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="stringliteral">&quot;print-lvi-after-jump-threading&quot;</span>,</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Print the LazyValueInfo cache after JumpThreading&quot;</span>), <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>),</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="JumpThreading_8cpp.html#a1841059116352ed3251569c2cdd20c0f">ThreadAcrossLoopHeaders</a>(</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="stringliteral">&quot;jump-threading-across-loop-headers&quot;</span>,</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Allow JumpThreading to thread across loop headers, for testing&quot;</span>),</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160; </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">  /// This pass performs &#39;jump threading&#39;, which looks at blocks that have</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">  /// multiple predecessors and multiple successors.  If one or more of the</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">  /// predecessors of the block can be proven to always jump to one of the</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">  /// successors, we forward the edge from the predecessor to the successor by</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">  /// duplicating the contents of this block.</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">  /// An example of when this can occur is code like this:</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">  ///   if () { ...</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">  ///     X = 4;</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">  ///   }</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">  ///   if (X &lt; 3) {</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">  /// In this case, the unconditional branch at the end of the first if can be</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">  /// revectored to the false side of the second if.</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment"></span>  <span class="keyword">class </span>JumpThreading : <span class="keyword">public</span> <a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a> {</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="keyword">public</span>:</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>; <span class="comment">// Pass identification</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    JumpThreading(<span class="keywordtype">int</span> <a class="code" href="classT.html">T</a> = -1) : <a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a>(<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>) {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      <a class="code" href="namespacellvm.html#a66ef8932e0b4fc2ac894d66490785c0e">initializeJumpThreadingPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    }</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="EntryExitInstrumenter_8cpp.html#a3985f1f39349428d17f0d2b81ebc6349">runOnFunction</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160; </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const override </span>{</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1DominatorTreeWrapperPass.html">DominatorTreeWrapperPass</a>&gt;();</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1DominatorTreeWrapperPass.html">DominatorTreeWrapperPass</a>&gt;();</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1AAResultsWrapperPass.html">AAResultsWrapperPass</a>&gt;();</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1LazyValueInfoWrapperPass.html">LazyValueInfoWrapperPass</a>&gt;();</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1LazyValueInfoWrapperPass.html">LazyValueInfoWrapperPass</a>&gt;();</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1GlobalsAAWrapperPass.html">GlobalsAAWrapperPass</a>&gt;();</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1TargetLibraryInfoWrapperPass.html">TargetLibraryInfoWrapperPass</a>&gt;();</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1TargetTransformInfoWrapperPass.html">TargetTransformInfoWrapperPass</a>&gt;();</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    }</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  };</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160; </div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;} <span class="comment">// end anonymous namespace</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160; </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46">JumpThreading::ID</a> = 0;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160; </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<a class="code" href="JumpThreading_8cpp.html#a1e665d9a7a03a0df4056c204f22b0560">INITIALIZE_PASS_BEGIN</a>(JumpThreading, <span class="stringliteral">&quot;jump-threading&quot;</span>,</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                <span class="stringliteral">&quot;Jump Threading&quot;</span>, <span class="keyword">false</span>, <span class="keyword">false</span>)</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1DominatorTreeWrapperPass.html">DominatorTreeWrapperPass</a>)</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1LazyValueInfoWrapperPass.html">LazyValueInfoWrapperPass</a>)</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1TargetLibraryInfoWrapperPass.html">TargetLibraryInfoWrapperPass</a>)</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1AAResultsWrapperPass.html">AAResultsWrapperPass</a>)</div>
<div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="JumpThreading_8cpp.html#a9f88858ad3279dd92cc930a15f5a777f">  168</a></span>&#160;<a class="code" href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a>(JumpThreading, &quot;<a class="code" href="lib_2Target_2WebAssembly_2README_8txt.html#a2f18db7a825d21ca8818134d56e0cee1">jump</a>-<a class="code" href="JumpThreading_8cpp.html#a9f88858ad3279dd92cc930a15f5a777f">threading</a>&quot;,</div>
<div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="JumpThreading_8cpp.html#a50266e8679d84319fee61811c5f40b6e">  169</a></span>&#160;                &quot;Jump <a class="code" href="JumpThreading_8cpp.html#a50266e8679d84319fee61811c5f40b6e">Threading</a>&quot;, <a class="code" href="namespacefalse.html">false</a>, <a class="code" href="namespacefalse.html">false</a>)</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160; </div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">// Public interface to the Jump Threading pass</span></div>
<div class="line"><a name="l00172"></a><span class="lineno"><a class="line" href="namespacellvm.html#a46c2fc7f03e885dd9780d2a432f5183a">  172</a></span>&#160;<a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a> *<a class="code" href="namespacellvm.html">llvm</a>::<a class="code" href="namespacellvm.html#a46c2fc7f03e885dd9780d2a432f5183a">createJumpThreadingPass</a>(<span class="keywordtype">int</span> Threshold) {</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> JumpThreading(Threshold);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;}</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160; </div>
<div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="classllvm_1_1JumpThreadingPass.html#a3cd21bd06a36557dd863c554b7b10205">  176</a></span>&#160;<a class="code" href="classllvm_1_1JumpThreadingPass.html#a3cd21bd06a36557dd863c554b7b10205">JumpThreadingPass::JumpThreadingPass</a>(<span class="keywordtype">int</span> <a class="code" href="classT.html">T</a>) {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  DefaultBBDupThreshold = (<a class="code" href="classT.html">T</a> == -1) ? <a class="code" href="JumpThreading_8cpp.html#afa7b07ed202bdb5b1b353121ddfdd4d2">BBDuplicateThreshold</a> : <span class="keywordtype">unsigned</span>(<a class="code" href="classT.html">T</a>);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;}</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160; </div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">// Update branch probability information according to conditional</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">// branch probability. This is usually made possible for cloned branches</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">// in inline instances by the context specific profile in the caller.</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment">// For instance,</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment">//  [Block PredBB]</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment">//  [Branch PredBr]</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">//  if (t) {</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">//     Block A;</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">//  } else {</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">//     Block B;</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment">//  }</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment">//  [Block BB]</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment">//  cond = PN([true, %A], [..., %B]); // PHI node</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">//  [Branch CondBr]</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">//  if (cond) {</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">//    ...  // P(cond == true) = 1%</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">//  }</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">//  Here we know that when block A is taken, cond must be true, which means</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment">//      P(cond == true | A) = 1</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">//  Given that P(cond == true) = P(cond == true | A) * P(A) +</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment">//                               P(cond == true | B) * P(B)</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment">//  we get:</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">//     P(cond == true ) = P(A) + P(cond == true | B) * P(B)</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">//  which gives us:</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">//     P(A) is less than P(cond == true), i.e.</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">//     P(t == true) &lt;= P(cond == true)</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">//  In other words, if we know P(cond == true) is unlikely, we know</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">//  that P(t == true) is also unlikely.</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00215"></a><span class="lineno"><a class="line" href="JumpThreading_8cpp.html#ae5a9dfd216e7560889e2366f34ddd9f1">  215</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="JumpThreading_8cpp.html#ae5a9dfd216e7560889e2366f34ddd9f1">updatePredecessorProfileMetadata</a>(<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *CondBr = dyn_cast&lt;BranchInst&gt;(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator());</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <span class="keywordflow">if</span> (!CondBr)</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160; </div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> TrueWeight, FalseWeight;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#ac19cbbc4935a23e1d44f65e1eaba6b1d">extractBranchWeights</a>(*CondBr, TrueWeight, FalseWeight))</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160; </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <span class="keywordflow">if</span> (TrueWeight + FalseWeight == 0)</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="comment">// Zero branch_weights do not give a hint for getting branch probabilities.</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="comment">// Technically it would result in division by zero denominator, which is</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="comment">// TrueWeight + FalseWeight.</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="comment">// Returns the outgoing edge of the dominating predecessor block</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="comment">// that leads to the PhiNode&#39;s incoming block:</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="keyword">auto</span> GetPredOutEdge =</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      [](<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *IncomingBB,</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;         <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PhiBB) -&gt; std::pair&lt;BasicBlock *, BasicBlock *&gt; {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keyword">auto</span> *PredBB = IncomingBB;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keyword">auto</span> *SuccBB = PhiBB;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock *, 16&gt;</a> Visited;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *PredBr = dyn_cast&lt;BranchInst&gt;(PredBB-&gt;getTerminator());</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      <span class="keywordflow">if</span> (PredBr &amp;&amp; PredBr-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a7e4be8b16fbd68c9045a388904044e01">isConditional</a>())</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <span class="keywordflow">return</span> {PredBB, SuccBB};</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(PredBB);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      <span class="keyword">auto</span> *SinglePredBB = PredBB-&gt;getSinglePredecessor();</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      <span class="keywordflow">if</span> (!SinglePredBB)</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <span class="keywordflow">return</span> {<span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>};</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      <span class="comment">// Stop searching when SinglePredBB has been visited. It means we see</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      <span class="comment">// an unreachable loop.</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      <span class="keywordflow">if</span> (Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(SinglePredBB))</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <span class="keywordflow">return</span> {<span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>};</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160; </div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      SuccBB = PredBB;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      PredBB = SinglePredBB;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    }</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  };</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160; </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#aef51af4b490af6b3bf2dfbc8737a8f9f">getNumIncomingValues</a>(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *PhiOpnd = PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a16c39eb6e60b42a40c399d8d65347bb6">getIncomingValue</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(PhiOpnd);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160; </div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordflow">if</span> (!CI || !CI-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#afe3ce7fc89f36474eb0369cbb792c05a">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>(1))</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160; </div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a> BP =</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        (CI-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a244bfbe5aae876e56cf5e62f0f27867a">isOne</a>() ? <a class="code" href="classllvm_1_1BranchProbability.html#a0333345669e75a54c7de3d5fe0f6e746">BranchProbability::getBranchProbability</a>(</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                           TrueWeight, TrueWeight + FalseWeight)</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                     : <a class="code" href="classllvm_1_1BranchProbability.html#a0333345669e75a54c7de3d5fe0f6e746">BranchProbability::getBranchProbability</a>(</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                           FalseWeight, TrueWeight + FalseWeight));</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160; </div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keyword">auto</span> PredOutEdge = GetPredOutEdge(PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a8ce0c4746a1ec805e66409d20ae93922">getIncomingBlock</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>), <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordflow">if</span> (!PredOutEdge.first)</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160; </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PredBB = PredOutEdge.first;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *PredBr = dyn_cast&lt;BranchInst&gt;(PredBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordflow">if</span> (!PredBr)</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> PredTrueWeight, PredFalseWeight;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="comment">// FIXME: We currently only set the profile data when it is missing.</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="comment">// With PGO, this can be used to refine even existing profile data with</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="comment">// context information. This needs to be done after more performance</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="comment">// testing.</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ac19cbbc4935a23e1d44f65e1eaba6b1d">extractBranchWeights</a>(*PredBr, PredTrueWeight, PredFalseWeight))</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160; </div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="comment">// We can not infer anything useful when BP &gt;= 50%, because BP is the</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="comment">// upper bound probability value.</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordflow">if</span> (BP &gt;= <a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a>(50, 100))</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160; </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;uint32_t, 2&gt;</a> Weights;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="keywordflow">if</span> (PredBr-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(0) == PredOutEdge.second) {</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      Weights.push_back(BP.<a class="code" href="classllvm_1_1BranchProbability.html#a7be5759bf75c903d1695fa97eca6f139">getNumerator</a>());</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      Weights.push_back(BP.<a class="code" href="classllvm_1_1BranchProbability.html#aaee6034264d5d0782e5d1489360730d9">getCompl</a>().<a class="code" href="classllvm_1_1BranchProbability.html#a7be5759bf75c903d1695fa97eca6f139">getNumerator</a>());</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      Weights.push_back(BP.<a class="code" href="classllvm_1_1BranchProbability.html#aaee6034264d5d0782e5d1489360730d9">getCompl</a>().<a class="code" href="classllvm_1_1BranchProbability.html#a7be5759bf75c903d1695fa97eca6f139">getNumerator</a>());</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      Weights.push_back(BP.<a class="code" href="classllvm_1_1BranchProbability.html#a7be5759bf75c903d1695fa97eca6f139">getNumerator</a>());</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    }</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    PredBr-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9247a212ea89acc9573fa7e7f557eaba">setMetadata</a>(LLVMContext::MD_prof,</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                        <a class="code" href="classllvm_1_1MDBuilder.html">MDBuilder</a>(PredBr-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aa286a0f7f5d38488d593bb7ef0ba183e">getContext</a>())</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                            .<a class="code" href="classllvm_1_1MDBuilder.html#ad910125a9cfd76aaad7f69469df22f66">createBranchWeights</a>(Weights));</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  }</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;}</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment">/// runOnFunction - Toplevel algorithm.</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="EntryExitInstrumenter_8cpp.html#a3985f1f39349428d17f0d2b81ebc6349">JumpThreading::runOnFunction</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <span class="keywordflow">if</span> (skipFunction(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>))</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <span class="keyword">auto</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a> = &amp;getAnalysis&lt;TargetTransformInfoWrapperPass&gt;().getTTI(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <span class="comment">// Jump Threading has no sense for the targets with divergent CF</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#a1c0b137bcf194671c30aba4e2fab073d">hasBranchDivergence</a>())</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <span class="keyword">auto</span> TLI = &amp;getAnalysis&lt;TargetLibraryInfoWrapperPass&gt;().getTLI(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <span class="keyword">auto</span> DT = &amp;getAnalysis&lt;DominatorTreeWrapperPass&gt;().getDomTree();</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <span class="keyword">auto</span> LVI = &amp;getAnalysis&lt;LazyValueInfoWrapperPass&gt;().getLVI();</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <span class="keyword">auto</span> AA = &amp;getAnalysis&lt;AAResultsWrapperPass&gt;().getAAResults();</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  std::unique_ptr&lt;BlockFrequencyInfo&gt; <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  std::unique_ptr&lt;BranchProbabilityInfo&gt; BPI;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.hasProfileData()) {</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> LI{*DT};</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    BPI.reset(<span class="keyword">new</span> <a class="code" href="classllvm_1_1BranchProbabilityInfo.html">BranchProbabilityInfo</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, LI, TLI));</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>.reset(<span class="keyword">new</span> <a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, *BPI, LI));</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  }</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160; </div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <a class="code" href="classllvm_1_1JumpThreadingPass.html">JumpThreadingPass</a> Impl;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <span class="keywordtype">bool</span> Changed = Impl.<a class="code" href="classllvm_1_1JumpThreadingPass.html#a5b6fe6d57aa5475337994b0daec8cc54">runImpl</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <span class="keyword">nullptr</span>, TLI, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, LVI, AA,</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                              std::make_unique&lt;DomTreeUpdater&gt;(</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                                  DT, <a class="code" href="classllvm_1_1DomTreeUpdater.html#a8bf4c30be33831d7882d6880b8ae433da46a9ebdb80117bfa1f0cdea65438290a">DomTreeUpdater::UpdateStrategy::Lazy</a>),</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                              <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>.get(), BPI.get());</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="JumpThreading_8cpp.html#a7b4e573a5d8a85ed91db4d40daf3b405">PrintLVIAfterJumpThreading</a>) {</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LVI for function &#39;&quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName() &lt;&lt; <span class="stringliteral">&quot;&#39;:\n&quot;</span>;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    LVI-&gt;printLVI(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, Impl.<a class="code" href="classllvm_1_1JumpThreadingPass.html#a5a9e1f7f511296cb22ef6a3e8e5ed91e">getDomTreeUpdater</a>()-&gt;<a class="code" href="classllvm_1_1DomTreeUpdater.html#ae529b0d73b54361e5151985f93497001">getDomTree</a>(), <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>());</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  }</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;}</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160; </div>
<div class="line"><a name="l00338"></a><span class="lineno"><a class="line" href="classllvm_1_1JumpThreadingPass.html#a48dd43ef05b66261790497edbdac92d9">  338</a></span>&#160;<a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> <a class="code" href="classllvm_1_1JumpThreadingPass.html#a48dd43ef05b66261790497edbdac92d9">JumpThreadingPass::run</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>,</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                                         <a class="code" href="classllvm_1_1AnalysisManager.html">FunctionAnalysisManager</a> &amp;AM) {</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="keyword">auto</span> &amp;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a> = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1TargetIRAnalysis.html">TargetIRAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <span class="comment">// Jump Threading has no sense for the targets with divergent CF</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a1c0b137bcf194671c30aba4e2fab073d">hasBranchDivergence</a>())</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <span class="keyword">auto</span> &amp;TLI = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1TargetLibraryAnalysis.html">TargetLibraryAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <span class="keyword">auto</span> &amp;LVI = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1LazyValueAnalysis.html">LazyValueAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <span class="keyword">auto</span> &amp;AA = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1AAManager.html">AAManager</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <span class="keyword">auto</span> &amp;DT = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1DominatorTreeAnalysis.html">DominatorTreeAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160; </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <span class="keywordtype">bool</span> Changed =</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;      <a class="code" href="ExpandLargeDivRem_8cpp.html#ae64f9cd0977a8b47570154312540d7d2">runImpl</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, &amp;AM, &amp;TLI, &amp;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, &amp;LVI, &amp;AA,</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;              std::make_unique&lt;DomTreeUpdater&gt;(</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                  &amp;DT, <span class="keyword">nullptr</span>, <a class="code" href="classllvm_1_1DomTreeUpdater.html#a8bf4c30be33831d7882d6880b8ae433da46a9ebdb80117bfa1f0cdea65438290a">DomTreeUpdater::UpdateStrategy::Lazy</a>),</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;              std::nullopt, std::nullopt);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160; </div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="JumpThreading_8cpp.html#a7b4e573a5d8a85ed91db4d40daf3b405">PrintLVIAfterJumpThreading</a>) {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;LVI for function &#39;&quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName() &lt;&lt; <span class="stringliteral">&quot;&#39;:\n&quot;</span>;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    LVI.printLVI(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, getDomTreeUpdater()-&gt;getDomTree(), <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>());</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  }</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160; </div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <span class="keywordflow">if</span> (!Changed)</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160; </div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160; </div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  getDomTreeUpdater()-&gt;flush();</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160; </div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="preprocessor">#if defined(EXPENSIVE_CHECKS)</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(getDomTreeUpdater()-&gt;getDomTree().<a class="code" href="PPCCTRLoopsVerify_8cpp.html#a593cc2f204f7b2edc16ee222c37c3196">verify</a>(</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;             <a class="code" href="namespacellvm_1_1JumpTable.html#ae69658c09df17591f8b1c3e95b879b5cae9f3d1d07889f0257137760ec841a5e2">DominatorTree::VerificationLevel::Full</a>) &amp;&amp;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;         <span class="stringliteral">&quot;DT broken after JumpThreading&quot;</span>);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!getDomTreeUpdater()-&gt;hasPostDomTree() ||</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;          getDomTreeUpdater()-&gt;getPostDomTree().<a class="code" href="PPCCTRLoopsVerify_8cpp.html#a593cc2f204f7b2edc16ee222c37c3196">verify</a>(</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;              <a class="code" href="classllvm_1_1DominatorTreeBase.html#aad6e57a3b7c184bded15b616e790781fabbd47109890259c0127154db1af26c75">PostDominatorTree::VerificationLevel::Full</a>)) &amp;&amp;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;         <span class="stringliteral">&quot;PDT broken after JumpThreading&quot;</span>);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(getDomTreeUpdater()-&gt;getDomTree().<a class="code" href="PPCCTRLoopsVerify_8cpp.html#a593cc2f204f7b2edc16ee222c37c3196">verify</a>(</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;             <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309ea258d0fc76498bc434cf57e73ea5adbfc">DominatorTree::VerificationLevel::Fast</a>) &amp;&amp;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;         <span class="stringliteral">&quot;DT broken after JumpThreading&quot;</span>);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!getDomTreeUpdater()-&gt;hasPostDomTree() ||</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;          getDomTreeUpdater()-&gt;getPostDomTree().<a class="code" href="PPCCTRLoopsVerify_8cpp.html#a593cc2f204f7b2edc16ee222c37c3196">verify</a>(</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;              <a class="code" href="classllvm_1_1DominatorTreeBase.html#aad6e57a3b7c184bded15b616e790781fae16b5b7f26f54214445cbe38d72c2828">PostDominatorTree::VerificationLevel::Fast</a>)) &amp;&amp;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;         <span class="stringliteral">&quot;PDT broken after JumpThreading&quot;</span>);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160; </div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <span class="keywordflow">return</span> getPreservedAnalysis();</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;}</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno"><a class="line" href="classllvm_1_1JumpThreadingPass.html#a5b6fe6d57aa5475337994b0daec8cc54">  387</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1JumpThreadingPass.html#a5b6fe6d57aa5475337994b0daec8cc54">JumpThreadingPass::runImpl</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;F_, <a class="code" href="classllvm_1_1AnalysisManager.html">FunctionAnalysisManager</a> *FAM_,</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                                <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> *TLI_,</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                                <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> *TTI_, <a class="code" href="classllvm_1_1LazyValueInfo.html">LazyValueInfo</a> *LVI_,</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                                <a class="code" href="classllvm_1_1AAResults.html">AliasAnalysis</a> *AA_,</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                                std::unique_ptr&lt;DomTreeUpdater&gt; DTU_,</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                                std::optional&lt;BlockFrequencyInfo *&gt; BFI_,</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                                std::optional&lt;BranchProbabilityInfo *&gt; BPI_) {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Jump threading on function &#39;&quot;</span> &lt;&lt; F_.<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() &lt;&lt; <span class="stringliteral">&quot;&#39;\n&quot;</span>);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = &amp;F_;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a> = FAM_;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  TLI = TLI_;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a> = TTI_;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  LVI = LVI_;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  AA = AA_;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  DTU = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(DTU_);</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a> = BFI_;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  BPI = BPI_;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  <span class="keyword">auto</span> *GuardDecl = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getParent()-&gt;getFunction(</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;      <a class="code" href="namespacellvm_1_1Intrinsic.html#a7157f9fa9dd11f234ec3c58517cb6d96">Intrinsic::getName</a>(Intrinsic::experimental_guard));</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  HasGuards = GuardDecl &amp;&amp; !GuardDecl-&gt;use_empty();</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160; </div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="comment">// Reduce the number of instructions duplicated when optimizing strictly for</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <span class="comment">// size.</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="JumpThreading_8cpp.html#afa7b07ed202bdb5b1b353121ddfdd4d2">BBDuplicateThreshold</a>.getNumOccurrences())</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    BBDupThreshold = <a class="code" href="JumpThreading_8cpp.html#afa7b07ed202bdb5b1b353121ddfdd4d2">BBDuplicateThreshold</a>;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;hasFnAttribute(Attribute::MinSize))</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    BBDupThreshold = 3;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    BBDupThreshold = DefaultBBDupThreshold;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="comment">// JumpThreading must not processes blocks unreachable from entry. It&#39;s a</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <span class="comment">// waste of compute time and can potentially lead to hangs.</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock *, 16&gt;</a> Unreachable;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DTU &amp;&amp; <span class="stringliteral">&quot;DTU isn&#39;t passed into JumpThreading before using it.&quot;</span>);</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DTU-&gt;hasDomTree() &amp;&amp; <span class="stringliteral">&quot;JumpThreading relies on DomTree to proceed.&quot;</span>);</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;DT = DTU-&gt;getDomTree();</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordflow">if</span> (!DT.<a class="code" href="classllvm_1_1DominatorTree.html#a1a70f2c359aadd76a72aaaede16aca4a">isReachableFromEntry</a>(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      Unreachable.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160; </div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="JumpThreading_8cpp.html#a1841059116352ed3251569c2cdd20c0f">ThreadAcrossLoopHeaders</a>)</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    findLoopHeaders(*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160; </div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="keywordtype">bool</span> EverChanged = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <span class="keywordtype">bool</span> Changed;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      <span class="keywordflow">if</span> (Unreachable.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;      <span class="keywordflow">while</span> (processBlock(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)) <span class="comment">// Thread all of the branches we can over BB.</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        Changed = ChangedSinceLastAnalysisUpdate = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160; </div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      <span class="comment">// Jump threading may have introduced redundant debug values into BB</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;      <span class="comment">// which should be removed.</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;      <span class="keywordflow">if</span> (Changed)</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <a class="code" href="namespacellvm.html#a08f3f942afc0ee9115a8f9fa87e9191d">RemoveRedundantDbgInstrs</a>(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160; </div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;      <span class="comment">// Stop processing BB if it&#39;s the entry or is now deleted. The following</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;      <span class="comment">// routines attempt to eliminate BB and locating a suitable replacement</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      <span class="comment">// for the entry is non-trivial.</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      <span class="keywordflow">if</span> (&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> == &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getEntryBlock() || DTU-&gt;isBBPendingDeletion(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160; </div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ad66c4759666aab78529658362b498c74">pred_empty</a>(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)) {</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <span class="comment">// When processBlock makes BB unreachable it doesn&#39;t bother to fix up</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        <span class="comment">// the instructions in it. We must remove BB to prevent invalid IR.</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  JT: Deleting dead block &#39;&quot;</span> &lt;&lt; <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.getName()</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                          &lt;&lt; <span class="stringliteral">&quot;&#39; with terminator: &quot;</span> &lt;&lt; *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.getTerminator()</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                          &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        LoopHeaders.erase(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        LVI-&gt;eraseBlock(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <a class="code" href="namespacellvm.html#a458b4709ebedccb846a179f1e422265b">DeleteDeadBlock</a>(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, DTU.get());</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        Changed = ChangedSinceLastAnalysisUpdate = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;      }</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160; </div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      <span class="comment">// processBlock doesn&#39;t thread BBs with unconditional TIs. However, if BB</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      <span class="comment">// is &quot;almost empty&quot;, we attempt to merge BB with its sole successor.</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      <span class="keyword">auto</span> *BI = dyn_cast&lt;BranchInst&gt;(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.getTerminator());</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;      <span class="keywordflow">if</span> (BI &amp;&amp; BI-&gt;isUnconditional()) {</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Succ = BI-&gt;getSuccessor(0);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        <span class="keywordflow">if</span> (</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;            <span class="comment">// The terminator must be the only non-phi instruction in BB.</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;            <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.getFirstNonPHIOrDbg(<span class="keyword">true</span>)-&gt;isTerminator() &amp;&amp;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;            <span class="comment">// Don&#39;t alter Loop headers and latches to ensure another pass can</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;            <span class="comment">// detect and transform nested loops later.</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;            !LoopHeaders.count(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) &amp;&amp; !LoopHeaders.count(Succ) &amp;&amp;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;            <a class="code" href="namespacellvm.html#a67474fe1bb82a093f3ad2e9ad2d7f7c4">TryToSimplifyUncondBranchFromEmptyBlock</a>(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, DTU.get())) {</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;          <a class="code" href="namespacellvm.html#a08f3f942afc0ee9115a8f9fa87e9191d">RemoveRedundantDbgInstrs</a>(Succ);</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;          <span class="comment">// BB is valid for cleanup here because we passed in DTU. F remains</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;          <span class="comment">// BB&#39;s parent until a DTU-&gt;getDomTree() event.</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;          LVI-&gt;eraseBlock(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;          Changed = ChangedSinceLastAnalysisUpdate = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        }</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;      }</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    }</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    EverChanged |= Changed;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  } <span class="keywordflow">while</span> (Changed);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160; </div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  LoopHeaders.clear();</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  <span class="keywordflow">return</span> EverChanged;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;}</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160; </div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="comment">// Replace uses of Cond with ToVal when safe to do so. If all uses are</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment">// replaced, we can remove Cond. We cannot blindly replace all uses of Cond</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="comment">// because we may incorrectly replace uses when guards/assumes are uses of</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="comment">// of `Cond` and we used the guards/assume to reason about the `Cond` value</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="comment">// at the end of block. RAUW unconditionally replaces all uses</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment">// including the guards/assumes themselves and the uses before the</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment">// guard/assume.</span></div>
<div class="line"><a name="l00498"></a><span class="lineno"><a class="line" href="JumpThreading_8cpp.html#a0e7841803a620fb47c7cd3086debaf54">  498</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="JumpThreading_8cpp.html#a0e7841803a620fb47c7cd3086debaf54">replaceFoldableUses</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *ToVal,</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                                <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *KnownAtEndOfBB) {</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>-&gt;getType() == ToVal-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  <span class="comment">// We can unconditionally replace all uses in non-local blocks (i.e. uses</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  <span class="comment">// strictly dominated by BB), since LVI information is true from the</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  <span class="comment">// terminator of BB.</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>-&gt;getParent() == KnownAtEndOfBB)</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    Changed |= <a class="code" href="namespacellvm.html#a22deed11f251c5761b2b4bf021eff4ac">replaceNonLocalUsesWith</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, ToVal);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">reverse</a>(*KnownAtEndOfBB)) {</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="comment">// Reached the Cond whose uses we are trying to replace, so there are no</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="comment">// more uses.</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="keywordflow">if</span> (&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> == <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>)</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="comment">// We only replace uses in instructions that are guaranteed to reach the end</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="comment">// of BB, where we know Cond is ToVal.</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#abff5a423c1f45e23958dde8ee695c9a9">isGuaranteedToTransferExecutionToSuccessor</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    Changed |= <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.replaceUsesOfWith(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, ToVal);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  }</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>-&gt;use_empty() &amp;&amp; !<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>-&gt;mayHaveSideEffects()) {</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  }</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;}</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="comment">/// Return the cost of duplicating a piece of this block from first non-phi</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="comment">/// and before StopAt instruction to thread across it. Stop scanning the block</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="comment">/// when exceeding the threshold. If duplication is impossible, returns ~0U.</span></div>
<div class="line"><a name="l00528"></a><span class="lineno"><a class="line" href="JumpThreading_8cpp.html#a65facbdd55e486cbcef04a12de132c9c">  528</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="JumpThreading_8cpp.html#a65facbdd55e486cbcef04a12de132c9c">getJumpThreadDuplicationCost</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> *<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>,</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;                                             <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;                                             <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *StopAt,</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                                             <span class="keywordtype">unsigned</span> Threshold) {</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(StopAt-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>() == <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> &amp;&amp; <span class="stringliteral">&quot;Not an instruction from proper BB?&quot;</span>);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160; </div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <span class="comment">// Do not duplicate the BB if it has a lot of PHI nodes.</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  <span class="comment">// If a threadable chain is too long then the number of PHI nodes can add up,</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  <span class="comment">// leading to a substantial increase in compile time when rewriting the SSA.</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  <span class="keywordtype">unsigned</span> PhiCount = 0;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *FirstNonPHI = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="keywordflow">if</span> (!isa&lt;PHINode&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;      FirstNonPHI = &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    }</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keywordflow">if</span> (++PhiCount &gt; <a class="code" href="JumpThreading_8cpp.html#ad3a862acec849d6dbe540f3922773ca6">PhiDuplicateThreshold</a>)</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      <span class="keywordflow">return</span> ~0U;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  }</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="comment">  /// Ignore PHI nodes, these will be flattened when duplication happens.</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1BasicBlock.html#a42a7d51fdde6913db72d098356c2c019">BasicBlock::const_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>(FirstNonPHI);</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160; </div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="comment">// FIXME: THREADING will delete values that are just used to compute the</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  <span class="comment">// branch, so they shouldn&#39;t count against the duplication cost.</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160; </div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <span class="keywordtype">unsigned</span> Bonus = 0;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator() == StopAt) {</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <span class="comment">// Threading through a switch statement is particularly profitable.  If this</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <span class="comment">// block ends in a switch, decrease its cost to make it more likely to</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <span class="comment">// happen.</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <span class="keywordflow">if</span> (isa&lt;SwitchInst&gt;(StopAt))</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      Bonus = 6;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160; </div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="comment">// The same holds for indirect branches, but slightly more so.</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="keywordflow">if</span> (isa&lt;IndirectBrInst&gt;(StopAt))</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      Bonus = 8;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  }</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160; </div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  <span class="comment">// Bump the threshold up so the early exit from the loop doesn&#39;t skip the</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  <span class="comment">// terminator-based Size adjustment at the end.</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  Threshold += Bonus;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160; </div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <span class="comment">// Sum up the cost of each instruction until we get to the terminator.  Don&#39;t</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  <span class="comment">// include the terminator because the copy won&#39;t include it.</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  <span class="keywordtype">unsigned</span> Size = 0;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  <span class="keywordflow">for</span> (; &amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != StopAt; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160; </div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="comment">// Stop scanning the block if we&#39;ve reached the threshold.</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="keywordflow">if</span> (Size &gt; Threshold)</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      <span class="keywordflow">return</span> Size;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160; </div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="comment">// Bail out if this instruction gives back a token type, it is not possible</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="comment">// to duplicate it if it is used outside this BB.</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getType()-&gt;isTokenTy() &amp;&amp; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isUsedOutsideOfBlock(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      <span class="keywordflow">return</span> ~0U;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160; </div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="comment">// Blocks with NoDuplicate are modelled as having infinite cost, so they</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <span class="comment">// are never duplicated.</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI = dyn_cast&lt;CallInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;      <span class="keywordflow">if</span> (CI-&gt;cannotDuplicate() || CI-&gt;isConvergent())</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        <span class="keywordflow">return</span> ~0U;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160; </div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>-&gt;<a class="code" href="classllvm_1_1TargetTransformInfo.html#ac77dbedcfd916a5c9b58e753b2678a98">getInstructionCost</a>(&amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bba7f80055e1969cb850739546467460ad8">TargetTransformInfo::TCK_SizeAndLatency</a>) ==</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        <a class="code" href="classllvm_1_1TargetTransformInfo.html#ac44f6b9fdbb5f9cc199f8329cb0b272ca89f768b1267e3083b4eb05b4ab77e717">TargetTransformInfo::TCC_Free</a>)</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160; </div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="comment">// All other instructions count for at least one unit.</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    ++Size;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160; </div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="comment">// Calls are more expensive.  If they are non-intrinsic calls, we model them</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="comment">// as having cost of 4.  If they are a non-vector intrinsic, we model them</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="comment">// as having cost of 2 total, and if they are a vector intrinsic, we model</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="comment">// them as having cost 1.</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI = dyn_cast&lt;CallInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;      <span class="keywordflow">if</span> (!isa&lt;IntrinsicInst&gt;(CI))</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        Size += 3;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!CI-&gt;getType()-&gt;isVectorTy())</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        Size += 1;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    }</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  }</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160; </div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  <span class="keywordflow">return</span> Size &gt; Bonus ? Size - Bonus : 0;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;}</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="comment">/// findLoopHeaders - We do not want jump threading to turn proper loop</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="comment">/// structures into irreducible loops.  Doing this breaks up the loop nesting</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="comment">/// hierarchy and pessimizes later transformations.  To prevent this from</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="comment">/// happening, we first have to find the loop headers.  Here we approximate this</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="comment">/// by finding targets of backedges in the CFG.</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="comment">/// Note that there definitely are cases when we want to allow threading of</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="comment">/// edges across a loop header.  For example, threading a jump from outside the</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;<span class="comment">/// loop (the preheader) to an exit block of the loop is definitely profitable.</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;<span class="comment">/// It is also almost always profitable to thread backedges from within the loop</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="comment">/// to exit blocks, and is often profitable to thread backedges to other blocks</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;<span class="comment">/// within the loop (forming a nested loop).  This simple analysis is not rich</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;<span class="comment">/// enough to track all of these properties and keep it up-to-date as the CFG</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;<span class="comment">/// mutates, so we don&#39;t allow any of these transformations.</span></div>
<div class="line"><a name="l00627"></a><span class="lineno"><a class="line" href="classllvm_1_1JumpThreadingPass.html#a29e73c6c256c3fbdd7dacf8095210d5b">  627</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1JumpThreadingPass.html#a29e73c6c256c3fbdd7dacf8095210d5b">JumpThreadingPass::findLoopHeaders</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;const BasicBlock*,const BasicBlock*&gt;</a>, 32&gt; Edges;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  <a class="code" href="namespacellvm.html#aec1d6e397956b9f5fa62416d0beba785">FindFunctionBackedges</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, Edges);</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160; </div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;Edge : Edges)</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    LoopHeaders.insert(Edge.second);</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;}</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="comment">/// getKnownConstant - Helper method to determine if we can thread over a</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="comment">/// terminator with the given value as its condition, and if so what value to</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="comment">/// use for that. What kind of value this is depends on whether we want an</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="comment">/// integer or a block address, but an undef is always accepted.</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="comment">/// Returns null if Val is null or not an appropriate constant.</span></div>
<div class="line"><a name="l00640"></a><span class="lineno"><a class="line" href="JumpThreading_8cpp.html#aa1ca02e99b272b5fa744ebef102fa0b0">  640</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="JumpThreading_8cpp.html#aa1ca02e99b272b5fa744ebef102fa0b0">getKnownConstant</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *Val, <a class="code" href="namespacellvm_1_1jumpthreading.html#a7bd584a1977827b11c76096bebbb38a0">ConstantPreference</a> <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309e">Preference</a>) {</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  <span class="keywordflow">if</span> (!Val)</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160; </div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <span class="comment">// Undef is &quot;known&quot; enough.</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1UndefValue.html">UndefValue</a> *U = dyn_cast&lt;UndefValue&gt;(Val))</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <span class="keywordflow">return</span> U;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160; </div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309e">Preference</a> == <a class="code" href="namespacellvm_1_1jumpthreading.html#a7bd584a1977827b11c76096bebbb38a0a14d7faebe69e48290ea9c8aa9a0b40fc">WantBlockAddress</a>)</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="keywordflow">return</span> dyn_cast&lt;BlockAddress&gt;(Val-&gt;<a class="code" href="classllvm_1_1Value.html#a966eb231e7d4e572874d2cb49b18faea">stripPointerCasts</a>());</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160; </div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  <span class="keywordflow">return</span> dyn_cast&lt;ConstantInt&gt;(Val);</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;}</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="comment">/// computeValueKnownInPredecessors - Given a basic block BB and a value V, see</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<span class="comment">/// if we can infer that the value is a known ConstantInt/BlockAddress or undef</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="comment">/// in any of our predecessors.  If so, return the known list of value and pred</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="comment">/// BB in the result vector.</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;<span class="comment">/// This returns true if there were any known values.</span></div>
<div class="line"><a name="l00660"></a><span class="lineno"><a class="line" href="classllvm_1_1JumpThreadingPass.html#abb82ea531f9afc009dad6b8e7ff8527c">  660</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1JumpThreadingPass.html#abb82ea531f9afc009dad6b8e7ff8527c">JumpThreadingPass::computeValueKnownInPredecessorsImpl</a>(</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *V, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="classllvm_1_1SmallVectorImpl.html">PredValueInfo</a> &amp;Result,</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <a class="code" href="namespacellvm_1_1jumpthreading.html#a7bd584a1977827b11c76096bebbb38a0">ConstantPreference</a> <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309e">Preference</a>, <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;Value *&gt;</a> &amp;RecursionSet,</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *CxtI) {</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  <span class="comment">// This method walks up use-def chains recursively.  Because of this, we could</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  <span class="comment">// get into an infinite loop going around loops in the use-def chain.  To</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  <span class="comment">// prevent this, keep track of what (value, block) pairs we&#39;ve already visited</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;  <span class="comment">// and terminate the search if we loop back to them</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  <span class="keywordflow">if</span> (!RecursionSet.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#a79eed48913651aeedda2eed25201ea84">insert</a>(V).second)</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160; </div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  <span class="comment">// If V is a constant, then it is known in all predecessors.</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *KC = <a class="code" href="JumpThreading_8cpp.html#aa1ca02e99b272b5fa744ebef102fa0b0">getKnownConstant</a>(V, <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309e">Preference</a>)) {</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Pred : <a class="code" href="namespacellvm.html#acb22fb04083152eee862457e42e8dc31">predecessors</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;      Result.emplace_back(KC, Pred);</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160; </div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <span class="keywordflow">return</span> !Result.empty();</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  }</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160; </div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  <span class="comment">// If V is a non-instruction value, or an instruction in a different block,</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <span class="comment">// then it can&#39;t be derived from a PHI.</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(V);</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> || <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent() != <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160; </div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <span class="comment">// Okay, if this is a live-in value, see if it has a known value at the any</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <span class="comment">// edge from our predecessors.</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> : <a class="code" href="namespacellvm.html#acb22fb04083152eee862457e42e8dc31">predecessors</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)) {</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;      <span class="keyword">using namespace </span>PatternMatch;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;      <span class="comment">// If the value is known by LazyValueInfo to be a constant in a</span></div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;      <span class="comment">// predecessor, use that information to try to thread this block.</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *PredCst = LVI-&gt;getConstantOnEdge(V, <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, CxtI);</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;      <span class="comment">// If I is a non-local compare-with-constant instruction, use more-rich</span></div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;      <span class="comment">// &#39;getPredicateOnEdge&#39; method. This would be able to handle value</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;      <span class="comment">// inequalities better, for example if the compare is &quot;X &lt; 4&quot; and &quot;X &lt; 3&quot;</span></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;      <span class="comment">// is known true but &quot;X &lt; 4&quot; itself is not available.</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;      <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> Pred;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Val;</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Cst;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;      <span class="keywordflow">if</span> (!PredCst &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(V, <a class="code" href="namespacellvm_1_1PatternMatch.html#a753e1338645ec04d045211b8a46d968d">m_Cmp</a>(Pred, <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Val), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(Cst)))) {</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        <span class="keyword">auto</span> Res = LVI-&gt;getPredicateOnEdge(Pred, Val, Cst, <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, CxtI);</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        <span class="keywordflow">if</span> (Res != <a class="code" href="classllvm_1_1LazyValueInfo.html#a381305cf61c847551a489431c43cec47aa3c975a91c3fef72486f9935e4099c8c">LazyValueInfo::Unknown</a>)</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;          PredCst = <a class="code" href="classllvm_1_1ConstantInt.html#afe7d477c6022fe7123b90e3b39c58e69">ConstantInt::getBool</a>(V-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>(), Res);</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;      }</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *KC = <a class="code" href="JumpThreading_8cpp.html#aa1ca02e99b272b5fa744ebef102fa0b0">getKnownConstant</a>(PredCst, <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309e">Preference</a>))</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        Result.emplace_back(KC, <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>);</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    }</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160; </div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <span class="keywordflow">return</span> !Result.empty();</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  }</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;<span class="comment">  /// If I is a PHI node, then we know the incoming values for any constants.</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;<span class="comment"></span>  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast&lt;PHINode&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = PN-&gt;getNumIncomingValues(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *InVal = PN-&gt;getIncomingValue(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *KC = <a class="code" href="JumpThreading_8cpp.html#aa1ca02e99b272b5fa744ebef102fa0b0">getKnownConstant</a>(InVal, <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309e">Preference</a>)) {</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        Result.emplace_back(KC, PN-&gt;getIncomingBlock(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *CI = LVI-&gt;getConstantOnEdge(InVal,</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;                                              PN-&gt;getIncomingBlock(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>),</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;                                              <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, CxtI);</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *KC = <a class="code" href="JumpThreading_8cpp.html#aa1ca02e99b272b5fa744ebef102fa0b0">getKnownConstant</a>(CI, <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309e">Preference</a>))</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;          Result.emplace_back(KC, PN-&gt;getIncomingBlock(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;      }</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    }</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160; </div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="keywordflow">return</span> !Result.empty();</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  }</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160; </div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  <span class="comment">// Handle Cast instructions.</span></div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CastInst.html">CastInst</a> *CI = dyn_cast&lt;CastInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a> = CI-&gt;getOperand(0);</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    computeValueKnownInPredecessorsImpl(<a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a>, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Result, <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309e">Preference</a>,</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                                        RecursionSet, CxtI);</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="keywordflow">if</span> (Result.empty())</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160; </div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <span class="comment">// Convert the known values.</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;R : Result)</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;      R.first = <a class="code" href="classllvm_1_1ConstantExpr.html#a49b69843927f7cd96d866768b3aec92b">ConstantExpr::getCast</a>(CI-&gt;getOpcode(), R.first, CI-&gt;getType());</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160; </div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  }</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160; </div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1FreezeInst.html">FreezeInst</a> *FI = dyn_cast&lt;FreezeInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a> = FI-&gt;getOperand(0);</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    computeValueKnownInPredecessorsImpl(<a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a>, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Result, <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309e">Preference</a>,</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                                        RecursionSet, CxtI);</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160; </div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <a class="code" href="namespacellvm.html#ac9a7de5a04920954ac964059cfc428ad">erase_if</a>(Result, [](<span class="keyword">auto</span> &amp;Pair) {</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;      <span class="keywordflow">return</span> !<a class="code" href="namespacellvm.html#ab8a7ef433279aabf7f30fa5504a4d4ef">isGuaranteedNotToBeUndefOrPoison</a>(Pair.first);</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    });</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160; </div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <span class="keywordflow">return</span> !Result.empty();</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;  }</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160; </div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  <span class="comment">// Handle some boolean conditions.</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getType()-&gt;getPrimitiveSizeInBits() == 1) {</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <span class="keyword">using namespace </span>PatternMatch;</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309e">Preference</a> != <a class="code" href="namespacellvm_1_1jumpthreading.html#a7bd584a1977827b11c76096bebbb38a0ae706b769cc98b156d9e22dfbac8aa62b">WantInteger</a>)</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    <span class="comment">// X | true -&gt; true</span></div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <span class="comment">// X &amp; false -&gt; false</span></div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0, *Op1;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a1a06b1cff93069d7403ea03e6150e386">m_LogicalOr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Op0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Op1))) ||</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a213e6c0ca6e838157373b9a6018c0769">m_LogicalAnd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Op0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Op1)))) {</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">PredValueInfoTy</a> LHSVals, RHSVals;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160; </div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      computeValueKnownInPredecessorsImpl(Op0, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, LHSVals, <a class="code" href="namespacellvm_1_1jumpthreading.html#a7bd584a1977827b11c76096bebbb38a0ae706b769cc98b156d9e22dfbac8aa62b">WantInteger</a>,</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                                          RecursionSet, CxtI);</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;      computeValueKnownInPredecessorsImpl(Op1, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, RHSVals, <a class="code" href="namespacellvm_1_1jumpthreading.html#a7bd584a1977827b11c76096bebbb38a0ae706b769cc98b156d9e22dfbac8aa62b">WantInteger</a>,</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                                          RecursionSet, CxtI);</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160; </div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;      <span class="keywordflow">if</span> (LHSVals.empty() &amp;&amp; RHSVals.empty())</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160; </div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;      <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *InterestingVal;</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a1a06b1cff93069d7403ea03e6150e386">m_LogicalOr</a>()))</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        InterestingVal = <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getContext());</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        InterestingVal = <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getContext());</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160; </div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;      <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock*, 4&gt;</a> LHSKnownBBs;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160; </div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;      <span class="comment">// Scan for the sentinel.  If we find an undef, force it to the</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;      <span class="comment">// interesting value: x|undef -&gt; true and x&amp;undef -&gt; false.</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;LHSVal : LHSVals)</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        <span class="keywordflow">if</span> (LHSVal.first == InterestingVal || isa&lt;UndefValue&gt;(LHSVal.first)) {</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;          Result.emplace_back(InterestingVal, LHSVal.second);</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;          LHSKnownBBs.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(LHSVal.second);</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;        }</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;RHSVal : RHSVals)</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;        <span class="keywordflow">if</span> (RHSVal.first == InterestingVal || isa&lt;UndefValue&gt;(RHSVal.first)) {</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;          <span class="comment">// If we already inferred a value for this block on the LHS, don&#39;t</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;          <span class="comment">// re-add it.</span></div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;          <span class="keywordflow">if</span> (!LHSKnownBBs.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(RHSVal.second))</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;            Result.emplace_back(InterestingVal, RHSVal.second);</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        }</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160; </div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;      <span class="keywordflow">return</span> !Result.empty();</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    }</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160; </div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    <span class="comment">// Handle the NOT form of XOR.</span></div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode() == Instruction::Xor &amp;&amp;</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        isa&lt;ConstantInt&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1)) &amp;&amp;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;        cast&lt;ConstantInt&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1))-&gt;isOne()) {</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;      computeValueKnownInPredecessorsImpl(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0), <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Result,</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;                                          <a class="code" href="namespacellvm_1_1jumpthreading.html#a7bd584a1977827b11c76096bebbb38a0ae706b769cc98b156d9e22dfbac8aa62b">WantInteger</a>, RecursionSet, CxtI);</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;      <span class="keywordflow">if</span> (Result.empty())</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160; </div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;      <span class="comment">// Invert the known values.</span></div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;R : Result)</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        R.first = <a class="code" href="classllvm_1_1ConstantExpr.html#a5b43a866f0fca605556f0f69f70c522a">ConstantExpr::getNot</a>(R.first);</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160; </div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    }</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160; </div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  <span class="comment">// Try to simplify some other binary operator values.</span></div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *BO = dyn_cast&lt;BinaryOperator&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309e">Preference</a> != <a class="code" href="namespacellvm_1_1jumpthreading.html#a7bd584a1977827b11c76096bebbb38a0ae706b769cc98b156d9e22dfbac8aa62b">WantInteger</a>)</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(BO-&gt;getOperand(1))) {</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = BO-&gt;getModule()-&gt;getDataLayout();</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">PredValueInfoTy</a> LHSVals;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;      computeValueKnownInPredecessorsImpl(BO-&gt;getOperand(0), <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, LHSVals,</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;                                          <a class="code" href="namespacellvm_1_1jumpthreading.html#a7bd584a1977827b11c76096bebbb38a0ae706b769cc98b156d9e22dfbac8aa62b">WantInteger</a>, RecursionSet, CxtI);</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160; </div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;      <span class="comment">// Try to use constant folding to simplify the binary operator.</span></div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;LHSVal : LHSVals) {</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *V = LHSVal.first;</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Folded =</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;            <a class="code" href="namespacellvm.html#a964455f36837281d37f2a44e2fcb4cca">ConstantFoldBinaryOpOperands</a>(BO-&gt;getOpcode(), V, CI, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160; </div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *KC = <a class="code" href="JumpThreading_8cpp.html#aa1ca02e99b272b5fa744ebef102fa0b0">getKnownConstant</a>(Folded, <a class="code" href="namespacellvm_1_1jumpthreading.html#a7bd584a1977827b11c76096bebbb38a0ae706b769cc98b156d9e22dfbac8aa62b">WantInteger</a>))</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;          Result.emplace_back(KC, LHSVal.second);</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;      }</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    }</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160; </div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <span class="keywordflow">return</span> !Result.empty();</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  }</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160; </div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  <span class="comment">// Handle compare with phi operand, where the PHI is defined in this block.</span></div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CmpInst.html">CmpInst</a> *Cmp = dyn_cast&lt;CmpInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309e">Preference</a> != <a class="code" href="namespacellvm_1_1jumpthreading.html#a7bd584a1977827b11c76096bebbb38a0ae706b769cc98b156d9e22dfbac8aa62b">WantInteger</a>)</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *CmpType = Cmp-&gt;getType();</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *CmpLHS = Cmp-&gt;getOperand(0);</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *CmpRHS = Cmp-&gt;getOperand(1);</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> Pred = Cmp-&gt;getPredicate();</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160; </div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast&lt;PHINode&gt;(CmpLHS);</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    <span class="keywordflow">if</span> (!PN)</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;      PN = dyn_cast&lt;PHINode&gt;(CmpRHS);</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    <span class="keywordflow">if</span> (PN &amp;&amp; PN-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>() == <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = PN-&gt;<a class="code" href="classllvm_1_1Instruction.html#a4ba3a5be6c0e9b9e8a525de055836733">getModule</a>()-&gt;<a class="code" href="classllvm_1_1Module.html#a6d883605206368bc536cc9ded97209b8">getDataLayout</a>();</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;      <span class="comment">// We can do this simplification if any comparisons fold to true or false.</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;      <span class="comment">// See if any do.</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#aef51af4b490af6b3bf2dfbc8737a8f9f">getNumIncomingValues</a>(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PredBB = PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a8ce0c4746a1ec805e66409d20ae93922">getIncomingBlock</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>;</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;        <span class="keywordflow">if</span> (PN == CmpLHS) {</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;          <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a16c39eb6e60b42a40c399d8d65347bb6">getIncomingValue</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;          <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = CmpRHS-&gt;<a class="code" href="classllvm_1_1Value.html#a159bf794249e0567baf2a2a714d5c679">DoPHITranslation</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, PredBB);</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;          <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = CmpLHS-&gt;<a class="code" href="classllvm_1_1Value.html#a159bf794249e0567baf2a2a714d5c679">DoPHITranslation</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, PredBB);</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;          <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a16c39eb6e60b42a40c399d8d65347bb6">getIncomingValue</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        }</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Res = <a class="code" href="namespacellvm.html#aac8a71d79e03a0d6665ee1018fd7aef3">simplifyCmpInst</a>(Pred, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, {<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>});</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;        <span class="keywordflow">if</span> (!Res) {</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;          <span class="keywordflow">if</span> (!isa&lt;Constant&gt;(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>))</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160; </div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;          <span class="comment">// getPredicateOnEdge call will make no sense if LHS is defined in BB.</span></div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;          <span class="keyword">auto</span> LHSInst = dyn_cast&lt;Instruction&gt;(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>);</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;          <span class="keywordflow">if</span> (LHSInst &amp;&amp; LHSInst-&gt;getParent() == <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160; </div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;          <a class="code" href="classllvm_1_1LazyValueInfo.html#a381305cf61c847551a489431c43cec47">LazyValueInfo::Tristate</a></div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;            ResT = LVI-&gt;getPredicateOnEdge(Pred, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>,</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;                                           cast&lt;Constant&gt;(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>), PredBB, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;                                           CxtI ? CxtI : Cmp);</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;          <span class="keywordflow">if</span> (ResT == <a class="code" href="classllvm_1_1LazyValueInfo.html#a381305cf61c847551a489431c43cec47aa3c975a91c3fef72486f9935e4099c8c">LazyValueInfo::Unknown</a>)</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;          Res = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">Type::getInt1Ty</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>()), ResT);</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;        }</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160; </div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *KC = <a class="code" href="JumpThreading_8cpp.html#aa1ca02e99b272b5fa744ebef102fa0b0">getKnownConstant</a>(Res, <a class="code" href="namespacellvm_1_1jumpthreading.html#a7bd584a1977827b11c76096bebbb38a0ae706b769cc98b156d9e22dfbac8aa62b">WantInteger</a>))</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;          Result.emplace_back(KC, PredBB);</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;      }</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160; </div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;      <span class="keywordflow">return</span> !Result.empty();</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    }</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160; </div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    <span class="comment">// If comparing a live-in value against a constant, see if we know the</span></div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <span class="comment">// live-in value on any predecessors.</span></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    <span class="keywordflow">if</span> (isa&lt;Constant&gt;(CmpRHS) &amp;&amp; !CmpType-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>()) {</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *CmpConst = cast&lt;Constant&gt;(CmpRHS);</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160; </div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;      <span class="keywordflow">if</span> (!isa&lt;Instruction&gt;(CmpLHS) ||</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;          cast&lt;Instruction&gt;(CmpLHS)-&gt;<a class="code" href="BasicAliasAnalysis_8cpp.html#a2675de1d8479c7b00387979714da43f7">getParent</a>() != <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> : <a class="code" href="namespacellvm.html#acb22fb04083152eee862457e42e8dc31">predecessors</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)) {</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;          <span class="comment">// If the value is known by LazyValueInfo to be a constant in a</span></div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;          <span class="comment">// predecessor, use that information to try to thread this block.</span></div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;          <a class="code" href="classllvm_1_1LazyValueInfo.html#a381305cf61c847551a489431c43cec47">LazyValueInfo::Tristate</a> Res =</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;            LVI-&gt;getPredicateOnEdge(Pred, CmpLHS,</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;                                    CmpConst, <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, CxtI ? CxtI : Cmp);</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;          <span class="keywordflow">if</span> (Res == <a class="code" href="classllvm_1_1LazyValueInfo.html#a381305cf61c847551a489431c43cec47aa3c975a91c3fef72486f9935e4099c8c">LazyValueInfo::Unknown</a>)</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160; </div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;          <a class="code" href="classllvm_1_1Constant.html">Constant</a> *ResC = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(CmpType, Res);</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;          Result.emplace_back(ResC, <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>);</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;        }</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160; </div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;        <span class="keywordflow">return</span> !Result.empty();</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;      }</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160; </div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;      <span class="comment">// InstCombine can fold some forms of constant range checks into</span></div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;      <span class="comment">// (icmp (add (x, C1)), C2). See if we have we have such a thing with</span></div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;      <span class="comment">// x as a live-in.</span></div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;      {</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;        <span class="keyword">using namespace </span>PatternMatch;</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160; </div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *AddLHS;</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *AddConst;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        <span class="keywordflow">if</span> (isa&lt;ConstantInt&gt;(CmpConst) &amp;&amp;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;            <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(CmpLHS, <a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(AddLHS), <a class="code" href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">m_ConstantInt</a>(AddConst)))) {</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;          <span class="keywordflow">if</span> (!isa&lt;Instruction&gt;(AddLHS) ||</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;              cast&lt;Instruction&gt;(AddLHS)-&gt;<a class="code" href="BasicAliasAnalysis_8cpp.html#a2675de1d8479c7b00387979714da43f7">getParent</a>() != <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> : <a class="code" href="namespacellvm.html#acb22fb04083152eee862457e42e8dc31">predecessors</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)) {</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;              <span class="comment">// If the value is known by LazyValueInfo to be a ConstantRange in</span></div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;              <span class="comment">// a predecessor, use that information to try to thread this</span></div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;              <span class="comment">// block.</span></div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;              <a class="code" href="classllvm_1_1ConstantRange.html">ConstantRange</a> CR = LVI-&gt;getConstantRangeOnEdge(</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;                  AddLHS, <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, CxtI ? CxtI : cast&lt;Instruction&gt;(CmpLHS));</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;              <span class="comment">// Propagate the range through the addition.</span></div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;              CR = CR.<a class="code" href="classllvm_1_1ConstantRange.html#a04b4ad79ea8ce56e62e0e0323d302eec">add</a>(AddConst-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a4b001d9b458035fbbfc154d52d354ee9">getValue</a>());</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160; </div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;              <span class="comment">// Get the range where the compare returns true.</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;              <a class="code" href="classllvm_1_1ConstantRange.html">ConstantRange</a> CmpRange = <a class="code" href="classllvm_1_1ConstantRange.html#aa89e9cec92a0b38d2f47a077bf12cc98">ConstantRange::makeExactICmpRegion</a>(</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;                  Pred, cast&lt;ConstantInt&gt;(CmpConst)-&gt;getValue());</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160; </div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;              <a class="code" href="classllvm_1_1Constant.html">Constant</a> *ResC;</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;              <span class="keywordflow">if</span> (CmpRange.<a class="code" href="classllvm_1_1ConstantRange.html#aaca3a4d2b25c24b11179cbd01079b73c">contains</a>(CR))</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;                ResC = <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(CmpType);</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;              <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CmpRange.<a class="code" href="classllvm_1_1ConstantRange.html#aaaa2f5e2c6c3122d2b484f9e50950e18">inverse</a>().<a class="code" href="classllvm_1_1ConstantRange.html#aaca3a4d2b25c24b11179cbd01079b73c">contains</a>(CR))</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;                ResC = <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(CmpType);</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;              <span class="keywordflow">else</span></div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160; </div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;              Result.emplace_back(ResC, <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>);</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;            }</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160; </div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;            <span class="keywordflow">return</span> !Result.empty();</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;          }</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;        }</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;      }</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160; </div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;      <span class="comment">// Try to find a constant value for the LHS of a comparison,</span></div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;      <span class="comment">// and evaluate it statically if we can.</span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">PredValueInfoTy</a> LHSVals;</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;      computeValueKnownInPredecessorsImpl(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0), <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, LHSVals,</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;                                          <a class="code" href="namespacellvm_1_1jumpthreading.html#a7bd584a1977827b11c76096bebbb38a0ae706b769cc98b156d9e22dfbac8aa62b">WantInteger</a>, RecursionSet, CxtI);</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160; </div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;LHSVal : LHSVals) {</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *V = LHSVal.first;</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Folded = <a class="code" href="classllvm_1_1ConstantExpr.html#afe6a25e856a1a63ffff098f05e3f26d2">ConstantExpr::getCompare</a>(Pred, V, CmpConst);</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *KC = <a class="code" href="JumpThreading_8cpp.html#aa1ca02e99b272b5fa744ebef102fa0b0">getKnownConstant</a>(Folded, <a class="code" href="namespacellvm_1_1jumpthreading.html#a7bd584a1977827b11c76096bebbb38a0ae706b769cc98b156d9e22dfbac8aa62b">WantInteger</a>))</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;          Result.emplace_back(KC, LHSVal.second);</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;      }</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160; </div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;      <span class="keywordflow">return</span> !Result.empty();</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    }</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;  }</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160; </div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;SelectInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    <span class="comment">// Handle select instructions where at least one operand is a known constant</span></div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    <span class="comment">// and we can figure out the condition value for any predecessor block.</span></div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a> = <a class="code" href="JumpThreading_8cpp.html#aa1ca02e99b272b5fa744ebef102fa0b0">getKnownConstant</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getTrueValue(), <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309e">Preference</a>);</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a> = <a class="code" href="JumpThreading_8cpp.html#aa1ca02e99b272b5fa744ebef102fa0b0">getKnownConstant</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getFalseValue(), <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309e">Preference</a>);</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">PredValueInfoTy</a> Conds;</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a> || <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>) &amp;&amp;</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;        computeValueKnownInPredecessorsImpl(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getCondition(), <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Conds,</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;                                            <a class="code" href="namespacellvm_1_1jumpthreading.html#a7bd584a1977827b11c76096bebbb38a0ae706b769cc98b156d9e22dfbac8aa62b">WantInteger</a>, RecursionSet, CxtI)) {</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> : Conds) {</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.first;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160; </div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;        <span class="comment">// Figure out what value to use for the condition.</span></div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;        <span class="keywordtype">bool</span> KnownCond;</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>)) {</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;          <span class="comment">// A known boolean.</span></div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;          KnownCond = CI-&gt;isOne();</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;UndefValue&gt;(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>) &amp;&amp; <span class="stringliteral">&quot;Unexpected condition value&quot;</span>);</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;          <span class="comment">// Either operand will do, so be sure to pick the one that&#39;s a known</span></div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;          <span class="comment">// constant.</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;          <span class="comment">// FIXME: Do this more cleverly if both values are known constants?</span></div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;          KnownCond = (<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a> != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;        }</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160; </div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;        <span class="comment">// See if the select has a known constant value for this predecessor.</span></div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *Val = KnownCond ? <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a> : <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>)</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;          Result.emplace_back(Val, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.second);</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;      }</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160; </div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;      <span class="keywordflow">return</span> !Result.empty();</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    }</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;  }</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160; </div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;  <span class="comment">// If all else fails, see if LVI can figure out a constant value for us.</span></div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CxtI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>() == <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> &amp;&amp; <span class="stringliteral">&quot;CxtI should be in BB&quot;</span>);</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *CI = LVI-&gt;getConstant(V, CxtI);</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *KC = <a class="code" href="JumpThreading_8cpp.html#aa1ca02e99b272b5fa744ebef102fa0b0">getKnownConstant</a>(CI, <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309e">Preference</a>)) {</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Pred : <a class="code" href="namespacellvm.html#acb22fb04083152eee862457e42e8dc31">predecessors</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;      Result.emplace_back(KC, Pred);</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;  }</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160; </div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;  <span class="keywordflow">return</span> !Result.empty();</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;}</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;<span class="comment">/// GetBestDestForBranchOnUndef - If we determine that the specified block ends</span></div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;<span class="comment">/// in an undefined jump, decide which block is best to revector to.</span></div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;<span class="comment">/// Since we can pick an arbitrary destination, we pick the successor with the</span></div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;<span class="comment">/// fewest predecessors.  This should reduce the in-degree of the others.</span></div>
<div class="line"><a name="l01024"></a><span class="lineno"><a class="line" href="JumpThreading_8cpp.html#a089d9b5caf2479e6b87f94c73e5b1f70"> 1024</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="JumpThreading_8cpp.html#a089d9b5caf2479e6b87f94c73e5b1f70">getBestDestForJumpOnUndef</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *BBTerm = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator();</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  <span class="keywordtype">unsigned</span> MinSucc = 0;</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *TestBB = BBTerm-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6e5d2e18c81baaeec7dadc81a0dea993">getSuccessor</a>(MinSucc);</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;  <span class="comment">// Compute the successor with the minimum number of predecessors.</span></div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;  <span class="keywordtype">unsigned</span> MinNumPreds = <a class="code" href="namespacellvm.html#ae6d1c31d74bbaaa9e42bcbdc10a499f2">pred_size</a>(TestBB);</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = BBTerm-&gt;<a class="code" href="classllvm_1_1Instruction.html#a3287172f2d13af086e6d66364e8c6de3">getNumSuccessors</a>(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    TestBB = BBTerm-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6e5d2e18c81baaeec7dadc81a0dea993">getSuccessor</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    <span class="keywordtype">unsigned</span> NumPreds = <a class="code" href="namespacellvm.html#ae6d1c31d74bbaaa9e42bcbdc10a499f2">pred_size</a>(TestBB);</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    <span class="keywordflow">if</span> (NumPreds &lt; MinNumPreds) {</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;      MinSucc = <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;      MinNumPreds = NumPreds;</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    }</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;  }</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160; </div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;  <span class="keywordflow">return</span> MinSucc;</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;}</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160; </div>
<div class="line"><a name="l01042"></a><span class="lineno"><a class="line" href="JumpThreading_8cpp.html#ae6fa18c5b7272e2bdd00c26da8041358"> 1042</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="JumpThreading_8cpp.html#ae6fa18c5b7272e2bdd00c26da8041358">hasAddressTakenAndUsed</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;hasAddressTaken()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160; </div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;  <span class="comment">// If the block has its address taken, it may be a tree of dead constants</span></div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;  <span class="comment">// hanging off of it.  These shouldn&#39;t keep the block alive.</span></div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;  <a class="code" href="classllvm_1_1BlockAddress.html">BlockAddress</a> *BA = <a class="code" href="classllvm_1_1BlockAddress.html#af6e2f535824d8f9b4bf1b1a75e5ab57c">BlockAddress::get</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;  BA-&gt;<a class="code" href="classllvm_1_1Constant.html#a960620248182018e566b095f06a605df">removeDeadConstantUsers</a>();</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;  <span class="keywordflow">return</span> !BA-&gt;<a class="code" href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">use_empty</a>();</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;}</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;<span class="comment">/// processBlock - If there are any predecessors whose control can be threaded</span></div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;<span class="comment">/// through to a successor, transform them now.</span></div>
<div class="line"><a name="l01054"></a><span class="lineno"><a class="line" href="classllvm_1_1JumpThreadingPass.html#abbc2deb942b00a9d0d19a6613e374168"> 1054</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1JumpThreadingPass.html#abbc2deb942b00a9d0d19a6613e374168">JumpThreadingPass::processBlock</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;  <span class="comment">// If the block is trivially dead, just return and let the caller nuke it.</span></div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;  <span class="comment">// This simplifies other transformations.</span></div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;  <span class="keywordflow">if</span> (DTU-&gt;isBBPendingDeletion(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) ||</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;      (<a class="code" href="namespacellvm.html#ad66c4759666aab78529658362b498c74">pred_empty</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) &amp;&amp; <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> != &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getParent()-&gt;getEntryBlock()))</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160; </div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;  <span class="comment">// If this block has a single predecessor, and if that pred has a single</span></div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;  <span class="comment">// successor, merge the blocks.  This encourages recursive jump threading</span></div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;  <span class="comment">// because now the condition in this block can be threaded through</span></div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;  <span class="comment">// predecessors of our predecessor block.</span></div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;  <span class="keywordflow">if</span> (maybeMergeBasicBlockIntoOnlyPred(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160; </div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;  <span class="keywordflow">if</span> (tryToUnfoldSelectInCurrBB(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160; </div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;  <span class="comment">// Look if we can propagate guards to predecessors.</span></div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;  <span class="keywordflow">if</span> (HasGuards &amp;&amp; processGuards(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160; </div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;  <span class="comment">// What kind of constant we&#39;re looking for.</span></div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;  <a class="code" href="namespacellvm_1_1jumpthreading.html#a7bd584a1977827b11c76096bebbb38a0">ConstantPreference</a> <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309e">Preference</a> = <a class="code" href="namespacellvm_1_1jumpthreading.html#a7bd584a1977827b11c76096bebbb38a0ae706b769cc98b156d9e22dfbac8aa62b">WantInteger</a>;</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160; </div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;  <span class="comment">// Look to see if the terminator is a conditional branch, switch or indirect</span></div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;  <span class="comment">// branch, if not we can&#39;t thread it.</span></div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Condition;</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023af121d798d2c14b32e81d537a1f0cff8d">Terminator</a> = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator();</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = dyn_cast&lt;BranchInst&gt;(<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023af121d798d2c14b32e81d537a1f0cff8d">Terminator</a>)) {</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    <span class="comment">// Can&#39;t thread an unconditional jump.</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    <span class="keywordflow">if</span> (BI-&gt;isUnconditional()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    Condition = BI-&gt;getCondition();</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SwitchInst.html">SwitchInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;SwitchInst&gt;(<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023af121d798d2c14b32e81d537a1f0cff8d">Terminator</a>)) {</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    Condition = <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getCondition();</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1IndirectBrInst.html">IndirectBrInst</a> *<a class="code" href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46a438dbcc76b79fb10acb447ec5d141287">IB</a> = dyn_cast&lt;IndirectBrInst&gt;(<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023af121d798d2c14b32e81d537a1f0cff8d">Terminator</a>)) {</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    <span class="comment">// Can&#39;t thread indirect branch with no successors.</span></div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46a438dbcc76b79fb10acb447ec5d141287">IB</a>-&gt;getNumSuccessors() == 0) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    Condition = <a class="code" href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46a438dbcc76b79fb10acb447ec5d141287">IB</a>-&gt;getAddress()-&gt;stripPointerCasts();</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309e">Preference</a> = <a class="code" href="namespacellvm_1_1jumpthreading.html#a7bd584a1977827b11c76096bebbb38a0a14d7faebe69e48290ea9c8aa9a0b40fc">WantBlockAddress</a>;</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// Must be an invoke or callbr.</span></div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;  }</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160; </div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;  <span class="comment">// Keep track if we constant folded the condition in this invocation.</span></div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;  <span class="keywordtype">bool</span> ConstantFolded = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160; </div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  <span class="comment">// Run constant folding to see if we can reduce the condition to a simple</span></div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;  <span class="comment">// constant.</span></div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(Condition)) {</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *SimpleVal =</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        <a class="code" href="namespacellvm.html#ab6be6270337c6f7620007555247401ce">ConstantFoldInstruction</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getModule()-&gt;getDataLayout(), TLI);</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    <span class="keywordflow">if</span> (SimpleVal) {</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;      <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;replaceAllUsesWith(SimpleVal);</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a627b2f86ac433d829482d5a5a0f50668">isInstructionTriviallyDead</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, TLI))</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;        <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;      Condition = SimpleVal;</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;      ConstantFolded = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    }</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;  }</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160; </div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;  <span class="comment">// If the terminator is branching on an undef or freeze undef, we can pick any</span></div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;  <span class="comment">// of the successors to branch to.  Let getBestDestForJumpOnUndef decide.</span></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;  <span class="keyword">auto</span> *FI = dyn_cast&lt;FreezeInst&gt;(Condition);</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;  <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(Condition) ||</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;      (FI &amp;&amp; isa&lt;UndefValue&gt;(FI-&gt;getOperand(0)) &amp;&amp; FI-&gt;hasOneUse())) {</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    <span class="keywordtype">unsigned</span> BestSucc = <a class="code" href="JumpThreading_8cpp.html#a089d9b5caf2479e6b87f94c73e5b1f70">getBestDestForJumpOnUndef</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    std::vector&lt;DominatorTree::UpdateType&gt; Updates;</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160; </div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    <span class="comment">// Fold the branch/switch.</span></div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *BBTerm = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator();</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    Updates.reserve(BBTerm-&gt;<a class="code" href="classllvm_1_1Instruction.html#a3287172f2d13af086e6d66364e8c6de3">getNumSuccessors</a>());</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = BBTerm-&gt;<a class="code" href="classllvm_1_1Instruction.html#a3287172f2d13af086e6d66364e8c6de3">getNumSuccessors</a>(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> == BestSucc) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Succ = BBTerm-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6e5d2e18c81baaeec7dadc81a0dea993">getSuccessor</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;      Succ-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#afe7af0c3ec2ef1f525173acd2ea4ba60">removePredecessor</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;      Updates.push_back({<a class="code" href="classllvm_1_1DominatorTreeBase.html#a71c91cbbfc1c0ecf9a69e10ccf739bd7">DominatorTree::Delete</a>, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Succ});</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    }</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160; </div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  In block &#39;&quot;</span> &lt;&lt; <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getName()</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;&#39; folding undef terminator: &quot;</span> &lt;&lt; *BBTerm &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    <a class="code" href="classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">BranchInst::Create</a>(BBTerm-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6e5d2e18c81baaeec7dadc81a0dea993">getSuccessor</a>(BestSucc), BBTerm);</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    ++NumFolds;</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    BBTerm-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    DTU-&gt;applyUpdatesPermissive(Updates);</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    <span class="keywordflow">if</span> (FI)</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;      FI-&gt;eraseFromParent();</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  }</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160; </div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;  <span class="comment">// If the terminator of this block is branching on a constant, simplify the</span></div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;  <span class="comment">// terminator to an unconditional branch.  This can occur due to threading in</span></div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;  <span class="comment">// other blocks.</span></div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="JumpThreading_8cpp.html#aa1ca02e99b272b5fa744ebef102fa0b0">getKnownConstant</a>(Condition, <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309e">Preference</a>)) {</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  In block &#39;&quot;</span> &lt;&lt; <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getName()</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;&#39; folding terminator: &quot;</span> &lt;&lt; *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator()</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;                      &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    ++NumFolds;</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    <a class="code" href="namespacellvm.html#a152d8c380cc937c9dceb402ceec943b6">ConstantFoldTerminator</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <span class="keyword">true</span>, <span class="keyword">nullptr</span>, DTU.get());</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *BPI = getBPI())</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;      BPI-&gt;eraseBlock(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  }</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160; </div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *CondInst = dyn_cast&lt;Instruction&gt;(Condition);</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160; </div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;  <span class="comment">// All the rest of our checks depend on the condition being an instruction.</span></div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;  <span class="keywordflow">if</span> (!CondInst) {</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    <span class="comment">// FIXME: Unify this with code below.</span></div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    <span class="keywordflow">if</span> (processThreadableEdges(Condition, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309e">Preference</a>, <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023af121d798d2c14b32e81d537a1f0cff8d">Terminator</a>))</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    <span class="keywordflow">return</span> ConstantFolded;</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;  }</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160; </div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;  <span class="comment">// Some of the following optimization can safely work on the unfrozen cond.</span></div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CondWithoutFreeze = CondInst;</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *FI = dyn_cast&lt;FreezeInst&gt;(CondInst))</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    CondWithoutFreeze = FI-&gt;getOperand(0);</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160; </div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CmpInst.html">CmpInst</a> *CondCmp = dyn_cast&lt;CmpInst&gt;(CondWithoutFreeze)) {</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    <span class="comment">// If we&#39;re branching on a conditional, LVI might be able to determine</span></div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    <span class="comment">// it&#39;s value at the branch instruction.  We only handle comparisons</span></div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    <span class="comment">// against a constant at this time.</span></div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *CondConst = dyn_cast&lt;Constant&gt;(CondCmp-&gt;getOperand(1))) {</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;      <a class="code" href="classllvm_1_1LazyValueInfo.html#a381305cf61c847551a489431c43cec47">LazyValueInfo::Tristate</a> <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> =</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;          LVI-&gt;getPredicateAt(CondCmp-&gt;getPredicate(), CondCmp-&gt;getOperand(0),</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;                              CondConst, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator(),</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;                              <span class="comment">/*UseBlockValue=*/</span><span class="keyword">false</span>);</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> != <a class="code" href="classllvm_1_1LazyValueInfo.html#a381305cf61c847551a489431c43cec47aa3c975a91c3fef72486f9935e4099c8c">LazyValueInfo::Unknown</a>) {</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;        <span class="comment">// We can safely replace *some* uses of the CondInst if it has</span></div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;        <span class="comment">// exactly one value as returned by LVI. RAUW is incorrect in the</span></div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;        <span class="comment">// presence of guards and assumes, that have the `Cond` as the use. This</span></div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;        <span class="comment">// is because we use the guards/assume to reason about the `Cond` value</span></div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;        <span class="comment">// at the end of block, but RAUW unconditionally replaces all uses</span></div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;        <span class="comment">// including the guards/assumes themselves and the uses before the</span></div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;        <span class="comment">// guard/assume.</span></div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;        <span class="keyword">auto</span> *CI = <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> == <a class="code" href="classllvm_1_1LazyValueInfo.html#a381305cf61c847551a489431c43cec47a9af49c30d67dc9c3b6f06e09a849009b">LazyValueInfo::True</a> ?</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;          <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(CondCmp-&gt;getType()) :</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;          <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(CondCmp-&gt;getType());</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="JumpThreading_8cpp.html#a0e7841803a620fb47c7cd3086debaf54">replaceFoldableUses</a>(CondCmp, CI, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;      }</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160; </div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;      <span class="comment">// We did not manage to simplify this branch, try to see whether</span></div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;      <span class="comment">// CondCmp depends on a known phi-select pattern.</span></div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;      <span class="keywordflow">if</span> (tryToUnfoldSelect(CondCmp, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    }</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;  }</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160; </div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SwitchInst.html">SwitchInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;SwitchInst&gt;(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator()))</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    <span class="keywordflow">if</span> (tryToUnfoldSelect(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160; </div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;  <span class="comment">// Check for some cases that are worth simplifying.  Right now we want to look</span></div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;  <span class="comment">// for loads that are used by a switch or by the condition for the branch.  If</span></div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;  <span class="comment">// we see one, check to see if it&#39;s partially redundant.  If so, insert a PHI</span></div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;  <span class="comment">// which can then be used to thread the values.</span></div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *SimplifyValue = CondWithoutFreeze;</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160; </div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CmpInst.html">CmpInst</a> *CondCmp = dyn_cast&lt;CmpInst&gt;(SimplifyValue))</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;    <span class="keywordflow">if</span> (isa&lt;Constant&gt;(CondCmp-&gt;getOperand(1)))</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;      SimplifyValue = CondCmp-&gt;getOperand(0);</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160; </div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;  <span class="comment">// TODO: There are other places where load PRE would be profitable, such as</span></div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;  <span class="comment">// more complex comparisons.</span></div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LoadI = dyn_cast&lt;LoadInst&gt;(SimplifyValue))</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    <span class="keywordflow">if</span> (simplifyPartiallyRedundantLoad(LoadI))</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160; </div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;  <span class="comment">// Before threading, try to propagate profile data backwards:</span></div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast&lt;PHINode&gt;(CondInst))</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    <span class="keywordflow">if</span> (PN-&gt;getParent() == <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> &amp;&amp; isa&lt;BranchInst&gt;(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator()))</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;      <a class="code" href="JumpThreading_8cpp.html#ae5a9dfd216e7560889e2366f34ddd9f1">updatePredecessorProfileMetadata</a>(PN, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160; </div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;  <span class="comment">// Handle a variety of cases where we are branching on something derived from</span></div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;  <span class="comment">// a PHI node in the current block.  If we can prove that any predecessors</span></div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;  <span class="comment">// compute a predictable value based on a PHI node, thread those predecessors.</span></div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;  <span class="keywordflow">if</span> (processThreadableEdges(CondInst, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309e">Preference</a>, <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023af121d798d2c14b32e81d537a1f0cff8d">Terminator</a>))</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160; </div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;  <span class="comment">// If this is an otherwise-unfoldable branch on a phi node or freeze(phi) in</span></div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;  <span class="comment">// the current block, see if we can simplify.</span></div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast&lt;PHINode&gt;(CondWithoutFreeze);</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;  <span class="keywordflow">if</span> (PN &amp;&amp; PN-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>() == <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> &amp;&amp; isa&lt;BranchInst&gt;(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator()))</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    <span class="keywordflow">return</span> processBranchOnPHI(PN);</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160; </div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;  <span class="comment">// If this is an otherwise-unfoldable branch on a XOR, see if we can simplify.</span></div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;  <span class="keywordflow">if</span> (CondInst-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">getOpcode</a>() == Instruction::Xor &amp;&amp;</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;      CondInst-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>() == <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> &amp;&amp; isa&lt;BranchInst&gt;(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator()))</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    <span class="keywordflow">return</span> processBranchOnXOR(cast&lt;BinaryOperator&gt;(CondInst));</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160; </div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;  <span class="comment">// Search for a stronger dominating condition that can be used to simplify a</span></div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;  <span class="comment">// conditional branch leaving BB.</span></div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;  <span class="keywordflow">if</span> (processImpliedCondition(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160; </div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;}</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160; </div>
<div class="line"><a name="l01253"></a><span class="lineno"><a class="line" href="classllvm_1_1JumpThreadingPass.html#ac06e19670a4cb86b0c885cf67bdb1bc4"> 1253</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1JumpThreadingPass.html#ac06e19670a4cb86b0c885cf67bdb1bc4">JumpThreadingPass::processImpliedCondition</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;  <span class="keyword">auto</span> *BI = dyn_cast&lt;BranchInst&gt;(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator());</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;  <span class="keywordflow">if</span> (!BI || !BI-&gt;isConditional())</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160; </div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = BI-&gt;getCondition();</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;  <span class="comment">// Assuming that predecessor&#39;s branch was taken, if pred&#39;s branch condition</span></div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;  <span class="comment">// (V) implies Cond, Cond can be either true, undef, or poison. In this case,</span></div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;  <span class="comment">// freeze(Cond) is either true or a nondeterministic value.</span></div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  <span class="comment">// If freeze(Cond) has only one use, we can freely fold freeze(Cond) to true</span></div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;  <span class="comment">// without affecting other instructions.</span></div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;  <span class="keyword">auto</span> *FICond = dyn_cast&lt;FreezeInst&gt;(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>);</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;  <span class="keywordflow">if</span> (FICond &amp;&amp; FICond-&gt;hasOneUse())</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = FICond-&gt;getOperand(0);</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    FICond = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160; </div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *CurrentBB = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>;</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *CurrentPred = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getSinglePredecessor();</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;  <span class="keywordtype">unsigned</span> Iter = 0;</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160; </div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;  <span class="keyword">auto</span> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getModule()-&gt;getDataLayout();</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160; </div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;  <span class="keywordflow">while</span> (CurrentPred &amp;&amp; Iter++ &lt; <a class="code" href="JumpThreading_8cpp.html#aad39260b2dc9bc1859acbb7502a8e75a">ImplicationSearchThreshold</a>) {</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    <span class="keyword">auto</span> *PBI = dyn_cast&lt;BranchInst&gt;(CurrentPred-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    <span class="keywordflow">if</span> (!PBI || !PBI-&gt;isConditional())</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;    <span class="keywordflow">if</span> (PBI-&gt;getSuccessor(0) != CurrentBB &amp;&amp; PBI-&gt;getSuccessor(1) != CurrentBB)</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160; </div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    <span class="keywordtype">bool</span> CondIsTrue = PBI-&gt;getSuccessor(0) == CurrentBB;</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    std::optional&lt;bool&gt; Implication =</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;        <a class="code" href="namespacellvm.html#af7f2eb961a542779e97c0b3ec7fa6623">isImpliedCondition</a>(PBI-&gt;getCondition(), <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, CondIsTrue);</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160; </div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;    <span class="comment">// If the branch condition of BB (which is Cond) and CurrentPred are</span></div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    <span class="comment">// exactly the same freeze instruction, Cond can be folded into CondIsTrue.</span></div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    <span class="keywordflow">if</span> (!Implication &amp;&amp; FICond &amp;&amp; isa&lt;FreezeInst&gt;(PBI-&gt;getCondition())) {</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;      <span class="keywordflow">if</span> (cast&lt;FreezeInst&gt;(PBI-&gt;getCondition())-&gt;getOperand(0) ==</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;          FICond-&gt;getOperand(0))</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;        Implication = CondIsTrue;</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    }</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160; </div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;    <span class="keywordflow">if</span> (Implication) {</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *KeepSucc = BI-&gt;getSuccessor(*Implication ? 0 : 1);</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *RemoveSucc = BI-&gt;getSuccessor(*Implication ? 1 : 0);</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;      RemoveSucc-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#afe7af0c3ec2ef1f525173acd2ea4ba60">removePredecessor</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;      <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *UncondBI = <a class="code" href="classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">BranchInst::Create</a>(KeepSucc, BI);</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;      UncondBI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae8f5bf5cc06f696b52c709677df00fbf">setDebugLoc</a>(BI-&gt;getDebugLoc());</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;      ++NumFolds;</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;      BI-&gt;eraseFromParent();</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;      <span class="keywordflow">if</span> (FICond)</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;        FICond-&gt;eraseFromParent();</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160; </div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;      DTU-&gt;applyUpdatesPermissive({{<a class="code" href="classllvm_1_1DominatorTreeBase.html#a71c91cbbfc1c0ecf9a69e10ccf739bd7">DominatorTree::Delete</a>, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, RemoveSucc}});</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *BPI = getBPI())</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;        BPI-&gt;eraseBlock(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    }</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;    CurrentBB = CurrentPred;</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;    CurrentPred = CurrentBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a59fb91d1691350f7d1b8e8a114e3f2a4">getSinglePredecessor</a>();</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;  }</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160; </div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;}</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;<span class="comment">/// Return true if Op is an instruction defined in the given block.</span></div>
<div class="line"><a name="l01319"></a><span class="lineno"><a class="line" href="JumpThreading_8cpp.html#ad67c03658611a6ae7dc39f84346f18bd"> 1319</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="JumpThreading_8cpp.html#ad67c03658611a6ae7dc39f84346f18bd">isOpDefinedInBlock</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *OpInst = dyn_cast&lt;Instruction&gt;(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>))</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;    <span class="keywordflow">if</span> (OpInst-&gt;getParent() == <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;}</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;<span class="comment">/// simplifyPartiallyRedundantLoad - If LoadI is an obviously partially</span></div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;<span class="comment">/// redundant load instruction, eliminate it by replacing it with a PHI node.</span></div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;<span class="comment">/// This is an important optimization that encourages jump threading, and needs</span></div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;<span class="comment">/// to be run interlaced with other jump threading tasks.</span></div>
<div class="line"><a name="l01330"></a><span class="lineno"><a class="line" href="classllvm_1_1JumpThreadingPass.html#a064ce69a10374b5342954d481e21fa25"> 1330</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1JumpThreadingPass.html#a064ce69a10374b5342954d481e21fa25">JumpThreadingPass::simplifyPartiallyRedundantLoad</a>(<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LoadI) {</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;  <span class="comment">// Don&#39;t hack volatile and ordered loads.</span></div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;  <span class="keywordflow">if</span> (!LoadI-&gt;<a class="code" href="classllvm_1_1LoadInst.html#ac072f8698be17d52f20bb63d59e6ce41">isUnordered</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160; </div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;  <span class="comment">// If the load is defined in a block with exactly one predecessor, it can&#39;t be</span></div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;  <span class="comment">// partially redundant.</span></div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *LoadBB = LoadI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>();</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;  <span class="keywordflow">if</span> (LoadBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a59fb91d1691350f7d1b8e8a114e3f2a4">getSinglePredecessor</a>())</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160; </div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;  <span class="comment">// If the load is defined in an EH pad, it can&#39;t be partially redundant,</span></div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;  <span class="comment">// because the edges between the invoke and the EH pad cannot have other</span></div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;  <span class="comment">// instructions between them.</span></div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;  <span class="keywordflow">if</span> (LoadBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ac9c170fde1808bbd4436a0dbd6d5e755">isEHPad</a>())</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160; </div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *LoadedPtr = LoadI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160; </div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;  <span class="comment">// If the loaded operand is defined in the LoadBB and its not a phi,</span></div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;  <span class="comment">// it can&#39;t be available in predecessors.</span></div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="JumpThreading_8cpp.html#ad67c03658611a6ae7dc39f84346f18bd">isOpDefinedInBlock</a>(LoadedPtr, LoadBB) &amp;&amp; !isa&lt;PHINode&gt;(LoadedPtr))</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160; </div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;  <span class="comment">// Scan a few instructions up from the load, to see if it is obviously live at</span></div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;  <span class="comment">// the entry to its block.</span></div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> BBIt(LoadI);</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;  <span class="keywordtype">bool</span> IsLoadCSE;</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *AvailableVal = <a class="code" href="namespacellvm.html#a4112c4d55a504c443acdc97bf2a3acdf">FindAvailableLoadedValue</a>(</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;          LoadI, LoadBB, BBIt, <a class="code" href="namespacellvm.html#a92ac27b929f0de70e1336a7ab5248861">DefMaxInstsToScan</a>, AA, &amp;IsLoadCSE)) {</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;    <span class="comment">// If the value of the load is locally available within the block, just use</span></div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    <span class="comment">// it.  This frequently occurs for reg2mem&#39;d allocas.</span></div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160; </div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;    <span class="keywordflow">if</span> (IsLoadCSE) {</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;      <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *NLoadI = cast&lt;LoadInst&gt;(AvailableVal);</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;      <a class="code" href="namespacellvm.html#a9b43098c569ea8289ed1ab70ee9a00af">combineMetadataForCSE</a>(NLoadI, LoadI, <span class="keyword">false</span>);</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    };</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160; </div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;    <span class="comment">// If the returned value is the load itself, replace with poison. This can</span></div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    <span class="comment">// only happen in dead loops.</span></div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    <span class="keywordflow">if</span> (AvailableVal == LoadI)</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;      AvailableVal = <a class="code" href="classllvm_1_1PoisonValue.html#a1bf08613fb664a2e377a9a72c59a6b66">PoisonValue::get</a>(LoadI-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    <span class="keywordflow">if</span> (AvailableVal-&gt;getType() != LoadI-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;      AvailableVal = <a class="code" href="classllvm_1_1CastInst.html#a31d2885660f654b31d8741726c3ea8d9">CastInst::CreateBitOrPointerCast</a>(</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;          AvailableVal, LoadI-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), <span class="stringliteral">&quot;&quot;</span>, LoadI);</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    LoadI-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(AvailableVal);</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;    LoadI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;  }</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160; </div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;  <span class="comment">// Otherwise, if we scanned the whole block and got to the top of the block,</span></div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;  <span class="comment">// we know the block is locally transparent to the load.  If not, something</span></div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;  <span class="comment">// might clobber its value.</span></div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;  <span class="keywordflow">if</span> (BBIt != LoadBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>())</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160; </div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;  <span class="comment">// If all of the loads and stores that feed the value have the same AA tags,</span></div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;  <span class="comment">// then we can propagate them onto any newly inserted loads.</span></div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;  <a class="code" href="structllvm_1_1AAMDNodes.html">AAMDNodes</a> AATags = LoadI-&gt;<a class="code" href="classllvm_1_1Instruction.html#aade703948f2fdabdc65868bdf42d3141">getAAMetadata</a>();</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160; </div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock*, 8&gt;</a> PredsScanned;</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160; </div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;  <span class="keyword">using</span> AvailablePredsTy = <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;BasicBlock *, Value *&gt;</a>, 8&gt;;</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160; </div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;  AvailablePredsTy AvailablePreds;</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OneUnavailablePred = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;LoadInst*, 8&gt;</a> CSELoads;</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160; </div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;  <span class="comment">// If we got here, the loaded value is transparent through to the start of the</span></div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;  <span class="comment">// block.  Check to see if it is available in any of the predecessor blocks.</span></div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PredBB : <a class="code" href="namespacellvm.html#acb22fb04083152eee862457e42e8dc31">predecessors</a>(LoadBB)) {</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    <span class="comment">// If we already scanned this predecessor, skip it.</span></div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    <span class="keywordflow">if</span> (!PredsScanned.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(PredBB).second)</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160; </div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    BBIt = PredBB-&gt;end();</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    <span class="keywordtype">unsigned</span> NumScanedInst = 0;</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *PredAvailable = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    <span class="comment">// NOTE: We don&#39;t CSE load that is volatile or anything stronger than</span></div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    <span class="comment">// unordered, that should have been checked when we entered the function.</span></div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(LoadI-&gt;<a class="code" href="classllvm_1_1LoadInst.html#ac072f8698be17d52f20bb63d59e6ce41">isUnordered</a>() &amp;&amp;</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;           <span class="stringliteral">&quot;Attempting to CSE volatile or atomic loads&quot;</span>);</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;    <span class="comment">// If this is a load on a phi pointer, phi-translate it and search</span></div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    <span class="comment">// for available load/store to the pointer in predecessors.</span></div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *AccessTy = LoadI-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = LoadI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a4ba3a5be6c0e9b9e8a525de055836733">getModule</a>()-&gt;<a class="code" href="classllvm_1_1Module.html#a6d883605206368bc536cc9ded97209b8">getDataLayout</a>();</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    <a class="code" href="classllvm_1_1MemoryLocation.html">MemoryLocation</a> Loc(LoadedPtr-&gt;<a class="code" href="classllvm_1_1Value.html#a159bf794249e0567baf2a2a714d5c679">DoPHITranslation</a>(LoadBB, PredBB),</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;                       <a class="code" href="classllvm_1_1LocationSize.html#a131715ceeb92fb803a329d6b76d14e0d">LocationSize::precise</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeStoreSize(AccessTy)),</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;                       AATags);</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;    PredAvailable = <a class="code" href="namespacellvm.html#a52127e18cf8cb2d6e31b8178d3e14196">findAvailablePtrLoadStore</a>(Loc, AccessTy, LoadI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a57efb022f2ee2e19e4cdf582f4d27f2d">isAtomic</a>(),</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;                                              PredBB, BBIt, <a class="code" href="namespacellvm.html#a92ac27b929f0de70e1336a7ab5248861">DefMaxInstsToScan</a>,</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;                                              AA, &amp;IsLoadCSE, &amp;NumScanedInst);</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160; </div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;    <span class="comment">// If PredBB has a single predecessor, continue scanning through the</span></div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;    <span class="comment">// single predecessor.</span></div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *SinglePredBB = PredBB;</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;    <span class="keywordflow">while</span> (!PredAvailable &amp;&amp; SinglePredBB &amp;&amp; BBIt == SinglePredBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>() &amp;&amp;</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;           NumScanedInst &lt; <a class="code" href="namespacellvm.html#a92ac27b929f0de70e1336a7ab5248861">DefMaxInstsToScan</a>) {</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;      SinglePredBB = SinglePredBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a59fb91d1691350f7d1b8e8a114e3f2a4">getSinglePredecessor</a>();</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;      <span class="keywordflow">if</span> (SinglePredBB) {</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;        BBIt = SinglePredBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>();</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;        PredAvailable = <a class="code" href="namespacellvm.html#a52127e18cf8cb2d6e31b8178d3e14196">findAvailablePtrLoadStore</a>(</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;            Loc, AccessTy, LoadI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a57efb022f2ee2e19e4cdf582f4d27f2d">isAtomic</a>(), SinglePredBB, BBIt,</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;            (<a class="code" href="namespacellvm.html#a92ac27b929f0de70e1336a7ab5248861">DefMaxInstsToScan</a> - NumScanedInst), AA, &amp;IsLoadCSE,</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;            &amp;NumScanedInst);</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;      }</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    }</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160; </div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;    <span class="keywordflow">if</span> (!PredAvailable) {</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;      OneUnavailablePred = PredBB;</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    }</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160; </div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;    <span class="keywordflow">if</span> (IsLoadCSE)</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;      CSELoads.push_back(cast&lt;LoadInst&gt;(PredAvailable));</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160; </div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;    <span class="comment">// If so, this load is partially redundant.  Remember this info so that we</span></div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;    <span class="comment">// can create a PHI node.</span></div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;    AvailablePreds.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(PredBB, PredAvailable);</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;  }</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160; </div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;  <span class="comment">// If the loaded value isn&#39;t available in any predecessor, it isn&#39;t partially</span></div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;  <span class="comment">// redundant.</span></div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;  <span class="keywordflow">if</span> (AvailablePreds.empty()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160; </div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;  <span class="comment">// Okay, the loaded value is available in at least one (and maybe all!)</span></div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;  <span class="comment">// predecessors.  If the value is unavailable in more than one unique</span></div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;  <span class="comment">// predecessor, we want to insert a merge block for those common predecessors.</span></div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;  <span class="comment">// This ensures that we only have to insert one reload, thus not increasing</span></div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;  <span class="comment">// code size.</span></div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *UnavailablePred = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160; </div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;  <span class="comment">// If the value is unavailable in one of predecessors, we will end up</span></div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;  <span class="comment">// inserting a new instruction into them. It is only valid if all the</span></div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;  <span class="comment">// instructions before LoadI are guaranteed to pass execution to its</span></div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;  <span class="comment">// successor, or if LoadI is safe to speculate.</span></div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;  <span class="comment">// TODO: If this logic becomes more complex, and we will perform PRE insertion</span></div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;  <span class="comment">// farther than to a predecessor, we need to reuse the code from GVN&#39;s PRE.</span></div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;  <span class="comment">// It requires domination tree analysis, so for this simple case it is an</span></div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;  <span class="comment">// overkill.</span></div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;  <span class="keywordflow">if</span> (PredsScanned.<a class="code" href="classllvm_1_1SmallPtrSetImplBase.html#a0e1c3175b0ac22fe3853651c28e1ecb8">size</a>() != AvailablePreds.size() &amp;&amp;</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;      !<a class="code" href="namespacellvm.html#abe76d72cda6b2b4562c72accb510040b">isSafeToSpeculativelyExecute</a>(LoadI))</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = LoadBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(); &amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != LoadI; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#abff5a423c1f45e23958dde8ee695c9a9">isGuaranteedToTransferExecutionToSuccessor</a>(&amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160; </div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;  <span class="comment">// If there is exactly one predecessor where the value is unavailable, the</span></div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;  <span class="comment">// already computed &#39;OneUnavailablePred&#39; block is it.  If it ends in an</span></div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;  <span class="comment">// unconditional branch, we know that it isn&#39;t a critical edge.</span></div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;  <span class="keywordflow">if</span> (PredsScanned.<a class="code" href="classllvm_1_1SmallPtrSetImplBase.html#a0e1c3175b0ac22fe3853651c28e1ecb8">size</a>() == AvailablePreds.size()+1 &amp;&amp;</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;      OneUnavailablePred-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#a3287172f2d13af086e6d66364e8c6de3">getNumSuccessors</a>() == 1) {</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;    UnavailablePred = OneUnavailablePred;</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (PredsScanned.<a class="code" href="classllvm_1_1SmallPtrSetImplBase.html#a0e1c3175b0ac22fe3853651c28e1ecb8">size</a>() != AvailablePreds.size()) {</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    <span class="comment">// Otherwise, we had multiple unavailable predecessors or we had a critical</span></div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;    <span class="comment">// edge from the one.</span></div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock*, 8&gt;</a> PredsToSplit;</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock*, 8&gt;</a> AvailablePredSet;</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160; </div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;AvailablePred : AvailablePreds)</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;      AvailablePredSet.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(AvailablePred.first);</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160; </div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    <span class="comment">// Add all the unavailable predecessors to the PredsToSplit list.</span></div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> : <a class="code" href="namespacellvm.html#acb22fb04083152eee862457e42e8dc31">predecessors</a>(LoadBB)) {</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;      <span class="comment">// If the predecessor is an indirect goto, we can&#39;t split the edge.</span></div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;      <span class="keywordflow">if</span> (isa&lt;IndirectBrInst&gt;(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>-&gt;getTerminator()))</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160; </div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;      <span class="keywordflow">if</span> (!AvailablePredSet.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>))</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;        PredsToSplit.push_back(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>);</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    }</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160; </div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    <span class="comment">// Split them out to their own block.</span></div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;    UnavailablePred = splitBlockPreds(LoadBB, PredsToSplit, <span class="stringliteral">&quot;thread-pre-split&quot;</span>);</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;  }</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160; </div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;  <span class="comment">// If the value isn&#39;t available in all predecessors, then there will be</span></div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;  <span class="comment">// exactly one where it isn&#39;t available.  Insert a load on that edge and add</span></div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;  <span class="comment">// it to the AvailablePreds list.</span></div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;  <span class="keywordflow">if</span> (UnavailablePred) {</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(UnavailablePred-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#a3287172f2d13af086e6d66364e8c6de3">getNumSuccessors</a>() == 1 &amp;&amp;</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;           <span class="stringliteral">&quot;Can&#39;t handle critical edge here!&quot;</span>);</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;    <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *NewVal = <span class="keyword">new</span> <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a>(</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;        LoadI-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), LoadedPtr-&gt;<a class="code" href="classllvm_1_1Value.html#a159bf794249e0567baf2a2a714d5c679">DoPHITranslation</a>(LoadBB, UnavailablePred),</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;        LoadI-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;.pr&quot;</span>, <span class="keyword">false</span>, LoadI-&gt;<a class="code" href="classllvm_1_1LoadInst.html#af51c113a039c82f6870df5dc9666b5e3">getAlign</a>(),</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;        LoadI-&gt;<a class="code" href="classllvm_1_1LoadInst.html#a93603fe0d4168b92a901f06015ecb2e7">getOrdering</a>(), LoadI-&gt;<a class="code" href="classllvm_1_1LoadInst.html#aca6c2de6950cb093f509ed2b67e02da2">getSyncScopeID</a>(),</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;        UnavailablePred-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    NewVal-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae8f5bf5cc06f696b52c709677df00fbf">setDebugLoc</a>(LoadI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">getDebugLoc</a>());</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;    <span class="keywordflow">if</span> (AATags)</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;      NewVal-&gt;<a class="code" href="classllvm_1_1Instruction.html#a4dd9b6c5bb93e01393c47dbe60f8b23f">setAAMetadata</a>(AATags);</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160; </div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;    AvailablePreds.emplace_back(UnavailablePred, NewVal);</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;  }</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160; </div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;  <span class="comment">// Now we know that each predecessor of this block has a value in</span></div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;  <span class="comment">// AvailablePreds, sort them for efficient access as we&#39;re walking the preds.</span></div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;  <a class="code" href="namespacellvm.html#add1eb5637dd671428b6f138ed3db6428">array_pod_sort</a>(AvailablePreds.begin(), AvailablePreds.end());</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160; </div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;  <span class="comment">// Create a PHI node at the start of the block for the PRE&#39;d load value.</span></div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;  <a class="code" href="classllvm_1_1PredIterator.html">pred_iterator</a> <a class="code" href="PassBuilderBindings_8cpp.html#afd1501c49c84f3addfd108c2484f5674">PB</a> = <a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(LoadBB), PE = <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(LoadBB);</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = <a class="code" href="classllvm_1_1PHINode.html#ab0ff669b12c20c07137705c38872ec63">PHINode::Create</a>(LoadI-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), std::distance(<a class="code" href="PassBuilderBindings_8cpp.html#afd1501c49c84f3addfd108c2484f5674">PB</a>, PE), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;                                &amp;LoadBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ab706e7ebb1969c5e34f28bfcf2ff719e">front</a>());</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;  PN-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(LoadI);</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;  PN-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae8f5bf5cc06f696b52c709677df00fbf">setDebugLoc</a>(LoadI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">getDebugLoc</a>());</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160; </div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;  <span class="comment">// Insert new entries into the PHI for each predecessor.  A single block may</span></div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;  <span class="comment">// have multiple entries here.</span></div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PredIterator.html">pred_iterator</a> PI = <a class="code" href="PassBuilderBindings_8cpp.html#afd1501c49c84f3addfd108c2484f5674">PB</a>; PI != PE; ++PI) {</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = *PI;</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    AvailablePredsTy::iterator <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> =</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;        <a class="code" href="namespacellvm.html#aa81eb67f09ee4944eaeeddbc54c0c0de">llvm::lower_bound</a>(AvailablePreds, std::make_pair(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>, (<a class="code" href="classllvm_1_1Value.html">Value</a> *)<span class="keyword">nullptr</span>));</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160; </div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != AvailablePreds.end() &amp;&amp; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;first == <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> &amp;&amp;</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;           <span class="stringliteral">&quot;Didn&#39;t find entry for predecessor!&quot;</span>);</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160; </div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;    <span class="comment">// If we have an available predecessor but it requires casting, insert the</span></div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;    <span class="comment">// cast in the predecessor and use the cast. Note that we have to update the</span></div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;    <span class="comment">// AvailablePreds vector as we go so that all of the PHI entries for this</span></div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    <span class="comment">// predecessor use the same bitcast.</span></div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;PredV = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;second;</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;    <span class="keywordflow">if</span> (PredV-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() != LoadI-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;      PredV = <a class="code" href="classllvm_1_1CastInst.html#a31d2885660f654b31d8741726c3ea8d9">CastInst::CreateBitOrPointerCast</a>(PredV, LoadI-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;                                               <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>-&gt;getTerminator());</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160; </div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;    PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(PredV, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;first);</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;  }</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160; </div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *PredLoadI : CSELoads) {</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;    <a class="code" href="namespacellvm.html#a9b43098c569ea8289ed1ab70ee9a00af">combineMetadataForCSE</a>(PredLoadI, LoadI, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;  }</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160; </div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;  LoadI-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(PN);</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;  LoadI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160; </div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;}</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;<span class="comment">/// findMostPopularDest - The specified list contains multiple possible</span></div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;<span class="comment">/// threadable destinations.  Pick the one that occurs the most frequently in</span></div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;<span class="comment">/// the list.</span></div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *</div>
<div class="line"><a name="l01569"></a><span class="lineno"><a class="line" href="JumpThreading_8cpp.html#ae146bcb2829260a3a094d0a9a2e5fd8b"> 1569</a></span>&#160;<a class="code" href="JumpThreading_8cpp.html#ae146bcb2829260a3a094d0a9a2e5fd8b">findMostPopularDest</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;                    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt;std::pair&lt;<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *,</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;                                          <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *&gt;&gt; &amp;PredToDestList) {</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!PredToDestList.empty());</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160; </div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;  <span class="comment">// Determine popularity.  If there are multiple possible destinations, we</span></div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;  <span class="comment">// explicitly choose to ignore &#39;undef&#39; destinations.  We prefer to thread</span></div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;  <span class="comment">// blocks with known and real destinations to threading undef.  We&#39;ll handle</span></div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;  <span class="comment">// them later if interesting.</span></div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;  <a class="code" href="classllvm_1_1MapVector.html">MapVector&lt;BasicBlock *, unsigned&gt;</a> DestPopularity;</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160; </div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;  <span class="comment">// Populate DestPopularity with the successors in the order they appear in the</span></div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;  <span class="comment">// successor list.  This way, we ensure determinism by iterating it in the</span></div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;  <span class="comment">// same order in std::max_element below.  We map nullptr to 0 so that we can</span></div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;  <span class="comment">// return nullptr when PredToDestList contains nullptr only.</span></div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;  DestPopularity[<span class="keyword">nullptr</span>] = 0;</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *SuccBB : <a class="code" href="namespacellvm.html#a26e2a938b431eaa6eca2beaa96410c9d">successors</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;    DestPopularity[SuccBB] = 0;</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160; </div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;PredToDest : PredToDestList)</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;    <span class="keywordflow">if</span> (PredToDest.second)</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;      DestPopularity[PredToDest.second]++;</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160; </div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;  <span class="comment">// Find the most popular dest.</span></div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;  <span class="keyword">auto</span> MostPopular = std::max_element(</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;      DestPopularity.<a class="code" href="classllvm_1_1MapVector.html#aa610cab7ee61e36a6d1d122fc252c278">begin</a>(), DestPopularity.<a class="code" href="classllvm_1_1MapVector.html#a0881334358ff6ff7ff8cea5562c7988e">end</a>(), <a class="code" href="structllvm_1_1less__second.html">llvm::less_second</a>());</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160; </div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;  <span class="comment">// Okay, we have finally picked the most popular destination.</span></div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;  <span class="keywordflow">return</span> MostPopular-&gt;first;</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;}</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160; </div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;<span class="comment">// Try to evaluate the value of V when the control flows from PredPredBB to</span></div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;<span class="comment">// BB-&gt;getSinglePredecessor() and then on to BB.</span></div>
<div class="line"><a name="l01602"></a><span class="lineno"><a class="line" href="classllvm_1_1JumpThreadingPass.html#a899601de8466074dfecf4db437211575"> 1602</a></span>&#160;<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="classllvm_1_1JumpThreadingPass.html#a899601de8466074dfecf4db437211575">JumpThreadingPass::evaluateOnPredecessorEdge</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;                                                       <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PredPredBB,</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;                                                       <a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PredBB = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getSinglePredecessor();</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PredBB &amp;&amp; <span class="stringliteral">&quot;Expected a single predecessor&quot;</span>);</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160; </div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *Cst = dyn_cast&lt;Constant&gt;(V)) {</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;    <span class="keywordflow">return</span> Cst;</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;  }</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160; </div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;  <span class="comment">// Consult LVI if V is not an instruction in BB or PredBB.</span></div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(V);</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> || (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent() != <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> &amp;&amp; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent() != PredBB)) {</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;    <span class="keywordflow">return</span> LVI-&gt;getConstantOnEdge(V, PredPredBB, PredBB, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;  }</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160; </div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;  <span class="comment">// Look into a PHI argument.</span></div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a> = dyn_cast&lt;PHINode&gt;(V)) {</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;getParent() == PredBB)</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;      <span class="keywordflow">return</span> dyn_cast&lt;Constant&gt;(<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;getIncomingValueForBlock(PredPredBB));</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;  }</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160; </div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;  <span class="comment">// If we have a CmpInst, try to fold it for each incoming edge into PredBB.</span></div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CmpInst.html">CmpInst</a> *CondCmp = dyn_cast&lt;CmpInst&gt;(V)) {</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    <span class="keywordflow">if</span> (CondCmp-&gt;getParent() == <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Op0 =</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;          evaluateOnPredecessorEdge(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, PredPredBB, CondCmp-&gt;getOperand(0));</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Op1 =</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;          evaluateOnPredecessorEdge(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, PredPredBB, CondCmp-&gt;getOperand(1));</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;      <span class="keywordflow">if</span> (Op0 &amp;&amp; Op1) {</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantExpr.html#afe6a25e856a1a63ffff098f05e3f26d2">ConstantExpr::getCompare</a>(CondCmp-&gt;getPredicate(), Op0, Op1);</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;      }</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    }</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;  }</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160; </div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;}</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160; </div>
<div class="line"><a name="l01642"></a><span class="lineno"><a class="line" href="classllvm_1_1JumpThreadingPass.html#a96191c096e61f77ea0a6771263bdb5e1"> 1642</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1JumpThreadingPass.html#a96191c096e61f77ea0a6771263bdb5e1">JumpThreadingPass::processThreadableEdges</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;                                               <a class="code" href="namespacellvm_1_1jumpthreading.html#a7bd584a1977827b11c76096bebbb38a0">ConstantPreference</a> <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309e">Preference</a>,</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;                                               <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *CxtI) {</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;  <span class="comment">// If threading this would thread across a loop header, don&#39;t even try to</span></div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;  <span class="comment">// thread the edge.</span></div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;  <span class="keywordflow">if</span> (LoopHeaders.count(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160; </div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">PredValueInfoTy</a> PredValues;</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;  <span class="keywordflow">if</span> (!computeValueKnownInPredecessors(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, PredValues, <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309e">Preference</a>,</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;                                       CxtI)) {</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;    <span class="comment">// We don&#39;t have known values in predecessors.  See if we can thread through</span></div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    <span class="comment">// BB and its sole predecessor.</span></div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;    <span class="keywordflow">return</span> maybethreadThroughTwoBasicBlocks(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>);</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;  }</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160; </div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!PredValues.empty() &amp;&amp;</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;         <span class="stringliteral">&quot;computeValueKnownInPredecessors returned true with no values&quot;</span>);</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160; </div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;IN BB: &quot;</span> &lt;&lt; *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>;</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;             <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;PredValue : PredValues) {</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;               <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  BB &#39;&quot;</span> &lt;&lt; <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getName()</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;&#39;: FOUND condition = &quot;</span> &lt;&lt; *PredValue.first</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; for pred &#39;&quot;</span> &lt;&lt; PredValue.second-&gt;getName() &lt;&lt; <span class="stringliteral">&quot;&#39;.\n&quot;</span>;</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;  });</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160; </div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;  <span class="comment">// Decide what we want to thread through.  Convert our list of known values to</span></div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;  <span class="comment">// a list of known destinations for each pred.  This also discards duplicate</span></div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;  <span class="comment">// predecessors and keeps track of the undefined inputs (which are represented</span></div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;  <span class="comment">// as a null dest in the PredToDestList).</span></div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock*, 16&gt;</a> SeenPreds;</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;BasicBlock*, BasicBlock*&gt;</a>, 16&gt; PredToDestList;</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160; </div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OnlyDest = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *MultipleDestSentinel = (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a>*)(<a class="code" href="classintptr__t.html">intptr_t</a>)~0ULL;</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *OnlyVal = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *MultipleVal = (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *)(<a class="code" href="classintptr__t.html">intptr_t</a>)~0ULL;</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160; </div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;PredValue : PredValues) {</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Pred = PredValue.second;</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;    <span class="keywordflow">if</span> (!SeenPreds.insert(Pred).second)</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;      <span class="keywordflow">continue</span>;  <span class="comment">// Duplicate predecessor entry.</span></div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160; </div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Val = PredValue.first;</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160; </div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *DestBB;</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(Val))</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;      DestBB = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = dyn_cast&lt;BranchInst&gt;(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator())) {</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;ConstantInt&gt;(Val) &amp;&amp; <span class="stringliteral">&quot;Expecting a constant integer&quot;</span>);</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;      DestBB = BI-&gt;getSuccessor(cast&lt;ConstantInt&gt;(Val)-&gt;<a class="code" href="Lint_8cpp.html#a45005634b54e2126cb3e6ec0dbc9ade4">isZero</a>());</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SwitchInst.html">SwitchInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;SwitchInst&gt;(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator())) {</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;ConstantInt&gt;(Val) &amp;&amp; <span class="stringliteral">&quot;Expecting a constant integer&quot;</span>);</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;      DestBB = <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;findCaseValue(cast&lt;ConstantInt&gt;(Val))-&gt;getCaseSuccessor();</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;IndirectBrInst&gt;(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator())</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;              &amp;&amp; <span class="stringliteral">&quot;Unexpected terminator&quot;</span>);</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;BlockAddress&gt;(Val) &amp;&amp; <span class="stringliteral">&quot;Expecting a constant blockaddress&quot;</span>);</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;      DestBB = cast&lt;BlockAddress&gt;(Val)-&gt;getBasicBlock();</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;    }</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160; </div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;    <span class="comment">// If we have exactly one destination, remember it for efficiency below.</span></div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;    <span class="keywordflow">if</span> (PredToDestList.empty()) {</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;      OnlyDest = DestBB;</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;      OnlyVal = Val;</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;      <span class="keywordflow">if</span> (OnlyDest != DestBB)</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;        OnlyDest = MultipleDestSentinel;</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;      <span class="comment">// It possible we have same destination, but different value, e.g. default</span></div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;      <span class="comment">// case in switchinst.</span></div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;      <span class="keywordflow">if</span> (Val != OnlyVal)</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;        OnlyVal = MultipleVal;</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;    }</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160; </div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;    <span class="comment">// If the predecessor ends with an indirect goto, we can&#39;t change its</span></div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    <span class="comment">// destination.</span></div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;    <span class="keywordflow">if</span> (isa&lt;IndirectBrInst&gt;(Pred-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()))</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160; </div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;    PredToDestList.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(Pred, DestBB);</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;  }</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160; </div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;  <span class="comment">// If all edges were unthreadable, we fail.</span></div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;  <span class="keywordflow">if</span> (PredToDestList.empty())</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160; </div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;  <span class="comment">// If all the predecessors go to a single known successor, we want to fold,</span></div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;  <span class="comment">// not thread. By doing so, we do not need to duplicate the current block and</span></div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;  <span class="comment">// also miss potential opportunities in case we dont/cant duplicate.</span></div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;  <span class="keywordflow">if</span> (OnlyDest &amp;&amp; OnlyDest != MultipleDestSentinel) {</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;hasNPredecessors(PredToDestList.size())) {</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;      <span class="keywordtype">bool</span> SeenFirstBranchToOnlyDest = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;      std::vector &lt;DominatorTree::UpdateType&gt; Updates;</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;      Updates.reserve(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator()-&gt;getNumSuccessors() - 1);</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *SuccBB : <a class="code" href="namespacellvm.html#a26e2a938b431eaa6eca2beaa96410c9d">successors</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)) {</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;        <span class="keywordflow">if</span> (SuccBB == OnlyDest &amp;&amp; !SeenFirstBranchToOnlyDest) {</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;          SeenFirstBranchToOnlyDest = <span class="keyword">true</span>; <span class="comment">// Don&#39;t modify the first branch.</span></div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;          SuccBB-&gt;removePredecessor(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <span class="keyword">true</span>); <span class="comment">// This is unreachable successor.</span></div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;          Updates.push_back({<a class="code" href="classllvm_1_1DominatorTreeBase.html#a71c91cbbfc1c0ecf9a69e10ccf739bd7">DominatorTree::Delete</a>, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, SuccBB});</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;        }</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;      }</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160; </div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;      <span class="comment">// Finally update the terminator.</span></div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1M68kBeads.html#a7eeab1fe8f39bf89dcd7929b816ebfcca27d0e059322508a76f918503800ef1bd">Term</a> = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator();</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;      <a class="code" href="classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">BranchInst::Create</a>(OnlyDest, <a class="code" href="namespacellvm_1_1M68kBeads.html#a7eeab1fe8f39bf89dcd7929b816ebfcca27d0e059322508a76f918503800ef1bd">Term</a>);</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;      ++NumFolds;</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;      <a class="code" href="namespacellvm_1_1M68kBeads.html#a7eeab1fe8f39bf89dcd7929b816ebfcca27d0e059322508a76f918503800ef1bd">Term</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;      DTU-&gt;applyUpdatesPermissive(Updates);</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *BPI = getBPI())</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;        BPI-&gt;eraseBlock(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160; </div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;      <span class="comment">// If the condition is now dead due to the removal of the old terminator,</span></div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;      <span class="comment">// erase it.</span></div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CondInst = dyn_cast&lt;Instruction&gt;(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>)) {</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;        <span class="keywordflow">if</span> (CondInst-&gt;use_empty() &amp;&amp; !CondInst-&gt;mayHaveSideEffects())</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;          CondInst-&gt;eraseFromParent();</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;        <span class="comment">// We can safely replace *some* uses of the CondInst if it has</span></div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;        <span class="comment">// exactly one value as returned by LVI. RAUW is incorrect in the</span></div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;        <span class="comment">// presence of guards and assumes, that have the `Cond` as the use. This</span></div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;        <span class="comment">// is because we use the guards/assume to reason about the `Cond` value</span></div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;        <span class="comment">// at the end of block, but RAUW unconditionally replaces all uses</span></div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;        <span class="comment">// including the guards/assumes themselves and the uses before the</span></div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;        <span class="comment">// guard/assume.</span></div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (OnlyVal &amp;&amp; OnlyVal != MultipleVal)</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;          <a class="code" href="JumpThreading_8cpp.html#a0e7841803a620fb47c7cd3086debaf54">replaceFoldableUses</a>(CondInst, OnlyVal, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;      }</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;    }</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;  }</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160; </div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;  <span class="comment">// Determine which is the most common successor.  If we have many inputs and</span></div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;  <span class="comment">// this block is a switch, we want to start by threading the batch that goes</span></div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;  <span class="comment">// to the most popular destination first.  If we only know about one</span></div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;  <span class="comment">// threadable destination (the common case) we can avoid this.</span></div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *MostPopularDest = OnlyDest;</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160; </div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;  <span class="keywordflow">if</span> (MostPopularDest == MultipleDestSentinel) {</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;    <span class="comment">// Remove any loop headers from the Dest list, threadEdge conservatively</span></div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;    <span class="comment">// won&#39;t process them, but we might have other destination that are eligible</span></div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;    <span class="comment">// and we still want to process.</span></div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;    <a class="code" href="namespacellvm.html#ac9a7de5a04920954ac964059cfc428ad">erase_if</a>(PredToDestList,</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;             [&amp;](<span class="keyword">const</span> std::pair&lt;BasicBlock *, BasicBlock *&gt; &amp;PredToDest) {</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;               <span class="keywordflow">return</span> LoopHeaders.contains(PredToDest.second);</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;             });</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160; </div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;    <span class="keywordflow">if</span> (PredToDestList.empty())</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160; </div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;    MostPopularDest = <a class="code" href="JumpThreading_8cpp.html#ae146bcb2829260a3a094d0a9a2e5fd8b">findMostPopularDest</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, PredToDestList);</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;  }</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160; </div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;  <span class="comment">// Now that we know what the most popular destination is, factor all</span></div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;  <span class="comment">// predecessors that will jump to it into a single predecessor.</span></div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock*, 16&gt;</a> PredsToFactor;</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;PredToDest : PredToDestList)</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;    <span class="keywordflow">if</span> (PredToDest.second == MostPopularDest) {</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Pred = PredToDest.first;</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160; </div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;      <span class="comment">// This predecessor may be a switch or something else that has multiple</span></div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;      <span class="comment">// edges to the block.  Factor each of these edges by listing them</span></div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;      <span class="comment">// according to # occurrences in PredsToFactor.</span></div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Succ : <a class="code" href="namespacellvm.html#a26e2a938b431eaa6eca2beaa96410c9d">successors</a>(Pred))</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;        <span class="keywordflow">if</span> (Succ == <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;          PredsToFactor.push_back(Pred);</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;    }</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160; </div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;  <span class="comment">// If the threadable edges are branching on an undefined value, we get to pick</span></div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;  <span class="comment">// the destination that these predecessors should get to.</span></div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;  <span class="keywordflow">if</span> (!MostPopularDest)</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    MostPopularDest = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator()-&gt;</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;                            getSuccessor(<a class="code" href="JumpThreading_8cpp.html#a089d9b5caf2479e6b87f94c73e5b1f70">getBestDestForJumpOnUndef</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>));</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160; </div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;  <span class="comment">// Ok, try to thread it!</span></div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;  <span class="keywordflow">return</span> tryThreadEdge(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, PredsToFactor, MostPopularDest);</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;}</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;<span class="comment">/// processBranchOnPHI - We have an otherwise unthreadable conditional branch on</span></div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;<span class="comment">/// a PHI node (or freeze PHI) in the current block.  See if there are any</span></div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;<span class="comment">/// simplifications we can do based on inputs to the phi node.</span></div>
<div class="line"><a name="l01822"></a><span class="lineno"><a class="line" href="classllvm_1_1JumpThreadingPass.html#a66f4dcea5cb859a1234e2b71901a1031"> 1822</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1JumpThreadingPass.html#a66f4dcea5cb859a1234e2b71901a1031">JumpThreadingPass::processBranchOnPHI</a>(<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN) {</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = PN-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>();</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160; </div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;  <span class="comment">// TODO: We could make use of this to do it once for blocks with common PHI</span></div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;  <span class="comment">// values.</span></div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock*, 1&gt;</a> PredBBs;</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;  PredBBs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#ad0b3d8447f88377b62d9c019f3c4e118">resize</a>(1);</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160; </div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;  <span class="comment">// If any of the predecessor blocks end in an unconditional branch, we can</span></div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;  <span class="comment">// *duplicate* the conditional branch into that block in order to further</span></div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;  <span class="comment">// encourage jump threading and to eliminate cases where we have branch on a</span></div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;  <span class="comment">// phi of an icmp (branch on icmp is much better).</span></div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;  <span class="comment">// This is still beneficial when a frozen phi is used as the branch condition</span></div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;  <span class="comment">// because it allows CodeGenPrepare to further canonicalize br(freeze(icmp))</span></div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;  <span class="comment">// to br(icmp(freeze ...)).</span></div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#aef51af4b490af6b3bf2dfbc8737a8f9f">getNumIncomingValues</a>(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PredBB = PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a8ce0c4746a1ec805e66409d20ae93922">getIncomingBlock</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *PredBr = dyn_cast&lt;BranchInst&gt;(PredBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()))</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;      <span class="keywordflow">if</span> (PredBr-&gt;isUnconditional()) {</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;        PredBBs[0] = PredBB;</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;        <span class="comment">// Try to duplicate BB into PredBB.</span></div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;        <span class="keywordflow">if</span> (duplicateCondBranchOnPHIIntoPred(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, PredBBs))</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;      }</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;  }</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160; </div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;}</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;<span class="comment">/// processBranchOnXOR - We have an otherwise unthreadable conditional branch on</span></div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;<span class="comment">/// a xor instruction in the current block.  See if there are any</span></div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;<span class="comment">/// simplifications we can do based on inputs to the xor.</span></div>
<div class="line"><a name="l01854"></a><span class="lineno"><a class="line" href="classllvm_1_1JumpThreadingPass.html#a071cd98d76a1c63f215ad16388bfdfe2"> 1854</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1JumpThreadingPass.html#a071cd98d76a1c63f215ad16388bfdfe2">JumpThreadingPass::processBranchOnXOR</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *BO) {</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = BO-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>();</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160; </div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;  <span class="comment">// If either the LHS or RHS of the xor is a constant, don&#39;t do this</span></div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;  <span class="comment">// optimization.</span></div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;  <span class="keywordflow">if</span> (isa&lt;ConstantInt&gt;(BO-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)) ||</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;      isa&lt;ConstantInt&gt;(BO-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1)))</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160; </div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;  <span class="comment">// If the first instruction in BB isn&#39;t a phi, we won&#39;t be able to infer</span></div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;  <span class="comment">// anything special about any particular predecessor.</span></div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;PHINode&gt;(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;front()))</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160; </div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;  <span class="comment">// If this BB is a landing pad, we won&#39;t be able to split the edge into it.</span></div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;isEHPad())</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160; </div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;  <span class="comment">// If we have a xor as the branch input to this block, and we know that the</span></div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;  <span class="comment">// LHS or RHS of the xor in any predecessor is true/false, then we can clone</span></div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;  <span class="comment">// the condition into the predecessor and fix that value to true, saving some</span></div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;  <span class="comment">// logical ops on that path and encouraging other paths to simplify.</span></div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;  <span class="comment">// This copies something like this:</span></div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;  <span class="comment">//  BB:</span></div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;  <span class="comment">//    %X = phi i1 [1],  [%X&#39;]</span></div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;  <span class="comment">//    %Y = icmp eq i32 %A, %B</span></div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;  <span class="comment">//    %Z = xor i1 %X, %Y</span></div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;  <span class="comment">//    br i1 %Z, ...</span></div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;  <span class="comment">// Into:</span></div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;  <span class="comment">//  BB&#39;:</span></div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;  <span class="comment">//    %Y = icmp ne i32 %A, %B</span></div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;  <span class="comment">//    br i1 %Y, ...</span></div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160; </div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">PredValueInfoTy</a> XorOpValues;</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;  <span class="keywordtype">bool</span> isLHS = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;  <span class="keywordflow">if</span> (!computeValueKnownInPredecessors(BO-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, XorOpValues,</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;                                       <a class="code" href="namespacellvm_1_1jumpthreading.html#a7bd584a1977827b11c76096bebbb38a0ae706b769cc98b156d9e22dfbac8aa62b">WantInteger</a>, BO)) {</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(XorOpValues.empty());</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;    <span class="keywordflow">if</span> (!computeValueKnownInPredecessors(BO-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1), <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, XorOpValues,</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;                                         <a class="code" href="namespacellvm_1_1jumpthreading.html#a7bd584a1977827b11c76096bebbb38a0ae706b769cc98b156d9e22dfbac8aa62b">WantInteger</a>, BO))</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;    isLHS = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;  }</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160; </div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!XorOpValues.empty() &amp;&amp;</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;         <span class="stringliteral">&quot;computeValueKnownInPredecessors returned true with no values&quot;</span>);</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160; </div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;  <span class="comment">// Scan the information to see which is most popular: true or false.  The</span></div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;  <span class="comment">// predecessors can be of the set true, false, or undef.</span></div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;  <span class="keywordtype">unsigned</span> NumTrue = 0, NumFalse = 0;</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;XorOpValue : XorOpValues) {</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;    <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(XorOpValue.first))</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;      <span class="comment">// Ignore undefs for the count.</span></div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;    <span class="keywordflow">if</span> (cast&lt;ConstantInt&gt;(XorOpValue.first)-&gt;isZero())</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;      ++NumFalse;</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;      ++NumTrue;</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;  }</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160; </div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;  <span class="comment">// Determine which value to split on, true, false, or undef if neither.</span></div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *SplitVal = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;  <span class="keywordflow">if</span> (NumTrue &gt; NumFalse)</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;    SplitVal = <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getContext());</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (NumTrue != 0 || NumFalse != 0)</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;    SplitVal = <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getContext());</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160; </div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;  <span class="comment">// Collect all of the blocks that this can be folded into so that we can</span></div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;  <span class="comment">// factor this once and clone it once.</span></div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock*, 8&gt;</a> BlocksToFoldInto;</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;XorOpValue : XorOpValues) {</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;    <span class="keywordflow">if</span> (XorOpValue.first != SplitVal &amp;&amp; !isa&lt;UndefValue&gt;(XorOpValue.first))</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160; </div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;    BlocksToFoldInto.push_back(XorOpValue.second);</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;  }</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160; </div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;  <span class="comment">// If we inferred a value for all of the predecessors, then duplication won&#39;t</span></div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;  <span class="comment">// help us.  However, we can just replace the LHS or RHS with the constant.</span></div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;  <span class="keywordflow">if</span> (BlocksToFoldInto.size() ==</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;      cast&lt;PHINode&gt;(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;front()).getNumIncomingValues()) {</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;    <span class="keywordflow">if</span> (!SplitVal) {</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;      <span class="comment">// If all preds provide undef, just nuke the xor, because it is undef too.</span></div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;      BO-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(<a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(BO-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()));</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;      BO-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (SplitVal-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a882d55a6aa2028e1a5ad708b275334e0">isZero</a>() &amp;&amp; BO != BO-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(isLHS)) {</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;      <span class="comment">// If all preds provide 0, replace the xor with the other input.</span></div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;      BO-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(BO-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(isLHS));</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;      BO-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;      <span class="comment">// If all preds provide 1, set the computed value to 1.</span></div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;      BO-&gt;<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(!isLHS, SplitVal);</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;    }</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160; </div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;  }</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160; </div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;  <span class="comment">// If any of predecessors end with an indirect goto, we can&#39;t change its</span></div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;  <span class="comment">// destination.</span></div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">any_of</a>(BlocksToFoldInto, [](<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Pred) {</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;        <span class="keywordflow">return</span> isa&lt;IndirectBrInst&gt;(Pred-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;      }))</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160; </div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;  <span class="comment">// Try to duplicate BB into PredBB.</span></div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;  <span class="keywordflow">return</span> duplicateCondBranchOnPHIIntoPred(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, BlocksToFoldInto);</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;}</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;<span class="comment">/// addPHINodeEntriesForMappedBlock - We&#39;re adding &#39;NewPred&#39; as a new</span></div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;<span class="comment">/// predecessor to the PHIBB block.  If it has PHI nodes, add entries for</span></div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;<span class="comment">/// NewPred using the entries from OldPred (suitably mapped).</span></div>
<div class="line"><a name="l01968"></a><span class="lineno"><a class="line" href="JumpThreading_8cpp.html#aaca431cd72c37f81086a391fb63693d8"> 1968</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="JumpThreading_8cpp.html#aaca431cd72c37f81086a391fb63693d8">addPHINodeEntriesForMappedBlock</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PHIBB,</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;                                            <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OldPred,</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;                                            <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewPred,</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;                                     <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Instruction*, Value*&gt;</a> &amp;<a class="code" href="classllvm_1_1ValueMap.html">ValueMap</a>) {</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> &amp;PN : PHIBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a72516971c5734dc0f7546e64affca425">phis</a>()) {</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;    <span class="comment">// Ok, we have a PHI node.  Figure out what the incoming value was for the</span></div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;    <span class="comment">// DestBlock.</span></div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a> = PN.getIncomingValueForBlock(OldPred);</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160; </div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;    <span class="comment">// Remap the value if necessary.</span></div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst = dyn_cast&lt;Instruction&gt;(<a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a>)) {</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;      <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Instruction*, Value*&gt;::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="classllvm_1_1ValueMap.html">ValueMap</a>.<a class="code" href="classllvm_1_1ValueMap.html#a7629b8c5f6a6802ee0fdc5c290769692">find</a>(Inst);</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="classllvm_1_1ValueMap.html">ValueMap</a>.<a class="code" href="classllvm_1_1ValueMap.html#ab871e2d0ebded563edfebd6766fc1a04">end</a>())</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;        <a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;second;</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;    }</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160; </div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;    PN.addIncoming(<a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a>, NewPred);</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;  }</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;}</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;<span class="comment">/// Merge basic block BB into its sole predecessor if possible.</span></div>
<div class="line"><a name="l01989"></a><span class="lineno"><a class="line" href="classllvm_1_1JumpThreadingPass.html#a30207ff92cc09d50e4f6e188de0f59ed"> 1989</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1JumpThreadingPass.html#a30207ff92cc09d50e4f6e188de0f59ed">JumpThreadingPass::maybeMergeBasicBlockIntoOnlyPred</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *SinglePred = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getSinglePredecessor();</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;  <span class="keywordflow">if</span> (!SinglePred)</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160; </div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *TI = SinglePred-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>();</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;  <span class="keywordflow">if</span> (TI-&gt;<a class="code" href="classllvm_1_1Instruction.html#aad9ab8651c334c1c0ecb7732203fd1fa">isExceptionalTerminator</a>() || TI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a3287172f2d13af086e6d66364e8c6de3">getNumSuccessors</a>() != 1 ||</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;      SinglePred == <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> || <a class="code" href="JumpThreading_8cpp.html#ae6fa18c5b7272e2bdd00c26da8041358">hasAddressTakenAndUsed</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160; </div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;  <span class="comment">// If SinglePred was a loop header, BB becomes one.</span></div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;  <span class="keywordflow">if</span> (LoopHeaders.erase(SinglePred))</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;    LoopHeaders.insert(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160; </div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;  LVI-&gt;eraseBlock(SinglePred);</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;  <a class="code" href="namespacellvm.html#aa16cddaa1497dc3248fc105467671e82">MergeBasicBlockIntoOnlyPred</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, DTU.get());</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160; </div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;  <span class="comment">// Now that BB is merged into SinglePred (i.e. SinglePred code followed by</span></div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;  <span class="comment">// BB code within one basic block `BB`), we need to invalidate the LVI</span></div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;  <span class="comment">// information associated with BB, because the LVI information need not be</span></div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;  <span class="comment">// true for all of BB after the merge. For example,</span></div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;  <span class="comment">// Before the merge, LVI info and code is as follows:</span></div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;  <span class="comment">// SinglePred: &lt;LVI info1 for %p val&gt;</span></div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;  <span class="comment">// %y = use of %p</span></div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;  <span class="comment">// call @exit() // need not transfer execution to successor.</span></div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;  <span class="comment">// assume(%p) // from this point on %p is true</span></div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;  <span class="comment">// br label %BB</span></div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;  <span class="comment">// BB: &lt;LVI info2 for %p val, i.e. %p is true&gt;</span></div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;  <span class="comment">// %x = use of %p</span></div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;  <span class="comment">// br label exit</span></div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;  <span class="comment">// Note that this LVI info for blocks BB and SinglPred is correct for %p</span></div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;  <span class="comment">// (info2 and info1 respectively). After the merge and the deletion of the</span></div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;  <span class="comment">// LVI info1 for SinglePred. We have the following code:</span></div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;  <span class="comment">// BB: &lt;LVI info2 for %p val&gt;</span></div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;  <span class="comment">// %y = use of %p</span></div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;  <span class="comment">// call @exit()</span></div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;  <span class="comment">// assume(%p)</span></div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;  <span class="comment">// %x = use of %p &lt;-- LVI info2 is correct from here onwards.</span></div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;  <span class="comment">// br label exit</span></div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;  <span class="comment">// LVI info2 for BB is incorrect at the beginning of BB.</span></div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160; </div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;  <span class="comment">// Invalidate LVI information for BB if the LVI is not provably true for</span></div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;  <span class="comment">// all of BB.</span></div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#abff5a423c1f45e23958dde8ee695c9a9">isGuaranteedToTransferExecutionToSuccessor</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;    LVI-&gt;eraseBlock(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;}</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;<span class="comment">/// Update the SSA form.  NewBB contains instructions that are copied from BB.</span></div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;<span class="comment">/// ValueMapping maps old values in BB to new ones in NewBB.</span></div>
<div class="line"><a name="l02040"></a><span class="lineno"><a class="line" href="classllvm_1_1JumpThreadingPass.html#ac740f80b34c5e02feb9523b0436628a8"> 2040</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1JumpThreadingPass.html#ac740f80b34c5e02feb9523b0436628a8">JumpThreadingPass::updateSSA</a>(</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewBB,</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;    <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Instruction *, Value *&gt;</a> &amp;ValueMapping) {</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;  <span class="comment">// If there were values defined in BB that are used outside the block, then we</span></div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;  <span class="comment">// now have to update all uses of the value to use either the original value,</span></div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;  <span class="comment">// the cloned value, or some PHI derived value.  This can require arbitrary</span></div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;  <span class="comment">// PHI insertion, of which we are prepared to do, clean these up now.</span></div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;  <a class="code" href="classllvm_1_1SSAUpdater.html">SSAUpdater</a> SSAUpdate;</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Use *, 16&gt;</a> UsesToRename;</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;DbgValueInst *, 4&gt;</a> DbgValues;</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160; </div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;    <span class="comment">// Scan all uses of this instruction to see if it is used outside of its</span></div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;    <span class="comment">// block, and if so, record them in UsesToRename.</span></div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.uses()) {</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1User.html">User</a> = cast&lt;Instruction&gt;(U.getUser());</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *UserPN = dyn_cast&lt;PHINode&gt;(<a class="code" href="classllvm_1_1User.html">User</a>)) {</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;        <span class="keywordflow">if</span> (UserPN-&gt;getIncomingBlock(U) == <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1User.html">User</a>-&gt;getParent() == <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160; </div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;      UsesToRename.push_back(&amp;U);</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;    }</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160; </div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;    <span class="comment">// Find debug values outside of the block</span></div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;    <a class="code" href="namespacellvm.html#a8813c8445d4429956ae5a3647f02fcfb">findDbgValues</a>(DbgValues, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;    DbgValues.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a563ffc2ff61c499b3be2e00100cb72fa">erase</a>(<a class="code" href="namespacellvm.html#a9ec2517b6489e71067be03afebb4d350">remove_if</a>(DbgValues,</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;                              [&amp;](<span class="keyword">const</span> <a class="code" href="classllvm_1_1DbgValueInst.html">DbgValueInst</a> *DbgVal) {</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;                                <span class="keywordflow">return</span> DbgVal-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>() == <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>;</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;                              }),</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;                    DbgValues.end());</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160; </div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;    <span class="comment">// If there are no uses outside the block, we&#39;re done with this instruction.</span></div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;    <span class="keywordflow">if</span> (UsesToRename.empty() &amp;&amp; DbgValues.empty())</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;JT: Renaming non-local uses of: &quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160; </div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;    <span class="comment">// We found a use of I outside of BB.  Rename all uses of I that are outside</span></div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;    <span class="comment">// its block to be uses of the appropriate PHI node etc.  See ValuesInBlocks</span></div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;    <span class="comment">// with the two values we know.</span></div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;    SSAUpdate.<a class="code" href="classllvm_1_1SSAUpdater.html#a4fe3279aae4f726813a672d4a9b26cb1">Initialize</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType(), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getName());</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;    SSAUpdate.<a class="code" href="classllvm_1_1SSAUpdater.html#af0d1a82b4e629e834c2ed53e5cbe22ef">AddAvailableValue</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;    SSAUpdate.<a class="code" href="classllvm_1_1SSAUpdater.html#af0d1a82b4e629e834c2ed53e5cbe22ef">AddAvailableValue</a>(NewBB, ValueMapping[&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]);</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160; </div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;    <span class="keywordflow">while</span> (!UsesToRename.empty())</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;      SSAUpdate.<a class="code" href="classllvm_1_1SSAUpdater.html#a05c4f6837ee786e83246beeb01e3aa8d">RewriteUse</a>(*UsesToRename.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>());</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;    <span class="keywordflow">if</span> (!DbgValues.empty()) {</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;      SSAUpdate.<a class="code" href="classllvm_1_1SSAUpdater.html#aa3e6b78bbdd6959f19055f44fa4b7021">UpdateDebugValues</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, DbgValues);</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;      DbgValues.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;    }</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160; </div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;  }</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;}</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;<span class="comment">/// Clone instructions in range [BI, BE) to NewBB.  For PHI nodes, we only clone</span></div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;<span class="comment">/// arguments that come from PredBB.  Return the map from the variables in the</span></div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;<span class="comment">/// source basic block to the variables in the newly created basic block.</span></div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Instruction *, Value *&gt;</a></div>
<div class="line"><a name="l02100"></a><span class="lineno"><a class="line" href="classllvm_1_1JumpThreadingPass.html#a17ec6c1a629aa071b3b65b74c5cb2e7d"> 2100</a></span>&#160;<a class="code" href="classllvm_1_1JumpThreadingPass.html#a17ec6c1a629aa071b3b65b74c5cb2e7d">JumpThreadingPass::cloneInstructions</a>(<a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> BI,</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;                                     <a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> BE, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewBB,</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;                                     <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PredBB) {</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;  <span class="comment">// We are going to have to map operands from the source basic block to the new</span></div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;  <span class="comment">// copy of the block &#39;NewBB&#39;.  If there are PHI nodes in the source basic</span></div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;  <span class="comment">// block, evaluate them to account for entry from PredBB.</span></div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Instruction *, Value *&gt;</a> ValueMapping;</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160; </div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;  <span class="comment">// Retargets llvm.dbg.value to any renamed variables.</span></div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;  <span class="keyword">auto</span> RetargetDbgValueIfPossible = [&amp;](<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewInst) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;    <span class="keyword">auto</span> DbgInstruction = dyn_cast&lt;DbgValueInst&gt;(NewInst);</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;    <span class="keywordflow">if</span> (!DbgInstruction)</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160; </div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;    <a class="code" href="classllvm_1_1SmallSet.html">SmallSet&lt;std::pair&lt;Value *, Value *&gt;</a>, 16&gt; OperandsToRemap;</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> DbgOperand : DbgInstruction-&gt;location_ops()) {</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;      <span class="keyword">auto</span> DbgOperandInstruction = dyn_cast&lt;Instruction&gt;(DbgOperand);</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;      <span class="keywordflow">if</span> (!DbgOperandInstruction)</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160; </div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;      <span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = ValueMapping.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(DbgOperandInstruction);</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != ValueMapping.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>()) {</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;        OperandsToRemap.<a class="code" href="classllvm_1_1SmallSet.html#a1679469af9bb8ccfbe98441fb8228c79">insert</a>(</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;            std::pair&lt;Value *, Value *&gt;(DbgOperand, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;second));</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;      }</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;    }</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160; </div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;[OldOp, MappedOp] : OperandsToRemap)</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;      DbgInstruction-&gt;replaceVariableLocationOp(OldOp, MappedOp);</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;  };</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160; </div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;  <span class="comment">// Clone the phi nodes of the source basic block into NewBB.  The resulting</span></div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;  <span class="comment">// phi nodes are trivial since NewBB only has one predecessor, but SSAUpdater</span></div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;  <span class="comment">// might need to rewrite the operand of the cloned phi.</span></div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;  <span class="keywordflow">for</span> (; <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast&lt;PHINode&gt;(BI); ++BI) {</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *NewPN = <a class="code" href="classllvm_1_1PHINode.html#ab0ff669b12c20c07137705c38872ec63">PHINode::Create</a>(PN-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), 1, PN-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>(), NewBB);</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;    NewPN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#adfb61ffe25c950c75c86310245b3ef39">getIncomingValueForBlock</a>(PredBB), PredBB);</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;    ValueMapping[PN] = NewPN;</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;  }</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160; </div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;  <span class="comment">// Clone noalias scope declarations in the threaded block. When threading a</span></div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;  <span class="comment">// loop exit, we would otherwise end up with two idential scope declarations</span></div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;  <span class="comment">// visible at the same time.</span></div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MDNode *&gt;</a> NoAliasScopes;</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;MDNode *, MDNode *&gt;</a> ClonedScopes;</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a> = PredBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aa286a0f7f5d38488d593bb7ef0ba183e">getContext</a>();</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;  <a class="code" href="namespacellvm.html#ade9551bcb1121539a279452fec71f9eb">identifyNoAliasScopesToClone</a>(BI, BE, NoAliasScopes);</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;  <a class="code" href="namespacellvm.html#a8eade0f2933d0684681065b3960122e2">cloneNoAliasScopes</a>(NoAliasScopes, ClonedScopes, <span class="stringliteral">&quot;thread&quot;</span>, <a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>);</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160; </div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;  <span class="comment">// Clone the non-phi instructions of the source basic block into NewBB,</span></div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;  <span class="comment">// keeping track of the mapping and using it to remap operands in the cloned</span></div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;  <span class="comment">// instructions.</span></div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;  <span class="keywordflow">for</span> (; BI != BE; ++BI) {</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *New = BI-&gt;clone();</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;    New-&gt;setName(BI-&gt;getName());</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;    New-&gt;insertInto(NewBB, NewBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>());</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;    ValueMapping[&amp;*BI] = New;</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;    <a class="code" href="namespacellvm.html#ab1c40e35dfc36395c37921107003128b">adaptNoAliasScopes</a>(New, ClonedScopes, <a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>);</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160; </div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;    <span class="keywordflow">if</span> (RetargetDbgValueIfPossible(New))</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160; </div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;    <span class="comment">// Remap operands to patch up intra-block references.</span></div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = New-&gt;getNumOperands(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst = dyn_cast&lt;Instruction&gt;(New-&gt;getOperand(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>))) {</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;        <a class="code" href="classllvm_1_1DenseMapIterator.html">DenseMap&lt;Instruction *, Value *&gt;::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = ValueMapping.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(Inst);</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != ValueMapping.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>())</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;          New-&gt;setOperand(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;second);</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;      }</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;  }</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160; </div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;  <span class="keywordflow">return</span> ValueMapping;</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;}</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;<span class="comment">/// Attempt to thread through two successive basic blocks.</span></div>
<div class="line"><a name="l02176"></a><span class="lineno"><a class="line" href="classllvm_1_1JumpThreadingPass.html#a710878a88d68a9169313249bfd52862a"> 2176</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1JumpThreadingPass.html#a710878a88d68a9169313249bfd52862a">JumpThreadingPass::maybethreadThroughTwoBasicBlocks</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;                                                         <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>) {</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;  <span class="comment">// Consider:</span></div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;  <span class="comment">// PredBB:</span></div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;  <span class="comment">//   %var = phi i32* [ null, %bb1 ], [ @a, %bb2 ]</span></div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;  <span class="comment">//   %tobool = icmp eq i32 %cond, 0</span></div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;  <span class="comment">//   br i1 %tobool, label %BB, label ...</span></div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;  <span class="comment">// BB:</span></div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;  <span class="comment">//   %cmp = icmp eq i32* %var, null</span></div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;  <span class="comment">//   br i1 %cmp, label ..., label ...</span></div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;  <span class="comment">// We don&#39;t know the value of %var at BB even if we know which incoming edge</span></div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;  <span class="comment">// we take to BB.  However, once we duplicate PredBB for each of its incoming</span></div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;  <span class="comment">// edges (say, PredBB1 and PredBB2), we know the value of %var in each copy of</span></div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;  <span class="comment">// PredBB.  Then we can thread edges PredBB1-&gt;BB and PredBB2-&gt;BB through BB.</span></div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160; </div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;  <span class="comment">// Require that BB end with a Branch for simplicity.</span></div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *CondBr = dyn_cast&lt;BranchInst&gt;(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator());</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;  <span class="keywordflow">if</span> (!CondBr)</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160; </div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;  <span class="comment">// BB must have exactly one predecessor.</span></div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PredBB = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getSinglePredecessor();</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;  <span class="keywordflow">if</span> (!PredBB)</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160; </div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;  <span class="comment">// Require that PredBB end with a conditional Branch. If PredBB ends with an</span></div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;  <span class="comment">// unconditional branch, we should be merging PredBB and BB instead. For</span></div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;  <span class="comment">// simplicity, we don&#39;t deal with a switch.</span></div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *PredBBBranch = dyn_cast&lt;BranchInst&gt;(PredBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;  <span class="keywordflow">if</span> (!PredBBBranch || PredBBBranch-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad56f6a9b5cd05940017c4544df48bc30">isUnconditional</a>())</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160; </div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;  <span class="comment">// If PredBB has exactly one incoming edge, we don&#39;t gain anything by copying</span></div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;  <span class="comment">// PredBB.</span></div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;  <span class="keywordflow">if</span> (PredBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a59fb91d1691350f7d1b8e8a114e3f2a4">getSinglePredecessor</a>())</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160; </div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;  <span class="comment">// Don&#39;t thread through PredBB if it contains a successor edge to itself, in</span></div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;  <span class="comment">// which case we would infinite loop.  Suppose we are threading an edge from</span></div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;  <span class="comment">// PredPredBB through PredBB and BB to SuccBB with PredBB containing a</span></div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;  <span class="comment">// successor edge to itself.  If we allowed jump threading in this case, we</span></div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;  <span class="comment">// could duplicate PredBB and BB as, say, PredBB.thread and BB.thread.  Since</span></div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;  <span class="comment">// PredBB.thread has a successor edge to PredBB, we would immediately come up</span></div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;  <span class="comment">// with another jump threading opportunity from PredBB.thread through PredBB</span></div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;  <span class="comment">// and BB to SuccBB.  This jump threading would repeatedly occur.  That is, we</span></div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;  <span class="comment">// would keep peeling one iteration from PredBB.</span></div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#acd1cd968cb420c82d70926920fcdc7d7">llvm::is_contained</a>(<a class="code" href="namespacellvm.html#a26e2a938b431eaa6eca2beaa96410c9d">successors</a>(PredBB), PredBB))</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160; </div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;  <span class="comment">// Don&#39;t thread across a loop header.</span></div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;  <span class="keywordflow">if</span> (LoopHeaders.count(PredBB))</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160; </div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;  <span class="comment">// Avoid complication with duplicating EH pads.</span></div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;  <span class="keywordflow">if</span> (PredBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ac9c170fde1808bbd4436a0dbd6d5e755">isEHPad</a>())</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160; </div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;  <span class="comment">// Find a predecessor that we can thread.  For simplicity, we only consider a</span></div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;  <span class="comment">// successor edge out of BB to which we thread exactly one incoming edge into</span></div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;  <span class="comment">// PredBB.</span></div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;  <span class="keywordtype">unsigned</span> ZeroCount = 0;</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;  <span class="keywordtype">unsigned</span> OneCount = 0;</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ZeroPred = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OnePred = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> : <a class="code" href="namespacellvm.html#acb22fb04083152eee862457e42e8dc31">predecessors</a>(PredBB)) {</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;    <span class="comment">// If PredPred ends with IndirectBrInst, we can&#39;t handle it.</span></div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;    <span class="keywordflow">if</span> (isa&lt;IndirectBrInst&gt;(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>-&gt;getTerminator()))</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast_or_null&lt;ConstantInt&gt;(</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;            evaluateOnPredecessorEdge(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>, <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>))) {</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;      <span class="keywordflow">if</span> (CI-&gt;isZero()) {</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;        ZeroCount++;</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;        ZeroPred = <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>;</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CI-&gt;isOne()) {</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;        OneCount++;</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;        OnePred = <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>;</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;      }</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;    }</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;  }</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160; </div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;  <span class="comment">// Disregard complicated cases where we have to thread multiple edges.</span></div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PredPredBB;</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;  <span class="keywordflow">if</span> (ZeroCount == 1) {</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;    PredPredBB = ZeroPred;</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (OneCount == 1) {</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;    PredPredBB = OnePred;</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;  }</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160; </div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *SuccBB = CondBr-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(PredPredBB == ZeroPred);</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160; </div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;  <span class="comment">// If threading to the same block as we come from, we would infinite loop.</span></div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;  <span class="keywordflow">if</span> (SuccBB == <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Not threading across BB &#39;&quot;</span> &lt;&lt; <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getName()</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;&#39; - would thread to self!\n&quot;</span>);</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;  }</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160; </div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;  <span class="comment">// If threading this would thread across a loop header, don&#39;t thread the edge.</span></div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;  <span class="comment">// See the comments above findLoopHeaders for justifications and caveats.</span></div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;  <span class="keywordflow">if</span> (LoopHeaders.count(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) || LoopHeaders.count(SuccBB)) {</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>({</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;      <span class="keywordtype">bool</span> BBIsHeader = LoopHeaders.count(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;      <span class="keywordtype">bool</span> SuccIsHeader = LoopHeaders.count(SuccBB);</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Not threading across &quot;</span></div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;             &lt;&lt; (BBIsHeader ? <span class="stringliteral">&quot;loop header BB &#39;&quot;</span> : <span class="stringliteral">&quot;block BB &#39;&quot;</span>)</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;             &lt;&lt; <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getName() &lt;&lt; <span class="stringliteral">&quot;&#39; to dest &quot;</span></div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;             &lt;&lt; (SuccIsHeader ? <span class="stringliteral">&quot;loop header BB &#39;&quot;</span> : <span class="stringliteral">&quot;block BB &#39;&quot;</span>)</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;             &lt;&lt; SuccBB-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>()</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;&#39; - it might create an irreducible loop!\n&quot;</span>;</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;    });</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;  }</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160; </div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;  <span class="comment">// Compute the cost of duplicating BB and PredBB.</span></div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;  <span class="keywordtype">unsigned</span> BBCost = <a class="code" href="JumpThreading_8cpp.html#a65facbdd55e486cbcef04a12de132c9c">getJumpThreadDuplicationCost</a>(</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;      <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator(), BBDupThreshold);</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;  <span class="keywordtype">unsigned</span> PredBBCost = <a class="code" href="JumpThreading_8cpp.html#a65facbdd55e486cbcef04a12de132c9c">getJumpThreadDuplicationCost</a>(</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;      <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, PredBB, PredBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>(), BBDupThreshold);</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160; </div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;  <span class="comment">// Give up if costs are too high.  We need to check BBCost and PredBBCost</span></div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;  <span class="comment">// individually before checking their sum because getJumpThreadDuplicationCost</span></div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;  <span class="comment">// return (unsigned)~0 for those basic blocks that cannot be duplicated.</span></div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;  <span class="keywordflow">if</span> (BBCost &gt; BBDupThreshold || PredBBCost &gt; BBDupThreshold ||</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;      BBCost + PredBBCost &gt; BBDupThreshold) {</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Not threading BB &#39;&quot;</span> &lt;&lt; <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getName()</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;&#39; - Cost is too high: &quot;</span> &lt;&lt; PredBBCost</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; for PredBB, &quot;</span> &lt;&lt; BBCost &lt;&lt; <span class="stringliteral">&quot;for BB\n&quot;</span>);</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;  }</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160; </div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;  <span class="comment">// Now we are ready to duplicate PredBB.</span></div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;  threadThroughTwoBasicBlocks(PredPredBB, PredBB, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, SuccBB);</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;}</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160; </div>
<div class="line"><a name="l02316"></a><span class="lineno"><a class="line" href="classllvm_1_1JumpThreadingPass.html#accef1dd983ed3831858fe41c90fcc214"> 2316</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1JumpThreadingPass.html#accef1dd983ed3831858fe41c90fcc214">JumpThreadingPass::threadThroughTwoBasicBlocks</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PredPredBB,</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;                                                    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PredBB,</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;                                                    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;                                                    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *SuccBB) {</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Threading through &#39;&quot;</span> &lt;&lt; PredBB-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() &lt;&lt; <span class="stringliteral">&quot;&#39; and &#39;&quot;</span></div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;                    &lt;&lt; <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getName() &lt;&lt; <span class="stringliteral">&quot;&#39;\n&quot;</span>);</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160; </div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;  <span class="comment">// Build BPI/BFI before any changes are made to IR.</span></div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;  <span class="keywordtype">bool</span> HasProfile = doesBlockHaveProfileData(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;  <span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a> = getOrCreateBFI(HasProfile);</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;  <span class="keyword">auto</span> *BPI = getOrCreateBPI(<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a> != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160; </div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *CondBr = cast&lt;BranchInst&gt;(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator());</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *PredBBBranch = cast&lt;BranchInst&gt;(PredBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160; </div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewBB =</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(PredBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aa286a0f7f5d38488d593bb7ef0ba183e">getContext</a>(), PredBB-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;.thread&quot;</span>,</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;                         PredBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>(), PredBB);</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;  NewBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a507bb47fc498540c91fec0bf95c25907">moveAfter</a>(PredBB);</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160; </div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;  <span class="comment">// Set the block frequency of NewBB.</span></div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>) {</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(BPI &amp;&amp; <span class="stringliteral">&quot;It&#39;s expected BPI to exist along with BFI&quot;</span>);</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;    <span class="keyword">auto</span> NewBBFreq = <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>-&gt;getBlockFreq(PredPredBB) *</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;                     BPI-&gt;getEdgeProbability(PredPredBB, PredBB);</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;    <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>-&gt;setBlockFreq(NewBB, NewBBFreq.getFrequency());</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;  }</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160; </div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;  <span class="comment">// We are going to have to map operands from the original BB block to the new</span></div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;  <span class="comment">// copy of the block &#39;NewBB&#39;.  If there are PHI nodes in PredBB, evaluate them</span></div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;  <span class="comment">// to account for entry from PredPredBB.</span></div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Instruction *, Value *&gt;</a> ValueMapping =</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;      cloneInstructions(PredBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(), PredBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>(), NewBB, PredPredBB);</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160; </div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;  <span class="comment">// Copy the edge probabilities from PredBB to NewBB.</span></div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;  <span class="keywordflow">if</span> (BPI)</div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;    BPI-&gt;copyEdgeProbabilities(PredBB, NewBB);</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160; </div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;  <span class="comment">// Update the terminator of PredPredBB to jump to NewBB instead of PredBB.</span></div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;  <span class="comment">// This eliminates predecessors from PredPredBB, which requires us to simplify</span></div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;  <span class="comment">// any PHI nodes in PredBB.</span></div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *PredPredTerm = PredPredBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>();</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = PredPredTerm-&gt;<a class="code" href="classllvm_1_1Instruction.html#a3287172f2d13af086e6d66364e8c6de3">getNumSuccessors</a>(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;    <span class="keywordflow">if</span> (PredPredTerm-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6e5d2e18c81baaeec7dadc81a0dea993">getSuccessor</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) == PredBB) {</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;      PredBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#afe7af0c3ec2ef1f525173acd2ea4ba60">removePredecessor</a>(PredPredBB, <span class="keyword">true</span>);</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;      PredPredTerm-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae959364e4640ac025bbc046d3d7c7e61">setSuccessor</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, NewBB);</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;    }</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160; </div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;  <a class="code" href="JumpThreading_8cpp.html#aaca431cd72c37f81086a391fb63693d8">addPHINodeEntriesForMappedBlock</a>(PredBBBranch-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(0), PredBB, NewBB,</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;                                  ValueMapping);</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;  <a class="code" href="JumpThreading_8cpp.html#aaca431cd72c37f81086a391fb63693d8">addPHINodeEntriesForMappedBlock</a>(PredBBBranch-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(1), PredBB, NewBB,</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;                                  ValueMapping);</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160; </div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;  DTU-&gt;applyUpdatesPermissive(</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;      {{<a class="code" href="classllvm_1_1DominatorTreeBase.html#a9aeeca2833810f01b20545a46fe22503">DominatorTree::Insert</a>, NewBB, CondBr-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(0)},</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;       {<a class="code" href="classllvm_1_1DominatorTreeBase.html#a9aeeca2833810f01b20545a46fe22503">DominatorTree::Insert</a>, NewBB, CondBr-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(1)},</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;       {<a class="code" href="classllvm_1_1DominatorTreeBase.html#a9aeeca2833810f01b20545a46fe22503">DominatorTree::Insert</a>, PredPredBB, NewBB},</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;       {<a class="code" href="classllvm_1_1DominatorTreeBase.html#a71c91cbbfc1c0ecf9a69e10ccf739bd7">DominatorTree::Delete</a>, PredPredBB, PredBB}});</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160; </div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;  updateSSA(PredBB, NewBB, ValueMapping);</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160; </div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;  <span class="comment">// Clean up things like PHI nodes with single operands, dead instructions,</span></div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;  <span class="comment">// etc.</span></div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;  <a class="code" href="namespacellvm.html#a42108fe3c2695cb429e6fe312908fa0d">SimplifyInstructionsInBlock</a>(NewBB, TLI);</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;  <a class="code" href="namespacellvm.html#a42108fe3c2695cb429e6fe312908fa0d">SimplifyInstructionsInBlock</a>(PredBB, TLI);</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160; </div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 1&gt;</a> PredsToFactor;</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;  PredsToFactor.push_back(NewBB);</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;  threadEdge(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, PredsToFactor, SuccBB);</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;}</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;<span class="comment">/// tryThreadEdge - Thread an edge if it&#39;s safe and profitable to do so.</span></div>
<div class="line"><a name="l02388"></a><span class="lineno"><a class="line" href="classllvm_1_1JumpThreadingPass.html#ad67aa9d5f2effed17239ab3fad098999"> 2388</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1JumpThreadingPass.html#ad67aa9d5f2effed17239ab3fad098999">JumpThreadingPass::tryThreadEdge</a>(</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;BasicBlock *&gt;</a> &amp;PredBBs,</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *SuccBB) {</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;  <span class="comment">// If threading to the same block as we come from, we would infinite loop.</span></div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;  <span class="keywordflow">if</span> (SuccBB == <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Not threading across BB &#39;&quot;</span> &lt;&lt; <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getName()</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;&#39; - would thread to self!\n&quot;</span>);</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;  }</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160; </div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;  <span class="comment">// If threading this would thread across a loop header, don&#39;t thread the edge.</span></div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;  <span class="comment">// See the comments above findLoopHeaders for justifications and caveats.</span></div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;  <span class="keywordflow">if</span> (LoopHeaders.count(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) || LoopHeaders.count(SuccBB)) {</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>({</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;      <span class="keywordtype">bool</span> BBIsHeader = LoopHeaders.count(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;      <span class="keywordtype">bool</span> SuccIsHeader = LoopHeaders.count(SuccBB);</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Not threading across &quot;</span></div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;          &lt;&lt; (BBIsHeader ? <span class="stringliteral">&quot;loop header BB &#39;&quot;</span> : <span class="stringliteral">&quot;block BB &#39;&quot;</span>) &lt;&lt; <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getName()</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;&#39; to dest &quot;</span> &lt;&lt; (SuccIsHeader ? <span class="stringliteral">&quot;loop header BB &#39;&quot;</span> : <span class="stringliteral">&quot;block BB &#39;&quot;</span>)</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;          &lt;&lt; SuccBB-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() &lt;&lt; <span class="stringliteral">&quot;&#39; - it might create an irreducible loop!\n&quot;</span>;</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;    });</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;  }</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160; </div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;  <span class="keywordtype">unsigned</span> JumpThreadCost = <a class="code" href="JumpThreading_8cpp.html#a65facbdd55e486cbcef04a12de132c9c">getJumpThreadDuplicationCost</a>(</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;      <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator(), BBDupThreshold);</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;  <span class="keywordflow">if</span> (JumpThreadCost &gt; BBDupThreshold) {</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Not threading BB &#39;&quot;</span> &lt;&lt; <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getName()</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;&#39; - Cost is too high: &quot;</span> &lt;&lt; JumpThreadCost &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;  }</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160; </div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;  threadEdge(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, PredBBs, SuccBB);</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;}</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;<span class="comment">/// threadEdge - We have decided that it is safe and profitable to factor the</span></div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;<span class="comment">/// blocks in PredBBs to one predecessor, then thread an edge from it to SuccBB</span></div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;<span class="comment">/// across BB.  Transform the IR to reflect this change.</span></div>
<div class="line"><a name="l02427"></a><span class="lineno"><a class="line" href="classllvm_1_1JumpThreadingPass.html#afe4c82c6f42e62e67ce856488751517d"> 2427</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1JumpThreadingPass.html#afe4c82c6f42e62e67ce856488751517d">JumpThreadingPass::threadEdge</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;                                   <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;BasicBlock *&gt;</a> &amp;PredBBs,</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;                                   <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *SuccBB) {</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SuccBB != <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> &amp;&amp; <span class="stringliteral">&quot;Don&#39;t create an infinite loop&quot;</span>);</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160; </div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!LoopHeaders.count(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) &amp;&amp; !LoopHeaders.count(SuccBB) &amp;&amp;</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;         <span class="stringliteral">&quot;Don&#39;t thread across loop headers&quot;</span>);</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160; </div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;  <span class="comment">// Build BPI/BFI before any changes are made to IR.</span></div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;  <span class="keywordtype">bool</span> HasProfile = doesBlockHaveProfileData(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;  <span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a> = getOrCreateBFI(HasProfile);</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;  <span class="keyword">auto</span> *BPI = getOrCreateBPI(<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a> != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160; </div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;  <span class="comment">// And finally, do it!  Start by factoring the predecessors if needed.</span></div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PredBB;</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;  <span class="keywordflow">if</span> (PredBBs.size() == 1)</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;    PredBB = PredBBs[0];</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Factoring out &quot;</span> &lt;&lt; PredBBs.size()</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; common predecessors.\n&quot;</span>);</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;    PredBB = splitBlockPreds(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, PredBBs, <span class="stringliteral">&quot;.thr_comm&quot;</span>);</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;  }</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160; </div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;  <span class="comment">// And finally, do it!</span></div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Threading edge from &#39;&quot;</span> &lt;&lt; PredBB-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>()</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;&#39; to &#39;&quot;</span> &lt;&lt; SuccBB-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>()</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;, across block:\n    &quot;</span> &lt;&lt; *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160; </div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;  LVI-&gt;threadEdge(PredBB, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, SuccBB);</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160; </div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewBB = <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getContext(),</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;                                         <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getName()+<span class="stringliteral">&quot;.thread&quot;</span>,</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;                                         <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getParent(), <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;  NewBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a507bb47fc498540c91fec0bf95c25907">moveAfter</a>(PredBB);</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160; </div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;  <span class="comment">// Set the block frequency of NewBB.</span></div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>) {</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(BPI &amp;&amp; <span class="stringliteral">&quot;It&#39;s expected BPI to exist along with BFI&quot;</span>);</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;    <span class="keyword">auto</span> NewBBFreq =</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;        <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>-&gt;getBlockFreq(PredBB) * BPI-&gt;getEdgeProbability(PredBB, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;    <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>-&gt;setBlockFreq(NewBB, NewBBFreq.getFrequency());</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;  }</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160; </div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;  <span class="comment">// Copy all the instructions from BB to NewBB except the terminator.</span></div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Instruction *, Value *&gt;</a> ValueMapping =</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;      cloneInstructions(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;begin(), std::prev(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;end()), NewBB, PredBB);</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160; </div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;  <span class="comment">// We didn&#39;t copy the terminator from BB over to NewBB, because there is now</span></div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;  <span class="comment">// an unconditional jump to SuccBB.  Insert the unconditional jump.</span></div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *NewBI = <a class="code" href="classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">BranchInst::Create</a>(SuccBB, NewBB);</div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;  NewBI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae8f5bf5cc06f696b52c709677df00fbf">setDebugLoc</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator()-&gt;getDebugLoc());</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160; </div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;  <span class="comment">// Check to see if SuccBB has PHI nodes. If so, we need to add entries to the</span></div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;  <span class="comment">// PHI nodes for NewBB now.</span></div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;  <a class="code" href="JumpThreading_8cpp.html#aaca431cd72c37f81086a391fb63693d8">addPHINodeEntriesForMappedBlock</a>(SuccBB, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, NewBB, ValueMapping);</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160; </div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;  <span class="comment">// Update the terminator of PredBB to jump to NewBB instead of BB.  This</span></div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;  <span class="comment">// eliminates predecessors from BB, which requires us to simplify any PHI</span></div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;  <span class="comment">// nodes in BB.</span></div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *PredTerm = PredBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>();</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = PredTerm-&gt;<a class="code" href="classllvm_1_1Instruction.html#a3287172f2d13af086e6d66364e8c6de3">getNumSuccessors</a>(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;    <span class="keywordflow">if</span> (PredTerm-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6e5d2e18c81baaeec7dadc81a0dea993">getSuccessor</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) == <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;      <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;removePredecessor(PredBB, <span class="keyword">true</span>);</div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;      PredTerm-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae959364e4640ac025bbc046d3d7c7e61">setSuccessor</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, NewBB);</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;    }</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160; </div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;  <span class="comment">// Enqueue required DT updates.</span></div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;  DTU-&gt;applyUpdatesPermissive({{<a class="code" href="classllvm_1_1DominatorTreeBase.html#a9aeeca2833810f01b20545a46fe22503">DominatorTree::Insert</a>, NewBB, SuccBB},</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;                               {<a class="code" href="classllvm_1_1DominatorTreeBase.html#a9aeeca2833810f01b20545a46fe22503">DominatorTree::Insert</a>, PredBB, NewBB},</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;                               {<a class="code" href="classllvm_1_1DominatorTreeBase.html#a71c91cbbfc1c0ecf9a69e10ccf739bd7">DominatorTree::Delete</a>, PredBB, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>}});</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160; </div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;  updateSSA(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, NewBB, ValueMapping);</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160; </div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;  <span class="comment">// At this point, the IR is fully up to date and consistent.  Do a quick scan</span></div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;  <span class="comment">// over the new instructions and zap any that are constants or dead.  This</span></div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;  <span class="comment">// frequently happens because of phi translation.</span></div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;  <a class="code" href="namespacellvm.html#a42108fe3c2695cb429e6fe312908fa0d">SimplifyInstructionsInBlock</a>(NewBB, TLI);</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160; </div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;  <span class="comment">// Update the edge weight from BB to SuccBB, which should be less than before.</span></div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;  updateBlockFreqAndEdgeWeight(PredBB, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, NewBB, SuccBB, <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>, BPI, HasProfile);</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160; </div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;  <span class="comment">// Threaded an edge!</span></div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;  ++NumThreads;</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;}</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;<span class="comment">/// Create a new basic block that will be the predecessor of BB and successor of</span></div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;<span class="comment">/// all blocks in Preds. When profile data is available, update the frequency of</span></div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;<span class="comment">/// this new block.</span></div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *JumpThreadingPass::splitBlockPreds(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;                                               <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;BasicBlock *&gt;</a> Preds,</div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;                                               <span class="keyword">const</span> <span class="keywordtype">char</span> *Suffix) {</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 2&gt;</a> NewBBs;</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160; </div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;  <span class="comment">// Collect the frequencies of all predecessors of BB, which will be used to</span></div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;  <span class="comment">// update the edge weight of the result of splitting predecessors.</span></div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;BasicBlock *, BlockFrequency&gt;</a> FreqMap;</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;  <span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a> = getBFI();</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>) {</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;    <span class="keyword">auto</span> *BPI = getOrCreateBPI(<span class="keyword">true</span>);</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Pred : Preds)</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;      FreqMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">insert</a>(std::make_pair(</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;          Pred, <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>-&gt;getBlockFreq(Pred) * BPI-&gt;getEdgeProbability(Pred, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)));</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;  }</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160; </div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;  <span class="comment">// In the case when BB is a LandingPad block we create 2 new predecessors</span></div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;  <span class="comment">// instead of just one.</span></div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;isLandingPad()) {</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;    std::string NewName = std::string(Suffix) + <span class="stringliteral">&quot;.split-lp&quot;</span>;</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;    <a class="code" href="namespacellvm.html#a375802f177d48987adb168b79c140022">SplitLandingPadPredecessors</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Preds, Suffix, NewName.c_str(), NewBBs);</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;    NewBBs.push_back(<a class="code" href="namespacellvm.html#a9d391b6acc6d90c9b8a8442324b1aa6f">SplitBlockPredecessors</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Preds, Suffix));</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;  }</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160; </div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;  std::vector&lt;DominatorTree::UpdateType&gt; Updates;</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;  Updates.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a499ea32ca1b8d16cedfe01d1e5b08f29">reserve</a>((2 * Preds.size()) + NewBBs.size());</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *NewBB : NewBBs) {</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;    <a class="code" href="classllvm_1_1BlockFrequency.html">BlockFrequency</a> NewBBFreq(0);</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;    Updates.push_back({<a class="code" href="classllvm_1_1DominatorTreeBase.html#a9aeeca2833810f01b20545a46fe22503">DominatorTree::Insert</a>, NewBB, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>});</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Pred : <a class="code" href="namespacellvm.html#acb22fb04083152eee862457e42e8dc31">predecessors</a>(NewBB)) {</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;      Updates.push_back({<a class="code" href="classllvm_1_1DominatorTreeBase.html#a71c91cbbfc1c0ecf9a69e10ccf739bd7">DominatorTree::Delete</a>, Pred, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>});</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;      Updates.push_back({<a class="code" href="classllvm_1_1DominatorTreeBase.html#a9aeeca2833810f01b20545a46fe22503">DominatorTree::Insert</a>, Pred, NewBB});</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>) <span class="comment">// Update frequencies between Pred -&gt; NewBB.</span></div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;        NewBBFreq += FreqMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a0b2ca98dc28c61793ff5c90d23e5f14e">lookup</a>(Pred);</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;    }</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>) <span class="comment">// Apply the summed frequency to NewBB.</span></div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;      <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>-&gt;setBlockFreq(NewBB, NewBBFreq.getFrequency());</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;  }</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160; </div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;  DTU-&gt;applyUpdatesPermissive(Updates);</div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;  <span class="keywordflow">return</span> NewBBs[0];</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;}</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160; </div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;<span class="keywordtype">bool</span> JumpThreadingPass::doesBlockHaveProfileData(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *TI = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator();</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;  <span class="keywordflow">if</span> (!TI || TI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a3287172f2d13af086e6d66364e8c6de3">getNumSuccessors</a>() &lt; 2)</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160; </div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a763fc760b3f95cdd3389fdb004122381">hasValidBranchWeightMD</a>(*TI);</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;}</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;<span class="comment">/// Update the block frequency of BB and branch weight and the metadata on the</span></div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;<span class="comment">/// edge BB-&gt;SuccBB. This is done by scaling the weight of BB-&gt;SuccBB by 1 -</span></div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;<span class="comment">/// Freq(PredBB-&gt;BB) / Freq(BB-&gt;SuccBB).</span></div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> JumpThreadingPass::updateBlockFreqAndEdgeWeight(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PredBB,</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;                                                     <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;                                                     <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewBB,</div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;                                                     <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *SuccBB,</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;                                                     <a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a> *<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>,</div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;                                                     <a class="code" href="classllvm_1_1BranchProbabilityInfo.html">BranchProbabilityInfo</a> *BPI,</div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;                                                     <span class="keywordtype">bool</span> HasProfile) {</div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(((<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a> &amp;&amp; BPI) || (!<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a> &amp;&amp; !<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>)) &amp;&amp;</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;         <span class="stringliteral">&quot;Both BFI &amp; BPI should either be set or unset&quot;</span>);</div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160; </div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>) {</div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!HasProfile &amp;&amp;</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;           <span class="stringliteral">&quot;It&#39;s expected to have BFI/BPI when profile info exists&quot;</span>);</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;  }</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160; </div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;  <span class="comment">// As the edge from PredBB to BB is deleted, we have to update the block</span></div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;  <span class="comment">// frequency of BB.</span></div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;  <span class="keyword">auto</span> BBOrigFreq = <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>-&gt;getBlockFreq(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;  <span class="keyword">auto</span> NewBBFreq = <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>-&gt;getBlockFreq(NewBB);</div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;  <span class="keyword">auto</span> BB2SuccBBFreq = BBOrigFreq * BPI-&gt;<a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a46502d648608aa13cb485ed4af447d88">getEdgeProbability</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, SuccBB);</div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;  <span class="keyword">auto</span> BBNewFreq = BBOrigFreq - NewBBFreq;</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;  <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>-&gt;setBlockFreq(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, BBNewFreq.getFrequency());</div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160; </div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;  <span class="comment">// Collect updated outgoing edges&#39; frequencies from BB and use them to update</span></div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;  <span class="comment">// edge probabilities.</span></div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;uint64_t, 4&gt;</a> BBSuccFreq;</div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Succ : <a class="code" href="namespacellvm.html#a26e2a938b431eaa6eca2beaa96410c9d">successors</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)) {</div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;    <span class="keyword">auto</span> SuccFreq = (Succ == SuccBB)</div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;                        ? BB2SuccBBFreq - NewBBFreq</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;                        : BBOrigFreq * BPI-&gt;<a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a46502d648608aa13cb485ed4af447d88">getEdgeProbability</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Succ);</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;    BBSuccFreq.push_back(SuccFreq.getFrequency());</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;  }</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160; </div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> MaxBBSuccFreq =</div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;      *std::max_element(BBSuccFreq.begin(), BBSuccFreq.end());</div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160; </div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BranchProbability, 4&gt;</a> BBSuccProbs;</div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;  <span class="keywordflow">if</span> (MaxBBSuccFreq == 0)</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;    BBSuccProbs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a38c50aa8e3e9588f4f968c2e03a0cee0">assign</a>(BBSuccFreq.size(),</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;                       {1, static_cast&lt;unsigned&gt;(BBSuccFreq.size())});</div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> Freq : BBSuccFreq)</div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;      BBSuccProbs.push_back(</div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;          <a class="code" href="classllvm_1_1BranchProbability.html#a0333345669e75a54c7de3d5fe0f6e746">BranchProbability::getBranchProbability</a>(Freq, MaxBBSuccFreq));</div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;    <span class="comment">// Normalize edge probabilities so that they sum up to one.</span></div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;    <a class="code" href="classllvm_1_1BranchProbability.html#afff2bab6bb7f206bbacad5dd589a6186">BranchProbability::normalizeProbabilities</a>(BBSuccProbs.begin(),</div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;                                              BBSuccProbs.end());</div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;  }</div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160; </div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;  <span class="comment">// Update edge probabilities in BPI.</span></div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;  BPI-&gt;<a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a145edc209aa2f628c73c9cf860eeeb5c">setEdgeProbability</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, BBSuccProbs);</div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160; </div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;  <span class="comment">// Update the profile metadata as well.</span></div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;  <span class="comment">// Don&#39;t do this if the profile of the transformed blocks was statically</span></div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;  <span class="comment">// estimated.  (This could occur despite the function having an entry</span></div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;  <span class="comment">// frequency in completely cold parts of the CFG.)</span></div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;  <span class="comment">// In this case we don&#39;t want to suggest to subsequent passes that the</span></div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;  <span class="comment">// calculated weights are fully consistent.  Consider this graph:</span></div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;  <span class="comment">//                 check_1</span></div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;  <span class="comment">//             50% /  |</span></div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;  <span class="comment">//             eq_1   | 50%</span></div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;  <span class="comment">//                 \  |</span></div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;  <span class="comment">//                 check_2</span></div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;  <span class="comment">//             50% /  |</span></div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;  <span class="comment">//             eq_2   | 50%</span></div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;  <span class="comment">//                 \  |</span></div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;  <span class="comment">//                 check_3</span></div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;  <span class="comment">//             50% /  |</span></div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;  <span class="comment">//             eq_3   | 50%</span></div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;  <span class="comment">//                 \  |</span></div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;  <span class="comment">// Assuming the blocks check_* all compare the same value against 1, 2 and 3,</span></div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;  <span class="comment">// the overall probabilities are inconsistent; the total probability that the</span></div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;  <span class="comment">// value is either 1, 2 or 3 is 150%.</span></div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;  <span class="comment">// As a consequence if we thread eq_1 -&gt; check_2 to check_3, check_2-&gt;check_3</span></div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;  <span class="comment">// becomes 0%.  This is even worse if the edge whose probability becomes 0% is</span></div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;  <span class="comment">// the loop exit edge.  Then based solely on static estimation we would assume</span></div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;  <span class="comment">// the loop was extremely hot.</span></div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;  <span class="comment">// FIXME this locally as well so that BPI and BFI are consistent as well.  We</span></div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;  <span class="comment">// shouldn&#39;t make edges extremely likely or unlikely based solely on static</span></div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;  <span class="comment">// estimation.</span></div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;  <span class="keywordflow">if</span> (BBSuccProbs.size() &gt;= 2 &amp;&amp; HasProfile) {</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;uint32_t, 4&gt;</a> Weights;</div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> Prob : BBSuccProbs)</div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;      Weights.push_back(Prob.getNumerator());</div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160; </div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;    <span class="keyword">auto</span> TI = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator();</div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;    TI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9247a212ea89acc9573fa7e7f557eaba">setMetadata</a>(</div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;        LLVMContext::MD_prof,</div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;        <a class="code" href="classllvm_1_1MDBuilder.html">MDBuilder</a>(TI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aa286a0f7f5d38488d593bb7ef0ba183e">getContext</a>()).<a class="code" href="classllvm_1_1MDBuilder.html#ad910125a9cfd76aaad7f69469df22f66">createBranchWeights</a>(Weights));</div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;  }</div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;}</div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;<span class="comment">/// duplicateCondBranchOnPHIIntoPred - PredBB contains an unconditional branch</span></div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;<span class="comment">/// to BB which contains an i1 PHI node and a conditional branch on that PHI.</span></div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;<span class="comment">/// If we can duplicate the contents of BB up into PredBB do so now, this</span></div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;<span class="comment">/// improves the odds that the branch will be on an analyzable instruction like</span></div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;<span class="comment">/// a compare.</span></div>
<div class="line"><a name="l02674"></a><span class="lineno"><a class="line" href="classllvm_1_1JumpThreadingPass.html#ac14ea98bd0e870e467ae0ddc75a9fa87"> 2674</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1JumpThreadingPass.html#ac14ea98bd0e870e467ae0ddc75a9fa87">JumpThreadingPass::duplicateCondBranchOnPHIIntoPred</a>(</div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;BasicBlock *&gt;</a> &amp;PredBBs) {</div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!PredBBs.empty() &amp;&amp; <span class="stringliteral">&quot;Can&#39;t handle an empty set&quot;</span>);</div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160; </div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;  <span class="comment">// If BB is a loop header, then duplicating this block outside the loop would</span></div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;  <span class="comment">// cause us to transform this into an irreducible loop, don&#39;t do this.</span></div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;  <span class="comment">// See the comments above findLoopHeaders for justifications and caveats.</span></div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;  <span class="keywordflow">if</span> (LoopHeaders.count(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)) {</div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Not duplicating loop header &#39;&quot;</span> &lt;&lt; <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getName()</div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;&#39; into predecessor block &#39;&quot;</span> &lt;&lt; PredBBs[0]-&gt;getName()</div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;&#39; - it might create an irreducible loop!\n&quot;</span>);</div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;  }</div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160; </div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;  <span class="keywordtype">unsigned</span> DuplicationCost = <a class="code" href="JumpThreading_8cpp.html#a65facbdd55e486cbcef04a12de132c9c">getJumpThreadDuplicationCost</a>(</div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;      <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator(), BBDupThreshold);</div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;  <span class="keywordflow">if</span> (DuplicationCost &gt; BBDupThreshold) {</div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Not duplicating BB &#39;&quot;</span> &lt;&lt; <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getName()</div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;&#39; - Cost is too high: &quot;</span> &lt;&lt; DuplicationCost &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;  }</div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160; </div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;  <span class="comment">// And finally, do it!  Start by factoring the predecessors if needed.</span></div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;  std::vector&lt;DominatorTree::UpdateType&gt; Updates;</div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PredBB;</div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;  <span class="keywordflow">if</span> (PredBBs.size() == 1)</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;    PredBB = PredBBs[0];</div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Factoring out &quot;</span> &lt;&lt; PredBBs.size()</div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; common predecessors.\n&quot;</span>);</div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;    PredBB = splitBlockPreds(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, PredBBs, <span class="stringliteral">&quot;.thr_comm&quot;</span>);</div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;  }</div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;  Updates.push_back({<a class="code" href="classllvm_1_1DominatorTreeBase.html#a71c91cbbfc1c0ecf9a69e10ccf739bd7">DominatorTree::Delete</a>, PredBB, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>});</div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160; </div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;  <span class="comment">// Okay, we decided to do this!  Clone all the instructions in BB onto the end</span></div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;  <span class="comment">// of PredBB.</span></div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Duplicating block &#39;&quot;</span> &lt;&lt; <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getName()</div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;&#39; into end of &#39;&quot;</span> &lt;&lt; PredBB-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>()</div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;&#39; to eliminate branch on phi.  Cost: &quot;</span></div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;                    &lt;&lt; DuplicationCost &lt;&lt; <span class="stringliteral">&quot; block is:&quot;</span> &lt;&lt; *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160; </div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;  <span class="comment">// Unless PredBB ends with an unconditional branch, split the edge so that we</span></div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;  <span class="comment">// can just clone the bits from BB into the end of the new PredBB.</span></div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *OldPredBranch = dyn_cast&lt;BranchInst&gt;(PredBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160; </div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;  <span class="keywordflow">if</span> (!OldPredBranch || !OldPredBranch-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad56f6a9b5cd05940017c4544df48bc30">isUnconditional</a>()) {</div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OldPredBB = PredBB;</div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;    PredBB = <a class="code" href="namespacellvm.html#adf83581f514774264d616eef5706cf6e">SplitEdge</a>(OldPredBB, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;    Updates.push_back({<a class="code" href="classllvm_1_1DominatorTreeBase.html#a9aeeca2833810f01b20545a46fe22503">DominatorTree::Insert</a>, OldPredBB, PredBB});</div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;    Updates.push_back({<a class="code" href="classllvm_1_1DominatorTreeBase.html#a9aeeca2833810f01b20545a46fe22503">DominatorTree::Insert</a>, PredBB, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>});</div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;    Updates.push_back({<a class="code" href="classllvm_1_1DominatorTreeBase.html#a71c91cbbfc1c0ecf9a69e10ccf739bd7">DominatorTree::Delete</a>, OldPredBB, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>});</div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;    OldPredBranch = cast&lt;BranchInst&gt;(PredBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;  }</div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160; </div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;  <span class="comment">// We are going to have to map operands from the original BB block into the</span></div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;  <span class="comment">// PredBB block.  Evaluate PHI nodes in BB.</span></div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Instruction*, Value*&gt;</a> ValueMapping;</div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160; </div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> BI = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;begin();</div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;  <span class="keywordflow">for</span> (; <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast&lt;PHINode&gt;(BI); ++BI)</div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;    ValueMapping[PN] = PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#adfb61ffe25c950c75c86310245b3ef39">getIncomingValueForBlock</a>(PredBB);</div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;  <span class="comment">// Clone the non-phi instructions of BB into PredBB, keeping track of the</span></div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;  <span class="comment">// mapping and using it to remap operands in the cloned instructions.</span></div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;  <span class="keywordflow">for</span> (; BI != <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;end(); ++BI) {</div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *New = BI-&gt;clone();</div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160; </div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;    <span class="comment">// Remap operands to patch up intra-block references.</span></div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = New-&gt;getNumOperands(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst = dyn_cast&lt;Instruction&gt;(New-&gt;getOperand(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>))) {</div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;        <a class="code" href="classllvm_1_1DenseMapIterator.html">DenseMap&lt;Instruction*, Value*&gt;::iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = ValueMapping.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(Inst);</div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != ValueMapping.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>())</div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;          New-&gt;setOperand(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;second);</div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;      }</div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160; </div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;    <span class="comment">// If this instruction can be simplified after the operands are updated,</span></div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;    <span class="comment">// just use the simplified value instead.  This frequently happens due to</span></div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;    <span class="comment">// phi translation.</span></div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a> = <a class="code" href="namespacellvm.html#aab02db480f387fca92956ef1c9a01941">simplifyInstruction</a>(</div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;            New,</div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;            {<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getModule()-&gt;getDataLayout(), TLI, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, New})) {</div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;      ValueMapping[&amp;*BI] = <a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a>;</div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;      <span class="keywordflow">if</span> (!New-&gt;mayHaveSideEffects()) {</div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;        New-&gt;deleteValue();</div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;        New = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;      }</div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;      ValueMapping[&amp;*BI] = New;</div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;    }</div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;    <span class="keywordflow">if</span> (New) {</div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;      <span class="comment">// Otherwise, insert the new instruction into the block.</span></div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;      New-&gt;setName(BI-&gt;getName());</div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;      New-&gt;insertInto(PredBB, OldPredBranch-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>());</div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;      <span class="comment">// Update Dominance from simplified New instruction operands.</span></div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = New-&gt;getNumOperands(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *SuccBB = dyn_cast&lt;BasicBlock&gt;(New-&gt;getOperand(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)))</div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;          Updates.push_back({<a class="code" href="classllvm_1_1DominatorTreeBase.html#a9aeeca2833810f01b20545a46fe22503">DominatorTree::Insert</a>, PredBB, SuccBB});</div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;    }</div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;  }</div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160; </div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;  <span class="comment">// Check to see if the targets of the branch had PHI nodes. If so, we need to</span></div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;  <span class="comment">// add entries to the PHI nodes for branch from PredBB now.</span></div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BBBranch = cast&lt;BranchInst&gt;(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator());</div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;  <a class="code" href="JumpThreading_8cpp.html#aaca431cd72c37f81086a391fb63693d8">addPHINodeEntriesForMappedBlock</a>(BBBranch-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(0), <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, PredBB,</div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;                                  ValueMapping);</div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;  <a class="code" href="JumpThreading_8cpp.html#aaca431cd72c37f81086a391fb63693d8">addPHINodeEntriesForMappedBlock</a>(BBBranch-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(1), <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, PredBB,</div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;                                  ValueMapping);</div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160; </div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;  updateSSA(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, PredBB, ValueMapping);</div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160; </div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;  <span class="comment">// PredBB no longer jumps to BB, remove entries in the PHI node for the edge</span></div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;  <span class="comment">// that we nuked.</span></div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;  <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;removePredecessor(PredBB, <span class="keyword">true</span>);</div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160; </div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;  <span class="comment">// Remove the unconditional branch at the end of the PredBB block.</span></div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;  OldPredBranch-&gt;eraseFromParent();</div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *BPI = getBPI())</div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;    BPI-&gt;<a class="code" href="classllvm_1_1BranchProbabilityInfo.html#af095c82360c397be730c08feb78264e9">copyEdgeProbabilities</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, PredBB);</div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;  DTU-&gt;applyUpdatesPermissive(Updates);</div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160; </div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;  ++NumDupes;</div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;}</div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160; </div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;<span class="comment">// Pred is a predecessor of BB with an unconditional branch to BB. SI is</span></div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;<span class="comment">// a Select instruction in Pred. BB has other predecessors and SI is used in</span></div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;<span class="comment">// a PHI node in BB. SI has no other use.</span></div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;<span class="comment">// A new basic block, NewBB, is created and SI is converted to compare and </span></div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;<span class="comment">// conditional branch. SI is erased from parent.</span></div>
<div class="line"><a name="l02802"></a><span class="lineno"><a class="line" href="classllvm_1_1JumpThreadingPass.html#a7f1482a3531f0a99f5481d84bae6127e"> 2802</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1JumpThreadingPass.html#a7f1482a3531f0a99f5481d84bae6127e">JumpThreadingPass::unfoldSelectInstr</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Pred, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;                                          <a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>, <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *SIUse,</div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;                                          <span class="keywordtype">unsigned</span> Idx) {</div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;  <span class="comment">// Expand the select.</span></div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;  <span class="comment">// Pred --</span></div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;  <span class="comment">//  |    v</span></div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;  <span class="comment">//  |  NewBB</span></div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;  <span class="comment">//  |    |</span></div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;  <span class="comment">//  |-----</span></div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;  <span class="comment">//  v</span></div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;  <span class="comment">// BB</span></div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *PredTerm = cast&lt;BranchInst&gt;(Pred-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewBB = <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getContext(), <span class="stringliteral">&quot;select.unfold&quot;</span>,</div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;                                         <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getParent(), <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;  <span class="comment">// Move the unconditional branch to NewBB.</span></div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;  PredTerm-&gt;<a class="code" href="classllvm_1_1Instruction.html#a0fd53f63d349dc8a7c5fc0cdd7a94c8d">removeFromParent</a>();</div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;  PredTerm-&gt;<a class="code" href="classllvm_1_1Instruction.html#ad8c5093a18a40f863d4fc5fa6eefefa8">insertInto</a>(NewBB, NewBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>());</div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;  <span class="comment">// Create a conditional branch and update PHI nodes.</span></div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;  <span class="keyword">auto</span> *BI = <a class="code" href="classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">BranchInst::Create</a>(NewBB, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getCondition(), Pred);</div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;  BI-&gt;applyMergedLocation(PredTerm-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">getDebugLoc</a>(), <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getDebugLoc());</div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;  BI-&gt;copyMetadata(*<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>, {LLVMContext::MD_prof});</div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;  SIUse-&gt;<a class="code" href="classllvm_1_1PHINode.html#a88cdefb709309eddc6e5daca0be6a7b4">setIncomingValue</a>(Idx, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getFalseValue());</div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;  SIUse-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getTrueValue(), NewBB);</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160; </div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> TrueWeight = 1;</div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> FalseWeight = 1;</div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;  <span class="comment">// Copy probabilities from &#39;SI&#39; to created conditional branch in &#39;Pred&#39;.</span></div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ac19cbbc4935a23e1d44f65e1eaba6b1d">extractBranchWeights</a>(*<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>, TrueWeight, FalseWeight) &amp;&amp;</div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;      (TrueWeight + FalseWeight) != 0) {</div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BranchProbability, 2&gt;</a> BP;</div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;    BP.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(<a class="code" href="classllvm_1_1BranchProbability.html#a0333345669e75a54c7de3d5fe0f6e746">BranchProbability::getBranchProbability</a>(</div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;        TrueWeight, TrueWeight + FalseWeight));</div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;    BP.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(<a class="code" href="classllvm_1_1BranchProbability.html#a0333345669e75a54c7de3d5fe0f6e746">BranchProbability::getBranchProbability</a>(</div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;        FalseWeight, TrueWeight + FalseWeight));</div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;    <span class="comment">// Update BPI if exists.</span></div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *BPI = getBPI())</div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;      BPI-&gt;<a class="code" href="classllvm_1_1BranchProbabilityInfo.html#a145edc209aa2f628c73c9cf860eeeb5c">setEdgeProbability</a>(Pred, BP);</div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;  }</div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;  <span class="comment">// Set the block frequency of NewBB.</span></div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a> = getBFI()) {</div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;    <span class="keywordflow">if</span> ((TrueWeight + FalseWeight) == 0) {</div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;      TrueWeight = 1;</div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;      FalseWeight = 1;</div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;    }</div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;    <a class="code" href="classllvm_1_1BranchProbability.html">BranchProbability</a> PredToNewBBProb = <a class="code" href="classllvm_1_1BranchProbability.html#a0333345669e75a54c7de3d5fe0f6e746">BranchProbability::getBranchProbability</a>(</div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;        TrueWeight, TrueWeight + FalseWeight);</div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;    <span class="keyword">auto</span> NewBBFreq = <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>-&gt;getBlockFreq(Pred) * PredToNewBBProb;</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;    <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>-&gt;setBlockFreq(NewBB, NewBBFreq.getFrequency());</div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;  }</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160; </div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;  <span class="comment">// The select is now dead.</span></div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;  <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;  DTU-&gt;applyUpdatesPermissive({{<a class="code" href="classllvm_1_1DominatorTreeBase.html#a9aeeca2833810f01b20545a46fe22503">DominatorTree::Insert</a>, NewBB, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>},</div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;                               {<a class="code" href="classllvm_1_1DominatorTreeBase.html#a9aeeca2833810f01b20545a46fe22503">DominatorTree::Insert</a>, Pred, NewBB}});</div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160; </div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;  <span class="comment">// Update any other PHI nodes in BB.</span></div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> BI = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;begin();</div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;       <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *Phi = dyn_cast&lt;PHINode&gt;(BI); ++BI)</div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;    <span class="keywordflow">if</span> (Phi != SIUse)</div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;      Phi-&gt;addIncoming(Phi-&gt;getIncomingValueForBlock(Pred), NewBB);</div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;}</div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160; </div>
<div class="line"><a name="l02865"></a><span class="lineno"><a class="line" href="classllvm_1_1JumpThreadingPass.html#aa0555f067de530264e995e433ebb7e42"> 2865</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1JumpThreadingPass.html#ae4ca9bfe94c6cc3d952413c7907db47f">JumpThreadingPass::tryToUnfoldSelect</a>(<a class="code" href="classllvm_1_1SwitchInst.html">SwitchInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *CondPHI = dyn_cast&lt;PHINode&gt;(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getCondition());</div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160; </div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;  <span class="keywordflow">if</span> (!CondPHI || CondPHI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>() != <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160; </div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = CondPHI-&gt;<a class="code" href="classllvm_1_1PHINode.html#aef51af4b490af6b3bf2dfbc8737a8f9f">getNumIncomingValues</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Pred = CondPHI-&gt;<a class="code" href="classllvm_1_1PHINode.html#a8ce0c4746a1ec805e66409d20ae93922">getIncomingBlock</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;    <a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *PredSI = dyn_cast&lt;SelectInst&gt;(CondPHI-&gt;<a class="code" href="classllvm_1_1PHINode.html#a16c39eb6e60b42a40c399d8d65347bb6">getIncomingValue</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160; </div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;    <span class="comment">// The second and third condition can be potentially relaxed. Currently</span></div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;    <span class="comment">// the conditions help to simplify the code and allow us to reuse existing</span></div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;    <span class="comment">// code, developed for tryToUnfoldSelect(CmpInst *, BasicBlock *)</span></div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;    <span class="keywordflow">if</span> (!PredSI || PredSI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>() != Pred || !PredSI-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())</div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160; </div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;    <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *PredTerm = dyn_cast&lt;BranchInst&gt;(Pred-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;    <span class="keywordflow">if</span> (!PredTerm || !PredTerm-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad56f6a9b5cd05940017c4544df48bc30">isUnconditional</a>())</div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160; </div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;    unfoldSelectInstr(Pred, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, PredSI, CondPHI, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;  }</div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;}</div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;<span class="comment">/// tryToUnfoldSelect - Look for blocks of the form</span></div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;<span class="comment">/// bb1:</span></div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;<span class="comment">///   %a = select</span></div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;<span class="comment">///   br bb2</span></div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;<span class="comment">/// bb2:</span></div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;<span class="comment">///   %p = phi [%a, %bb1] ...</span></div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;<span class="comment">///   %c = icmp %p</span></div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;<span class="comment">///   br i1 %c</span></div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;<span class="comment">/// And expand the select into a branch structure if one of its arms allows %c</span></div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;<span class="comment">/// to be folded. This later enables threading from bb1 over bb2.</span></div>
<div class="line"><a name="l02903"></a><span class="lineno"><a class="line" href="classllvm_1_1JumpThreadingPass.html#ae4ca9bfe94c6cc3d952413c7907db47f"> 2903</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1JumpThreadingPass.html#ae4ca9bfe94c6cc3d952413c7907db47f">JumpThreadingPass::tryToUnfoldSelect</a>(<a class="code" href="classllvm_1_1CmpInst.html">CmpInst</a> *CondCmp, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *CondBr = dyn_cast&lt;BranchInst&gt;(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator());</div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *CondLHS = dyn_cast&lt;PHINode&gt;(CondCmp-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0));</div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *CondRHS = cast&lt;Constant&gt;(CondCmp-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1));</div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160; </div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;  <span class="keywordflow">if</span> (!CondBr || !CondBr-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a7e4be8b16fbd68c9045a388904044e01">isConditional</a>() || !CondLHS ||</div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;      CondLHS-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>() != <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160; </div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = CondLHS-&gt;<a class="code" href="classllvm_1_1PHINode.html#aef51af4b490af6b3bf2dfbc8737a8f9f">getNumIncomingValues</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Pred = CondLHS-&gt;<a class="code" href="classllvm_1_1PHINode.html#a8ce0c4746a1ec805e66409d20ae93922">getIncomingBlock</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;    <a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;SelectInst&gt;(CondLHS-&gt;<a class="code" href="classllvm_1_1PHINode.html#a16c39eb6e60b42a40c399d8d65347bb6">getIncomingValue</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160; </div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;    <span class="comment">// Look if one of the incoming values is a select in the corresponding</span></div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;    <span class="comment">// predecessor.</span></div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> || <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getParent() != Pred || !<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;hasOneUse())</div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160; </div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;    <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *PredTerm = dyn_cast&lt;BranchInst&gt;(Pred-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;    <span class="keywordflow">if</span> (!PredTerm || !PredTerm-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad56f6a9b5cd05940017c4544df48bc30">isUnconditional</a>())</div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160; </div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;    <span class="comment">// Now check if one of the select values would allow us to constant fold the</span></div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;    <span class="comment">// terminator in BB. We don&#39;t do the transform if both sides fold, those</span></div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;    <span class="comment">// cases will be threaded in any case.</span></div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;    <a class="code" href="classllvm_1_1LazyValueInfo.html#a381305cf61c847551a489431c43cec47">LazyValueInfo::Tristate</a> LHSFolds =</div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;        LVI-&gt;getPredicateOnEdge(CondCmp-&gt;<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>(), <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getOperand(1),</div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;                                CondRHS, Pred, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, CondCmp);</div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;    <a class="code" href="classllvm_1_1LazyValueInfo.html#a381305cf61c847551a489431c43cec47">LazyValueInfo::Tristate</a> RHSFolds =</div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;        LVI-&gt;getPredicateOnEdge(CondCmp-&gt;<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>(), <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getOperand(2),</div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;                                CondRHS, Pred, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, CondCmp);</div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;    <span class="keywordflow">if</span> ((LHSFolds != <a class="code" href="classllvm_1_1LazyValueInfo.html#a381305cf61c847551a489431c43cec47aa3c975a91c3fef72486f9935e4099c8c">LazyValueInfo::Unknown</a> ||</div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;         RHSFolds != <a class="code" href="classllvm_1_1LazyValueInfo.html#a381305cf61c847551a489431c43cec47aa3c975a91c3fef72486f9935e4099c8c">LazyValueInfo::Unknown</a>) &amp;&amp;</div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;        LHSFolds != RHSFolds) {</div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;      unfoldSelectInstr(Pred, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>, CondLHS, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;    }</div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;  }</div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;}</div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;<span class="comment">/// tryToUnfoldSelectInCurrBB - Look for PHI/Select or PHI/CMP/Select in the</span></div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;<span class="comment">/// same BB in the form</span></div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;<span class="comment">/// bb:</span></div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;<span class="comment">///   %p = phi [false, %bb1], [true, %bb2], [false, %bb3], [true, %bb4], ...</span></div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;<span class="comment">///   %s = select %p, trueval, falseval</span></div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;<span class="comment">/// or</span></div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;<span class="comment">/// bb:</span></div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;<span class="comment">///   %p = phi [0, %bb1], [1, %bb2], [0, %bb3], [1, %bb4], ...</span></div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;<span class="comment">///   %c = cmp %p, 0</span></div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;<span class="comment">///   %s = select %c, trueval, falseval</span></div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;<span class="comment">/// And expand the select into a branch structure. This later enables</span></div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;<span class="comment">/// jump-threading over bb in this pass.</span></div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;<span class="comment">/// Using the similar approach of SimplifyCFG::FoldCondBranchOnPHI(), unfold</span></div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;<span class="comment">/// select if the associated PHI has at least one constant.  If the unfolded</span></div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;<span class="comment">/// select is not jump-threaded, it will be folded again in the later</span></div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;<span class="comment">/// optimizations.</span></div>
<div class="line"><a name="l02964"></a><span class="lineno"><a class="line" href="classllvm_1_1JumpThreadingPass.html#af1fb897c419e6a5080ecf54baf13f169"> 2964</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1JumpThreadingPass.html#af1fb897c419e6a5080ecf54baf13f169">JumpThreadingPass::tryToUnfoldSelectInCurrBB</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;  <span class="comment">// This transform would reduce the quality of msan diagnostics.</span></div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;  <span class="comment">// Disable this transform under MemorySanitizer.</span></div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getParent()-&gt;hasFnAttribute(Attribute::SanitizeMemory))</div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160; </div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;  <span class="comment">// If threading this would thread across a loop header, don&#39;t thread the edge.</span></div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;  <span class="comment">// See the comments above findLoopHeaders for justifications and caveats.</span></div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;  <span class="keywordflow">if</span> (LoopHeaders.count(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160; </div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> BI = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;begin();</div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;       <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast&lt;PHINode&gt;(BI); ++BI) {</div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;    <span class="comment">// Look for a Phi having at least one constant incoming value.</span></div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">llvm::all_of</a>(PN-&gt;incoming_values(),</div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;                     [](<a class="code" href="classllvm_1_1Value.html">Value</a> *V) { return !isa&lt;ConstantInt&gt;(V); }))</div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160; </div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;    <span class="keyword">auto</span> isUnfoldCandidate = [<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>](<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;      <span class="keyword">using namespace </span>PatternMatch;</div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160; </div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;      <span class="comment">// Check if SI is in BB and use V as condition.</span></div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getParent() != <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getCondition();</div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;      <span class="keywordtype">bool</span> IsAndOr = <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#af4feec45578e32fe65d8efc59112bc8e">m_CombineOr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a213e6c0ca6e838157373b9a6018c0769">m_LogicalAnd</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a1a06b1cff93069d7403ea03e6150e386">m_LogicalOr</a>()));</div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> &amp;&amp; <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> == V &amp;&amp; <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>-&gt;getType()-&gt;isIntegerTy(1) &amp;&amp; !IsAndOr;</div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;    };</div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160; </div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;    <a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U : PN-&gt;<a class="code" href="classllvm_1_1Value.html#aecb93439702247fe5353a9966f7cefcd">uses</a>()) {</div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *Cmp = dyn_cast&lt;ICmpInst&gt;(U.getUser())) {</div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;        <span class="comment">// Look for a ICmp in BB that compares PN with a constant and is the</span></div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;        <span class="comment">// condition of a Select.</span></div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;        <span class="keywordflow">if</span> (Cmp-&gt;getParent() == <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> &amp;&amp; Cmp-&gt;hasOneUse() &amp;&amp;</div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;            isa&lt;ConstantInt&gt;(Cmp-&gt;getOperand(1 - U.getOperandNo())))</div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *SelectI = dyn_cast&lt;SelectInst&gt;(Cmp-&gt;user_back()))</div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;            <span class="keywordflow">if</span> (isUnfoldCandidate(SelectI, Cmp-&gt;use_begin()-&gt;get())) {</div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;              <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = SelectI;</div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;            }</div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *SelectI = dyn_cast&lt;SelectInst&gt;(U.getUser())) {</div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;        <span class="comment">// Look for a Select in BB that uses PN as condition.</span></div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;        <span class="keywordflow">if</span> (isUnfoldCandidate(SelectI, U.get())) {</div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;          <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = SelectI;</div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;        }</div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;      }</div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;    }</div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160; </div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>)</div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;    <span class="comment">// Expand the select.</span></div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getCondition();</div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#ab8a7ef433279aabf7f30fa5504a4d4ef">isGuaranteedNotToBeUndefOrPoison</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <span class="keyword">nullptr</span>, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>))</div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;      <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = <span class="keyword">new</span> <a class="code" href="classllvm_1_1FreezeInst.html">FreezeInst</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <span class="stringliteral">&quot;cond.fr&quot;</span>, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>);</div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1M68kBeads.html#a7eeab1fe8f39bf89dcd7929b816ebfcca27d0e059322508a76f918503800ef1bd">Term</a> = <a class="code" href="namespacellvm.html#ae2aea60aed775d05692317bf4855c291">SplitBlockAndInsertIfThen</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *SplitBB = <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getParent();</div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewBB = <a class="code" href="namespacellvm_1_1M68kBeads.html#a7eeab1fe8f39bf89dcd7929b816ebfcca27d0e059322508a76f918503800ef1bd">Term</a>-&gt;getParent();</div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *NewPN = <a class="code" href="classllvm_1_1PHINode.html#ab0ff669b12c20c07137705c38872ec63">PHINode::Create</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getType(), 2, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>);</div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;    NewPN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getTrueValue(), <a class="code" href="namespacellvm_1_1M68kBeads.html#a7eeab1fe8f39bf89dcd7929b816ebfcca27d0e059322508a76f918503800ef1bd">Term</a>-&gt;getParent());</div>
<div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;    NewPN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getFalseValue(), <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;    <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;replaceAllUsesWith(NewPN);</div>
<div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;    <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;    <span class="comment">// NewBB and SplitBB are newly created blocks which require insertion.</span></div>
<div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;    std::vector&lt;DominatorTree::UpdateType&gt; Updates;</div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;    Updates.reserve((2 * SplitBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#a3287172f2d13af086e6d66364e8c6de3">getNumSuccessors</a>()) + 3);</div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;    Updates.push_back({<a class="code" href="classllvm_1_1DominatorTreeBase.html#a9aeeca2833810f01b20545a46fe22503">DominatorTree::Insert</a>, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, SplitBB});</div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;    Updates.push_back({<a class="code" href="classllvm_1_1DominatorTreeBase.html#a9aeeca2833810f01b20545a46fe22503">DominatorTree::Insert</a>, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, NewBB});</div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;    Updates.push_back({<a class="code" href="classllvm_1_1DominatorTreeBase.html#a9aeeca2833810f01b20545a46fe22503">DominatorTree::Insert</a>, NewBB, SplitBB});</div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;    <span class="comment">// BB&#39;s successors were moved to SplitBB, update DTU accordingly.</span></div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Succ : <a class="code" href="namespacellvm.html#a26e2a938b431eaa6eca2beaa96410c9d">successors</a>(SplitBB)) {</div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;      Updates.push_back({<a class="code" href="classllvm_1_1DominatorTreeBase.html#a71c91cbbfc1c0ecf9a69e10ccf739bd7">DominatorTree::Delete</a>, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Succ});</div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;      Updates.push_back({<a class="code" href="classllvm_1_1DominatorTreeBase.html#a9aeeca2833810f01b20545a46fe22503">DominatorTree::Insert</a>, SplitBB, Succ});</div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;    }</div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;    DTU-&gt;applyUpdatesPermissive(Updates);</div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;  }</div>
<div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;}</div>
<div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;<span class="comment">/// Try to propagate a guard from the current BB into one of its predecessors</span></div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;<span class="comment">/// in case if another branch of execution implies that the condition of this</span></div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;<span class="comment">/// guard is always true. Currently we only process the simplest case that</span></div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;<span class="comment">/// looks like:</span></div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;<span class="comment">/// Start:</span></div>
<div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;<span class="comment">///   %cond = ...</span></div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;<span class="comment">///   br i1 %cond, label %T1, label %F1</span></div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;<span class="comment">/// T1:</span></div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;<span class="comment">///   br label %Merge</span></div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;<span class="comment">/// F1:</span></div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;<span class="comment">///   br label %Merge</span></div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;<span class="comment">/// Merge:</span></div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;<span class="comment">///   %condGuard = ...</span></div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;<span class="comment">///   call void(i1, ...) @llvm.experimental.guard( i1 %condGuard )[ &quot;deopt&quot;() ]</span></div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;<span class="comment">/// And cond either implies condGuard or !condGuard. In this case all the</span></div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;<span class="comment">/// instructions before the guard can be duplicated in both branches, and the</span></div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;<span class="comment">/// guard is then threaded to one of them.</span></div>
<div class="line"><a name="l03064"></a><span class="lineno"><a class="line" href="classllvm_1_1JumpThreadingPass.html#a080bc28b084ddc6539dda7e94a300da7"> 3064</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1JumpThreadingPass.html#a080bc28b084ddc6539dda7e94a300da7">JumpThreadingPass::processGuards</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;  <span class="keyword">using namespace </span>PatternMatch;</div>
<div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160; </div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;  <span class="comment">// We only want to deal with two predecessors.</span></div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Pred1, *Pred2;</div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;  <span class="keyword">auto</span> PI = <a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>), PE = <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;  <span class="keywordflow">if</span> (PI == PE)</div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;  Pred1 = *PI++;</div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;  <span class="keywordflow">if</span> (PI == PE)</div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;  Pred2 = *PI++;</div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;  <span class="keywordflow">if</span> (PI != PE)</div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;  <span class="keywordflow">if</span> (Pred1 == Pred2)</div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160; </div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;  <span class="comment">// Try to thread one of the guards of the block.</span></div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;  <span class="comment">// TODO: Look up deeper than to immediate predecessor?</span></div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;  <span class="keyword">auto</span> *Parent = Pred1-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a59fb91d1691350f7d1b8e8a114e3f2a4">getSinglePredecessor</a>();</div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;  <span class="keywordflow">if</span> (!Parent || Parent != Pred2-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a59fb91d1691350f7d1b8e8a114e3f2a4">getSinglePredecessor</a>())</div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160; </div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *BI = dyn_cast&lt;BranchInst&gt;(Parent-&gt;getTerminator()))</div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div>
<div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a656efdcee3deb029763304d3e741a2d1">isGuard</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp;&amp; threadGuard(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, cast&lt;IntrinsicInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>), BI))</div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160; </div>
<div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;}</div>
<div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;<span class="comment">/// Try to propagate the guard from BB which is the lower block of a diamond</span></div>
<div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;<span class="comment">/// to one of its branches, in case if diamond&#39;s condition implies guard&#39;s</span></div>
<div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;<span class="comment">/// condition.</span></div>
<div class="line"><a name="l03098"></a><span class="lineno"><a class="line" href="classllvm_1_1JumpThreadingPass.html#afed5e8a79fa550920f638708cc257bdf"> 3098</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1JumpThreadingPass.html#afed5e8a79fa550920f638708cc257bdf">JumpThreadingPass::threadGuard</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *Guard,</div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;                                    <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI) {</div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a96b8f11f6f21ca0321294669dab83b35">getNumSuccessors</a>() == 2 &amp;&amp; <span class="stringliteral">&quot;Wrong number of successors?&quot;</span>);</div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a7e4be8b16fbd68c9045a388904044e01">isConditional</a>() &amp;&amp; <span class="stringliteral">&quot;Unconditional branch has 2 successors?&quot;</span>);</div>
<div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *GuardCond = Guard-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(0);</div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *BranchCond = BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">getCondition</a>();</div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *TrueDest = BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(0);</div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *FalseDest = BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(1);</div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160; </div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;  <span class="keyword">auto</span> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getModule()-&gt;getDataLayout();</div>
<div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;  <span class="keywordtype">bool</span> TrueDestIsSafe = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;  <span class="keywordtype">bool</span> FalseDestIsSafe = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160; </div>
<div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;  <span class="comment">// True dest is safe if BranchCond =&gt; GuardCond.</span></div>
<div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;  <span class="keyword">auto</span> Impl = <a class="code" href="namespacellvm.html#af7f2eb961a542779e97c0b3ec7fa6623">isImpliedCondition</a>(BranchCond, GuardCond, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;  <span class="keywordflow">if</span> (Impl &amp;&amp; *Impl)</div>
<div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;    TrueDestIsSafe = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;    <span class="comment">// False dest is safe if !BranchCond =&gt; GuardCond.</span></div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;    Impl = <a class="code" href="namespacellvm.html#af7f2eb961a542779e97c0b3ec7fa6623">isImpliedCondition</a>(BranchCond, GuardCond, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <span class="comment">/* LHSIsTrue */</span> <span class="keyword">false</span>);</div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;    <span class="keywordflow">if</span> (Impl &amp;&amp; *Impl)</div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;      FalseDestIsSafe = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;  }</div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160; </div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;  <span class="keywordflow">if</span> (!TrueDestIsSafe &amp;&amp; !FalseDestIsSafe)</div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160; </div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PredUnguardedBlock = TrueDestIsSafe ? TrueDest : FalseDest;</div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PredGuardedBlock = FalseDestIsSafe ? TrueDest : FalseDest;</div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160; </div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;  <a class="code" href="classllvm_1_1ValueMap.html">ValueToValueMapTy</a> UnguardedMapping, GuardedMapping;</div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *AfterGuard = Guard-&gt;<a class="code" href="classllvm_1_1ilist__node__with__parent.html#a26708685cc8b94fe3d7092ee080dbb34">getNextNode</a>();</div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6">Cost</a> =</div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;      <a class="code" href="JumpThreading_8cpp.html#a65facbdd55e486cbcef04a12de132c9c">getJumpThreadDuplicationCost</a>(<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, AfterGuard, BBDupThreshold);</div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6">Cost</a> &gt; BBDupThreshold)</div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;  <span class="comment">// Duplicate all instructions before the guard and the guard itself to the</span></div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;  <span class="comment">// branch where implication is not proved.</span></div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *GuardedBlock = <a class="code" href="namespacellvm.html#a4cd89ca702a817aac3a4521dd2462a2e">DuplicateInstructionsInSplitBetween</a>(</div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;      <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, PredGuardedBlock, AfterGuard, GuardedMapping, *DTU);</div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(GuardedBlock &amp;&amp; <span class="stringliteral">&quot;Could not create the guarded block?&quot;</span>);</div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;  <span class="comment">// Duplicate all instructions before the guard in the unguarded branch.</span></div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;  <span class="comment">// Since we have successfully duplicated the guarded block and this block</span></div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;  <span class="comment">// has fewer instructions, we expect it to succeed.</span></div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *UnguardedBlock = <a class="code" href="namespacellvm.html#a4cd89ca702a817aac3a4521dd2462a2e">DuplicateInstructionsInSplitBetween</a>(</div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;      <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, PredUnguardedBlock, Guard, UnguardedMapping, *DTU);</div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(UnguardedBlock &amp;&amp; <span class="stringliteral">&quot;Could not create the unguarded block?&quot;</span>);</div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Moved guard &quot;</span> &lt;&lt; *Guard &lt;&lt; <span class="stringliteral">&quot; to block &quot;</span></div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;                    &lt;&lt; GuardedBlock-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;  <span class="comment">// Some instructions before the guard may still have uses. For them, we need</span></div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;  <span class="comment">// to create Phi nodes merging their copies in both guarded and unguarded</span></div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;  <span class="comment">// branches. Those instructions that have no uses can be just removed.</span></div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 4&gt;</a> <a class="code" href="ARMLowOverheadLoops_8cpp.html#a3bf42baf773b375802538951c88d8e12">ToRemove</a>;</div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> BI = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;begin(); &amp;*BI != AfterGuard; ++BI)</div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;    <span class="keywordflow">if</span> (!isa&lt;PHINode&gt;(&amp;*BI))</div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;      <a class="code" href="ARMLowOverheadLoops_8cpp.html#a3bf42baf773b375802538951c88d8e12">ToRemove</a>.push_back(&amp;*BI);</div>
<div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160; </div>
<div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InsertionPoint = &amp;*<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getFirstInsertionPt();</div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(InsertionPoint &amp;&amp; <span class="stringliteral">&quot;Empty block?&quot;</span>);</div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;  <span class="comment">// Substitute with Phis &amp; remove.</span></div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Inst : <a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">reverse</a>(<a class="code" href="ARMLowOverheadLoops_8cpp.html#a3bf42baf773b375802538951c88d8e12">ToRemove</a>)) {</div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;    <span class="keywordflow">if</span> (!Inst-&gt;use_empty()) {</div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;      <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *NewPN = <a class="code" href="classllvm_1_1PHINode.html#ab0ff669b12c20c07137705c38872ec63">PHINode::Create</a>(Inst-&gt;getType(), 2);</div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;      NewPN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(UnguardedMapping[Inst], UnguardedBlock);</div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;      NewPN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(GuardedMapping[Inst], GuardedBlock);</div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;      NewPN-&gt;<a class="code" href="classllvm_1_1Instruction.html#a482498a1c760122fd33c7fc8190dd277">insertBefore</a>(InsertionPoint);</div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;      Inst-&gt;replaceAllUsesWith(NewPN);</div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;    }</div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;    Inst-&gt;eraseFromParent();</div>
<div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;  }</div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;}</div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160; </div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;<a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> JumpThreadingPass::getPreservedAnalysis()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;  <a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> PA;</div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;  PA.<a class="code" href="classllvm_1_1PreservedAnalyses.html#ad966bea18aa62ffb9e040509adc7c99f">preserve</a>&lt;<a class="code" href="classllvm_1_1LazyValueAnalysis.html">LazyValueAnalysis</a>&gt;();</div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;  PA.<a class="code" href="classllvm_1_1PreservedAnalyses.html#ad966bea18aa62ffb9e040509adc7c99f">preserve</a>&lt;<a class="code" href="classllvm_1_1DominatorTreeAnalysis.html">DominatorTreeAnalysis</a>&gt;();</div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160; </div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;  <span class="comment">// TODO: We would like to preserve BPI/BFI. Enable once all paths update them.</span></div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;  <span class="comment">// TODO: Would be nice to verify BPI/BFI consistency as well.</span></div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;  <span class="keywordflow">return</span> PA;</div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;}</div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160; </div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> AnalysisT&gt;</div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;<span class="keyword">typename</span> AnalysisT::Result *JumpThreadingPass::runExternalAnalysis() {</div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a> &amp;&amp; <span class="stringliteral">&quot;Can&#39;t run external analysis without FunctionAnalysisManager&quot;</span>);</div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160; </div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;  <span class="comment">// If there were no changes since last call to &#39;runExternalAnalysis&#39; then all</span></div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;  <span class="comment">// analysis is either up to date or explicitly invalidated. Just go ahead and</span></div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;  <span class="comment">// run the &quot;external&quot; analysis.</span></div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;  <span class="keywordflow">if</span> (!ChangedSinceLastAnalysisUpdate) {</div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!DTU-&gt;hasPendingUpdates() &amp;&amp;</div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;           <span class="stringliteral">&quot;Lost update of &#39;ChangedSinceLastAnalysisUpdate&#39;?&quot;</span>);</div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;    <span class="comment">// Run the &quot;external&quot; analysis.</span></div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>-&gt;<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;AnalysisT&gt;(*F);</div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;  }</div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;  ChangedSinceLastAnalysisUpdate = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160; </div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;  <span class="keyword">auto</span> PA = getPreservedAnalysis();</div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;  <span class="comment">// TODO: This shouldn&#39;t be needed once &#39;getPreservedAnalysis&#39; reports BPI/BFI</span></div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;  <span class="comment">// as preserved.</span></div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;  PA.preserve&lt;<a class="code" href="classllvm_1_1BranchProbabilityAnalysis.html">BranchProbabilityAnalysis</a>&gt;();</div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;  PA.preserve&lt;<a class="code" href="classllvm_1_1BlockFrequencyAnalysis.html">BlockFrequencyAnalysis</a>&gt;();</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;  <span class="comment">// Report everything except explicitly preserved as invalid.</span></div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;  <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>-&gt;<a class="code" href="classllvm_1_1AnalysisManager.html#a64b2a209a16bcd41375b5cae12690eaa">invalidate</a>(*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, PA);</div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;  <span class="comment">// Update DT/PDT.</span></div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;  DTU-&gt;flush();</div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;  <span class="comment">// Make sure DT/PDT are valid before running &quot;external&quot; analysis.</span></div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DTU-&gt;getDomTree().verify(<a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309ea258d0fc76498bc434cf57e73ea5adbfc">DominatorTree::VerificationLevel::Fast</a>));</div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!DTU-&gt;hasPostDomTree() ||</div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;          DTU-&gt;getPostDomTree().verify(</div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;              <a class="code" href="classllvm_1_1DominatorTreeBase.html#aad6e57a3b7c184bded15b616e790781fae16b5b7f26f54214445cbe38d72c2828">PostDominatorTree::VerificationLevel::Fast</a>)));</div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;  <span class="comment">// Run the &quot;external&quot; analysis.</span></div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;  <span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> = &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>-&gt;<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;AnalysisT&gt;(*F);</div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;  <span class="comment">// Update analysis JumpThreading depends on and not explicitly preserved.</span></div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;  <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a> = &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>-&gt;<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1TargetIRAnalysis.html">TargetIRAnalysis</a>&gt;(*F);</div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;  TLI = &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>-&gt;<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1TargetLibraryAnalysis.html">TargetLibraryAnalysis</a>&gt;(*F);</div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;  AA = &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>-&gt;<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1AAManager.html">AAManager</a>&gt;(*F);</div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160; </div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>;</div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;}</div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160; </div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;<a class="code" href="classllvm_1_1BranchProbabilityInfo.html">BranchProbabilityInfo</a> *JumpThreadingPass::getBPI() {</div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;  <span class="keywordflow">if</span> (!BPI) {</div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a> &amp;&amp; <span class="stringliteral">&quot;Can&#39;t create BPI without FunctionAnalysisManager&quot;</span>);</div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;    BPI = <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>-&gt;<a class="code" href="classllvm_1_1AnalysisManager.html#a90a202de107720c5c6af3a5bc275d8f5">getCachedResult</a>&lt;<a class="code" href="classllvm_1_1BranchProbabilityAnalysis.html">BranchProbabilityAnalysis</a>&gt;(*F);</div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;  }</div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;  <span class="keywordflow">return</span> *BPI;</div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;}</div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160; </div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;<a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a> *JumpThreadingPass::getBFI() {</div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>) {</div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a> &amp;&amp; <span class="stringliteral">&quot;Can&#39;t create BFI without FunctionAnalysisManager&quot;</span>);</div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;    <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a> = <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>-&gt;<a class="code" href="classllvm_1_1AnalysisManager.html#a90a202de107720c5c6af3a5bc275d8f5">getCachedResult</a>&lt;<a class="code" href="classllvm_1_1BlockFrequencyAnalysis.html">BlockFrequencyAnalysis</a>&gt;(*F);</div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;  }</div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;  <span class="keywordflow">return</span> *<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>;</div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;}</div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160; </div>
<div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;<span class="comment">// Important note on validity of BPI/BFI. JumpThreading tries to preserve</span></div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;<span class="comment">// BPI/BFI as it goes. Thus if cached instance exists it will be updated.</span></div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;<span class="comment">// Otherwise, new instance of BPI/BFI is created (up to date by definition).</span></div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;<a class="code" href="classllvm_1_1BranchProbabilityInfo.html">BranchProbabilityInfo</a> *JumpThreadingPass::getOrCreateBPI(<span class="keywordtype">bool</span> Force) {</div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;  <span class="keyword">auto</span> *Res = getBPI();</div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;  <span class="keywordflow">if</span> (Res)</div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;    <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160; </div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;  <span class="keywordflow">if</span> (Force)</div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;    BPI = runExternalAnalysis&lt;BranchProbabilityAnalysis&gt;();</div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160; </div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;  <span class="keywordflow">return</span> *BPI;</div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;}</div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160; </div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;<a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a> *JumpThreadingPass::getOrCreateBFI(<span class="keywordtype">bool</span> Force) {</div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;  <span class="keyword">auto</span> *Res = getBFI();</div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;  <span class="keywordflow">if</span> (Res)</div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;    <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160; </div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;  <span class="keywordflow">if</span> (Force)</div>
<div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;    <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a> = runExternalAnalysis&lt;BlockFrequencyAnalysis&gt;();</div>
<div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160; </div>
<div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;  <span class="keywordflow">return</span> *<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>;</div>
<div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="alib_2Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00029">README.txt:29</a></div></div>
<div class="ttc" id="aclassllvm_1_1SSAUpdater_html_a4fe3279aae4f726813a672d4a9b26cb1"><div class="ttname"><a href="classllvm_1_1SSAUpdater.html#a4fe3279aae4f726813a672d4a9b26cb1">llvm::SSAUpdater::Initialize</a></div><div class="ttdeci">void Initialize(Type *Ty, StringRef Name)</div><div class="ttdoc">Reset this object to get ready for a new set of SSA updates with type 'Ty'.</div><div class="ttdef"><b>Definition:</b> <a href="SSAUpdater_8cpp_source.html#l00053">SSAUpdater.cpp:53</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html">llvm::PreservedAnalyses</a></div><div class="ttdoc">A set of analyses that are preserved following a run of a transformation pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00152">PassManager.h:152</a></div></div>
<div class="ttc" id="anamespacellvm_html_add1eb5637dd671428b6f138ed3db6428"><div class="ttname"><a href="namespacellvm.html#add1eb5637dd671428b6f138ed3db6428">llvm::array_pod_sort</a></div><div class="ttdeci">void array_pod_sort(IteratorTy Start, IteratorTy End)</div><div class="ttdoc">array_pod_sort - This sorts an array with the specified start and end extent.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01643">STLExtras.h:1643</a></div></div>
<div class="ttc" id="aclassllvm_1_1AAManager_html"><div class="ttname"><a href="classllvm_1_1AAManager.html">llvm::AAManager</a></div><div class="ttdoc">A manager for alias analyses.</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00885">AliasAnalysis.h:885</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a0b4e7bee9b8575cc7db73329f1a561bd"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">llvm::BasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00316">BasicBlock.h:316</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetIRAnalysis_html"><div class="ttname"><a href="classllvm_1_1TargetIRAnalysis.html">llvm::TargetIRAnalysis</a></div><div class="ttdoc">Analysis pass providing the TargetTransformInfo.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l02626">TargetTransformInfo.h:2626</a></div></div>
<div class="ttc" id="astructllvm_1_1less__second_html"><div class="ttname"><a href="structllvm_1_1less__second.html">llvm::less_second</a></div><div class="ttdoc">Function object to check whether the second component of a std::pair compares less than the second co...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01485">STLExtras.h:1485</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a3287172f2d13af086e6d66364e8c6de3"><div class="ttname"><a href="classllvm_1_1Instruction.html#a3287172f2d13af086e6d66364e8c6de3">llvm::Instruction::getNumSuccessors</a></div><div class="ttdeci">unsigned getNumSuccessors() const LLVM_READONLY</div><div class="ttdoc">Return the number of successors that this instruction has.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00823">Instruction.cpp:823</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a563ffc2ff61c499b3be2e00100cb72fa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a563ffc2ff61c499b3be2e00100cb72fa">llvm::SmallVectorImpl::erase</a></div><div class="ttdeci">iterator erase(const_iterator CI)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00741">SmallVector.h:741</a></div></div>
<div class="ttc" id="aJumpThreading_8cpp_html_a089d9b5caf2479e6b87f94c73e5b1f70"><div class="ttname"><a href="JumpThreading_8cpp.html#a089d9b5caf2479e6b87f94c73e5b1f70">getBestDestForJumpOnUndef</a></div><div class="ttdeci">static unsigned getBestDestForJumpOnUndef(BasicBlock *BB)</div><div class="ttdoc">GetBestDestForBranchOnUndef - If we determine that the specified block ends in an undefined jump,...</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l01024">JumpThreading.cpp:1024</a></div></div>
<div class="ttc" id="anamespacellvm_html_a375802f177d48987adb168b79c140022"><div class="ttname"><a href="namespacellvm.html#a375802f177d48987adb168b79c140022">llvm::SplitLandingPadPredecessors</a></div><div class="ttdeci">void SplitLandingPadPredecessors(BasicBlock *OrigBB, ArrayRef&lt; BasicBlock * &gt; Preds, const char *Suffix, const char *Suffix2, SmallVectorImpl&lt; BasicBlock * &gt; &amp;NewBBs, DominatorTree *DT, LoopInfo *LI=nullptr, MemorySSAUpdater *MSSAU=nullptr, bool PreserveLCSSA=false)</div><div class="ttdoc">This method transforms the landing pad, OrigBB, by introducing two new basic blocks into the function...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l01392">BasicBlockUtils.cpp:1392</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_aa75984a442f2379de0c66018201fa628"><div class="ttname"><a href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">llvm::Type::getInt1Ty</a></div><div class="ttdeci">static IntegerType * getInt1Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00238">Type.cpp:238</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_ac77dbedcfd916a5c9b58e753b2678a98"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#ac77dbedcfd916a5c9b58e753b2678a98">llvm::TargetTransformInfo::getInstructionCost</a></div><div class="ttdeci">InstructionCost getInstructionCost(const User *U, ArrayRef&lt; const Value * &gt; Operands, TargetCostKind CostKind) const</div><div class="ttdoc">Estimate the cost of a given IR user when lowered.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00230">TargetTransformInfo.cpp:230</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a4ba3a5be6c0e9b9e8a525de055836733"><div class="ttname"><a href="classllvm_1_1Instruction.html#a4ba3a5be6c0e9b9e8a525de055836733">llvm::Instruction::getModule</a></div><div class="ttdeci">const Module * getModule() const</div><div class="ttdoc">Return the module owning the function this instruction belongs to or nullptr it the function does not...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00070">Instruction.cpp:70</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a5b43a866f0fca605556f0f69f70c522a"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a5b43a866f0fca605556f0f69f70c522a">llvm::ConstantExpr::getNot</a></div><div class="ttdeci">static Constant * getNot(Constant *C)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02651">Constants.cpp:2651</a></div></div>
<div class="ttc" id="aValueMapper_8h_html"><div class="ttname"><a href="ValueMapper_8h.html">ValueMapper.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DataLayout_html"><div class="ttname"><a href="classllvm_1_1DataLayout.html">llvm::DataLayout</a></div><div class="ttdoc">A parsed version of the target data layout string in and methods for querying it.</div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00110">DataLayout.h:110</a></div></div>
<div class="ttc" id="aclassintptr__t_html"><div class="ttname"><a href="classintptr__t.html">intptr_t</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64PACKey_html_abf4394f452bde3f544999858d71e4b46"><div class="ttname"><a href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46">llvm::AArch64PACKey::ID</a></div><div class="ttdeci">ID</div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00790">AArch64BaseInfo.h:790</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a3a402430a1bbe70a9282dcb0e0b6a2cd"><div class="ttname"><a href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">llvm::Value::hasOneUse</a></div><div class="ttdeci">bool hasOneUse() const</div><div class="ttdoc">Return true if there is exactly one use of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00434">Value.h:434</a></div></div>
<div class="ttc" id="aMetadata_8h_html"><div class="ttname"><a href="Metadata_8h.html">Metadata.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78b"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">llvm::CmpInst::Predicate</a></div><div class="ttdeci">Predicate</div><div class="ttdoc">This enumeration lists the possible predicates for CmpInst subclasses.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00718">InstrTypes.h:718</a></div></div>
<div class="ttc" id="aclassllvm_1_1JumpThreadingPass_html_a7f1482a3531f0a99f5481d84bae6127e"><div class="ttname"><a href="classllvm_1_1JumpThreadingPass.html#a7f1482a3531f0a99f5481d84bae6127e">llvm::JumpThreadingPass::unfoldSelectInstr</a></div><div class="ttdeci">void unfoldSelectInstr(BasicBlock *Pred, BasicBlock *BB, SelectInst *SI, PHINode *SIUse, unsigned Idx)</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l02802">JumpThreading.cpp:2802</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a98c0a84a5dfa8bce341c829709f171e5"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">llvm::BasicBlock::iterator</a></div><div class="ttdeci">InstListType::iterator iterator</div><div class="ttdoc">Instruction iterators...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00087">BasicBlock.h:87</a></div></div>
<div class="ttc" id="anamespacellvm_html_aec1d6e397956b9f5fa62416d0beba785"><div class="ttname"><a href="namespacellvm.html#aec1d6e397956b9f5fa62416d0beba785">llvm::FindFunctionBackedges</a></div><div class="ttdeci">void FindFunctionBackedges(const Function &amp;F, SmallVectorImpl&lt; std::pair&lt; const BasicBlock *, const BasicBlock * &gt; &gt; &amp;Result)</div><div class="ttdoc">Analyze the specified function to find all of the loop backedges in the function and return them.</div><div class="ttdef"><b>Definition:</b> <a href="CFG_8cpp_source.html#l00034">CFG.cpp:34</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_afe3ce7fc89f36474eb0369cbb792c05a"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#afe3ce7fc89f36474eb0369cbb792c05a">llvm::ConstantInt::getType</a></div><div class="ttdeci">IntegerType * getType() const</div><div class="ttdoc">getType - Specialize the getType() method to always return an IntegerType, which reduces the amount o...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00172">Constants.h:172</a></div></div>
<div class="ttc" id="aAMDGPURewriteUndefForPHI_8cpp_html_a2e83cb1bc3f5e8986cbd14575755a134"><div class="ttname"><a href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a></div><div class="ttdeci">Rewrite undef for PHI</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPURewriteUndefForPHI_8cpp_source.html#l00101">AMDGPURewriteUndefForPHI.cpp:101</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a38bee869ad41aebfef3de2641b12004c"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">llvm::BasicBlock::getParent</a></div><div class="ttdeci">const Function * getParent() const</div><div class="ttdoc">Return the enclosing method, or null if none.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00112">BasicBlock.h:112</a></div></div>
<div class="ttc" id="aIntrinsicInst_8h_html"><div class="ttname"><a href="IntrinsicInst_8h.html">IntrinsicInst.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1JumpThreadingPass_html_a5b6fe6d57aa5475337994b0daec8cc54"><div class="ttname"><a href="classllvm_1_1JumpThreadingPass.html#a5b6fe6d57aa5475337994b0daec8cc54">llvm::JumpThreadingPass::runImpl</a></div><div class="ttdeci">bool runImpl(Function &amp;F, FunctionAnalysisManager *FAM, TargetLibraryInfo *TLI, TargetTransformInfo *TTI, LazyValueInfo *LVI, AAResults *AA, std::unique_ptr&lt; DomTreeUpdater &gt; DTU, std::optional&lt; BlockFrequencyInfo * &gt; BFI, std::optional&lt; BranchProbabilityInfo * &gt; BPI)</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l00387">JumpThreading.cpp:387</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html_ab9d3d5412c20747fd0110a046604f09a"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">llvm::AnalysisManager::getResult</a></div><div class="ttdeci">PassT::Result &amp; getResult(IRUnitT &amp;IR, ExtraArgTs... ExtraArgs)</div><div class="ttdoc">Get the result of an analysis pass for a given IR unit.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00774">PassManager.h:774</a></div></div>
<div class="ttc" id="aclassllvm_1_1ValueMap_html_ab871e2d0ebded563edfebd6766fc1a04"><div class="ttname"><a href="classllvm_1_1ValueMap.html#ab871e2d0ebded563edfebd6766fc1a04">llvm::ValueMap::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="ValueMap_8h_source.html#l00135">ValueMap.h:135</a></div></div>
<div class="ttc" id="aTransforms_2Scalar_8h_html"><div class="ttname"><a href="Transforms_2Scalar_8h.html">Scalar.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1JumpThreadingPass_html_a29e73c6c256c3fbdd7dacf8095210d5b"><div class="ttname"><a href="classllvm_1_1JumpThreadingPass.html#a29e73c6c256c3fbdd7dacf8095210d5b">llvm::JumpThreadingPass::findLoopHeaders</a></div><div class="ttdeci">void findLoopHeaders(Function &amp;F)</div><div class="ttdoc">findLoopHeaders - We do not want jump threading to turn proper loop structures into irreducible loops...</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l00627">JumpThreading.cpp:627</a></div></div>
<div class="ttc" id="aJumpThreading_8cpp_html_a0e7841803a620fb47c7cd3086debaf54"><div class="ttname"><a href="JumpThreading_8cpp.html#a0e7841803a620fb47c7cd3086debaf54">replaceFoldableUses</a></div><div class="ttdeci">static bool replaceFoldableUses(Instruction *Cond, Value *ToVal, BasicBlock *KnownAtEndOfBB)</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l00498">JumpThreading.cpp:498</a></div></div>
<div class="ttc" id="aLoads_8h_html"><div class="ttname"><a href="Loads_8h.html">Loads.h</a></div></div>
<div class="ttc" id="aclassT_html"><div class="ttname"><a href="classT.html">T</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00059">Function.h:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a0b2ca98dc28c61793ff5c90d23e5f14e"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a0b2ca98dc28c61793ff5c90d23e5f14e">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::lookup</a></div><div class="ttdeci">ValueT lookup(const_arg_type_t&lt; KeyT &gt; Val) const</div><div class="ttdoc">lookup - Return the entry for the specified key, or a default constructed value if no such entry exis...</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00197">DenseMap.h:197</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html_a64b2a209a16bcd41375b5cae12690eaa"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html#a64b2a209a16bcd41375b5cae12690eaa">llvm::AnalysisManager::invalidate</a></div><div class="ttdeci">void invalidate(IRUnitT &amp;IR, const PreservedAnalyses &amp;PA)</div><div class="ttdoc">Invalidate cached analyses for an IR unit.</div><div class="ttdef"><b>Definition:</b> <a href="PassManagerImpl_8h_source.html#l00089">PassManagerImpl.h:89</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa81eb67f09ee4944eaeeddbc54c0c0de"><div class="ttname"><a href="namespacellvm.html#aa81eb67f09ee4944eaeeddbc54c0c0de">llvm::lower_bound</a></div><div class="ttdeci">auto lower_bound(R &amp;&amp;Range, T &amp;&amp;Value)</div><div class="ttdoc">Provide wrappers to std::lower_bound which take ranges instead of having to pass begin/end explicitly...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01923">STLExtras.h:1923</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbability_html_a7be5759bf75c903d1695fa97eca6f139"><div class="ttname"><a href="classllvm_1_1BranchProbability.html#a7be5759bf75c903d1695fa97eca6f139">llvm::BranchProbability::getNumerator</a></div><div class="ttdeci">uint32_t getNumerator() const</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbability_8h_source.html#l00065">BranchProbability.h:65</a></div></div>
<div class="ttc" id="aREADME-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00411">README-SSE.txt:411</a></div></div>
<div class="ttc" id="aPass_8h_html"><div class="ttname"><a href="Pass_8h.html">Pass.h</a></div></div>
<div class="ttc" id="aJumpThreading_8cpp_html_ad3a862acec849d6dbe540f3922773ca6"><div class="ttname"><a href="JumpThreading_8cpp.html#ad3a862acec849d6dbe540f3922773ca6">PhiDuplicateThreshold</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; PhiDuplicateThreshold(&quot;jump-threading-phi-threshold&quot;, cl::desc(&quot;Max PHIs in BB to duplicate for jump threading&quot;), cl::init(76), cl::Hidden)</div></div>
<div class="ttc" id="aclassllvm_1_1JumpThreadingPass_html_a071cd98d76a1c63f215ad16388bfdfe2"><div class="ttname"><a href="classllvm_1_1JumpThreadingPass.html#a071cd98d76a1c63f215ad16388bfdfe2">llvm::JumpThreadingPass::processBranchOnXOR</a></div><div class="ttdeci">bool processBranchOnXOR(BinaryOperator *BO)</div><div class="ttdoc">processBranchOnXOR - We have an otherwise unthreadable conditional branch on a xor instruction in the...</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l01854">JumpThreading.cpp:1854</a></div></div>
<div class="ttc" id="aJumpThreading_8cpp_html_ae6fa18c5b7272e2bdd00c26da8041358"><div class="ttname"><a href="JumpThreading_8cpp.html#ae6fa18c5b7272e2bdd00c26da8041358">hasAddressTakenAndUsed</a></div><div class="ttdeci">static bool hasAddressTakenAndUsed(BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l01042">JumpThreading.cpp:1042</a></div></div>
<div class="ttc" id="aJumpThreading_8cpp_html_aad39260b2dc9bc1859acbb7502a8e75a"><div class="ttname"><a href="JumpThreading_8cpp.html#aad39260b2dc9bc1859acbb7502a8e75a">ImplicationSearchThreshold</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; ImplicationSearchThreshold(&quot;jump-threading-implication-search-threshold&quot;, cl::desc(&quot;The number of predecessors to search for a stronger &quot; &quot;condition to use to thread over a weaker condition&quot;), cl::init(3), cl::Hidden)</div></div>
<div class="ttc" id="anamespacellvm_html_ab8a7ef433279aabf7f30fa5504a4d4ef"><div class="ttname"><a href="namespacellvm.html#ab8a7ef433279aabf7f30fa5504a4d4ef">llvm::isGuaranteedNotToBeUndefOrPoison</a></div><div class="ttdeci">bool isGuaranteedNotToBeUndefOrPoison(const Value *V, AssumptionCache *AC=nullptr, const Instruction *CtxI=nullptr, const DominatorTree *DT=nullptr, unsigned Depth=0)</div><div class="ttdoc">Return true if this function can prove that V does not have undef bits and is never poison.</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l05581">ValueTracking.cpp:5581</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a4b001d9b458035fbbfc154d52d354ee9"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a4b001d9b458035fbbfc154d52d354ee9">llvm::ConstantInt::getValue</a></div><div class="ttdeci">const APInt &amp; getValue() const</div><div class="ttdoc">Return the constant as an APInt value reference.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00132">Constants.h:132</a></div></div>
<div class="ttc" id="anamespacellvm_html_a26e2a938b431eaa6eca2beaa96410c9d"><div class="ttname"><a href="namespacellvm.html#a26e2a938b431eaa6eca2beaa96410c9d">llvm::successors</a></div><div class="ttdeci">auto successors(const MachineBasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l01265">MachineBasicBlock.h:1265</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyValueAnalysis_html"><div class="ttname"><a href="classllvm_1_1LazyValueAnalysis.html">llvm::LazyValueAnalysis</a></div><div class="ttdoc">Analysis to compute lazy value information.</div><div class="ttdef"><b>Definition:</b> <a href="LazyValueInfo_8h_source.html#l00138">LazyValueInfo.h:138</a></div></div>
<div class="ttc" id="aclassllvm_1_1ilist__node__with__parent_html_a26708685cc8b94fe3d7092ee080dbb34"><div class="ttname"><a href="classllvm_1_1ilist__node__with__parent.html#a26708685cc8b94fe3d7092ee080dbb34">llvm::ilist_node_with_parent::getNextNode</a></div><div class="ttdeci">NodeTy * getNextNode()</div><div class="ttdoc">Get the next node, or nullptr for the list tail.</div><div class="ttdef"><b>Definition:</b> <a href="ilist__node_8h_source.html#l00289">ilist_node.h:289</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01199">SmallVector.h:1199</a></div></div>
<div class="ttc" id="aStatistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1jumpthreading_html_a7bd584a1977827b11c76096bebbb38a0a14d7faebe69e48290ea9c8aa9a0b40fc"><div class="ttname"><a href="namespacellvm_1_1jumpthreading.html#a7bd584a1977827b11c76096bebbb38a0a14d7faebe69e48290ea9c8aa9a0b40fc">llvm::jumpthreading::WantBlockAddress</a></div><div class="ttdeci">@ WantBlockAddress</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8h_source.html#l00059">JumpThreading.h:59</a></div></div>
<div class="ttc" id="anamespacellvm_html_a22deed11f251c5761b2b4bf021eff4ac"><div class="ttname"><a href="namespacellvm.html#a22deed11f251c5761b2b4bf021eff4ac">llvm::replaceNonLocalUsesWith</a></div><div class="ttdeci">unsigned replaceNonLocalUsesWith(Instruction *From, Value *To)</div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Utils_2Local_8cpp_source.html#l02856">Local.cpp:2856</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a944c25ac9b73b02a17a20a08a25b9b21"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">llvm::PatternMatch::m_Add</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Add &gt; m_Add(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00979">PatternMatch.h:979</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ad8c5093a18a40f863d4fc5fa6eefefa8"><div class="ttname"><a href="classllvm_1_1Instruction.html#ad8c5093a18a40f863d4fc5fa6eefefa8">llvm::Instruction::insertInto</a></div><div class="ttdeci">SymbolTableList&lt; Instruction &gt;::iterator insertInto(BasicBlock *ParentBB, SymbolTableList&lt; Instruction &gt;::iterator It)</div><div class="ttdoc">Inserts an unlinked instruction into ParentBB at position It and returns the iterator of the inserted...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00098">Instruction.cpp:98</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_af4feec45578e32fe65d8efc59112bc8e"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#af4feec45578e32fe65d8efc59112bc8e">llvm::PatternMatch::m_CombineOr</a></div><div class="ttdeci">match_combine_or&lt; LTy, RTy &gt; m_CombineOr(const LTy &amp;L, const RTy &amp;R)</div><div class="ttdoc">Combine two pattern matchers matching L || R.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00218">PatternMatch.h:218</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html">llvm::TargetTransformInfo</a></div><div class="ttdoc">This pass provides access to the codegen interfaces that are needed for IR-level transformations.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00196">TargetTransformInfo.h:196</a></div></div>
<div class="ttc" id="aARMLowOverheadLoops_8cpp_html_a3bf42baf773b375802538951c88d8e12"><div class="ttname"><a href="ARMLowOverheadLoops_8cpp.html#a3bf42baf773b375802538951c88d8e12">ToRemove</a></div><div class="ttdeci">ReachingDefAnalysis InstSet &amp; ToRemove</div><div class="ttdef"><b>Definition:</b> <a href="ARMLowOverheadLoops_8cpp_source.html#l00547">ARMLowOverheadLoops.cpp:547</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Intrinsic_html_a7157f9fa9dd11f234ec3c58517cb6d96"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a7157f9fa9dd11f234ec3c58517cb6d96">llvm::Intrinsic::getName</a></div><div class="ttdeci">StringRef getName(ID id)</div><div class="ttdoc">Return the LLVM name for an intrinsic, such as &quot;llvm.ppc.altivec.lvx&quot;.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00975">Function.cpp:975</a></div></div>
<div class="ttc" id="aMapVector_8h_html"><div class="ttname"><a href="MapVector_8h.html">MapVector.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac9a7de5a04920954ac964059cfc428ad"><div class="ttname"><a href="namespacellvm.html#ac9a7de5a04920954ac964059cfc428ad">llvm::erase_if</a></div><div class="ttdeci">void erase_if(Container &amp;C, UnaryPredicate P)</div><div class="ttdoc">Provide a container algorithm similar to C++ Library Fundamentals v2's erase_if which is equivalent t...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01998">STLExtras.h:1998</a></div></div>
<div class="ttc" id="aValueTracking_8h_html"><div class="ttname"><a href="ValueTracking_8h.html">ValueTracking.h</a></div></div>
<div class="ttc" id="aTransforms_2Utils_2Local_8h_html"><div class="ttname"><a href="Transforms_2Utils_2Local_8h.html">Local.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a482498a1c760122fd33c7fc8190dd277"><div class="ttname"><a href="classllvm_1_1Instruction.html#a482498a1c760122fd33c7fc8190dd277">llvm::Instruction::insertBefore</a></div><div class="ttdeci">void insertBefore(Instruction *InsertPos)</div><div class="ttdoc">Insert an unlinked instruction into a basic block immediately before the specified instruction.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00088">Instruction.cpp:88</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTree_html"><div class="ttname"><a href="classllvm_1_1DominatorTree.html">llvm::DominatorTree</a></div><div class="ttdoc">Concrete subclass of DominatorTreeBase that is used to compute a normal dominator tree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00166">Dominators.h:166</a></div></div>
<div class="ttc" id="aPassBuilderBindings_8cpp_html_a83c7e5ca51099e4efa895791a02fb0ed"><div class="ttname"><a href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a></div><div class="ttdeci">FunctionAnalysisManager FAM</div><div class="ttdef"><b>Definition:</b> <a href="PassBuilderBindings_8cpp_source.html#l00059">PassBuilderBindings.cpp:59</a></div></div>
<div class="ttc" id="aGlobalsModRef_8h_html"><div class="ttname"><a href="GlobalsModRef_8h.html">GlobalsModRef.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeBase_html_aad6e57a3b7c184bded15b616e790781fae16b5b7f26f54214445cbe38d72c2828"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#aad6e57a3b7c184bded15b616e790781fae16b5b7f26f54214445cbe38d72c2828">llvm::DominatorTreeBase::VerificationLevel::Fast</a></div><div class="ttdeci">@ Fast</div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdeci">@ Hidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00138">CommandLine.h:138</a></div></div>
<div class="ttc" id="aJumpThreading_8cpp_html_a65facbdd55e486cbcef04a12de132c9c"><div class="ttname"><a href="JumpThreading_8cpp.html#a65facbdd55e486cbcef04a12de132c9c">getJumpThreadDuplicationCost</a></div><div class="ttdeci">static unsigned getJumpThreadDuplicationCost(const TargetTransformInfo *TTI, BasicBlock *BB, Instruction *StopAt, unsigned Threshold)</div><div class="ttdoc">Return the cost of duplicating a piece of this block from first non-phi and before StopAt instruction...</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l00528">JumpThreading.cpp:528</a></div></div>
<div class="ttc" id="aJumpThreading_8cpp_html_ad67c03658611a6ae7dc39f84346f18bd"><div class="ttname"><a href="JumpThreading_8cpp.html#ad67c03658611a6ae7dc39f84346f18bd">isOpDefinedInBlock</a></div><div class="ttdeci">static bool isOpDefinedInBlock(Value *Op, BasicBlock *BB)</div><div class="ttdoc">Return true if Op is an instruction defined in the given block.</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l01319">JumpThreading.cpp:1319</a></div></div>
<div class="ttc" id="anamespacellvm_1_1jumpthreading_html_a7bd584a1977827b11c76096bebbb38a0"><div class="ttname"><a href="namespacellvm_1_1jumpthreading.html#a7bd584a1977827b11c76096bebbb38a0">llvm::jumpthreading::ConstantPreference</a></div><div class="ttdeci">ConstantPreference</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8h_source.html#l00059">JumpThreading.h:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1JumpThreadingPass_html_a710878a88d68a9169313249bfd52862a"><div class="ttname"><a href="classllvm_1_1JumpThreadingPass.html#a710878a88d68a9169313249bfd52862a">llvm::JumpThreadingPass::maybethreadThroughTwoBasicBlocks</a></div><div class="ttdeci">bool maybethreadThroughTwoBasicBlocks(BasicBlock *BB, Value *Cond)</div><div class="ttdoc">Attempt to thread through two successive basic blocks.</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l02176">JumpThreading.cpp:2176</a></div></div>
<div class="ttc" id="astructllvm_1_1AAMDNodes_html"><div class="ttname"><a href="structllvm_1_1AAMDNodes.html">llvm::AAMDNodes</a></div><div class="ttdoc">A collection of metadata nodes that might be associated with a memory access used by the alias-analys...</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00651">Metadata.h:651</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapIterator_html"><div class="ttname"><a href="classllvm_1_1DenseMapIterator.html">llvm::DenseMapIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00057">DenseMap.h:57</a></div></div>
<div class="ttc" id="aBlockFrequency_8h_html"><div class="ttname"><a href="BlockFrequency_8h.html">BlockFrequency.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdoc">The instances of the Type class are immutable: once they are created, they are never changed.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="aDenseMap_8h_html"><div class="ttname"><a href="DenseMap_8h.html">DenseMap.h</a></div></div>
<div class="ttc" id="aModule_8h_html"><div class="ttname"><a href="Module_8h.html">Module.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeBase_html_a9aeeca2833810f01b20545a46fe22503"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#a9aeeca2833810f01b20545a46fe22503">llvm::DominatorTreeBase&lt; BasicBlock, false &gt;::Insert</a></div><div class="ttdeci">static constexpr UpdateKind Insert</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00258">GenericDomTree.h:258</a></div></div>
<div class="ttc" id="aclassllvm_1_1JumpThreadingPass_html_a899601de8466074dfecf4db437211575"><div class="ttname"><a href="classllvm_1_1JumpThreadingPass.html#a899601de8466074dfecf4db437211575">llvm::JumpThreadingPass::evaluateOnPredecessorEdge</a></div><div class="ttdeci">Constant * evaluateOnPredecessorEdge(BasicBlock *BB, BasicBlock *PredPredBB, Value *cond)</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l01602">JumpThreading.cpp:1602</a></div></div>
<div class="ttc" id="aJumpThreading_8h_html"><div class="ttname"><a href="JumpThreading_8h.html">JumpThreading.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallSet_html"><div class="ttname"><a href="classllvm_1_1SmallSet.html">llvm::SmallSet</a></div><div class="ttdoc">SmallSet - This maintains a set of unique values, optimizing for the case when the set is small (less...</div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00135">SmallSet.h:135</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbability_html_a0333345669e75a54c7de3d5fe0f6e746"><div class="ttname"><a href="classllvm_1_1BranchProbability.html#a0333345669e75a54c7de3d5fe0f6e746">llvm::BranchProbability::getBranchProbability</a></div><div class="ttdeci">static BranchProbability getBranchProbability(uint64_t Numerator, uint64_t Denominator)</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbability_8cpp_source.html#l00053">BranchProbability.cpp:53</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_a96b8f11f6f21ca0321294669dab83b35"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a96b8f11f6f21ca0321294669dab83b35">llvm::BranchInst::getNumSuccessors</a></div><div class="ttdeci">unsigned getNumSuccessors() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03230">Instructions.h:3230</a></div></div>
<div class="ttc" id="aclassllvm_1_1MapVector_html"><div class="ttname"><a href="classllvm_1_1MapVector.html">llvm::MapVector</a></div><div class="ttdoc">This class implements a map that also provides access to all stored values in a deterministic order.</div><div class="ttdef"><b>Definition:</b> <a href="MapVector_8h_source.html#l00037">MapVector.h:37</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdoc">SmallPtrSet - This class implements a set which is optimized for holding SmallSize or less elements.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00450">SmallPtrSet.h:450</a></div></div>
<div class="ttc" id="anamespacellvm_1_1tgtok_html_abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4"><div class="ttname"><a href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">llvm::tgtok::FalseVal</a></div><div class="ttdeci">@ FalseVal</div><div class="ttdef"><b>Definition:</b> <a href="TGLexer_8h_source.html#l00062">TGLexer.h:62</a></div></div>
<div class="ttc" id="aclassllvm_1_1JumpThreadingPass_html_ac06e19670a4cb86b0c885cf67bdb1bc4"><div class="ttname"><a href="classllvm_1_1JumpThreadingPass.html#ac06e19670a4cb86b0c885cf67bdb1bc4">llvm::JumpThreadingPass::processImpliedCondition</a></div><div class="ttdeci">bool processImpliedCondition(BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l01253">JumpThreading.cpp:1253</a></div></div>
<div class="ttc" id="aLazyValueInfo_8h_html"><div class="ttname"><a href="LazyValueInfo_8h.html">LazyValueInfo.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MipsISD_html_a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8"><div class="ttname"><a href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">llvm::MipsISD::Ret</a></div><div class="ttdeci">@ Ret</div><div class="ttdef"><b>Definition:</b> <a href="MipsISelLowering_8h_source.html#l00119">MipsISelLowering.h:119</a></div></div>
<div class="ttc" id="aclassllvm_1_1JumpThreadingPass_html_a5a9e1f7f511296cb22ef6a3e8e5ed91e"><div class="ttname"><a href="classllvm_1_1JumpThreadingPass.html#a5a9e1f7f511296cb22ef6a3e8e5ed91e">llvm::JumpThreadingPass::getDomTreeUpdater</a></div><div class="ttdeci">DomTreeUpdater * getDomTreeUpdater() const</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8h_source.html#l00112">JumpThreading.h:112</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a59fb91d1691350f7d1b8e8a114e3f2a4"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a59fb91d1691350f7d1b8e8a114e3f2a4">llvm::BasicBlock::getSinglePredecessor</a></div><div class="ttdeci">const BasicBlock * getSinglePredecessor() const</div><div class="ttdoc">Return the predecessor of this block if it has a single predecessor block.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00284">BasicBlock.cpp:284</a></div></div>
<div class="ttc" id="aSTLExtras_8h_html"><div class="ttname"><a href="STLExtras_8h.html">STLExtras.h</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a87b8bfbbe9d8f7146d7f20a5fb42efd0"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a></div><div class="ttdeci">Value * RHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00076">X86PartialReduction.cpp:76</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Sched_html_ac1547cccaf660851fcd6863d1e60309ea258d0fc76498bc434cf57e73ea5adbfc"><div class="ttname"><a href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309ea258d0fc76498bc434cf57e73ea5adbfc">llvm::Sched::Fast</a></div><div class="ttdeci">@ Fast</div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l00105">TargetLowering.h:105</a></div></div>
<div class="ttc" id="aclassllvm_1_1detail_1_1DenseSetImpl_html_a79eed48913651aeedda2eed25201ea84"><div class="ttname"><a href="classllvm_1_1detail_1_1DenseSetImpl.html#a79eed48913651aeedda2eed25201ea84">llvm::detail::DenseSetImpl::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const ValueT &amp;V)</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00206">DenseSet.h:206</a></div></div>
<div class="ttc" id="anamespacellvm_1_1JumpTable_html_ae69658c09df17591f8b1c3e95b879b5cae9f3d1d07889f0257137760ec841a5e2"><div class="ttname"><a href="namespacellvm_1_1JumpTable.html#ae69658c09df17591f8b1c3e95b879b5cae9f3d1d07889f0257137760ec841a5e2">llvm::JumpTable::Full</a></div><div class="ttdeci">@ Full</div><div class="ttdef"><b>Definition:</b> <a href="TargetOptions_8h_source.html#l00050">TargetOptions.h:50</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html_af51c113a039c82f6870df5dc9666b5e3"><div class="ttname"><a href="classllvm_1_1LoadInst.html#af51c113a039c82f6870df5dc9666b5e3">llvm::LoadInst::getAlign</a></div><div class="ttdeci">Align getAlign() const</div><div class="ttdoc">Return the alignment of the access that is being performed.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00220">Instructions.h:220</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_a88cdefb709309eddc6e5daca0be6a7b4"><div class="ttname"><a href="classllvm_1_1PHINode.html#a88cdefb709309eddc6e5daca0be6a7b4">llvm::PHINode::setIncomingValue</a></div><div class="ttdeci">void setIncomingValue(unsigned i, Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02797">Instructions.h:2797</a></div></div>
<div class="ttc" id="aConstantFolding_8h_html"><div class="ttname"><a href="ConstantFolding_8h.html">ConstantFolding.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1JumpThreadingPass_html_ad67aa9d5f2effed17239ab3fad098999"><div class="ttname"><a href="classllvm_1_1JumpThreadingPass.html#ad67aa9d5f2effed17239ab3fad098999">llvm::JumpThreadingPass::tryThreadEdge</a></div><div class="ttdeci">bool tryThreadEdge(BasicBlock *BB, const SmallVectorImpl&lt; BasicBlock * &gt; &amp;PredBBs, BasicBlock *SuccBB)</div><div class="ttdoc">tryThreadEdge - Thread an edge if it's safe and profitable to do so.</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l02388">JumpThreading.cpp:2388</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_aad9ab8651c334c1c0ecb7732203fd1fa"><div class="ttname"><a href="classllvm_1_1Instruction.html#aad9ab8651c334c1c0ecb7732203fd1fa">llvm::Instruction::isExceptionalTerminator</a></div><div class="ttdeci">bool isExceptionalTerminator() const</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00178">Instruction.h:178</a></div></div>
<div class="ttc" id="aUse_8h_html"><div class="ttname"><a href="Use_8h.html">Use.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9b43098c569ea8289ed1ab70ee9a00af"><div class="ttname"><a href="namespacellvm.html#a9b43098c569ea8289ed1ab70ee9a00af">llvm::combineMetadataForCSE</a></div><div class="ttdeci">void combineMetadataForCSE(Instruction *K, const Instruction *J, bool DoesKMove)</div><div class="ttdoc">Combine the metadata of two instructions so that K can replace J.</div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Utils_2Local_8cpp_source.html#l02740">Local.cpp:2740</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00101">Debug.h:101</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00055">MD5.cpp:55</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a9247a212ea89acc9573fa7e7f557eaba"><div class="ttname"><a href="classllvm_1_1Instruction.html#a9247a212ea89acc9573fa7e7f557eaba">llvm::Instruction::setMetadata</a></div><div class="ttdeci">void setMetadata(unsigned KindID, MDNode *Node)</div><div class="ttdoc">Set the metadata of the specified kind to the specified node.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l01455">Metadata.cpp:1455</a></div></div>
<div class="ttc" id="aclassllvm_1_1JumpThreadingPass_html_ac14ea98bd0e870e467ae0ddc75a9fa87"><div class="ttname"><a href="classllvm_1_1JumpThreadingPass.html#ac14ea98bd0e870e467ae0ddc75a9fa87">llvm::JumpThreadingPass::duplicateCondBranchOnPHIIntoPred</a></div><div class="ttdeci">bool duplicateCondBranchOnPHIIntoPred(BasicBlock *BB, const SmallVectorImpl&lt; BasicBlock * &gt; &amp;PredBBs)</div><div class="ttdoc">duplicateCondBranchOnPHIIntoPred - PredBB contains an unconditional branch to BB which contains an i1...</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l02674">JumpThreading.cpp:2674</a></div></div>
<div class="ttc" id="aclassllvm_1_1DomTreeUpdater_html_a8bf4c30be33831d7882d6880b8ae433da46a9ebdb80117bfa1f0cdea65438290a"><div class="ttname"><a href="classllvm_1_1DomTreeUpdater.html#a8bf4c30be33831d7882d6880b8ae433da46a9ebdb80117bfa1f0cdea65438290a">llvm::DomTreeUpdater::UpdateStrategy::Lazy</a></div><div class="ttdeci">@ Lazy</div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00055">BasicBlock.h:55</a></div></div>
<div class="ttc" id="aJumpThreading_8cpp_html_aa1ca02e99b272b5fa744ebef102fa0b0"><div class="ttname"><a href="JumpThreading_8cpp.html#aa1ca02e99b272b5fa744ebef102fa0b0">getKnownConstant</a></div><div class="ttdeci">static Constant * getKnownConstant(Value *Val, ConstantPreference Preference)</div><div class="ttdoc">getKnownConstant - Helper method to determine if we can thread over a terminator with the given value...</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l00640">JumpThreading.cpp:640</a></div></div>
<div class="ttc" id="aAliasAnalysis_8h_html"><div class="ttname"><a href="AliasAnalysis_8h.html">AliasAnalysis.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a656efdcee3deb029763304d3e741a2d1"><div class="ttname"><a href="namespacellvm.html#a656efdcee3deb029763304d3e741a2d1">llvm::isGuard</a></div><div class="ttdeci">bool isGuard(const User *U)</div><div class="ttdoc">Returns true iff U has semantics of a guard expressed in a form of call of llvm.experimental....</div><div class="ttdef"><b>Definition:</b> <a href="Analysis_2GuardUtils_8cpp_source.html#l00018">GuardUtils.cpp:18</a></div></div>
<div class="ttc" id="aNVVMIntrRange_8cpp_html_afad351d7bf10ac0446b64e7827634e94"><div class="ttname"><a href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a></div><div class="ttdeci">LLVMContext &amp; Context</div><div class="ttdef"><b>Definition:</b> <a href="NVVMIntrRange_8cpp_source.html#l00066">NVVMIntrRange.cpp:66</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9ec2517b6489e71067be03afebb4d350"><div class="ttname"><a href="namespacellvm.html#a9ec2517b6489e71067be03afebb4d350">llvm::remove_if</a></div><div class="ttdeci">auto remove_if(R &amp;&amp;Range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::remove_if which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01774">STLExtras.h:1774</a></div></div>
<div class="ttc" id="aIR_2Instruction_8h_html"><div class="ttname"><a href="IR_2Instruction_8h.html">Instruction.h</a></div></div>
<div class="ttc" id="aCommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a9e1483f7215664a2315c53c3558d9a8d"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a></div><div class="ttdeci">Value * LHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00075">X86PartialReduction.cpp:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html"><div class="ttname"><a href="classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">This is the shared class of boolean and integer constants.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00078">Constants.h:78</a></div></div>
<div class="ttc" id="aclassllvm_1_1JumpThreadingPass_html_afe4c82c6f42e62e67ce856488751517d"><div class="ttname"><a href="classllvm_1_1JumpThreadingPass.html#afe4c82c6f42e62e67ce856488751517d">llvm::JumpThreadingPass::threadEdge</a></div><div class="ttdeci">void threadEdge(BasicBlock *BB, const SmallVectorImpl&lt; BasicBlock * &gt; &amp;PredBBs, BasicBlock *SuccBB)</div><div class="ttdoc">threadEdge - We have decided that it is safe and profitable to factor the blocks in PredBBs to one pr...</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l02427">JumpThreading.cpp:2427</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityAnalysis_html"><div class="ttname"><a href="classllvm_1_1BranchProbabilityAnalysis.html">llvm::BranchProbabilityAnalysis</a></div><div class="ttdoc">Analysis pass which computes BranchProbabilityInfo.</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8h_source.html#l00413">BranchProbabilityInfo.h:413</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ab4e05d690df389b8b1477c90387b575f"><div class="ttname"><a href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">llvm::Instruction::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const</div><div class="ttdoc">Returns a member of one of the enums like Instruction::Add.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00168">Instruction.h:168</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0d10fe510ced2849a8074fe81e5d04ce"><div class="ttname"><a href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">llvm::all_of</a></div><div class="ttdeci">bool all_of(R &amp;&amp;range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::all_of which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01735">STLExtras.h:1735</a></div></div>
<div class="ttc" id="aclassllvm_1_1BlockFrequencyInfo_html"><div class="ttname"><a href="classllvm_1_1BlockFrequencyInfo.html">llvm::BlockFrequencyInfo</a></div><div class="ttdoc">BlockFrequencyInfo pass uses BlockFrequencyInfoImpl implementation to estimate IR basic block frequen...</div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequencyInfo_8h_source.html#l00037">BlockFrequencyInfo.h:37</a></div></div>
<div class="ttc" id="aclassllvm_1_1MapVector_html_aa610cab7ee61e36a6d1d122fc252c278"><div class="ttname"><a href="classllvm_1_1MapVector.html#aa610cab7ee61e36a6d1d122fc252c278">llvm::MapVector::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="MapVector_8h_source.html#l00070">MapVector.h:70</a></div></div>
<div class="ttc" id="anamespacellvm_html_a42108fe3c2695cb429e6fe312908fa0d"><div class="ttname"><a href="namespacellvm.html#a42108fe3c2695cb429e6fe312908fa0d">llvm::SimplifyInstructionsInBlock</a></div><div class="ttdeci">bool SimplifyInstructionsInBlock(BasicBlock *BB, const TargetLibraryInfo *TLI=nullptr)</div><div class="ttdoc">Scan the specified basic block and try to simplify any instructions in it and recursively delete dead...</div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Utils_2Local_8cpp_source.html#l00725">Local.cpp:725</a></div></div>
<div class="ttc" id="anamespacellvm_html_a763fc760b3f95cdd3389fdb004122381"><div class="ttname"><a href="namespacellvm.html#a763fc760b3f95cdd3389fdb004122381">llvm::hasValidBranchWeightMD</a></div><div class="ttdeci">bool hasValidBranchWeightMD(const Instruction &amp;I)</div><div class="ttdoc">Checks if an instructions has valid Branch Weight Metadata.</div><div class="ttdef"><b>Definition:</b> <a href="ProfDataUtils_8cpp_source.html#l00104">ProfDataUtils.cpp:104</a></div></div>
<div class="ttc" id="aclassllvm_1_1SSAUpdater_html_aa3e6b78bbdd6959f19055f44fa4b7021"><div class="ttname"><a href="classllvm_1_1SSAUpdater.html#aa3e6b78bbdd6959f19055f44fa4b7021">llvm::SSAUpdater::UpdateDebugValues</a></div><div class="ttdeci">void UpdateDebugValues(Instruction *I)</div><div class="ttdoc">Rewrite debug value intrinsics to conform to a new SSA form.</div><div class="ttdef"><b>Definition:</b> <a href="SSAUpdater_8cpp_source.html#l00199">SSAUpdater.cpp:199</a></div></div>
<div class="ttc" id="aJumpThreading_8cpp_html_afa7b07ed202bdb5b1b353121ddfdd4d2"><div class="ttname"><a href="JumpThreading_8cpp.html#afa7b07ed202bdb5b1b353121ddfdd4d2">BBDuplicateThreshold</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; BBDuplicateThreshold(&quot;jump-threading-threshold&quot;, cl::desc(&quot;Max block size to duplicate for jump threading&quot;), cl::init(6), cl::Hidden)</div></div>
<div class="ttc" id="aclassllvm_1_1PassRegistry_html_a05a729900b76c89e808c6c3094921b2f"><div class="ttname"><a href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">llvm::PassRegistry::getPassRegistry</a></div><div class="ttdeci">static PassRegistry * getPassRegistry()</div><div class="ttdoc">getPassRegistry - Access the global registry object, which is automatically initialized at applicatio...</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8cpp_source.html#l00024">PassRegistry.cpp:24</a></div></div>
<div class="ttc" id="aConstants_8h_html"><div class="ttname"><a href="Constants_8h.html">Constants.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a25d956d9e0beadd47ce4bc255dfa811d"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">llvm::PatternMatch::match</a></div><div class="ttdeci">bool match(Val *V, const Pattern &amp;P)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00049">PatternMatch.h:49</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyValueInfo_html_a381305cf61c847551a489431c43cec47aa3c975a91c3fef72486f9935e4099c8c"><div class="ttname"><a href="classllvm_1_1LazyValueInfo.html#a381305cf61c847551a489431c43cec47aa3c975a91c3fef72486f9935e4099c8c">llvm::LazyValueInfo::Unknown</a></div><div class="ttdeci">@ Unknown</div><div class="ttdef"><b>Definition:</b> <a href="LazyValueInfo_8h_source.html#l00061">LazyValueInfo.h:61</a></div></div>
<div class="ttc" id="aLint_8cpp_html_a45005634b54e2126cb3e6ec0dbc9ade4"><div class="ttname"><a href="Lint_8cpp.html#a45005634b54e2126cb3e6ec0dbc9ade4">isZero</a></div><div class="ttdeci">static bool isZero(Value *V, const DataLayout &amp;DL, DominatorTree *DT, AssumptionCache *AC)</div><div class="ttdef"><b>Definition:</b> <a href="Lint_8cpp_source.html#l00524">Lint.cpp:524</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_a16c39eb6e60b42a40c399d8d65347bb6"><div class="ttname"><a href="classllvm_1_1PHINode.html#a16c39eb6e60b42a40c399d8d65347bb6">llvm::PHINode::getIncomingValue</a></div><div class="ttdeci">Value * getIncomingValue(unsigned i) const</div><div class="ttdoc">Return incoming value number x.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02794">Instructions.h:2794</a></div></div>
<div class="ttc" id="aclassllvm_1_1AAResults_html"><div class="ttname"><a href="classllvm_1_1AAResults.html">llvm::AAResults</a></div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00294">AliasAnalysis.h:294</a></div></div>
<div class="ttc" id="aPostDominators_8h_html"><div class="ttname"><a href="PostDominators_8h.html">PostDominators.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DbgValueInst_html"><div class="ttname"><a href="classllvm_1_1DbgValueInst.html">llvm::DbgValueInst</a></div><div class="ttdoc">This represents the llvm.dbg.value instruction.</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00388">IntrinsicInst.h:388</a></div></div>
<div class="ttc" id="aInlineOrder_8cpp_html_a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6"><div class="ttname"><a href="InlineOrder_8cpp.html#a7ee6f0cb51c3b9056199e9a0001fe8c3a20b4f77bd00b4f63a49ec8e08f3bf6a6">InlinePriorityMode::Cost</a></div><div class="ttdeci">@ Cost</div></div>
<div class="ttc" id="anamespacellvm_html_a66ef8932e0b4fc2ac894d66490785c0e"><div class="ttname"><a href="namespacellvm.html#a66ef8932e0b4fc2ac894d66490785c0e">llvm::initializeJumpThreadingPass</a></div><div class="ttdeci">void initializeJumpThreadingPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="anamespacellvm_html_a964455f36837281d37f2a44e2fcb4cca"><div class="ttname"><a href="namespacellvm.html#a964455f36837281d37f2a44e2fcb4cca">llvm::ConstantFoldBinaryOpOperands</a></div><div class="ttdeci">Constant * ConstantFoldBinaryOpOperands(unsigned Opcode, Constant *LHS, Constant *RHS, const DataLayout &amp;DL)</div><div class="ttdoc">Attempt to constant fold a binary operation with the specified operands.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFolding_8cpp_source.html#l01335">ConstantFolding.cpp:1335</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html"><div class="ttname"><a href="classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00044">User.h:44</a></div></div>
<div class="ttc" id="aIntrinsics_8h_html"><div class="ttname"><a href="Intrinsics_8h.html">Intrinsics.h</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A, *B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00086">README_ALTIVEC.txt:86</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a57efb022f2ee2e19e4cdf582f4d27f2d"><div class="ttname"><a href="classllvm_1_1Instruction.html#a57efb022f2ee2e19e4cdf582f4d27f2d">llvm::Instruction::isAtomic</a></div><div class="ttdeci">bool isAtomic() const LLVM_READONLY</div><div class="ttdoc">Return true if this instruction has an AtomicOrdering of unordered or higher.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00666">Instruction.cpp:666</a></div></div>
<div class="ttc" id="aInstrTypes_8h_html"><div class="ttname"><a href="InstrTypes_8h.html">InstrTypes.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdoc">Instruction iterator methods.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00314">BasicBlock.h:314</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a1c0b137bcf194671c30aba4e2fab073d"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a1c0b137bcf194671c30aba4e2fab073d">llvm::TargetTransformInfo::hasBranchDivergence</a></div><div class="ttdeci">bool hasBranchDivergence() const</div><div class="ttdoc">Return true if branch divergence exists.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00245">TargetTransformInfo.cpp:245</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_html"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html">llvm::BranchProbabilityInfo</a></div><div class="ttdoc">Analysis providing branch probability information.</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8h_source.html#l00113">BranchProbabilityInfo.h:113</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDBuilder_html_ad910125a9cfd76aaad7f69469df22f66"><div class="ttname"><a href="classllvm_1_1MDBuilder.html#ad910125a9cfd76aaad7f69469df22f66">llvm::MDBuilder::createBranchWeights</a></div><div class="ttdeci">MDNode * createBranchWeights(uint32_t TrueWeight, uint32_t FalseWeight)</div><div class="ttdoc">Return metadata containing two branch weights.</div><div class="ttdef"><b>Definition:</b> <a href="MDBuilder_8cpp_source.html#l00037">MDBuilder.cpp:37</a></div></div>
<div class="ttc" id="anamespacellvm_1_1jumpthreading_html_a7bd584a1977827b11c76096bebbb38a0ae706b769cc98b156d9e22dfbac8aa62b"><div class="ttname"><a href="namespacellvm_1_1jumpthreading.html#a7bd584a1977827b11c76096bebbb38a0ae706b769cc98b156d9e22dfbac8aa62b">llvm::jumpthreading::WantInteger</a></div><div class="ttdeci">@ WantInteger</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8h_source.html#l00059">JumpThreading.h:59</a></div></div>
<div class="ttc" id="aSIInstrInfo_8cpp_html_a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791"><div class="ttname"><a href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a></div><div class="ttdeci">@ SI</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8cpp_source.html#l07993">SIInstrInfo.cpp:7993</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdoc">Represent the analysis usage information of a pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00047">PassAnalysisSupport.h:47</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ms__demangle_html_afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e"><div class="ttname"><a href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">llvm::ms_demangle::QualifierMangleMode::Result</a></div><div class="ttdeci">@ Result</div></div>
<div class="ttc" id="aTargetLibraryInfo_8h_html"><div class="ttname"><a href="TargetLibraryInfo_8h.html">TargetLibraryInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a1bc022868b23918efa44df511f4d5b61"><div class="ttname"><a href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">llvm::Type::isVectorTy</a></div><div class="ttdeci">bool isVectorTy() const</div><div class="ttdoc">True if this is an instance of VectorType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00258">Type.h:258</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_aecb93439702247fe5353a9966f7cefcd"><div class="ttname"><a href="classllvm_1_1Value.html#aecb93439702247fe5353a9966f7cefcd">llvm::Value::uses</a></div><div class="ttdeci">iterator_range&lt; use_iterator &gt; uses()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00376">Value.h:376</a></div></div>
<div class="ttc" id="aDenseSet_8h_html"><div class="ttname"><a href="DenseSet_8h.html">DenseSet.h</a></div></div>
<div class="ttc" id="anamespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00141">StackSlotColoring.cpp:141</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyValueInfo_html_a381305cf61c847551a489431c43cec47a9af49c30d67dc9c3b6f06e09a849009b"><div class="ttname"><a href="classllvm_1_1LazyValueInfo.html#a381305cf61c847551a489431c43cec47a9af49c30d67dc9c3b6f06e09a849009b">llvm::LazyValueInfo::True</a></div><div class="ttdeci">@ True</div><div class="ttdef"><b>Definition:</b> <a href="LazyValueInfo_8h_source.html#l00061">LazyValueInfo.h:61</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_adfb61ffe25c950c75c86310245b3ef39"><div class="ttname"><a href="classllvm_1_1PHINode.html#adfb61ffe25c950c75c86310245b3ef39">llvm::PHINode::getIncomingValueForBlock</a></div><div class="ttdeci">Value * getIncomingValueForBlock(const BasicBlock *BB) const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02889">Instructions.h:2889</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a677ac8d99ff3c2d32a95c21de9ed372c"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">llvm::PatternMatch::m_ConstantInt</a></div><div class="ttdeci">class_match&lt; ConstantInt &gt; m_ConstantInt()</div><div class="ttdoc">Match an arbitrary ConstantInt and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00147">PatternMatch.h:147</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00041">Instruction.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeWrapperPass_html"><div class="ttname"><a href="classllvm_1_1DominatorTreeWrapperPass.html">llvm::DominatorTreeWrapperPass</a></div><div class="ttdoc">Legacy analysis pass which computes a DominatorTree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00314">Dominators.h:314</a></div></div>
<div class="ttc" id="aMDBuilder_8h_html"><div class="ttname"><a href="MDBuilder_8h.html">MDBuilder.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a72516971c5734dc0f7546e64affca425"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a72516971c5734dc0f7546e64affca425">llvm::BasicBlock::phis</a></div><div class="ttdeci">iterator_range&lt; const_phi_iterator &gt; phis() const</div><div class="ttdoc">Returns a range that iterates over the phis in the basic block.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00372">BasicBlock.h:372</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0bf75467957937ad23ad7be19f489934"><div class="ttname"><a href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">llvm::STATISTIC</a></div><div class="ttdeci">STATISTIC(NumFunctions, &quot;Total number of functions&quot;)</div></div>
<div class="ttc" id="aJumpThreading_8cpp_html_a50266e8679d84319fee61811c5f40b6e"><div class="ttname"><a href="JumpThreading_8cpp.html#a50266e8679d84319fee61811c5f40b6e">Threading</a></div><div class="ttdeci">jump Jump Threading</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l00169">JumpThreading.cpp:169</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_ad0b3d8447f88377b62d9c019f3c4e118"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#ad0b3d8447f88377b62d9c019f3c4e118">llvm::SmallVectorImpl::resize</a></div><div class="ttdeci">void resize(size_type N)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00642">SmallVector.h:642</a></div></div>
<div class="ttc" id="aclassllvm_1_1UndefValue_html_a4ae5ff22b700a42bcc5d889233721335"><div class="ttname"><a href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">llvm::UndefValue::get</a></div><div class="ttdeci">static UndefValue * get(Type *T)</div><div class="ttdoc">Static factory methods - Return an 'undef' object of the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01740">Constants.cpp:1740</a></div></div>
<div class="ttc" id="aclassllvm_1_1LocationSize_html_a131715ceeb92fb803a329d6b76d14e0d"><div class="ttname"><a href="classllvm_1_1LocationSize.html#a131715ceeb92fb803a329d6b76d14e0d">llvm::LocationSize::precise</a></div><div class="ttdeci">static LocationSize precise(uint64_t Value)</div><div class="ttdef"><b>Definition:</b> <a href="MemoryLocation_8h_source.html#l00102">MemoryLocation.h:102</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a969709dd49c28865a482d8b870f87c46"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">llvm::ConstantInt::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, uint64_t V, bool IsSigned=false)</div><div class="ttdoc">If Ty is a vector type, return a Constant with a splat of the given value.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00887">Constants.cpp:887</a></div></div>
<div class="ttc" id="aJumpThreading_8cpp_html_a9f88858ad3279dd92cc930a15f5a777f"><div class="ttname"><a href="JumpThreading_8cpp.html#a9f88858ad3279dd92cc930a15f5a777f">threading</a></div><div class="ttdeci">jump threading</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l00168">JumpThreading.cpp:168</a></div></div>
<div class="ttc" id="aSmallPtrSet_8h_html"><div class="ttname"><a href="SmallPtrSet_8h.html">SmallPtrSet.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_aade703948f2fdabdc65868bdf42d3141"><div class="ttname"><a href="classllvm_1_1Instruction.html#aade703948f2fdabdc65868bdf42d3141">llvm::Instruction::getAAMetadata</a></div><div class="ttdeci">AAMDNodes getAAMetadata() const</div><div class="ttdoc">Returns the AA metadata for this instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l01499">Metadata.cpp:1499</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9d391b6acc6d90c9b8a8442324b1aa6f"><div class="ttname"><a href="namespacellvm.html#a9d391b6acc6d90c9b8a8442324b1aa6f">llvm::SplitBlockPredecessors</a></div><div class="ttdeci">BasicBlock * SplitBlockPredecessors(BasicBlock *BB, ArrayRef&lt; BasicBlock * &gt; Preds, const char *Suffix, DominatorTree *DT, LoopInfo *LI=nullptr, MemorySSAUpdater *MSSAU=nullptr, bool PreserveLCSSA=false)</div><div class="ttdoc">This method introduces at least one new basic block into the function and moves some of the predecess...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l01272">BasicBlockUtils.cpp:1272</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a0fd53f63d349dc8a7c5fc0cdd7a94c8d"><div class="ttname"><a href="classllvm_1_1Instruction.html#a0fd53f63d349dc8a7c5fc0cdd7a94c8d">llvm::Instruction::removeFromParent</a></div><div class="ttdeci">void removeFromParent()</div><div class="ttdoc">This method unlinks 'this' from the containing basic block, but does not delete it.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00078">Instruction.cpp:78</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantRange_html_a04b4ad79ea8ce56e62e0e0323d302eec"><div class="ttname"><a href="classllvm_1_1ConstantRange.html#a04b4ad79ea8ce56e62e0e0323d302eec">llvm::ConstantRange::add</a></div><div class="ttdeci">ConstantRange add(const ConstantRange &amp;Other) const</div><div class="ttdoc">Return a new range representing the possible values resulting from an addition of a value in this ran...</div><div class="ttdef"><b>Definition:</b> <a href="ConstantRange_8cpp_source.html#l00986">ConstantRange.cpp:986</a></div></div>
<div class="ttc" id="aPatternMatch_8h_html"><div class="ttname"><a href="PatternMatch_8h.html">PatternMatch.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a08f3f942afc0ee9115a8f9fa87e9191d"><div class="ttname"><a href="namespacellvm.html#a08f3f942afc0ee9115a8f9fa87e9191d">llvm::RemoveRedundantDbgInstrs</a></div><div class="ttdeci">bool RemoveRedundantDbgInstrs(BasicBlock *BB)</div><div class="ttdoc">Try to remove redundant dbg.value instructions from given basic block.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00538">BasicBlockUtils.cpp:538</a></div></div>
<div class="ttc" id="aclassllvm_1_1BlockFrequencyAnalysis_html"><div class="ttname"><a href="classllvm_1_1BlockFrequencyAnalysis.html">llvm::BlockFrequencyAnalysis</a></div><div class="ttdoc">Analysis pass which computes BlockFrequencyInfo.</div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequencyInfo_8h_source.html#l00112">BlockFrequencyInfo.h:112</a></div></div>
<div class="ttc" id="aclassllvm_1_1JumpThreadingPass_html_ae4ca9bfe94c6cc3d952413c7907db47f"><div class="ttname"><a href="classllvm_1_1JumpThreadingPass.html#ae4ca9bfe94c6cc3d952413c7907db47f">llvm::JumpThreadingPass::tryToUnfoldSelect</a></div><div class="ttdeci">bool tryToUnfoldSelect(CmpInst *CondCmp, BasicBlock *BB)</div><div class="ttdoc">tryToUnfoldSelect - Look for blocks of the form bb1: a = select br bb2</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l02903">JumpThreading.cpp:2903</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_aef51af4b490af6b3bf2dfbc8737a8f9f"><div class="ttname"><a href="classllvm_1_1PHINode.html#aef51af4b490af6b3bf2dfbc8737a8f9f">llvm::PHINode::getNumIncomingValues</a></div><div class="ttdeci">unsigned getNumIncomingValues() const</div><div class="ttdoc">Return the number of incoming edges.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02790">Instructions.h:2790</a></div></div>
<div class="ttc" id="aclassllvm_1_1JumpThreadingPass_html_af1fb897c419e6a5080ecf54baf13f169"><div class="ttname"><a href="classllvm_1_1JumpThreadingPass.html#af1fb897c419e6a5080ecf54baf13f169">llvm::JumpThreadingPass::tryToUnfoldSelectInCurrBB</a></div><div class="ttdeci">bool tryToUnfoldSelectInCurrBB(BasicBlock *BB)</div><div class="ttdoc">tryToUnfoldSelectInCurrBB - Look for PHI/Select or PHI/CMP/Select in the same BB in the form bb: p = ...</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l02964">JumpThreading.cpp:2964</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html_aca6c2de6950cb093f509ed2b67e02da2"><div class="ttname"><a href="classllvm_1_1LoadInst.html#aca6c2de6950cb093f509ed2b67e02da2">llvm::LoadInst::getSyncScopeID</a></div><div class="ttdeci">SyncScope::ID getSyncScopeID() const</div><div class="ttdoc">Returns the synchronization scope ID of this load instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00239">Instructions.h:239</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a9d7de807ebdfe1819df3ff6cb0f16158"><div class="ttname"><a href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">llvm::Value::use_empty</a></div><div class="ttdeci">bool use_empty() const</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00344">Value.h:344</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a188c0836f8c3528401f1c236fd93b977"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">llvm::CallingConv::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdoc">LLVM IR allows to use arbitrary numbers as calling convention identifiers.</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00024">CallingConv.h:24</a></div></div>
<div class="ttc" id="aType_8h_html"><div class="ttname"><a href="Type_8h.html">Type.h</a></div></div>
<div class="ttc" id="aBranchProbability_8h_html"><div class="ttname"><a href="BranchProbability_8h.html">BranchProbability.h</a></div></div>
<div class="ttc" id="aPassSupport_8h_html_a74ce8276b89067e806f67c45a6d92575"><div class="ttname"><a href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a></div><div class="ttdeci">#define INITIALIZE_PASS_END(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00059">PassSupport.h:59</a></div></div>
<div class="ttc" id="aIR_2CFG_8h_html"><div class="ttname"><a href="IR_2CFG_8h.html">CFG.h</a></div></div>
<div class="ttc" id="aLoopInfo_8h_html"><div class="ttname"><a href="LoopInfo_8h.html">LoopInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_aac456a62894c9f0f8e9f06373bbf40f0"><div class="ttname"><a href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">llvm::BranchInst::getCondition</a></div><div class="ttdeci">Value * getCondition() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03220">Instructions.h:3220</a></div></div>
<div class="ttc" id="alib_2Target_2WebAssembly_2README_8txt_html_a2f18db7a825d21ca8818134d56e0cee1"><div class="ttname"><a href="lib_2Target_2WebAssembly_2README_8txt.html#a2f18db7a825d21ca8818134d56e0cee1">jump</a></div><div class="ttdeci">The object format emitted by the WebAssembly backed is documented see the home and packaging for producing WebAssembly applications that can run in browsers and other environments wasi sdk provides a more minimal C C SDK based on llvm and a libc based on for producing WebAssemmbly applictions that use the WASI ABI Rust provides WebAssembly support integrated into Cargo There are two main which provides a relatively minimal environment that has an emphasis on being native wasm32 unknown which uses Emscripten internally and provides standard C C filesystem GL and SDL bindings For more and br_table instructions can support having a value on the value stack across the jump(sometimes). We should(a) model this</div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_a07ed0bfaa124c15897944fe3eaa971ab"><div class="ttname"><a href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned long or uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="anamespacellvm_html_a52127e18cf8cb2d6e31b8178d3e14196"><div class="ttname"><a href="namespacellvm.html#a52127e18cf8cb2d6e31b8178d3e14196">llvm::findAvailablePtrLoadStore</a></div><div class="ttdeci">Value * findAvailablePtrLoadStore(const MemoryLocation &amp;Loc, Type *AccessTy, bool AtLeastAtomic, BasicBlock *ScanBB, BasicBlock::iterator &amp;ScanFrom, unsigned MaxInstsToScan, AAResults *AA, bool *IsLoadCSE, unsigned *NumScanedInst)</div><div class="ttdoc">Scan backwards to see if we have the value of the given pointer available locally within a small numb...</div><div class="ttdef"><b>Definition:</b> <a href="Loads_8cpp_source.html#l00558">Loads.cpp:558</a></div></div>
<div class="ttc" id="anamespacellvm_html_acb22fb04083152eee862457e42e8dc31"><div class="ttname"><a href="namespacellvm.html#acb22fb04083152eee862457e42e8dc31">llvm::predecessors</a></div><div class="ttdeci">auto predecessors(const MachineBasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l01266">MachineBasicBlock.h:1266</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html"><div class="ttname"><a href="classllvm_1_1CmpInst.html">llvm::CmpInst</a></div><div class="ttdoc">This class is the base class for the comparison instructions.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00708">InstrTypes.h:708</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_ac6d28a9b11139182134a9618028a0d07"><div class="ttname"><a href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">llvm::Type::isIntegerTy</a></div><div class="ttdeci">bool isIntegerTy() const</div><div class="ttdoc">True if this is an instance of IntegerType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00222">Type.h:222</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseSet_html"><div class="ttname"><a href="classllvm_1_1DenseSet.html">llvm::DenseSet&lt; Value * &gt;</a></div></div>
<div class="ttc" id="aBasicBlock_8h_html"><div class="ttname"><a href="BasicBlock_8h.html">BasicBlock.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l01410">CommandLine.h:1410</a></div></div>
<div class="ttc" id="anamespacellvm_html_a4cd89ca702a817aac3a4521dd2462a2e"><div class="ttname"><a href="namespacellvm.html#a4cd89ca702a817aac3a4521dd2462a2e">llvm::DuplicateInstructionsInSplitBetween</a></div><div class="ttdeci">BasicBlock * DuplicateInstructionsInSplitBetween(BasicBlock *BB, BasicBlock *PredBB, Instruction *StopAt, ValueToValueMapTy &amp;ValueMapping, DomTreeUpdater &amp;DTU)</div><div class="ttdoc">Split edge between BB and PredBB and duplicate all non-Phi instructions from BB between its beginning...</div><div class="ttdef"><b>Definition:</b> <a href="CloneFunction_8cpp_source.html#l01039">CloneFunction.cpp:1039</a></div></div>
<div class="ttc" id="anamespacellvm_html_a67474fe1bb82a093f3ad2e9ad2d7f7c4"><div class="ttname"><a href="namespacellvm.html#a67474fe1bb82a093f3ad2e9ad2d7f7c4">llvm::TryToSimplifyUncondBranchFromEmptyBlock</a></div><div class="ttdeci">bool TryToSimplifyUncondBranchFromEmptyBlock(BasicBlock *BB, DomTreeUpdater *DTU=nullptr)</div><div class="ttdoc">BB is known to contain an unconditional branch, and contains no instructions other than PHI nodes,...</div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Utils_2Local_8cpp_source.html#l01070">Local.cpp:1070</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_afe6a25e856a1a63ffff098f05e3f26d2"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#afe6a25e856a1a63ffff098f05e3f26d2">llvm::ConstantExpr::getCompare</a></div><div class="ttdeci">static Constant * getCompare(unsigned short pred, Constant *C1, Constant *C2, bool OnlyIfReduced=false)</div><div class="ttdoc">Return an ICmp or FCmp comparison operator constant expression.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02419">Constants.cpp:2419</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantRange_html_aaaa2f5e2c6c3122d2b484f9e50950e18"><div class="ttname"><a href="classllvm_1_1ConstantRange.html#aaaa2f5e2c6c3122d2b484f9e50950e18">llvm::ConstantRange::inverse</a></div><div class="ttdeci">ConstantRange inverse() const</div><div class="ttdoc">Return a new range that is the logical not of the current set.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantRange_8cpp_source.html#l01620">ConstantRange.cpp:1620</a></div></div>
<div class="ttc" id="aclassllvm_1_1BlockFrequency_html"><div class="ttname"><a href="classllvm_1_1BlockFrequency.html">llvm::BlockFrequency</a></div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequency_8h_source.html#l00023">BlockFrequency.h:23</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html"><div class="ttname"><a href="classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">This is an important base class in LLVM.</div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a6e5d2e18c81baaeec7dadc81a0dea993"><div class="ttname"><a href="classllvm_1_1Instruction.html#a6e5d2e18c81baaeec7dadc81a0dea993">llvm::Instruction::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned Idx) const LLVM_READONLY</div><div class="ttdoc">Return the specified successor. This instruction must be a terminator.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00835">Instruction.cpp:835</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ae6b978645b8ac72d1a35e1298ffdd4f0"><div class="ttname"><a href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">SymbolTableList&lt; Instruction &gt;::iterator eraseFromParent()</div><div class="ttdoc">This method unlinks 'this' from the containing basic block and deletes it.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00082">Instruction.cpp:82</a></div></div>
<div class="ttc" id="aBranchProbabilityInfo_8h_html"><div class="ttname"><a href="BranchProbabilityInfo_8h.html">BranchProbabilityInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ICmpInst_html"><div class="ttname"><a href="classllvm_1_1ICmpInst.html">llvm::ICmpInst</a></div><div class="ttdoc">This instruction compares its operands according to the predicate given to the constructor.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01197">Instructions.h:1197</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLibraryInfoWrapperPass_html"><div class="ttname"><a href="classllvm_1_1TargetLibraryInfoWrapperPass.html">llvm::TargetLibraryInfoWrapperPass</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00565">TargetLibraryInfo.h:565</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfoWrapperPass_html"><div class="ttname"><a href="classllvm_1_1TargetTransformInfoWrapperPass.html">llvm::TargetTransformInfoWrapperPass</a></div><div class="ttdoc">Wrapper pass for TargetTransformInfo.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l02682">TargetTransformInfo.h:2682</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a1a06b1cff93069d7403ea03e6150e386"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a1a06b1cff93069d7403ea03e6150e386">llvm::PatternMatch::m_LogicalOr</a></div><div class="ttdeci">LogicalOp_match&lt; LHS, RHS, Instruction::Or &gt; m_LogicalOr(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches L || R either in the form of L | R or L ? true : R.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02574">PatternMatch.h:2574</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyValueInfoWrapperPass_html"><div class="ttname"><a href="classllvm_1_1LazyValueInfoWrapperPass.html">llvm::LazyValueInfoWrapperPass</a></div><div class="ttdoc">Wrapper around LazyValueInfo.</div><div class="ttdef"><b>Definition:</b> <a href="LazyValueInfo_8h_source.html#l00149">LazyValueInfo.h:149</a></div></div>
<div class="ttc" id="aclassllvm_1_1JumpThreadingPass_html_a064ce69a10374b5342954d481e21fa25"><div class="ttname"><a href="classllvm_1_1JumpThreadingPass.html#a064ce69a10374b5342954d481e21fa25">llvm::JumpThreadingPass::simplifyPartiallyRedundantLoad</a></div><div class="ttdeci">bool simplifyPartiallyRedundantLoad(LoadInst *LI)</div><div class="ttdoc">simplifyPartiallyRedundantLoad - If LoadI is an obviously partially redundant load instruction,...</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l01330">JumpThreading.cpp:1330</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_ad966bea18aa62ffb9e040509adc7c99f"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#ad966bea18aa62ffb9e040509adc7c99f">llvm::PreservedAnalyses::preserve</a></div><div class="ttdeci">void preserve()</div><div class="ttdoc">Mark an analysis as preserved.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00173">PassManager.h:173</a></div></div>
<div class="ttc" id="aSVEIntrinsicOpts_8cpp_html_a2bb87eb1bcbc74783a83ae945eb8fa36"><div class="ttname"><a href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a></div><div class="ttdeci">INITIALIZE_PASS_DEPENDENCY(DominatorTreeWrapperPass)</div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_a089cccb6f231efee72abc76d0f9c695f"><div class="ttname"><a href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">llvm::PHINode::addIncoming</a></div><div class="ttdeci">void addIncoming(Value *V, BasicBlock *BB)</div><div class="ttdoc">Add an incoming value to the end of the PHI list.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02854">Instructions.h:2854</a></div></div>
<div class="ttc" id="aJumpThreading_8cpp_html_ae146bcb2829260a3a094d0a9a2e5fd8b"><div class="ttname"><a href="JumpThreading_8cpp.html#ae146bcb2829260a3a094d0a9a2e5fd8b">findMostPopularDest</a></div><div class="ttdeci">static BasicBlock * findMostPopularDest(BasicBlock *BB, const SmallVectorImpl&lt; std::pair&lt; BasicBlock *, BasicBlock * &gt;&gt; &amp;PredToDestList)</div><div class="ttdoc">findMostPopularDest - The specified list contains multiple possible threadable destinations.</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l01569">JumpThreading.cpp:1569</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_ad3a99906764c35b2694ae90fa57744a5"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">move</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional move</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00546">README.txt:546</a></div></div>
<div class="ttc" id="aProfDataUtils_8h_html"><div class="ttname"><a href="ProfDataUtils_8h.html">ProfDataUtils.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_html_af095c82360c397be730c08feb78264e9"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html#af095c82360c397be730c08feb78264e9">llvm::BranchProbabilityInfo::copyEdgeProbabilities</a></div><div class="ttdeci">void copyEdgeProbabilities(BasicBlock *Src, BasicBlock *Dst)</div><div class="ttdoc">Copy outgoing edge probabilities from Src to Dst.</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l01159">BranchProbabilityInfo.cpp:1159</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLVMContext_html"><div class="ttname"><a href="classllvm_1_1LLVMContext.html">llvm::LLVMContext</a></div><div class="ttdoc">This is an important class for using LLVM in a threaded context.</div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00067">LLVMContext.h:67</a></div></div>
<div class="ttc" id="anamespacellvm_1_1numbers_html_a92f4283d4e0e2ea1776894b3ae93640f"><div class="ttname"><a href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">llvm::numbers::e</a></div><div class="ttdeci">constexpr double e</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00031">MathExtras.h:31</a></div></div>
<div class="ttc" id="aclassllvm_1_1DomTreeUpdater_html_ae529b0d73b54361e5151985f93497001"><div class="ttname"><a href="classllvm_1_1DomTreeUpdater.html#ae529b0d73b54361e5151985f93497001">llvm::DomTreeUpdater::getDomTree</a></div><div class="ttdeci">DominatorTree &amp; getDomTree()</div><div class="ttdoc">Flush DomTree updates and return DomTree.</div><div class="ttdef"><b>Definition:</b> <a href="DomTreeUpdater_8cpp_source.html#l00303">DomTreeUpdater.cpp:303</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_a38df51256d4b415b6a817b5e1c6d4d36"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">llvm::BranchInst::Create</a></div><div class="ttdeci">static BranchInst * Create(BasicBlock *IfTrue, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03195">Instructions.h:3195</a></div></div>
<div class="ttc" id="aMemoryLocation_8h_html"><div class="ttname"><a href="MemoryLocation_8h.html">MemoryLocation.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00714">DenseMap.h:714</a></div></div>
<div class="ttc" id="aIR_2DebugInfo_8h_html"><div class="ttname"><a href="IR_2DebugInfo_8h.html">DebugInfo.h</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64PACKey_html_abf4394f452bde3f544999858d71e4b46a438dbcc76b79fb10acb447ec5d141287"><div class="ttname"><a href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46a438dbcc76b79fb10acb447ec5d141287">llvm::AArch64PACKey::IB</a></div><div class="ttdeci">@ IB</div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00792">AArch64BaseInfo.h:792</a></div></div>
<div class="ttc" id="aCloning_8h_html"><div class="ttname"><a href="Cloning_8h.html">Cloning.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1UndefValue_html"><div class="ttname"><a href="classllvm_1_1UndefValue.html">llvm::UndefValue</a></div><div class="ttdoc">'undef' values are things that do not have specified contents.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l01382">Constants.h:1382</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00445">CommandLine.h:445</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab1c40e35dfc36395c37921107003128b"><div class="ttname"><a href="namespacellvm.html#ab1c40e35dfc36395c37921107003128b">llvm::adaptNoAliasScopes</a></div><div class="ttdeci">void adaptNoAliasScopes(llvm::Instruction *I, const DenseMap&lt; MDNode *, MDNode * &gt; &amp;ClonedScopes, LLVMContext &amp;Context)</div><div class="ttdoc">Adapt the metadata for the specified instruction according to the provided mapping.</div><div class="ttdef"><b>Definition:</b> <a href="CloneFunction_8cpp_source.html#l01109">CloneFunction.cpp:1109</a></div></div>
<div class="ttc" id="anamespacellvm_html_acd1cd968cb420c82d70926920fcdc7d7"><div class="ttname"><a href="namespacellvm.html#acd1cd968cb420c82d70926920fcdc7d7">llvm::is_contained</a></div><div class="ttdeci">bool is_contained(R &amp;&amp;Range, const E &amp;Element)</div><div class="ttdoc">Wrapper function around std::find to detect if an element exists in a container.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01869">STLExtras.h:1869</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8813c8445d4429956ae5a3647f02fcfb"><div class="ttname"><a href="namespacellvm.html#a8813c8445d4429956ae5a3647f02fcfb">llvm::findDbgValues</a></div><div class="ttdeci">void findDbgValues(SmallVectorImpl&lt; DbgValueInst * &gt; &amp;DbgValues, Value *V)</div><div class="ttdoc">Finds the llvm.dbg.value intrinsics describing a value.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfo_8cpp_source.html#l00079">DebugInfo.cpp:79</a></div></div>
<div class="ttc" id="anamespacellvm_html_aab02db480f387fca92956ef1c9a01941"><div class="ttname"><a href="namespacellvm.html#aab02db480f387fca92956ef1c9a01941">llvm::simplifyInstruction</a></div><div class="ttdeci">Value * simplifyInstruction(Instruction *I, const SimplifyQuery &amp;Q, OptimizationRemarkEmitter *ORE=nullptr)</div><div class="ttdoc">See if we can compute a simplified version of this instruction.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l06731">InstructionSimplify.cpp:6731</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ae8f5bf5cc06f696b52c709677df00fbf"><div class="ttname"><a href="classllvm_1_1Instruction.html#ae8f5bf5cc06f696b52c709677df00fbf">llvm::Instruction::setDebugLoc</a></div><div class="ttdeci">void setDebugLoc(DebugLoc Loc)</div><div class="ttdoc">Set the debug location information for this instruction.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00355">Instruction.h:355</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a0c047f127ed4380a6f383d70bec4eb94"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::find</a></div><div class="ttdeci">iterator find(const_arg_type_t&lt; KeyT &gt; Val)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00150">DenseMap.h:150</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="aclassllvm_1_1JumpThreadingPass_html"><div class="ttname"><a href="classllvm_1_1JumpThreadingPass.html">llvm::JumpThreadingPass</a></div><div class="ttdoc">This pass performs 'jump threading', which looks at blocks that have multiple predecessors and multip...</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8h_source.html#l00078">JumpThreading.h:78</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a49b69843927f7cd96d866768b3aec92b"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a49b69843927f7cd96d866768b3aec92b">llvm::ConstantExpr::getCast</a></div><div class="ttdeci">static Constant * getCast(unsigned ops, Constant *C, Type *Ty, bool OnlyIfReduced=false)</div><div class="ttdoc">Convenience function for getting a Cast operation.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01973">Constants.cpp:1973</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTree_html_a1a70f2c359aadd76a72aaaede16aca4a"><div class="ttname"><a href="classllvm_1_1DominatorTree.html#a1a70f2c359aadd76a72aaaede16aca4a">llvm::DominatorTree::isReachableFromEntry</a></div><div class="ttdeci">bool isReachableFromEntry(const Use &amp;U) const</div><div class="ttdoc">Provide an overload for a Use.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8cpp_source.html#l00335">Dominators.cpp:335</a></div></div>
<div class="ttc" id="aclassllvm_1_1SelectInst_html"><div class="ttname"><a href="classllvm_1_1SelectInst.html">llvm::SelectInst</a></div><div class="ttdoc">This class represents the LLVM 'select' instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01746">Instructions.h:1746</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8eade0f2933d0684681065b3960122e2"><div class="ttname"><a href="namespacellvm.html#a8eade0f2933d0684681065b3960122e2">llvm::cloneNoAliasScopes</a></div><div class="ttdeci">void cloneNoAliasScopes(ArrayRef&lt; MDNode * &gt; NoAliasDeclScopes, DenseMap&lt; MDNode *, MDNode * &gt; &amp;ClonedScopes, StringRef Ext, LLVMContext &amp;Context)</div><div class="ttdoc">Duplicate the specified list of noalias decl scopes.</div><div class="ttdef"><b>Definition:</b> <a href="CloneFunction_8cpp_source.html#l01084">CloneFunction.cpp:1084</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyValueInfo_html"><div class="ttname"><a href="classllvm_1_1LazyValueInfo.html">llvm::LazyValueInfo</a></div><div class="ttdoc">This pass computes, caches, and vends lazy value constraint information.</div><div class="ttdef"><b>Definition:</b> <a href="LazyValueInfo_8h_source.html#l00031">LazyValueInfo.h:31</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aadd209ba7e1bfa8113a609e09a7fe62f"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">llvm::PatternMatch::m_Constant</a></div><div class="ttdeci">class_match&lt; Constant &gt; m_Constant()</div><div class="ttdoc">Match an arbitrary Constant and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00144">PatternMatch.h:144</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a1f475b0df44ebd7169e720fa1bf9169e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">llvm::SmallPtrSetImpl::count</a></div><div class="ttdeci">size_type count(ConstPtrType Ptr) const</div><div class="ttdoc">count - Return 1 if the specified pointer is in the set, 0 otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00383">SmallPtrSet.h:383</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_ad56f6a9b5cd05940017c4544df48bc30"><div class="ttname"><a href="classllvm_1_1BranchInst.html#ad56f6a9b5cd05940017c4544df48bc30">llvm::BranchInst::isUnconditional</a></div><div class="ttdeci">bool isUnconditional() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03217">Instructions.h:3217</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a24bca8838396aa81b87de8e7ac774b19"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">llvm::PatternMatch::m_Value</a></div><div class="ttdeci">class_match&lt; Value &gt; m_Value()</div><div class="ttdoc">Match an arbitrary value and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00076">PatternMatch.h:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_html_a46502d648608aa13cb485ed4af447d88"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html#a46502d648608aa13cb485ed4af447d88">llvm::BranchProbabilityInfo::getEdgeProbability</a></div><div class="ttdeci">BranchProbability getEdgeProbability(const BasicBlock *Src, unsigned IndexInSuccessors) const</div><div class="ttdoc">Get an edge's probability, relative to other out-edges of the Src.</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l01095">BranchProbabilityInfo.cpp:1095</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_a5fa9b8e1842b354f64c1ba6be0a4a17f"><div class="ttname"><a href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">llvm::User::setOperand</a></div><div class="ttdeci">void setOperand(unsigned i, Value *Val)</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00174">User.h:174</a></div></div>
<div class="ttc" id="aclassllvm_1_1JumpThreadingPass_html_a080bc28b084ddc6539dda7e94a300da7"><div class="ttname"><a href="classllvm_1_1JumpThreadingPass.html#a080bc28b084ddc6539dda7e94a300da7">llvm::JumpThreadingPass::processGuards</a></div><div class="ttdeci">bool processGuards(BasicBlock *BB)</div><div class="ttdoc">Try to propagate a guard from the current BB into one of its predecessors in case if another branch o...</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l03064">JumpThreading.cpp:3064</a></div></div>
<div class="ttc" id="aAnalysis_2CFG_8h_html"><div class="ttname"><a href="Analysis_2CFG_8h.html">CFG.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_ac44f6b9fdbb5f9cc199f8329cb0b272ca89f768b1267e3083b4eb05b4ab77e717"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#ac44f6b9fdbb5f9cc199f8329cb0b272ca89f768b1267e3083b4eb05b4ab77e717">llvm::TargetTransformInfo::TCC_Free</a></div><div class="ttdeci">@ TCC_Free</div><div class="ttdoc">Expected to fold away in lowering.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00267">TargetTransformInfo.h:267</a></div></div>
<div class="ttc" id="aclassllvm_1_1BlockAddress_html"><div class="ttname"><a href="classllvm_1_1BlockAddress.html">llvm::BlockAddress</a></div><div class="ttdoc">The address of a basic block.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00875">Constants.h:875</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_html_a145edc209aa2f628c73c9cf860eeeb5c"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html#a145edc209aa2f628c73c9cf860eeeb5c">llvm::BranchProbabilityInfo::setEdgeProbability</a></div><div class="ttdeci">void setEdgeProbability(const BasicBlock *Src, const SmallVectorImpl&lt; BranchProbability &gt; &amp;Probs)</div><div class="ttdoc">Set the raw probabilities for all edges from the given block.</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8cpp_source.html#l01132">BranchProbabilityInfo.cpp:1132</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Sched_html_ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9"><div class="ttname"><a href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">llvm::Sched::Source</a></div><div class="ttdeci">@ Source</div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l00100">TargetLowering.h:100</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef</a></div><div class="ttdoc">ArrayRef - Represent a constant reference to an array (0 or more elements consecutively in memory),...</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00033">APInt.h:33</a></div></div>
<div class="ttc" id="anamespacellvm_html_a627b2f86ac433d829482d5a5a0f50668"><div class="ttname"><a href="namespacellvm.html#a627b2f86ac433d829482d5a5a0f50668">llvm::isInstructionTriviallyDead</a></div><div class="ttdeci">bool isInstructionTriviallyDead(Instruction *I, const TargetLibraryInfo *TLI=nullptr)</div><div class="ttdoc">Return true if the result produced by the instruction is not used, and the instruction will return.</div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Utils_2Local_8cpp_source.html#l00398">Local.cpp:398</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfo_html"><div class="ttname"><a href="classllvm_1_1LoopInfo.html">llvm::LoopInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l01108">LoopInfo.h:1108</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_a960620248182018e566b095f06a605df"><div class="ttname"><a href="classllvm_1_1Constant.html#a960620248182018e566b095f06a605df">llvm::Constant::removeDeadConstantUsers</a></div><div class="ttdeci">void removeDeadConstantUsers() const</div><div class="ttdoc">If there are any dead constant users dangling off of this constant, remove them.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00710">Constants.cpp:710</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html">llvm::BinaryOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00187">InstrTypes.h:187</a></div></div>
<div class="ttc" id="anamespacellvm_html_a61d13d6824ec46c31260a4fd0997eda0"><div class="ttname"><a href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">llvm::any_of</a></div><div class="ttdeci">bool any_of(R &amp;&amp;range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::any_of which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01742">STLExtras.h:1742</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a507bb47fc498540c91fec0bf95c25907"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a507bb47fc498540c91fec0bf95c25907">llvm::BasicBlock::moveAfter</a></div><div class="ttdeci">void moveAfter(BasicBlock *MovePos)</div><div class="ttdoc">Unlink this basic block from its current function and insert it right after MovePos in the function M...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00141">BasicBlock.cpp:141</a></div></div>
<div class="ttc" id="aDataLayout_8h_html"><div class="ttname"><a href="DataLayout_8h.html">DataLayout.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1JumpThreadingPass_html_a30207ff92cc09d50e4f6e188de0f59ed"><div class="ttname"><a href="classllvm_1_1JumpThreadingPass.html#a30207ff92cc09d50e4f6e188de0f59ed">llvm::JumpThreadingPass::maybeMergeBasicBlockIntoOnlyPred</a></div><div class="ttdeci">bool maybeMergeBasicBlockIntoOnlyPred(BasicBlock *BB)</div><div class="ttdoc">Merge basic block BB into its sole predecessor if possible.</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l01989">JumpThreading.cpp:1989</a></div></div>
<div class="ttc" id="aclassllvm_1_1JumpThreadingPass_html_afed5e8a79fa550920f638708cc257bdf"><div class="ttname"><a href="classllvm_1_1JumpThreadingPass.html#afed5e8a79fa550920f638708cc257bdf">llvm::JumpThreadingPass::threadGuard</a></div><div class="ttdeci">bool threadGuard(BasicBlock *BB, IntrinsicInst *Guard, BranchInst *BI)</div><div class="ttdoc">Try to propagate the guard from BB which is the lower block of a diamond to one of its branches,...</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l03098">JumpThreading.cpp:3098</a></div></div>
<div class="ttc" id="aBasicBlockSections_8cpp_html_a5fd0741d696f28faf65b33f6c6af8fda"><div class="ttname"><a href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a></div><div class="ttdeci">SmallVector&lt; MachineOperand, 4 &gt; Cond</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockSections_8cpp_source.html#l00137">BasicBlockSections.cpp:137</a></div></div>
<div class="ttc" id="anamespacellvm_html_ade9551bcb1121539a279452fec71f9eb"><div class="ttname"><a href="namespacellvm.html#ade9551bcb1121539a279452fec71f9eb">llvm::identifyNoAliasScopesToClone</a></div><div class="ttdeci">void identifyNoAliasScopesToClone(ArrayRef&lt; BasicBlock * &gt; BBs, SmallVectorImpl&lt; MDNode * &gt; &amp;NoAliasDeclScopes)</div><div class="ttdoc">Find the 'llvm.experimental.noalias.scope.decl' intrinsics in the specified basic blocks and extract ...</div><div class="ttdef"><b>Definition:</b> <a href="CloneFunction_8cpp_source.html#l01180">CloneFunction.cpp:1180</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ae959364e4640ac025bbc046d3d7c7e61"><div class="ttname"><a href="classllvm_1_1Instruction.html#ae959364e4640ac025bbc046d3d7c7e61">llvm::Instruction::setSuccessor</a></div><div class="ttdeci">void setSuccessor(unsigned Idx, BasicBlock *BB)</div><div class="ttdoc">Update the specified successor to point at the provided block.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00847">Instruction.cpp:847</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a706f223f760b55668fbae74202b816bba7f80055e1969cb850739546467460ad8"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bba7f80055e1969cb850739546467460ad8">llvm::TargetTransformInfo::TCK_SizeAndLatency</a></div><div class="ttdeci">@ TCK_SizeAndLatency</div><div class="ttdoc">The weighted sum of size and latency.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00245">TargetTransformInfo.h:245</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a6393a2d4fe7e10b28a0dcc35f881567b"><div class="ttname"><a href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const</div><div class="ttdoc">All values are typed, get the type of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00255">Value.h:255</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a882d55a6aa2028e1a5ad708b275334e0"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a882d55a6aa2028e1a5ad708b275334e0">llvm::ConstantInt::isZero</a></div><div class="ttdeci">bool isZero() const</div><div class="ttdoc">This is just a convenience method to make client code smaller for a common code.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00193">Constants.h:193</a></div></div>
<div class="ttc" id="aclassllvm_1_1JumpThreadingPass_html_accef1dd983ed3831858fe41c90fcc214"><div class="ttname"><a href="classllvm_1_1JumpThreadingPass.html#accef1dd983ed3831858fe41c90fcc214">llvm::JumpThreadingPass::threadThroughTwoBasicBlocks</a></div><div class="ttdeci">void threadThroughTwoBasicBlocks(BasicBlock *PredPredBB, BasicBlock *PredBB, BasicBlock *BB, BasicBlock *SuccBB)</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l02316">JumpThreading.cpp:2316</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_a884f90190bca4bd354f2d5c91c264028"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">llvm::AnalysisUsage::addPreserved</a></div><div class="ttdeci">AnalysisUsage &amp; addPreserved()</div><div class="ttdoc">Add the specified Pass class to the set of analyses preserved by this pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00098">PassAnalysisSupport.h:98</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdoc">Change all uses of this to point to a new Value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00532">Value.cpp:532</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_ace940beeee97c222f836fe0ac70f6cf5"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">llvm::BasicBlock::Create</a></div><div class="ttdeci">static BasicBlock * Create(LLVMContext &amp;Context, const Twine &amp;Name=&quot;&quot;, Function *Parent=nullptr, BasicBlock *InsertBefore=nullptr)</div><div class="ttdoc">Creates a new BasicBlock.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00105">BasicBlock.h:105</a></div></div>
<div class="ttc" id="aBasicAliasAnalysis_8cpp_html_a2675de1d8479c7b00387979714da43f7"><div class="ttname"><a href="BasicAliasAnalysis_8cpp.html#a2675de1d8479c7b00387979714da43f7">getParent</a></div><div class="ttdeci">static const Function * getParent(const Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="BasicAliasAnalysis_8cpp_source.html#l00806">BasicAliasAnalysis.cpp:806</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbability_html"><div class="ttname"><a href="classllvm_1_1BranchProbability.html">llvm::BranchProbability</a></div><div class="ttdef"><b>Definition:</b> <a href="BranchProbability_8h_source.html#l00030">BranchProbability.h:30</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ab3fc0225d8aaf8434026c3573f961f2c"><div class="ttname"><a href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">All values hold a context through their type.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00994">Value.cpp:994</a></div></div>
<div class="ttc" id="aclassllvm_1_1ilist__node__impl_html_af719fc783be6589465137d997701a432"><div class="ttname"><a href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">llvm::ilist_node_impl::getIterator</a></div><div class="ttdeci">self_iterator getIterator()</div><div class="ttdef"><b>Definition:</b> <a href="ilist__node_8h_source.html#l00082">ilist_node.h:82</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_ad467c4ab9119043f9b7750ab986be61a"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a></div><div class="ttdeci">MachineBasicBlock MachineBasicBlock::iterator DebugLoc DL</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00076">AArch64SLSHardening.cpp:76</a></div></div>
<div class="ttc" id="aConstantRange_8h_html"><div class="ttname"><a href="ConstantRange_8h.html">ConstantRange.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad66c4759666aab78529658362b498c74"><div class="ttname"><a href="namespacellvm.html#ad66c4759666aab78529658362b498c74">llvm::pred_empty</a></div><div class="ttdeci">bool pred_empty(const BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="IR_2CFG_8h_source.html#l00118">CFG.h:118</a></div></div>
<div class="ttc" id="aclassllvm_1_1CastInst_html"><div class="ttname"><a href="classllvm_1_1CastInst.html">llvm::CastInst</a></div><div class="ttdoc">This is the base class for all instructions that perform data casts.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00428">InstrTypes.h:428</a></div></div>
<div class="ttc" id="aJumpThreading_8cpp_html_ae5a9dfd216e7560889e2366f34ddd9f1"><div class="ttname"><a href="JumpThreading_8cpp.html#ae5a9dfd216e7560889e2366f34ddd9f1">updatePredecessorProfileMetadata</a></div><div class="ttdeci">static void updatePredecessorProfileMetadata(PHINode *PN, BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l00215">JumpThreading.cpp:215</a></div></div>
<div class="ttc" id="aSSAUpdater_8h_html"><div class="ttname"><a href="SSAUpdater_8h.html">SSAUpdater.h</a></div></div>
<div class="ttc" id="aBlockFrequencyInfo_8h_html"><div class="ttname"><a href="BlockFrequencyInfo_8h.html">BlockFrequencyInfo.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPUISD_html_a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996"><div class="ttname"><a href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">llvm::AMDGPUISD::BFI</a></div><div class="ttdeci">@ BFI</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUISelLowering_8h_source.html#l00441">AMDGPUISelLowering.h:441</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html_a93603fe0d4168b92a901f06015ecb2e7"><div class="ttname"><a href="classllvm_1_1LoadInst.html#a93603fe0d4168b92a901f06015ecb2e7">llvm::LoadInst::getOrdering</a></div><div class="ttdeci">AtomicOrdering getOrdering() const</div><div class="ttdoc">Returns the ordering constraint of this load instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00229">Instructions.h:229</a></div></div>
<div class="ttc" id="aclassllvm_1_1PredIterator_html"><div class="ttname"><a href="classllvm_1_1PredIterator.html">llvm::PredIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2CFG_8h_source.html#l00042">CFG.h:42</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_adb5c319f5905c1d3ca9eb5df546388c5"><div class="ttname"><a href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">Return a constant reference to the value's name.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00308">Value.cpp:308</a></div></div>
<div class="ttc" id="aclassllvm_1_1ValueMap_html"><div class="ttname"><a href="classllvm_1_1ValueMap.html">llvm::ValueMap</a></div><div class="ttdoc">See the file comment.</div><div class="ttdef"><b>Definition:</b> <a href="ValueMap_8h_source.html#l00084">ValueMap.h:84</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html"><div class="ttname"><a href="classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdoc">An instruction for reading from memory.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00177">Instructions.h:177</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a99f811d53704275b4158c62a2dd138d9"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const std::pair&lt; KeyT, ValueT &gt; &amp;KV)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00207">DenseMap.h:207</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a966eb231e7d4e572874d2cb49b18faea"><div class="ttname"><a href="classllvm_1_1Value.html#a966eb231e7d4e572874d2cb49b18faea">llvm::Value::stripPointerCasts</a></div><div class="ttdeci">const Value * stripPointerCasts() const</div><div class="ttdoc">Strip off pointer casts, all-zero GEPs and address space casts.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00685">Value.cpp:685</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_aa7cce62ac5cc6df09cce0535874336b7"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">llvm::ConstantInt::getFalse</a></div><div class="ttdeci">static ConstantInt * getFalse(LLVMContext &amp;Context)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00842">Constants.cpp:842</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImplBase_html_a0e1c3175b0ac22fe3853651c28e1ecb8"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImplBase.html#a0e1c3175b0ac22fe3853651c28e1ecb8">llvm::SmallPtrSetImplBase::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00093">SmallPtrSet.h:93</a></div></div>
<div class="ttc" id="aclassllvm_1_1MapVector_html_a0881334358ff6ff7ff8cea5562c7988e"><div class="ttname"><a href="classllvm_1_1MapVector.html#a0881334358ff6ff7ff8cea5562c7988e">llvm::MapVector::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="MapVector_8h_source.html#l00072">MapVector.h:72</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_ab706e7ebb1969c5e34f28bfcf2ff719e"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ab706e7ebb1969c5e34f28bfcf2ff719e">llvm::BasicBlock::front</a></div><div class="ttdeci">const Instruction &amp; front() const</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00326">BasicBlock.h:326</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_aa286a0f7f5d38488d593bb7ef0ba183e"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#aa286a0f7f5d38488d593bb7ef0ba183e">llvm::BasicBlock::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">Get the context in which this basic block lives.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00035">BasicBlock.cpp:35</a></div></div>
<div class="ttc" id="aEntryExitInstrumenter_8cpp_html_a3985f1f39349428d17f0d2b81ebc6349"><div class="ttname"><a href="EntryExitInstrumenter_8cpp.html#a3985f1f39349428d17f0d2b81ebc6349">runOnFunction</a></div><div class="ttdeci">static bool runOnFunction(Function &amp;F, bool PostInlining)</div><div class="ttdef"><b>Definition:</b> <a href="EntryExitInstrumenter_8cpp_source.html#l00085">EntryExitInstrumenter.cpp:85</a></div></div>
<div class="ttc" id="aJumpThreading_8cpp_html_aaca431cd72c37f81086a391fb63693d8"><div class="ttname"><a href="JumpThreading_8cpp.html#aaca431cd72c37f81086a391fb63693d8">addPHINodeEntriesForMappedBlock</a></div><div class="ttdeci">static void addPHINodeEntriesForMappedBlock(BasicBlock *PHIBB, BasicBlock *OldPred, BasicBlock *NewPred, DenseMap&lt; Instruction *, Value * &gt; &amp;ValueMap)</div><div class="ttdoc">addPHINodeEntriesForMappedBlock - We're adding 'NewPred' as a new predecessor to the PHIBB block.</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l01968">JumpThreading.cpp:1968</a></div></div>
<div class="ttc" id="aConstant_8h_html"><div class="ttname"><a href="Constant_8h.html">Constant.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_adf83581f514774264d616eef5706cf6e"><div class="ttname"><a href="namespacellvm.html#adf83581f514774264d616eef5706cf6e">llvm::SplitEdge</a></div><div class="ttdeci">BasicBlock * SplitEdge(BasicBlock *From, BasicBlock *To, DominatorTree *DT=nullptr, LoopInfo *LI=nullptr, MemorySSAUpdater *MSSAU=nullptr, const Twine &amp;BBName=&quot;&quot;)</div><div class="ttdoc">Split the edge connecting the specified blocks, and return the newly created basic block between From...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00615">BasicBlockUtils.cpp:615</a></div></div>
<div class="ttc" id="anamespacellvm_html_a152d8c380cc937c9dceb402ceec943b6"><div class="ttname"><a href="namespacellvm.html#a152d8c380cc937c9dceb402ceec943b6">llvm::ConstantFoldTerminator</a></div><div class="ttdeci">bool ConstantFoldTerminator(BasicBlock *BB, bool DeleteDeadConditions=false, const TargetLibraryInfo *TLI=nullptr, DomTreeUpdater *DTU=nullptr)</div><div class="ttdoc">If a terminator instruction is predicated on a constant value, convert it into an unconditional branc...</div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Utils_2Local_8cpp_source.html#l00126">Local.cpp:126</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a82dbbd8e3688b0bc1eedb338864d0d0c"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">llvm::ConstantInt::getTrue</a></div><div class="ttdeci">static ConstantInt * getTrue(LLVMContext &amp;Context)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00835">Constants.cpp:835</a></div></div>
<div class="ttc" id="aJumpThreading_8cpp_html_a7b4e573a5d8a85ed91db4d40daf3b405"><div class="ttname"><a href="JumpThreading_8cpp.html#a7b4e573a5d8a85ed91db4d40daf3b405">PrintLVIAfterJumpThreading</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; PrintLVIAfterJumpThreading(&quot;print-lvi-after-jump-threading&quot;, cl::desc(&quot;Print the LazyValueInfo cache after JumpThreading&quot;), cl::init(false), cl::Hidden)</div></div>
<div class="ttc" id="aclassllvm_1_1JumpThreadingPass_html_a96191c096e61f77ea0a6771263bdb5e1"><div class="ttname"><a href="classllvm_1_1JumpThreadingPass.html#a96191c096e61f77ea0a6771263bdb5e1">llvm::JumpThreadingPass::processThreadableEdges</a></div><div class="ttdeci">bool processThreadableEdges(Value *Cond, BasicBlock *BB, jumpthreading::ConstantPreference Preference, Instruction *CxtI=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l01642">JumpThreading.cpp:1642</a></div></div>
<div class="ttc" id="aclassllvm_1_1CastInst_html_a31d2885660f654b31d8741726c3ea8d9"><div class="ttname"><a href="classllvm_1_1CastInst.html#a31d2885660f654b31d8741726c3ea8d9">llvm::CastInst::CreateBitOrPointerCast</a></div><div class="ttdeci">static CastInst * CreateBitOrPointerCast(Value *S, Type *Ty, const Twine &amp;Name=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Create a BitCast, a PtrToInt, or an IntToPTr cast instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l03509">Instructions.cpp:3509</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a65520b9c67759099e313d0f4e7b5ff9e"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00084">DenseMap.h:84</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a38c50aa8e3e9588f4f968c2e03a0cee0"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a38c50aa8e3e9588f4f968c2e03a0cee0">llvm::SmallVectorImpl::assign</a></div><div class="ttdeci">void assign(size_type NumElts, ValueParamT Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00708">SmallVector.h:708</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1SendMsg_html_a8594419a4ddfad2c9a79279c490e466d"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">llvm::AMDGPU::SendMsg::Op</a></div><div class="ttdeci">Op</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00357">SIDefines.h:357</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_a1258a1ff55557c27684010ebd7283712"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">llvm::PreservedAnalyses::all</a></div><div class="ttdeci">static PreservedAnalyses all()</div><div class="ttdoc">Construct a special preserved set that preserves all passes.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00158">PassManager.h:158</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_ab0ff669b12c20c07137705c38872ec63"><div class="ttname"><a href="classllvm_1_1PHINode.html#ab0ff669b12c20c07137705c38872ec63">llvm::PHINode::Create</a></div><div class="ttdeci">static PHINode * Create(Type *Ty, unsigned NumReservedValues, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Constructors - NumReservedValues is a hint for the number of incoming edges that this phi node will h...</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02750">Instructions.h:2750</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_afe7d477c6022fe7123b90e3b39c58e69"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#afe7d477c6022fe7123b90e3b39c58e69">llvm::ConstantInt::getBool</a></div><div class="ttdeci">static ConstantInt * getBool(LLVMContext &amp;Context, bool V)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00849">Constants.cpp:849</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5eeaf08e96168c2cac8960f87f0ef360"><div class="ttname"><a href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">llvm::pred_end</a></div><div class="ttdeci">Interval::pred_iterator pred_end(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00112">Interval.h:112</a></div></div>
<div class="ttc" id="anamespacellvm_html_abff5a423c1f45e23958dde8ee695c9a9"><div class="ttname"><a href="namespacellvm.html#abff5a423c1f45e23958dde8ee695c9a9">llvm::isGuaranteedToTransferExecutionToSuccessor</a></div><div class="ttdeci">bool isGuaranteedToTransferExecutionToSuccessor(const Instruction *I)</div><div class="ttdoc">Return true if this function can prove that the instruction I will always transfer execution to one o...</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l05612">ValueTracking.cpp:5612</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html_a90a202de107720c5c6af3a5bc275d8f5"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html#a90a202de107720c5c6af3a5bc275d8f5">llvm::AnalysisManager::getCachedResult</a></div><div class="ttdeci">PassT::Result * getCachedResult(IRUnitT &amp;IR) const</div><div class="ttdoc">Get the cached result of an analysis pass for a given IR unit.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00793">PassManager.h:793</a></div></div>
<div class="ttc" id="aCasting_8h_html"><div class="ttname"><a href="Casting_8h.html">Casting.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a4dd9b6c5bb93e01393c47dbe60f8b23f"><div class="ttname"><a href="classllvm_1_1Instruction.html#a4dd9b6c5bb93e01393c47dbe60f8b23f">llvm::Instruction::setAAMetadata</a></div><div class="ttdeci">void setAAMetadata(const AAMDNodes &amp;N)</div><div class="ttdoc">Sets the AA metadata on this instruction from the AAMDNodes structure.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l01513">Metadata.cpp:1513</a></div></div>
<div class="ttc" id="aFunction_8h_html"><div class="ttname"><a href="Function_8h.html">Function.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a4112c4d55a504c443acdc97bf2a3acdf"><div class="ttname"><a href="namespacellvm.html#a4112c4d55a504c443acdc97bf2a3acdf">llvm::FindAvailableLoadedValue</a></div><div class="ttdeci">Value * FindAvailableLoadedValue(LoadInst *Load, BasicBlock *ScanBB, BasicBlock::iterator &amp;ScanFrom, unsigned MaxInstsToScan=DefMaxInstsToScan, AAResults *AA=nullptr, bool *IsLoadCSE=nullptr, unsigned *NumScanedInst=nullptr)</div><div class="ttdoc">Scan backwards to see if we have the value of the given load available locally within a small number ...</div><div class="ttdef"><b>Definition:</b> <a href="Loads_8cpp_source.html#l00428">Loads.cpp:428</a></div></div>
<div class="ttc" id="aPassManager_8h_html"><div class="ttname"><a href="PassManager_8h.html">PassManager.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLibraryInfo_html"><div class="ttname"><a href="classllvm_1_1TargetLibraryInfo.html">llvm::TargetLibraryInfo</a></div><div class="ttdoc">Provides information about what library functions are available for the current target.</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00234">TargetLibraryInfo.h:234</a></div></div>
<div class="ttc" id="aPPCCTRLoopsVerify_8cpp_html_a593cc2f204f7b2edc16ee222c37c3196"><div class="ttname"><a href="PPCCTRLoopsVerify_8cpp.html#a593cc2f204f7b2edc16ee222c37c3196">verify</a></div><div class="ttdeci">ppc ctr loops verify</div><div class="ttdef"><b>Definition:</b> <a href="PPCCTRLoopsVerify_8cpp_source.html#l00076">PPCCTRLoopsVerify.cpp:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1ValueMap_html_a7629b8c5f6a6802ee0fdc5c290769692"><div class="ttname"><a href="classllvm_1_1ValueMap.html#a7629b8c5f6a6802ee0fdc5c290769692">llvm::ValueMap::find</a></div><div class="ttdeci">iterator find(const KeyT &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="ValueMap_8h_source.html#l00155">ValueMap.h:155</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00614">SmallVector.h:614</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantRange_html_aaca3a4d2b25c24b11179cbd01079b73c"><div class="ttname"><a href="classllvm_1_1ConstantRange.html#aaca3a4d2b25c24b11179cbd01079b73c">llvm::ConstantRange::contains</a></div><div class="ttdeci">bool contains(const APInt &amp;Val) const</div><div class="ttdoc">Return true if the specified value is in the set.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantRange_8cpp_source.html#l00446">ConstantRange.cpp:446</a></div></div>
<div class="ttc" id="aExpandLargeDivRem_8cpp_html_ae64f9cd0977a8b47570154312540d7d2"><div class="ttname"><a href="ExpandLargeDivRem_8cpp.html#ae64f9cd0977a8b47570154312540d7d2">runImpl</a></div><div class="ttdeci">static bool runImpl(Function &amp;F, const TargetLowering &amp;TLI)</div><div class="ttdef"><b>Definition:</b> <a href="ExpandLargeDivRem_8cpp_source.html#l00056">ExpandLargeDivRem.cpp:56</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallSet_html_a1679469af9bb8ccfbe98441fb8228c79"><div class="ttname"><a href="classllvm_1_1SmallSet.html#a1679469af9bb8ccfbe98441fb8228c79">llvm::SmallSet::insert</a></div><div class="ttdeci">std::pair&lt; const_iterator, bool &gt; insert(const T &amp;V)</div><div class="ttdoc">insert - Insert an element into the set if it isn't already there.</div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00177">SmallSet.h:177</a></div></div>
<div class="ttc" id="aJumpThreading_8cpp_html_a1e665d9a7a03a0df4056c204f22b0560"><div class="ttname"><a href="JumpThreading_8cpp.html#a1e665d9a7a03a0df4056c204f22b0560">INITIALIZE_PASS_BEGIN</a></div><div class="ttdeci">INITIALIZE_PASS_BEGIN(JumpThreading, &quot;jump-threading&quot;, &quot;Jump Threading&quot;, false, false) INITIALIZE_PASS_END(JumpThreading</div></div>
<div class="ttc" id="aclassllvm_1_1IndirectBrInst_html"><div class="ttname"><a href="classllvm_1_1IndirectBrInst.html">llvm::IndirectBrInst</a></div><div class="ttdoc">Indirect Branch Instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03679">Instructions.h:3679</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbability_html_aaee6034264d5d0782e5d1489360730d9"><div class="ttname"><a href="classllvm_1_1BranchProbability.html#aaee6034264d5d0782e5d1489360730d9">llvm::BranchProbability::getCompl</a></div><div class="ttdeci">BranchProbability getCompl() const</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbability_8h_source.html#l00069">BranchProbability.h:69</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantRange_html"><div class="ttname"><a href="classllvm_1_1ConstantRange.html">llvm::ConstantRange</a></div><div class="ttdoc">This class represents a range of values.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantRange_8h_source.html#l00047">ConstantRange.h:47</a></div></div>
<div class="ttc" id="aclassllvm_1_1IntrinsicInst_html"><div class="ttname"><a href="classllvm_1_1IntrinsicInst.html">llvm::IntrinsicInst</a></div><div class="ttdoc">A wrapper class for inspecting calls to intrinsic functions.</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00047">IntrinsicInst.h:47</a></div></div>
<div class="ttc" id="aAnalysis_2GuardUtils_8h_html"><div class="ttname"><a href="Analysis_2GuardUtils_8h.html">GuardUtils.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDBuilder_html"><div class="ttname"><a href="classllvm_1_1MDBuilder.html">llvm::MDBuilder</a></div><div class="ttdef"><b>Definition:</b> <a href="MDBuilder_8h_source.html#l00036">MDBuilder.h:36</a></div></div>
<div class="ttc" id="aclassllvm_1_1JumpThreadingPass_html_ac740f80b34c5e02feb9523b0436628a8"><div class="ttname"><a href="classllvm_1_1JumpThreadingPass.html#ac740f80b34c5e02feb9523b0436628a8">llvm::JumpThreadingPass::updateSSA</a></div><div class="ttdeci">void updateSSA(BasicBlock *BB, BasicBlock *NewBB, DenseMap&lt; Instruction *, Value * &gt; &amp;ValueMapping)</div><div class="ttdoc">Update the SSA form.</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l02040">JumpThreading.cpp:2040</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7e108932dc3da5294aed99a353aac9c4"><div class="ttname"><a href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">llvm::pred_begin</a></div><div class="ttdeci">Interval::pred_iterator pred_begin(Interval *I)</div><div class="ttdoc">pred_begin/pred_end - define methods so that Intervals may be used just like BasicBlocks can with the...</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00109">Interval.h:109</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeAnalysis_html"><div class="ttname"><a href="classllvm_1_1DominatorTreeAnalysis.html">llvm::DominatorTreeAnalysis</a></div><div class="ttdoc">Analysis pass which computes a DominatorTree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00279">Dominators.h:279</a></div></div>
<div class="ttc" id="aInstructions_8h_html"><div class="ttname"><a href="Instructions_8h.html">Instructions.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1JumpThreadingPass_html_abb82ea531f9afc009dad6b8e7ff8527c"><div class="ttname"><a href="classllvm_1_1JumpThreadingPass.html#abb82ea531f9afc009dad6b8e7ff8527c">llvm::JumpThreadingPass::computeValueKnownInPredecessorsImpl</a></div><div class="ttdeci">bool computeValueKnownInPredecessorsImpl(Value *V, BasicBlock *BB, jumpthreading::PredValueInfo &amp;Result, jumpthreading::ConstantPreference Preference, DenseSet&lt; Value * &gt; &amp;RecursionSet, Instruction *CxtI=nullptr)</div><div class="ttdoc">computeValueKnownInPredecessors - Given a basic block BB and a value V, see if we can infer that the ...</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l00660">JumpThreading.cpp:660</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbability_html_afff2bab6bb7f206bbacad5dd589a6186"><div class="ttname"><a href="classllvm_1_1BranchProbability.html#afff2bab6bb7f206bbacad5dd589a6186">llvm::BranchProbability::normalizeProbabilities</a></div><div class="ttdeci">static void normalizeProbabilities(ProbabilityIter Begin, ProbabilityIter End)</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbability_8h_source.html#l00205">BranchProbability.h:205</a></div></div>
<div class="ttc" id="anamespacellvm_html_af7f2eb961a542779e97c0b3ec7fa6623"><div class="ttname"><a href="namespacellvm.html#af7f2eb961a542779e97c0b3ec7fa6623">llvm::isImpliedCondition</a></div><div class="ttdeci">std::optional&lt; bool &gt; isImpliedCondition(const Value *LHS, const Value *RHS, const DataLayout &amp;DL, bool LHSIsTrue=true, unsigned Depth=0)</div><div class="ttdoc">Return true if RHS is known to be implied true by LHS.</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l06971">ValueTracking.cpp:6971</a></div></div>
<div class="ttc" id="aSmallVector_8h_html"><div class="ttname"><a href="SmallVector_8h.html">SmallVector.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyValueInfo_html_a381305cf61c847551a489431c43cec47"><div class="ttname"><a href="classllvm_1_1LazyValueInfo.html#a381305cf61c847551a489431c43cec47">llvm::LazyValueInfo::Tristate</a></div><div class="ttdeci">Tristate</div><div class="ttdoc">This is used to return true/false/dunno results.</div><div class="ttdef"><b>Definition:</b> <a href="LazyValueInfo_8h_source.html#l00060">LazyValueInfo.h:60</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ab4f3bf98b5054831b608852e33427814"><div class="ttname"><a href="classllvm_1_1Instruction.html#ab4f3bf98b5054831b608852e33427814">llvm::Instruction::getDebugLoc</a></div><div class="ttdeci">const DebugLoc &amp; getDebugLoc() const</div><div class="ttdoc">Return the debug location for this node as a DebugLoc.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00358">Instruction.h:358</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a159bf794249e0567baf2a2a714d5c679"><div class="ttname"><a href="classllvm_1_1Value.html#a159bf794249e0567baf2a2a714d5c679">llvm::Value::DoPHITranslation</a></div><div class="ttdeci">const Value * DoPHITranslation(const BasicBlock *CurBB, const BasicBlock *PredBB) const</div><div class="ttdoc">Translate PHI node to its predecessor from the given basic block.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00986">Value.cpp:986</a></div></div>
<div class="ttc" id="aDominators_8h_html"><div class="ttname"><a href="Dominators_8h.html">Dominators.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_ab2caa29167597390ab2fc3cf30d70389"><div class="ttname"><a href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">llvm::CallBase::getArgOperand</a></div><div class="ttdeci">Value * getArgOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01351">InstrTypes.h:1351</a></div></div>
<div class="ttc" id="aclassllvm_1_1FreezeInst_html"><div class="ttname"><a href="classllvm_1_1FreezeInst.html">llvm::FreezeInst</a></div><div class="ttdoc">This class represents a freeze function that returns random concrete value if an operand is either a ...</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l05440">Instructions.h:5440</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeBase_html_aad6e57a3b7c184bded15b616e790781fabbd47109890259c0127154db1af26c75"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#aad6e57a3b7c184bded15b616e790781fabbd47109890259c0127154db1af26c75">llvm::DominatorTreeBase::VerificationLevel::Full</a></div><div class="ttdeci">@ Full</div></div>
<div class="ttc" id="anamespacellvm_html_a46c2fc7f03e885dd9780d2a432f5183a"><div class="ttname"><a href="namespacellvm.html#a46c2fc7f03e885dd9780d2a432f5183a">llvm::createJumpThreadingPass</a></div><div class="ttdeci">FunctionPass * createJumpThreadingPass(int Threshold=-1)</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l00172">JumpThreading.cpp:172</a></div></div>
<div class="ttc" id="aclassllvm_1_1AAResultsWrapperPass_html"><div class="ttname"><a href="classllvm_1_1AAResultsWrapperPass.html">llvm::AAResultsWrapperPass</a></div><div class="ttdoc">A wrapper pass to provide the legacy pass manager access to a suitably prepared AAResults object.</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00933">AliasAnalysis.h:933</a></div></div>
<div class="ttc" id="aclassllvm_1_1SSAUpdater_html_a05c4f6837ee786e83246beeb01e3aa8d"><div class="ttname"><a href="classllvm_1_1SSAUpdater.html#a05c4f6837ee786e83246beeb01e3aa8d">llvm::SSAUpdater::RewriteUse</a></div><div class="ttdeci">void RewriteUse(Use &amp;U)</div><div class="ttdoc">Rewrite a use of the symbolic value.</div><div class="ttdef"><b>Definition:</b> <a href="SSAUpdater_8cpp_source.html#l00187">SSAUpdater.cpp:187</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a1a7f07aaef6a3bee130bf0e0f0536802"><div class="ttname"><a href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00090">Instruction.h:90</a></div></div>
<div class="ttc" id="aInstructionSimplify_8h_html"><div class="ttname"><a href="InstructionSimplify_8h.html">InstructionSimplify.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a0c8ffe664a36e30d49c84d0aded2fe08"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">llvm::SmallVectorImpl::pop_back_val</a></div><div class="ttdeci">T pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00677">SmallVector.h:677</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_aa7414ba9f658ff1287d22a4b8fe81bcb"><div class="ttname"><a href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">llvm::CmpInst::getPredicate</a></div><div class="ttdeci">Predicate getPredicate() const</div><div class="ttdoc">Return the predicate for this instruction.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00808">InstrTypes.h:808</a></div></div>
<div class="ttc" id="aclassllvm_1_1BlockAddress_html_af6e2f535824d8f9b4bf1b1a75e5ab57c"><div class="ttname"><a href="classllvm_1_1BlockAddress.html#af6e2f535824d8f9b4bf1b1a75e5ab57c">llvm::BlockAddress::get</a></div><div class="ttdeci">static BlockAddress * get(Function *F, BasicBlock *BB)</div><div class="ttdoc">Return a BlockAddress for the specified function and basic block.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01778">Constants.cpp:1778</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalsAAWrapperPass_html"><div class="ttname"><a href="classllvm_1_1GlobalsAAWrapperPass.html">llvm::GlobalsAAWrapperPass</a></div><div class="ttdoc">Legacy wrapper pass to provide the GlobalsAAResult object.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalsModRef_8h_source.html#l00142">GlobalsModRef.h:142</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_a8ce0c4746a1ec805e66409d20ae93922"><div class="ttname"><a href="classllvm_1_1PHINode.html#a8ce0c4746a1ec805e66409d20ae93922">llvm::PHINode::getIncomingBlock</a></div><div class="ttdeci">BasicBlock * getIncomingBlock(unsigned i) const</div><div class="ttdoc">Return incoming basic block number i.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02814">Instructions.h:2814</a></div></div>
<div class="ttc" id="aTargetTransformInfo_8h_html"><div class="ttname"><a href="TargetTransformInfo_8h.html">TargetTransformInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html"><div class="ttname"><a href="classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02708">Instructions.h:2708</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a8de021e28a3c04c9216ad8decf104f02"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">const Instruction * getTerminator() const LLVM_READONLY</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00127">BasicBlock.h:127</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_afe7af0c3ec2ef1f525173acd2ea4ba60"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#afe7af0c3ec2ef1f525173acd2ea4ba60">llvm::BasicBlock::removePredecessor</a></div><div class="ttdeci">void removePredecessor(BasicBlock *Pred, bool KeepOneInputPHIs=false)</div><div class="ttdoc">Update PHI nodes in this BasicBlock before removal of predecessor Pred.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00341">BasicBlock.cpp:341</a></div></div>
<div class="ttc" id="ablake3__impl_8h_html_a78823051d1dad34b9b3d8120112e674d"><div class="ttname"><a href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a></div><div class="ttdeci">static const uint32_t IV[8]</div><div class="ttdef"><b>Definition:</b> <a href="blake3__impl_8h_source.html#l00077">blake3_impl.h:77</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdoc">This class consists of common code factored out of the SmallVector class to reduce code duplication b...</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00042">APFloat.h:42</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6b0ac1fa4f05de76413c5e0ca6334035"><div class="ttname"><a href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">llvm::reverse</a></div><div class="ttdeci">auto reverse(ContainerTy &amp;&amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00484">STLExtras.h:484</a></div></div>
<div class="ttc" id="anamespacellvm_html_ae6d1c31d74bbaaa9e42bcbdc10a499f2"><div class="ttname"><a href="namespacellvm.html#ae6d1c31d74bbaaa9e42bcbdc10a499f2">llvm::pred_size</a></div><div class="ttdeci">unsigned pred_size(const MachineBasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="MachineSSAContext_8h_source.html#l00032">MachineSSAContext.h:32</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantRange_html_aa89e9cec92a0b38d2f47a077bf12cc98"><div class="ttname"><a href="classllvm_1_1ConstantRange.html#aa89e9cec92a0b38d2f47a077bf12cc98">llvm::ConstantRange::makeExactICmpRegion</a></div><div class="ttdeci">static ConstantRange makeExactICmpRegion(CmpInst::Predicate Pred, const APInt &amp;Other)</div><div class="ttdoc">Produce the exact range such that all values in the returned range satisfy the given predicate with a...</div><div class="ttdef"><b>Definition:</b> <a href="ConstantRange_8cpp_source.html#l00157">ConstantRange.cpp:157</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html_a6d883605206368bc536cc9ded97209b8"><div class="ttname"><a href="classllvm_1_1Module.html#a6d883605206368bc536cc9ded97209b8">llvm::Module::getDataLayout</a></div><div class="ttdeci">const DataLayout &amp; getDataLayout() const</div><div class="ttdoc">Get the data layout for the module's target platform.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8cpp_source.html#l00398">Module.cpp:398</a></div></div>
<div class="ttc" id="anamespacellvm_html_a458b4709ebedccb846a179f1e422265b"><div class="ttname"><a href="namespacellvm.html#a458b4709ebedccb846a179f1e422265b">llvm::DeleteDeadBlock</a></div><div class="ttdeci">void DeleteDeadBlock(BasicBlock *BB, DomTreeUpdater *DTU=nullptr, bool KeepOneInputPHIs=false)</div><div class="ttdoc">Delete the specified block, which must have no predecessors.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00095">BasicBlockUtils.cpp:95</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html">llvm::AnalysisManager</a></div><div class="ttdoc">A container for analyses that lazily runs them and caches their results.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00042">InstructionSimplify.h:42</a></div></div>
<div class="ttc" id="aJumpThreading_8cpp_html_a1841059116352ed3251569c2cdd20c0f"><div class="ttname"><a href="JumpThreading_8cpp.html#a1841059116352ed3251569c2cdd20c0f">ThreadAcrossLoopHeaders</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ThreadAcrossLoopHeaders(&quot;jump-threading-across-loop-headers&quot;, cl::desc(&quot;Allow JumpThreading to thread across loop headers, for testing&quot;), cl::init(false), cl::Hidden)</div></div>
<div class="ttc" id="aclassllvm_1_1FunctionPass_html"><div class="ttname"><a href="classllvm_1_1FunctionPass.html">llvm::FunctionPass</a></div><div class="ttdoc">FunctionPass class - This class is used to implement most global optimizations.</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00308">Pass.h:308</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallInst_html"><div class="ttname"><a href="classllvm_1_1CallInst.html">llvm::CallInst</a></div><div class="ttdoc">This class represents a function call, abstracting a target machine's calling convention.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01485">Instructions.h:1485</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a244bfbe5aae876e56cf5e62f0f27867a"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a244bfbe5aae876e56cf5e62f0f27867a">llvm::ConstantInt::isOne</a></div><div class="ttdeci">bool isOne() const</div><div class="ttdoc">This is just a convenience method to make client code smaller for a common case.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00199">Constants.h:199</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac19cbbc4935a23e1d44f65e1eaba6b1d"><div class="ttname"><a href="namespacellvm.html#ac19cbbc4935a23e1d44f65e1eaba6b1d">llvm::extractBranchWeights</a></div><div class="ttdeci">bool extractBranchWeights(const MDNode *ProfileData, SmallVectorImpl&lt; uint32_t &gt; &amp;Weights)</div><div class="ttdoc">Extract branch weights from MD_prof metadata.</div><div class="ttdef"><b>Definition:</b> <a href="ProfDataUtils_8cpp_source.html#l00122">ProfDataUtils.cpp:122</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html_ac072f8698be17d52f20bb63d59e6ce41"><div class="ttname"><a href="classllvm_1_1LoadInst.html#ac072f8698be17d52f20bb63d59e6ce41">llvm::LoadInst::isUnordered</a></div><div class="ttdeci">bool isUnordered() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00258">Instructions.h:258</a></div></div>
<div class="ttc" id="aPassBuilderBindings_8cpp_html_afd1501c49c84f3addfd108c2484f5674"><div class="ttname"><a href="PassBuilderBindings_8cpp.html#afd1501c49c84f3addfd108c2484f5674">PB</a></div><div class="ttdeci">PassBuilder PB(Machine, PassOpts-&gt;PTO, std::nullopt, &amp;PIC)</div></div>
<div class="ttc" id="anamespacellvm_html_aa16cddaa1497dc3248fc105467671e82"><div class="ttname"><a href="namespacellvm.html#aa16cddaa1497dc3248fc105467671e82">llvm::MergeBasicBlockIntoOnlyPred</a></div><div class="ttdeci">void MergeBasicBlockIntoOnlyPred(BasicBlock *BB, DomTreeUpdater *DTU=nullptr)</div><div class="ttdoc">BB is a block with one predecessor and its predecessor is known to have one successor (BB!...</div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Utils_2Local_8cpp_source.html#l00765">Local.cpp:765</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_ae5c60fd282ee894c87ea02c3f0fcb6d0"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">llvm::AnalysisUsage::addRequired</a></div><div class="ttdeci">AnalysisUsage &amp; addRequired()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00075">PassAnalysisSupport.h:75</a></div></div>
<div class="ttc" id="aLLVMContext_8h_html"><div class="ttname"><a href="LLVMContext_8h.html">LLVMContext.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SwitchInst_html"><div class="ttname"><a href="classllvm_1_1SwitchInst.html">llvm::SwitchInst</a></div><div class="ttdoc">Multiway switch.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03283">Instructions.h:3283</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ae855357b6c5e6e7ed1869272708a3a84"><div class="ttname"><a href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">llvm::Value::takeName</a></div><div class="ttdeci">void takeName(Value *V)</div><div class="ttdoc">Transfer the name from V to this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00381">Value.cpp:381</a></div></div>
<div class="ttc" id="anamespacellvm_html_ae2aea60aed775d05692317bf4855c291"><div class="ttname"><a href="namespacellvm.html#ae2aea60aed775d05692317bf4855c291">llvm::SplitBlockAndInsertIfThen</a></div><div class="ttdeci">Instruction * SplitBlockAndInsertIfThen(Value *Cond, Instruction *SplitBefore, bool Unreachable, MDNode *BranchWeights, DominatorTree *DT, LoopInfo *LI=nullptr, BasicBlock *ThenBlock=nullptr)</div><div class="ttdoc">Split the containing block at the specified instruction - everything before SplitBefore stays in the ...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l01542">BasicBlockUtils.cpp:1542</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Sched_html_ac1547cccaf660851fcd6863d1e60309e"><div class="ttname"><a href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309e">llvm::Sched::Preference</a></div><div class="ttdeci">Preference</div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l00098">TargetLowering.h:98</a></div></div>
<div class="ttc" id="aclassllvm_1_1SSAUpdater_html_af0d1a82b4e629e834c2ed53e5cbe22ef"><div class="ttname"><a href="classllvm_1_1SSAUpdater.html#af0d1a82b4e629e834c2ed53e5cbe22ef">llvm::SSAUpdater::AddAvailableValue</a></div><div class="ttdeci">void AddAvailableValue(BasicBlock *BB, Value *V)</div><div class="ttdoc">Indicate that a rewritten value is available in the specified block with the specified value.</div><div class="ttdef"><b>Definition:</b> <a href="SSAUpdater_8cpp_source.html#l00070">SSAUpdater.cpp:70</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_abe1de1520a21f77ac57cc210bf0fb0b4"><div class="ttname"><a href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00169">User.h:169</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00411">CommandLine.h:411</a></div></div>
<div class="ttc" id="anamespacellvm_html_aac8a71d79e03a0d6665ee1018fd7aef3"><div class="ttname"><a href="namespacellvm.html#aac8a71d79e03a0d6665ee1018fd7aef3">llvm::simplifyCmpInst</a></div><div class="ttdeci">Value * simplifyCmpInst(unsigned Predicate, Value *LHS, Value *RHS, const SimplifyQuery &amp;Q)</div><div class="ttdoc">Given operands for a CmpInst, fold the result or return null.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l05830">InstructionSimplify.cpp:5830</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html"><div class="ttname"><a href="classllvm_1_1BranchInst.html">llvm::BranchInst</a></div><div class="ttdoc">Conditional or Unconditional Branch instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03139">Instructions.h:3139</a></div></div>
<div class="ttc" id="anamespacellvm_1_1M68kBeads_html_a7eeab1fe8f39bf89dcd7929b816ebfcca27d0e059322508a76f918503800ef1bd"><div class="ttname"><a href="namespacellvm_1_1M68kBeads.html#a7eeab1fe8f39bf89dcd7929b816ebfcca27d0e059322508a76f918503800ef1bd">llvm::M68kBeads::Term</a></div><div class="ttdeci">@ Term</div><div class="ttdef"><b>Definition:</b> <a href="M68kBaseInfo_8h_source.html#l00090">M68kBaseInfo.h:90</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab6be6270337c6f7620007555247401ce"><div class="ttname"><a href="namespacellvm.html#ab6be6270337c6f7620007555247401ce">llvm::ConstantFoldInstruction</a></div><div class="ttdeci">Constant * ConstantFoldInstruction(Instruction *I, const DataLayout &amp;DL, const TargetLibraryInfo *TLI=nullptr)</div><div class="ttdoc">ConstantFoldInstruction - Try to constant fold the specified instruction.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFolding_8cpp_source.html#l01155">ConstantFolding.cpp:1155</a></div></div>
<div class="ttc" id="araw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SSAUpdater_html"><div class="ttname"><a href="classllvm_1_1SSAUpdater.html">llvm::SSAUpdater</a></div><div class="ttdoc">Helper class for SSA formation on a set of values defined in multiple blocks.</div><div class="ttdef"><b>Definition:</b> <a href="SSAUpdater_8h_source.html#l00039">SSAUpdater.h:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1JumpThreadingPass_html_a17ec6c1a629aa071b3b65b74c5cb2e7d"><div class="ttname"><a href="classllvm_1_1JumpThreadingPass.html#a17ec6c1a629aa071b3b65b74c5cb2e7d">llvm::JumpThreadingPass::cloneInstructions</a></div><div class="ttdeci">DenseMap&lt; Instruction *, Value * &gt; cloneInstructions(BasicBlock::iterator BI, BasicBlock::iterator BE, BasicBlock *NewBB, BasicBlock *PredBB)</div><div class="ttdoc">Clone instructions in range [BI, BE) to NewBB.</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l02100">JumpThreading.cpp:2100</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a499ea32ca1b8d16cedfe01d1e5b08f29"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a499ea32ca1b8d16cedfe01d1e5b08f29">llvm::SmallVectorImpl::reserve</a></div><div class="ttdeci">void reserve(size_type N)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00667">SmallVector.h:667</a></div></div>
<div class="ttc" id="aBasicBlockUtils_8h_html"><div class="ttname"><a href="BasicBlockUtils_8h.html">BasicBlockUtils.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1JumpThreadingPass_html_a48dd43ef05b66261790497edbdac92d9"><div class="ttname"><a href="classllvm_1_1JumpThreadingPass.html#a48dd43ef05b66261790497edbdac92d9">llvm::JumpThreadingPass::run</a></div><div class="ttdeci">PreservedAnalyses run(Function &amp;F, FunctionAnalysisManager &amp;AM)</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l00338">JumpThreading.cpp:338</a></div></div>
<div class="ttc" id="anamespacellvm_1_1tgtok_html_abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7"><div class="ttname"><a href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">llvm::tgtok::TrueVal</a></div><div class="ttdeci">@ TrueVal</div><div class="ttdef"><b>Definition:</b> <a href="TGLexer_8h_source.html#l00062">TGLexer.h:62</a></div></div>
<div class="ttc" id="aValue_8h_html"><div class="ttname"><a href="Value_8h.html">Value.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a753e1338645ec04d045211b8a46d968d"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a753e1338645ec04d045211b8a46d968d">llvm::PatternMatch::m_Cmp</a></div><div class="ttdeci">class_match&lt; CmpInst &gt; m_Cmp()</div><div class="ttdoc">Matches any compare instruction and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00089">PatternMatch.h:89</a></div></div>
<div class="ttc" id="aInitializePasses_8h_html"><div class="ttname"><a href="InitializePasses_8h.html">InitializePasses.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_ac9c170fde1808bbd4436a0dbd6d5e755"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ac9c170fde1808bbd4436a0dbd6d5e755">llvm::BasicBlock::isEHPad</a></div><div class="ttdeci">bool isEHPad() const</div><div class="ttdoc">Return true if this basic block is an exception handling block.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00512">BasicBlock.h:512</a></div></div>
<div class="ttc" id="aclassllvm_1_1JumpThreadingPass_html_abbc2deb942b00a9d0d19a6613e374168"><div class="ttname"><a href="classllvm_1_1JumpThreadingPass.html#abbc2deb942b00a9d0d19a6613e374168">llvm::JumpThreadingPass::processBlock</a></div><div class="ttdeci">bool processBlock(BasicBlock *BB)</div><div class="ttdoc">processBlock - If there are any predecessors whose control can be threaded through to a successor,...</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l01054">JumpThreading.cpp:1054</a></div></div>
<div class="ttc" id="anamespacellvm_html_abe76d72cda6b2b4562c72accb510040b"><div class="ttname"><a href="namespacellvm.html#abe76d72cda6b2b4562c72accb510040b">llvm::isSafeToSpeculativelyExecute</a></div><div class="ttdeci">bool isSafeToSpeculativelyExecute(const Instruction *I, const Instruction *CtxI=nullptr, AssumptionCache *AC=nullptr, const DominatorTree *DT=nullptr, const TargetLibraryInfo *TLI=nullptr)</div><div class="ttdoc">Return true if the instruction does not have any effects besides calculating the result and does not ...</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l04799">ValueTracking.cpp:4799</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MCID_html_ab357441fcd1ea1f9b0d27c12700f6023af121d798d2c14b32e81d537a1f0cff8d"><div class="ttname"><a href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023af121d798d2c14b32e81d537a1f0cff8d">llvm::MCID::Terminator</a></div><div class="ttdeci">@ Terminator</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00158">MCInstrDesc.h:158</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00074">Value.h:74</a></div></div>
<div class="ttc" id="aDebug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLibraryAnalysis_html"><div class="ttname"><a href="classllvm_1_1TargetLibraryAnalysis.html">llvm::TargetLibraryAnalysis</a></div><div class="ttdoc">Analysis pass providing the TargetLibraryInfo.</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00540">TargetLibraryInfo.h:540</a></div></div>
<div class="ttc" id="aclassllvm_1_1JumpThreadingPass_html_a66f4dcea5cb859a1234e2b71901a1031"><div class="ttname"><a href="classllvm_1_1JumpThreadingPass.html#a66f4dcea5cb859a1234e2b71901a1031">llvm::JumpThreadingPass::processBranchOnPHI</a></div><div class="ttdeci">bool processBranchOnPHI(PHINode *PN)</div><div class="ttdoc">processBranchOnPHI - We have an otherwise unthreadable conditional branch on a PHI node (or freeze PH...</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l01822">JumpThreading.cpp:1822</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_a7e4be8b16fbd68c9045a388904044e01"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a7e4be8b16fbd68c9045a388904044e01">llvm::BranchInst::isConditional</a></div><div class="ttdeci">bool isConditional() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03218">Instructions.h:3218</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a213e6c0ca6e838157373b9a6018c0769"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a213e6c0ca6e838157373b9a6018c0769">llvm::PatternMatch::m_LogicalAnd</a></div><div class="ttdeci">LogicalOp_match&lt; LHS, RHS, Instruction::And &gt; m_LogicalAnd(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches L &amp;&amp; R either in the form of L &amp; R or L ? R : false.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02556">PatternMatch.h:2556</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_ad97f2e60cf22f15e0cf617af52309031"><div class="ttname"><a href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">llvm::BranchInst::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03232">Instructions.h:3232</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemoryLocation_html"><div class="ttname"><a href="classllvm_1_1MemoryLocation.html">llvm::MemoryLocation</a></div><div class="ttdoc">Representation for a specific memory location.</div><div class="ttdef"><b>Definition:</b> <a href="MemoryLocation_8h_source.html#l00211">MemoryLocation.h:211</a></div></div>
<div class="ttc" id="aclassllvm_1_1JumpThreadingPass_html_a3cd21bd06a36557dd863c554b7b10205"><div class="ttname"><a href="classllvm_1_1JumpThreadingPass.html#a3cd21bd06a36557dd863c554b7b10205">llvm::JumpThreadingPass::JumpThreadingPass</a></div><div class="ttdeci">JumpThreadingPass(int T=-1)</div><div class="ttdef"><b>Definition:</b> <a href="JumpThreading_8cpp_source.html#l00176">JumpThreading.cpp:176</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeBase_html_a71c91cbbfc1c0ecf9a69e10ccf739bd7"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#a71c91cbbfc1c0ecf9a69e10ccf739bd7">llvm::DominatorTreeBase&lt; BasicBlock, false &gt;::Delete</a></div><div class="ttdeci">static constexpr UpdateKind Delete</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00259">GenericDomTree.h:259</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a42a7d51fdde6913db72d098356c2c019"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a42a7d51fdde6913db72d098356c2c019">llvm::BasicBlock::const_iterator</a></div><div class="ttdeci">InstListType::const_iterator const_iterator</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00088">BasicBlock.h:88</a></div></div>
<div class="ttc" id="anamespacellvm_html_a92ac27b929f0de70e1336a7ab5248861"><div class="ttname"><a href="namespacellvm.html#a92ac27b929f0de70e1336a7ab5248861">llvm::DefMaxInstsToScan</a></div><div class="ttdeci">cl::opt&lt; unsigned &gt; DefMaxInstsToScan</div><div class="ttdoc">The default number of maximum instructions to scan in the block, used by FindAvailableLoadedValue().</div></div>
<div class="ttc" id="aclassllvm_1_1Use_html"><div class="ttname"><a href="classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdoc">A Use represents the edge between a Value definition and its users.</div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00043">Use.h:43</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a396fcfee6914c76974b73c3d203da6a5"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">llvm::SmallVectorImpl::emplace_back</a></div><div class="ttdeci">reference emplace_back(ArgTypes &amp;&amp;... Args)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00941">SmallVector.h:941</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a6bc6fb89fe2e91c25559a8631f56e27e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">llvm::SmallPtrSetImpl::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(PtrType Ptr)</div><div class="ttdoc">Inserts Ptr if and only if there is no element in the container equal to Ptr.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00365">SmallPtrSet.h:365</a></div></div>
<div class="ttc" id="aclassllvm_1_1PoisonValue_html_a1bf08613fb664a2e377a9a72c59a6b66"><div class="ttname"><a href="classllvm_1_1PoisonValue.html#a1bf08613fb664a2e377a9a72c59a6b66">llvm::PoisonValue::get</a></div><div class="ttdeci">static PoisonValue * get(Type *T)</div><div class="ttdoc">Static factory methods - Return an 'poison' object of the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01759">Constants.cpp:1759</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:31:20 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Target/X86/X86InterleavedAccess.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_794e483eb1cc7921d35fd149d9cc325b.html">Target</a></li><li class="navelem"><a class="el" href="dir_558b7c0c66e2ff4834e628dd4b3edd32.html">X86</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">X86InterleavedAccess.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="X86InterleavedAccess_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- X86InterleavedAccess.cpp -------------------------------------------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span><span class="comment"></span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">/// \file</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">/// This file contains the X86 implementation of the interleaved accesses</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">/// optimization generating X86-specific instructions/intrinsics for</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">/// interleaved access groups.</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"></span><span class="comment">//</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160; </div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="X86ISelLowering_8h.html">X86ISelLowering.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="X86Subtarget_8h.html">X86Subtarget.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ArrayRef_8h.html">llvm/ADT/ArrayRef.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallVector_8h.html">llvm/ADT/SmallVector.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="VectorUtils_8h.html">llvm/Analysis/VectorUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constants_8h.html">llvm/IR/Constants.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DataLayout_8h.html">llvm/IR/DataLayout.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DerivedTypes_8h.html">llvm/IR/DerivedTypes.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IRBuilder_8h.html">llvm/IR/IRBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2Instruction_8h.html">llvm/IR/Instruction.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Instructions_8h.html">llvm/IR/Instructions.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Module_8h.html">llvm/IR/Module.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Type_8h.html">llvm/IR/Type.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Value_8h.html">llvm/IR/Value.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Casting_8h.html">llvm/Support/Casting.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineValueType_8h.html">llvm/Support/MachineValueType.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &lt;cmath&gt;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &lt;cstdint&gt;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160; </div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160; </div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">/// This class holds necessary information to represent an interleaved</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">/// access group and supports utilities to lower the group into</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">/// X86-specific instructions/intrinsics.</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">///  E.g. A group of interleaving access loads (Factor = 2; accessing every</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">///       other element)</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">///        %wide.vec = load &lt;8 x i32&gt;, &lt;8 x i32&gt;* %ptr</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">///        %v0 = shuffle &lt;8 x i32&gt; %wide.vec, &lt;8 x i32&gt; poison, &lt;0, 2, 4, 6&gt;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">///        %v1 = shuffle &lt;8 x i32&gt; %wide.vec, &lt;8 x i32&gt; poison, &lt;1, 3, 5, 7&gt;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment"></span><span class="keyword">class </span>X86InterleavedAccessGroup {<span class="comment"></span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">  /// Reference to the wide-load instruction of an interleaved access</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">  /// group.</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<span class="keyword">const</span> Inst;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">  /// Reference to the shuffle(s), consumer(s) of the (load) &#39;Inst&#39;.</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;ShuffleVectorInst *&gt;</a> Shuffles;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">  /// Reference to the starting index of each user-shuffle.</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> Indices;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">  /// Reference to the interleaving stride in terms of elements.</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment"></span>  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> Factor;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">  /// Reference to the underlying target.</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment"></span>  <span class="keyword">const</span> <a class="code" href="classllvm_1_1X86Subtarget.html">X86Subtarget</a> &amp;Subtarget;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160; </div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160; </div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">  /// Breaks down a vector \p &#39;Inst&#39; of N elements into \p NumSubVectors</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">  /// sub vectors of type \p T. Returns the sub-vectors in \p DecomposedVectors.</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="ConstraintElimination_8cpp.html#aaa871fff08f6d27fa94414400075a1ad">decompose</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst, <span class="keywordtype">unsigned</span> NumSubVectors, <a class="code" href="classllvm_1_1FixedVectorType.html">FixedVectorType</a> *<a class="code" href="classT.html">T</a>,</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                 <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Instruction *&gt;</a> &amp;DecomposedVectors);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">  /// Performs matrix transposition on a 4x4 matrix \p InputVectors and</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">  /// returns the transposed-vectors in \p TransposedVectors.</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">  /// E.g.</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">  /// InputVectors:</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">  ///   In-V0 = p1, p2, p3, p4</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">  ///   In-V1 = q1, q2, q3, q4</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">  ///   In-V2 = r1, r2, r3, r4</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">  ///   In-V3 = s1, s2, s3, s4</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">  /// OutputVectors:</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">  ///   Out-V0 = p1, q1, r1, s1</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">  ///   Out-V1 = p2, q2, r2, s2</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">  ///   Out-V2 = p3, q3, r3, s3</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">  ///   Out-V3 = P4, q4, r4, s4</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> transpose_4x4(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Instruction *&gt;</a> InputVectors,</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                     <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Value *&gt;</a> &amp;TransposedMatrix);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="keywordtype">void</span> interleave8bitStride4(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Instruction *&gt;</a> InputVectors,</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                             <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Value *&gt;</a> &amp;TransposedMatrix,</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                             <span class="keywordtype">unsigned</span> NumSubVecElems);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <span class="keywordtype">void</span> interleave8bitStride4VF8(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Instruction *&gt;</a> InputVectors,</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                                <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Value *&gt;</a> &amp;TransposedMatrix);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="keywordtype">void</span> interleave8bitStride3(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Instruction *&gt;</a> InputVectors,</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                             <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Value *&gt;</a> &amp;TransposedMatrix,</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                             <span class="keywordtype">unsigned</span> NumSubVecElems);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="keywordtype">void</span> deinterleave8bitStride3(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Instruction *&gt;</a> InputVectors,</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                               <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Value *&gt;</a> &amp;TransposedMatrix,</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                               <span class="keywordtype">unsigned</span> NumSubVecElems);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160; </div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="keyword">public</span>:<span class="comment"></span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">  /// In order to form an interleaved access group X86InterleavedAccessGroup</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">  /// requires a wide-load instruction \p &#39;I&#39;, a group of interleaved-vectors</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">  /// \p Shuffs, reference to the first indices of each interleaved-vector</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">  /// \p &#39;Ind&#39; and the interleaving stride factor \p F. In order to generate</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">  /// X86-specific instructions/intrinsics it also requires the underlying</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">  /// target information \p STarget.</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment"></span>  <span class="keyword">explicit</span> X86InterleavedAccessGroup(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                                     <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;ShuffleVectorInst *&gt;</a> Shuffs,</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                                     <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> Ind, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>,</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                                     <span class="keyword">const</span> <a class="code" href="classllvm_1_1X86Subtarget.html">X86Subtarget</a> &amp;STarget,</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                                     <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      : Inst(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>), Shuffles(Shuffs), Indices(Ind), Factor(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>), Subtarget(STarget),</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>(Inst-&gt;getModule()-&gt;getDataLayout()), <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) {}</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">  /// Returns true if this interleaved access group can be lowered into</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">  /// x86-specific instructions/intrinsics, false otherwise.</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> isSupported() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">  /// Lowers this interleaved access group into X86-specific</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">  /// instructions/intrinsics.</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> lowerIntoOptimizedSequence();</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;};</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;} <span class="comment">// end anonymous namespace</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="keywordtype">bool</span> X86InterleavedAccessGroup::isSupported()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <a class="code" href="classllvm_1_1VectorType.html">VectorType</a> *ShuffleVecTy = Shuffles[0]-&gt;getType();</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *ShuffleEltTy = ShuffleVecTy-&gt;<a class="code" href="classllvm_1_1VectorType.html#a12e23c3d619db313388fe11dc76eb23f">getElementType</a>();</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="keywordtype">unsigned</span> ShuffleElemSize = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeSizeInBits(ShuffleEltTy);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="keywordtype">unsigned</span> WideInstSize;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <span class="comment">// Currently, lowering is supported for the following vectors:</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <span class="comment">// Stride 4:</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="comment">//    1. Store and load of 4-element vectors of 64 bits on AVX.</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="comment">//    2. Store of 16/32-element vectors of 8 bits on AVX.</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="comment">// Stride 3:</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <span class="comment">//    1. Load of 16/32-element vectors of 8 bits on AVX.</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="keywordflow">if</span> (!Subtarget.hasAVX() || (Factor != 4 &amp;&amp; Factor != 3))</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160; </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="keywordflow">if</span> (isa&lt;LoadInst&gt;(Inst)) {</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    WideInstSize = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeSizeInBits(Inst-&gt;getType());</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">if</span> (cast&lt;LoadInst&gt;(Inst)-&gt;getPointerAddressSpace())</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    WideInstSize = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeSizeInBits(Shuffles[0]-&gt;<a class="code" href="M68kELFObjectWriter_8cpp.html#ae4a8bc3879d2282eefd72b16b12c2a37">getType</a>());</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="comment">// We support shuffle represents stride 4 for byte type with size of</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="comment">// WideInstSize.</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <span class="keywordflow">if</span> (ShuffleElemSize == 64 &amp;&amp; WideInstSize == 1024 &amp;&amp; Factor == 4)</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160; </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="keywordflow">if</span> (ShuffleElemSize == 8 &amp;&amp; isa&lt;StoreInst&gt;(Inst) &amp;&amp; Factor == 4 &amp;&amp;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      (WideInstSize == 256 || WideInstSize == 512 || WideInstSize == 1024 ||</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;       WideInstSize == 2048))</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160; </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="keywordflow">if</span> (ShuffleElemSize == 8 &amp;&amp; Factor == 3 &amp;&amp;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      (WideInstSize == 384 || WideInstSize == 768 || WideInstSize == 1536))</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;}</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160; </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="keywordtype">void</span> <a class="code" href="ConstraintElimination_8cpp.html#aaa871fff08f6d27fa94414400075a1ad">X86InterleavedAccessGroup::decompose</a>(</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *VecInst, <span class="keywordtype">unsigned</span> NumSubVectors, <a class="code" href="classllvm_1_1FixedVectorType.html">FixedVectorType</a> *SubVecTy,</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Instruction *&gt;</a> &amp;DecomposedVectors) {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((isa&lt;LoadInst&gt;(VecInst) || isa&lt;ShuffleVectorInst&gt;(VecInst)) &amp;&amp;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;         <span class="stringliteral">&quot;Expected Load or Shuffle&quot;</span>);</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160; </div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *VecWidth = VecInst-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  (void)VecWidth;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(VecWidth-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>() &amp;&amp;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;         <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeSizeInBits(VecWidth) &gt;=</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;             <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeSizeInBits(SubVecTy) * NumSubVectors &amp;&amp;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;         <span class="stringliteral">&quot;Invalid Inst-size!!!&quot;</span>);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160; </div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *SVI = dyn_cast&lt;ShuffleVectorInst&gt;(VecInst)) {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = SVI-&gt;getOperand(0);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Op1 = SVI-&gt;getOperand(1);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="comment">// Generate N(= NumSubVectors) shuffles of T(= SubVecTy) type.</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumSubVectors; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      DecomposedVectors.push_back(</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;          cast&lt;ShuffleVectorInst&gt;(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShuffleVector(</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;              Op0, Op1,</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;              <a class="code" href="namespacellvm.html#af00a6f39da9d94ec387a366ade60aea5">createSequentialMask</a>(Indices[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], SubVecTy-&gt;<a class="code" href="classllvm_1_1FixedVectorType.html#a1893caf878859959ba6a3d5442ef1439">getNumElements</a>(),</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                                   0))));</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  }</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160; </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="comment">// Decompose the load instruction.</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI = cast&lt;LoadInst&gt;(VecInst);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *VecBaseTy, *VecBasePtrTy;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *VecBasePtr;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> NumLoads = NumSubVectors;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <span class="comment">// In the case of stride 3 with a vector of 32 elements load the information</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="comment">// in the following way:</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <span class="comment">// [0,1...,VF/2-1,VF/2+VF,VF/2+VF+1,...,2VF-1]</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <span class="keywordtype">unsigned</span> VecLength = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeSizeInBits(VecWidth);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="keywordflow">if</span> (VecLength == 768 || VecLength == 1536) {</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    VecBaseTy = <a class="code" href="classllvm_1_1FixedVectorType.html#af9a870d5df50fe0133a410b7c9114c80">FixedVectorType::get</a>(<a class="code" href="classllvm_1_1Type.html#a7ba5de75f50bb4a4ba920698edf39b28">Type::getInt8Ty</a>(LI-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>()), 16);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    VecBasePtrTy = VecBaseTy-&gt;<a class="code" href="classllvm_1_1Type.html#adc01a7457de85fc52a3bb860d7e1c6a4">getPointerTo</a>(LI-&gt;<a class="code" href="classllvm_1_1LoadInst.html#a161c2db145827f4e181e7fe662b53a81">getPointerAddressSpace</a>());</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    VecBasePtr = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(LI-&gt;<a class="code" href="classllvm_1_1LoadInst.html#ad47eefa1d094f60494b6b927061ca001">getPointerOperand</a>(), VecBasePtrTy);</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    NumLoads = NumSubVectors * (VecLength / 384);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    VecBaseTy = SubVecTy;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    VecBasePtrTy = VecBaseTy-&gt;<a class="code" href="classllvm_1_1Type.html#adc01a7457de85fc52a3bb860d7e1c6a4">getPointerTo</a>(LI-&gt;<a class="code" href="classllvm_1_1LoadInst.html#a161c2db145827f4e181e7fe662b53a81">getPointerAddressSpace</a>());</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    VecBasePtr = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(LI-&gt;<a class="code" href="classllvm_1_1LoadInst.html#ad47eefa1d094f60494b6b927061ca001">getPointerOperand</a>(), VecBasePtrTy);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  }</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="comment">// Generate N loads of T type.</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(VecBaseTy-&gt;<a class="code" href="classllvm_1_1Type.html#a833daf718a49c5cd637d8c9ddeaebe07">getPrimitiveSizeInBits</a>().<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a1618ca92d9fa0b2b577698fb006b84cc">isKnownMultipleOf</a>(8) &amp;&amp;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;         <span class="stringliteral">&quot;VecBaseTy&#39;s size must be a multiple of 8&quot;</span>);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <span class="keyword">const</span> <a class="code" href="structllvm_1_1Align.html">Align</a> FirstAlignment = LI-&gt;<a class="code" href="classllvm_1_1LoadInst.html#af51c113a039c82f6870df5dc9666b5e3">getAlign</a>();</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <span class="keyword">const</span> <a class="code" href="structllvm_1_1Align.html">Align</a> SubsequentAlignment = <a class="code" href="namespacellvm.html#acd6aa057934751aaac54e5c18bcc18eb">commonAlignment</a>(</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      FirstAlignment, VecBaseTy-&gt;<a class="code" href="classllvm_1_1Type.html#a833daf718a49c5cd637d8c9ddeaebe07">getPrimitiveSizeInBits</a>().<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a33880aaca0ad05e5f1557f079305bde5">getFixedValue</a>() / 8);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <a class="code" href="structllvm_1_1Align.html">Align</a> Alignment = FirstAlignment;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumLoads; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="comment">// TODO: Support inbounds GEP.</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewBasePtr =</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateGEP(VecBaseTy, VecBasePtr, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt32(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewLoad =</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlignedLoad(VecBaseTy, NewBasePtr, Alignment);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    DecomposedVectors.push_back(NewLoad);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    Alignment = SubsequentAlignment;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  }</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;}</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">// Changing the scale of the vector type by reducing the number of elements and</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment">// doubling the scalar size.</span></div>
<div class="line"><a name="l00233"></a><span class="lineno"><a class="line" href="X86InterleavedAccess_8cpp.html#a5bc9bd66618581850aca0d4ac86e6281">  233</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1MVT.html">MVT</a> <a class="code" href="X86InterleavedAccess_8cpp.html#a5bc9bd66618581850aca0d4ac86e6281">scaleVectorType</a>(<a class="code" href="classllvm_1_1MVT.html">MVT</a> VT) {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="keywordtype">unsigned</span> ScalarSize = VT.<a class="code" href="classllvm_1_1MVT.html#ad3ff408f213bef998f49952c6c3711fb">getVectorElementType</a>().<a class="code" href="classllvm_1_1MVT.html#a2e101ce5736aa0643639fd3adae18088">getScalarSizeInBits</a>() * 2;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1MVT.html#abf8d0055af4879a302268d3f834b2be5">MVT::getVectorVT</a>(<a class="code" href="classllvm_1_1MVT.html#aded931e298cfa08b5038ca2b63c06bb8">MVT::getIntegerVT</a>(ScalarSize),</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                          VT.<a class="code" href="classllvm_1_1MVT.html#a3a371e99982e3168caf644d82298fcac">getVectorNumElements</a>() / 2);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;}</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno"><a class="line" href="X86InterleavedAccess_8cpp.html#a76c9562101f54d25482f88ae29ed6131">  239</a></span>&#160;<span class="keyword">static</span> constexpr <span class="keywordtype">int</span> <a class="code" href="X86InterleavedAccess_8cpp.html#a76c9562101f54d25482f88ae29ed6131">Concat</a>[] = {</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    0,  1,  2,  3,  4,  5,  6,  7,  8,  9,  10, 11, 12, 13, 14, 15,</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31,</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47,</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63};</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160; </div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment">// genShuffleBland - Creates shuffle according to two vectors.This function is</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment">// only works on instructions with lane inside 256 registers. According to</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment">// the mask &#39;Mask&#39; creates a new Mask &#39;Out&#39; by the offset of the mask. The</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">// offset amount depends on the two integer, &#39;LowOffset&#39; and &#39;HighOffset&#39;.</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">// Where the &#39;LowOffset&#39; refers to the first vector and the highOffset refers to</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment">// the second vector.</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment">// |a0....a5,b0....b4,c0....c4|a16..a21,b16..b20,c16..c20|</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment">// |c5...c10,a5....a9,b5....b9|c21..c26,a22..a26,b21..b25|</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment">// |b10..b15,c11..c15,a10..a15|b26..b31,c27..c31,a27..a31|</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment">// For the sequence to work as a mirror to the load.</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment">// We must consider the elements order as above.</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment">// In this function we are combining two types of shuffles.</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">// The first one is vpshufed and the second is a type of &quot;blend&quot; shuffle.</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">// By computing the shuffle on a sequence of 16 elements(one lane) and add the</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">// correct offset. We are creating a vpsuffed + blend sequence between two</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment">// shuffles.</span></div>
<div class="line"><a name="l00261"></a><span class="lineno"><a class="line" href="X86InterleavedAccess_8cpp.html#a49570d8463bc060cddd7b65335685002">  261</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="X86InterleavedAccess_8cpp.html#a49570d8463bc060cddd7b65335685002">genShuffleBland</a>(<a class="code" href="classllvm_1_1MVT.html">MVT</a> VT, <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;int&gt;</a> <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>,</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                            <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;int&gt;</a> &amp;Out, <span class="keywordtype">int</span> LowOffset,</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                            <span class="keywordtype">int</span> HighOffset) {</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(VT.<a class="code" href="classllvm_1_1MVT.html#a7be7c6dd92efc0d6f866d4a3b433eed0">getSizeInBits</a>() &gt;= 256 &amp;&amp;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;         <span class="stringliteral">&quot;This function doesn&#39;t accept width smaller then 256&quot;</span>);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="keywordtype">unsigned</span> NumOfElm = VT.<a class="code" href="classllvm_1_1MVT.html#a3a371e99982e3168caf644d82298fcac">getVectorNumElements</a>();</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>)</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    Out.push_back(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> + LowOffset);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>)</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    Out.push_back(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> + HighOffset + NumOfElm);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;}</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160; </div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment">// reorderSubVector returns the data to is the original state. And de-facto is</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment">// the opposite of  the function concatSubVector.</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">// For VecElems = 16</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">// Invec[0] -  |0|      TransposedMatrix[0] - |0|</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment">// Invec[1] -  |1|  =&gt;  TransposedMatrix[1] - |1|</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment">// Invec[2] -  |2|      TransposedMatrix[2] - |2|</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160; </div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">// For VecElems = 32</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">// Invec[0] -  |0|3|      TransposedMatrix[0] - |0|1|</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">// Invec[1] -  |1|4|  =&gt;  TransposedMatrix[1] - |2|3|</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment">// Invec[2] -  |2|5|      TransposedMatrix[2] - |4|5|</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160; </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment">// For VecElems = 64</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">// Invec[0] -  |0|3|6|9 |     TransposedMatrix[0] - |0|1|2 |3 |</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment">// Invec[1] -  |1|4|7|10| =&gt;  TransposedMatrix[1] - |4|5|6 |7 |</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment">// Invec[2] -  |2|5|8|11|     TransposedMatrix[2] - |8|9|10|11|</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160; </div>
<div class="line"><a name="l00291"></a><span class="lineno"><a class="line" href="X86InterleavedAccess_8cpp.html#aeaf0abeac6c9f6e4698dd90c080611fa">  291</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="X86InterleavedAccess_8cpp.html#aeaf0abeac6c9f6e4698dd90c080611fa">reorderSubVector</a>(<a class="code" href="classllvm_1_1MVT.html">MVT</a> VT, <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Value *&gt;</a> &amp;TransposedMatrix,</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                             <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Value *&gt;</a> Vec, <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;int&gt;</a> VPShuf,</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                             <span class="keywordtype">unsigned</span> VecElems, <span class="keywordtype">unsigned</span> Stride,</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                             <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160; </div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <span class="keywordflow">if</span> (VecElems == 16) {</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; Stride; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      TransposedMatrix[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShuffleVector(Vec[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], VPShuf);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  }</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160; </div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;int, 32&gt;</a> OptimizeShuf;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Temp[8];</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160; </div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; (VecElems / 16) * Stride; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> += 2) {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <a class="code" href="X86InterleavedAccess_8cpp.html#a49570d8463bc060cddd7b65335685002">genShuffleBland</a>(VT, VPShuf, OptimizeShuf, (<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> / Stride) * 16,</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                    (<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1) / Stride * 16);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    Temp[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> / 2] = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShuffleVector(</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        Vec[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> % Stride], Vec[(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1) % Stride], OptimizeShuf);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    OptimizeShuf.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  }</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160; </div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="keywordflow">if</span> (VecElems == 32) {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <a class="code" href="lib_2Target_2WebAssembly_2README_8txt.html#a79ea041233b5866026c3071dfc464ec0">std::copy</a>(Temp, Temp + Stride, TransposedMatrix.begin());</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; Stride; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      TransposedMatrix[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] =</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;          <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShuffleVector(Temp[2 * <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], Temp[2 * <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1], <a class="code" href="X86InterleavedAccess_8cpp.html#a76c9562101f54d25482f88ae29ed6131">Concat</a>);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;}</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160; </div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="keywordtype">void</span> X86InterleavedAccessGroup::interleave8bitStride4VF8(</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Instruction *&gt;</a> Matrix,</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Value *&gt;</a> &amp;TransposedMatrix) {</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <span class="comment">// Assuming we start from the following vectors:</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <span class="comment">// Matrix[0]= c0 c1 c2 c3 c4 ... c7</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <span class="comment">// Matrix[1]= m0 m1 m2 m3 m4 ... m7</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <span class="comment">// Matrix[2]= y0 y1 y2 y3 y4 ... y7</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <span class="comment">// Matrix[3]= k0 k1 k2 k3 k4 ... k7</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160; </div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <a class="code" href="classllvm_1_1MVT.html">MVT</a> VT = <a class="code" href="classllvm_1_1MVT.html#a330aea6151cae3adaf5e179dcfe87346a97a9e92da302a5dd0ff02cf2587d7db3">MVT::v8i16</a>;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  TransposedMatrix.<a class="code" href="classllvm_1_1SmallVectorImpl.html#ad0b3d8447f88377b62d9c019f3c4e118">resize</a>(2);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;int, 16&gt;</a> MaskLow;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;int, 32&gt;</a> MaskLowTemp1, MaskLowWord;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;int, 32&gt;</a> MaskHighTemp1, MaskHighWord;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160; </div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 8; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    MaskLow.push_back(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    MaskLow.push_back(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> + 8);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  }</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160; </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <a class="code" href="namespacellvm.html#a79354a2324d1cc1c1fd42e5d8a771479">createUnpackShuffleMask</a>(VT, MaskLowTemp1, <span class="keyword">true</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <a class="code" href="namespacellvm.html#a79354a2324d1cc1c1fd42e5d8a771479">createUnpackShuffleMask</a>(VT, MaskHighTemp1, <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <a class="code" href="namespacellvm.html#aa91449ed55cd3c525a3438252573527a">narrowShuffleMaskElts</a>(2, MaskHighTemp1, MaskHighWord);</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <a class="code" href="namespacellvm.html#aa91449ed55cd3c525a3438252573527a">narrowShuffleMaskElts</a>(2, MaskLowTemp1, MaskLowWord);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <span class="comment">// IntrVec1Low = c0 m0 c1 m1 c2 m2 c3 m3 c4 m4 c5 m5 c6 m6 c7 m7</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <span class="comment">// IntrVec2Low = y0 k0 y1 k1 y2 k2 y3 k3 y4 k4 y5 k5 y6 k6 y7 k7</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *IntrVec1Low =</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShuffleVector(Matrix[0], Matrix[1], MaskLow);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *IntrVec2Low =</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShuffleVector(Matrix[2], Matrix[3], MaskLow);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160; </div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <span class="comment">// TransposedMatrix[0] = c0 m0 y0 k0 c1 m1 y1 k1 c2 m2 y2 k2 c3 m3 y3 k3</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <span class="comment">// TransposedMatrix[1] = c4 m4 y4 k4 c5 m5 y5 k5 c6 m6 y6 k6 c7 m7 y7 k7</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160; </div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  TransposedMatrix[0] =</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShuffleVector(IntrVec1Low, IntrVec2Low, MaskLowWord);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  TransposedMatrix[1] =</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShuffleVector(IntrVec1Low, IntrVec2Low, MaskHighWord);</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;}</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160; </div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="keywordtype">void</span> X86InterleavedAccessGroup::interleave8bitStride4(</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Instruction *&gt;</a> Matrix, <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Value *&gt;</a> &amp;TransposedMatrix,</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="keywordtype">unsigned</span> NumOfElm) {</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <span class="comment">// Example: Assuming we start from the following vectors:</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <span class="comment">// Matrix[0]= c0 c1 c2 c3 c4 ... c31</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="comment">// Matrix[1]= m0 m1 m2 m3 m4 ... m31</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <span class="comment">// Matrix[2]= y0 y1 y2 y3 y4 ... y31</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <span class="comment">// Matrix[3]= k0 k1 k2 k3 k4 ... k31</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160; </div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <a class="code" href="classllvm_1_1MVT.html">MVT</a> VT = <a class="code" href="classllvm_1_1MVT.html#abf8d0055af4879a302268d3f834b2be5">MVT::getVectorVT</a>(<a class="code" href="classllvm_1_1MVT.html#a330aea6151cae3adaf5e179dcfe87346af777e086e32f60c0c87b460964eae7d0">MVT::i8</a>, NumOfElm);</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <a class="code" href="classllvm_1_1MVT.html">MVT</a> HalfVT = <a class="code" href="X86InterleavedAccess_8cpp.html#a5bc9bd66618581850aca0d4ac86e6281">scaleVectorType</a>(VT);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160; </div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  TransposedMatrix.<a class="code" href="classllvm_1_1SmallVectorImpl.html#ad0b3d8447f88377b62d9c019f3c4e118">resize</a>(4);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;int, 32&gt;</a> MaskHigh;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;int, 32&gt;</a> MaskLow;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;int, 32&gt;</a> LowHighMask[2];</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;int, 32&gt;</a> MaskHighTemp;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;int, 32&gt;</a> MaskLowTemp;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160; </div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <span class="comment">// MaskHighTemp and MaskLowTemp built in the vpunpckhbw and vpunpcklbw X86</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <span class="comment">// shuffle pattern.</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160; </div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <a class="code" href="namespacellvm.html#a79354a2324d1cc1c1fd42e5d8a771479">createUnpackShuffleMask</a>(VT, MaskLow, <span class="keyword">true</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <a class="code" href="namespacellvm.html#a79354a2324d1cc1c1fd42e5d8a771479">createUnpackShuffleMask</a>(VT, MaskHigh, <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <span class="comment">// MaskHighTemp1 and MaskLowTemp1 built in the vpunpckhdw and vpunpckldw X86</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="comment">// shuffle pattern.</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160; </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <a class="code" href="namespacellvm.html#a79354a2324d1cc1c1fd42e5d8a771479">createUnpackShuffleMask</a>(HalfVT, MaskLowTemp, <span class="keyword">true</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <a class="code" href="namespacellvm.html#a79354a2324d1cc1c1fd42e5d8a771479">createUnpackShuffleMask</a>(HalfVT, MaskHighTemp, <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <a class="code" href="namespacellvm.html#aa91449ed55cd3c525a3438252573527a">narrowShuffleMaskElts</a>(2, MaskLowTemp, LowHighMask[0]);</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <a class="code" href="namespacellvm.html#aa91449ed55cd3c525a3438252573527a">narrowShuffleMaskElts</a>(2, MaskHighTemp, LowHighMask[1]);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160; </div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <span class="comment">// IntrVec1Low  = c0  m0  c1  m1 ... c7  m7  | c16 m16 c17 m17 ... c23 m23</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="comment">// IntrVec1High = c8  m8  c9  m9 ... c15 m15 | c24 m24 c25 m25 ... c31 m31</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <span class="comment">// IntrVec2Low  = y0  k0  y1  k1 ... y7  k7  | y16 k16 y17 k17 ... y23 k23</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <span class="comment">// IntrVec2High = y8  k8  y9  k9 ... y15 k15 | y24 k24 y25 k25 ... y31 k31</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *IntrVec[4];</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160; </div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  IntrVec[0] = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShuffleVector(Matrix[0], Matrix[1], MaskLow);</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  IntrVec[1] = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShuffleVector(Matrix[0], Matrix[1], MaskHigh);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  IntrVec[2] = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShuffleVector(Matrix[2], Matrix[3], MaskLow);</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  IntrVec[3] = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShuffleVector(Matrix[2], Matrix[3], MaskHigh);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160; </div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <span class="comment">// cmyk4  cmyk5  cmyk6   cmyk7  | cmyk20 cmyk21 cmyk22 cmyk23</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <span class="comment">// cmyk12 cmyk13 cmyk14  cmyk15 | cmyk28 cmyk29 cmyk30 cmyk31</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="comment">// cmyk0  cmyk1  cmyk2   cmyk3  | cmyk16 cmyk17 cmyk18 cmyk19</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <span class="comment">// cmyk8  cmyk9  cmyk10  cmyk11 | cmyk24 cmyk25 cmyk26 cmyk27</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160; </div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *VecOut[4];</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    VecOut[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShuffleVector(IntrVec[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> / 2], IntrVec[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> / 2 + 2],</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                                            LowHighMask[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> % 2]);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160; </div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <span class="comment">// cmyk0  cmyk1  cmyk2  cmyk3   | cmyk4  cmyk5  cmyk6  cmyk7</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="comment">// cmyk8  cmyk9  cmyk10 cmyk11  | cmyk12 cmyk13 cmyk14 cmyk15</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <span class="comment">// cmyk16 cmyk17 cmyk18 cmyk19  | cmyk20 cmyk21 cmyk22 cmyk23</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <span class="comment">// cmyk24 cmyk25 cmyk26 cmyk27  | cmyk28 cmyk29 cmyk30 cmyk31</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160; </div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <span class="keywordflow">if</span> (VT == <a class="code" href="classllvm_1_1MVT.html#a330aea6151cae3adaf5e179dcfe87346ae3d1acb736016d92ec470470f1c26065">MVT::v16i8</a>) {</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <a class="code" href="lib_2Target_2WebAssembly_2README_8txt.html#a79ea041233b5866026c3071dfc464ec0">std::copy</a>(VecOut, VecOut + 4, TransposedMatrix.begin());</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  }</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160; </div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  <a class="code" href="X86InterleavedAccess_8cpp.html#aeaf0abeac6c9f6e4698dd90c080611fa">reorderSubVector</a>(VT, TransposedMatrix, VecOut, <a class="code" href="namespacellvm.html#ab9c6b351507d3c0730f4290919d43a12">ArrayRef</a>(<a class="code" href="X86InterleavedAccess_8cpp.html#a76c9562101f54d25482f88ae29ed6131">Concat</a>, 16), NumOfElm,</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                   4, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;}</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160; </div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment">//  createShuffleStride returns shuffle mask of size N.</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment">//  The shuffle pattern is as following :</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment">//  {0, Stride%(VF/Lane), (2*Stride%(VF/Lane))...(VF*Stride/Lane)%(VF/Lane),</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment">//  (VF/ Lane) ,(VF / Lane)+Stride%(VF/Lane),...,</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="comment">//  (VF / Lane)+(VF*Stride/Lane)%(VF/Lane)}</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="comment">//  Where Lane is the # of lanes in a register:</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment">//  VectorSize = 128 =&gt; Lane = 1</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment">//  VectorSize = 256 =&gt; Lane = 2</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment">//  For example shuffle pattern for VF 16 register size 256 -&gt; lanes = 2</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="comment">//  {&lt;[0|3|6|1|4|7|2|5]-[8|11|14|9|12|15|10|13]&gt;}</span></div>
<div class="line"><a name="l00440"></a><span class="lineno"><a class="line" href="X86InterleavedAccess_8cpp.html#abf385bdb1a42f2648e94d92fbe51a9df">  440</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="X86InterleavedAccess_8cpp.html#abf385bdb1a42f2648e94d92fbe51a9df">createShuffleStride</a>(<a class="code" href="classllvm_1_1MVT.html">MVT</a> VT, <span class="keywordtype">int</span> Stride,</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                                <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;int&gt;</a> &amp;<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>) {</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  <span class="keywordtype">int</span> VectorSize = VT.<a class="code" href="classllvm_1_1MVT.html#a7be7c6dd92efc0d6f866d4a3b433eed0">getSizeInBits</a>();</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <span class="keywordtype">int</span> VF = VT.<a class="code" href="classllvm_1_1MVT.html#a3a371e99982e3168caf644d82298fcac">getVectorNumElements</a>();</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <span class="keywordtype">int</span> LaneCount = <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(VectorSize / 128, 1);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> Lane = 0; Lane &lt; LaneCount; Lane++)</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, LaneSize = VF / LaneCount; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != LaneSize; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>.push_back((<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> * Stride) % LaneSize + LaneSize * Lane);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;}</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160; </div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="comment">//  setGroupSize sets &#39;SizeInfo&#39; to the size(number of elements) of group</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment">//  inside mask a shuffleMask. A mask contains exactly 3 groups, where</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment">//  each group is a monotonically increasing sequence with stride 3.</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="comment">//  For example shuffleMask {0,3,6,1,4,7,2,5} =&gt; {3,3,2}</span></div>
<div class="line"><a name="l00454"></a><span class="lineno"><a class="line" href="X86InterleavedAccess_8cpp.html#adcbb3fbae2a0dfe66454040a45525a95">  454</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="X86InterleavedAccess_8cpp.html#adcbb3fbae2a0dfe66454040a45525a95">setGroupSize</a>(<a class="code" href="classllvm_1_1MVT.html">MVT</a> VT, <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;int&gt;</a> &amp;SizeInfo) {</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  <span class="keywordtype">int</span> VectorSize = VT.<a class="code" href="classllvm_1_1MVT.html#a7be7c6dd92efc0d6f866d4a3b433eed0">getSizeInBits</a>();</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  <span class="keywordtype">int</span> VF = VT.<a class="code" href="classllvm_1_1MVT.html#a3a371e99982e3168caf644d82298fcac">getVectorNumElements</a>() / <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(VectorSize / 128, 1);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, FirstGroupElement = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 3; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="keywordtype">int</span> GroupSize = <a class="code" href="README-FPStack_8txt.html#a9209b9930d4d7750a6b8b38b3b4ddd6a">std::ceil</a>((VF - FirstGroupElement) / 3.0);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    SizeInfo.push_back(GroupSize);</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    FirstGroupElement = ((GroupSize)*3 + FirstGroupElement) % VF;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  }</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;}</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160; </div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment">//  DecodePALIGNRMask returns the shuffle mask of vpalign instruction.</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment">//  vpalign works according to lanes</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment">//  Where Lane is the # of lanes in a register:</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment">//  VectorWide = 128 =&gt; Lane = 1</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment">//  VectorWide = 256 =&gt; Lane = 2</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment">//  For Lane = 1 shuffle pattern is: {DiffToJump,...,DiffToJump+VF-1}.</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="comment">//  For Lane = 2 shuffle pattern is:</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="comment">//  {DiffToJump,...,VF/2-1,VF,...,DiffToJump+VF-1}.</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment">//  Imm variable sets the offset amount. The result of the</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment">//  function is stored inside ShuffleMask vector and it built as described in</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment">//  the begin of the description. AlignDirection is a boolean that indicates the</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment">//  direction of the alignment. (false - align to the &quot;right&quot; side while true -</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment">//  align to the &quot;left&quot; side)</span></div>
<div class="line"><a name="l00477"></a><span class="lineno"><a class="line" href="X86InterleavedAccess_8cpp.html#a0283fbbacd7e1b520ab58b9b867b1c71">  477</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#ab489acbbe8913e85a72c328360e7b80b">DecodePALIGNRMask</a>(<a class="code" href="classllvm_1_1MVT.html">MVT</a> VT, <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a>,</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                              <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;int&gt;</a> &amp;ShuffleMask,</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                              <span class="keywordtype">bool</span> AlignDirection = <span class="keyword">true</span>, <span class="keywordtype">bool</span> Unary = <span class="keyword">false</span>) {</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  <span class="keywordtype">unsigned</span> NumElts = VT.<a class="code" href="classllvm_1_1MVT.html#a3a371e99982e3168caf644d82298fcac">getVectorNumElements</a>();</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  <span class="keywordtype">unsigned</span> NumLanes = <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>((<span class="keywordtype">int</span>)VT.<a class="code" href="classllvm_1_1MVT.html#a7be7c6dd92efc0d6f866d4a3b433eed0">getSizeInBits</a>() / 128, 1);</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <span class="keywordtype">unsigned</span> NumLaneElts = NumElts / NumLanes;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160; </div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  <a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a> = AlignDirection ? <a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a> : (NumLaneElts - <a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a>);</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = <a class="code" href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">Imm</a> * (VT.<a class="code" href="classllvm_1_1MVT.html#a2e101ce5736aa0643639fd3adae18088">getScalarSizeInBits</a>() / 8);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160; </div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#ac3ac4028df71f10fda029660ef66594d">l</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#ac3ac4028df71f10fda029660ef66594d">l</a> != NumElts; <a class="code" href="lib_2Target_2README_8txt.html#ac3ac4028df71f10fda029660ef66594d">l</a> += NumLaneElts) {</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != NumLaneElts; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> = <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> + <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      <span class="comment">// if i+offset is out of this lane then we actually need the other source</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      <span class="comment">// If Unary the other source is the first source.</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> &gt;= NumLaneElts)</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        <a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> = Unary ? <a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> % NumLaneElts : <a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> + NumElts - NumLaneElts;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;      ShuffleMask.push_back(<a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> + <a class="code" href="lib_2Target_2README_8txt.html#ac3ac4028df71f10fda029660ef66594d">l</a>);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    }</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  }</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;}</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160; </div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="comment">// concatSubVector - The function rebuilds the data to a correct expected</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="comment">// order. An assumption(The shape of the matrix) was taken for the</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="comment">// deinterleaved to work with lane&#39;s instructions like &#39;vpalign&#39; or &#39;vphuf&#39;.</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="comment">// This function ensures that the data is built in correct way for the lane</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="comment">// instructions. Each lane inside the vector is a 128-bit length.</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="comment">// The &#39;InVec&#39; argument contains the data in increasing order. In InVec[0] You</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment">// can find the first 128 bit data. The number of different lanes inside a</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment">// vector depends on the &#39;VecElems&#39;.In general, the formula is</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment">// VecElems * type / 128. The size of the array &#39;InVec&#39; depends and equal to</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment">// &#39;VecElems&#39;.</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160; </div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment">// For VecElems = 16</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="comment">// Invec[0] - |0|      Vec[0] - |0|</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="comment">// Invec[1] - |1|  =&gt;  Vec[1] - |1|</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment">// Invec[2] - |2|      Vec[2] - |2|</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160; </div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="comment">// For VecElems = 32</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="comment">// Invec[0] - |0|1|      Vec[0] - |0|3|</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="comment">// Invec[1] - |2|3|  =&gt;  Vec[1] - |1|4|</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment">// Invec[2] - |4|5|      Vec[2] - |2|5|</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160; </div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment">// For VecElems = 64</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="comment">// Invec[0] - |0|1|2 |3 |      Vec[0] - |0|3|6|9 |</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="comment">// Invec[1] - |4|5|6 |7 |  =&gt;  Vec[1] - |1|4|7|10|</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="comment">// Invec[2] - |8|9|10|11|      Vec[2] - |2|5|8|11|</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160; </div>
<div class="line"><a name="l00526"></a><span class="lineno"><a class="line" href="X86InterleavedAccess_8cpp.html#ad6fab051afe7926d360bac2cd1e82819">  526</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="X86InterleavedAccess_8cpp.html#ad6fab051afe7926d360bac2cd1e82819">concatSubVector</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> **Vec, <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Instruction *&gt;</a> InVec,</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                            <span class="keywordtype">unsigned</span> VecElems, <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  <span class="keywordflow">if</span> (VecElems == 16) {</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 3; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;      Vec[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = InVec[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  }</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160; </div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> &lt; VecElems / 32; <a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>++)</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 3; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;      Vec[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> + <a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> * 3] = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShuffleVector(</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;          InVec[<a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> * 6 + <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], InVec[<a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> * 6 + <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> + 3], <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef</a>(<a class="code" href="X86InterleavedAccess_8cpp.html#a76c9562101f54d25482f88ae29ed6131">Concat</a>, 32));</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160; </div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="keywordflow">if</span> (VecElems == 32)</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160; </div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 3; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    Vec[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShuffleVector(Vec[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], Vec[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> + 3], <a class="code" href="X86InterleavedAccess_8cpp.html#a76c9562101f54d25482f88ae29ed6131">Concat</a>);</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;}</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160; </div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="keywordtype">void</span> X86InterleavedAccessGroup::deinterleave8bitStride3(</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Instruction *&gt;</a> InVec, <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Value *&gt;</a> &amp;TransposedMatrix,</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="keywordtype">unsigned</span> VecElems) {</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  <span class="comment">// Example: Assuming we start from the following vectors:</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  <span class="comment">// Matrix[0]= a0 b0 c0 a1 b1 c1 a2 b2</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="comment">// Matrix[1]= c2 a3 b3 c3 a4 b4 c4 a5</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  <span class="comment">// Matrix[2]= b5 c5 a6 b6 c6 a7 b7 c7</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160; </div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  TransposedMatrix.<a class="code" href="classllvm_1_1SmallVectorImpl.html#ad0b3d8447f88377b62d9c019f3c4e118">resize</a>(3);</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;int, 32&gt;</a> VPShuf;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;int, 32&gt;</a> VPAlign[2];</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;int, 32&gt;</a> VPAlign2;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;int, 32&gt;</a> VPAlign3;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;int, 3&gt;</a> GroupSize;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Vec[6], *TempVector[3];</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160; </div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  <a class="code" href="classllvm_1_1MVT.html">MVT</a> VT = <a class="code" href="classllvm_1_1MVT.html#a56bb53e2d0b01c78c8c538f903fd45b8">MVT::getVT</a>(Shuffles[0]-&gt;<a class="code" href="M68kELFObjectWriter_8cpp.html#ae4a8bc3879d2282eefd72b16b12c2a37">getType</a>());</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160; </div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <a class="code" href="X86InterleavedAccess_8cpp.html#abf385bdb1a42f2648e94d92fbe51a9df">createShuffleStride</a>(VT, 3, VPShuf);</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  <a class="code" href="X86InterleavedAccess_8cpp.html#adcbb3fbae2a0dfe66454040a45525a95">setGroupSize</a>(VT, GroupSize);</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160; </div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 2; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <a class="code" href="namespacellvm.html#ab489acbbe8913e85a72c328360e7b80b">DecodePALIGNRMask</a>(VT, GroupSize[2 - <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], VPAlign[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], <span class="keyword">false</span>);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160; </div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  <a class="code" href="namespacellvm.html#ab489acbbe8913e85a72c328360e7b80b">DecodePALIGNRMask</a>(VT, GroupSize[2] + GroupSize[1], VPAlign2, <span class="keyword">true</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <a class="code" href="namespacellvm.html#ab489acbbe8913e85a72c328360e7b80b">DecodePALIGNRMask</a>(VT, GroupSize[1], VPAlign3, <span class="keyword">true</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160; </div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  <a class="code" href="X86InterleavedAccess_8cpp.html#ad6fab051afe7926d360bac2cd1e82819">concatSubVector</a>(Vec, InVec, VecElems, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  <span class="comment">// Vec[0]= a0 a1 a2 b0 b1 b2 c0 c1</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  <span class="comment">// Vec[1]= c2 c3 c4 a3 a4 a5 b3 b4</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  <span class="comment">// Vec[2]= b5 b6 b7 c5 c6 c7 a6 a7</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160; </div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 3; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    Vec[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShuffleVector(Vec[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], VPShuf);</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160; </div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  <span class="comment">// TempVector[0]= a6 a7 a0 a1 a2 b0 b1 b2</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  <span class="comment">// TempVector[1]= c0 c1 c2 c3 c4 a3 a4 a5</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  <span class="comment">// TempVector[2]= b3 b4 b5 b6 b7 c5 c6 c7</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160; </div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 3; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    TempVector[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] =</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShuffleVector(Vec[(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> + 2) % 3], Vec[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], VPAlign[0]);</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160; </div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  <span class="comment">// Vec[0]= a3 a4 a5 a6 a7 a0 a1 a2</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  <span class="comment">// Vec[1]= c5 c6 c7 c0 c1 c2 c3 c4</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  <span class="comment">// Vec[2]= b0 b1 b2 b3 b4 b5 b6 b7</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160; </div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 3; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    Vec[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShuffleVector(TempVector[(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1) % 3], TempVector[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>],</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                                         VPAlign[1]);</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160; </div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  <span class="comment">// TransposedMatrix[0]= a0 a1 a2 a3 a4 a5 a6 a7</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <span class="comment">// TransposedMatrix[1]= b0 b1 b2 b3 b4 b5 b6 b7</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  <span class="comment">// TransposedMatrix[2]= c0 c1 c2 c3 c4 c5 c6 c7</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160; </div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *TempVec = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShuffleVector(Vec[1], VPAlign3);</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  TransposedMatrix[0] = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShuffleVector(Vec[0], VPAlign2);</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  TransposedMatrix[1] = VecElems == 8 ? Vec[2] : TempVec;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  TransposedMatrix[2] = VecElems == 8 ? TempVec : Vec[2];</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;}</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160; </div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="comment">// group2Shuffle reorder the shuffle stride back into continuous order.</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="comment">// For example For VF16 with Mask1 = {0,3,6,9,12,15,2,5,8,11,14,1,4,7,10,13} =&gt;</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="comment">// MaskResult = {0,11,6,1,12,7,2,13,8,3,14,9,4,15,10,5}.</span></div>
<div class="line"><a name="l00610"></a><span class="lineno"><a class="line" href="X86InterleavedAccess_8cpp.html#ab6c5507fc91d0ca19adbac9927262086">  610</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="X86InterleavedAccess_8cpp.html#ab6c5507fc91d0ca19adbac9927262086">group2Shuffle</a>(<a class="code" href="classllvm_1_1MVT.html">MVT</a> VT, <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;int&gt;</a> &amp;<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>,</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                          <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;int&gt;</a> &amp;Output) {</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <span class="keywordtype">int</span> IndexGroup[3] = {0, 0, 0};</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a> = 0;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <span class="keywordtype">int</span> VectorWidth = VT.<a class="code" href="classllvm_1_1MVT.html#a7be7c6dd92efc0d6f866d4a3b433eed0">getSizeInBits</a>();</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  <span class="keywordtype">int</span> VF = VT.<a class="code" href="classllvm_1_1MVT.html#a3a371e99982e3168caf644d82298fcac">getVectorNumElements</a>();</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  <span class="comment">// Find the index of the different groups.</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  <span class="keywordtype">int</span> Lane = (VectorWidth / 128 &gt; 0) ? VectorWidth / 128 : 1;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 3; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    IndexGroup[(<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a> * 3) % (VF / Lane)] = <a class="code" href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a>;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a> += <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  }</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  <span class="comment">// According to the index compute the convert mask.</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; VF / Lane; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    Output.push_back(IndexGroup[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> % 3]);</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    IndexGroup[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> % 3]++;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  }</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;}</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160; </div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="keywordtype">void</span> X86InterleavedAccessGroup::interleave8bitStride3(</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Instruction *&gt;</a> InVec, <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Value *&gt;</a> &amp;TransposedMatrix,</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="keywordtype">unsigned</span> VecElems) {</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  <span class="comment">// Example: Assuming we start from the following vectors:</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  <span class="comment">// Matrix[0]= a0 a1 a2 a3 a4 a5 a6 a7</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  <span class="comment">// Matrix[1]= b0 b1 b2 b3 b4 b5 b6 b7</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  <span class="comment">// Matrix[2]= c0 c1 c2 c3 c3 a7 b7 c7</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160; </div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  TransposedMatrix.<a class="code" href="classllvm_1_1SmallVectorImpl.html#ad0b3d8447f88377b62d9c019f3c4e118">resize</a>(3);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;int, 3&gt;</a> GroupSize;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;int, 32&gt;</a> VPShuf;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;int, 32&gt;</a> VPAlign[3];</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;int, 32&gt;</a> VPAlign2;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;int, 32&gt;</a> VPAlign3;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160; </div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Vec[3], *TempVector[3];</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  <a class="code" href="classllvm_1_1MVT.html">MVT</a> VT = <a class="code" href="classllvm_1_1MVT.html#abf8d0055af4879a302268d3f834b2be5">MVT::getVectorVT</a>(<a class="code" href="classllvm_1_1MVT.html#a330aea6151cae3adaf5e179dcfe87346af777e086e32f60c0c87b460964eae7d0">MVT::i8</a>, VecElems);</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160; </div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  <a class="code" href="X86InterleavedAccess_8cpp.html#adcbb3fbae2a0dfe66454040a45525a95">setGroupSize</a>(VT, GroupSize);</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160; </div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 3; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <a class="code" href="namespacellvm.html#ab489acbbe8913e85a72c328360e7b80b">DecodePALIGNRMask</a>(VT, GroupSize[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], VPAlign[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160; </div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  <a class="code" href="namespacellvm.html#ab489acbbe8913e85a72c328360e7b80b">DecodePALIGNRMask</a>(VT, GroupSize[1] + GroupSize[2], VPAlign2, <span class="keyword">false</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;  <a class="code" href="namespacellvm.html#ab489acbbe8913e85a72c328360e7b80b">DecodePALIGNRMask</a>(VT, GroupSize[1], VPAlign3, <span class="keyword">false</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160; </div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  <span class="comment">// Vec[0]= a3 a4 a5 a6 a7 a0 a1 a2</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  <span class="comment">// Vec[1]= c5 c6 c7 c0 c1 c2 c3 c4</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  <span class="comment">// Vec[2]= b0 b1 b2 b3 b4 b5 b6 b7</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160; </div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  Vec[0] = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShuffleVector(InVec[0], VPAlign2);</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  Vec[1] = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShuffleVector(InVec[1], VPAlign3);</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  Vec[2] = InVec[2];</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160; </div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  <span class="comment">// Vec[0]= a6 a7 a0 a1 a2 b0 b1 b2</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  <span class="comment">// Vec[1]= c0 c1 c2 c3 c4 a3 a4 a5</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  <span class="comment">// Vec[2]= b3 b4 b5 b6 b7 c5 c6 c7</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160; </div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 3; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    TempVector[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] =</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShuffleVector(Vec[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], Vec[(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> + 2) % 3], VPAlign[1]);</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160; </div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  <span class="comment">// Vec[0]= a0 a1 a2 b0 b1 b2 c0 c1</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  <span class="comment">// Vec[1]= c2 c3 c4 a3 a4 a5 b3 b4</span></div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  <span class="comment">// Vec[2]= b5 b6 b7 c5 c6 c7 a6 a7</span></div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160; </div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 3; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    Vec[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShuffleVector(TempVector[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], TempVector[(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1) % 3],</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                                         VPAlign[2]);</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160; </div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  <span class="comment">// TransposedMatrix[0] = a0 b0 c0 a1 b1 c1 a2 b2</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <span class="comment">// TransposedMatrix[1] = c2 a3 b3 c3 a4 b4 c4 a5</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  <span class="comment">// TransposedMatrix[2] = b5 c5 a6 b6 c6 a7 b7 c7</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160; </div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <span class="keywordtype">unsigned</span> NumOfElm = VT.<a class="code" href="classllvm_1_1MVT.html#a3a371e99982e3168caf644d82298fcac">getVectorNumElements</a>();</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  <a class="code" href="X86InterleavedAccess_8cpp.html#ab6c5507fc91d0ca19adbac9927262086">group2Shuffle</a>(VT, GroupSize, VPShuf);</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  <a class="code" href="X86InterleavedAccess_8cpp.html#aeaf0abeac6c9f6e4698dd90c080611fa">reorderSubVector</a>(VT, TransposedMatrix, Vec, VPShuf, NumOfElm, 3, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;}</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160; </div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="keywordtype">void</span> X86InterleavedAccessGroup::transpose_4x4(</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Instruction *&gt;</a> Matrix,</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Value *&gt;</a> &amp;TransposedMatrix) {</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="LiveRegMatrix_8cpp.html#a8989acb71bd355e02bcf3a930b5e54ea">Matrix</a>.size() == 4 &amp;&amp; <span class="stringliteral">&quot;Invalid matrix size&quot;</span>);</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  TransposedMatrix.<a class="code" href="classllvm_1_1SmallVectorImpl.html#ad0b3d8447f88377b62d9c019f3c4e118">resize</a>(4);</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160; </div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  <span class="comment">// dst = src1[0,1],src2[0,1]</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;  <span class="keyword">static</span> constexpr <span class="keywordtype">int</span> IntMask1[] = {0, 1, 4, 5};</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;int&gt;</a> <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = <a class="code" href="namespacellvm.html#ab9c6b351507d3c0730f4290919d43a12">ArrayRef</a>(IntMask1, 4);</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *IntrVec1 = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShuffleVector(Matrix[0], Matrix[2], <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>);</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *IntrVec2 = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShuffleVector(Matrix[1], Matrix[3], <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>);</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160; </div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  <span class="comment">// dst = src1[2,3],src2[2,3]</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  <span class="keyword">static</span> constexpr <span class="keywordtype">int</span> IntMask2[] = {2, 3, 6, 7};</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = <a class="code" href="namespacellvm.html#ab9c6b351507d3c0730f4290919d43a12">ArrayRef</a>(IntMask2, 4);</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *IntrVec3 = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShuffleVector(Matrix[0], Matrix[2], <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>);</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *IntrVec4 = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShuffleVector(Matrix[1], Matrix[3], <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>);</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160; </div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  <span class="comment">// dst = src1[0],src2[0],src1[2],src2[2]</span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  <span class="keyword">static</span> constexpr <span class="keywordtype">int</span> IntMask3[] = {0, 4, 2, 6};</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = <a class="code" href="namespacellvm.html#ab9c6b351507d3c0730f4290919d43a12">ArrayRef</a>(IntMask3, 4);</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  TransposedMatrix[0] = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShuffleVector(IntrVec1, IntrVec2, <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>);</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  TransposedMatrix[2] = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShuffleVector(IntrVec3, IntrVec4, <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>);</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160; </div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  <span class="comment">// dst = src1[1],src2[1],src1[3],src2[3]</span></div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  <span class="keyword">static</span> constexpr <span class="keywordtype">int</span> IntMask4[] = {1, 5, 3, 7};</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = <a class="code" href="namespacellvm.html#ab9c6b351507d3c0730f4290919d43a12">ArrayRef</a>(IntMask4, 4);</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  TransposedMatrix[1] = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShuffleVector(IntrVec1, IntrVec2, <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>);</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  TransposedMatrix[3] = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShuffleVector(IntrVec3, IntrVec4, <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>);</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;}</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160; </div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;<span class="comment">// Lowers this interleaved access group into X86-specific</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="comment">// instructions/intrinsics.</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="keywordtype">bool</span> X86InterleavedAccessGroup::lowerIntoOptimizedSequence() {</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 4&gt;</a> DecomposedVectors;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 4&gt;</a> TransposedVectors;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <span class="keyword">auto</span> *ShuffleTy = cast&lt;FixedVectorType&gt;(Shuffles[0]-&gt;<a class="code" href="M68kELFObjectWriter_8cpp.html#ae4a8bc3879d2282eefd72b16b12c2a37">getType</a>());</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160; </div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  <span class="keywordflow">if</span> (isa&lt;LoadInst&gt;(Inst)) {</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="keyword">auto</span> *ShuffleEltTy = cast&lt;FixedVectorType&gt;(Inst-&gt;getType());</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="keywordtype">unsigned</span> NumSubVecElems = ShuffleEltTy-&gt;getNumElements() / Factor;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="keywordflow">switch</span> (NumSubVecElems) {</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <span class="keywordflow">case</span> 4:</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="keywordflow">case</span> 8:</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="keywordflow">case</span> 16:</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <span class="keywordflow">case</span> 32:</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <span class="keywordflow">case</span> 64:</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;      <span class="keywordflow">if</span> (ShuffleTy-&gt;getNumElements() != NumSubVecElems)</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    }</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160; </div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="comment">// Try to generate target-sized register(/instruction).</span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <a class="code" href="ConstraintElimination_8cpp.html#aaa871fff08f6d27fa94414400075a1ad">decompose</a>(Inst, Factor, ShuffleTy, DecomposedVectors);</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160; </div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <span class="comment">// Perform matrix-transposition in order to compute interleaved</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="comment">// results by generating some sort of (optimized) target-specific</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="comment">// instructions.</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160; </div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <span class="keywordflow">if</span> (NumSubVecElems == 4)</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;      transpose_4x4(DecomposedVectors, TransposedVectors);</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;      deinterleave8bitStride3(DecomposedVectors, TransposedVectors,</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                              NumSubVecElems);</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160; </div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <span class="comment">// Now replace the unoptimized-interleaved-vectors with the</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <span class="comment">// transposed-interleaved vectors.</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = Shuffles.size(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;      Shuffles[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;replaceAllUsesWith(TransposedVectors[Indices[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]]);</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160; </div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  }</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160; </div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *ShuffleEltTy = ShuffleTy-&gt;getElementType();</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  <span class="keywordtype">unsigned</span> NumSubVecElems = ShuffleTy-&gt;getNumElements() / Factor;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160; </div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  <span class="comment">// Lower the interleaved stores:</span></div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  <span class="comment">//   1. Decompose the interleaved wide shuffle into individual shuffle</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;  <span class="comment">//   vectors.</span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  <a class="code" href="ConstraintElimination_8cpp.html#aaa871fff08f6d27fa94414400075a1ad">decompose</a>(Shuffles[0], Factor,</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;            <a class="code" href="classllvm_1_1FixedVectorType.html#af9a870d5df50fe0133a410b7c9114c80">FixedVectorType::get</a>(ShuffleEltTy, NumSubVecElems),</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;            DecomposedVectors);</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160; </div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  <span class="comment">//   2. Transpose the interleaved-vectors into vectors of contiguous</span></div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  <span class="comment">//      elements.</span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;  <span class="keywordflow">switch</span> (NumSubVecElems) {</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  <span class="keywordflow">case</span> 4:</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    transpose_4x4(DecomposedVectors, TransposedVectors);</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  <span class="keywordflow">case</span> 8:</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    interleave8bitStride4VF8(DecomposedVectors, TransposedVectors);</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;  <span class="keywordflow">case</span> 16:</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  <span class="keywordflow">case</span> 32:</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  <span class="keywordflow">case</span> 64:</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <span class="keywordflow">if</span> (Factor == 4)</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;      interleave8bitStride4(DecomposedVectors, TransposedVectors,</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;                            NumSubVecElems);</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    <span class="keywordflow">if</span> (Factor == 3)</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;      interleave8bitStride3(DecomposedVectors, TransposedVectors,</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;                            NumSubVecElems);</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  }</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160; </div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  <span class="comment">//   3. Concatenate the contiguous-vectors back into a wide vector.</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *WideVec = <a class="code" href="namespacellvm.html#a4288169d91ab0f0f01405115fd2931a7">concatenateVectors</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, TransposedVectors);</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160; </div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  <span class="comment">//   4. Generate a store instruction for wide-vec.</span></div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = cast&lt;StoreInst&gt;(Inst);</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlignedStore(WideVec, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getPointerOperand(), <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getAlign());</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160; </div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;}</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160; </div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="comment">// Lower interleaved load(s) into target specific instructions/</span></div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="comment">// intrinsics. Lowering sequence varies depending on the vector-types, factor,</span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="comment">// number of shuffles and ISA.</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="comment">// Currently, lowering is supported for 4x64 bits with Factor = 4 on AVX.</span></div>
<div class="line"><a name="l00810"></a><span class="lineno"><a class="line" href="classllvm_1_1X86TargetLowering.html#a9157e4aca11eca217c5c6d2c6a2eadbf">  810</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1X86TargetLowering.html#a9157e4aca11eca217c5c6d2c6a2eadbf">X86TargetLowering::lowerInterleavedLoad</a>(</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI, <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;ShuffleVectorInst *&gt;</a> Shuffles,</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> Indices, <span class="keywordtype">unsigned</span> Factor)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Factor &gt;= 2 &amp;&amp; Factor &lt;= <a class="code" href="classllvm_1_1X86TargetLowering.html#a8b0b7687cd51e781f5b3851d9dcc10a6">getMaxSupportedInterleaveFactor</a>() &amp;&amp;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;         <span class="stringliteral">&quot;Invalid interleave factor&quot;</span>);</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!Shuffles.<a class="code" href="classllvm_1_1ArrayRef.html#ac835b8735b1b2faec0efdca236e37d94">empty</a>() &amp;&amp; <span class="stringliteral">&quot;Empty shufflevector input&quot;</span>);</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Shuffles.<a class="code" href="classllvm_1_1ArrayRef.html#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>() == Indices.<a class="code" href="classllvm_1_1ArrayRef.html#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>() &amp;&amp;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;         <span class="stringliteral">&quot;Unmatched number of shufflevectors and indices&quot;</span>);</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160; </div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  <span class="comment">// Create an interleaved access group.</span></div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>(LI);</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  X86InterleavedAccessGroup Grp(LI, Shuffles, Indices, Factor, Subtarget,</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;                                <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160; </div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  <span class="keywordflow">return</span> Grp.isSupported() &amp;&amp; Grp.lowerIntoOptimizedSequence();</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;}</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160; </div>
<div class="line"><a name="l00827"></a><span class="lineno"><a class="line" href="classllvm_1_1X86TargetLowering.html#ab5881269962ffb5a6c2d4c5be45efbce">  827</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1X86TargetLowering.html#ab5881269962ffb5a6c2d4c5be45efbce">X86TargetLowering::lowerInterleavedStore</a>(<a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>,</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;                                              <a class="code" href="classllvm_1_1ShuffleVectorInst.html">ShuffleVectorInst</a> *SVI,</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;                                              <span class="keywordtype">unsigned</span> Factor)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Factor &gt;= 2 &amp;&amp; Factor &lt;= <a class="code" href="classllvm_1_1X86TargetLowering.html#a8b0b7687cd51e781f5b3851d9dcc10a6">getMaxSupportedInterleaveFactor</a>() &amp;&amp;</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;         <span class="stringliteral">&quot;Invalid interleave factor&quot;</span>);</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160; </div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(cast&lt;FixedVectorType&gt;(SVI-&gt;<a class="code" href="classllvm_1_1ShuffleVectorInst.html#a50fe6a61ea745fb71fa8403af6e7deed">getType</a>())-&gt;getNumElements() % Factor ==</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;             0 &amp;&amp;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;         <span class="stringliteral">&quot;Invalid interleaved store&quot;</span>);</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160; </div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;  <span class="comment">// Holds the indices of SVI that correspond to the starting index of each</span></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;  <span class="comment">// interleaved shuffle.</span></div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 4&gt;</a> Indices;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = SVI-&gt;<a class="code" href="classllvm_1_1ShuffleVectorInst.html#a6eaff12d0d3ead952f2a2a2781df56ac">getShuffleMask</a>();</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; Factor; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    Indices.push_back(<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160; </div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;ShuffleVectorInst *&gt;</a> Shuffles = <a class="code" href="namespacellvm.html#ab9c6b351507d3c0730f4290919d43a12">ArrayRef</a>(SVI);</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160; </div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  <span class="comment">// Create an interleaved access group.</span></div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>);</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;  X86InterleavedAccessGroup Grp(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>, Shuffles, Indices, Factor, Subtarget,</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;                                <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160; </div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;  <span class="keywordflow">return</span> Grp.isSupported() &amp;&amp; Grp.lowerIntoOptimizedSequence();</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="alib_2Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00029">README.txt:29</a></div></div>
<div class="ttc" id="aclassllvm_1_1MVT_html_ad3ff408f213bef998f49952c6c3711fb"><div class="ttname"><a href="classllvm_1_1MVT.html#ad3ff408f213bef998f49952c6c3711fb">llvm::MVT::getVectorElementType</a></div><div class="ttdeci">MVT getVectorElementType() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineValueType_8h_source.html#l00548">MachineValueType.h:548</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aX86InterleavedAccess_8cpp_html_abf385bdb1a42f2648e94d92fbe51a9df"><div class="ttname"><a href="X86InterleavedAccess_8cpp.html#abf385bdb1a42f2648e94d92fbe51a9df">createShuffleStride</a></div><div class="ttdeci">static void createShuffleStride(MVT VT, int Stride, SmallVectorImpl&lt; int &gt; &amp;Mask)</div><div class="ttdef"><b>Definition:</b> <a href="X86InterleavedAccess_8cpp_source.html#l00440">X86InterleavedAccess.cpp:440</a></div></div>
<div class="ttc" id="aclassllvm_1_1DataLayout_html"><div class="ttname"><a href="classllvm_1_1DataLayout.html">llvm::DataLayout</a></div><div class="ttdoc">A parsed version of the target data layout string in and methods for querying it.</div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00110">DataLayout.h:110</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab489acbbe8913e85a72c328360e7b80b"><div class="ttname"><a href="namespacellvm.html#ab489acbbe8913e85a72c328360e7b80b">llvm::DecodePALIGNRMask</a></div><div class="ttdeci">void DecodePALIGNRMask(unsigned NumElts, unsigned Imm, SmallVectorImpl&lt; int &gt; &amp;ShuffleMask)</div><div class="ttdef"><b>Definition:</b> <a href="X86ShuffleDecode_8cpp_source.html#l00124">X86ShuffleDecode.cpp:124</a></div></div>
<div class="ttc" id="aclassllvm_1_1ShuffleVectorInst_html_a6eaff12d0d3ead952f2a2a2781df56ac"><div class="ttname"><a href="classllvm_1_1ShuffleVectorInst.html#a6eaff12d0d3ead952f2a2a2781df56ac">llvm::ShuffleVectorInst::getShuffleMask</a></div><div class="ttdeci">static void getShuffleMask(const Constant *Mask, SmallVectorImpl&lt; int &gt; &amp;Result)</div><div class="ttdoc">Convert the input shuffle mask operand to a vector of integers.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l02225">Instructions.cpp:2225</a></div></div>
<div class="ttc" id="aREADME-FPStack_8txt_html_a9209b9930d4d7750a6b8b38b3b4ddd6a"><div class="ttname"><a href="README-FPStack_8txt.html#a9209b9930d4d7750a6b8b38b3b4ddd6a">ceil</a></div><div class="ttdeci">We have fiadd patterns now but the followings have the same cost and complexity We need a way to specify the later is more profitable def def The FP stackifier should handle simple permutates to reduce number of shuffle e g ceil</div><div class="ttdef"><b>Definition:</b> <a href="README-FPStack_8txt_source.html#l00054">README-FPStack.txt:54</a></div></div>
<div class="ttc" id="aX86Subtarget_8h_html"><div class="ttname"><a href="X86Subtarget_8h.html">X86Subtarget.h</a></div></div>
<div class="ttc" id="aclassT_html"><div class="ttname"><a href="classT.html">T</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86TargetLowering_html_a9157e4aca11eca217c5c6d2c6a2eadbf"><div class="ttname"><a href="classllvm_1_1X86TargetLowering.html#a9157e4aca11eca217c5c6d2c6a2eadbf">llvm::X86TargetLowering::lowerInterleavedLoad</a></div><div class="ttdeci">bool lowerInterleavedLoad(LoadInst *LI, ArrayRef&lt; ShuffleVectorInst * &gt; Shuffles, ArrayRef&lt; unsigned &gt; Indices, unsigned Factor) const override</div><div class="ttdoc">Lower interleaved load(s) into target specific instructions/intrinsics.</div><div class="ttdef"><b>Definition:</b> <a href="X86InterleavedAccess_8cpp_source.html#l00810">X86InterleavedAccess.cpp:810</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01199">SmallVector.h:1199</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86Subtarget_html"><div class="ttname"><a href="classllvm_1_1X86Subtarget.html">llvm::X86Subtarget</a></div><div class="ttdef"><b>Definition:</b> <a href="X86Subtarget_8h_source.html#l00052">X86Subtarget.h:52</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilder_html"><div class="ttname"><a href="classllvm_1_1IRBuilder.html">llvm::IRBuilder&lt;&gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86TargetLowering_html_a8b0b7687cd51e781f5b3851d9dcc10a6"><div class="ttname"><a href="classllvm_1_1X86TargetLowering.html#a8b0b7687cd51e781f5b3851d9dcc10a6">llvm::X86TargetLowering::getMaxSupportedInterleaveFactor</a></div><div class="ttdeci">unsigned getMaxSupportedInterleaveFactor() const override</div><div class="ttdoc">Get the maximum supported factor for interleaved memory accesses.</div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8h_source.html#l01530">X86ISelLowering.h:1530</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa91449ed55cd3c525a3438252573527a"><div class="ttname"><a href="namespacellvm.html#aa91449ed55cd3c525a3438252573527a">llvm::narrowShuffleMaskElts</a></div><div class="ttdeci">void narrowShuffleMaskElts(int Scale, ArrayRef&lt; int &gt; Mask, SmallVectorImpl&lt; int &gt; &amp;ScaledMask)</div><div class="ttdoc">Replace each shuffle mask index with the scaled sequential indices for an equivalent mask of narrowed...</div><div class="ttdef"><b>Definition:</b> <a href="VectorUtils_8cpp_source.html#l00469">VectorUtils.cpp:469</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdoc">The instances of the Type class are immutable: once they are created, they are never changed.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="aModule_8h_html"><div class="ttname"><a href="Module_8h.html">Module.h</a></div></div>
<div class="ttc" id="aX86InterleavedAccess_8cpp_html_ab6c5507fc91d0ca19adbac9927262086"><div class="ttname"><a href="X86InterleavedAccess_8cpp.html#ab6c5507fc91d0ca19adbac9927262086">group2Shuffle</a></div><div class="ttdeci">static void group2Shuffle(MVT VT, SmallVectorImpl&lt; int &gt; &amp;Mask, SmallVectorImpl&lt; int &gt; &amp;Output)</div><div class="ttdef"><b>Definition:</b> <a href="X86InterleavedAccess_8cpp_source.html#l00610">X86InterleavedAccess.cpp:610</a></div></div>
<div class="ttc" id="aclassllvm_1_1VectorType_html_a12e23c3d619db313388fe11dc76eb23f"><div class="ttname"><a href="classllvm_1_1VectorType.html#a12e23c3d619db313388fe11dc76eb23f">llvm::VectorType::getElementType</a></div><div class="ttdeci">Type * getElementType() const</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00422">DerivedTypes.h:422</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab4d4bc901fedd8857f647dcc2c0d71de"><div class="ttname"><a href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">llvm::max</a></div><div class="ttdeci">Expected&lt; ExpressionValue &gt; max(const ExpressionValue &amp;Lhs, const ExpressionValue &amp;Rhs)</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8cpp_source.html#l00337">FileCheck.cpp:337</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html_ad47eefa1d094f60494b6b927061ca001"><div class="ttname"><a href="classllvm_1_1LoadInst.html#ad47eefa1d094f60494b6b927061ca001">llvm::LoadInst::getPointerOperand</a></div><div class="ttdeci">Value * getPointerOperand()</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00264">Instructions.h:264</a></div></div>
<div class="ttc" id="aclassllvm_1_1FixedVectorType_html"><div class="ttname"><a href="classllvm_1_1FixedVectorType.html">llvm::FixedVectorType</a></div><div class="ttdoc">Class to represent fixed width SIMD vectors.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00525">DerivedTypes.h:525</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html_af51c113a039c82f6870df5dc9666b5e3"><div class="ttname"><a href="classllvm_1_1LoadInst.html#af51c113a039c82f6870df5dc9666b5e3">llvm::LoadInst::getAlign</a></div><div class="ttdeci">Align getAlign() const</div><div class="ttdoc">Return the alignment of the access that is being performed.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00220">Instructions.h:220</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a7ba5de75f50bb4a4ba920698edf39b28"><div class="ttname"><a href="classllvm_1_1Type.html#a7ba5de75f50bb4a4ba920698edf39b28">llvm::Type::getInt8Ty</a></div><div class="ttdeci">static IntegerType * getInt8Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00239">Type.cpp:239</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html_ac835b8735b1b2faec0efdca236e37d94"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#ac835b8735b1b2faec0efdca236e37d94">llvm::ArrayRef::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdoc">empty - Check if the array is empty.</div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00158">ArrayRef.h:158</a></div></div>
<div class="ttc" id="anamespacellvm_html_acd6aa057934751aaac54e5c18bcc18eb"><div class="ttname"><a href="namespacellvm.html#acd6aa057934751aaac54e5c18bcc18eb">llvm::commonAlignment</a></div><div class="ttdeci">Align commonAlignment(Align A, uint64_t Offset)</div><div class="ttdoc">Returns the alignment that satisfies both alignments.</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00212">Alignment.h:212</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00055">MD5.cpp:55</a></div></div>
<div class="ttc" id="aMachineValueType_8h_html"><div class="ttname"><a href="MachineValueType_8h.html">MachineValueType.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1BitmaskEnumDetail_html_a91efa71de05b0c2d00730a0279f58658"><div class="ttname"><a href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">llvm::BitmaskEnumDetail::Mask</a></div><div class="ttdeci">constexpr std::underlying_type_t&lt; E &gt; Mask()</div><div class="ttdoc">Get a bitmask with 1s in all places up to the high-order bit of E's largest value.</div><div class="ttdef"><b>Definition:</b> <a href="BitmaskEnum_8h_source.html#l00080">BitmaskEnum.h:80</a></div></div>
<div class="ttc" id="aIR_2Instruction_8h_html"><div class="ttname"><a href="IR_2Instruction_8h.html">Instruction.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1FixedVectorType_html_a1893caf878859959ba6a3d5442ef1439"><div class="ttname"><a href="classllvm_1_1FixedVectorType.html#a1893caf878859959ba6a3d5442ef1439">llvm::FixedVectorType::getNumElements</a></div><div class="ttdeci">unsigned getNumElements() const</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00568">DerivedTypes.h:568</a></div></div>
<div class="ttc" id="aConstraintElimination_8cpp_html_aaa871fff08f6d27fa94414400075a1ad"><div class="ttname"><a href="ConstraintElimination_8cpp.html#aaa871fff08f6d27fa94414400075a1ad">decompose</a></div><div class="ttdeci">static Decomposition decompose(Value *V, SmallVectorImpl&lt; PreconditionTy &gt; &amp;Preconditions, bool IsSigned, const DataLayout &amp;DL)</div><div class="ttdef"><b>Definition:</b> <a href="ConstraintElimination_8cpp_source.html#l00306">ConstraintElimination.cpp:306</a></div></div>
<div class="ttc" id="aConstants_8h_html"><div class="ttname"><a href="Constants_8h.html">Constants.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MVT_html_a2e101ce5736aa0643639fd3adae18088"><div class="ttname"><a href="classllvm_1_1MVT.html#a2e101ce5736aa0643639fd3adae18088">llvm::MVT::getScalarSizeInBits</a></div><div class="ttdeci">uint64_t getScalarSizeInBits() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineValueType_8h_source.html#l01144">MachineValueType.h:1144</a></div></div>
<div class="ttc" id="aSIInstrInfo_8cpp_html_a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791"><div class="ttname"><a href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a></div><div class="ttdeci">@ SI</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8cpp_source.html#l07993">SIInstrInfo.cpp:7993</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a1bc022868b23918efa44df511f4d5b61"><div class="ttname"><a href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">llvm::Type::isVectorTy</a></div><div class="ttdeci">bool isVectorTy() const</div><div class="ttdoc">True if this is an instance of VectorType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00258">Type.h:258</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_ac3ac4028df71f10fda029660ef66594d"><div class="ttname"><a href="lib_2Target_2README_8txt.html#ac3ac4028df71f10fda029660ef66594d">l</a></div><div class="ttdeci">This requires reassociating to forms of expressions that are already something that reassoc doesn t think about yet These two functions should generate the same code on big endian int * l</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00100">README.txt:100</a></div></div>
<div class="ttc" id="anamespacellvm_1_1dwarf_html_a5d3c920b66ea797d6adb243862fdf47a"><div class="ttname"><a href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">llvm::dwarf::Index</a></div><div class="ttdeci">Index</div><div class="ttdef"><b>Definition:</b> <a href="Dwarf_8h_source.html#l00550">Dwarf.h:550</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a7abf5fb4071cb25dbce06dfb5ee3c937"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a></div><div class="ttdeci">static GCRegistry::Add&lt; OcamlGC &gt; B(&quot;ocaml&quot;, &quot;ocaml 3.10-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00041">Instruction.h:41</a></div></div>
<div class="ttc" id="aX86InterleavedAccess_8cpp_html_a76c9562101f54d25482f88ae29ed6131"><div class="ttname"><a href="X86InterleavedAccess_8cpp.html#a76c9562101f54d25482f88ae29ed6131">Concat</a></div><div class="ttdeci">static constexpr int Concat[]</div><div class="ttdef"><b>Definition:</b> <a href="X86InterleavedAccess_8cpp_source.html#l00239">X86InterleavedAccess.cpp:239</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_ad0b3d8447f88377b62d9c019f3c4e118"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#ad0b3d8447f88377b62d9c019f3c4e118">llvm::SmallVectorImpl::resize</a></div><div class="ttdeci">void resize(size_type N)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00642">SmallVector.h:642</a></div></div>
<div class="ttc" id="aclassllvm_1_1FixedVectorType_html_af9a870d5df50fe0133a410b7c9114c80"><div class="ttname"><a href="classllvm_1_1FixedVectorType.html#af9a870d5df50fe0133a410b7c9114c80">llvm::FixedVectorType::get</a></div><div class="ttdeci">static FixedVectorType * get(Type *ElementType, unsigned NumElts)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00686">Type.cpp:686</a></div></div>
<div class="ttc" id="astructllvm_1_1Align_html"><div class="ttname"><a href="structllvm_1_1Align.html">llvm::Align</a></div><div class="ttdoc">This struct is a compact representation of a valid (non-zero power of two) alignment.</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00039">Alignment.h:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1ShuffleVectorInst_html_a50fe6a61ea745fb71fa8403af6e7deed"><div class="ttname"><a href="classllvm_1_1ShuffleVectorInst.html#a50fe6a61ea745fb71fa8403af6e7deed">llvm::ShuffleVectorInst::getType</a></div><div class="ttdeci">VectorType * getType() const</div><div class="ttdoc">Overload to return most specific vector type.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02063">Instructions.h:2063</a></div></div>
<div class="ttc" id="aType_8h_html"><div class="ttname"><a href="Type_8h.html">Type.h</a></div></div>
<div class="ttc" id="aX86InterleavedAccess_8cpp_html_a49570d8463bc060cddd7b65335685002"><div class="ttname"><a href="X86InterleavedAccess_8cpp.html#a49570d8463bc060cddd7b65335685002">genShuffleBland</a></div><div class="ttdeci">static void genShuffleBland(MVT VT, ArrayRef&lt; int &gt; Mask, SmallVectorImpl&lt; int &gt; &amp;Out, int LowOffset, int HighOffset)</div><div class="ttdef"><b>Definition:</b> <a href="X86InterleavedAccess_8cpp_source.html#l00261">X86InterleavedAccess.cpp:261</a></div></div>
<div class="ttc" id="aclassllvm_1_1VectorType_html"><div class="ttname"><a href="classllvm_1_1VectorType.html">llvm::VectorType</a></div><div class="ttdoc">Base class of all SIMD vector types.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00389">DerivedTypes.h:389</a></div></div>
<div class="ttc" id="aVectorUtils_8h_html"><div class="ttname"><a href="VectorUtils_8h.html">VectorUtils.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html_a161c2db145827f4e181e7fe662b53a81"><div class="ttname"><a href="classllvm_1_1LoadInst.html#a161c2db145827f4e181e7fe662b53a81">llvm::LoadInst::getPointerAddressSpace</a></div><div class="ttdeci">unsigned getPointerAddressSpace() const</div><div class="ttdoc">Returns the address space of the pointer operand.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00270">Instructions.h:270</a></div></div>
<div class="ttc" id="aclassllvm_1_1StoreInst_html"><div class="ttname"><a href="classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdoc">An instruction for storing to memory.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00301">Instructions.h:301</a></div></div>
<div class="ttc" id="aclassllvm_1_1MVT_html_a330aea6151cae3adaf5e179dcfe87346ae3d1acb736016d92ec470470f1c26065"><div class="ttname"><a href="classllvm_1_1MVT.html#a330aea6151cae3adaf5e179dcfe87346ae3d1acb736016d92ec470470f1c26065">llvm::MVT::v16i8</a></div><div class="ttdeci">@ v16i8</div><div class="ttdef"><b>Definition:</b> <a href="MachineValueType_8h_source.html#l00089">MachineValueType.h:89</a></div></div>
<div class="ttc" id="aclassllvm_1_1details_1_1FixedOrScalableQuantity_html_a1618ca92d9fa0b2b577698fb006b84cc"><div class="ttname"><a href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a1618ca92d9fa0b2b577698fb006b84cc">llvm::details::FixedOrScalableQuantity::isKnownMultipleOf</a></div><div class="ttdeci">constexpr bool isKnownMultipleOf(ScalarTy RHS) const</div><div class="ttdoc">This function tells the caller whether the element count is known at compile time to be a multiple of...</div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00175">TypeSize.h:175</a></div></div>
<div class="ttc" id="anamespacellvm_html_a79354a2324d1cc1c1fd42e5d8a771479"><div class="ttname"><a href="namespacellvm.html#a79354a2324d1cc1c1fd42e5d8a771479">llvm::createUnpackShuffleMask</a></div><div class="ttdeci">void createUnpackShuffleMask(EVT VT, SmallVectorImpl&lt; int &gt; &amp;Mask, bool Lo, bool Unary)</div><div class="ttdoc">Generate unpacklo/unpackhi shuffle mask.</div><div class="ttdef"><b>Definition:</b> <a href="X86ISelLowering_8cpp_source.html#l07144">X86ISelLowering.cpp:7144</a></div></div>
<div class="ttc" id="aELFObjHandler_8cpp_html_aef61945034b9431b804748fc317c5548"><div class="ttname"><a href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a></div><div class="ttdeci">uint32_t Index</div><div class="ttdef"><b>Definition:</b> <a href="ELFObjHandler_8cpp_source.html#l00083">ELFObjHandler.cpp:83</a></div></div>
<div class="ttc" id="anamespacellvm_1_1numbers_html_a92f4283d4e0e2ea1776894b3ae93640f"><div class="ttname"><a href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">llvm::numbers::e</a></div><div class="ttdeci">constexpr double e</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00031">MathExtras.h:31</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="anamespacellvm_html_a4288169d91ab0f0f01405115fd2931a7"><div class="ttname"><a href="namespacellvm.html#a4288169d91ab0f0f01405115fd2931a7">llvm::concatenateVectors</a></div><div class="ttdeci">Value * concatenateVectors(IRBuilderBase &amp;Builder, ArrayRef&lt; Value * &gt; Vecs)</div><div class="ttdoc">Concatenate a list of vectors.</div><div class="ttdef"><b>Definition:</b> <a href="VectorUtils_8cpp_source.html#l01038">VectorUtils.cpp:1038</a></div></div>
<div class="ttc" id="aArrayRef_8h_html"><div class="ttname"><a href="ArrayRef_8h.html">ArrayRef.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1details_1_1FixedOrScalableQuantity_html_a33880aaca0ad05e5f1557f079305bde5"><div class="ttname"><a href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#a33880aaca0ad05e5f1557f079305bde5">llvm::details::FixedOrScalableQuantity::getFixedValue</a></div><div class="ttdeci">constexpr ScalarTy getFixedValue() const</div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00182">TypeSize.h:182</a></div></div>
<div class="ttc" id="aclassllvm_1_1MVT_html_a3a371e99982e3168caf644d82298fcac"><div class="ttname"><a href="classllvm_1_1MVT.html#a3a371e99982e3168caf644d82298fcac">llvm::MVT::getVectorNumElements</a></div><div class="ttdeci">unsigned getVectorNumElements() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineValueType_8h_source.html#l00911">MachineValueType.h:911</a></div></div>
<div class="ttc" id="aclassllvm_1_1MVT_html_a330aea6151cae3adaf5e179dcfe87346af777e086e32f60c0c87b460964eae7d0"><div class="ttname"><a href="classllvm_1_1MVT.html#a330aea6151cae3adaf5e179dcfe87346af777e086e32f60c0c87b460964eae7d0">llvm::MVT::i8</a></div><div class="ttdeci">@ i8</div><div class="ttdef"><b>Definition:</b> <a href="MachineValueType_8h_source.html#l00046">MachineValueType.h:46</a></div></div>
<div class="ttc" id="aIRBuilder_8h_html"><div class="ttname"><a href="IRBuilder_8h.html">IRBuilder.h</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="aclassllvm_1_1MVT_html_a7be7c6dd92efc0d6f866d4a3b433eed0"><div class="ttname"><a href="classllvm_1_1MVT.html#a7be7c6dd92efc0d6f866d4a3b433eed0">llvm::MVT::getSizeInBits</a></div><div class="ttdeci">TypeSize getSizeInBits() const</div><div class="ttdoc">Returns the size of the specified MVT in bits.</div><div class="ttdef"><b>Definition:</b> <a href="MachineValueType_8h_source.html#l00925">MachineValueType.h:925</a></div></div>
<div class="ttc" id="aclassllvm_1_1MVT_html"><div class="ttname"><a href="classllvm_1_1MVT.html">llvm::MVT</a></div><div class="ttdoc">Machine Value Type.</div><div class="ttdef"><b>Definition:</b> <a href="MachineValueType_8h_source.html#l00031">MachineValueType.h:31</a></div></div>
<div class="ttc" id="aAssumeBundleBuilder_8cpp_html_afb136e0532bcaed86521b462e6538d62"><div class="ttname"><a href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a></div><div class="ttdeci">assume Assume Builder</div><div class="ttdef"><b>Definition:</b> <a href="AssumeBundleBuilder_8cpp_source.html#l00651">AssumeBundleBuilder.cpp:651</a></div></div>
<div class="ttc" id="aM68kELFObjectWriter_8cpp_html_ae4a8bc3879d2282eefd72b16b12c2a37"><div class="ttname"><a href="M68kELFObjectWriter_8cpp.html#ae4a8bc3879d2282eefd72b16b12c2a37">getType</a></div><div class="ttdeci">static M68kRelType getType(unsigned Kind, MCSymbolRefExpr::VariantKind &amp;Modifier, bool &amp;IsPCRel)</div><div class="ttdef"><b>Definition:</b> <a href="M68kELFObjectWriter_8cpp_source.html#l00048">M68kELFObjectWriter.cpp:48</a></div></div>
<div class="ttc" id="aclassllvm_1_1MVT_html_abf8d0055af4879a302268d3f834b2be5"><div class="ttname"><a href="classllvm_1_1MVT.html#abf8d0055af4879a302268d3f834b2be5">llvm::MVT::getVectorVT</a></div><div class="ttdeci">static MVT getVectorVT(MVT VT, unsigned NumElements)</div><div class="ttdef"><b>Definition:</b> <a href="MachineValueType_8h_source.html#l01269">MachineValueType.h:1269</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef</a></div><div class="ttdoc">ArrayRef - Represent a constant reference to an array (0 or more elements consecutively in memory),...</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00033">APInt.h:33</a></div></div>
<div class="ttc" id="aLiveRegMatrix_8cpp_html_a8989acb71bd355e02bcf3a930b5e54ea"><div class="ttname"><a href="LiveRegMatrix_8cpp.html#a8989acb71bd355e02bcf3a930b5e54ea">Matrix</a></div><div class="ttdeci">Live Register Matrix</div><div class="ttdef"><b>Definition:</b> <a href="LiveRegMatrix_8cpp_source.html#l00044">LiveRegMatrix.cpp:44</a></div></div>
<div class="ttc" id="aDataLayout_8h_html"><div class="ttname"><a href="DataLayout_8h.html">DataLayout.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4"><div class="ttname"><a href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">llvm::Offset</a></div><div class="ttdeci">@ Offset</div><div class="ttdef"><b>Definition:</b> <a href="DWP_8cpp_source.html#l00406">DWP.cpp:406</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a6393a2d4fe7e10b28a0dcc35f881567b"><div class="ttname"><a href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const</div><div class="ttdoc">All values are typed, get the type of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00255">Value.h:255</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ab3fc0225d8aaf8434026c3573f961f2c"><div class="ttname"><a href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">All values hold a context through their type.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00994">Value.cpp:994</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_ad467c4ab9119043f9b7750ab986be61a"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a></div><div class="ttdeci">MachineBasicBlock MachineBasicBlock::iterator DebugLoc DL</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00076">AArch64SLSHardening.cpp:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html"><div class="ttname"><a href="classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdoc">An instruction for reading from memory.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00177">Instructions.h:177</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_a3a76669632041022e6976766a22bd2b0"><div class="ttname"><a href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a></div><div class="ttdeci">return j(j&lt;&lt; 16)</div></div>
<div class="ttc" id="aX86InterleavedAccess_8cpp_html_aeaf0abeac6c9f6e4698dd90c080611fa"><div class="ttname"><a href="X86InterleavedAccess_8cpp.html#aeaf0abeac6c9f6e4698dd90c080611fa">reorderSubVector</a></div><div class="ttdeci">static void reorderSubVector(MVT VT, SmallVectorImpl&lt; Value * &gt; &amp;TransposedMatrix, ArrayRef&lt; Value * &gt; Vec, ArrayRef&lt; int &gt; VPShuf, unsigned VecElems, unsigned Stride, IRBuilder&lt;&gt; &amp;Builder)</div><div class="ttdef"><b>Definition:</b> <a href="X86InterleavedAccess_8cpp_source.html#l00291">X86InterleavedAccess.cpp:291</a></div></div>
<div class="ttc" id="aclassllvm_1_1MVT_html_a330aea6151cae3adaf5e179dcfe87346a97a9e92da302a5dd0ff02cf2587d7db3"><div class="ttname"><a href="classllvm_1_1MVT.html#a330aea6151cae3adaf5e179dcfe87346a97a9e92da302a5dd0ff02cf2587d7db3">llvm::MVT::v8i16</a></div><div class="ttdeci">@ v8i16</div><div class="ttdef"><b>Definition:</b> <a href="MachineValueType_8h_source.html#l00101">MachineValueType.h:101</a></div></div>
<div class="ttc" id="aCasting_8h_html"><div class="ttname"><a href="Casting_8h.html">Casting.h</a></div></div>
<div class="ttc" id="aX86InterleavedAccess_8cpp_html_a5bc9bd66618581850aca0d4ac86e6281"><div class="ttname"><a href="X86InterleavedAccess_8cpp.html#a5bc9bd66618581850aca0d4ac86e6281">scaleVectorType</a></div><div class="ttdeci">static MVT scaleVectorType(MVT VT)</div><div class="ttdef"><b>Definition:</b> <a href="X86InterleavedAccess_8cpp_source.html#l00233">X86InterleavedAccess.cpp:233</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_adc01a7457de85fc52a3bb860d7e1c6a4"><div class="ttname"><a href="classllvm_1_1Type.html#adc01a7457de85fc52a3bb860d7e1c6a4">llvm::Type::getPointerTo</a></div><div class="ttdeci">PointerType * getPointerTo(unsigned AddrSpace=0) const</div><div class="ttdoc">Return a pointer to the current type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00776">Type.cpp:776</a></div></div>
<div class="ttc" id="aX86ISelLowering_8h_html"><div class="ttname"><a href="X86ISelLowering_8h.html">X86ISelLowering.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00614">SmallVector.h:614</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVMatInt_html_a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c"><div class="ttname"><a href="namespacellvm_1_1RISCVMatInt.html#a3c9bceaea514f7c01e87dcb184d3c972a3b5b9d77cc1b7c08af3a3cdba0c6736c">llvm::RISCVMatInt::Imm</a></div><div class="ttdeci">@ Imm</div><div class="ttdef"><b>Definition:</b> <a href="RISCVMatInt_8h_source.html#l00023">RISCVMatInt.h:23</a></div></div>
<div class="ttc" id="aclassllvm_1_1ShuffleVectorInst_html"><div class="ttname"><a href="classllvm_1_1ShuffleVectorInst.html">llvm::ShuffleVectorInst</a></div><div class="ttdoc">This instruction constructs a fixed permutation of two input vectors.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02017">Instructions.h:2017</a></div></div>
<div class="ttc" id="aInstructions_8h_html"><div class="ttname"><a href="Instructions_8h.html">Instructions.h</a></div></div>
<div class="ttc" id="aSmallVector_8h_html"><div class="ttname"><a href="SmallVector_8h.html">SmallVector.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html_a85ffb6531d4cda988ea81f18d4e56fb7"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#a85ffb6531d4cda988ea81f18d4e56fb7">llvm::ArrayRef::size</a></div><div class="ttdeci">size_t size() const</div><div class="ttdoc">size - Get the array size.</div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00163">ArrayRef.h:163</a></div></div>
<div class="ttc" id="aclassllvm_1_1MVT_html_a56bb53e2d0b01c78c8c538f903fd45b8"><div class="ttname"><a href="classllvm_1_1MVT.html#a56bb53e2d0b01c78c8c538f903fd45b8">llvm::MVT::getVT</a></div><div class="ttdeci">static MVT getVT(Type *Ty, bool HandleUnknown=false)</div><div class="ttdoc">Return the value type corresponding to the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="ValueTypes_8cpp_source.html#l00571">ValueTypes.cpp:571</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl&lt; Instruction * &gt;</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab9c6b351507d3c0730f4290919d43a12"><div class="ttname"><a href="namespacellvm.html#ab9c6b351507d3c0730f4290919d43a12">llvm::ArrayRef</a></div><div class="ttdeci">ArrayRef(const T &amp;OneElt) -&gt; ArrayRef&lt; T &gt;</div></div>
<div class="ttc" id="aDerivedTypes_8h_html"><div class="ttname"><a href="DerivedTypes_8h.html">DerivedTypes.h</a></div></div>
<div class="ttc" id="aX86InterleavedAccess_8cpp_html_ad6fab051afe7926d360bac2cd1e82819"><div class="ttname"><a href="X86InterleavedAccess_8cpp.html#ad6fab051afe7926d360bac2cd1e82819">concatSubVector</a></div><div class="ttdeci">static void concatSubVector(Value **Vec, ArrayRef&lt; Instruction * &gt; InVec, unsigned VecElems, IRBuilder&lt;&gt; &amp;Builder)</div><div class="ttdef"><b>Definition:</b> <a href="X86InterleavedAccess_8cpp_source.html#l00526">X86InterleavedAccess.cpp:526</a></div></div>
<div class="ttc" id="aX86InterleavedAccess_8cpp_html_adcbb3fbae2a0dfe66454040a45525a95"><div class="ttname"><a href="X86InterleavedAccess_8cpp.html#adcbb3fbae2a0dfe66454040a45525a95">setGroupSize</a></div><div class="ttdeci">static void setGroupSize(MVT VT, SmallVectorImpl&lt; int &gt; &amp;SizeInfo)</div><div class="ttdef"><b>Definition:</b> <a href="X86InterleavedAccess_8cpp_source.html#l00454">X86InterleavedAccess.cpp:454</a></div></div>
<div class="ttc" id="anamespacellvm_html_af00a6f39da9d94ec387a366ade60aea5"><div class="ttname"><a href="namespacellvm.html#af00a6f39da9d94ec387a366ade60aea5">llvm::createSequentialMask</a></div><div class="ttdeci">llvm::SmallVector&lt; int, 16 &gt; createSequentialMask(unsigned Start, unsigned NumInts, unsigned NumUndefs)</div><div class="ttdoc">Create a sequential shuffle mask.</div><div class="ttdef"><b>Definition:</b> <a href="VectorUtils_8cpp_source.html#l00983">VectorUtils.cpp:983</a></div></div>
<div class="ttc" id="alib_2Target_2WebAssembly_2README_8txt_html_a79ea041233b5866026c3071dfc464ec0"><div class="ttname"><a href="lib_2Target_2WebAssembly_2README_8txt.html#a79ea041233b5866026c3071dfc464ec0">copy</a></div><div class="ttdeci">we should consider alternate ways to model stack dependencies Lots of things could be done in WebAssemblyTargetTransformInfo cpp there are numerous optimization related hooks that can be overridden in WebAssemblyTargetLowering Instead of the OptimizeReturned which should consider preserving the returned attribute through to MachineInstrs and extending the MemIntrinsicResults pass to do this optimization on calls too That would also let the WebAssemblyPeephole pass clean up dead defs for such as it does for stores Consider implementing and or getMachineCombinerPatterns Find a clean way to fix the problem which leads to the Shrink Wrapping pass being run after the WebAssembly PEI pass When setting multiple variables to the same we currently get code like const It could be done with a smaller encoding like local tee $pop5 local copy</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2WebAssembly_2README_8txt_source.html#l00101">README.txt:101</a></div></div>
<div class="ttc" id="aValue_8h_html"><div class="ttname"><a href="Value_8h.html">Value.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1X86TargetLowering_html_ab5881269962ffb5a6c2d4c5be45efbce"><div class="ttname"><a href="classllvm_1_1X86TargetLowering.html#ab5881269962ffb5a6c2d4c5be45efbce">llvm::X86TargetLowering::lowerInterleavedStore</a></div><div class="ttdeci">bool lowerInterleavedStore(StoreInst *SI, ShuffleVectorInst *SVI, unsigned Factor) const override</div><div class="ttdoc">Lower interleaved store(s) into target specific instructions/intrinsics.</div><div class="ttdef"><b>Definition:</b> <a href="X86InterleavedAccess_8cpp_source.html#l00827">X86InterleavedAccess.cpp:827</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00074">Value.h:74</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sampleprof_html_a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41"><div class="ttname"><a href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">llvm::sampleprof::Base</a></div><div class="ttdeci">@ Base</div><div class="ttdef"><b>Definition:</b> <a href="Discriminator_8h_source.html#l00058">Discriminator.h:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a833daf718a49c5cd637d8c9ddeaebe07"><div class="ttname"><a href="classllvm_1_1Type.html#a833daf718a49c5cd637d8c9ddeaebe07">llvm::Type::getPrimitiveSizeInBits</a></div><div class="ttdeci">TypeSize getPrimitiveSizeInBits() const LLVM_READONLY</div><div class="ttdoc">Return the basic size of this type if it is a primitive type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00163">Type.cpp:163</a></div></div>
<div class="ttc" id="aclassllvm_1_1MVT_html_aded931e298cfa08b5038ca2b63c06bb8"><div class="ttname"><a href="classllvm_1_1MVT.html#aded931e298cfa08b5038ca2b63c06bb8">llvm::MVT::getIntegerVT</a></div><div class="ttdeci">static MVT getIntegerVT(unsigned BitWidth)</div><div class="ttdef"><b>Definition:</b> <a href="MachineValueType_8h_source.html#l01246">MachineValueType.h:1246</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:22:01 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/FuzzMutate/RandomIRBuilder.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_066ca1f1280ac7bad61b891520f682ee.html">FuzzMutate</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">RandomIRBuilder.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="RandomIRBuilder_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===-- RandomIRBuilder.cpp -----------------------------------------------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160; </div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="RandomIRBuilder_8h.html">llvm/FuzzMutate/RandomIRBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="STLExtras_8h.html">llvm/ADT/STLExtras.h</a>&quot;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="OpDescriptor_8h.html">llvm/FuzzMutate/OpDescriptor.h</a>&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Random_8h.html">llvm/FuzzMutate/Random.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlock_8h.html">llvm/IR/BasicBlock.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constants_8h.html">llvm/IR/Constants.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DataLayout_8h.html">llvm/IR/DataLayout.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Instructions_8h.html">llvm/IR/Instructions.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IntrinsicInst_8h.html">llvm/IR/IntrinsicInst.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160; </div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keyword">using namespace </span>fuzzerop;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160; </div>
<div class="line"><a name="l00022"></a><span class="lineno"><a class="line" href="structllvm_1_1RandomIRBuilder.html#a47a923aecde90d3d6e66e00bab23318d">   22</a></span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="structllvm_1_1RandomIRBuilder.html#a47a923aecde90d3d6e66e00bab23318d">RandomIRBuilder::findOrCreateSource</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;                                           <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Instruction *&gt;</a> Insts) {</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;  <span class="keywordflow">return</span> findOrCreateSource(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Insts, {}, <a class="code" href="namespacellvm_1_1fuzzerop.html#af3c5de240d0947d7b2abb53690cdce7b">anyType</a>());</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;}</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160; </div>
<div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="structllvm_1_1RandomIRBuilder.html#a8688fe7e12511bba710a19b4aaf027a1">   27</a></span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="structllvm_1_1RandomIRBuilder.html#a47a923aecde90d3d6e66e00bab23318d">RandomIRBuilder::findOrCreateSource</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;                                           <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Instruction *&gt;</a> Insts,</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;                                           <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Value *&gt;</a> Srcs,</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;                                           <a class="code" href="classllvm_1_1fuzzerop_1_1SourcePred.html">SourcePred</a> Pred,</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;                                           <span class="keywordtype">bool</span> allowConstant) {</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  <span class="keyword">auto</span> MatchesPred = [&amp;Srcs, &amp;Pred](<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst) {</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <span class="keywordflow">return</span> Pred.<a class="code" href="classllvm_1_1fuzzerop_1_1SourcePred.html#a3396d8b14dbd006a057abef07514d4f3">matches</a>(Srcs, Inst);</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  };</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <span class="keyword">auto</span> RS = <a class="code" href="namespacellvm.html#ac836cd380a57a4c99abcdf60dc901984">makeSampler</a>(Rand, <a class="code" href="namespacellvm.html#a943f22024cba236f495239754ca3c74b">make_filter_range</a>(Insts, MatchesPred));</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  <span class="comment">// Also consider choosing no source, meaning we want a new one.</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  RS.sample(<span class="keyword">nullptr</span>, <span class="comment">/*Weight=*/</span>1);</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Src = RS.getSelection())</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="keywordflow">return</span> Src;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <span class="keywordflow">return</span> newSource(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Insts, Srcs, Pred, allowConstant);</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;}</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; </div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="structllvm_1_1RandomIRBuilder.html#a8b569b7040c15c2e2233b3064caa8f4f">   43</a></span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="structllvm_1_1RandomIRBuilder.html#a8b569b7040c15c2e2233b3064caa8f4f">RandomIRBuilder::newSource</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Instruction *&gt;</a> Insts,</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;                                  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Value *&gt;</a> Srcs, <a class="code" href="classllvm_1_1fuzzerop_1_1SourcePred.html">SourcePred</a> Pred,</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;                                  <span class="keywordtype">bool</span> allowConstant) {</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="comment">// Generate some constants to choose from.</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <span class="keyword">auto</span> RS = makeSampler&lt;Value *&gt;(Rand);</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  RS.sample(Pred.<a class="code" href="classllvm_1_1fuzzerop_1_1SourcePred.html#a67e5e9e86b7a1d2f00aea28157ffc7ba">generate</a>(Srcs, KnownTypes));</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160; </div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <span class="comment">// If we can find a pointer to load from, use it half the time.</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = findPointer(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Insts, Srcs, Pred);</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>) {</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="comment">// Create load from the chosen pointer</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keyword">auto</span> IP = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.getFirstInsertionPt();</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>)) {</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;      IP = ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getIterator();</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IP != <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.end() &amp;&amp; <span class="stringliteral">&quot;guaranteed by the findPointer&quot;</span>);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    }</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="comment">// For opaque pointers, pick the type independently.</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *AccessTy = <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>-&gt;getType()-&gt;isOpaquePointerTy()</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;                         ? RS.getSelection()-&gt;getType()</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                         : <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>-&gt;getType()-&gt;getNonOpaquePointerElementType();</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keyword">auto</span> *NewLoad = <span class="keyword">new</span> <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a>(AccessTy, <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, <span class="stringliteral">&quot;L&quot;</span>, &amp;*IP);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="comment">// Only sample this load if it really matches the descriptor</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordflow">if</span> (Pred.<a class="code" href="classllvm_1_1fuzzerop_1_1SourcePred.html#a3396d8b14dbd006a057abef07514d4f3">matches</a>(Srcs, NewLoad))</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;      RS.sample(NewLoad, RS.totalWeight());</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;      NewLoad-&gt;eraseFromParent();</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  }</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160; </div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *newSrc = RS.getSelection();</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="comment">// Generate a stack alloca and store the constant to it if constant is not</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="comment">// allowed, our hope is that later mutations can generate some values and</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="comment">// store to this placeholder.</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="keywordflow">if</span> (!allowConstant &amp;&amp; isa&lt;Constant&gt;(newSrc)) {</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = newSrc-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.getParent();</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *EntryBB = &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getEntryBlock();<span class="comment"></span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">    /// TODO: For all Allocas, maybe allocate an array.</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment"></span>    <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.getParent()-&gt;getParent());</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *Alloca = <span class="keyword">new</span> <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a>(Ty, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getProgramAddressSpace(), <span class="stringliteral">&quot;A&quot;</span>,</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                                        EntryBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keyword">new</span> <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a>(newSrc, Alloca, EntryBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.getTerminator()) {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;      newSrc = <span class="keyword">new</span> <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a>(Ty, Alloca, <span class="comment">/*ArrLen,*/</span> <span class="stringliteral">&quot;L&quot;</span>, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.getTerminator());</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;      newSrc = <span class="keyword">new</span> <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a>(Ty, Alloca, <span class="comment">/*ArrLen,*/</span> <span class="stringliteral">&quot;L&quot;</span>, &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    }</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  }</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="keywordflow">return</span> newSrc;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;}</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="RandomIRBuilder_8cpp.html#a04a8af897aa17e64fedac0215ae4e705">   94</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="RandomIRBuilder_8cpp.html#a04a8af897aa17e64fedac0215ae4e705">isCompatibleReplacement</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Use.html">Use</a> &amp;Operand,</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                                    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *Replacement) {</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> OperandNo = Operand.<a class="code" href="classllvm_1_1Use.html#a541187eb976df2189b40b3f62ed2cee0">getOperandNo</a>();</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="keywordflow">if</span> (Operand-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() != Replacement-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode()) {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="keywordflow">case</span> Instruction::GetElementPtr:</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="keywordflow">case</span> Instruction::ExtractElement:</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="keywordflow">case</span> Instruction::ExtractValue:</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="comment">// TODO: We could potentially validate these, but for now just leave indices</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="comment">// alone.</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordflow">if</span> (OperandNo &gt;= 1)</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="keywordflow">case</span> Instruction::InsertValue:</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="keywordflow">case</span> Instruction::InsertElement:</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="keywordflow">case</span> Instruction::ShuffleVector:</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordflow">if</span> (OperandNo &gt;= 2)</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="comment">// For Br/Switch, we only try to modify the 1st Operand (condition).</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="comment">// Modify other operands, like switch case may accidently change case from</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="comment">// ConstantInt to a register, which is illegal.</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="keywordflow">case</span> Instruction::Switch:</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="keywordflow">case</span> Instruction::Br:</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keywordflow">if</span> (OperandNo &gt;= 1)</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  }</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;}</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="structllvm_1_1RandomIRBuilder.html#adfff936c94a9a7ed2da1f55a008b32ce">  128</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structllvm_1_1RandomIRBuilder.html#adfff936c94a9a7ed2da1f55a008b32ce">RandomIRBuilder::connectToSink</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                                    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Instruction *&gt;</a> Insts, <a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="keyword">auto</span> RS = makeSampler&lt;Use *&gt;(Rand);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : Insts) {</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">if</span> (isa&lt;IntrinsicInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      <span class="comment">// TODO: Replacing operands of intrinsics would be interesting, but</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      <span class="comment">// there&#39;s no easy way to verify that a given replacement is valid given</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      <span class="comment">// that intrinsics can impose arbitrary constraints.</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;operands())</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="RandomIRBuilder_8cpp.html#a04a8af897aa17e64fedac0215ae4e705">isCompatibleReplacement</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, U, V))</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        RS.sample(&amp;U, 1);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  }</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="comment">// Also consider choosing no sink, meaning we want a new one.</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  RS.sample(<span class="keyword">nullptr</span>, <span class="comment">/*Weight=*/</span>1);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Use.html">Use</a> *<a class="code" href="namespacellvm_1_1cl.html#ac96f30ba8b117dbd380b88ab8a03732ba1e82b710efc2f25cc275e53b3833e6fa">Sink</a> = RS.getSelection()) {</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <a class="code" href="classllvm_1_1User.html">User</a> *U = <a class="code" href="namespacellvm_1_1cl.html#ac96f30ba8b117dbd380b88ab8a03732ba1e82b710efc2f25cc275e53b3833e6fa">Sink</a>-&gt;getUser();</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordtype">unsigned</span> OpNo = <a class="code" href="namespacellvm_1_1cl.html#ac96f30ba8b117dbd380b88ab8a03732ba1e82b710efc2f25cc275e53b3833e6fa">Sink</a>-&gt;getOperandNo();</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    U-&gt;<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(OpNo, V);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  }</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  newSink(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Insts, V);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;}</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160; </div>
<div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="structllvm_1_1RandomIRBuilder.html#ab03f89574e4c65a5385dcc3c0d1b2590">  153</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structllvm_1_1RandomIRBuilder.html#ab03f89574e4c65a5385dcc3c0d1b2590">RandomIRBuilder::newSink</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Instruction *&gt;</a> Insts,</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                              <a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = findPointer(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Insts, {V}, <a class="code" href="namespacellvm_1_1fuzzerop.html#ad3d7a249e54c1fd78688913ffcc2e899">matchFirstType</a>());</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>) {</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#af2a9add76255a5e6dc09b1a5f9505f21">uniform</a>(Rand, 0, 1))</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = <span class="keyword">new</span> <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a>(V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), 0, <span class="stringliteral">&quot;A&quot;</span>, &amp;*<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.getFirstInsertionPt());</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(<a class="code" href="classllvm_1_1PointerType.html#a050a395d1656e546679d8b144d951bb2">PointerType::get</a>(V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), 0));</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  }</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160; </div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <span class="keyword">new</span> <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a>(V, <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, Insts.<a class="code" href="classllvm_1_1ArrayRef.html#adb38eaaa53c1d9c57b6fe11cf84bd7a4">back</a>());</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;}</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160; </div>
<div class="line"><a name="l00166"></a><span class="lineno"><a class="line" href="structllvm_1_1RandomIRBuilder.html#aca02669ded885a7ebb40be11cabd9e76">  166</a></span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="structllvm_1_1RandomIRBuilder.html#aca02669ded885a7ebb40be11cabd9e76">RandomIRBuilder::findPointer</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                                    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Instruction *&gt;</a> Insts,</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                                    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Value *&gt;</a> Srcs, <a class="code" href="classllvm_1_1fuzzerop_1_1SourcePred.html">SourcePred</a> Pred) {</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="keyword">auto</span> IsMatchingPtr = [&amp;Srcs, &amp;Pred](<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst) {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="comment">// Invoke instructions sometimes produce valid pointers but currently</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="comment">// we can&#39;t insert loads or stores from them</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">if</span> (Inst-&gt;isTerminator())</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *PtrTy = dyn_cast&lt;PointerType&gt;(Inst-&gt;getType())) {</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      <span class="keywordflow">if</span> (PtrTy-&gt;isOpaque())</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160; </div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      <span class="comment">// We can never generate loads from non first class or non sized types</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *ElemTy = PtrTy-&gt;<a class="code" href="classllvm_1_1Type.html#abceff71202e0269065cf32a2f750a9be">getNonOpaquePointerElementType</a>();</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      <span class="keywordflow">if</span> (!ElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#a8ad67a33bae235fe3cca1c3e5a91ed2d">isSized</a>() || !ElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#a82a7e98c00f5bb12e2c5481fe0ab3f1a">isFirstClassType</a>())</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      <span class="comment">// TODO: Check if this is horribly expensive.</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      <span class="keywordflow">return</span> Pred.<a class="code" href="classllvm_1_1fuzzerop_1_1SourcePred.html#a3396d8b14dbd006a057abef07514d4f3">matches</a>(Srcs, <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(ElemTy));</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    }</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  };</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> RS = <a class="code" href="namespacellvm.html#ac836cd380a57a4c99abcdf60dc901984">makeSampler</a>(Rand, <a class="code" href="namespacellvm.html#a943f22024cba236f495239754ca3c74b">make_filter_range</a>(Insts, IsMatchingPtr)))</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">return</span> RS.getSelection();</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;}</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160; </div>
<div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="structllvm_1_1RandomIRBuilder.html#afde61f758ce6c73015640b4cf6087a76">  194</a></span>&#160;<a class="code" href="classllvm_1_1Type.html">Type</a> *<a class="code" href="structllvm_1_1RandomIRBuilder.html#afde61f758ce6c73015640b4cf6087a76">RandomIRBuilder::randomType</a>() {</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> TyIdx = uniform&lt;uint64_t&gt;(Rand, 0, KnownTypes.size() - 1);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <span class="keywordflow">return</span> KnownTypes[TyIdx];</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aOpDescriptor_8h_html"><div class="ttname"><a href="OpDescriptor_8h.html">OpDescriptor.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a8ad67a33bae235fe3cca1c3e5a91ed2d"><div class="ttname"><a href="classllvm_1_1Type.html#a8ad67a33bae235fe3cca1c3e5a91ed2d">llvm::Type::isSized</a></div><div class="ttdeci">bool isSized(SmallPtrSetImpl&lt; Type * &gt; *Visited=nullptr) const</div><div class="ttdoc">Return true if it makes sense to take the size of this type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00295">Type.h:295</a></div></div>
<div class="ttc" id="astructllvm_1_1RandomIRBuilder_html_a47a923aecde90d3d6e66e00bab23318d"><div class="ttname"><a href="structllvm_1_1RandomIRBuilder.html#a47a923aecde90d3d6e66e00bab23318d">llvm::RandomIRBuilder::findOrCreateSource</a></div><div class="ttdeci">Value * findOrCreateSource(BasicBlock &amp;BB, ArrayRef&lt; Instruction * &gt; Insts)</div><div class="ttdoc">Find a &quot;source&quot; for some operation, which will be used in one of the operation's operands.</div><div class="ttdef"><b>Definition:</b> <a href="RandomIRBuilder_8cpp_source.html#l00022">RandomIRBuilder.cpp:22</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aclassllvm_1_1DataLayout_html"><div class="ttname"><a href="classllvm_1_1DataLayout.html">llvm::DataLayout</a></div><div class="ttdoc">A parsed version of the target data layout string in and methods for querying it.</div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00110">DataLayout.h:110</a></div></div>
<div class="ttc" id="aIntrinsicInst_8h_html"><div class="ttname"><a href="IntrinsicInst_8h.html">IntrinsicInst.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00059">Function.h:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1PointerType_html_a050a395d1656e546679d8b144d951bb2"><div class="ttname"><a href="classllvm_1_1PointerType.html#a050a395d1656e546679d8b144d951bb2">llvm::PointerType::get</a></div><div class="ttdeci">static PointerType * get(Type *ElementType, unsigned AddressSpace)</div><div class="ttdoc">This constructs a pointer to an object of the specified type in a numbered address space.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00729">Type.cpp:729</a></div></div>
<div class="ttc" id="astructllvm_1_1RandomIRBuilder_html_aca02669ded885a7ebb40be11cabd9e76"><div class="ttname"><a href="structllvm_1_1RandomIRBuilder.html#aca02669ded885a7ebb40be11cabd9e76">llvm::RandomIRBuilder::findPointer</a></div><div class="ttdeci">Value * findPointer(BasicBlock &amp;BB, ArrayRef&lt; Instruction * &gt; Insts, ArrayRef&lt; Value * &gt; Srcs, fuzzerop::SourcePred Pred)</div><div class="ttdef"><b>Definition:</b> <a href="RandomIRBuilder_8cpp_source.html#l00166">RandomIRBuilder.cpp:166</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdoc">The instances of the Type class are immutable: once they are created, they are never changed.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="aclassllvm_1_1Use_html_a541187eb976df2189b40b3f62ed2cee0"><div class="ttname"><a href="classllvm_1_1Use.html#a541187eb976df2189b40b3f62ed2cee0">llvm::Use::getOperandNo</a></div><div class="ttdeci">unsigned getOperandNo() const</div><div class="ttdoc">Return the operand # of this use in its User.</div><div class="ttdef"><b>Definition:</b> <a href="Use_8cpp_source.html#l00031">Use.cpp:31</a></div></div>
<div class="ttc" id="aSTLExtras_8h_html"><div class="ttname"><a href="STLExtras_8h.html">STLExtras.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_abceff71202e0269065cf32a2f750a9be"><div class="ttname"><a href="classllvm_1_1Type.html#abceff71202e0269065cf32a2f750a9be">llvm::Type::getNonOpaquePointerElementType</a></div><div class="ttdeci">Type * getNonOpaquePointerElementType() const</div><div class="ttdoc">Only use this method in code that is not reachable with opaque pointers, or part of deprecated method...</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00416">Type.h:416</a></div></div>
<div class="ttc" id="anamespacellvm_1_1fuzzerop_html_ad3d7a249e54c1fd78688913ffcc2e899"><div class="ttname"><a href="namespacellvm_1_1fuzzerop.html#ad3d7a249e54c1fd78688913ffcc2e899">llvm::fuzzerop::matchFirstType</a></div><div class="ttdeci">static SourcePred matchFirstType()</div><div class="ttdoc">Match values that have the same type as the first source.</div><div class="ttdef"><b>Definition:</b> <a href="OpDescriptor_8h_source.html#l00194">OpDescriptor.h:194</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00055">MD5.cpp:55</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00055">BasicBlock.h:55</a></div></div>
<div class="ttc" id="astructllvm_1_1RandomIRBuilder_html_a8b569b7040c15c2e2233b3064caa8f4f"><div class="ttname"><a href="structllvm_1_1RandomIRBuilder.html#a8b569b7040c15c2e2233b3064caa8f4f">llvm::RandomIRBuilder::newSource</a></div><div class="ttdeci">Value * newSource(BasicBlock &amp;BB, ArrayRef&lt; Instruction * &gt; Insts, ArrayRef&lt; Value * &gt; Srcs, fuzzerop::SourcePred Pred, bool allowConstant=true)</div><div class="ttdoc">Create some Value suitable as a source for some operation.</div><div class="ttdef"><b>Definition:</b> <a href="RandomIRBuilder_8cpp_source.html#l00043">RandomIRBuilder.cpp:43</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html_adb38eaaa53c1d9c57b6fe11cf84bd7a4"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#adb38eaaa53c1d9c57b6fe11cf84bd7a4">llvm::ArrayRef::back</a></div><div class="ttdeci">const T &amp; back() const</div><div class="ttdoc">back - Get the last element.</div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00172">ArrayRef.h:172</a></div></div>
<div class="ttc" id="aConstants_8h_html"><div class="ttname"><a href="Constants_8h.html">Constants.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1fuzzerop_html_af3c5de240d0947d7b2abb53690cdce7b"><div class="ttname"><a href="namespacellvm_1_1fuzzerop.html#af3c5de240d0947d7b2abb53690cdce7b">llvm::fuzzerop::anyType</a></div><div class="ttdeci">static SourcePred anyType()</div><div class="ttdef"><b>Definition:</b> <a href="OpDescriptor_8h_source.html#l00104">OpDescriptor.h:104</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html"><div class="ttname"><a href="classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00044">User.h:44</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00041">Instruction.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1UndefValue_html_a4ae5ff22b700a42bcc5d889233721335"><div class="ttname"><a href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">llvm::UndefValue::get</a></div><div class="ttdeci">static UndefValue * get(Type *T)</div><div class="ttdoc">Static factory methods - Return an 'undef' object of the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01740">Constants.cpp:1740</a></div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_a07ed0bfaa124c15897944fe3eaa971ab"><div class="ttname"><a href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned long or uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="aRandomIRBuilder_8h_html"><div class="ttname"><a href="RandomIRBuilder_8h.html">RandomIRBuilder.h</a></div></div>
<div class="ttc" id="aBasicBlock_8h_html"><div class="ttname"><a href="BasicBlock_8h.html">BasicBlock.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1StoreInst_html"><div class="ttname"><a href="classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdoc">An instruction for storing to memory.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00301">Instructions.h:301</a></div></div>
<div class="ttc" id="astructllvm_1_1RandomIRBuilder_html_afde61f758ce6c73015640b4cf6087a76"><div class="ttname"><a href="structllvm_1_1RandomIRBuilder.html#afde61f758ce6c73015640b4cf6087a76">llvm::RandomIRBuilder::randomType</a></div><div class="ttdeci">Type * randomType()</div><div class="ttdoc">Return a uniformly choosen type from AllowedTypes.</div><div class="ttdef"><b>Definition:</b> <a href="RandomIRBuilder_8cpp_source.html#l00194">RandomIRBuilder.cpp:194</a></div></div>
<div class="ttc" id="anamespacellvm_html_af2a9add76255a5e6dc09b1a5f9505f21"><div class="ttname"><a href="namespacellvm.html#af2a9add76255a5e6dc09b1a5f9505f21">llvm::uniform</a></div><div class="ttdeci">T uniform(GenT &amp;Gen, T Min, T Max)</div><div class="ttdoc">Return a uniformly distributed random value between Min and Max.</div><div class="ttdef"><b>Definition:</b> <a href="Random_8h_source.html#l00021">Random.h:21</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="astructllvm_1_1RandomIRBuilder_html_adfff936c94a9a7ed2da1f55a008b32ce"><div class="ttname"><a href="structllvm_1_1RandomIRBuilder.html#adfff936c94a9a7ed2da1f55a008b32ce">llvm::RandomIRBuilder::connectToSink</a></div><div class="ttdeci">void connectToSink(BasicBlock &amp;BB, ArrayRef&lt; Instruction * &gt; Insts, Value *V)</div><div class="ttdoc">Find a viable user for V in Insts, which should all be contained in BB.</div><div class="ttdef"><b>Definition:</b> <a href="RandomIRBuilder_8cpp_source.html#l00128">RandomIRBuilder.cpp:128</a></div></div>
<div class="ttc" id="astructllvm_1_1RandomIRBuilder_html_ab03f89574e4c65a5385dcc3c0d1b2590"><div class="ttname"><a href="structllvm_1_1RandomIRBuilder.html#ab03f89574e4c65a5385dcc3c0d1b2590">llvm::RandomIRBuilder::newSink</a></div><div class="ttdeci">void newSink(BasicBlock &amp;BB, ArrayRef&lt; Instruction * &gt; Insts, Value *V)</div><div class="ttdoc">Create a user for V in BB.</div><div class="ttdef"><b>Definition:</b> <a href="RandomIRBuilder_8cpp_source.html#l00153">RandomIRBuilder.cpp:153</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="aTargetLibraryInfo_8cpp_html_aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053"><div class="ttname"><a href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a></div><div class="ttdeci">@ Ptr</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8cpp_source.html#l00062">TargetLibraryInfo.cpp:62</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_a5fa9b8e1842b354f64c1ba6be0a4a17f"><div class="ttname"><a href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">llvm::User::setOperand</a></div><div class="ttdeci">void setOperand(unsigned i, Value *Val)</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00174">User.h:174</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef</a></div><div class="ttdoc">ArrayRef - Represent a constant reference to an array (0 or more elements consecutively in memory),...</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00033">APInt.h:33</a></div></div>
<div class="ttc" id="aDataLayout_8h_html"><div class="ttname"><a href="DataLayout_8h.html">DataLayout.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a6393a2d4fe7e10b28a0dcc35f881567b"><div class="ttname"><a href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const</div><div class="ttdoc">All values are typed, get the type of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00255">Value.h:255</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_ac96f30ba8b117dbd380b88ab8a03732ba1e82b710efc2f25cc275e53b3833e6fa"><div class="ttname"><a href="namespacellvm_1_1cl.html#ac96f30ba8b117dbd380b88ab8a03732ba1e82b710efc2f25cc275e53b3833e6fa">llvm::cl::Sink</a></div><div class="ttdeci">@ Sink</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00166">CommandLine.h:166</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_ad467c4ab9119043f9b7750ab986be61a"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a></div><div class="ttdeci">MachineBasicBlock MachineBasicBlock::iterator DebugLoc DL</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00076">AArch64SLSHardening.cpp:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1fuzzerop_1_1SourcePred_html_a3396d8b14dbd006a057abef07514d4f3"><div class="ttname"><a href="classllvm_1_1fuzzerop_1_1SourcePred.html#a3396d8b14dbd006a057abef07514d4f3">llvm::fuzzerop::SourcePred::matches</a></div><div class="ttdeci">bool matches(ArrayRef&lt; Value * &gt; Cur, const Value *New)</div><div class="ttdoc">Returns true if New is compatible for the argument after Cur.</div><div class="ttdef"><b>Definition:</b> <a href="OpDescriptor_8h_source.html#l00076">OpDescriptor.h:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html"><div class="ttname"><a href="classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdoc">An instruction for reading from memory.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00177">Instructions.h:177</a></div></div>
<div class="ttc" id="anamespacellvm_html_a943f22024cba236f495239754ca3c74b"><div class="ttname"><a href="namespacellvm.html#a943f22024cba236f495239754ca3c74b">llvm::make_filter_range</a></div><div class="ttdeci">iterator_range&lt; filter_iterator&lt; detail::IterOfRange&lt; RangeT &gt;, PredicateT &gt; &gt; make_filter_range(RangeT &amp;&amp;Range, PredicateT Pred)</div><div class="ttdoc">Convenience function that takes a range of elements and a predicate, and return a new filter_iterator...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00637">STLExtras.h:637</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac836cd380a57a4c99abcdf60dc901984"><div class="ttname"><a href="namespacellvm.html#ac836cd380a57a4c99abcdf60dc901984">llvm::makeSampler</a></div><div class="ttdeci">ReservoirSampler&lt; ElT, GenT &gt; makeSampler(GenT &amp;RandGen, RangeT &amp;&amp;Items)</div><div class="ttdef"><b>Definition:</b> <a href="Random_8h_source.html#l00075">Random.h:75</a></div></div>
<div class="ttc" id="aRandom_8h_html"><div class="ttname"><a href="Random_8h.html">Random.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1fuzzerop_1_1SourcePred_html"><div class="ttname"><a href="classllvm_1_1fuzzerop_1_1SourcePred.html">llvm::fuzzerop::SourcePred</a></div><div class="ttdoc">A matcher/generator for finding suitable values for the next source in an operation's partially compl...</div><div class="ttdef"><b>Definition:</b> <a href="OpDescriptor_8h_source.html#l00042">OpDescriptor.h:42</a></div></div>
<div class="ttc" id="aInstructions_8h_html"><div class="ttname"><a href="Instructions_8h.html">Instructions.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a8de021e28a3c04c9216ad8decf104f02"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">const Instruction * getTerminator() const LLVM_READONLY</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00127">BasicBlock.h:127</a></div></div>
<div class="ttc" id="aclassllvm_1_1fuzzerop_1_1SourcePred_html_a67e5e9e86b7a1d2f00aea28157ffc7ba"><div class="ttname"><a href="classllvm_1_1fuzzerop_1_1SourcePred.html#a67e5e9e86b7a1d2f00aea28157ffc7ba">llvm::fuzzerop::SourcePred::generate</a></div><div class="ttdeci">std::vector&lt; Constant * &gt; generate(ArrayRef&lt; Value * &gt; Cur, ArrayRef&lt; Type * &gt; BaseTypes)</div><div class="ttdoc">Generates a list of potential values for the argument after Cur.</div><div class="ttdef"><b>Definition:</b> <a href="OpDescriptor_8h_source.html#l00081">OpDescriptor.h:81</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1AllocaInst_html"><div class="ttname"><a href="classllvm_1_1AllocaInst.html">llvm::AllocaInst</a></div><div class="ttdoc">an instruction to allocate memory on the stack</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00058">Instructions.h:58</a></div></div>
<div class="ttc" id="aRandomIRBuilder_8cpp_html_a04a8af897aa17e64fedac0215ae4e705"><div class="ttname"><a href="RandomIRBuilder_8cpp.html#a04a8af897aa17e64fedac0215ae4e705">isCompatibleReplacement</a></div><div class="ttdeci">static bool isCompatibleReplacement(const Instruction *I, const Use &amp;Operand, const Value *Replacement)</div><div class="ttdef"><b>Definition:</b> <a href="RandomIRBuilder_8cpp_source.html#l00094">RandomIRBuilder.cpp:94</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00074">Value.h:74</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a82a7e98c00f5bb12e2c5481fe0ab3f1a"><div class="ttname"><a href="classllvm_1_1Type.html#a82a7e98c00f5bb12e2c5481fe0ab3f1a">llvm::Type::isFirstClassType</a></div><div class="ttdeci">bool isFirstClassType() const</div><div class="ttdoc">Return true if the type is &quot;first class&quot;, meaning it is a valid type for a Value.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00274">Type.h:274</a></div></div>
<div class="ttc" id="aclassllvm_1_1Use_html"><div class="ttname"><a href="classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdoc">A Use represents the edge between a Value definition and its users.</div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00043">Use.h:43</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:04:27 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

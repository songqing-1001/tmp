<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Frontend/OpenMP/OMPIRBuilder.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_852f2fa92acda3856ce29eb983aeba4a.html">Frontend</a></li><li class="navelem"><a class="el" href="dir_159656d92d18068c5bee1980a613048e.html">OpenMP</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">OMPIRBuilder.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="OMPIRBuilder_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- OpenMPIRBuilder.cpp - Builder for LLVM-IR for OpenMP directives ----===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span><span class="comment"></span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">/// \file</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">/// This file implements the OpenMPIRBuilder class, which is used as a</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">/// convenient way to create LLVM instructions for OpenMP directives.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"></span><span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160; </div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="OMPIRBuilder_8h.html">llvm/Frontend/OpenMP/OMPIRBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallSet_8h.html">llvm/ADT/SmallSet.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="StringRef_8h.html">llvm/ADT/StringRef.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AssumptionCache_8h.html">llvm/Analysis/AssumptionCache.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CodeMetrics_8h.html">llvm/Analysis/CodeMetrics.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopInfo_8h.html">llvm/Analysis/LoopInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="OptimizationRemarkEmitter_8h.html">llvm/Analysis/OptimizationRemarkEmitter.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ScalarEvolution_8h.html">llvm/Analysis/ScalarEvolution.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetLibraryInfo_8h.html">llvm/Analysis/TargetLibraryInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2CFG_8h.html">llvm/IR/CFG.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constants_8h.html">llvm/IR/Constants.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DebugInfoMetadata_8h.html">llvm/IR/DebugInfoMetadata.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DerivedTypes_8h.html">llvm/IR/DerivedTypes.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="GlobalVariable_8h.html">llvm/IR/GlobalVariable.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IRBuilder_8h.html">llvm/IR/IRBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MDBuilder_8h.html">llvm/IR/MDBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PassManager_8h.html">llvm/IR/PassManager.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Value_8h.html">llvm/IR/Value.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetRegistry_8h.html">llvm/MC/TargetRegistry.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Target_2TargetMachine_8h.html">llvm/Target/TargetMachine.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetOptions_8h.html">llvm/Target/TargetOptions.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlockUtils_8h.html">llvm/Transforms/Utils/BasicBlockUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Cloning_8h.html">llvm/Transforms/Utils/Cloning.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CodeExtractor_8h.html">llvm/Transforms/Utils/CodeExtractor.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopPeel_8h.html">llvm/Transforms/Utils/LoopPeel.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="UnrollLoop_8h.html">llvm/Transforms/Utils/UnrollLoop.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; </div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &lt;cstdint&gt;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &lt;optional&gt;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160; </div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="OMPIRBuilder_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   46</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;openmp-ir-builder&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160; </div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="keyword">using namespace </span>omp;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <a class="code" href="OMPIRBuilder_8cpp.html#afe7d677770e0678840e54ebb3a9b932c">OptimisticAttributes</a>(<span class="stringliteral">&quot;openmp-ir-builder-optimistic-attributes&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;                         <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Use optimistic attributes describing &quot;</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;                                  <span class="stringliteral">&quot;&#39;as-if&#39; properties of runtime calls.&quot;</span>),</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;                         <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>));</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160; </div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;double&gt;</a> <a class="code" href="OMPIRBuilder_8cpp.html#ac697e5f78d67bbaccc98d1c82df6252c">UnrollThresholdFactor</a>(</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="stringliteral">&quot;openmp-ir-builder-unroll-threshold-factor&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Factor for the unroll threshold to account for code &quot;</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;             <span class="stringliteral">&quot;simplifications still taking place&quot;</span>),</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(1.5));</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">/// Return whether IP1 and IP2 are ambiguous, i.e. that inserting instructions</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment"></span><span class="comment">/// at position IP1 may change the meaning of IP2 or vice-versa. This is because</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment"></span><span class="comment">/// an InsertPoint stores the instruction before something is inserted. For</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment"></span><span class="comment">/// instance, if both point to the same instruction, two IRBuilders alternating</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment"></span><span class="comment">/// creating instruction will cause the instructions to be interleaved.</span></div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="OMPIRBuilder_8cpp.html#a756b28f370cd5a39bc0ee3e5333b9c9b">   69</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="OMPIRBuilder_8cpp.html#a756b28f370cd5a39bc0ee3e5333b9c9b">isConflictIP</a>(<a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::InsertPoint</a> IP1,</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;                         <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::InsertPoint</a> IP2) {</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <span class="keywordflow">if</span> (!IP1.isSet() || !IP2.isSet())</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="keywordflow">return</span> IP1.getBlock() == IP2.getBlock() &amp;&amp; IP1.getPoint() == IP2.getPoint();</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;}</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="OMPIRBuilder_8cpp.html#a596dcc3bb2ae8b7561e94095584e0f1e">   76</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="OMPIRBuilder_8cpp.html#a596dcc3bb2ae8b7561e94095584e0f1e">isValidWorkshareLoopScheduleType</a>(<a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7">OMPScheduleType</a> SchedType) {</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="comment">// Valid ordered/unordered and base algorithm combinations.</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="keywordflow">switch</span> (SchedType &amp; ~<a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a5690795030711d5682365ed61cbe81b6">OMPScheduleType::MonotonicityMask</a>) {</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7adfd02d2fed222f2c28301f5ac837f2b2">OMPScheduleType::UnorderedStaticChunked</a>:</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a5ced2def0c3f656428eb2144b4aaf6fb">OMPScheduleType::UnorderedStatic</a>:</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7aeb07fdc72df93e1f129f8ef0fa6cdaa2">OMPScheduleType::UnorderedDynamicChunked</a>:</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7ad7cb643189718fba3760db5bcb5e9856">OMPScheduleType::UnorderedGuidedChunked</a>:</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a3766f17f591a16552940e68a9206a109">OMPScheduleType::UnorderedRuntime</a>:</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7ace336b30276699c8ad3f28c7296ae69c">OMPScheduleType::UnorderedAuto</a>:</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7ae046186587a5833e23d9270c35af85b1">OMPScheduleType::UnorderedTrapezoidal</a>:</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a38a9fe7b93a08dd2fdb40710633ff20e">OMPScheduleType::UnorderedGreedy</a>:</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7ab0ca5a5d5a0a48d1d0d7128090747b9b">OMPScheduleType::UnorderedBalanced</a>:</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a39599fc5486afadef41009e1fb27600e">OMPScheduleType::UnorderedGuidedIterativeChunked</a>:</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a1cc61e9c8ede152165c582e6cdb49b5e">OMPScheduleType::UnorderedGuidedAnalyticalChunked</a>:</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a79f54709b96f9cf497c239ceeedfccb8">OMPScheduleType::UnorderedSteal</a>:</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a8a3ce6661aad31cc29e3c986d95c3b80">OMPScheduleType::UnorderedStaticBalancedChunked</a>:</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a6102400852d050aeb45f54e39cd6dbbc">OMPScheduleType::UnorderedGuidedSimd</a>:</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a4bc5b1133831ba3fc59a2359a81a049a">OMPScheduleType::UnorderedRuntimeSimd</a>:</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a45e59530303d8f21b9f68d067b700046">OMPScheduleType::OrderedStaticChunked</a>:</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a921ff3d852775c7d08ef3e8ab71fd827">OMPScheduleType::OrderedStatic</a>:</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7ab4930c214ad4ac5c3d1c75d267eb38a4">OMPScheduleType::OrderedDynamicChunked</a>:</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a0d889968e05ad491297781c12f044670">OMPScheduleType::OrderedGuidedChunked</a>:</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7ac9213ec16587c17730f2d8e7723f692d">OMPScheduleType::OrderedRuntime</a>:</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a89d1cc67c0e0820b5ed851176567e17c">OMPScheduleType::OrderedAuto</a>:</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7abd79f878aa88119d9feabd482bbdb1ca">OMPScheduleType::OrderdTrapezoidal</a>:</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7abe272c1e3dfad2cfd9e94438ac753094">OMPScheduleType::NomergeUnorderedStaticChunked</a>:</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a7dadea7f8d895bea2f79d77bc784b532">OMPScheduleType::NomergeUnorderedStatic</a>:</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7af9fd0011f843a54b100f1410a42c525a">OMPScheduleType::NomergeUnorderedDynamicChunked</a>:</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7aee4b149cf5ae41603e163ae581365f98">OMPScheduleType::NomergeUnorderedGuidedChunked</a>:</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a0262be002813b7ad31cc7d6200804759">OMPScheduleType::NomergeUnorderedRuntime</a>:</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a711e6dab1b42b1c5451a7aafe2c1e21e">OMPScheduleType::NomergeUnorderedAuto</a>:</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a44a9325b9b228081d8841907454a44ef">OMPScheduleType::NomergeUnorderedTrapezoidal</a>:</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a0158fb808d882c7853b20bf3d759238a">OMPScheduleType::NomergeUnorderedGreedy</a>:</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a1d024db3d31d3f2afbc0f8d7d2647ef9">OMPScheduleType::NomergeUnorderedBalanced</a>:</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a86d90f56bf34bf9eed31f6676cfe2200">OMPScheduleType::NomergeUnorderedGuidedIterativeChunked</a>:</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a6b0f13196284756141d7a1fb003c7ad7">OMPScheduleType::NomergeUnorderedGuidedAnalyticalChunked</a>:</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a57c8ef07508f364479cb0df759e9aa9d">OMPScheduleType::NomergeUnorderedSteal</a>:</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a8a8a4a010edce2d7bbcea890feb6890d">OMPScheduleType::NomergeOrderedStaticChunked</a>:</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a514f0e7b2d577f06c98896a8a094d09e">OMPScheduleType::NomergeOrderedStatic</a>:</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a88acf78220be4f9cba9d504348338434">OMPScheduleType::NomergeOrderedDynamicChunked</a>:</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a8d3bdcd26e9de2b98205ae5774042717">OMPScheduleType::NomergeOrderedGuidedChunked</a>:</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a8f0d655fb83490a9e75782c6402110d8">OMPScheduleType::NomergeOrderedRuntime</a>:</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a0caa7abe8bdddedc4178cd73a4ac40b6">OMPScheduleType::NomergeOrderedAuto</a>:</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a46f4e9d5112df3ad08bc51fcff86bbca">OMPScheduleType::NomergeOrderedTrapezoidal</a>:</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  }</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160; </div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="comment">// Must not set both monotonicity modifiers at the same time.</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7">OMPScheduleType</a> MonotonicityFlags =</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      SchedType &amp; <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a5690795030711d5682365ed61cbe81b6">OMPScheduleType::MonotonicityMask</a>;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="keywordflow">if</span> (MonotonicityFlags == <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a5690795030711d5682365ed61cbe81b6">OMPScheduleType::MonotonicityMask</a>)</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;}</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">/// Determine which scheduling algorithm to use, determined from schedule clause</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">/// arguments.</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7">OMPScheduleType</a></div>
<div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="OMPIRBuilder_8cpp.html#a065b0b31e5ca4c10b1cef45581efb8dc">  138</a></span>&#160;<a class="code" href="OMPIRBuilder_8cpp.html#a065b0b31e5ca4c10b1cef45581efb8dc">getOpenMPBaseScheduleType</a>(llvm::omp::ScheduleKind ClauseKind, <span class="keywordtype">bool</span> HasChunks,</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                          <span class="keywordtype">bool</span> HasSimdModifier) {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="comment">// Currently, the default schedule it static.</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="keywordflow">switch</span> (ClauseKind) {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="keywordflow">case</span> OMP_SCHEDULE_Default:</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="keywordflow">case</span> OMP_SCHEDULE_Static:</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordflow">return</span> HasChunks ? <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7af54e7eea282c868aa67914573df2558f">OMPScheduleType::BaseStaticChunked</a></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                     : <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7aecba1cdf984063a67c869dbb94d19dd3">OMPScheduleType::BaseStatic</a>;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="keywordflow">case</span> OMP_SCHEDULE_Dynamic:</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a9e8280caae3ba6110d4f0061ad3dce1c">OMPScheduleType::BaseDynamicChunked</a>;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="keywordflow">case</span> OMP_SCHEDULE_Guided:</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">return</span> HasSimdModifier ? <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7acecd17ad7e1609e795c3d82c6317325b">OMPScheduleType::BaseGuidedSimd</a></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                           : <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7aa9e644958c4830585ae78527092ea4fd">OMPScheduleType::BaseGuidedChunked</a>;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="keywordflow">case</span> OMP_SCHEDULE_Auto:</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a377f624764cdf5386a71e8efa9a1033d">llvm::omp::OMPScheduleType::BaseAuto</a>;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="keywordflow">case</span> OMP_SCHEDULE_Runtime:</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordflow">return</span> HasSimdModifier ? <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7ab8e66c863338f428b072f163e43f65e8">OMPScheduleType::BaseRuntimeSimd</a></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                           : <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7afd0872ecd4e82f3caa0ea44584a05144">OMPScheduleType::BaseRuntime</a>;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  }</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;unhandled schedule clause argument&quot;</span>);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;}</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">/// Adds ordering modifier flags to schedule type.</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7">OMPScheduleType</a></div>
<div class="line"><a name="l00162"></a><span class="lineno"><a class="line" href="OMPIRBuilder_8cpp.html#a4a87dd5af95eb64807ad77405e4f4654">  162</a></span>&#160;<a class="code" href="OMPIRBuilder_8cpp.html#a4a87dd5af95eb64807ad77405e4f4654">getOpenMPOrderingScheduleType</a>(<a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7">OMPScheduleType</a> BaseScheduleType,</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                              <span class="keywordtype">bool</span> HasOrderedClause) {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((BaseScheduleType &amp; <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a4aabfa64277fa15805937e3812fa1161">OMPScheduleType::ModifierMask</a>) ==</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;             <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a6adf97f83acf6453d4a6a4b1070f3754">OMPScheduleType::None</a> &amp;&amp;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;         <span class="stringliteral">&quot;Must not have ordering nor monotonicity flags already set&quot;</span>);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160; </div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7">OMPScheduleType</a> OrderingModifier = HasOrderedClause</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                                         ? <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a00614ac33e4c92484ae08314d48cf8b8">OMPScheduleType::ModifierOrdered</a></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                                         : <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7ab20e79b6bbe8e4d736ed588ad5f3c9c7">OMPScheduleType::ModifierUnordered</a>;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7">OMPScheduleType</a> OrderingScheduleType = BaseScheduleType | OrderingModifier;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160; </div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="comment">// Unsupported combinations</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="keywordflow">if</span> (OrderingScheduleType ==</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      (<a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7acecd17ad7e1609e795c3d82c6317325b">OMPScheduleType::BaseGuidedSimd</a> | <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a00614ac33e4c92484ae08314d48cf8b8">OMPScheduleType::ModifierOrdered</a>))</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a0d889968e05ad491297781c12f044670">OMPScheduleType::OrderedGuidedChunked</a>;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (OrderingScheduleType == (<a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7ab8e66c863338f428b072f163e43f65e8">OMPScheduleType::BaseRuntimeSimd</a> |</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                                    <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a00614ac33e4c92484ae08314d48cf8b8">OMPScheduleType::ModifierOrdered</a>))</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7ac9213ec16587c17730f2d8e7723f692d">OMPScheduleType::OrderedRuntime</a>;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <span class="keywordflow">return</span> OrderingScheduleType;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;}</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">/// Adds monotonicity modifier flags to schedule type.</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7">OMPScheduleType</a></div>
<div class="line"><a name="l00186"></a><span class="lineno"><a class="line" href="OMPIRBuilder_8cpp.html#a4b64de5bc0d090cc76ddb989acabf0f3">  186</a></span>&#160;<a class="code" href="OMPIRBuilder_8cpp.html#a4b64de5bc0d090cc76ddb989acabf0f3">getOpenMPMonotonicityScheduleType</a>(<a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7">OMPScheduleType</a> ScheduleType,</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                                  <span class="keywordtype">bool</span> HasSimdModifier, <span class="keywordtype">bool</span> HasMonotonic,</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                                  <span class="keywordtype">bool</span> HasNonmonotonic, <span class="keywordtype">bool</span> HasOrderedClause) {</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((ScheduleType &amp; <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a5690795030711d5682365ed61cbe81b6">OMPScheduleType::MonotonicityMask</a>) ==</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;             <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a6adf97f83acf6453d4a6a4b1070f3754">OMPScheduleType::None</a> &amp;&amp;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;         <span class="stringliteral">&quot;Must not have monotonicity flags already set&quot;</span>);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!HasMonotonic || !HasNonmonotonic) &amp;&amp;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;         <span class="stringliteral">&quot;Monotonic and Nonmonotonic are contradicting each other&quot;</span>);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="keywordflow">if</span> (HasMonotonic) {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordflow">return</span> ScheduleType | <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a0f712a4e8c3670472ef75bdbfde786f8">OMPScheduleType::ModifierMonotonic</a>;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (HasNonmonotonic) {</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordflow">return</span> ScheduleType | <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7adab874a059e33d5599603a11894ab29e">OMPScheduleType::ModifierNonmonotonic</a>;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="comment">// OpenMP 5.1, 2.11.4 Worksharing-Loop Construct, Description.</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="comment">// If the static schedule kind is specified or if the ordered clause is</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="comment">// specified, and if the nonmonotonic modifier is not specified, the</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="comment">// effect is as if the monotonic modifier is specified. Otherwise, unless</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="comment">// the monotonic modifier is specified, the effect is as if the</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="comment">// nonmonotonic modifier is specified.</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7">OMPScheduleType</a> BaseScheduleType =</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        ScheduleType &amp; ~<a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7">OMPScheduleType</a>::ModifierMask;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">if</span> ((BaseScheduleType == <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7aecba1cdf984063a67c869dbb94d19dd3">OMPScheduleType::BaseStatic</a>) ||</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        (BaseScheduleType == <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7af54e7eea282c868aa67914573df2558f">OMPScheduleType::BaseStaticChunked</a>) ||</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        HasOrderedClause) {</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      <span class="comment">// The monotonic is used by default in openmp runtime library, so no need</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      <span class="comment">// to set it.</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      <span class="keywordflow">return</span> ScheduleType;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      <span class="keywordflow">return</span> ScheduleType | <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7adab874a059e33d5599603a11894ab29e">OMPScheduleType::ModifierNonmonotonic</a>;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    }</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  }</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;}</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">/// Determine the schedule type using schedule and ordering clause arguments.</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7">OMPScheduleType</a></div>
<div class="line"><a name="l00222"></a><span class="lineno"><a class="line" href="OMPIRBuilder_8cpp.html#a554000c782275642b783964853720bee">  222</a></span>&#160;<a class="code" href="OMPIRBuilder_8cpp.html#a554000c782275642b783964853720bee">computeOpenMPScheduleType</a>(ScheduleKind ClauseKind, <span class="keywordtype">bool</span> HasChunks,</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                          <span class="keywordtype">bool</span> HasSimdModifier, <span class="keywordtype">bool</span> HasMonotonicModifier,</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                          <span class="keywordtype">bool</span> HasNonmonotonicModifier, <span class="keywordtype">bool</span> HasOrderedClause) {</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7">OMPScheduleType</a> BaseSchedule =</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;      <a class="code" href="OMPIRBuilder_8cpp.html#a065b0b31e5ca4c10b1cef45581efb8dc">getOpenMPBaseScheduleType</a>(ClauseKind, HasChunks, HasSimdModifier);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7">OMPScheduleType</a> OrderedSchedule =</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      <a class="code" href="OMPIRBuilder_8cpp.html#a4a87dd5af95eb64807ad77405e4f4654">getOpenMPOrderingScheduleType</a>(BaseSchedule, HasOrderedClause);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7">OMPScheduleType</a> Result = <a class="code" href="OMPIRBuilder_8cpp.html#a4b64de5bc0d090cc76ddb989acabf0f3">getOpenMPMonotonicityScheduleType</a>(</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      OrderedSchedule, HasSimdModifier, HasMonotonicModifier,</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      HasNonmonotonicModifier, HasOrderedClause);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160; </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="OMPIRBuilder_8cpp.html#a596dcc3bb2ae8b7561e94095584e0f1e">isValidWorkshareLoopScheduleType</a>(Result));</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="keywordflow">return</span> Result;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;}</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment">/// Make \p Source branch to \p Target.</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">/// Handles two situations:</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">/// * \p Source already has an unconditional branch.</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment">/// * \p Source is a degenerate block (no terminator because the BB is</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment">///             the current head of the IR construction).</span></div>
<div class="line"><a name="l00243"></a><span class="lineno"><a class="line" href="OMPIRBuilder_8cpp.html#a3057c2b7e1e25de160497b1ef3985c2a">  243</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="OMPIRBuilder_8cpp.html#a3057c2b7e1e25de160497b1ef3985c2a">redirectTo</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a>, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="classllvm_1_1Target.html">Target</a>, <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>) {</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1M68kBeads.html#a7eeab1fe8f39bf89dcd7929b816ebfcca27d0e059322508a76f918503800ef1bd">Term</a> = <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a>-&gt;getTerminator()) {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keyword">auto</span> *Br = cast&lt;BranchInst&gt;(<a class="code" href="namespacellvm_1_1M68kBeads.html#a7eeab1fe8f39bf89dcd7929b816ebfcca27d0e059322508a76f918503800ef1bd">Term</a>);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!Br-&gt;isConditional() &amp;&amp;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;           <span class="stringliteral">&quot;BB&#39;s terminator must be an unconditional branch (or degenerate)&quot;</span>);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Succ = Br-&gt;getSuccessor(0);</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    Succ-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#afe7af0c3ec2ef1f525173acd2ea4ba60">removePredecessor</a>(<a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a>, <span class="comment">/*KeepOneInputPHIs=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    Br-&gt;setSuccessor(0, <a class="code" href="classllvm_1_1Target.html">Target</a>);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  }</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160; </div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keyword">auto</span> *NewBr = <a class="code" href="classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">BranchInst::Create</a>(<a class="code" href="classllvm_1_1Target.html">Target</a>, <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a>);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  NewBr-&gt;setDebugLoc(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;}</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160; </div>
<div class="line"><a name="l00258"></a><span class="lineno"><a class="line" href="namespacellvm.html#a78e14f66d8a8405c6882b5ff6a3b7617">  258</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#a78e14f66d8a8405c6882b5ff6a3b7617">llvm::spliceBB</a>(<a class="code" href="classllvm_1_1IRBuilderBase_1_1InsertPoint.html">IRBuilderBase::InsertPoint</a> IP, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *New,</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                    <span class="keywordtype">bool</span> CreateBranch) {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(New-&gt;getFirstInsertionPt() == New-&gt;begin() &amp;&amp;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;         <span class="stringliteral">&quot;Target BB must not have PHI nodes&quot;</span>);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160; </div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="comment">// Move instructions to new block.</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Old = IP.<a class="code" href="classllvm_1_1IRBuilderBase_1_1InsertPoint.html#a80052c7ca73be0613915d31e4abc62eb">getBlock</a>();</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  New-&gt;splice(New-&gt;begin(), Old, IP.<a class="code" href="classllvm_1_1IRBuilderBase_1_1InsertPoint.html#add3c04c7d2a93c82846f7bea3ce2fe16">getPoint</a>(), Old-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>());</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160; </div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="keywordflow">if</span> (CreateBranch)</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <a class="code" href="classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">BranchInst::Create</a>(New, Old);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;}</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno"><a class="line" href="namespacellvm.html#afae3b747fc0c20f869df931130c534fa">  271</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#a78e14f66d8a8405c6882b5ff6a3b7617">llvm::spliceBB</a>(<a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *New, <span class="keywordtype">bool</span> CreateBranch) {</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getCurrentDebugLocation();</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Old = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.GetInsertBlock();</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160; </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <a class="code" href="namespacellvm.html#a78e14f66d8a8405c6882b5ff6a3b7617">spliceBB</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP(), New, CreateBranch);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <span class="keywordflow">if</span> (CreateBranch)</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(Old-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(Old);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160; </div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="comment">// SetInsertPoint also updates the Builder&#39;s debug location, but we want to</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <span class="comment">// keep the one the Builder was configured to use.</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetCurrentDebugLocation(<a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a>);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;}</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160; </div>
<div class="line"><a name="l00286"></a><span class="lineno"><a class="line" href="namespacellvm.html#a85ee70791795fa2ddb07694182f783b2">  286</a></span>&#160;<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="namespacellvm.html#a85ee70791795fa2ddb07694182f783b2">llvm::splitBB</a>(<a class="code" href="classllvm_1_1IRBuilderBase_1_1InsertPoint.html">IRBuilderBase::InsertPoint</a> IP, <span class="keywordtype">bool</span> CreateBranch,</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                          <a class="code" href="classllvm_1_1Twine.html">llvm::Twine</a> Name) {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Old = IP.<a class="code" href="classllvm_1_1IRBuilderBase_1_1InsertPoint.html#a80052c7ca73be0613915d31e4abc62eb">getBlock</a>();</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *New = <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      Old-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aa286a0f7f5d38488d593bb7ef0ba183e">getContext</a>(), Name.isTriviallyEmpty() ? Old-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() : Name,</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      Old-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>(), Old-&gt;<a class="code" href="classllvm_1_1ilist__node__with__parent.html#a26708685cc8b94fe3d7092ee080dbb34">getNextNode</a>());</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <a class="code" href="namespacellvm.html#a78e14f66d8a8405c6882b5ff6a3b7617">spliceBB</a>(IP, New, CreateBranch);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  New-&gt;replaceSuccessorsPhiUsesWith(Old, New);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <span class="keywordflow">return</span> New;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;}</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160; </div>
<div class="line"><a name="l00297"></a><span class="lineno"><a class="line" href="namespacellvm.html#a7e8bd8939aed271b684b21231da918ee">  297</a></span>&#160;<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="namespacellvm.html#a85ee70791795fa2ddb07694182f783b2">llvm::splitBB</a>(<a class="code" href="classllvm_1_1IRBuilderBase.html">IRBuilderBase</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, <span class="keywordtype">bool</span> CreateBranch,</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                          <a class="code" href="classllvm_1_1Twine.html">llvm::Twine</a> Name) {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getCurrentDebugLocation();</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *New = <a class="code" href="namespacellvm.html#a85ee70791795fa2ddb07694182f783b2">splitBB</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP(), CreateBranch, Name);</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <span class="keywordflow">if</span> (CreateBranch)</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.GetInsertBlock()-&gt;getTerminator());</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.GetInsertBlock());</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="comment">// SetInsertPoint also updates the Builder&#39;s debug location, but we want to</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="comment">// keep the one the Builder was configured to use.</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetCurrentDebugLocation(<a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a>);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <span class="keywordflow">return</span> New;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;}</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160; </div>
<div class="line"><a name="l00311"></a><span class="lineno"><a class="line" href="namespacellvm.html#a2522258b740c5c76b6f9354663773c7c">  311</a></span>&#160;<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="namespacellvm.html#a85ee70791795fa2ddb07694182f783b2">llvm::splitBB</a>(<a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, <span class="keywordtype">bool</span> CreateBranch,</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                          <a class="code" href="classllvm_1_1Twine.html">llvm::Twine</a> Name) {</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getCurrentDebugLocation();</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *New = <a class="code" href="namespacellvm.html#a85ee70791795fa2ddb07694182f783b2">splitBB</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP(), CreateBranch, Name);</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <span class="keywordflow">if</span> (CreateBranch)</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.GetInsertBlock()-&gt;getTerminator());</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.GetInsertBlock());</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="comment">// SetInsertPoint also updates the Builder&#39;s debug location, but we want to</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="comment">// keep the one the Builder was configured to use.</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetCurrentDebugLocation(<a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a>);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="keywordflow">return</span> New;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;}</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160; </div>
<div class="line"><a name="l00325"></a><span class="lineno"><a class="line" href="namespacellvm.html#a03f30f48490558525cd5458201d13afe">  325</a></span>&#160;<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="namespacellvm.html#a03f30f48490558525cd5458201d13afe">llvm::splitBBWithSuffix</a>(<a class="code" href="classllvm_1_1IRBuilderBase.html">IRBuilderBase</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, <span class="keywordtype">bool</span> CreateBranch,</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                                    <a class="code" href="classllvm_1_1Twine.html">llvm::Twine</a> Suffix) {</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Old = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.GetInsertBlock();</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a85ee70791795fa2ddb07694182f783b2">splitBB</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, CreateBranch, Old-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + Suffix);</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;}</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160; </div>
<div class="line"><a name="l00331"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a50c6490cf353f064946c4e32673ac098">  331</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a50c6490cf353f064946c4e32673ac098">OpenMPIRBuilder::addAttributes</a>(<a class="code" href="namespacellvm_1_1omp.html#a4c503140c7f851151906d85b515330e9">omp::RuntimeFunction</a> FnID, <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;Fn) {</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;Ctx = Fn.<a class="code" href="classllvm_1_1Function.html#a9fffac2512fe651f0d5e37e27f5bd51c">getContext</a>();</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <a class="code" href="classllvm_1_1Triple.html">Triple</a> <a class="code" href="classT.html">T</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getTargetTriple());</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  <span class="comment">// Get the function&#39;s current attributes.</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="keyword">auto</span> <a class="code" href="README__ALTIVEC_8txt.html#a9d3ba236d13373cde794da2023acc7a0">Attrs</a> = Fn.<a class="code" href="classllvm_1_1Function.html#a7477aafbbe989ad35b96fac186d8e9fd">getAttributes</a>();</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <span class="keyword">auto</span> FnAttrs = <a class="code" href="README__ALTIVEC_8txt.html#a9d3ba236d13373cde794da2023acc7a0">Attrs</a>.getFnAttrs();</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <span class="keyword">auto</span> RetAttrs = <a class="code" href="README__ALTIVEC_8txt.html#a9d3ba236d13373cde794da2023acc7a0">Attrs</a>.getRetAttrs();</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;AttributeSet, 4&gt;</a> ArgAttrs;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> ArgNo = 0; ArgNo &lt; Fn.<a class="code" href="classllvm_1_1Function.html#ac6baa801e4aea800984e760d5460662f">arg_size</a>(); ++ArgNo)</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    ArgAttrs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9d3ba236d13373cde794da2023acc7a0">Attrs</a>.getParamAttrs(ArgNo));</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="comment">// Add AS to FnAS while taking special care with integer extensions.</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <span class="keyword">auto</span> addAttrSet = [&amp;](<a class="code" href="classllvm_1_1AttributeSet.html">AttributeSet</a> &amp;FnAS, <span class="keyword">const</span> <a class="code" href="classllvm_1_1AttributeSet.html">AttributeSet</a> &amp;AS,</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                        <span class="keywordtype">bool</span> Param = <span class="keyword">true</span>) -&gt; <span class="keywordtype">void</span> {</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordtype">bool</span> HasSignExt = AS.hasAttribute(Attribute::SExt);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keywordtype">bool</span> HasZeroExt = AS.hasAttribute(Attribute::ZExt);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">if</span> (HasSignExt || HasZeroExt) {</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(AS.getNumAttributes() == 1 &amp;&amp;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;             <span class="stringliteral">&quot;Currently not handling extension attr combined with others.&quot;</span>);</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      <span class="keywordflow">if</span> (Param) {</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> AK = TargetLibraryInfo::getExtAttrForI32Param(<a class="code" href="classT.html">T</a>, HasSignExt))</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;          FnAS = FnAS.<a class="code" href="classllvm_1_1AttributeSet.html#af2b9418751d1f1f1b99e5b05d0ed7efa">addAttribute</a>(Ctx, AK);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> AK = TargetLibraryInfo::getExtAttrForI32Return(<a class="code" href="classT.html">T</a>, HasSignExt))</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;          FnAS = FnAS.<a class="code" href="classllvm_1_1AttributeSet.html#af2b9418751d1f1f1b99e5b05d0ed7efa">addAttribute</a>(Ctx, AK);</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;      FnAS = FnAS.<a class="code" href="classllvm_1_1AttributeSet.html#a46f189c4026ace551d70a16566e641b1">addAttributes</a>(Ctx, AS);</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    }</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  };</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160; </div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="preprocessor">#define OMP_ATTRS_SET(VarName, AttrSet) AttributeSet VarName = AttrSet;</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="preprocessor">#include &quot;llvm/Frontend/OpenMP/OMPKinds.def&quot;</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160; </div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <span class="comment">// Add attributes to the function declaration.</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <span class="keywordflow">switch</span> (FnID) {</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="preprocessor">#define OMP_RTL_ATTRS(Enum, FnAttrSet, RetAttrSet, ArgAttrSets)                \</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="preprocessor">  case Enum:                                                                   \</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="preprocessor">    FnAttrs = FnAttrs.addAttributes(Ctx, FnAttrSet);                           \</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="preprocessor">    addAttrSet(RetAttrs, RetAttrSet, </span><span class="comment">/*Param*/</span><span class="preprocessor">false);                          \</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="preprocessor">    for (size_t ArgNo = 0; ArgNo &lt; ArgAttrSets.size(); ++ArgNo)                \</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="preprocessor">      addAttrSet(ArgAttrs[ArgNo], ArgAttrSets[ArgNo]);                         \</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="preprocessor">    Fn.setAttributes(AttributeList::get(Ctx, FnAttrs, RetAttrs, ArgAttrs));    \</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="preprocessor">    break;</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="preprocessor">#include &quot;llvm/Frontend/OpenMP/OMPKinds.def&quot;</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="comment">// Attributes are optional.</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  }</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;}</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160; </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a></div>
<div class="line"><a name="l00383"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a034dc6253a2a36f78ac071a7c12d5c27">  383</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a034dc6253a2a36f78ac071a7c12d5c27">OpenMPIRBuilder::getOrCreateRuntimeFunction</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <a class="code" href="namespacellvm_1_1omp.html#a4c503140c7f851151906d85b515330e9">RuntimeFunction</a> FnID) {</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <a class="code" href="classllvm_1_1FunctionType.html">FunctionType</a> *FnTy = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *Fn = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <span class="comment">// Try to find the declation in the module first.</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="keywordflow">switch</span> (FnID) {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="preprocessor">#define OMP_RTL(Enum, Str, IsVarArg, ReturnType, ...)                          \</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="preprocessor">  case Enum:                                                                   \</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="preprocessor">    FnTy = FunctionType::get(ReturnType, ArrayRef&lt;Type *&gt;{__VA_ARGS__},        \</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="preprocessor">                             IsVarArg);                                        \</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="preprocessor">    Fn = M.getFunction(Str);                                                   \</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="preprocessor">    break;</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="preprocessor">#include &quot;llvm/Frontend/OpenMP/OMPKinds.def&quot;</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  }</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160; </div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <span class="keywordflow">if</span> (!Fn) {</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="comment">// Create a new declaration if we need one.</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="keywordflow">switch</span> (FnID) {</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="preprocessor">#define OMP_RTL(Enum, Str, ...)                                                \</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="preprocessor">  case Enum:                                                                   \</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="preprocessor">    Fn = Function::Create(FnTy, GlobalValue::ExternalLinkage, Str, M);         \</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="preprocessor">    break;</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="preprocessor">#include &quot;llvm/Frontend/OpenMP/OMPKinds.def&quot;</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    }</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160; </div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="comment">// Add information if the runtime function takes a callback function</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keywordflow">if</span> (FnID == OMPRTL___kmpc_fork_call || FnID == OMPRTL___kmpc_fork_teams) {</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;      <span class="keywordflow">if</span> (!Fn-&gt;<a class="code" href="classllvm_1_1GlobalObject.html#a1f496e54accb2cbe919fb456cb703f1a">hasMetadata</a>(LLVMContext::MD_callback)) {</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;Ctx = Fn-&gt;<a class="code" href="classllvm_1_1Function.html#a9fffac2512fe651f0d5e37e27f5bd51c">getContext</a>();</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        <a class="code" href="classllvm_1_1MDBuilder.html">MDBuilder</a> MDB(Ctx);</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        <span class="comment">// Annotate the callback behavior of the runtime function:</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        <span class="comment">//  - The callback callee is argument number 2 (microtask).</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        <span class="comment">//  - The first two arguments of the callback callee are unknown (-1).</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        <span class="comment">//  - All variadic arguments to the runtime function are passed to the</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        <span class="comment">//    callback callee.</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        Fn-&gt;<a class="code" href="classllvm_1_1GlobalObject.html#aa1b0638c63ba711320b3bb9c69367ed6">addMetadata</a>(</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            LLVMContext::MD_callback,</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            *<a class="code" href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">MDNode::get</a>(Ctx, {MDB.<a class="code" href="classllvm_1_1MDBuilder.html#a1d51e11adfffd05afe252d3398f50d4e">createCallbackEncoding</a>(</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                                  2, {-1, -1}, <span class="comment">/* VarArgsArePassed */</span> <span class="keyword">true</span>)}));</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;      }</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    }</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160; </div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Created OpenMP runtime function &quot;</span> &lt;&lt; Fn-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>()</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; with type &quot;</span> &lt;&lt; *Fn-&gt;<a class="code" href="classllvm_1_1Function.html#adf50671db83d2813e0d897ea2cfc9102">getFunctionType</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    addAttributes(FnID, *Fn);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160; </div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Found OpenMP runtime function &quot;</span> &lt;&lt; Fn-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>()</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; with type &quot;</span> &lt;&lt; *Fn-&gt;<a class="code" href="classllvm_1_1Function.html#adf50671db83d2813e0d897ea2cfc9102">getFunctionType</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  }</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160; </div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Fn &amp;&amp; <span class="stringliteral">&quot;Failed to create OpenMP runtime function&quot;</span>);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160; </div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <span class="comment">// Cast the function to the expected type if necessary</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="classllvm_1_1ConstantExpr.html#ae79d05dd3d0b05e080e08f8c5c33f880">ConstantExpr::getBitCast</a>(Fn, FnTy-&gt;<a class="code" href="classllvm_1_1Type.html#adc01a7457de85fc52a3bb860d7e1c6a4">getPointerTo</a>());</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <span class="keywordflow">return</span> {FnTy, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>};</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;}</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160; </div>
<div class="line"><a name="l00441"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a7a0ce50dfb1a164ee67119899992c75b">  441</a></span>&#160;<a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a7a0ce50dfb1a164ee67119899992c75b">OpenMPIRBuilder::getOrCreateRuntimeFunctionPtr</a>(<a class="code" href="namespacellvm_1_1omp.html#a4c503140c7f851151906d85b515330e9">RuntimeFunction</a> FnID) {</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> RTLFn = getOrCreateRuntimeFunction(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, FnID);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <span class="keyword">auto</span> *Fn = dyn_cast&lt;llvm::Function&gt;(RTLFn.<a class="code" href="classllvm_1_1FunctionCallee.html#a0055cd5464b935f571b36979a86bd7fc">getCallee</a>());</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Fn &amp;&amp; <span class="stringliteral">&quot;Failed to create OpenMP runtime function pointer&quot;</span>);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <span class="keywordflow">return</span> Fn;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;}</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160; </div>
<div class="line"><a name="l00448"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a1af99f6f33b0db83a3e941fcb819fa29">  448</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a1af99f6f33b0db83a3e941fcb819fa29">OpenMPIRBuilder::initialize</a>() { initializeTypes(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>); }</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160; </div>
<div class="line"><a name="l00450"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a784adc2347b72f745ff1239aef3a3c26">  450</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a784adc2347b72f745ff1239aef3a3c26">OpenMPIRBuilder::finalize</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> *Fn) {</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock *, 32&gt;</a> ParallelRegionBlockSet;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 32&gt;</a> Blocks;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;OutlineInfo, 16&gt;</a> DeferredOutlines;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1OutlineInfo.html">OutlineInfo</a> &amp;OI : OutlineInfos) {</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="comment">// Skip functions that have not finalized yet; may happen with nested</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="comment">// function generation.</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="keywordflow">if</span> (Fn &amp;&amp; OI.<a class="code" href="classllvm_1_1Function.html#a16be569c794ac815f294b1f651587e48">getFunction</a>() != Fn) {</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      DeferredOutlines.push_back(OI);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    }</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160; </div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    ParallelRegionBlockSet.<a class="code" href="classllvm_1_1SmallPtrSetImplBase.html#a16413f1a88d8baca228d0a1b4cc0bfc6">clear</a>();</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    Blocks.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    OI.collectBlocks(ParallelRegionBlockSet, Blocks);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160; </div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *OuterFn = OI.<a class="code" href="classllvm_1_1Function.html#a16be569c794ac815f294b1f651587e48">getFunction</a>();</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <a class="code" href="classllvm_1_1CodeExtractorAnalysisCache.html">CodeExtractorAnalysisCache</a> CEAC(*OuterFn);</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <a class="code" href="classllvm_1_1CodeExtractor.html">CodeExtractor</a> Extractor(Blocks, <span class="comment">/* DominatorTree */</span> <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                            <span class="comment">/* AggregateArgs */</span> <span class="keyword">true</span>,</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                            <span class="comment">/* BlockFrequencyInfo */</span> <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                            <span class="comment">/* BranchProbabilityInfo */</span> <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                            <span class="comment">/* AssumptionCache */</span> <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                            <span class="comment">/* AllowVarArgs */</span> <span class="keyword">true</span>,</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                            <span class="comment">/* AllowAlloca */</span> <span class="keyword">true</span>,</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                            <span class="comment">/* AllocaBlock*/</span> OI.OuterAllocaBB,</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                            <span class="comment">/* Suffix */</span> <span class="stringliteral">&quot;.omp_par&quot;</span>);</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160; </div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Before     outlining: &quot;</span> &lt;&lt; *OuterFn &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Entry &quot;</span> &lt;&lt; OI.EntryBB-&gt;getName()</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; Exit: &quot;</span> &lt;&lt; OI.ExitBB-&gt;getName() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Extractor.<a class="code" href="classllvm_1_1CodeExtractor.html#ad3a4770e725305d3529cba8c6562c85a">isEligible</a>() &amp;&amp;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;           <span class="stringliteral">&quot;Expected OpenMP outlining to be possible!&quot;</span>);</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160; </div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *V : OI.ExcludeArgsFromAggregate)</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      Extractor.<a class="code" href="classllvm_1_1CodeExtractor.html#ad4d03968d09741d23f5b83e7a538f04f">excludeArgFromAggregate</a>(V);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160; </div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *OutlinedFn = Extractor.<a class="code" href="classllvm_1_1CodeExtractor.html#a8561c48aa0b397c37f9e071dad7df392">extractCodeRegion</a>(CEAC);</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160; </div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;After      outlining: &quot;</span> &lt;&lt; *OuterFn &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;   Outlined function: &quot;</span> &lt;&lt; *OutlinedFn &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(OutlinedFn-&gt;<a class="code" href="classllvm_1_1Function.html#aaea88376352c42347dceccdd5ab1c20c">getReturnType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#ae8eaa0b4eeac52a2b2282cb1bfd981ae">isVoidTy</a>() &amp;&amp;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;           <span class="stringliteral">&quot;OpenMP outlined functions should not return a value!&quot;</span>);</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160; </div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="comment">// For compability with the clang CG we move the outlined function after the</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="comment">// one with the parallel region.</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    OutlinedFn-&gt;<a class="code" href="classllvm_1_1Function.html#a29e0a562beb4b5d20eb0c426b363ceed">removeFromParent</a>();</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getFunctionList().insertAfter(OuterFn-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>(), OutlinedFn);</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160; </div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="comment">// Remove the artificial entry introduced by the extractor right away, we</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="comment">// made our own entry block after all.</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    {</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;ArtificialEntry = OutlinedFn-&gt;<a class="code" href="classllvm_1_1Function.html#ae6a4da5f41fc6a36735cc1704c01ce60">getEntryBlock</a>();</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ArtificialEntry.<a class="code" href="classllvm_1_1BasicBlock.html#a57f1945911ca1e95d0f51d7c3516b529">getUniqueSuccessor</a>() == OI.EntryBB);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(OI.EntryBB-&gt;getUniquePredecessor() == &amp;ArtificialEntry);</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      <span class="comment">// Move instructions from the to-be-deleted ArtificialEntry to the entry</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      <span class="comment">// basic block of the parallel region. CodeExtractor generates</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;      <span class="comment">// instructions to unwrap the aggregate argument and may sink</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      <span class="comment">// allocas/bitcasts for values that are solely used in the outlined region</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;      <span class="comment">// and do not escape.</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!ArtificialEntry.<a class="code" href="classllvm_1_1BasicBlock.html#a266367eb01c634406b32f816d2d9c6bf">empty</a>() &amp;&amp;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;             <span class="stringliteral">&quot;Expected instructions to add in the outlined region entry&quot;</span>);</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html#a6d3231fb84ed4182ec22e9442a87dbf8">BasicBlock::reverse_iterator</a> It = ArtificialEntry.<a class="code" href="classllvm_1_1BasicBlock.html#a1c2af7a9e501d399f06ca7e10eef46e4">rbegin</a>(),</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                                        End = ArtificialEntry.<a class="code" href="classllvm_1_1BasicBlock.html#a9237251072bf6816163abc2d053212ee">rend</a>();</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;           It != End;) {</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = *It;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        It++;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160; </div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isTerminator())</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160; </div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.moveBefore(*OI.EntryBB, OI.EntryBB-&gt;getFirstInsertionPt());</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;      }</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160; </div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;      OI.EntryBB-&gt;moveBefore(&amp;ArtificialEntry);</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;      ArtificialEntry.<a class="code" href="classllvm_1_1BasicBlock.html#a8dd327a937563afdb08250abc43820b0">eraseFromParent</a>();</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    }</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(&amp;OutlinedFn-&gt;<a class="code" href="classllvm_1_1Function.html#ae6a4da5f41fc6a36735cc1704c01ce60">getEntryBlock</a>() == OI.EntryBB);</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(OutlinedFn &amp;&amp; OutlinedFn-&gt;<a class="code" href="classllvm_1_1Value.html#aba0055050d741f60b6e0523507a2c79f">getNumUses</a>() == 1);</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160; </div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <span class="comment">// Run a user callback, e.g. to add attributes.</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="keywordflow">if</span> (OI.PostOutlineCB)</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      OI.PostOutlineCB(*OutlinedFn);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  }</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160; </div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  <span class="comment">// Remove work items that have been completed.</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  OutlineInfos = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(DeferredOutlines);</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;}</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160; </div>
<div class="line"><a name="l00539"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#ad66949e2e846451e61d9c8f34014ea31">  539</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#ad66949e2e846451e61d9c8f34014ea31">OpenMPIRBuilder::~OpenMPIRBuilder</a>() {</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(OutlineInfos.empty() &amp;&amp; <span class="stringliteral">&quot;There must be no outstanding outlinings&quot;</span>);</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;}</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160; </div>
<div class="line"><a name="l00543"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#ada8d44774af63e8cab5f9b2a088121fe">  543</a></span>&#160;<a class="code" href="classllvm_1_1GlobalValue.html">GlobalValue</a> *<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#ada8d44774af63e8cab5f9b2a088121fe">OpenMPIRBuilder::createGlobalFlag</a>(<span class="keywordtype">unsigned</span> <a class="code" href="classllvm_1_1Value.html">Value</a>, <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> Name) {</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  <a class="code" href="classllvm_1_1IntegerType.html">IntegerType</a> *I32Ty = <a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext());</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  <span class="keyword">auto</span> *<a class="code" href="structllvm_1_1omp_1_1GV.html">GV</a> =</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, I32Ty,</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;                         <span class="comment">/* isConstant = */</span> <span class="keyword">true</span>, <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca696bb1c9b0b0e76bb70c61f68866452a">GlobalValue::WeakODRLinkage</a>,</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                         <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(I32Ty, <a class="code" href="classllvm_1_1Value.html">Value</a>), Name);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  <a class="code" href="structllvm_1_1omp_1_1GV.html">GV</a>-&gt;setVisibility(<a class="code" href="classllvm_1_1GlobalValue.html#a9141f967188383108a69cc1b8ed3c195a7eade123587a08e674f2ca72e2443771">GlobalValue::HiddenVisibility</a>);</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160; </div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1omp_1_1GV.html">GV</a>;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;}</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160; </div>
<div class="line"><a name="l00554"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a02cae9681b22a06e7738a4c1f3de233e">  554</a></span>&#160;<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a02cae9681b22a06e7738a4c1f3de233e">OpenMPIRBuilder::getOrCreateIdent</a>(<a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr,</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                                            <a class="code" href="classuint32__t.html">uint32_t</a> SrcLocStrSize,</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                                            <a class="code" href="namespacellvm_1_1omp.html#a0e821d8251c97d66ca185efe2f8ffde2">IdentFlag</a> LocFlags,</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                                            <span class="keywordtype">unsigned</span> Reserve2Flags) {</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <span class="comment">// Enable &quot;C-mode&quot;.</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  LocFlags |= OMP_IDENT_FLAG_KMPC;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160; </div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *&amp;Ident =</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      IdentMap[{SrcLocStr, <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a>(LocFlags) &lt;&lt; 31 | Reserve2Flags}];</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  <span class="keywordflow">if</span> (!Ident) {</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *I32Null = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(Int32);</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *IdentData[] = {I32Null,</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                             <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Int32, <a class="code" href="classuint32__t.html">uint32_t</a>(LocFlags)),</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                             <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Int32, Reserve2Flags),</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                             <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Int32, SrcLocStrSize), SrcLocStr};</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Initializer =</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        <a class="code" href="classllvm_1_1ConstantStruct.html#a54fcfa620deb80373f489ba2fdad7643">ConstantStruct::get</a>(OpenMPIRBuilder::Ident, IdentData);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160; </div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="comment">// Look for existing encoding of the location + flags, not needed but</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="comment">// minimizes the difference to the existing solution while we transition.</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> &amp;<a class="code" href="structllvm_1_1omp_1_1GV.html">GV</a> : <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.globals())</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="structllvm_1_1omp_1_1GV.html">GV</a>.getValueType() == OpenMPIRBuilder::Ident &amp;&amp; <a class="code" href="structllvm_1_1omp_1_1GV.html">GV</a>.hasInitializer())</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="structllvm_1_1omp_1_1GV.html">GV</a>.getInitializer() == Initializer)</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;          Ident = &amp;<a class="code" href="structllvm_1_1omp_1_1GV.html">GV</a>;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160; </div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="keywordflow">if</span> (!Ident) {</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;      <span class="keyword">auto</span> *<a class="code" href="structllvm_1_1omp_1_1GV.html">GV</a> = <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>(</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;          <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, OpenMPIRBuilder::Ident,</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;          <span class="comment">/* isConstant = */</span> <span class="keyword">true</span>, <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca04ed141708c0fd16723d212502b046ae">GlobalValue::PrivateLinkage</a>, Initializer, <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;          <span class="keyword">nullptr</span>, <a class="code" href="classllvm_1_1GlobalValue.html#a05c6b3b9372b56d130e005db4837da62a7483b56cbb22b39c485b4648ea3374b0">GlobalValue::NotThreadLocal</a>,</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;          <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getDataLayout().getDefaultGlobalsAddressSpace());</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      <a class="code" href="structllvm_1_1omp_1_1GV.html">GV</a>-&gt;setUnnamedAddr(<a class="code" href="classllvm_1_1GlobalValue.html#ae8df4be75bfc50b1eadd74e85c25fa45a4cc6684df7b4a92b1dec6fce3264fac8">GlobalValue::UnnamedAddr::Global</a>);</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;      <a class="code" href="structllvm_1_1omp_1_1GV.html">GV</a>-&gt;setAlignment(<a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(8));</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;      Ident = <a class="code" href="structllvm_1_1omp_1_1GV.html">GV</a>;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    }</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  }</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160; </div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantExpr.html#a28bf8984fbfb08fd27df435e631e6832">ConstantExpr::getPointerBitCastOrAddrSpaceCast</a>(Ident, IdentPtr);</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;}</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160; </div>
<div class="line"><a name="l00594"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a55a39962245dd2e0938194dd3b4438e5">  594</a></span>&#160;<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a55a39962245dd2e0938194dd3b4438e5">OpenMPIRBuilder::getOrCreateSrcLocStr</a>(<a class="code" href="classllvm_1_1StringRef.html">StringRef</a> LocStr,</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                                                <a class="code" href="classuint32__t.html">uint32_t</a> &amp;SrcLocStrSize) {</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  SrcLocStrSize = LocStr.<a class="code" href="classllvm_1_1StringRef.html#a5db9240c74644c67759dd0f901fc3c7d">size</a>();</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *&amp;SrcLocStr = SrcLocStrMap[LocStr];</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <span class="keywordflow">if</span> (!SrcLocStr) {</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Initializer =</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        <a class="code" href="classllvm_1_1ConstantDataArray.html#a3edef3fa47c611d3d10606591213e57b">ConstantDataArray::getString</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(), LocStr);</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160; </div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="comment">// Look for existing encoding of the location, not needed but minimizes the</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="comment">// difference to the existing solution while we transition.</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> &amp;<a class="code" href="structllvm_1_1omp_1_1GV.html">GV</a> : <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.globals())</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="structllvm_1_1omp_1_1GV.html">GV</a>.isConstant() &amp;&amp; <a class="code" href="structllvm_1_1omp_1_1GV.html">GV</a>.hasInitializer() &amp;&amp;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;          <a class="code" href="structllvm_1_1omp_1_1GV.html">GV</a>.getInitializer() == Initializer)</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        <span class="keywordflow">return</span> SrcLocStr = <a class="code" href="classllvm_1_1ConstantExpr.html#a1f469b1f703519ae25ce564c8704310f">ConstantExpr::getPointerCast</a>(&amp;<a class="code" href="structllvm_1_1omp_1_1GV.html">GV</a>, Int8Ptr);</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160; </div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    SrcLocStr = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateGlobalStringPtr(LocStr, <span class="comment">/* Name */</span> <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                                              <span class="comment">/* AddressSpace */</span> 0, &amp;<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>);</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  }</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <span class="keywordflow">return</span> SrcLocStr;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;}</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160; </div>
<div class="line"><a name="l00615"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a061144e3e490f8917de9c53163ef8c01">  615</a></span>&#160;<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a55a39962245dd2e0938194dd3b4438e5">OpenMPIRBuilder::getOrCreateSrcLocStr</a>(<a class="code" href="classllvm_1_1StringRef.html">StringRef</a> FunctionName,</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                                                <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> FileName,</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                                                <span class="keywordtype">unsigned</span> Line, <span class="keywordtype">unsigned</span> Column,</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                                                <a class="code" href="classuint32__t.html">uint32_t</a> &amp;SrcLocStrSize) {</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> Buffer;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  Buffer.push_back(<span class="charliteral">&#39;;&#39;</span>);</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  Buffer.<a class="code" href="classllvm_1_1SmallString.html#ac22cf1a1c08b7ccaefc51508536312a4">append</a>(FileName);</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  Buffer.push_back(<span class="charliteral">&#39;;&#39;</span>);</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  Buffer.<a class="code" href="classllvm_1_1SmallString.html#ac22cf1a1c08b7ccaefc51508536312a4">append</a>(FunctionName);</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  Buffer.push_back(<span class="charliteral">&#39;;&#39;</span>);</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  Buffer.<a class="code" href="classllvm_1_1SmallString.html#ac22cf1a1c08b7ccaefc51508536312a4">append</a>(<a class="code" href="namespacellvm.html#a13c1b5a253da5da49ce33d03dc1efc07">std::to_string</a>(Line));</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  Buffer.push_back(<span class="charliteral">&#39;;&#39;</span>);</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  Buffer.<a class="code" href="classllvm_1_1SmallString.html#ac22cf1a1c08b7ccaefc51508536312a4">append</a>(<a class="code" href="namespacellvm.html#a13c1b5a253da5da49ce33d03dc1efc07">std::to_string</a>(Column));</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  Buffer.push_back(<span class="charliteral">&#39;;&#39;</span>);</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  Buffer.push_back(<span class="charliteral">&#39;;&#39;</span>);</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  <span class="keywordflow">return</span> getOrCreateSrcLocStr(Buffer.<a class="code" href="classllvm_1_1SmallString.html#af5dd7241878be5eed07736eb156bb10b">str</a>(), SrcLocStrSize);</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;}</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160; </div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<a class="code" href="classllvm_1_1Constant.html">Constant</a> *</div>
<div class="line"><a name="l00634"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#ac35a35b620a34821da2801ebf452a9a0">  634</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#ac35a35b620a34821da2801ebf452a9a0">OpenMPIRBuilder::getOrCreateDefaultSrcLocStr</a>(<a class="code" href="classuint32__t.html">uint32_t</a> &amp;SrcLocStrSize) {</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> UnknownLoc = <span class="stringliteral">&quot;;unknown;unknown;0;0;;&quot;</span>;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  <span class="keywordflow">return</span> getOrCreateSrcLocStr(UnknownLoc, SrcLocStrSize);</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;}</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160; </div>
<div class="line"><a name="l00639"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a9b8c05f635a1b8e5a66eeec4704bf291">  639</a></span>&#160;<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a55a39962245dd2e0938194dd3b4438e5">OpenMPIRBuilder::getOrCreateSrcLocStr</a>(<a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                                                <a class="code" href="classuint32__t.html">uint32_t</a> &amp;SrcLocStrSize,</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                                                <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  <a class="code" href="classllvm_1_1DILocation.html">DILocation</a> *DIL = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.get();</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  <span class="keywordflow">if</span> (!DIL)</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <span class="keywordflow">return</span> getOrCreateDefaultSrcLocStr(SrcLocStrSize);</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> FileName = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getName();</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1DIFile.html">DIFile</a> *DIF = DIL-&gt;getFile())</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <span class="keywordflow">if</span> (std::optional&lt;StringRef&gt; <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a> = DIF-&gt;getSource())</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;      FileName = *<a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a>;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> <a class="code" href="classllvm_1_1Function.html">Function</a> = DIL-&gt;getScope()-&gt;getSubprogram()-&gt;getName();</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Function.html">Function</a>.<a class="code" href="classllvm_1_1Function.html#a1d8eb3054fd49a89ff41bc22a48f87e7">empty</a>() &amp;&amp; <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getName();</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  <span class="keywordflow">return</span> getOrCreateSrcLocStr(<a class="code" href="classllvm_1_1Function.html">Function</a>, FileName, DIL-&gt;getLine(),</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                              DIL-&gt;getColumn(), SrcLocStrSize);</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;}</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160; </div>
<div class="line"><a name="l00656"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a4950d59a5a139f25fa75e82a948537fc">  656</a></span>&#160;<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a55a39962245dd2e0938194dd3b4438e5">OpenMPIRBuilder::getOrCreateSrcLocStr</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc,</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;                                                <a class="code" href="classuint32__t.html">uint32_t</a> &amp;SrcLocStrSize) {</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <span class="keywordflow">return</span> getOrCreateSrcLocStr(Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#ac6a58d4f9cf1978ee50af30bdb248d73">DL</a>, SrcLocStrSize,</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                              Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>.getBlock()-&gt;getParent());</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;}</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160; </div>
<div class="line"><a name="l00662"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a9607f501333d84917dc48f5d263e9b6c">  662</a></span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a9607f501333d84917dc48f5d263e9b6c">OpenMPIRBuilder::getOrCreateThreadID</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *Ident) {</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;      getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_global_thread_num), Ident,</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;      <span class="stringliteral">&quot;omp_global_thread_num&quot;</span>);</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;}</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160; </div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a></div>
<div class="line"><a name="l00669"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a4761ddf3a15247582e7106e3968adba5">  669</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a4761ddf3a15247582e7106e3968adba5">OpenMPIRBuilder::createBarrier</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc, <a class="code" href="classllvm_1_1Directive.html">Directive</a> DK,</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                               <span class="keywordtype">bool</span> ForceSimpleCall, <span class="keywordtype">bool</span> CheckCancelFlag) {</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    <span class="keywordflow">return</span> Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  <span class="keywordflow">return</span> emitBarrierImpl(Loc, DK, ForceSimpleCall, CheckCancelFlag);</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;}</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160; </div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a></div>
<div class="line"><a name="l00677"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a28153a5c4f51d07c8228ac5fb5eea266">  677</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a28153a5c4f51d07c8228ac5fb5eea266">OpenMPIRBuilder::emitBarrierImpl</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc, <a class="code" href="classllvm_1_1Directive.html">Directive</a> Kind,</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                                 <span class="keywordtype">bool</span> ForceSimpleCall, <span class="keywordtype">bool</span> CheckCancelFlag) {</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  <span class="comment">// Build call __kmpc_cancel_barrier(loc, thread_id) or</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <span class="comment">//            __kmpc_barrier(loc, thread_id);</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160; </div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  <a class="code" href="namespacellvm_1_1omp.html#a0e821d8251c97d66ca185efe2f8ffde2">IdentFlag</a> BarrierLocFlags;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <span class="keywordflow">switch</span> (Kind) {</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  <span class="keywordflow">case</span> OMPD_for:</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    BarrierLocFlags = OMP_IDENT_FLAG_BARRIER_IMPL_FOR;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  <span class="keywordflow">case</span> OMPD_sections:</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    BarrierLocFlags = OMP_IDENT_FLAG_BARRIER_IMPL_SECTIONS;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  <span class="keywordflow">case</span> OMPD_single:</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    BarrierLocFlags = OMP_IDENT_FLAG_BARRIER_IMPL_SINGLE;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  <span class="keywordflow">case</span> OMPD_barrier:</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    BarrierLocFlags = OMP_IDENT_FLAG_BARRIER_EXPL;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    BarrierLocFlags = OMP_IDENT_FLAG_BARRIER_IMPL;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  }</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160; </div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  <a class="code" href="classuint32__t.html">uint32_t</a> SrcLocStrSize;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc, SrcLocStrSize);</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[] = {</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;      getOrCreateIdent(SrcLocStr, SrcLocStrSize, BarrierLocFlags),</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;      getOrCreateThreadID(getOrCreateIdent(SrcLocStr, SrcLocStrSize))};</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160; </div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  <span class="comment">// If we are in a cancellable parallel region, barriers are cancellation</span></div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  <span class="comment">// points.</span></div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  <span class="comment">// TODO: Check why we would force simple calls or to ignore the cancel flag.</span></div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  <span class="keywordtype">bool</span> UseCancelBarrier =</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      !ForceSimpleCall &amp;&amp; isLastFinalizationInfoCancellable(OMPD_parallel);</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160; </div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Result =</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(getOrCreateRuntimeFunctionPtr(</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;                             UseCancelBarrier ? OMPRTL___kmpc_cancel_barrier</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;                                              : OMPRTL___kmpc_barrier),</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                         <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160; </div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  <span class="keywordflow">if</span> (UseCancelBarrier &amp;&amp; CheckCancelFlag)</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    emitCancelationCheckImpl(Result, OMPD_parallel);</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160; </div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP();</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;}</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160; </div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a></div>
<div class="line"><a name="l00726"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a30999e2e13909b5f129f0bae43095f3b">  726</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a30999e2e13909b5f129f0bae43095f3b">OpenMPIRBuilder::createCancel</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc,</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;                              <a class="code" href="classllvm_1_1Value.html">Value</a> *IfCondition,</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                              omp::Directive CanceledDirective) {</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <span class="keywordflow">return</span> Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160; </div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  <span class="comment">// LLVM utilities like blocks with terminators.</span></div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  <span class="keyword">auto</span> *UI = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateUnreachable();</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160; </div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *ThenTI = UI, *ElseTI = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  <span class="keywordflow">if</span> (IfCondition)</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <a class="code" href="namespacellvm.html#a47d9d4544f29bfafd32f0d62db009915">SplitBlockAndInsertIfThenElse</a>(IfCondition, UI, &amp;ThenTI, &amp;ElseTI);</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(ThenTI);</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160; </div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CancelKind = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  <span class="keywordflow">switch</span> (CanceledDirective) {</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;<span class="preprocessor">#define OMP_CANCEL_KIND(Enum, Str, DirectiveEnum, Value)                       \</span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="preprocessor">  case DirectiveEnum:                                                          \</span></div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="preprocessor">    CancelKind = Builder.getInt32(Value);                                      \</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="preprocessor">    break;</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="preprocessor">#include &quot;llvm/Frontend/OpenMP/OMPKinds.def&quot;</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unknown cancel kind!&quot;</span>);</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  }</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160; </div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  <a class="code" href="classuint32__t.html">uint32_t</a> SrcLocStrSize;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc, SrcLocStrSize);</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Ident = getOrCreateIdent(SrcLocStr, SrcLocStrSize);</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[] = {Ident, getOrCreateThreadID(Ident), CancelKind};</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Result = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;      getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_cancel), <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  <span class="keyword">auto</span> ExitCB = [<span class="keyword">this</span>, CanceledDirective, Loc](<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> IP) {</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <span class="keywordflow">if</span> (CanceledDirective == OMPD_parallel) {</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;      <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::InsertPointGuard</a> IPG(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(IP);</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;      createBarrier(<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP(), Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#ac6a58d4f9cf1978ee50af30bdb248d73">DL</a>),</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                    omp::Directive::OMPD_unknown, <span class="comment">/* ForceSimpleCall */</span> <span class="keyword">false</span>,</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;                    <span class="comment">/* CheckCancelFlag */</span> <span class="keyword">false</span>);</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    }</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  };</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160; </div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  <span class="comment">// The actual cancel logic is shared with others, e.g., cancel_barriers.</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;  emitCancelationCheckImpl(Result, CanceledDirective, ExitCB);</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160; </div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  <span class="comment">// Update the insertion point and remove the terminator we introduced.</span></div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(UI-&gt;getParent());</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;  UI-&gt;eraseFromParent();</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160; </div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP();</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;}</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160; </div>
<div class="line"><a name="l00777"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a710808150839f3d1aa32362b1566d9d3">  777</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a710808150839f3d1aa32362b1566d9d3">OpenMPIRBuilder::emitOffloadingEntry</a>(<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>, <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> Name,</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                                          <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> Size, int32_t Flags,</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                                          <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> <a class="code" href="structllvm_1_1SectionName.html">SectionName</a>) {</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Int8PtrTy = <a class="code" href="classllvm_1_1Type.html#a7fe9ccd4893f4e2caa826126c09545ea">Type::getInt8PtrTy</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext());</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *<a class="code" href="NVVMIntrRange_8cpp.html#abc8aecb5b627f6a91fc2fb09762d2a41">Int32Ty</a> = <a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext());</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *SizeTy = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getDataLayout().getIntPtrType(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext());</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160; </div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *AddrName = <a class="code" href="classllvm_1_1ConstantDataArray.html#a3edef3fa47c611d3d10606591213e57b">ConstantDataArray::getString</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(), Name);</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160; </div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;  <span class="comment">// Create the constant string used to look up the symbol in the device.</span></div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  <span class="keyword">auto</span> *Str =</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;      <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">llvm::GlobalVariable</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, AddrName-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), <span class="comment">/*isConstant=*/</span><span class="keyword">true</span>,</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;                               <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">llvm::GlobalValue::InternalLinkage</a>, AddrName,</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;                               <span class="stringliteral">&quot;.omp_offloading.entry_name&quot;</span>);</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  Str-&gt;setUnnamedAddr(<a class="code" href="classllvm_1_1GlobalValue.html#ae8df4be75bfc50b1eadd74e85c25fa45a4cc6684df7b4a92b1dec6fce3264fac8">llvm::GlobalValue::UnnamedAddr::Global</a>);</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160; </div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;  <span class="comment">// Construct the offloading entry.</span></div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *EntryData[] = {</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;      <a class="code" href="classllvm_1_1ConstantExpr.html#a28bf8984fbfb08fd27df435e631e6832">ConstantExpr::getPointerBitCastOrAddrSpaceCast</a>(<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>, Int8PtrTy),</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;      <a class="code" href="classllvm_1_1ConstantExpr.html#a28bf8984fbfb08fd27df435e631e6832">ConstantExpr::getPointerBitCastOrAddrSpaceCast</a>(Str, Int8PtrTy),</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;      <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(SizeTy, Size),</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;      <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="NVVMIntrRange_8cpp.html#abc8aecb5b627f6a91fc2fb09762d2a41">Int32Ty</a>, <a class="code" href="namespacellvm_1_1omp.html#a16d7c5f77008a84ae20bf4a5c41e51f0a4ea7801f17a4e5485e8b050c052fb443">Flags</a>),</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;      <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="NVVMIntrRange_8cpp.html#abc8aecb5b627f6a91fc2fb09762d2a41">Int32Ty</a>, 0),</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  };</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *EntryInitializer =</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;      <a class="code" href="classllvm_1_1ConstantStruct.html#a54fcfa620deb80373f489ba2fdad7643">ConstantStruct::get</a>(OpenMPIRBuilder::OffloadEntry, EntryData);</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160; </div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  <span class="keyword">auto</span> *Entry = <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>(</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;      <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, OpenMPIRBuilder::OffloadEntry,</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;      <span class="comment">/* isConstant = */</span> <span class="keyword">true</span>, <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca8d13a9bcecfac72febceb1103afa048f">GlobalValue::WeakAnyLinkage</a>, EntryInitializer,</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;      <span class="stringliteral">&quot;.omp_offloading.entry.&quot;</span> + Name, <span class="keyword">nullptr</span>, <a class="code" href="classllvm_1_1GlobalValue.html#a05c6b3b9372b56d130e005db4837da62a7483b56cbb22b39c485b4648ea3374b0">GlobalValue::NotThreadLocal</a>,</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;      <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getDataLayout().getDefaultGlobalsAddressSpace());</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160; </div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;  <span class="comment">// The entry has to be created in the section the linker expects it to be.</span></div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;  Entry-&gt;setSection(<a class="code" href="structllvm_1_1SectionName.html">SectionName</a>);</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  Entry-&gt;setAlignment(<a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(1));</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;}</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160; </div>
<div class="line"><a name="l00815"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a4c01c26b7c8b4373f3cc9754e7dcd583">  815</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a4c01c26b7c8b4373f3cc9754e7dcd583">OpenMPIRBuilder::emitTargetKernel</a>(</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc, <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;Return, <a class="code" href="classllvm_1_1Value.html">Value</a> *Ident,</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *DeviceID, <a class="code" href="classllvm_1_1Value.html">Value</a> *NumTeams, <a class="code" href="classllvm_1_1Value.html">Value</a> *NumThreads, <a class="code" href="classllvm_1_1Value.html">Value</a> *HostPtr,</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Value *&gt;</a> KernelArgs) {</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <span class="keywordflow">return</span> Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160; </div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  <span class="keyword">auto</span> *KernelArgsPtr =</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(OpenMPIRBuilder::KernelArgs, <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;kernel_args&quot;</span>);</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, Size = KernelArgs.<a class="code" href="classllvm_1_1ArrayRef.html#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != Size; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    <a class="code" href="classllvm_1_1Value.html">llvm::Value</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a> =</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStructGEP(OpenMPIRBuilder::KernelArgs, KernelArgsPtr, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlignedStore(</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;        KernelArgs[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>], <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>,</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;        <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getDataLayout().getPrefTypeAlign(KernelArgs[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]-&gt;getType()));</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  }</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160; </div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *&gt;</a> OffloadingArgs{Ident,      DeviceID, NumTeams,</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                                      NumThreads, HostPtr,  KernelArgsPtr};</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160; </div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  Return = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;      getOrCreateRuntimeFunction(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, OMPRTL___tgt_target_kernel),</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;      OffloadingArgs);</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160; </div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP();</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;}</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160; </div>
<div class="line"><a name="l00842"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#ac0057ec814345445fc0c55e9fe928e35">  842</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#ac0057ec814345445fc0c55e9fe928e35">OpenMPIRBuilder::emitCancelationCheckImpl</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *CancelFlag,</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;                                               omp::Directive CanceledDirective,</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;                                               <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a03b6c43472b3040013de9cbc25376925">FinalizeCallbackTy</a> ExitCB) {</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isLastFinalizationInfoCancellable(CanceledDirective) &amp;&amp;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;         <span class="stringliteral">&quot;Unexpected cancellation!&quot;</span>);</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160; </div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;  <span class="comment">// For a cancel barrier we create two new blocks.</span></div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.GetInsertBlock();</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NonCancellationBlock;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.GetInsertPoint() == <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;end()) {</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <span class="comment">// TODO: This branch will not be needed once we moved to the</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    <span class="comment">// OpenMPIRBuilder codegen completely.</span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    NonCancellationBlock = <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getContext(), <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getName() + <span class="stringliteral">&quot;.cont&quot;</span>, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getParent());</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    NonCancellationBlock = <a class="code" href="namespacellvm.html#ad295cb34421c21507bc9cdefe1ba3f16">SplitBlock</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, &amp;*<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.GetInsertPoint());</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator()-&gt;eraseFromParent();</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  }</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *CancellationBlock = <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;      <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getContext(), <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getName() + <span class="stringliteral">&quot;.cncl&quot;</span>, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getParent());</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160; </div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;  <span class="comment">// Jump to them based on the return value.</span></div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Cmp = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIsNull(CancelFlag);</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCondBr(Cmp, NonCancellationBlock, CancellationBlock,</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;                       <span class="comment">/* TODO weight */</span> <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160; </div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  <span class="comment">// From the cancellation block we finalize all variables and go to the</span></div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;  <span class="comment">// post finalization block that is known to the FiniCB callback.</span></div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(CancellationBlock);</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;  <span class="keywordflow">if</span> (ExitCB)</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    ExitCB(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP());</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  <span class="keyword">auto</span> &amp;FI = FinalizationStack.back();</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;  FI.FiniCB(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP());</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160; </div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;  <span class="comment">// The continuation block is where code generation continues.</span></div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(NonCancellationBlock, NonCancellationBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>());</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;}</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160; </div>
<div class="line"><a name="l00881"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#aa453737596c25281abfa783850b1e15c">  881</a></span>&#160;<a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::InsertPoint</a> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aa453737596c25281abfa783850b1e15c">OpenMPIRBuilder::createParallel</a>(</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc, <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> OuterAllocaIP,</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    <a class="code" href="classllvm_1_1function__ref.html">BodyGenCallbackTy</a> BodyGenCB, <a class="code" href="classllvm_1_1function__ref.html">PrivatizeCallbackTy</a> PrivCB,</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a03b6c43472b3040013de9cbc25376925">FinalizeCallbackTy</a> FiniCB, <a class="code" href="classllvm_1_1Value.html">Value</a> *IfCondition, <a class="code" href="classllvm_1_1Value.html">Value</a> *NumThreads,</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    omp::ProcBindKind ProcBind, <span class="keywordtype">bool</span> IsCancellable) {</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="OMPIRBuilder_8cpp.html#a756b28f370cd5a39bc0ee3e5333b9c9b">isConflictIP</a>(Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>, OuterAllocaIP) &amp;&amp; <span class="stringliteral">&quot;IPs must not be ambiguous&quot;</span>);</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160; </div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    <span class="keywordflow">return</span> Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>;</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160; </div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  <a class="code" href="classuint32__t.html">uint32_t</a> SrcLocStrSize;</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc, SrcLocStrSize);</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Ident = getOrCreateIdent(SrcLocStr, SrcLocStrSize);</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ThreadID = getOrCreateThreadID(Ident);</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160; </div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  <span class="keywordflow">if</span> (NumThreads) {</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    <span class="comment">// Build call __kmpc_push_num_threads(&amp;Ident, global_tid, num_threads)</span></div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[] = {</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        Ident, ThreadID,</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIntCast(NumThreads, Int32, <span class="comment">/*isSigned*/</span> <span class="keyword">false</span>)};</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;        getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_push_num_threads), <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  }</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160; </div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  <span class="keywordflow">if</span> (ProcBind != OMP_PROC_BIND_default) {</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <span class="comment">// Build call __kmpc_push_proc_bind(&amp;Ident, global_tid, proc_bind)</span></div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[] = {</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;        Ident, ThreadID,</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;        <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Int32, <span class="keywordtype">unsigned</span>(ProcBind), <span class="comment">/*isSigned=*/</span><span class="keyword">true</span>)};</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;        getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_push_proc_bind), <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  }</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160; </div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *InsertBB = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.GetInsertBlock();</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *OuterFn = InsertBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>();</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160; </div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;  <span class="comment">// Save the outer alloca block because the insertion iterator may get</span></div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;  <span class="comment">// invalidated and we still need this later.</span></div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OuterAllocaBlock = OuterAllocaIP.getBlock();</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160; </div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;  <span class="comment">// Vector to remember instructions we used only during the modeling but which</span></div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;  <span class="comment">// we want to delete at the end.</span></div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 4&gt;</a> ToBeDeleted;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160; </div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;  <span class="comment">// Change the location to the outer alloca insertion point to create and</span></div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;  <span class="comment">// initialize the allocas we pass into the parallel region.</span></div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(OuterAllocaIP);</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *TIDAddr = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(Int32, <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;tid.addr&quot;</span>);</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;  <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *ZeroAddr = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(Int32, <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;zero.addr&quot;</span>);</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160; </div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  <span class="comment">// We only need TIDAddr and ZeroAddr for modeling purposes to get the</span></div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  <span class="comment">// associated arguments in the outlined function, so we delete them later.</span></div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;  ToBeDeleted.push_back(TIDAddr);</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  ToBeDeleted.push_back(ZeroAddr);</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160; </div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  <span class="comment">// Create an artificial insertion point that will also ensure the blocks we</span></div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  <span class="comment">// are about to split are not degenerated.</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;  <span class="keyword">auto</span> *UI = <span class="keyword">new</span> <a class="code" href="classllvm_1_1UnreachableInst.html">UnreachableInst</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getContext(), InsertBB);</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160; </div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *EntryBB = UI-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>();</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PRegEntryBB = EntryBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a52c990590792c91dd20b6d45acebe359">splitBasicBlock</a>(UI, <span class="stringliteral">&quot;omp.par.entry&quot;</span>);</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PRegBodyBB = PRegEntryBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a52c990590792c91dd20b6d45acebe359">splitBasicBlock</a>(UI, <span class="stringliteral">&quot;omp.par.region&quot;</span>);</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PRegPreFiniBB =</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;      PRegBodyBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a52c990590792c91dd20b6d45acebe359">splitBasicBlock</a>(UI, <span class="stringliteral">&quot;omp.par.pre_finalize&quot;</span>);</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PRegExitBB = PRegPreFiniBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a52c990590792c91dd20b6d45acebe359">splitBasicBlock</a>(UI, <span class="stringliteral">&quot;omp.par.exit&quot;</span>);</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160; </div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  <span class="keyword">auto</span> FiniCBWrapper = [&amp;](<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> IP) {</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    <span class="comment">// Hide &quot;open-ended&quot; blocks from the given FiniCB by setting the right jump</span></div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    <span class="comment">// target to the region exit block.</span></div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    <span class="keywordflow">if</span> (IP.getBlock()-&gt;end() == IP.getPoint()) {</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;      <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::InsertPointGuard</a> IPG(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(IP);</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBr(PRegExitBB);</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;      IP = <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent(), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getIterator());</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    }</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IP.getBlock()-&gt;getTerminator()-&gt;getNumSuccessors() == 1 &amp;&amp;</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;           IP.getBlock()-&gt;getTerminator()-&gt;getSuccessor(0) == PRegExitBB &amp;&amp;</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;           <span class="stringliteral">&quot;Unexpected insertion point for finalization call!&quot;</span>);</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    <span class="keywordflow">return</span> FiniCB(IP);</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;  };</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160; </div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;  FinalizationStack.push_back({FiniCBWrapper, OMPD_parallel, IsCancellable});</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160; </div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;  <span class="comment">// Generate the privatization allocas in the block that will become the entry</span></div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;  <span class="comment">// of the outlined function.</span></div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(PRegEntryBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;  <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> InnerAllocaIP = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP();</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160; </div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;  <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *PrivTIDAddr =</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(Int32, <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;tid.addr.local&quot;</span>);</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *PrivTID = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(Int32, PrivTIDAddr, <span class="stringliteral">&quot;tid&quot;</span>);</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160; </div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  <span class="comment">// Add some fake uses for OpenMP provided arguments.</span></div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;  ToBeDeleted.push_back(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(Int32, TIDAddr, <span class="stringliteral">&quot;tid.addr.use&quot;</span>));</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *ZeroAddrUse =</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(Int32, ZeroAddr, <span class="stringliteral">&quot;zero.addr.use&quot;</span>);</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;  ToBeDeleted.push_back(ZeroAddrUse);</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160; </div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;  <span class="comment">// EntryBB</span></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;  <span class="comment">//   |</span></div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;  <span class="comment">//   V</span></div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;  <span class="comment">// PRegionEntryBB         &lt;- Privatization allocas are placed here.</span></div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  <span class="comment">//   |</span></div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  <span class="comment">//   V</span></div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  <span class="comment">// PRegionBodyBB          &lt;- BodeGen is invoked here.</span></div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;  <span class="comment">//   |</span></div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;  <span class="comment">//   V</span></div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;  <span class="comment">// PRegPreFiniBB          &lt;- The block we will start finalization from.</span></div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;  <span class="comment">//   |</span></div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;  <span class="comment">//   V</span></div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;  <span class="comment">// PRegionExitBB          &lt;- A common exit to simplify block collection.</span></div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160; </div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Before body codegen: &quot;</span> &lt;&lt; *OuterFn &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160; </div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;  <span class="comment">// Let the caller create the body.</span></div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(BodyGenCB &amp;&amp; <span class="stringliteral">&quot;Expected body generation callback!&quot;</span>);</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;  <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> CodeGenIP(PRegBodyBB, PRegBodyBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>());</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  BodyGenCB(InnerAllocaIP, CodeGenIP);</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160; </div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;After  body codegen: &quot;</span> &lt;&lt; *OuterFn &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> RTLFn;</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;  <span class="keywordflow">if</span> (IfCondition)</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    RTLFn = getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_fork_call_if);</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    RTLFn = getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_fork_call);</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160; </div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = dyn_cast&lt;llvm::Function&gt;(RTLFn.<a class="code" href="classllvm_1_1FunctionCallee.html#a0055cd5464b935f571b36979a86bd7fc">getCallee</a>())) {</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;hasMetadata(llvm::LLVMContext::MD_callback)) {</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;      <a class="code" href="classllvm_1_1LLVMContext.html">llvm::LLVMContext</a> &amp;Ctx = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getContext();</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;      <a class="code" href="classllvm_1_1MDBuilder.html">MDBuilder</a> MDB(Ctx);</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;      <span class="comment">// Annotate the callback behavior of the __kmpc_fork_call:</span></div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;      <span class="comment">//  - The callback callee is argument number 2 (microtask).</span></div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;      <span class="comment">//  - The first two arguments of the callback callee are unknown (-1).</span></div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;      <span class="comment">//  - All variadic arguments to the __kmpc_fork_call are passed to the</span></div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;      <span class="comment">//    callback callee.</span></div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;      <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;addMetadata(</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;          llvm::LLVMContext::MD_callback,</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;          *<a class="code" href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">llvm::MDNode::get</a>(</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;              Ctx, {MDB.<a class="code" href="classllvm_1_1MDBuilder.html#a1d51e11adfffd05afe252d3398f50d4e">createCallbackEncoding</a>(2, {-1, -1},</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;                                               <span class="comment">/* VarArgsArePassed */</span> <span class="keyword">true</span>)}));</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    }</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;  }</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160; </div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;  <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1OutlineInfo.html">OutlineInfo</a> OI;</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  OI.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1OutlineInfo.html#a0b8f73f7987421a24a842d3e2633278d">PostOutlineCB</a> = [=](<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;OutlinedFn) {</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    <span class="comment">// Add some known attributes.</span></div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    OutlinedFn.addParamAttr(0, Attribute::NoAlias);</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    OutlinedFn.addParamAttr(1, Attribute::NoAlias);</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    OutlinedFn.addFnAttr(Attribute::NoUnwind);</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    OutlinedFn.addFnAttr(Attribute::NoRecurse);</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160; </div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(OutlinedFn.arg_size() &gt;= 2 &amp;&amp;</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;           <span class="stringliteral">&quot;Expected at least tid and bounded tid as arguments&quot;</span>);</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    <span class="keywordtype">unsigned</span> NumCapturedVars =</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;        OutlinedFn.arg_size() - <span class="comment">/* tid &amp; bounded tid */</span> 2;</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160; </div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI = cast&lt;CallInst&gt;(OutlinedFn.user_back());</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    CI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">setName</a>(<span class="stringliteral">&quot;omp_parallel&quot;</span>);</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(CI);</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160; </div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    <span class="comment">// Build call __kmpc_fork_call[_if](Ident, n, microtask, var1, .., varn);</span></div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *ForkCallArgs[] = {</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;        Ident, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt32(NumCapturedVars),</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(&amp;OutlinedFn, ParallelTaskPtr)};</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160; </div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 16&gt;</a> RealArgs;</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    RealArgs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a7efd1f0c1206d95e4fe01a9b49a57b82">append</a>(<a class="code" href="namespacellvm_1_1sys_1_1path.html#a00a76a729b319dc47beffbe07325565f">std::begin</a>(ForkCallArgs), <a class="code" href="namespacellvm_1_1sys_1_1path.html#a214ec2f04ffd92636ed4bd2717607a1d">std::end</a>(ForkCallArgs));</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    <span class="keywordflow">if</span> (IfCondition) {</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSExtOrTrunc(IfCondition,</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;                                              <a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext()));</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;      RealArgs.push_back(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>);</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    }</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    RealArgs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a7efd1f0c1206d95e4fe01a9b49a57b82">append</a>(CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#a4fb513d744ca72275932b2c7003f16f6">arg_begin</a>() + <span class="comment">/* tid &amp; bound tid */</span> 2, CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#ac0f11b96f81b2769dd23d028e3189075">arg_end</a>());</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160; </div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <span class="comment">// __kmpc_fork_call_if always expects a void ptr as the last argument</span></div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <span class="comment">// If there are no arguments, pass a null pointer.</span></div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    <span class="keyword">auto</span> PtrTy = <a class="code" href="classllvm_1_1Type.html#a7fe9ccd4893f4e2caa826126c09545ea">Type::getInt8PtrTy</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext());</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    <span class="keywordflow">if</span> (IfCondition &amp;&amp; NumCapturedVars == 0) {</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;      <a class="code" href="classllvm_1_1Value.html">llvm::Value</a> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a8ce14d8b0fc90289ee23848f6de11c47">Void</a> = <a class="code" href="classllvm_1_1ConstantPointerNull.html#a96f5c85e4022e369266541b2db3fda69">ConstantPointerNull::get</a>(PtrTy);</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;      RealArgs.push_back(<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a8ce14d8b0fc90289ee23848f6de11c47">Void</a>);</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    }</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    <span class="keywordflow">if</span> (IfCondition &amp;&amp; RealArgs.back()-&gt;getType() != PtrTy)</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;      RealArgs.back() = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(RealArgs.back(), PtrTy);</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160; </div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(RTLFn, RealArgs);</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160; </div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;With fork_call placed: &quot;</span></div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;                      &lt;&lt; *<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.GetInsertBlock()-&gt;getParent() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160; </div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> ExitIP(PRegExitBB, PRegExitBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>());</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160; </div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    <span class="comment">// Initialize the local TID stack location with the argument value.</span></div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(PrivTID);</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    <a class="code" href="classllvm_1_1Argument.html">Function::arg_iterator</a> OutlinedAI = OutlinedFn.arg_begin();</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(Int32, OutlinedAI), PrivTIDAddr);</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160; </div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    CI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160; </div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : ToBeDeleted)</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;      <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;  };</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160; </div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;  <span class="comment">// Adjust the finalization stack, verify the adjustment, and call the</span></div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;  <span class="comment">// finalize function a last time to finalize values between the pre-fini</span></div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;  <span class="comment">// block and the exit block if we left the parallel &quot;the normal way&quot;.</span></div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;  <span class="keyword">auto</span> FiniInfo = FinalizationStack.pop_back_val();</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;  (void)FiniInfo;</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(FiniInfo.DK == OMPD_parallel &amp;&amp;</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;         <span class="stringliteral">&quot;Unexpected finalization stack state!&quot;</span>);</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160; </div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *PRegPreFiniTI = PRegPreFiniBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>();</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160; </div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;  <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> PreFiniIP(PRegPreFiniBB, PRegPreFiniTI-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>());</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;  FiniCB(PreFiniIP);</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160; </div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;  OI.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1OutlineInfo.html#aed0779b309d9a705e9b78adacc839875">OuterAllocaBB</a> = OuterAllocaBlock;</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;  OI.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1OutlineInfo.html#adc0b48022847ca44b3868d058cb98686">EntryBB</a> = PRegEntryBB;</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;  OI.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1OutlineInfo.html#adb6b79680b86167fd4ec4f32346e9e58">ExitBB</a> = PRegExitBB;</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160; </div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock *, 32&gt;</a> ParallelRegionBlockSet;</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 32&gt;</a> Blocks;</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;  OI.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1OutlineInfo.html#a218bc49443ef1f05fc8074d872d41fcd">collectBlocks</a>(ParallelRegionBlockSet, Blocks);</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160; </div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;  <span class="comment">// Ensure a single exit node for the outlined region by creating one.</span></div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;  <span class="comment">// We might have multiple incoming edges to the exit now due to finalizations,</span></div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;  <span class="comment">// e.g., cancel calls that cause the control flow to leave the region.</span></div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PRegOutlinedExitBB = PRegExitBB;</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;  PRegExitBB = <a class="code" href="namespacellvm.html#ad295cb34421c21507bc9cdefe1ba3f16">SplitBlock</a>(PRegExitBB, &amp;*PRegExitBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a161fd4e9fa5367f64c2a4c9e921c3ad3">getFirstInsertionPt</a>());</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  PRegOutlinedExitBB-&gt;<a class="code" href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">setName</a>(<span class="stringliteral">&quot;omp.par.outlined.exit&quot;</span>);</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  Blocks.push_back(PRegOutlinedExitBB);</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160; </div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;  <a class="code" href="classllvm_1_1CodeExtractorAnalysisCache.html">CodeExtractorAnalysisCache</a> CEAC(*OuterFn);</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;  <a class="code" href="classllvm_1_1CodeExtractor.html">CodeExtractor</a> Extractor(Blocks, <span class="comment">/* DominatorTree */</span> <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;                          <span class="comment">/* AggregateArgs */</span> <span class="keyword">false</span>,</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;                          <span class="comment">/* BlockFrequencyInfo */</span> <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;                          <span class="comment">/* BranchProbabilityInfo */</span> <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;                          <span class="comment">/* AssumptionCache */</span> <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;                          <span class="comment">/* AllowVarArgs */</span> <span class="keyword">true</span>,</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;                          <span class="comment">/* AllowAlloca */</span> <span class="keyword">true</span>,</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;                          <span class="comment">/* AllocationBlock */</span> OuterAllocaBlock,</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;                          <span class="comment">/* Suffix */</span> <span class="stringliteral">&quot;.omp_par&quot;</span>);</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160; </div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;  <span class="comment">// Find inputs to, outputs from the code region.</span></div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *CommonExit = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;  <a class="code" href="classllvm_1_1SetVector.html">SetVector&lt;Value *&gt;</a> Inputs, Outputs, SinkingCands, HoistingCands;</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;  Extractor.<a class="code" href="classllvm_1_1CodeExtractor.html#a537993928c8af5b0d064fcd5ce1dec2f">findAllocas</a>(CEAC, SinkingCands, HoistingCands, CommonExit);</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;  Extractor.<a class="code" href="classllvm_1_1CodeExtractor.html#a3719f9e5392a61378d7815a6c346abda">findInputsOutputs</a>(Inputs, Outputs, SinkingCands);</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160; </div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Before privatization: &quot;</span> &lt;&lt; *OuterFn &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160; </div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;  <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> TIDRTLFn =</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;      getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_global_thread_num);</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160; </div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;  <span class="keyword">auto</span> PrivHelper = [&amp;](<a class="code" href="classllvm_1_1Value.html">Value</a> &amp;V) {</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    <span class="keywordflow">if</span> (&amp;V == TIDAddr || &amp;V == ZeroAddr) {</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;      OI.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1OutlineInfo.html#a5abe93575e72c30376079d2fb31b40f8">ExcludeArgsFromAggregate</a>.push_back(&amp;V);</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    }</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160; </div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    <a class="code" href="classllvm_1_1SetVector.html">SetVector&lt;Use *&gt;</a> <a class="code" href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a>;</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U : V.uses())</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *UserI = dyn_cast&lt;Instruction&gt;(U.getUser()))</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;        <span class="keywordflow">if</span> (ParallelRegionBlockSet.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(UserI-&gt;getParent()))</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;          <a class="code" href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a>.insert(&amp;U);</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160; </div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    <span class="comment">// __kmpc_fork_call expects extra arguments as pointers. If the input</span></div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;    <span class="comment">// already has a pointer type, everything is fine. Otherwise, store the</span></div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    <span class="comment">// value onto stack and load it back inside the to-be-outlined region. This</span></div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    <span class="comment">// will ensure only the pointer will be passed to the function.</span></div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    <span class="comment">// FIXME: if there are more than 15 trailing arguments, they must be</span></div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    <span class="comment">// additionally packed in a struct.</span></div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Inner = &amp;V;</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    <span class="keywordflow">if</span> (!V.getType()-&gt;isPointerTy()) {</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;      <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::InsertPointGuard</a> Guard(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Forwarding input as pointer: &quot;</span> &lt;&lt; V &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160; </div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(OuterAllocaIP);</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> =</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;          <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(V.getType(), <span class="keyword">nullptr</span>, V.getName() + <span class="stringliteral">&quot;.reloaded&quot;</span>);</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160; </div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;      <span class="comment">// Store to stack at end of the block that currently branches to the entry</span></div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;      <span class="comment">// block of the to-be-outlined region.</span></div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(InsertBB,</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;                             InsertBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>());</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(&amp;V, <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>);</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160; </div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;      <span class="comment">// Load back next to allocations in the to-be-outlined region.</span></div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(InnerAllocaIP);</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;      Inner = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(V.getType(), <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>);</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    }</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160; </div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *ReplacementValue = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI = dyn_cast&lt;CallInst&gt;(&amp;V);</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    <span class="keywordflow">if</span> (CI &amp;&amp; CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#a83b8c9e572130f403445c0b0f69b837c">getCalledFunction</a>() == TIDRTLFn.<a class="code" href="classllvm_1_1FunctionCallee.html#a0055cd5464b935f571b36979a86bd7fc">getCallee</a>()) {</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;      ReplacementValue = PrivTID;</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;          PrivCB(InnerAllocaIP, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP(), V, *Inner, ReplacementValue));</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ReplacementValue &amp;&amp;</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;             <span class="stringliteral">&quot;Expected copy/create callback to set replacement value!&quot;</span>);</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;      <span class="keywordflow">if</span> (ReplacementValue == &amp;V)</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    }</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160; </div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">Use</a> *UPtr : <a class="code" href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a>)</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;      UPtr-&gt;set(ReplacementValue);</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;  };</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160; </div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;  <span class="comment">// Reset the inner alloca insertion as it will be used for loading the values</span></div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;  <span class="comment">// wrapped into pointers before passing them into the to-be-outlined region.</span></div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;  <span class="comment">// Configure it to insert immediately after the fake use of zero address so</span></div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;  <span class="comment">// that they are available in the generated body and so that the</span></div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;  <span class="comment">// OpenMP-related values (thread ID and zero address pointers) remain leading</span></div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;  <span class="comment">// in the argument list.</span></div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  InnerAllocaIP = <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::InsertPoint</a>(</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;      ZeroAddrUse-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>(), ZeroAddrUse-&gt;<a class="code" href="classllvm_1_1ilist__node__with__parent.html#a26708685cc8b94fe3d7092ee080dbb34">getNextNode</a>()-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>());</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160; </div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;  <span class="comment">// Reset the outer alloca insertion point to the entry of the relevant block</span></div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;  <span class="comment">// in case it was invalidated.</span></div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;  OuterAllocaIP = <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::InsertPoint</a>(</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;      OuterAllocaBlock, OuterAllocaBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a161fd4e9fa5367f64c2a4c9e921c3ad3">getFirstInsertionPt</a>());</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160; </div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Input : Inputs) {</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Captured input: &quot;</span> &lt;&lt; *Input &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    PrivHelper(*Input);</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;  }</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>({</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Output : Outputs)</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Captured output: &quot;</span> &lt;&lt; *Output &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;  });</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Outputs.<a class="code" href="classllvm_1_1SetVector.html#aaf9ee38b9973681c1720aaf03af3a069">empty</a>() &amp;&amp;</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;         <span class="stringliteral">&quot;OpenMP outlining should not produce live-out values!&quot;</span>);</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160; </div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;After  privatization: &quot;</span> &lt;&lt; *OuterFn &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>({</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : Blocks)</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; PBR: &quot;</span> &lt;&lt; <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getName() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;  });</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160; </div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;  <span class="comment">// Register the outlined info.</span></div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;  addOutlineInfo(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(OI));</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160; </div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;  <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> AfterIP(UI-&gt;getParent(), UI-&gt;getParent()-&gt;end());</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;  UI-&gt;eraseFromParent();</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160; </div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;  <span class="keywordflow">return</span> AfterIP;</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;}</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160; </div>
<div class="line"><a name="l01230"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a2a4b97bb7670d306c756cdbd5ee9b560"> 1230</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a2a4b97bb7670d306c756cdbd5ee9b560">OpenMPIRBuilder::emitFlush</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc) {</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;  <span class="comment">// Build call void __kmpc_flush(ident_t *loc)</span></div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;  <a class="code" href="classuint32__t.html">uint32_t</a> SrcLocStrSize;</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc, SrcLocStrSize);</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[] = {getOrCreateIdent(SrcLocStr, SrcLocStrSize)};</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160; </div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_flush), <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;}</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160; </div>
<div class="line"><a name="l01239"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#afc2cc623eda981e1b3fbb61a44e80ef8"> 1239</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#afc2cc623eda981e1b3fbb61a44e80ef8">OpenMPIRBuilder::createFlush</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc) {</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;  emitFlush(Loc);</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;}</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160; </div>
<div class="line"><a name="l01245"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a177df2c9d7d8692ed214018f420c3de6"> 1245</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a177df2c9d7d8692ed214018f420c3de6">OpenMPIRBuilder::emitTaskwaitImpl</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc) {</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;  <span class="comment">// Build call kmp_int32 __kmpc_omp_taskwait(ident_t *loc, kmp_int32</span></div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;  <span class="comment">// global_tid);</span></div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;  <a class="code" href="classuint32__t.html">uint32_t</a> SrcLocStrSize;</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc, SrcLocStrSize);</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Ident = getOrCreateIdent(SrcLocStr, SrcLocStrSize);</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[] = {Ident, getOrCreateThreadID(Ident)};</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160; </div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;  <span class="comment">// Ignore return result until untied tasks are supported.</span></div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_omp_taskwait),</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;                     <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;}</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160; </div>
<div class="line"><a name="l01258"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a419ffad9e4d59275e299ce1ad3c73cd4"> 1258</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a419ffad9e4d59275e299ce1ad3c73cd4">OpenMPIRBuilder::createTaskwait</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc) {</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;  emitTaskwaitImpl(Loc);</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;}</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160; </div>
<div class="line"><a name="l01264"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a6383328cfcdbbd56502b92f9e2415432"> 1264</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a6383328cfcdbbd56502b92f9e2415432">OpenMPIRBuilder::emitTaskyieldImpl</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc) {</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;  <span class="comment">// Build call __kmpc_omp_taskyield(loc, thread_id, 0);</span></div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;  <a class="code" href="classuint32__t.html">uint32_t</a> SrcLocStrSize;</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc, SrcLocStrSize);</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Ident = getOrCreateIdent(SrcLocStr, SrcLocStrSize);</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *I32Null = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(Int32);</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[] = {Ident, getOrCreateThreadID(Ident), I32Null};</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160; </div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_omp_taskyield),</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;                     <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;}</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160; </div>
<div class="line"><a name="l01276"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a0b0ed7f600549e4239bf10b5b85de66c"> 1276</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a0b0ed7f600549e4239bf10b5b85de66c">OpenMPIRBuilder::createTaskyield</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc) {</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;  emitTaskyieldImpl(Loc);</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;}</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160; </div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a></div>
<div class="line"><a name="l01283"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a621dc84cad8ee0efc4bec3a8dc70a217"> 1283</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a621dc84cad8ee0efc4bec3a8dc70a217">OpenMPIRBuilder::createTask</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc,</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;                            <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> AllocaIP, <a class="code" href="classllvm_1_1function__ref.html">BodyGenCallbackTy</a> BodyGenCB,</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;                            <span class="keywordtype">bool</span> Tied, <a class="code" href="classllvm_1_1Value.html">Value</a> *Final, <a class="code" href="classllvm_1_1Value.html">Value</a> *IfCondition,</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;                            <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;DependData&gt;</a> Dependencies) {</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a>();</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160; </div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;  <a class="code" href="classuint32__t.html">uint32_t</a> SrcLocStrSize;</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc, SrcLocStrSize);</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Ident = getOrCreateIdent(SrcLocStr, SrcLocStrSize);</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;  <span class="comment">// The current basic block is split into four basic blocks. After outlining,</span></div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;  <span class="comment">// they will be mapped as follows:</span></div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;  <span class="comment">// ```</span></div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;  <span class="comment">// def current_fn() {</span></div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;  <span class="comment">//   current_basic_block:</span></div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;  <span class="comment">//     br label %task.exit</span></div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;  <span class="comment">//   task.exit:</span></div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;  <span class="comment">//     ; instructions after task</span></div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;  <span class="comment">// }</span></div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;  <span class="comment">// def outlined_fn() {</span></div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;  <span class="comment">//   task.alloca:</span></div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;  <span class="comment">//     br label %task.body</span></div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;  <span class="comment">//   task.body:</span></div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;  <span class="comment">//     ret void</span></div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;  <span class="comment">// }</span></div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;  <span class="comment">// ```</span></div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *TaskExitBB = <a class="code" href="namespacellvm.html#a85ee70791795fa2ddb07694182f783b2">splitBB</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, <span class="comment">/*CreateBranch=*/</span><span class="keyword">true</span>, <span class="stringliteral">&quot;task.exit&quot;</span>);</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *TaskBodyBB = <a class="code" href="namespacellvm.html#a85ee70791795fa2ddb07694182f783b2">splitBB</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, <span class="comment">/*CreateBranch=*/</span><span class="keyword">true</span>, <span class="stringliteral">&quot;task.body&quot;</span>);</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *TaskAllocaBB =</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;      <a class="code" href="namespacellvm.html#a85ee70791795fa2ddb07694182f783b2">splitBB</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, <span class="comment">/*CreateBranch=*/</span><span class="keyword">true</span>, <span class="stringliteral">&quot;task.alloca&quot;</span>);</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160; </div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;  <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1OutlineInfo.html">OutlineInfo</a> OI;</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;  OI.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1OutlineInfo.html#adc0b48022847ca44b3868d058cb98686">EntryBB</a> = TaskAllocaBB;</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;  OI.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1OutlineInfo.html#aed0779b309d9a705e9b78adacc839875">OuterAllocaBB</a> = AllocaIP.getBlock();</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;  OI.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1OutlineInfo.html#adb6b79680b86167fd4ec4f32346e9e58">ExitBB</a> = TaskExitBB;</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;  OI.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1OutlineInfo.html#a0b8f73f7987421a24a842d3e2633278d">PostOutlineCB</a> = [<span class="keyword">this</span>, Ident, Tied, Final, IfCondition,</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;                      Dependencies](<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;OutlinedFn) {</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    <span class="comment">// The input IR here looks like the following-</span></div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;    <span class="comment">// ```</span></div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;    <span class="comment">// func @current_fn() {</span></div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;    <span class="comment">//   outlined_fn(%args)</span></div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    <span class="comment">// }</span></div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    <span class="comment">// func @outlined_fn(%args) { ... }</span></div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;    <span class="comment">// ```</span></div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    <span class="comment">// This is changed to the following-</span></div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    <span class="comment">// ```</span></div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;    <span class="comment">// func @current_fn() {</span></div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    <span class="comment">//   runtime_call(..., wrapper_fn, ...)</span></div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    <span class="comment">// }</span></div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    <span class="comment">// func @wrapper_fn(..., %args) {</span></div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;    <span class="comment">//   outlined_fn(%args)</span></div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;    <span class="comment">// }</span></div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;    <span class="comment">// func @outlined_fn(%args) { ... }</span></div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    <span class="comment">// ```</span></div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160; </div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;    <span class="comment">// The stale call instruction will be replaced with a new call instruction</span></div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;    <span class="comment">// for runtime call with a wrapper function.</span></div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(OutlinedFn.getNumUses() == 1 &amp;&amp;</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;           <span class="stringliteral">&quot;there must be a single user for the outlined function&quot;</span>);</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;    <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *StaleCI = cast&lt;CallInst&gt;(OutlinedFn.user_back());</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160; </div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;    <span class="comment">// HasTaskData is true if any variables are captured in the outlined region,</span></div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;    <span class="comment">// false otherwise.</span></div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    <span class="keywordtype">bool</span> HasTaskData = StaleCI-&gt;<a class="code" href="classllvm_1_1CallBase.html#adde2ea00dd2613ee41bfe91908e4e68e">arg_size</a>() &gt; 0;</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(StaleCI);</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160; </div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;    <span class="comment">// Gather the arguments for emitting the runtime call for</span></div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;    <span class="comment">// @__kmpc_omp_task_alloc</span></div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *TaskAllocFn =</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;        getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_omp_task_alloc);</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160; </div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    <span class="comment">// Arguments - `loc_ref` (Ident) and `gtid` (ThreadID)</span></div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    <span class="comment">// call.</span></div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *ThreadID = getOrCreateThreadID(Ident);</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160; </div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    <span class="comment">// Argument - `flags`</span></div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;    <span class="comment">// Task is tied iff (Flags &amp; 1) == 1.</span></div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;    <span class="comment">// Task is untied iff (Flags &amp; 1) == 0.</span></div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;    <span class="comment">// Task is final iff (Flags &amp; 2) == 2.</span></div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;    <span class="comment">// Task is not final iff (Flags &amp; 2) == 0.</span></div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    <span class="comment">// TODO: Handle the other flags.</span></div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1omp.html#a16d7c5f77008a84ae20bf4a5c41e51f0a4ea7801f17a4e5485e8b050c052fb443">Flags</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt32(Tied);</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;    <span class="keywordflow">if</span> (Final) {</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *FinalFlag =</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;          <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(Final, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt32(2), <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt32(0));</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;      <a class="code" href="namespacellvm_1_1omp.html#a16d7c5f77008a84ae20bf4a5c41e51f0a4ea7801f17a4e5485e8b050c052fb443">Flags</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateOr(FinalFlag, <a class="code" href="namespacellvm_1_1omp.html#a16d7c5f77008a84ae20bf4a5c41e51f0a4ea7801f17a4e5485e8b050c052fb443">Flags</a>);</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    }</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160; </div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;    <span class="comment">// Argument - `sizeof_kmp_task_t` (TaskSize)</span></div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    <span class="comment">// Tasksize refers to the size in bytes of kmp_task_t data structure</span></div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;    <span class="comment">// including private vars accessed in task.</span></div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *TaskSize = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt64(0);</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    <span class="keywordflow">if</span> (HasTaskData) {</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;      <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *ArgStructAlloca =</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;          dyn_cast&lt;AllocaInst&gt;(StaleCI-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(0));</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ArgStructAlloca &amp;&amp;</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;             <span class="stringliteral">&quot;Unable to find the alloca instruction corresponding to arguments &quot;</span></div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;             <span class="stringliteral">&quot;for extracted function&quot;</span>);</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;      <a class="code" href="classllvm_1_1StructType.html">StructType</a> *ArgStructType =</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;          dyn_cast&lt;StructType&gt;(ArgStructAlloca-&gt;<a class="code" href="classllvm_1_1AllocaInst.html#a074617b3e2f9f98ee3a2ac208e8e7210">getAllocatedType</a>());</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ArgStructType &amp;&amp; <span class="stringliteral">&quot;Unable to find struct type corresponding to &quot;</span></div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;                              <span class="stringliteral">&quot;arguments for extracted function&quot;</span>);</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;      TaskSize =</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;          <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt64(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getDataLayout().getTypeStoreSize(ArgStructType));</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    }</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160; </div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    <span class="comment">// TODO: Argument - sizeof_shareds</span></div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160; </div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    <span class="comment">// Argument - task_entry (the wrapper function)</span></div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    <span class="comment">// If the outlined function has some captured variables (i.e. HasTaskData is</span></div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;    <span class="comment">// true), then the wrapper function will have an additional argument (the</span></div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;    <span class="comment">// struct containing captured variables). Otherwise, no such argument will</span></div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;    <span class="comment">// be present.</span></div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Type *&gt;</a> WrapperArgTys{<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt32Ty()};</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    <span class="keywordflow">if</span> (HasTaskData)</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;      WrapperArgTys.push_back(OutlinedFn.getArg(0)-&gt;getType());</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> WrapperFuncVal = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getOrInsertFunction(</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;        (<a class="code" href="classllvm_1_1Twine.html">Twine</a>(OutlinedFn.getName()) + <span class="stringliteral">&quot;.wrapper&quot;</span>).str(),</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;        <a class="code" href="classllvm_1_1FunctionType.html#a7e89b55242c964ae61b7850e99cacef0">FunctionType::get</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt32Ty(), WrapperArgTys, <span class="keyword">false</span>));</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *WrapperFunc = dyn_cast&lt;Function&gt;(WrapperFuncVal.<a class="code" href="classllvm_1_1FunctionCallee.html#a0055cd5464b935f571b36979a86bd7fc">getCallee</a>());</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    <a class="code" href="classllvm_1_1PointerType.html">PointerType</a> *WrapperFuncBitcastType =</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;        <a class="code" href="classllvm_1_1FunctionType.html#a7e89b55242c964ae61b7850e99cacef0">FunctionType::get</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt32Ty(),</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;                          {Builder.getInt32Ty(), Builder.getInt8PtrTy()}, <span class="keyword">false</span>)</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;            -&gt;<a class="code" href="classllvm_1_1Type.html#adc01a7457de85fc52a3bb860d7e1c6a4">getPointerTo</a>();</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *WrapperFuncBitcast =</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;        <a class="code" href="classllvm_1_1ConstantExpr.html#ae79d05dd3d0b05e080e08f8c5c33f880">ConstantExpr::getBitCast</a>(WrapperFunc, WrapperFuncBitcastType);</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160; </div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    <span class="comment">// Emit the @__kmpc_omp_task_alloc runtime call</span></div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;    <span class="comment">// The runtime call returns a pointer to an area where the task captured</span></div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;    <span class="comment">// variables must be copied before the task is run (NewTaskData)</span></div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *NewTaskData = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;        TaskAllocFn,</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;        {<span class="comment">/*loc_ref=*/</span>Ident, <span class="comment">/*gtid=*/</span>ThreadID, <span class="comment">/*flags=*/</span><a class="code" href="namespacellvm_1_1omp.html#a16d7c5f77008a84ae20bf4a5c41e51f0a4ea7801f17a4e5485e8b050c052fb443">Flags</a>,</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;         <span class="comment">/*sizeof_task=*/</span>TaskSize, <span class="comment">/*sizeof_shared=*/</span><a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt64(0),</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;         <span class="comment">/*task_func=*/</span>WrapperFuncBitcast});</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160; </div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;    <span class="comment">// Copy the arguments for outlined function</span></div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;    <span class="keywordflow">if</span> (HasTaskData) {</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *TaskData = StaleCI-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(0);</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;      <a class="code" href="structllvm_1_1Align.html">Align</a> Alignment = TaskData-&gt;<a class="code" href="classllvm_1_1Value.html#a47f5c74e1b14ba4a61db057400644acc">getPointerAlignment</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getDataLayout());</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateMemCpy(NewTaskData, Alignment, TaskData, Alignment,</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;                           TaskSize);</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;    }</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160; </div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *DepArrayPtr = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;    <span class="keywordflow">if</span> (Dependencies.size()) {</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;      <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> OldIP = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP();</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;          &amp;OldIP.getBlock()-&gt;getParent()-&gt;getEntryBlock().back());</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160; </div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *DepArrayTy = <a class="code" href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">ArrayType::get</a>(DependInfo, Dependencies.size());</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *DepArray =</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;          <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(DepArrayTy, <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;.dep.arr.addr&quot;</span>);</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160; </div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = 0;</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1DependData.html">DependData</a> &amp;Dep : Dependencies) {</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> =</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;            <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateConstInBoundsGEP2_64(DepArrayTy, DepArray, 0, <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>);</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;        <span class="comment">// Store the pointer to the variable</span></div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStructGEP(</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;            DependInfo, <a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>,</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;            <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="namespacellvm_1_1omp.html#a16d7c5f77008a84ae20bf4a5c41e51f0a4a795cf4295903cb3e7dee5f6496e9b2">RTLDependInfoFields::BaseAddr</a>));</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *DepValPtr =</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;            <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreatePtrToInt(Dep.DepVal, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt64Ty());</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(DepValPtr, <a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>);</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;        <span class="comment">// Store the size of the variable</span></div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Size = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStructGEP(</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;            DependInfo, <a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>,</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;            <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="namespacellvm_1_1omp.html#a16d7c5f77008a84ae20bf4a5c41e51f0ae88b4464fe326a51e6e6dfae28dd536d">RTLDependInfoFields::Len</a>));</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt64(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getDataLayout().getTypeStoreSize(</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;                                Dep.DepValueType)),</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;                            Size);</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;        <span class="comment">// Store the dependency kind</span></div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1omp.html#a16d7c5f77008a84ae20bf4a5c41e51f0a4ea7801f17a4e5485e8b050c052fb443">Flags</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStructGEP(</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;            DependInfo, <a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>,</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;            <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="namespacellvm_1_1omp.html#a16d7c5f77008a84ae20bf4a5c41e51f0a4ea7801f17a4e5485e8b050c052fb443">RTLDependInfoFields::Flags</a>));</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;            <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt8Ty(),</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;                             <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span><span class="keyword">&gt;</span>(Dep.DepKind)),</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;            <a class="code" href="namespacellvm_1_1omp.html#a16d7c5f77008a84ae20bf4a5c41e51f0a4ea7801f17a4e5485e8b050c052fb443">Flags</a>);</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;        ++<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>;</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;      }</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160; </div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;      DepArrayPtr = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(DepArray, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt8PtrTy());</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(OldIP);</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;    }</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160; </div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    <span class="comment">// In the presence of the `if` clause, the following IR is generated:</span></div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;    <span class="comment">//    ...</span></div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;    <span class="comment">//    %data = call @__kmpc_omp_task_alloc(...)</span></div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;    <span class="comment">//    br i1 %if_condition, label %then, label %else</span></div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;    <span class="comment">//  then:</span></div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;    <span class="comment">//    call @__kmpc_omp_task(...)</span></div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;    <span class="comment">//    br label %exit</span></div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;    <span class="comment">//  else:</span></div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;    <span class="comment">//    call @__kmpc_omp_task_begin_if0(...)</span></div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;    <span class="comment">//    call @wrapper_fn(...)</span></div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    <span class="comment">//    call @__kmpc_omp_task_complete_if0(...)</span></div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;    <span class="comment">//    br label %exit</span></div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;    <span class="comment">//  exit:</span></div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    <span class="comment">//    ...</span></div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    <span class="keywordflow">if</span> (IfCondition) {</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;      <span class="comment">// `SplitBlockAndInsertIfThenElse` requires the block to have a</span></div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;      <span class="comment">// terminator.</span></div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewBasicBlock =</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;          <a class="code" href="namespacellvm.html#a85ee70791795fa2ddb07694182f783b2">splitBB</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, <span class="comment">/*CreateBranch=*/</span><span class="keyword">true</span>, <span class="stringliteral">&quot;if.end&quot;</span>);</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *IfTerminator =</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;          NewBasicBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a59fb91d1691350f7d1b8e8a114e3f2a4">getSinglePredecessor</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>();</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *ThenTI = IfTerminator, *ElseTI = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(IfTerminator);</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;      <a class="code" href="namespacellvm.html#a47d9d4544f29bfafd32f0d62db009915">SplitBlockAndInsertIfThenElse</a>(IfCondition, IfTerminator, &amp;ThenTI,</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;                                    &amp;ElseTI);</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(ElseTI);</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;      <a class="code" href="classllvm_1_1Function.html">Function</a> *TaskBeginFn =</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;          getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_omp_task_begin_if0);</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;      <a class="code" href="classllvm_1_1Function.html">Function</a> *TaskCompleteFn =</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;          getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_omp_task_complete_if0);</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(TaskBeginFn, {Ident, ThreadID, NewTaskData});</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;      <span class="keywordflow">if</span> (HasTaskData)</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(WrapperFunc, {ThreadID, NewTaskData});</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(WrapperFunc, {ThreadID});</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(TaskCompleteFn, {Ident, ThreadID, NewTaskData});</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(ThenTI);</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;    }</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160; </div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;    <span class="keywordflow">if</span> (Dependencies.size()) {</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;      <a class="code" href="classllvm_1_1Function.html">Function</a> *TaskFn =</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;          getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_omp_task_with_deps);</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;          TaskFn,</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;          {Ident, ThreadID, NewTaskData, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt32(Dependencies.size()),</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;           DepArrayPtr, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt32Ty(), 0),</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;           <a class="code" href="classllvm_1_1ConstantPointerNull.html#a96f5c85e4022e369266541b2db3fda69">ConstantPointerNull::get</a>(<a class="code" href="classllvm_1_1Type.html#a7fe9ccd4893f4e2caa826126c09545ea">Type::getInt8PtrTy</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext()))});</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160; </div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;      <span class="comment">// Emit the @__kmpc_omp_task runtime call to spawn the task</span></div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;      <a class="code" href="classllvm_1_1Function.html">Function</a> *TaskFn = getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_omp_task);</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(TaskFn, {Ident, ThreadID, NewTaskData});</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;    }</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160; </div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;    StaleCI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160; </div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    <span class="comment">// Emit the body for wrapper function</span></div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *WrapperEntryBB =</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;        <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(), <span class="stringliteral">&quot;&quot;</span>, WrapperFunc);</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(WrapperEntryBB);</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;    <span class="keywordflow">if</span> (HasTaskData)</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(&amp;OutlinedFn, {WrapperFunc-&gt;<a class="code" href="classllvm_1_1Function.html#a8052a4f265aa7540f68ca3103a55538d">getArg</a>(1)});</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(&amp;OutlinedFn);</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateRet(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt32(0));</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;  };</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160; </div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;  addOutlineInfo(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(OI));</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160; </div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;  <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> TaskAllocaIP =</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;      <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a>(TaskAllocaBB, TaskAllocaBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>());</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;  <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> TaskBodyIP = <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a>(TaskBodyBB, TaskBodyBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>());</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;  BodyGenCB(TaskAllocaIP, TaskBodyIP);</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(TaskExitBB, TaskExitBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>());</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160; </div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP();</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;}</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160; </div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a></div>
<div class="line"><a name="l01551"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#ac9bf6c06f60a6c8551e90614342fc6ab"> 1551</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#ac9bf6c06f60a6c8551e90614342fc6ab">OpenMPIRBuilder::createTaskgroup</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc,</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;                                 <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> AllocaIP,</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;                                 <a class="code" href="classllvm_1_1function__ref.html">BodyGenCallbackTy</a> BodyGenCB) {</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a>();</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160; </div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;  <a class="code" href="classuint32__t.html">uint32_t</a> SrcLocStrSize;</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc, SrcLocStrSize);</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Ident = getOrCreateIdent(SrcLocStr, SrcLocStrSize);</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ThreadID = getOrCreateThreadID(Ident);</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160; </div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;  <span class="comment">// Emit the @__kmpc_taskgroup runtime call to start the taskgroup</span></div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *TaskgroupFn =</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;      getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_taskgroup);</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(TaskgroupFn, {Ident, ThreadID});</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160; </div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *TaskgroupExitBB = <a class="code" href="namespacellvm.html#a85ee70791795fa2ddb07694182f783b2">splitBB</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, <span class="keyword">true</span>, <span class="stringliteral">&quot;taskgroup.exit&quot;</span>);</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;  BodyGenCB(AllocaIP, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP());</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160; </div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(TaskgroupExitBB);</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;  <span class="comment">// Emit the @__kmpc_end_taskgroup runtime call to end the taskgroup</span></div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *EndTaskgroupFn =</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;      getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_end_taskgroup);</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(EndTaskgroupFn, {Ident, ThreadID});</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160; </div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP();</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;}</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160; </div>
<div class="line"><a name="l01579"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a5ffd15d898e32d3abd76f5d961781dd2"> 1579</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a5ffd15d898e32d3abd76f5d961781dd2">OpenMPIRBuilder::createSections</a>(</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc, <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> AllocaIP,</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;StorableBodyGenCallbackTy&gt;</a> SectionCBs, <a class="code" href="classllvm_1_1function__ref.html">PrivatizeCallbackTy</a> PrivCB,</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;    <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a03b6c43472b3040013de9cbc25376925">FinalizeCallbackTy</a> FiniCB, <span class="keywordtype">bool</span> IsCancellable, <span class="keywordtype">bool</span> IsNowait) {</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="OMPIRBuilder_8cpp.html#a756b28f370cd5a39bc0ee3e5333b9c9b">isConflictIP</a>(AllocaIP, Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>) &amp;&amp; <span class="stringliteral">&quot;Dedicated IP allocas required&quot;</span>);</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160; </div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;    <span class="keywordflow">return</span> Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>;</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160; </div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;  <span class="keyword">auto</span> FiniCBWrapper = [&amp;](<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> IP) {</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;    <span class="keywordflow">if</span> (IP.getBlock()-&gt;end() != IP.getPoint())</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;      <span class="keywordflow">return</span> FiniCB(IP);</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;    <span class="comment">// This must be done otherwise any nested constructs using FinalizeOMPRegion</span></div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;    <span class="comment">// will fail because that function requires the Finalization Basic Block to</span></div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;    <span class="comment">// have a terminator, which is already removed by EmitOMPRegionBody.</span></div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;    <span class="comment">// IP is currently at cancelation block.</span></div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;    <span class="comment">// We need to backtrack to the condition block to fetch</span></div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;    <span class="comment">// the exit block and create a branch from cancelation</span></div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;    <span class="comment">// to exit block.</span></div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::InsertPointGuard</a> IPG(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(IP);</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    <span class="keyword">auto</span> *CaseBB = IP.getBlock()-&gt;getSinglePredecessor();</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;    <span class="keyword">auto</span> *CondBB = CaseBB-&gt;getSinglePredecessor()-&gt;getSinglePredecessor();</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;    <span class="keyword">auto</span> *ExitBB = CondBB-&gt;getTerminator()-&gt;getSuccessor(1);</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBr(ExitBB);</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;    IP = <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent(), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getIterator());</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;    <span class="keywordflow">return</span> FiniCB(IP);</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;  };</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160; </div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;  FinalizationStack.push_back({FiniCBWrapper, OMPD_sections, IsCancellable});</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160; </div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;  <span class="comment">// Each section is emitted as a switch case</span></div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;  <span class="comment">// Each finalization callback is handled from clang.EmitOMPSectionDirective()</span></div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;  <span class="comment">// -&gt; OMP.createSection() which generates the IR for each section</span></div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;  <span class="comment">// Iterate through all sections and emit a switch construct:</span></div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;  <span class="comment">// switch (IV) {</span></div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;  <span class="comment">//   case 0:</span></div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;  <span class="comment">//     &lt;SectionStmt[0]&gt;;</span></div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;  <span class="comment">//     break;</span></div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;  <span class="comment">// ...</span></div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;  <span class="comment">//   case &lt;NumSection&gt; - 1:</span></div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;  <span class="comment">//     &lt;SectionStmt[&lt;NumSection&gt; - 1]&gt;;</span></div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;  <span class="comment">//     break;</span></div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;  <span class="comment">// }</span></div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;  <span class="comment">// ...</span></div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;  <span class="comment">// section_loop.after:</span></div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;  <span class="comment">// &lt;FiniCB&gt;;</span></div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;  <span class="keyword">auto</span> LoopBodyGenCB = [&amp;](<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> CodeGenIP, <a class="code" href="classllvm_1_1Value.html">Value</a> *IndVar) {</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(CodeGenIP);</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Continue =</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;        <a class="code" href="namespacellvm.html#a03f30f48490558525cd5458201d13afe">splitBBWithSuffix</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, <span class="comment">/*CreateBranch=*/</span><span class="keyword">false</span>, <span class="stringliteral">&quot;.sections.after&quot;</span>);</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *CurFn = Continue-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>();</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;    <a class="code" href="classllvm_1_1SwitchInst.html">SwitchInst</a> *SwitchStmt = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSwitch(IndVar, Continue);</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160; </div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    <span class="keywordtype">unsigned</span> CaseNumber = 0;</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> SectionCB : SectionCBs) {</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *CaseBB = <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;          <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(), <span class="stringliteral">&quot;omp_section_loop.body.case&quot;</span>, CurFn, Continue);</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;      SwitchStmt-&gt;<a class="code" href="classllvm_1_1SwitchInst.html#a62abc2475d09c01d583ba24a487898fd">addCase</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt32(CaseNumber), CaseBB);</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(CaseBB);</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;      <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *CaseEndBr = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBr(Continue);</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;      SectionCB(<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a>(),</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;                {CaseEndBr-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>(), CaseEndBr-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>()});</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;      CaseNumber++;</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;    }</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;    <span class="comment">// remove the existing terminator from body BB since there can be no</span></div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;    <span class="comment">// terminators after switch/case</span></div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;  };</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;  <span class="comment">// Loop body ends here</span></div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;  <span class="comment">// LowerBound, UpperBound, and STride for createCanonicalLoop</span></div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *I32Ty = <a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext());</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *LB = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(I32Ty, 0);</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *UB = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(I32Ty, SectionCBs.<a class="code" href="classllvm_1_1ArrayRef.html#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>());</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a> = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(I32Ty, 1);</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;  <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">llvm::CanonicalLoopInfo</a> *<a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> = createCanonicalLoop(</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;      Loc, LoopBodyGenCB, LB, UB, <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>, <span class="keyword">true</span>, <span class="keyword">false</span>, AllocaIP, <span class="stringliteral">&quot;section_loop&quot;</span>);</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;  <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> AfterIP =</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;      applyStaticWorkshareLoop(Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#ac6a58d4f9cf1978ee50af30bdb248d73">DL</a>, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a>, AllocaIP, !IsNowait);</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160; </div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;  <span class="comment">// Apply the finalization callback in LoopAfterBB</span></div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;  <span class="keyword">auto</span> FiniInfo = FinalizationStack.pop_back_val();</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(FiniInfo.DK == OMPD_sections &amp;&amp;</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;         <span class="stringliteral">&quot;Unexpected finalization stack state!&quot;</span>);</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a03b6c43472b3040013de9cbc25376925">FinalizeCallbackTy</a> &amp;CB = FiniInfo.FiniCB) {</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(AfterIP);</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *FiniBB =</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;        <a class="code" href="namespacellvm.html#a03f30f48490558525cd5458201d13afe">splitBBWithSuffix</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, <span class="comment">/*CreateBranch=*/</span><span class="keyword">true</span>, <span class="stringliteral">&quot;sections.fini&quot;</span>);</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    CB(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP());</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;    AfterIP = {FiniBB, FiniBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>()};</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;  }</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160; </div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;  <span class="keywordflow">return</span> AfterIP;</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;}</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160; </div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a></div>
<div class="line"><a name="l01674"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a88cb26bb78b23c1f0aa1988725d46e1c"> 1674</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a88cb26bb78b23c1f0aa1988725d46e1c">OpenMPIRBuilder::createSection</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc,</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;                               <a class="code" href="classllvm_1_1function__ref.html">BodyGenCallbackTy</a> BodyGenCB,</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;                               <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a03b6c43472b3040013de9cbc25376925">FinalizeCallbackTy</a> FiniCB) {</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;    <span class="keywordflow">return</span> Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>;</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160; </div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;  <span class="keyword">auto</span> FiniCBWrapper = [&amp;](<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> IP) {</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;    <span class="keywordflow">if</span> (IP.getBlock()-&gt;end() != IP.getPoint())</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;      <span class="keywordflow">return</span> FiniCB(IP);</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;    <span class="comment">// This must be done otherwise any nested constructs using FinalizeOMPRegion</span></div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;    <span class="comment">// will fail because that function requires the Finalization Basic Block to</span></div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    <span class="comment">// have a terminator, which is already removed by EmitOMPRegionBody.</span></div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;    <span class="comment">// IP is currently at cancelation block.</span></div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;    <span class="comment">// We need to backtrack to the condition block to fetch</span></div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    <span class="comment">// the exit block and create a branch from cancelation</span></div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;    <span class="comment">// to exit block.</span></div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::InsertPointGuard</a> IPG(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(IP);</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;    <span class="keyword">auto</span> *CaseBB = Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>.getBlock();</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;    <span class="keyword">auto</span> *CondBB = CaseBB-&gt;getSinglePredecessor()-&gt;getSinglePredecessor();</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;    <span class="keyword">auto</span> *ExitBB = CondBB-&gt;getTerminator()-&gt;getSuccessor(1);</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBr(ExitBB);</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;    IP = <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent(), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getIterator());</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;    <span class="keywordflow">return</span> FiniCB(IP);</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;  };</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160; </div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;  <a class="code" href="classllvm_1_1Directive.html">Directive</a> OMPD = Directive::OMPD_sections;</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;  <span class="comment">// Since we are using Finalization Callback here, HasFinalize</span></div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;  <span class="comment">// and IsCancellable have to be true</span></div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;  <span class="keywordflow">return</span> EmitOMPInlinedRegion(OMPD, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, BodyGenCB, FiniCBWrapper,</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;                              <span class="comment">/*Conditional*/</span> <span class="keyword">false</span>, <span class="comment">/*hasFinalize*/</span> <span class="keyword">true</span>,</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;                              <span class="comment">/*IsCancellable*/</span> <span class="keyword">true</span>);</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;}</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;<span class="comment">/// Create a function with a unique name and a &quot;void (i8*, i8*)&quot; signature in</span></div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;<span class="comment">/// the given module and return it.</span></div>
<div class="line"><a name="l01710"></a><span class="lineno"><a class="line" href="OMPIRBuilder_8cpp.html#a837459d66323524eae967be0266c92d9"> 1710</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="OMPIRBuilder_8cpp.html#a837459d66323524eae967be0266c92d9">getFreshReductionFunc</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M) {</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *VoidTy = <a class="code" href="classllvm_1_1Type.html#a6e20e76960d952de088354cbcd14c3ab">Type::getVoidTy</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext());</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Int8PtrTy = <a class="code" href="classllvm_1_1Type.html#a7fe9ccd4893f4e2caa826126c09545ea">Type::getInt8PtrTy</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext());</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;  <span class="keyword">auto</span> *FuncTy =</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;      <a class="code" href="classllvm_1_1FunctionType.html#a7e89b55242c964ae61b7850e99cacef0">FunctionType::get</a>(VoidTy, {Int8PtrTy, Int8PtrTy}, <span class="comment">/* IsVarArg */</span> <span class="keyword">false</span>);</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1Function.html#a6adbed68009f582caa84cdfd2adf36f1">Function::Create</a>(FuncTy, <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">GlobalVariable::InternalLinkage</a>,</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;                          <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getDataLayout().getDefaultGlobalsAddressSpace(),</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;                          <span class="stringliteral">&quot;.omp.reduction.func&quot;</span>, &amp;<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>);</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;}</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160; </div>
<div class="line"><a name="l01720"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a0cc5aa97fdd08acaf18a279679c0f0c4"> 1720</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a0cc5aa97fdd08acaf18a279679c0f0c4">OpenMPIRBuilder::createReductions</a>(</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc, <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> AllocaIP,</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;ReductionInfo&gt;</a> ReductionInfos, <span class="keywordtype">bool</span> IsNoWait) {</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1ReductionInfo.html">ReductionInfo</a> &amp;RI : ReductionInfos) {</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;    (void)RI;</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(RI.Variable &amp;&amp; <span class="stringliteral">&quot;expected non-null variable&quot;</span>);</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(RI.PrivateVariable &amp;&amp; <span class="stringliteral">&quot;expected non-null private variable&quot;</span>);</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(RI.ReductionGen &amp;&amp; <span class="stringliteral">&quot;expected non-null reduction generator callback&quot;</span>);</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(RI.Variable-&gt;getType() == RI.PrivateVariable-&gt;getType() &amp;&amp;</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;           <span class="stringliteral">&quot;expected variables and their private equivalents to have the same &quot;</span></div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;           <span class="stringliteral">&quot;type&quot;</span>);</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(RI.Variable-&gt;getType()-&gt;isPointerTy() &amp;&amp;</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;           <span class="stringliteral">&quot;expected variables to be pointers&quot;</span>);</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;  }</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160; </div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a>();</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160; </div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *InsertBlock = Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>.getBlock();</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ContinuationBlock =</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;      InsertBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a52c990590792c91dd20b6d45acebe359">splitBasicBlock</a>(Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>.getPoint(), <span class="stringliteral">&quot;reduce.finalize&quot;</span>);</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;  InsertBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160; </div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;  <span class="comment">// Create and populate array of type-erased pointers to private reduction</span></div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;  <span class="comment">// values.</span></div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;  <span class="keywordtype">unsigned</span> NumReductions = ReductionInfos.size();</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *RedArrayTy = <a class="code" href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">ArrayType::get</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt8PtrTy(), NumReductions);</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(AllocaIP);</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *RedArray = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(RedArrayTy, <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;red.array&quot;</span>);</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160; </div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(InsertBlock, InsertBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>());</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160; </div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> En : <a class="code" href="namespacellvm.html#a7b2175e18ff52174fad26b6b68818564">enumerate</a>(ReductionInfos)) {</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a> = En.index();</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1ReductionInfo.html">ReductionInfo</a> &amp;RI = En.value();</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *RedArrayElemPtr = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateConstInBoundsGEP2_64(</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;        RedArrayTy, RedArray, 0, <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>, <span class="stringliteral">&quot;red.array.elem.&quot;</span> + <a class="code" href="classllvm_1_1Twine.html">Twine</a>(<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>));</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Casted =</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(RI.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1ReductionInfo.html#a63498704b583a96137c70ed7172f1ec3">PrivateVariable</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt8PtrTy(),</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;                              <span class="stringliteral">&quot;private.red.var.&quot;</span> + <a class="code" href="classllvm_1_1Twine.html">Twine</a>(<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>) + <span class="stringliteral">&quot;.casted&quot;</span>);</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(Casted, RedArrayElemPtr);</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;  }</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160; </div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;  <span class="comment">// Emit a call to the runtime function that orchestrates the reduction.</span></div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;  <span class="comment">// Declare the reduction function in the process.</span></div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *Func = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.GetInsertBlock()-&gt;getParent();</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;  <a class="code" href="classllvm_1_1Module.html">Module</a> *<a class="code" href="classllvm_1_1Module.html">Module</a> = Func-&gt;getParent();</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *RedArrayPtr =</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(RedArray, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt8PtrTy(), <span class="stringliteral">&quot;red.array.ptr&quot;</span>);</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;  <a class="code" href="classuint32__t.html">uint32_t</a> SrcLocStrSize;</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc, SrcLocStrSize);</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;  <span class="keywordtype">bool</span> CanGenerateAtomic =</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;      <a class="code" href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">llvm::all_of</a>(ReductionInfos, [](<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1ReductionInfo.html">ReductionInfo</a> &amp;RI) {</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;        <span class="keywordflow">return</span> RI.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1ReductionInfo.html#a4a8f38b55a8be56a9cc93b5ef051e9e7">AtomicReductionGen</a>;</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;      });</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Ident = getOrCreateIdent(SrcLocStr, SrcLocStrSize,</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;                                  CanGenerateAtomic</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;                                      ? IdentFlag::OMP_IDENT_FLAG_ATOMIC_REDUCE</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;                                      : <a class="code" href="namespacellvm_1_1omp.html#a0e821d8251c97d66ca185efe2f8ffde2">IdentFlag</a>(0));</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ThreadId = getOrCreateThreadID(Ident);</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NumVariables = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt32(NumReductions);</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="classllvm_1_1Module.html">Module</a>-&gt;<a class="code" href="classllvm_1_1Module.html#a6d883605206368bc536cc9ded97209b8">getDataLayout</a>();</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;  <span class="keywordtype">unsigned</span> RedArrayByteSize = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeStoreSize(RedArrayTy);</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *RedArraySize = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt64(RedArrayByteSize);</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *ReductionFunc = <a class="code" href="OMPIRBuilder_8cpp.html#a837459d66323524eae967be0266c92d9">getFreshReductionFunc</a>(*<a class="code" href="classllvm_1_1Module.html">Module</a>);</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Lock = getOMPCriticalRegionLock(<span class="stringliteral">&quot;.reduction&quot;</span>);</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *ReduceFunc = getOrCreateRuntimeFunctionPtr(</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;      IsNoWait ? RuntimeFunction::OMPRTL___kmpc_reduce_nowait</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;               : RuntimeFunction::OMPRTL___kmpc_reduce);</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;  <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *ReduceCall =</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(ReduceFunc,</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;                         {Ident, ThreadId, NumVariables, RedArraySize,</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;                          RedArrayPtr, ReductionFunc, Lock},</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;                         <span class="stringliteral">&quot;reduce&quot;</span>);</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160; </div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;  <span class="comment">// Create final reduction entry blocks for the atomic and non-atomic case.</span></div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;  <span class="comment">// Emit IR that dispatches control flow to one of the blocks based on the</span></div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;  <span class="comment">// reduction supporting the atomic mode.</span></div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NonAtomicRedBlock =</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(<a class="code" href="classllvm_1_1Module.html">Module</a>-&gt;<a class="code" href="classllvm_1_1Module.html#a9c00c70121af456007404bd456047766">getContext</a>(), <span class="stringliteral">&quot;reduce.switch.nonatomic&quot;</span>, Func);</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *AtomicRedBlock =</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(<a class="code" href="classllvm_1_1Module.html">Module</a>-&gt;<a class="code" href="classllvm_1_1Module.html#a9c00c70121af456007404bd456047766">getContext</a>(), <span class="stringliteral">&quot;reduce.switch.atomic&quot;</span>, Func);</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;  <a class="code" href="classllvm_1_1SwitchInst.html">SwitchInst</a> *Switch =</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSwitch(ReduceCall, ContinuationBlock, <span class="comment">/* NumCases */</span> 2);</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;  Switch-&gt;addCase(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt32(1), NonAtomicRedBlock);</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;  Switch-&gt;addCase(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt32(2), AtomicRedBlock);</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160; </div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;  <span class="comment">// Populate the non-atomic reduction using the elementwise reduction function.</span></div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;  <span class="comment">// This loads the elements from the global and private variables and reduces</span></div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;  <span class="comment">// them before storing back the result to the global variable.</span></div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(NonAtomicRedBlock);</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> En : <a class="code" href="namespacellvm.html#a7b2175e18ff52174fad26b6b68818564">enumerate</a>(ReductionInfos)) {</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1ReductionInfo.html">ReductionInfo</a> &amp;RI = En.value();</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *<a class="code" href="classllvm_1_1PointerUnion.html">ValueType</a> = RI.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1ReductionInfo.html#a808df20c6281c68ce8be2a89aaba392a">ElementType</a>;</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *RedValue = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(<a class="code" href="classllvm_1_1PointerUnion.html">ValueType</a>, RI.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1ReductionInfo.html#a5a2adb59d172175dafdc9466d436e198">Variable</a>,</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;                                         <span class="stringliteral">&quot;red.value.&quot;</span> + <a class="code" href="classllvm_1_1Twine.html">Twine</a>(En.index()));</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *PrivateRedValue =</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(<a class="code" href="classllvm_1_1PointerUnion.html">ValueType</a>, RI.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1ReductionInfo.html#a63498704b583a96137c70ed7172f1ec3">PrivateVariable</a>,</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;                           <span class="stringliteral">&quot;red.private.value.&quot;</span> + <a class="code" href="classllvm_1_1Twine.html">Twine</a>(En.index()));</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Reduced;</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;        RI.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1ReductionInfo.html#a681945072e94e9e2382b52d56d4b6edf">ReductionGen</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP(), RedValue, PrivateRedValue, Reduced));</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.GetInsertBlock())</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a>();</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(Reduced, RI.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1ReductionInfo.html#a5a2adb59d172175dafdc9466d436e198">Variable</a>);</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;  }</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *EndReduceFunc = getOrCreateRuntimeFunctionPtr(</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;      IsNoWait ? RuntimeFunction::OMPRTL___kmpc_end_reduce_nowait</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;               : RuntimeFunction::OMPRTL___kmpc_end_reduce);</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(EndReduceFunc, {Ident, ThreadId, Lock});</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBr(ContinuationBlock);</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160; </div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;  <span class="comment">// Populate the atomic reduction using the atomic elementwise reduction</span></div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;  <span class="comment">// function. There are no loads/stores here because they will be happening</span></div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;  <span class="comment">// inside the atomic elementwise reduction.</span></div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(AtomicRedBlock);</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;  <span class="keywordflow">if</span> (CanGenerateAtomic) {</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1ReductionInfo.html">ReductionInfo</a> &amp;RI : ReductionInfos) {</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(RI.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1ReductionInfo.html#a4a8f38b55a8be56a9cc93b5ef051e9e7">AtomicReductionGen</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP(), RI.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1ReductionInfo.html#a808df20c6281c68ce8be2a89aaba392a">ElementType</a>,</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;                                              RI.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1ReductionInfo.html#a5a2adb59d172175dafdc9466d436e198">Variable</a>, RI.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1ReductionInfo.html#a63498704b583a96137c70ed7172f1ec3">PrivateVariable</a>));</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.GetInsertBlock())</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a>();</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;    }</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBr(ContinuationBlock);</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateUnreachable();</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;  }</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160; </div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;  <span class="comment">// Populate the outlined reduction function using the elementwise reduction</span></div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;  <span class="comment">// function. Partial values are extracted from the type-erased array of</span></div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;  <span class="comment">// pointers to private variables.</span></div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ReductionFuncBlock =</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(<a class="code" href="classllvm_1_1Module.html">Module</a>-&gt;<a class="code" href="classllvm_1_1Module.html#a9c00c70121af456007404bd456047766">getContext</a>(), <span class="stringliteral">&quot;&quot;</span>, ReductionFunc);</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(ReductionFuncBlock);</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *LHSArrayPtr = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(ReductionFunc-&gt;<a class="code" href="classllvm_1_1Function.html#a8052a4f265aa7540f68ca3103a55538d">getArg</a>(0),</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;                                             RedArrayTy-&gt;<a class="code" href="classllvm_1_1Type.html#adc01a7457de85fc52a3bb860d7e1c6a4">getPointerTo</a>());</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *RHSArrayPtr = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(ReductionFunc-&gt;<a class="code" href="classllvm_1_1Function.html#a8052a4f265aa7540f68ca3103a55538d">getArg</a>(1),</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;                                             RedArrayTy-&gt;<a class="code" href="classllvm_1_1Type.html#adc01a7457de85fc52a3bb860d7e1c6a4">getPointerTo</a>());</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> En : <a class="code" href="namespacellvm.html#a7b2175e18ff52174fad26b6b68818564">enumerate</a>(ReductionInfos)) {</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1ReductionInfo.html">ReductionInfo</a> &amp;RI = En.value();</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *LHSI8PtrPtr = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateConstInBoundsGEP2_64(</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;        RedArrayTy, LHSArrayPtr, 0, En.index());</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *LHSI8Ptr = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt8PtrTy(), LHSI8PtrPtr);</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *LHSPtr = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(LHSI8Ptr, RI.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1ReductionInfo.html#a5a2adb59d172175dafdc9466d436e198">Variable</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(RI.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1ReductionInfo.html#a808df20c6281c68ce8be2a89aaba392a">ElementType</a>, LHSPtr);</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *RHSI8PtrPtr = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateConstInBoundsGEP2_64(</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;        RedArrayTy, RHSArrayPtr, 0, En.index());</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *RHSI8Ptr = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt8PtrTy(), RHSI8PtrPtr);</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *RHSPtr =</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(RHSI8Ptr, RI.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1ReductionInfo.html#a63498704b583a96137c70ed7172f1ec3">PrivateVariable</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(RI.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1ReductionInfo.html#a808df20c6281c68ce8be2a89aaba392a">ElementType</a>, RHSPtr);</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Reduced;</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(RI.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1ReductionInfo.html#a681945072e94e9e2382b52d56d4b6edf">ReductionGen</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP(), <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, Reduced));</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.GetInsertBlock())</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a>();</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(Reduced, LHSPtr);</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;  }</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateRetVoid();</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160; </div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(ContinuationBlock);</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP();</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;}</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160; </div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a></div>
<div class="line"><a name="l01884"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a9776896fee5db5da9e39fd96819e360a"> 1884</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a9776896fee5db5da9e39fd96819e360a">OpenMPIRBuilder::createMaster</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc,</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;                              <a class="code" href="classllvm_1_1function__ref.html">BodyGenCallbackTy</a> BodyGenCB,</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;                              <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a03b6c43472b3040013de9cbc25376925">FinalizeCallbackTy</a> FiniCB) {</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160; </div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;    <span class="keywordflow">return</span> Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>;</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160; </div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;  <a class="code" href="classllvm_1_1Directive.html">Directive</a> OMPD = Directive::OMPD_master;</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;  <a class="code" href="classuint32__t.html">uint32_t</a> SrcLocStrSize;</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc, SrcLocStrSize);</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Ident = getOrCreateIdent(SrcLocStr, SrcLocStrSize);</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ThreadId = getOrCreateThreadID(Ident);</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[] = {Ident, ThreadId};</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160; </div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *EntryRTLFn = getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_master);</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *EntryCall = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(EntryRTLFn, <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160; </div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *ExitRTLFn = getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_end_master);</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *ExitCall = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(ExitRTLFn, <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160; </div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;  <span class="keywordflow">return</span> EmitOMPInlinedRegion(OMPD, EntryCall, ExitCall, BodyGenCB, FiniCB,</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;                              <span class="comment">/*Conditional*/</span> <span class="keyword">true</span>, <span class="comment">/*hasFinalize*/</span> <span class="keyword">true</span>);</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;}</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160; </div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a></div>
<div class="line"><a name="l01909"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#ac50024248a5e85a1192de8410d5448ca"> 1909</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#ac50024248a5e85a1192de8410d5448ca">OpenMPIRBuilder::createMasked</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc,</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;                              <a class="code" href="classllvm_1_1function__ref.html">BodyGenCallbackTy</a> BodyGenCB,</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;                              <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a03b6c43472b3040013de9cbc25376925">FinalizeCallbackTy</a> FiniCB, <a class="code" href="classllvm_1_1Value.html">Value</a> *Filter) {</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;    <span class="keywordflow">return</span> Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>;</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160; </div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;  <a class="code" href="classllvm_1_1Directive.html">Directive</a> OMPD = Directive::OMPD_masked;</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;  <a class="code" href="classuint32__t.html">uint32_t</a> SrcLocStrSize;</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc, SrcLocStrSize);</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Ident = getOrCreateIdent(SrcLocStr, SrcLocStrSize);</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ThreadId = getOrCreateThreadID(Ident);</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[] = {Ident, ThreadId, <a class="code" href="namespacellvm.html#aaee5189b9c4db9ad666a88abaf1ee0c4ad7778d0c64b6ba21494c97f77a66885a">Filter</a>};</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ArgsEnd[] = {Ident, ThreadId};</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160; </div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *EntryRTLFn = getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_masked);</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *EntryCall = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(EntryRTLFn, <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160; </div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *ExitRTLFn = getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_end_masked);</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *ExitCall = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(ExitRTLFn, ArgsEnd);</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160; </div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;  <span class="keywordflow">return</span> EmitOMPInlinedRegion(OMPD, EntryCall, ExitCall, BodyGenCB, FiniCB,</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;                              <span class="comment">/*Conditional*/</span> <span class="keyword">true</span>, <span class="comment">/*hasFinalize*/</span> <span class="keyword">true</span>);</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;}</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160; </div>
<div class="line"><a name="l01933"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a445fa52d77040bccb16bfea111234a2e"> 1933</a></span>&#160;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a445fa52d77040bccb16bfea111234a2e">OpenMPIRBuilder::createLoopSkeleton</a>(</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;    <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *TripCount, <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PreInsertBefore,</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PostInsertBefore, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;Name) {</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;  <a class="code" href="classllvm_1_1Module.html">Module</a> *<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getParent();</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;Ctx = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getContext();</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *IndVarTy = TripCount-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160; </div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;  <span class="comment">// Create the basic block structure.</span></div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Preheader =</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(Ctx, <span class="stringliteral">&quot;omp_&quot;</span> + Name + <span class="stringliteral">&quot;.preheader&quot;</span>, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, PreInsertBefore);</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Header =</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(Ctx, <span class="stringliteral">&quot;omp_&quot;</span> + Name + <span class="stringliteral">&quot;.header&quot;</span>, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, PreInsertBefore);</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> =</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(Ctx, <span class="stringliteral">&quot;omp_&quot;</span> + Name + <span class="stringliteral">&quot;.cond&quot;</span>, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, PreInsertBefore);</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Body =</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(Ctx, <span class="stringliteral">&quot;omp_&quot;</span> + Name + <span class="stringliteral">&quot;.body&quot;</span>, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, PreInsertBefore);</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Latch =</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(Ctx, <span class="stringliteral">&quot;omp_&quot;</span> + Name + <span class="stringliteral">&quot;.inc&quot;</span>, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, PostInsertBefore);</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Exit =</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(Ctx, <span class="stringliteral">&quot;omp_&quot;</span> + Name + <span class="stringliteral">&quot;.exit&quot;</span>, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, PostInsertBefore);</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *After =</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(Ctx, <span class="stringliteral">&quot;omp_&quot;</span> + Name + <span class="stringliteral">&quot;.after&quot;</span>, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, PostInsertBefore);</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160; </div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;  <span class="comment">// Use specified DebugLoc for new instructions.</span></div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetCurrentDebugLocation(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160; </div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(Preheader);</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBr(Header);</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160; </div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(Header);</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *IndVarPHI = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreatePHI(IndVarTy, 2, <span class="stringliteral">&quot;omp_&quot;</span> + Name + <span class="stringliteral">&quot;.iv&quot;</span>);</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;  IndVarPHI-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(<a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(IndVarTy, 0), Preheader);</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBr(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>);</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160; </div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>);</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Cmp =</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmpULT(IndVarPHI, TripCount, <span class="stringliteral">&quot;omp_&quot;</span> + Name + <span class="stringliteral">&quot;.cmp&quot;</span>);</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCondBr(Cmp, Body, Exit);</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160; </div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(Body);</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBr(Latch);</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160; </div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(Latch);</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Next = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(IndVarPHI, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(IndVarTy, 1),</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;                                  <span class="stringliteral">&quot;omp_&quot;</span> + Name + <span class="stringliteral">&quot;.next&quot;</span>, <span class="comment">/*HasNUW=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBr(Header);</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;  IndVarPHI-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(Next, Latch);</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160; </div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(Exit);</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBr(After);</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160; </div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;  <span class="comment">// Remember and return the canonical control flow.</span></div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;  LoopInfos.emplace_front();</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;  <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *CL = &amp;LoopInfos.front();</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160; </div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;  CL-&gt;Header = Header;</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;  CL-&gt;Cond = <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>;</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;  CL-&gt;Latch = Latch;</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;  CL-&gt;Exit = Exit;</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160; </div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;  CL-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a32ff799dcb39887a8d21322020f305ba">assertOK</a>();</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;  <span class="keywordflow">return</span> CL;</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;}</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160; </div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *</div>
<div class="line"><a name="l02000"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a1f8ea3a2101b10ccd74e9840406abcf7"> 2000</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a1f8ea3a2101b10ccd74e9840406abcf7">OpenMPIRBuilder::createCanonicalLoop</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc,</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;                                     <a class="code" href="classllvm_1_1function__ref.html">LoopBodyGenCallbackTy</a> BodyGenCB,</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;                                     <a class="code" href="classllvm_1_1Value.html">Value</a> *TripCount, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;Name) {</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>.getBlock();</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NextBB = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getNextNode();</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160; </div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;  <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *CL = createLoopSkeleton(Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#ac6a58d4f9cf1978ee50af30bdb248d73">DL</a>, TripCount, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getParent(),</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;                                             NextBB, NextBB, Name);</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *After = CL-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#aba24a232ebb4ade12a5ed4d0d54d69ad">getAfter</a>();</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160; </div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;  <span class="comment">// If location is not set, don&#39;t connect the loop.</span></div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;  <span class="keywordflow">if</span> (updateToLocation(Loc)) {</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;    <span class="comment">// Split the loop at the insertion point: Branch to the preheader and move</span></div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;    <span class="comment">// every following instruction to after the loop (the After BB). Also, the</span></div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;    <span class="comment">// new successor is the loop&#39;s after block.</span></div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;    <a class="code" href="namespacellvm.html#a78e14f66d8a8405c6882b5ff6a3b7617">spliceBB</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, After, <span class="comment">/*CreateBranch=*/</span><span class="keyword">false</span>);</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBr(CL-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#ad50eb30e70ff2a9ea7f220547e2b6f6d">getPreheader</a>());</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;  }</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160; </div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;  <span class="comment">// Emit the body content. We do it after connecting the loop to the CFG to</span></div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;  <span class="comment">// avoid that the callback encounters degenerate BBs.</span></div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;  BodyGenCB(CL-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a8031442528bff99473596a0de4aa0422">getBodyIP</a>(), CL-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a230d812cc988ec3a48bf5206d3d72b88">getIndVar</a>());</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160; </div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;  CL-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a32ff799dcb39887a8d21322020f305ba">assertOK</a>();</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;  <span class="keywordflow">return</span> CL;</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;}</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160; </div>
<div class="line"><a name="l02029"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#ab923f1ecfb37a2c297245bdae392eda0"> 2029</a></span>&#160;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a1f8ea3a2101b10ccd74e9840406abcf7">OpenMPIRBuilder::createCanonicalLoop</a>(</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc, <a class="code" href="classllvm_1_1function__ref.html">LoopBodyGenCallbackTy</a> BodyGenCB,</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Start, <a class="code" href="classllvm_1_1Value.html">Value</a> *Stop, <a class="code" href="classllvm_1_1Value.html">Value</a> *Step, <span class="keywordtype">bool</span> IsSigned, <span class="keywordtype">bool</span> InclusiveStop,</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;    <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> ComputeIP, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;Name) {</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160; </div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;  <span class="comment">// Consider the following difficulties (assuming 8-bit signed integers):</span></div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;  <span class="comment">//  * Adding \p Step to the loop counter which passes \p Stop may overflow:</span></div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;  <span class="comment">//      DO I = 1, 100, 50</span><span class="comment"></span></div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;<span class="comment">  ///  * A \p Step of INT_MIN cannot not be normalized to a positive direction:</span></div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;<span class="comment"></span>  <span class="comment">//      DO I = 100, 0, -128</span></div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160; </div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;  <span class="comment">// Start, Stop and Step must be of the same integer type.</span></div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;  <span class="keyword">auto</span> *IndVarTy = cast&lt;IntegerType&gt;(Start-&gt;getType());</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IndVarTy == Stop-&gt;getType() &amp;&amp; <span class="stringliteral">&quot;Stop type mismatch&quot;</span>);</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IndVarTy == Step-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() &amp;&amp; <span class="stringliteral">&quot;Step type mismatch&quot;</span>);</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160; </div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;  <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> ComputeLoc =</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;      ComputeIP.isSet() ? <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a>(ComputeIP, Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#ac6a58d4f9cf1978ee50af30bdb248d73">DL</a>) : Loc;</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;  updateToLocation(ComputeLoc);</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160; </div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *Zero = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(IndVarTy, 0);</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *One = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(IndVarTy, 1);</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160; </div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;  <span class="comment">// Like Step, but always positive.</span></div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Incr = Step;</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160; </div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;  <span class="comment">// Distance between Start and Stop; always positive.</span></div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Span;</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160; </div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;  <span class="comment">// Condition whether there are no iterations are executed at all, e.g. because</span></div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;  <span class="comment">// UB &lt; LB.</span></div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ZeroCmp;</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160; </div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;  <span class="keywordflow">if</span> (IsSigned) {</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;    <span class="comment">// Ensure that increment is positive. If not, negate and invert LB and UB.</span></div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *IsNeg = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmpSLT(Step, Zero);</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;    Incr = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(IsNeg, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNeg(Step), Step);</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *LB = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(IsNeg, Stop, Start);</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *UB = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(IsNeg, Start, Stop);</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;    Span = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSub(UB, LB, <span class="stringliteral">&quot;&quot;</span>, <span class="keyword">false</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;    ZeroCmp = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;        InclusiveStop ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">CmpInst::ICMP_SLT</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba2751d6136a2819749dcef65dc19a4246">CmpInst::ICMP_SLE</a>, UB, LB);</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;    Span = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSub(Stop, Start, <span class="stringliteral">&quot;&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;    ZeroCmp = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;        InclusiveStop ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">CmpInst::ICMP_ULT</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">CmpInst::ICMP_ULE</a>, Stop, Start);</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;  }</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160; </div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CountIfLooping;</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;  <span class="keywordflow">if</span> (InclusiveStop) {</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;    CountIfLooping = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateUDiv(Span, Incr), One);</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;    <span class="comment">// Avoid incrementing past stop since it could overflow.</span></div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *CountIfTwo = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateUDiv(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSub(Span, One), Incr), One);</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *OneCmp = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;        InclusiveStop ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">CmpInst::ICMP_ULT</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">CmpInst::ICMP_ULE</a>, Span, Incr);</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;    CountIfLooping = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(OneCmp, One, CountIfTwo);</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;  }</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *TripCount = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(ZeroCmp, Zero, CountIfLooping,</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;                                          <span class="stringliteral">&quot;omp_&quot;</span> + Name + <span class="stringliteral">&quot;.tripcount&quot;</span>);</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160; </div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;  <span class="keyword">auto</span> BodyGen = [=](<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> CodeGenIP, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a>) {</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(CodeGenIP);</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Span = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateMul(<a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a>, Step);</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *IndVar = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(Span, Start);</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;    BodyGenCB(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP(), IndVar);</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;  };</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;  <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> LoopLoc = ComputeIP.isSet() ? Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a> : <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP();</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;  <span class="keywordflow">return</span> createCanonicalLoop(LoopLoc, BodyGen, TripCount, Name);</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;}</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160; </div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;<span class="comment">// Returns an LLVM function to call for initializing loop bounds using OpenMP</span></div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;<span class="comment">// static scheduling depending on `type`. Only i32 and i64 are supported by the</span></div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;<span class="comment">// runtime. Always interpret integers as unsigned similarly to</span></div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;<span class="comment">// CanonicalLoopInfo.</span></div>
<div class="line"><a name="l02105"></a><span class="lineno"><a class="line" href="OMPIRBuilder_8cpp.html#ac04904b32ea7f45e108b8752b1a940e7"> 2105</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> <a class="code" href="OMPIRBuilder_8cpp.html#ac04904b32ea7f45e108b8752b1a940e7">getKmpcForStaticInitForType</a>(<a class="code" href="classllvm_1_1Type.html">Type</a> *Ty, <a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M,</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;                                                  <a class="code" href="classllvm_1_1OpenMPIRBuilder.html">OpenMPIRBuilder</a> &amp;OMPBuilder) {</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;  <span class="keywordtype">unsigned</span> Bitwidth = Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a13e877ef779ba7a0688081079f4f9b03">getIntegerBitWidth</a>();</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;  <span class="keywordflow">if</span> (Bitwidth == 32)</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;    <span class="keywordflow">return</span> OMPBuilder.<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a034dc6253a2a36f78ac071a7c12d5c27">getOrCreateRuntimeFunction</a>(</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;        <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, omp::RuntimeFunction::OMPRTL___kmpc_for_static_init_4u);</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;  <span class="keywordflow">if</span> (Bitwidth == 64)</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;    <span class="keywordflow">return</span> OMPBuilder.<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a034dc6253a2a36f78ac071a7c12d5c27">getOrCreateRuntimeFunction</a>(</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;        <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, omp::RuntimeFunction::OMPRTL___kmpc_for_static_init_8u);</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;  <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;unknown OpenMP loop iterator bitwidth&quot;</span>);</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;}</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160; </div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a></div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;OpenMPIRBuilder::applyStaticWorkshareLoop(<a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *CLI,</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;                                          InsertPointTy AllocaIP,</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;                                          <span class="keywordtype">bool</span> NeedsBarrier) {</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a4b2b7074e300c251f7cb8913620b1d80">isValid</a>() &amp;&amp; <span class="stringliteral">&quot;Requires a valid canonical loop&quot;</span>);</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="OMPIRBuilder_8cpp.html#a756b28f370cd5a39bc0ee3e5333b9c9b">isConflictIP</a>(AllocaIP, CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#ac72ebc430ef7dcf1791c66080ddedd9d">getPreheaderIP</a>()) &amp;&amp;</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;         <span class="stringliteral">&quot;Require dedicated allocate IP&quot;</span>);</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160; </div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;  <span class="comment">// Set up the source location value for OpenMP runtime.</span></div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#ac72ebc430ef7dcf1791c66080ddedd9d">getPreheaderIP</a>());</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetCurrentDebugLocation(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160; </div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;  <a class="code" href="classuint32__t.html">uint32_t</a> SrcLocStrSize;</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, SrcLocStrSize);</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *SrcLoc = getOrCreateIdent(SrcLocStr, SrcLocStrSize);</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160; </div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;  <span class="comment">// Declare useful OpenMP runtime functions.</span></div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a> = CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a230d812cc988ec3a48bf5206d3d72b88">getIndVar</a>();</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *IVTy = <a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a>-&gt;getType();</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;  <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> StaticInit = <a class="code" href="OMPIRBuilder_8cpp.html#ac04904b32ea7f45e108b8752b1a940e7">getKmpcForStaticInitForType</a>(IVTy, M, *<span class="keyword">this</span>);</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;  <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> StaticFini =</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;      getOrCreateRuntimeFunction(M, omp::OMPRTL___kmpc_for_static_fini);</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160; </div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;  <span class="comment">// Allocate space for computed loop bounds as expected by the &quot;init&quot; function.</span></div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(AllocaIP);</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *I32Type = <a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext());</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *PLastIter = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(I32Type, <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;p.lastiter&quot;</span>);</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *PLowerBound = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(IVTy, <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;p.lowerbound&quot;</span>);</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *PUpperBound = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(IVTy, <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;p.upperbound&quot;</span>);</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *PStride = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(IVTy, <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;p.stride&quot;</span>);</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160; </div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;  <span class="comment">// At the end of the preheader, prepare for calling the &quot;init&quot; function by</span></div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;  <span class="comment">// storing the current loop bounds into the allocated space. A canonical loop</span></div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;  <span class="comment">// always iterates from 0 to trip-count with step 1. Note that &quot;init&quot; expects</span></div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;  <span class="comment">// and produces an inclusive upper bound.</span></div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#ad50eb30e70ff2a9ea7f220547e2b6f6d">getPreheader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="namespacellvm_1_1logicalview.html#a9696bc411b0a7022c2cc78bff5173cefad7ed4ee1df437474d005188535f74875">Zero</a> = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(IVTy, 0);</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *One = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(IVTy, 1);</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(Zero, PLowerBound);</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *UpperBound = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSub(CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a2077e6f8b41cd609c8e54e80767eb280">getTripCount</a>(), One);</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(UpperBound, PUpperBound);</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(One, PStride);</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160; </div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ThreadNum = getOrCreateThreadID(SrcLoc);</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160; </div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SchedulingType = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;      I32Type, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a5ced2def0c3f656428eb2144b4aaf6fb">OMPScheduleType::UnorderedStatic</a>));</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160; </div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;  <span class="comment">// Call the &quot;init&quot; function and update the trip count of the loop with the</span></div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;  <span class="comment">// value it produced.</span></div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(StaticInit,</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;                     {SrcLoc, ThreadNum, SchedulingType, PLastIter, PLowerBound,</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;                      PUpperBound, PStride, One, <a class="code" href="namespacellvm_1_1logicalview.html#a9696bc411b0a7022c2cc78bff5173cefad7ed4ee1df437474d005188535f74875">Zero</a>});</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *LowerBound = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(IVTy, PLowerBound);</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *InclusiveUpperBound = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(IVTy, PUpperBound);</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *TripCountMinusOne = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSub(InclusiveUpperBound, LowerBound);</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *TripCount = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(TripCountMinusOne, One);</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;  CLI-&gt;setTripCount(TripCount);</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160; </div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;  <span class="comment">// Update all uses of the induction variable except the one in the condition</span></div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;  <span class="comment">// block that compares it with the actual upper bound, and the increment in</span></div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;  <span class="comment">// the latch block.</span></div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160; </div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;  CLI-&gt;mapIndVar([&amp;](<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *OldIV) -&gt; <a class="code" href="classllvm_1_1Value.html">Value</a> * {</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#afe4ae11bae0a25e5ddc9615ef6852aed">getBody</a>(),</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;                           CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#afe4ae11bae0a25e5ddc9615ef6852aed">getBody</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a161fd4e9fa5367f64c2a4c9e921c3ad3">getFirstInsertionPt</a>());</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetCurrentDebugLocation(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(OldIV, LowerBound);</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;  });</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160; </div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;  <span class="comment">// In the &quot;exit&quot; block, call the &quot;fini&quot; function.</span></div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a320de99bcedbb241fe54ed847482d27f">getExit</a>(),</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;                         CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a320de99bcedbb241fe54ed847482d27f">getExit</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>());</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(StaticFini, {SrcLoc, ThreadNum});</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160; </div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;  <span class="comment">// Add the barrier if requested.</span></div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;  <span class="keywordflow">if</span> (NeedsBarrier)</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;    createBarrier(LocationDescription(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP(), <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>),</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;                  omp::Directive::OMPD_for, <span class="comment">/* ForceSimpleCall */</span> <span class="keyword">false</span>,</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;                  <span class="comment">/* CheckCancelFlag */</span> <span class="keyword">false</span>);</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160; </div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;  InsertPointTy AfterIP = CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a578dd7d619d0ccfc6ace07aa380022cc">getAfterIP</a>();</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;  CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a9ce55b05f8ad85126fc92eeeb35457c7">invalidate</a>();</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160; </div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;  <span class="keywordflow">return</span> AfterIP;</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;}</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160; </div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a> OpenMPIRBuilder::applyStaticChunkedWorkshareLoop(</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;    <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *CLI, InsertPointTy AllocaIP,</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;    <span class="keywordtype">bool</span> NeedsBarrier, <a class="code" href="classllvm_1_1Value.html">Value</a> *ChunkSize) {</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a4b2b7074e300c251f7cb8913620b1d80">isValid</a>() &amp;&amp; <span class="stringliteral">&quot;Requires a valid canonical loop&quot;</span>);</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ChunkSize &amp;&amp; <span class="stringliteral">&quot;Chunk size is required&quot;</span>);</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160; </div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;Ctx = CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a0e975380231c805957723804ad3ba008">getFunction</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#a9fffac2512fe651f0d5e37e27f5bd51c">getContext</a>();</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a> = CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a230d812cc988ec3a48bf5206d3d72b88">getIndVar</a>();</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *OrigTripCount = CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a2077e6f8b41cd609c8e54e80767eb280">getTripCount</a>();</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *IVTy = <a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a>-&gt;getType();</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IVTy-&gt;<a class="code" href="classllvm_1_1Type.html#a13e877ef779ba7a0688081079f4f9b03">getIntegerBitWidth</a>() &lt;= 64 &amp;&amp;</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;         <span class="stringliteral">&quot;Max supported tripcount bitwidth is 64 bits&quot;</span>);</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *InternalIVTy = IVTy-&gt;<a class="code" href="classllvm_1_1Type.html#a13e877ef779ba7a0688081079f4f9b03">getIntegerBitWidth</a>() &lt;= 32 ? <a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(Ctx)</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;                                                        : <a class="code" href="classllvm_1_1Type.html">Type</a>::getInt64Ty(Ctx);</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *I32Type = <a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext());</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="namespacellvm_1_1logicalview.html#a9696bc411b0a7022c2cc78bff5173cefad7ed4ee1df437474d005188535f74875">Zero</a> = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(InternalIVTy, 0);</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *One = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(InternalIVTy, 1);</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160; </div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;  <span class="comment">// Declare useful OpenMP runtime functions.</span></div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;  <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> StaticInit =</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;      <a class="code" href="OMPIRBuilder_8cpp.html#ac04904b32ea7f45e108b8752b1a940e7">getKmpcForStaticInitForType</a>(InternalIVTy, M, *<span class="keyword">this</span>);</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;  <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> StaticFini =</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;      getOrCreateRuntimeFunction(M, omp::OMPRTL___kmpc_for_static_fini);</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160; </div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;  <span class="comment">// Allocate space for computed loop bounds as expected by the &quot;init&quot; function.</span></div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(AllocaIP);</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetCurrentDebugLocation(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *PLastIter = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(I32Type, <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;p.lastiter&quot;</span>);</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *PLowerBound =</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(InternalIVTy, <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;p.lowerbound&quot;</span>);</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *PUpperBound =</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(InternalIVTy, <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;p.upperbound&quot;</span>);</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *PStride = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(InternalIVTy, <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;p.stride&quot;</span>);</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160; </div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;  <span class="comment">// Set up the source location value for the OpenMP runtime.</span></div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#ac72ebc430ef7dcf1791c66080ddedd9d">getPreheaderIP</a>());</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetCurrentDebugLocation(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160; </div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;  <span class="comment">// TODO: Detect overflow in ubsan or max-out with current tripcount.</span></div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CastedChunkSize =</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateZExtOrTrunc(ChunkSize, InternalIVTy, <span class="stringliteral">&quot;chunksize&quot;</span>);</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CastedTripCount =</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateZExt(OrigTripCount, InternalIVTy, <span class="stringliteral">&quot;tripcount&quot;</span>);</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160; </div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SchedulingType = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;      I32Type, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7adfd02d2fed222f2c28301f5ac837f2b2">OMPScheduleType::UnorderedStaticChunked</a>));</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(Zero, PLowerBound);</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *OrigUpperBound = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSub(CastedTripCount, One);</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(OrigUpperBound, PUpperBound);</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(One, PStride);</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160; </div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;  <span class="comment">// Call the &quot;init&quot; function and update the trip count of the loop with the</span></div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;  <span class="comment">// value it produced.</span></div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;  <a class="code" href="classuint32__t.html">uint32_t</a> SrcLocStrSize;</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, SrcLocStrSize);</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *SrcLoc = getOrCreateIdent(SrcLocStr, SrcLocStrSize);</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ThreadNum = getOrCreateThreadID(SrcLoc);</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(StaticInit,</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;                     {<span class="comment">/*loc=*/</span>SrcLoc, <span class="comment">/*global_tid=*/</span>ThreadNum,</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;                      <span class="comment">/*schedtype=*/</span>SchedulingType, <span class="comment">/*plastiter=*/</span>PLastIter,</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;                      <span class="comment">/*plower=*/</span>PLowerBound, <span class="comment">/*pupper=*/</span>PUpperBound,</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;                      <span class="comment">/*pstride=*/</span>PStride, <span class="comment">/*incr=*/</span>One,</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;                      <span class="comment">/*chunk=*/</span>CastedChunkSize});</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160; </div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;  <span class="comment">// Load values written by the &quot;init&quot; function.</span></div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *FirstChunkStart =</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(InternalIVTy, PLowerBound, <span class="stringliteral">&quot;omp_firstchunk.lb&quot;</span>);</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *FirstChunkStop =</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(InternalIVTy, PUpperBound, <span class="stringliteral">&quot;omp_firstchunk.ub&quot;</span>);</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *FirstChunkEnd = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(FirstChunkStop, One);</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ChunkRange =</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSub(FirstChunkEnd, FirstChunkStart, <span class="stringliteral">&quot;omp_chunk.range&quot;</span>);</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NextChunkStride =</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(InternalIVTy, PStride, <span class="stringliteral">&quot;omp_dispatch.stride&quot;</span>);</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160; </div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;  <span class="comment">// Create outer &quot;dispatch&quot; loop for enumerating the chunks.</span></div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *DispatchEnter = <a class="code" href="namespacellvm.html#a85ee70791795fa2ddb07694182f783b2">splitBB</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *DispatchCounter;</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;  <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *DispatchCLI = createCanonicalLoop(</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;      {<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP(), <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>},</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;      [&amp;](InsertPointTy BodyIP, <a class="code" href="classllvm_1_1Value.html">Value</a> *Counter) { DispatchCounter = Counter; },</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;      FirstChunkStart, CastedTripCount, NextChunkStride,</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;      <span class="comment">/*IsSigned=*/</span><span class="keyword">false</span>, <span class="comment">/*InclusiveStop=*/</span><span class="keyword">false</span>, <span class="comment">/*ComputeIP=*/</span>{},</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;      <span class="stringliteral">&quot;dispatch&quot;</span>);</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160; </div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;  <span class="comment">// Remember the BasicBlocks of the dispatch loop we need, then invalidate to</span></div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;  <span class="comment">// not have to preserve the canonical invariant.</span></div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *DispatchBody = DispatchCLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#afe4ae11bae0a25e5ddc9615ef6852aed">getBody</a>();</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *DispatchLatch = DispatchCLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a8ffbd9b1e60e2bb15da132610ff997ac">getLatch</a>();</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *DispatchExit = DispatchCLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a320de99bcedbb241fe54ed847482d27f">getExit</a>();</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *DispatchAfter = DispatchCLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#aba24a232ebb4ade12a5ed4d0d54d69ad">getAfter</a>();</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;  DispatchCLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a9ce55b05f8ad85126fc92eeeb35457c7">invalidate</a>();</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160; </div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;  <span class="comment">// Rewire the original loop to become the chunk loop inside the dispatch loop.</span></div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;  <a class="code" href="OMPIRBuilder_8cpp.html#a3057c2b7e1e25de160497b1ef3985c2a">redirectTo</a>(DispatchAfter, CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#aba24a232ebb4ade12a5ed4d0d54d69ad">getAfter</a>(), <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;  <a class="code" href="OMPIRBuilder_8cpp.html#a3057c2b7e1e25de160497b1ef3985c2a">redirectTo</a>(CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a320de99bcedbb241fe54ed847482d27f">getExit</a>(), DispatchLatch, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;  <a class="code" href="OMPIRBuilder_8cpp.html#a3057c2b7e1e25de160497b1ef3985c2a">redirectTo</a>(DispatchBody, DispatchEnter, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160; </div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;  <span class="comment">// Prepare the prolog of the chunk loop.</span></div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#ac72ebc430ef7dcf1791c66080ddedd9d">getPreheaderIP</a>());</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetCurrentDebugLocation(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160; </div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;  <span class="comment">// Compute the number of iterations of the chunk loop.</span></div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#ad50eb30e70ff2a9ea7f220547e2b6f6d">getPreheader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ChunkEnd = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(DispatchCounter, ChunkRange);</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *IsLastChunk =</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmpUGE(ChunkEnd, CastedTripCount, <span class="stringliteral">&quot;omp_chunk.is_last&quot;</span>);</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CountUntilOrigTripCount =</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSub(CastedTripCount, DispatchCounter);</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ChunkTripCount = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;      IsLastChunk, CountUntilOrigTripCount, ChunkRange, <span class="stringliteral">&quot;omp_chunk.tripcount&quot;</span>);</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *BackcastedChunkTC =</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateTrunc(ChunkTripCount, IVTy, <span class="stringliteral">&quot;omp_chunk.tripcount.trunc&quot;</span>);</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;  CLI-&gt;setTripCount(BackcastedChunkTC);</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160; </div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;  <span class="comment">// Update all uses of the induction variable except the one in the condition</span></div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;  <span class="comment">// block that compares it with the actual upper bound, and the increment in</span></div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;  <span class="comment">// the latch block.</span></div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *BackcastedDispatchCounter =</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateTrunc(DispatchCounter, IVTy, <span class="stringliteral">&quot;omp_dispatch.iv.trunc&quot;</span>);</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;  CLI-&gt;mapIndVar([&amp;](<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *) -&gt; <a class="code" href="classllvm_1_1Value.html">Value</a> * {</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a8031442528bff99473596a0de4aa0422">getBodyIP</a>());</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(<a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a>, BackcastedDispatchCounter);</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;  });</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160; </div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;  <span class="comment">// In the &quot;exit&quot; block, call the &quot;fini&quot; function.</span></div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(DispatchExit, DispatchExit-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a161fd4e9fa5367f64c2a4c9e921c3ad3">getFirstInsertionPt</a>());</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(StaticFini, {SrcLoc, ThreadNum});</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160; </div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;  <span class="comment">// Add the barrier if requested.</span></div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;  <span class="keywordflow">if</span> (NeedsBarrier)</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;    createBarrier(LocationDescription(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP(), <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>), OMPD_for,</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;                  <span class="comment">/*ForceSimpleCall=*/</span><span class="keyword">false</span>, <span class="comment">/*CheckCancelFlag=*/</span><span class="keyword">false</span>);</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160; </div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;  <span class="comment">// Even though we currently do not support applying additional methods to it,</span></div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;  <span class="comment">// the chunk loop should remain a canonical loop.</span></div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;  CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a32ff799dcb39887a8d21322020f305ba">assertOK</a>();</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160; </div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;  <span class="keywordflow">return</span> {DispatchAfter, DispatchAfter-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a161fd4e9fa5367f64c2a4c9e921c3ad3">getFirstInsertionPt</a>()};</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;}</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160; </div>
<div class="line"><a name="l02347"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a7bde73131822e9cf0c2a0fc60dbdc645"> 2347</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a7bde73131822e9cf0c2a0fc60dbdc645">OpenMPIRBuilder::applyWorkshareLoop</a>(</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;    <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *CLI, <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> AllocaIP,</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;    <span class="keywordtype">bool</span> NeedsBarrier, llvm::omp::ScheduleKind SchedKind,</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;    <a class="code" href="classllvm_1_1Value.html">llvm::Value</a> *ChunkSize, <span class="keywordtype">bool</span> HasSimdModifier, <span class="keywordtype">bool</span> HasMonotonicModifier,</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;    <span class="keywordtype">bool</span> HasNonmonotonicModifier, <span class="keywordtype">bool</span> HasOrderedClause) {</div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;  <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7">OMPScheduleType</a> EffectiveScheduleType = <a class="code" href="OMPIRBuilder_8cpp.html#a554000c782275642b783964853720bee">computeOpenMPScheduleType</a>(</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;      SchedKind, ChunkSize, HasSimdModifier, HasMonotonicModifier,</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;      HasNonmonotonicModifier, HasOrderedClause);</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160; </div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;  <span class="keywordtype">bool</span> IsOrdered = (EffectiveScheduleType &amp; <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a00614ac33e4c92484ae08314d48cf8b8">OMPScheduleType::ModifierOrdered</a>) ==</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;                   <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a00614ac33e4c92484ae08314d48cf8b8">OMPScheduleType::ModifierOrdered</a>;</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;  <span class="keywordflow">switch</span> (EffectiveScheduleType &amp; ~<a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a4aabfa64277fa15805937e3812fa1161">OMPScheduleType::ModifierMask</a>) {</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7aecba1cdf984063a67c869dbb94d19dd3">OMPScheduleType::BaseStatic</a>:</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!ChunkSize &amp;&amp; <span class="stringliteral">&quot;No chunk size with static-chunked schedule&quot;</span>);</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;    <span class="keywordflow">if</span> (IsOrdered)</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;      <span class="keywordflow">return</span> applyDynamicWorkshareLoop(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, CLI, AllocaIP, EffectiveScheduleType,</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;                                       NeedsBarrier, ChunkSize);</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;    <span class="comment">// FIXME: Monotonicity ignored?</span></div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;    <span class="keywordflow">return</span> applyStaticWorkshareLoop(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, CLI, AllocaIP, NeedsBarrier);</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160; </div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7af54e7eea282c868aa67914573df2558f">OMPScheduleType::BaseStaticChunked</a>:</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;    <span class="keywordflow">if</span> (IsOrdered)</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;      <span class="keywordflow">return</span> applyDynamicWorkshareLoop(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, CLI, AllocaIP, EffectiveScheduleType,</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;                                       NeedsBarrier, ChunkSize);</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;    <span class="comment">// FIXME: Monotonicity ignored?</span></div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;    <span class="keywordflow">return</span> applyStaticChunkedWorkshareLoop(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, CLI, AllocaIP, NeedsBarrier,</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;                                           ChunkSize);</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160; </div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7afd0872ecd4e82f3caa0ea44584a05144">OMPScheduleType::BaseRuntime</a>:</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a377f624764cdf5386a71e8efa9a1033d">OMPScheduleType::BaseAuto</a>:</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7abb6d65fa62198a898f0b36eba922ede5">OMPScheduleType::BaseGreedy</a>:</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a3c09d00199d64e2f7eb08082a7b6b598">OMPScheduleType::BaseBalanced</a>:</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7ab9dd338a9e4b4d1c74191892dd28abe2">OMPScheduleType::BaseSteal</a>:</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7acecd17ad7e1609e795c3d82c6317325b">OMPScheduleType::BaseGuidedSimd</a>:</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7ab8e66c863338f428b072f163e43f65e8">OMPScheduleType::BaseRuntimeSimd</a>:</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!ChunkSize &amp;&amp;</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;           <span class="stringliteral">&quot;schedule type does not support user-defined chunk sizes&quot;</span>);</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;    <a class="code" href="Compiler_8h.html#a9579881de06b1560d242d15171ca1b86">LLVM_FALLTHROUGH</a>;</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a9e8280caae3ba6110d4f0061ad3dce1c">OMPScheduleType::BaseDynamicChunked</a>:</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7aa9e644958c4830585ae78527092ea4fd">OMPScheduleType::BaseGuidedChunked</a>:</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a6097a8774ee56bd544db5668747dbef3">OMPScheduleType::BaseGuidedIterativeChunked</a>:</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a8df314abcb15d43d59d8a3ea7c54cb10">OMPScheduleType::BaseGuidedAnalyticalChunked</a>:</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a3f4e265045794ed0323bcb579c3269f2">OMPScheduleType::BaseStaticBalancedChunked</a>:</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;    <span class="keywordflow">return</span> applyDynamicWorkshareLoop(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, CLI, AllocaIP, EffectiveScheduleType,</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;                                     NeedsBarrier, ChunkSize);</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160; </div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unknown/unimplemented schedule kind&quot;</span>);</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;  }</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;}</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;<span class="comment">/// Returns an LLVM function to call for initializing loop bounds using OpenMP</span></div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;<span class="comment">/// dynamic scheduling depending on `type`. Only i32 and i64 are supported by</span></div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;<span class="comment">/// the runtime. Always interpret integers as unsigned similarly to</span></div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;<span class="comment">/// CanonicalLoopInfo.</span></div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a></div>
<div class="line"><a name="l02403"></a><span class="lineno"><a class="line" href="OMPIRBuilder_8cpp.html#a7a68322ba864bccb8736e42fbc915a8a"> 2403</a></span>&#160;<a class="code" href="OMPIRBuilder_8cpp.html#a7a68322ba864bccb8736e42fbc915a8a">getKmpcForDynamicInitForType</a>(<a class="code" href="classllvm_1_1Type.html">Type</a> *Ty, <a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <a class="code" href="classllvm_1_1OpenMPIRBuilder.html">OpenMPIRBuilder</a> &amp;OMPBuilder) {</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;  <span class="keywordtype">unsigned</span> Bitwidth = Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a13e877ef779ba7a0688081079f4f9b03">getIntegerBitWidth</a>();</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;  <span class="keywordflow">if</span> (Bitwidth == 32)</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;    <span class="keywordflow">return</span> OMPBuilder.<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a034dc6253a2a36f78ac071a7c12d5c27">getOrCreateRuntimeFunction</a>(</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;        <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, omp::RuntimeFunction::OMPRTL___kmpc_dispatch_init_4u);</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;  <span class="keywordflow">if</span> (Bitwidth == 64)</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;    <span class="keywordflow">return</span> OMPBuilder.<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a034dc6253a2a36f78ac071a7c12d5c27">getOrCreateRuntimeFunction</a>(</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;        <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, omp::RuntimeFunction::OMPRTL___kmpc_dispatch_init_8u);</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;  <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;unknown OpenMP loop iterator bitwidth&quot;</span>);</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;}</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;<span class="comment">/// Returns an LLVM function to call for updating the next loop using OpenMP</span></div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;<span class="comment">/// dynamic scheduling depending on `type`. Only i32 and i64 are supported by</span></div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;<span class="comment">/// the runtime. Always interpret integers as unsigned similarly to</span></div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;<span class="comment">/// CanonicalLoopInfo.</span></div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a></div>
<div class="line"><a name="l02419"></a><span class="lineno"><a class="line" href="OMPIRBuilder_8cpp.html#a74bf2240e1da04168d57a7534c9613f7"> 2419</a></span>&#160;<a class="code" href="OMPIRBuilder_8cpp.html#a74bf2240e1da04168d57a7534c9613f7">getKmpcForDynamicNextForType</a>(<a class="code" href="classllvm_1_1Type.html">Type</a> *Ty, <a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <a class="code" href="classllvm_1_1OpenMPIRBuilder.html">OpenMPIRBuilder</a> &amp;OMPBuilder) {</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;  <span class="keywordtype">unsigned</span> Bitwidth = Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a13e877ef779ba7a0688081079f4f9b03">getIntegerBitWidth</a>();</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;  <span class="keywordflow">if</span> (Bitwidth == 32)</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;    <span class="keywordflow">return</span> OMPBuilder.<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a034dc6253a2a36f78ac071a7c12d5c27">getOrCreateRuntimeFunction</a>(</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;        <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, omp::RuntimeFunction::OMPRTL___kmpc_dispatch_next_4u);</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;  <span class="keywordflow">if</span> (Bitwidth == 64)</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;    <span class="keywordflow">return</span> OMPBuilder.<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a034dc6253a2a36f78ac071a7c12d5c27">getOrCreateRuntimeFunction</a>(</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;        <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, omp::RuntimeFunction::OMPRTL___kmpc_dispatch_next_8u);</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;  <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;unknown OpenMP loop iterator bitwidth&quot;</span>);</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;}</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;<span class="comment">/// Returns an LLVM function to call for finalizing the dynamic loop using</span></div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;<span class="comment">/// depending on `type`. Only i32 and i64 are supported by the runtime. Always</span></div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;<span class="comment">/// interpret integers as unsigned similarly to CanonicalLoopInfo.</span></div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a></div>
<div class="line"><a name="l02434"></a><span class="lineno"><a class="line" href="OMPIRBuilder_8cpp.html#a3d17252beff7921e40622170990c89ab"> 2434</a></span>&#160;<a class="code" href="OMPIRBuilder_8cpp.html#a3d17252beff7921e40622170990c89ab">getKmpcForDynamicFiniForType</a>(<a class="code" href="classllvm_1_1Type.html">Type</a> *Ty, <a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <a class="code" href="classllvm_1_1OpenMPIRBuilder.html">OpenMPIRBuilder</a> &amp;OMPBuilder) {</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;  <span class="keywordtype">unsigned</span> Bitwidth = Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a13e877ef779ba7a0688081079f4f9b03">getIntegerBitWidth</a>();</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;  <span class="keywordflow">if</span> (Bitwidth == 32)</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;    <span class="keywordflow">return</span> OMPBuilder.<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a034dc6253a2a36f78ac071a7c12d5c27">getOrCreateRuntimeFunction</a>(</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;        <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, omp::RuntimeFunction::OMPRTL___kmpc_dispatch_fini_4u);</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;  <span class="keywordflow">if</span> (Bitwidth == 64)</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;    <span class="keywordflow">return</span> OMPBuilder.<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a034dc6253a2a36f78ac071a7c12d5c27">getOrCreateRuntimeFunction</a>(</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;        <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, omp::RuntimeFunction::OMPRTL___kmpc_dispatch_fini_8u);</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;  <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;unknown OpenMP loop iterator bitwidth&quot;</span>);</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;}</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160; </div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a> OpenMPIRBuilder::applyDynamicWorkshareLoop(</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;    <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *CLI, InsertPointTy AllocaIP,</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;    <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7">OMPScheduleType</a> SchedType, <span class="keywordtype">bool</span> NeedsBarrier, <a class="code" href="classllvm_1_1Value.html">Value</a> *Chunk) {</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a4b2b7074e300c251f7cb8913620b1d80">isValid</a>() &amp;&amp; <span class="stringliteral">&quot;Requires a valid canonical loop&quot;</span>);</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="OMPIRBuilder_8cpp.html#a756b28f370cd5a39bc0ee3e5333b9c9b">isConflictIP</a>(AllocaIP, CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#ac72ebc430ef7dcf1791c66080ddedd9d">getPreheaderIP</a>()) &amp;&amp;</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;         <span class="stringliteral">&quot;Require dedicated allocate IP&quot;</span>);</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="OMPIRBuilder_8cpp.html#a596dcc3bb2ae8b7561e94095584e0f1e">isValidWorkshareLoopScheduleType</a>(SchedType) &amp;&amp;</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;         <span class="stringliteral">&quot;Require valid schedule type&quot;</span>);</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160; </div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;  <span class="keywordtype">bool</span> Ordered = (SchedType &amp; <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a00614ac33e4c92484ae08314d48cf8b8">OMPScheduleType::ModifierOrdered</a>) ==</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;                 <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a00614ac33e4c92484ae08314d48cf8b8">OMPScheduleType::ModifierOrdered</a>;</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160; </div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;  <span class="comment">// Set up the source location value for OpenMP runtime.</span></div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetCurrentDebugLocation(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160; </div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;  <a class="code" href="classuint32__t.html">uint32_t</a> SrcLocStrSize;</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, SrcLocStrSize);</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *SrcLoc = getOrCreateIdent(SrcLocStr, SrcLocStrSize);</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160; </div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;  <span class="comment">// Declare useful OpenMP runtime functions.</span></div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a> = CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a230d812cc988ec3a48bf5206d3d72b88">getIndVar</a>();</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *IVTy = <a class="code" href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a>-&gt;getType();</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;  <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> DynamicInit = <a class="code" href="OMPIRBuilder_8cpp.html#a7a68322ba864bccb8736e42fbc915a8a">getKmpcForDynamicInitForType</a>(IVTy, M, *<span class="keyword">this</span>);</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;  <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> DynamicNext = <a class="code" href="OMPIRBuilder_8cpp.html#a74bf2240e1da04168d57a7534c9613f7">getKmpcForDynamicNextForType</a>(IVTy, M, *<span class="keyword">this</span>);</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160; </div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;  <span class="comment">// Allocate space for computed loop bounds as expected by the &quot;init&quot; function.</span></div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(AllocaIP);</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *I32Type = <a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext());</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *PLastIter = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(I32Type, <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;p.lastiter&quot;</span>);</div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *PLowerBound = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(IVTy, <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;p.lowerbound&quot;</span>);</div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *PUpperBound = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(IVTy, <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;p.upperbound&quot;</span>);</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *PStride = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(IVTy, <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;p.stride&quot;</span>);</div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160; </div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;  <span class="comment">// At the end of the preheader, prepare for calling the &quot;init&quot; function by</span></div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;  <span class="comment">// storing the current loop bounds into the allocated space. A canonical loop</span></div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;  <span class="comment">// always iterates from 0 to trip-count with step 1. Note that &quot;init&quot; expects</span></div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;  <span class="comment">// and produces an inclusive upper bound.</span></div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PreHeader = CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#ad50eb30e70ff2a9ea7f220547e2b6f6d">getPreheader</a>();</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(PreHeader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *One = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(IVTy, 1);</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(One, PLowerBound);</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *UpperBound = CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a2077e6f8b41cd609c8e54e80767eb280">getTripCount</a>();</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(UpperBound, PUpperBound);</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(One, PStride);</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160; </div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Header = CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a5ddf1dc42b9030b248b6a6ec474512dd">getHeader</a>();</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Exit = CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a320de99bcedbb241fe54ed847482d27f">getExit</a>();</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a71a16b42ce34255bd7a65902d15643fb">getCond</a>();</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Latch = CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a8ffbd9b1e60e2bb15da132610ff997ac">getLatch</a>();</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;  InsertPointTy AfterIP = CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a578dd7d619d0ccfc6ace07aa380022cc">getAfterIP</a>();</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160; </div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;  <span class="comment">// The CLI will be &quot;broken&quot; in the code below, as the loop is no longer</span></div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;  <span class="comment">// a valid canonical loop.</span></div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160; </div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;  <span class="keywordflow">if</span> (!Chunk)</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;    Chunk = One;</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160; </div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ThreadNum = getOrCreateThreadID(SrcLoc);</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160; </div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SchedulingType =</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;      <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(I32Type, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(SchedType));</div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160; </div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;  <span class="comment">// Call the &quot;init&quot; function.</span></div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(DynamicInit,</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;                     {SrcLoc, ThreadNum, SchedulingType, <span class="comment">/* LowerBound */</span> One,</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;                      UpperBound, <span class="comment">/* step */</span> One, Chunk});</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160; </div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;  <span class="comment">// An outer loop around the existing one.</span></div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OuterCond = <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;      PreHeader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aa286a0f7f5d38488d593bb7ef0ba183e">getContext</a>(), <a class="code" href="classllvm_1_1Twine.html">Twine</a>(PreHeader-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>()) + <span class="stringliteral">&quot;.outer.cond&quot;</span>,</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;      PreHeader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>());</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;  <span class="comment">// This needs to be 32-bit always, so can&#39;t use the IVTy Zero above.</span></div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(OuterCond, OuterCond-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a161fd4e9fa5367f64c2a4c9e921c3ad3">getFirstInsertionPt</a>());</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Res =</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(DynamicNext, {SrcLoc, ThreadNum, PLastIter,</div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;                                       PLowerBound, PUpperBound, PStride});</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Zero32 = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(I32Type, 0);</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *MoreWork = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCmp(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP_NE</a>, Res, Zero32);</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *LowerBound =</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSub(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(IVTy, PLowerBound), One, <span class="stringliteral">&quot;lb&quot;</span>);</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCondBr(MoreWork, Header, Exit);</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160; </div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;  <span class="comment">// Change PHI-node in loop header to use outer cond rather than preheader,</span></div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;  <span class="comment">// and set IV to the LowerBound.</span></div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Phi = &amp;Header-&gt;front();</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;  <span class="keyword">auto</span> *PI = cast&lt;PHINode&gt;(Phi);</div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;  PI-&gt;setIncomingBlock(0, OuterCond);</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;  PI-&gt;setIncomingValue(0, LowerBound);</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160; </div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;  <span class="comment">// Then set the pre-header to jump to the OuterCond</span></div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1M68kBeads.html#a7eeab1fe8f39bf89dcd7929b816ebfcca27d0e059322508a76f918503800ef1bd">Term</a> = PreHeader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>();</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;  <span class="keyword">auto</span> *Br = cast&lt;BranchInst&gt;(<a class="code" href="namespacellvm_1_1M68kBeads.html#a7eeab1fe8f39bf89dcd7929b816ebfcca27d0e059322508a76f918503800ef1bd">Term</a>);</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;  Br-&gt;setSuccessor(0, OuterCond);</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160; </div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;  <span class="comment">// Modify the inner condition:</span></div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;  <span class="comment">// * Use the UpperBound returned from the DynamicNext call.</span></div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;  <span class="comment">// * jump to the loop outer loop when done with one of the inner loops.</span></div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>-&gt;getFirstInsertionPt());</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;  UpperBound = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(IVTy, PUpperBound, <span class="stringliteral">&quot;ub&quot;</span>);</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Comp = &amp;*<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.GetInsertPoint();</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;  <span class="keyword">auto</span> *CI = cast&lt;CmpInst&gt;(Comp);</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;  CI-&gt;setOperand(1, UpperBound);</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;  <span class="comment">// Redirect the inner exit to branch to outer condition.</span></div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a359237c780f7c8e40645575826da8a3c">Branch</a> = &amp;<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>-&gt;back();</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;  <span class="keyword">auto</span> *BI = cast&lt;BranchInst&gt;(<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a359237c780f7c8e40645575826da8a3c">Branch</a>);</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(BI-&gt;getSuccessor(1) == Exit);</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;  BI-&gt;setSuccessor(1, OuterCond);</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160; </div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;  <span class="comment">// Call the &quot;fini&quot; function if &quot;ordered&quot; is present in wsloop directive.</span></div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;  <span class="keywordflow">if</span> (Ordered) {</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(&amp;Latch-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8f6f9b4a94dc0907499c03a9e1b6918b">back</a>());</div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;    <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> DynamicFini = <a class="code" href="OMPIRBuilder_8cpp.html#a3d17252beff7921e40622170990c89ab">getKmpcForDynamicFiniForType</a>(IVTy, M, *<span class="keyword">this</span>);</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(DynamicFini, {SrcLoc, ThreadNum});</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;  }</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160; </div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;  <span class="comment">// Add the barrier if requested.</span></div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;  <span class="keywordflow">if</span> (NeedsBarrier) {</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(&amp;Exit-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8f6f9b4a94dc0907499c03a9e1b6918b">back</a>());</div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;    createBarrier(LocationDescription(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP(), <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>),</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;                  omp::Directive::OMPD_for, <span class="comment">/* ForceSimpleCall */</span> <span class="keyword">false</span>,</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;                  <span class="comment">/* CheckCancelFlag */</span> <span class="keyword">false</span>);</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;  }</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160; </div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;  CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a9ce55b05f8ad85126fc92eeeb35457c7">invalidate</a>();</div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;  <span class="keywordflow">return</span> AfterIP;</div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;}</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;<span class="comment">/// Redirect all edges that branch to \p OldTarget to \p NewTarget. That is,</span></div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;<span class="comment">/// after this \p OldTarget will be orphaned.</span></div>
<div class="line"><a name="l02574"></a><span class="lineno"><a class="line" href="OMPIRBuilder_8cpp.html#abdcdbfc178873f5055fbcf98bad92f53"> 2574</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="OMPIRBuilder_8cpp.html#abdcdbfc178873f5055fbcf98bad92f53">redirectAllPredecessorsTo</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OldTarget,</div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;                                      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewTarget, <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>) {</div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Pred : <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">make_early_inc_range</a>(<a class="code" href="namespacellvm.html#acb22fb04083152eee862457e42e8dc31">predecessors</a>(OldTarget)))</div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;    <a class="code" href="OMPIRBuilder_8cpp.html#a3057c2b7e1e25de160497b1ef3985c2a">redirectTo</a>(Pred, NewTarget, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;}</div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;<span class="comment">/// Determine which blocks in \p BBs are reachable from outside and remove the</span></div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;<span class="comment">/// ones that are not reachable from the function.</span></div>
<div class="line"><a name="l02582"></a><span class="lineno"><a class="line" href="OMPIRBuilder_8cpp.html#af0ce60c4a958016f62ce78f1eda423af"> 2582</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="OMPIRBuilder_8cpp.html#af0ce60c4a958016f62ce78f1eda423af">removeUnusedBlocksFromParent</a>(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;BasicBlock *&gt;</a> BBs) {</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock *, 6&gt;</a> BBsToErase{BBs.<a class="code" href="classllvm_1_1ArrayRef.html#aab36927882fbfdcbb860d87fd9c30da8">begin</a>(), BBs.<a class="code" href="classllvm_1_1ArrayRef.html#a7ca5197533a9c1fb8a2bd30587fcec6b">end</a>()};</div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;  <span class="keyword">auto</span> HasRemainingUses = [&amp;BBsToErase](<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U : <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;uses()) {</div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;      <span class="keyword">auto</span> *UseInst = dyn_cast&lt;Instruction&gt;(U.getUser());</div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;      <span class="keywordflow">if</span> (!UseInst)</div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;      <span class="keywordflow">if</span> (BBsToErase.count(UseInst-&gt;getParent()))</div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;    }</div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;  };</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160; </div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;  <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;    <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">make_early_inc_range</a>(BBsToErase)) {</div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;      <span class="keywordflow">if</span> (HasRemainingUses(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)) {</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;        BBsToErase.erase(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;        Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;      }</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;    }</div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;    <span class="keywordflow">if</span> (!Changed)</div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;  }</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160; </div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 7&gt;</a> BBVec(BBsToErase.begin(), BBsToErase.end());</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;  <a class="code" href="namespacellvm.html#addf42fea14164ec994d4d517eaa56688">DeleteDeadBlocks</a>(BBVec);</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;}</div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160; </div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *</div>
<div class="line"><a name="l02613"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a08610118e213de1b759470f0eafb9b18"> 2613</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a08610118e213de1b759470f0eafb9b18">OpenMPIRBuilder::collapseLoops</a>(<a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;CanonicalLoopInfo *&gt;</a> <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>,</div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;                               <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> ComputeIP) {</div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>.size() &gt;= 1 &amp;&amp; <span class="stringliteral">&quot;At least one loop required&quot;</span>);</div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;  <span class="keywordtype">size_t</span> NumLoops = <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>.size();</div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160; </div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;  <span class="comment">// Nothing to do if there is already just one loop.</span></div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;  <span class="keywordflow">if</span> (NumLoops == 1)</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>.front();</div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160; </div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;  <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *Outermost = <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>.front();</div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;  <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *Innermost = <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>.back();</div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OrigPreheader = Outermost-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#ad50eb30e70ff2a9ea7f220547e2b6f6d">getPreheader</a>();</div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OrigAfter = Outermost-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#aba24a232ebb4ade12a5ed4d0d54d69ad">getAfter</a>();</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = OrigPreheader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>();</div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160; </div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;  <span class="comment">// Loop control blocks that may become orphaned later.</span></div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 12&gt;</a> OldControlBBs;</div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;  OldControlBBs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a499ea32ca1b8d16cedfe01d1e5b08f29">reserve</a>(6 * <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>.size());</div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *<a class="code" href="classllvm_1_1Loop.html">Loop</a> : <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>)</div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;    <a class="code" href="classllvm_1_1Loop.html">Loop</a>-&gt;collectControlBlocks(OldControlBBs);</div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160; </div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;  <span class="comment">// Setup the IRBuilder for inserting the trip count computation.</span></div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetCurrentDebugLocation(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;  <span class="keywordflow">if</span> (ComputeIP.isSet())</div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(ComputeIP);</div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(Outermost-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#ac72ebc430ef7dcf1791c66080ddedd9d">getPreheaderIP</a>());</div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160; </div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;  <span class="comment">// Derive the collapsed&#39; loop trip count.</span></div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;  <span class="comment">// TODO: Find common/largest indvar type.</span></div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CollapsedTripCount = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *L : <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>) {</div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(L-&gt;isValid() &amp;&amp;</div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;           <span class="stringliteral">&quot;All loops to collapse must be valid canonical loops&quot;</span>);</div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *OrigTripCount = L-&gt;getTripCount();</div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;    <span class="keywordflow">if</span> (!CollapsedTripCount) {</div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;      CollapsedTripCount = OrigTripCount;</div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;    }</div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160; </div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;    <span class="comment">// TODO: Enable UndefinedSanitizer to diagnose an overflow here.</span></div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;    CollapsedTripCount = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateMul(CollapsedTripCount, OrigTripCount,</div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;                                           {}, <span class="comment">/*HasNUW=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;  }</div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160; </div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;  <span class="comment">// Create the collapsed loop control flow.</span></div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;  <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *Result =</div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;      createLoopSkeleton(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, CollapsedTripCount, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>,</div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;                         OrigPreheader-&gt;<a class="code" href="classllvm_1_1ilist__node__with__parent.html#a26708685cc8b94fe3d7092ee080dbb34">getNextNode</a>(), OrigAfter, <span class="stringliteral">&quot;collapsed&quot;</span>);</div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160; </div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;  <span class="comment">// Build the collapsed loop body code.</span></div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;  <span class="comment">// Start with deriving the input loop induction variables from the collapsed</span></div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;  <span class="comment">// one, using a divmod scheme. To preserve the original loops&#39; order, the</span></div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;  <span class="comment">// innermost loop use the least significant bits.</span></div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(Result-&gt;getBodyIP());</div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160; </div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Leftover = Result-&gt;getIndVar();</div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *&gt;</a> NewIndVars;</div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;  NewIndVars.<a class="code" href="classllvm_1_1SmallVectorImpl.html#ad0b3d8447f88377b62d9c019f3c4e118">resize</a>(NumLoops);</div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = NumLoops - 1; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt;= 1; --<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *OrigTripCount = <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;getTripCount();</div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160; </div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewIndVar = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateURem(Leftover, OrigTripCount);</div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;    NewIndVars[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = NewIndVar;</div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160; </div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;    Leftover = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateUDiv(Leftover, OrigTripCount);</div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;  }</div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;  <span class="comment">// Outermost loop gets all the remaining bits.</span></div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;  NewIndVars[0] = Leftover;</div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160; </div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;  <span class="comment">// Construct the loop body control flow.</span></div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;  <span class="comment">// We progressively construct the branch structure following in direction of</span></div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;  <span class="comment">// the control flow, from the leading in-between code, the loop nest body, the</span></div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;  <span class="comment">// trailing in-between code, and rejoining the collapsed loop&#39;s latch.</span></div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;  <span class="comment">// ContinueBlock and ContinuePred keep track of the source(s) of next edge. If</span></div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;  <span class="comment">// the ContinueBlock is set, continue with that block. If ContinuePred, use</span></div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;  <span class="comment">// its predecessors as sources.</span></div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ContinueBlock = Result-&gt;getBody();</div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ContinuePred = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;  <span class="keyword">auto</span> ContinueWith = [&amp;ContinueBlock, &amp;ContinuePred, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>](<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Dest,</div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;                                                          <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NextSrc) {</div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;    <span class="keywordflow">if</span> (ContinueBlock)</div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;      <a class="code" href="OMPIRBuilder_8cpp.html#a3057c2b7e1e25de160497b1ef3985c2a">redirectTo</a>(ContinueBlock, Dest, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;      <a class="code" href="OMPIRBuilder_8cpp.html#abdcdbfc178873f5055fbcf98bad92f53">redirectAllPredecessorsTo</a>(ContinuePred, Dest, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160; </div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;    ContinueBlock = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;    ContinuePred = NextSrc;</div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;  };</div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160; </div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;  <span class="comment">// The code before the nested loop of each level.</span></div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;  <span class="comment">// Because we are sinking it into the nest, it will be executed more often</span></div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;  <span class="comment">// that the original loop. More sophisticated schemes could keep track of what</span></div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;  <span class="comment">// the in-between code is and instantiate it only once per thread.</span></div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumLoops - 1; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;    ContinueWith(<a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;getBody(), <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1]-&gt;getHeader());</div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160; </div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;  <span class="comment">// Connect the loop nest body.</span></div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;  ContinueWith(Innermost-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#afe4ae11bae0a25e5ddc9615ef6852aed">getBody</a>(), Innermost-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a8ffbd9b1e60e2bb15da132610ff997ac">getLatch</a>());</div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160; </div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;  <span class="comment">// The code after the nested loop at each level.</span></div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = NumLoops - 1; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt; 0; --<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;    ContinueWith(<a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;getAfter(), <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1]-&gt;getLatch());</div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160; </div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;  <span class="comment">// Connect the finished loop to the collapsed loop latch.</span></div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;  ContinueWith(Result-&gt;getLatch(), <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160; </div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;  <span class="comment">// Replace the input loops with the new collapsed loop.</span></div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;  <a class="code" href="OMPIRBuilder_8cpp.html#a3057c2b7e1e25de160497b1ef3985c2a">redirectTo</a>(Outermost-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#ad50eb30e70ff2a9ea7f220547e2b6f6d">getPreheader</a>(), Result-&gt;getPreheader(), <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;  <a class="code" href="OMPIRBuilder_8cpp.html#a3057c2b7e1e25de160497b1ef3985c2a">redirectTo</a>(Result-&gt;getAfter(), Outermost-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#aba24a232ebb4ade12a5ed4d0d54d69ad">getAfter</a>(), <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160; </div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;  <span class="comment">// Replace the input loop indvars with the derived ones.</span></div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumLoops; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;    <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;getIndVar()-&gt;replaceAllUsesWith(NewIndVars[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160; </div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;  <span class="comment">// Remove unused parts of the input loops.</span></div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;  <a class="code" href="OMPIRBuilder_8cpp.html#af0ce60c4a958016f62ce78f1eda423af">removeUnusedBlocksFromParent</a>(OldControlBBs);</div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160; </div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *L : <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>)</div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;    L-&gt;invalidate();</div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160; </div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;  Result-&gt;assertOK();</div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;  <span class="keywordflow">return</span> Result;</div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;}</div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160; </div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;std::vector&lt;CanonicalLoopInfo *&gt;</div>
<div class="line"><a name="l02741"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a76e12ec076e7af4be7b8b77a5d53d3fc"> 2741</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a76e12ec076e7af4be7b8b77a5d53d3fc">OpenMPIRBuilder::tileLoops</a>(<a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;CanonicalLoopInfo *&gt;</a> <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>,</div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;                           <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Value *&gt;</a> TileSizes) {</div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TileSizes.<a class="code" href="classllvm_1_1ArrayRef.html#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>() == <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>.size() &amp;&amp;</div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;         <span class="stringliteral">&quot;Must pass as many tile sizes as there are loops&quot;</span>);</div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;  <span class="keywordtype">int</span> NumLoops = <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>.size();</div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NumLoops &gt;= 1 &amp;&amp; <span class="stringliteral">&quot;At least one loop to tile required&quot;</span>);</div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160; </div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;  <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *OutermostLoop = <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>.front();</div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;  <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *InnermostLoop = <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>.back();</div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = OutermostLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#afe4ae11bae0a25e5ddc9615ef6852aed">getBody</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>();</div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *InnerEnter = InnermostLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#afe4ae11bae0a25e5ddc9615ef6852aed">getBody</a>();</div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *InnerLatch = InnermostLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a8ffbd9b1e60e2bb15da132610ff997ac">getLatch</a>();</div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160; </div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;  <span class="comment">// Loop control blocks that may become orphaned later.</span></div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 12&gt;</a> OldControlBBs;</div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;  OldControlBBs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a499ea32ca1b8d16cedfe01d1e5b08f29">reserve</a>(6 * <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>.size());</div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *<a class="code" href="classllvm_1_1Loop.html">Loop</a> : <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>)</div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;    <a class="code" href="classllvm_1_1Loop.html">Loop</a>-&gt;collectControlBlocks(OldControlBBs);</div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160; </div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;  <span class="comment">// Collect original trip counts and induction variable to be accessible by</span></div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;  <span class="comment">// index. Also, the structure of the original loops is not preserved during</span></div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;  <span class="comment">// the construction of the tiled loops, so do it before we scavenge the BBs of</span></div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;  <span class="comment">// any original CanonicalLoopInfo.</span></div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 4&gt;</a> OrigTripCounts, OrigIndVars;</div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *L : <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>) {</div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(L-&gt;isValid() &amp;&amp; <span class="stringliteral">&quot;All input loops must be valid canonical loops&quot;</span>);</div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;    OrigTripCounts.push_back(L-&gt;getTripCount());</div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;    OrigIndVars.push_back(L-&gt;getIndVar());</div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;  }</div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160; </div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;  <span class="comment">// Collect the code between loop headers. These may contain SSA definitions</span></div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;  <span class="comment">// that are used in the loop nest body. To be usable with in the innermost</span></div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;  <span class="comment">// body, these BasicBlocks will be sunk into the loop nest body. That is,</span></div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;  <span class="comment">// these instructions may be executed more often than before the tiling.</span></div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;  <span class="comment">// TODO: It would be sufficient to only sink them into body of the</span></div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;  <span class="comment">// corresponding tile loop.</span></div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;BasicBlock *, BasicBlock *&gt;</a>, 4&gt; InbetweenCode;</div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumLoops - 1; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;    <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *Surrounding = <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;    <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *Nested = <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1];</div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160; </div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *EnterBB = Surrounding-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#afe4ae11bae0a25e5ddc9615ef6852aed">getBody</a>();</div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitBB = Nested-&gt;getHeader();</div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;    InbetweenCode.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(EnterBB, ExitBB);</div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;  }</div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160; </div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;  <span class="comment">// Compute the trip counts of the floor loops.</span></div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetCurrentDebugLocation(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(OutermostLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#ac72ebc430ef7dcf1791c66080ddedd9d">getPreheaderIP</a>());</div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 4&gt;</a> FloorCount, FloorRems;</div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumLoops; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="LowerMatrixIntrinsics_8cpp.html#a7f6b2a94f0c353d428cf953c17fb7da0">TileSize</a> = TileSizes[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *OrigTripCount = OrigTripCounts[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *IVType = OrigTripCount-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160; </div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *FloorTripCount = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateUDiv(OrigTripCount, <a class="code" href="LowerMatrixIntrinsics_8cpp.html#a7f6b2a94f0c353d428cf953c17fb7da0">TileSize</a>);</div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *FloorTripRem = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateURem(OrigTripCount, <a class="code" href="LowerMatrixIntrinsics_8cpp.html#a7f6b2a94f0c353d428cf953c17fb7da0">TileSize</a>);</div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160; </div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;    <span class="comment">// 0 if tripcount divides the tilesize, 1 otherwise.</span></div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;    <span class="comment">// 1 means we need an additional iteration for a partial tile.</span></div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;    <span class="comment">// Unfortunately we cannot just use the roundup-formula</span></div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;    <span class="comment">//   (tripcount + tilesize - 1)/tilesize</span></div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;    <span class="comment">// because the summation might overflow. We do not want introduce undefined</span></div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;    <span class="comment">// behavior when the untiled loop nest did not.</span></div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *FloorTripOverflow =</div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmpNE(FloorTripRem, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(IVType, 0));</div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160; </div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;    FloorTripOverflow = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateZExt(FloorTripOverflow, IVType);</div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;    FloorTripCount =</div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(FloorTripCount, FloorTripOverflow,</div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;                          <span class="stringliteral">&quot;omp_floor&quot;</span> + <a class="code" href="classllvm_1_1Twine.html">Twine</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) + <span class="stringliteral">&quot;.tripcount&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160; </div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;    <span class="comment">// Remember some values for later use.</span></div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;    FloorCount.push_back(FloorTripCount);</div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;    FloorRems.push_back(FloorTripRem);</div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;  }</div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160; </div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;  <span class="comment">// Generate the new loop nest, from the outermost to the innermost.</span></div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;  std::vector&lt;CanonicalLoopInfo *&gt; Result;</div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;  Result.reserve(NumLoops * 2);</div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160; </div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;  <span class="comment">// The basic block of the surrounding loop that enters the nest generated</span></div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;  <span class="comment">// loop.</span></div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Enter = OutermostLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#ad50eb30e70ff2a9ea7f220547e2b6f6d">getPreheader</a>();</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160; </div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;  <span class="comment">// The basic block of the surrounding loop where the inner code should</span></div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;  <span class="comment">// continue.</span></div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Continue = OutermostLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#aba24a232ebb4ade12a5ed4d0d54d69ad">getAfter</a>();</div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160; </div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;  <span class="comment">// Where the next loop basic block should be inserted.</span></div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OutroInsertBefore = InnermostLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a320de99bcedbb241fe54ed847482d27f">getExit</a>();</div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160; </div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;  <span class="keyword">auto</span> EmbeddNewLoop =</div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;      [<span class="keyword">this</span>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, InnerEnter, &amp;Enter, &amp;Continue, &amp;OutroInsertBefore](</div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *TripCount, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;Name) -&gt; <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> * {</div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;    <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *EmbeddedLoop = createLoopSkeleton(</div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;        <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, TripCount, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, InnerEnter, OutroInsertBefore, Name);</div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;    <a class="code" href="OMPIRBuilder_8cpp.html#a3057c2b7e1e25de160497b1ef3985c2a">redirectTo</a>(Enter, EmbeddedLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#ad50eb30e70ff2a9ea7f220547e2b6f6d">getPreheader</a>(), <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;    <a class="code" href="OMPIRBuilder_8cpp.html#a3057c2b7e1e25de160497b1ef3985c2a">redirectTo</a>(EmbeddedLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#aba24a232ebb4ade12a5ed4d0d54d69ad">getAfter</a>(), Continue, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160; </div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;    <span class="comment">// Setup the position where the next embedded loop connects to this loop.</span></div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;    Enter = EmbeddedLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#afe4ae11bae0a25e5ddc9615ef6852aed">getBody</a>();</div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;    Continue = EmbeddedLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a8ffbd9b1e60e2bb15da132610ff997ac">getLatch</a>();</div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;    OutroInsertBefore = EmbeddedLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a8ffbd9b1e60e2bb15da132610ff997ac">getLatch</a>();</div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;    <span class="keywordflow">return</span> EmbeddedLoop;</div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;  };</div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160; </div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;  <span class="keyword">auto</span> EmbeddNewLoops = [&amp;Result, &amp;EmbeddNewLoop](<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Value *&gt;</a> TripCounts,</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;                                                  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;NameBase) {</div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> : <a class="code" href="namespacellvm.html#a7b2175e18ff52174fad26b6b68818564">enumerate</a>(TripCounts)) {</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;      <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *EmbeddedLoop =</div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;          EmbeddNewLoop(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.value(), NameBase + <a class="code" href="classllvm_1_1Twine.html">Twine</a>(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.index()));</div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;      Result.push_back(EmbeddedLoop);</div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;    }</div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;  };</div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160; </div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;  EmbeddNewLoops(FloorCount, <span class="stringliteral">&quot;floor&quot;</span>);</div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160; </div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;  <span class="comment">// Within the innermost floor loop, emit the code that computes the tile</span></div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;  <span class="comment">// sizes.</span></div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(Enter-&gt;getTerminator());</div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 4&gt;</a> TileCounts;</div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumLoops; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;    <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *FloorLoop = Result[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="LowerMatrixIntrinsics_8cpp.html#a7f6b2a94f0c353d428cf953c17fb7da0">TileSize</a> = TileSizes[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160; </div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *FloorIsEpilogue =</div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmpEQ(FloorLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a230d812cc988ec3a48bf5206d3d72b88">getIndVar</a>(), FloorCount[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *TileTripCount =</div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(FloorIsEpilogue, FloorRems[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], <a class="code" href="LowerMatrixIntrinsics_8cpp.html#a7f6b2a94f0c353d428cf953c17fb7da0">TileSize</a>);</div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160; </div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;    TileCounts.push_back(TileTripCount);</div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;  }</div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160; </div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;  <span class="comment">// Create the tile loops.</span></div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;  EmbeddNewLoops(TileCounts, <span class="stringliteral">&quot;tile&quot;</span>);</div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160; </div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;  <span class="comment">// Insert the inbetween code into the body.</span></div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BodyEnter = Enter;</div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BodyEntered = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;  <span class="keywordflow">for</span> (std::pair&lt;BasicBlock *, BasicBlock *&gt; <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> : InbetweenCode) {</div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *EnterBB = <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.first;</div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitBB = <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.second;</div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160; </div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;    <span class="keywordflow">if</span> (BodyEnter)</div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;      <a class="code" href="OMPIRBuilder_8cpp.html#a3057c2b7e1e25de160497b1ef3985c2a">redirectTo</a>(BodyEnter, EnterBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;      <a class="code" href="OMPIRBuilder_8cpp.html#abdcdbfc178873f5055fbcf98bad92f53">redirectAllPredecessorsTo</a>(BodyEntered, EnterBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160; </div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;    BodyEnter = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;    BodyEntered = ExitBB;</div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;  }</div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160; </div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;  <span class="comment">// Append the original loop nest body into the generated loop nest body.</span></div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;  <span class="keywordflow">if</span> (BodyEnter)</div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;    <a class="code" href="OMPIRBuilder_8cpp.html#a3057c2b7e1e25de160497b1ef3985c2a">redirectTo</a>(BodyEnter, InnerEnter, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;    <a class="code" href="OMPIRBuilder_8cpp.html#abdcdbfc178873f5055fbcf98bad92f53">redirectAllPredecessorsTo</a>(BodyEntered, InnerEnter, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;  <a class="code" href="OMPIRBuilder_8cpp.html#abdcdbfc178873f5055fbcf98bad92f53">redirectAllPredecessorsTo</a>(InnerLatch, Continue, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160; </div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;  <span class="comment">// Replace the original induction variable with an induction variable computed</span></div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;  <span class="comment">// from the tile and floor induction variables.</span></div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(Result.back()-&gt;getBodyIP());</div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumLoops; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;    <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *FloorLoop = Result[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;    <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *TileLoop = Result[NumLoops + <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *OrigIndVar = OrigIndVars[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Size = TileSizes[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160; </div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Scale =</div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateMul(Size, FloorLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a230d812cc988ec3a48bf5206d3d72b88">getIndVar</a>(), {}, <span class="comment">/*HasNUW=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a> =</div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(Scale, TileLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a230d812cc988ec3a48bf5206d3d72b88">getIndVar</a>(), {}, <span class="comment">/*HasNUW=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;    OrigIndVar-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(<a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>);</div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;  }</div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160; </div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;  <span class="comment">// Remove unused parts of the original loops.</span></div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;  <a class="code" href="OMPIRBuilder_8cpp.html#af0ce60c4a958016f62ce78f1eda423af">removeUnusedBlocksFromParent</a>(OldControlBBs);</div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160; </div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *L : <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>)</div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;    L-&gt;invalidate();</div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160; </div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *GenL : Result)</div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;    GenL-&gt;assertOK();</div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;  <span class="keywordflow">return</span> Result;</div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;}</div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;<span class="comment">/// Attach metadata \p Properties to the basic block described by \p BB. If the</span></div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;<span class="comment">/// basic block already has metadata, the basic block properties are appended.</span></div>
<div class="line"><a name="l02933"></a><span class="lineno"><a class="line" href="OMPIRBuilder_8cpp.html#ac36177cea684b1e36fdbc92d692f69d0"> 2933</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="OMPIRBuilder_8cpp.html#ac36177cea684b1e36fdbc92d692f69d0">addBasicBlockMetadata</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;                                  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Metadata *&gt;</a> Properties) {</div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;  <span class="comment">// Nothing to do if no property to attach.</span></div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;  <span class="keywordflow">if</span> (Properties.<a class="code" href="classllvm_1_1ArrayRef.html#ac835b8735b1b2faec0efdca236e37d94">empty</a>())</div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160; </div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;Ctx = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getContext();</div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Metadata *&gt;</a> NewProperties;</div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;  NewProperties.push_back(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160; </div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;  <span class="comment">// If the basic block already has metadata, prepend it to the new metadata.</span></div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;  <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *Existing = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator()-&gt;getMetadata(LLVMContext::MD_loop);</div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;  <span class="keywordflow">if</span> (Existing)</div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;    <a class="code" href="namespacellvm.html#a39d3d23a084c4544ee5903203db10e8a">append_range</a>(NewProperties, <a class="code" href="namespacellvm.html#a02981de53fb6ffd384d39addc4d25f37">drop_begin</a>(Existing-&gt;<a class="code" href="classllvm_1_1MDNode.html#a2ff0e0e87a2d1056a7b6d7d4b878c4ec">operands</a>(), 1));</div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160; </div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;  <a class="code" href="namespacellvm.html#a39d3d23a084c4544ee5903203db10e8a">append_range</a>(NewProperties, Properties);</div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;  <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *BasicBlockID = <a class="code" href="classllvm_1_1MDNode.html#a21a975fd58c287a6ca3f1c89c048e7d3">MDNode::getDistinct</a>(Ctx, NewProperties);</div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;  BasicBlockID-&gt;<a class="code" href="classllvm_1_1MDNode.html#a160e9e1a4fd597f83034c8b2ba316984">replaceOperandWith</a>(0, BasicBlockID);</div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160; </div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;  <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator()-&gt;setMetadata(LLVMContext::MD_loop, BasicBlockID);</div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;}</div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;<span class="comment">/// Attach loop metadata \p Properties to the loop described by \p Loop. If the</span></div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;<span class="comment">/// loop already has metadata, the loop properties are appended.</span></div>
<div class="line"><a name="l02957"></a><span class="lineno"><a class="line" href="OMPIRBuilder_8cpp.html#adf813540e363817b85e9eecef51269b5"> 2957</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="OMPIRBuilder_8cpp.html#adf813540e363817b85e9eecef51269b5">addLoopMetadata</a>(<a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *<a class="code" href="classllvm_1_1Loop.html">Loop</a>,</div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;                            <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Metadata *&gt;</a> Properties) {</div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a>-&gt;isValid() &amp;&amp; <span class="stringliteral">&quot;Expecting a valid CanonicalLoopInfo&quot;</span>);</div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160; </div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;  <span class="comment">// Attach metadata to the loop&#39;s latch</span></div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Latch = <a class="code" href="classllvm_1_1Loop.html">Loop</a>-&gt;getLatch();</div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Latch &amp;&amp; <span class="stringliteral">&quot;A valid CanonicalLoopInfo must have a unique latch&quot;</span>);</div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;  <a class="code" href="OMPIRBuilder_8cpp.html#ac36177cea684b1e36fdbc92d692f69d0">addBasicBlockMetadata</a>(Latch, Properties);</div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;}</div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;<span class="comment">/// Attach llvm.access.group metadata to the memref instructions of \p Block</span></div>
<div class="line"><a name="l02968"></a><span class="lineno"><a class="line" href="OMPIRBuilder_8cpp.html#a545cc7eb4f94d0957ba9960a69b10a90"> 2968</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="OMPIRBuilder_8cpp.html#a545cc7eb4f94d0957ba9960a69b10a90">addSimdMetadata</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Block, <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *AccessGroup,</div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;                            <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> &amp;LI) {</div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *Block) {</div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.mayReadOrWriteMemory()) {</div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;      <span class="comment">// TODO: This instruction may already have access group from</span></div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;      <span class="comment">// other pragmas e.g. #pragma clang loop vectorize.  Append</span></div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;      <span class="comment">// so that the existing metadata is not overwritten.</span></div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;      <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.setMetadata(LLVMContext::MD_access_group, AccessGroup);</div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;    }</div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;  }</div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;}</div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160; </div>
<div class="line"><a name="l02980"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a28a2a9806d828609fe107f766d2dd569"> 2980</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a28a2a9806d828609fe107f766d2dd569">OpenMPIRBuilder::unrollLoopFull</a>(<a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a>, <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *<a class="code" href="classllvm_1_1Loop.html">Loop</a>) {</div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;Ctx = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getContext();</div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;  <a class="code" href="OMPIRBuilder_8cpp.html#adf813540e363817b85e9eecef51269b5">addLoopMetadata</a>(</div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;      <a class="code" href="classllvm_1_1Loop.html">Loop</a>, {<a class="code" href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">MDNode::get</a>(Ctx, <a class="code" href="classllvm_1_1MDString.html#affbb7e2e9ad8d18114816f2443d672b9">MDString::get</a>(Ctx, <span class="stringliteral">&quot;llvm.loop.unroll.enable&quot;</span>)),</div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;             <a class="code" href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">MDNode::get</a>(Ctx, <a class="code" href="classllvm_1_1MDString.html#affbb7e2e9ad8d18114816f2443d672b9">MDString::get</a>(Ctx, <span class="stringliteral">&quot;llvm.loop.unroll.full&quot;</span>))});</div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;}</div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160; </div>
<div class="line"><a name="l02987"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a4ca0068cb6a50615c74ecdb8f23839e0"> 2987</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a4ca0068cb6a50615c74ecdb8f23839e0">OpenMPIRBuilder::unrollLoopHeuristic</a>(<a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a>, <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *<a class="code" href="classllvm_1_1Loop.html">Loop</a>) {</div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;Ctx = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getContext();</div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;  <a class="code" href="OMPIRBuilder_8cpp.html#adf813540e363817b85e9eecef51269b5">addLoopMetadata</a>(</div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;      <a class="code" href="classllvm_1_1Loop.html">Loop</a>, {</div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;                <a class="code" href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">MDNode::get</a>(Ctx, <a class="code" href="classllvm_1_1MDString.html#affbb7e2e9ad8d18114816f2443d672b9">MDString::get</a>(Ctx, <span class="stringliteral">&quot;llvm.loop.unroll.enable&quot;</span>)),</div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;            });</div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;}</div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160; </div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;<span class="keywordtype">void</span> OpenMPIRBuilder::createIfVersion(<a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *CanonicalLoop,</div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;                                      <a class="code" href="classllvm_1_1Value.html">Value</a> *IfCond, <a class="code" href="classllvm_1_1ValueMap.html">ValueToValueMapTy</a> &amp;VMap,</div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;                                      <span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;NamePrefix) {</div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = CanonicalLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a0e975380231c805957723804ad3ba008">getFunction</a>();</div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160; </div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;  <span class="comment">// Define where if branch should be inserted</span></div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *SplitBefore;</div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html#a644afe0cf8a4816171b3384098325dc2">Instruction::classof</a>(IfCond)) {</div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;    SplitBefore = dyn_cast&lt;Instruction&gt;(IfCond);</div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;    SplitBefore = CanonicalLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#ad50eb30e70ff2a9ea7f220547e2b6f6d">getPreheader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>();</div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;  }</div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160; </div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;  <span class="comment">// TODO: We should not rely on pass manager. Currently we use pass manager</span></div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;  <span class="comment">// only for getting llvm::Loop which corresponds to given CanonicalLoopInfo</span></div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;  <span class="comment">// object. We should have a method  which returns all blocks between</span></div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;  <span class="comment">// CanonicalLoopInfo::getHeader() and CanonicalLoopInfo::getAfter()</span></div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;  <a class="code" href="classllvm_1_1AnalysisManager.html">FunctionAnalysisManager</a> <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>;</div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;  <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#a91ff894f756175a693c85bf73f79de9e">registerPass</a>([]() { <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1DominatorTreeAnalysis.html">DominatorTreeAnalysis</a>(); });</div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;  <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#a91ff894f756175a693c85bf73f79de9e">registerPass</a>([]() { <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LoopAnalysis.html">LoopAnalysis</a>(); });</div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;  <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#a91ff894f756175a693c85bf73f79de9e">registerPass</a>([]() { <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PassInstrumentationAnalysis.html">PassInstrumentationAnalysis</a>(); });</div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160; </div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;  <span class="comment">// Get the loop which needs to be cloned</span></div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;  <a class="code" href="classllvm_1_1LoopAnalysis.html">LoopAnalysis</a> LIA;</div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;  <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> &amp;&amp;LI = LIA.<a class="code" href="classllvm_1_1LoopAnalysis.html#aea38b668f2d98b7e9f64b8b3c2e524dc">run</a>(*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>);</div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;  <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L = LI.<a class="code" href="classllvm_1_1LoopInfoBase.html#a7a7c8e0e4f836c13c015b62e18f386bd">getLoopFor</a>(CanonicalLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a5ddf1dc42b9030b248b6a6ec474512dd">getHeader</a>());</div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160; </div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;  <span class="comment">// Create additional blocks for the if statement</span></div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Head = SplitBefore-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>();</div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *HeadOldTerm = Head-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>();</div>
<div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">llvm::LLVMContext</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = Head-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aa286a0f7f5d38488d593bb7ef0ba183e">getContext</a>();</div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a> *ThenBlock = <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">llvm::BasicBlock::Create</a>(</div>
<div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;      <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, NamePrefix + <span class="stringliteral">&quot;.if.then&quot;</span>, Head-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>(), Head-&gt;<a class="code" href="classllvm_1_1ilist__node__with__parent.html#a26708685cc8b94fe3d7092ee080dbb34">getNextNode</a>());</div>
<div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a> *ElseBlock = <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">llvm::BasicBlock::Create</a>(</div>
<div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;      <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, NamePrefix + <span class="stringliteral">&quot;.if.else&quot;</span>, Head-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>(), CanonicalLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a320de99bcedbb241fe54ed847482d27f">getExit</a>());</div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160; </div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;  <span class="comment">// Create if condition branch.</span></div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(HeadOldTerm);</div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *BrInstr =</div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCondBr(IfCond, ThenBlock, <span class="comment">/*ifFalse*/</span> ElseBlock);</div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;  InsertPointTy IP{BrInstr-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>(), ++BrInstr-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>()};</div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;  <span class="comment">// Then block contains branch to omp loop which needs to be vectorized</span></div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;  <a class="code" href="namespacellvm.html#a78e14f66d8a8405c6882b5ff6a3b7617">spliceBB</a>(IP, ThenBlock, <span class="keyword">false</span>);</div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;  ThenBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a089e003bb688e55b9a91ed4e7fed3678">replaceSuccessorsPhiUsesWith</a>(Head, ThenBlock);</div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160; </div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(ElseBlock);</div>
<div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160; </div>
<div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;  <span class="comment">// Clone loop for the else branch</span></div>
<div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 8&gt;</a> NewBlocks;</div>
<div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160; </div>
<div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;  VMap[CanonicalLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#ad50eb30e70ff2a9ea7f220547e2b6f6d">getPreheader</a>()] = ElseBlock;</div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Block : L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a5cc113cb783ab6e5ca7b69241431c19c">getBlocks</a>()) {</div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewBB = <a class="code" href="namespacellvm.html#a6befe133f42d6a8e07ba98372d7f9c60">CloneBasicBlock</a>(Block, VMap, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;    NewBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a41da369a9d31d911c8af724d5630f724">moveBefore</a>(CanonicalLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a320de99bcedbb241fe54ed847482d27f">getExit</a>());</div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;    VMap[<a class="code" href="namespacellvm_1_1pdb.html#a33e853ec74d48b1340d1d4bae772d30bae1e4c8c9ccd9fc39c391da4bcd093fb2">Block</a>] = NewBB;</div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;    NewBlocks.push_back(NewBB);</div>
<div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;  }</div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;  <a class="code" href="namespacellvm.html#ab8ec5c940fbc440c992716fbe4a48636">remapInstructionsInBlocks</a>(NewBlocks, VMap);</div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBr(NewBlocks.front());</div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;}</div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160; </div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;<span class="keywordtype">unsigned</span></div>
<div class="line"><a name="l03057"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#ac5b407054e7727d04053af9c3f1a5568"> 3057</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#ac5b407054e7727d04053af9c3f1a5568">OpenMPIRBuilder::getOpenMPDefaultSimdAlign</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Triple.html">Triple</a> &amp;TargetTriple,</div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;                                           <span class="keyword">const</span> <a class="code" href="classllvm_1_1StringMap.html">StringMap&lt;bool&gt;</a> &amp;Features) {</div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;  <span class="keywordflow">if</span> (TargetTriple.<a class="code" href="classllvm_1_1Triple.html#a31d94b95418472bb1179f7c130ad3667">isX86</a>()) {</div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;    <span class="keywordflow">if</span> (Features.<a class="code" href="classllvm_1_1StringMap.html#aa6528965c64b379c2cb311599babdd66">lookup</a>(<span class="stringliteral">&quot;avx512f&quot;</span>))</div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;      <span class="keywordflow">return</span> 512;</div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Features.<a class="code" href="classllvm_1_1StringMap.html#aa6528965c64b379c2cb311599babdd66">lookup</a>(<span class="stringliteral">&quot;avx&quot;</span>))</div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;      <span class="keywordflow">return</span> 256;</div>
<div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;    <span class="keywordflow">return</span> 128;</div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;  }</div>
<div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;  <span class="keywordflow">if</span> (TargetTriple.<a class="code" href="classllvm_1_1Triple.html#a0338eabc8ab4dff6368bdfae6ec94cbc">isPPC</a>())</div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;    <span class="keywordflow">return</span> 128;</div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;  <span class="keywordflow">if</span> (TargetTriple.<a class="code" href="classllvm_1_1Triple.html#acf7f07dbe7dd1f7edd291b75005280bb">isWasm</a>())</div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;    <span class="keywordflow">return</span> 128;</div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;}</div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160; </div>
<div class="line"><a name="l03073"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#acd1fbb2df257f945afda92919be322f3"> 3073</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#acd1fbb2df257f945afda92919be322f3">OpenMPIRBuilder::applySimd</a>(<a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *CanonicalLoop,</div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;                                <a class="code" href="classllvm_1_1MapVector.html">MapVector&lt;Value *, Value *&gt;</a> AlignedVars,</div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;                                <a class="code" href="classllvm_1_1Value.html">Value</a> *IfCond, OrderKind Order,</div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;                                <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *Simdlen, <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *Safelen) {</div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;Ctx = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getContext();</div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160; </div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = CanonicalLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a0e975380231c805957723804ad3ba008">getFunction</a>();</div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160; </div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;  <span class="comment">// TODO: We should not rely on pass manager. Currently we use pass manager</span></div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;  <span class="comment">// only for getting llvm::Loop which corresponds to given CanonicalLoopInfo</span></div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;  <span class="comment">// object. We should have a method  which returns all blocks between</span></div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;  <span class="comment">// CanonicalLoopInfo::getHeader() and CanonicalLoopInfo::getAfter()</span></div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;  <a class="code" href="classllvm_1_1AnalysisManager.html">FunctionAnalysisManager</a> <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>;</div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;  <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#a91ff894f756175a693c85bf73f79de9e">registerPass</a>([]() { <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1DominatorTreeAnalysis.html">DominatorTreeAnalysis</a>(); });</div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;  <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#a91ff894f756175a693c85bf73f79de9e">registerPass</a>([]() { <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LoopAnalysis.html">LoopAnalysis</a>(); });</div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;  <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#a91ff894f756175a693c85bf73f79de9e">registerPass</a>([]() { <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PassInstrumentationAnalysis.html">PassInstrumentationAnalysis</a>(); });</div>
<div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160; </div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;  <a class="code" href="classllvm_1_1LoopAnalysis.html">LoopAnalysis</a> LIA;</div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;  <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> &amp;&amp;LI = LIA.<a class="code" href="classllvm_1_1LoopAnalysis.html#aea38b668f2d98b7e9f64b8b3c2e524dc">run</a>(*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>);</div>
<div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160; </div>
<div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;  <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L = LI.<a class="code" href="classllvm_1_1LoopInfoBase.html#a7a7c8e0e4f836c13c015b62e18f386bd">getLoopFor</a>(CanonicalLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a5ddf1dc42b9030b248b6a6ec474512dd">getHeader</a>());</div>
<div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;  <span class="keywordflow">if</span> (AlignedVars.<a class="code" href="classllvm_1_1MapVector.html#acf4c09e1f30cdd4e0b5b1b8a236ead34">size</a>()) {</div>
<div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;    <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> IP = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP();</div>
<div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(CanonicalLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#ad50eb30e70ff2a9ea7f220547e2b6f6d">getPreheader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;AlignedItem : AlignedVars) {</div>
<div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *AlignedPtr = AlignedItem.first;</div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Alignment = AlignedItem.second;</div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlignmentAssumption(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getParent()-&gt;getDataLayout(),</div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;                                        AlignedPtr, Alignment);</div>
<div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;    }</div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(IP);</div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;  }</div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160; </div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;  <span class="keywordflow">if</span> (IfCond) {</div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;    <a class="code" href="classllvm_1_1ValueMap.html">ValueToValueMapTy</a> VMap;</div>
<div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;    createIfVersion(CanonicalLoop, IfCond, VMap, <span class="stringliteral">&quot;simd&quot;</span>);</div>
<div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;    <span class="comment">// Add metadata to the cloned loop which disables vectorization</span></div>
<div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *MappedLatch = VMap.<a class="code" href="classllvm_1_1ValueMap.html#a15f92579a5fc316dab8cd1fad51015ef">lookup</a>(CanonicalLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a8ffbd9b1e60e2bb15da132610ff997ac">getLatch</a>());</div>
<div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(MappedLatch &amp;&amp;</div>
<div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;           <span class="stringliteral">&quot;Cannot find value which corresponds to original loop latch&quot;</span>);</div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;BasicBlock&gt;(MappedLatch) &amp;&amp;</div>
<div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;           <span class="stringliteral">&quot;Cannot cast mapped latch block value to BasicBlock&quot;</span>);</div>
<div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewLatchBlock = dyn_cast&lt;BasicBlock&gt;(MappedLatch);</div>
<div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;    <a class="code" href="classllvm_1_1ConstantAsMetadata.html">ConstantAsMetadata</a> *BoolConst =</div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;        <a class="code" href="classllvm_1_1ConstantAsMetadata.html#a703ab6c3e14ff7565866468d731f537a">ConstantAsMetadata::get</a>(<a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(<a class="code" href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">Type::getInt1Ty</a>(Ctx)));</div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;    <a class="code" href="OMPIRBuilder_8cpp.html#ac36177cea684b1e36fdbc92d692f69d0">addBasicBlockMetadata</a>(</div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;        NewLatchBlock,</div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;        {<a class="code" href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">MDNode::get</a>(Ctx, {<a class="code" href="classllvm_1_1MDString.html#affbb7e2e9ad8d18114816f2443d672b9">MDString::get</a>(Ctx, <span class="stringliteral">&quot;llvm.loop.vectorize.enable&quot;</span>),</div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;                           BoolConst})});</div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;  }</div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160; </div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;  <a class="code" href="classllvm_1_1SmallSet.html">SmallSet&lt;BasicBlock *, 8&gt;</a> Reachable;</div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160; </div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;  <span class="comment">// Get the basic blocks from the loop in which memref instructions</span></div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;  <span class="comment">// can be found.</span></div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;  <span class="comment">// TODO: Generalize getting all blocks inside a CanonicalizeLoopInfo,</span></div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;  <span class="comment">// preferably without running any passes.</span></div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Block : L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a5cc113cb783ab6e5ca7b69241431c19c">getBlocks</a>()) {</div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;    <span class="keywordflow">if</span> (Block == CanonicalLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a71a16b42ce34255bd7a65902d15643fb">getCond</a>() ||</div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;        Block == CanonicalLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a5ddf1dc42b9030b248b6a6ec474512dd">getHeader</a>())</div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;    Reachable.<a class="code" href="classllvm_1_1SmallSet.html#a1679469af9bb8ccfbe98441fb8228c79">insert</a>(Block);</div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;  }</div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160; </div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Metadata *&gt;</a> LoopMDList;</div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160; </div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;  <span class="comment">// In presence of finite &#39;safelen&#39;, it may be unsafe to mark all</span></div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;  <span class="comment">// the memory instructions parallel, because loop-carried</span></div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;  <span class="comment">// dependences of &#39;safelen&#39; iterations are possible.</span></div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;  <span class="comment">// If clause order(concurrent) is specified then the memory instructions</span></div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;  <span class="comment">// are marked parallel even if &#39;safelen&#39; is finite.</span></div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;  <span class="keywordflow">if</span> ((Safelen == <span class="keyword">nullptr</span>) || (Order == OrderKind::OMP_ORDER_concurrent)) {</div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;    <span class="comment">// Add access group metadata to memory-access instructions.</span></div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;    <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *AccessGroup = <a class="code" href="classllvm_1_1MDNode.html#a21a975fd58c287a6ca3f1c89c048e7d3">MDNode::getDistinct</a>(Ctx, {});</div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : Reachable)</div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;      <a class="code" href="OMPIRBuilder_8cpp.html#a545cc7eb4f94d0957ba9960a69b10a90">addSimdMetadata</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, AccessGroup, LI);</div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;    <span class="comment">// TODO:  If the loop has existing parallel access metadata, have</span></div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;    <span class="comment">// to combine two lists.</span></div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;    LoopMDList.push_back(<a class="code" href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">MDNode::get</a>(</div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;        Ctx, {<a class="code" href="classllvm_1_1MDString.html#affbb7e2e9ad8d18114816f2443d672b9">MDString::get</a>(Ctx, <span class="stringliteral">&quot;llvm.loop.parallel_accesses&quot;</span>), AccessGroup}));</div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;  }</div>
<div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160; </div>
<div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;  <span class="comment">// Use the above access group metadata to create loop level</span></div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;  <span class="comment">// metadata, which should be distinct for each loop.</span></div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;  <a class="code" href="classllvm_1_1ConstantAsMetadata.html">ConstantAsMetadata</a> *BoolConst =</div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;      <a class="code" href="classllvm_1_1ConstantAsMetadata.html#a703ab6c3e14ff7565866468d731f537a">ConstantAsMetadata::get</a>(<a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(<a class="code" href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">Type::getInt1Ty</a>(Ctx)));</div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;  LoopMDList.push_back(<a class="code" href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">MDNode::get</a>(</div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;      Ctx, {<a class="code" href="classllvm_1_1MDString.html#affbb7e2e9ad8d18114816f2443d672b9">MDString::get</a>(Ctx, <span class="stringliteral">&quot;llvm.loop.vectorize.enable&quot;</span>), BoolConst}));</div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160; </div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;  <span class="keywordflow">if</span> (Simdlen || Safelen) {</div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;    <span class="comment">// If both simdlen and safelen clauses are specified, the value of the</span></div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;    <span class="comment">// simdlen parameter must be less than or equal to the value of the safelen</span></div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;    <span class="comment">// parameter. Therefore, use safelen only in the absence of simdlen.</span></div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;    <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *VectorizeWidth = Simdlen == <span class="keyword">nullptr</span> ? Safelen : Simdlen;</div>
<div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;    LoopMDList.push_back(</div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;        <a class="code" href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">MDNode::get</a>(Ctx, {<a class="code" href="classllvm_1_1MDString.html#affbb7e2e9ad8d18114816f2443d672b9">MDString::get</a>(Ctx, <span class="stringliteral">&quot;llvm.loop.vectorize.width&quot;</span>),</div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;                          <a class="code" href="classllvm_1_1ConstantAsMetadata.html#a703ab6c3e14ff7565866468d731f537a">ConstantAsMetadata::get</a>(VectorizeWidth)}));</div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;  }</div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160; </div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;  <a class="code" href="OMPIRBuilder_8cpp.html#adf813540e363817b85e9eecef51269b5">addLoopMetadata</a>(CanonicalLoop, LoopMDList);</div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;}</div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;<span class="comment">/// Create the TargetMachine object to query the backend for optimization</span></div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;<span class="comment">/// preferences.</span></div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;<span class="comment">/// Ideally, this would be passed from the front-end to the OpenMPBuilder, but</span></div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;<span class="comment">/// e.g. Clang does not pass it to its CodeGen layer and creates it only when</span></div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;<span class="comment">/// needed for the LLVM pass pipline. We use some default options to avoid</span></div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;<span class="comment">/// having to pass too many settings from the frontend that probably do not</span></div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;<span class="comment">/// matter.</span></div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;<span class="comment">/// Currently, TargetMachine is only used sometimes by the unrollLoopPartial</span></div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;<span class="comment">/// method. If we are going to use TargetMachine for more purposes, especially</span></div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;<span class="comment">/// those that are sensitive to TargetOptions, RelocModel and CodeModel, it</span></div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;<span class="comment">/// might become be worth requiring front-ends to pass on their TargetMachine,</span></div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;<span class="comment">/// or at least cache it between methods. Note that while fontends such as Clang</span></div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;<span class="comment">/// have just a single main TargetMachine per translation unit, &quot;target-cpu&quot; and</span></div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;<span class="comment">/// &quot;target-features&quot; that determine the TargetMachine are per-function and can</span></div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;<span class="comment">/// be overrided using __attribute__((target(&quot;OPTIONS&quot;))).</span></div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;<span class="comment"></span><span class="keyword">static</span> std::unique_ptr&lt;TargetMachine&gt;</div>
<div class="line"><a name="l03193"></a><span class="lineno"><a class="line" href="OMPIRBuilder_8cpp.html#a6580ef3a060cc6a247b1bfc5f8136a41"> 3193</a></span>&#160;<a class="code" href="OMPIRBuilder_8cpp.html#a6580ef3a060cc6a247b1bfc5f8136a41">createTargetMachine</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="namespacellvm_1_1CodeGenOpt.html#ad7e52174abb1cfb84238ad1ac475ee36">CodeGenOpt::Level</a> OptLevel) {</div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;  <a class="code" href="classllvm_1_1Module.html">Module</a> *<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getParent();</div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160; </div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> CPU = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getFnAttribute(<span class="stringliteral">&quot;target-cpu&quot;</span>).getValueAsString();</div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> Features = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getFnAttribute(<span class="stringliteral">&quot;target-features&quot;</span>).getValueAsString();</div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;  <span class="keyword">const</span> std::string &amp;<a class="code" href="classllvm_1_1Triple.html">Triple</a> = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getTargetTriple();</div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160; </div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;  std::string <a class="code" href="classllvm_1_1Error.html">Error</a>;</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Target.html">llvm::Target</a> *TheTarget = <a class="code" href="structllvm_1_1TargetRegistry.html#a5580434a3d20841cbcb73e9c8c80956b">TargetRegistry::lookupTarget</a>(<a class="code" href="classllvm_1_1Triple.html">Triple</a>, <a class="code" href="classllvm_1_1Error.html">Error</a>);</div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;  <span class="keywordflow">if</span> (!TheTarget)</div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;    <span class="keywordflow">return</span> {};</div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160; </div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;  <a class="code" href="classllvm_1_1TargetOptions.html">llvm::TargetOptions</a> <a class="code" href="PassBuilderBindings_8cpp.html#a47c521bf7ba0bb2147b96d068af30d04">Options</a>;</div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;  <span class="keywordflow">return</span> std::unique_ptr&lt;TargetMachine&gt;(TheTarget-&gt;<a class="code" href="classllvm_1_1Target.html#a4b2d4f53fc8d49464353f3c8d4062790">createTargetMachine</a>(</div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;      <a class="code" href="classllvm_1_1Triple.html">Triple</a>, CPU, Features, <a class="code" href="PassBuilderBindings_8cpp.html#a47c521bf7ba0bb2147b96d068af30d04">Options</a>, <span class="comment">/*RelocModel=*/</span>std::nullopt,</div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;      <span class="comment">/*CodeModel=*/</span>std::nullopt, OptLevel));</div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;}</div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;<span class="comment">/// Heuristically determine the best-performant unroll factor for \p CLI. This</span></div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;<span class="comment">/// depends on the target processor. We are re-using the same heuristics as the</span></div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;<span class="comment">/// LoopUnrollPass.</span></div>
<div class="line"><a name="l03214"></a><span class="lineno"><a class="line" href="OMPIRBuilder_8cpp.html#a946282957319b8c23ab9f169abb504c4"> 3214</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> int32_t <a class="code" href="OMPIRBuilder_8cpp.html#a946282957319b8c23ab9f169abb504c4">computeHeuristicUnrollFactor</a>(<a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *CLI) {</div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a0e975380231c805957723804ad3ba008">getFunction</a>();</div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160; </div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;  <span class="comment">// Assume the user requests the most aggressive unrolling, even if the rest of</span></div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;  <span class="comment">// the code is optimized using a lower setting.</span></div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;  <a class="code" href="namespacellvm_1_1CodeGenOpt.html#ad7e52174abb1cfb84238ad1ac475ee36">CodeGenOpt::Level</a> OptLevel = <a class="code" href="namespacellvm_1_1CodeGenOpt.html#ad7e52174abb1cfb84238ad1ac475ee36a71969d8670845bfa9d80ba2197dba678">CodeGenOpt::Aggressive</a>;</div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;  std::unique_ptr&lt;TargetMachine&gt; <a class="code" href="PassBuilderBindings_8cpp.html#ab76052bb166c65901edb603a3e1f03ab">TM</a> = <a class="code" href="OMPIRBuilder_8cpp.html#a6580ef3a060cc6a247b1bfc5f8136a41">createTargetMachine</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, OptLevel);</div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160; </div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;  <a class="code" href="classllvm_1_1AnalysisManager.html">FunctionAnalysisManager</a> <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>;</div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;  <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#a91ff894f756175a693c85bf73f79de9e">registerPass</a>([]() { <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1TargetLibraryAnalysis.html">TargetLibraryAnalysis</a>(); });</div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;  <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#a91ff894f756175a693c85bf73f79de9e">registerPass</a>([]() { <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AssumptionAnalysis.html">AssumptionAnalysis</a>(); });</div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;  <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#a91ff894f756175a693c85bf73f79de9e">registerPass</a>([]() { <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1DominatorTreeAnalysis.html">DominatorTreeAnalysis</a>(); });</div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;  <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#a91ff894f756175a693c85bf73f79de9e">registerPass</a>([]() { <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LoopAnalysis.html">LoopAnalysis</a>(); });</div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;  <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#a91ff894f756175a693c85bf73f79de9e">registerPass</a>([]() { <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ScalarEvolutionAnalysis.html">ScalarEvolutionAnalysis</a>(); });</div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;  <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#a91ff894f756175a693c85bf73f79de9e">registerPass</a>([]() { <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PassInstrumentationAnalysis.html">PassInstrumentationAnalysis</a>(); });</div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;  <a class="code" href="classllvm_1_1TargetIRAnalysis.html">TargetIRAnalysis</a> TIRA;</div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="PassBuilderBindings_8cpp.html#ab76052bb166c65901edb603a3e1f03ab">TM</a>)</div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;    TIRA = <a class="code" href="classllvm_1_1TargetIRAnalysis.html">TargetIRAnalysis</a>(</div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;        [&amp;](<span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) { <span class="keywordflow">return</span> <a class="code" href="PassBuilderBindings_8cpp.html#ab76052bb166c65901edb603a3e1f03ab">TM</a>-&gt;getTargetTransformInfo(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>); });</div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;  <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#a91ff894f756175a693c85bf73f79de9e">registerPass</a>([&amp;]() { <span class="keywordflow">return</span> TIRA; });</div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160; </div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;  <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetIRAnalysis::Result</a> &amp;&amp;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a> = TIRA.<a class="code" href="classllvm_1_1TargetIRAnalysis.html#a4c1acdb96111dcff6f3eb282adecf86b">run</a>(*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>);</div>
<div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;  <a class="code" href="classllvm_1_1ScalarEvolutionAnalysis.html">ScalarEvolutionAnalysis</a> SEA;</div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;  <a class="code" href="classllvm_1_1ScalarEvolution.html">ScalarEvolution</a> &amp;&amp;SE = SEA.<a class="code" href="classllvm_1_1ScalarEvolutionAnalysis.html#acbc87d909d53e5f43fde82950e15b59d">run</a>(*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>);</div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;  <a class="code" href="classllvm_1_1DominatorTreeAnalysis.html">DominatorTreeAnalysis</a> DTA;</div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;  <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;&amp;DT = DTA.<a class="code" href="classllvm_1_1DominatorTreeAnalysis.html#a4aa821b3dea8d981f76a77e5c099e3b5">run</a>(*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>);</div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;  <a class="code" href="classllvm_1_1LoopAnalysis.html">LoopAnalysis</a> LIA;</div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;  <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> &amp;&amp;LI = LIA.<a class="code" href="classllvm_1_1LoopAnalysis.html#aea38b668f2d98b7e9f64b8b3c2e524dc">run</a>(*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>);</div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;  <a class="code" href="classllvm_1_1AssumptionAnalysis.html">AssumptionAnalysis</a> ACT;</div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;  <a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> &amp;&amp;AC = ACT.<a class="code" href="classllvm_1_1AssumptionAnalysis.html#aeb8f2cc893c02d3d5a926b69bab89185">run</a>(*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>);</div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;  <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> ORE{<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>};</div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160; </div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;  <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L = LI.<a class="code" href="classllvm_1_1LoopInfoBase.html#a7a7c8e0e4f836c13c015b62e18f386bd">getLoopFor</a>(CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a5ddf1dc42b9030b248b6a6ec474512dd">getHeader</a>());</div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(L &amp;&amp; <span class="stringliteral">&quot;Expecting CanonicalLoopInfo to be recognized as a loop&quot;</span>);</div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160; </div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;  <a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html">TargetTransformInfo::UnrollingPreferences</a> UP =</div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;      <a class="code" href="namespacellvm.html#abd642fa74effc122158e6fb11da78600">gatherUnrollingPreferences</a>(L, SE, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>,</div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;                                 <span class="comment">/*BlockFrequencyInfo=*/</span><span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;                                 <span class="comment">/*ProfileSummaryInfo=*/</span><span class="keyword">nullptr</span>, ORE, OptLevel,</div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;                                 <span class="comment">/*UserThreshold=*/</span>std::nullopt,</div>
<div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;                                 <span class="comment">/*UserCount=*/</span>std::nullopt,</div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;                                 <span class="comment">/*UserAllowPartial=*/</span><span class="keyword">true</span>,</div>
<div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;                                 <span class="comment">/*UserAllowRuntime=*/</span><span class="keyword">true</span>,</div>
<div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;                                 <span class="comment">/*UserUpperBound=*/</span>std::nullopt,</div>
<div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;                                 <span class="comment">/*UserFullUnrollMaxCount=*/</span>std::nullopt);</div>
<div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160; </div>
<div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;  UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a4217ba2e3d1295f8e9e6b49cef2a8b76">Force</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160; </div>
<div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;  <span class="comment">// Account for additional optimizations taking place before the LoopUnrollPass</span></div>
<div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;  <span class="comment">// would unroll the loop.</span></div>
<div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;  UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a21e7febf468c370793f606da5cd0e6fe">Threshold</a> *= <a class="code" href="OMPIRBuilder_8cpp.html#ac697e5f78d67bbaccc98d1c82df6252c">UnrollThresholdFactor</a>;</div>
<div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;  UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ae28e05c1aac288aa7e4a49d858b35c46">PartialThreshold</a> *= <a class="code" href="OMPIRBuilder_8cpp.html#ac697e5f78d67bbaccc98d1c82df6252c">UnrollThresholdFactor</a>;</div>
<div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160; </div>
<div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;  <span class="comment">// Use normal unroll factors even if the rest of the code is optimized for</span></div>
<div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;  <span class="comment">// size.</span></div>
<div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;  UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#af9a7105299bd43b8b61c803f26e4a31b">OptSizeThreshold</a> = UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a21e7febf468c370793f606da5cd0e6fe">Threshold</a>;</div>
<div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;  UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a54b17420c467d2bb9edd2f79e54d2b6f">PartialOptSizeThreshold</a> = UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ae28e05c1aac288aa7e4a49d858b35c46">PartialThreshold</a>;</div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160; </div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Unroll heuristic thresholds:\n&quot;</span></div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;  Threshold=&quot;</span> &lt;&lt; UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a21e7febf468c370793f606da5cd0e6fe">Threshold</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;  PartialThreshold=&quot;</span> &lt;&lt; UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ae28e05c1aac288aa7e4a49d858b35c46">PartialThreshold</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;  OptSizeThreshold=&quot;</span> &lt;&lt; UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#af9a7105299bd43b8b61c803f26e4a31b">OptSizeThreshold</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;  PartialOptSizeThreshold=&quot;</span></div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;                    &lt;&lt; UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a54b17420c467d2bb9edd2f79e54d2b6f">PartialOptSizeThreshold</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160; </div>
<div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;  <span class="comment">// Disable peeling.</span></div>
<div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;  <a class="code" href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html">TargetTransformInfo::PeelingPreferences</a> PP =</div>
<div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;      <a class="code" href="namespacellvm.html#a6e86d0ac2e968adc60290ca52da02e42">gatherPeelingPreferences</a>(L, SE, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>,</div>
<div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;                               <span class="comment">/*UserAllowPeeling=*/</span><span class="keyword">false</span>,</div>
<div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;                               <span class="comment">/*UserAllowProfileBasedPeeling=*/</span><span class="keyword">false</span>,</div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;                               <span class="comment">/*UnrollingSpecficValues=*/</span><span class="keyword">false</span>);</div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160; </div>
<div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const Value *, 32&gt;</a> EphValues;</div>
<div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;  <a class="code" href="structllvm_1_1CodeMetrics.html#a7e174506b52ad46ea1f746a7f727d999">CodeMetrics::collectEphemeralValues</a>(L, &amp;AC, EphValues);</div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160; </div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;  <span class="comment">// Assume that reads and writes to stack variables can be eliminated by</span></div>
<div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;  <span class="comment">// Mem2Reg, SROA or LICM. That is, don&#39;t count them towards the loop body&#39;s</span></div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;  <span class="comment">// size.</span></div>
<div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a40f34cc77d2b3bc73384f535c8101858">blocks</a>()) {</div>
<div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>;</div>
<div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a> = dyn_cast&lt;LoadInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;        <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = <a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a>-&gt;getPointerOperand();</div>
<div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a> = dyn_cast&lt;StoreInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;        <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = <a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">Store</a>-&gt;getPointerOperand();</div>
<div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;      } <span class="keywordflow">else</span></div>
<div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160; </div>
<div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;      <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>-&gt;stripPointerCasts();</div>
<div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160; </div>
<div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Alloca = dyn_cast&lt;AllocaInst&gt;(<a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>)) {</div>
<div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;        <span class="keywordflow">if</span> (Alloca-&gt;getParent() == &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getEntryBlock())</div>
<div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;          EphValues.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;      }</div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;    }</div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;  }</div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160; </div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;  <span class="keywordtype">unsigned</span> NumInlineCandidates;</div>
<div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;  <span class="keywordtype">bool</span> NotDuplicatable;</div>
<div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a63a45e5b4f6037c05b07b9dc2c7ded46">Convergent</a>;</div>
<div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> LoopSizeIC =</div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;      <a class="code" href="namespacellvm.html#acb4e0bba417ccd05efb694c13e0ae2b0">ApproximateLoopSize</a>(L, NumInlineCandidates, NotDuplicatable, <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a63a45e5b4f6037c05b07b9dc2c7ded46">Convergent</a>,</div>
<div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;                          <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, EphValues, UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#acc2a7ecc1c0355035c91448ed850390f">BEInsns</a>);</div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Estimated loop size is &quot;</span> &lt;&lt; LoopSizeIC &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160; </div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;  <span class="comment">// Loop is not unrollable if the loop contains certain instructions.</span></div>
<div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;  <span class="keywordflow">if</span> (NotDuplicatable || <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a63a45e5b4f6037c05b07b9dc2c7ded46">Convergent</a> || !LoopSizeIC.<a class="code" href="classllvm_1_1InstructionCost.html#ae01c5ced9fe2fe50f421ae121483ef04">isValid</a>()) {</div>
<div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Loop not considered unrollable\n&quot;</span>);</div>
<div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;  }</div>
<div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;  <span class="keywordtype">unsigned</span> LoopSize = *LoopSizeIC.<a class="code" href="classllvm_1_1InstructionCost.html#aefaba3912f52186ea896035ea0f5b00c">getValue</a>();</div>
<div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160; </div>
<div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;  <span class="comment">// TODO: Determine trip count of \p CLI if constant, computeUnrollCount might</span></div>
<div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;  <span class="comment">// be able to use it.</span></div>
<div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;  <span class="keywordtype">int</span> TripCount = 0;</div>
<div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;  <span class="keywordtype">int</span> MaxTripCount = 0;</div>
<div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;  <span class="keywordtype">bool</span> MaxOrZero = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;  <span class="keywordtype">unsigned</span> TripMultiple = 0;</div>
<div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160; </div>
<div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;  <span class="keywordtype">bool</span> UseUpperBound = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;  <a class="code" href="namespacellvm.html#aaf3f6dd34ce3968d323a20d3a22e4545">computeUnrollCount</a>(L, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, DT, &amp;LI, &amp;AC, SE, EphValues, &amp;ORE, TripCount,</div>
<div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;                     MaxTripCount, MaxOrZero, TripMultiple, LoopSize, UP, PP,</div>
<div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;                     UseUpperBound);</div>
<div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;  <span class="keywordtype">unsigned</span> Factor = UP.<a class="code" href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">Count</a>;</div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Suggesting unroll factor of &quot;</span> &lt;&lt; Factor &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160; </div>
<div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;  <span class="comment">// This function returns 1 to signal to not unroll a loop.</span></div>
<div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;  <span class="keywordflow">if</span> (Factor == 0)</div>
<div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;  <span class="keywordflow">return</span> Factor;</div>
<div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;}</div>
<div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160; </div>
<div class="line"><a name="l03346"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a5e2b7ac5f48193117a340aa15b085719"> 3346</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a5e2b7ac5f48193117a340aa15b085719">OpenMPIRBuilder::unrollLoopPartial</a>(<a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *<a class="code" href="classllvm_1_1Loop.html">Loop</a>,</div>
<div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;                                        int32_t Factor,</div>
<div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;                                        <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> **UnrolledCLI) {</div>
<div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Factor &gt;= 0 &amp;&amp; <span class="stringliteral">&quot;Unroll factor must not be negative&quot;</span>);</div>
<div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160; </div>
<div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="classllvm_1_1Loop.html">Loop</a>-&gt;getFunction();</div>
<div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;Ctx = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getContext();</div>
<div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160; </div>
<div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;  <span class="comment">// If the unrolled loop is not used for another loop-associated directive, it</span></div>
<div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;  <span class="comment">// is sufficient to add metadata for the LoopUnrollPass.</span></div>
<div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;  <span class="keywordflow">if</span> (!UnrolledCLI) {</div>
<div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Metadata *, 2&gt;</a> LoopMetadata;</div>
<div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;    LoopMetadata.push_back(</div>
<div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;        <a class="code" href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">MDNode::get</a>(Ctx, <a class="code" href="classllvm_1_1MDString.html#affbb7e2e9ad8d18114816f2443d672b9">MDString::get</a>(Ctx, <span class="stringliteral">&quot;llvm.loop.unroll.enable&quot;</span>)));</div>
<div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160; </div>
<div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;    <span class="keywordflow">if</span> (Factor &gt;= 1) {</div>
<div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;      <a class="code" href="classllvm_1_1ConstantAsMetadata.html">ConstantAsMetadata</a> *FactorConst = <a class="code" href="classllvm_1_1ConstantAsMetadata.html#a703ab6c3e14ff7565866468d731f537a">ConstantAsMetadata::get</a>(</div>
<div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;          <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(Ctx), <a class="code" href="classllvm_1_1APInt.html">APInt</a>(32, Factor)));</div>
<div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;      LoopMetadata.push_back(<a class="code" href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">MDNode::get</a>(</div>
<div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;          Ctx, {<a class="code" href="classllvm_1_1MDString.html#affbb7e2e9ad8d18114816f2443d672b9">MDString::get</a>(Ctx, <span class="stringliteral">&quot;llvm.loop.unroll.count&quot;</span>), FactorConst}));</div>
<div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;    }</div>
<div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160; </div>
<div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;    <a class="code" href="OMPIRBuilder_8cpp.html#adf813540e363817b85e9eecef51269b5">addLoopMetadata</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a>, LoopMetadata);</div>
<div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;  }</div>
<div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160; </div>
<div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;  <span class="comment">// Heuristically determine the unroll factor.</span></div>
<div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;  <span class="keywordflow">if</span> (Factor == 0)</div>
<div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;    Factor = <a class="code" href="OMPIRBuilder_8cpp.html#a946282957319b8c23ab9f169abb504c4">computeHeuristicUnrollFactor</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a>);</div>
<div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160; </div>
<div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;  <span class="comment">// No change required with unroll factor 1.</span></div>
<div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;  <span class="keywordflow">if</span> (Factor == 1) {</div>
<div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;    *UnrolledCLI = <a class="code" href="classllvm_1_1Loop.html">Loop</a>;</div>
<div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;  }</div>
<div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160; </div>
<div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Factor &gt;= 2 &amp;&amp;</div>
<div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;         <span class="stringliteral">&quot;unrolling only makes sense with a factor of 2 or larger&quot;</span>);</div>
<div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160; </div>
<div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *IndVarTy = <a class="code" href="classllvm_1_1Loop.html">Loop</a>-&gt;getIndVarType();</div>
<div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160; </div>
<div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;  <span class="comment">// Apply partial unrolling by tiling the loop by the unroll-factor, then fully</span></div>
<div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;  <span class="comment">// unroll the inner loop.</span></div>
<div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *FactorVal =</div>
<div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;      <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(IndVarTy, <a class="code" href="classllvm_1_1APInt.html">APInt</a>(IndVarTy-&gt;<a class="code" href="classllvm_1_1Type.html#a13e877ef779ba7a0688081079f4f9b03">getIntegerBitWidth</a>(), Factor,</div>
<div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;                                       <span class="comment">/*isSigned=*/</span><span class="keyword">false</span>));</div>
<div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;  std::vector&lt;CanonicalLoopInfo *&gt; <a class="code" href="classllvm_1_1LoopNest.html">LoopNest</a> =</div>
<div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;      tileLoops(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, {<a class="code" href="classllvm_1_1Loop.html">Loop</a>}, {FactorVal});</div>
<div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1LoopNest.html">LoopNest</a>.size() == 2 &amp;&amp; <span class="stringliteral">&quot;Expect 2 loops after tiling&quot;</span>);</div>
<div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;  *UnrolledCLI = <a class="code" href="classllvm_1_1LoopNest.html">LoopNest</a>[0];</div>
<div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;  <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *InnerLoop = <a class="code" href="classllvm_1_1LoopNest.html">LoopNest</a>[1];</div>
<div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160; </div>
<div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;  <span class="comment">// LoopUnrollPass can only fully unroll loops with constant trip count.</span></div>
<div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;  <span class="comment">// Unroll by the unroll factor with a fallback epilog for the remainder</span></div>
<div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;  <span class="comment">// iterations if necessary.</span></div>
<div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;  <a class="code" href="classllvm_1_1ConstantAsMetadata.html">ConstantAsMetadata</a> *FactorConst = <a class="code" href="classllvm_1_1ConstantAsMetadata.html#a703ab6c3e14ff7565866468d731f537a">ConstantAsMetadata::get</a>(</div>
<div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;      <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(Ctx), <a class="code" href="classllvm_1_1APInt.html">APInt</a>(32, Factor)));</div>
<div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;  <a class="code" href="OMPIRBuilder_8cpp.html#adf813540e363817b85e9eecef51269b5">addLoopMetadata</a>(</div>
<div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;      InnerLoop,</div>
<div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;      {<a class="code" href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">MDNode::get</a>(Ctx, <a class="code" href="classllvm_1_1MDString.html#affbb7e2e9ad8d18114816f2443d672b9">MDString::get</a>(Ctx, <span class="stringliteral">&quot;llvm.loop.unroll.enable&quot;</span>)),</div>
<div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;       <a class="code" href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">MDNode::get</a>(</div>
<div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;           Ctx, {<a class="code" href="classllvm_1_1MDString.html#affbb7e2e9ad8d18114816f2443d672b9">MDString::get</a>(Ctx, <span class="stringliteral">&quot;llvm.loop.unroll.count&quot;</span>), FactorConst})});</div>
<div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160; </div>
<div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;  (*UnrolledCLI)-&gt;assertOK();</div>
<div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;}</div>
<div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160; </div>
<div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a></div>
<div class="line"><a name="l03415"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#af2808c704c935cee35e9529907b59b1c"> 3415</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#af2808c704c935cee35e9529907b59b1c">OpenMPIRBuilder::createCopyPrivate</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc,</div>
<div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;                                   <a class="code" href="classllvm_1_1Value.html">llvm::Value</a> *BufSize, <a class="code" href="classllvm_1_1Value.html">llvm::Value</a> *CpyBuf,</div>
<div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;                                   <a class="code" href="classllvm_1_1Value.html">llvm::Value</a> *CpyFn, <a class="code" href="classllvm_1_1Value.html">llvm::Value</a> *DidIt) {</div>
<div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;    <span class="keywordflow">return</span> Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>;</div>
<div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160; </div>
<div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;  <a class="code" href="classuint32__t.html">uint32_t</a> SrcLocStrSize;</div>
<div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc, SrcLocStrSize);</div>
<div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Ident = getOrCreateIdent(SrcLocStr, SrcLocStrSize);</div>
<div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ThreadId = getOrCreateThreadID(Ident);</div>
<div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160; </div>
<div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;  <a class="code" href="classllvm_1_1Value.html">llvm::Value</a> *DidItLD = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt32Ty(), DidIt);</div>
<div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160; </div>
<div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[] = {Ident, ThreadId, BufSize, CpyBuf, CpyFn, DidItLD};</div>
<div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160; </div>
<div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *Fn = getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_copyprivate);</div>
<div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(Fn, <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160; </div>
<div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP();</div>
<div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;}</div>
<div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160; </div>
<div class="line"><a name="l03436"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a799568a5d617a4ca72b51a6fe60f1ecc"> 3436</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a799568a5d617a4ca72b51a6fe60f1ecc">OpenMPIRBuilder::createSingle</a>(</div>
<div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc, <a class="code" href="classllvm_1_1function__ref.html">BodyGenCallbackTy</a> BodyGenCB,</div>
<div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;    <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a03b6c43472b3040013de9cbc25376925">FinalizeCallbackTy</a> FiniCB, <span class="keywordtype">bool</span> IsNowait, <a class="code" href="classllvm_1_1Value.html">llvm::Value</a> *DidIt) {</div>
<div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160; </div>
<div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;    <span class="keywordflow">return</span> Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>;</div>
<div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160; </div>
<div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;  <span class="comment">// If needed (i.e. not null), initialize `DidIt` with 0</span></div>
<div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;  <span class="keywordflow">if</span> (DidIt) {</div>
<div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt32(0), DidIt);</div>
<div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;  }</div>
<div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160; </div>
<div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;  <a class="code" href="classllvm_1_1Directive.html">Directive</a> OMPD = Directive::OMPD_single;</div>
<div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;  <a class="code" href="classuint32__t.html">uint32_t</a> SrcLocStrSize;</div>
<div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc, SrcLocStrSize);</div>
<div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Ident = getOrCreateIdent(SrcLocStr, SrcLocStrSize);</div>
<div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ThreadId = getOrCreateThreadID(Ident);</div>
<div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[] = {Ident, ThreadId};</div>
<div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160; </div>
<div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *EntryRTLFn = getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_single);</div>
<div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *EntryCall = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(EntryRTLFn, <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160; </div>
<div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *ExitRTLFn = getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_end_single);</div>
<div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *ExitCall = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(ExitRTLFn, <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160; </div>
<div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;  <span class="comment">// generates the following:</span></div>
<div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;  <span class="comment">// if (__kmpc_single()) {</span></div>
<div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;  <span class="comment">//    .... single region ...</span></div>
<div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;  <span class="comment">//    __kmpc_end_single</span></div>
<div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;  <span class="comment">// }</span></div>
<div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;  <span class="comment">// __kmpc_barrier</span></div>
<div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160; </div>
<div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;  EmitOMPInlinedRegion(OMPD, EntryCall, ExitCall, BodyGenCB, FiniCB,</div>
<div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;                       <span class="comment">/*Conditional*/</span> <span class="keyword">true</span>,</div>
<div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;                       <span class="comment">/*hasFinalize*/</span> <span class="keyword">true</span>);</div>
<div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;  <span class="keywordflow">if</span> (!IsNowait)</div>
<div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;    createBarrier(<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP(), Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#ac6a58d4f9cf1978ee50af30bdb248d73">DL</a>),</div>
<div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;                  omp::Directive::OMPD_unknown, <span class="comment">/* ForceSimpleCall */</span> <span class="keyword">false</span>,</div>
<div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;                  <span class="comment">/* CheckCancelFlag */</span> <span class="keyword">false</span>);</div>
<div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP();</div>
<div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;}</div>
<div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160; </div>
<div class="line"><a name="l03478"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a10deef7fafe3eff4c9c1755ffda0e4cb"> 3478</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a10deef7fafe3eff4c9c1755ffda0e4cb">OpenMPIRBuilder::createCritical</a>(</div>
<div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc, <a class="code" href="classllvm_1_1function__ref.html">BodyGenCallbackTy</a> BodyGenCB,</div>
<div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;    <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a03b6c43472b3040013de9cbc25376925">FinalizeCallbackTy</a> FiniCB, <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> CriticalName, <a class="code" href="classllvm_1_1Value.html">Value</a> *HintInst) {</div>
<div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160; </div>
<div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;    <span class="keywordflow">return</span> Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>;</div>
<div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160; </div>
<div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;  <a class="code" href="classllvm_1_1Directive.html">Directive</a> OMPD = Directive::OMPD_critical;</div>
<div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;  <a class="code" href="classuint32__t.html">uint32_t</a> SrcLocStrSize;</div>
<div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc, SrcLocStrSize);</div>
<div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Ident = getOrCreateIdent(SrcLocStr, SrcLocStrSize);</div>
<div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ThreadId = getOrCreateThreadID(Ident);</div>
<div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *LockVar = getOMPCriticalRegionLock(CriticalName);</div>
<div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[] = {Ident, ThreadId, LockVar};</div>
<div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160; </div>
<div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;llvm::Value *, 4&gt;</a> EnterArgs(<a class="code" href="namespacellvm_1_1sys_1_1path.html#a00a76a729b319dc47beffbe07325565f">std::begin</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>), <a class="code" href="namespacellvm_1_1sys_1_1path.html#a214ec2f04ffd92636ed4bd2717607a1d">std::end</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>));</div>
<div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *RTFn = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;  <span class="keywordflow">if</span> (HintInst) {</div>
<div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;    <span class="comment">// Add Hint to entry Args and create call</span></div>
<div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;    EnterArgs.push_back(HintInst);</div>
<div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;    RTFn = getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_critical_with_hint);</div>
<div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;    RTFn = getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_critical);</div>
<div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;  }</div>
<div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *EntryCall = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(RTFn, EnterArgs);</div>
<div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160; </div>
<div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *ExitRTLFn =</div>
<div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;      getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_end_critical);</div>
<div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *ExitCall = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(ExitRTLFn, <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160; </div>
<div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;  <span class="keywordflow">return</span> EmitOMPInlinedRegion(OMPD, EntryCall, ExitCall, BodyGenCB, FiniCB,</div>
<div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;                              <span class="comment">/*Conditional*/</span> <span class="keyword">false</span>, <span class="comment">/*hasFinalize*/</span> <span class="keyword">true</span>);</div>
<div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;}</div>
<div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160; </div>
<div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a></div>
<div class="line"><a name="l03513"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a6e2bd6420d3d12339e32d4d1b3ba1394"> 3513</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a6e2bd6420d3d12339e32d4d1b3ba1394">OpenMPIRBuilder::createOrderedDepend</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc,</div>
<div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;                                     <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> AllocaIP, <span class="keywordtype">unsigned</span> NumLoops,</div>
<div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;                                     <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;llvm::Value *&gt;</a> StoreValues,</div>
<div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;                                     <span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;Name, <span class="keywordtype">bool</span> IsDependSource) {</div>
<div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(</div>
<div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;      <a class="code" href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">llvm::all_of</a>(StoreValues,</div>
<div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;                   [](<a class="code" href="classllvm_1_1Value.html">Value</a> *SV) { <span class="keywordflow">return</span> SV-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;isIntegerTy(64); }) &amp;&amp;</div>
<div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;      <span class="stringliteral">&quot;OpenMP runtime requires depend vec with i64 type&quot;</span>);</div>
<div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160; </div>
<div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;    <span class="keywordflow">return</span> Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>;</div>
<div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160; </div>
<div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;  <span class="comment">// Allocate space for vector and generate alloc instruction.</span></div>
<div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;  <span class="keyword">auto</span> *ArrI64Ty = <a class="code" href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">ArrayType::get</a>(Int64, NumLoops);</div>
<div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(AllocaIP);</div>
<div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;  <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *ArgsBase = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(ArrI64Ty, <span class="keyword">nullptr</span>, Name);</div>
<div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;  ArgsBase-&gt;<a class="code" href="classllvm_1_1AllocaInst.html#af3bb24b322533dbe8a63c84b18568fe1">setAlignment</a>(<a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(8));</div>
<div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>);</div>
<div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160; </div>
<div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;  <span class="comment">// Store the index value with offset in depend vector.</span></div>
<div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; NumLoops; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *DependAddrGEPIter = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateInBoundsGEP(</div>
<div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;        ArrI64Ty, ArgsBase, {<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt64(0), <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt64(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)});</div>
<div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;    <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *STInst = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(StoreValues[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>], DependAddrGEPIter);</div>
<div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;    STInst-&gt;<a class="code" href="classllvm_1_1StoreInst.html#a55195fa18cf783fe74de0cced1ca6eb3">setAlignment</a>(<a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(8));</div>
<div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;  }</div>
<div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160; </div>
<div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *DependBaseAddrGEP = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateInBoundsGEP(</div>
<div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;      ArrI64Ty, ArgsBase, {<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt64(0), <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt64(0)});</div>
<div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160; </div>
<div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;  <a class="code" href="classuint32__t.html">uint32_t</a> SrcLocStrSize;</div>
<div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc, SrcLocStrSize);</div>
<div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Ident = getOrCreateIdent(SrcLocStr, SrcLocStrSize);</div>
<div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ThreadId = getOrCreateThreadID(Ident);</div>
<div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[] = {Ident, ThreadId, DependBaseAddrGEP};</div>
<div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160; </div>
<div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *RTLFn = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;  <span class="keywordflow">if</span> (IsDependSource)</div>
<div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;    RTLFn = getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_doacross_post);</div>
<div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;    RTLFn = getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_doacross_wait);</div>
<div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(RTLFn, <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160; </div>
<div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP();</div>
<div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;}</div>
<div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160; </div>
<div class="line"><a name="l03559"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a3d885a4fcd5c580b0e3aeb37306146a5"> 3559</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a3d885a4fcd5c580b0e3aeb37306146a5">OpenMPIRBuilder::createOrderedThreadsSimd</a>(</div>
<div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc, <a class="code" href="classllvm_1_1function__ref.html">BodyGenCallbackTy</a> BodyGenCB,</div>
<div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;    <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a03b6c43472b3040013de9cbc25376925">FinalizeCallbackTy</a> FiniCB, <span class="keywordtype">bool</span> IsThreads) {</div>
<div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;    <span class="keywordflow">return</span> Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>;</div>
<div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160; </div>
<div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;  <a class="code" href="classllvm_1_1Directive.html">Directive</a> OMPD = Directive::OMPD_ordered;</div>
<div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *EntryCall = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *ExitCall = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160; </div>
<div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;  <span class="keywordflow">if</span> (IsThreads) {</div>
<div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;    <a class="code" href="classuint32__t.html">uint32_t</a> SrcLocStrSize;</div>
<div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc, SrcLocStrSize);</div>
<div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Ident = getOrCreateIdent(SrcLocStr, SrcLocStrSize);</div>
<div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *ThreadId = getOrCreateThreadID(Ident);</div>
<div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[] = {Ident, ThreadId};</div>
<div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160; </div>
<div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *EntryRTLFn = getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_ordered);</div>
<div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;    EntryCall = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(EntryRTLFn, <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160; </div>
<div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *ExitRTLFn =</div>
<div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;        getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_end_ordered);</div>
<div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;    ExitCall = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(ExitRTLFn, <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;  }</div>
<div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160; </div>
<div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;  <span class="keywordflow">return</span> EmitOMPInlinedRegion(OMPD, EntryCall, ExitCall, BodyGenCB, FiniCB,</div>
<div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;                              <span class="comment">/*Conditional*/</span> <span class="keyword">false</span>, <span class="comment">/*hasFinalize*/</span> <span class="keyword">true</span>);</div>
<div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;}</div>
<div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160; </div>
<div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a> OpenMPIRBuilder::EmitOMPInlinedRegion(</div>
<div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;    <a class="code" href="classllvm_1_1Directive.html">Directive</a> OMPD, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *EntryCall, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *ExitCall,</div>
<div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;    BodyGenCallbackTy BodyGenCB, FinalizeCallbackTy FiniCB, <span class="keywordtype">bool</span> Conditional,</div>
<div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;    <span class="keywordtype">bool</span> HasFinalize, <span class="keywordtype">bool</span> IsCancellable) {</div>
<div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160; </div>
<div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;  <span class="keywordflow">if</span> (HasFinalize)</div>
<div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;    FinalizationStack.push_back({FiniCB, OMPD, IsCancellable});</div>
<div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160; </div>
<div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;  <span class="comment">// Create inlined region&#39;s entry and body blocks, in preparation</span></div>
<div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;  <span class="comment">// for conditional creation</span></div>
<div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *EntryBB = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.GetInsertBlock();</div>
<div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *SplitPos = EntryBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>();</div>
<div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;  <span class="keywordflow">if</span> (!isa_and_nonnull&lt;BranchInst&gt;(SplitPos))</div>
<div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;    SplitPos = <span class="keyword">new</span> <a class="code" href="classllvm_1_1UnreachableInst.html">UnreachableInst</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getContext(), EntryBB);</div>
<div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitBB = EntryBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a52c990590792c91dd20b6d45acebe359">splitBasicBlock</a>(SplitPos, <span class="stringliteral">&quot;omp_region.end&quot;</span>);</div>
<div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *FiniBB =</div>
<div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;      EntryBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a52c990590792c91dd20b6d45acebe359">splitBasicBlock</a>(EntryBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>(), <span class="stringliteral">&quot;omp_region.finalize&quot;</span>);</div>
<div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160; </div>
<div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(EntryBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>());</div>
<div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;  emitCommonDirectiveEntry(OMPD, EntryCall, ExitBB, Conditional);</div>
<div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160; </div>
<div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;  <span class="comment">// generate body</span></div>
<div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;  BodyGenCB(<span class="comment">/* AllocaIP */</span> InsertPointTy(),</div>
<div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;            <span class="comment">/* CodeGenIP */</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP());</div>
<div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160; </div>
<div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;  <span class="comment">// emit exit call and do any needed finalization.</span></div>
<div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;  <span class="keyword">auto</span> FinIP = InsertPointTy(FiniBB, FiniBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a161fd4e9fa5367f64c2a4c9e921c3ad3">getFirstInsertionPt</a>());</div>
<div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(FiniBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#a3287172f2d13af086e6d66364e8c6de3">getNumSuccessors</a>() == 1 &amp;&amp;</div>
<div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;         FiniBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6e5d2e18c81baaeec7dadc81a0dea993">getSuccessor</a>(0) == ExitBB &amp;&amp;</div>
<div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;         <span class="stringliteral">&quot;Unexpected control flow graph state!!&quot;</span>);</div>
<div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;  emitCommonDirectiveExit(OMPD, FinIP, ExitCall, HasFinalize);</div>
<div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(FiniBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a74aa9daea070e2ad3394a3ec58b7316a">getUniquePredecessor</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a57f1945911ca1e95d0f51d7c3516b529">getUniqueSuccessor</a>() == FiniBB &amp;&amp;</div>
<div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;         <span class="stringliteral">&quot;Unexpected Control Flow State!&quot;</span>);</div>
<div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;  <a class="code" href="namespacellvm.html#aa76a2cf19b821f320ab439d5659ef4b9">MergeBlockIntoPredecessor</a>(FiniBB);</div>
<div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160; </div>
<div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;  <span class="comment">// If we are skipping the region of a non conditional, remove the exit</span></div>
<div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;  <span class="comment">// block, and clear the builder&#39;s insertion point.</span></div>
<div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SplitPos-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>() == ExitBB &amp;&amp;</div>
<div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;         <span class="stringliteral">&quot;Unexpected Insertion point location!&quot;</span>);</div>
<div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;  <span class="keyword">auto</span> merged = <a class="code" href="namespacellvm.html#aa76a2cf19b821f320ab439d5659ef4b9">MergeBlockIntoPredecessor</a>(ExitBB);</div>
<div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitPredBB = SplitPos-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>();</div>
<div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;  <span class="keyword">auto</span> InsertBB = merged ? ExitPredBB : ExitBB;</div>
<div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;  <span class="keywordflow">if</span> (!isa_and_nonnull&lt;BranchInst&gt;(SplitPos))</div>
<div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;    SplitPos-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(InsertBB);</div>
<div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160; </div>
<div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP();</div>
<div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;}</div>
<div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160; </div>
<div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a> OpenMPIRBuilder::emitCommonDirectiveEntry(</div>
<div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;    <a class="code" href="classllvm_1_1Directive.html">Directive</a> OMPD, <a class="code" href="classllvm_1_1Value.html">Value</a> *EntryCall, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitBB, <span class="keywordtype">bool</span> Conditional) {</div>
<div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;  <span class="comment">// if nothing to do, Return current insertion point.</span></div>
<div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;  <span class="keywordflow">if</span> (!Conditional || !EntryCall)</div>
<div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP();</div>
<div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160; </div>
<div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *EntryBB = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.GetInsertBlock();</div>
<div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CallBool = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIsNotNull(EntryCall);</div>
<div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;  <span class="keyword">auto</span> *ThenBB = <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(), <span class="stringliteral">&quot;omp_region.body&quot;</span>);</div>
<div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;  <span class="keyword">auto</span> *UI = <span class="keyword">new</span> <a class="code" href="classllvm_1_1UnreachableInst.html">UnreachableInst</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getContext(), ThenBB);</div>
<div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160; </div>
<div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;  <span class="comment">// Emit thenBB and set the Builder&#39;s insertion point there for</span></div>
<div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;  <span class="comment">// body generation next. Place the block after the current block.</span></div>
<div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *CurFn = EntryBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>();</div>
<div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;  CurFn-&gt;<a class="code" href="classllvm_1_1Function.html#aaab8110aafc070c83bc701b13d2260df">insert</a>(std::next(EntryBB-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>()), ThenBB);</div>
<div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160; </div>
<div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;  <span class="comment">// Move Entry branch to end of ThenBB, and replace with conditional</span></div>
<div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;  <span class="comment">// branch (If-stmt)</span></div>
<div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *EntryBBTI = EntryBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>();</div>
<div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCondBr(CallBool, ThenBB, ExitBB);</div>
<div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;  EntryBBTI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a0fd53f63d349dc8a7c5fc0cdd7a94c8d">removeFromParent</a>();</div>
<div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(UI);</div>
<div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.Insert(EntryBBTI);</div>
<div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;  UI-&gt;eraseFromParent();</div>
<div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(ThenBB-&gt;getTerminator());</div>
<div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160; </div>
<div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;  <span class="comment">// return an insertion point to ExitBB.</span></div>
<div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::InsertPoint</a>(ExitBB, ExitBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a161fd4e9fa5367f64c2a4c9e921c3ad3">getFirstInsertionPt</a>());</div>
<div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;}</div>
<div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160; </div>
<div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a> OpenMPIRBuilder::emitCommonDirectiveExit(</div>
<div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;    omp::Directive OMPD, InsertPointTy FinIP, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *ExitCall,</div>
<div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;    <span class="keywordtype">bool</span> HasFinalize) {</div>
<div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160; </div>
<div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(FinIP);</div>
<div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160; </div>
<div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;  <span class="comment">// If there is finalization to do, emit it before the exit call</span></div>
<div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;  <span class="keywordflow">if</span> (HasFinalize) {</div>
<div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!FinalizationStack.empty() &amp;&amp;</div>
<div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;           <span class="stringliteral">&quot;Unexpected finalization stack state!&quot;</span>);</div>
<div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160; </div>
<div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;    FinalizationInfo Fi = FinalizationStack.pop_back_val();</div>
<div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Fi.DK == OMPD &amp;&amp; <span class="stringliteral">&quot;Unexpected Directive for Finalization call!&quot;</span>);</div>
<div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160; </div>
<div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;    Fi.FiniCB(FinIP);</div>
<div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160; </div>
<div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *FiniBB = FinIP.getBlock();</div>
<div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *FiniBBTI = FiniBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>();</div>
<div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160; </div>
<div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;    <span class="comment">// set Builder IP for call creation</span></div>
<div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(FiniBBTI);</div>
<div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;  }</div>
<div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160; </div>
<div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;  <span class="keywordflow">if</span> (!ExitCall)</div>
<div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP();</div>
<div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160; </div>
<div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;  <span class="comment">// place the Exitcall as last instruction before Finalization block terminator</span></div>
<div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;  ExitCall-&gt;<a class="code" href="classllvm_1_1Instruction.html#a0fd53f63d349dc8a7c5fc0cdd7a94c8d">removeFromParent</a>();</div>
<div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.Insert(ExitCall);</div>
<div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160; </div>
<div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::InsertPoint</a>(ExitCall-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>(),</div>
<div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;                                  ExitCall-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>());</div>
<div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;}</div>
<div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160; </div>
<div class="line"><a name="l03701"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a70356a38271d388e7c4b477cef0d7b2c"> 3701</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a70356a38271d388e7c4b477cef0d7b2c">OpenMPIRBuilder::createCopyinClauseBlocks</a>(</div>
<div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;    <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> IP, <a class="code" href="classllvm_1_1Value.html">Value</a> *MasterAddr, <a class="code" href="classllvm_1_1Value.html">Value</a> *PrivateAddr,</div>
<div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;    <a class="code" href="classllvm_1_1IntegerType.html">llvm::IntegerType</a> *IntPtrTy, <span class="keywordtype">bool</span> BranchtoEnd) {</div>
<div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;  <span class="keywordflow">if</span> (!IP.isSet())</div>
<div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;    <span class="keywordflow">return</span> IP;</div>
<div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160; </div>
<div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::InsertPointGuard</a> IPG(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160; </div>
<div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;  <span class="comment">// creates the following CFG structure</span></div>
<div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;  <span class="comment">//     OMP_Entry : (MasterAddr != PrivateAddr)?</span></div>
<div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;  <span class="comment">//       F     T</span></div>
<div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;  <span class="comment">//       |      \</span></div>
<div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;<span class="comment">  //       |     copin.not.master</span></div>
<div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;  <span class="comment">//       |      /</span></div>
<div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;  <span class="comment">//       v     /</span></div>
<div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;  <span class="comment">//   copyin.not.master.end</span></div>
<div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;  <span class="comment">//         |</span></div>
<div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;  <span class="comment">//         v</span></div>
<div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;  <span class="comment">//   OMP.Entry.Next</span></div>
<div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160; </div>
<div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OMP_Entry = IP.getBlock();</div>
<div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *CurFn = OMP_Entry-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>();</div>
<div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *CopyBegin =</div>
<div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(), <span class="stringliteral">&quot;copyin.not.master&quot;</span>, CurFn);</div>
<div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *CopyEnd = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160; </div>
<div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;  <span class="comment">// If entry block is terminated, split to preserve the branch to following</span></div>
<div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;  <span class="comment">// basic block (i.e. OMP.Entry.Next), otherwise, leave everything as is.</span></div>
<div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;  <span class="keywordflow">if</span> (isa_and_nonnull&lt;BranchInst&gt;(OMP_Entry-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>())) {</div>
<div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;    CopyEnd = OMP_Entry-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a52c990590792c91dd20b6d45acebe359">splitBasicBlock</a>(OMP_Entry-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>(),</div>
<div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;                                         <span class="stringliteral">&quot;copyin.not.master.end&quot;</span>);</div>
<div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;    OMP_Entry-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;    CopyEnd =</div>
<div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;        <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(), <span class="stringliteral">&quot;copyin.not.master.end&quot;</span>, CurFn);</div>
<div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;  }</div>
<div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160; </div>
<div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(OMP_Entry);</div>
<div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *MasterPtr = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreatePtrToInt(MasterAddr, IntPtrTy);</div>
<div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *PrivatePtr = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreatePtrToInt(PrivateAddr, IntPtrTy);</div>
<div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="lib_2Target_2X86_2README_8txt.html#ad5da9a19280b84509a8d1cac2290a0ad">cmp</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmpNE(MasterPtr, PrivatePtr);</div>
<div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCondBr(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ad5da9a19280b84509a8d1cac2290a0ad">cmp</a>, CopyBegin, CopyEnd);</div>
<div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160; </div>
<div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(CopyBegin);</div>
<div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;  <span class="keywordflow">if</span> (BranchtoEnd)</div>
<div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBr(CopyEnd));</div>
<div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160; </div>
<div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP();</div>
<div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;}</div>
<div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160; </div>
<div class="line"><a name="l03751"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a81bc7a57bd0332843aed6275ba47bee0"> 3751</a></span>&#160;<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a81bc7a57bd0332843aed6275ba47bee0">OpenMPIRBuilder::createOMPAlloc</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc,</div>
<div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;                                          <a class="code" href="classllvm_1_1Value.html">Value</a> *Size, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="RegAllocBasic_8cpp.html#ad5d00e1d77644d95847b9bf8da12b759">Allocator</a>,</div>
<div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;                                          std::string Name) {</div>
<div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::InsertPointGuard</a> IPG(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>);</div>
<div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160; </div>
<div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;  <a class="code" href="classuint32__t.html">uint32_t</a> SrcLocStrSize;</div>
<div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc, SrcLocStrSize);</div>
<div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Ident = getOrCreateIdent(SrcLocStr, SrcLocStrSize);</div>
<div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ThreadId = getOrCreateThreadID(Ident);</div>
<div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[] = {ThreadId, Size, <a class="code" href="RegAllocBasic_8cpp.html#ad5d00e1d77644d95847b9bf8da12b759">Allocator</a>};</div>
<div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160; </div>
<div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *Fn = getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_alloc);</div>
<div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160; </div>
<div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(Fn, <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>, Name);</div>
<div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;}</div>
<div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160; </div>
<div class="line"><a name="l03768"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a807c913d5889a80440269b74d5755d6c"> 3768</a></span>&#160;<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a807c913d5889a80440269b74d5755d6c">OpenMPIRBuilder::createOMPFree</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc,</div>
<div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;                                         <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="RegAllocBasic_8cpp.html#ad5d00e1d77644d95847b9bf8da12b759">Allocator</a>,</div>
<div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;                                         std::string Name) {</div>
<div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::InsertPointGuard</a> IPG(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>);</div>
<div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160; </div>
<div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;  <a class="code" href="classuint32__t.html">uint32_t</a> SrcLocStrSize;</div>
<div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc, SrcLocStrSize);</div>
<div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Ident = getOrCreateIdent(SrcLocStr, SrcLocStrSize);</div>
<div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ThreadId = getOrCreateThreadID(Ident);</div>
<div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[] = {ThreadId, <a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>, <a class="code" href="RegAllocBasic_8cpp.html#ad5d00e1d77644d95847b9bf8da12b759">Allocator</a>};</div>
<div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *Fn = getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_free);</div>
<div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(Fn, <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>, Name);</div>
<div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;}</div>
<div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160; </div>
<div class="line"><a name="l03783"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a7709370a0f6564aa772ce20caa45337e"> 3783</a></span>&#160;<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a7709370a0f6564aa772ce20caa45337e">OpenMPIRBuilder::createOMPInteropInit</a>(</div>
<div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc, <a class="code" href="classllvm_1_1Value.html">Value</a> *InteropVar,</div>
<div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;    <a class="code" href="namespacellvm_1_1omp.html#afeaad9a7fc12d9246c2e42578fddc718">omp::OMPInteropType</a> InteropType, <a class="code" href="classllvm_1_1Value.html">Value</a> *Device, <a class="code" href="classllvm_1_1Value.html">Value</a> *NumDependences,</div>
<div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *DependenceAddress, <span class="keywordtype">bool</span> HaveNowaitClause) {</div>
<div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::InsertPointGuard</a> IPG(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>);</div>
<div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160; </div>
<div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;  <a class="code" href="classuint32__t.html">uint32_t</a> SrcLocStrSize;</div>
<div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc, SrcLocStrSize);</div>
<div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Ident = getOrCreateIdent(SrcLocStr, SrcLocStrSize);</div>
<div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ThreadId = getOrCreateThreadID(Ident);</div>
<div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;  <span class="keywordflow">if</span> (Device == <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;    Device = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Int32, -1);</div>
<div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *InteropTypeVal = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Int32, (<span class="keywordtype">int</span>)InteropType);</div>
<div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;  <span class="keywordflow">if</span> (NumDependences == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;    NumDependences = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Int64, 0);</div>
<div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;    <a class="code" href="classllvm_1_1PointerType.html">PointerType</a> *PointerTypeVar = <a class="code" href="classllvm_1_1Type.html#a7fe9ccd4893f4e2caa826126c09545ea">Type::getInt8PtrTy</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext());</div>
<div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;    DependenceAddress = <a class="code" href="classllvm_1_1ConstantPointerNull.html#a96f5c85e4022e369266541b2db3fda69">ConstantPointerNull::get</a>(PointerTypeVar);</div>
<div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;  }</div>
<div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *HaveNowaitClauseVal = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Int32, HaveNowaitClause);</div>
<div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[] = {</div>
<div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;      Ident,  ThreadId,       InteropVar,        InteropTypeVal,</div>
<div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;      Device, NumDependences, DependenceAddress, HaveNowaitClauseVal};</div>
<div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160; </div>
<div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *Fn = getOrCreateRuntimeFunctionPtr(OMPRTL___tgt_interop_init);</div>
<div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160; </div>
<div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(Fn, <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;}</div>
<div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160; </div>
<div class="line"><a name="l03812"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a38345e93229faed92e719f1793807bb1"> 3812</a></span>&#160;<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a38345e93229faed92e719f1793807bb1">OpenMPIRBuilder::createOMPInteropDestroy</a>(</div>
<div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc, <a class="code" href="classllvm_1_1Value.html">Value</a> *InteropVar, <a class="code" href="classllvm_1_1Value.html">Value</a> *Device,</div>
<div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NumDependences, <a class="code" href="classllvm_1_1Value.html">Value</a> *DependenceAddress, <span class="keywordtype">bool</span> HaveNowaitClause) {</div>
<div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::InsertPointGuard</a> IPG(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>);</div>
<div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160; </div>
<div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;  <a class="code" href="classuint32__t.html">uint32_t</a> SrcLocStrSize;</div>
<div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc, SrcLocStrSize);</div>
<div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Ident = getOrCreateIdent(SrcLocStr, SrcLocStrSize);</div>
<div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ThreadId = getOrCreateThreadID(Ident);</div>
<div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;  <span class="keywordflow">if</span> (Device == <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;    Device = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Int32, -1);</div>
<div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;  <span class="keywordflow">if</span> (NumDependences == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;    NumDependences = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Int32, 0);</div>
<div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;    <a class="code" href="classllvm_1_1PointerType.html">PointerType</a> *PointerTypeVar = <a class="code" href="classllvm_1_1Type.html#a7fe9ccd4893f4e2caa826126c09545ea">Type::getInt8PtrTy</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext());</div>
<div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;    DependenceAddress = <a class="code" href="classllvm_1_1ConstantPointerNull.html#a96f5c85e4022e369266541b2db3fda69">ConstantPointerNull::get</a>(PointerTypeVar);</div>
<div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;  }</div>
<div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *HaveNowaitClauseVal = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Int32, HaveNowaitClause);</div>
<div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[] = {</div>
<div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;      Ident,          ThreadId,          InteropVar,         Device,</div>
<div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;      NumDependences, DependenceAddress, HaveNowaitClauseVal};</div>
<div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160; </div>
<div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *Fn = getOrCreateRuntimeFunctionPtr(OMPRTL___tgt_interop_destroy);</div>
<div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160; </div>
<div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(Fn, <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;}</div>
<div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160; </div>
<div class="line"><a name="l03839"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#aaef3fb3339c2ade5ffffccdd177e465c"> 3839</a></span>&#160;<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aaef3fb3339c2ade5ffffccdd177e465c">OpenMPIRBuilder::createOMPInteropUse</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc,</div>
<div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;                                               <a class="code" href="classllvm_1_1Value.html">Value</a> *InteropVar, <a class="code" href="classllvm_1_1Value.html">Value</a> *Device,</div>
<div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;                                               <a class="code" href="classllvm_1_1Value.html">Value</a> *NumDependences,</div>
<div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;                                               <a class="code" href="classllvm_1_1Value.html">Value</a> *DependenceAddress,</div>
<div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;                                               <span class="keywordtype">bool</span> HaveNowaitClause) {</div>
<div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::InsertPointGuard</a> IPG(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>);</div>
<div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;  <a class="code" href="classuint32__t.html">uint32_t</a> SrcLocStrSize;</div>
<div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc, SrcLocStrSize);</div>
<div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Ident = getOrCreateIdent(SrcLocStr, SrcLocStrSize);</div>
<div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ThreadId = getOrCreateThreadID(Ident);</div>
<div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;  <span class="keywordflow">if</span> (Device == <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;    Device = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Int32, -1);</div>
<div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;  <span class="keywordflow">if</span> (NumDependences == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;    NumDependences = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Int32, 0);</div>
<div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;    <a class="code" href="classllvm_1_1PointerType.html">PointerType</a> *PointerTypeVar = <a class="code" href="classllvm_1_1Type.html#a7fe9ccd4893f4e2caa826126c09545ea">Type::getInt8PtrTy</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext());</div>
<div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;    DependenceAddress = <a class="code" href="classllvm_1_1ConstantPointerNull.html#a96f5c85e4022e369266541b2db3fda69">ConstantPointerNull::get</a>(PointerTypeVar);</div>
<div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;  }</div>
<div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *HaveNowaitClauseVal = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Int32, HaveNowaitClause);</div>
<div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[] = {</div>
<div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;      Ident,          ThreadId,          InteropVar,         Device,</div>
<div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;      NumDependences, DependenceAddress, HaveNowaitClauseVal};</div>
<div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160; </div>
<div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *Fn = getOrCreateRuntimeFunctionPtr(OMPRTL___tgt_interop_use);</div>
<div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160; </div>
<div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(Fn, <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;}</div>
<div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160; </div>
<div class="line"><a name="l03867"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#ad89dcb3cd8a39ae57a69487c2988dace"> 3867</a></span>&#160;<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#ad89dcb3cd8a39ae57a69487c2988dace">OpenMPIRBuilder::createCachedThreadPrivate</a>(</div>
<div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc, <a class="code" href="classllvm_1_1Value.html">llvm::Value</a> *Pointer,</div>
<div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;    <a class="code" href="classllvm_1_1ConstantInt.html">llvm::ConstantInt</a> *Size, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">llvm::Twine</a> &amp;Name) {</div>
<div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::InsertPointGuard</a> IPG(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>);</div>
<div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160; </div>
<div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;  <a class="code" href="classuint32__t.html">uint32_t</a> SrcLocStrSize;</div>
<div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc, SrcLocStrSize);</div>
<div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Ident = getOrCreateIdent(SrcLocStr, SrcLocStrSize);</div>
<div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ThreadId = getOrCreateThreadID(Ident);</div>
<div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *ThreadPrivateCache =</div>
<div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;      getOrCreateInternalVariable(Int8PtrPtr, Name.str());</div>
<div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;  <a class="code" href="classllvm_1_1Value.html">llvm::Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[] = {Ident, ThreadId, Pointer, Size, ThreadPrivateCache};</div>
<div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160; </div>
<div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *Fn =</div>
<div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;      getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_threadprivate_cached);</div>
<div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160; </div>
<div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(Fn, <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;}</div>
<div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160; </div>
<div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a></div>
<div class="line"><a name="l03888"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a7fdf3da89e690f360e040b230fb41e2f"> 3888</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a7fdf3da89e690f360e040b230fb41e2f">OpenMPIRBuilder::createTargetInit</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc, <span class="keywordtype">bool</span> IsSPMD) {</div>
<div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;    <span class="keywordflow">return</span> Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>;</div>
<div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160; </div>
<div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;  <a class="code" href="classuint32__t.html">uint32_t</a> SrcLocStrSize;</div>
<div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc, SrcLocStrSize);</div>
<div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Ident = getOrCreateIdent(SrcLocStr, SrcLocStrSize);</div>
<div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *IsSPMDVal = <a class="code" href="classllvm_1_1ConstantInt.html#ad736fb9b585509388546c12617def38f">ConstantInt::getSigned</a>(</div>
<div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;      <a class="code" href="classllvm_1_1Type.html#a7ba5de75f50bb4a4ba920698edf39b28">IntegerType::getInt8Ty</a>(<a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9eab4469cd975dfe176a70d24e5904cedf6">Int8</a>-&gt;getContext()),</div>
<div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;      IsSPMD ? <a class="code" href="namespacellvm_1_1omp.html#aa0c0d79dafb0d22308ce48808689f430a338c51f37ed4e4b2c9973a383c566c19">OMP_TGT_EXEC_MODE_SPMD</a> : <a class="code" href="namespacellvm_1_1omp.html#aa0c0d79dafb0d22308ce48808689f430afa583a38ff705195c9bce9dec0c5eff8">OMP_TGT_EXEC_MODE_GENERIC</a>);</div>
<div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *UseGenericStateMachine =</div>
<div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;      <a class="code" href="classllvm_1_1ConstantInt.html#afe7d477c6022fe7123b90e3b39c58e69">ConstantInt::getBool</a>(Int32-&gt;getContext(), !IsSPMD);</div>
<div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160; </div>
<div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *Fn = getOrCreateRuntimeFunctionPtr(</div>
<div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;      omp::RuntimeFunction::OMPRTL___kmpc_target_init);</div>
<div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160; </div>
<div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;  <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *ThreadKind = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(</div>
<div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;      Fn, {Ident, IsSPMDVal, UseGenericStateMachine});</div>
<div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160; </div>
<div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ExecUserCode = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmpEQ(</div>
<div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;      ThreadKind, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(ThreadKind-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), -1),</div>
<div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;      <span class="stringliteral">&quot;exec_user_code&quot;</span>);</div>
<div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160; </div>
<div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;  <span class="comment">// ThreadKind = __kmpc_target_init(...)</span></div>
<div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;  <span class="comment">// if (ThreadKind == -1)</span></div>
<div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;  <span class="comment">//   user_code</span></div>
<div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;  <span class="comment">// else</span></div>
<div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;  <span class="comment">//   return;</span></div>
<div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160; </div>
<div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;  <span class="keyword">auto</span> *UI = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateUnreachable();</div>
<div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *CheckBB = UI-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>();</div>
<div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *UserCodeEntryBB = CheckBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a52c990590792c91dd20b6d45acebe359">splitBasicBlock</a>(UI, <span class="stringliteral">&quot;user_code.entry&quot;</span>);</div>
<div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160; </div>
<div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *WorkerExitBB = <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(</div>
<div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;      CheckBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aa286a0f7f5d38488d593bb7ef0ba183e">getContext</a>(), <span class="stringliteral">&quot;worker.exit&quot;</span>, CheckBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>());</div>
<div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(WorkerExitBB);</div>
<div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateRetVoid();</div>
<div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160; </div>
<div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;  <span class="keyword">auto</span> *CheckBBTI = CheckBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>();</div>
<div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(CheckBBTI);</div>
<div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCondBr(ExecUserCode, UI-&gt;getParent(), WorkerExitBB);</div>
<div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160; </div>
<div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;  CheckBBTI-&gt;eraseFromParent();</div>
<div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;  UI-&gt;eraseFromParent();</div>
<div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160; </div>
<div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;  <span class="comment">// Continue in the &quot;user_code&quot; block, see diagram above and in</span></div>
<div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;  <span class="comment">// openmp/libomptarget/deviceRTLs/common/include/target.h .</span></div>
<div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a>(UserCodeEntryBB, UserCodeEntryBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a161fd4e9fa5367f64c2a4c9e921c3ad3">getFirstInsertionPt</a>());</div>
<div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160;}</div>
<div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160; </div>
<div class="line"><a name="l03938"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a616640b3a100a0568702c749afee0aa9"> 3938</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a616640b3a100a0568702c749afee0aa9">OpenMPIRBuilder::createTargetDeinit</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc,</div>
<div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;                                         <span class="keywordtype">bool</span> IsSPMD) {</div>
<div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160; </div>
<div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;  <a class="code" href="classuint32__t.html">uint32_t</a> SrcLocStrSize;</div>
<div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc, SrcLocStrSize);</div>
<div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Ident = getOrCreateIdent(SrcLocStr, SrcLocStrSize);</div>
<div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *IsSPMDVal = <a class="code" href="classllvm_1_1ConstantInt.html#ad736fb9b585509388546c12617def38f">ConstantInt::getSigned</a>(</div>
<div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;      <a class="code" href="classllvm_1_1Type.html#a7ba5de75f50bb4a4ba920698edf39b28">IntegerType::getInt8Ty</a>(<a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9eab4469cd975dfe176a70d24e5904cedf6">Int8</a>-&gt;getContext()),</div>
<div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;      IsSPMD ? <a class="code" href="namespacellvm_1_1omp.html#aa0c0d79dafb0d22308ce48808689f430a338c51f37ed4e4b2c9973a383c566c19">OMP_TGT_EXEC_MODE_SPMD</a> : <a class="code" href="namespacellvm_1_1omp.html#aa0c0d79dafb0d22308ce48808689f430afa583a38ff705195c9bce9dec0c5eff8">OMP_TGT_EXEC_MODE_GENERIC</a>);</div>
<div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160; </div>
<div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *Fn = getOrCreateRuntimeFunctionPtr(</div>
<div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;      omp::RuntimeFunction::OMPRTL___kmpc_target_deinit);</div>
<div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160; </div>
<div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(Fn, {Ident, IsSPMDVal});</div>
<div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;}</div>
<div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160; </div>
<div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;<span class="keywordtype">void</span> OpenMPIRBuilder::setOutlinedTargetRegionFunctionAttributes(</div>
<div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *OutlinedFn, int32_t NumTeams, int32_t NumThreads) {</div>
<div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;  <span class="keywordflow">if</span> (Config.isEmbedded()) {</div>
<div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;    OutlinedFn-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a687973de03d041e04b50a76d19d4fd36">setLinkage</a>(<a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca696bb1c9b0b0e76bb70c61f68866452a">GlobalValue::WeakODRLinkage</a>);</div>
<div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;    <span class="comment">// TODO: Determine if DSO local can be set to true.</span></div>
<div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;    OutlinedFn-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a78c4d0538c7dbffa955486abae2b61bb">setDSOLocal</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;    OutlinedFn-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#aa242d8ab89216c14beab812e07009b2a">setVisibility</a>(<a class="code" href="classllvm_1_1GlobalValue.html#a9141f967188383108a69cc1b8ed3c195ae1cc9a390520055573d459de25747caa">GlobalValue::ProtectedVisibility</a>);</div>
<div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Triple.html">Triple</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getTargetTriple()).<a class="code" href="classllvm_1_1Triple.html#a92da6cf2a6b4ce43d5c5e4ef110511aa">isAMDGCN</a>())</div>
<div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;      OutlinedFn-&gt;<a class="code" href="classllvm_1_1Function.html#ae6db8746934e6feae3649a8709fce3cc">setCallingConv</a>(<a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feeda27a385675142c462571165c839e41aa0">CallingConv::AMDGPU_KERNEL</a>);</div>
<div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;  }</div>
<div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160; </div>
<div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;  <span class="keywordflow">if</span> (NumTeams &gt; 0)</div>
<div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;    OutlinedFn-&gt;<a class="code" href="classllvm_1_1Function.html#a01875e4204852069dd4b7938cab4140b">addFnAttr</a>(<span class="stringliteral">&quot;omp_target_num_teams&quot;</span>, <a class="code" href="namespacellvm.html#a13c1b5a253da5da49ce33d03dc1efc07">std::to_string</a>(NumTeams));</div>
<div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;  <span class="keywordflow">if</span> (NumThreads &gt; 0)</div>
<div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;    OutlinedFn-&gt;<a class="code" href="classllvm_1_1Function.html#a01875e4204852069dd4b7938cab4140b">addFnAttr</a>(<span class="stringliteral">&quot;omp_target_thread_limit&quot;</span>,</div>
<div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;                          <a class="code" href="namespacellvm.html#a13c1b5a253da5da49ce33d03dc1efc07">std::to_string</a>(NumThreads));</div>
<div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;}</div>
<div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160; </div>
<div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;<a class="code" href="classllvm_1_1Constant.html">Constant</a> *OpenMPIRBuilder::createOutlinedFunctionID(<a class="code" href="classllvm_1_1Function.html">Function</a> *OutlinedFn,</div>
<div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;                                                    <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> EntryFnIDName) {</div>
<div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;  <span class="keywordflow">if</span> (Config.isEmbedded()) {</div>
<div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(OutlinedFn &amp;&amp; <span class="stringliteral">&quot;The outlined function must exist if embedded&quot;</span>);</div>
<div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantExpr.html#ae79d05dd3d0b05e080e08f8c5c33f880">ConstantExpr::getBitCast</a>(OutlinedFn, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt8PtrTy());</div>
<div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;  }</div>
<div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160; </div>
<div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>(</div>
<div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;      M, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt8Ty(), <span class="comment">/*isConstant=*/</span><span class="keyword">true</span>, <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca8d13a9bcecfac72febceb1103afa048f">GlobalValue::WeakAnyLinkage</a>,</div>
<div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;      <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt8Ty()), EntryFnIDName);</div>
<div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;}</div>
<div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160; </div>
<div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;<a class="code" href="classllvm_1_1Constant.html">Constant</a> *OpenMPIRBuilder::createTargetRegionEntryAddr(<a class="code" href="classllvm_1_1Function.html">Function</a> *OutlinedFn,</div>
<div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;                                                       <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> EntryFnName) {</div>
<div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;  <span class="keywordflow">if</span> (OutlinedFn)</div>
<div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;    <span class="keywordflow">return</span> OutlinedFn;</div>
<div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160; </div>
<div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getGlobalVariable(EntryFnName, <span class="keyword">true</span>) &amp;&amp;</div>
<div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;         <span class="stringliteral">&quot;Named kernel already exists?&quot;</span>);</div>
<div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>(</div>
<div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;      M, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt8Ty(), <span class="comment">/*isConstant=*/</span><span class="keyword">true</span>, <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">GlobalValue::InternalLinkage</a>,</div>
<div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;      <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt8Ty()), EntryFnName);</div>
<div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;}</div>
<div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160; </div>
<div class="line"><a name="l03998"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a21f3355a71a577274d5e3872a7e62048"> 3998</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a21f3355a71a577274d5e3872a7e62048">OpenMPIRBuilder::emitTargetRegionFunction</a>(</div>
<div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;    <a class="code" href="classllvm_1_1OffloadEntriesInfoManager.html">OffloadEntriesInfoManager</a> &amp;InfoManager, <a class="code" href="structllvm_1_1TargetRegionEntryInfo.html">TargetRegionEntryInfo</a> &amp;EntryInfo,</div>
<div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;    <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#ababd12964e70586441f75244fc816a8c">FunctionGenCallback</a> &amp;GenerateFunctionCallback, int32_t NumTeams,</div>
<div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;    int32_t NumThreads, <span class="keywordtype">bool</span> IsOffloadEntry, <a class="code" href="classllvm_1_1Function.html">Function</a> *&amp;OutlinedFn,</div>
<div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *&amp;OutlinedFnID) {</div>
<div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160; </div>
<div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;64&gt;</a> EntryFnName;</div>
<div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;  InfoManager.<a class="code" href="classllvm_1_1OffloadEntriesInfoManager.html#a6827980ed8b61f42e680949ff4511b03">getTargetRegionEntryFnName</a>(EntryFnName, EntryInfo);</div>
<div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160; </div>
<div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;  OutlinedFn = Config.isEmbedded() || !Config.openMPOffloadMandatory()</div>
<div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;                   ? GenerateFunctionCallback(EntryFnName)</div>
<div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;                   : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160; </div>
<div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;  <span class="comment">// If this target outline function is not an offload entry, we don&#39;t need to</span></div>
<div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;  <span class="comment">// register it. This may be in the case of a false if clause, or if there are</span></div>
<div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;  <span class="comment">// no OpenMP targets.</span></div>
<div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;  <span class="keywordflow">if</span> (!IsOffloadEntry)</div>
<div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160; </div>
<div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;  std::string EntryFnIDName =</div>
<div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;      Config.isEmbedded()</div>
<div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;          ? std::string(EntryFnName)</div>
<div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;          : createPlatformSpecificName({EntryFnName, <span class="stringliteral">&quot;region_id&quot;</span>});</div>
<div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160; </div>
<div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;  OutlinedFnID = registerTargetRegionFunction(</div>
<div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;      InfoManager, EntryInfo, OutlinedFn, EntryFnName, EntryFnIDName, NumTeams,</div>
<div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;      NumThreads);</div>
<div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;}</div>
<div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160; </div>
<div class="line"><a name="l04027"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a94b83966fb2170f412ab758102e46f84"> 4027</a></span>&#160;<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a94b83966fb2170f412ab758102e46f84">OpenMPIRBuilder::registerTargetRegionFunction</a>(</div>
<div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;    <a class="code" href="classllvm_1_1OffloadEntriesInfoManager.html">OffloadEntriesInfoManager</a> &amp;InfoManager, <a class="code" href="structllvm_1_1TargetRegionEntryInfo.html">TargetRegionEntryInfo</a> &amp;EntryInfo,</div>
<div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *OutlinedFn, <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> EntryFnName, <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> EntryFnIDName,</div>
<div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;    int32_t NumTeams, int32_t NumThreads) {</div>
<div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;  <span class="keywordflow">if</span> (OutlinedFn)</div>
<div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;    setOutlinedTargetRegionFunctionAttributes(OutlinedFn, NumTeams, NumThreads);</div>
<div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;  <span class="keyword">auto</span> OutlinedFnID = createOutlinedFunctionID(OutlinedFn, EntryFnIDName);</div>
<div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;  <span class="keyword">auto</span> EntryAddr = createTargetRegionEntryAddr(OutlinedFn, EntryFnName);</div>
<div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;  InfoManager.<a class="code" href="classllvm_1_1OffloadEntriesInfoManager.html#a9736eb60d11b4a8d644d3e32346e7f56">registerTargetRegionEntryInfo</a>(</div>
<div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;      EntryInfo, EntryAddr, OutlinedFnID,</div>
<div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;      <a class="code" href="classllvm_1_1OffloadEntriesInfoManager.html#a4e85049eada7d6cc3bedde1433ce4a7ba1e2537a111117d2cebad779b6de1856b">OffloadEntriesInfoManager::OMPTargetRegionEntryTargetRegion</a>);</div>
<div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;  <span class="keywordflow">return</span> OutlinedFnID;</div>
<div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;}</div>
<div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160; </div>
<div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;std::string OpenMPIRBuilder::getNameWithSeparators(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;StringRef&gt;</a> Parts,</div>
<div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;                                                   <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> FirstSeparator,</div>
<div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;                                                   <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> Separator) {</div>
<div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> Buffer;</div>
<div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;  <a class="code" href="classllvm_1_1raw__svector__ostream.html">llvm::raw_svector_ostream</a> <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>(Buffer);</div>
<div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> Sep = FirstSeparator;</div>
<div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1StringRef.html">StringRef</a> Part : Parts) {</div>
<div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; Sep &lt;&lt; Part;</div>
<div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;    Sep = Separator;</div>
<div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;  }</div>
<div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>.str().str();</div>
<div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;}</div>
<div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160; </div>
<div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;std::string</div>
<div class="line"><a name="l04055"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a488c861f8a68e5f78ceca8b57acd8be5"> 4055</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a488c861f8a68e5f78ceca8b57acd8be5">OpenMPIRBuilder::createPlatformSpecificName</a>(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;StringRef&gt;</a> Parts)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;  <span class="keywordflow">return</span> OpenMPIRBuilder::getNameWithSeparators(Parts, Config.firstSeparator(),</div>
<div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;                                                Config.separator());</div>
<div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;}</div>
<div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160; </div>
<div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *</div>
<div class="line"><a name="l04061"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#aa5ef00e5a7487cc6c5bfed0f301fa1cc"> 4061</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aa5ef00e5a7487cc6c5bfed0f301fa1cc">OpenMPIRBuilder::getOrCreateInternalVariable</a>(<a class="code" href="classllvm_1_1Type.html">Type</a> *Ty, <span class="keyword">const</span> <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> &amp;Name,</div>
<div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;                                             <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm.html#a2c3c18bffdc25d969233c5448bdfe7eb">AddressSpace</a>) {</div>
<div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;  <span class="keyword">auto</span> &amp;Elem = *InternalVars.try_emplace(Name, <span class="keyword">nullptr</span>).first;</div>
<div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;  <span class="keywordflow">if</span> (Elem.second) {</div>
<div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(cast&lt;PointerType&gt;(Elem.second-&gt;getType())</div>
<div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160;               -&gt;isOpaqueOrPointeeTypeMatches(Ty) &amp;&amp;</div>
<div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;           <span class="stringliteral">&quot;OMP internal variable has different type than requested&quot;</span>);</div>
<div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;    <span class="comment">// TODO: investigate the appropriate linkage type used for the global</span></div>
<div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160;    <span class="comment">// variable for possibly changing that to internal or private, or maybe</span></div>
<div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;    <span class="comment">// create different versions of the function for different OMP internal</span></div>
<div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;    <span class="comment">// variables.</span></div>
<div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;    Elem.second = <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>(</div>
<div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;        <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, Ty, <span class="comment">/*IsConstant=*/</span><span class="keyword">false</span>, <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca08c6a63ca3d9cdb39fb584655bf5c501">GlobalValue::CommonLinkage</a>,</div>
<div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;        <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Ty), Elem.first(),</div>
<div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;        <span class="comment">/*InsertBefore=*/</span><span class="keyword">nullptr</span>, <a class="code" href="classllvm_1_1GlobalValue.html#a05c6b3b9372b56d130e005db4837da62a7483b56cbb22b39c485b4648ea3374b0">GlobalValue::NotThreadLocal</a>, <a class="code" href="namespacellvm.html#a2c3c18bffdc25d969233c5448bdfe7eb">AddressSpace</a>);</div>
<div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;  }</div>
<div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160; </div>
<div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;  <span class="keywordflow">return</span> cast&lt;GlobalVariable&gt;(&amp;*Elem.second);</div>
<div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160;}</div>
<div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160; </div>
<div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *OpenMPIRBuilder::getOMPCriticalRegionLock(<a class="code" href="classllvm_1_1StringRef.html">StringRef</a> CriticalName) {</div>
<div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160;  std::string <a class="code" href="namespacellvm_1_1cl.html#afcbd4ecc474e2d218391d6d3027b086aa7861ef1db44eac8ea7a373cd7c53a7c5">Prefix</a> = <a class="code" href="classllvm_1_1Twine.html">Twine</a>(<span class="stringliteral">&quot;gomp_critical_user_&quot;</span>, CriticalName).<a class="code" href="classllvm_1_1Twine.html#a4c1c1093a7749409c70838678514cc7c">str</a>();</div>
<div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;  std::string Name = getNameWithSeparators({<a class="code" href="namespacellvm_1_1cl.html#afcbd4ecc474e2d218391d6d3027b086aa7861ef1db44eac8ea7a373cd7c53a7c5">Prefix</a>, <span class="stringliteral">&quot;var&quot;</span>}, <span class="stringliteral">&quot;.&quot;</span>, <span class="stringliteral">&quot;.&quot;</span>);</div>
<div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;  <span class="keywordflow">return</span> getOrCreateInternalVariable(KmpCriticalNameTy, Name);</div>
<div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;}</div>
<div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160; </div>
<div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *</div>
<div class="line"><a name="l04089"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#ad56f71598b251a0f66e590c94d01c67b"> 4089</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#ad56f71598b251a0f66e590c94d01c67b">OpenMPIRBuilder::createOffloadMaptypes</a>(<a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;uint64_t&gt;</a> &amp;<a class="code" href="InjectTLIMappings_8cpp.html#a3d23fb8c590cd607d4b25a05e31c69f5">Mappings</a>,</div>
<div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;                                       std::string <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a218a3df235546fc092fe0f463e6b714d">VarName</a>) {</div>
<div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">llvm::Constant</a> *MaptypesArrayInit =</div>
<div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;      <a class="code" href="classllvm_1_1ConstantDataArray.html#acea0f5c18b4593bf27592dfcfe59de6f">llvm::ConstantDataArray::get</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(), <a class="code" href="InjectTLIMappings_8cpp.html#a3d23fb8c590cd607d4b25a05e31c69f5">Mappings</a>);</div>
<div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;  <span class="keyword">auto</span> *MaptypesArrayGlobal = <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">llvm::GlobalVariable</a>(</div>
<div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160;      <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, MaptypesArrayInit-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(),</div>
<div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160;      <span class="comment">/*isConstant=*/</span><span class="keyword">true</span>, <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca04ed141708c0fd16723d212502b046ae">llvm::GlobalValue::PrivateLinkage</a>, MaptypesArrayInit,</div>
<div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;      <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a218a3df235546fc092fe0f463e6b714d">VarName</a>);</div>
<div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160;  MaptypesArrayGlobal-&gt;setUnnamedAddr(<a class="code" href="classllvm_1_1GlobalValue.html#ae8df4be75bfc50b1eadd74e85c25fa45a4cc6684df7b4a92b1dec6fce3264fac8">llvm::GlobalValue::UnnamedAddr::Global</a>);</div>
<div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160;  <span class="keywordflow">return</span> MaptypesArrayGlobal;</div>
<div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;}</div>
<div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160; </div>
<div class="line"><a name="l04101"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a544a84c75ac55356516cc7365cbe6f02"> 4101</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a544a84c75ac55356516cc7365cbe6f02">OpenMPIRBuilder::createMapperAllocas</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc,</div>
<div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160;                                          <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> AllocaIP,</div>
<div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;                                          <span class="keywordtype">unsigned</span> NumOperands,</div>
<div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;                                          <span class="keyword">struct</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1MapperAllocas.html">MapperAllocas</a> &amp;<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1MapperAllocas.html">MapperAllocas</a>) {</div>
<div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160; </div>
<div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;  <span class="keyword">auto</span> *ArrI8PtrTy = <a class="code" href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">ArrayType::get</a>(Int8Ptr, NumOperands);</div>
<div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;  <span class="keyword">auto</span> *ArrI64Ty = <a class="code" href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">ArrayType::get</a>(Int64, NumOperands);</div>
<div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(AllocaIP);</div>
<div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160;  <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *ArgsBase = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(ArrI8PtrTy);</div>
<div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160;  <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(ArrI8PtrTy);</div>
<div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160;  <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *ArgSizes = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(ArrI64Ty);</div>
<div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>);</div>
<div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;  <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1MapperAllocas.html">MapperAllocas</a>.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1MapperAllocas.html#a9d27bf73f53ec62c72ffd3137f47efde">ArgsBase</a> = ArgsBase;</div>
<div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;  <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1MapperAllocas.html">MapperAllocas</a>.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1MapperAllocas.html#aa90c5e272864414356fbeede370d5053">Args</a> = <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>;</div>
<div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160;  <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1MapperAllocas.html">MapperAllocas</a>.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1MapperAllocas.html#ad41f11a634af5e69560ac0279c74b100">ArgSizes</a> = ArgSizes;</div>
<div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;}</div>
<div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160; </div>
<div class="line"><a name="l04120"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a654b33adee2ae78ce74ecbe6aa5e5282"> 4120</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a654b33adee2ae78ce74ecbe6aa5e5282">OpenMPIRBuilder::emitMapperCall</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc,</div>
<div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;                                     <a class="code" href="classllvm_1_1Function.html">Function</a> *MapperFunc, <a class="code" href="classllvm_1_1Value.html">Value</a> *SrcLocInfo,</div>
<div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160;                                     <a class="code" href="classllvm_1_1Value.html">Value</a> *MaptypesArg, <a class="code" href="classllvm_1_1Value.html">Value</a> *MapnamesArg,</div>
<div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160;                                     <span class="keyword">struct</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1MapperAllocas.html">MapperAllocas</a> &amp;<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1MapperAllocas.html">MapperAllocas</a>,</div>
<div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;                                     int64_t DeviceID, <span class="keywordtype">unsigned</span> NumOperands) {</div>
<div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160; </div>
<div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;  <span class="keyword">auto</span> *ArrI8PtrTy = <a class="code" href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">ArrayType::get</a>(Int8Ptr, NumOperands);</div>
<div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;  <span class="keyword">auto</span> *ArrI64Ty = <a class="code" href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">ArrayType::get</a>(Int64, NumOperands);</div>
<div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ArgsBaseGEP =</div>
<div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateInBoundsGEP(ArrI8PtrTy, <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1MapperAllocas.html">MapperAllocas</a>.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1MapperAllocas.html#a9d27bf73f53ec62c72ffd3137f47efde">ArgsBase</a>,</div>
<div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160;                                {Builder.getInt32(0), Builder.getInt32(0)});</div>
<div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ArgsGEP =</div>
<div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateInBoundsGEP(ArrI8PtrTy, <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1MapperAllocas.html">MapperAllocas</a>.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1MapperAllocas.html#aa90c5e272864414356fbeede370d5053">Args</a>,</div>
<div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160;                                {Builder.getInt32(0), Builder.getInt32(0)});</div>
<div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ArgSizesGEP =</div>
<div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateInBoundsGEP(ArrI64Ty, <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1MapperAllocas.html">MapperAllocas</a>.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1MapperAllocas.html#ad41f11a634af5e69560ac0279c74b100">ArgSizes</a>,</div>
<div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160;                                {Builder.getInt32(0), Builder.getInt32(0)});</div>
<div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NullPtr = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Int8Ptr-&gt;getPointerTo());</div>
<div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(MapperFunc,</div>
<div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;                     {SrcLocInfo, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt64(DeviceID),</div>
<div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;                      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt32(NumOperands), ArgsBaseGEP, ArgsGEP,</div>
<div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160;                      ArgSizesGEP, MaptypesArg, MapnamesArg, NullPtr});</div>
<div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160;}</div>
<div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160; </div>
<div class="line"><a name="l04146"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a5dbb28755ef35df2cf784fac45f13f80"> 4146</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a5dbb28755ef35df2cf784fac45f13f80">OpenMPIRBuilder::emitOffloadingArraysArgument</a>(<a class="code" href="classllvm_1_1IRBuilderBase.html">IRBuilderBase</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>,</div>
<div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160;                                                   <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1TargetDataRTArgs.html">TargetDataRTArgs</a> &amp;RTArgs,</div>
<div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160;                                                   <a class="code" href="classllvm_1_1OpenMPIRBuilder_1_1TargetDataInfo.html">TargetDataInfo</a> &amp;<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>,</div>
<div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160;                                                   <span class="keywordtype">bool</span> EmitDebug,</div>
<div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;                                                   <span class="keywordtype">bool</span> ForEndCall) {</div>
<div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!ForEndCall || <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.separateBeginEndCalls()) &amp;&amp;</div>
<div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;         <span class="stringliteral">&quot;expected region end call to runtime only when end call is separate&quot;</span>);</div>
<div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;  <span class="keyword">auto</span> VoidPtrTy = <a class="code" href="classllvm_1_1Type.html#a7fe9ccd4893f4e2caa826126c09545ea">Type::getInt8PtrTy</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext());</div>
<div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;  <span class="keyword">auto</span> VoidPtrPtrTy = VoidPtrTy-&gt;getPointerTo(0);</div>
<div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;  <span class="keyword">auto</span> Int64Ty = <a class="code" href="classllvm_1_1Type.html#a05186fa23e4d11b9855a9599ba87a4b7">Type::getInt64Ty</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext());</div>
<div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;  <span class="keyword">auto</span> Int64PtrTy = <a class="code" href="classllvm_1_1Type.html#a9739fda41ce7be4d43bb5b45bbd0e460">Type::getInt64PtrTy</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext());</div>
<div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160; </div>
<div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.NumberOfPtrs) {</div>
<div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;    RTArgs.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1TargetDataRTArgs.html#aa998b8b179dd186fe4b5a1f6b6e25327">BasePointersArray</a> = <a class="code" href="classllvm_1_1ConstantPointerNull.html#a96f5c85e4022e369266541b2db3fda69">ConstantPointerNull::get</a>(VoidPtrPtrTy);</div>
<div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;    RTArgs.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1TargetDataRTArgs.html#a44027c71c6a6a9a4111594eeb16da30e">PointersArray</a> = <a class="code" href="classllvm_1_1ConstantPointerNull.html#a96f5c85e4022e369266541b2db3fda69">ConstantPointerNull::get</a>(VoidPtrPtrTy);</div>
<div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;    RTArgs.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1TargetDataRTArgs.html#a00635325d57af0b95f0b797f63ee6df6">SizesArray</a> = <a class="code" href="classllvm_1_1ConstantPointerNull.html#a96f5c85e4022e369266541b2db3fda69">ConstantPointerNull::get</a>(Int64PtrTy);</div>
<div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160;    RTArgs.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1TargetDataRTArgs.html#abfc59185affff631915c34412a350c8c">MapTypesArray</a> = <a class="code" href="classllvm_1_1ConstantPointerNull.html#a96f5c85e4022e369266541b2db3fda69">ConstantPointerNull::get</a>(Int64PtrTy);</div>
<div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160;    RTArgs.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1TargetDataRTArgs.html#aff8f3378279256a13c9938a109ef38fe">MapNamesArray</a> = <a class="code" href="classllvm_1_1ConstantPointerNull.html#a96f5c85e4022e369266541b2db3fda69">ConstantPointerNull::get</a>(VoidPtrPtrTy);</div>
<div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160;    RTArgs.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1TargetDataRTArgs.html#a4b54534e64cdf22a09f26ddacebe69ac">MappersArray</a> = <a class="code" href="classllvm_1_1ConstantPointerNull.html#a96f5c85e4022e369266541b2db3fda69">ConstantPointerNull::get</a>(VoidPtrPtrTy);</div>
<div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;  }</div>
<div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160; </div>
<div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;  RTArgs.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1TargetDataRTArgs.html#aa998b8b179dd186fe4b5a1f6b6e25327">BasePointersArray</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateConstInBoundsGEP2_32(</div>
<div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;      <a class="code" href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">ArrayType::get</a>(VoidPtrTy, <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.NumberOfPtrs),</div>
<div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;      <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.RTArgs.BasePointersArray,</div>
<div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;      <span class="comment">/*Idx0=*/</span>0, <span class="comment">/*Idx1=*/</span>0);</div>
<div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;  RTArgs.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1TargetDataRTArgs.html#a44027c71c6a6a9a4111594eeb16da30e">PointersArray</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateConstInBoundsGEP2_32(</div>
<div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160;      <a class="code" href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">ArrayType::get</a>(VoidPtrTy, <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.NumberOfPtrs), <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.RTArgs.PointersArray,</div>
<div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;      <span class="comment">/*Idx0=*/</span>0,</div>
<div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;      <span class="comment">/*Idx1=*/</span>0);</div>
<div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;  RTArgs.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1TargetDataRTArgs.html#a00635325d57af0b95f0b797f63ee6df6">SizesArray</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateConstInBoundsGEP2_32(</div>
<div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;      <a class="code" href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">ArrayType::get</a>(Int64Ty, <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.NumberOfPtrs), <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.RTArgs.SizesArray,</div>
<div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;      <span class="comment">/*Idx0=*/</span>0, <span class="comment">/*Idx1=*/</span>0);</div>
<div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;  RTArgs.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1TargetDataRTArgs.html#abfc59185affff631915c34412a350c8c">MapTypesArray</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateConstInBoundsGEP2_32(</div>
<div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;      <a class="code" href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">ArrayType::get</a>(Int64Ty, <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.NumberOfPtrs),</div>
<div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;      ForEndCall &amp;&amp; <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.RTArgs.MapTypesArrayEnd ? <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.RTArgs.MapTypesArrayEnd</div>
<div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;                                                 : <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.RTArgs.MapTypesArray,</div>
<div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160;      <span class="comment">/*Idx0=*/</span>0,</div>
<div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;      <span class="comment">/*Idx1=*/</span>0);</div>
<div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160; </div>
<div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;  <span class="comment">// Only emit the mapper information arrays if debug information is</span></div>
<div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160;  <span class="comment">// requested.</span></div>
<div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;  <span class="keywordflow">if</span> (!EmitDebug)</div>
<div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;    RTArgs.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1TargetDataRTArgs.html#aff8f3378279256a13c9938a109ef38fe">MapNamesArray</a> = <a class="code" href="classllvm_1_1ConstantPointerNull.html#a96f5c85e4022e369266541b2db3fda69">ConstantPointerNull::get</a>(VoidPtrPtrTy);</div>
<div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;    RTArgs.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1TargetDataRTArgs.html#aff8f3378279256a13c9938a109ef38fe">MapNamesArray</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateConstInBoundsGEP2_32(</div>
<div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;        <a class="code" href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">ArrayType::get</a>(VoidPtrTy, <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.NumberOfPtrs), <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.RTArgs.MapNamesArray,</div>
<div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;        <span class="comment">/*Idx0=*/</span>0,</div>
<div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;        <span class="comment">/*Idx1=*/</span>0);</div>
<div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;  <span class="comment">// If there is no user-defined mapper, set the mapper array to nullptr to</span></div>
<div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160;  <span class="comment">// avoid an unnecessary data privatization</span></div>
<div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.HasMapper)</div>
<div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160;    RTArgs.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1TargetDataRTArgs.html#a4b54534e64cdf22a09f26ddacebe69ac">MappersArray</a> = <a class="code" href="classllvm_1_1ConstantPointerNull.html#a96f5c85e4022e369266541b2db3fda69">ConstantPointerNull::get</a>(VoidPtrPtrTy);</div>
<div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160;    RTArgs.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1TargetDataRTArgs.html#a4b54534e64cdf22a09f26ddacebe69ac">MappersArray</a> =</div>
<div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreatePointerCast(<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.RTArgs.MappersArray, VoidPtrPtrTy);</div>
<div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;}</div>
<div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160; </div>
<div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160;<span class="keywordtype">bool</span> OpenMPIRBuilder::checkAndEmitFlushAfterAtomic(</div>
<div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;    <span class="keyword">const</span> LocationDescription &amp;Loc, <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7">llvm::AtomicOrdering</a> AO, AtomicKind AK) {</div>
<div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!(AO == <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7a56a57d29a3f9dda8671b4d6490a94b08">AtomicOrdering::NotAtomic</a> ||</div>
<div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160;           AO == <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7a288d468c5e0969f26a310773eda65603">llvm::AtomicOrdering::Unordered</a>) &amp;&amp;</div>
<div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;         <span class="stringliteral">&quot;Unexpected Atomic Ordering.&quot;</span>);</div>
<div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160; </div>
<div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160;  <span class="keywordtype">bool</span> Flush = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160;  <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7">llvm::AtomicOrdering</a> FlushAO = <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7a14194d0b2e6c6680067975517cd58eac">AtomicOrdering::Monotonic</a>;</div>
<div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160; </div>
<div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160;  <span class="keywordflow">switch</span> (AK) {</div>
<div class="line"><a name="l04214"></a><span class="lineno"> 4214</span>&#160;  <span class="keywordflow">case</span> Read:</div>
<div class="line"><a name="l04215"></a><span class="lineno"> 4215</span>&#160;    <span class="keywordflow">if</span> (AO == <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7a993ca650a85e8e69b8f7eaa4809c4862">AtomicOrdering::Acquire</a> || AO == <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7a960fbd067612ca87e16d5dfdb12fe40a">AtomicOrdering::AcquireRelease</a> ||</div>
<div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160;        AO == <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7ae3b0fa849dbd758b450f98fcfde936a2">AtomicOrdering::SequentiallyConsistent</a>) {</div>
<div class="line"><a name="l04217"></a><span class="lineno"> 4217</span>&#160;      FlushAO = <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7a993ca650a85e8e69b8f7eaa4809c4862">AtomicOrdering::Acquire</a>;</div>
<div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160;      Flush = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160;    }</div>
<div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;  <span class="keywordflow">case</span> Write:</div>
<div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="README__P9_8txt.html#a42a82adf8d40243d6a0a28972c9f7df1">Compare</a>:</div>
<div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160;  <span class="keywordflow">case</span> Update:</div>
<div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;    <span class="keywordflow">if</span> (AO == <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7ab8e7b465df7c5979dc731d06e84ce2cf">AtomicOrdering::Release</a> || AO == <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7a960fbd067612ca87e16d5dfdb12fe40a">AtomicOrdering::AcquireRelease</a> ||</div>
<div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160;        AO == <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7ae3b0fa849dbd758b450f98fcfde936a2">AtomicOrdering::SequentiallyConsistent</a>) {</div>
<div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;      FlushAO = <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7ab8e7b465df7c5979dc731d06e84ce2cf">AtomicOrdering::Release</a>;</div>
<div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160;      Flush = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160;    }</div>
<div class="line"><a name="l04229"></a><span class="lineno"> 4229</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160;  <span class="keywordflow">case</span> Capture:</div>
<div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;    <span class="keywordflow">switch</span> (AO) {</div>
<div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7a993ca650a85e8e69b8f7eaa4809c4862">AtomicOrdering::Acquire</a>:</div>
<div class="line"><a name="l04233"></a><span class="lineno"> 4233</span>&#160;      FlushAO = <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7a993ca650a85e8e69b8f7eaa4809c4862">AtomicOrdering::Acquire</a>;</div>
<div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160;      Flush = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7ab8e7b465df7c5979dc731d06e84ce2cf">AtomicOrdering::Release</a>:</div>
<div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;      FlushAO = <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7ab8e7b465df7c5979dc731d06e84ce2cf">AtomicOrdering::Release</a>;</div>
<div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160;      Flush = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04240"></a><span class="lineno"> 4240</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7a960fbd067612ca87e16d5dfdb12fe40a">AtomicOrdering::AcquireRelease</a>:</div>
<div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7ae3b0fa849dbd758b450f98fcfde936a2">AtomicOrdering::SequentiallyConsistent</a>:</div>
<div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;      FlushAO = <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7a960fbd067612ca87e16d5dfdb12fe40a">AtomicOrdering::AcquireRelease</a>;</div>
<div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;      Flush = <span class="keyword">true</span>;</div>
<div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;      <span class="comment">// do nothing - leave silently.</span></div>
<div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04248"></a><span class="lineno"> 4248</span>&#160;    }</div>
<div class="line"><a name="l04249"></a><span class="lineno"> 4249</span>&#160;  }</div>
<div class="line"><a name="l04250"></a><span class="lineno"> 4250</span>&#160; </div>
<div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160;  <span class="keywordflow">if</span> (Flush) {</div>
<div class="line"><a name="l04252"></a><span class="lineno"> 4252</span>&#160;    <span class="comment">// Currently Flush RT call still doesn&#39;t take memory_ordering, so for when</span></div>
<div class="line"><a name="l04253"></a><span class="lineno"> 4253</span>&#160;    <span class="comment">// that happens, this tries to do the resolution of which atomic ordering</span></div>
<div class="line"><a name="l04254"></a><span class="lineno"> 4254</span>&#160;    <span class="comment">// to use with but issue the flush call</span></div>
<div class="line"><a name="l04255"></a><span class="lineno"> 4255</span>&#160;    <span class="comment">// TODO: pass `FlushAO` after memory ordering support is added</span></div>
<div class="line"><a name="l04256"></a><span class="lineno"> 4256</span>&#160;    (void)FlushAO;</div>
<div class="line"><a name="l04257"></a><span class="lineno"> 4257</span>&#160;    emitFlush(Loc);</div>
<div class="line"><a name="l04258"></a><span class="lineno"> 4258</span>&#160;  }</div>
<div class="line"><a name="l04259"></a><span class="lineno"> 4259</span>&#160; </div>
<div class="line"><a name="l04260"></a><span class="lineno"> 4260</span>&#160;  <span class="comment">// for AO == AtomicOrdering::Monotonic and  all other case combinations</span></div>
<div class="line"><a name="l04261"></a><span class="lineno"> 4261</span>&#160;  <span class="comment">// do nothing</span></div>
<div class="line"><a name="l04262"></a><span class="lineno"> 4262</span>&#160;  <span class="keywordflow">return</span> Flush;</div>
<div class="line"><a name="l04263"></a><span class="lineno"> 4263</span>&#160;}</div>
<div class="line"><a name="l04264"></a><span class="lineno"> 4264</span>&#160; </div>
<div class="line"><a name="l04265"></a><span class="lineno"> 4265</span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a></div>
<div class="line"><a name="l04266"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a388d5a62753f4e7ff4b72e54c1233fbc"> 4266</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a388d5a62753f4e7ff4b72e54c1233fbc">OpenMPIRBuilder::createAtomicRead</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc,</div>
<div class="line"><a name="l04267"></a><span class="lineno"> 4267</span>&#160;                                  <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html">AtomicOpValue</a> &amp;<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html">AtomicOpValue</a> &amp;V,</div>
<div class="line"><a name="l04268"></a><span class="lineno"> 4268</span>&#160;                                  <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7">AtomicOrdering</a> AO) {</div>
<div class="line"><a name="l04269"></a><span class="lineno"> 4269</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l04270"></a><span class="lineno"> 4270</span>&#160;    <span class="keywordflow">return</span> Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>;</div>
<div class="line"><a name="l04271"></a><span class="lineno"> 4271</span>&#160; </div>
<div class="line"><a name="l04272"></a><span class="lineno"> 4272</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *XTy = <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.Var-&gt;getType();</div>
<div class="line"><a name="l04273"></a><span class="lineno"> 4273</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(XTy-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>() &amp;&amp; <span class="stringliteral">&quot;OMP Atomic expects a pointer to target memory&quot;</span>);</div>
<div class="line"><a name="l04274"></a><span class="lineno"> 4274</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *XElemTy = <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.ElemTy;</div>
<div class="line"><a name="l04275"></a><span class="lineno"> 4275</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#aac5759c83abd6a4af236401a7cfe7a0f">isFloatingPointTy</a>() || XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>() ||</div>
<div class="line"><a name="l04276"></a><span class="lineno"> 4276</span>&#160;          XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>()) &amp;&amp;</div>
<div class="line"><a name="l04277"></a><span class="lineno"> 4277</span>&#160;         <span class="stringliteral">&quot;OMP atomic read expected a scalar type&quot;</span>);</div>
<div class="line"><a name="l04278"></a><span class="lineno"> 4278</span>&#160; </div>
<div class="line"><a name="l04279"></a><span class="lineno"> 4279</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *XRead = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04280"></a><span class="lineno"> 4280</span>&#160; </div>
<div class="line"><a name="l04281"></a><span class="lineno"> 4281</span>&#160;  <span class="keywordflow">if</span> (XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>()) {</div>
<div class="line"><a name="l04282"></a><span class="lineno"> 4282</span>&#160;    <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *XLD =</div>
<div class="line"><a name="l04283"></a><span class="lineno"> 4283</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(XElemTy, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.Var, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.IsVolatile, <span class="stringliteral">&quot;omp.atomic.read&quot;</span>);</div>
<div class="line"><a name="l04284"></a><span class="lineno"> 4284</span>&#160;    XLD-&gt;<a class="code" href="classllvm_1_1LoadInst.html#a6ae88dc44b078c80ce3a25401fd4b05b">setAtomic</a>(AO);</div>
<div class="line"><a name="l04285"></a><span class="lineno"> 4285</span>&#160;    XRead = cast&lt;Value&gt;(XLD);</div>
<div class="line"><a name="l04286"></a><span class="lineno"> 4286</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04287"></a><span class="lineno"> 4287</span>&#160;    <span class="comment">// We need to bitcast and perform atomic op as integer</span></div>
<div class="line"><a name="l04288"></a><span class="lineno"> 4288</span>&#160;    <span class="keywordtype">unsigned</span> Addrspace = cast&lt;PointerType&gt;(XTy)-&gt;getAddressSpace();</div>
<div class="line"><a name="l04289"></a><span class="lineno"> 4289</span>&#160;    <a class="code" href="classllvm_1_1IntegerType.html">IntegerType</a> *IntCastTy =</div>
<div class="line"><a name="l04290"></a><span class="lineno"> 4290</span>&#160;        <a class="code" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(), XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>());</div>
<div class="line"><a name="l04291"></a><span class="lineno"> 4291</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *XBCast = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(</div>
<div class="line"><a name="l04292"></a><span class="lineno"> 4292</span>&#160;        <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.Var, IntCastTy-&gt;<a class="code" href="classllvm_1_1Type.html#adc01a7457de85fc52a3bb860d7e1c6a4">getPointerTo</a>(Addrspace), <span class="stringliteral">&quot;atomic.src.int.cast&quot;</span>);</div>
<div class="line"><a name="l04293"></a><span class="lineno"> 4293</span>&#160;    <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *XLoad =</div>
<div class="line"><a name="l04294"></a><span class="lineno"> 4294</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(IntCastTy, XBCast, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.IsVolatile, <span class="stringliteral">&quot;omp.atomic.load&quot;</span>);</div>
<div class="line"><a name="l04295"></a><span class="lineno"> 4295</span>&#160;    XLoad-&gt;<a class="code" href="classllvm_1_1LoadInst.html#a6ae88dc44b078c80ce3a25401fd4b05b">setAtomic</a>(AO);</div>
<div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160;    <span class="keywordflow">if</span> (XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#aac5759c83abd6a4af236401a7cfe7a0f">isFloatingPointTy</a>()) {</div>
<div class="line"><a name="l04297"></a><span class="lineno"> 4297</span>&#160;      XRead = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(XLoad, XElemTy, <span class="stringliteral">&quot;atomic.flt.cast&quot;</span>);</div>
<div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160;      XRead = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIntToPtr(XLoad, XElemTy, <span class="stringliteral">&quot;atomic.ptr.cast&quot;</span>);</div>
<div class="line"><a name="l04300"></a><span class="lineno"> 4300</span>&#160;    }</div>
<div class="line"><a name="l04301"></a><span class="lineno"> 4301</span>&#160;  }</div>
<div class="line"><a name="l04302"></a><span class="lineno"> 4302</span>&#160;  checkAndEmitFlushAfterAtomic(Loc, AO, AtomicKind::Read);</div>
<div class="line"><a name="l04303"></a><span class="lineno"> 4303</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(XRead, V.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html#afa06cdaada62e025bfb13b3ca8999963">Var</a>, V.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html#a8405ac1a632edb9252a0d46334f45008">IsVolatile</a>);</div>
<div class="line"><a name="l04304"></a><span class="lineno"> 4304</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP();</div>
<div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160;}</div>
<div class="line"><a name="l04306"></a><span class="lineno"> 4306</span>&#160; </div>
<div class="line"><a name="l04307"></a><span class="lineno"> 4307</span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a></div>
<div class="line"><a name="l04308"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a0e2de2c034e3083d006b92ddf14b8bcf"> 4308</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a0e2de2c034e3083d006b92ddf14b8bcf">OpenMPIRBuilder::createAtomicWrite</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc,</div>
<div class="line"><a name="l04309"></a><span class="lineno"> 4309</span>&#160;                                   <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html">AtomicOpValue</a> &amp;<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *Expr,</div>
<div class="line"><a name="l04310"></a><span class="lineno"> 4310</span>&#160;                                   <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7">AtomicOrdering</a> AO) {</div>
<div class="line"><a name="l04311"></a><span class="lineno"> 4311</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l04312"></a><span class="lineno"> 4312</span>&#160;    <span class="keywordflow">return</span> Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>;</div>
<div class="line"><a name="l04313"></a><span class="lineno"> 4313</span>&#160; </div>
<div class="line"><a name="l04314"></a><span class="lineno"> 4314</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *XTy = <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.Var-&gt;getType();</div>
<div class="line"><a name="l04315"></a><span class="lineno"> 4315</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(XTy-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>() &amp;&amp; <span class="stringliteral">&quot;OMP Atomic expects a pointer to target memory&quot;</span>);</div>
<div class="line"><a name="l04316"></a><span class="lineno"> 4316</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *XElemTy = <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.ElemTy;</div>
<div class="line"><a name="l04317"></a><span class="lineno"> 4317</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#aac5759c83abd6a4af236401a7cfe7a0f">isFloatingPointTy</a>() || XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>() ||</div>
<div class="line"><a name="l04318"></a><span class="lineno"> 4318</span>&#160;          XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>()) &amp;&amp;</div>
<div class="line"><a name="l04319"></a><span class="lineno"> 4319</span>&#160;         <span class="stringliteral">&quot;OMP atomic write expected a scalar type&quot;</span>);</div>
<div class="line"><a name="l04320"></a><span class="lineno"> 4320</span>&#160; </div>
<div class="line"><a name="l04321"></a><span class="lineno"> 4321</span>&#160;  <span class="keywordflow">if</span> (XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>()) {</div>
<div class="line"><a name="l04322"></a><span class="lineno"> 4322</span>&#160;    <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *XSt = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(Expr, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.Var, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.IsVolatile);</div>
<div class="line"><a name="l04323"></a><span class="lineno"> 4323</span>&#160;    XSt-&gt;<a class="code" href="classllvm_1_1StoreInst.html#aff28bd42ac76fc3e1c0e4db7f9e06f2d">setAtomic</a>(AO);</div>
<div class="line"><a name="l04324"></a><span class="lineno"> 4324</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04325"></a><span class="lineno"> 4325</span>&#160;    <span class="comment">// We need to bitcast and perform atomic op as integers</span></div>
<div class="line"><a name="l04326"></a><span class="lineno"> 4326</span>&#160;    <span class="keywordtype">unsigned</span> Addrspace = cast&lt;PointerType&gt;(XTy)-&gt;getAddressSpace();</div>
<div class="line"><a name="l04327"></a><span class="lineno"> 4327</span>&#160;    <a class="code" href="classllvm_1_1IntegerType.html">IntegerType</a> *IntCastTy =</div>
<div class="line"><a name="l04328"></a><span class="lineno"> 4328</span>&#160;        <a class="code" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(), XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>());</div>
<div class="line"><a name="l04329"></a><span class="lineno"> 4329</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *XBCast = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(</div>
<div class="line"><a name="l04330"></a><span class="lineno"> 4330</span>&#160;        <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.Var, IntCastTy-&gt;<a class="code" href="classllvm_1_1Type.html#adc01a7457de85fc52a3bb860d7e1c6a4">getPointerTo</a>(Addrspace), <span class="stringliteral">&quot;atomic.dst.int.cast&quot;</span>);</div>
<div class="line"><a name="l04331"></a><span class="lineno"> 4331</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *ExprCast =</div>
<div class="line"><a name="l04332"></a><span class="lineno"> 4332</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(Expr, IntCastTy, <span class="stringliteral">&quot;atomic.src.int.cast&quot;</span>);</div>
<div class="line"><a name="l04333"></a><span class="lineno"> 4333</span>&#160;    <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *XSt = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(ExprCast, XBCast, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.IsVolatile);</div>
<div class="line"><a name="l04334"></a><span class="lineno"> 4334</span>&#160;    XSt-&gt;<a class="code" href="classllvm_1_1StoreInst.html#aff28bd42ac76fc3e1c0e4db7f9e06f2d">setAtomic</a>(AO);</div>
<div class="line"><a name="l04335"></a><span class="lineno"> 4335</span>&#160;  }</div>
<div class="line"><a name="l04336"></a><span class="lineno"> 4336</span>&#160; </div>
<div class="line"><a name="l04337"></a><span class="lineno"> 4337</span>&#160;  checkAndEmitFlushAfterAtomic(Loc, AO, AtomicKind::Write);</div>
<div class="line"><a name="l04338"></a><span class="lineno"> 4338</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP();</div>
<div class="line"><a name="l04339"></a><span class="lineno"> 4339</span>&#160;}</div>
<div class="line"><a name="l04340"></a><span class="lineno"> 4340</span>&#160; </div>
<div class="line"><a name="l04341"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a26b81f55490c8d7f092710cd5706c2ba"> 4341</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a26b81f55490c8d7f092710cd5706c2ba">OpenMPIRBuilder::createAtomicUpdate</a>(</div>
<div class="line"><a name="l04342"></a><span class="lineno"> 4342</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc, <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> AllocaIP, <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html">AtomicOpValue</a> &amp;<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>,</div>
<div class="line"><a name="l04343"></a><span class="lineno"> 4343</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Expr, <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7">AtomicOrdering</a> AO, <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615">AtomicRMWInst::BinOp</a> RMWOp,</div>
<div class="line"><a name="l04344"></a><span class="lineno"> 4344</span>&#160;    <a class="code" href="classllvm_1_1function__ref.html">AtomicUpdateCallbackTy</a> &amp;UpdateOp, <span class="keywordtype">bool</span> IsXBinopExpr) {</div>
<div class="line"><a name="l04345"></a><span class="lineno"> 4345</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="OMPIRBuilder_8cpp.html#a756b28f370cd5a39bc0ee3e5333b9c9b">isConflictIP</a>(Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>, AllocaIP) &amp;&amp; <span class="stringliteral">&quot;IPs must not be ambiguous&quot;</span>);</div>
<div class="line"><a name="l04346"></a><span class="lineno"> 4346</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l04347"></a><span class="lineno"> 4347</span>&#160;    <span class="keywordflow">return</span> Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>;</div>
<div class="line"><a name="l04348"></a><span class="lineno"> 4348</span>&#160; </div>
<div class="line"><a name="l04349"></a><span class="lineno"> 4349</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>({</div>
<div class="line"><a name="l04350"></a><span class="lineno"> 4350</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *XTy = <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.Var-&gt;getType();</div>
<div class="line"><a name="l04351"></a><span class="lineno"> 4351</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(XTy-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>() &amp;&amp;</div>
<div class="line"><a name="l04352"></a><span class="lineno"> 4352</span>&#160;           <span class="stringliteral">&quot;OMP Atomic expects a pointer to target memory&quot;</span>);</div>
<div class="line"><a name="l04353"></a><span class="lineno"> 4353</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *XElemTy = <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.ElemTy;</div>
<div class="line"><a name="l04354"></a><span class="lineno"> 4354</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#aac5759c83abd6a4af236401a7cfe7a0f">isFloatingPointTy</a>() || XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>() ||</div>
<div class="line"><a name="l04355"></a><span class="lineno"> 4355</span>&#160;            XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>()) &amp;&amp;</div>
<div class="line"><a name="l04356"></a><span class="lineno"> 4356</span>&#160;           <span class="stringliteral">&quot;OMP atomic update expected a scalar type&quot;</span>);</div>
<div class="line"><a name="l04357"></a><span class="lineno"> 4357</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((RMWOp != <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615aa1184a7e35e94d162a2d40f2b11beeb2">AtomicRMWInst::Max</a>) &amp;&amp; (RMWOp != <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a39edb6e51c1ad37244e8b32a2af4077d">AtomicRMWInst::Min</a>) &amp;&amp;</div>
<div class="line"><a name="l04358"></a><span class="lineno"> 4358</span>&#160;           (RMWOp != <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615abe171d96ba8de66fb30e08c00211591e">AtomicRMWInst::UMax</a>) &amp;&amp; (RMWOp != <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615aa53854e09143f57d2ff2ad6ac89dc55d">AtomicRMWInst::UMin</a>) &amp;&amp;</div>
<div class="line"><a name="l04359"></a><span class="lineno"> 4359</span>&#160;           <span class="stringliteral">&quot;OpenMP atomic does not support LT or GT operations&quot;</span>);</div>
<div class="line"><a name="l04360"></a><span class="lineno"> 4360</span>&#160;  });</div>
<div class="line"><a name="l04361"></a><span class="lineno"> 4361</span>&#160; </div>
<div class="line"><a name="l04362"></a><span class="lineno"> 4362</span>&#160;  emitAtomicUpdate(AllocaIP, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.Var, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.ElemTy, Expr, AO, RMWOp, UpdateOp,</div>
<div class="line"><a name="l04363"></a><span class="lineno"> 4363</span>&#160;                   <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.IsVolatile, IsXBinopExpr);</div>
<div class="line"><a name="l04364"></a><span class="lineno"> 4364</span>&#160;  checkAndEmitFlushAfterAtomic(Loc, AO, AtomicKind::Update);</div>
<div class="line"><a name="l04365"></a><span class="lineno"> 4365</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP();</div>
<div class="line"><a name="l04366"></a><span class="lineno"> 4366</span>&#160;}</div>
<div class="line"><a name="l04367"></a><span class="lineno"> 4367</span>&#160; </div>
<div class="line"><a name="l04368"></a><span class="lineno"> 4368</span>&#160;<span class="comment">// FIXME: Duplicating AtomicExpand</span></div>
<div class="line"><a name="l04369"></a><span class="lineno"> 4369</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *OpenMPIRBuilder::emitRMWOpAsInstruction(<a class="code" href="classllvm_1_1Value.html">Value</a> *Src1, <a class="code" href="classllvm_1_1Value.html">Value</a> *Src2,</div>
<div class="line"><a name="l04370"></a><span class="lineno"> 4370</span>&#160;                                               <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615">AtomicRMWInst::BinOp</a> RMWOp) {</div>
<div class="line"><a name="l04371"></a><span class="lineno"> 4371</span>&#160;  <span class="keywordflow">switch</span> (RMWOp) {</div>
<div class="line"><a name="l04372"></a><span class="lineno"> 4372</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a0794c42b44989f9d9f1454d79ca0dd88">AtomicRMWInst::Add</a>:</div>
<div class="line"><a name="l04373"></a><span class="lineno"> 4373</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(Src1, Src2);</div>
<div class="line"><a name="l04374"></a><span class="lineno"> 4374</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a5db6ca0c3e18acd87290f22ccb2ce564">AtomicRMWInst::Sub</a>:</div>
<div class="line"><a name="l04375"></a><span class="lineno"> 4375</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSub(Src1, Src2);</div>
<div class="line"><a name="l04376"></a><span class="lineno"> 4376</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a660a31179bfecd737a256372e5fd6122">AtomicRMWInst::And</a>:</div>
<div class="line"><a name="l04377"></a><span class="lineno"> 4377</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(Src1, Src2);</div>
<div class="line"><a name="l04378"></a><span class="lineno"> 4378</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615afdcdc631cf4fa6829fd7499cd06a306b">AtomicRMWInst::Nand</a>:</div>
<div class="line"><a name="l04379"></a><span class="lineno"> 4379</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNeg(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(Src1, Src2));</div>
<div class="line"><a name="l04380"></a><span class="lineno"> 4380</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a5954f59053121b87ebe0c5fe79942c6e">AtomicRMWInst::Or</a>:</div>
<div class="line"><a name="l04381"></a><span class="lineno"> 4381</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateOr(Src1, Src2);</div>
<div class="line"><a name="l04382"></a><span class="lineno"> 4382</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a71aab8ee954b6d71a4eed315e8f6556e">AtomicRMWInst::Xor</a>:</div>
<div class="line"><a name="l04383"></a><span class="lineno"> 4383</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateXor(Src1, Src2);</div>
<div class="line"><a name="l04384"></a><span class="lineno"> 4384</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615afc870a548088c5b7a93a34f648889d77">AtomicRMWInst::Xchg</a>:</div>
<div class="line"><a name="l04385"></a><span class="lineno"> 4385</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a08ef06068dcd583c2476568dda59b324">AtomicRMWInst::FAdd</a>:</div>
<div class="line"><a name="l04386"></a><span class="lineno"> 4386</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a92f66d4bc04fc8514bee80509f3e78d4">AtomicRMWInst::FSub</a>:</div>
<div class="line"><a name="l04387"></a><span class="lineno"> 4387</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a497e8f347648b1b2823ee0338c95f65f">AtomicRMWInst::BAD_BINOP</a>:</div>
<div class="line"><a name="l04388"></a><span class="lineno"> 4388</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615aa1184a7e35e94d162a2d40f2b11beeb2">AtomicRMWInst::Max</a>:</div>
<div class="line"><a name="l04389"></a><span class="lineno"> 4389</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a39edb6e51c1ad37244e8b32a2af4077d">AtomicRMWInst::Min</a>:</div>
<div class="line"><a name="l04390"></a><span class="lineno"> 4390</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615abe171d96ba8de66fb30e08c00211591e">AtomicRMWInst::UMax</a>:</div>
<div class="line"><a name="l04391"></a><span class="lineno"> 4391</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615aa53854e09143f57d2ff2ad6ac89dc55d">AtomicRMWInst::UMin</a>:</div>
<div class="line"><a name="l04392"></a><span class="lineno"> 4392</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615acce124326ba87b0127b36c412bf555fd">AtomicRMWInst::FMax</a>:</div>
<div class="line"><a name="l04393"></a><span class="lineno"> 4393</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615abd5e733a10a36f3572105b1a67538e18">AtomicRMWInst::FMin</a>:</div>
<div class="line"><a name="l04394"></a><span class="lineno"> 4394</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a9334c9815ddc2b25804c6c03b68cc39b">AtomicRMWInst::UIncWrap</a>:</div>
<div class="line"><a name="l04395"></a><span class="lineno"> 4395</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615ad3ed1a8c334bc3a50d59aaa57ee9e9f3">AtomicRMWInst::UDecWrap</a>:</div>
<div class="line"><a name="l04396"></a><span class="lineno"> 4396</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unsupported atomic update operation&quot;</span>);</div>
<div class="line"><a name="l04397"></a><span class="lineno"> 4397</span>&#160;  }</div>
<div class="line"><a name="l04398"></a><span class="lineno"> 4398</span>&#160;  <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unsupported atomic update operation&quot;</span>);</div>
<div class="line"><a name="l04399"></a><span class="lineno"> 4399</span>&#160;}</div>
<div class="line"><a name="l04400"></a><span class="lineno"> 4400</span>&#160; </div>
<div class="line"><a name="l04401"></a><span class="lineno"> 4401</span>&#160;std::pair&lt;Value *, Value *&gt; OpenMPIRBuilder::emitAtomicUpdate(</div>
<div class="line"><a name="l04402"></a><span class="lineno"> 4402</span>&#160;    InsertPointTy AllocaIP, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1Type.html">Type</a> *XElemTy, <a class="code" href="classllvm_1_1Value.html">Value</a> *Expr,</div>
<div class="line"><a name="l04403"></a><span class="lineno"> 4403</span>&#160;    <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7">AtomicOrdering</a> AO, <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615">AtomicRMWInst::BinOp</a> RMWOp,</div>
<div class="line"><a name="l04404"></a><span class="lineno"> 4404</span>&#160;    AtomicUpdateCallbackTy &amp;UpdateOp, <span class="keywordtype">bool</span> VolatileX, <span class="keywordtype">bool</span> IsXBinopExpr) {</div>
<div class="line"><a name="l04405"></a><span class="lineno"> 4405</span>&#160;  <span class="comment">// TODO: handle the case where XElemTy is not byte-sized or not a power of 2</span></div>
<div class="line"><a name="l04406"></a><span class="lineno"> 4406</span>&#160;  <span class="comment">// or a complex datatype.</span></div>
<div class="line"><a name="l04407"></a><span class="lineno"> 4407</span>&#160;  <span class="keywordtype">bool</span> emitRMWOp = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04408"></a><span class="lineno"> 4408</span>&#160;  <span class="keywordflow">switch</span> (RMWOp) {</div>
<div class="line"><a name="l04409"></a><span class="lineno"> 4409</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a0794c42b44989f9d9f1454d79ca0dd88">AtomicRMWInst::Add</a>:</div>
<div class="line"><a name="l04410"></a><span class="lineno"> 4410</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a660a31179bfecd737a256372e5fd6122">AtomicRMWInst::And</a>:</div>
<div class="line"><a name="l04411"></a><span class="lineno"> 4411</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615afdcdc631cf4fa6829fd7499cd06a306b">AtomicRMWInst::Nand</a>:</div>
<div class="line"><a name="l04412"></a><span class="lineno"> 4412</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a5954f59053121b87ebe0c5fe79942c6e">AtomicRMWInst::Or</a>:</div>
<div class="line"><a name="l04413"></a><span class="lineno"> 4413</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a71aab8ee954b6d71a4eed315e8f6556e">AtomicRMWInst::Xor</a>:</div>
<div class="line"><a name="l04414"></a><span class="lineno"> 4414</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615afc870a548088c5b7a93a34f648889d77">AtomicRMWInst::Xchg</a>:</div>
<div class="line"><a name="l04415"></a><span class="lineno"> 4415</span>&#160;    emitRMWOp = XElemTy;</div>
<div class="line"><a name="l04416"></a><span class="lineno"> 4416</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04417"></a><span class="lineno"> 4417</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a5db6ca0c3e18acd87290f22ccb2ce564">AtomicRMWInst::Sub</a>:</div>
<div class="line"><a name="l04418"></a><span class="lineno"> 4418</span>&#160;    emitRMWOp = (IsXBinopExpr &amp;&amp; XElemTy);</div>
<div class="line"><a name="l04419"></a><span class="lineno"> 4419</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04420"></a><span class="lineno"> 4420</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l04421"></a><span class="lineno"> 4421</span>&#160;    emitRMWOp = <span class="keyword">false</span>;</div>
<div class="line"><a name="l04422"></a><span class="lineno"> 4422</span>&#160;  }</div>
<div class="line"><a name="l04423"></a><span class="lineno"> 4423</span>&#160;  emitRMWOp &amp;= XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>();</div>
<div class="line"><a name="l04424"></a><span class="lineno"> 4424</span>&#160; </div>
<div class="line"><a name="l04425"></a><span class="lineno"> 4425</span>&#160;  std::pair&lt;Value *, Value *&gt; Res;</div>
<div class="line"><a name="l04426"></a><span class="lineno"> 4426</span>&#160;  <span class="keywordflow">if</span> (emitRMWOp) {</div>
<div class="line"><a name="l04427"></a><span class="lineno"> 4427</span>&#160;    Res.first = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAtomicRMW(RMWOp, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, Expr, <a class="code" href="structllvm_1_1MaybeAlign.html">llvm::MaybeAlign</a>(), AO);</div>
<div class="line"><a name="l04428"></a><span class="lineno"> 4428</span>&#160;    <span class="comment">// not needed except in case of postfix captures. Generate anyway for</span></div>
<div class="line"><a name="l04429"></a><span class="lineno"> 4429</span>&#160;    <span class="comment">// consistency with the else part. Will be removed with any DCE pass.</span></div>
<div class="line"><a name="l04430"></a><span class="lineno"> 4430</span>&#160;    <span class="comment">// AtomicRMWInst::Xchg does not have a coressponding instruction.</span></div>
<div class="line"><a name="l04431"></a><span class="lineno"> 4431</span>&#160;    <span class="keywordflow">if</span> (RMWOp == <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615afc870a548088c5b7a93a34f648889d77">AtomicRMWInst::Xchg</a>)</div>
<div class="line"><a name="l04432"></a><span class="lineno"> 4432</span>&#160;      Res.second = Res.first;</div>
<div class="line"><a name="l04433"></a><span class="lineno"> 4433</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l04434"></a><span class="lineno"> 4434</span>&#160;      Res.second = emitRMWOpAsInstruction(Res.first, Expr, RMWOp);</div>
<div class="line"><a name="l04435"></a><span class="lineno"> 4435</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04436"></a><span class="lineno"> 4436</span>&#160;    <span class="keywordtype">unsigned</span> Addrspace = cast&lt;PointerType&gt;(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType())-&gt;getAddressSpace();</div>
<div class="line"><a name="l04437"></a><span class="lineno"> 4437</span>&#160;    <a class="code" href="classllvm_1_1IntegerType.html">IntegerType</a> *IntCastTy =</div>
<div class="line"><a name="l04438"></a><span class="lineno"> 4438</span>&#160;        <a class="code" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(), XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>());</div>
<div class="line"><a name="l04439"></a><span class="lineno"> 4439</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *XBCast =</div>
<div class="line"><a name="l04440"></a><span class="lineno"> 4440</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, IntCastTy-&gt;<a class="code" href="classllvm_1_1Type.html#adc01a7457de85fc52a3bb860d7e1c6a4">getPointerTo</a>(Addrspace));</div>
<div class="line"><a name="l04441"></a><span class="lineno"> 4441</span>&#160;    <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *OldVal =</div>
<div class="line"><a name="l04442"></a><span class="lineno"> 4442</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(IntCastTy, XBCast, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getName() + <span class="stringliteral">&quot;.atomic.load&quot;</span>);</div>
<div class="line"><a name="l04443"></a><span class="lineno"> 4443</span>&#160;    OldVal-&gt;<a class="code" href="classllvm_1_1LoadInst.html#a6ae88dc44b078c80ce3a25401fd4b05b">setAtomic</a>(AO);</div>
<div class="line"><a name="l04444"></a><span class="lineno"> 4444</span>&#160;    <span class="comment">// CurBB</span></div>
<div class="line"><a name="l04445"></a><span class="lineno"> 4445</span>&#160;    <span class="comment">// |     /---\</span></div>
<div class="line"><a name="l04446"></a><span class="lineno"> 4446</span>&#160;<span class="comment">    // ContBB    |</span></div>
<div class="line"><a name="l04447"></a><span class="lineno"> 4447</span>&#160;    <span class="comment">// |     \---/</span></div>
<div class="line"><a name="l04448"></a><span class="lineno"> 4448</span>&#160;    <span class="comment">// ExitBB</span></div>
<div class="line"><a name="l04449"></a><span class="lineno"> 4449</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *CurBB = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.GetInsertBlock();</div>
<div class="line"><a name="l04450"></a><span class="lineno"> 4450</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *CurBBTI = CurBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>();</div>
<div class="line"><a name="l04451"></a><span class="lineno"> 4451</span>&#160;    CurBBTI = CurBBTI ? CurBBTI : <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateUnreachable();</div>
<div class="line"><a name="l04452"></a><span class="lineno"> 4452</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitBB =</div>
<div class="line"><a name="l04453"></a><span class="lineno"> 4453</span>&#160;        CurBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a52c990590792c91dd20b6d45acebe359">splitBasicBlock</a>(CurBBTI, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getName() + <span class="stringliteral">&quot;.atomic.exit&quot;</span>);</div>
<div class="line"><a name="l04454"></a><span class="lineno"> 4454</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ContBB = CurBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a52c990590792c91dd20b6d45acebe359">splitBasicBlock</a>(CurBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>(),</div>
<div class="line"><a name="l04455"></a><span class="lineno"> 4455</span>&#160;                                                <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getName() + <span class="stringliteral">&quot;.atomic.cont&quot;</span>);</div>
<div class="line"><a name="l04456"></a><span class="lineno"> 4456</span>&#160;    ContBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l04457"></a><span class="lineno"> 4457</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(AllocaIP);</div>
<div class="line"><a name="l04458"></a><span class="lineno"> 4458</span>&#160;    <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *NewAtomicAddr = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(XElemTy);</div>
<div class="line"><a name="l04459"></a><span class="lineno"> 4459</span>&#160;    NewAtomicAddr-&gt;<a class="code" href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">setName</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getName() + <span class="stringliteral">&quot;x.new.val&quot;</span>);</div>
<div class="line"><a name="l04460"></a><span class="lineno"> 4460</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(ContBB);</div>
<div class="line"><a name="l04461"></a><span class="lineno"> 4461</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">llvm::PHINode</a> *<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreatePHI(OldVal-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), 2);</div>
<div class="line"><a name="l04462"></a><span class="lineno"> 4462</span>&#160;    <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;addIncoming(OldVal, CurBB);</div>
<div class="line"><a name="l04463"></a><span class="lineno"> 4463</span>&#160;    <a class="code" href="classllvm_1_1IntegerType.html">IntegerType</a> *NewAtomicCastTy =</div>
<div class="line"><a name="l04464"></a><span class="lineno"> 4464</span>&#160;        <a class="code" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(), XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>());</div>
<div class="line"><a name="l04465"></a><span class="lineno"> 4465</span>&#160;    <span class="keywordtype">bool</span> IsIntTy = XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>();</div>
<div class="line"><a name="l04466"></a><span class="lineno"> 4466</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewAtomicIntAddr =</div>
<div class="line"><a name="l04467"></a><span class="lineno"> 4467</span>&#160;        (IsIntTy)</div>
<div class="line"><a name="l04468"></a><span class="lineno"> 4468</span>&#160;            ? NewAtomicAddr</div>
<div class="line"><a name="l04469"></a><span class="lineno"> 4469</span>&#160;            : <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(NewAtomicAddr,</div>
<div class="line"><a name="l04470"></a><span class="lineno"> 4470</span>&#160;                                    NewAtomicCastTy-&gt;<a class="code" href="classllvm_1_1Type.html#adc01a7457de85fc52a3bb860d7e1c6a4">getPointerTo</a>(Addrspace));</div>
<div class="line"><a name="l04471"></a><span class="lineno"> 4471</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *OldExprVal = <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>;</div>
<div class="line"><a name="l04472"></a><span class="lineno"> 4472</span>&#160;    <span class="keywordflow">if</span> (!IsIntTy) {</div>
<div class="line"><a name="l04473"></a><span class="lineno"> 4473</span>&#160;      <span class="keywordflow">if</span> (XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#aac5759c83abd6a4af236401a7cfe7a0f">isFloatingPointTy</a>()) {</div>
<div class="line"><a name="l04474"></a><span class="lineno"> 4474</span>&#160;        OldExprVal = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>, XElemTy,</div>
<div class="line"><a name="l04475"></a><span class="lineno"> 4475</span>&#160;                                           <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getName() + <span class="stringliteral">&quot;.atomic.fltCast&quot;</span>);</div>
<div class="line"><a name="l04476"></a><span class="lineno"> 4476</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04477"></a><span class="lineno"> 4477</span>&#160;        OldExprVal = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIntToPtr(<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>, XElemTy,</div>
<div class="line"><a name="l04478"></a><span class="lineno"> 4478</span>&#160;                                            <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getName() + <span class="stringliteral">&quot;.atomic.ptrCast&quot;</span>);</div>
<div class="line"><a name="l04479"></a><span class="lineno"> 4479</span>&#160;      }</div>
<div class="line"><a name="l04480"></a><span class="lineno"> 4480</span>&#160;    }</div>
<div class="line"><a name="l04481"></a><span class="lineno"> 4481</span>&#160; </div>
<div class="line"><a name="l04482"></a><span class="lineno"> 4482</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Upd = UpdateOp(OldExprVal, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l04483"></a><span class="lineno"> 4483</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(Upd, NewAtomicAddr);</div>
<div class="line"><a name="l04484"></a><span class="lineno"> 4484</span>&#160;    <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *DesiredVal = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(IntCastTy, NewAtomicIntAddr);</div>
<div class="line"><a name="l04485"></a><span class="lineno"> 4485</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *XAddr =</div>
<div class="line"><a name="l04486"></a><span class="lineno"> 4486</span>&#160;        (IsIntTy)</div>
<div class="line"><a name="l04487"></a><span class="lineno"> 4487</span>&#160;            ? <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a></div>
<div class="line"><a name="l04488"></a><span class="lineno"> 4488</span>&#160;            : <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, IntCastTy-&gt;<a class="code" href="classllvm_1_1Type.html#adc01a7457de85fc52a3bb860d7e1c6a4">getPointerTo</a>(Addrspace));</div>
<div class="line"><a name="l04489"></a><span class="lineno"> 4489</span>&#160;    <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7">AtomicOrdering</a> <a class="code" href="namespacellvm_1_1remarks.html#aeb5853e98ae4d9ab7cb002879736527fae139a585510a502bbf1841cf589f5086">Failure</a> =</div>
<div class="line"><a name="l04490"></a><span class="lineno"> 4490</span>&#160;        <a class="code" href="classllvm_1_1AtomicCmpXchgInst.html#a7ce03ab5b2a6006ebcdfe804e4c8f1a1">llvm::AtomicCmpXchgInst::getStrongestFailureOrdering</a>(AO);</div>
<div class="line"><a name="l04491"></a><span class="lineno"> 4491</span>&#160;    <a class="code" href="classllvm_1_1AtomicCmpXchgInst.html">AtomicCmpXchgInst</a> *<a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAtomicCmpXchg(</div>
<div class="line"><a name="l04492"></a><span class="lineno"> 4492</span>&#160;        XAddr, <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>, DesiredVal, <a class="code" href="structllvm_1_1MaybeAlign.html">llvm::MaybeAlign</a>(), AO, Failure);</div>
<div class="line"><a name="l04493"></a><span class="lineno"> 4493</span>&#160;    <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">Result</a>-&gt;setVolatile(VolatileX);</div>
<div class="line"><a name="l04494"></a><span class="lineno"> 4494</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *PreviousVal = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateExtractValue(Result, <span class="comment">/*Idxs=*/</span>0);</div>
<div class="line"><a name="l04495"></a><span class="lineno"> 4495</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *SuccessFailureVal = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateExtractValue(Result, <span class="comment">/*Idxs=*/</span>1);</div>
<div class="line"><a name="l04496"></a><span class="lineno"> 4496</span>&#160;    <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>-&gt;addIncoming(PreviousVal, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.GetInsertBlock());</div>
<div class="line"><a name="l04497"></a><span class="lineno"> 4497</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCondBr(SuccessFailureVal, ExitBB, ContBB);</div>
<div class="line"><a name="l04498"></a><span class="lineno"> 4498</span>&#160; </div>
<div class="line"><a name="l04499"></a><span class="lineno"> 4499</span>&#160;    Res.first = OldExprVal;</div>
<div class="line"><a name="l04500"></a><span class="lineno"> 4500</span>&#160;    Res.second = Upd;</div>
<div class="line"><a name="l04501"></a><span class="lineno"> 4501</span>&#160; </div>
<div class="line"><a name="l04502"></a><span class="lineno"> 4502</span>&#160;    <span class="comment">// set Insertion point in exit block</span></div>
<div class="line"><a name="l04503"></a><span class="lineno"> 4503</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1UnreachableInst.html">UnreachableInst</a> *ExitTI =</div>
<div class="line"><a name="l04504"></a><span class="lineno"> 4504</span>&#160;            dyn_cast&lt;UnreachableInst&gt;(ExitBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>())) {</div>
<div class="line"><a name="l04505"></a><span class="lineno"> 4505</span>&#160;      CurBBTI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l04506"></a><span class="lineno"> 4506</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(ExitBB);</div>
<div class="line"><a name="l04507"></a><span class="lineno"> 4507</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04508"></a><span class="lineno"> 4508</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(ExitTI);</div>
<div class="line"><a name="l04509"></a><span class="lineno"> 4509</span>&#160;    }</div>
<div class="line"><a name="l04510"></a><span class="lineno"> 4510</span>&#160;  }</div>
<div class="line"><a name="l04511"></a><span class="lineno"> 4511</span>&#160; </div>
<div class="line"><a name="l04512"></a><span class="lineno"> 4512</span>&#160;  <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l04513"></a><span class="lineno"> 4513</span>&#160;}</div>
<div class="line"><a name="l04514"></a><span class="lineno"> 4514</span>&#160; </div>
<div class="line"><a name="l04515"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a17e1669bb979d608af88a5543c437779"> 4515</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a17e1669bb979d608af88a5543c437779">OpenMPIRBuilder::createAtomicCapture</a>(</div>
<div class="line"><a name="l04516"></a><span class="lineno"> 4516</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc, <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> AllocaIP, <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html">AtomicOpValue</a> &amp;<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>,</div>
<div class="line"><a name="l04517"></a><span class="lineno"> 4517</span>&#160;    <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html">AtomicOpValue</a> &amp;V, <a class="code" href="classllvm_1_1Value.html">Value</a> *Expr, <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7">AtomicOrdering</a> AO,</div>
<div class="line"><a name="l04518"></a><span class="lineno"> 4518</span>&#160;    <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615">AtomicRMWInst::BinOp</a> RMWOp, <a class="code" href="classllvm_1_1function__ref.html">AtomicUpdateCallbackTy</a> &amp;UpdateOp,</div>
<div class="line"><a name="l04519"></a><span class="lineno"> 4519</span>&#160;    <span class="keywordtype">bool</span> UpdateExpr, <span class="keywordtype">bool</span> IsPostfixUpdate, <span class="keywordtype">bool</span> IsXBinopExpr) {</div>
<div class="line"><a name="l04520"></a><span class="lineno"> 4520</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l04521"></a><span class="lineno"> 4521</span>&#160;    <span class="keywordflow">return</span> Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>;</div>
<div class="line"><a name="l04522"></a><span class="lineno"> 4522</span>&#160; </div>
<div class="line"><a name="l04523"></a><span class="lineno"> 4523</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>({</div>
<div class="line"><a name="l04524"></a><span class="lineno"> 4524</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *XTy = <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.Var-&gt;getType();</div>
<div class="line"><a name="l04525"></a><span class="lineno"> 4525</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(XTy-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>() &amp;&amp;</div>
<div class="line"><a name="l04526"></a><span class="lineno"> 4526</span>&#160;           <span class="stringliteral">&quot;OMP Atomic expects a pointer to target memory&quot;</span>);</div>
<div class="line"><a name="l04527"></a><span class="lineno"> 4527</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *XElemTy = <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.ElemTy;</div>
<div class="line"><a name="l04528"></a><span class="lineno"> 4528</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#aac5759c83abd6a4af236401a7cfe7a0f">isFloatingPointTy</a>() || XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>() ||</div>
<div class="line"><a name="l04529"></a><span class="lineno"> 4529</span>&#160;            XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>()) &amp;&amp;</div>
<div class="line"><a name="l04530"></a><span class="lineno"> 4530</span>&#160;           <span class="stringliteral">&quot;OMP atomic capture expected a scalar type&quot;</span>);</div>
<div class="line"><a name="l04531"></a><span class="lineno"> 4531</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((RMWOp != <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615aa1184a7e35e94d162a2d40f2b11beeb2">AtomicRMWInst::Max</a>) &amp;&amp; (RMWOp != <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a39edb6e51c1ad37244e8b32a2af4077d">AtomicRMWInst::Min</a>) &amp;&amp;</div>
<div class="line"><a name="l04532"></a><span class="lineno"> 4532</span>&#160;           <span class="stringliteral">&quot;OpenMP atomic does not support LT or GT operations&quot;</span>);</div>
<div class="line"><a name="l04533"></a><span class="lineno"> 4533</span>&#160;  });</div>
<div class="line"><a name="l04534"></a><span class="lineno"> 4534</span>&#160; </div>
<div class="line"><a name="l04535"></a><span class="lineno"> 4535</span>&#160;  <span class="comment">// If UpdateExpr is &#39;x&#39; updated with some `expr` not based on &#39;x&#39;,</span></div>
<div class="line"><a name="l04536"></a><span class="lineno"> 4536</span>&#160;  <span class="comment">// &#39;x&#39; is simply atomically rewritten with &#39;expr&#39;.</span></div>
<div class="line"><a name="l04537"></a><span class="lineno"> 4537</span>&#160;  <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615">AtomicRMWInst::BinOp</a> AtomicOp = (UpdateExpr ? RMWOp : <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615afc870a548088c5b7a93a34f648889d77">AtomicRMWInst::Xchg</a>);</div>
<div class="line"><a name="l04538"></a><span class="lineno"> 4538</span>&#160;  std::pair&lt;Value *, Value *&gt; Result =</div>
<div class="line"><a name="l04539"></a><span class="lineno"> 4539</span>&#160;      emitAtomicUpdate(AllocaIP, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.Var, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.ElemTy, Expr, AO, AtomicOp, UpdateOp,</div>
<div class="line"><a name="l04540"></a><span class="lineno"> 4540</span>&#160;                       <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.IsVolatile, IsXBinopExpr);</div>
<div class="line"><a name="l04541"></a><span class="lineno"> 4541</span>&#160; </div>
<div class="line"><a name="l04542"></a><span class="lineno"> 4542</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CapturedVal = (IsPostfixUpdate ? Result.first : Result.second);</div>
<div class="line"><a name="l04543"></a><span class="lineno"> 4543</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(CapturedVal, V.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html#afa06cdaada62e025bfb13b3ca8999963">Var</a>, V.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html#a8405ac1a632edb9252a0d46334f45008">IsVolatile</a>);</div>
<div class="line"><a name="l04544"></a><span class="lineno"> 4544</span>&#160; </div>
<div class="line"><a name="l04545"></a><span class="lineno"> 4545</span>&#160;  checkAndEmitFlushAfterAtomic(Loc, AO, AtomicKind::Capture);</div>
<div class="line"><a name="l04546"></a><span class="lineno"> 4546</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP();</div>
<div class="line"><a name="l04547"></a><span class="lineno"> 4547</span>&#160;}</div>
<div class="line"><a name="l04548"></a><span class="lineno"> 4548</span>&#160; </div>
<div class="line"><a name="l04549"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a6c4eeba23c6f192892487de272e8ce72"> 4549</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a6c4eeba23c6f192892487de272e8ce72">OpenMPIRBuilder::createAtomicCompare</a>(</div>
<div class="line"><a name="l04550"></a><span class="lineno"> 4550</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc, <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html">AtomicOpValue</a> &amp;<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html">AtomicOpValue</a> &amp;V,</div>
<div class="line"><a name="l04551"></a><span class="lineno"> 4551</span>&#160;    <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html">AtomicOpValue</a> &amp;R, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7">AtomicOrdering</a> AO,</div>
<div class="line"><a name="l04552"></a><span class="lineno"> 4552</span>&#160;    <a class="code" href="namespacellvm_1_1omp.html#acb593a387130148478f3c30af0d322df">omp::OMPAtomicCompareOp</a> <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, <span class="keywordtype">bool</span> IsXBinopExpr, <span class="keywordtype">bool</span> IsPostfixUpdate,</div>
<div class="line"><a name="l04553"></a><span class="lineno"> 4553</span>&#160;    <span class="keywordtype">bool</span> IsFailOnly) {</div>
<div class="line"><a name="l04554"></a><span class="lineno"> 4554</span>&#160; </div>
<div class="line"><a name="l04555"></a><span class="lineno"> 4555</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l04556"></a><span class="lineno"> 4556</span>&#160;    <span class="keywordflow">return</span> Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>;</div>
<div class="line"><a name="l04557"></a><span class="lineno"> 4557</span>&#160; </div>
<div class="line"><a name="l04558"></a><span class="lineno"> 4558</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.Var-&gt;getType()-&gt;isPointerTy() &amp;&amp;</div>
<div class="line"><a name="l04559"></a><span class="lineno"> 4559</span>&#160;         <span class="stringliteral">&quot;OMP atomic expects a pointer to target memory&quot;</span>);</div>
<div class="line"><a name="l04560"></a><span class="lineno"> 4560</span>&#160;  <span class="comment">// compare capture</span></div>
<div class="line"><a name="l04561"></a><span class="lineno"> 4561</span>&#160;  <span class="keywordflow">if</span> (V.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html#afa06cdaada62e025bfb13b3ca8999963">Var</a>) {</div>
<div class="line"><a name="l04562"></a><span class="lineno"> 4562</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(V.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html#afa06cdaada62e025bfb13b3ca8999963">Var</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>() &amp;&amp; <span class="stringliteral">&quot;v.var must be of pointer type&quot;</span>);</div>
<div class="line"><a name="l04563"></a><span class="lineno"> 4563</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(V.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html#ae8ed82c3d82f5df97d8ebb3f77cc8dfa">ElemTy</a> == <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.ElemTy &amp;&amp; <span class="stringliteral">&quot;x and v must be of same type&quot;</span>);</div>
<div class="line"><a name="l04564"></a><span class="lineno"> 4564</span>&#160;  }</div>
<div class="line"><a name="l04565"></a><span class="lineno"> 4565</span>&#160; </div>
<div class="line"><a name="l04566"></a><span class="lineno"> 4566</span>&#160;  <span class="keywordtype">bool</span> IsInteger = <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>-&gt;getType()-&gt;isIntegerTy();</div>
<div class="line"><a name="l04567"></a><span class="lineno"> 4567</span>&#160; </div>
<div class="line"><a name="l04568"></a><span class="lineno"> 4568</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> == <a class="code" href="namespacellvm_1_1omp.html#acb593a387130148478f3c30af0d322dfa2dcbad7477fd40561e8b8198f173bd47">OMPAtomicCompareOp::EQ</a>) {</div>
<div class="line"><a name="l04569"></a><span class="lineno"> 4569</span>&#160;    <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7">AtomicOrdering</a> Failure = <a class="code" href="classllvm_1_1AtomicCmpXchgInst.html#a7ce03ab5b2a6006ebcdfe804e4c8f1a1">AtomicCmpXchgInst::getStrongestFailureOrdering</a>(AO);</div>
<div class="line"><a name="l04570"></a><span class="lineno"> 4570</span>&#160;    <a class="code" href="classllvm_1_1AtomicCmpXchgInst.html">AtomicCmpXchgInst</a> *Result = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04571"></a><span class="lineno"> 4571</span>&#160;    <span class="keywordflow">if</span> (!IsInteger) {</div>
<div class="line"><a name="l04572"></a><span class="lineno"> 4572</span>&#160;      <span class="keywordtype">unsigned</span> Addrspace =</div>
<div class="line"><a name="l04573"></a><span class="lineno"> 4573</span>&#160;          cast&lt;PointerType&gt;(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.Var-&gt;getType())-&gt;getAddressSpace();</div>
<div class="line"><a name="l04574"></a><span class="lineno"> 4574</span>&#160;      <a class="code" href="classllvm_1_1IntegerType.html">IntegerType</a> *IntCastTy =</div>
<div class="line"><a name="l04575"></a><span class="lineno"> 4575</span>&#160;          <a class="code" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(), <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.ElemTy-&gt;getScalarSizeInBits());</div>
<div class="line"><a name="l04576"></a><span class="lineno"> 4576</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *XBCast =</div>
<div class="line"><a name="l04577"></a><span class="lineno"> 4577</span>&#160;          <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.Var, IntCastTy-&gt;<a class="code" href="classllvm_1_1Type.html#adc01a7457de85fc52a3bb860d7e1c6a4">getPointerTo</a>(Addrspace));</div>
<div class="line"><a name="l04578"></a><span class="lineno"> 4578</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *EBCast = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, IntCastTy);</div>
<div class="line"><a name="l04579"></a><span class="lineno"> 4579</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *DBCast = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, IntCastTy);</div>
<div class="line"><a name="l04580"></a><span class="lineno"> 4580</span>&#160;      Result = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAtomicCmpXchg(XBCast, EBCast, DBCast, <a class="code" href="structllvm_1_1MaybeAlign.html">MaybeAlign</a>(),</div>
<div class="line"><a name="l04581"></a><span class="lineno"> 4581</span>&#160;                                           AO, Failure);</div>
<div class="line"><a name="l04582"></a><span class="lineno"> 4582</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04583"></a><span class="lineno"> 4583</span>&#160;      Result =</div>
<div class="line"><a name="l04584"></a><span class="lineno"> 4584</span>&#160;          <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAtomicCmpXchg(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.Var, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, <a class="code" href="structllvm_1_1MaybeAlign.html">MaybeAlign</a>(), AO, Failure);</div>
<div class="line"><a name="l04585"></a><span class="lineno"> 4585</span>&#160;    }</div>
<div class="line"><a name="l04586"></a><span class="lineno"> 4586</span>&#160; </div>
<div class="line"><a name="l04587"></a><span class="lineno"> 4587</span>&#160;    <span class="keywordflow">if</span> (V.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html#afa06cdaada62e025bfb13b3ca8999963">Var</a>) {</div>
<div class="line"><a name="l04588"></a><span class="lineno"> 4588</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *OldValue = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateExtractValue(Result, <span class="comment">/*Idxs=*/</span>0);</div>
<div class="line"><a name="l04589"></a><span class="lineno"> 4589</span>&#160;      <span class="keywordflow">if</span> (!IsInteger)</div>
<div class="line"><a name="l04590"></a><span class="lineno"> 4590</span>&#160;        OldValue = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(OldValue, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.ElemTy);</div>
<div class="line"><a name="l04591"></a><span class="lineno"> 4591</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(OldValue-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() == V.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html#ae8ed82c3d82f5df97d8ebb3f77cc8dfa">ElemTy</a> &amp;&amp;</div>
<div class="line"><a name="l04592"></a><span class="lineno"> 4592</span>&#160;             <span class="stringliteral">&quot;OldValue and V must be of same type&quot;</span>);</div>
<div class="line"><a name="l04593"></a><span class="lineno"> 4593</span>&#160;      <span class="keywordflow">if</span> (IsPostfixUpdate) {</div>
<div class="line"><a name="l04594"></a><span class="lineno"> 4594</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(OldValue, V.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html#afa06cdaada62e025bfb13b3ca8999963">Var</a>, V.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html#a8405ac1a632edb9252a0d46334f45008">IsVolatile</a>);</div>
<div class="line"><a name="l04595"></a><span class="lineno"> 4595</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04596"></a><span class="lineno"> 4596</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *SuccessOrFail = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateExtractValue(Result, <span class="comment">/*Idxs=*/</span>1);</div>
<div class="line"><a name="l04597"></a><span class="lineno"> 4597</span>&#160;        <span class="keywordflow">if</span> (IsFailOnly) {</div>
<div class="line"><a name="l04598"></a><span class="lineno"> 4598</span>&#160;          <span class="comment">// CurBB----</span></div>
<div class="line"><a name="l04599"></a><span class="lineno"> 4599</span>&#160;          <span class="comment">//   |     |</span></div>
<div class="line"><a name="l04600"></a><span class="lineno"> 4600</span>&#160;          <span class="comment">//   v     |</span></div>
<div class="line"><a name="l04601"></a><span class="lineno"> 4601</span>&#160;          <span class="comment">// ContBB  |</span></div>
<div class="line"><a name="l04602"></a><span class="lineno"> 4602</span>&#160;          <span class="comment">//   |     |</span></div>
<div class="line"><a name="l04603"></a><span class="lineno"> 4603</span>&#160;          <span class="comment">//   v     |</span></div>
<div class="line"><a name="l04604"></a><span class="lineno"> 4604</span>&#160;          <span class="comment">// ExitBB &lt;-</span></div>
<div class="line"><a name="l04605"></a><span class="lineno"> 4605</span>&#160;          <span class="comment">//</span></div>
<div class="line"><a name="l04606"></a><span class="lineno"> 4606</span>&#160;          <span class="comment">// where ContBB only contains the store of old value to &#39;v&#39;.</span></div>
<div class="line"><a name="l04607"></a><span class="lineno"> 4607</span>&#160;          <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *CurBB = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.GetInsertBlock();</div>
<div class="line"><a name="l04608"></a><span class="lineno"> 4608</span>&#160;          <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *CurBBTI = CurBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>();</div>
<div class="line"><a name="l04609"></a><span class="lineno"> 4609</span>&#160;          CurBBTI = CurBBTI ? CurBBTI : <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateUnreachable();</div>
<div class="line"><a name="l04610"></a><span class="lineno"> 4610</span>&#160;          <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitBB = CurBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a52c990590792c91dd20b6d45acebe359">splitBasicBlock</a>(</div>
<div class="line"><a name="l04611"></a><span class="lineno"> 4611</span>&#160;              CurBBTI, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.Var-&gt;getName() + <span class="stringliteral">&quot;.atomic.exit&quot;</span>);</div>
<div class="line"><a name="l04612"></a><span class="lineno"> 4612</span>&#160;          <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ContBB = CurBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a52c990590792c91dd20b6d45acebe359">splitBasicBlock</a>(</div>
<div class="line"><a name="l04613"></a><span class="lineno"> 4613</span>&#160;              CurBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>(), <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.Var-&gt;getName() + <span class="stringliteral">&quot;.atomic.cont&quot;</span>);</div>
<div class="line"><a name="l04614"></a><span class="lineno"> 4614</span>&#160;          ContBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l04615"></a><span class="lineno"> 4615</span>&#160;          CurBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l04616"></a><span class="lineno"> 4616</span>&#160; </div>
<div class="line"><a name="l04617"></a><span class="lineno"> 4617</span>&#160;          <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCondBr(SuccessOrFail, ExitBB, ContBB);</div>
<div class="line"><a name="l04618"></a><span class="lineno"> 4618</span>&#160; </div>
<div class="line"><a name="l04619"></a><span class="lineno"> 4619</span>&#160;          <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(ContBB);</div>
<div class="line"><a name="l04620"></a><span class="lineno"> 4620</span>&#160;          <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(OldValue, V.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html#afa06cdaada62e025bfb13b3ca8999963">Var</a>);</div>
<div class="line"><a name="l04621"></a><span class="lineno"> 4621</span>&#160;          <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBr(ExitBB);</div>
<div class="line"><a name="l04622"></a><span class="lineno"> 4622</span>&#160; </div>
<div class="line"><a name="l04623"></a><span class="lineno"> 4623</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1UnreachableInst.html">UnreachableInst</a> *ExitTI =</div>
<div class="line"><a name="l04624"></a><span class="lineno"> 4624</span>&#160;                  dyn_cast&lt;UnreachableInst&gt;(ExitBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>())) {</div>
<div class="line"><a name="l04625"></a><span class="lineno"> 4625</span>&#160;            CurBBTI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l04626"></a><span class="lineno"> 4626</span>&#160;            <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(ExitBB);</div>
<div class="line"><a name="l04627"></a><span class="lineno"> 4627</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04628"></a><span class="lineno"> 4628</span>&#160;            <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(ExitTI);</div>
<div class="line"><a name="l04629"></a><span class="lineno"> 4629</span>&#160;          }</div>
<div class="line"><a name="l04630"></a><span class="lineno"> 4630</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04631"></a><span class="lineno"> 4631</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *CapturedValue =</div>
<div class="line"><a name="l04632"></a><span class="lineno"> 4632</span>&#160;              <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(SuccessOrFail, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, OldValue);</div>
<div class="line"><a name="l04633"></a><span class="lineno"> 4633</span>&#160;          <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(CapturedValue, V.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html#afa06cdaada62e025bfb13b3ca8999963">Var</a>, V.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html#a8405ac1a632edb9252a0d46334f45008">IsVolatile</a>);</div>
<div class="line"><a name="l04634"></a><span class="lineno"> 4634</span>&#160;        }</div>
<div class="line"><a name="l04635"></a><span class="lineno"> 4635</span>&#160;      }</div>
<div class="line"><a name="l04636"></a><span class="lineno"> 4636</span>&#160;    }</div>
<div class="line"><a name="l04637"></a><span class="lineno"> 4637</span>&#160;    <span class="comment">// The comparison result has to be stored.</span></div>
<div class="line"><a name="l04638"></a><span class="lineno"> 4638</span>&#160;    <span class="keywordflow">if</span> (R.Var) {</div>
<div class="line"><a name="l04639"></a><span class="lineno"> 4639</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(R.Var-&gt;getType()-&gt;isPointerTy() &amp;&amp;</div>
<div class="line"><a name="l04640"></a><span class="lineno"> 4640</span>&#160;             <span class="stringliteral">&quot;r.var must be of pointer type&quot;</span>);</div>
<div class="line"><a name="l04641"></a><span class="lineno"> 4641</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(R.ElemTy-&gt;isIntegerTy() &amp;&amp; <span class="stringliteral">&quot;r must be of integral type&quot;</span>);</div>
<div class="line"><a name="l04642"></a><span class="lineno"> 4642</span>&#160; </div>
<div class="line"><a name="l04643"></a><span class="lineno"> 4643</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *SuccessFailureVal = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateExtractValue(Result, <span class="comment">/*Idxs=*/</span>1);</div>
<div class="line"><a name="l04644"></a><span class="lineno"> 4644</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *ResultCast = R.IsSigned</div>
<div class="line"><a name="l04645"></a><span class="lineno"> 4645</span>&#160;                              ? <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSExt(SuccessFailureVal, R.ElemTy)</div>
<div class="line"><a name="l04646"></a><span class="lineno"> 4646</span>&#160;                              : <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateZExt(SuccessFailureVal, R.ElemTy);</div>
<div class="line"><a name="l04647"></a><span class="lineno"> 4647</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(ResultCast, R.Var, R.IsVolatile);</div>
<div class="line"><a name="l04648"></a><span class="lineno"> 4648</span>&#160;    }</div>
<div class="line"><a name="l04649"></a><span class="lineno"> 4649</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04650"></a><span class="lineno"> 4650</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> == <a class="code" href="namespacellvm_1_1omp.html#acb593a387130148478f3c30af0d322dfa26a4b44a837bf97b972628509912b4a5">OMPAtomicCompareOp::MAX</a> || <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> == <a class="code" href="namespacellvm_1_1omp.html#acb593a387130148478f3c30af0d322dface31e2a082d17e038fcc6e3006166653">OMPAtomicCompareOp::MIN</a>) &amp;&amp;</div>
<div class="line"><a name="l04651"></a><span class="lineno"> 4651</span>&#160;           <span class="stringliteral">&quot;Op should be either max or min at this point&quot;</span>);</div>
<div class="line"><a name="l04652"></a><span class="lineno"> 4652</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!IsFailOnly &amp;&amp; <span class="stringliteral">&quot;IsFailOnly is only valid when the comparison is ==&quot;</span>);</div>
<div class="line"><a name="l04653"></a><span class="lineno"> 4653</span>&#160; </div>
<div class="line"><a name="l04654"></a><span class="lineno"> 4654</span>&#160;    <span class="comment">// Reverse the ordop as the OpenMP forms are different from LLVM forms.</span></div>
<div class="line"><a name="l04655"></a><span class="lineno"> 4655</span>&#160;    <span class="comment">// Let&#39;s take max as example.</span></div>
<div class="line"><a name="l04656"></a><span class="lineno"> 4656</span>&#160;    <span class="comment">// OpenMP form:</span></div>
<div class="line"><a name="l04657"></a><span class="lineno"> 4657</span>&#160;    <span class="comment">// x = x &gt; expr ? expr : x;</span></div>
<div class="line"><a name="l04658"></a><span class="lineno"> 4658</span>&#160;    <span class="comment">// LLVM form:</span></div>
<div class="line"><a name="l04659"></a><span class="lineno"> 4659</span>&#160;    <span class="comment">// *ptr = *ptr &gt; val ? *ptr : val;</span></div>
<div class="line"><a name="l04660"></a><span class="lineno"> 4660</span>&#160;    <span class="comment">// We need to transform to LLVM form.</span></div>
<div class="line"><a name="l04661"></a><span class="lineno"> 4661</span>&#160;    <span class="comment">// x = x &lt;= expr ? x : expr;</span></div>
<div class="line"><a name="l04662"></a><span class="lineno"> 4662</span>&#160;    <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615">AtomicRMWInst::BinOp</a> NewOp;</div>
<div class="line"><a name="l04663"></a><span class="lineno"> 4663</span>&#160;    <span class="keywordflow">if</span> (IsXBinopExpr) {</div>
<div class="line"><a name="l04664"></a><span class="lineno"> 4664</span>&#160;      <span class="keywordflow">if</span> (IsInteger) {</div>
<div class="line"><a name="l04665"></a><span class="lineno"> 4665</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.IsSigned)</div>
<div class="line"><a name="l04666"></a><span class="lineno"> 4666</span>&#160;          NewOp = <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> == <a class="code" href="namespacellvm_1_1omp.html#acb593a387130148478f3c30af0d322dfa26a4b44a837bf97b972628509912b4a5">OMPAtomicCompareOp::MAX</a> ? <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a39edb6e51c1ad37244e8b32a2af4077d">AtomicRMWInst::Min</a></div>
<div class="line"><a name="l04667"></a><span class="lineno"> 4667</span>&#160;                                                : <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615aa1184a7e35e94d162a2d40f2b11beeb2">AtomicRMWInst::Max</a>;</div>
<div class="line"><a name="l04668"></a><span class="lineno"> 4668</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l04669"></a><span class="lineno"> 4669</span>&#160;          NewOp = <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> == <a class="code" href="namespacellvm_1_1omp.html#acb593a387130148478f3c30af0d322dfa26a4b44a837bf97b972628509912b4a5">OMPAtomicCompareOp::MAX</a> ? <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615aa53854e09143f57d2ff2ad6ac89dc55d">AtomicRMWInst::UMin</a></div>
<div class="line"><a name="l04670"></a><span class="lineno"> 4670</span>&#160;                                                : <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615abe171d96ba8de66fb30e08c00211591e">AtomicRMWInst::UMax</a>;</div>
<div class="line"><a name="l04671"></a><span class="lineno"> 4671</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04672"></a><span class="lineno"> 4672</span>&#160;        NewOp = <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> == <a class="code" href="namespacellvm_1_1omp.html#acb593a387130148478f3c30af0d322dfa26a4b44a837bf97b972628509912b4a5">OMPAtomicCompareOp::MAX</a> ? <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615abd5e733a10a36f3572105b1a67538e18">AtomicRMWInst::FMin</a></div>
<div class="line"><a name="l04673"></a><span class="lineno"> 4673</span>&#160;                                              : <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615acce124326ba87b0127b36c412bf555fd">AtomicRMWInst::FMax</a>;</div>
<div class="line"><a name="l04674"></a><span class="lineno"> 4674</span>&#160;      }</div>
<div class="line"><a name="l04675"></a><span class="lineno"> 4675</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04676"></a><span class="lineno"> 4676</span>&#160;      <span class="keywordflow">if</span> (IsInteger) {</div>
<div class="line"><a name="l04677"></a><span class="lineno"> 4677</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.IsSigned)</div>
<div class="line"><a name="l04678"></a><span class="lineno"> 4678</span>&#160;          NewOp = <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> == <a class="code" href="namespacellvm_1_1omp.html#acb593a387130148478f3c30af0d322dfa26a4b44a837bf97b972628509912b4a5">OMPAtomicCompareOp::MAX</a> ? <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615aa1184a7e35e94d162a2d40f2b11beeb2">AtomicRMWInst::Max</a></div>
<div class="line"><a name="l04679"></a><span class="lineno"> 4679</span>&#160;                                                : <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a39edb6e51c1ad37244e8b32a2af4077d">AtomicRMWInst::Min</a>;</div>
<div class="line"><a name="l04680"></a><span class="lineno"> 4680</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l04681"></a><span class="lineno"> 4681</span>&#160;          NewOp = <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> == <a class="code" href="namespacellvm_1_1omp.html#acb593a387130148478f3c30af0d322dfa26a4b44a837bf97b972628509912b4a5">OMPAtomicCompareOp::MAX</a> ? <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615abe171d96ba8de66fb30e08c00211591e">AtomicRMWInst::UMax</a></div>
<div class="line"><a name="l04682"></a><span class="lineno"> 4682</span>&#160;                                                : <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615aa53854e09143f57d2ff2ad6ac89dc55d">AtomicRMWInst::UMin</a>;</div>
<div class="line"><a name="l04683"></a><span class="lineno"> 4683</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04684"></a><span class="lineno"> 4684</span>&#160;        NewOp = <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> == <a class="code" href="namespacellvm_1_1omp.html#acb593a387130148478f3c30af0d322dfa26a4b44a837bf97b972628509912b4a5">OMPAtomicCompareOp::MAX</a> ? <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615acce124326ba87b0127b36c412bf555fd">AtomicRMWInst::FMax</a></div>
<div class="line"><a name="l04685"></a><span class="lineno"> 4685</span>&#160;                                              : <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615abd5e733a10a36f3572105b1a67538e18">AtomicRMWInst::FMin</a>;</div>
<div class="line"><a name="l04686"></a><span class="lineno"> 4686</span>&#160;      }</div>
<div class="line"><a name="l04687"></a><span class="lineno"> 4687</span>&#160;    }</div>
<div class="line"><a name="l04688"></a><span class="lineno"> 4688</span>&#160; </div>
<div class="line"><a name="l04689"></a><span class="lineno"> 4689</span>&#160;    <a class="code" href="classllvm_1_1AtomicRMWInst.html">AtomicRMWInst</a> *OldValue =</div>
<div class="line"><a name="l04690"></a><span class="lineno"> 4690</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAtomicRMW(NewOp, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.Var, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, <a class="code" href="structllvm_1_1MaybeAlign.html">MaybeAlign</a>(), AO);</div>
<div class="line"><a name="l04691"></a><span class="lineno"> 4691</span>&#160;    <span class="keywordflow">if</span> (V.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html#afa06cdaada62e025bfb13b3ca8999963">Var</a>) {</div>
<div class="line"><a name="l04692"></a><span class="lineno"> 4692</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *CapturedValue = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04693"></a><span class="lineno"> 4693</span>&#160;      <span class="keywordflow">if</span> (IsPostfixUpdate) {</div>
<div class="line"><a name="l04694"></a><span class="lineno"> 4694</span>&#160;        CapturedValue = OldValue;</div>
<div class="line"><a name="l04695"></a><span class="lineno"> 4695</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04696"></a><span class="lineno"> 4696</span>&#160;        <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> Pred;</div>
<div class="line"><a name="l04697"></a><span class="lineno"> 4697</span>&#160;        <span class="keywordflow">switch</span> (NewOp) {</div>
<div class="line"><a name="l04698"></a><span class="lineno"> 4698</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615aa1184a7e35e94d162a2d40f2b11beeb2">AtomicRMWInst::Max</a>:</div>
<div class="line"><a name="l04699"></a><span class="lineno"> 4699</span>&#160;          Pred = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">CmpInst::ICMP_SGT</a>;</div>
<div class="line"><a name="l04700"></a><span class="lineno"> 4700</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04701"></a><span class="lineno"> 4701</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615abe171d96ba8de66fb30e08c00211591e">AtomicRMWInst::UMax</a>:</div>
<div class="line"><a name="l04702"></a><span class="lineno"> 4702</span>&#160;          Pred = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">CmpInst::ICMP_UGT</a>;</div>
<div class="line"><a name="l04703"></a><span class="lineno"> 4703</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04704"></a><span class="lineno"> 4704</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615acce124326ba87b0127b36c412bf555fd">AtomicRMWInst::FMax</a>:</div>
<div class="line"><a name="l04705"></a><span class="lineno"> 4705</span>&#160;          Pred = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba4c399f525bbcf03d72af4b303e6eeca8">CmpInst::FCMP_OGT</a>;</div>
<div class="line"><a name="l04706"></a><span class="lineno"> 4706</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04707"></a><span class="lineno"> 4707</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a39edb6e51c1ad37244e8b32a2af4077d">AtomicRMWInst::Min</a>:</div>
<div class="line"><a name="l04708"></a><span class="lineno"> 4708</span>&#160;          Pred = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">CmpInst::ICMP_SLT</a>;</div>
<div class="line"><a name="l04709"></a><span class="lineno"> 4709</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04710"></a><span class="lineno"> 4710</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615aa53854e09143f57d2ff2ad6ac89dc55d">AtomicRMWInst::UMin</a>:</div>
<div class="line"><a name="l04711"></a><span class="lineno"> 4711</span>&#160;          Pred = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">CmpInst::ICMP_ULT</a>;</div>
<div class="line"><a name="l04712"></a><span class="lineno"> 4712</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04713"></a><span class="lineno"> 4713</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615abd5e733a10a36f3572105b1a67538e18">AtomicRMWInst::FMin</a>:</div>
<div class="line"><a name="l04714"></a><span class="lineno"> 4714</span>&#160;          Pred = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba326bee0a4a424cef21c1cf8adb8b8dd8">CmpInst::FCMP_OLT</a>;</div>
<div class="line"><a name="l04715"></a><span class="lineno"> 4715</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04716"></a><span class="lineno"> 4716</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l04717"></a><span class="lineno"> 4717</span>&#160;          <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;unexpected comparison op&quot;</span>);</div>
<div class="line"><a name="l04718"></a><span class="lineno"> 4718</span>&#160;        }</div>
<div class="line"><a name="l04719"></a><span class="lineno"> 4719</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NonAtomicCmp = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCmp(Pred, OldValue, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>);</div>
<div class="line"><a name="l04720"></a><span class="lineno"> 4720</span>&#160;        CapturedValue = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(NonAtomicCmp, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, OldValue);</div>
<div class="line"><a name="l04721"></a><span class="lineno"> 4721</span>&#160;      }</div>
<div class="line"><a name="l04722"></a><span class="lineno"> 4722</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(CapturedValue, V.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html#afa06cdaada62e025bfb13b3ca8999963">Var</a>, V.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html#a8405ac1a632edb9252a0d46334f45008">IsVolatile</a>);</div>
<div class="line"><a name="l04723"></a><span class="lineno"> 4723</span>&#160;    }</div>
<div class="line"><a name="l04724"></a><span class="lineno"> 4724</span>&#160;  }</div>
<div class="line"><a name="l04725"></a><span class="lineno"> 4725</span>&#160; </div>
<div class="line"><a name="l04726"></a><span class="lineno"> 4726</span>&#160;  checkAndEmitFlushAfterAtomic(Loc, AO, <a class="code" href="README__P9_8txt.html#a42a82adf8d40243d6a0a28972c9f7df1">AtomicKind::Compare</a>);</div>
<div class="line"><a name="l04727"></a><span class="lineno"> 4727</span>&#160; </div>
<div class="line"><a name="l04728"></a><span class="lineno"> 4728</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP();</div>
<div class="line"><a name="l04729"></a><span class="lineno"> 4729</span>&#160;}</div>
<div class="line"><a name="l04730"></a><span class="lineno"> 4730</span>&#160; </div>
<div class="line"><a name="l04731"></a><span class="lineno"> 4731</span>&#160;<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *</div>
<div class="line"><a name="l04732"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#ab1aa0d632549db4855d6412f4d2d44ae"> 4732</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#ab1aa0d632549db4855d6412f4d2d44ae">OpenMPIRBuilder::createOffloadMapnames</a>(<a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;llvm::Constant *&gt;</a> &amp;Names,</div>
<div class="line"><a name="l04733"></a><span class="lineno"> 4733</span>&#160;                                       std::string <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a218a3df235546fc092fe0f463e6b714d">VarName</a>) {</div>
<div class="line"><a name="l04734"></a><span class="lineno"> 4734</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">llvm::Constant</a> *MapNamesArrayInit = <a class="code" href="classllvm_1_1ConstantArray.html#a0900dacdc7ad8e3ea0cc92993c7fd422">llvm::ConstantArray::get</a>(</div>
<div class="line"><a name="l04735"></a><span class="lineno"> 4735</span>&#160;      <a class="code" href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">llvm::ArrayType::get</a>(</div>
<div class="line"><a name="l04736"></a><span class="lineno"> 4736</span>&#160;          <a class="code" href="classllvm_1_1Type.html#a7ba5de75f50bb4a4ba920698edf39b28">llvm::Type::getInt8Ty</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext())-&gt;<a class="code" href="classllvm_1_1Type.html#adc01a7457de85fc52a3bb860d7e1c6a4">getPointerTo</a>(), Names.size()),</div>
<div class="line"><a name="l04737"></a><span class="lineno"> 4737</span>&#160;      Names);</div>
<div class="line"><a name="l04738"></a><span class="lineno"> 4738</span>&#160;  <span class="keyword">auto</span> *MapNamesArrayGlobal = <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">llvm::GlobalVariable</a>(</div>
<div class="line"><a name="l04739"></a><span class="lineno"> 4739</span>&#160;      <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, MapNamesArrayInit-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(),</div>
<div class="line"><a name="l04740"></a><span class="lineno"> 4740</span>&#160;      <span class="comment">/*isConstant=*/</span><span class="keyword">true</span>, <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca04ed141708c0fd16723d212502b046ae">llvm::GlobalValue::PrivateLinkage</a>, MapNamesArrayInit,</div>
<div class="line"><a name="l04741"></a><span class="lineno"> 4741</span>&#160;      <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a218a3df235546fc092fe0f463e6b714d">VarName</a>);</div>
<div class="line"><a name="l04742"></a><span class="lineno"> 4742</span>&#160;  <span class="keywordflow">return</span> MapNamesArrayGlobal;</div>
<div class="line"><a name="l04743"></a><span class="lineno"> 4743</span>&#160;}</div>
<div class="line"><a name="l04744"></a><span class="lineno"> 4744</span>&#160; </div>
<div class="line"><a name="l04745"></a><span class="lineno"> 4745</span>&#160;<span class="comment">// Create all simple and struct types exposed by the runtime and remember</span></div>
<div class="line"><a name="l04746"></a><span class="lineno"> 4746</span>&#160;<span class="comment">// the llvm::PointerTypes of them for easy access later.</span></div>
<div class="line"><a name="l04747"></a><span class="lineno"> 4747</span>&#160;<span class="keywordtype">void</span> OpenMPIRBuilder::initializeTypes(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M) {</div>
<div class="line"><a name="l04748"></a><span class="lineno"> 4748</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;Ctx = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext();</div>
<div class="line"><a name="l04749"></a><span class="lineno"> 4749</span>&#160;  <a class="code" href="classllvm_1_1StructType.html">StructType</a> *<a class="code" href="classT.html">T</a>;</div>
<div class="line"><a name="l04750"></a><span class="lineno"> 4750</span>&#160;<span class="preprocessor">#define OMP_TYPE(VarName, InitValue) VarName = InitValue;</span></div>
<div class="line"><a name="l04751"></a><span class="lineno"> 4751</span>&#160;<span class="preprocessor">#define OMP_ARRAY_TYPE(VarName, ElemTy, ArraySize)                             \</span></div>
<div class="line"><a name="l04752"></a><span class="lineno"> 4752</span>&#160;<span class="preprocessor">  VarName##Ty = ArrayType::get(ElemTy, ArraySize);                             \</span></div>
<div class="line"><a name="l04753"></a><span class="lineno"> 4753</span>&#160;<span class="preprocessor">  VarName##PtrTy = PointerType::getUnqual(VarName##Ty);</span></div>
<div class="line"><a name="l04754"></a><span class="lineno"> 4754</span>&#160;<span class="preprocessor">#define OMP_FUNCTION_TYPE(VarName, IsVarArg, ReturnType, ...)                  \</span></div>
<div class="line"><a name="l04755"></a><span class="lineno"> 4755</span>&#160;<span class="preprocessor">  VarName = FunctionType::get(ReturnType, {__VA_ARGS__}, IsVarArg);            \</span></div>
<div class="line"><a name="l04756"></a><span class="lineno"> 4756</span>&#160;<span class="preprocessor">  VarName##Ptr = PointerType::getUnqual(VarName);</span></div>
<div class="line"><a name="l04757"></a><span class="lineno"> 4757</span>&#160;<span class="preprocessor">#define OMP_STRUCT_TYPE(VarName, StructName, Packed, ...)                      \</span></div>
<div class="line"><a name="l04758"></a><span class="lineno"> 4758</span>&#160;<span class="preprocessor">  T = StructType::getTypeByName(Ctx, StructName);                              \</span></div>
<div class="line"><a name="l04759"></a><span class="lineno"> 4759</span>&#160;<span class="preprocessor">  if (!T)                                                                      \</span></div>
<div class="line"><a name="l04760"></a><span class="lineno"> 4760</span>&#160;<span class="preprocessor">    T = StructType::create(Ctx, {__VA_ARGS__}, StructName, Packed);            \</span></div>
<div class="line"><a name="l04761"></a><span class="lineno"> 4761</span>&#160;<span class="preprocessor">  VarName = T;                                                                 \</span></div>
<div class="line"><a name="l04762"></a><span class="lineno"> 4762</span>&#160;<span class="preprocessor">  VarName##Ptr = PointerType::getUnqual(T);</span></div>
<div class="line"><a name="l04763"></a><span class="lineno"> 4763</span>&#160;<span class="preprocessor">#include &quot;llvm/Frontend/OpenMP/OMPKinds.def&quot;</span></div>
<div class="line"><a name="l04764"></a><span class="lineno"> 4764</span>&#160;}</div>
<div class="line"><a name="l04765"></a><span class="lineno"> 4765</span>&#160; </div>
<div class="line"><a name="l04766"></a><span class="lineno"><a class="line" href="structllvm_1_1OpenMPIRBuilder_1_1OutlineInfo.html#a218bc49443ef1f05fc8074d872d41fcd"> 4766</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1OutlineInfo.html#a218bc49443ef1f05fc8074d872d41fcd">OpenMPIRBuilder::OutlineInfo::collectBlocks</a>(</div>
<div class="line"><a name="l04767"></a><span class="lineno"> 4767</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSetImpl.html">SmallPtrSetImpl&lt;BasicBlock *&gt;</a> &amp;BlockSet,</div>
<div class="line"><a name="l04768"></a><span class="lineno"> 4768</span>&#160;    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;BasicBlock *&gt;</a> &amp;BlockVector) {</div>
<div class="line"><a name="l04769"></a><span class="lineno"> 4769</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 32&gt;</a> Worklist;</div>
<div class="line"><a name="l04770"></a><span class="lineno"> 4770</span>&#160;  BlockSet.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(EntryBB);</div>
<div class="line"><a name="l04771"></a><span class="lineno"> 4771</span>&#160;  BlockSet.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(ExitBB);</div>
<div class="line"><a name="l04772"></a><span class="lineno"> 4772</span>&#160; </div>
<div class="line"><a name="l04773"></a><span class="lineno"> 4773</span>&#160;  Worklist.push_back(EntryBB);</div>
<div class="line"><a name="l04774"></a><span class="lineno"> 4774</span>&#160;  <span class="keywordflow">while</span> (!Worklist.empty()) {</div>
<div class="line"><a name="l04775"></a><span class="lineno"> 4775</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l04776"></a><span class="lineno"> 4776</span>&#160;    BlockVector.push_back(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l04777"></a><span class="lineno"> 4777</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *SuccBB : <a class="code" href="namespacellvm.html#a26e2a938b431eaa6eca2beaa96410c9d">successors</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l04778"></a><span class="lineno"> 4778</span>&#160;      <span class="keywordflow">if</span> (BlockSet.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(SuccBB).second)</div>
<div class="line"><a name="l04779"></a><span class="lineno"> 4779</span>&#160;        Worklist.push_back(SuccBB);</div>
<div class="line"><a name="l04780"></a><span class="lineno"> 4780</span>&#160;  }</div>
<div class="line"><a name="l04781"></a><span class="lineno"> 4781</span>&#160;}</div>
<div class="line"><a name="l04782"></a><span class="lineno"> 4782</span>&#160; </div>
<div class="line"><a name="l04783"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a557089bd8b3a607f7c3c0e5e024241c8"> 4783</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a557089bd8b3a607f7c3c0e5e024241c8">OpenMPIRBuilder::createOffloadEntry</a>(<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>, <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>,</div>
<div class="line"><a name="l04784"></a><span class="lineno"> 4784</span>&#160;                                         <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> Size, int32_t Flags,</div>
<div class="line"><a name="l04785"></a><span class="lineno"> 4785</span>&#160;                                         <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57c">GlobalValue::LinkageTypes</a>) {</div>
<div class="line"><a name="l04786"></a><span class="lineno"> 4786</span>&#160;  <span class="keywordflow">if</span> (!Config.isTargetCodegen()) {</div>
<div class="line"><a name="l04787"></a><span class="lineno"> 4787</span>&#160;    emitOffloadingEntry(<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>, <a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>-&gt;getName(), Size, <a class="code" href="namespacellvm_1_1omp.html#a16d7c5f77008a84ae20bf4a5c41e51f0a4ea7801f17a4e5485e8b050c052fb443">Flags</a>);</div>
<div class="line"><a name="l04788"></a><span class="lineno"> 4788</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04789"></a><span class="lineno"> 4789</span>&#160;  }</div>
<div class="line"><a name="l04790"></a><span class="lineno"> 4790</span>&#160;  <span class="comment">// TODO: Add support for global variables on the device after declare target</span></div>
<div class="line"><a name="l04791"></a><span class="lineno"> 4791</span>&#160;  <span class="comment">// support.</span></div>
<div class="line"><a name="l04792"></a><span class="lineno"> 4792</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *Fn = dyn_cast&lt;Function&gt;(<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>);</div>
<div class="line"><a name="l04793"></a><span class="lineno"> 4793</span>&#160;  <span class="keywordflow">if</span> (!Fn)</div>
<div class="line"><a name="l04794"></a><span class="lineno"> 4794</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04795"></a><span class="lineno"> 4795</span>&#160; </div>
<div class="line"><a name="l04796"></a><span class="lineno"> 4796</span>&#160;  <a class="code" href="classllvm_1_1Module.html">Module</a> &amp;<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = *(Fn-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>());</div>
<div class="line"><a name="l04797"></a><span class="lineno"> 4797</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;Ctx = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext();</div>
<div class="line"><a name="l04798"></a><span class="lineno"> 4798</span>&#160; </div>
<div class="line"><a name="l04799"></a><span class="lineno"> 4799</span>&#160;  <span class="comment">// Get &quot;nvvm.annotations&quot; metadata node.</span></div>
<div class="line"><a name="l04800"></a><span class="lineno"> 4800</span>&#160;  <a class="code" href="classllvm_1_1NamedMDNode.html">NamedMDNode</a> *MD = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getOrInsertNamedMetadata(<span class="stringliteral">&quot;nvvm.annotations&quot;</span>);</div>
<div class="line"><a name="l04801"></a><span class="lineno"> 4801</span>&#160; </div>
<div class="line"><a name="l04802"></a><span class="lineno"> 4802</span>&#160;  <a class="code" href="classllvm_1_1Metadata.html">Metadata</a> *MDVals[] = {</div>
<div class="line"><a name="l04803"></a><span class="lineno"> 4803</span>&#160;      <a class="code" href="classllvm_1_1ConstantAsMetadata.html#a703ab6c3e14ff7565866468d731f537a">ConstantAsMetadata::get</a>(Fn), <a class="code" href="classllvm_1_1MDString.html#affbb7e2e9ad8d18114816f2443d672b9">MDString::get</a>(Ctx, <span class="stringliteral">&quot;kernel&quot;</span>),</div>
<div class="line"><a name="l04804"></a><span class="lineno"> 4804</span>&#160;      <a class="code" href="classllvm_1_1ConstantAsMetadata.html#a703ab6c3e14ff7565866468d731f537a">ConstantAsMetadata::get</a>(<a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(Ctx), 1))};</div>
<div class="line"><a name="l04805"></a><span class="lineno"> 4805</span>&#160;  <span class="comment">// Append metadata to nvvm.annotations.</span></div>
<div class="line"><a name="l04806"></a><span class="lineno"> 4806</span>&#160;  MD-&gt;<a class="code" href="classllvm_1_1NamedMDNode.html#ae917c72e5b8e15491cd0dbdd44d818f2">addOperand</a>(<a class="code" href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">MDNode::get</a>(Ctx, MDVals));</div>
<div class="line"><a name="l04807"></a><span class="lineno"> 4807</span>&#160; </div>
<div class="line"><a name="l04808"></a><span class="lineno"> 4808</span>&#160;  <span class="comment">// Add a function attribute for the kernel.</span></div>
<div class="line"><a name="l04809"></a><span class="lineno"> 4809</span>&#160;  Fn-&gt;<a class="code" href="classllvm_1_1Function.html#a01875e4204852069dd4b7938cab4140b">addFnAttr</a>(<a class="code" href="classllvm_1_1Attribute.html#a43708098bd7085788a680fd02f47c750">Attribute::get</a>(Ctx, <span class="stringliteral">&quot;kernel&quot;</span>));</div>
<div class="line"><a name="l04810"></a><span class="lineno"> 4810</span>&#160;}</div>
<div class="line"><a name="l04811"></a><span class="lineno"> 4811</span>&#160; </div>
<div class="line"><a name="l04812"></a><span class="lineno"> 4812</span>&#160;<span class="comment">// We only generate metadata for function that contain target regions.</span></div>
<div class="line"><a name="l04813"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a2cc5944fcb516509d6640e1c0317c76d"> 4813</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a2cc5944fcb516509d6640e1c0317c76d">OpenMPIRBuilder::createOffloadEntriesAndInfoMetadata</a>(</div>
<div class="line"><a name="l04814"></a><span class="lineno"> 4814</span>&#160;    <a class="code" href="classllvm_1_1OffloadEntriesInfoManager.html">OffloadEntriesInfoManager</a> &amp;<a class="code" href="classllvm_1_1OffloadEntriesInfoManager.html">OffloadEntriesInfoManager</a>,</div>
<div class="line"><a name="l04815"></a><span class="lineno"> 4815</span>&#160;    <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a3a1491172c3170c2463b54c3b62d4f66">EmitMetadataErrorReportFunctionTy</a> &amp;ErrorFn) {</div>
<div class="line"><a name="l04816"></a><span class="lineno"> 4816</span>&#160; </div>
<div class="line"><a name="l04817"></a><span class="lineno"> 4817</span>&#160;  <span class="comment">// If there are no entries, we don&#39;t need to do anything.</span></div>
<div class="line"><a name="l04818"></a><span class="lineno"> 4818</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1OffloadEntriesInfoManager.html">OffloadEntriesInfoManager</a>.<a class="code" href="classllvm_1_1OffloadEntriesInfoManager.html#af1c69166900a3ea831da7b0bda28554e">empty</a>())</div>
<div class="line"><a name="l04819"></a><span class="lineno"> 4819</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04820"></a><span class="lineno"> 4820</span>&#160; </div>
<div class="line"><a name="l04821"></a><span class="lineno"> 4821</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext();</div>
<div class="line"><a name="l04822"></a><span class="lineno"> 4822</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector</a>&lt;std::pair&lt;<span class="keyword">const</span> <a class="code" href="classllvm_1_1OffloadEntriesInfoManager_1_1OffloadEntryInfo.html">OffloadEntriesInfoManager::OffloadEntryInfo</a> *,</div>
<div class="line"><a name="l04823"></a><span class="lineno"> 4823</span>&#160;                        <a class="code" href="structllvm_1_1TargetRegionEntryInfo.html">TargetRegionEntryInfo</a>&gt;,</div>
<div class="line"><a name="l04824"></a><span class="lineno"> 4824</span>&#160;              16&gt;</div>
<div class="line"><a name="l04825"></a><span class="lineno"> 4825</span>&#160;      OrderedEntries(<a class="code" href="classllvm_1_1OffloadEntriesInfoManager.html">OffloadEntriesInfoManager</a>.<a class="code" href="classllvm_1_1OffloadEntriesInfoManager.html#aaf155f94f5d49e4dd6dc17a3ae2fe4fa">size</a>());</div>
<div class="line"><a name="l04826"></a><span class="lineno"> 4826</span>&#160; </div>
<div class="line"><a name="l04827"></a><span class="lineno"> 4827</span>&#160;  <span class="comment">// Auxiliary methods to create metadata values and strings.</span></div>
<div class="line"><a name="l04828"></a><span class="lineno"> 4828</span>&#160;  <span class="keyword">auto</span> &amp;&amp;GetMDInt = [<span class="keyword">this</span>](<span class="keywordtype">unsigned</span> V) {</div>
<div class="line"><a name="l04829"></a><span class="lineno"> 4829</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantAsMetadata.html#a703ab6c3e14ff7565866468d731f537a">ConstantAsMetadata::get</a>(<a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt32Ty(), V));</div>
<div class="line"><a name="l04830"></a><span class="lineno"> 4830</span>&#160;  };</div>
<div class="line"><a name="l04831"></a><span class="lineno"> 4831</span>&#160; </div>
<div class="line"><a name="l04832"></a><span class="lineno"> 4832</span>&#160;  <span class="keyword">auto</span> &amp;&amp;GetMDString = [&amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>](<a class="code" href="classllvm_1_1StringRef.html">StringRef</a> V) { <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1MDString.html#affbb7e2e9ad8d18114816f2443d672b9">MDString::get</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, V); };</div>
<div class="line"><a name="l04833"></a><span class="lineno"> 4833</span>&#160; </div>
<div class="line"><a name="l04834"></a><span class="lineno"> 4834</span>&#160;  <span class="comment">// Create the offloading info metadata node.</span></div>
<div class="line"><a name="l04835"></a><span class="lineno"> 4835</span>&#160;  <a class="code" href="classllvm_1_1NamedMDNode.html">NamedMDNode</a> *MD = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getOrInsertNamedMetadata(<span class="stringliteral">&quot;omp_offload.info&quot;</span>);</div>
<div class="line"><a name="l04836"></a><span class="lineno"> 4836</span>&#160;  <span class="keyword">auto</span> &amp;&amp;TargetRegionMetadataEmitter =</div>
<div class="line"><a name="l04837"></a><span class="lineno"> 4837</span>&#160;      [&amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, MD, &amp;OrderedEntries, &amp;GetMDInt, &amp;GetMDString](</div>
<div class="line"><a name="l04838"></a><span class="lineno"> 4838</span>&#160;          <span class="keyword">const</span> <a class="code" href="structllvm_1_1TargetRegionEntryInfo.html">TargetRegionEntryInfo</a> &amp;EntryInfo,</div>
<div class="line"><a name="l04839"></a><span class="lineno"> 4839</span>&#160;          <span class="keyword">const</span> <a class="code" href="classllvm_1_1OffloadEntriesInfoManager_1_1OffloadEntryInfoTargetRegion.html">OffloadEntriesInfoManager::OffloadEntryInfoTargetRegion</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>) {</div>
<div class="line"><a name="l04840"></a><span class="lineno"> 4840</span>&#160;        <span class="comment">// Generate metadata for target regions. Each entry of this metadata</span></div>
<div class="line"><a name="l04841"></a><span class="lineno"> 4841</span>&#160;        <span class="comment">// contains:</span></div>
<div class="line"><a name="l04842"></a><span class="lineno"> 4842</span>&#160;        <span class="comment">// - Entry 0 -&gt; Kind of this type of metadata (0).</span></div>
<div class="line"><a name="l04843"></a><span class="lineno"> 4843</span>&#160;        <span class="comment">// - Entry 1 -&gt; Device ID of the file where the entry was identified.</span></div>
<div class="line"><a name="l04844"></a><span class="lineno"> 4844</span>&#160;        <span class="comment">// - Entry 2 -&gt; File ID of the file where the entry was identified.</span></div>
<div class="line"><a name="l04845"></a><span class="lineno"> 4845</span>&#160;        <span class="comment">// - Entry 3 -&gt; Mangled name of the function where the entry was</span></div>
<div class="line"><a name="l04846"></a><span class="lineno"> 4846</span>&#160;        <span class="comment">// identified.</span></div>
<div class="line"><a name="l04847"></a><span class="lineno"> 4847</span>&#160;        <span class="comment">// - Entry 4 -&gt; Line in the file where the entry was identified.</span></div>
<div class="line"><a name="l04848"></a><span class="lineno"> 4848</span>&#160;        <span class="comment">// - Entry 5 -&gt; Count of regions at this DeviceID/FilesID/Line.</span></div>
<div class="line"><a name="l04849"></a><span class="lineno"> 4849</span>&#160;        <span class="comment">// - Entry 6 -&gt; Order the entry was created.</span></div>
<div class="line"><a name="l04850"></a><span class="lineno"> 4850</span>&#160;        <span class="comment">// The first element of the metadata node is the kind.</span></div>
<div class="line"><a name="l04851"></a><span class="lineno"> 4851</span>&#160;        <a class="code" href="classllvm_1_1Metadata.html">Metadata</a> *Ops[] = {</div>
<div class="line"><a name="l04852"></a><span class="lineno"> 4852</span>&#160;            GetMDInt(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.getKind()),      GetMDInt(EntryInfo.DeviceID),</div>
<div class="line"><a name="l04853"></a><span class="lineno"> 4853</span>&#160;            GetMDInt(EntryInfo.FileID), GetMDString(EntryInfo.ParentName),</div>
<div class="line"><a name="l04854"></a><span class="lineno"> 4854</span>&#160;            GetMDInt(EntryInfo.Line),   GetMDInt(EntryInfo.Count),</div>
<div class="line"><a name="l04855"></a><span class="lineno"> 4855</span>&#160;            GetMDInt(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.getOrder())};</div>
<div class="line"><a name="l04856"></a><span class="lineno"> 4856</span>&#160; </div>
<div class="line"><a name="l04857"></a><span class="lineno"> 4857</span>&#160;        <span class="comment">// Save this entry in the right position of the ordered entries array.</span></div>
<div class="line"><a name="l04858"></a><span class="lineno"> 4858</span>&#160;        OrderedEntries[<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.getOrder()] = std::make_pair(&amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, EntryInfo);</div>
<div class="line"><a name="l04859"></a><span class="lineno"> 4859</span>&#160; </div>
<div class="line"><a name="l04860"></a><span class="lineno"> 4860</span>&#160;        <span class="comment">// Add metadata to the named metadata node.</span></div>
<div class="line"><a name="l04861"></a><span class="lineno"> 4861</span>&#160;        MD-&gt;addOperand(<a class="code" href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">MDNode::get</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, Ops));</div>
<div class="line"><a name="l04862"></a><span class="lineno"> 4862</span>&#160;      };</div>
<div class="line"><a name="l04863"></a><span class="lineno"> 4863</span>&#160; </div>
<div class="line"><a name="l04864"></a><span class="lineno"> 4864</span>&#160;  <a class="code" href="classllvm_1_1OffloadEntriesInfoManager.html">OffloadEntriesInfoManager</a>.<a class="code" href="classllvm_1_1OffloadEntriesInfoManager.html#aa87d491241b8ff7bdec84f22843c6ab5">actOnTargetRegionEntriesInfo</a>(</div>
<div class="line"><a name="l04865"></a><span class="lineno"> 4865</span>&#160;      TargetRegionMetadataEmitter);</div>
<div class="line"><a name="l04866"></a><span class="lineno"> 4866</span>&#160; </div>
<div class="line"><a name="l04867"></a><span class="lineno"> 4867</span>&#160;  <span class="comment">// Create function that emits metadata for each device global variable entry;</span></div>
<div class="line"><a name="l04868"></a><span class="lineno"> 4868</span>&#160;  <span class="keyword">auto</span> &amp;&amp;DeviceGlobalVarMetadataEmitter =</div>
<div class="line"><a name="l04869"></a><span class="lineno"> 4869</span>&#160;      [&amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, &amp;OrderedEntries, &amp;GetMDInt, &amp;GetMDString, MD](</div>
<div class="line"><a name="l04870"></a><span class="lineno"> 4870</span>&#160;          <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> MangledName,</div>
<div class="line"><a name="l04871"></a><span class="lineno"> 4871</span>&#160;          <span class="keyword">const</span> <a class="code" href="classllvm_1_1OffloadEntriesInfoManager_1_1OffloadEntryInfoDeviceGlobalVar.html">OffloadEntriesInfoManager::OffloadEntryInfoDeviceGlobalVar</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>) {</div>
<div class="line"><a name="l04872"></a><span class="lineno"> 4872</span>&#160;        <span class="comment">// Generate metadata for global variables. Each entry of this metadata</span></div>
<div class="line"><a name="l04873"></a><span class="lineno"> 4873</span>&#160;        <span class="comment">// contains:</span></div>
<div class="line"><a name="l04874"></a><span class="lineno"> 4874</span>&#160;        <span class="comment">// - Entry 0 -&gt; Kind of this type of metadata (1).</span></div>
<div class="line"><a name="l04875"></a><span class="lineno"> 4875</span>&#160;        <span class="comment">// - Entry 1 -&gt; Mangled name of the variable.</span></div>
<div class="line"><a name="l04876"></a><span class="lineno"> 4876</span>&#160;        <span class="comment">// - Entry 2 -&gt; Declare target kind.</span></div>
<div class="line"><a name="l04877"></a><span class="lineno"> 4877</span>&#160;        <span class="comment">// - Entry 3 -&gt; Order the entry was created.</span></div>
<div class="line"><a name="l04878"></a><span class="lineno"> 4878</span>&#160;        <span class="comment">// The first element of the metadata node is the kind.</span></div>
<div class="line"><a name="l04879"></a><span class="lineno"> 4879</span>&#160;        <a class="code" href="classllvm_1_1Metadata.html">Metadata</a> *Ops[] = {GetMDInt(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.getKind()), GetMDString(MangledName),</div>
<div class="line"><a name="l04880"></a><span class="lineno"> 4880</span>&#160;                           GetMDInt(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.getFlags()), GetMDInt(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.getOrder())};</div>
<div class="line"><a name="l04881"></a><span class="lineno"> 4881</span>&#160; </div>
<div class="line"><a name="l04882"></a><span class="lineno"> 4882</span>&#160;        <span class="comment">// Save this entry in the right position of the ordered entries array.</span></div>
<div class="line"><a name="l04883"></a><span class="lineno"> 4883</span>&#160;        <a class="code" href="structllvm_1_1TargetRegionEntryInfo.html">TargetRegionEntryInfo</a> varInfo(MangledName, 0, 0, 0);</div>
<div class="line"><a name="l04884"></a><span class="lineno"> 4884</span>&#160;        OrderedEntries[<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.getOrder()] = std::make_pair(&amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, varInfo);</div>
<div class="line"><a name="l04885"></a><span class="lineno"> 4885</span>&#160; </div>
<div class="line"><a name="l04886"></a><span class="lineno"> 4886</span>&#160;        <span class="comment">// Add metadata to the named metadata node.</span></div>
<div class="line"><a name="l04887"></a><span class="lineno"> 4887</span>&#160;        MD-&gt;addOperand(<a class="code" href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">MDNode::get</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, Ops));</div>
<div class="line"><a name="l04888"></a><span class="lineno"> 4888</span>&#160;      };</div>
<div class="line"><a name="l04889"></a><span class="lineno"> 4889</span>&#160; </div>
<div class="line"><a name="l04890"></a><span class="lineno"> 4890</span>&#160;  <a class="code" href="classllvm_1_1OffloadEntriesInfoManager.html">OffloadEntriesInfoManager</a>.<a class="code" href="classllvm_1_1OffloadEntriesInfoManager.html#a453a107a33d0d865ed6e021fc6cdcc20">actOnDeviceGlobalVarEntriesInfo</a>(</div>
<div class="line"><a name="l04891"></a><span class="lineno"> 4891</span>&#160;      DeviceGlobalVarMetadataEmitter);</div>
<div class="line"><a name="l04892"></a><span class="lineno"> 4892</span>&#160; </div>
<div class="line"><a name="l04893"></a><span class="lineno"> 4893</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> : OrderedEntries) {</div>
<div class="line"><a name="l04894"></a><span class="lineno"> 4894</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.first &amp;&amp; <span class="stringliteral">&quot;All ordered entries must exist!&quot;</span>);</div>
<div class="line"><a name="l04895"></a><span class="lineno"> 4895</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *CE =</div>
<div class="line"><a name="l04896"></a><span class="lineno"> 4896</span>&#160;            dyn_cast&lt;OffloadEntriesInfoManager::OffloadEntryInfoTargetRegion&gt;(</div>
<div class="line"><a name="l04897"></a><span class="lineno"> 4897</span>&#160;                <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.first)) {</div>
<div class="line"><a name="l04898"></a><span class="lineno"> 4898</span>&#160;      <span class="keywordflow">if</span> (!CE-&gt;getID() || !CE-&gt;getAddress()) {</div>
<div class="line"><a name="l04899"></a><span class="lineno"> 4899</span>&#160;        <span class="comment">// Do not blame the entry if the parent funtion is not emitted.</span></div>
<div class="line"><a name="l04900"></a><span class="lineno"> 4900</span>&#160;        <a class="code" href="structllvm_1_1TargetRegionEntryInfo.html">TargetRegionEntryInfo</a> EntryInfo = <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.second;</div>
<div class="line"><a name="l04901"></a><span class="lineno"> 4901</span>&#160;        <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> FnName = EntryInfo.<a class="code" href="structllvm_1_1TargetRegionEntryInfo.html#a89525afb0a8095beeb2dc7b083491942">ParentName</a>;</div>
<div class="line"><a name="l04902"></a><span class="lineno"> 4902</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getNamedValue(FnName))</div>
<div class="line"><a name="l04903"></a><span class="lineno"> 4903</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04904"></a><span class="lineno"> 4904</span>&#160;        ErrorFn(EMIT_MD_TARGET_REGION_ERROR, EntryInfo);</div>
<div class="line"><a name="l04905"></a><span class="lineno"> 4905</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04906"></a><span class="lineno"> 4906</span>&#160;      }</div>
<div class="line"><a name="l04907"></a><span class="lineno"> 4907</span>&#160;      createOffloadEntry(CE-&gt;getID(), CE-&gt;getAddress(),</div>
<div class="line"><a name="l04908"></a><span class="lineno"> 4908</span>&#160;                         <span class="comment">/*Size=*/</span>0, CE-&gt;getFlags(),</div>
<div class="line"><a name="l04909"></a><span class="lineno"> 4909</span>&#160;                         <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca8d13a9bcecfac72febceb1103afa048f">GlobalValue::WeakAnyLinkage</a>);</div>
<div class="line"><a name="l04910"></a><span class="lineno"> 4910</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *CE = <a class="code" href="namespacellvm.html#a22eeee01734061ac1b31ccd994c49eef">dyn_cast</a>&lt;</div>
<div class="line"><a name="l04911"></a><span class="lineno"> 4911</span>&#160;                   <a class="code" href="classllvm_1_1OffloadEntriesInfoManager_1_1OffloadEntryInfoDeviceGlobalVar.html">OffloadEntriesInfoManager::OffloadEntryInfoDeviceGlobalVar</a>&gt;(</div>
<div class="line"><a name="l04912"></a><span class="lineno"> 4912</span>&#160;                   <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.first)) {</div>
<div class="line"><a name="l04913"></a><span class="lineno"> 4913</span>&#160;      <a class="code" href="classllvm_1_1OffloadEntriesInfoManager.html#ab9575c71365de4083a7be6ef6572d534">OffloadEntriesInfoManager::OMPTargetGlobalVarEntryKind</a> <a class="code" href="namespacellvm_1_1omp.html#a16d7c5f77008a84ae20bf4a5c41e51f0a4ea7801f17a4e5485e8b050c052fb443">Flags</a> =</div>
<div class="line"><a name="l04914"></a><span class="lineno"> 4914</span>&#160;          <span class="keyword">static_cast&lt;</span><a class="code" href="classllvm_1_1OffloadEntriesInfoManager.html#ab9575c71365de4083a7be6ef6572d534">OffloadEntriesInfoManager::OMPTargetGlobalVarEntryKind</a><span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l04915"></a><span class="lineno"> 4915</span>&#160;              CE-&gt;getFlags());</div>
<div class="line"><a name="l04916"></a><span class="lineno"> 4916</span>&#160;      <span class="keywordflow">switch</span> (<a class="code" href="namespacellvm_1_1omp.html#a16d7c5f77008a84ae20bf4a5c41e51f0a4ea7801f17a4e5485e8b050c052fb443">Flags</a>) {</div>
<div class="line"><a name="l04917"></a><span class="lineno"> 4917</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1OffloadEntriesInfoManager.html#ab9575c71365de4083a7be6ef6572d534acf96797e65a60ff4302eb2bbdbbd8880">OffloadEntriesInfoManager::OMPTargetGlobalVarEntryTo</a>: {</div>
<div class="line"><a name="l04918"></a><span class="lineno"> 4918</span>&#160;        <span class="keywordflow">if</span> (Config.isEmbedded() &amp;&amp; Config.hasRequiresUnifiedSharedMemory())</div>
<div class="line"><a name="l04919"></a><span class="lineno"> 4919</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04920"></a><span class="lineno"> 4920</span>&#160;        <span class="keywordflow">if</span> (!CE-&gt;getAddress()) {</div>
<div class="line"><a name="l04921"></a><span class="lineno"> 4921</span>&#160;          ErrorFn(EMIT_MD_DECLARE_TARGET_ERROR, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.second);</div>
<div class="line"><a name="l04922"></a><span class="lineno"> 4922</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04923"></a><span class="lineno"> 4923</span>&#160;        }</div>
<div class="line"><a name="l04924"></a><span class="lineno"> 4924</span>&#160;        <span class="comment">// The vaiable has no definition - no need to add the entry.</span></div>
<div class="line"><a name="l04925"></a><span class="lineno"> 4925</span>&#160;        <span class="keywordflow">if</span> (CE-&gt;getVarSize() == 0)</div>
<div class="line"><a name="l04926"></a><span class="lineno"> 4926</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04927"></a><span class="lineno"> 4927</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04928"></a><span class="lineno"> 4928</span>&#160;      }</div>
<div class="line"><a name="l04929"></a><span class="lineno"> 4929</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1OffloadEntriesInfoManager.html#ab9575c71365de4083a7be6ef6572d534abe3a7916fb5f7a79d6aea6c0356e71a6">OffloadEntriesInfoManager::OMPTargetGlobalVarEntryLink</a>:</div>
<div class="line"><a name="l04930"></a><span class="lineno"> 4930</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(((Config.isEmbedded() &amp;&amp; !CE-&gt;getAddress()) ||</div>
<div class="line"><a name="l04931"></a><span class="lineno"> 4931</span>&#160;                (!Config.isEmbedded() &amp;&amp; CE-&gt;getAddress())) &amp;&amp;</div>
<div class="line"><a name="l04932"></a><span class="lineno"> 4932</span>&#160;               <span class="stringliteral">&quot;Declaret target link address is set.&quot;</span>);</div>
<div class="line"><a name="l04933"></a><span class="lineno"> 4933</span>&#160;        <span class="keywordflow">if</span> (Config.isEmbedded())</div>
<div class="line"><a name="l04934"></a><span class="lineno"> 4934</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04935"></a><span class="lineno"> 4935</span>&#160;        <span class="keywordflow">if</span> (!CE-&gt;getAddress()) {</div>
<div class="line"><a name="l04936"></a><span class="lineno"> 4936</span>&#160;          ErrorFn(EMIT_MD_GLOBAL_VAR_LINK_ERROR, <a class="code" href="structllvm_1_1TargetRegionEntryInfo.html">TargetRegionEntryInfo</a>());</div>
<div class="line"><a name="l04937"></a><span class="lineno"> 4937</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04938"></a><span class="lineno"> 4938</span>&#160;        }</div>
<div class="line"><a name="l04939"></a><span class="lineno"> 4939</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04940"></a><span class="lineno"> 4940</span>&#160;      }</div>
<div class="line"><a name="l04941"></a><span class="lineno"> 4941</span>&#160; </div>
<div class="line"><a name="l04942"></a><span class="lineno"> 4942</span>&#160;      <span class="comment">// Hidden or internal symbols on the device are not externally visible.</span></div>
<div class="line"><a name="l04943"></a><span class="lineno"> 4943</span>&#160;      <span class="comment">// We should not attempt to register them by creating an offloading</span></div>
<div class="line"><a name="l04944"></a><span class="lineno"> 4944</span>&#160;      <span class="comment">// entry.</span></div>
<div class="line"><a name="l04945"></a><span class="lineno"> 4945</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="structllvm_1_1omp_1_1GV.html">GV</a> = dyn_cast&lt;GlobalValue&gt;(CE-&gt;getAddress()))</div>
<div class="line"><a name="l04946"></a><span class="lineno"> 4946</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="structllvm_1_1omp_1_1GV.html">GV</a>-&gt;hasLocalLinkage() || <a class="code" href="structllvm_1_1omp_1_1GV.html">GV</a>-&gt;hasHiddenVisibility())</div>
<div class="line"><a name="l04947"></a><span class="lineno"> 4947</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04948"></a><span class="lineno"> 4948</span>&#160; </div>
<div class="line"><a name="l04949"></a><span class="lineno"> 4949</span>&#160;      createOffloadEntry(CE-&gt;getAddress(), CE-&gt;getAddress(), CE-&gt;getVarSize(),</div>
<div class="line"><a name="l04950"></a><span class="lineno"> 4950</span>&#160;                         <a class="code" href="namespacellvm_1_1omp.html#a16d7c5f77008a84ae20bf4a5c41e51f0a4ea7801f17a4e5485e8b050c052fb443">Flags</a>, CE-&gt;getLinkage());</div>
<div class="line"><a name="l04951"></a><span class="lineno"> 4951</span>&#160; </div>
<div class="line"><a name="l04952"></a><span class="lineno"> 4952</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04953"></a><span class="lineno"> 4953</span>&#160;      <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unsupported entry kind.&quot;</span>);</div>
<div class="line"><a name="l04954"></a><span class="lineno"> 4954</span>&#160;    }</div>
<div class="line"><a name="l04955"></a><span class="lineno"> 4955</span>&#160;  }</div>
<div class="line"><a name="l04956"></a><span class="lineno"> 4956</span>&#160;}</div>
<div class="line"><a name="l04957"></a><span class="lineno"> 4957</span>&#160; </div>
<div class="line"><a name="l04958"></a><span class="lineno"><a class="line" href="structllvm_1_1TargetRegionEntryInfo.html#a0a267f191642077971aa8eeba25ea6f5"> 4958</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structllvm_1_1TargetRegionEntryInfo.html#a0a267f191642077971aa8eeba25ea6f5">TargetRegionEntryInfo::getTargetRegionEntryFnName</a>(</div>
<div class="line"><a name="l04959"></a><span class="lineno"> 4959</span>&#160;    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;char&gt;</a> &amp;Name, <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> ParentName, <span class="keywordtype">unsigned</span> DeviceID,</div>
<div class="line"><a name="l04960"></a><span class="lineno"> 4960</span>&#160;    <span class="keywordtype">unsigned</span> FileID, <span class="keywordtype">unsigned</span> Line, <span class="keywordtype">unsigned</span> Count) {</div>
<div class="line"><a name="l04961"></a><span class="lineno"> 4961</span>&#160;  <a class="code" href="classllvm_1_1raw__svector__ostream.html">raw_svector_ostream</a> <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>(Name);</div>
<div class="line"><a name="l04962"></a><span class="lineno"> 4962</span>&#160;  <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;__omp_offloading&quot;</span> &lt;&lt; <a class="code" href="namespacellvm.html#a66f0c57e04037076030c6a6e48f44f2d">llvm::format</a>(<span class="stringliteral">&quot;_%x&quot;</span>, DeviceID)</div>
<div class="line"><a name="l04963"></a><span class="lineno"> 4963</span>&#160;     &lt;&lt; <a class="code" href="namespacellvm.html#a66f0c57e04037076030c6a6e48f44f2d">llvm::format</a>(<span class="stringliteral">&quot;_%x_&quot;</span>, FileID) &lt;&lt; ParentName &lt;&lt; <span class="stringliteral">&quot;_l&quot;</span> &lt;&lt; Line;</div>
<div class="line"><a name="l04964"></a><span class="lineno"> 4964</span>&#160;  <span class="keywordflow">if</span> (Count)</div>
<div class="line"><a name="l04965"></a><span class="lineno"> 4965</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;_&quot;</span> &lt;&lt; Count;</div>
<div class="line"><a name="l04966"></a><span class="lineno"> 4966</span>&#160;}</div>
<div class="line"><a name="l04967"></a><span class="lineno"> 4967</span>&#160; </div>
<div class="line"><a name="l04968"></a><span class="lineno"><a class="line" href="classllvm_1_1OffloadEntriesInfoManager.html#a6827980ed8b61f42e680949ff4511b03"> 4968</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OffloadEntriesInfoManager.html#a6827980ed8b61f42e680949ff4511b03">OffloadEntriesInfoManager::getTargetRegionEntryFnName</a>(</div>
<div class="line"><a name="l04969"></a><span class="lineno"> 4969</span>&#160;    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;char&gt;</a> &amp;Name, <span class="keyword">const</span> <a class="code" href="structllvm_1_1TargetRegionEntryInfo.html">TargetRegionEntryInfo</a> &amp;EntryInfo) {</div>
<div class="line"><a name="l04970"></a><span class="lineno"> 4970</span>&#160;  <span class="keywordtype">unsigned</span> NewCount = getTargetRegionEntryInfoCount(EntryInfo);</div>
<div class="line"><a name="l04971"></a><span class="lineno"> 4971</span>&#160;  <a class="code" href="structllvm_1_1TargetRegionEntryInfo.html#a0a267f191642077971aa8eeba25ea6f5">TargetRegionEntryInfo::getTargetRegionEntryFnName</a>(</div>
<div class="line"><a name="l04972"></a><span class="lineno"> 4972</span>&#160;      Name, EntryInfo.<a class="code" href="structllvm_1_1TargetRegionEntryInfo.html#a89525afb0a8095beeb2dc7b083491942">ParentName</a>, EntryInfo.<a class="code" href="structllvm_1_1TargetRegionEntryInfo.html#a50a8eeba86c83f02b7e129b7880ec654">DeviceID</a>, EntryInfo.<a class="code" href="structllvm_1_1TargetRegionEntryInfo.html#a80293a526ecd17ee44ce5b982dff1ca1">FileID</a>,</div>
<div class="line"><a name="l04973"></a><span class="lineno"> 4973</span>&#160;      EntryInfo.<a class="code" href="structllvm_1_1TargetRegionEntryInfo.html#a70f195e58ff3b0960a5c0884449d092a">Line</a>, NewCount);</div>
<div class="line"><a name="l04974"></a><span class="lineno"> 4974</span>&#160;}</div>
<div class="line"><a name="l04975"></a><span class="lineno"> 4975</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l04976"></a><span class="lineno"> 4976</span>&#160;<span class="comment">/// Loads all the offload entries information from the host IR</span></div>
<div class="line"><a name="l04977"></a><span class="lineno"> 4977</span>&#160;<span class="comment">/// metadata.</span></div>
<div class="line"><a name="l04978"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#accfe1687c35e38741ea982488e7bdfae"> 4978</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#accfe1687c35e38741ea982488e7bdfae">OpenMPIRBuilder::loadOffloadInfoMetadata</a>(</div>
<div class="line"><a name="l04979"></a><span class="lineno"> 4979</span>&#160;    <a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <a class="code" href="classllvm_1_1OffloadEntriesInfoManager.html">OffloadEntriesInfoManager</a> &amp;<a class="code" href="classllvm_1_1OffloadEntriesInfoManager.html">OffloadEntriesInfoManager</a>) {</div>
<div class="line"><a name="l04980"></a><span class="lineno"> 4980</span>&#160;  <span class="comment">// If we are in target mode, load the metadata from the host IR. This code has</span></div>
<div class="line"><a name="l04981"></a><span class="lineno"> 4981</span>&#160;  <span class="comment">// to match the metadata creation in createOffloadEntriesAndInfoMetadata().</span></div>
<div class="line"><a name="l04982"></a><span class="lineno"> 4982</span>&#160; </div>
<div class="line"><a name="l04983"></a><span class="lineno"> 4983</span>&#160;  <a class="code" href="classllvm_1_1NamedMDNode.html">NamedMDNode</a> *MD = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getNamedMetadata(ompOffloadInfoName);</div>
<div class="line"><a name="l04984"></a><span class="lineno"> 4984</span>&#160;  <span class="keywordflow">if</span> (!MD)</div>
<div class="line"><a name="l04985"></a><span class="lineno"> 4985</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04986"></a><span class="lineno"> 4986</span>&#160; </div>
<div class="line"><a name="l04987"></a><span class="lineno"> 4987</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *MN : MD-&gt;<a class="code" href="classllvm_1_1NamedMDNode.html#acfe76fbea7879969fb26502ea5ffba97">operands</a>()) {</div>
<div class="line"><a name="l04988"></a><span class="lineno"> 4988</span>&#160;    <span class="keyword">auto</span> &amp;&amp;GetMDInt = [MN](<span class="keywordtype">unsigned</span> Idx) {</div>
<div class="line"><a name="l04989"></a><span class="lineno"> 4989</span>&#160;      <span class="keyword">auto</span> *V = cast&lt;ConstantAsMetadata&gt;(MN-&gt;getOperand(Idx));</div>
<div class="line"><a name="l04990"></a><span class="lineno"> 4990</span>&#160;      <span class="keywordflow">return</span> cast&lt;ConstantInt&gt;(V-&gt;getValue())-&gt;getZExtValue();</div>
<div class="line"><a name="l04991"></a><span class="lineno"> 4991</span>&#160;    };</div>
<div class="line"><a name="l04992"></a><span class="lineno"> 4992</span>&#160; </div>
<div class="line"><a name="l04993"></a><span class="lineno"> 4993</span>&#160;    <span class="keyword">auto</span> &amp;&amp;GetMDString = [MN](<span class="keywordtype">unsigned</span> Idx) {</div>
<div class="line"><a name="l04994"></a><span class="lineno"> 4994</span>&#160;      <span class="keyword">auto</span> *V = cast&lt;MDString&gt;(MN-&gt;getOperand(Idx));</div>
<div class="line"><a name="l04995"></a><span class="lineno"> 4995</span>&#160;      <span class="keywordflow">return</span> V-&gt;getString();</div>
<div class="line"><a name="l04996"></a><span class="lineno"> 4996</span>&#160;    };</div>
<div class="line"><a name="l04997"></a><span class="lineno"> 4997</span>&#160; </div>
<div class="line"><a name="l04998"></a><span class="lineno"> 4998</span>&#160;    <span class="keywordflow">switch</span> (GetMDInt(0)) {</div>
<div class="line"><a name="l04999"></a><span class="lineno"> 4999</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l05000"></a><span class="lineno"> 5000</span>&#160;      <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unexpected metadata!&quot;</span>);</div>
<div class="line"><a name="l05001"></a><span class="lineno"> 5001</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05002"></a><span class="lineno"> 5002</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1OffloadEntriesInfoManager_1_1OffloadEntryInfo.html#a11911aae9559c8e1eefa6b48fe7bd384a38494b09d457a03217eda8929769fbaa">OffloadEntriesInfoManager::OffloadEntryInfo::</a></div>
<div class="line"><a name="l05003"></a><span class="lineno"> 5003</span>&#160;<a class="code" href="classllvm_1_1OffloadEntriesInfoManager_1_1OffloadEntryInfo.html#a11911aae9559c8e1eefa6b48fe7bd384a38494b09d457a03217eda8929769fbaa">        OffloadingEntryInfoTargetRegion</a>: {</div>
<div class="line"><a name="l05004"></a><span class="lineno"> 5004</span>&#160;      <a class="code" href="structllvm_1_1TargetRegionEntryInfo.html">TargetRegionEntryInfo</a> EntryInfo(<span class="comment">/*ParentName=*/</span>GetMDString(3),</div>
<div class="line"><a name="l05005"></a><span class="lineno"> 5005</span>&#160;                                      <span class="comment">/*DeviceID=*/</span>GetMDInt(1),</div>
<div class="line"><a name="l05006"></a><span class="lineno"> 5006</span>&#160;                                      <span class="comment">/*FileID=*/</span>GetMDInt(2),</div>
<div class="line"><a name="l05007"></a><span class="lineno"> 5007</span>&#160;                                      <span class="comment">/*Line=*/</span>GetMDInt(4),</div>
<div class="line"><a name="l05008"></a><span class="lineno"> 5008</span>&#160;                                      <span class="comment">/*Count=*/</span>GetMDInt(5));</div>
<div class="line"><a name="l05009"></a><span class="lineno"> 5009</span>&#160;      <a class="code" href="classllvm_1_1OffloadEntriesInfoManager.html">OffloadEntriesInfoManager</a>.<a class="code" href="classllvm_1_1OffloadEntriesInfoManager.html#ab05d360f14a80b1fc10d1632aa0f1433">initializeTargetRegionEntryInfo</a>(</div>
<div class="line"><a name="l05010"></a><span class="lineno"> 5010</span>&#160;          EntryInfo, <span class="comment">/*Order=*/</span>GetMDInt(6));</div>
<div class="line"><a name="l05011"></a><span class="lineno"> 5011</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05012"></a><span class="lineno"> 5012</span>&#160;    }</div>
<div class="line"><a name="l05013"></a><span class="lineno"> 5013</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1OffloadEntriesInfoManager_1_1OffloadEntryInfo.html#a11911aae9559c8e1eefa6b48fe7bd384a891c1d39adfb3a1133491c4804b2372a">OffloadEntriesInfoManager::OffloadEntryInfo::</a></div>
<div class="line"><a name="l05014"></a><span class="lineno"> 5014</span>&#160;<a class="code" href="classllvm_1_1OffloadEntriesInfoManager_1_1OffloadEntryInfo.html#a11911aae9559c8e1eefa6b48fe7bd384a891c1d39adfb3a1133491c4804b2372a">        OffloadingEntryInfoDeviceGlobalVar</a>:</div>
<div class="line"><a name="l05015"></a><span class="lineno"> 5015</span>&#160;      <a class="code" href="classllvm_1_1OffloadEntriesInfoManager.html">OffloadEntriesInfoManager</a>.<a class="code" href="classllvm_1_1OffloadEntriesInfoManager.html#a4503192ffc49753d6b8ec734f2927742">initializeDeviceGlobalVarEntryInfo</a>(</div>
<div class="line"><a name="l05016"></a><span class="lineno"> 5016</span>&#160;          <span class="comment">/*MangledName=*/</span>GetMDString(1),</div>
<div class="line"><a name="l05017"></a><span class="lineno"> 5017</span>&#160;          <span class="keyword">static_cast&lt;</span><a class="code" href="classllvm_1_1OffloadEntriesInfoManager.html#ab9575c71365de4083a7be6ef6572d534">OffloadEntriesInfoManager::OMPTargetGlobalVarEntryKind</a><span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l05018"></a><span class="lineno"> 5018</span>&#160;              <span class="comment">/*Flags=*/</span>GetMDInt(2)),</div>
<div class="line"><a name="l05019"></a><span class="lineno"> 5019</span>&#160;          <span class="comment">/*Order=*/</span>GetMDInt(3));</div>
<div class="line"><a name="l05020"></a><span class="lineno"> 5020</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l05021"></a><span class="lineno"> 5021</span>&#160;    }</div>
<div class="line"><a name="l05022"></a><span class="lineno"> 5022</span>&#160;  }</div>
<div class="line"><a name="l05023"></a><span class="lineno"> 5023</span>&#160;}</div>
<div class="line"><a name="l05024"></a><span class="lineno"> 5024</span>&#160; </div>
<div class="line"><a name="l05025"></a><span class="lineno"><a class="line" href="classllvm_1_1OffloadEntriesInfoManager.html#af1c69166900a3ea831da7b0bda28554e"> 5025</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1OffloadEntriesInfoManager.html#af1c69166900a3ea831da7b0bda28554e">OffloadEntriesInfoManager::empty</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l05026"></a><span class="lineno"> 5026</span>&#160;  <span class="keywordflow">return</span> OffloadEntriesTargetRegion.empty() &amp;&amp;</div>
<div class="line"><a name="l05027"></a><span class="lineno"> 5027</span>&#160;         OffloadEntriesDeviceGlobalVar.empty();</div>
<div class="line"><a name="l05028"></a><span class="lineno"> 5028</span>&#160;}</div>
<div class="line"><a name="l05029"></a><span class="lineno"> 5029</span>&#160; </div>
<div class="line"><a name="l05030"></a><span class="lineno"> 5030</span>&#160;<span class="keywordtype">unsigned</span> OffloadEntriesInfoManager::getTargetRegionEntryInfoCount(</div>
<div class="line"><a name="l05031"></a><span class="lineno"> 5031</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1TargetRegionEntryInfo.html">TargetRegionEntryInfo</a> &amp;EntryInfo)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l05032"></a><span class="lineno"> 5032</span>&#160;  <span class="keyword">auto</span> It = OffloadEntriesTargetRegionCount.find(</div>
<div class="line"><a name="l05033"></a><span class="lineno"> 5033</span>&#160;      getTargetRegionEntryCountKey(EntryInfo));</div>
<div class="line"><a name="l05034"></a><span class="lineno"> 5034</span>&#160;  <span class="keywordflow">if</span> (It == OffloadEntriesTargetRegionCount.end())</div>
<div class="line"><a name="l05035"></a><span class="lineno"> 5035</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l05036"></a><span class="lineno"> 5036</span>&#160;  <span class="keywordflow">return</span> It-&gt;second;</div>
<div class="line"><a name="l05037"></a><span class="lineno"> 5037</span>&#160;}</div>
<div class="line"><a name="l05038"></a><span class="lineno"> 5038</span>&#160; </div>
<div class="line"><a name="l05039"></a><span class="lineno"> 5039</span>&#160;<span class="keywordtype">void</span> OffloadEntriesInfoManager::incrementTargetRegionEntryInfoCount(</div>
<div class="line"><a name="l05040"></a><span class="lineno"> 5040</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1TargetRegionEntryInfo.html">TargetRegionEntryInfo</a> &amp;EntryInfo) {</div>
<div class="line"><a name="l05041"></a><span class="lineno"> 5041</span>&#160;  OffloadEntriesTargetRegionCount[getTargetRegionEntryCountKey(EntryInfo)] =</div>
<div class="line"><a name="l05042"></a><span class="lineno"> 5042</span>&#160;      EntryInfo.<a class="code" href="structllvm_1_1TargetRegionEntryInfo.html#a8cc8999b43ab73c1f7f8618f7735f3cd">Count</a> + 1;</div>
<div class="line"><a name="l05043"></a><span class="lineno"> 5043</span>&#160;}</div>
<div class="line"><a name="l05044"></a><span class="lineno"> 5044</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l05045"></a><span class="lineno"> 5045</span>&#160;<span class="comment">/// Initialize target region entry.</span></div>
<div class="line"><a name="l05046"></a><span class="lineno"><a class="line" href="classllvm_1_1OffloadEntriesInfoManager.html#ab05d360f14a80b1fc10d1632aa0f1433"> 5046</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OffloadEntriesInfoManager.html#ab05d360f14a80b1fc10d1632aa0f1433">OffloadEntriesInfoManager::initializeTargetRegionEntryInfo</a>(</div>
<div class="line"><a name="l05047"></a><span class="lineno"> 5047</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1TargetRegionEntryInfo.html">TargetRegionEntryInfo</a> &amp;EntryInfo, <span class="keywordtype">unsigned</span> Order) {</div>
<div class="line"><a name="l05048"></a><span class="lineno"> 5048</span>&#160;  OffloadEntriesTargetRegion[EntryInfo] =</div>
<div class="line"><a name="l05049"></a><span class="lineno"> 5049</span>&#160;      <a class="code" href="classllvm_1_1OffloadEntriesInfoManager_1_1OffloadEntryInfoTargetRegion.html">OffloadEntryInfoTargetRegion</a>(Order, <span class="comment">/*Addr=*/</span><span class="keyword">nullptr</span>, <span class="comment">/*ID=*/</span><span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l05050"></a><span class="lineno"> 5050</span>&#160;                                   OMPTargetRegionEntryTargetRegion);</div>
<div class="line"><a name="l05051"></a><span class="lineno"> 5051</span>&#160;  ++OffloadingEntriesNum;</div>
<div class="line"><a name="l05052"></a><span class="lineno"> 5052</span>&#160;}</div>
<div class="line"><a name="l05053"></a><span class="lineno"> 5053</span>&#160; </div>
<div class="line"><a name="l05054"></a><span class="lineno"><a class="line" href="classllvm_1_1OffloadEntriesInfoManager.html#a9736eb60d11b4a8d644d3e32346e7f56"> 5054</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OffloadEntriesInfoManager.html#a9736eb60d11b4a8d644d3e32346e7f56">OffloadEntriesInfoManager::registerTargetRegionEntryInfo</a>(</div>
<div class="line"><a name="l05055"></a><span class="lineno"> 5055</span>&#160;    <a class="code" href="structllvm_1_1TargetRegionEntryInfo.html">TargetRegionEntryInfo</a> EntryInfo, <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>, <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>,</div>
<div class="line"><a name="l05056"></a><span class="lineno"> 5056</span>&#160;    <a class="code" href="classllvm_1_1OffloadEntriesInfoManager.html#a4e85049eada7d6cc3bedde1433ce4a7b">OMPTargetRegionEntryKind</a> Flags) {</div>
<div class="line"><a name="l05057"></a><span class="lineno"> 5057</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(EntryInfo.<a class="code" href="structllvm_1_1TargetRegionEntryInfo.html#a8cc8999b43ab73c1f7f8618f7735f3cd">Count</a> == 0 &amp;&amp; <span class="stringliteral">&quot;expected default EntryInfo&quot;</span>);</div>
<div class="line"><a name="l05058"></a><span class="lineno"> 5058</span>&#160; </div>
<div class="line"><a name="l05059"></a><span class="lineno"> 5059</span>&#160;  <span class="comment">// Update the EntryInfo with the next available count for this location.</span></div>
<div class="line"><a name="l05060"></a><span class="lineno"> 5060</span>&#160;  EntryInfo.<a class="code" href="structllvm_1_1TargetRegionEntryInfo.html#a8cc8999b43ab73c1f7f8618f7735f3cd">Count</a> = getTargetRegionEntryInfoCount(EntryInfo);</div>
<div class="line"><a name="l05061"></a><span class="lineno"> 5061</span>&#160; </div>
<div class="line"><a name="l05062"></a><span class="lineno"> 5062</span>&#160;  <span class="comment">// If we are emitting code for a target, the entry is already initialized,</span></div>
<div class="line"><a name="l05063"></a><span class="lineno"> 5063</span>&#160;  <span class="comment">// only has to be registered.</span></div>
<div class="line"><a name="l05064"></a><span class="lineno"> 5064</span>&#160;  <span class="keywordflow">if</span> (Config.isEmbedded()) {</div>
<div class="line"><a name="l05065"></a><span class="lineno"> 5065</span>&#160;    <span class="comment">// This could happen if the device compilation is invoked standalone.</span></div>
<div class="line"><a name="l05066"></a><span class="lineno"> 5066</span>&#160;    <span class="keywordflow">if</span> (!hasTargetRegionEntryInfo(EntryInfo)) {</div>
<div class="line"><a name="l05067"></a><span class="lineno"> 5067</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05068"></a><span class="lineno"> 5068</span>&#160;    }</div>
<div class="line"><a name="l05069"></a><span class="lineno"> 5069</span>&#160;    <span class="keyword">auto</span> &amp;Entry = OffloadEntriesTargetRegion[EntryInfo];</div>
<div class="line"><a name="l05070"></a><span class="lineno"> 5070</span>&#160;    Entry.setAddress(<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>);</div>
<div class="line"><a name="l05071"></a><span class="lineno"> 5071</span>&#160;    Entry.setID(<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>);</div>
<div class="line"><a name="l05072"></a><span class="lineno"> 5072</span>&#160;    Entry.setFlags(<a class="code" href="namespacellvm_1_1omp.html#a16d7c5f77008a84ae20bf4a5c41e51f0a4ea7801f17a4e5485e8b050c052fb443">Flags</a>);</div>
<div class="line"><a name="l05073"></a><span class="lineno"> 5073</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05074"></a><span class="lineno"> 5074</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1omp.html#a16d7c5f77008a84ae20bf4a5c41e51f0a4ea7801f17a4e5485e8b050c052fb443">Flags</a> == <a class="code" href="classllvm_1_1OffloadEntriesInfoManager.html#a4e85049eada7d6cc3bedde1433ce4a7ba1e2537a111117d2cebad779b6de1856b">OffloadEntriesInfoManager::OMPTargetRegionEntryTargetRegion</a> &amp;&amp;</div>
<div class="line"><a name="l05075"></a><span class="lineno"> 5075</span>&#160;        hasTargetRegionEntryInfo(EntryInfo, <span class="comment">/*IgnoreAddressId*/</span> <span class="keyword">true</span>))</div>
<div class="line"><a name="l05076"></a><span class="lineno"> 5076</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05077"></a><span class="lineno"> 5077</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!hasTargetRegionEntryInfo(EntryInfo) &amp;&amp;</div>
<div class="line"><a name="l05078"></a><span class="lineno"> 5078</span>&#160;           <span class="stringliteral">&quot;Target region entry already registered!&quot;</span>);</div>
<div class="line"><a name="l05079"></a><span class="lineno"> 5079</span>&#160;    <a class="code" href="classllvm_1_1OffloadEntriesInfoManager_1_1OffloadEntryInfoTargetRegion.html">OffloadEntryInfoTargetRegion</a> Entry(OffloadingEntriesNum, <a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>, <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>, <a class="code" href="namespacellvm_1_1omp.html#a16d7c5f77008a84ae20bf4a5c41e51f0a4ea7801f17a4e5485e8b050c052fb443">Flags</a>);</div>
<div class="line"><a name="l05080"></a><span class="lineno"> 5080</span>&#160;    OffloadEntriesTargetRegion[EntryInfo] = Entry;</div>
<div class="line"><a name="l05081"></a><span class="lineno"> 5081</span>&#160;    ++OffloadingEntriesNum;</div>
<div class="line"><a name="l05082"></a><span class="lineno"> 5082</span>&#160;  }</div>
<div class="line"><a name="l05083"></a><span class="lineno"> 5083</span>&#160;  incrementTargetRegionEntryInfoCount(EntryInfo);</div>
<div class="line"><a name="l05084"></a><span class="lineno"> 5084</span>&#160;}</div>
<div class="line"><a name="l05085"></a><span class="lineno"> 5085</span>&#160; </div>
<div class="line"><a name="l05086"></a><span class="lineno"><a class="line" href="classllvm_1_1OffloadEntriesInfoManager.html#a8a88ec295fa5c83572df98cfaff271ed"> 5086</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1OffloadEntriesInfoManager.html#a8a88ec295fa5c83572df98cfaff271ed">OffloadEntriesInfoManager::hasTargetRegionEntryInfo</a>(</div>
<div class="line"><a name="l05087"></a><span class="lineno"> 5087</span>&#160;    <a class="code" href="structllvm_1_1TargetRegionEntryInfo.html">TargetRegionEntryInfo</a> EntryInfo, <span class="keywordtype">bool</span> IgnoreAddressId)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l05088"></a><span class="lineno"> 5088</span>&#160; </div>
<div class="line"><a name="l05089"></a><span class="lineno"> 5089</span>&#160;  <span class="comment">// Update the EntryInfo with the next available count for this location.</span></div>
<div class="line"><a name="l05090"></a><span class="lineno"> 5090</span>&#160;  EntryInfo.<a class="code" href="structllvm_1_1TargetRegionEntryInfo.html#a8cc8999b43ab73c1f7f8618f7735f3cd">Count</a> = getTargetRegionEntryInfoCount(EntryInfo);</div>
<div class="line"><a name="l05091"></a><span class="lineno"> 5091</span>&#160; </div>
<div class="line"><a name="l05092"></a><span class="lineno"> 5092</span>&#160;  <span class="keyword">auto</span> It = OffloadEntriesTargetRegion.find(EntryInfo);</div>
<div class="line"><a name="l05093"></a><span class="lineno"> 5093</span>&#160;  <span class="keywordflow">if</span> (It == OffloadEntriesTargetRegion.end()) {</div>
<div class="line"><a name="l05094"></a><span class="lineno"> 5094</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05095"></a><span class="lineno"> 5095</span>&#160;  }</div>
<div class="line"><a name="l05096"></a><span class="lineno"> 5096</span>&#160;  <span class="comment">// Fail if this entry is already registered.</span></div>
<div class="line"><a name="l05097"></a><span class="lineno"> 5097</span>&#160;  <span class="keywordflow">if</span> (!IgnoreAddressId &amp;&amp; (It-&gt;second.getAddress() || It-&gt;second.getID()))</div>
<div class="line"><a name="l05098"></a><span class="lineno"> 5098</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05099"></a><span class="lineno"> 5099</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05100"></a><span class="lineno"> 5100</span>&#160;}</div>
<div class="line"><a name="l05101"></a><span class="lineno"> 5101</span>&#160; </div>
<div class="line"><a name="l05102"></a><span class="lineno"><a class="line" href="classllvm_1_1OffloadEntriesInfoManager.html#aa87d491241b8ff7bdec84f22843c6ab5"> 5102</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OffloadEntriesInfoManager.html#aa87d491241b8ff7bdec84f22843c6ab5">OffloadEntriesInfoManager::actOnTargetRegionEntriesInfo</a>(</div>
<div class="line"><a name="l05103"></a><span class="lineno"> 5103</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1function__ref.html">OffloadTargetRegionEntryInfoActTy</a> &amp;Action) {</div>
<div class="line"><a name="l05104"></a><span class="lineno"> 5104</span>&#160;  <span class="comment">// Scan all target region entries and perform the provided action.</span></div>
<div class="line"><a name="l05105"></a><span class="lineno"> 5105</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;It : OffloadEntriesTargetRegion) {</div>
<div class="line"><a name="l05106"></a><span class="lineno"> 5106</span>&#160;    Action(It.first, It.second);</div>
<div class="line"><a name="l05107"></a><span class="lineno"> 5107</span>&#160;  }</div>
<div class="line"><a name="l05108"></a><span class="lineno"> 5108</span>&#160;}</div>
<div class="line"><a name="l05109"></a><span class="lineno"> 5109</span>&#160; </div>
<div class="line"><a name="l05110"></a><span class="lineno"><a class="line" href="classllvm_1_1OffloadEntriesInfoManager.html#a4503192ffc49753d6b8ec734f2927742"> 5110</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OffloadEntriesInfoManager.html#a4503192ffc49753d6b8ec734f2927742">OffloadEntriesInfoManager::initializeDeviceGlobalVarEntryInfo</a>(</div>
<div class="line"><a name="l05111"></a><span class="lineno"> 5111</span>&#160;    <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> Name, <a class="code" href="classllvm_1_1OffloadEntriesInfoManager.html#ab9575c71365de4083a7be6ef6572d534">OMPTargetGlobalVarEntryKind</a> Flags, <span class="keywordtype">unsigned</span> Order) {</div>
<div class="line"><a name="l05112"></a><span class="lineno"> 5112</span>&#160;  OffloadEntriesDeviceGlobalVar.try_emplace(Name, Order, <a class="code" href="namespacellvm_1_1omp.html#a16d7c5f77008a84ae20bf4a5c41e51f0a4ea7801f17a4e5485e8b050c052fb443">Flags</a>);</div>
<div class="line"><a name="l05113"></a><span class="lineno"> 5113</span>&#160;  ++OffloadingEntriesNum;</div>
<div class="line"><a name="l05114"></a><span class="lineno"> 5114</span>&#160;}</div>
<div class="line"><a name="l05115"></a><span class="lineno"> 5115</span>&#160; </div>
<div class="line"><a name="l05116"></a><span class="lineno"><a class="line" href="classllvm_1_1OffloadEntriesInfoManager.html#a4229a8d4526cc8fc7d5e043727b07128"> 5116</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OffloadEntriesInfoManager.html#a4229a8d4526cc8fc7d5e043727b07128">OffloadEntriesInfoManager::registerDeviceGlobalVarEntryInfo</a>(</div>
<div class="line"><a name="l05117"></a><span class="lineno"> 5117</span>&#160;    <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a218a3df235546fc092fe0f463e6b714d">VarName</a>, <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>, int64_t VarSize,</div>
<div class="line"><a name="l05118"></a><span class="lineno"> 5118</span>&#160;    <a class="code" href="classllvm_1_1OffloadEntriesInfoManager.html#ab9575c71365de4083a7be6ef6572d534">OMPTargetGlobalVarEntryKind</a> Flags, <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57c">GlobalValue::LinkageTypes</a> Linkage) {</div>
<div class="line"><a name="l05119"></a><span class="lineno"> 5119</span>&#160;  <span class="keywordflow">if</span> (Config.isEmbedded()) {</div>
<div class="line"><a name="l05120"></a><span class="lineno"> 5120</span>&#160;    <span class="comment">// This could happen if the device compilation is invoked standalone.</span></div>
<div class="line"><a name="l05121"></a><span class="lineno"> 5121</span>&#160;    <span class="keywordflow">if</span> (!hasDeviceGlobalVarEntryInfo(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a218a3df235546fc092fe0f463e6b714d">VarName</a>))</div>
<div class="line"><a name="l05122"></a><span class="lineno"> 5122</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05123"></a><span class="lineno"> 5123</span>&#160;    <span class="keyword">auto</span> &amp;Entry = OffloadEntriesDeviceGlobalVar[<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a218a3df235546fc092fe0f463e6b714d">VarName</a>];</div>
<div class="line"><a name="l05124"></a><span class="lineno"> 5124</span>&#160;    <span class="keywordflow">if</span> (Entry.getAddress() &amp;&amp; hasDeviceGlobalVarEntryInfo(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a218a3df235546fc092fe0f463e6b714d">VarName</a>)) {</div>
<div class="line"><a name="l05125"></a><span class="lineno"> 5125</span>&#160;      <span class="keywordflow">if</span> (Entry.getVarSize() == 0) {</div>
<div class="line"><a name="l05126"></a><span class="lineno"> 5126</span>&#160;        Entry.setVarSize(VarSize);</div>
<div class="line"><a name="l05127"></a><span class="lineno"> 5127</span>&#160;        Entry.setLinkage(Linkage);</div>
<div class="line"><a name="l05128"></a><span class="lineno"> 5128</span>&#160;      }</div>
<div class="line"><a name="l05129"></a><span class="lineno"> 5129</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05130"></a><span class="lineno"> 5130</span>&#160;    }</div>
<div class="line"><a name="l05131"></a><span class="lineno"> 5131</span>&#160;    Entry.setVarSize(VarSize);</div>
<div class="line"><a name="l05132"></a><span class="lineno"> 5132</span>&#160;    Entry.setLinkage(Linkage);</div>
<div class="line"><a name="l05133"></a><span class="lineno"> 5133</span>&#160;    Entry.setAddress(<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>);</div>
<div class="line"><a name="l05134"></a><span class="lineno"> 5134</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05135"></a><span class="lineno"> 5135</span>&#160;    <span class="keywordflow">if</span> (hasDeviceGlobalVarEntryInfo(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a218a3df235546fc092fe0f463e6b714d">VarName</a>)) {</div>
<div class="line"><a name="l05136"></a><span class="lineno"> 5136</span>&#160;      <span class="keyword">auto</span> &amp;Entry = OffloadEntriesDeviceGlobalVar[<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a218a3df235546fc092fe0f463e6b714d">VarName</a>];</div>
<div class="line"><a name="l05137"></a><span class="lineno"> 5137</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Entry.isValid() &amp;&amp; Entry.getFlags() == <a class="code" href="namespacellvm_1_1omp.html#a16d7c5f77008a84ae20bf4a5c41e51f0a4ea7801f17a4e5485e8b050c052fb443">Flags</a> &amp;&amp;</div>
<div class="line"><a name="l05138"></a><span class="lineno"> 5138</span>&#160;             <span class="stringliteral">&quot;Entry not initialized!&quot;</span>);</div>
<div class="line"><a name="l05139"></a><span class="lineno"> 5139</span>&#160;      <span class="keywordflow">if</span> (Entry.getVarSize() == 0) {</div>
<div class="line"><a name="l05140"></a><span class="lineno"> 5140</span>&#160;        Entry.setVarSize(VarSize);</div>
<div class="line"><a name="l05141"></a><span class="lineno"> 5141</span>&#160;        Entry.setLinkage(Linkage);</div>
<div class="line"><a name="l05142"></a><span class="lineno"> 5142</span>&#160;      }</div>
<div class="line"><a name="l05143"></a><span class="lineno"> 5143</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05144"></a><span class="lineno"> 5144</span>&#160;    }</div>
<div class="line"><a name="l05145"></a><span class="lineno"> 5145</span>&#160;    OffloadEntriesDeviceGlobalVar.try_emplace(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a218a3df235546fc092fe0f463e6b714d">VarName</a>, OffloadingEntriesNum,</div>
<div class="line"><a name="l05146"></a><span class="lineno"> 5146</span>&#160;                                              <a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>, VarSize, <a class="code" href="namespacellvm_1_1omp.html#a16d7c5f77008a84ae20bf4a5c41e51f0a4ea7801f17a4e5485e8b050c052fb443">Flags</a>, Linkage);</div>
<div class="line"><a name="l05147"></a><span class="lineno"> 5147</span>&#160;    ++OffloadingEntriesNum;</div>
<div class="line"><a name="l05148"></a><span class="lineno"> 5148</span>&#160;  }</div>
<div class="line"><a name="l05149"></a><span class="lineno"> 5149</span>&#160;}</div>
<div class="line"><a name="l05150"></a><span class="lineno"> 5150</span>&#160; </div>
<div class="line"><a name="l05151"></a><span class="lineno"><a class="line" href="classllvm_1_1OffloadEntriesInfoManager.html#a453a107a33d0d865ed6e021fc6cdcc20"> 5151</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OffloadEntriesInfoManager.html#a453a107a33d0d865ed6e021fc6cdcc20">OffloadEntriesInfoManager::actOnDeviceGlobalVarEntriesInfo</a>(</div>
<div class="line"><a name="l05152"></a><span class="lineno"> 5152</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1function__ref.html">OffloadDeviceGlobalVarEntryInfoActTy</a> &amp;Action) {</div>
<div class="line"><a name="l05153"></a><span class="lineno"> 5153</span>&#160;  <span class="comment">// Scan all target region entries and perform the provided action.</span></div>
<div class="line"><a name="l05154"></a><span class="lineno"> 5154</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> : OffloadEntriesDeviceGlobalVar)</div>
<div class="line"><a name="l05155"></a><span class="lineno"> 5155</span>&#160;    Action(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.getKey(), <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.getValue());</div>
<div class="line"><a name="l05156"></a><span class="lineno"> 5156</span>&#160;}</div>
<div class="line"><a name="l05157"></a><span class="lineno"> 5157</span>&#160; </div>
<div class="line"><a name="l05158"></a><span class="lineno"> 5158</span>&#160;<span class="keywordtype">void</span> CanonicalLoopInfo::collectControlBlocks(</div>
<div class="line"><a name="l05159"></a><span class="lineno"> 5159</span>&#160;    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;BasicBlock *&gt;</a> &amp;BBs) {</div>
<div class="line"><a name="l05160"></a><span class="lineno"> 5160</span>&#160;  <span class="comment">// We only count those BBs as control block for which we do not need to</span></div>
<div class="line"><a name="l05161"></a><span class="lineno"> 5161</span>&#160;  <span class="comment">// reverse the CFG, i.e. not the loop body which can contain arbitrary control</span></div>
<div class="line"><a name="l05162"></a><span class="lineno"> 5162</span>&#160;  <span class="comment">// flow. For consistency, this also means we do not add the Body block, which</span></div>
<div class="line"><a name="l05163"></a><span class="lineno"> 5163</span>&#160;  <span class="comment">// is just the entry to the body code.</span></div>
<div class="line"><a name="l05164"></a><span class="lineno"> 5164</span>&#160;  BBs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a499ea32ca1b8d16cedfe01d1e5b08f29">reserve</a>(BBs.size() + 6);</div>
<div class="line"><a name="l05165"></a><span class="lineno"> 5165</span>&#160;  BBs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a7efd1f0c1206d95e4fe01a9b49a57b82">append</a>({getPreheader(), Header, <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, Latch, Exit, getAfter()});</div>
<div class="line"><a name="l05166"></a><span class="lineno"> 5166</span>&#160;}</div>
<div class="line"><a name="l05167"></a><span class="lineno"> 5167</span>&#160; </div>
<div class="line"><a name="l05168"></a><span class="lineno"><a class="line" href="classllvm_1_1CanonicalLoopInfo.html#ad50eb30e70ff2a9ea7f220547e2b6f6d"> 5168</a></span>&#160;<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#ad50eb30e70ff2a9ea7f220547e2b6f6d">CanonicalLoopInfo::getPreheader</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l05169"></a><span class="lineno"> 5169</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">isValid</a>() &amp;&amp; <span class="stringliteral">&quot;Requires a valid canonical loop&quot;</span>);</div>
<div class="line"><a name="l05170"></a><span class="lineno"> 5170</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Pred : <a class="code" href="namespacellvm.html#acb22fb04083152eee862457e42e8dc31">predecessors</a>(Header)) {</div>
<div class="line"><a name="l05171"></a><span class="lineno"> 5171</span>&#160;    <span class="keywordflow">if</span> (Pred != Latch)</div>
<div class="line"><a name="l05172"></a><span class="lineno"> 5172</span>&#160;      <span class="keywordflow">return</span> Pred;</div>
<div class="line"><a name="l05173"></a><span class="lineno"> 5173</span>&#160;  }</div>
<div class="line"><a name="l05174"></a><span class="lineno"> 5174</span>&#160;  <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Missing preheader&quot;</span>);</div>
<div class="line"><a name="l05175"></a><span class="lineno"> 5175</span>&#160;}</div>
<div class="line"><a name="l05176"></a><span class="lineno"> 5176</span>&#160; </div>
<div class="line"><a name="l05177"></a><span class="lineno"> 5177</span>&#160;<span class="keywordtype">void</span> CanonicalLoopInfo::setTripCount(<a class="code" href="classllvm_1_1Value.html">Value</a> *TripCount) {</div>
<div class="line"><a name="l05178"></a><span class="lineno"> 5178</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">isValid</a>() &amp;&amp; <span class="stringliteral">&quot;Requires a valid canonical loop&quot;</span>);</div>
<div class="line"><a name="l05179"></a><span class="lineno"> 5179</span>&#160; </div>
<div class="line"><a name="l05180"></a><span class="lineno"> 5180</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *CmpI = &amp;getCond()-&gt;front();</div>
<div class="line"><a name="l05181"></a><span class="lineno"> 5181</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;CmpInst&gt;(CmpI) &amp;&amp; <span class="stringliteral">&quot;First inst must compare IV with TripCount&quot;</span>);</div>
<div class="line"><a name="l05182"></a><span class="lineno"> 5182</span>&#160;  CmpI-&gt;<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(1, TripCount);</div>
<div class="line"><a name="l05183"></a><span class="lineno"> 5183</span>&#160; </div>
<div class="line"><a name="l05184"></a><span class="lineno"> 5184</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l05185"></a><span class="lineno"> 5185</span>&#160;  assertOK();</div>
<div class="line"><a name="l05186"></a><span class="lineno"> 5186</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l05187"></a><span class="lineno"> 5187</span>&#160;}</div>
<div class="line"><a name="l05188"></a><span class="lineno"> 5188</span>&#160; </div>
<div class="line"><a name="l05189"></a><span class="lineno"> 5189</span>&#160;<span class="keywordtype">void</span> CanonicalLoopInfo::mapIndVar(</div>
<div class="line"><a name="l05190"></a><span class="lineno"> 5190</span>&#160;    <a class="code" href="classllvm_1_1function__ref.html">llvm::function_ref</a>&lt;<a class="code" href="classllvm_1_1Value.html">Value</a> *(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *)&gt; Updater) {</div>
<div class="line"><a name="l05191"></a><span class="lineno"> 5191</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">isValid</a>() &amp;&amp; <span class="stringliteral">&quot;Requires a valid canonical loop&quot;</span>);</div>
<div class="line"><a name="l05192"></a><span class="lineno"> 5192</span>&#160; </div>
<div class="line"><a name="l05193"></a><span class="lineno"> 5193</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *OldIV = getIndVar();</div>
<div class="line"><a name="l05194"></a><span class="lineno"> 5194</span>&#160; </div>
<div class="line"><a name="l05195"></a><span class="lineno"> 5195</span>&#160;  <span class="comment">// Record all uses excluding those introduced by the updater. Uses by the</span></div>
<div class="line"><a name="l05196"></a><span class="lineno"> 5196</span>&#160;  <span class="comment">// CanonicalLoopInfo itself to keep track of the number of iterations are</span></div>
<div class="line"><a name="l05197"></a><span class="lineno"> 5197</span>&#160;  <span class="comment">// excluded.</span></div>
<div class="line"><a name="l05198"></a><span class="lineno"> 5198</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Use *&gt;</a> ReplacableUses;</div>
<div class="line"><a name="l05199"></a><span class="lineno"> 5199</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U : OldIV-&gt;<a class="code" href="classllvm_1_1Value.html#aecb93439702247fe5353a9966f7cefcd">uses</a>()) {</div>
<div class="line"><a name="l05200"></a><span class="lineno"> 5200</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="classllvm_1_1User.html">User</a> = dyn_cast&lt;Instruction&gt;(U.getUser());</div>
<div class="line"><a name="l05201"></a><span class="lineno"> 5201</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1User.html">User</a>)</div>
<div class="line"><a name="l05202"></a><span class="lineno"> 5202</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l05203"></a><span class="lineno"> 5203</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1User.html">User</a>-&gt;getParent() == getCond())</div>
<div class="line"><a name="l05204"></a><span class="lineno"> 5204</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l05205"></a><span class="lineno"> 5205</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1User.html">User</a>-&gt;getParent() == getLatch())</div>
<div class="line"><a name="l05206"></a><span class="lineno"> 5206</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l05207"></a><span class="lineno"> 5207</span>&#160;    ReplacableUses.push_back(&amp;U);</div>
<div class="line"><a name="l05208"></a><span class="lineno"> 5208</span>&#160;  }</div>
<div class="line"><a name="l05209"></a><span class="lineno"> 5209</span>&#160; </div>
<div class="line"><a name="l05210"></a><span class="lineno"> 5210</span>&#160;  <span class="comment">// Run the updater that may introduce new uses</span></div>
<div class="line"><a name="l05211"></a><span class="lineno"> 5211</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NewIV = Updater(OldIV);</div>
<div class="line"><a name="l05212"></a><span class="lineno"> 5212</span>&#160; </div>
<div class="line"><a name="l05213"></a><span class="lineno"> 5213</span>&#160;  <span class="comment">// Replace the old uses with the value returned by the updater.</span></div>
<div class="line"><a name="l05214"></a><span class="lineno"> 5214</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">Use</a> *U : ReplacableUses)</div>
<div class="line"><a name="l05215"></a><span class="lineno"> 5215</span>&#160;    U-&gt;set(NewIV);</div>
<div class="line"><a name="l05216"></a><span class="lineno"> 5216</span>&#160; </div>
<div class="line"><a name="l05217"></a><span class="lineno"> 5217</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l05218"></a><span class="lineno"> 5218</span>&#160;  assertOK();</div>
<div class="line"><a name="l05219"></a><span class="lineno"> 5219</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l05220"></a><span class="lineno"> 5220</span>&#160;}</div>
<div class="line"><a name="l05221"></a><span class="lineno"> 5221</span>&#160; </div>
<div class="line"><a name="l05222"></a><span class="lineno"><a class="line" href="classllvm_1_1CanonicalLoopInfo.html#a32ff799dcb39887a8d21322020f305ba"> 5222</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a32ff799dcb39887a8d21322020f305ba">CanonicalLoopInfo::assertOK</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l05223"></a><span class="lineno"> 5223</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l05224"></a><span class="lineno"> 5224</span>&#160;  <span class="comment">// No constraints if this object currently does not describe a loop.</span></div>
<div class="line"><a name="l05225"></a><span class="lineno"> 5225</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">isValid</a>())</div>
<div class="line"><a name="l05226"></a><span class="lineno"> 5226</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05227"></a><span class="lineno"> 5227</span>&#160; </div>
<div class="line"><a name="l05228"></a><span class="lineno"> 5228</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Preheader = getPreheader();</div>
<div class="line"><a name="l05229"></a><span class="lineno"> 5229</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Body = getBody();</div>
<div class="line"><a name="l05230"></a><span class="lineno"> 5230</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *After = getAfter();</div>
<div class="line"><a name="l05231"></a><span class="lineno"> 5231</span>&#160; </div>
<div class="line"><a name="l05232"></a><span class="lineno"> 5232</span>&#160;  <span class="comment">// Verify standard control-flow we use for OpenMP loops.</span></div>
<div class="line"><a name="l05233"></a><span class="lineno"> 5233</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Preheader);</div>
<div class="line"><a name="l05234"></a><span class="lineno"> 5234</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;BranchInst&gt;(Preheader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()) &amp;&amp;</div>
<div class="line"><a name="l05235"></a><span class="lineno"> 5235</span>&#160;         <span class="stringliteral">&quot;Preheader must terminate with unconditional branch&quot;</span>);</div>
<div class="line"><a name="l05236"></a><span class="lineno"> 5236</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Preheader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a79c007dcf9fff57e1569e778d7885b5e">getSingleSuccessor</a>() == Header &amp;&amp;</div>
<div class="line"><a name="l05237"></a><span class="lineno"> 5237</span>&#160;         <span class="stringliteral">&quot;Preheader must jump to header&quot;</span>);</div>
<div class="line"><a name="l05238"></a><span class="lineno"> 5238</span>&#160; </div>
<div class="line"><a name="l05239"></a><span class="lineno"> 5239</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Header);</div>
<div class="line"><a name="l05240"></a><span class="lineno"> 5240</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;BranchInst&gt;(Header-&gt;getTerminator()) &amp;&amp;</div>
<div class="line"><a name="l05241"></a><span class="lineno"> 5241</span>&#160;         <span class="stringliteral">&quot;Header must terminate with unconditional branch&quot;</span>);</div>
<div class="line"><a name="l05242"></a><span class="lineno"> 5242</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Header-&gt;getSingleSuccessor() == <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> &amp;&amp;</div>
<div class="line"><a name="l05243"></a><span class="lineno"> 5243</span>&#160;         <span class="stringliteral">&quot;Header must jump to exiting block&quot;</span>);</div>
<div class="line"><a name="l05244"></a><span class="lineno"> 5244</span>&#160; </div>
<div class="line"><a name="l05245"></a><span class="lineno"> 5245</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>);</div>
<div class="line"><a name="l05246"></a><span class="lineno"> 5246</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>-&gt;getSinglePredecessor() == Header &amp;&amp;</div>
<div class="line"><a name="l05247"></a><span class="lineno"> 5247</span>&#160;         <span class="stringliteral">&quot;Exiting block only reachable from header&quot;</span>);</div>
<div class="line"><a name="l05248"></a><span class="lineno"> 5248</span>&#160; </div>
<div class="line"><a name="l05249"></a><span class="lineno"> 5249</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;BranchInst&gt;(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>-&gt;getTerminator()) &amp;&amp;</div>
<div class="line"><a name="l05250"></a><span class="lineno"> 5250</span>&#160;         <span class="stringliteral">&quot;Exiting block must terminate with conditional branch&quot;</span>);</div>
<div class="line"><a name="l05251"></a><span class="lineno"> 5251</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm.html#a10f3d955592ae2bc745f57e5b48ae115">size</a>(<a class="code" href="namespacellvm.html#a26e2a938b431eaa6eca2beaa96410c9d">successors</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>)) == 2 &amp;&amp;</div>
<div class="line"><a name="l05252"></a><span class="lineno"> 5252</span>&#160;         <span class="stringliteral">&quot;Exiting block must have two successors&quot;</span>);</div>
<div class="line"><a name="l05253"></a><span class="lineno"> 5253</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(cast&lt;BranchInst&gt;(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>-&gt;getTerminator())-&gt;getSuccessor(0) == Body &amp;&amp;</div>
<div class="line"><a name="l05254"></a><span class="lineno"> 5254</span>&#160;         <span class="stringliteral">&quot;Exiting block&#39;s first successor jump to the body&quot;</span>);</div>
<div class="line"><a name="l05255"></a><span class="lineno"> 5255</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(cast&lt;BranchInst&gt;(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>-&gt;getTerminator())-&gt;getSuccessor(1) == Exit &amp;&amp;</div>
<div class="line"><a name="l05256"></a><span class="lineno"> 5256</span>&#160;         <span class="stringliteral">&quot;Exiting block&#39;s second successor must exit the loop&quot;</span>);</div>
<div class="line"><a name="l05257"></a><span class="lineno"> 5257</span>&#160; </div>
<div class="line"><a name="l05258"></a><span class="lineno"> 5258</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Body);</div>
<div class="line"><a name="l05259"></a><span class="lineno"> 5259</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Body-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a59fb91d1691350f7d1b8e8a114e3f2a4">getSinglePredecessor</a>() == <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> &amp;&amp;</div>
<div class="line"><a name="l05260"></a><span class="lineno"> 5260</span>&#160;         <span class="stringliteral">&quot;Body only reachable from exiting block&quot;</span>);</div>
<div class="line"><a name="l05261"></a><span class="lineno"> 5261</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!isa&lt;PHINode&gt;(Body-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ab706e7ebb1969c5e34f28bfcf2ff719e">front</a>()));</div>
<div class="line"><a name="l05262"></a><span class="lineno"> 5262</span>&#160; </div>
<div class="line"><a name="l05263"></a><span class="lineno"> 5263</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Latch);</div>
<div class="line"><a name="l05264"></a><span class="lineno"> 5264</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;BranchInst&gt;(Latch-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()) &amp;&amp;</div>
<div class="line"><a name="l05265"></a><span class="lineno"> 5265</span>&#160;         <span class="stringliteral">&quot;Latch must terminate with unconditional branch&quot;</span>);</div>
<div class="line"><a name="l05266"></a><span class="lineno"> 5266</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Latch-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a79c007dcf9fff57e1569e778d7885b5e">getSingleSuccessor</a>() == Header &amp;&amp; <span class="stringliteral">&quot;Latch must jump to header&quot;</span>);</div>
<div class="line"><a name="l05267"></a><span class="lineno"> 5267</span>&#160;  <span class="comment">// TODO: To support simple redirecting of the end of the body code that has</span></div>
<div class="line"><a name="l05268"></a><span class="lineno"> 5268</span>&#160;  <span class="comment">// multiple; introduce another auxiliary basic block like preheader and after.</span></div>
<div class="line"><a name="l05269"></a><span class="lineno"> 5269</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Latch-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a59fb91d1691350f7d1b8e8a114e3f2a4">getSinglePredecessor</a>() != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l05270"></a><span class="lineno"> 5270</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!isa&lt;PHINode&gt;(Latch-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ab706e7ebb1969c5e34f28bfcf2ff719e">front</a>()));</div>
<div class="line"><a name="l05271"></a><span class="lineno"> 5271</span>&#160; </div>
<div class="line"><a name="l05272"></a><span class="lineno"> 5272</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Exit);</div>
<div class="line"><a name="l05273"></a><span class="lineno"> 5273</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;BranchInst&gt;(Exit-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">getTerminator</a>()) &amp;&amp;</div>
<div class="line"><a name="l05274"></a><span class="lineno"> 5274</span>&#160;         <span class="stringliteral">&quot;Exit block must terminate with unconditional branch&quot;</span>);</div>
<div class="line"><a name="l05275"></a><span class="lineno"> 5275</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Exit-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a79c007dcf9fff57e1569e778d7885b5e">getSingleSuccessor</a>() == After &amp;&amp;</div>
<div class="line"><a name="l05276"></a><span class="lineno"> 5276</span>&#160;         <span class="stringliteral">&quot;Exit block must jump to after block&quot;</span>);</div>
<div class="line"><a name="l05277"></a><span class="lineno"> 5277</span>&#160; </div>
<div class="line"><a name="l05278"></a><span class="lineno"> 5278</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(After);</div>
<div class="line"><a name="l05279"></a><span class="lineno"> 5279</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(After-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a59fb91d1691350f7d1b8e8a114e3f2a4">getSinglePredecessor</a>() == Exit &amp;&amp;</div>
<div class="line"><a name="l05280"></a><span class="lineno"> 5280</span>&#160;         <span class="stringliteral">&quot;After block only reachable from exit block&quot;</span>);</div>
<div class="line"><a name="l05281"></a><span class="lineno"> 5281</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(After-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a266367eb01c634406b32f816d2d9c6bf">empty</a>() || !isa&lt;PHINode&gt;(After-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ab706e7ebb1969c5e34f28bfcf2ff719e">front</a>()));</div>
<div class="line"><a name="l05282"></a><span class="lineno"> 5282</span>&#160; </div>
<div class="line"><a name="l05283"></a><span class="lineno"> 5283</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *IndVar = getIndVar();</div>
<div class="line"><a name="l05284"></a><span class="lineno"> 5284</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IndVar &amp;&amp; <span class="stringliteral">&quot;Canonical induction variable not found?&quot;</span>);</div>
<div class="line"><a name="l05285"></a><span class="lineno"> 5285</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;IntegerType&gt;(IndVar-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()) &amp;&amp;</div>
<div class="line"><a name="l05286"></a><span class="lineno"> 5286</span>&#160;         <span class="stringliteral">&quot;Induction variable must be an integer&quot;</span>);</div>
<div class="line"><a name="l05287"></a><span class="lineno"> 5287</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(cast&lt;PHINode&gt;(IndVar)-&gt;<a class="code" href="BasicAliasAnalysis_8cpp.html#a2675de1d8479c7b00387979714da43f7">getParent</a>() == Header &amp;&amp;</div>
<div class="line"><a name="l05288"></a><span class="lineno"> 5288</span>&#160;         <span class="stringliteral">&quot;Induction variable must be a PHI in the loop header&quot;</span>);</div>
<div class="line"><a name="l05289"></a><span class="lineno"> 5289</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(cast&lt;PHINode&gt;(IndVar)-&gt;getIncomingBlock(0) == Preheader);</div>
<div class="line"><a name="l05290"></a><span class="lineno"> 5290</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(</div>
<div class="line"><a name="l05291"></a><span class="lineno"> 5291</span>&#160;      cast&lt;ConstantInt&gt;(cast&lt;PHINode&gt;(IndVar)-&gt;getIncomingValue(0))-&gt;<a class="code" href="Lint_8cpp.html#a45005634b54e2126cb3e6ec0dbc9ade4">isZero</a>());</div>
<div class="line"><a name="l05292"></a><span class="lineno"> 5292</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(cast&lt;PHINode&gt;(IndVar)-&gt;getIncomingBlock(1) == Latch);</div>
<div class="line"><a name="l05293"></a><span class="lineno"> 5293</span>&#160; </div>
<div class="line"><a name="l05294"></a><span class="lineno"> 5294</span>&#160;  <span class="keyword">auto</span> *NextIndVar = cast&lt;PHINode&gt;(IndVar)-&gt;getIncomingValue(1);</div>
<div class="line"><a name="l05295"></a><span class="lineno"> 5295</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(cast&lt;Instruction&gt;(NextIndVar)-&gt;<a class="code" href="BasicAliasAnalysis_8cpp.html#a2675de1d8479c7b00387979714da43f7">getParent</a>() == Latch);</div>
<div class="line"><a name="l05296"></a><span class="lineno"> 5296</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(cast&lt;BinaryOperator&gt;(NextIndVar)-&gt;<a class="code" href="VPlanSLP_8cpp.html#af04704e906a9654777e92a4612c58c13">getOpcode</a>() == <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">BinaryOperator::Add</a>);</div>
<div class="line"><a name="l05297"></a><span class="lineno"> 5297</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(cast&lt;BinaryOperator&gt;(NextIndVar)-&gt;getOperand(0) == IndVar);</div>
<div class="line"><a name="l05298"></a><span class="lineno"> 5298</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(cast&lt;ConstantInt&gt;(cast&lt;BinaryOperator&gt;(NextIndVar)-&gt;getOperand(1))</div>
<div class="line"><a name="l05299"></a><span class="lineno"> 5299</span>&#160;             -&gt;isOne());</div>
<div class="line"><a name="l05300"></a><span class="lineno"> 5300</span>&#160; </div>
<div class="line"><a name="l05301"></a><span class="lineno"> 5301</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *TripCount = <a class="code" href="LoopIdiomRecognize_8cpp.html#a1d585c107a14470e0f38289b60164ed1">getTripCount</a>();</div>
<div class="line"><a name="l05302"></a><span class="lineno"> 5302</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TripCount &amp;&amp; <span class="stringliteral">&quot;Loop trip count not found?&quot;</span>);</div>
<div class="line"><a name="l05303"></a><span class="lineno"> 5303</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IndVar-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() == TripCount-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() &amp;&amp;</div>
<div class="line"><a name="l05304"></a><span class="lineno"> 5304</span>&#160;         <span class="stringliteral">&quot;Trip count and induction variable must have the same type&quot;</span>);</div>
<div class="line"><a name="l05305"></a><span class="lineno"> 5305</span>&#160; </div>
<div class="line"><a name="l05306"></a><span class="lineno"> 5306</span>&#160;  <span class="keyword">auto</span> *CmpI = cast&lt;CmpInst&gt;(&amp;<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>-&gt;front());</div>
<div class="line"><a name="l05307"></a><span class="lineno"> 5307</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CmpI-&gt;getPredicate() == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">CmpInst::ICMP_ULT</a> &amp;&amp;</div>
<div class="line"><a name="l05308"></a><span class="lineno"> 5308</span>&#160;         <span class="stringliteral">&quot;Exit condition must be a signed less-than comparison&quot;</span>);</div>
<div class="line"><a name="l05309"></a><span class="lineno"> 5309</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CmpI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0) == IndVar &amp;&amp;</div>
<div class="line"><a name="l05310"></a><span class="lineno"> 5310</span>&#160;         <span class="stringliteral">&quot;Exit condition must compare the induction variable&quot;</span>);</div>
<div class="line"><a name="l05311"></a><span class="lineno"> 5311</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CmpI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1) == TripCount &amp;&amp;</div>
<div class="line"><a name="l05312"></a><span class="lineno"> 5312</span>&#160;         <span class="stringliteral">&quot;Exit condition must compare with the trip count&quot;</span>);</div>
<div class="line"><a name="l05313"></a><span class="lineno"> 5313</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l05314"></a><span class="lineno"> 5314</span>&#160;}</div>
<div class="line"><a name="l05315"></a><span class="lineno"> 5315</span>&#160; </div>
<div class="line"><a name="l05316"></a><span class="lineno"><a class="line" href="classllvm_1_1CanonicalLoopInfo.html#a9ce55b05f8ad85126fc92eeeb35457c7"> 5316</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a9ce55b05f8ad85126fc92eeeb35457c7">CanonicalLoopInfo::invalidate</a>() {</div>
<div class="line"><a name="l05317"></a><span class="lineno"> 5317</span>&#160;  Header = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l05318"></a><span class="lineno"> 5318</span>&#160;  <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l05319"></a><span class="lineno"> 5319</span>&#160;  Latch = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l05320"></a><span class="lineno"> 5320</span>&#160;  Exit = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l05321"></a><span class="lineno"> 5321</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7a514f0e7b2d577f06c98896a8a094d09e"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a514f0e7b2d577f06c98896a8a094d09e">llvm::omp::OMPScheduleType::NomergeOrderedStatic</a></div><div class="ttdeci">@ NomergeOrderedStatic</div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00029">README.txt:29</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstructionCost_html"><div class="ttname"><a href="classllvm_1_1InstructionCost.html">llvm::InstructionCost</a></div><div class="ttdef"><b>Definition:</b> <a href="InstructionCost_8h_source.html#l00029">InstructionCost.h:29</a></div></div>
<div class="ttc" id="aNVVMIntrRange_8cpp_html_abc8aecb5b627f6a91fc2fb09762d2a41"><div class="ttname"><a href="NVVMIntrRange_8cpp.html#abc8aecb5b627f6a91fc2fb09762d2a41">Int32Ty</a></div><div class="ttdeci">IntegerType * Int32Ty</div><div class="ttdef"><b>Definition:</b> <a href="NVVMIntrRange_8cpp_source.html#l00067">NVVMIntrRange.cpp:67</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7aa9e644958c4830585ae78527092ea4fd"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7aa9e644958c4830585ae78527092ea4fd">llvm::omp::OMPScheduleType::BaseGuidedChunked</a></div><div class="ttdeci">@ BaseGuidedChunked</div></div>
<div class="ttc" id="aclassllvm_1_1CanonicalLoopInfo_html_ac72ebc430ef7dcf1791c66080ddedd9d"><div class="ttname"><a href="classllvm_1_1CanonicalLoopInfo.html#ac72ebc430ef7dcf1791c66080ddedd9d">llvm::CanonicalLoopInfo::getPreheaderIP</a></div><div class="ttdeci">OpenMPIRBuilder::InsertPointTy getPreheaderIP() const</div><div class="ttdoc">Return the insertion point for user code before the loop.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l02377">OMPIRBuilder.h:2377</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1UnrollingPreferences_html_acc2a7ecc1c0355035c91448ed850390f"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#acc2a7ecc1c0355035c91448ed850390f">llvm::TargetTransformInfo::UnrollingPreferences::BEInsns</a></div><div class="ttdeci">unsigned BEInsns</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00490">TargetTransformInfo.h:490</a></div></div>
<div class="ttc" id="aclassllvm_1_1Argument_html"><div class="ttname"><a href="classllvm_1_1Argument.html">llvm::Argument</a></div><div class="ttdoc">This class represents an incoming formal argument to a Function.</div><div class="ttdef"><b>Definition:</b> <a href="Argument_8h_source.html#l00028">Argument.h:28</a></div></div>
<div class="ttc" id="aAssumptionCache_8h_html"><div class="ttname"><a href="AssumptionCache_8h.html">AssumptionCache.h</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1UnrollingPreferences_html_a54b17420c467d2bb9edd2f79e54d2b6f"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a54b17420c467d2bb9edd2f79e54d2b6f">llvm::TargetTransformInfo::UnrollingPreferences::PartialOptSizeThreshold</a></div><div class="ttdeci">unsigned PartialOptSizeThreshold</div><div class="ttdoc">The cost threshold for the unrolled loop when optimizing for size, like OptSizeThreshold,...</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00469">TargetTransformInfo.h:469</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_aa0c0d79dafb0d22308ce48808689f430afa583a38ff705195c9bce9dec0c5eff8"><div class="ttname"><a href="namespacellvm_1_1omp.html#aa0c0d79dafb0d22308ce48808689f430afa583a38ff705195c9bce9dec0c5eff8">llvm::omp::OMP_TGT_EXEC_MODE_GENERIC</a></div><div class="ttdeci">@ OMP_TGT_EXEC_MODE_GENERIC</div><div class="ttdef"><b>Definition:</b> <a href="OMPDeviceConstants_8h_source.html#l00022">OMPDeviceConstants.h:22</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_ad89dcb3cd8a39ae57a69487c2988dace"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#ad89dcb3cd8a39ae57a69487c2988dace">llvm::OpenMPIRBuilder::createCachedThreadPrivate</a></div><div class="ttdeci">CallInst * createCachedThreadPrivate(const LocationDescription &amp;Loc, llvm::Value *Pointer, llvm::ConstantInt *Size, const llvm::Twine &amp;Name=Twine(&quot;&quot;))</div><div class="ttdoc">Create a runtime call for kmpc_threadprivate_cached.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l03867">OMPIRBuilder.cpp:3867</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a0b4e7bee9b8575cc7db73329f1a561bd"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">llvm::BasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00316">BasicBlock.h:316</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9bccbe67aaab722783ca4e7c504aaaa7a960fbd067612ca87e16d5dfdb12fe40a"><div class="ttname"><a href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7a960fbd067612ca87e16d5dfdb12fe40a">llvm::AtomicOrdering::AcquireRelease</a></div><div class="ttdeci">@ AcquireRelease</div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a9d3ba236d13373cde794da2023acc7a0"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9d3ba236d13373cde794da2023acc7a0">Attrs</a></div><div class="ttdeci">Function Attrs</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00215">README_ALTIVEC.txt:215</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetIRAnalysis_html"><div class="ttname"><a href="classllvm_1_1TargetIRAnalysis.html">llvm::TargetIRAnalysis</a></div><div class="ttdoc">Analysis pass providing the TargetTransformInfo.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l02626">TargetTransformInfo.h:2626</a></div></div>
<div class="ttc" id="aclassllvm_1_1OffloadEntriesInfoManager_html_a4e85049eada7d6cc3bedde1433ce4a7b"><div class="ttname"><a href="classllvm_1_1OffloadEntriesInfoManager.html#a4e85049eada7d6cc3bedde1433ce4a7b">llvm::OffloadEntriesInfoManager::OMPTargetRegionEntryKind</a></div><div class="ttdeci">OMPTargetRegionEntryKind</div><div class="ttdoc">Kind of the target registry entry.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l02004">OMPIRBuilder.h:2004</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1LocationDescription_html"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">llvm::OpenMPIRBuilder::LocationDescription</a></div><div class="ttdoc">Description of a LLVM-IR insertion point (IP) and a debug/source location (filename,...</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l00305">OMPIRBuilder.h:305</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1TargetDataRTArgs_html_aff8f3378279256a13c9938a109ef38fe"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1TargetDataRTArgs.html#aff8f3378279256a13c9938a109ef38fe">llvm::OpenMPIRBuilder::TargetDataRTArgs::MapNamesArray</a></div><div class="ttdeci">Value * MapNamesArray</div><div class="ttdoc">The array of original declaration names of mapped pointers sent to the runtime library for debugging.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01153">OMPIRBuilder.h:1153</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolutionAnalysis_html"><div class="ttname"><a href="classllvm_1_1ScalarEvolutionAnalysis.html">llvm::ScalarEvolutionAnalysis</a></div><div class="ttdoc">Analysis pass that exposes the ScalarEvolution for a function.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l02219">ScalarEvolution.h:2219</a></div></div>
<div class="ttc" id="aOMPIRBuilder_8cpp_html_adf813540e363817b85e9eecef51269b5"><div class="ttname"><a href="OMPIRBuilder_8cpp.html#adf813540e363817b85e9eecef51269b5">addLoopMetadata</a></div><div class="ttdeci">static void addLoopMetadata(CanonicalLoopInfo *Loop, ArrayRef&lt; Metadata * &gt; Properties)</div><div class="ttdoc">Attach loop metadata Properties to the loop described by Loop.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l02957">OMPIRBuilder.cpp:2957</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a3287172f2d13af086e6d66364e8c6de3"><div class="ttname"><a href="classllvm_1_1Instruction.html#a3287172f2d13af086e6d66364e8c6de3">llvm::Instruction::getNumSuccessors</a></div><div class="ttdeci">unsigned getNumSuccessors() const LLVM_READONLY</div><div class="ttdoc">Return the number of successors that this instruction has.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00823">Instruction.cpp:823</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1OutlineInfo_html_adb6b79680b86167fd4ec4f32346e9e58"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1OutlineInfo.html#adb6b79680b86167fd4ec4f32346e9e58">llvm::OpenMPIRBuilder::OutlineInfo::ExitBB</a></div><div class="ttdeci">BasicBlock * ExitBB</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01069">OMPIRBuilder.h:1069</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1UnrollingPreferences_html_ae28e05c1aac288aa7e4a49d858b35c46"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#ae28e05c1aac288aa7e4a49d858b35c46">llvm::TargetTransformInfo::UnrollingPreferences::PartialThreshold</a></div><div class="ttdeci">unsigned PartialThreshold</div><div class="ttdoc">The cost threshold for the unrolled loop, like Threshold, but used for partial/runtime unrolling (set...</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00465">TargetTransformInfo.h:465</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_aa75984a442f2379de0c66018201fa628"><div class="ttname"><a href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">llvm::Type::getInt1Ty</a></div><div class="ttdeci">static IntegerType * getInt1Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00238">Type.cpp:238</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1DependData_html"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1DependData.html">llvm::OpenMPIRBuilder::DependData</a></div><div class="ttdoc">A struct to pack the relevant information for an OpenMP depend clause.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l00758">OMPIRBuilder.h:758</a></div></div>
<div class="ttc" id="alib_2Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2X86_2README_8txt_source.html#l00252">README.txt:252</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a88cb26bb78b23c1f0aa1988725d46e1c"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a88cb26bb78b23c1f0aa1988725d46e1c">llvm::OpenMPIRBuilder::createSection</a></div><div class="ttdeci">InsertPointTy createSection(const LocationDescription &amp;Loc, BodyGenCallbackTy BodyGenCB, FinalizeCallbackTy FiniCB)</div><div class="ttdoc">Generator for '#omp section'.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l01674">OMPIRBuilder.cpp:1674</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetRegionEntryInfo_html_a50a8eeba86c83f02b7e129b7880ec654"><div class="ttname"><a href="structllvm_1_1TargetRegionEntryInfo.html#a50a8eeba86c83f02b7e129b7880ec654">llvm::TargetRegionEntryInfo::DeviceID</a></div><div class="ttdeci">unsigned DeviceID</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01912">OMPIRBuilder.h:1912</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a47f5c74e1b14ba4a61db057400644acc"><div class="ttname"><a href="classllvm_1_1Value.html#a47f5c74e1b14ba4a61db057400644acc">llvm::Value::getPointerAlignment</a></div><div class="ttdeci">Align getPointerAlignment(const DataLayout &amp;DL) const</div><div class="ttdoc">Returns an alignment of the pointer value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00918">Value.cpp:918</a></div></div>
<div class="ttc" id="aclassllvm_1_1NamedMDNode_html"><div class="ttname"><a href="classllvm_1_1NamedMDNode.html">llvm::NamedMDNode</a></div><div class="ttdoc">A tuple of MDNodes.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l01587">Metadata.h:1587</a></div></div>
<div class="ttc" id="anamespacellvm_html_a02981de53fb6ffd384d39addc4d25f37"><div class="ttname"><a href="namespacellvm.html#a02981de53fb6ffd384d39addc4d25f37">llvm::drop_begin</a></div><div class="ttdeci">auto drop_begin(T &amp;&amp;RangeOrContainer, size_t N=1)</div><div class="ttdoc">Return a range covering RangeOrContainer with the first N elements excluded.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00386">STLExtras.h:386</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a10deef7fafe3eff4c9c1755ffda0e4cb"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a10deef7fafe3eff4c9c1755ffda0e4cb">llvm::OpenMPIRBuilder::createCritical</a></div><div class="ttdeci">InsertPointTy createCritical(const LocationDescription &amp;Loc, BodyGenCallbackTy BodyGenCB, FinalizeCallbackTy FiniCB, StringRef CriticalName, Value *HintInst)</div><div class="ttdoc">Generator for '#omp critical'.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l03478">OMPIRBuilder.cpp:3478</a></div></div>
<div class="ttc" id="aclassllvm_1_1CanonicalLoopInfo_html_aba24a232ebb4ade12a5ed4d0d54d69ad"><div class="ttname"><a href="classllvm_1_1CanonicalLoopInfo.html#aba24a232ebb4ade12a5ed4d0d54d69ad">llvm::CanonicalLoopInfo::getAfter</a></div><div class="ttdeci">BasicBlock * getAfter() const</div><div class="ttdoc">The after block is intended for clean-up code such as lifetime end markers.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l02346">OMPIRBuilder.h:2346</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetRegionEntryInfo_html_a8cc8999b43ab73c1f7f8618f7735f3cd"><div class="ttname"><a href="structllvm_1_1TargetRegionEntryInfo.html#a8cc8999b43ab73c1f7f8618f7735f3cd">llvm::TargetRegionEntryInfo::Count</a></div><div class="ttdeci">unsigned Count</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01915">OMPIRBuilder.h:1915</a></div></div>
<div class="ttc" id="aclassllvm_1_1DataLayout_html"><div class="ttname"><a href="classllvm_1_1DataLayout.html">llvm::DataLayout</a></div><div class="ttdoc">A parsed version of the target data layout string in and methods for querying it.</div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00110">DataLayout.h:110</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1OutlineInfo_html_a5abe93575e72c30376079d2fb31b40f8"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1OutlineInfo.html#a5abe93575e72c30376079d2fb31b40f8">llvm::OpenMPIRBuilder::OutlineInfo::ExcludeArgsFromAggregate</a></div><div class="ttdeci">SmallVector&lt; Value *, 2 &gt; ExcludeArgsFromAggregate</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01070">OMPIRBuilder.h:1070</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a7fe9ccd4893f4e2caa826126c09545ea"><div class="ttname"><a href="classllvm_1_1Type.html#a7fe9ccd4893f4e2caa826126c09545ea">llvm::Type::getInt8PtrTy</a></div><div class="ttdeci">static PointerType * getInt8PtrTy(LLVMContext &amp;C, unsigned AS=0)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00293">Type.cpp:293</a></div></div>
<div class="ttc" id="aOMPIRBuilder_8cpp_html_a6580ef3a060cc6a247b1bfc5f8136a41"><div class="ttname"><a href="OMPIRBuilder_8cpp.html#a6580ef3a060cc6a247b1bfc5f8136a41">createTargetMachine</a></div><div class="ttdeci">static std::unique_ptr&lt; TargetMachine &gt; createTargetMachine(Function *F, CodeGenOpt::Level OptLevel)</div><div class="ttdoc">Create the TargetMachine object to query the backend for optimization preferences.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l03193">OMPIRBuilder.cpp:3193</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78b"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">llvm::CmpInst::Predicate</a></div><div class="ttdeci">Predicate</div><div class="ttdoc">This enumeration lists the possible predicates for CmpInst subclasses.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00718">InstrTypes.h:718</a></div></div>
<div class="ttc" id="aAMDGPURewriteUndefForPHI_8cpp_html_a2e83cb1bc3f5e8986cbd14575755a134"><div class="ttname"><a href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a></div><div class="ttdeci">Rewrite undef for PHI</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPURewriteUndefForPHI_8cpp_source.html#l00101">AMDGPURewriteUndefForPHI.cpp:101</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a38bee869ad41aebfef3de2641b12004c"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">llvm::BasicBlock::getParent</a></div><div class="ttdeci">const Function * getParent() const</div><div class="ttdoc">Return the enclosing method, or null if none.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00112">BasicBlock.h:112</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a3b996fbf8458aafffc86cb98a68d0a47"><div class="ttname"><a href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">llvm::Type::isPointerTy</a></div><div class="ttdeci">bool isPointerTy() const</div><div class="ttdoc">True if this is an instance of PointerType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00249">Type.h:249</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7a8f0d655fb83490a9e75782c6402110d8"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a8f0d655fb83490a9e75782c6402110d8">llvm::omp::OMPScheduleType::NomergeOrderedRuntime</a></div><div class="ttdeci">@ NomergeOrderedRuntime</div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7aee4b149cf5ae41603e163ae581365f98"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7aee4b149cf5ae41603e163ae581365f98">llvm::omp::OMPScheduleType::NomergeUnorderedGuidedChunked</a></div><div class="ttdeci">@ NomergeUnorderedGuidedChunked</div></div>
<div class="ttc" id="aclassllvm_1_1TargetOptions_html"><div class="ttname"><a href="classllvm_1_1TargetOptions.html">llvm::TargetOptions</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetOptions_8h_source.html#l00124">TargetOptions.h:124</a></div></div>
<div class="ttc" id="aclassllvm_1_1OffloadEntriesInfoManager_html_a6827980ed8b61f42e680949ff4511b03"><div class="ttname"><a href="classllvm_1_1OffloadEntriesInfoManager.html#a6827980ed8b61f42e680949ff4511b03">llvm::OffloadEntriesInfoManager::getTargetRegionEntryFnName</a></div><div class="ttdeci">void getTargetRegionEntryFnName(SmallVectorImpl&lt; char &gt; &amp;Name, const TargetRegionEntryInfo &amp;EntryInfo)</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l04968">OMPIRBuilder.cpp:4968</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a445fa52d77040bccb16bfea111234a2e"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a445fa52d77040bccb16bfea111234a2e">llvm::OpenMPIRBuilder::createLoopSkeleton</a></div><div class="ttdeci">CanonicalLoopInfo * createLoopSkeleton(DebugLoc DL, Value *TripCount, Function *F, BasicBlock *PreInsertBefore, BasicBlock *PostInsertBefore, const Twine &amp;Name={})</div><div class="ttdoc">Create the control flow structure of a canonical OpenMP loop.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l01933">OMPIRBuilder.cpp:1933</a></div></div>
<div class="ttc" id="aDebugInfoMetadata_8h_html"><div class="ttname"><a href="DebugInfoMetadata_8h.html">DebugInfoMetadata.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_afcbd4ecc474e2d218391d6d3027b086aa7861ef1db44eac8ea7a373cd7c53a7c5"><div class="ttname"><a href="namespacellvm_1_1cl.html#afcbd4ecc474e2d218391d6d3027b086aa7861ef1db44eac8ea7a373cd7c53a7c5">llvm::cl::Prefix</a></div><div class="ttdeci">@ Prefix</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00159">CommandLine.h:159</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a1d8eb3054fd49a89ff41bc22a48f87e7"><div class="ttname"><a href="classllvm_1_1Function.html#a1d8eb3054fd49a89ff41bc22a48f87e7">llvm::Function::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00757">Function.h:757</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a9141f967188383108a69cc1b8ed3c195a7eade123587a08e674f2ca72e2443771"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a9141f967188383108a69cc1b8ed3c195a7eade123587a08e674f2ca72e2443771">llvm::GlobalValue::HiddenVisibility</a></div><div class="ttdeci">@ HiddenVisibility</div><div class="ttdoc">The GV is hidden.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00064">GlobalValue.h:64</a></div></div>
<div class="ttc" id="aclassllvm_1_1CodeExtractor_html_a537993928c8af5b0d064fcd5ce1dec2f"><div class="ttname"><a href="classllvm_1_1CodeExtractor.html#a537993928c8af5b0d064fcd5ce1dec2f">llvm::CodeExtractor::findAllocas</a></div><div class="ttdeci">void findAllocas(const CodeExtractorAnalysisCache &amp;CEAC, ValueSet &amp;SinkCands, ValueSet &amp;HoistCands, BasicBlock *&amp;ExitBlock) const</div><div class="ttdoc">Find the set of allocas whose life ranges are contained within the outlined region.</div><div class="ttdef"><b>Definition:</b> <a href="CodeExtractor_8cpp_source.html#l00493">CodeExtractor.cpp:493</a></div></div>
<div class="ttc" id="aclassT_html"><div class="ttname"><a href="classT.html">T</a></div></div>
<div class="ttc" id="aclassllvm_1_1CanonicalLoopInfo_html_ad50eb30e70ff2a9ea7f220547e2b6f6d"><div class="ttname"><a href="classllvm_1_1CanonicalLoopInfo.html#ad50eb30e70ff2a9ea7f220547e2b6f6d">llvm::CanonicalLoopInfo::getPreheader</a></div><div class="ttdeci">BasicBlock * getPreheader() const</div><div class="ttdoc">The preheader ensures that there is only a single edge entering the loop.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l05168">OMPIRBuilder.cpp:5168</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00059">Function.h:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html"><div class="ttname"><a href="classllvm_1_1Loop.html">llvm::Loop</a></div><div class="ttdoc">Represents a single loop in the control flow graph.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00547">LoopInfo.h:547</a></div></div>
<div class="ttc" id="aStringRef_8h_html"><div class="ttname"><a href="StringRef_8h.html">StringRef.h</a></div></div>
<div class="ttc" id="aREADME-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00411">README-SSE.txt:411</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantStruct_html_a54fcfa620deb80373f489ba2fdad7643"><div class="ttname"><a href="classllvm_1_1ConstantStruct.html#a54fcfa620deb80373f489ba2fdad7643">llvm::ConstantStruct::get</a></div><div class="ttdeci">static Constant * get(StructType *T, ArrayRef&lt; Constant * &gt; V)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01314">Constants.cpp:1314</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7a8df314abcb15d43d59d8a3ea7c54cb10"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a8df314abcb15d43d59d8a3ea7c54cb10">llvm::omp::OMPScheduleType::BaseGuidedAnalyticalChunked</a></div><div class="ttdeci">@ BaseGuidedAnalyticalChunked</div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_aaef3fb3339c2ade5ffffccdd177e465c"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#aaef3fb3339c2ade5ffffccdd177e465c">llvm::OpenMPIRBuilder::createOMPInteropUse</a></div><div class="ttdeci">CallInst * createOMPInteropUse(const LocationDescription &amp;Loc, Value *InteropVar, Value *Device, Value *NumDependences, Value *DependenceAddress, bool HaveNowaitClause)</div><div class="ttdoc">Create a runtime call for __tgt_interop_use.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l03839">OMPIRBuilder.cpp:3839</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615a71aab8ee954b6d71a4eed315e8f6556e"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a71aab8ee954b6d71a4eed315e8f6556e">llvm::AtomicRMWInst::Xor</a></div><div class="ttdeci">@ Xor</div><div class="ttdoc">*p = old ^ v</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00744">Instructions.h:744</a></div></div>
<div class="ttc" id="aclassllvm_1_1OffloadEntriesInfoManager_1_1OffloadEntryInfo_html_a11911aae9559c8e1eefa6b48fe7bd384a38494b09d457a03217eda8929769fbaa"><div class="ttname"><a href="classllvm_1_1OffloadEntriesInfoManager_1_1OffloadEntryInfo.html#a11911aae9559c8e1eefa6b48fe7bd384a38494b09d457a03217eda8929769fbaa">llvm::OffloadEntriesInfoManager::OffloadEntryInfo::OffloadingEntryInfoTargetRegion</a></div><div class="ttdeci">@ OffloadingEntryInfoTargetRegion</div><div class="ttdoc">Entry is a target region.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01951">OMPIRBuilder.h:1951</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7aeb07fdc72df93e1f129f8ef0fa6cdaa2"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7aeb07fdc72df93e1f129f8ef0fa6cdaa2">llvm::omp::OMPScheduleType::UnorderedDynamicChunked</a></div><div class="ttdeci">@ UnorderedDynamicChunked</div></div>
<div class="ttc" id="aclassllvm_1_1CodeExtractor_html_a8561c48aa0b397c37f9e071dad7df392"><div class="ttname"><a href="classllvm_1_1CodeExtractor.html#a8561c48aa0b397c37f9e071dad7df392">llvm::CodeExtractor::extractCodeRegion</a></div><div class="ttdeci">Function * extractCodeRegion(const CodeExtractorAnalysisCache &amp;CEAC)</div><div class="ttdoc">Perform the extraction, returning the new function.</div><div class="ttdef"><b>Definition:</b> <a href="CodeExtractor_8cpp_source.html#l01637">CodeExtractor.cpp:1637</a></div></div>
<div class="ttc" id="aHexagonHardwareLoops_8cpp_html_ada7c1594a393ede3ce32602d64d7ddb2"><div class="ttname"><a href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a></div><div class="ttdeci">Hexagon Hardware Loops</div><div class="ttdef"><b>Definition:</b> <a href="HexagonHardwareLoops_8cpp_source.html#l00374">HexagonHardwareLoops.cpp:374</a></div></div>
<div class="ttc" id="aclassllvm_1_1Target_html"><div class="ttname"><a href="classllvm_1_1Target.html">llvm::Target</a></div><div class="ttdoc">Target - Wrapper for Target specific information.</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegistry_8h_source.html#l00149">TargetRegistry.h:149</a></div></div>
<div class="ttc" id="aclassllvm_1_1Attribute_html_a43708098bd7085788a680fd02f47c750"><div class="ttname"><a href="classllvm_1_1Attribute.html#a43708098bd7085788a680fd02f47c750">llvm::Attribute::get</a></div><div class="ttdeci">static Attribute get(LLVMContext &amp;Context, AttrKind Kind, uint64_t Val=0)</div><div class="ttdoc">Return a uniquified Attribute object.</div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l00091">Attributes.cpp:91</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a05c6b3b9372b56d130e005db4837da62a7483b56cbb22b39c485b4648ea3374b0"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a05c6b3b9372b56d130e005db4837da62a7483b56cbb22b39c485b4648ea3374b0">llvm::GlobalValue::NotThreadLocal</a></div><div class="ttdeci">@ NotThreadLocal</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00192">GlobalValue.h:192</a></div></div>
<div class="ttc" id="aclassllvm_1_1OffloadEntriesInfoManager_html_a4229a8d4526cc8fc7d5e043727b07128"><div class="ttname"><a href="classllvm_1_1OffloadEntriesInfoManager.html#a4229a8d4526cc8fc7d5e043727b07128">llvm::OffloadEntriesInfoManager::registerDeviceGlobalVarEntryInfo</a></div><div class="ttdeci">void registerDeviceGlobalVarEntryInfo(StringRef VarName, Constant *Addr, int64_t VarSize, OMPTargetGlobalVarEntryKind Flags, GlobalValue::LinkageTypes Linkage)</div><div class="ttdoc">Register device global variable entry.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l05116">OMPIRBuilder.cpp:5116</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615">llvm::AtomicRMWInst::BinOp</a></div><div class="ttdeci">BinOp</div><div class="ttdoc">This enumeration lists the possible modifications atomicrmw can make.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00730">Instructions.h:730</a></div></div>
<div class="ttc" id="anamespacellvm_html_a26e2a938b431eaa6eca2beaa96410c9d"><div class="ttname"><a href="namespacellvm.html#a26e2a938b431eaa6eca2beaa96410c9d">llvm::successors</a></div><div class="ttdeci">auto successors(const MachineBasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l01265">MachineBasicBlock.h:1265</a></div></div>
<div class="ttc" id="aclassllvm_1_1ilist__node__with__parent_html_a26708685cc8b94fe3d7092ee080dbb34"><div class="ttname"><a href="classllvm_1_1ilist__node__with__parent.html#a26708685cc8b94fe3d7092ee080dbb34">llvm::ilist_node_with_parent::getNextNode</a></div><div class="ttdeci">NodeTy * getNextNode()</div><div class="ttdoc">Get the next node, or nullptr for the list tail.</div><div class="ttdef"><b>Definition:</b> <a href="ilist__node_8h_source.html#l00289">ilist_node.h:289</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01199">SmallVector.h:1199</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a266367eb01c634406b32f816d2d9c6bf"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a266367eb01c634406b32f816d2d9c6bf">llvm::BasicBlock::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00325">BasicBlock.h:325</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7a57c8ef07508f364479cb0df759e9aa9d"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a57c8ef07508f364479cb0df759e9aa9d">llvm::omp::OMPScheduleType::NomergeUnorderedSteal</a></div><div class="ttdeci">@ NomergeUnorderedSteal</div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7abd79f878aa88119d9feabd482bbdb1ca"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7abd79f878aa88119d9feabd482bbdb1ca">llvm::omp::OMPScheduleType::OrderdTrapezoidal</a></div><div class="ttdeci">@ OrderdTrapezoidal</div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a76e12ec076e7af4be7b8b77a5d53d3fc"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a76e12ec076e7af4be7b8b77a5d53d3fc">llvm::OpenMPIRBuilder::tileLoops</a></div><div class="ttdeci">std::vector&lt; CanonicalLoopInfo * &gt; tileLoops(DebugLoc DL, ArrayRef&lt; CanonicalLoopInfo * &gt; Loops, ArrayRef&lt; Value * &gt; TileSizes)</div><div class="ttdoc">Tile a loop nest.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l02741">OMPIRBuilder.cpp:2741</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7b2175e18ff52174fad26b6b68818564"><div class="ttname"><a href="namespacellvm.html#a7b2175e18ff52174fad26b6b68818564">llvm::enumerate</a></div><div class="ttdeci">detail::enumerator&lt; R &gt; enumerate(R &amp;&amp;TheRange)</div><div class="ttdoc">Given an input range, returns a new range whose values are are pair (A,B) such that A is the 0-based ...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l02264">STLExtras.h:2264</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a3a1491172c3170c2463b54c3b62d4f66"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a3a1491172c3170c2463b54c3b62d4f66">llvm::OpenMPIRBuilder::EmitMetadataErrorReportFunctionTy</a></div><div class="ttdeci">std::function&lt; void(EmitMetadataErrorKind, TargetRegionEntryInfo)&gt; EmitMetadataErrorReportFunctionTy</div><div class="ttdoc">Callback function type.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01219">OMPIRBuilder.h:1219</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html">llvm::TargetTransformInfo</a></div><div class="ttdoc">This pass provides access to the codegen interfaces that are needed for IR-level transformations.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00196">TargetTransformInfo.h:196</a></div></div>
<div class="ttc" id="aclassllvm_1_1AttributeSet_html_a46f189c4026ace551d70a16566e641b1"><div class="ttname"><a href="classllvm_1_1AttributeSet.html#a46f189c4026ace551d70a16566e641b1">llvm::AttributeSet::addAttributes</a></div><div class="ttdeci">AttributeSet addAttributes(LLVMContext &amp;C, AttributeSet AS) const</div><div class="ttdoc">Add attributes to the attribute set.</div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l00716">Attributes.cpp:716</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_ae6a4da5f41fc6a36735cc1704c01ce60"><div class="ttname"><a href="classllvm_1_1Function.html#ae6a4da5f41fc6a36735cc1704c01ce60">llvm::Function::getEntryBlock</a></div><div class="ttdeci">const BasicBlock &amp; getEntryBlock() const</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00735">Function.h:735</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_aafc1886793b898052f87edd7e9fdbaa3"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">llvm::OpenMPIRBuilder::InsertPointTy</a></div><div class="ttdeci">IRBuilder&lt;&gt;::InsertPoint InsertPointTy</div><div class="ttdoc">Type used throughout for insertion points.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l00189">OMPIRBuilder.h:189</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a089e003bb688e55b9a91ed4e7fed3678"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a089e003bb688e55b9a91ed4e7fed3678">llvm::BasicBlock::replaceSuccessorsPhiUsesWith</a></div><div class="ttdeci">void replaceSuccessorsPhiUsesWith(BasicBlock *Old, BasicBlock *New)</div><div class="ttdoc">Update all phi nodes in this basic block's successors to refer to basic block New instead of basic bl...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00498">BasicBlock.cpp:498</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilder_html"><div class="ttname"><a href="classllvm_1_1IRBuilder.html">llvm::IRBuilder</a></div><div class="ttdoc">This provides a uniform API for creating instructions and inserting them into a basic block: either a...</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l02550">IRBuilder.h:2550</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7a0262be002813b7ad31cc7d6200804759"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a0262be002813b7ad31cc7d6200804759">llvm::omp::OMPScheduleType::NomergeUnorderedRuntime</a></div><div class="ttdeci">@ NomergeUnorderedRuntime</div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a9607f501333d84917dc48f5d263e9b6c"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a9607f501333d84917dc48f5d263e9b6c">llvm::OpenMPIRBuilder::getOrCreateThreadID</a></div><div class="ttdeci">Value * getOrCreateThreadID(Value *Ident)</div><div class="ttdoc">Return the current thread ID.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00662">OMPIRBuilder.cpp:662</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalVariable_html"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html">llvm::GlobalVariable</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalVariable_8h_source.html#l00039">GlobalVariable.h:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolution_html"><div class="ttname"><a href="classllvm_1_1ScalarEvolution.html">llvm::ScalarEvolution</a></div><div class="ttdoc">The main scalar evolution driver.</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8h_source.html#l00452">ScalarEvolution.h:452</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">llvm::CmpInst::ICMP_NE</a></div><div class="ttdeci">@ ICMP_NE</div><div class="ttdoc">not equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00740">InstrTypes.h:740</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7a1d024db3d31d3f2afbc0f8d7d2647ef9"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a1d024db3d31d3f2afbc0f8d7d2647ef9">llvm::omp::OMPScheduleType::NomergeUnorderedBalanced</a></div><div class="ttdeci">@ NomergeUnorderedBalanced</div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_ae79d05dd3d0b05e080e08f8c5c33f880"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#ae79d05dd3d0b05e080e08f8c5c33f880">llvm::ConstantExpr::getBitCast</a></div><div class="ttdeci">static Constant * getBitCast(Constant *C, Type *Ty, bool OnlyIfReduced=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02229">Constants.cpp:2229</a></div></div>
<div class="ttc" id="anamespacellvm_html_addf42fea14164ec994d4d517eaa56688"><div class="ttname"><a href="namespacellvm.html#addf42fea14164ec994d4d517eaa56688">llvm::DeleteDeadBlocks</a></div><div class="ttdeci">void DeleteDeadBlocks(ArrayRef&lt; BasicBlock * &gt; BBs, DomTreeUpdater *DTU=nullptr, bool KeepOneInputPHIs=false)</div><div class="ttdoc">Delete the specified blocks from BB.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00100">BasicBlockUtils.cpp:100</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionType_html_a7e89b55242c964ae61b7850e99cacef0"><div class="ttname"><a href="classllvm_1_1FunctionType.html#a7e89b55242c964ae61b7850e99cacef0">llvm::FunctionType::get</a></div><div class="ttdeci">static FunctionType * get(Type *Result, ArrayRef&lt; Type * &gt; Params, bool isVarArg)</div><div class="ttdoc">This static method is the primary way of constructing a FunctionType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00363">Type.cpp:363</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a26b81f55490c8d7f092710cd5706c2ba"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a26b81f55490c8d7f092710cd5706c2ba">llvm::OpenMPIRBuilder::createAtomicUpdate</a></div><div class="ttdeci">InsertPointTy createAtomicUpdate(const LocationDescription &amp;Loc, InsertPointTy AllocaIP, AtomicOpValue &amp;X, Value *Expr, AtomicOrdering AO, AtomicRMWInst::BinOp RMWOp, AtomicUpdateCallbackTy &amp;UpdateOp, bool IsXBinopExpr)</div><div class="ttdoc">Emit atomic update for constructs: X = X BinOp Expr ,or X = Expr BinOp X For complex Operations: X = ...</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l04341">OMPIRBuilder.cpp:4341</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetRegionEntryInfo_html_a0a267f191642077971aa8eeba25ea6f5"><div class="ttname"><a href="structllvm_1_1TargetRegionEntryInfo.html#a0a267f191642077971aa8eeba25ea6f5">llvm::TargetRegionEntryInfo::getTargetRegionEntryFnName</a></div><div class="ttdeci">static void getTargetRegionEntryFnName(SmallVectorImpl&lt; char &gt; &amp;Name, StringRef ParentName, unsigned DeviceID, unsigned FileID, unsigned Line, unsigned Count)</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l04958">OMPIRBuilder.cpp:4958</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7a46f4e9d5112df3ad08bc51fcff86bbca"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a46f4e9d5112df3ad08bc51fcff86bbca">llvm::omp::OMPScheduleType::NomergeOrderedTrapezoidal</a></div><div class="ttdeci">@ NomergeOrderedTrapezoidal</div></div>
<div class="ttc" id="aOptimizationRemarkEmitter_8h_html"><div class="ttname"><a href="OptimizationRemarkEmitter_8h.html">OptimizationRemarkEmitter.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9bccbe67aaab722783ca4e7c504aaaa7ae3b0fa849dbd758b450f98fcfde936a2"><div class="ttname"><a href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7ae3b0fa849dbd758b450f98fcfde936a2">llvm::AtomicOrdering::SequentiallyConsistent</a></div><div class="ttdeci">@ SequentiallyConsistent</div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7a38a9fe7b93a08dd2fdb40710633ff20e"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a38a9fe7b93a08dd2fdb40710633ff20e">llvm::omp::OMPScheduleType::UnorderedGreedy</a></div><div class="ttdeci">@ UnorderedGreedy</div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTree_html"><div class="ttname"><a href="classllvm_1_1DominatorTree.html">llvm::DominatorTree</a></div><div class="ttdoc">Concrete subclass of DominatorTreeBase that is used to compute a normal dominator tree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00166">Dominators.h:166</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7abb6d65fa62198a898f0b36eba922ede5"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7abb6d65fa62198a898f0b36eba922ede5">llvm::omp::OMPScheduleType::BaseGreedy</a></div><div class="ttdeci">@ BaseGreedy</div></div>
<div class="ttc" id="aclassllvm_1_1Triple_html"><div class="ttname"><a href="classllvm_1_1Triple.html">llvm::Triple</a></div><div class="ttdoc">Triple - Helper class for working with autoconf configuration names.</div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00044">Triple.h:44</a></div></div>
<div class="ttc" id="aPassBuilderBindings_8cpp_html_a83c7e5ca51099e4efa895791a02fb0ed"><div class="ttname"><a href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a></div><div class="ttdeci">FunctionAnalysisManager FAM</div><div class="ttdef"><b>Definition:</b> <a href="PassBuilderBindings_8cpp_source.html#l00059">PassBuilderBindings.cpp:59</a></div></div>
<div class="ttc" id="anamespacellvm_1_1tgtok_html_abbc5259d649363016626e2529fabe0c5a218a3df235546fc092fe0f463e6b714d"><div class="ttname"><a href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a218a3df235546fc092fe0f463e6b714d">llvm::tgtok::VarName</a></div><div class="ttdeci">@ VarName</div><div class="ttdef"><b>Definition:</b> <a href="TGLexer_8h_source.html#l00072">TGLexer.h:72</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1UnrollingPreferences_html_a19cc5df79c699ab1e137118b8c472a9e"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a19cc5df79c699ab1e137118b8c472a9e">llvm::TargetTransformInfo::UnrollingPreferences::Count</a></div><div class="ttdeci">unsigned Count</div><div class="ttdoc">A forced unrolling factor (the number of concatenated bodies of the original loop in the unrolled loo...</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00474">TargetTransformInfo.h:474</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7a4bc5b1133831ba3fc59a2359a81a049a"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a4bc5b1133831ba3fc59a2359a81a049a">llvm::omp::OMPScheduleType::UnorderedRuntimeSimd</a></div><div class="ttdeci">@ UnorderedRuntimeSimd</div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdeci">@ Hidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00138">CommandLine.h:138</a></div></div>
<div class="ttc" id="aclassllvm_1_1OffloadEntriesInfoManager_html_af1c69166900a3ea831da7b0bda28554e"><div class="ttname"><a href="classllvm_1_1OffloadEntriesInfoManager.html#af1c69166900a3ea831da7b0bda28554e">llvm::OffloadEntriesInfoManager::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdoc">Return true if a there are no entries defined.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l05025">OMPIRBuilder.cpp:5025</a></div></div>
<div class="ttc" id="aclassllvm_1_1DILocation_html"><div class="ttname"><a href="classllvm_1_1DILocation.html">llvm::DILocation</a></div><div class="ttdoc">Debug location.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8h_source.html#l01605">DebugInfoMetadata.h:1605</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">llvm::CmpInst::ICMP_SGT</a></div><div class="ttdeci">@ ICMP_SGT</div><div class="ttdoc">signed greater than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00745">InstrTypes.h:745</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a9fffac2512fe651f0d5e37e27f5bd51c"><div class="ttname"><a href="classllvm_1_1Function.html#a9fffac2512fe651f0d5e37e27f5bd51c">llvm::Function::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">getContext - Return a reference to the LLVMContext associated with this function.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00315">Function.cpp:315</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_ac6baa801e4aea800984e760d5460662f"><div class="ttname"><a href="classllvm_1_1Function.html#ac6baa801e4aea800984e760d5460662f">llvm::Function::arg_size</a></div><div class="ttdeci">size_t arg_size() const</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00799">Function.h:799</a></div></div>
<div class="ttc" id="aScalarEvolution_8h_html"><div class="ttname"><a href="ScalarEvolution_8h.html">ScalarEvolution.h</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_a8db36c82f32d6f6a4d35a00e55be03a8"><div class="ttname"><a href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a></div><div class="ttdeci">bool Shift</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00468">README.txt:468</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdoc">The instances of the Type class are immutable: once they are created, they are never changed.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a8dd327a937563afdb08250abc43820b0"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a8dd327a937563afdb08250abc43820b0">llvm::BasicBlock::eraseFromParent</a></div><div class="ttdeci">SymbolTableList&lt; BasicBlock &gt;::iterator eraseFromParent()</div><div class="ttdoc">Unlink 'this' from the containing function and delete it.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00132">BasicBlock.cpp:132</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue_html"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html">llvm::OpenMPIRBuilder::AtomicOpValue</a></div><div class="ttdoc">a struct to pack relevant information while generating atomic Ops</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01715">OMPIRBuilder.h:1715</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1PeelingPreferences_html"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1PeelingPreferences.html">llvm::TargetTransformInfo::PeelingPreferences</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00547">TargetTransformInfo.h:547</a></div></div>
<div class="ttc" id="aclassllvm_1_1CanonicalLoopInfo_html_a578dd7d619d0ccfc6ace07aa380022cc"><div class="ttname"><a href="classllvm_1_1CanonicalLoopInfo.html#a578dd7d619d0ccfc6ace07aa380022cc">llvm::CanonicalLoopInfo::getAfterIP</a></div><div class="ttdeci">OpenMPIRBuilder::InsertPointTy getAfterIP() const</div><div class="ttdoc">Return the insertion point for user code after the loop.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l02391">OMPIRBuilder.h:2391</a></div></div>
<div class="ttc" id="aLoopIdiomRecognize_8cpp_html_a1d585c107a14470e0f38289b60164ed1"><div class="ttname"><a href="LoopIdiomRecognize_8cpp.html#a1d585c107a14470e0f38289b60164ed1">getTripCount</a></div><div class="ttdeci">static const SCEV * getTripCount(const SCEV *BECount, Type *IntPtr, Loop *CurLoop, const DataLayout *DL, ScalarEvolution *SE)</div><div class="ttdoc">Compute trip count from the backedge taken count.</div><div class="ttdef"><b>Definition:</b> <a href="LoopIdiomRecognize_8cpp_source.html#l01054">LoopIdiomRecognize.cpp:1054</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sys_1_1path_html_a214ec2f04ffd92636ed4bd2717607a1d"><div class="ttname"><a href="namespacellvm_1_1sys_1_1path.html#a214ec2f04ffd92636ed4bd2717607a1d">llvm::sys::path::end</a></div><div class="ttdeci">const_iterator end(StringRef path)</div><div class="ttdoc">Get end iterator over path.</div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00235">Path.cpp:235</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sys_1_1path_html_a00a76a729b319dc47beffbe07325565f"><div class="ttname"><a href="namespacellvm_1_1sys_1_1path.html#a00a76a729b319dc47beffbe07325565f">llvm::sys::path::begin</a></div><div class="ttdeci">const_iterator begin(StringRef path, Style style=Style::native)</div><div class="ttdoc">Get begin iterator over path.</div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00226">Path.cpp:226</a></div></div>
<div class="ttc" id="aclassllvm_1_1OffloadEntriesInfoManager_html_ab05d360f14a80b1fc10d1632aa0f1433"><div class="ttname"><a href="classllvm_1_1OffloadEntriesInfoManager.html#ab05d360f14a80b1fc10d1632aa0f1433">llvm::OffloadEntriesInfoManager::initializeTargetRegionEntryInfo</a></div><div class="ttdeci">void initializeTargetRegionEntryInfo(const TargetRegionEntryInfo &amp;EntryInfo, unsigned Order)</div><div class="ttdoc">Initialize target region entry.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l05046">OMPIRBuilder.cpp:5046</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a79c007dcf9fff57e1569e778d7885b5e"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a79c007dcf9fff57e1569e778d7885b5e">llvm::BasicBlock::getSingleSuccessor</a></div><div class="ttdeci">const BasicBlock * getSingleSuccessor() const</div><div class="ttdoc">Return the successor of this block if it has a single successor.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00314">BasicBlock.cpp:314</a></div></div>
<div class="ttc" id="aclassllvm_1_1StoreInst_html_a55195fa18cf783fe74de0cced1ca6eb3"><div class="ttname"><a href="classllvm_1_1StoreInst.html#a55195fa18cf783fe74de0cced1ca6eb3">llvm::StoreInst::setAlignment</a></div><div class="ttdeci">void setAlignment(Align Align)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00349">Instructions.h:349</a></div></div>
<div class="ttc" id="anamespacellvm_html_a78e14f66d8a8405c6882b5ff6a3b7617"><div class="ttname"><a href="namespacellvm.html#a78e14f66d8a8405c6882b5ff6a3b7617">llvm::spliceBB</a></div><div class="ttdeci">void spliceBB(IRBuilderBase::InsertPoint IP, BasicBlock *New, bool CreateBranch)</div><div class="ttdoc">Move the instruction after an InsertPoint to the beginning of another BasicBlock.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00258">OMPIRBuilder.cpp:258</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallSet_html"><div class="ttname"><a href="classllvm_1_1SmallSet.html">llvm::SmallSet</a></div><div class="ttdoc">SmallSet - This maintains a set of unique values, optimizing for the case when the set is small (less...</div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00135">SmallSet.h:135</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7a1cc61e9c8ede152165c582e6cdb49b5e"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a1cc61e9c8ede152165c582e6cdb49b5e">llvm::omp::OMPScheduleType::UnorderedGuidedAnalyticalChunked</a></div><div class="ttdeci">@ UnorderedGuidedAnalyticalChunked</div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_aaab8110aafc070c83bc701b13d2260df"><div class="ttname"><a href="classllvm_1_1Function.html#aaab8110aafc070c83bc701b13d2260df">llvm::Function::insert</a></div><div class="ttdeci">Function::iterator insert(Function::iterator Position, BasicBlock *BB)</div><div class="ttdoc">Insert BB in the basic block list at Position.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00682">Function.h:682</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a52c990590792c91dd20b6d45acebe359"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a52c990590792c91dd20b6d45acebe359">llvm::BasicBlock::splitBasicBlock</a></div><div class="ttdeci">BasicBlock * splitBasicBlock(iterator I, const Twine &amp;BBName=&quot;&quot;, bool Before=false)</div><div class="ttdoc">Split the basic block into two basic blocks at the specified instruction.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00401">BasicBlock.cpp:401</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_ae8df4be75bfc50b1eadd74e85c25fa45a4cc6684df7b4a92b1dec6fce3264fac8"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#ae8df4be75bfc50b1eadd74e85c25fa45a4cc6684df7b4a92b1dec6fce3264fac8">llvm::GlobalValue::UnnamedAddr::Global</a></div><div class="ttdeci">@ Global</div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a7fdf3da89e690f360e040b230fb41e2f"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a7fdf3da89e690f360e040b230fb41e2f">llvm::OpenMPIRBuilder::createTargetInit</a></div><div class="ttdeci">InsertPointTy createTargetInit(const LocationDescription &amp;Loc, bool IsSPMD)</div><div class="ttdoc">The omp target interface.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l03888">OMPIRBuilder.cpp:3888</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a799568a5d617a4ca72b51a6fe60f1ecc"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a799568a5d617a4ca72b51a6fe60f1ecc">llvm::OpenMPIRBuilder::createSingle</a></div><div class="ttdeci">InsertPointTy createSingle(const LocationDescription &amp;Loc, BodyGenCallbackTy BodyGenCB, FinalizeCallbackTy FiniCB, bool IsNowait, llvm::Value *DidIt)</div><div class="ttdoc">Generator for '#omp single'.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l03436">OMPIRBuilder.cpp:3436</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantAsMetadata_html_a703ab6c3e14ff7565866468d731f537a"><div class="ttname"><a href="classllvm_1_1ConstantAsMetadata.html#a703ab6c3e14ff7565866468d731f537a">llvm::ConstantAsMetadata::get</a></div><div class="ttdeci">static ConstantAsMetadata * get(Constant *C)</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00419">Metadata.h:419</a></div></div>
<div class="ttc" id="aclassllvm_1_1MapVector_html"><div class="ttname"><a href="classllvm_1_1MapVector.html">llvm::MapVector</a></div><div class="ttdoc">This class implements a map that also provides access to all stored values in a deterministic order.</div><div class="ttdef"><b>Definition:</b> <a href="MapVector_8h_source.html#l00037">MapVector.h:37</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdoc">SmallPtrSet - This class implements a set which is optimized for holding SmallSize or less elements.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00450">SmallPtrSet.h:450</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7ab8e66c863338f428b072f163e43f65e8"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7ab8e66c863338f428b072f163e43f65e8">llvm::omp::OMPScheduleType::BaseRuntimeSimd</a></div><div class="ttdeci">@ BaseRuntimeSimd</div></div>
<div class="ttc" id="anamespacellvm_1_1MCID_html_ab357441fcd1ea1f9b0d27c12700f6023a63a45e5b4f6037c05b07b9dc2c7ded46"><div class="ttname"><a href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a63a45e5b4f6037c05b07b9dc2c7ded46">llvm::MCID::Convergent</a></div><div class="ttdeci">@ Convergent</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00185">MCInstrDesc.h:185</a></div></div>
<div class="ttc" id="aCodeExtractor_8h_html"><div class="ttname"><a href="CodeExtractor_8h.html">CodeExtractor.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7adab874a059e33d5599603a11894ab29e"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7adab874a059e33d5599603a11894ab29e">llvm::omp::OMPScheduleType::ModifierNonmonotonic</a></div><div class="ttdeci">@ ModifierNonmonotonic</div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1ReductionInfo_html_a5a2adb59d172175dafdc9466d436e198"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1ReductionInfo.html#a5a2adb59d172175dafdc9466d436e198">llvm::OpenMPIRBuilder::ReductionInfo::Variable</a></div><div class="ttdeci">Value * Variable</div><div class="ttdoc">Reduction variable of pointer type.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l00826">OMPIRBuilder.h:826</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a03b6c43472b3040013de9cbc25376925"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a03b6c43472b3040013de9cbc25376925">llvm::OpenMPIRBuilder::FinalizeCallbackTy</a></div><div class="ttdeci">std::function&lt; void(InsertPointTy CodeGenIP)&gt; FinalizeCallbackTy</div><div class="ttdoc">Callback type for variable finalization (think destructors).</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l00209">OMPIRBuilder.h:209</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba2751d6136a2819749dcef65dc19a4246"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba2751d6136a2819749dcef65dc19a4246">llvm::CmpInst::ICMP_SLE</a></div><div class="ttdeci">@ ICMP_SLE</div><div class="ttdoc">signed less or equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00748">InstrTypes.h:748</a></div></div>
<div class="ttc" id="aclassllvm_1_1CanonicalLoopInfo_html_a0e975380231c805957723804ad3ba008"><div class="ttname"><a href="classllvm_1_1CanonicalLoopInfo.html#a0e975380231c805957723804ad3ba008">llvm::CanonicalLoopInfo::getFunction</a></div><div class="ttdeci">Function * getFunction() const</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l02397">OMPIRBuilder.h:2397</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1TargetDataRTArgs_html"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1TargetDataRTArgs.html">llvm::OpenMPIRBuilder::TargetDataRTArgs</a></div><div class="ttdoc">Container for the arguments used to pass data to the runtime library.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01133">OMPIRBuilder.h:1133</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a59fb91d1691350f7d1b8e8a114e3f2a4"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a59fb91d1691350f7d1b8e8a114e3f2a4">llvm::BasicBlock::getSinglePredecessor</a></div><div class="ttdeci">const BasicBlock * getSinglePredecessor() const</div><div class="ttdoc">Return the predecessor of this block if it has a single predecessor block.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00284">BasicBlock.cpp:284</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue_html_afa06cdaada62e025bfb13b3ca8999963"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html#afa06cdaada62e025bfb13b3ca8999963">llvm::OpenMPIRBuilder::AtomicOpValue::Var</a></div><div class="ttdeci">Value * Var</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01716">OMPIRBuilder.h:1716</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a4fb513d744ca72275932b2c7003f16f6"><div class="ttname"><a href="classllvm_1_1CallBase.html#a4fb513d744ca72275932b2c7003f16f6">llvm::CallBase::arg_begin</a></div><div class="ttdeci">User::op_iterator arg_begin()</div><div class="ttdoc">Return the iterator pointing to the beginning of the argument list.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01326">InstrTypes.h:1326</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a87b8bfbbe9d8f7146d7f20a5fb42efd0"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a></div><div class="ttdeci">Value * RHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00076">X86PartialReduction.cpp:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_aedfa75f0c85c4aa85b257f066fbea57c"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57c">llvm::GlobalValue::LinkageTypes</a></div><div class="ttdeci">LinkageTypes</div><div class="ttdoc">An enumeration for the kinds of linkage for global values.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00047">GlobalValue.h:47</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_aac5759c83abd6a4af236401a7cfe7a0f"><div class="ttname"><a href="classllvm_1_1Type.html#aac5759c83abd6a4af236401a7cfe7a0f">llvm::Type::isFloatingPointTy</a></div><div class="ttdeci">bool isFloatingPointTy() const</div><div class="ttdoc">Return true if this is one of the floating-point types.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00185">Type.h:185</a></div></div>
<div class="ttc" id="aclassllvm_1_1OffloadEntriesInfoManager_html_aaf155f94f5d49e4dd6dc17a3ae2fe4fa"><div class="ttname"><a href="classllvm_1_1OffloadEntriesInfoManager.html#aaf155f94f5d49e4dd6dc17a3ae2fe4fa">llvm::OffloadEntriesInfoManager::size</a></div><div class="ttdeci">unsigned size() const</div><div class="ttdoc">Return number of entries defined so far.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01995">OMPIRBuilder.h:1995</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetRegistry_html_a5580434a3d20841cbcb73e9c8c80956b"><div class="ttname"><a href="structllvm_1_1TargetRegistry.html#a5580434a3d20841cbcb73e9c8c80956b">llvm::TargetRegistry::lookupTarget</a></div><div class="ttdeci">static const Target * lookupTarget(const std::string &amp;Triple, std::string &amp;Error)</div><div class="ttdoc">lookupTarget - Lookup a target based on a target triple.</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegistry_8cpp_source.html#l00062">TargetRegistry.cpp:62</a></div></div>
<div class="ttc" id="anamespacellvm_1_1SPII_html_a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f"><div class="ttname"><a href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">llvm::SPII::Load</a></div><div class="ttdeci">@ Load</div><div class="ttdef"><b>Definition:</b> <a href="SparcInstrInfo_8h_source.html#l00032">SparcInstrInfo.h:32</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba4c399f525bbcf03d72af4b303e6eeca8"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba4c399f525bbcf03d72af4b303e6eeca8">llvm::CmpInst::FCMP_OGT</a></div><div class="ttdeci">@ FCMP_OGT</div><div class="ttdoc">0 0 1 0 True if ordered and greater than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00722">InstrTypes.h:722</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a7ba5de75f50bb4a4ba920698edf39b28"><div class="ttname"><a href="classllvm_1_1Type.html#a7ba5de75f50bb4a4ba920698edf39b28">llvm::Type::getInt8Ty</a></div><div class="ttdeci">static IntegerType * getInt8Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00239">Type.cpp:239</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615ad3ed1a8c334bc3a50d59aaa57ee9e9f3"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615ad3ed1a8c334bc3a50d59aaa57ee9e9f3">llvm::AtomicRMWInst::UDecWrap</a></div><div class="ttdeci">@ UDecWrap</div><div class="ttdoc">Decrement one until a minimum value or zero.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00774">Instructions.h:774</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a9237251072bf6816163abc2d053212ee"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a9237251072bf6816163abc2d053212ee">llvm::BasicBlock::rend</a></div><div class="ttdeci">reverse_iterator rend()</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00321">BasicBlock.h:321</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a30dd396c5b40cd86c1591872e574ccdf"><div class="ttname"><a href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">llvm::Type::getInt32Ty</a></div><div class="ttdeci">static IntegerType * getInt32Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00241">Type.cpp:241</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7a79f54709b96f9cf497c239ceeedfccb8"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a79f54709b96f9cf497c239ceeedfccb8">llvm::omp::OMPScheduleType::UnorderedSteal</a></div><div class="ttdeci">@ UnorderedSteal</div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a78c4d0538c7dbffa955486abae2b61bb"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a78c4d0538c7dbffa955486abae2b61bb">llvm::GlobalValue::setDSOLocal</a></div><div class="ttdeci">void setDSOLocal(bool Local)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00299">GlobalValue.h:299</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615abd5e733a10a36f3572105b1a67538e18"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615abd5e733a10a36f3572105b1a67538e18">llvm::AtomicRMWInst::FMin</a></div><div class="ttdeci">@ FMin</div><div class="ttdoc">*p = minnum(old, v) minnum matches the behavior of llvm.minnum.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00766">Instructions.h:766</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a6383328cfcdbbd56502b92f9e2415432"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a6383328cfcdbbd56502b92f9e2415432">llvm::OpenMPIRBuilder::emitTaskyieldImpl</a></div><div class="ttdeci">void emitTaskyieldImpl(const LocationDescription &amp;Loc)</div><div class="ttdoc">Generate a taskyield runtime call.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l01264">OMPIRBuilder.cpp:1264</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_ac5b407054e7727d04053af9c3f1a5568"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#ac5b407054e7727d04053af9c3f1a5568">llvm::OpenMPIRBuilder::getOpenMPDefaultSimdAlign</a></div><div class="ttdeci">static unsigned getOpenMPDefaultSimdAlign(const Triple &amp;TargetTriple, const StringMap&lt; bool &gt; &amp;Features)</div><div class="ttdoc">Get the default alignment value for given target.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l03057">OMPIRBuilder.cpp:3057</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a0cc5aa97fdd08acaf18a279679c0f0c4"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a0cc5aa97fdd08acaf18a279679c0f0c4">llvm::OpenMPIRBuilder::createReductions</a></div><div class="ttdeci">InsertPointTy createReductions(const LocationDescription &amp;Loc, InsertPointTy AllocaIP, ArrayRef&lt; ReductionInfo &gt; ReductionInfos, bool IsNoWait=false)</div><div class="ttdoc">Generator for '#omp reduction'.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l01720">OMPIRBuilder.cpp:1720</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html_ac835b8735b1b2faec0efdca236e37d94"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#ac835b8735b1b2faec0efdca236e37d94">llvm::ArrayRef::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdoc">empty - Check if the array is empty.</div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00158">ArrayRef.h:158</a></div></div>
<div class="ttc" id="aOMPIRBuilder_8cpp_html_a554000c782275642b783964853720bee"><div class="ttname"><a href="OMPIRBuilder_8cpp.html#a554000c782275642b783964853720bee">computeOpenMPScheduleType</a></div><div class="ttdeci">static OMPScheduleType computeOpenMPScheduleType(ScheduleKind ClauseKind, bool HasChunks, bool HasSimdModifier, bool HasMonotonicModifier, bool HasNonmonotonicModifier, bool HasOrderedClause)</div><div class="ttdoc">Determine the schedule type using schedule and ordering clause arguments.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00222">OMPIRBuilder.cpp:222</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00101">Debug.h:101</a></div></div>
<div class="ttc" id="aclassllvm_1_1StoreInst_html_aff28bd42ac76fc3e1c0e4db7f9e06f2d"><div class="ttname"><a href="classllvm_1_1StoreInst.html#aff28bd42ac76fc3e1c0e4db7f9e06f2d">llvm::StoreInst::setAtomic</a></div><div class="ttdeci">void setAtomic(AtomicOrdering Ordering, SyncScope::ID SSID=SyncScope::System)</div><div class="ttdoc">Sets the ordering constraint and the synchronization scope ID of this store instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00376">Instructions.h:376</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html_a7d10a7b9b7f40b04d27ed97c38ea1950"><div class="ttname"><a href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">llvm::MDNode::get</a></div><div class="ttdeci">static MDTuple * get(LLVMContext &amp;Context, ArrayRef&lt; Metadata * &gt; MDs)</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l01399">Metadata.h:1399</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a08610118e213de1b759470f0eafb9b18"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a08610118e213de1b759470f0eafb9b18">llvm::OpenMPIRBuilder::collapseLoops</a></div><div class="ttdeci">CanonicalLoopInfo * collapseLoops(DebugLoc DL, ArrayRef&lt; CanonicalLoopInfo * &gt; Loops, InsertPointTy ComputeIP)</div><div class="ttdoc">Collapse a loop nest into a single loop.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l02613">OMPIRBuilder.cpp:2613</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00055">MD5.cpp:55</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a1f469b1f703519ae25ce564c8704310f"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a1f469b1f703519ae25ce564c8704310f">llvm::ConstantExpr::getPointerCast</a></div><div class="ttdeci">static Constant * getPointerCast(Constant *C, Type *Ty)</div><div class="ttdoc">Create a BitCast, AddrSpaceCast, or a PtrToInt cast constant expression.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02041">Constants.cpp:2041</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a57f1945911ca1e95d0f51d7c3516b529"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a57f1945911ca1e95d0f51d7c3516b529">llvm::BasicBlock::getUniqueSuccessor</a></div><div class="ttdeci">const BasicBlock * getUniqueSuccessor() const</div><div class="ttdoc">Return the successor of this block if it has a unique successor.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00322">BasicBlock.cpp:322</a></div></div>
<div class="ttc" id="aARMLowOverheadLoops_8cpp_html_a0a0971d62011c35b29ff4a2325d45e93"><div class="ttname"><a href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a></div><div class="ttdeci">SmallPtrSet&lt; MachineInstr *, 2 &gt; Uses</div><div class="ttdef"><b>Definition:</b> <a href="ARMLowOverheadLoops_8cpp_source.html#l00590">ARMLowOverheadLoops.cpp:590</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9bccbe67aaab722783ca4e7c504aaaa7a14194d0b2e6c6680067975517cd58eac"><div class="ttname"><a href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7a14194d0b2e6c6680067975517cd58eac">llvm::AtomicOrdering::Monotonic</a></div><div class="ttdeci">@ Monotonic</div></div>
<div class="ttc" id="aclassllvm_1_1CanonicalLoopInfo_html_a230d812cc988ec3a48bf5206d3d72b88"><div class="ttname"><a href="classllvm_1_1CanonicalLoopInfo.html#a230d812cc988ec3a48bf5206d3d72b88">llvm::CanonicalLoopInfo::getIndVar</a></div><div class="ttdeci">Instruction * getIndVar() const</div><div class="ttdoc">Returns the instruction representing the current logical induction variable.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l02363">OMPIRBuilder.h:2363</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00055">BasicBlock.h:55</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7ad7cb643189718fba3760db5bcb5e9856"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7ad7cb643189718fba3760db5bcb5e9856">llvm::omp::OMPScheduleType::UnorderedGuidedChunked</a></div><div class="ttdeci">@ UnorderedGuidedChunked</div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a6e2bd6420d3d12339e32d4d1b3ba1394"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a6e2bd6420d3d12339e32d4d1b3ba1394">llvm::OpenMPIRBuilder::createOrderedDepend</a></div><div class="ttdeci">InsertPointTy createOrderedDepend(const LocationDescription &amp;Loc, InsertPointTy AllocaIP, unsigned NumLoops, ArrayRef&lt; llvm::Value * &gt; StoreValues, const Twine &amp;Name, bool IsDependSource)</div><div class="ttdoc">Generator for '#omp ordered depend (source | sink)'.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l03513">OMPIRBuilder.cpp:3513</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="aOMPIRBuilder_8cpp_html_a3d17252beff7921e40622170990c89ab"><div class="ttname"><a href="OMPIRBuilder_8cpp.html#a3d17252beff7921e40622170990c89ab">getKmpcForDynamicFiniForType</a></div><div class="ttdeci">static FunctionCallee getKmpcForDynamicFiniForType(Type *Ty, Module &amp;M, OpenMPIRBuilder &amp;OMPBuilder)</div><div class="ttdoc">Returns an LLVM function to call for finalizing the dynamic loop using depending on type.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l02434">OMPIRBuilder.cpp:2434</a></div></div>
<div class="ttc" id="aInjectTLIMappings_8cpp_html_a3d23fb8c590cd607d4b25a05e31c69f5"><div class="ttname"><a href="InjectTLIMappings_8cpp.html#a3d23fb8c590cd607d4b25a05e31c69f5">Mappings</a></div><div class="ttdeci">Inject TLI Mappings</div><div class="ttdef"><b>Definition:</b> <a href="InjectTLIMappings_8cpp_source.html#l00171">InjectTLIMappings.cpp:171</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa76a2cf19b821f320ab439d5659ef4b9"><div class="ttname"><a href="namespacellvm.html#aa76a2cf19b821f320ab439d5659ef4b9">llvm::MergeBlockIntoPredecessor</a></div><div class="ttdeci">bool MergeBlockIntoPredecessor(BasicBlock *BB, DomTreeUpdater *DTU=nullptr, LoopInfo *LI=nullptr, MemorySSAUpdater *MSSAU=nullptr, MemoryDependenceResults *MemDep=nullptr, bool PredecessorWithTwoSuccessors=false, DominatorTree *DT=nullptr)</div><div class="ttdoc">Attempts to merge a block into its predecessor, if possible.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00179">BasicBlockUtils.cpp:179</a></div></div>
<div class="ttc" id="aAMDGPULibCalls_8cpp_html_afecf1cc1292b07f57d343c0f4d682044"><div class="ttname"><a href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a></div><div class="ttdeci">amdgpu Simplify well known AMD library false FunctionCallee Value * Arg</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULibCalls_8cpp_source.html#l00187">AMDGPULibCalls.cpp:187</a></div></div>
<div class="ttc" id="aclassllvm_1_1NamedMDNode_html_ae917c72e5b8e15491cd0dbdd44d818f2"><div class="ttname"><a href="classllvm_1_1NamedMDNode.html#ae917c72e5b8e15491cd0dbdd44d818f2">llvm::NamedMDNode::addOperand</a></div><div class="ttdeci">void addOperand(MDNode *M)</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l01221">Metadata.cpp:1221</a></div></div>
<div class="ttc" id="aCommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="aCodeMetrics_8h_html"><div class="ttname"><a href="CodeMetrics_8h.html">CodeMetrics.h</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a9e1483f7215664a2315c53c3558d9a8d"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a></div><div class="ttdeci">Value * LHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00075">X86PartialReduction.cpp:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html"><div class="ttname"><a href="classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">This is the shared class of boolean and integer constants.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00078">Constants.h:78</a></div></div>
<div class="ttc" id="aclassllvm_1_1AttributeSet_html_af2b9418751d1f1f1b99e5b05d0ed7efa"><div class="ttname"><a href="classllvm_1_1AttributeSet.html#af2b9418751d1f1f1b99e5b05d0ed7efa">llvm::AttributeSet::addAttribute</a></div><div class="ttdeci">AttributeSet addAttribute(LLVMContext &amp;C, Attribute::AttrKind Kind) const</div><div class="ttdoc">Add an argument attribute.</div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l00701">Attributes.cpp:701</a></div></div>
<div class="ttc" id="aclassllvm_1_1OffloadEntriesInfoManager_html"><div class="ttname"><a href="classllvm_1_1OffloadEntriesInfoManager.html">llvm::OffloadEntriesInfoManager</a></div><div class="ttdoc">Class that manages information about offload code regions and data.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01937">OMPIRBuilder.h:1937</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_afeaad9a7fc12d9246c2e42578fddc718"><div class="ttname"><a href="namespacellvm_1_1omp.html#afeaad9a7fc12d9246c2e42578fddc718">llvm::omp::OMPInteropType</a></div><div class="ttdeci">OMPInteropType</div><div class="ttdef"><b>Definition:</b> <a href="OMPConstants_8h_source.html#l00253">OMPConstants.h:253</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1TargetDataRTArgs_html_aa998b8b179dd186fe4b5a1f6b6e25327"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1TargetDataRTArgs.html#aa998b8b179dd186fe4b5a1f6b6e25327">llvm::OpenMPIRBuilder::TargetDataRTArgs::BasePointersArray</a></div><div class="ttdeci">Value * BasePointersArray</div><div class="ttdoc">The array of base pointer passed to the runtime library.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01136">OMPIRBuilder.h:1136</a></div></div>
<div class="ttc" id="anamespacellvm_html_acb4e0bba417ccd05efb694c13e0ae2b0"><div class="ttname"><a href="namespacellvm.html#acb4e0bba417ccd05efb694c13e0ae2b0">llvm::ApproximateLoopSize</a></div><div class="ttdeci">InstructionCost ApproximateLoopSize(const Loop *L, unsigned &amp;NumCalls, bool &amp;NotDuplicatable, bool &amp;Convergent, const TargetTransformInfo &amp;TTI, const SmallPtrSetImpl&lt; const Value * &gt; &amp;EphValues, unsigned BEInsns)</div><div class="ttdoc">ApproximateLoopSize - Approximate the size of the loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnrollPass_8cpp_source.html#l00666">LoopUnrollPass.cpp:666</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0d10fe510ced2849a8074fe81e5d04ce"><div class="ttname"><a href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">llvm::all_of</a></div><div class="ttdeci">bool all_of(R &amp;&amp;range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::all_of which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01735">STLExtras.h:1735</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7ace336b30276699c8ad3f28c7296ae69c"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7ace336b30276699c8ad3f28c7296ae69c">llvm::omp::OMPScheduleType::UnorderedAuto</a></div><div class="ttdeci">@ UnorderedAuto</div></div>
<div class="ttc" id="aclassllvm_1_1OffloadEntriesInfoManager_html_a8a88ec295fa5c83572df98cfaff271ed"><div class="ttname"><a href="classllvm_1_1OffloadEntriesInfoManager.html#a8a88ec295fa5c83572df98cfaff271ed">llvm::OffloadEntriesInfoManager::hasTargetRegionEntryInfo</a></div><div class="ttdeci">bool hasTargetRegionEntryInfo(TargetRegionEntryInfo EntryInfo, bool IgnoreAddressId=false) const</div><div class="ttdoc">Return true if a target region entry with the provided information exists.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l05086">OMPIRBuilder.cpp:5086</a></div></div>
<div class="ttc" id="aclassllvm_1_1OffloadEntriesInfoManager_html_ab9575c71365de4083a7be6ef6572d534abe3a7916fb5f7a79d6aea6c0356e71a6"><div class="ttname"><a href="classllvm_1_1OffloadEntriesInfoManager.html#ab9575c71365de4083a7be6ef6572d534abe3a7916fb5f7a79d6aea6c0356e71a6">llvm::OffloadEntriesInfoManager::OMPTargetGlobalVarEntryLink</a></div><div class="ttdeci">@ OMPTargetGlobalVarEntryLink</div><div class="ttdoc">Mark the entry as a to declare target link.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l02072">OMPIRBuilder.h:2072</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1TargetDataRTArgs_html_a4b54534e64cdf22a09f26ddacebe69ac"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1TargetDataRTArgs.html#a4b54534e64cdf22a09f26ddacebe69ac">llvm::OpenMPIRBuilder::TargetDataRTArgs::MappersArray</a></div><div class="ttdeci">Value * MappersArray</div><div class="ttdoc">The array of user-defined mappers passed to the runtime library.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01150">OMPIRBuilder.h:1150</a></div></div>
<div class="ttc" id="aTarget_2TargetMachine_8h_html"><div class="ttname"><a href="Target_2TargetMachine_8h.html">TargetMachine.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_acd1fbb2df257f945afda92919be322f3"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#acd1fbb2df257f945afda92919be322f3">llvm::OpenMPIRBuilder::applySimd</a></div><div class="ttdeci">void applySimd(CanonicalLoopInfo *Loop, MapVector&lt; Value *, Value * &gt; AlignedVars, Value *IfCond, omp::OrderKind Order, ConstantInt *Simdlen, ConstantInt *Safelen)</div><div class="ttdoc">Add metadata to simd-ize a loop.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l03073">OMPIRBuilder.cpp:3073</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a654b33adee2ae78ce74ecbe6aa5e5282"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a654b33adee2ae78ce74ecbe6aa5e5282">llvm::OpenMPIRBuilder::emitMapperCall</a></div><div class="ttdeci">void emitMapperCall(const LocationDescription &amp;Loc, Function *MapperFunc, Value *SrcLocInfo, Value *MaptypesArg, Value *MapnamesArg, struct MapperAllocas &amp;MapperAllocas, int64_t DeviceID, unsigned NumOperands)</div><div class="ttdoc">Create the call for the target mapper function.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l04120">OMPIRBuilder.cpp:4120</a></div></div>
<div class="ttc" id="aOMPIRBuilder_8cpp_html_ac36177cea684b1e36fdbc92d692f69d0"><div class="ttname"><a href="OMPIRBuilder_8cpp.html#ac36177cea684b1e36fdbc92d692f69d0">addBasicBlockMetadata</a></div><div class="ttdeci">static void addBasicBlockMetadata(BasicBlock *BB, ArrayRef&lt; Metadata * &gt; Properties)</div><div class="ttdoc">Attach metadata Properties to the basic block described by BB.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l02933">OMPIRBuilder.cpp:2933</a></div></div>
<div class="ttc" id="anamespacellvm_html_a22eeee01734061ac1b31ccd994c49eef"><div class="ttname"><a href="namespacellvm.html#a22eeee01734061ac1b31ccd994c49eef">llvm::dyn_cast</a></div><div class="ttdeci">decltype(auto) dyn_cast(const From &amp;Val)</div><div class="ttdoc">dyn_cast&lt;X&gt; - Return the argument parameter cast to the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="Casting_8h_source.html#l00650">Casting.h:650</a></div></div>
<div class="ttc" id="aOMPIRBuilder_8h_html"><div class="ttname"><a href="OMPIRBuilder_8h.html">OMPIRBuilder.h</a></div></div>
<div class="ttc" id="aConstants_8h_html"><div class="ttname"><a href="Constants_8h.html">Constants.h</a></div></div>
<div class="ttc" id="aLint_8cpp_html_a45005634b54e2126cb3e6ec0dbc9ade4"><div class="ttname"><a href="Lint_8cpp.html#a45005634b54e2126cb3e6ec0dbc9ade4">isZero</a></div><div class="ttdeci">static bool isZero(Value *V, const DataLayout &amp;DL, DominatorTree *DT, AssumptionCache *AC)</div><div class="ttdef"><b>Definition:</b> <a href="Lint_8cpp_source.html#l00524">Lint.cpp:524</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a5dbb28755ef35df2cf784fac45f13f80"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a5dbb28755ef35df2cf784fac45f13f80">llvm::OpenMPIRBuilder::emitOffloadingArraysArgument</a></div><div class="ttdeci">void emitOffloadingArraysArgument(IRBuilderBase &amp;Builder, OpenMPIRBuilder::TargetDataRTArgs &amp;RTArgs, OpenMPIRBuilder::TargetDataInfo &amp;Info, bool EmitDebug=false, bool ForEndCall=false)</div><div class="ttdoc">Emit the arguments to be passed to the runtime library based on the arrays of base pointers,...</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l04146">OMPIRBuilder.cpp:4146</a></div></div>
<div class="ttc" id="aclassllvm_1_1AllocaInst_html_a074617b3e2f9f98ee3a2ac208e8e7210"><div class="ttname"><a href="classllvm_1_1AllocaInst.html#a074617b3e2f9f98ee3a2ac208e8e7210">llvm::AllocaInst::getAllocatedType</a></div><div class="ttdeci">Type * getAllocatedType() const</div><div class="ttdoc">Return the type that is being allocated by the instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00118">Instructions.h:118</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1CanonicalLoopInfo_html_a32ff799dcb39887a8d21322020f305ba"><div class="ttname"><a href="classllvm_1_1CanonicalLoopInfo.html#a32ff799dcb39887a8d21322020f305ba">llvm::CanonicalLoopInfo::assertOK</a></div><div class="ttdeci">void assertOK() const</div><div class="ttdoc">Consistency self-check.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l05222">OMPIRBuilder.cpp:5222</a></div></div>
<div class="ttc" id="aclassllvm_1_1CanonicalLoopInfo_html_a71a16b42ce34255bd7a65902d15643fb"><div class="ttname"><a href="classllvm_1_1CanonicalLoopInfo.html#a71a16b42ce34255bd7a65902d15643fb">llvm::CanonicalLoopInfo::getCond</a></div><div class="ttdeci">BasicBlock * getCond() const</div><div class="ttdoc">The condition block computes whether there is another loop iteration.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l02314">OMPIRBuilder.h:2314</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html">llvm::OpenMPIRBuilder</a></div><div class="ttdoc">An interface to create LLVM-IR for OpenMP directives.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l00166">OMPIRBuilder.h:166</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a807c913d5889a80440269b74d5755d6c"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a807c913d5889a80440269b74d5755d6c">llvm::OpenMPIRBuilder::createOMPFree</a></div><div class="ttdeci">CallInst * createOMPFree(const LocationDescription &amp;Loc, Value *Addr, Value *Allocator, std::string Name=&quot;&quot;)</div><div class="ttdoc">Create a runtime call for kmpc_free.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l03768">OMPIRBuilder.cpp:3768</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html"><div class="ttname"><a href="classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00044">User.h:44</a></div></div>
<div class="ttc" id="aclassllvm_1_1OffloadEntriesInfoManager_1_1OffloadEntryInfoDeviceGlobalVar_html"><div class="ttname"><a href="classllvm_1_1OffloadEntriesInfoManager_1_1OffloadEntryInfoDeviceGlobalVar.html">llvm::OffloadEntriesInfoManager::OffloadEntryInfoDeviceGlobalVar</a></div><div class="ttdoc">Device global variable entries info.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l02076">OMPIRBuilder.h:2076</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_ac35a35b620a34821da2801ebf452a9a0"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#ac35a35b620a34821da2801ebf452a9a0">llvm::OpenMPIRBuilder::getOrCreateDefaultSrcLocStr</a></div><div class="ttdeci">Constant * getOrCreateDefaultSrcLocStr(uint32_t &amp;SrcLocStrSize)</div><div class="ttdoc">Return the (LLVM-IR) string describing the default source location.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00634">OMPIRBuilder.cpp:634</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7a3766f17f591a16552940e68a9206a109"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a3766f17f591a16552940e68a9206a109">llvm::omp::OMPScheduleType::UnorderedRuntime</a></div><div class="ttdeci">@ UnorderedRuntime</div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a710808150839f3d1aa32362b1566d9d3"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a710808150839f3d1aa32362b1566d9d3">llvm::OpenMPIRBuilder::emitOffloadingEntry</a></div><div class="ttdeci">void emitOffloadingEntry(Constant *Addr, StringRef Name, uint64_t Size, int32_t Flags, StringRef SectionName=&quot;omp_offloading_entries&quot;)</div><div class="ttdoc">Create an offloading section struct used to register this global at runtime.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00777">OMPIRBuilder.cpp:777</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A, *B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00086">README_ALTIVEC.txt:86</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1UnrollingPreferences_html_a4217ba2e3d1295f8e9e6b49cef2a8b76"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a4217ba2e3d1295f8e9e6b49cef2a8b76">llvm::TargetTransformInfo::UnrollingPreferences::Force</a></div><div class="ttdeci">bool Force</div><div class="ttdoc">Apply loop unroll on any kind of loop (mainly to loops that fail runtime unrolling).</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00505">TargetTransformInfo.h:505</a></div></div>
<div class="ttc" id="alib_2Target_2X86_2README_8txt_html_ad5da9a19280b84509a8d1cac2290a0ad"><div class="ttname"><a href="lib_2Target_2X86_2README_8txt.html#ad5da9a19280b84509a8d1cac2290a0ad">cmp</a></div><div class="ttdeci">&lt; i32 &gt;&lt; i32 &gt; cmp</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2X86_2README_8txt_source.html#l01447">README.txt:1447</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">llvm::CmpInst::ICMP_ULE</a></div><div class="ttdeci">@ ICMP_ULE</div><div class="ttdoc">unsigned less or equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00744">InstrTypes.h:744</a></div></div>
<div class="ttc" id="aLowerMatrixIntrinsics_8cpp_html_a7f6b2a94f0c353d428cf953c17fb7da0"><div class="ttname"><a href="LowerMatrixIntrinsics_8cpp.html#a7f6b2a94f0c353d428cf953c17fb7da0">TileSize</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; TileSize(&quot;fuse-matrix-tile-size&quot;, cl::init(4), cl::Hidden, cl::desc(&quot;Tile size for matrix instruction fusion using square-shaped tiles.&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a83b8c9e572130f403445c0b0f69b837c"><div class="ttname"><a href="classllvm_1_1CallBase.html#a83b8c9e572130f403445c0b0f69b837c">llvm::CallBase::getCalledFunction</a></div><div class="ttdeci">Function * getCalledFunction() const</div><div class="ttdoc">Returns the function called, or null if this is an indirect function invocation or the function signa...</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01406">InstrTypes.h:1406</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdoc">Instruction iterator methods.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00314">BasicBlock.h:314</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a544a84c75ac55356516cc7365cbe6f02"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a544a84c75ac55356516cc7365cbe6f02">llvm::OpenMPIRBuilder::createMapperAllocas</a></div><div class="ttdeci">void createMapperAllocas(const LocationDescription &amp;Loc, InsertPointTy AllocaIP, unsigned NumOperands, struct MapperAllocas &amp;MapperAllocas)</div><div class="ttdoc">Create the allocas instruction used in call to mapper functions.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l04101">OMPIRBuilder.cpp:4101</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a621dc84cad8ee0efc4bec3a8dc70a217"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a621dc84cad8ee0efc4bec3a8dc70a217">llvm::OpenMPIRBuilder::createTask</a></div><div class="ttdeci">InsertPointTy createTask(const LocationDescription &amp;Loc, InsertPointTy AllocaIP, BodyGenCallbackTy BodyGenCB, bool Tied=true, Value *Final=nullptr, Value *IfCondition=nullptr, SmallVector&lt; DependData &gt; Dependencies={})</div><div class="ttdoc">Generator for #omp task</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l01283">OMPIRBuilder.cpp:1283</a></div></div>
<div class="ttc" id="aOMPIRBuilder_8cpp_html_abdcdbfc178873f5055fbcf98bad92f53"><div class="ttname"><a href="OMPIRBuilder_8cpp.html#abdcdbfc178873f5055fbcf98bad92f53">redirectAllPredecessorsTo</a></div><div class="ttdeci">static void redirectAllPredecessorsTo(BasicBlock *OldTarget, BasicBlock *NewTarget, DebugLoc DL)</div><div class="ttdoc">Redirect all edges that branch to OldTarget to NewTarget.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l02574">OMPIRBuilder.cpp:2574</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html_a2ff0e0e87a2d1056a7b6d7d4b878c4ec"><div class="ttname"><a href="classllvm_1_1MDNode.html#a2ff0e0e87a2d1056a7b6d7d4b878c4ec">llvm::MDNode::operands</a></div><div class="ttdeci">ArrayRef&lt; MDOperand &gt; operands() const</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l01289">Metadata.h:1289</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a4761ddf3a15247582e7106e3968adba5"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a4761ddf3a15247582e7106e3968adba5">llvm::OpenMPIRBuilder::createBarrier</a></div><div class="ttdeci">InsertPointTy createBarrier(const LocationDescription &amp;Loc, omp::Directive DK, bool ForceSimpleCall=false, bool CheckCancelFlag=true)</div><div class="ttdoc">Emitter methods for OpenMP directives.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00669">OMPIRBuilder.cpp:669</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CodeGenOpt_html_ad7e52174abb1cfb84238ad1ac475ee36a71969d8670845bfa9d80ba2197dba678"><div class="ttname"><a href="namespacellvm_1_1CodeGenOpt.html#ad7e52174abb1cfb84238ad1ac475ee36a71969d8670845bfa9d80ba2197dba678">llvm::CodeGenOpt::Aggressive</a></div><div class="ttdeci">@ Aggressive</div><div class="ttdoc">-O3</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_8h_source.html#l00061">CodeGen.h:61</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a388d5a62753f4e7ff4b72e54c1233fbc"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a388d5a62753f4e7ff4b72e54c1233fbc">llvm::OpenMPIRBuilder::createAtomicRead</a></div><div class="ttdeci">InsertPointTy createAtomicRead(const LocationDescription &amp;Loc, AtomicOpValue &amp;X, AtomicOpValue &amp;V, AtomicOrdering AO)</div><div class="ttdoc">Emit atomic Read for : V = X  Only Scalar data types.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l04266">OMPIRBuilder.cpp:4266</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ms__demangle_html_afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e"><div class="ttname"><a href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a8eea62084ca7e541d918e823422bd82e">llvm::ms_demangle::QualifierMangleMode::Result</a></div><div class="ttdeci">@ Result</div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a40f34cc77d2b3bc73384f535c8101858"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a40f34cc77d2b3bc73384f535c8101858">llvm::LoopBase::blocks</a></div><div class="ttdeci">iterator_range&lt; block_iterator &gt; blocks() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00195">LoopInfo.h:195</a></div></div>
<div class="ttc" id="aTargetLibraryInfo_8h_html"><div class="ttname"><a href="TargetLibraryInfo_8h.html">TargetLibraryInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_aa5ef00e5a7487cc6c5bfed0f301fa1cc"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#aa5ef00e5a7487cc6c5bfed0f301fa1cc">llvm::OpenMPIRBuilder::getOrCreateInternalVariable</a></div><div class="ttdeci">GlobalVariable * getOrCreateInternalVariable(Type *Ty, const StringRef &amp;Name, unsigned AddressSpace=0)</div><div class="ttdoc">Gets (if variable with the given name already exist) or creates internal global variable with the spe...</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l04061">OMPIRBuilder.cpp:4061</a></div></div>
<div class="ttc" id="anamespacellvm_1_1SPII_html_a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856"><div class="ttname"><a href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa36b3dd3b84fde3f8494a9b18af131856">llvm::SPII::Store</a></div><div class="ttdeci">@ Store</div><div class="ttdef"><b>Definition:</b> <a href="SparcInstrInfo_8h_source.html#l00033">SparcInstrInfo.h:33</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_aecb93439702247fe5353a9966f7cefcd"><div class="ttname"><a href="classllvm_1_1Value.html#aecb93439702247fe5353a9966f7cefcd">llvm::Value::uses</a></div><div class="ttdeci">iterator_range&lt; use_iterator &gt; uses()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00376">Value.h:376</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_aa0c0d79dafb0d22308ce48808689f430a338c51f37ed4e4b2c9973a383c566c19"><div class="ttname"><a href="namespacellvm_1_1omp.html#aa0c0d79dafb0d22308ce48808689f430a338c51f37ed4e4b2c9973a383c566c19">llvm::omp::OMP_TGT_EXEC_MODE_SPMD</a></div><div class="ttdeci">@ OMP_TGT_EXEC_MODE_SPMD</div><div class="ttdef"><b>Definition:</b> <a href="OMPDeviceConstants_8h_source.html#l00023">OMPDeviceConstants.h:23</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a161fd4e9fa5367f64c2a4c9e921c3ad3"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a161fd4e9fa5367f64c2a4c9e921c3ad3">llvm::BasicBlock::getFirstInsertionPt</a></div><div class="ttdeci">const_iterator getFirstInsertionPt() const</div><div class="ttdoc">Returns an iterator to the first instruction in this block that is suitable for inserting a non-PHI i...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00245">BasicBlock.cpp:245</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a16d7c5f77008a84ae20bf4a5c41e51f0a4a795cf4295903cb3e7dee5f6496e9b2"><div class="ttname"><a href="namespacellvm_1_1omp.html#a16d7c5f77008a84ae20bf4a5c41e51f0a4a795cf4295903cb3e7dee5f6496e9b2">llvm::omp::RTLDependInfoFields::BaseAddr</a></div><div class="ttdeci">@ BaseAddr</div></div>
<div class="ttc" id="anamespacellvm_1_1dwarf_html_a5d3c920b66ea797d6adb243862fdf47a"><div class="ttname"><a href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">llvm::dwarf::Index</a></div><div class="ttdeci">Index</div><div class="ttdef"><b>Definition:</b> <a href="Dwarf_8h_source.html#l00550">Dwarf.h:550</a></div></div>
<div class="ttc" id="astructllvm_1_1MaybeAlign_html"><div class="ttname"><a href="structllvm_1_1MaybeAlign.html">llvm::MaybeAlign</a></div><div class="ttdoc">This struct is a compact representation of a valid (power of two) or undefined (0) alignment.</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00117">Alignment.h:117</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_ad66949e2e846451e61d9c8f34014ea31"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#ad66949e2e846451e61d9c8f34014ea31">llvm::OpenMPIRBuilder::~OpenMPIRBuilder</a></div><div class="ttdeci">~OpenMPIRBuilder()</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00539">OMPIRBuilder.cpp:539</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7a0f712a4e8c3670472ef75bdbfde786f8"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a0f712a4e8c3670472ef75bdbfde786f8">llvm::omp::OMPScheduleType::ModifierMonotonic</a></div><div class="ttdeci">@ ModifierMonotonic</div></div>
<div class="ttc" id="aclassllvm_1_1IntegerType_html"><div class="ttname"><a href="classllvm_1_1IntegerType.html">llvm::IntegerType</a></div><div class="ttdoc">Class to represent integer types.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00040">DerivedTypes.h:40</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a5cc113cb783ab6e5ca7b69241431c19c"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a5cc113cb783ab6e5ca7b69241431c19c">llvm::LoopBase::getBlocks</a></div><div class="ttdeci">ArrayRef&lt; BlockT * &gt; getBlocks() const</div><div class="ttdoc">Get a list of the basic blocks which make up this loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00188">LoopInfo.h:188</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a644afe0cf8a4816171b3384098325dc2"><div class="ttname"><a href="classllvm_1_1Instruction.html#a644afe0cf8a4816171b3384098325dc2">llvm::Instruction::classof</a></div><div class="ttdeci">static bool classof(const Value *V)</div><div class="ttdoc">Methods for support type inquiry through isa, cast, and dyn_cast:</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00788">Instruction.h:788</a></div></div>
<div class="ttc" id="aclassllvm_1_1CanonicalLoopInfo_html_a4b2b7074e300c251f7cb8913620b1d80"><div class="ttname"><a href="classllvm_1_1CanonicalLoopInfo.html#a4b2b7074e300c251f7cb8913620b1d80">llvm::CanonicalLoopInfo::isValid</a></div><div class="ttdeci">bool isValid() const</div><div class="ttdoc">Returns whether this object currently represents the IR of a loop.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l02297">OMPIRBuilder.h:2297</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a55a39962245dd2e0938194dd3b4438e5"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a55a39962245dd2e0938194dd3b4438e5">llvm::OpenMPIRBuilder::getOrCreateSrcLocStr</a></div><div class="ttdeci">Constant * getOrCreateSrcLocStr(StringRef LocStr, uint32_t &amp;SrcLocStrSize)</div><div class="ttdoc">Return the (LLVM-IR) string describing the source location LocStr.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00594">OMPIRBuilder.cpp:594</a></div></div>
<div class="ttc" id="aclassllvm_1_1CodeExtractor_html_a3719f9e5392a61378d7815a6c346abda"><div class="ttname"><a href="classllvm_1_1CodeExtractor.html#a3719f9e5392a61378d7815a6c346abda">llvm::CodeExtractor::findInputsOutputs</a></div><div class="ttdeci">void findInputsOutputs(ValueSet &amp;Inputs, ValueSet &amp;Outputs, const ValueSet &amp;Allocas) const</div><div class="ttdoc">Compute the set of input values and output values for the code.</div><div class="ttdef"><b>Definition:</b> <a href="CodeExtractor_8cpp_source.html#l00645">CodeExtractor.cpp:645</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00041">Instruction.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a6c4eeba23c6f192892487de272e8ce72"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a6c4eeba23c6f192892487de272e8ce72">llvm::OpenMPIRBuilder::createAtomicCompare</a></div><div class="ttdeci">InsertPointTy createAtomicCompare(const LocationDescription &amp;Loc, AtomicOpValue &amp;X, AtomicOpValue &amp;V, AtomicOpValue &amp;R, Value *E, Value *D, AtomicOrdering AO, omp::OMPAtomicCompareOp Op, bool IsXBinopExpr, bool IsPostfixUpdate, bool IsFailOnly)</div><div class="ttdoc">Emit atomic compare for constructs:  Only scalar data types cond-expr-stmt: x = x ordop expr ?...</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l04549">OMPIRBuilder.cpp:4549</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a9f382207d841377156d4c7868b66b9a5"><div class="ttname"><a href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">llvm::Type::getScalarSizeInBits</a></div><div class="ttdeci">unsigned getScalarSizeInBits() const LLVM_READONLY</div><div class="ttdoc">If this is a vector type, return the getPrimitiveSizeInBits value for the element type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00188">Type.cpp:188</a></div></div>
<div class="ttc" id="anamespacellvm_html_a03f30f48490558525cd5458201d13afe"><div class="ttname"><a href="namespacellvm.html#a03f30f48490558525cd5458201d13afe">llvm::splitBBWithSuffix</a></div><div class="ttdeci">BasicBlock * splitBBWithSuffix(IRBuilderBase &amp;Builder, bool CreateBranch, llvm::Twine Suffix=&quot;.split&quot;)</div><div class="ttdoc">Like splitBB, but reuses the current block's name for the new name.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00325">OMPIRBuilder.cpp:325</a></div></div>
<div class="ttc" id="anamespacellvm_1_1pdb_html_a434cfa04e4ed34b7a901378557d4ca9eab4469cd975dfe176a70d24e5904cedf6"><div class="ttname"><a href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9eab4469cd975dfe176a70d24e5904cedf6">llvm::pdb::Int8</a></div><div class="ttdeci">@ Int8</div><div class="ttdef"><b>Definition:</b> <a href="PDBTypes_8h_source.html#l00397">PDBTypes.h:397</a></div></div>
<div class="ttc" id="aOMPIRBuilder_8cpp_html_a596dcc3bb2ae8b7561e94095584e0f1e"><div class="ttname"><a href="OMPIRBuilder_8cpp.html#a596dcc3bb2ae8b7561e94095584e0f1e">isValidWorkshareLoopScheduleType</a></div><div class="ttdeci">static bool isValidWorkshareLoopScheduleType(OMPScheduleType SchedType)</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00076">OMPIRBuilder.cpp:76</a></div></div>
<div class="ttc" id="aMDBuilder_8h_html"><div class="ttname"><a href="MDBuilder_8h.html">MDBuilder.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9bccbe67aaab722783ca4e7c504aaaa7a993ca650a85e8e69b8f7eaa4809c4862"><div class="ttname"><a href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7a993ca650a85e8e69b8f7eaa4809c4862">llvm::AtomicOrdering::Acquire</a></div><div class="ttdeci">@ Acquire</div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615afdcdc631cf4fa6829fd7499cd06a306b"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615afdcdc631cf4fa6829fd7499cd06a306b">llvm::AtomicRMWInst::Nand</a></div><div class="ttdeci">@ Nand</div><div class="ttdoc">*p = ~(old &amp; v)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00740">Instructions.h:740</a></div></div>
<div class="ttc" id="aPassBuilderBindings_8cpp_html_a47c521bf7ba0bb2147b96d068af30d04"><div class="ttname"><a href="PassBuilderBindings_8cpp.html#a47c521bf7ba0bb2147b96d068af30d04">Options</a></div><div class="ttdeci">const char LLVMTargetMachineRef LLVMPassBuilderOptionsRef Options</div><div class="ttdef"><b>Definition:</b> <a href="PassBuilderBindings_8cpp_source.html#l00048">PassBuilderBindings.cpp:48</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7a711e6dab1b42b1c5451a7aafe2c1e21e"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a711e6dab1b42b1c5451a7aafe2c1e21e">llvm::omp::OMPScheduleType::NomergeUnorderedAuto</a></div><div class="ttdeci">@ NomergeUnorderedAuto</div></div>
<div class="ttc" id="aclassllvm_1_1GlobalObject_html_aa1b0638c63ba711320b3bb9c69367ed6"><div class="ttname"><a href="classllvm_1_1GlobalObject.html#aa1b0638c63ba711320b3bb9c69367ed6">llvm::GlobalObject::addMetadata</a></div><div class="ttdeci">void addMetadata(unsigned KindID, MDNode &amp;MD)</div><div class="ttdoc">Add a metadata attachment.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l01359">Metadata.cpp:1359</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a35ee267850af7c235474a8c46c7ac5af"><div class="ttname"><a href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">llvm::Value::setName</a></div><div class="ttdeci">void setName(const Twine &amp;Name)</div><div class="ttdoc">Change the name of the value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00375">Value.cpp:375</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_ad0b3d8447f88377b62d9c019f3c4e118"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#ad0b3d8447f88377b62d9c019f3c4e118">llvm::SmallVectorImpl::resize</a></div><div class="ttdeci">void resize(size_type N)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00642">SmallVector.h:642</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a969709dd49c28865a482d8b870f87c46"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">llvm::ConstantInt::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, uint64_t V, bool IsSigned=false)</div><div class="ttdoc">If Ty is a vector type, return a Constant with a splat of the given value.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00887">Constants.cpp:887</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a2cc5944fcb516509d6640e1c0317c76d"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a2cc5944fcb516509d6640e1c0317c76d">llvm::OpenMPIRBuilder::createOffloadEntriesAndInfoMetadata</a></div><div class="ttdeci">void createOffloadEntriesAndInfoMetadata(OffloadEntriesInfoManager &amp;OffloadEntriesInfoManager, EmitMetadataErrorReportFunctionTy &amp;ErrorReportFunction)</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l04813">OMPIRBuilder.cpp:4813</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a1c2af7a9e501d399f06ca7e10eef46e4"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a1c2af7a9e501d399f06ca7e10eef46e4">llvm::BasicBlock::rbegin</a></div><div class="ttdeci">reverse_iterator rbegin()</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00319">BasicBlock.h:319</a></div></div>
<div class="ttc" id="aclassllvm_1_1CanonicalLoopInfo_html_a8031442528bff99473596a0de4aa0422"><div class="ttname"><a href="classllvm_1_1CanonicalLoopInfo.html#a8031442528bff99473596a0de4aa0422">llvm::CanonicalLoopInfo::getBodyIP</a></div><div class="ttdeci">OpenMPIRBuilder::InsertPointTy getBodyIP() const</div><div class="ttdoc">Return the insertion point for user code in the body.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l02384">OMPIRBuilder.h:2384</a></div></div>
<div class="ttc" id="astructllvm_1_1CodeMetrics_html_a7e174506b52ad46ea1f746a7f727d999"><div class="ttname"><a href="structllvm_1_1CodeMetrics.html#a7e174506b52ad46ea1f746a7f727d999">llvm::CodeMetrics::collectEphemeralValues</a></div><div class="ttdeci">static void collectEphemeralValues(const Loop *L, AssumptionCache *AC, SmallPtrSetImpl&lt; const Value * &gt; &amp;EphValues)</div><div class="ttdoc">Collect a loop's ephemeral values (those used only by an assume or similar intrinsics in the loop).</div><div class="ttdef"><b>Definition:</b> <a href="CodeMetrics_8cpp_source.html#l00070">CodeMetrics.cpp:70</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_acb593a387130148478f3c30af0d322dfa2dcbad7477fd40561e8b8198f173bd47"><div class="ttname"><a href="namespacellvm_1_1omp.html#acb593a387130148478f3c30af0d322dfa2dcbad7477fd40561e8b8198f173bd47">llvm::omp::OMPAtomicCompareOp::EQ</a></div><div class="ttdeci">@ EQ</div></div>
<div class="ttc" id="anamespacellvm_html_a47d9d4544f29bfafd32f0d62db009915"><div class="ttname"><a href="namespacellvm.html#a47d9d4544f29bfafd32f0d62db009915">llvm::SplitBlockAndInsertIfThenElse</a></div><div class="ttdeci">void SplitBlockAndInsertIfThenElse(Value *Cond, Instruction *SplitBefore, Instruction **ThenTerm, Instruction **ElseTerm, MDNode *BranchWeights=nullptr, DomTreeUpdater *DTU=nullptr)</div><div class="ttdoc">SplitBlockAndInsertIfThenElse is similar to SplitBlockAndInsertIfThen, but also creates the ElseBlock...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l01563">BasicBlockUtils.cpp:1563</a></div></div>
<div class="ttc" id="aCSEInfo_8cpp_html_a75f8a8519c2c9b30e7c06dc5e256fffa"><div class="ttname"><a href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a></div><div class="ttdeci">Analysis containing CSE Info</div><div class="ttdef"><b>Definition:</b> <a href="CSEInfo_8cpp_source.html#l00027">CSEInfo.cpp:27</a></div></div>
<div class="ttc" id="aOMPIRBuilder_8cpp_html_af0ce60c4a958016f62ce78f1eda423af"><div class="ttname"><a href="OMPIRBuilder_8cpp.html#af0ce60c4a958016f62ce78f1eda423af">removeUnusedBlocksFromParent</a></div><div class="ttdeci">static void removeUnusedBlocksFromParent(ArrayRef&lt; BasicBlock * &gt; BBs)</div><div class="ttdoc">Determine which blocks in BBs are reachable from outside and remove the ones that are not reachable f...</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l02582">OMPIRBuilder.cpp:2582</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7a3c09d00199d64e2f7eb08082a7b6b598"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a3c09d00199d64e2f7eb08082a7b6b598">llvm::omp::OMPScheduleType::BaseBalanced</a></div><div class="ttdeci">@ BaseBalanced</div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba326bee0a4a424cef21c1cf8adb8b8dd8"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba326bee0a4a424cef21c1cf8adb8b8dd8">llvm::CmpInst::FCMP_OLT</a></div><div class="ttdeci">@ FCMP_OLT</div><div class="ttdoc">0 1 0 0 True if ordered and less than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00724">InstrTypes.h:724</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a7efd1f0c1206d95e4fe01a9b49a57b82"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a7efd1f0c1206d95e4fe01a9b49a57b82">llvm::SmallVectorImpl::append</a></div><div class="ttdeci">void append(ItTy in_start, ItTy in_end)</div><div class="ttdoc">Add the specified range to the end of the SmallVector.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00687">SmallVector.h:687</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_1_1InsertPoint_html_a80052c7ca73be0613915d31e4abc62eb"><div class="ttname"><a href="classllvm_1_1IRBuilderBase_1_1InsertPoint.html#a80052c7ca73be0613915d31e4abc62eb">llvm::IRBuilderBase::InsertPoint::getBlock</a></div><div class="ttdeci">BasicBlock * getBlock() const</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00258">IRBuilder.h:258</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a0fd53f63d349dc8a7c5fc0cdd7a94c8d"><div class="ttname"><a href="classllvm_1_1Instruction.html#a0fd53f63d349dc8a7c5fc0cdd7a94c8d">llvm::Instruction::removeFromParent</a></div><div class="ttdeci">void removeFromParent()</div><div class="ttdoc">This method unlinks 'this' from the containing basic block, but does not delete it.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00078">Instruction.cpp:78</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1MapperAllocas_html_aa90c5e272864414356fbeede370d5053"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1MapperAllocas.html#aa90c5e272864414356fbeede370d5053">llvm::OpenMPIRBuilder::MapperAllocas::Args</a></div><div class="ttdeci">AllocaInst * Args</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01109">OMPIRBuilder.h:1109</a></div></div>
<div class="ttc" id="aELFObjHandler_8cpp_html_a043cdaf7b89aaeeb127be5d93411637f"><div class="ttname"><a href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a></div><div class="ttdeci">uint64_t Align</div><div class="ttdef"><b>Definition:</b> <a href="ELFObjHandler_8cpp_source.html#l00082">ELFObjHandler.cpp:82</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a0e821d8251c97d66ca185efe2f8ffde2"><div class="ttname"><a href="namespacellvm_1_1omp.html#a0e821d8251c97d66ca185efe2f8ffde2">llvm::omp::IdentFlag</a></div><div class="ttdeci">IdentFlag</div><div class="ttdoc">IDs for all omp runtime library ident_t flag encodings (see their defintion in openmp/runtime/src/kmp...</div><div class="ttdef"><b>Definition:</b> <a href="OMPConstants_8h_source.html#l00066">OMPConstants.h:66</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615acce124326ba87b0127b36c412bf555fd"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615acce124326ba87b0127b36c412bf555fd">llvm::AtomicRMWInst::FMax</a></div><div class="ttdeci">@ FMax</div><div class="ttdoc">*p = maxnum(old, v) maxnum matches the behavior of llvm.maxnum.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00762">Instructions.h:762</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">llvm::GlobalValue::InternalLinkage</a></div><div class="ttdeci">@ InternalLinkage</div><div class="ttdoc">Rename collisions when linking (static functions).</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00055">GlobalValue.h:55</a></div></div>
<div class="ttc" id="astructllvm_1_1Align_html"><div class="ttname"><a href="structllvm_1_1Align.html">llvm::Align</a></div><div class="ttdoc">This struct is a compact representation of a valid (non-zero power of two) alignment.</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00039">Alignment.h:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1Metadata_html"><div class="ttname"><a href="classllvm_1_1Metadata.html">llvm::Metadata</a></div><div class="ttdoc">Root of the metadata hierarchy.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00061">Metadata.h:61</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615afc870a548088c5b7a93a34f648889d77"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615afc870a548088c5b7a93a34f648889d77">llvm::AtomicRMWInst::Xchg</a></div><div class="ttdeci">@ Xchg</div><div class="ttdoc">*p = v</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00732">Instructions.h:732</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a28a2a9806d828609fe107f766d2dd569"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a28a2a9806d828609fe107f766d2dd569">llvm::OpenMPIRBuilder::unrollLoopFull</a></div><div class="ttdeci">void unrollLoopFull(DebugLoc DL, CanonicalLoopInfo *Loop)</div><div class="ttdoc">Fully unroll a loop.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l02980">OMPIRBuilder.cpp:2980</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a177df2c9d7d8692ed214018f420c3de6"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a177df2c9d7d8692ed214018f420c3de6">llvm::OpenMPIRBuilder::emitTaskwaitImpl</a></div><div class="ttdeci">void emitTaskwaitImpl(const LocationDescription &amp;Loc)</div><div class="ttdoc">Generate a taskwait runtime call.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l01245">OMPIRBuilder.cpp:1245</a></div></div>
<div class="ttc" id="anamespacellvm_html_a2c3c18bffdc25d969233c5448bdfe7eb"><div class="ttname"><a href="namespacellvm.html#a2c3c18bffdc25d969233c5448bdfe7eb">llvm::AddressSpace</a></div><div class="ttdeci">AddressSpace</div><div class="ttdef"><b>Definition:</b> <a href="NVPTXBaseInfo_8h_source.html#l00021">NVPTXBaseInfo.h:21</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a81bc7a57bd0332843aed6275ba47bee0"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a81bc7a57bd0332843aed6275ba47bee0">llvm::OpenMPIRBuilder::createOMPAlloc</a></div><div class="ttdeci">CallInst * createOMPAlloc(const LocationDescription &amp;Loc, Value *Size, Value *Allocator, std::string Name=&quot;&quot;)</div><div class="ttdoc">Create a runtime call for kmpc_Alloc.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l03751">OMPIRBuilder.cpp:3751</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_aaf9ee38b9973681c1720aaf03af3a069"><div class="ttname"><a href="classllvm_1_1SetVector.html#aaf9ee38b9973681c1720aaf03af3a069">llvm::SetVector::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdoc">Determine if the SetVector is empty or not.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00072">SetVector.h:72</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a50c6490cf353f064946c4e32673ac098"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a50c6490cf353f064946c4e32673ac098">llvm::OpenMPIRBuilder::addAttributes</a></div><div class="ttdeci">void addAttributes(omp::RuntimeFunction FnID, Function &amp;Fn)</div><div class="ttdoc">Add attributes known for FnID to Fn.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00331">OMPIRBuilder.cpp:331</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_accfe1687c35e38741ea982488e7bdfae"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#accfe1687c35e38741ea982488e7bdfae">llvm::OpenMPIRBuilder::loadOffloadInfoMetadata</a></div><div class="ttdeci">void loadOffloadInfoMetadata(Module &amp;M, OffloadEntriesInfoManager &amp;OffloadEntriesInfoManager)</div><div class="ttdoc">Loads all the offload entries information from the host IR metadata.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l04978">OMPIRBuilder.cpp:4978</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615a0794c42b44989f9d9f1454d79ca0dd88"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a0794c42b44989f9d9f1454d79ca0dd88">llvm::AtomicRMWInst::Add</a></div><div class="ttdeci">@ Add</div><div class="ttdoc">*p = old + v</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00734">Instructions.h:734</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7a7dadea7f8d895bea2f79d77bc784b532"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a7dadea7f8d895bea2f79d77bc784b532">llvm::omp::OMPScheduleType::NomergeUnorderedStatic</a></div><div class="ttdeci">@ NomergeUnorderedStatic</div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a13e877ef779ba7a0688081079f4f9b03"><div class="ttname"><a href="classllvm_1_1Type.html#a13e877ef779ba7a0688081079f4f9b03">llvm::Type::getIntegerBitWidth</a></div><div class="ttdeci">unsigned getIntegerBitWidth() const</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00097">DerivedTypes.h:97</a></div></div>
<div class="ttc" id="aclassllvm_1_1OffloadEntriesInfoManager_html_ab9575c71365de4083a7be6ef6572d534acf96797e65a60ff4302eb2bbdbbd8880"><div class="ttname"><a href="classllvm_1_1OffloadEntriesInfoManager.html#ab9575c71365de4083a7be6ef6572d534acf96797e65a60ff4302eb2bbdbbd8880">llvm::OffloadEntriesInfoManager::OMPTargetGlobalVarEntryTo</a></div><div class="ttdeci">@ OMPTargetGlobalVarEntryTo</div><div class="ttdoc">Mark the entry as a to declare target.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l02070">OMPIRBuilder.h:2070</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a188c0836f8c3528401f1c236fd93b977"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">llvm::CallingConv::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdoc">LLVM IR allows to use arbitrary numbers as calling convention identifiers.</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00024">CallingConv.h:24</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_acb593a387130148478f3c30af0d322dfa26a4b44a837bf97b972628509912b4a5"><div class="ttname"><a href="namespacellvm_1_1omp.html#acb593a387130148478f3c30af0d322dfa26a4b44a837bf97b972628509912b4a5">llvm::omp::OMPAtomicCompareOp::MAX</a></div><div class="ttdeci">@ MAX</div></div>
<div class="ttc" id="aErlangGCPrinter_8cpp_html_a74b474c0616ab55c1d9487f11fd31d26"><div class="ttname"><a href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a></div><div class="ttdeci">static GCMetadataPrinterRegistry::Add&lt; ErlangGCPrinter &gt; X(&quot;erlang&quot;, &quot;erlang-compatible garbage collector&quot;)</div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a16d7c5f77008a84ae20bf4a5c41e51f0ae88b4464fe326a51e6e6dfae28dd536d"><div class="ttname"><a href="namespacellvm_1_1omp.html#a16d7c5f77008a84ae20bf4a5c41e51f0ae88b4464fe326a51e6e6dfae28dd536d">llvm::omp::RTLDependInfoFields::Len</a></div><div class="ttdeci">@ Len</div></div>
<div class="ttc" id="aclassllvm_1_1StringMap_html"><div class="ttname"><a href="classllvm_1_1StringMap.html">llvm::StringMap&lt; bool &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallString_html"><div class="ttname"><a href="classllvm_1_1SmallString.html">llvm::SmallString&lt; 128 &gt;</a></div></div>
<div class="ttc" id="aIR_2CFG_8h_html"><div class="ttname"><a href="IR_2CFG_8h.html">CFG.h</a></div></div>
<div class="ttc" id="aLoopInfo_8h_html"><div class="ttname"><a href="LoopInfo_8h.html">LoopInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Twine_html_a4c1c1093a7749409c70838678514cc7c"><div class="ttname"><a href="classllvm_1_1Twine.html#a4c1c1093a7749409c70838678514cc7c">llvm::Twine::str</a></div><div class="ttdeci">std::string str() const</div><div class="ttdoc">Return the twine contents as a std::string.</div><div class="ttdef"><b>Definition:</b> <a href="Twine_8cpp_source.html#l00017">Twine.cpp:17</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1OutlineInfo_html_adc0b48022847ca44b3868d058cb98686"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1OutlineInfo.html#adc0b48022847ca44b3868d058cb98686">llvm::OpenMPIRBuilder::OutlineInfo::EntryBB</a></div><div class="ttdeci">BasicBlock * EntryBB</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01069">OMPIRBuilder.h:1069</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a7477aafbbe989ad35b96fac186d8e9fd"><div class="ttname"><a href="classllvm_1_1Function.html#a7477aafbbe989ad35b96fac186d8e9fd">llvm::Function::getAttributes</a></div><div class="ttdeci">AttributeList getAttributes() const</div><div class="ttdoc">Return the attribute list for this Function.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00313">Function.h:313</a></div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_a07ed0bfaa124c15897944fe3eaa971ab"><div class="ttname"><a href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned long or uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="anamespacellvm_html_acb22fb04083152eee862457e42e8dc31"><div class="ttname"><a href="namespacellvm.html#acb22fb04083152eee862457e42e8dc31">llvm::predecessors</a></div><div class="ttdeci">auto predecessors(const MachineBasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l01266">MachineBasicBlock.h:1266</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7a8d3bdcd26e9de2b98205ae5774042717"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a8d3bdcd26e9de2b98205ae5774042717">llvm::omp::OMPScheduleType::NomergeOrderedGuidedChunked</a></div><div class="ttdeci">@ NomergeOrderedGuidedChunked</div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_ac6d28a9b11139182134a9618028a0d07"><div class="ttname"><a href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">llvm::Type::isIntegerTy</a></div><div class="ttdeci">bool isIntegerTy() const</div><div class="ttdoc">True if this is an instance of IntegerType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00222">Type.h:222</a></div></div>
<div class="ttc" id="aclassllvm_1_1function__ref_html"><div class="ttname"><a href="classllvm_1_1function__ref.html">llvm::function_ref</a></div><div class="ttdoc">An efficient, type-erasing, non-owning reference to a callable.</div><div class="ttdef"><b>Definition:</b> <a href="STLFunctionalExtras_8h_source.html#l00036">STLFunctionalExtras.h:36</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a4c503140c7f851151906d85b515330e9"><div class="ttname"><a href="namespacellvm_1_1omp.html#a4c503140c7f851151906d85b515330e9">llvm::omp::RuntimeFunction</a></div><div class="ttdeci">RuntimeFunction</div><div class="ttdoc">IDs for all omp runtime library (RTL) functions.</div><div class="ttdef"><b>Definition:</b> <a href="OMPConstants_8h_source.html#l00046">OMPConstants.h:46</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallString_html_ac22cf1a1c08b7ccaefc51508536312a4"><div class="ttname"><a href="classllvm_1_1SmallString.html#ac22cf1a1c08b7ccaefc51508536312a4">llvm::SmallString::append</a></div><div class="ttdeci">void append(StringRef RHS)</div><div class="ttdoc">Append from a StringRef.</div><div class="ttdef"><b>Definition:</b> <a href="SmallString_8h_source.html#l00068">SmallString.h:68</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9bccbe67aaab722783ca4e7c504aaaa7"><div class="ttname"><a href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7">llvm::AtomicOrdering</a></div><div class="ttdeci">AtomicOrdering</div><div class="ttdoc">Atomic ordering for LLVM's memory model.</div><div class="ttdef"><b>Definition:</b> <a href="AtomicOrdering_8h_source.html#l00056">AtomicOrdering.h:56</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a0b0ed7f600549e4239bf10b5b85de66c"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a0b0ed7f600549e4239bf10b5b85de66c">llvm::OpenMPIRBuilder::createTaskyield</a></div><div class="ttdeci">void createTaskyield(const LocationDescription &amp;Loc)</div><div class="ttdoc">Generator for '#omp taskyield'.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l01276">OMPIRBuilder.cpp:1276</a></div></div>
<div class="ttc" id="aclassllvm_1_1OffloadEntriesInfoManager_1_1OffloadEntryInfoTargetRegion_html"><div class="ttname"><a href="classllvm_1_1OffloadEntriesInfoManager_1_1OffloadEntryInfoTargetRegion.html">llvm::OffloadEntriesInfoManager::OffloadEntryInfoTargetRegion</a></div><div class="ttdoc">Target region entries info.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l02014">OMPIRBuilder.h:2014</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615aa53854e09143f57d2ff2ad6ac89dc55d"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615aa53854e09143f57d2ff2ad6ac89dc55d">llvm::AtomicRMWInst::UMin</a></div><div class="ttdeci">@ UMin</div><div class="ttdoc">*p = old &lt;unsigned v ? old : v</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00752">Instructions.h:752</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6befe133f42d6a8e07ba98372d7f9c60"><div class="ttname"><a href="namespacellvm.html#a6befe133f42d6a8e07ba98372d7f9c60">llvm::CloneBasicBlock</a></div><div class="ttdeci">BasicBlock * CloneBasicBlock(const BasicBlock *BB, ValueToValueMapTy &amp;VMap, const Twine &amp;NameSuffix=&quot;&quot;, Function *F=nullptr, ClonedCodeInfo *CodeInfo=nullptr, DebugInfoFinder *DIFinder=nullptr)</div><div class="ttdoc">Return a copy of the specified basic block, but without embedding the block into a particular functio...</div><div class="ttdef"><b>Definition:</b> <a href="CloneFunction_8cpp_source.html#l00042">CloneFunction.cpp:42</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt&lt; bool &gt;</a></div></div>
<div class="ttc" id="anamespacellvm_html_aaee5189b9c4db9ad666a88abaf1ee0c4ad7778d0c64b6ba21494c97f77a66885a"><div class="ttname"><a href="namespacellvm.html#aaee5189b9c4db9ad666a88abaf1ee0c4ad7778d0c64b6ba21494c97f77a66885a">llvm::ClrHandlerType::Filter</a></div><div class="ttdeci">@ Filter</div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_ad56f71598b251a0f66e590c94d01c67b"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#ad56f71598b251a0f66e590c94d01c67b">llvm::OpenMPIRBuilder::createOffloadMaptypes</a></div><div class="ttdeci">GlobalVariable * createOffloadMaptypes(SmallVectorImpl&lt; uint64_t &gt; &amp;Mappings, std::string VarName)</div><div class="ttdoc">Create the global variable holding the offload mappings information.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l04089">OMPIRBuilder.cpp:4089</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue_html_a8405ac1a632edb9252a0d46334f45008"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html#a8405ac1a632edb9252a0d46334f45008">llvm::OpenMPIRBuilder::AtomicOpValue::IsVolatile</a></div><div class="ttdeci">bool IsVolatile</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01719">OMPIRBuilder.h:1719</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a5ffd15d898e32d3abd76f5d961781dd2"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a5ffd15d898e32d3abd76f5d961781dd2">llvm::OpenMPIRBuilder::createSections</a></div><div class="ttdeci">InsertPointTy createSections(const LocationDescription &amp;Loc, InsertPointTy AllocaIP, ArrayRef&lt; StorableBodyGenCallbackTy &gt; SectionCBs, PrivatizeCallbackTy PrivCB, FinalizeCallbackTy FiniCB, bool IsCancellable, bool IsNowait)</div><div class="ttdoc">Generator for '#omp sections'.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l01579">OMPIRBuilder.cpp:1579</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1MapperAllocas_html_a9d27bf73f53ec62c72ffd3137f47efde"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1MapperAllocas.html#a9d27bf73f53ec62c72ffd3137f47efde">llvm::OpenMPIRBuilder::MapperAllocas::ArgsBase</a></div><div class="ttdeci">AllocaInst * ArgsBase</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01108">OMPIRBuilder.h:1108</a></div></div>
<div class="ttc" id="aclassllvm_1_1StoreInst_html"><div class="ttname"><a href="classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdoc">An instruction for storing to memory.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00301">Instructions.h:301</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html"><div class="ttname"><a href="classllvm_1_1GlobalValue.html">llvm::GlobalValue</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00044">GlobalValue.h:44</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a38345e93229faed92e719f1793807bb1"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a38345e93229faed92e719f1793807bb1">llvm::OpenMPIRBuilder::createOMPInteropDestroy</a></div><div class="ttdeci">CallInst * createOMPInteropDestroy(const LocationDescription &amp;Loc, Value *InteropVar, Value *Device, Value *NumDependences, Value *DependenceAddress, bool HaveNowaitClause)</div><div class="ttdoc">Create a runtime call for __tgt_interop_destroy.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l03812">OMPIRBuilder.cpp:3812</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html"><div class="ttname"><a href="classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">This is an important base class in LLVM.</div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a6e5d2e18c81baaeec7dadc81a0dea993"><div class="ttname"><a href="classllvm_1_1Instruction.html#a6e5d2e18c81baaeec7dadc81a0dea993">llvm::Instruction::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned Idx) const LLVM_READONLY</div><div class="ttdoc">Return the specified successor. This instruction must be a terminator.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00835">Instruction.cpp:835</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a94b83966fb2170f412ab758102e46f84"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a94b83966fb2170f412ab758102e46f84">llvm::OpenMPIRBuilder::registerTargetRegionFunction</a></div><div class="ttdeci">Constant * registerTargetRegionFunction(OffloadEntriesInfoManager &amp;InfoManager, TargetRegionEntryInfo &amp;EntryInfo, Function *OutlinedFunction, StringRef EntryFnName, StringRef EntryFnIDName, int32_t NumTeams, int32_t NumThreads)</div><div class="ttdoc">Registers the given function and sets up the attribtues of the function Returns the FunctionID.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l04027">OMPIRBuilder.cpp:4027</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1ReductionInfo_html_a63498704b583a96137c70ed7172f1ec3"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1ReductionInfo.html#a63498704b583a96137c70ed7172f1ec3">llvm::OpenMPIRBuilder::ReductionInfo::PrivateVariable</a></div><div class="ttdeci">Value * PrivateVariable</div><div class="ttdoc">Thread-private partial reduction variable.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l00829">OMPIRBuilder.h:829</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a3d885a4fcd5c580b0e3aeb37306146a5"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a3d885a4fcd5c580b0e3aeb37306146a5">llvm::OpenMPIRBuilder::createOrderedThreadsSimd</a></div><div class="ttdeci">InsertPointTy createOrderedThreadsSimd(const LocationDescription &amp;Loc, BodyGenCallbackTy BodyGenCB, FinalizeCallbackTy FiniCB, bool IsThreads)</div><div class="ttdoc">Generator for '#omp ordered [threads | simd]'.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l03559">OMPIRBuilder.cpp:3559</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ae6b978645b8ac72d1a35e1298ffdd4f0"><div class="ttname"><a href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">SymbolTableList&lt; Instruction &gt;::iterator eraseFromParent()</div><div class="ttdoc">This method unlinks 'this' from the containing basic block and deletes it.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00082">Instruction.cpp:82</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_aaea88376352c42347dceccdd5ab1c20c"><div class="ttname"><a href="classllvm_1_1Function.html#aaea88376352c42347dceccdd5ab1c20c">llvm::Function::getReturnType</a></div><div class="ttdeci">Type * getReturnType() const</div><div class="ttdoc">Returns the type of the ret val.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00179">Function.h:179</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615a5db6ca0c3e18acd87290f22ccb2ce564"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a5db6ca0c3e18acd87290f22ccb2ce564">llvm::AtomicRMWInst::Sub</a></div><div class="ttdeci">@ Sub</div><div class="ttdoc">*p = old - v</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00736">Instructions.h:736</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7a0caa7abe8bdddedc4178cd73a4ac40b6"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a0caa7abe8bdddedc4178cd73a4ac40b6">llvm::omp::OMPScheduleType::NomergeOrderedAuto</a></div><div class="ttdeci">@ NomergeOrderedAuto</div></div>
<div class="ttc" id="aclassllvm_1_1ScalarEvolutionAnalysis_html_acbc87d909d53e5f43fde82950e15b59d"><div class="ttname"><a href="classllvm_1_1ScalarEvolutionAnalysis.html#acbc87d909d53e5f43fde82950e15b59d">llvm::ScalarEvolutionAnalysis::run</a></div><div class="ttdeci">ScalarEvolution run(Function &amp;F, FunctionAnalysisManager &amp;AM)</div><div class="ttdef"><b>Definition:</b> <a href="ScalarEvolution_8cpp_source.html#l14316">ScalarEvolution.cpp:14316</a></div></div>
<div class="ttc" id="aclassllvm_1_1AssumptionAnalysis_html_aeb8f2cc893c02d3d5a926b69bab89185"><div class="ttname"><a href="classllvm_1_1AssumptionAnalysis.html#aeb8f2cc893c02d3d5a926b69bab89185">llvm::AssumptionAnalysis::run</a></div><div class="ttdeci">AssumptionCache run(Function &amp;F, FunctionAnalysisManager &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="AssumptionCache_8cpp_source.html#l00265">AssumptionCache.cpp:265</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a9bf617fd3367180fb96cebccfaae8dfa"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a></div><div class="ttdeci">static GCRegistry::Add&lt; StatepointGC &gt; D(&quot;statepoint-example&quot;, &quot;an example strategy for statepoint&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a9e1fc23a17e97d2d1732e753ae9251ac"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">llvm::GlobalValue::getParent</a></div><div class="ttdeci">Module * getParent()</div><div class="ttdoc">Get the module that this global value is contained inside of...</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00652">GlobalValue.h:652</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARM__MB_html_ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2"><div class="ttname"><a href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">llvm::ARM_MB::ST</a></div><div class="ttdeci">@ ST</div><div class="ttdef"><b>Definition:</b> <a href="MCTargetDesc_2ARMBaseInfo_8h_source.html#l00073">ARMBaseInfo.h:73</a></div></div>
<div class="ttc" id="aELFObjHandler_8cpp_html_a9df82a8be2f17e80535a8937bf23e022"><div class="ttname"><a href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a></div><div class="ttdeci">uint64_t Addr</div><div class="ttdef"><b>Definition:</b> <a href="ELFObjHandler_8cpp_source.html#l00079">ELFObjHandler.cpp:79</a></div></div>
<div class="ttc" id="aclassllvm_1_1AssumptionAnalysis_html"><div class="ttname"><a href="classllvm_1_1AssumptionAnalysis.html">llvm::AssumptionAnalysis</a></div><div class="ttdoc">A function analysis which provides an AssumptionCache.</div><div class="ttdef"><b>Definition:</b> <a href="AssumptionCache_8h_source.html#l00173">AssumptionCache.h:173</a></div></div>
<div class="ttc" id="aclassllvm_1_1OffloadEntriesInfoManager_1_1OffloadEntryInfo_html_a11911aae9559c8e1eefa6b48fe7bd384a891c1d39adfb3a1133491c4804b2372a"><div class="ttname"><a href="classllvm_1_1OffloadEntriesInfoManager_1_1OffloadEntryInfo.html#a11911aae9559c8e1eefa6b48fe7bd384a891c1d39adfb3a1133491c4804b2372a">llvm::OffloadEntriesInfoManager::OffloadEntryInfo::OffloadingEntryInfoDeviceGlobalVar</a></div><div class="ttdeci">@ OffloadingEntryInfoDeviceGlobalVar</div><div class="ttdoc">Entry is a declare target variable.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01953">OMPIRBuilder.h:1953</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7a0d889968e05ad491297781c12f044670"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a0d889968e05ad491297781c12f044670">llvm::omp::OMPScheduleType::OrderedGuidedChunked</a></div><div class="ttdeci">@ OrderedGuidedChunked</div></div>
<div class="ttc" id="aclassllvm_1_1ConstantPointerNull_html_a96f5c85e4022e369266541b2db3fda69"><div class="ttname"><a href="classllvm_1_1ConstantPointerNull.html#a96f5c85e4022e369266541b2db3fda69">llvm::ConstantPointerNull::get</a></div><div class="ttdeci">static ConstantPointerNull * get(PointerType *T)</div><div class="ttdoc">Static factory methods - Return objects of the specified value.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01707">Constants.cpp:1707</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_a089cccb6f231efee72abc76d0f9c695f"><div class="ttname"><a href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">llvm::PHINode::addIncoming</a></div><div class="ttdeci">void addIncoming(Value *V, BasicBlock *BB)</div><div class="ttdoc">Add an incoming value to the end of the PHI list.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02854">Instructions.h:2854</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_aedfa75f0c85c4aa85b257f066fbea57ca8d13a9bcecfac72febceb1103afa048f"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca8d13a9bcecfac72febceb1103afa048f">llvm::GlobalValue::WeakAnyLinkage</a></div><div class="ttdeci">@ WeakAnyLinkage</div><div class="ttdoc">Keep one copy of named function when linking (weak)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00052">GlobalValue.h:52</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_ad3a99906764c35b2694ae90fa57744a5"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">move</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional move</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00546">README.txt:546</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLVMContext_html"><div class="ttname"><a href="classllvm_1_1LLVMContext.html">llvm::LLVMContext</a></div><div class="ttdoc">This is an important class for using LLVM in a threaded context.</div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00067">LLVMContext.h:67</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_a38df51256d4b415b6a817b5e1c6d4d36"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">llvm::BranchInst::Create</a></div><div class="ttdeci">static BranchInst * Create(BasicBlock *IfTrue, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03195">Instructions.h:3195</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7a5690795030711d5682365ed61cbe81b6"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a5690795030711d5682365ed61cbe81b6">llvm::omp::OMPScheduleType::MonotonicityMask</a></div><div class="ttdeci">@ MonotonicityMask</div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1UnrollingPreferences_html"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html">llvm::TargetTransformInfo::UnrollingPreferences</a></div><div class="ttdoc">Parameters that control the generic loop unrolling transformation.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00440">TargetTransformInfo.h:440</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfoBase_html_a7a7c8e0e4f836c13c015b62e18f386bd"><div class="ttname"><a href="classllvm_1_1LoopInfoBase.html#a7a7c8e0e4f836c13c015b62e18f386bd">llvm::LoopInfoBase::getLoopFor</a></div><div class="ttdeci">LoopT * getLoopFor(const BlockT *BB) const</div><div class="ttdoc">Return the inner most loop that BB lives in.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00992">LoopInfo.h:992</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9bccbe67aaab722783ca4e7c504aaaa7a288d468c5e0969f26a310773eda65603"><div class="ttname"><a href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7a288d468c5e0969f26a310773eda65603">llvm::AtomicOrdering::Unordered</a></div><div class="ttdeci">@ Unordered</div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_ac0057ec814345445fc0c55e9fe928e35"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#ac0057ec814345445fc0c55e9fe928e35">llvm::OpenMPIRBuilder::emitCancelationCheckImpl</a></div><div class="ttdeci">void emitCancelationCheckImpl(Value *CancelFlag, omp::Directive CanceledDirective, FinalizeCallbackTy ExitCB={})</div><div class="ttdoc">Generate control flow and cleanup for cancellation.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00842">OMPIRBuilder.cpp:842</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringMap_html_aa6528965c64b379c2cb311599babdd66"><div class="ttname"><a href="classllvm_1_1StringMap.html#aa6528965c64b379c2cb311599babdd66">llvm::StringMap::lookup</a></div><div class="ttdeci">ValueTy lookup(StringRef Key) const</div><div class="ttdoc">lookup - Return the entry for the specified key, or a default constructed value if no such entry exis...</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2StringMap_8h_source.html#l00233">StringMap.h:233</a></div></div>
<div class="ttc" id="aCloning_8h_html"><div class="ttname"><a href="Cloning_8h.html">Cloning.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a1f8ea3a2101b10ccd74e9840406abcf7"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a1f8ea3a2101b10ccd74e9840406abcf7">llvm::OpenMPIRBuilder::createCanonicalLoop</a></div><div class="ttdeci">CanonicalLoopInfo * createCanonicalLoop(const LocationDescription &amp;Loc, LoopBodyGenCallbackTy BodyGenCB, Value *TripCount, const Twine &amp;Name=&quot;loop&quot;)</div><div class="ttdoc">Generator for the control flow structure of an OpenMP canonical loop.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l02000">OMPIRBuilder.cpp:2000</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a9739fda41ce7be4d43bb5b45bbd0e460"><div class="ttname"><a href="classllvm_1_1Type.html#a9739fda41ce7be4d43bb5b45bbd0e460">llvm::Type::getInt64PtrTy</a></div><div class="ttdeci">static PointerType * getInt64PtrTy(LLVMContext &amp;C, unsigned AS=0)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00305">Type.cpp:305</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615a39edb6e51c1ad37244e8b32a2af4077d"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a39edb6e51c1ad37244e8b32a2af4077d">llvm::AtomicRMWInst::Min</a></div><div class="ttdeci">@ Min</div><div class="ttdoc">*p = old &lt;signed v ? old : v</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00748">Instructions.h:748</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00445">CommandLine.h:445</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8154638df88e4eaa568b67b23d463dac"><div class="ttname"><a href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a></div><div class="ttdeci">iterator_range&lt; early_inc_iterator_impl&lt; detail::IterOfRange&lt; RangeT &gt; &gt; &gt; make_early_inc_range(RangeT &amp;&amp;Range)</div><div class="ttdoc">Make a range that does early increment to allow mutation of the underlying range without disrupting i...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00721">STLExtras.h:721</a></div></div>
<div class="ttc" id="anamespacellvm_html_aaf3f6dd34ce3968d323a20d3a22e4545"><div class="ttname"><a href="namespacellvm.html#aaf3f6dd34ce3968d323a20d3a22e4545">llvm::computeUnrollCount</a></div><div class="ttdeci">bool computeUnrollCount(Loop *L, const TargetTransformInfo &amp;TTI, DominatorTree &amp;DT, LoopInfo *LI, AssumptionCache *AC, ScalarEvolution &amp;SE, const SmallPtrSetImpl&lt; const Value * &gt; &amp;EphValues, OptimizationRemarkEmitter *ORE, unsigned TripCount, unsigned MaxTripCount, bool MaxOrZero, unsigned TripMultiple, unsigned LoopSize, TargetTransformInfo::UnrollingPreferences &amp;UP, TargetTransformInfo::PeelingPreferences &amp;PP, bool &amp;UseUpperBound)</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnrollPass_8cpp_source.html#l00889">LoopUnrollPass.cpp:889</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a02cae9681b22a06e7738a4c1f3de233e"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a02cae9681b22a06e7738a4c1f3de233e">llvm::OpenMPIRBuilder::getOrCreateIdent</a></div><div class="ttdeci">Constant * getOrCreateIdent(Constant *SrcLocStr, uint32_t SrcLocStrSize, omp::IdentFlag Flags=omp::IdentFlag(0), unsigned Reserve2Flags=0)</div><div class="ttdoc">Return an ident_t* encoding the source location SrcLocStr and Flags.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00554">OMPIRBuilder.cpp:554</a></div></div>
<div class="ttc" id="aclassllvm_1_1PointerType_html"><div class="ttname"><a href="classllvm_1_1PointerType.html">llvm::PointerType</a></div><div class="ttdoc">Class to represent pointers.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00632">DerivedTypes.h:632</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615a5954f59053121b87ebe0c5fe79942c6e"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a5954f59053121b87ebe0c5fe79942c6e">llvm::AtomicRMWInst::Or</a></div><div class="ttdeci">@ Or</div><div class="ttdoc">*p = old | v</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00742">Instructions.h:742</a></div></div>
<div class="ttc" id="aOMPIRBuilder_8cpp_html_a545cc7eb4f94d0957ba9960a69b10a90"><div class="ttname"><a href="OMPIRBuilder_8cpp.html#a545cc7eb4f94d0957ba9960a69b10a90">addSimdMetadata</a></div><div class="ttdeci">static void addSimdMetadata(BasicBlock *Block, MDNode *AccessGroup, LoopInfo &amp;LI)</div><div class="ttdoc">Attach llvm.access.group metadata to the memref instructions of Block.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l02968">OMPIRBuilder.cpp:2968</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a687973de03d041e04b50a76d19d4fd36"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a687973de03d041e04b50a76d19d4fd36">llvm::GlobalValue::setLinkage</a></div><div class="ttdeci">void setLinkage(LinkageTypes LT)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00532">GlobalValue.h:532</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_aa453737596c25281abfa783850b1e15c"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#aa453737596c25281abfa783850b1e15c">llvm::OpenMPIRBuilder::createParallel</a></div><div class="ttdeci">IRBuilder ::InsertPoint createParallel(const LocationDescription &amp;Loc, InsertPointTy AllocaIP, BodyGenCallbackTy BodyGenCB, PrivatizeCallbackTy PrivCB, FinalizeCallbackTy FiniCB, Value *IfCondition, Value *NumThreads, omp::ProcBindKind ProcBind, bool IsCancellable)</div><div class="ttdoc">Generator for '#omp parallel'.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00881">OMPIRBuilder.cpp:881</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1OutlineInfo_html_aed0779b309d9a705e9b78adacc839875"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1OutlineInfo.html#aed0779b309d9a705e9b78adacc839875">llvm::OpenMPIRBuilder::OutlineInfo::OuterAllocaBB</a></div><div class="ttdeci">BasicBlock * OuterAllocaBB</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01069">OMPIRBuilder.h:1069</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1TargetDataRTArgs_html_a44027c71c6a6a9a4111594eeb16da30e"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1TargetDataRTArgs.html#a44027c71c6a6a9a4111594eeb16da30e">llvm::OpenMPIRBuilder::TargetDataRTArgs::PointersArray</a></div><div class="ttdeci">Value * PointersArray</div><div class="ttdoc">The array of section pointers passed to the runtime library.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01138">OMPIRBuilder.h:1138</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDString_html_affbb7e2e9ad8d18114816f2443d672b9"><div class="ttname"><a href="classllvm_1_1MDString.html#affbb7e2e9ad8d18114816f2443d672b9">llvm::MDString::get</a></div><div class="ttdeci">static MDString * get(LLVMContext &amp;Context, StringRef Str)</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l00497">Metadata.cpp:497</a></div></div>
<div class="ttc" id="aclassllvm_1_1Triple_html_a92da6cf2a6b4ce43d5c5e4ef110511aa"><div class="ttname"><a href="classllvm_1_1Triple.html#a92da6cf2a6b4ce43d5c5e4ef110511aa">llvm::Triple::isAMDGCN</a></div><div class="ttdeci">bool isAMDGCN() const</div><div class="ttdoc">Tests whether the target is AMDGCN.</div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00767">Triple.h:767</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_ac9bf6c06f60a6c8551e90614342fc6ab"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#ac9bf6c06f60a6c8551e90614342fc6ab">llvm::OpenMPIRBuilder::createTaskgroup</a></div><div class="ttdeci">InsertPointTy createTaskgroup(const LocationDescription &amp;Loc, InsertPointTy AllocaIP, BodyGenCallbackTy BodyGenCB)</div><div class="ttdoc">Generator for the taskgroup construct.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l01551">OMPIRBuilder.cpp:1551</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a6adbed68009f582caa84cdfd2adf36f1"><div class="ttname"><a href="classllvm_1_1Function.html#a6adbed68009f582caa84cdfd2adf36f1">llvm::Function::Create</a></div><div class="ttdeci">static Function * Create(FunctionType *Ty, LinkageTypes Linkage, unsigned AddrSpace, const Twine &amp;N=&quot;&quot;, Module *M=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00136">Function.h:136</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a784adc2347b72f745ff1239aef3a3c26"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a784adc2347b72f745ff1239aef3a3c26">llvm::OpenMPIRBuilder::finalize</a></div><div class="ttdeci">void finalize(Function *Fn=nullptr)</div><div class="ttdoc">Finalize the underlying module, e.g., by outlining regions.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00450">OMPIRBuilder.cpp:450</a></div></div>
<div class="ttc" id="aIRBuilder_8h_html"><div class="ttname"><a href="IRBuilder_8h.html">IRBuilder.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7afd0872ecd4e82f3caa0ea44584a05144"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7afd0872ecd4e82f3caa0ea44584a05144">llvm::omp::OMPScheduleType::BaseRuntime</a></div><div class="ttdeci">@ BaseRuntime</div></div>
<div class="ttc" id="aclassllvm_1_1Target_html_a4b2d4f53fc8d49464353f3c8d4062790"><div class="ttname"><a href="classllvm_1_1Target.html#a4b2d4f53fc8d49464353f3c8d4062790">llvm::Target::createTargetMachine</a></div><div class="ttdeci">TargetMachine * createTargetMachine(StringRef TT, StringRef CPU, StringRef Features, const TargetOptions &amp;Options, std::optional&lt; Reloc::Model &gt; RM, std::optional&lt; CodeModel::Model &gt; CM=std::nullopt, CodeGenOpt::Level OL=CodeGenOpt::Default, bool JIT=false) const</div><div class="ttdoc">createTargetMachine - Create a target specific machine implementation for the specified Triple.</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegistry_8h_source.html#l00481">TargetRegistry.h:481</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7a5ced2def0c3f656428eb2144b4aaf6fb"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a5ced2def0c3f656428eb2144b4aaf6fb">llvm::omp::OMPScheduleType::UnorderedStatic</a></div><div class="ttdeci">@ UnorderedStatic</div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a5b166ae228ebbfdb96736d6022f3feeda27a385675142c462571165c839e41aa0"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feeda27a385675142c462571165c839e41aa0">llvm::CallingConv::AMDGPU_KERNEL</a></div><div class="ttdeci">@ AMDGPU_KERNEL</div><div class="ttdoc">Used for AMDGPU code object kernels.</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00197">CallingConv.h:197</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDBuilder_html_a1d51e11adfffd05afe252d3398f50d4e"><div class="ttname"><a href="classllvm_1_1MDBuilder.html#a1d51e11adfffd05afe252d3398f50d4e">llvm::MDBuilder::createCallbackEncoding</a></div><div class="ttdeci">MDNode * createCallbackEncoding(unsigned CalleeArgNo, ArrayRef&lt; int &gt; Arguments, bool VarArgsArePassed)</div><div class="ttdoc">Return metadata describing a callback (see llvm::AbstractCallSite).</div><div class="ttdef"><b>Definition:</b> <a href="MDBuilder_8cpp_source.html#l00107">MDBuilder.cpp:107</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7a6adf97f83acf6453d4a6a4b1070f3754"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a6adf97f83acf6453d4a6a4b1070f3754">llvm::omp::OMPScheduleType::None</a></div><div class="ttdeci">@ None</div></div>
<div class="ttc" id="aTargetLibraryInfo_8cpp_html_aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053"><div class="ttname"><a href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a></div><div class="ttdeci">@ Ptr</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8cpp_source.html#l00062">TargetLibraryInfo.cpp:62</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1LocationDescription_html_ac6a58d4f9cf1978ee50af30bdb248d73"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#ac6a58d4f9cf1978ee50af30bdb248d73">llvm::OpenMPIRBuilder::LocationDescription::DL</a></div><div class="ttdeci">DebugLoc DL</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l00312">OMPIRBuilder.h:312</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a4c01c26b7c8b4373f3cc9754e7dcd583"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a4c01c26b7c8b4373f3cc9754e7dcd583">llvm::OpenMPIRBuilder::emitTargetKernel</a></div><div class="ttdeci">InsertPointTy emitTargetKernel(const LocationDescription &amp;Loc, Value *&amp;Return, Value *Ident, Value *DeviceID, Value *NumTeams, Value *NumThreads, Value *HostPtr, ArrayRef&lt; Value * &gt; KernelArgs)</div><div class="ttdoc">Generate a target region entry call.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00815">OMPIRBuilder.cpp:815</a></div></div>
<div class="ttc" id="aOMPIRBuilder_8cpp_html_a756b28f370cd5a39bc0ee3e5333b9c9b"><div class="ttname"><a href="OMPIRBuilder_8cpp.html#a756b28f370cd5a39bc0ee3e5333b9c9b">isConflictIP</a></div><div class="ttdeci">static bool isConflictIP(IRBuilder&lt;&gt;::InsertPoint IP1, IRBuilder&lt;&gt;::InsertPoint IP2)</div><div class="ttdoc">Return whether IP1 and IP2 are ambiguous, i.e.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00069">OMPIRBuilder.cpp:69</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_ae8eaa0b4eeac52a2b2282cb1bfd981ae"><div class="ttname"><a href="classllvm_1_1Type.html#ae8eaa0b4eeac52a2b2282cb1bfd981ae">llvm::Type::isVoidTy</a></div><div class="ttdeci">bool isVoidTy() const</div><div class="ttdoc">Return true if this is 'void'.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00140">Type.h:140</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a4ca0068cb6a50615c74ecdb8f23839e0"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a4ca0068cb6a50615c74ecdb8f23839e0">llvm::OpenMPIRBuilder::unrollLoopHeuristic</a></div><div class="ttdeci">void unrollLoopHeuristic(DebugLoc DL, CanonicalLoopInfo *Loop)</div><div class="ttdoc">Fully or partially unroll a loop.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l02987">OMPIRBuilder.cpp:2987</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstructionCost_html_aefaba3912f52186ea896035ea0f5b00c"><div class="ttname"><a href="classllvm_1_1InstructionCost.html#aefaba3912f52186ea896035ea0f5b00c">llvm::InstructionCost::getValue</a></div><div class="ttdeci">std::optional&lt; CostType &gt; getValue() const</div><div class="ttdoc">This function is intended to be used as sparingly as possible, since the class provides the full rang...</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCost_8h_source.html#l00087">InstructionCost.h:87</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7ae046186587a5833e23d9270c35af85b1"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7ae046186587a5833e23d9270c35af85b1">llvm::omp::OMPScheduleType::UnorderedTrapezoidal</a></div><div class="ttdeci">@ UnorderedTrapezoidal</div></div>
<div class="ttc" id="aclassllvm_1_1ArrayType_html_adf411edc4f135b570ab218079474ce77"><div class="ttname"><a href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">llvm::ArrayType::get</a></div><div class="ttdeci">static ArrayType * get(Type *ElementType, uint64_t NumElements)</div><div class="ttdoc">This static method is the primary way to construct an ArrayType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00640">Type.cpp:640</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a7a0ce50dfb1a164ee67119899992c75b"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a7a0ce50dfb1a164ee67119899992c75b">llvm::OpenMPIRBuilder::getOrCreateRuntimeFunctionPtr</a></div><div class="ttdeci">Function * getOrCreateRuntimeFunctionPtr(omp::RuntimeFunction FnID)</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00441">OMPIRBuilder.cpp:441</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html"><div class="ttname"><a href="classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">A Module instance is used to store all the information related to an LLVM module.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00065">Module.h:65</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a9776896fee5db5da9e39fd96819e360a"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a9776896fee5db5da9e39fd96819e360a">llvm::OpenMPIRBuilder::createMaster</a></div><div class="ttdeci">InsertPointTy createMaster(const LocationDescription &amp;Loc, BodyGenCallbackTy BodyGenCB, FinalizeCallbackTy FiniCB)</div><div class="ttdoc">Generator for '#omp master'.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l01884">OMPIRBuilder.cpp:1884</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html"><div class="ttname"><a href="classllvm_1_1MDNode.html">llvm::MDNode</a></div><div class="ttdoc">Metadata node.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00943">Metadata.h:943</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7a00614ac33e4c92484ae08314d48cf8b8"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a00614ac33e4c92484ae08314d48cf8b8">llvm::omp::OMPScheduleType::ModifierOrdered</a></div><div class="ttdeci">@ ModifierOrdered</div></div>
<div class="ttc" id="aVPlanSLP_8cpp_html_af04704e906a9654777e92a4612c58c13"><div class="ttname"><a href="VPlanSLP_8cpp.html#af04704e906a9654777e92a4612c58c13">getOpcode</a></div><div class="ttdeci">static std::optional&lt; unsigned &gt; getOpcode(ArrayRef&lt; VPValue * &gt; Values)</div><div class="ttdoc">Returns the opcode of Values or ~0 if they do not all agree.</div><div class="ttdef"><b>Definition:</b> <a href="VPlanSLP_8cpp_source.html#l00191">VPlanSLP.cpp:191</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_afc2cc623eda981e1b3fbb61a44e80ef8"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#afc2cc623eda981e1b3fbb61a44e80ef8">llvm::OpenMPIRBuilder::createFlush</a></div><div class="ttdeci">void createFlush(const LocationDescription &amp;Loc)</div><div class="ttdoc">Generator for '#omp flush'.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l01239">OMPIRBuilder.cpp:1239</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_ac0f11b96f81b2769dd23d028e3189075"><div class="ttname"><a href="classllvm_1_1CallBase.html#ac0f11b96f81b2769dd23d028e3189075">llvm::CallBase::arg_end</a></div><div class="ttdeci">User::op_iterator arg_end()</div><div class="ttdoc">Return the iterator pointing to the end of the argument list.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01332">InstrTypes.h:1332</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a488c861f8a68e5f78ceca8b57acd8be5"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a488c861f8a68e5f78ceca8b57acd8be5">llvm::OpenMPIRBuilder::createPlatformSpecificName</a></div><div class="ttdeci">std::string createPlatformSpecificName(ArrayRef&lt; StringRef &gt; Parts) const</div><div class="ttdoc">Get the create a name using the platform specific separators.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l04055">OMPIRBuilder.cpp:4055</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeAnalysis_html_a4aa821b3dea8d981f76a77e5c099e3b5"><div class="ttname"><a href="classllvm_1_1DominatorTreeAnalysis.html#a4aa821b3dea8d981f76a77e5c099e3b5">llvm::DominatorTreeAnalysis::run</a></div><div class="ttdeci">DominatorTree run(Function &amp;F, FunctionAnalysisManager &amp;)</div><div class="ttdoc">Run the analysis pass over a function and produce a dominator tree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8cpp_source.html#l00385">Dominators.cpp:385</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a1f475b0df44ebd7169e720fa1bf9169e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">llvm::SmallPtrSetImpl::count</a></div><div class="ttdeci">size_type count(ConstPtrType Ptr) const</div><div class="ttdoc">count - Return 1 if the specified pointer is in the set, 0 otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00383">SmallPtrSet.h:383</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a16be569c794ac815f294b1f651587e48"><div class="ttname"><a href="classllvm_1_1Function.html#a16be569c794ac815f294b1f651587e48">llvm::Function::getFunction</a></div><div class="ttdeci">const Function &amp; getFunction() const</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00134">Function.h:134</a></div></div>
<div class="ttc" id="aAssumeBundleBuilder_8cpp_html_afb136e0532bcaed86521b462e6538d62"><div class="ttname"><a href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a></div><div class="ttdeci">assume Assume Builder</div><div class="ttdef"><b>Definition:</b> <a href="AssumeBundleBuilder_8cpp_source.html#l00651">AssumeBundleBuilder.cpp:651</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1OutlineInfo_html"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1OutlineInfo.html">llvm::OpenMPIRBuilder::OutlineInfo</a></div><div class="ttdoc">Helper that contains information about regions we need to outline during finalization.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01066">OMPIRBuilder.h:1066</a></div></div>
<div class="ttc" id="aclassllvm_1_1CanonicalLoopInfo_html"><div class="ttname"><a href="classllvm_1_1CanonicalLoopInfo.html">llvm::CanonicalLoopInfo</a></div><div class="ttdoc">Class to represented the control flow structure of an OpenMP canonical loop.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l02253">OMPIRBuilder.h:2253</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html"><div class="ttname"><a href="classllvm_1_1APInt.html">llvm::APInt</a></div><div class="ttdoc">Class for arbitrary precision integers.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00075">APInt.h:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_a5fa9b8e1842b354f64c1ba6be0a4a17f"><div class="ttname"><a href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">llvm::User::setOperand</a></div><div class="ttdeci">void setOperand(unsigned i, Value *Val)</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00174">User.h:174</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7ab4930c214ad4ac5c3d1c75d267eb38a4"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7ab4930c214ad4ac5c3d1c75d267eb38a4">llvm::omp::OMPScheduleType::OrderedDynamicChunked</a></div><div class="ttdeci">@ OrderedDynamicChunked</div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7af9fd0011f843a54b100f1410a42c525a"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7af9fd0011f843a54b100f1410a42c525a">llvm::omp::OMPScheduleType::NomergeUnorderedDynamicChunked</a></div><div class="ttdeci">@ NomergeUnorderedDynamicChunked</div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">llvm::CmpInst::ICMP_SLT</a></div><div class="ttdeci">@ ICMP_SLT</div><div class="ttdoc">signed less than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00747">InstrTypes.h:747</a></div></div>
<div class="ttc" id="aREADME__P9_8txt_html_a42a82adf8d40243d6a0a28972c9f7df1"><div class="ttname"><a href="README__P9_8txt.html#a42a82adf8d40243d6a0a28972c9f7df1">Compare</a></div><div class="ttdeci">QP Compare Ordered outs ins xscmpudp No builtin are required Or llvm fcmp order unorder compare DP QP Compare builtin are required DP Compare</div><div class="ttdef"><b>Definition:</b> <a href="README__P9_8txt_source.html#l00309">README_P9.txt:309</a></div></div>
<div class="ttc" id="anamespacellvm_html_a10f3d955592ae2bc745f57e5b48ae115"><div class="ttname"><a href="namespacellvm.html#a10f3d955592ae2bc745f57e5b48ae115">llvm::size</a></div><div class="ttdeci">auto size(R &amp;&amp;Range, std::enable_if_t&lt; std::is_base_of&lt; std::random_access_iterator_tag, typename std::iterator_traits&lt; decltype(Range.begin())&gt;::iterator_category &gt;::value, void &gt; *=nullptr)</div><div class="ttdoc">Get the size of a range.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01716">STLExtras.h:1716</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_ada8d44774af63e8cab5f9b2a088121fe"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#ada8d44774af63e8cab5f9b2a088121fe">llvm::OpenMPIRBuilder::createGlobalFlag</a></div><div class="ttdeci">GlobalValue * createGlobalFlag(unsigned Value, StringRef Name)</div><div class="ttdoc">Create a hidden global flag Name in the module with initial value Value.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00543">OMPIRBuilder.cpp:543</a></div></div>
<div class="ttc" id="aclassllvm_1_1Triple_html_a0338eabc8ab4dff6368bdfae6ec94cbc"><div class="ttname"><a href="classllvm_1_1Triple.html#a0338eabc8ab4dff6368bdfae6ec94cbc">llvm::Triple::isPPC</a></div><div class="ttdeci">bool isPPC() const</div><div class="ttdoc">Tests whether the target is PowerPC (32- or 64-bit LE or BE).</div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00870">Triple.h:870</a></div></div>
<div class="ttc" id="aclassllvm_1_1OffloadEntriesInfoManager_html_a4e85049eada7d6cc3bedde1433ce4a7ba1e2537a111117d2cebad779b6de1856b"><div class="ttname"><a href="classllvm_1_1OffloadEntriesInfoManager.html#a4e85049eada7d6cc3bedde1433ce4a7ba1e2537a111117d2cebad779b6de1856b">llvm::OffloadEntriesInfoManager::OMPTargetRegionEntryTargetRegion</a></div><div class="ttdeci">@ OMPTargetRegionEntryTargetRegion</div><div class="ttdoc">Mark the entry as target region.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l02006">OMPIRBuilder.h:2006</a></div></div>
<div class="ttc" id="aTargetOptions_8h_html"><div class="ttname"><a href="TargetOptions_8h.html">TargetOptions.h</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1TargetDataRTArgs_html_abfc59185affff631915c34412a350c8c"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1TargetDataRTArgs.html#abfc59185affff631915c34412a350c8c">llvm::OpenMPIRBuilder::TargetDataRTArgs::MapTypesArray</a></div><div class="ttdeci">Value * MapTypesArray</div><div class="ttdoc">The array of map types passed to the runtime library for the beginning of the region or for the entir...</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01144">OMPIRBuilder.h:1144</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImplBase_html_a16413f1a88d8baca228d0a1b4cc0bfc6"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImplBase.html#a16413f1a88d8baca228d0a1b4cc0bfc6">llvm::SmallPtrSetImplBase::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00095">SmallPtrSet.h:95</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Sched_html_ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9"><div class="ttname"><a href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">llvm::Sched::Source</a></div><div class="ttdeci">@ Source</div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l00100">TargetLowering.h:100</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a7709370a0f6564aa772ce20caa45337e"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a7709370a0f6564aa772ce20caa45337e">llvm::OpenMPIRBuilder::createOMPInteropInit</a></div><div class="ttdeci">CallInst * createOMPInteropInit(const LocationDescription &amp;Loc, Value *InteropVar, omp::OMPInteropType InteropType, Value *Device, Value *NumDependences, Value *DependenceAddress, bool HaveNowaitClause)</div><div class="ttdoc">Create a runtime call for __tgt_interop_init.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l03783">OMPIRBuilder.cpp:3783</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_acb593a387130148478f3c30af0d322df"><div class="ttname"><a href="namespacellvm_1_1omp.html#acb593a387130148478f3c30af0d322df">llvm::omp::OMPAtomicCompareOp</a></div><div class="ttdeci">OMPAtomicCompareOp</div><div class="ttdoc">Atomic compare operations. Currently OpenMP only supports ==, &gt;, and &lt;.</div><div class="ttdef"><b>Definition:</b> <a href="OMPConstants_8h_source.html#l00256">OMPConstants.h:256</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7a86d90f56bf34bf9eed31f6676cfe2200"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a86d90f56bf34bf9eed31f6676cfe2200">llvm::omp::OMPScheduleType::NomergeUnorderedGuidedIterativeChunked</a></div><div class="ttdeci">@ NomergeUnorderedGuidedIterativeChunked</div></div>
<div class="ttc" id="aclassllvm_1_1OffloadEntriesInfoManager_1_1OffloadEntryInfo_html"><div class="ttname"><a href="classllvm_1_1OffloadEntriesInfoManager_1_1OffloadEntryInfo.html">llvm::OffloadEntriesInfoManager::OffloadEntryInfo</a></div><div class="ttdoc">Base class of the entries info.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01946">OMPIRBuilder.h:1946</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef</a></div><div class="ttdoc">ArrayRef - Represent a constant reference to an array (0 or more elements consecutively in memory),...</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00033">APInt.h:33</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfo_html"><div class="ttname"><a href="classllvm_1_1LoopInfo.html">llvm::LoopInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l01108">LoopInfo.h:1108</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1TargetDataRTArgs_html_a00635325d57af0b95f0b797f63ee6df6"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1TargetDataRTArgs.html#a00635325d57af0b95f0b797f63ee6df6">llvm::OpenMPIRBuilder::TargetDataRTArgs::SizesArray</a></div><div class="ttdeci">Value * SizesArray</div><div class="ttdoc">The array of sizes passed to the runtime library.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01140">OMPIRBuilder.h:1140</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkEmitter_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkEmitter.html">llvm::OptimizationRemarkEmitter</a></div><div class="ttdoc">The optimization diagnostic interface.</div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8h_source.html#l00033">OptimizationRemarkEmitter.h:33</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7a0158fb808d882c7853b20bf3d759238a"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a0158fb808d882c7853b20bf3d759238a">llvm::omp::OMPScheduleType::NomergeUnorderedGreedy</a></div><div class="ttdeci">@ NomergeUnorderedGreedy</div></div>
<div class="ttc" id="aclassllvm_1_1CodeExtractor_html_ad4d03968d09741d23f5b83e7a538f04f"><div class="ttname"><a href="classllvm_1_1CodeExtractor.html#ad4d03968d09741d23f5b83e7a538f04f">llvm::CodeExtractor::excludeArgFromAggregate</a></div><div class="ttdeci">void excludeArgFromAggregate(Value *Arg)</div><div class="ttdoc">Exclude a value from aggregate argument passing when extracting a code region, passing it instead as ...</div><div class="ttdef"><b>Definition:</b> <a href="CodeExtractor_8cpp_source.html#l01892">CodeExtractor.cpp:1892</a></div></div>
<div class="ttc" id="aclassllvm_1_1StructType_html"><div class="ttname"><a href="classllvm_1_1StructType.html">llvm::StructType</a></div><div class="ttdoc">Class to represent struct types.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00213">DerivedTypes.h:213</a></div></div>
<div class="ttc" id="aBasicBlockSections_8cpp_html_a5fd0741d696f28faf65b33f6c6af8fda"><div class="ttname"><a href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a></div><div class="ttdeci">SmallVector&lt; MachineOperand, 4 &gt; Cond</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockSections_8cpp_source.html#l00137">BasicBlockSections.cpp:137</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html"><div class="ttname"><a href="classllvm_1_1StringRef.html">llvm::StringRef</a></div><div class="ttdoc">StringRef - Represent a constant reference to a string, i.e.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00050">StringRef.h:50</a></div></div>
<div class="ttc" id="aclassllvm_1_1OffloadEntriesInfoManager_html_ab9575c71365de4083a7be6ef6572d534"><div class="ttname"><a href="classllvm_1_1OffloadEntriesInfoManager.html#ab9575c71365de4083a7be6ef6572d534">llvm::OffloadEntriesInfoManager::OMPTargetGlobalVarEntryKind</a></div><div class="ttdeci">OMPTargetGlobalVarEntryKind</div><div class="ttdoc">Kind of the global variable entry..</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l02068">OMPIRBuilder.h:2068</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_ae6db8746934e6feae3649a8709fce3cc"><div class="ttname"><a href="classllvm_1_1Function.html#ae6db8746934e6feae3649a8709fce3cc">llvm::Function::setCallingConv</a></div><div class="ttdeci">void setCallingConv(CallingConv::ID CC)</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00241">Function.h:241</a></div></div>
<div class="ttc" id="aclassllvm_1_1AssumptionCache_html"><div class="ttname"><a href="classllvm_1_1AssumptionCache.html">llvm::AssumptionCache</a></div><div class="ttdoc">A cache of @llvm.assume calls within a function.</div><div class="ttdef"><b>Definition:</b> <a href="AssumptionCache_8h_source.html#l00042">AssumptionCache.h:42</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetRegionEntryInfo_html_a89525afb0a8095beeb2dc7b083491942"><div class="ttname"><a href="structllvm_1_1TargetRegionEntryInfo.html#a89525afb0a8095beeb2dc7b083491942">llvm::TargetRegionEntryInfo::ParentName</a></div><div class="ttdeci">std::string ParentName</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01911">OMPIRBuilder.h:1911</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">llvm::CmpInst::ICMP_ULT</a></div><div class="ttdeci">@ ICMP_ULT</div><div class="ttdoc">unsigned less than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00743">InstrTypes.h:743</a></div></div>
<div class="ttc" id="anamespacellvm_1_1logicalview_html_a9696bc411b0a7022c2cc78bff5173cefad7ed4ee1df437474d005188535f74875"><div class="ttname"><a href="namespacellvm_1_1logicalview.html#a9696bc411b0a7022c2cc78bff5173cefad7ed4ee1df437474d005188535f74875">llvm::logicalview::LVAttributeKind::Zero</a></div><div class="ttdeci">@ Zero</div></div>
<div class="ttc" id="aSupport_2ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdoc">Marks that the current location is not supposed to be reachable.</div><div class="ttdef"><b>Definition:</b> <a href="Support_2ErrorHandling_8h_source.html#l00143">ErrorHandling.h:143</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a6393a2d4fe7e10b28a0dcc35f881567b"><div class="ttname"><a href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const</div><div class="ttdoc">All values are typed, get the type of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00255">Value.h:255</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_aba0055050d741f60b6e0523507a2c79f"><div class="ttname"><a href="classllvm_1_1Value.html#aba0055050d741f60b6e0523507a2c79f">llvm::Value::getNumUses</a></div><div class="ttdeci">unsigned getNumUses() const</div><div class="ttdoc">This method computes the number of uses of this Value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00254">Value.cpp:254</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7abe272c1e3dfad2cfd9e94438ac753094"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7abe272c1e3dfad2cfd9e94438ac753094">llvm::omp::OMPScheduleType::NomergeUnorderedStaticChunked</a></div><div class="ttdeci">@ NomergeUnorderedStaticChunked</div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_ab1aa0d632549db4855d6412f4d2d44ae"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#ab1aa0d632549db4855d6412f4d2d44ae">llvm::OpenMPIRBuilder::createOffloadMapnames</a></div><div class="ttdeci">GlobalVariable * createOffloadMapnames(SmallVectorImpl&lt; llvm::Constant * &gt; &amp;Names, std::string VarName)</div><div class="ttdoc">Create the global variable holding the offload names information.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l04732">OMPIRBuilder.cpp:4732</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantDataArray_html_acea0f5c18b4593bf27592dfcfe59de6f"><div class="ttname"><a href="classllvm_1_1ConstantDataArray.html#acea0f5c18b4593bf27592dfcfe59de6f">llvm::ConstantDataArray::get</a></div><div class="ttdeci">static Constant * get(LLVMContext &amp;Context, ArrayRef&lt; ElementTy &gt; Elts)</div><div class="ttdoc">get() constructor - Return a constant with array type with an element count and element type matching...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00691">Constants.h:691</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a74aa9daea070e2ad3394a3ec58b7316a"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a74aa9daea070e2ad3394a3ec58b7316a">llvm::BasicBlock::getUniquePredecessor</a></div><div class="ttdeci">const BasicBlock * getUniquePredecessor() const</div><div class="ttdoc">Return the predecessor of this block if it has a unique predecessor block.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00292">BasicBlock.cpp:292</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7a88acf78220be4f9cba9d504348338434"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a88acf78220be4f9cba9d504348338434">llvm::omp::OMPScheduleType::NomergeOrderedDynamicChunked</a></div><div class="ttdeci">@ NomergeOrderedDynamicChunked</div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_aedfa75f0c85c4aa85b257f066fbea57ca696bb1c9b0b0e76bb70c61f68866452a"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca696bb1c9b0b0e76bb70c61f68866452a">llvm::GlobalValue::WeakODRLinkage</a></div><div class="ttdeci">@ WeakODRLinkage</div><div class="ttdoc">Same, but only replaced by something equivalent.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00053">GlobalValue.h:53</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdoc">Change all uses of this to point to a new Value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00532">Value.cpp:532</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_ace940beeee97c222f836fe0ac70f6cf5"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">llvm::BasicBlock::Create</a></div><div class="ttdeci">static BasicBlock * Create(LLVMContext &amp;Context, const Twine &amp;Name=&quot;&quot;, Function *Parent=nullptr, BasicBlock *InsertBefore=nullptr)</div><div class="ttdoc">Creates a new BasicBlock.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00105">BasicBlock.h:105</a></div></div>
<div class="ttc" id="aBasicAliasAnalysis_8cpp_html_a2675de1d8479c7b00387979714da43f7"><div class="ttname"><a href="BasicAliasAnalysis_8cpp.html#a2675de1d8479c7b00387979714da43f7">getParent</a></div><div class="ttdeci">static const Function * getParent(const Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="BasicAliasAnalysis_8cpp_source.html#l00806">BasicAliasAnalysis.cpp:806</a></div></div>
<div class="ttc" id="aclassuint32__t_html"><div class="ttname"><a href="classuint32__t.html">uint32_t</a></div></div>
<div class="ttc" id="anamespacellvm_html_a39d3d23a084c4544ee5903203db10e8a"><div class="ttname"><a href="namespacellvm.html#a39d3d23a084c4544ee5903203db10e8a">llvm::append_range</a></div><div class="ttdeci">void append_range(Container &amp;C, Range &amp;&amp;R)</div><div class="ttdoc">Wrapper function to append a range to a container.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l02014">STLExtras.h:2014</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html">llvm::IRBuilderBase</a></div><div class="ttdoc">Common base class shared among various IRBuilders.</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00094">IRBuilder.h:94</a></div></div>
<div class="ttc" id="aclassllvm_1_1ilist__node__impl_html_af719fc783be6589465137d997701a432"><div class="ttname"><a href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">llvm::ilist_node_impl::getIterator</a></div><div class="ttdeci">self_iterator getIterator()</div><div class="ttdef"><b>Definition:</b> <a href="ilist__node_8h_source.html#l00082">ilist_node.h:82</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_ad467c4ab9119043f9b7750ab986be61a"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a></div><div class="ttdeci">MachineBasicBlock MachineBasicBlock::iterator DebugLoc DL</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00076">AArch64SLSHardening.cpp:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantDataArray_html_a3edef3fa47c611d3d10606591213e57b"><div class="ttname"><a href="classllvm_1_1ConstantDataArray.html#a3edef3fa47c611d3d10606591213e57b">llvm::ConstantDataArray::getString</a></div><div class="ttdeci">static Constant * getString(LLVMContext &amp;Context, StringRef Initializer, bool AddNull=true)</div><div class="ttdoc">This method constructs a CDS and initializes it with a text string.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02994">Constants.cpp:2994</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6e86d0ac2e968adc60290ca52da02e42"><div class="ttname"><a href="namespacellvm.html#a6e86d0ac2e968adc60290ca52da02e42">llvm::gatherPeelingPreferences</a></div><div class="ttdeci">TargetTransformInfo::PeelingPreferences gatherPeelingPreferences(Loop *L, ScalarEvolution &amp;SE, const TargetTransformInfo &amp;TTI, std::optional&lt; bool &gt; UserAllowPeeling, std::optional&lt; bool &gt; UserAllowProfileBasedPeeling, bool UnrollingSpecficValues=false)</div><div class="ttdef"><b>Definition:</b> <a href="LoopPeel_8cpp_source.html#l00811">LoopPeel.cpp:811</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalObject_html_a1f496e54accb2cbe919fb456cb703f1a"><div class="ttname"><a href="classllvm_1_1GlobalObject.html#a1f496e54accb2cbe919fb456cb703f1a">llvm::GlobalObject::hasMetadata</a></div><div class="ttdeci">bool hasMetadata() const</div><div class="ttdoc">Return true if this value has any metadata attached to it.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00585">Value.h:585</a></div></div>
<div class="ttc" id="aclassllvm_1_1CodeExtractor_html"><div class="ttname"><a href="classllvm_1_1CodeExtractor.html">llvm::CodeExtractor</a></div><div class="ttdoc">Utility class for extracting code into a new function.</div><div class="ttdef"><b>Definition:</b> <a href="CodeExtractor_8h_source.html#l00085">CodeExtractor.h:85</a></div></div>
<div class="ttc" id="aOMPIRBuilder_8cpp_html_a74bf2240e1da04168d57a7534c9613f7"><div class="ttname"><a href="OMPIRBuilder_8cpp.html#a74bf2240e1da04168d57a7534c9613f7">getKmpcForDynamicNextForType</a></div><div class="ttdeci">static FunctionCallee getKmpcForDynamicNextForType(Type *Ty, Module &amp;M, OpenMPIRBuilder &amp;OMPBuilder)</div><div class="ttdoc">Returns an LLVM function to call for updating the next loop using OpenMP dynamic scheduling depending...</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l02419">OMPIRBuilder.cpp:2419</a></div></div>
<div class="ttc" id="aclassllvm_1_1Triple_html_a31d94b95418472bb1179f7c130ad3667"><div class="ttname"><a href="classllvm_1_1Triple.html#a31d94b95418472bb1179f7c130ad3667">llvm::Triple::isX86</a></div><div class="ttdeci">bool isX86() const</div><div class="ttdoc">Tests whether the target is x86 (32- or 64-bit).</div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00911">Triple.h:911</a></div></div>
<div class="ttc" id="anamespacellvm_html_a85ee70791795fa2ddb07694182f783b2"><div class="ttname"><a href="namespacellvm.html#a85ee70791795fa2ddb07694182f783b2">llvm::splitBB</a></div><div class="ttdeci">BasicBlock * splitBB(IRBuilderBase::InsertPoint IP, bool CreateBranch, llvm::Twine Name={})</div><div class="ttdoc">Split a BasicBlock at an InsertPoint, even if the block is degenerate (missing the terminator).</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00286">OMPIRBuilder.cpp:286</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1MapperAllocas_html_ad41f11a634af5e69560ac0279c74b100"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1MapperAllocas.html#ad41f11a634af5e69560ac0279c74b100">llvm::OpenMPIRBuilder::MapperAllocas::ArgSizes</a></div><div class="ttdeci">AllocaInst * ArgSizes</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01110">OMPIRBuilder.h:1110</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1OutlineInfo_html_a0b8f73f7987421a24a842d3e2633278d"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1OutlineInfo.html#a0b8f73f7987421a24a842d3e2633278d">llvm::OpenMPIRBuilder::OutlineInfo::PostOutlineCB</a></div><div class="ttdeci">PostOutlineCBTy PostOutlineCB</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01068">OMPIRBuilder.h:1068</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html_a6ae88dc44b078c80ce3a25401fd4b05b"><div class="ttname"><a href="classllvm_1_1LoadInst.html#a6ae88dc44b078c80ce3a25401fd4b05b">llvm::LoadInst::setAtomic</a></div><div class="ttdeci">void setAtomic(AtomicOrdering Ordering, SyncScope::ID SSID=SyncScope::System)</div><div class="ttdoc">Sets the ordering constraint and the synchronization scope ID of this load instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00250">Instructions.h:250</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstructionCost_html_ae01c5ced9fe2fe50f421ae121483ef04"><div class="ttname"><a href="classllvm_1_1InstructionCost.html#ae01c5ced9fe2fe50f421ae121483ef04">llvm::InstructionCost::isValid</a></div><div class="ttdeci">bool isValid() const</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCost_8h_source.html#l00079">InstructionCost.h:79</a></div></div>
<div class="ttc" id="anamespacellvm_html_a66f0c57e04037076030c6a6e48f44f2d"><div class="ttname"><a href="namespacellvm.html#a66f0c57e04037076030c6a6e48f44f2d">llvm::format</a></div><div class="ttdeci">format_object&lt; Ts... &gt; format(const char *Fmt, const Ts &amp;... Vals)</div><div class="ttdoc">These are helper functions used to produce formatted output.</div><div class="ttdef"><b>Definition:</b> <a href="Format_8h_source.html#l00124">Format.h:124</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7a9e8280caae3ba6110d4f0061ad3dce1c"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a9e8280caae3ba6110d4f0061ad3dce1c">llvm::omp::OMPScheduleType::BaseDynamicChunked</a></div><div class="ttdeci">@ BaseDynamicChunked</div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7a8a3ce6661aad31cc29e3c986d95c3b80"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a8a3ce6661aad31cc29e3c986d95c3b80">llvm::omp::OMPScheduleType::UnorderedStaticBalancedChunked</a></div><div class="ttdeci">@ UnorderedStaticBalancedChunked</div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html_a21a975fd58c287a6ca3f1c89c048e7d3"><div class="ttname"><a href="classllvm_1_1MDNode.html#a21a975fd58c287a6ca3f1c89c048e7d3">llvm::MDNode::getDistinct</a></div><div class="ttdeci">static MDTuple * getDistinct(LLVMContext &amp;Context, ArrayRef&lt; Metadata * &gt; MDs)</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l01407">Metadata.h:1407</a></div></div>
<div class="ttc" id="aCompiler_8h_html_a9579881de06b1560d242d15171ca1b86"><div class="ttname"><a href="Compiler_8h.html#a9579881de06b1560d242d15171ca1b86">LLVM_FALLTHROUGH</a></div><div class="ttdeci">#define LLVM_FALLTHROUGH</div><div class="ttdoc">LLVM_FALLTHROUGH - Mark fallthrough cases in switch statements.</div><div class="ttdef"><b>Definition:</b> <a href="Compiler_8h_source.html#l00270">Compiler.h:270</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a5e2b7ac5f48193117a340aa15b085719"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a5e2b7ac5f48193117a340aa15b085719">llvm::OpenMPIRBuilder::unrollLoopPartial</a></div><div class="ttdeci">void unrollLoopPartial(DebugLoc DL, CanonicalLoopInfo *Loop, int32_t Factor, CanonicalLoopInfo **UnrolledCLI)</div><div class="ttdoc">Partially unroll a loop.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l03346">OMPIRBuilder.cpp:3346</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_adb5c319f5905c1d3ca9eb5df546388c5"><div class="ttname"><a href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">Return a constant reference to the value's name.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00308">Value.cpp:308</a></div></div>
<div class="ttc" id="aclassllvm_1_1ValueMap_html"><div class="ttname"><a href="classllvm_1_1ValueMap.html">llvm::ValueMap&lt; const Value *, WeakTrackingVH &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html"><div class="ttname"><a href="classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdoc">An instruction for reading from memory.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00177">Instructions.h:177</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_ac50024248a5e85a1192de8410d5448ca"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#ac50024248a5e85a1192de8410d5448ca">llvm::OpenMPIRBuilder::createMasked</a></div><div class="ttdeci">InsertPointTy createMasked(const LocationDescription &amp;Loc, BodyGenCallbackTy BodyGenCB, FinalizeCallbackTy FiniCB, Value *Filter)</div><div class="ttdoc">Generator for '#omp masked'.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l01909">OMPIRBuilder.cpp:1909</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7af54e7eea282c868aa67914573df2558f"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7af54e7eea282c868aa67914573df2558f">llvm::omp::OMPScheduleType::BaseStaticChunked</a></div><div class="ttdeci">@ BaseStaticChunked</div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_aedfa75f0c85c4aa85b257f066fbea57ca08c6a63ca3d9cdb39fb584655bf5c501"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca08c6a63ca3d9cdb39fb584655bf5c501">llvm::GlobalValue::CommonLinkage</a></div><div class="ttdeci">@ CommonLinkage</div><div class="ttdoc">Tentative definitions.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00058">GlobalValue.h:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopAnalysis_html_aea38b668f2d98b7e9f64b8b3c2e524dc"><div class="ttname"><a href="classllvm_1_1LoopAnalysis.html#aea38b668f2d98b7e9f64b8b3c2e524dc">llvm::LoopAnalysis::run</a></div><div class="ttdeci">LoopInfo run(Function &amp;F, FunctionAnalysisManager &amp;AM)</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00959">LoopInfo.cpp:959</a></div></div>
<div class="ttc" id="aSampleProfWriter_8cpp_html_ac5f3689931c7238da06ba00cf1002c62"><div class="ttname"><a href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a></div><div class="ttdeci">raw_pwrite_stream &amp; OS</div><div class="ttdef"><b>Definition:</b> <a href="SampleProfWriter_8cpp_source.html#l00053">SampleProfWriter.cpp:53</a></div></div>
<div class="ttc" id="aclassllvm_1_1NamedMDNode_html_acfe76fbea7879969fb26502ea5ffba97"><div class="ttname"><a href="classllvm_1_1NamedMDNode.html#acfe76fbea7879969fb26502ea5ffba97">llvm::NamedMDNode::operands</a></div><div class="ttdeci">iterator_range&lt; op_iterator &gt; operands()</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l01683">Metadata.h:1683</a></div></div>
<div class="ttc" id="aOMPIRBuilder_8cpp_html_a946282957319b8c23ab9f169abb504c4"><div class="ttname"><a href="OMPIRBuilder_8cpp.html#a946282957319b8c23ab9f169abb504c4">computeHeuristicUnrollFactor</a></div><div class="ttdeci">static int32_t computeHeuristicUnrollFactor(CanonicalLoopInfo *CLI)</div><div class="ttdoc">Heuristically determine the best-performant unroll factor for CLI.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l03214">OMPIRBuilder.cpp:3214</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html">llvm::AtomicRMWInst</a></div><div class="ttdoc">an instruction that atomically reads a memory location, combines it with another value,...</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00718">Instructions.h:718</a></div></div>
<div class="ttc" id="aclassllvm_1_1PointerUnion_html"><div class="ttname"><a href="classllvm_1_1PointerUnion.html">llvm::PointerUnion&lt; const Value *, const PseudoSourceValue * &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_aa7cce62ac5cc6df09cce0535874336b7"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">llvm::ConstantInt::getFalse</a></div><div class="ttdeci">static ConstantInt * getFalse(LLVMContext &amp;Context)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00842">Constants.cpp:842</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionCallee_html_a0055cd5464b935f571b36979a86bd7fc"><div class="ttname"><a href="classllvm_1_1FunctionCallee.html#a0055cd5464b935f571b36979a86bd7fc">llvm::FunctionCallee::getCallee</a></div><div class="ttdeci">Value * getCallee()</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00184">DerivedTypes.h:184</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_ab706e7ebb1969c5e34f28bfcf2ff719e"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ab706e7ebb1969c5e34f28bfcf2ff719e">llvm::BasicBlock::front</a></div><div class="ttdeci">const Instruction &amp; front() const</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00326">BasicBlock.h:326</a></div></div>
<div class="ttc" id="aclassllvm_1_1CanonicalLoopInfo_html_a320de99bcedbb241fe54ed847482d27f"><div class="ttname"><a href="classllvm_1_1CanonicalLoopInfo.html#a320de99bcedbb241fe54ed847482d27f">llvm::CanonicalLoopInfo::getExit</a></div><div class="ttdeci">BasicBlock * getExit() const</div><div class="ttdoc">Reaching the exit indicates no more iterations are being executed.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l02336">OMPIRBuilder.h:2336</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9bccbe67aaab722783ca4e7c504aaaa7ab8e7b465df7c5979dc731d06e84ce2cf"><div class="ttname"><a href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7ab8e7b465df7c5979dc731d06e84ce2cf">llvm::AtomicOrdering::Release</a></div><div class="ttdeci">@ Release</div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_aa286a0f7f5d38488d593bb7ef0ba183e"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#aa286a0f7f5d38488d593bb7ef0ba183e">llvm::BasicBlock::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">Get the context in which this basic block lives.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00035">BasicBlock.cpp:35</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7ab9dd338a9e4b4d1c74191892dd28abe2"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7ab9dd338a9e4b4d1c74191892dd28abe2">llvm::omp::OMPScheduleType::BaseSteal</a></div><div class="ttdeci">@ BaseSteal</div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html_a5db9240c74644c67759dd0f901fc3c7d"><div class="ttname"><a href="classllvm_1_1StringRef.html#a5db9240c74644c67759dd0f901fc3c7d">llvm::StringRef::size</a></div><div class="ttdeci">constexpr size_t size() const</div><div class="ttdoc">size - Get the string size.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00137">StringRef.h:137</a></div></div>
<div class="ttc" id="aOMPIRBuilder_8cpp_html_a4b64de5bc0d090cc76ddb989acabf0f3"><div class="ttname"><a href="OMPIRBuilder_8cpp.html#a4b64de5bc0d090cc76ddb989acabf0f3">getOpenMPMonotonicityScheduleType</a></div><div class="ttdeci">static OMPScheduleType getOpenMPMonotonicityScheduleType(OMPScheduleType ScheduleType, bool HasSimdModifier, bool HasMonotonic, bool HasNonmonotonic, bool HasOrderedClause)</div><div class="ttdoc">Adds monotonicity modifier flags to schedule type.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00186">OMPIRBuilder.cpp:186</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantAsMetadata_html"><div class="ttname"><a href="classllvm_1_1ConstantAsMetadata.html">llvm::ConstantAsMetadata</a></div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00412">Metadata.h:412</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a419ffad9e4d59275e299ce1ad3c73cd4"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a419ffad9e4d59275e299ce1ad3c73cd4">llvm::OpenMPIRBuilder::createTaskwait</a></div><div class="ttdeci">void createTaskwait(const LocationDescription &amp;Loc)</div><div class="ttdoc">Generator for '#omp taskwait'.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l01258">OMPIRBuilder.cpp:1258</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7a39599fc5486afadef41009e1fb27600e"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a39599fc5486afadef41009e1fb27600e">llvm::omp::OMPScheduleType::UnorderedGuidedIterativeChunked</a></div><div class="ttdeci">@ UnorderedGuidedIterativeChunked</div></div>
<div class="ttc" id="aOMPIRBuilder_8cpp_html_a3057c2b7e1e25de160497b1ef3985c2a"><div class="ttname"><a href="OMPIRBuilder_8cpp.html#a3057c2b7e1e25de160497b1ef3985c2a">redirectTo</a></div><div class="ttdeci">static void redirectTo(BasicBlock *Source, BasicBlock *Target, DebugLoc DL)</div><div class="ttdoc">Make Source branch to Target.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00243">OMPIRBuilder.cpp:243</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_acb593a387130148478f3c30af0d322dface31e2a082d17e038fcc6e3006166653"><div class="ttname"><a href="namespacellvm_1_1omp.html#acb593a387130148478f3c30af0d322dface31e2a082d17e038fcc6e3006166653">llvm::omp::OMPAtomicCompareOp::MIN</a></div><div class="ttdeci">@ MIN</div></div>
<div class="ttc" id="aclassllvm_1_1Twine_html"><div class="ttname"><a href="classllvm_1_1Twine.html">llvm::Twine</a></div><div class="ttdoc">Twine - A lightweight data structure for efficiently representing the concatenation of temporary valu...</div><div class="ttdef"><b>Definition:</b> <a href="Twine_8h_source.html#l00081">Twine.h:81</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1ReductionInfo_html_a681945072e94e9e2382b52d56d4b6edf"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1ReductionInfo.html#a681945072e94e9e2382b52d56d4b6edf">llvm::OpenMPIRBuilder::ReductionInfo::ReductionGen</a></div><div class="ttdeci">ReductionGenTy ReductionGen</div><div class="ttdoc">Callback for generating the reduction body.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l00834">OMPIRBuilder.h:834</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a05186fa23e4d11b9855a9599ba87a4b7"><div class="ttname"><a href="classllvm_1_1Type.html#a05186fa23e4d11b9855a9599ba87a4b7">llvm::Type::getInt64Ty</a></div><div class="ttdeci">static IntegerType * getInt64Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00242">Type.cpp:242</a></div></div>
<div class="ttc" id="aOMPIRBuilder_8cpp_html_a4a87dd5af95eb64807ad77405e4f4654"><div class="ttname"><a href="OMPIRBuilder_8cpp.html#a4a87dd5af95eb64807ad77405e4f4654">getOpenMPOrderingScheduleType</a></div><div class="ttdeci">static OMPScheduleType getOpenMPOrderingScheduleType(OMPScheduleType BaseScheduleType, bool HasOrderedClause)</div><div class="ttdoc">Adds ordering modifier flags to schedule type.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00162">OMPIRBuilder.cpp:162</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue_html_ae8ed82c3d82f5df97d8ebb3f77cc8dfa"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html#ae8ed82c3d82f5df97d8ebb3f77cc8dfa">llvm::OpenMPIRBuilder::AtomicOpValue::ElemTy</a></div><div class="ttdeci">Type * ElemTy</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01717">OMPIRBuilder.h:1717</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_1_1TargetDataInfo_html"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder_1_1TargetDataInfo.html">llvm::OpenMPIRBuilder::TargetDataInfo</a></div><div class="ttdoc">Struct that keeps the information that should be kept throughout a 'target data' region.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01158">OMPIRBuilder.h:1158</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetRegionEntryInfo_html_a80293a526ecd17ee44ce5b982dff1ca1"><div class="ttname"><a href="structllvm_1_1TargetRegionEntryInfo.html#a80293a526ecd17ee44ce5b982dff1ca1">llvm::TargetRegionEntryInfo::FileID</a></div><div class="ttdeci">unsigned FileID</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01913">OMPIRBuilder.h:1913</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a82dbbd8e3688b0bc1eedb338864d0d0c"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">llvm::ConstantInt::getTrue</a></div><div class="ttdeci">static ConstantInt * getTrue(LLVMContext &amp;Context)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00835">Constants.cpp:835</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_aa6574d526b3e38a28f688a7bb4325c2c"><div class="ttname"><a href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">llvm::Constant::getNullValue</a></div><div class="ttdeci">static Constant * getNullValue(Type *Ty)</div><div class="ttdoc">Constructor to create a '0' constant of arbitrary type.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00356">Constants.cpp:356</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615a92f66d4bc04fc8514bee80509f3e78d4"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a92f66d4bc04fc8514bee80509f3e78d4">llvm::AtomicRMWInst::FSub</a></div><div class="ttdeci">@ FSub</div><div class="ttdoc">*p = old - v</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00758">Instructions.h:758</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1SendMsg_html_a8594419a4ddfad2c9a79279c490e466d"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">llvm::AMDGPU::SendMsg::Op</a></div><div class="ttdeci">Op</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00357">SIDefines.h:357</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1ReductionInfo_html_a808df20c6281c68ce8be2a89aaba392a"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1ReductionInfo.html#a808df20c6281c68ce8be2a89aaba392a">llvm::OpenMPIRBuilder::ReductionInfo::ElementType</a></div><div class="ttdeci">Type * ElementType</div><div class="ttdoc">Reduction element type, must match pointee type of variable.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l00823">OMPIRBuilder.h:823</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a0e2de2c034e3083d006b92ddf14b8bcf"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a0e2de2c034e3083d006b92ddf14b8bcf">llvm::OpenMPIRBuilder::createAtomicWrite</a></div><div class="ttdeci">InsertPointTy createAtomicWrite(const LocationDescription &amp;Loc, AtomicOpValue &amp;X, Value *Expr, AtomicOrdering AO)</div><div class="ttdoc">Emit atomic write for : X = Expr  Only Scalar data types.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l04308">OMPIRBuilder.cpp:4308</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html_aab36927882fbfdcbb860d87fd9c30da8"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#aab36927882fbfdcbb860d87fd9c30da8">llvm::ArrayRef::begin</a></div><div class="ttdeci">iterator begin() const</div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00151">ArrayRef.h:151</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_afe7d477c6022fe7123b90e3b39c58e69"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#afe7d477c6022fe7123b90e3b39c58e69">llvm::ConstantInt::getBool</a></div><div class="ttdeci">static ConstantInt * getBool(LLVMContext &amp;Context, bool V)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00849">Constants.cpp:849</a></div></div>
<div class="ttc" id="aclassllvm_1_1OffloadEntriesInfoManager_html_a453a107a33d0d865ed6e021fc6cdcc20"><div class="ttname"><a href="classllvm_1_1OffloadEntriesInfoManager.html#a453a107a33d0d865ed6e021fc6cdcc20">llvm::OffloadEntriesInfoManager::actOnDeviceGlobalVarEntriesInfo</a></div><div class="ttdeci">void actOnDeviceGlobalVarEntriesInfo(const OffloadDeviceGlobalVarEntryInfoActTy &amp;Action)</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l05151">OMPIRBuilder.cpp:5151</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a8052a4f265aa7540f68ca3103a55538d"><div class="ttname"><a href="classllvm_1_1Function.html#a8052a4f265aa7540f68ca3103a55538d">llvm::Function::getArg</a></div><div class="ttdeci">Argument * getArg(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00784">Function.h:784</a></div></div>
<div class="ttc" id="astructllvm_1_1SectionName_html"><div class="ttname"><a href="structllvm_1_1SectionName.html">llvm::SectionName</a></div><div class="ttdef"><b>Definition:</b> <a href="DWARFSection_8h_source.html#l00021">DWARFSection.h:21</a></div></div>
<div class="ttc" id="aclassllvm_1_1Error_html"><div class="ttname"><a href="classllvm_1_1Error.html">llvm::Error</a></div><div class="ttdoc">Lightweight error class with error context and mandatory checking.</div><div class="ttdef"><b>Definition:</b> <a href="Support_2Error_8h_source.html#l00156">Error.h:156</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_adde2ea00dd2613ee41bfe91908e4e68e"><div class="ttname"><a href="classllvm_1_1CallBase.html#adde2ea00dd2613ee41bfe91908e4e68e">llvm::CallBase::arg_size</a></div><div class="ttdeci">unsigned arg_size() const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01349">InstrTypes.h:1349</a></div></div>
<div class="ttc" id="aGlobalVariable_8h_html"><div class="ttname"><a href="GlobalVariable_8h.html">GlobalVariable.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a17e1669bb979d608af88a5543c437779"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a17e1669bb979d608af88a5543c437779">llvm::OpenMPIRBuilder::createAtomicCapture</a></div><div class="ttdeci">InsertPointTy createAtomicCapture(const LocationDescription &amp;Loc, InsertPointTy AllocaIP, AtomicOpValue &amp;X, AtomicOpValue &amp;V, Value *Expr, AtomicOrdering AO, AtomicRMWInst::BinOp RMWOp, AtomicUpdateCallbackTy &amp;UpdateOp, bool UpdateExpr, bool IsPostfixUpdate, bool IsXBinopExpr)</div><div class="ttdoc">Emit atomic update for constructs:  Only Scalar data types V = X; X = X BinOp Expr ,...</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l04515">OMPIRBuilder.cpp:4515</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a21f3355a71a577274d5e3872a7e62048"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a21f3355a71a577274d5e3872a7e62048">llvm::OpenMPIRBuilder::emitTargetRegionFunction</a></div><div class="ttdeci">void emitTargetRegionFunction(OffloadEntriesInfoManager &amp;InfoManager, TargetRegionEntryInfo &amp;EntryInfo, FunctionGenCallback &amp;GenerateFunctionCallback, int32_t NumTeams, int32_t NumThreads, bool IsOffloadEntry, Function *&amp;OutlinedFn, Constant *&amp;OutlinedFnID)</div><div class="ttdoc">Create a unique name for the entry function using the source location information of the current targ...</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l03998">OMPIRBuilder.cpp:3998</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615a660a31179bfecd737a256372e5fd6122"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a660a31179bfecd737a256372e5fd6122">llvm::AtomicRMWInst::And</a></div><div class="ttdeci">@ And</div><div class="ttdoc">*p = old &amp; v</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00738">Instructions.h:738</a></div></div>
<div class="ttc" id="aclassllvm_1_1CanonicalLoopInfo_html_a9ce55b05f8ad85126fc92eeeb35457c7"><div class="ttname"><a href="classllvm_1_1CanonicalLoopInfo.html#a9ce55b05f8ad85126fc92eeeb35457c7">llvm::CanonicalLoopInfo::invalidate</a></div><div class="ttdeci">void invalidate()</div><div class="ttdoc">Invalidate this loop.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l05316">OMPIRBuilder.cpp:5316</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MCID_html_ab357441fcd1ea1f9b0d27c12700f6023a359237c780f7c8e40645575826da8a3c"><div class="ttname"><a href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a359237c780f7c8e40645575826da8a3c">llvm::MCID::Branch</a></div><div class="ttdeci">@ Branch</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00159">MCInstrDesc.h:159</a></div></div>
<div class="ttc" id="aclassllvm_1_1OffloadEntriesInfoManager_html_aa87d491241b8ff7bdec84f22843c6ab5"><div class="ttname"><a href="classllvm_1_1OffloadEntriesInfoManager.html#aa87d491241b8ff7bdec84f22843c6ab5">llvm::OffloadEntriesInfoManager::actOnTargetRegionEntriesInfo</a></div><div class="ttdeci">void actOnTargetRegionEntriesInfo(const OffloadTargetRegionEntryInfoActTy &amp;Action)</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l05102">OMPIRBuilder.cpp:5102</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html_a9c00c70121af456007404bd456047766"><div class="ttname"><a href="classllvm_1_1Module.html#a9c00c70121af456007404bd456047766">llvm::Module::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">Get the global data context.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00262">Module.h:262</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_ad736fb9b585509388546c12617def38f"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#ad736fb9b585509388546c12617def38f">llvm::ConstantInt::getSigned</a></div><div class="ttdeci">static ConstantInt * getSigned(IntegerType *Ty, int64_t V)</div><div class="ttdoc">Return a ConstantInt with the specified value for the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00901">Constants.cpp:901</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a30999e2e13909b5f129f0bae43095f3b"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a30999e2e13909b5f129f0bae43095f3b">llvm::OpenMPIRBuilder::createCancel</a></div><div class="ttdeci">InsertPointTy createCancel(const LocationDescription &amp;Loc, Value *IfCondition, omp::Directive CanceledDirective)</div><div class="ttdoc">Generator for '#omp cancel'.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00726">OMPIRBuilder.cpp:726</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab8ec5c940fbc440c992716fbe4a48636"><div class="ttname"><a href="namespacellvm.html#ab8ec5c940fbc440c992716fbe4a48636">llvm::remapInstructionsInBlocks</a></div><div class="ttdeci">void remapInstructionsInBlocks(ArrayRef&lt; BasicBlock * &gt; Blocks, ValueToValueMapTy &amp;VMap)</div><div class="ttdoc">Remaps instructions in Blocks using the mapping in VMap.</div><div class="ttdef"><b>Definition:</b> <a href="CloneFunction_8cpp_source.html#l00940">CloneFunction.cpp:940</a></div></div>
<div class="ttc" id="astructllvm_1_1omp_1_1GV_html"><div class="ttname"><a href="structllvm_1_1omp_1_1GV.html">llvm::omp::GV</a></div><div class="ttdoc">Defines various target-specific GPU grid values that must be consistent between host RTL (plugin),...</div><div class="ttdef"><b>Definition:</b> <a href="OMPGridValues_8h_source.html#l00057">OMPGridValues.h:57</a></div></div>
<div class="ttc" id="aPassManager_8h_html"><div class="ttname"><a href="PassManager_8h.html">PassManager.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MapVector_html_acf4c09e1f30cdd4e0b5b1b8a236ead34"><div class="ttname"><a href="classllvm_1_1MapVector.html#acf4c09e1f30cdd4e0b5b1b8a236ead34">llvm::MapVector::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="MapVector_8h_source.html#l00061">MapVector.h:61</a></div></div>
<div class="ttc" id="aOMPIRBuilder_8cpp_html_afe7d677770e0678840e54ebb3a9b932c"><div class="ttname"><a href="OMPIRBuilder_8cpp.html#afe7d677770e0678840e54ebb3a9b932c">OptimisticAttributes</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; OptimisticAttributes(&quot;openmp-ir-builder-optimistic-attributes&quot;, cl::Hidden, cl::desc(&quot;Use optimistic attributes describing &quot; &quot;'as-if' properties of runtime calls.&quot;), cl::init(false))</div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_adc01a7457de85fc52a3bb860d7e1c6a4"><div class="ttname"><a href="classllvm_1_1Type.html#adc01a7457de85fc52a3bb860d7e1c6a4">llvm::Type::getPointerTo</a></div><div class="ttdeci">PointerType * getPointerTo(unsigned AddrSpace=0) const</div><div class="ttdoc">Return a pointer to the current type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00776">Type.cpp:776</a></div></div>
<div class="ttc" id="aOMPIRBuilder_8cpp_html_a065b0b31e5ca4c10b1cef45581efb8dc"><div class="ttname"><a href="OMPIRBuilder_8cpp.html#a065b0b31e5ca4c10b1cef45581efb8dc">getOpenMPBaseScheduleType</a></div><div class="ttdeci">static OMPScheduleType getOpenMPBaseScheduleType(llvm::omp::ScheduleKind ClauseKind, bool HasChunks, bool HasSimdModifier)</div><div class="ttdoc">Determine which scheduling algorithm to use, determined from schedule clause arguments.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00138">OMPIRBuilder.cpp:138</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a9141f967188383108a69cc1b8ed3c195ae1cc9a390520055573d459de25747caa"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a9141f967188383108a69cc1b8ed3c195ae1cc9a390520055573d459de25747caa">llvm::GlobalValue::ProtectedVisibility</a></div><div class="ttdeci">@ ProtectedVisibility</div><div class="ttdoc">The GV is protected.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00065">GlobalValue.h:65</a></div></div>
<div class="ttc" id="aclassllvm_1_1OffloadEntriesInfoManager_html_a9736eb60d11b4a8d644d3e32346e7f56"><div class="ttname"><a href="classllvm_1_1OffloadEntriesInfoManager.html#a9736eb60d11b4a8d644d3e32346e7f56">llvm::OffloadEntriesInfoManager::registerTargetRegionEntryInfo</a></div><div class="ttdeci">void registerTargetRegionEntryInfo(TargetRegionEntryInfo EntryInfo, Constant *Addr, Constant *ID, OMPTargetRegionEntryKind Flags)</div><div class="ttdoc">Register target region entry.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l05054">OMPIRBuilder.cpp:5054</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_adf50671db83d2813e0d897ea2cfc9102"><div class="ttname"><a href="classllvm_1_1Function.html#adf50671db83d2813e0d897ea2cfc9102">llvm::Function::getFunctionType</a></div><div class="ttdeci">FunctionType * getFunctionType() const</div><div class="ttdoc">Returns the FunctionType for me.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00174">Function.h:174</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantArray_html_a0900dacdc7ad8e3ea0cc92993c7fd422"><div class="ttname"><a href="classllvm_1_1ConstantArray.html#a0900dacdc7ad8e3ea0cc92993c7fd422">llvm::ConstantArray::get</a></div><div class="ttdeci">static Constant * get(ArrayType *T, ArrayRef&lt; Constant * &gt; V)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01249">Constants.cpp:1249</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00614">SmallVector.h:614</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetIRAnalysis_html_a4c1acdb96111dcff6f3eb282adecf86b"><div class="ttname"><a href="classllvm_1_1TargetIRAnalysis.html#a4c1acdb96111dcff6f3eb282adecf86b">llvm::TargetIRAnalysis::run</a></div><div class="ttdeci">Result run(const Function &amp;F, FunctionAnalysisManager &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l01206">TargetTransformInfo.cpp:1206</a></div></div>
<div class="ttc" id="aclassllvm_1_1CanonicalLoopInfo_html_a5ddf1dc42b9030b248b6a6ec474512dd"><div class="ttname"><a href="classllvm_1_1CanonicalLoopInfo.html#a5ddf1dc42b9030b248b6a6ec474512dd">llvm::CanonicalLoopInfo::getHeader</a></div><div class="ttdeci">BasicBlock * getHeader() const</div><div class="ttdoc">The header is the entry for each iteration.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l02307">OMPIRBuilder.h:2307</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a7bde73131822e9cf0c2a0fc60dbdc645"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a7bde73131822e9cf0c2a0fc60dbdc645">llvm::OpenMPIRBuilder::applyWorkshareLoop</a></div><div class="ttdeci">InsertPointTy applyWorkshareLoop(DebugLoc DL, CanonicalLoopInfo *CLI, InsertPointTy AllocaIP, bool NeedsBarrier, llvm::omp::ScheduleKind SchedKind=llvm::omp::OMP_SCHEDULE_Default, Value *ChunkSize=nullptr, bool HasSimdModifier=false, bool HasMonotonicModifier=false, bool HasNonmonotonicModifier=false, bool HasOrderedClause=false)</div><div class="ttdoc">Modifies the canonical loop to be a workshare loop.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l02347">OMPIRBuilder.cpp:2347</a></div></div>
<div class="ttc" id="aclassllvm_1_1CodeExtractorAnalysisCache_html"><div class="ttname"><a href="classllvm_1_1CodeExtractorAnalysisCache.html">llvm::CodeExtractorAnalysisCache</a></div><div class="ttdoc">A cache for the CodeExtractor analysis.</div><div class="ttdef"><b>Definition:</b> <a href="CodeExtractor_8h_source.html#l00046">CodeExtractor.h:46</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html_a91ff894f756175a693c85bf73f79de9e"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html#a91ff894f756175a693c85bf73f79de9e">llvm::AnalysisManager::registerPass</a></div><div class="ttdeci">bool registerPass(PassBuilderT &amp;&amp;PassBuilder)</div><div class="ttdoc">Register an analysis pass with the manager.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00836">PassManager.h:836</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MCID_html_ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec"><div class="ttname"><a href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">llvm::MCID::Add</a></div><div class="ttdeci">@ Add</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00186">MCInstrDesc.h:186</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallSet_html_a1679469af9bb8ccfbe98441fb8228c79"><div class="ttname"><a href="classllvm_1_1SmallSet.html#a1679469af9bb8ccfbe98441fb8228c79">llvm::SmallSet::insert</a></div><div class="ttdeci">std::pair&lt; const_iterator, bool &gt; insert(const T &amp;V)</div><div class="ttdoc">insert - Insert an element into the set if it isn't already there.</div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00177">SmallSet.h:177</a></div></div>
<div class="ttc" id="aOMPIRBuilder_8cpp_html_ac697e5f78d67bbaccc98d1c82df6252c"><div class="ttname"><a href="OMPIRBuilder_8cpp.html#ac697e5f78d67bbaccc98d1c82df6252c">UnrollThresholdFactor</a></div><div class="ttdeci">static cl::opt&lt; double &gt; UnrollThresholdFactor(&quot;openmp-ir-builder-unroll-threshold-factor&quot;, cl::Hidden, cl::desc(&quot;Factor for the unroll threshold to account for code &quot; &quot;simplifications still taking place&quot;), cl::init(1.5))</div></div>
<div class="ttc" id="aclassllvm_1_1SmallString_html_af5dd7241878be5eed07736eb156bb10b"><div class="ttname"><a href="classllvm_1_1SmallString.html#af5dd7241878be5eed07736eb156bb10b">llvm::SmallString::str</a></div><div class="ttdeci">StringRef str() const</div><div class="ttdoc">Explicit conversion to StringRef.</div><div class="ttdef"><b>Definition:</b> <a href="SmallString_8h_source.html#l00261">SmallString.h:261</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7ac9213ec16587c17730f2d8e7723f692d"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7ac9213ec16587c17730f2d8e7723f692d">llvm::omp::OMPScheduleType::OrderedRuntime</a></div><div class="ttdeci">@ OrderedRuntime</div></div>
<div class="ttc" id="aOMPIRBuilder_8cpp_html_a7a68322ba864bccb8736e42fbc915a8a"><div class="ttname"><a href="OMPIRBuilder_8cpp.html#a7a68322ba864bccb8736e42fbc915a8a">getKmpcForDynamicInitForType</a></div><div class="ttdeci">static FunctionCallee getKmpcForDynamicInitForType(Type *Ty, Module &amp;M, OpenMPIRBuilder &amp;OMPBuilder)</div><div class="ttdoc">Returns an LLVM function to call for initializing loop bounds using OpenMP dynamic scheduling dependi...</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l02403">OMPIRBuilder.cpp:2403</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7a6097a8774ee56bd544db5668747dbef3"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a6097a8774ee56bd544db5668747dbef3">llvm::omp::OMPScheduleType::BaseGuidedIterativeChunked</a></div><div class="ttdeci">@ BaseGuidedIterativeChunked</div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615a9334c9815ddc2b25804c6c03b68cc39b"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a9334c9815ddc2b25804c6c03b68cc39b">llvm::AtomicRMWInst::UIncWrap</a></div><div class="ttdeci">@ UIncWrap</div><div class="ttdoc">Increment one up to a maximum value.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00770">Instructions.h:770</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html_a160e9e1a4fd597f83034c8b2ba316984"><div class="ttname"><a href="classllvm_1_1MDNode.html#a160e9e1a4fd597f83034c8b2ba316984">llvm::MDNode::replaceOperandWith</a></div><div class="ttdeci">void replaceOperandWith(unsigned I, Metadata *New)</div><div class="ttdoc">Replace a specific operand.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l00968">Metadata.cpp:968</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDBuilder_html"><div class="ttname"><a href="classllvm_1_1MDBuilder.html">llvm::MDBuilder</a></div><div class="ttdef"><b>Definition:</b> <a href="MDBuilder_8h_source.html#l00036">MDBuilder.h:36</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7a45e59530303d8f21b9f68d067b700046"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a45e59530303d8f21b9f68d067b700046">llvm::omp::OMPScheduleType::OrderedStaticChunked</a></div><div class="ttdeci">@ OrderedStaticChunked</div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1ReductionInfo_html"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1ReductionInfo.html">llvm::OpenMPIRBuilder::ReductionInfo</a></div><div class="ttdoc">Information about an OpenMP reduction.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l00811">OMPIRBuilder.h:811</a></div></div>
<div class="ttc" id="aclassllvm_1_1AllocaInst_html_af3bb24b322533dbe8a63c84b18568fe1"><div class="ttname"><a href="classllvm_1_1AllocaInst.html#af3bb24b322533dbe8a63c84b18568fe1">llvm::AllocaInst::setAlignment</a></div><div class="ttdeci">void setAlignment(Align Align)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00129">Instructions.h:129</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7ab0ca5a5d5a0a48d1d0d7128090747b9b"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7ab0ca5a5d5a0a48d1d0d7128090747b9b">llvm::omp::OMPScheduleType::UnorderedBalanced</a></div><div class="ttdeci">@ UnorderedBalanced</div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7a3f4e265045794ed0323bcb579c3269f2"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a3f4e265045794ed0323bcb579c3269f2">llvm::omp::OMPScheduleType::BaseStaticBalancedChunked</a></div><div class="ttdeci">@ BaseStaticBalancedChunked</div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7ab20e79b6bbe8e4d736ed588ad5f3c9c7"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7ab20e79b6bbe8e4d736ed588ad5f3c9c7">llvm::omp::OMPScheduleType::ModifierUnordered</a></div><div class="ttdeci">@ ModifierUnordered</div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a8f6f9b4a94dc0907499c03a9e1b6918b"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a8f6f9b4a94dc0907499c03a9e1b6918b">llvm::BasicBlock::back</a></div><div class="ttdeci">const Instruction &amp; back() const</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00328">BasicBlock.h:328</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a1af99f6f33b0db83a3e941fcb819fa29"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a1af99f6f33b0db83a3e941fcb819fa29">llvm::OpenMPIRBuilder::initialize</a></div><div class="ttdeci">void initialize()</div><div class="ttdoc">Initialize the internal state, this will put structures types and potentially other helpers into the ...</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00448">OMPIRBuilder.cpp:448</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeAnalysis_html"><div class="ttname"><a href="classllvm_1_1DominatorTreeAnalysis.html">llvm::DominatorTreeAnalysis</a></div><div class="ttdoc">Analysis pass which computes a DominatorTree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00279">Dominators.h:279</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a6e20e76960d952de088354cbcd14c3ab"><div class="ttname"><a href="classllvm_1_1Type.html#a6e20e76960d952de088354cbcd14c3ab">llvm::Type::getVoidTy</a></div><div class="ttdeci">static Type * getVoidTy(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00224">Type.cpp:224</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a6d3231fb84ed4182ec22e9442a87dbf8"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a6d3231fb84ed4182ec22e9442a87dbf8">llvm::BasicBlock::reverse_iterator</a></div><div class="ttdeci">InstListType::reverse_iterator reverse_iterator</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00089">BasicBlock.h:89</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_1_1InsertPoint_html"><div class="ttname"><a href="classllvm_1_1IRBuilderBase_1_1InsertPoint.html">llvm::IRBuilderBase::InsertPoint</a></div><div class="ttdoc">InsertPoint - A saved insertion point.</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00243">IRBuilder.h:243</a></div></div>
<div class="ttc" id="aRustDemangle_8cpp_html_a103d8cfe62c1651cd70e181746f8a840"><div class="ttname"><a href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">isValid</a></div><div class="ttdeci">static bool isValid(const char C)</div><div class="ttdoc">Returns true if C is a valid mangled character: &lt;0-9a-zA-Z_&gt;.</div><div class="ttdef"><b>Definition:</b> <a href="RustDemangle_8cpp_source.html#l00184">RustDemangle.cpp:184</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_aedfa75f0c85c4aa85b257f066fbea57ca04ed141708c0fd16723d212502b046ae"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca04ed141708c0fd16723d212502b046ae">llvm::GlobalValue::PrivateLinkage</a></div><div class="ttdeci">@ PrivateLinkage</div><div class="ttdoc">Like Internal, but omit from symbol table.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00056">GlobalValue.h:56</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a616640b3a100a0568702c749afee0aa9"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a616640b3a100a0568702c749afee0aa9">llvm::OpenMPIRBuilder::createTargetDeinit</a></div><div class="ttdeci">void createTargetDeinit(const LocationDescription &amp;Loc, bool IsSPMD)</div><div class="ttdoc">Create a runtime call for kmpc_target_deinit.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l03938">OMPIRBuilder.cpp:3938</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a28bf8984fbfb08fd27df435e631e6832"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a28bf8984fbfb08fd27df435e631e6832">llvm::ConstantExpr::getPointerBitCastOrAddrSpaceCast</a></div><div class="ttdeci">static Constant * getPointerBitCastOrAddrSpaceCast(Constant *C, Type *Ty)</div><div class="ttdoc">Create a BitCast or AddrSpaceCast for a pointer type depending on the address space.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02056">Constants.cpp:2056</a></div></div>
<div class="ttc" id="aclassllvm_1_1AttributeSet_html"><div class="ttname"><a href="classllvm_1_1AttributeSet.html">llvm::AttributeSet</a></div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00295">Attributes.h:295</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_1_1InsertPoint_html_add3c04c7d2a93c82846f7bea3ce2fe16"><div class="ttname"><a href="classllvm_1_1IRBuilderBase_1_1InsertPoint.html#add3c04c7d2a93c82846f7bea3ce2fe16">llvm::IRBuilderBase::InsertPoint::getPoint</a></div><div class="ttdeci">BasicBlock::iterator getPoint() const</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00259">IRBuilder.h:259</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7a4aabfa64277fa15805937e3812fa1161"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a4aabfa64277fa15805937e3812fa1161">llvm::omp::OMPScheduleType::ModifierMask</a></div><div class="ttdeci">@ ModifierMask</div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7a6b0f13196284756141d7a1fb003c7ad7"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a6b0f13196284756141d7a1fb003c7ad7">llvm::omp::OMPScheduleType::NomergeUnorderedGuidedAnalyticalChunked</a></div><div class="ttdeci">@ NomergeUnorderedGuidedAnalyticalChunked</div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a41da369a9d31d911c8af724d5630f724"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a41da369a9d31d911c8af724d5630f724">llvm::BasicBlock::moveBefore</a></div><div class="ttdeci">void moveBefore(BasicBlock *MovePos)</div><div class="ttdoc">Unlink this basic block from its current function and insert it into the function that MovePos lives ...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00136">BasicBlock.cpp:136</a></div></div>
<div class="ttc" id="aclassllvm_1_1CanonicalLoopInfo_html_a8ffbd9b1e60e2bb15da132610ff997ac"><div class="ttname"><a href="classllvm_1_1CanonicalLoopInfo.html#a8ffbd9b1e60e2bb15da132610ff997ac">llvm::CanonicalLoopInfo::getLatch</a></div><div class="ttdeci">BasicBlock * getLatch() const</div><div class="ttdoc">Reaching the latch indicates the end of the loop body code.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l02330">OMPIRBuilder.h:2330</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetRegionEntryInfo_html"><div class="ttname"><a href="structllvm_1_1TargetRegionEntryInfo.html">llvm::TargetRegionEntryInfo</a></div><div class="ttdoc">Data structure to contain the information needed to uniquely identify a target entry.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01910">OMPIRBuilder.h:1910</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7acecd17ad7e1609e795c3d82c6317325b"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7acecd17ad7e1609e795c3d82c6317325b">llvm::omp::OMPScheduleType::BaseGuidedSimd</a></div><div class="ttdeci">@ BaseGuidedSimd</div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7a89d1cc67c0e0820b5ed851176567e17c"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a89d1cc67c0e0820b5ed851176567e17c">llvm::omp::OMPScheduleType::OrderedAuto</a></div><div class="ttdeci">@ OrderedAuto</div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">llvm::CmpInst::ICMP_UGT</a></div><div class="ttdeci">@ ICMP_UGT</div><div class="ttdoc">unsigned greater than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00741">InstrTypes.h:741</a></div></div>
<div class="ttc" id="aRegAllocBasic_8cpp_html_ad5d00e1d77644d95847b9bf8da12b759"><div class="ttname"><a href="RegAllocBasic_8cpp.html#ad5d00e1d77644d95847b9bf8da12b759">Allocator</a></div><div class="ttdeci">Basic Register Allocator</div><div class="ttdef"><b>Definition:</b> <a href="RegAllocBasic_8cpp_source.html#l00143">RegAllocBasic.cpp:143</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_ab2caa29167597390ab2fc3cf30d70389"><div class="ttname"><a href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">llvm::CallBase::getArgOperand</a></div><div class="ttdeci">Value * getArgOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01351">InstrTypes.h:1351</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1UnrollingPreferences_html_a21e7febf468c370793f606da5cd0e6fe"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#a21e7febf468c370793f606da5cd0e6fe">llvm::TargetTransformInfo::UnrollingPreferences::Threshold</a></div><div class="ttdeci">unsigned Threshold</div><div class="ttdoc">The cost threshold for the unrolled loop.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00448">TargetTransformInfo.h:448</a></div></div>
<div class="ttc" id="aUnrollLoop_8h_html"><div class="ttname"><a href="UnrollLoop_8h.html">UnrollLoop.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a1a7f07aaef6a3bee130bf0e0f0536802"><div class="ttname"><a href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00090">Instruction.h:90</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a0c8ffe664a36e30d49c84d0aded2fe08"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">llvm::SmallVectorImpl::pop_back_val</a></div><div class="ttdeci">T pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00677">SmallVector.h:677</a></div></div>
<div class="ttc" id="anamespacellvm_1_1remarks_html_aeb5853e98ae4d9ab7cb002879736527fae139a585510a502bbf1841cf589f5086"><div class="ttname"><a href="namespacellvm_1_1remarks.html#aeb5853e98ae4d9ab7cb002879736527fae139a585510a502bbf1841cf589f5086">llvm::remarks::Type::Failure</a></div><div class="ttdeci">@ Failure</div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7a921ff3d852775c7d08ef3e8ab71fd827"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a921ff3d852775c7d08ef3e8ab71fd827">llvm::omp::OMPScheduleType::OrderedStatic</a></div><div class="ttdeci">@ OrderedStatic</div></div>
<div class="ttc" id="anamespacellvm_html_a13c1b5a253da5da49ce33d03dc1efc07"><div class="ttname"><a href="namespacellvm.html#a13c1b5a253da5da49ce33d03dc1efc07">llvm::to_string</a></div><div class="ttdeci">std::string to_string(const T &amp;Value)</div><div class="ttdef"><b>Definition:</b> <a href="ScopedPrinter_8h_source.html#l00085">ScopedPrinter.h:85</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html_a85ffb6531d4cda988ea81f18d4e56fb7"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#a85ffb6531d4cda988ea81f18d4e56fb7">llvm::ArrayRef::size</a></div><div class="ttdeci">size_t size() const</div><div class="ttdoc">size - Get the array size.</div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00163">ArrayRef.h:163</a></div></div>
<div class="ttc" id="aOMPIRBuilder_8cpp_html_a837459d66323524eae967be0266c92d9"><div class="ttname"><a href="OMPIRBuilder_8cpp.html#a837459d66323524eae967be0266c92d9">getFreshReductionFunc</a></div><div class="ttdeci">Function * getFreshReductionFunc(Module &amp;M)</div><div class="ttdoc">Create a function with a unique name and a &quot;void (i8*, i8*)&quot; signature in the given module and return...</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l01710">OMPIRBuilder.cpp:1710</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615a08ef06068dcd583c2476568dda59b324"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a08ef06068dcd583c2476568dda59b324">llvm::AtomicRMWInst::FAdd</a></div><div class="ttdeci">@ FAdd</div><div class="ttdoc">*p = old + v</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00755">Instructions.h:755</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a01875e4204852069dd4b7938cab4140b"><div class="ttname"><a href="classllvm_1_1Function.html#a01875e4204852069dd4b7938cab4140b">llvm::Function::addFnAttr</a></div><div class="ttdeci">void addFnAttr(Attribute::AttrKind Kind)</div><div class="ttdoc">Add function attributes to this function.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00550">Function.cpp:550</a></div></div>
<div class="ttc" id="aclassllvm_1_1raw__svector__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__svector__ostream.html">llvm::raw_svector_ostream</a></div><div class="ttdoc">A raw_ostream that writes to an SmallVector or SmallString.</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00672">raw_ostream.h:672</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a28153a5c4f51d07c8228ac5fb5eea266"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a28153a5c4f51d07c8228ac5fb5eea266">llvm::OpenMPIRBuilder::emitBarrierImpl</a></div><div class="ttdeci">InsertPointTy emitBarrierImpl(const LocationDescription &amp;Loc, omp::Directive DK, bool ForceSimpleCall, bool CheckCancelFlag)</div><div class="ttdoc">Generate a barrier runtime call.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00677">OMPIRBuilder.cpp:677</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionCallee_html"><div class="ttname"><a href="classllvm_1_1FunctionCallee.html">llvm::FunctionCallee</a></div><div class="ttdoc">A handy container for a FunctionType+Callee-pointer pair, which can be passed around as a single enti...</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00165">DerivedTypes.h:165</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html"><div class="ttname"><a href="classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02708">Instructions.h:2708</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a8de021e28a3c04c9216ad8decf104f02"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a8de021e28a3c04c9216ad8decf104f02">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">const Instruction * getTerminator() const LLVM_READONLY</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00127">BasicBlock.h:127</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_afe7af0c3ec2ef1f525173acd2ea4ba60"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#afe7af0c3ec2ef1f525173acd2ea4ba60">llvm::BasicBlock::removePredecessor</a></div><div class="ttdeci">void removePredecessor(BasicBlock *Pred, bool KeepOneInputPHIs=false)</div><div class="ttdoc">Update PHI nodes in this BasicBlock before removal of predecessor Pred.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00341">BasicBlock.cpp:341</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_ababd12964e70586441f75244fc816a8c"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#ababd12964e70586441f75244fc816a8c">llvm::OpenMPIRBuilder::FunctionGenCallback</a></div><div class="ttdeci">std::function&lt; Function *(StringRef FunctionName)&gt; FunctionGenCallback</div><div class="ttdoc">Functions used to generate a function with the given name.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01494">OMPIRBuilder.h:1494</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a29e0a562beb4b5d20eb0c426b363ceed"><div class="ttname"><a href="classllvm_1_1Function.html#a29e0a562beb4b5d20eb0c426b363ceed">llvm::Function::removeFromParent</a></div><div class="ttdeci">void removeFromParent()</div><div class="ttdoc">removeFromParent - This method unlinks 'this' from the containing module, but does not delete it.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00358">Function.cpp:358</a></div></div>
<div class="ttc" id="ablake3__impl_8h_html_a78823051d1dad34b9b3d8120112e674d"><div class="ttname"><a href="blake3__impl_8h.html#a78823051d1dad34b9b3d8120112e674d">IV</a></div><div class="ttdeci">static const uint32_t IV[8]</div><div class="ttdef"><b>Definition:</b> <a href="blake3__impl_8h_source.html#l00077">blake3_impl.h:77</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl&lt; uint64_t &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615a497e8f347648b1b2823ee0338c95f65f"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a497e8f347648b1b2823ee0338c95f65f">llvm::AtomicRMWInst::BAD_BINOP</a></div><div class="ttdeci">@ BAD_BINOP</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00778">Instructions.h:778</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7aecba1cdf984063a67c869dbb94d19dd3"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7aecba1cdf984063a67c869dbb94d19dd3">llvm::omp::OMPScheduleType::BaseStatic</a></div><div class="ttdeci">@ BaseStatic</div></div>
<div class="ttc" id="aclassllvm_1_1CodeExtractor_html_ad3a4770e725305d3529cba8c6562c85a"><div class="ttname"><a href="classllvm_1_1CodeExtractor.html#ad3a4770e725305d3529cba8c6562c85a">llvm::CodeExtractor::isEligible</a></div><div class="ttdeci">bool isEligible() const</div><div class="ttdoc">Test whether this code extractor is eligible.</div><div class="ttdef"><b>Definition:</b> <a href="CodeExtractor_8cpp_source.html#l00618">CodeExtractor.cpp:618</a></div></div>
<div class="ttc" id="aclassllvm_1_1CanonicalLoopInfo_html_a2077e6f8b41cd609c8e54e80767eb280"><div class="ttname"><a href="classllvm_1_1CanonicalLoopInfo.html#a2077e6f8b41cd609c8e54e80767eb280">llvm::CanonicalLoopInfo::getTripCount</a></div><div class="ttdeci">Value * getTripCount() const</div><div class="ttdoc">Returns the llvm::Value containing the number of loop iterations.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l02354">OMPIRBuilder.h:2354</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html_a6d883605206368bc536cc9ded97209b8"><div class="ttname"><a href="classllvm_1_1Module.html#a6d883605206368bc536cc9ded97209b8">llvm::Module::getDataLayout</a></div><div class="ttdeci">const DataLayout &amp; getDataLayout() const</div><div class="ttdoc">Get the data layout for the module's target platform.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8cpp_source.html#l00398">Module.cpp:398</a></div></div>
<div class="ttc" id="aDerivedTypes_8h_html"><div class="ttname"><a href="DerivedTypes_8h.html">DerivedTypes.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7a377f624764cdf5386a71e8efa9a1033d"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a377f624764cdf5386a71e8efa9a1033d">llvm::omp::OMPScheduleType::BaseAuto</a></div><div class="ttdeci">@ BaseAuto</div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html">llvm::SmallPtrSetImpl</a></div><div class="ttdoc">A templated base class for SmallPtrSet which provides the typesafe interface that is common across al...</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00344">SmallPtrSet.h:344</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html">llvm::AnalysisManager</a></div><div class="ttdoc">A container for analyses that lazily runs them and caches their results.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00042">InstructionSimplify.h:42</a></div></div>
<div class="ttc" id="aPassBuilderBindings_8cpp_html_ab76052bb166c65901edb603a3e1f03ab"><div class="ttname"><a href="PassBuilderBindings_8cpp.html#ab76052bb166c65901edb603a3e1f03ab">TM</a></div><div class="ttdeci">const char LLVMTargetMachineRef TM</div><div class="ttdef"><b>Definition:</b> <a href="PassBuilderBindings_8cpp_source.html#l00047">PassBuilderBindings.cpp:47</a></div></div>
<div class="ttc" id="aclassllvm_1_1PassInstrumentationAnalysis_html"><div class="ttname"><a href="classllvm_1_1PassInstrumentationAnalysis.html">llvm::PassInstrumentationAnalysis</a></div><div class="ttdoc">Pseudo-analysis pass that exposes the PassInstrumentation to pass managers.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00594">PassManager.h:594</a></div></div>
<div class="ttc" id="aclassllvm_1_1IntegerType_html_a14f7b4f1aed38192fb6b7772eb506bdb"><div class="ttname"><a href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">llvm::IntegerType::get</a></div><div class="ttdeci">static IntegerType * get(LLVMContext &amp;C, unsigned NumBits)</div><div class="ttdoc">This static method is the primary way of constructing an IntegerType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00313">Type.cpp:313</a></div></div>
<div class="ttc" id="astructllvm_1_1TargetTransformInfo_1_1UnrollingPreferences_html_af9a7105299bd43b8b61c803f26e4a31b"><div class="ttname"><a href="structllvm_1_1TargetTransformInfo_1_1UnrollingPreferences.html#af9a7105299bd43b8b61c803f26e4a31b">llvm::TargetTransformInfo::UnrollingPreferences::OptSizeThreshold</a></div><div class="ttdeci">unsigned OptSizeThreshold</div><div class="ttdoc">The cost threshold for the unrolled loop when optimizing for size (set to UINT_MAX to disable).</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00462">TargetTransformInfo.h:462</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a2a4b97bb7670d306c756cdbd5ee9b560"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a2a4b97bb7670d306c756cdbd5ee9b560">llvm::OpenMPIRBuilder::emitFlush</a></div><div class="ttdeci">void emitFlush(const LocationDescription &amp;Loc)</div><div class="ttdoc">Generate a flush runtime call.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l01230">OMPIRBuilder.cpp:1230</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallInst_html"><div class="ttname"><a href="classllvm_1_1CallInst.html">llvm::CallInst</a></div><div class="ttdoc">This class represents a function call, abstracting a target machine's calling convention.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01485">Instructions.h:1485</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1OutlineInfo_html_a218bc49443ef1f05fc8074d872d41fcd"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1OutlineInfo.html#a218bc49443ef1f05fc8074d872d41fcd">llvm::OpenMPIRBuilder::OutlineInfo::collectBlocks</a></div><div class="ttdeci">void collectBlocks(SmallPtrSetImpl&lt; BasicBlock * &gt; &amp;BlockSet, SmallVectorImpl&lt; BasicBlock * &gt; &amp;BlockVector)</div><div class="ttdoc">Collect all blocks in between EntryBB and ExitBB in both the given vector and set.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l04766">OMPIRBuilder.cpp:4766</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1MapperAllocas_html"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1MapperAllocas.html">llvm::OpenMPIRBuilder::MapperAllocas</a></div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01107">OMPIRBuilder.h:1107</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a16d7c5f77008a84ae20bf4a5c41e51f0a4ea7801f17a4e5485e8b050c052fb443"><div class="ttname"><a href="namespacellvm_1_1omp.html#a16d7c5f77008a84ae20bf4a5c41e51f0a4ea7801f17a4e5485e8b050c052fb443">llvm::omp::RTLDependInfoFields::Flags</a></div><div class="ttdeci">@ Flags</div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="anamespacellvm_html_abd642fa74effc122158e6fb11da78600"><div class="ttname"><a href="namespacellvm.html#abd642fa74effc122158e6fb11da78600">llvm::gatherUnrollingPreferences</a></div><div class="ttdeci">TargetTransformInfo::UnrollingPreferences gatherUnrollingPreferences(Loop *L, ScalarEvolution &amp;SE, const TargetTransformInfo &amp;TTI, BlockFrequencyInfo *BFI, ProfileSummaryInfo *PSI, llvm::OptimizationRemarkEmitter &amp;ORE, int OptLevel, std::optional&lt; unsigned &gt; UserThreshold, std::optional&lt; unsigned &gt; UserCount, std::optional&lt; bool &gt; UserAllowPartial, std::optional&lt; bool &gt; UserRuntime, std::optional&lt; bool &gt; UserUpperBound, std::optional&lt; unsigned &gt; UserFullUnrollMaxCount)</div><div class="ttdoc">Gather the various unrolling parameters based on the defaults, compiler flags, TTI overrides and user...</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnrollPass_8cpp_source.html#l00183">LoopUnrollPass.cpp:183</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CodeGenOpt_html_ad7e52174abb1cfb84238ad1ac475ee36"><div class="ttname"><a href="namespacellvm_1_1CodeGenOpt.html#ad7e52174abb1cfb84238ad1ac475ee36">llvm::CodeGenOpt::Level</a></div><div class="ttdeci">Level</div><div class="ttdoc">Code generation optimization level.</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_8h_source.html#l00057">CodeGen.h:57</a></div></div>
<div class="ttc" id="aclassllvm_1_1UnreachableInst_html"><div class="ttname"><a href="classllvm_1_1UnreachableInst.html">llvm::UnreachableInst</a></div><div class="ttdoc">This function has undefined behavior.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l04773">Instructions.h:4773</a></div></div>
<div class="ttc" id="aclassllvm_1_1ValueMap_html_a15f92579a5fc316dab8cd1fad51015ef"><div class="ttname"><a href="classllvm_1_1ValueMap.html#a15f92579a5fc316dab8cd1fad51015ef">llvm::ValueMap::lookup</a></div><div class="ttdeci">ValueT lookup(const KeyT &amp;Val) const</div><div class="ttdoc">lookup - Return the entry for the specified key, or a default constructed value if no such entry exis...</div><div class="ttdef"><b>Definition:</b> <a href="ValueMap_8h_source.html#l00164">ValueMap.h:164</a></div></div>
<div class="ttc" id="aclassllvm_1_1SwitchInst_html"><div class="ttname"><a href="classllvm_1_1SwitchInst.html">llvm::SwitchInst</a></div><div class="ttdoc">Multiway switch.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03283">Instructions.h:3283</a></div></div>
<div class="ttc" id="aclassllvm_1_1DebugLoc_html"><div class="ttname"><a href="classllvm_1_1DebugLoc.html">llvm::DebugLoc</a></div><div class="ttdoc">A debug info location.</div><div class="ttdef"><b>Definition:</b> <a href="DebugLoc_8h_source.html#l00033">DebugLoc.h:33</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key_html_a1958a762261549463a280bac3274d6d5"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">llvm::AMDGPU::HSAMD::Kernel::Key::Args</a></div><div class="ttdeci">constexpr char Args[]</div><div class="ttdoc">Key for Kernel::Metadata::mArgs.</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUMetadata_8h_source.html#l00394">AMDGPUMetadata.h:394</a></div></div>
<div class="ttc" id="aclassllvm_1_1AllocaInst_html"><div class="ttname"><a href="classllvm_1_1AllocaInst.html">llvm::AllocaInst</a></div><div class="ttdoc">an instruction to allocate memory on the stack</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00058">Instructions.h:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1SwitchInst_html_a62abc2475d09c01d583ba24a487898fd"><div class="ttname"><a href="classllvm_1_1SwitchInst.html#a62abc2475d09c01d583ba24a487898fd">llvm::SwitchInst::addCase</a></div><div class="ttdeci">void addCase(ConstantInt *OnVal, BasicBlock *Dest)</div><div class="ttdoc">Add an entry to the switch instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l04532">Instructions.cpp:4532</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_abe1de1520a21f77ac57cc210bf0fb0b4"><div class="ttname"><a href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00169">User.h:169</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00411">CommandLine.h:411</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html"><div class="ttname"><a href="classllvm_1_1BranchInst.html">llvm::BranchInst</a></div><div class="ttdoc">Conditional or Unconditional Branch instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03139">Instructions.h:3139</a></div></div>
<div class="ttc" id="anamespacellvm_1_1M68kBeads_html_a7eeab1fe8f39bf89dcd7929b816ebfcca27d0e059322508a76f918503800ef1bd"><div class="ttname"><a href="namespacellvm_1_1M68kBeads.html#a7eeab1fe8f39bf89dcd7929b816ebfcca27d0e059322508a76f918503800ef1bd">llvm::M68kBeads::Term</a></div><div class="ttdeci">@ Term</div><div class="ttdef"><b>Definition:</b> <a href="M68kBaseInfo_8h_source.html#l00090">M68kBaseInfo.h:90</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7a6102400852d050aeb45f54e39cd6dbbc"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a6102400852d050aeb45f54e39cd6dbbc">llvm::omp::OMPScheduleType::UnorderedGuidedSimd</a></div><div class="ttdeci">@ UnorderedGuidedSimd</div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615abe171d96ba8de66fb30e08c00211591e"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615abe171d96ba8de66fb30e08c00211591e">llvm::AtomicRMWInst::UMax</a></div><div class="ttdeci">@ UMax</div><div class="ttdoc">*p = old &gt;unsigned v ? old : v</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00750">Instructions.h:750</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a70356a38271d388e7c4b477cef0d7b2c"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a70356a38271d388e7c4b477cef0d7b2c">llvm::OpenMPIRBuilder::createCopyinClauseBlocks</a></div><div class="ttdeci">InsertPointTy createCopyinClauseBlocks(InsertPointTy IP, Value *MasterAddr, Value *PrivateAddr, llvm::IntegerType *IntPtrTy, bool BranchtoEnd=true)</div><div class="ttdoc">Generate conditional branch and relevant BasicBlocks through which private threads copy the 'copyin' ...</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l03701">OMPIRBuilder.cpp:3701</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_af2808c704c935cee35e9529907b59b1c"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#af2808c704c935cee35e9529907b59b1c">llvm::OpenMPIRBuilder::createCopyPrivate</a></div><div class="ttdeci">InsertPointTy createCopyPrivate(const LocationDescription &amp;Loc, llvm::Value *BufSize, llvm::Value *CpyBuf, llvm::Value *CpyFn, llvm::Value *DidIt)</div><div class="ttdoc">Generator for __kmpc_copyprivate.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l03415">OMPIRBuilder.cpp:3415</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html"><div class="ttname"><a href="classllvm_1_1SetVector.html">llvm::SetVector&lt; Value * &gt;</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7">llvm::omp::OMPScheduleType</a></div><div class="ttdeci">OMPScheduleType</div><div class="ttdef"><b>Definition:</b> <a href="OMPConstants_8h_source.html#l00077">OMPConstants.h:77</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a499ea32ca1b8d16cedfe01d1e5b08f29"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a499ea32ca1b8d16cedfe01d1e5b08f29">llvm::SmallVectorImpl::reserve</a></div><div class="ttdeci">void reserve(size_type N)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00667">SmallVector.h:667</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a034dc6253a2a36f78ac071a7c12d5c27"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a034dc6253a2a36f78ac071a7c12d5c27">llvm::OpenMPIRBuilder::getOrCreateRuntimeFunction</a></div><div class="ttdeci">FunctionCallee getOrCreateRuntimeFunction(Module &amp;M, omp::RuntimeFunction FnID)</div><div class="ttdoc">Return the function declaration for the runtime function with FnID.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00383">OMPIRBuilder.cpp:383</a></div></div>
<div class="ttc" id="aLoopPeel_8h_html"><div class="ttname"><a href="LoopPeel_8h.html">LoopPeel.h</a></div></div>
<div class="ttc" id="aBasicBlockUtils_8h_html"><div class="ttname"><a href="BasicBlockUtils_8h.html">BasicBlockUtils.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Triple_html_acf7f07dbe7dd1f7edd291b75005280bb"><div class="ttname"><a href="classllvm_1_1Triple.html#acf7f07dbe7dd1f7edd291b75005280bb">llvm::Triple::isWasm</a></div><div class="ttdeci">bool isWasm() const</div><div class="ttdoc">Tests whether the target is wasm (32- and 64-bit).</div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00921">Triple.h:921</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad295cb34421c21507bc9cdefe1ba3f16"><div class="ttname"><a href="namespacellvm.html#ad295cb34421c21507bc9cdefe1ba3f16">llvm::SplitBlock</a></div><div class="ttdeci">BasicBlock * SplitBlock(BasicBlock *Old, Instruction *SplitPt, DominatorTree *DT, LoopInfo *LI=nullptr, MemorySSAUpdater *MSSAU=nullptr, const Twine &amp;BBName=&quot;&quot;, bool Before=false)</div><div class="ttdoc">Split the specified block at the specified instruction.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00935">BasicBlockUtils.cpp:935</a></div></div>
<div class="ttc" id="aValue_8h_html"><div class="ttname"><a href="Value_8h.html">Value.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1pdb_html_a33e853ec74d48b1340d1d4bae772d30bae1e4c8c9ccd9fc39c391da4bcd093fb2"><div class="ttname"><a href="namespacellvm_1_1pdb.html#a33e853ec74d48b1340d1d4bae772d30bae1e4c8c9ccd9fc39c391da4bcd093fb2">llvm::pdb::PDB_SymType::Block</a></div><div class="ttdeci">@ Block</div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1ReductionInfo_html_a4a8f38b55a8be56a9cc93b5ef051e9e7"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1ReductionInfo.html#a4a8f38b55a8be56a9cc93b5ef051e9e7">llvm::OpenMPIRBuilder::ReductionInfo::AtomicReductionGen</a></div><div class="ttdeci">AtomicReductionGenTy AtomicReductionGen</div><div class="ttdoc">Callback for generating the atomic reduction body, may be null.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l00840">OMPIRBuilder.h:840</a></div></div>
<div class="ttc" id="aTargetRegistry_8h_html"><div class="ttname"><a href="TargetRegistry_8h.html">TargetRegistry.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_aa242d8ab89216c14beab812e07009b2a"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aa242d8ab89216c14beab812e07009b2a">llvm::GlobalValue::setVisibility</a></div><div class="ttdeci">void setVisibility(VisibilityTypes V)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00250">GlobalValue.h:250</a></div></div>
<div class="ttc" id="aclassllvm_1_1CanonicalLoopInfo_html_afe4ae11bae0a25e5ddc9615ef6852aed"><div class="ttname"><a href="classllvm_1_1CanonicalLoopInfo.html#afe4ae11bae0a25e5ddc9615ef6852aed">llvm::CanonicalLoopInfo::getBody</a></div><div class="ttdeci">BasicBlock * getBody() const</div><div class="ttdoc">The body block is the single entry for a loop iteration and not controlled by CanonicalLoopInfo.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l02322">OMPIRBuilder.h:2322</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicCmpXchgInst_html_a7ce03ab5b2a6006ebcdfe804e4c8f1a1"><div class="ttname"><a href="classllvm_1_1AtomicCmpXchgInst.html#a7ce03ab5b2a6006ebcdfe804e4c8f1a1">llvm::AtomicCmpXchgInst::getStrongestFailureOrdering</a></div><div class="ttdeci">static AtomicOrdering getStrongestFailureOrdering(AtomicOrdering SuccessOrdering)</div><div class="ttdoc">Returns the strongest permitted ordering on failure, given the desired ordering on success.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00666">Instructions.h:666</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopNest_html"><div class="ttname"><a href="classllvm_1_1LoopNest.html">llvm::LoopNest</a></div><div class="ttdoc">This class represents a loop nest and can be used to query its properties.</div><div class="ttdef"><b>Definition:</b> <a href="LoopNestAnalysis_8h_source.html#l00028">LoopNestAnalysis.h:28</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00074">Value.h:74</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicCmpXchgInst_html"><div class="ttname"><a href="classllvm_1_1AtomicCmpXchgInst.html">llvm::AtomicCmpXchgInst</a></div><div class="ttdoc">An instruction that atomically checks whether a specified value is in a memory location,...</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00513">Instructions.h:513</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7adfd02d2fed222f2c28301f5ac837f2b2"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7adfd02d2fed222f2c28301f5ac837f2b2">llvm::omp::OMPScheduleType::UnorderedStaticChunked</a></div><div class="ttdeci">@ UnorderedStaticChunked</div></div>
<div class="ttc" id="aOMPIRBuilder_8cpp_html_ac04904b32ea7f45e108b8752b1a940e7"><div class="ttname"><a href="OMPIRBuilder_8cpp.html#ac04904b32ea7f45e108b8752b1a940e7">getKmpcForStaticInitForType</a></div><div class="ttdeci">static FunctionCallee getKmpcForStaticInitForType(Type *Ty, Module &amp;M, OpenMPIRBuilder &amp;OMPBuilder)</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l02105">OMPIRBuilder.cpp:2105</a></div></div>
<div class="ttc" id="aclassllvm_1_1Directive_html"><div class="ttname"><a href="classllvm_1_1Directive.html">llvm::Directive</a></div><div class="ttdef"><b>Definition:</b> <a href="DirectiveEmitter_8h_source.html#l00105">DirectiveEmitter.h:105</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLibraryAnalysis_html"><div class="ttname"><a href="classllvm_1_1TargetLibraryAnalysis.html">llvm::TargetLibraryAnalysis</a></div><div class="ttdoc">Analysis pass providing the TargetLibraryInfo.</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00540">TargetLibraryInfo.h:540</a></div></div>
<div class="ttc" id="aTargetLibraryInfo_8cpp_html_aca185e6d0e9f423dbb24440206454872a8ce14d8b0fc90289ee23848f6de11c47"><div class="ttname"><a href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a8ce14d8b0fc90289ee23848f6de11c47">Void</a></div><div class="ttdeci">@ Void</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8cpp_source.html#l00046">TargetLibraryInfo.cpp:46</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html_a7ca5197533a9c1fb8a2bd30587fcec6b"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#a7ca5197533a9c1fb8a2bd30587fcec6b">llvm::ArrayRef::end</a></div><div class="ttdeci">iterator end() const</div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00152">ArrayRef.h:152</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9bccbe67aaab722783ca4e7c504aaaa7a56a57d29a3f9dda8671b4d6490a94b08"><div class="ttname"><a href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7a56a57d29a3f9dda8671b4d6490a94b08">llvm::AtomicOrdering::NotAtomic</a></div><div class="ttdeci">@ NotAtomic</div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7a44a9325b9b228081d8841907454a44ef"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a44a9325b9b228081d8841907454a44ef">llvm::omp::OMPScheduleType::NomergeUnorderedTrapezoidal</a></div><div class="ttdeci">@ NomergeUnorderedTrapezoidal</div></div>
<div class="ttc" id="astructllvm_1_1TargetRegionEntryInfo_html_a70f195e58ff3b0960a5c0884449d092a"><div class="ttname"><a href="structllvm_1_1TargetRegionEntryInfo.html#a70f195e58ff3b0960a5c0884449d092a">llvm::TargetRegionEntryInfo::Line</a></div><div class="ttdeci">unsigned Line</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01914">OMPIRBuilder.h:1914</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopAnalysis_html"><div class="ttname"><a href="classllvm_1_1LoopAnalysis.html">llvm::LoopAnalysis</a></div><div class="ttdoc">Analysis pass that exposes the LoopInfo for a function.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l01268">LoopInfo.h:1268</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sampleprof_html_a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41"><div class="ttname"><a href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">llvm::sampleprof::Base</a></div><div class="ttdeci">@ Base</div><div class="ttdef"><b>Definition:</b> <a href="Discriminator_8h_source.html#l00058">Discriminator.h:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1DIFile_html"><div class="ttname"><a href="classllvm_1_1DIFile.html">llvm::DIFile</a></div><div class="ttdoc">File.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8h_source.html#l00562">DebugInfoMetadata.h:562</a></div></div>
<div class="ttc" id="aclassllvm_1_1OffloadEntriesInfoManager_html_a4503192ffc49753d6b8ec734f2927742"><div class="ttname"><a href="classllvm_1_1OffloadEntriesInfoManager.html#a4503192ffc49753d6b8ec734f2927742">llvm::OffloadEntriesInfoManager::initializeDeviceGlobalVarEntryInfo</a></div><div class="ttdeci">void initializeDeviceGlobalVarEntryInfo(StringRef Name, OMPTargetGlobalVarEntryKind Flags, unsigned Order)</div><div class="ttdoc">Initialize device global variable entry.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l05110">OMPIRBuilder.cpp:5110</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionType_html"><div class="ttname"><a href="classllvm_1_1FunctionType.html">llvm::FunctionType</a></div><div class="ttdoc">Class to represent function types.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00103">DerivedTypes.h:103</a></div></div>
<div class="ttc" id="aclassllvm_1_1Use_html"><div class="ttname"><a href="classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdoc">A Use represents the edge between a Value definition and its users.</div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00043">Use.h:43</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7a8a8a4a010edce2d7bbcea890feb6890d"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7a8a8a4a010edce2d7bbcea890feb6890d">llvm::omp::OMPScheduleType::NomergeOrderedStaticChunked</a></div><div class="ttdeci">@ NomergeOrderedStaticChunked</div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a396fcfee6914c76974b73c3d203da6a5"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">llvm::SmallVectorImpl::emplace_back</a></div><div class="ttdeci">reference emplace_back(ArgTypes &amp;&amp;... Args)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00941">SmallVector.h:941</a></div></div>
<div class="ttc" id="aSmallSet_8h_html"><div class="ttname"><a href="SmallSet_8h.html">SmallSet.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a6bc6fb89fe2e91c25559a8631f56e27e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">llvm::SmallPtrSetImpl::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(PtrType Ptr)</div><div class="ttdoc">Inserts Ptr if and only if there is no element in the container equal to Ptr.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00365">SmallPtrSet.h:365</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a557089bd8b3a607f7c3c0e5e024241c8"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a557089bd8b3a607f7c3c0e5e024241c8">llvm::OpenMPIRBuilder::createOffloadEntry</a></div><div class="ttdeci">void createOffloadEntry(Constant *ID, Constant *Addr, uint64_t Size, int32_t Flags, GlobalValue::LinkageTypes)</div><div class="ttdoc">Creates offloading entry for the provided entry ID ID, address Addr, size Size, and flags Flags.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l04783">OMPIRBuilder.cpp:4783</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1LocationDescription_html_aa15e9d88f98f6d7a0898e6aff4753040"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">llvm::OpenMPIRBuilder::LocationDescription::IP</a></div><div class="ttdeci">InsertPointTy IP</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l00311">OMPIRBuilder.h:311</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615aa1184a7e35e94d162a2d40f2b11beeb2"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615aa1184a7e35e94d162a2d40f2b11beeb2">llvm::AtomicRMWInst::Max</a></div><div class="ttdeci">@ Max</div><div class="ttdoc">*p = old &gt;signed v ? old : v</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00746">Instructions.h:746</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:04:26 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Analysis/DependenceGraphBuilder.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a25db018342d3ae6c7e6779086c18378.html">Analysis</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">DependenceGraphBuilder.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="DependenceGraphBuilder_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- DependenceGraphBuilder.cpp ------------------------------------------==//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">// This file implements common steps of the build algorithm for construction</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// of dependence graphs such as DDG and PDG.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160; </div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DependenceGraphBuilder_8h.html">llvm/Analysis/DependenceGraphBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DepthFirstIterator_8h.html">llvm/ADT/DepthFirstIterator.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="EnumeratedArray_8h.html">llvm/ADT/EnumeratedArray.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PostOrderIterator_8h.html">llvm/ADT/PostOrderIterator.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SCCIterator_8h.html">llvm/ADT/SCCIterator.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DDG_8h.html">llvm/Analysis/DDG.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160; </div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160; </div>
<div class="line"><a name="l00022"></a><span class="lineno"><a class="line" href="DependenceGraphBuilder_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   22</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;dgb&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160; </div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(TotalGraphs, <span class="stringliteral">&quot;Number of dependence graphs created.&quot;</span>);</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(TotalDefUseEdges, <span class="stringliteral">&quot;Number of def-use edges created.&quot;</span>);</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(TotalMemoryEdges, <span class="stringliteral">&quot;Number of memory dependence edges created.&quot;</span>);</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(TotalFineGrainedNodes, <span class="stringliteral">&quot;Number of fine-grained nodes created.&quot;</span>);</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(TotalPiBlockNodes, <span class="stringliteral">&quot;Number of pi-block nodes created.&quot;</span>);</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(TotalConfusedEdges,</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;          <span class="stringliteral">&quot;Number of confused memory dependencies between two nodes.&quot;</span>);</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(TotalEdgeReversals,</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;          <span class="stringliteral">&quot;Number of times the source and sink of dependence was reversed to &quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;          <span class="stringliteral">&quot;expose cycles in the graph.&quot;</span>);</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160; </div>
<div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="DependenceGraphBuilder_8cpp.html#a589210b19d2b9bc5a4d4371b379fc4e0">   35</a></span>&#160;<span class="keyword">using</span> <a class="code" href="classllvm_1_1SmallVector.html">InstructionListType</a> = <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 2&gt;</a>;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160; </div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">//===--------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">// AbstractDependenceGraphBuilder implementation</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">//===--------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160; </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> G&gt;</div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="classllvm_1_1AbstractDependenceGraphBuilder.html#a022f8d18fe9e9e880c51db47e2f372db">   42</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1AbstractDependenceGraphBuilder.html#a022f8d18fe9e9e880c51db47e2f372db">AbstractDependenceGraphBuilder&lt;G&gt;::computeInstructionOrdinals</a>() {</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <span class="comment">// The BBList is expected to be in program order.</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <span class="keywordtype">size_t</span> NextOrdinal = 1;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : BBList)</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;      InstOrdinalMap.insert(std::make_pair(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, NextOrdinal++));</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;}</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160; </div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> G&gt;</div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="classllvm_1_1AbstractDependenceGraphBuilder.html#a56732d193d3946d953c77a80e07ef61a">   51</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1AbstractDependenceGraphBuilder.html#a56732d193d3946d953c77a80e07ef61a">AbstractDependenceGraphBuilder&lt;G&gt;::createFineGrainedNodes</a>() {</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  ++TotalGraphs;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IMap.empty() &amp;&amp; <span class="stringliteral">&quot;Expected empty instruction map at start&quot;</span>);</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : BBList)</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;      <span class="keyword">auto</span> &amp;NewNode = createFineGrainedNode(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;      IMap.insert(std::make_pair(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, &amp;NewNode));</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;      NodeOrdinalMap.insert(std::make_pair(&amp;NewNode, getOrdinal(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)));</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;      ++TotalFineGrainedNodes;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    }</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;}</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> G&gt;</div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="classllvm_1_1AbstractDependenceGraphBuilder.html#a008891a00a9aec8710d95ec82fd72196">   64</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1AbstractDependenceGraphBuilder.html#a008891a00a9aec8710d95ec82fd72196">AbstractDependenceGraphBuilder&lt;G&gt;::createAndConnectRootNode</a>() {</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <span class="comment">// Create a root node that connects to every connected component of the graph.</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="comment">// This is done to allow graph iterators to visit all the disjoint components</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="comment">// of the graph, in a single walk.</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="comment">// This algorithm works by going through each node of the graph and for each</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <span class="comment">// node N, do a DFS starting from N. A rooted edge is established between the</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <span class="comment">// root node and N (if N is not yet visited). All the nodes reachable from N</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="comment">// are marked as visited and are skipped in the DFS of subsequent nodes.</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="comment">// Note: This algorithm tries to limit the number of edges out of the root</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="comment">// node to some extent, but there may be redundant edges created depending on</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="comment">// the iteration order. For example for a graph {A -&gt; B}, an edge from the</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="comment">// root node is added to both nodes if B is visited before A. While it does</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="comment">// not result in minimal number of edges, this approach saves compile-time</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <span class="comment">// while keeping the number of edges in check.</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <span class="keyword">auto</span> &amp;RootNode = createRootNode();</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <a class="code" href="structllvm_1_1df__iterator__default__set.html">df_iterator_default_set&lt;const NodeType *, 4&gt;</a> Visited;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> : Graph) {</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordflow">if</span> (*<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> == RootNode)</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="namespacellvm.html#a4ab7d898571959c38528b05234070ac6">depth_first_ext</a>(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, Visited))</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> == <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>)</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        createRootedEdge(RootNode, *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  }</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;}</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160; </div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="classllvm_1_1AbstractDependenceGraphBuilder.html#afba90b653098f15528a273ced632683a">   91</a></span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> G&gt; <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1AbstractDependenceGraphBuilder.html#afba90b653098f15528a273ced632683a">AbstractDependenceGraphBuilder&lt;G&gt;::createPiBlocks</a>() {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="keywordflow">if</span> (!shouldCreatePiBlocks())</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160; </div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;==== Start of Creation of Pi-Blocks ===\n&quot;</span>);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="comment">// The overall algorithm is as follows:</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="comment">// 1. Identify SCCs and for each SCC create a pi-block node containing all</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="comment">//    the nodes in that SCC.</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="comment">// 2. Identify incoming edges incident to the nodes inside of the SCC and</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="comment">//    reconnect them to the pi-block node.</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="comment">// 3. Identify outgoing edges from the nodes inside of the SCC to nodes</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="comment">//    outside of it and reconnect them so that the edges are coming out of the</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="comment">//    SCC node instead.</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="comment">// Adding nodes as we iterate through the SCCs cause the SCC</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="comment">// iterators to get invalidated. To prevent this invalidation, we first</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="comment">// collect a list of nodes that are part of an SCC, and then iterate over</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="comment">// those lists to create the pi-block nodes. Each element of the list is a</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="comment">// list of nodes in an SCC. Note: trivial SCCs containing a single node are</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <span class="comment">// ignored.</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;NodeListType, 4&gt;</a> ListOfSCCs;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="namespacellvm_1_1AMDGPU_1_1CPol.html#a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a">SCC</a> : <a class="code" href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">make_range</a>(<a class="code" href="namespacellvm.html#a71882a8257c58a4d9401db39622871a6">scc_begin</a>(&amp;Graph), <a class="code" href="namespacellvm.html#a221dd975c8835e667ee59a36d4d6cc92">scc_end</a>(&amp;Graph))) {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1CPol.html#a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a">SCC</a>.size() &gt; 1)</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      ListOfSCCs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1CPol.html#a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a">SCC</a>.begin(), <a class="code" href="namespacellvm_1_1AMDGPU_1_1CPol.html#a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a">SCC</a>.end());</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  }</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160; </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1SmallVector.html">NodeListType</a> &amp;<a class="code" href="DetailedRecordsBackend_8cpp.html#a4fc34b120ed3bd1120c1eb36abbcd6af">NL</a> : ListOfSCCs) {</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Creating pi-block node with &quot;</span> &lt;&lt; <a class="code" href="DetailedRecordsBackend_8cpp.html#a4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>.size()</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; nodes in it.\n&quot;</span>);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160; </div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="comment">// SCC iterator may put the nodes in an order that&#39;s different from the</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="comment">// program order. To preserve original program order, we sort the list of</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="comment">// nodes based on ordinal numbers computed earlier.</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <a class="code" href="namespacellvm.html#a74cdbd1e4f731e7d7cd83461b8b1de0b">llvm::sort</a>(<a class="code" href="DetailedRecordsBackend_8cpp.html#a4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>, [&amp;](NodeType *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, NodeType *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>) {</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      <span class="keywordflow">return</span> getOrdinal(*<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>) &lt; getOrdinal(*<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    });</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    NodeType &amp;PiNode = createPiBlock(<a class="code" href="DetailedRecordsBackend_8cpp.html#a4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    ++TotalPiBlockNodes;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160; </div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="comment">// Build a set to speed up the lookup for edges whose targets</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="comment">// are inside the SCC.</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;NodeType *, 4&gt;</a> NodesInSCC(<a class="code" href="DetailedRecordsBackend_8cpp.html#a4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>.begin(), <a class="code" href="DetailedRecordsBackend_8cpp.html#a4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>.end());</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="comment">// We have the set of nodes in the SCC. We go through the set of nodes</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="comment">// that are outside of the SCC and look for edges that cross the two sets.</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordflow">for</span> (NodeType *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> : Graph) {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      <span class="comment">// Skip the SCC node and all the nodes inside of it.</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      <span class="keywordflow">if</span> (*<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> == PiNode || NodesInSCC.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>))</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      <span class="keyword">enum</span> <a class="code" href="structllvm_1_1Loop_1_1LoopBounds.html#a1c06ad0290f168148c08edc0ce69703f">Direction</a> {</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        Incoming,      <span class="comment">// Incoming edges to the SCC</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        Outgoing,      <span class="comment">// Edges going ot of the SCC</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        DirectionCount <span class="comment">// To make the enum usable as an array index.</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      };</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      <span class="comment">// Use these flags to help us avoid creating redundant edges. If there</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      <span class="comment">// are more than one edges from an outside node to inside nodes, we only</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      <span class="comment">// keep one edge from that node to the pi-block node. Similarly, if</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      <span class="comment">// there are more than one edges from inside nodes to an outside node,</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      <span class="comment">// we only keep one edge from the pi-block node to the outside node.</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      <span class="comment">// There is a flag defined for each direction (incoming vs outgoing) and</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      <span class="comment">// for each type of edge supported, using a two-dimensional boolean</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      <span class="comment">// array.</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      <span class="keyword">using</span> EdgeKind = <span class="keyword">typename</span> EdgeType::EdgeKind;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      <a class="code" href="classllvm_1_1EnumeratedArray.html">EnumeratedArray&lt;bool, EdgeKind&gt;</a> EdgeAlreadyCreated[DirectionCount]{<span class="keyword">false</span>,</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                                                                         <span class="keyword">false</span>};</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160; </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      <span class="keyword">auto</span> createEdgeOfKind = [<span class="keyword">this</span>](NodeType &amp;Src, NodeType &amp;Dst,</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                                     <span class="keyword">const</span> EdgeKind K) {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <span class="keywordflow">switch</span> (K) {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <span class="keywordflow">case</span> EdgeKind::RegisterDefUse:</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;          createDefUseEdge(Src, Dst);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <span class="keywordflow">case</span> EdgeKind::MemoryDependence:</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;          createMemoryEdge(Src, Dst);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <span class="keywordflow">case</span> EdgeKind::Rooted:</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;          createRootedEdge(Src, Dst);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;          <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unsupported type of edge.&quot;</span>);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        }</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      };</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160; </div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      <span class="keyword">auto</span> reconnectEdges = [&amp;](NodeType *Src, NodeType *Dst, NodeType *New,</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                                <span class="keyword">const</span> <a class="code" href="structllvm_1_1Loop_1_1LoopBounds.html#a1c06ad0290f168148c08edc0ce69703f">Direction</a> Dir) {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="keywordflow">if</span> (!Src-&gt;hasEdgeTo(*Dst))</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;          <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;reconnecting(&quot;</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                   &lt;&lt; (Dir == Direction::Incoming ? <span class="stringliteral">&quot;incoming)&quot;</span> : <span class="stringliteral">&quot;outgoing)&quot;</span>)</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;:\nSrc:&quot;</span> &lt;&lt; *Src &lt;&lt; <span class="stringliteral">&quot;\nDst:&quot;</span> &lt;&lt; *Dst &lt;&lt; <span class="stringliteral">&quot;\nNew:&quot;</span> &lt;&lt; *New</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((Dir == Direction::Incoming || Dir == Direction::Outgoing) &amp;&amp;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;               <span class="stringliteral">&quot;Invalid direction.&quot;</span>);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160; </div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;EdgeType *, 10&gt;</a> EL;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        Src-&gt;findEdgesTo(*Dst, EL);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <span class="keywordflow">for</span> (EdgeType *OldEdge : EL) {</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;          EdgeKind Kind = OldEdge-&gt;getKind();</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;          <span class="keywordflow">if</span> (!EdgeAlreadyCreated[Dir][Kind]) {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            <span class="keywordflow">if</span> (Dir == Direction::Incoming) {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;              createEdgeOfKind(*Src, *New, Kind);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;              <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;created edge from Src to New.\n&quot;</span>);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Dir == Direction::Outgoing) {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;              createEdgeOfKind(*New, *Dst, Kind);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;              <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;created edge from New to Dst.\n&quot;</span>);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            }</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            EdgeAlreadyCreated[Dir][Kind] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;          }</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;          Src-&gt;removeEdge(*OldEdge);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;          destroyEdge(*OldEdge);</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;          <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;removed old edge between Src and Dst.\n\n&quot;</span>);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        }</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      };</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160; </div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      <span class="keywordflow">for</span> (NodeType *SCCNode : <a class="code" href="DetailedRecordsBackend_8cpp.html#a4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>) {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <span class="comment">// Process incoming edges incident to the pi-block node.</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        reconnectEdges(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, SCCNode, &amp;PiNode, Direction::Incoming);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160; </div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <span class="comment">// Process edges that are coming out of the pi-block node.</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        reconnectEdges(SCCNode, <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, &amp;PiNode, Direction::Outgoing);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      }</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    }</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  }</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160; </div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="comment">// Ordinal maps are no longer needed.</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  InstOrdinalMap.clear();</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  NodeOrdinalMap.clear();</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160; </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;==== End of Creation of Pi-Blocks ===\n&quot;</span>);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;}</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160; </div>
<div class="line"><a name="l00228"></a><span class="lineno"><a class="line" href="classllvm_1_1AbstractDependenceGraphBuilder.html#ac76acbd497d18c7306f8120c6f11fb51">  228</a></span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> G&gt; <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1AbstractDependenceGraphBuilder.html#ac76acbd497d18c7306f8120c6f11fb51">AbstractDependenceGraphBuilder&lt;G&gt;::createDefUseEdges</a>() {</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <span class="keywordflow">for</span> (NodeType *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> : Graph) {</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">InstructionListType</a> SrcIList;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;collectInstructions([](<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) { <span class="keywordflow">return</span> <span class="keyword">true</span>; }, SrcIList);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160; </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="comment">// Use a set to mark the targets that we link to N, so we don&#39;t add</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="comment">// duplicate def-use edges when more than one instruction in a target node</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="comment">// use results of instructions that are contained in N.</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;NodeType *, 4&gt;</a> VisitedTargets;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *II : SrcIList) {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : II-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>()) {</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *UI = dyn_cast&lt;Instruction&gt;(U);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <span class="keywordflow">if</span> (!UI)</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        NodeType *DstNode = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="keywordflow">if</span> (IMap.find(UI) != IMap.end())</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;          DstNode = IMap.find(UI)-&gt;second;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <span class="comment">// In the case of loops, the scope of the subgraph is all the</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <span class="comment">// basic blocks (and instructions within them) belonging to the loop. We</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <span class="comment">// simply ignore all the edges coming from (or going into) instructions</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <span class="comment">// or basic blocks outside of this range.</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <span class="keywordflow">if</span> (!DstNode) {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;          <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;              <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;              &lt;&lt; <span class="stringliteral">&quot;skipped def-use edge since the sink&quot;</span> &lt;&lt; *UI</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;              &lt;&lt; <span class="stringliteral">&quot; is outside the range of instructions being considered.\n&quot;</span>);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        }</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160; </div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <span class="comment">// Self dependencies are ignored because they are redundant and</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="comment">// uninteresting.</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <span class="keywordflow">if</span> (DstNode == <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;          <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                     &lt;&lt; <span class="stringliteral">&quot;skipped def-use edge since the sink and the source (&quot;</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                     &lt;&lt; <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> &lt;&lt; <span class="stringliteral">&quot;) are the same.\n&quot;</span>);</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        }</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <span class="keywordflow">if</span> (VisitedTargets.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(DstNode).second) {</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;          createDefUseEdge(*<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, *DstNode);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;          ++TotalDefUseEdges;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        }</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      }</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    }</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  }</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;}</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160; </div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> G&gt;</div>
<div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="classllvm_1_1AbstractDependenceGraphBuilder.html#a9c4196edca24d644ff96e55945abd207">  278</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1AbstractDependenceGraphBuilder.html#a9c4196edca24d644ff96e55945abd207">AbstractDependenceGraphBuilder&lt;G&gt;::createMemoryDependencyEdges</a>() {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="keyword">using</span> DGIterator = <span class="keyword">typename</span> G::iterator;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="keyword">auto</span> isMemoryAccess = [](<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;mayReadOrWriteMemory();</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  };</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <span class="keywordflow">for</span> (DGIterator SrcIt = Graph.begin(), <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = Graph.end(); SrcIt != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++SrcIt) {</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">InstructionListType</a> SrcIList;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    (*SrcIt)-&gt;collectInstructions(isMemoryAccess, SrcIList);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordflow">if</span> (SrcIList.empty())</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordflow">for</span> (DGIterator DstIt = SrcIt; DstIt != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++DstIt) {</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      <span class="keywordflow">if</span> (**SrcIt == **DstIt)</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">InstructionListType</a> DstIList;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      (*DstIt)-&gt;collectInstructions(isMemoryAccess, DstIList);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      <span class="keywordflow">if</span> (DstIList.empty())</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      <span class="keywordtype">bool</span> ForwardEdgeCreated = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      <span class="keywordtype">bool</span> BackwardEdgeCreated = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *ISrc : SrcIList) {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *IDst : DstIList) {</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;          <span class="keyword">auto</span> <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a> = DI.depends(ISrc, IDst, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;          <span class="keywordflow">if</span> (!<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>)</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; </div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;          <span class="comment">// If we have a dependence with its left-most non-&#39;=&#39; direction</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;          <span class="comment">// being &#39;&gt;&#39; we need to reverse the direction of the edge, because</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;          <span class="comment">// the source of the dependence cannot occur after the sink. For</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;          <span class="comment">// confused dependencies, we will create edges in both directions to</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;          <span class="comment">// represent the possibility of a cycle.</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160; </div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;          <span class="keyword">auto</span> createConfusedEdges = [&amp;](NodeType &amp;Src, NodeType &amp;Dst) {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            <span class="keywordflow">if</span> (!ForwardEdgeCreated) {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;              createMemoryEdge(Src, Dst);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;              ++TotalMemoryEdges;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            }</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;            <span class="keywordflow">if</span> (!BackwardEdgeCreated) {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;              createMemoryEdge(Dst, Src);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;              ++TotalMemoryEdges;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            }</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            ForwardEdgeCreated = BackwardEdgeCreated = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            ++TotalConfusedEdges;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;          };</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;          <span class="keyword">auto</span> createForwardEdge = [&amp;](NodeType &amp;Src, NodeType &amp;Dst) {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            <span class="keywordflow">if</span> (!ForwardEdgeCreated) {</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;              createMemoryEdge(Src, Dst);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;              ++TotalMemoryEdges;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            }</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            ForwardEdgeCreated = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;          };</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160; </div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;          <span class="keyword">auto</span> createBackwardEdge = [&amp;](NodeType &amp;Src, NodeType &amp;Dst) {</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            <span class="keywordflow">if</span> (!BackwardEdgeCreated) {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;              createMemoryEdge(Dst, Src);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;              ++TotalMemoryEdges;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            }</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            BackwardEdgeCreated = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;          };</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160; </div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>-&gt;isConfused())</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;            createConfusedEdges(**SrcIt, **DstIt);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>-&gt;isOrdered() &amp;&amp; !<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>-&gt;isLoopIndependent()) {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            <span class="keywordtype">bool</span> ReversedEdge = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Level = 1; Level &lt;= <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>-&gt;getLevels(); ++Level) {</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;              <span class="keywordflow">if</span> (<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>-&gt;getDirection(Level) == <a class="code" href="structllvm_1_1Dependence_1_1DVEntry.html#a36df4bc73e8888285552e52e6591a9cead4051c16e1d2336250f8e267c1e03281">Dependence::DVEntry::EQ</a>)</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;              <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>-&gt;getDirection(Level) == <a class="code" href="structllvm_1_1Dependence_1_1DVEntry.html#a36df4bc73e8888285552e52e6591a9cea03e1c9598683e23868735e72b8caaabd">Dependence::DVEntry::GT</a>) {</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                createBackwardEdge(**SrcIt, **DstIt);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                ReversedEdge = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                ++TotalEdgeReversals;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;              } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>-&gt;getDirection(Level) == <a class="code" href="structllvm_1_1Dependence_1_1DVEntry.html#a36df4bc73e8888285552e52e6591a9cea5796b2f4edcf01eb52e88d01493f1d58">Dependence::DVEntry::LT</a>)</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;              <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                createConfusedEdges(**SrcIt, **DstIt);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;              }</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            }</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            <span class="keywordflow">if</span> (!ReversedEdge)</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;              createForwardEdge(**SrcIt, **DstIt);</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;          } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            createForwardEdge(**SrcIt, **DstIt);</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160; </div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;          <span class="comment">// Avoid creating duplicate edges.</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;          <span class="keywordflow">if</span> (ForwardEdgeCreated &amp;&amp; BackwardEdgeCreated)</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        }</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160; </div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <span class="comment">// If we&#39;ve created edges in both directions, there is no more</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <span class="comment">// unique edge that we can create between these two nodes, so we</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <span class="comment">// can exit early.</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <span class="keywordflow">if</span> (ForwardEdgeCreated &amp;&amp; BackwardEdgeCreated)</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      }</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    }</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  }</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;}</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160; </div>
<div class="line"><a name="l00378"></a><span class="lineno"><a class="line" href="classllvm_1_1AbstractDependenceGraphBuilder.html#aa58986a6df89ded5c86fc981ad2bf53c">  378</a></span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> G&gt; <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1AbstractDependenceGraphBuilder.html#aa58986a6df89ded5c86fc981ad2bf53c">AbstractDependenceGraphBuilder&lt;G&gt;::simplify</a>() {</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <span class="keywordflow">if</span> (!shouldSimplify())</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;==== Start of Graph Simplification ===\n&quot;</span>);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160; </div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <span class="comment">// This algorithm works by first collecting a set of candidate nodes that have</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <span class="comment">// an out-degree of one (in terms of def-use edges), and then ignoring those</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <span class="comment">// whose targets have an in-degree more than one. Each node in the resulting</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <span class="comment">// set can then be merged with its corresponding target and put back into the</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <span class="comment">// worklist until no further merge candidates are available.</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;NodeType *, 32&gt;</a> CandidateSourceNodes;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160; </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="comment">// A mapping between nodes and their in-degree. To save space, this map</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <span class="comment">// only contains nodes that are targets of nodes in the CandidateSourceNodes.</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;NodeType *, unsigned&gt;</a> TargetInDegreeMap;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160; </div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <span class="keywordflow">for</span> (NodeType *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> : Graph) {</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getEdges().size() != 1)</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    EdgeType &amp;Edge = <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;back();</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordflow">if</span> (!Edge.isDefUse())</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    CandidateSourceNodes.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160; </div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="comment">// Insert an element into the in-degree map and initialize to zero. The</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="comment">// count will get updated in the next step.</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    TargetInDegreeMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">insert</a>({&amp;Edge.getTargetNode(), 0});</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  }</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160; </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>({</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Size of candidate src node list:&quot;</span> &lt;&lt; CandidateSourceNodes.<a class="code" href="classllvm_1_1SmallPtrSetImplBase.html#a0e1c3175b0ac22fe3853651c28e1ecb8">size</a>()</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;           &lt;&lt; <span class="stringliteral">&quot;\nNode with single outgoing def-use edge:\n&quot;</span>;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="keywordflow">for</span> (NodeType *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> : CandidateSourceNodes) {</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    }</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  });</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160; </div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="keywordflow">for</span> (NodeType *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> : Graph) {</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="keywordflow">for</span> (EdgeType *<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> : *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) {</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      NodeType *Tgt = &amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>-&gt;getTargetNode();</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      <span class="keyword">auto</span> TgtIT = TargetInDegreeMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(Tgt);</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      <span class="keywordflow">if</span> (TgtIT != TargetInDegreeMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>())</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        ++(TgtIT-&gt;second);</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    }</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  }</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160; </div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>({</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Size of target in-degree map:&quot;</span> &lt;&lt; TargetInDegreeMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a3d95cc2d359b8d9ed5bd9504b44930b5">size</a>()</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;           &lt;&lt; <span class="stringliteral">&quot;\nContent of in-degree map:\n&quot;</span>;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : TargetInDegreeMap) {</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.first &lt;&lt; <span class="stringliteral">&quot; --&gt; &quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.second &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    }</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  });</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160; </div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;NodeType *, 32&gt;</a> Worklist(CandidateSourceNodes.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#abf73a826b5d6f739eb4af48ddf14c5b4">begin</a>(),</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                                       CandidateSourceNodes.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a7004354fbee1c8cd74ed9001915e1db5">end</a>());</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <span class="keywordflow">while</span> (!Worklist.empty()) {</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    NodeType &amp;Src = *Worklist.pop_back_val();</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="comment">// As nodes get merged, we need to skip any node that has been removed from</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="comment">// the candidate set (see below).</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="keywordflow">if</span> (!CandidateSourceNodes.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a11045c7973ab24a8d6315b61fa337d4e">erase</a>(&amp;Src))</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160; </div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Src.getEdges().size() == 1 &amp;&amp;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;           <span class="stringliteral">&quot;Expected a single edge from the candidate src node.&quot;</span>);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    NodeType &amp;Tgt = Src.back().getTargetNode();</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TargetInDegreeMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(&amp;Tgt) != TargetInDegreeMap.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>() &amp;&amp;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;           <span class="stringliteral">&quot;Expected target to be in the in-degree map.&quot;</span>);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160; </div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="keywordflow">if</span> (TargetInDegreeMap[&amp;Tgt] != 1)</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160; </div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="keywordflow">if</span> (!areNodesMergeable(Src, Tgt))</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160; </div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="comment">// Do not merge if there is also an edge from target to src (immediate</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="comment">// cycle).</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="keywordflow">if</span> (Tgt.hasEdgeTo(Src))</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160; </div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Merging:&quot;</span> &lt;&lt; Src &lt;&lt; <span class="stringliteral">&quot;\nWith:&quot;</span> &lt;&lt; Tgt &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160; </div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    mergeNodes(Src, Tgt);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160; </div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="comment">// If the target node is in the candidate set itself, we need to put the</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="comment">// src node back into the worklist again so it gives the target a chance</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="comment">// to get merged into it. For example if we have:</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="comment">// {(a)-&gt;(b), (b)-&gt;(c), (c)-&gt;(d), ...} and the worklist is initially {b, a},</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="comment">// then after merging (a) and (b) together, we need to put (a,b) back in</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="comment">// the worklist so that (c) can get merged in as well resulting in</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <span class="comment">// {(a,b,c) -&gt; d}</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="comment">// We also need to remove the old target (b), from the worklist. We first</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <span class="comment">// remove it from the candidate set here, and skip any item from the</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="comment">// worklist that is not in the set.</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="keywordflow">if</span> (CandidateSourceNodes.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a11045c7973ab24a8d6315b61fa337d4e">erase</a>(&amp;Tgt)) {</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;      Worklist.push_back(&amp;Src);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      CandidateSourceNodes.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(&amp;Src);</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Putting &quot;</span> &lt;&lt; &amp;Src &lt;&lt; <span class="stringliteral">&quot; back in the worklist.\n&quot;</span>);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    }</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  }</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;=== End of Graph Simplification ===\n&quot;</span>);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;}</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160; </div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> G&gt;</div>
<div class="line"><a name="l00482"></a><span class="lineno"><a class="line" href="classllvm_1_1AbstractDependenceGraphBuilder.html#a2ca7af382aa1a34576aee355f364447c">  482</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1AbstractDependenceGraphBuilder.html#a2ca7af382aa1a34576aee355f364447c">AbstractDependenceGraphBuilder&lt;G&gt;::sortNodesTopologically</a>() {</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160; </div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  <span class="comment">// If we don&#39;t create pi-blocks, then we may not have a DAG.</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  <span class="keywordflow">if</span> (!shouldCreatePiBlocks())</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160; </div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;NodeType *, 64&gt;</a> NodesInPO;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  <span class="keyword">using</span> <a class="code" href="namespacellvm_1_1ms__demangle.html#a234f091f9559c82176ae3e89447add46">NodeKind</a> = <span class="keyword">typename</span> <a class="code" href="namespacellvm_1_1ms__demangle.html#a234f091f9559c82176ae3e89447add46">NodeType::NodeKind</a>;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  <span class="keywordflow">for</span> (NodeType *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> : <a class="code" href="namespacellvm.html#aa0953557ed13c0ed48e740653e07c979">post_order</a>(&amp;Graph)) {</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getKind() == NodeKind::PiBlock) {</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      <span class="comment">// Put members of the pi-block right after the pi-block itself, for</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      <span class="comment">// convenience.</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallVector.html">NodeListType</a> &amp;PiBlockMembers = getNodesInPiBlock(*<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      <a class="code" href="namespacellvm.html#a39d3d23a084c4544ee5903203db10e8a">llvm::append_range</a>(NodesInPO, PiBlockMembers);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    }</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    NodesInPO.push_back(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  }</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160; </div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <span class="keywordtype">size_t</span> OldSize = Graph.Nodes.size();</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  Graph.Nodes.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  <a class="code" href="namespacellvm.html#a39d3d23a084c4544ee5903203db10e8a">append_range</a>(Graph.Nodes, <a class="code" href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">reverse</a>(NodesInPO));</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  <span class="keywordflow">if</span> (Graph.Nodes.size() != OldSize)</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<span class="keyword">false</span> &amp;&amp;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;           <span class="stringliteral">&quot;Expected the number of nodes to stay the same after the sort&quot;</span>);</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;}</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160; </div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="keyword">template</span> <span class="keyword">class </span><a class="code" href="classllvm_1_1AbstractDependenceGraphBuilder.html">llvm::AbstractDependenceGraphBuilder&lt;DataDependenceGraph&gt;</a>;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="keyword">template</span> <span class="keyword">class </span><a class="code" href="classllvm_1_1DependenceGraphInfo.html">llvm::DependenceGraphInfo&lt;DDGNode&gt;</a>;</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aclassllvm_1_1DependenceGraphInfo_html"><div class="ttname"><a href="classllvm_1_1DependenceGraphInfo.html">llvm::DependenceGraphInfo</a></div><div class="ttdoc">Encapsulate some common data and functionality needed for different variations of data dependence gra...</div><div class="ttdef"><b>Definition:</b> <a href="DDG_8h_source.html#l00255">DDG.h:255</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad1a91b49e0c092818a0b82f6cc130a1b"><div class="ttname"><a href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">llvm::make_range</a></div><div class="ttdeci">iterator_range&lt; T &gt; make_range(T x, T y)</div><div class="ttdoc">Convenience function for iterating over sub-ranges.</div><div class="ttdef"><b>Definition:</b> <a href="iterator__range_8h_source.html#l00053">iterator_range.h:53</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a11045c7973ab24a8d6315b61fa337d4e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a11045c7973ab24a8d6315b61fa337d4e">llvm::SmallPtrSetImpl::erase</a></div><div class="ttdeci">bool erase(PtrType Ptr)</div><div class="ttdoc">erase - If the set contains the specified pointer, remove it and return true, otherwise return false.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00379">SmallPtrSet.h:379</a></div></div>
<div class="ttc" id="aclassllvm_1_1AbstractDependenceGraphBuilder_html_ac76acbd497d18c7306f8120c6f11fb51"><div class="ttname"><a href="classllvm_1_1AbstractDependenceGraphBuilder.html#ac76acbd497d18c7306f8120c6f11fb51">llvm::AbstractDependenceGraphBuilder::createDefUseEdges</a></div><div class="ttdeci">void createDefUseEdges()</div><div class="ttdoc">Analyze the def-use chains and create edges from the nodes containing definitions to the nodes contai...</div><div class="ttdef"><b>Definition:</b> <a href="DependenceGraphBuilder_8cpp_source.html#l00228">DependenceGraphBuilder.cpp:228</a></div></div>
<div class="ttc" id="aSCCIterator_8h_html"><div class="ttname"><a href="SCCIterator_8h.html">SCCIterator.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01199">SmallVector.h:1199</a></div></div>
<div class="ttc" id="aStatistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="aDetailedRecordsBackend_8cpp_html_a4fc34b120ed3bd1120c1eb36abbcd6af"><div class="ttname"><a href="DetailedRecordsBackend_8cpp.html#a4fc34b120ed3bd1120c1eb36abbcd6af">NL</a></div><div class="ttdeci">#define NL</div><div class="ttdef"><b>Definition:</b> <a href="DetailedRecordsBackend_8cpp_source.html#l00031">DetailedRecordsBackend.cpp:31</a></div></div>
<div class="ttc" id="astructllvm_1_1Dependence_1_1DVEntry_html_a36df4bc73e8888285552e52e6591a9cea03e1c9598683e23868735e72b8caaabd"><div class="ttname"><a href="structllvm_1_1Dependence_1_1DVEntry.html#a36df4bc73e8888285552e52e6591a9cea03e1c9598683e23868735e72b8caaabd">llvm::Dependence::DVEntry::GT</a></div><div class="ttdeci">@ GT</div><div class="ttdef"><b>Definition:</b> <a href="DependenceAnalysis_8h_source.html#l00090">DependenceAnalysis.h:90</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdoc">SmallPtrSet - This class implements a set which is optimized for holding SmallSize or less elements.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00450">SmallPtrSet.h:450</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a87b8bfbbe9d8f7146d7f20a5fb42efd0"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a></div><div class="ttdeci">Value * RHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00076">X86PartialReduction.cpp:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1AbstractDependenceGraphBuilder_html_afba90b653098f15528a273ced632683a"><div class="ttname"><a href="classllvm_1_1AbstractDependenceGraphBuilder.html#afba90b653098f15528a273ced632683a">llvm::AbstractDependenceGraphBuilder::createPiBlocks</a></div><div class="ttdeci">void createPiBlocks()</div><div class="ttdoc">Apply graph abstraction to groups of nodes that belong to a strongly connected component of the graph...</div><div class="ttdef"><b>Definition:</b> <a href="DependenceGraphBuilder_8cpp_source.html#l00091">DependenceGraphBuilder.cpp:91</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00101">Debug.h:101</a></div></div>
<div class="ttc" id="aDepthFirstIterator_8h_html"><div class="ttname"><a href="DepthFirstIterator_8h.html">DepthFirstIterator.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00055">BasicBlock.h:55</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="aDependenceGraphBuilder_8h_html"><div class="ttname"><a href="DependenceGraphBuilder_8h.html">DependenceGraphBuilder.h</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a9e1483f7215664a2315c53c3558d9a8d"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a></div><div class="ttdeci">Value * LHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00075">X86PartialReduction.cpp:75</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1User_html"><div class="ttname"><a href="classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00044">User.h:44</a></div></div>
<div class="ttc" id="aclassllvm_1_1EnumeratedArray_html"><div class="ttname"><a href="classllvm_1_1EnumeratedArray.html">llvm::EnumeratedArray</a></div><div class="ttdef"><b>Definition:</b> <a href="EnumeratedArray_8h_source.html#l00026">EnumeratedArray.h:26</a></div></div>
<div class="ttc" id="anamespacellvm_html_a4ab7d898571959c38528b05234070ac6"><div class="ttname"><a href="namespacellvm.html#a4ab7d898571959c38528b05234070ac6">llvm::depth_first_ext</a></div><div class="ttdeci">iterator_range&lt; df_ext_iterator&lt; T, SetTy &gt; &gt; depth_first_ext(const T &amp;G, SetTy &amp;S)</div><div class="ttdef"><b>Definition:</b> <a href="DepthFirstIterator_8h_source.html#l00251">DepthFirstIterator.h:251</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00041">Instruction.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1AbstractDependenceGraphBuilder_html_a008891a00a9aec8710d95ec82fd72196"><div class="ttname"><a href="classllvm_1_1AbstractDependenceGraphBuilder.html#a008891a00a9aec8710d95ec82fd72196">llvm::AbstractDependenceGraphBuilder::createAndConnectRootNode</a></div><div class="ttdeci">void createAndConnectRootNode()</div><div class="ttdoc">Create a root node and add edges such that each node in the graph is reachable from the root.</div><div class="ttdef"><b>Definition:</b> <a href="DependenceGraphBuilder_8cpp_source.html#l00064">DependenceGraphBuilder.cpp:64</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0bf75467957937ad23ad7be19f489934"><div class="ttname"><a href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">llvm::STATISTIC</a></div><div class="ttdeci">STATISTIC(NumFunctions, &quot;Total number of functions&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1AbstractDependenceGraphBuilder_html"><div class="ttname"><a href="classllvm_1_1AbstractDependenceGraphBuilder.html">llvm::AbstractDependenceGraphBuilder&lt; DataDependenceGraph &gt;</a></div></div>
<div class="ttc" id="astructllvm_1_1Loop_1_1LoopBounds_html_a1c06ad0290f168148c08edc0ce69703f"><div class="ttname"><a href="structllvm_1_1Loop_1_1LoopBounds.html#a1c06ad0290f168148c08edc0ce69703f">llvm::Loop::LoopBounds::Direction</a></div><div class="ttdeci">Direction</div><div class="ttdoc">An enum for the direction of the loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00723">LoopInfo.h:723</a></div></div>
<div class="ttc" id="anamespacellvm_html_a71882a8257c58a4d9401db39622871a6"><div class="ttname"><a href="namespacellvm.html#a71882a8257c58a4d9401db39622871a6">llvm::scc_begin</a></div><div class="ttdeci">scc_iterator&lt; T &gt; scc_begin(const T &amp;G)</div><div class="ttdoc">Construct the begin iterator for a deduced graph type T.</div><div class="ttdef"><b>Definition:</b> <a href="SCCIterator_8h_source.html#l00232">SCCIterator.h:232</a></div></div>
<div class="ttc" id="aclassllvm_1_1AbstractDependenceGraphBuilder_html_a9c4196edca24d644ff96e55945abd207"><div class="ttname"><a href="classllvm_1_1AbstractDependenceGraphBuilder.html#a9c4196edca24d644ff96e55945abd207">llvm::AbstractDependenceGraphBuilder::createMemoryDependencyEdges</a></div><div class="ttdeci">void createMemoryDependencyEdges()</div><div class="ttdoc">Analyze data dependencies that exist between memory loads or stores, in the graph nodes and create ed...</div><div class="ttdef"><b>Definition:</b> <a href="DependenceGraphBuilder_8cpp_source.html#l00278">DependenceGraphBuilder.cpp:278</a></div></div>
<div class="ttc" id="anamespacellvm_html_a74cdbd1e4f731e7d7cd83461b8b1de0b"><div class="ttname"><a href="namespacellvm.html#a74cdbd1e4f731e7d7cd83461b8b1de0b">llvm::sort</a></div><div class="ttdeci">void sort(IteratorTy Start, IteratorTy End)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01683">STLExtras.h:1683</a></div></div>
<div class="ttc" id="aclassllvm_1_1AbstractDependenceGraphBuilder_html_a022f8d18fe9e9e880c51db47e2f372db"><div class="ttname"><a href="classllvm_1_1AbstractDependenceGraphBuilder.html#a022f8d18fe9e9e880c51db47e2f372db">llvm::AbstractDependenceGraphBuilder::computeInstructionOrdinals</a></div><div class="ttdeci">void computeInstructionOrdinals()</div><div class="ttdoc">Compute ordinal numbers for each instruction and store them in a map for future look up.</div><div class="ttdef"><b>Definition:</b> <a href="DependenceGraphBuilder_8cpp_source.html#l00042">DependenceGraphBuilder.cpp:42</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a9bf617fd3367180fb96cebccfaae8dfa"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a></div><div class="ttdeci">static GCRegistry::Add&lt; StatepointGC &gt; D(&quot;statepoint-example&quot;, &quot;an example strategy for statepoint&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a7004354fbee1c8cd74ed9001915e1db5"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a7004354fbee1c8cd74ed9001915e1db5">llvm::SmallPtrSetImpl::end</a></div><div class="ttdeci">iterator end() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00408">SmallPtrSet.h:408</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00714">DenseMap.h:714</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_abf73a826b5d6f739eb4af48ddf14c5b4"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#abf73a826b5d6f739eb4af48ddf14c5b4">llvm::SmallPtrSetImpl::begin</a></div><div class="ttdeci">iterator begin() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00403">SmallPtrSet.h:403</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a0c047f127ed4380a6f383d70bec4eb94"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::find</a></div><div class="ttdeci">iterator find(const_arg_type_t&lt; KeyT &gt; Val)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00150">DenseMap.h:150</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a1f475b0df44ebd7169e720fa1bf9169e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">llvm::SmallPtrSetImpl::count</a></div><div class="ttdeci">size_type count(ConstPtrType Ptr) const</div><div class="ttdoc">count - Return 1 if the specified pointer is in the set, 0 otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00383">SmallPtrSet.h:383</a></div></div>
<div class="ttc" id="astructllvm_1_1df__iterator__default__set_html"><div class="ttname"><a href="structllvm_1_1df__iterator__default__set.html">llvm::df_iterator_default_set</a></div><div class="ttdef"><b>Definition:</b> <a href="DepthFirstIterator_8h_source.html#l00069">DepthFirstIterator.h:69</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1CPol_html_a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1CPol.html#a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a">llvm::AMDGPU::CPol::SCC</a></div><div class="ttdeci">@ SCC</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00316">SIDefines.h:316</a></div></div>
<div class="ttc" id="aDDG_8h_html"><div class="ttname"><a href="DDG_8h.html">DDG.h</a></div></div>
<div class="ttc" id="astructllvm_1_1Dependence_1_1DVEntry_html_a36df4bc73e8888285552e52e6591a9cea5796b2f4edcf01eb52e88d01493f1d58"><div class="ttname"><a href="structllvm_1_1Dependence_1_1DVEntry.html#a36df4bc73e8888285552e52e6591a9cea5796b2f4edcf01eb52e88d01493f1d58">llvm::Dependence::DVEntry::LT</a></div><div class="ttdeci">@ LT</div><div class="ttdef"><b>Definition:</b> <a href="DependenceAnalysis_8h_source.html#l00087">DependenceAnalysis.h:87</a></div></div>
<div class="ttc" id="aSupport_2ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdoc">Marks that the current location is not supposed to be reachable.</div><div class="ttdef"><b>Definition:</b> <a href="Support_2ErrorHandling_8h_source.html#l00143">ErrorHandling.h:143</a></div></div>
<div class="ttc" id="aEnumeratedArray_8h_html"><div class="ttname"><a href="EnumeratedArray_8h.html">EnumeratedArray.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a39d3d23a084c4544ee5903203db10e8a"><div class="ttname"><a href="namespacellvm.html#a39d3d23a084c4544ee5903203db10e8a">llvm::append_range</a></div><div class="ttdeci">void append_range(Container &amp;C, Range &amp;&amp;R)</div><div class="ttdoc">Wrapper function to append a range to a container.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l02014">STLExtras.h:2014</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a99f811d53704275b4158c62a2dd138d9"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const std::pair&lt; KeyT, ValueT &gt; &amp;KV)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00207">DenseMap.h:207</a></div></div>
<div class="ttc" id="aclassllvm_1_1AbstractDependenceGraphBuilder_html_aa58986a6df89ded5c86fc981ad2bf53c"><div class="ttname"><a href="classllvm_1_1AbstractDependenceGraphBuilder.html#aa58986a6df89ded5c86fc981ad2bf53c">llvm::AbstractDependenceGraphBuilder::simplify</a></div><div class="ttdeci">void simplify()</div><div class="ttdoc">Go through all the nodes in the graph and collapse any two nodes 'a' and 'b' if all of the following ...</div><div class="ttdef"><b>Definition:</b> <a href="DependenceGraphBuilder_8cpp_source.html#l00378">DependenceGraphBuilder.cpp:378</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImplBase_html_a0e1c3175b0ac22fe3853651c28e1ecb8"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImplBase.html#a0e1c3175b0ac22fe3853651c28e1ecb8">llvm::SmallPtrSetImplBase::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00093">SmallPtrSet.h:93</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a65520b9c67759099e313d0f4e7b5ff9e"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00084">DenseMap.h:84</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa0953557ed13c0ed48e740653e07c979"><div class="ttname"><a href="namespacellvm.html#aa0953557ed13c0ed48e740653e07c979">llvm::post_order</a></div><div class="ttdeci">iterator_range&lt; po_iterator&lt; T &gt; &gt; post_order(const T &amp;G)</div><div class="ttdef"><b>Definition:</b> <a href="PostOrderIterator_8h_source.html#l00191">PostOrderIterator.h:191</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a3d95cc2d359b8d9ed5bd9504b44930b5"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a3d95cc2d359b8d9ed5bd9504b44930b5">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::size</a></div><div class="ttdeci">unsigned size() const</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00099">DenseMap.h:99</a></div></div>
<div class="ttc" id="aclassllvm_1_1AbstractDependenceGraphBuilder_html_a2ca7af382aa1a34576aee355f364447c"><div class="ttname"><a href="classllvm_1_1AbstractDependenceGraphBuilder.html#a2ca7af382aa1a34576aee355f364447c">llvm::AbstractDependenceGraphBuilder::sortNodesTopologically</a></div><div class="ttdeci">void sortNodesTopologically()</div><div class="ttdoc">Topologically sort the graph nodes.</div><div class="ttdef"><b>Definition:</b> <a href="DependenceGraphBuilder_8cpp_source.html#l00482">DependenceGraphBuilder.cpp:482</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00614">SmallVector.h:614</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ms__demangle_html_a234f091f9559c82176ae3e89447add46"><div class="ttname"><a href="namespacellvm_1_1ms__demangle.html#a234f091f9559c82176ae3e89447add46">llvm::ms_demangle::NodeKind</a></div><div class="ttdeci">NodeKind</div><div class="ttdef"><b>Definition:</b> <a href="MicrosoftDemangleNodes_8h_source.html#l00226">MicrosoftDemangleNodes.h:226</a></div></div>
<div class="ttc" id="aPostOrderIterator_8h_html"><div class="ttname"><a href="PostOrderIterator_8h.html">PostOrderIterator.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1AbstractDependenceGraphBuilder_html_a56732d193d3946d953c77a80e07ef61a"><div class="ttname"><a href="classllvm_1_1AbstractDependenceGraphBuilder.html#a56732d193d3946d953c77a80e07ef61a">llvm::AbstractDependenceGraphBuilder::createFineGrainedNodes</a></div><div class="ttdeci">void createFineGrainedNodes()</div><div class="ttdoc">Create fine grained nodes.</div><div class="ttdef"><b>Definition:</b> <a href="DependenceGraphBuilder_8cpp_source.html#l00051">DependenceGraphBuilder.cpp:51</a></div></div>
<div class="ttc" id="aregcomp_8c_html_a0240ac851181b84ac374872dc5434ee4"><div class="ttname"><a href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></div><div class="ttdeci">#define N</div></div>
<div class="ttc" id="anamespacellvm_html_a6b0ac1fa4f05de76413c5e0ca6334035"><div class="ttname"><a href="namespacellvm.html#a6b0ac1fa4f05de76413c5e0ca6334035">llvm::reverse</a></div><div class="ttdeci">auto reverse(ContainerTy &amp;&amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00484">STLExtras.h:484</a></div></div>
<div class="ttc" id="anamespacellvm_html_a221dd975c8835e667ee59a36d4d6cc92"><div class="ttname"><a href="namespacellvm.html#a221dd975c8835e667ee59a36d4d6cc92">llvm::scc_end</a></div><div class="ttdeci">scc_iterator&lt; T &gt; scc_end(const T &amp;G)</div><div class="ttdoc">Construct the end iterator for a deduced graph type T.</div><div class="ttdef"><b>Definition:</b> <a href="SCCIterator_8h_source.html#l00237">SCCIterator.h:237</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="astructllvm_1_1Dependence_1_1DVEntry_html_a36df4bc73e8888285552e52e6591a9cead4051c16e1d2336250f8e267c1e03281"><div class="ttname"><a href="structllvm_1_1Dependence_1_1DVEntry.html#a36df4bc73e8888285552e52e6591a9cead4051c16e1d2336250f8e267c1e03281">llvm::Dependence::DVEntry::EQ</a></div><div class="ttdeci">@ EQ</div><div class="ttdef"><b>Definition:</b> <a href="DependenceAnalysis_8h_source.html#l00088">DependenceAnalysis.h:88</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ab4e0512c7e1c7adaa56677e3155685f1"><div class="ttname"><a href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">llvm::Value::users</a></div><div class="ttdeci">iterator_range&lt; user_iterator &gt; users()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00421">Value.h:421</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a396fcfee6914c76974b73c3d203da6a5"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">llvm::SmallVectorImpl::emplace_back</a></div><div class="ttdeci">reference emplace_back(ArgTypes &amp;&amp;... Args)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00941">SmallVector.h:941</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a6bc6fb89fe2e91c25559a8631f56e27e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">llvm::SmallPtrSetImpl::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(PtrType Ptr)</div><div class="ttdoc">Inserts Ptr if and only if there is no element in the container equal to Ptr.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00365">SmallPtrSet.h:365</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 09:48:31 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

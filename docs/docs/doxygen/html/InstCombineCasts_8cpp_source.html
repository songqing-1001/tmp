<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Transforms/InstCombine/InstCombineCasts.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a72932e0778af28115095468f6286ff8.html">Transforms</a></li><li class="navelem"><a class="el" href="dir_99567d9c0c7f3685f25b19ecc341a865.html">InstCombine</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">InstCombineCasts.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="InstCombineCasts_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- InstCombineCasts.cpp -----------------------------------------------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This file implements the visit functions for cast operations.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160; </div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstCombineInternal_8h.html">InstCombineInternal.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SetVector_8h.html">llvm/ADT/SetVector.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ConstantFolding_8h.html">llvm/Analysis/ConstantFolding.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DataLayout_8h.html">llvm/IR/DataLayout.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2DebugInfo_8h.html">llvm/IR/DebugInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PatternMatch_8h.html">llvm/IR/PatternMatch.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="KnownBits_8h.html">llvm/Support/KnownBits.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstCombiner_8h.html">llvm/Transforms/InstCombine/InstCombiner.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;optional&gt;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160; </div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="keyword">using namespace </span>PatternMatch;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160; </div>
<div class="line"><a name="l00026"></a><span class="lineno"><a class="line" href="InstCombineCasts_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   26</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;instcombine&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">/// Analyze &#39;Val&#39;, seeing if it is a simple linear expression.</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">/// If so, decompose it, returning some value X, such that Val is</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">/// X*Scale+Offset.</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00032"></a><span class="lineno"><a class="line" href="InstCombineCasts_8cpp.html#a6adfb24a056815dd3897407a90cd6b8e">   32</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="InstCombineCasts_8cpp.html#a6adfb24a056815dd3897407a90cd6b8e">decomposeSimpleLinearExpr</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *Val, <span class="keywordtype">unsigned</span> &amp;Scale,</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;                                        <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> &amp;Offset) {</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(Val)) {</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    Offset = CI-&gt;getZExtValue();</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    Scale  = 0;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Val-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), 0);</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  }</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160; </div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;BinaryOperator&gt;(Val)) {</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="comment">// Cannot look past anything that might overflow.</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="comment">// We specifically require nuw because we store the Scale in an unsigned</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="comment">// and perform an unsigned divide on it.</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <a class="code" href="classllvm_1_1OverflowingBinaryOperator.html">OverflowingBinaryOperator</a> *OBI = dyn_cast&lt;OverflowingBinaryOperator&gt;(Val);</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keywordflow">if</span> (OBI &amp;&amp; !OBI-&gt;<a class="code" href="classllvm_1_1OverflowingBinaryOperator.html#a95474ea140862464db7ea0580f01eae9">hasNoUnsignedWrap</a>()) {</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;      Scale = 1;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;      Offset = 0;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;      <span class="keywordflow">return</span> Val;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    }</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = dyn_cast&lt;ConstantInt&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1))) {</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode() == Instruction::Shl) {</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        <span class="comment">// This is a value scaled by &#39;1 &lt;&lt; the shift amt&#39;.</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        Scale = UINT64_C(1) &lt;&lt; <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;getZExtValue();</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        Offset = 0;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;      }</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode() == <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Instruction::Mul</a>) {</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        <span class="comment">// This value is scaled by &#39;RHS&#39;.</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        Scale = <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;getZExtValue();</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        Offset = 0;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;      }</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160; </div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode() == <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a>) {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <span class="comment">// We have X+C.  Check to see if we really have (X*C2)+C1,</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        <span class="comment">// where C1 is divisible by C2.</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        <span class="keywordtype">unsigned</span> SubScale;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *SubVal =</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;          <a class="code" href="InstCombineCasts_8cpp.html#a6adfb24a056815dd3897407a90cd6b8e">decomposeSimpleLinearExpr</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0), SubScale, Offset);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        Offset += <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;getZExtValue();</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        Scale = SubScale;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        <span class="keywordflow">return</span> SubVal;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;      }</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    }</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  }</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <span class="comment">// Otherwise, we can&#39;t look past this.</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  Scale = 1;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  Offset = 0;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="keywordflow">return</span> Val;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;}</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">/// If we find a cast of an allocation instruction, try to eliminate the cast by</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">/// moving the type information into the alloc.</span></div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a9e42c3b6fa31029268e80ffc16d8aa24">   87</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a9e42c3b6fa31029268e80ffc16d8aa24">InstCombinerImpl::PromoteCastOfAllocation</a>(<a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a> &amp;CI,</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                                                       <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> &amp;AI) {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <a class="code" href="classllvm_1_1PointerType.html">PointerType</a> *PTy = cast&lt;PointerType&gt;(CI.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="comment">// Opaque pointers don&#39;t have an element type we could replace with.</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="keywordflow">if</span> (PTy-&gt;<a class="code" href="classllvm_1_1PointerType.html#a92c4ce3a0a429509bc46cc3875a48c24">isOpaque</a>())</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <a class="code" href="classllvm_1_1IRBuilderBase_1_1InsertPointGuard.html">IRBuilderBase::InsertPointGuard</a> Guard(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(&amp;AI);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="comment">// Get the type really allocated and the type casted to.</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *AllocElTy = AI.<a class="code" href="classllvm_1_1AllocaInst.html#a074617b3e2f9f98ee3a2ac208e8e7210">getAllocatedType</a>();</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *CastElTy = PTy-&gt;<a class="code" href="classllvm_1_1Type.html#abceff71202e0269065cf32a2f750a9be">getNonOpaquePointerElementType</a>();</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="keywordflow">if</span> (!AllocElTy-&gt;<a class="code" href="classllvm_1_1Type.html#a8ad67a33bae235fe3cca1c3e5a91ed2d">isSized</a>() || !CastElTy-&gt;<a class="code" href="classllvm_1_1Type.html#a8ad67a33bae235fe3cca1c3e5a91ed2d">isSized</a>()) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160; </div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="comment">// This optimisation does not work for cases where the cast type</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="comment">// is scalable and the allocated type is not. This because we need to</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="comment">// know how many times the casted type fits into the allocated type.</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="comment">// For the opposite case where the allocated type is scalable and the</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="comment">// cast type is not this leads to poor code quality due to the</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="comment">// introduction of &#39;vscale&#39; into the calculations. It seems better to</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="comment">// bail out for this case too until we&#39;ve done a proper cost-benefit</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="comment">// analysis.</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="keywordtype">bool</span> AllocIsScalable = isa&lt;ScalableVectorType&gt;(AllocElTy);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <span class="keywordtype">bool</span> CastIsScalable = isa&lt;ScalableVectorType&gt;(CastElTy);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="keywordflow">if</span> (AllocIsScalable != CastIsScalable) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <a class="code" href="structllvm_1_1Align.html">Align</a> AllocElTyAlign = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getABITypeAlign(AllocElTy);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <a class="code" href="structllvm_1_1Align.html">Align</a> CastElTyAlign = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getABITypeAlign(CastElTy);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="keywordflow">if</span> (CastElTyAlign &lt; AllocElTyAlign) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160; </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="comment">// If the allocation has multiple uses, only promote it if we are strictly</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="comment">// increasing the alignment of the resultant allocation.  If we keep it the</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="comment">// same, we open the door to infinite loops of various kinds.</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="keywordflow">if</span> (!AI.<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp; CastElTyAlign == AllocElTyAlign) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="comment">// The alloc and cast types should be either both fixed or both scalable.</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> AllocElTySize = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(AllocElTy).getKnownMinValue();</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> CastElTySize = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeAllocSize(CastElTy).getKnownMinValue();</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="keywordflow">if</span> (CastElTySize == 0 || AllocElTySize == 0) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="comment">// If the allocation has multiple uses, only promote it if we&#39;re not</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="comment">// shrinking the amount of memory being allocated.</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> AllocElTyStoreSize =</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeStoreSize(AllocElTy).getKnownMinValue();</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> CastElTyStoreSize = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeStoreSize(CastElTy).getKnownMinValue();</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <span class="keywordflow">if</span> (!AI.<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp; CastElTyStoreSize &lt; AllocElTyStoreSize) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160; </div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <span class="comment">// See if we can satisfy the modulus by pulling a scale out of the array</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="comment">// size argument.</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="keywordtype">unsigned</span> ArraySizeScale;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> ArrayOffset;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NumElements = <span class="comment">// See if the array size is a decomposable linear expr.</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <a class="code" href="InstCombineCasts_8cpp.html#a6adfb24a056815dd3897407a90cd6b8e">decomposeSimpleLinearExpr</a>(AI.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), ArraySizeScale, ArrayOffset);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="comment">// If we can now satisfy the modulus, by using a non-1 scale, we really can</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="comment">// do the xform.</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="keywordflow">if</span> ((AllocElTySize*ArraySizeScale) % CastElTySize != 0 ||</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      (AllocElTySize*ArrayOffset   ) % CastElTySize != 0) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <span class="comment">// We don&#39;t currently support arrays of scalable types.</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!AllocIsScalable || (ArrayOffset == 1 &amp;&amp; ArraySizeScale == 0));</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="keywordtype">unsigned</span> Scale = (AllocElTySize*ArraySizeScale)/CastElTySize;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Amt = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <span class="keywordflow">if</span> (Scale == 1) {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    Amt = NumElements;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    Amt = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(AI.<a class="code" href="classllvm_1_1AllocaInst.html#aaca14fdf6d151782f7ab0a66405453fb">getArraySize</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), Scale);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="comment">// Insert before the alloca, not before the cast.</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    Amt = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateMul(Amt, NumElements);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  }</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160; </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> Offset = (AllocElTySize*ArrayOffset)/CastElTySize) {</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Off = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(AI.<a class="code" href="classllvm_1_1AllocaInst.html#aaca14fdf6d151782f7ab0a66405453fb">getArraySize</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(),</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                                  Offset, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    Amt = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(Amt, Off);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  }</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160; </div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *New = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(CastElTy, AI.<a class="code" href="classllvm_1_1AllocaInst.html#ad2fb148dfac3182fce33be95fc4e9159">getAddressSpace</a>(), Amt);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  New-&gt;setAlignment(AI.<a class="code" href="classllvm_1_1AllocaInst.html#a42438d0a43720a6571c9138224481754">getAlign</a>());</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  New-&gt;takeName(&amp;AI);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  New-&gt;setUsedWithInAlloca(AI.<a class="code" href="classllvm_1_1AllocaInst.html#a9bb98c4ac4cf77f5782e5e41f2c6f38a">isUsedWithInAlloca</a>());</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  New-&gt;setMetadata(LLVMContext::MD_DIAssignID,</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                   AI.<a class="code" href="classllvm_1_1Instruction.html#ae22f493ba8327ce92e87d3b96bce7017">getMetadata</a>(LLVMContext::MD_DIAssignID));</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160; </div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <a class="code" href="namespacellvm.html#a9784a018b2dd6a85ee8a70f5f5ab3d02">replaceAllDbgUsesWith</a>(AI, *New, *New, DT);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="comment">// If the allocation has multiple real uses, insert a cast and change all</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <span class="comment">// things that used it to use the new cast.  This will also hack on CI, but it</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="comment">// will die soon.</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="keywordflow">if</span> (!AI.<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>()) {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="comment">// New is the allocation instruction, pointer typed. AI is the original</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="comment">// allocation instruction, also pointer typed. Thus, cast to use is BitCast.</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewCast = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(New, AI.<a class="code" href="classllvm_1_1AllocaInst.html#ac106bea55dfb26f8b14676aac05bd89f">getType</a>(), <span class="stringliteral">&quot;tmpcast&quot;</span>);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    replaceInstUsesWith(AI, NewCast);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    eraseInstFromFunction(AI);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  }</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="keywordflow">return</span> replaceInstUsesWith(CI, New);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;}</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">/// Given an expression that CanEvaluateTruncated or CanEvaluateSExtd returns</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">/// true for, actually insert the code to evaluate the expression.</span></div>
<div class="line"><a name="l00190"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#ab05ba39ce6e678149dabd939c9ad4c3e">  190</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#ab05ba39ce6e678149dabd939c9ad4c3e">InstCombinerImpl::EvaluateInDifferentType</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty,</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                                                 <span class="keywordtype">bool</span> <a class="code" href="ExpandLargeDivRem_8cpp.html#a49b2092a066cfbc24bc6925bdea9682a">isSigned</a>) {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;Constant&gt;(V)) {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="classllvm_1_1ConstantExpr.html#a90d84324b6b6aa2a60077a79b31a49e7">ConstantExpr::getIntegerCast</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, Ty, <a class="code" href="ExpandLargeDivRem_8cpp.html#a49b2092a066cfbc24bc6925bdea9682a">isSigned</a> <span class="comment">/*Sext or ZExt*/</span>);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="comment">// If we got a constantexpr back, try to simplify it with DL info.</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a5e655fd99a56d50b071fc26d8db5fd5b">ConstantFoldConstant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, &amp;TLI);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  }</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <span class="comment">// Otherwise, it must be an instruction.</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = cast&lt;Instruction&gt;(V);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Res = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <span class="keywordtype">unsigned</span> Opc = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode();</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <span class="keywordflow">switch</span> (Opc) {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a>:</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="keywordflow">case</span> Instruction::Sub:</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Instruction::Mul</a>:</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="keywordflow">case</span> Instruction::And:</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <span class="keywordflow">case</span> Instruction::Or:</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <span class="keywordflow">case</span> Instruction::Xor:</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <span class="keywordflow">case</span> Instruction::AShr:</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="keywordflow">case</span> Instruction::LShr:</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <span class="keywordflow">case</span> Instruction::Shl:</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="keywordflow">case</span> Instruction::UDiv:</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="keywordflow">case</span> Instruction::URem: {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = EvaluateInDifferentType(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0), Ty, <a class="code" href="ExpandLargeDivRem_8cpp.html#a49b2092a066cfbc24bc6925bdea9682a">isSigned</a>);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = EvaluateInDifferentType(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1), Ty, <a class="code" href="ExpandLargeDivRem_8cpp.html#a49b2092a066cfbc24bc6925bdea9682a">isSigned</a>);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    Res = <a class="code" href="classllvm_1_1BinaryOperator.html#a02ce9966395063ac501ecbc1623deda4">BinaryOperator::Create</a>((<a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a>)Opc, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  }</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="keywordflow">case</span> Instruction::Trunc:</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <span class="keywordflow">case</span> Instruction::ZExt:</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="keywordflow">case</span> Instruction::SExt:</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="comment">// If the source type of the cast is the type we&#39;re trying for then we can</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="comment">// just return the source.  There&#39;s no need to insert it because it is not</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="comment">// new.</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0)-&gt;getType() == Ty)</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160; </div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="comment">// Otherwise, must be the same type of cast, so just reinsert a new one.</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="comment">// This also handles the case of zext(trunc(x)) -&gt; zext(x).</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    Res = <a class="code" href="classllvm_1_1CastInst.html#a277c32f1a2c680c0af45cbf0ff67c409">CastInst::CreateIntegerCast</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0), Ty,</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                                      Opc == Instruction::SExt);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="AMDGPURegBankSelect_8cpp.html#a14e0c000ed52e5fc187d4a885914cc1a">Instruction::Select</a>: {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *True = EvaluateInDifferentType(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1), Ty, <a class="code" href="ExpandLargeDivRem_8cpp.html#a49b2092a066cfbc24bc6925bdea9682a">isSigned</a>);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *False = EvaluateInDifferentType(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(2), Ty, <a class="code" href="ExpandLargeDivRem_8cpp.html#a49b2092a066cfbc24bc6925bdea9682a">isSigned</a>);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    Res = <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0), True, False);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  }</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">Instruction::PHI</a>: {</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *OPN = cast&lt;PHINode&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *NPN = <a class="code" href="classllvm_1_1PHINode.html#ab0ff669b12c20c07137705c38872ec63">PHINode::Create</a>(Ty, OPN-&gt;<a class="code" href="classllvm_1_1PHINode.html#aef51af4b490af6b3bf2dfbc8737a8f9f">getNumIncomingValues</a>());</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = OPN-&gt;<a class="code" href="classllvm_1_1PHINode.html#aef51af4b490af6b3bf2dfbc8737a8f9f">getNumIncomingValues</a>(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *V =</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;          EvaluateInDifferentType(OPN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a16c39eb6e60b42a40c399d8d65347bb6">getIncomingValue</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>), Ty, <a class="code" href="ExpandLargeDivRem_8cpp.html#a49b2092a066cfbc24bc6925bdea9682a">isSigned</a>);</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      NPN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(V, OPN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a8ce0c4746a1ec805e66409d20ae93922">getIncomingBlock</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    }</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    Res = NPN;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  }</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="keywordflow">case</span> Instruction::FPToUI:</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="keywordflow">case</span> Instruction::FPToSI:</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    Res = <a class="code" href="classllvm_1_1CastInst.html#a643fe5a9e7042f032dae78109c2b1e72">CastInst::Create</a>(</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      <span class="keyword">static_cast&lt;</span><a class="code" href="classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">Instruction::CastOps</a><span class="keyword">&gt;</span>(Opc), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0), Ty);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Instruction::Call</a>:</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *II = dyn_cast&lt;IntrinsicInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      <span class="keywordflow">switch</span> (II-&gt;getIntrinsicID()) {</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unsupported call!&quot;</span>);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      <span class="keywordflow">case</span> Intrinsic::vscale: {</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <a class="code" href="classllvm_1_1Function.html">Function</a> *Fn =</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            <a class="code" href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">Intrinsic::getDeclaration</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getModule(), Intrinsic::vscale, {Ty});</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        Res = <a class="code" href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">CallInst::Create</a>(Fn-&gt;<a class="code" href="classllvm_1_1Function.html#adf50671db83d2813e0d897ea2cfc9102">getFunctionType</a>(), Fn);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      }</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      }</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    }</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="comment">// TODO: Can handle more cases here.</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unreachable!&quot;</span>);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  }</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160; </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  Res-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <span class="keywordflow">return</span> InsertNewInstWith(Res, *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;}</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160; </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<a class="code" href="classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">Instruction::CastOps</a></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;InstCombinerImpl::isEliminableCastPair(<span class="keyword">const</span> <a class="code" href="classllvm_1_1CastInst.html">CastInst</a> *CI1,</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                                       <span class="keyword">const</span> <a class="code" href="classllvm_1_1CastInst.html">CastInst</a> *CI2) {</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *SrcTy = CI1-&gt;<a class="code" href="classllvm_1_1CastInst.html#a6a1a810dc09bf349d1e1481931ce2baa">getSrcTy</a>();</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *MidTy = CI1-&gt;<a class="code" href="classllvm_1_1CastInst.html#a7cf02ab81e7b0774ebf78e13f89dabfc">getDestTy</a>();</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *DstTy = CI2-&gt;<a class="code" href="classllvm_1_1CastInst.html#a7cf02ab81e7b0774ebf78e13f89dabfc">getDestTy</a>();</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160; </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">Instruction::CastOps</a> firstOp = CI1-&gt;<a class="code" href="classllvm_1_1CastInst.html#a3685b2128d8e6917000e4adc3b266ff6">getOpcode</a>();</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">Instruction::CastOps</a> secondOp = CI2-&gt;<a class="code" href="classllvm_1_1CastInst.html#a3685b2128d8e6917000e4adc3b266ff6">getOpcode</a>();</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *SrcIntPtrTy =</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      SrcTy-&gt;<a class="code" href="classllvm_1_1Type.html#ab03652069eab17006c51f00c261a6a44">isPtrOrPtrVectorTy</a>() ? <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getIntPtrType(SrcTy) : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *MidIntPtrTy =</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      MidTy-&gt;<a class="code" href="classllvm_1_1Type.html#ab03652069eab17006c51f00c261a6a44">isPtrOrPtrVectorTy</a>() ? <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getIntPtrType(MidTy) : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *DstIntPtrTy =</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      DstTy-&gt;<a class="code" href="classllvm_1_1Type.html#ab03652069eab17006c51f00c261a6a44">isPtrOrPtrVectorTy</a>() ? <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getIntPtrType(DstTy) : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <span class="keywordtype">unsigned</span> Res = <a class="code" href="classllvm_1_1CastInst.html#a8b805c54dc1ead67b711a4b1cb72f492">CastInst::isEliminableCastPair</a>(firstOp, secondOp, SrcTy, MidTy,</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                                                DstTy, SrcIntPtrTy, MidIntPtrTy,</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                                                DstIntPtrTy);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160; </div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <span class="comment">// We don&#39;t want to form an inttoptr or ptrtoint that converts to an integer</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="comment">// type that differs from the pointer size.</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="keywordflow">if</span> ((Res == Instruction::IntToPtr &amp;&amp; SrcTy != DstIntPtrTy) ||</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      (Res == Instruction::PtrToInt &amp;&amp; DstTy != SrcIntPtrTy))</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    Res = 0;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160; </div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">Instruction::CastOps</a>(Res);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;}</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment">/// Implement the transforms common to all CastInst visitors.</span></div>
<div class="line"><a name="l00307"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a6adc65f05e61f4929966c0e4429c6fc7">  307</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a6adc65f05e61f4929966c0e4429c6fc7">InstCombinerImpl::commonCastTransforms</a>(<a class="code" href="classllvm_1_1CastInst.html">CastInst</a> &amp;CI) {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Src = CI.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = CI.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160; </div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <span class="comment">// Try to eliminate a cast of a cast.</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CSrc = dyn_cast&lt;CastInst&gt;(Src)) {   <span class="comment">// A-&gt;B-&gt;C cast</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">Instruction::CastOps</a> NewOpc = isEliminableCastPair(CSrc, &amp;CI)) {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      <span class="comment">// The first cast (CSrc) is eliminable so we need to fix up or replace</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      <span class="comment">// the second cast (CI). CSrc will then have a good chance of being dead.</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      <span class="keyword">auto</span> *Res = <a class="code" href="classllvm_1_1CastInst.html#a643fe5a9e7042f032dae78109c2b1e72">CastInst::Create</a>(NewOpc, CSrc-&gt;getOperand(0), Ty);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      <span class="comment">// Point debug users of the dying cast to the new one.</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      <span class="keywordflow">if</span> (CSrc-&gt;hasOneUse())</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <a class="code" href="namespacellvm.html#a9784a018b2dd6a85ee8a70f5f5ab3d02">replaceAllDbgUsesWith</a>(*CSrc, *Res, CI, DT);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    }</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  }</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160; </div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Sel = dyn_cast&lt;SelectInst&gt;(Src)) {</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="comment">// We are casting a select. Try to fold the cast into the select if the</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="comment">// select does not have a compare instruction with matching operand types</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="comment">// or the select is likely better done in a narrow type.</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="comment">// Creating a select with operands that are different sizes than its</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="comment">// condition may inhibit other folds and lead to worse codegen.</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="keyword">auto</span> *Cmp = dyn_cast&lt;CmpInst&gt;(Sel-&gt;getCondition());</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="keywordflow">if</span> (!Cmp || Cmp-&gt;getOperand(0)-&gt;getType() != Sel-&gt;getType() ||</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        (CI.<a class="code" href="classllvm_1_1CastInst.html#a3685b2128d8e6917000e4adc3b266ff6">getOpcode</a>() == Instruction::Trunc &amp;&amp;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;         shouldChangeType(CI.<a class="code" href="classllvm_1_1CastInst.html#a6a1a810dc09bf349d1e1481931ce2baa">getSrcTy</a>(), CI.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()))) {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">NV</a> = FoldOpIntoSelect(CI, Sel)) {</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        <a class="code" href="namespacellvm.html#a9784a018b2dd6a85ee8a70f5f5ab3d02">replaceAllDbgUsesWith</a>(*Sel, *<a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">NV</a>, CI, DT);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">NV</a>;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      }</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    }</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  }</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160; </div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <span class="comment">// If we are casting a PHI, then fold the cast into the PHI.</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *PN = dyn_cast&lt;PHINode&gt;(Src)) {</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="comment">// Don&#39;t do this if it would create a PHI node with an illegal type from a</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="comment">// legal type.</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordflow">if</span> (!Src-&gt;getType()-&gt;isIntegerTy() || !CI.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>() ||</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        shouldChangeType(CI.<a class="code" href="classllvm_1_1CastInst.html#a6a1a810dc09bf349d1e1481931ce2baa">getSrcTy</a>(), CI.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()))</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">NV</a> = foldOpIntoPhi(CI, PN))</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">NV</a>;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  }</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160; </div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <span class="comment">// Canonicalize a unary shuffle after the cast if neither operation changes</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <span class="comment">// the size or element size of the input vector.</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <span class="comment">// TODO: We could allow size-changing ops if that doesn&#39;t harm codegen.</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <span class="comment">// cast (shuffle X, Mask) --&gt; shuffle (cast X), Mask</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;int&gt;</a> <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Src, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#afd3e8a6706810fef8cdbaf1f9f40dfbd">m_Shuffle</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#adea6dc2e42baa345b97be48b0370313d">m_Undef</a>(), <a class="code" href="structllvm_1_1PatternMatch_1_1m__Mask.html">m_Mask</a>(<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>))))) {</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="comment">// TODO: Allow scalable vectors?</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keyword">auto</span> *SrcTy = dyn_cast&lt;FixedVectorType&gt;(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType());</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keyword">auto</span> *DestTy = dyn_cast&lt;FixedVectorType&gt;(Ty);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="keywordflow">if</span> (SrcTy &amp;&amp; DestTy &amp;&amp;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        SrcTy-&gt;getNumElements() == DestTy-&gt;getNumElements() &amp;&amp;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        SrcTy-&gt;<a class="code" href="classllvm_1_1Type.html#a833daf718a49c5cd637d8c9ddeaebe07">getPrimitiveSizeInBits</a>() == DestTy-&gt;getPrimitiveSizeInBits()) {</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *CastX = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCast(CI.<a class="code" href="classllvm_1_1CastInst.html#a3685b2128d8e6917000e4adc3b266ff6">getOpcode</a>(), <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, DestTy);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ShuffleVectorInst.html">ShuffleVectorInst</a>(CastX, <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    }</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  }</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160; </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;}</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment">/// Constants and extensions/truncates from the destination type are always</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="comment">/// free to be evaluated in that type. This is a helper for canEvaluate*.</span></div>
<div class="line"><a name="l00374"></a><span class="lineno"><a class="line" href="InstCombineCasts_8cpp.html#a9cad0d942fb5f64b2ec2ce7e7277c492">  374</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineCasts_8cpp.html#a9cad0d942fb5f64b2ec2ce7e7277c492">canAlwaysEvaluateInType</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty) {</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <span class="keywordflow">if</span> (isa&lt;Constant&gt;(V))</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <span class="keywordflow">if</span> ((<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(V, <a class="code" href="namespacellvm_1_1PatternMatch.html#a247b6987d634040b8aa6fb9c5887b703">m_ZExtOrSExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))) || <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(V, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5b844aada27c4c6fdb87146ac458c0d8">m_Trunc</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)))) &amp;&amp;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType() == Ty)</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160; </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;}</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment">/// Filter out values that we can not evaluate in the destination type for free.</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment">/// This is a helper for canEvaluate*.</span></div>
<div class="line"><a name="l00387"></a><span class="lineno"><a class="line" href="InstCombineCasts_8cpp.html#aaa977254b83ff622718b40f1aa81271f">  387</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineCasts_8cpp.html#aaa977254b83ff622718b40f1aa81271f">canNotEvaluateInType</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty) {</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!isa&lt;Constant&gt;(V) &amp;&amp; <span class="stringliteral">&quot;Constant should already be handled.&quot;</span>);</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;Instruction&gt;(V))</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <span class="comment">// We don&#39;t extend or shrink something that has multiple uses --  doing so</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <span class="comment">// would require duplicating the instruction which isn&#39;t profitable.</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <span class="keywordflow">if</span> (!V-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160; </div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;}</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment">/// Return true if we can evaluate the specified expression tree as type Ty</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment">/// instead of its larger type, and arrive with the same value.</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment">/// This is used by code that tries to eliminate truncates.</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="comment">/// Ty will always be a type smaller than V.  We should return true if trunc(V)</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment">/// can be computed by computing V in the smaller type.  If V is an instruction,</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment">/// then trunc(inst(x,y)) can be computed as inst(trunc(x),trunc(y)), which only</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment">/// makes sense if x and y can be efficiently truncated.</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment">/// This function works on both vectors and scalars.</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00410"></a><span class="lineno"><a class="line" href="InstCombineCasts_8cpp.html#aefd6331c5fd6ec51f6a9e5558f885f28">  410</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineCasts_8cpp.html#aefd6331c5fd6ec51f6a9e5558f885f28">canEvaluateTruncated</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty, <a class="code" href="classllvm_1_1InstCombinerImpl.html">InstCombinerImpl</a> &amp;IC,</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                                 <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *CxtI) {</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="InstCombineCasts_8cpp.html#a9cad0d942fb5f64b2ec2ce7e7277c492">canAlwaysEvaluateInType</a>(V, Ty))</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="InstCombineCasts_8cpp.html#aaa977254b83ff622718b40f1aa81271f">canNotEvaluateInType</a>(V, Ty))</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = cast&lt;Instruction&gt;(V);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *OrigTy = V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode()) {</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a>:</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <span class="keywordflow">case</span> Instruction::Sub:</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Instruction::Mul</a>:</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  <span class="keywordflow">case</span> Instruction::And:</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <span class="keywordflow">case</span> Instruction::Or:</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  <span class="keywordflow">case</span> Instruction::Xor:</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="comment">// These operators can all arbitrarily be extended or truncated.</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="InstCombineCasts_8cpp.html#aefd6331c5fd6ec51f6a9e5558f885f28">canEvaluateTruncated</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0), Ty, IC, CxtI) &amp;&amp;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;           <a class="code" href="InstCombineCasts_8cpp.html#aefd6331c5fd6ec51f6a9e5558f885f28">canEvaluateTruncated</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1), Ty, IC, CxtI);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160; </div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="keywordflow">case</span> Instruction::UDiv:</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <span class="keywordflow">case</span> Instruction::URem: {</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="comment">// UDiv and URem can be truncated if all the truncated bits are zero.</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <a class="code" href="classuint32__t.html">uint32_t</a> OrigBitWidth = OrigTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <a class="code" href="classuint32__t.html">uint32_t</a> <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> = Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> &lt; OrigBitWidth &amp;&amp; <span class="stringliteral">&quot;Unexpected bitwidths!&quot;</span>);</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = <a class="code" href="classllvm_1_1APInt.html#aeaf22e8d92fd978a5eca9ab031994399">APInt::getBitsSetFrom</a>(OrigBitWidth, <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="keywordflow">if</span> (IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae506e7be0a7aaf9001e31d5fca5f2fbc">MaskedValueIsZero</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0), <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>, 0, CxtI) &amp;&amp;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae506e7be0a7aaf9001e31d5fca5f2fbc">MaskedValueIsZero</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1), <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>, 0, CxtI)) {</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="InstCombineCasts_8cpp.html#aefd6331c5fd6ec51f6a9e5558f885f28">canEvaluateTruncated</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0), Ty, IC, CxtI) &amp;&amp;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;             <a class="code" href="InstCombineCasts_8cpp.html#aefd6331c5fd6ec51f6a9e5558f885f28">canEvaluateTruncated</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1), Ty, IC, CxtI);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    }</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  }</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <span class="keywordflow">case</span> Instruction::Shl: {</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="comment">// If we are truncating the result of this SHL, and if it&#39;s a shift of an</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="comment">// inrange amount, we can always perform a SHL in a smaller type.</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <a class="code" href="classuint32__t.html">uint32_t</a> <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> = Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <a class="code" href="structllvm_1_1KnownBits.html">KnownBits</a> AmtKnownBits =</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <a class="code" href="namespacellvm.html#aa1f8f0633edd8b9a1c5ec15bb9fc5640">llvm::computeKnownBits</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1), IC.<a class="code" href="classllvm_1_1InstCombiner.html#a66eb0dc4cd710cba31cbf66f6c031bfb">getDataLayout</a>());</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="keywordflow">if</span> (AmtKnownBits.<a class="code" href="structllvm_1_1KnownBits.html#a825476b2436eb817b735fdd34ee521c4">getMaxValue</a>().<a class="code" href="classllvm_1_1APInt.html#a545e8d5dfa1688acea0d0e275b03682f">ult</a>(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>))</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="InstCombineCasts_8cpp.html#aefd6331c5fd6ec51f6a9e5558f885f28">canEvaluateTruncated</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0), Ty, IC, CxtI) &amp;&amp;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;             <a class="code" href="InstCombineCasts_8cpp.html#aefd6331c5fd6ec51f6a9e5558f885f28">canEvaluateTruncated</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1), Ty, IC, CxtI);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  }</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  <span class="keywordflow">case</span> Instruction::LShr: {</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="comment">// If this is a truncate of a logical shr, we can truncate it to a smaller</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="comment">// lshr iff we know that the bits we would otherwise be shifting in are</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="comment">// already zeros.</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="comment">// TODO: It is enough to check that the bits we would be shifting in are</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="comment">//       zero - use AmtKnownBits.getMaxValue().</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <a class="code" href="classuint32__t.html">uint32_t</a> OrigBitWidth = OrigTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <a class="code" href="classuint32__t.html">uint32_t</a> <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> = Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <a class="code" href="structllvm_1_1KnownBits.html">KnownBits</a> AmtKnownBits =</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <a class="code" href="namespacellvm.html#aa1f8f0633edd8b9a1c5ec15bb9fc5640">llvm::computeKnownBits</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1), IC.<a class="code" href="classllvm_1_1InstCombiner.html#a66eb0dc4cd710cba31cbf66f6c031bfb">getDataLayout</a>());</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> ShiftedBits = <a class="code" href="classllvm_1_1APInt.html#aeaf22e8d92fd978a5eca9ab031994399">APInt::getBitsSetFrom</a>(OrigBitWidth, <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>);</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="keywordflow">if</span> (AmtKnownBits.<a class="code" href="structllvm_1_1KnownBits.html#a825476b2436eb817b735fdd34ee521c4">getMaxValue</a>().<a class="code" href="classllvm_1_1APInt.html#a545e8d5dfa1688acea0d0e275b03682f">ult</a>(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>) &amp;&amp;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae506e7be0a7aaf9001e31d5fca5f2fbc">MaskedValueIsZero</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0), ShiftedBits, 0, CxtI)) {</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="InstCombineCasts_8cpp.html#aefd6331c5fd6ec51f6a9e5558f885f28">canEvaluateTruncated</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0), Ty, IC, CxtI) &amp;&amp;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;             <a class="code" href="InstCombineCasts_8cpp.html#aefd6331c5fd6ec51f6a9e5558f885f28">canEvaluateTruncated</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1), Ty, IC, CxtI);</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    }</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  }</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  <span class="keywordflow">case</span> Instruction::AShr: {</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="comment">// If this is a truncate of an arithmetic shr, we can truncate it to a</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="comment">// smaller ashr iff we know that all the bits from the sign bit of the</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="comment">// original type and the sign bit of the truncate type are similar.</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="comment">// TODO: It is enough to check that the bits we would be shifting in are</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="comment">//       similar to sign bit of the truncate type.</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <a class="code" href="classuint32__t.html">uint32_t</a> OrigBitWidth = OrigTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <a class="code" href="classuint32__t.html">uint32_t</a> <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> = Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <a class="code" href="structllvm_1_1KnownBits.html">KnownBits</a> AmtKnownBits =</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <a class="code" href="namespacellvm.html#aa1f8f0633edd8b9a1c5ec15bb9fc5640">llvm::computeKnownBits</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1), IC.<a class="code" href="classllvm_1_1InstCombiner.html#a66eb0dc4cd710cba31cbf66f6c031bfb">getDataLayout</a>());</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keywordtype">unsigned</span> ShiftedBits = OrigBitWidth - <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="keywordflow">if</span> (AmtKnownBits.<a class="code" href="structllvm_1_1KnownBits.html#a825476b2436eb817b735fdd34ee521c4">getMaxValue</a>().<a class="code" href="classllvm_1_1APInt.html#a545e8d5dfa1688acea0d0e275b03682f">ult</a>(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>) &amp;&amp;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        ShiftedBits &lt; IC.<a class="code" href="classllvm_1_1InstCombiner.html#a879221accd38e1327b8dcf596650b031">ComputeNumSignBits</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0), 0, CxtI))</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="InstCombineCasts_8cpp.html#aefd6331c5fd6ec51f6a9e5558f885f28">canEvaluateTruncated</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0), Ty, IC, CxtI) &amp;&amp;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;             <a class="code" href="InstCombineCasts_8cpp.html#aefd6331c5fd6ec51f6a9e5558f885f28">canEvaluateTruncated</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1), Ty, IC, CxtI);</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  }</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  <span class="keywordflow">case</span> Instruction::Trunc:</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="comment">// trunc(trunc(x)) -&gt; trunc(x)</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  <span class="keywordflow">case</span> Instruction::ZExt:</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  <span class="keywordflow">case</span> Instruction::SExt:</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="comment">// trunc(ext(x)) -&gt; ext(x) if the source type is smaller than the new dest</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="comment">// trunc(ext(x)) -&gt; trunc(x) if the source type is larger than the new dest</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="AMDGPURegBankSelect_8cpp.html#a14e0c000ed52e5fc187d4a885914cc1a">Instruction::Select</a>: {</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = cast&lt;SelectInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="InstCombineCasts_8cpp.html#aefd6331c5fd6ec51f6a9e5558f885f28">canEvaluateTruncated</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getTrueValue(), Ty, IC, CxtI) &amp;&amp;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;           <a class="code" href="InstCombineCasts_8cpp.html#aefd6331c5fd6ec51f6a9e5558f885f28">canEvaluateTruncated</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getFalseValue(), Ty, IC, CxtI);</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  }</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">Instruction::PHI</a>: {</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="comment">// We can change a phi if we can change all operands.  Note that we never</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="comment">// get into trouble with cyclic PHIs here because we only consider</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <span class="comment">// instructions with a single use.</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = cast&lt;PHINode&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *IncValue : PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a1f0ff79b64a40d383b891f1baba89c6b">incoming_values</a>())</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="InstCombineCasts_8cpp.html#aefd6331c5fd6ec51f6a9e5558f885f28">canEvaluateTruncated</a>(IncValue, Ty, IC, CxtI))</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  }</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <span class="keywordflow">case</span> Instruction::FPToUI:</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <span class="keywordflow">case</span> Instruction::FPToSI: {</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="comment">// If the integer type can hold the max FP value, it is safe to cast</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="comment">// directly to that type. Otherwise, we may create poison via overflow</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="comment">// that did not exist in the original code.</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *InputTy = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0)-&gt;getType()-&gt;getScalarType();</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1fltSemantics.html">fltSemantics</a> &amp;Semantics = InputTy-&gt;<a class="code" href="classllvm_1_1Type.html#adc21598ac33ea9d50f3a939f26a28940">getFltSemantics</a>();</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <a class="code" href="classuint32__t.html">uint32_t</a> MinBitWidth =</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;      <a class="code" href="structllvm_1_1APFloatBase.html#afede4bd63799684de5d737cd51519768">APFloatBase::semanticsIntSizeInBits</a>(Semantics,</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;          <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode() == Instruction::FPToSI);</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="keywordflow">return</span> Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>() &gt;= MinBitWidth;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  }</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="comment">// TODO: Can handle more cases here.</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  }</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160; </div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;}</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment">/// Given a vector that is bitcast to an integer, optionally logically</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment">/// right-shifted, and truncated, convert it to an extractelement.</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="comment">/// Example (big endian):</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment">///   trunc (lshr (bitcast &lt;4 x i32&gt; %X to i128), 32) to i32</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment">///   ---&gt;</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment">///   extractelement &lt;4 x i32&gt; %X, 1</span></div>
<div class="line"><a name="l00539"></a><span class="lineno"><a class="line" href="InstCombineCasts_8cpp.html#a144f501e5d35220bb482eec5a94f7062">  539</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineCasts_8cpp.html#a144f501e5d35220bb482eec5a94f7062">foldVecTruncToExtElt</a>(<a class="code" href="classllvm_1_1TruncInst.html">TruncInst</a> &amp;Trunc,</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                                         <a class="code" href="classllvm_1_1InstCombinerImpl.html">InstCombinerImpl</a> &amp;IC) {</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *TruncOp = Trunc.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *DestType = Trunc.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  <span class="keywordflow">if</span> (!TruncOp-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || !isa&lt;IntegerType&gt;(DestType))</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160; </div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *VecInput = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *ShiftVal = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(TruncOp, <a class="code" href="namespacellvm_1_1PatternMatch.html#af4feec45578e32fe65d8efc59112bc8e">m_CombineOr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ac0467ca7fad871738b10db95feb40dad">m_BitCast</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(VecInput)),</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                                  <a class="code" href="namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">m_LShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ac0467ca7fad871738b10db95feb40dad">m_BitCast</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(VecInput)),</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                                         <a class="code" href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">m_ConstantInt</a>(ShiftVal)))) ||</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      !isa&lt;VectorType&gt;(VecInput-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()))</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160; </div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <a class="code" href="classllvm_1_1VectorType.html">VectorType</a> *<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07c">VecType</a> = cast&lt;VectorType&gt;(VecInput-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  <span class="keywordtype">unsigned</span> VecWidth = <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07c">VecType</a>-&gt;getPrimitiveSizeInBits();</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  <span class="keywordtype">unsigned</span> DestWidth = DestType-&gt;<a class="code" href="classllvm_1_1Type.html#a833daf718a49c5cd637d8c9ddeaebe07">getPrimitiveSizeInBits</a>();</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  <span class="keywordtype">unsigned</span> ShiftAmount = ShiftVal ? ShiftVal-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#ac09a21c371a9c535cbc13e8f82503aec">getZExtValue</a>() : 0;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160; </div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  <span class="keywordflow">if</span> ((VecWidth % DestWidth != 0) || (ShiftAmount % DestWidth != 0))</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160; </div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  <span class="comment">// If the element type of the vector doesn&#39;t match the result type,</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  <span class="comment">// bitcast it to a vector type that we can extract from.</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <span class="keywordtype">unsigned</span> NumVecElts = VecWidth / DestWidth;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07c">VecType</a>-&gt;getElementType() != DestType) {</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07c">VecType</a> = <a class="code" href="classllvm_1_1FixedVectorType.html#af9a870d5df50fe0133a410b7c9114c80">FixedVectorType::get</a>(DestType, NumVecElts);</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    VecInput = IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae1d331bc844ecb92bdeb0b706ae04396">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a06d64f226fabd94d694d6abd82e3c7b3">CreateBitCast</a>(VecInput, <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07c">VecType</a>, <span class="stringliteral">&quot;bc&quot;</span>);</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  }</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160; </div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  <span class="keywordtype">unsigned</span> Elt = ShiftAmount / DestWidth;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <span class="keywordflow">if</span> (IC.<a class="code" href="classllvm_1_1InstCombiner.html#a66eb0dc4cd710cba31cbf66f6c031bfb">getDataLayout</a>().<a class="code" href="classllvm_1_1DataLayout.html#a84c1d72001dd5f34d9a55b3a7bb8a474">isBigEndian</a>())</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    Elt = NumVecElts - 1 - Elt;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160; </div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ExtractElementInst.html#a5d496a334eff64bb2873339b54df932a">ExtractElementInst::Create</a>(VecInput, IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae1d331bc844ecb92bdeb0b706ae04396">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#ac0e8c554bf1c1e117a74d51df89c137d">getInt32</a>(Elt));</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;}</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="comment">/// Funnel/Rotate left/right may occur in a wider type than necessary because of</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="comment">/// type promotion rules. Try to narrow the inputs and convert to funnel shift.</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InstCombinerImpl::narrowFunnelShift(<a class="code" href="classllvm_1_1TruncInst.html">TruncInst</a> &amp;Trunc) {</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((isa&lt;VectorType&gt;(Trunc.<a class="code" href="classllvm_1_1CastInst.html#a6a1a810dc09bf349d1e1481931ce2baa">getSrcTy</a>()) ||</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;          shouldChangeType(Trunc.<a class="code" href="classllvm_1_1CastInst.html#a6a1a810dc09bf349d1e1481931ce2baa">getSrcTy</a>(), Trunc.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())) &amp;&amp;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;         <span class="stringliteral">&quot;Don&#39;t narrow to an illegal scalar type&quot;</span>);</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160; </div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  <span class="comment">// Bail out on strange types. It is possible to handle some of these patterns</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  <span class="comment">// even with non-power-of-2 sizes, but it is not a likely scenario.</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *DestTy = Trunc.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  <span class="keywordtype">unsigned</span> NarrowWidth = DestTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  <span class="keywordtype">unsigned</span> WideWidth = Trunc.<a class="code" href="classllvm_1_1CastInst.html#a6a1a810dc09bf349d1e1481931ce2baa">getSrcTy</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2_32</a>(NarrowWidth))</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160; </div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <span class="comment">// First, find an or&#39;d pair of opposite shifts:</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  <span class="comment">// trunc (or (lshr ShVal0, ShAmt0), (shl ShVal1, ShAmt1))</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *Or0, *Or1;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Trunc.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a43ac4fbaaf63a88eb5ac05f6d3e5649c">m_BinOp</a>(Or0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a43ac4fbaaf63a88eb5ac05f6d3e5649c">m_BinOp</a>(Or1)))))</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160; </div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ShVal0, *ShVal1, *ShAmt0, *ShAmt1;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Or0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a595e5029858e33416e500bed9317d309">m_LogicalShift</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(ShVal0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(ShAmt0)))) ||</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;      !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Or1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a595e5029858e33416e500bed9317d309">m_LogicalShift</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(ShVal1), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(ShAmt1)))) ||</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;      Or0-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>() == Or1-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>())</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160; </div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  <span class="comment">// Canonicalize to or(shl(ShVal0, ShAmt0), lshr(ShVal1, ShAmt1)).</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <span class="keywordflow">if</span> (Or0-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>() == BinaryOperator::LShr) {</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Or0, Or1);</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(ShVal0, ShVal1);</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(ShAmt0, ShAmt1);</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  }</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Or0-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>() == BinaryOperator::Shl &amp;&amp;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;         Or1-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>() == BinaryOperator::LShr &amp;&amp;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;         <span class="stringliteral">&quot;Illegal or(shift,shift) pair&quot;</span>);</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160; </div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <span class="comment">// Match the shift amount operands for a funnel/rotate pattern. This always</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  <span class="comment">// matches a subtraction on the R operand.</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  <span class="keyword">auto</span> matchShiftAmount = [&amp;](<a class="code" href="classllvm_1_1Value.html">Value</a> *L, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>, <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a>) -&gt; <a class="code" href="classllvm_1_1Value.html">Value</a> * {</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="comment">// The shift amounts may add up to the narrow bit width:</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="comment">// (shl ShVal0, L) | (lshr ShVal1, Width - L)</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <span class="comment">// If this is a funnel shift (different operands are shifted), then the</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <span class="comment">// shift amount can not over-shift (create poison) in the narrow type.</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <span class="keywordtype">unsigned</span> MaxShiftAmountWidth = <a class="code" href="namespacellvm.html#a646986783f35e0fef8988f0f28d2589f">Log2_32</a>(NarrowWidth);</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> HiBitMask = ~<a class="code" href="classllvm_1_1APInt.html">APInt</a>::getLowBitsSet(WideWidth, MaxShiftAmountWidth);</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <span class="keywordflow">if</span> (ShVal0 == ShVal1 || <a class="code" href="namespacellvm.html#aedbf3998b4ff72347a45cb4169d120db">MaskedValueIsZero</a>(L, HiBitMask))</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(R, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ac3ed5602889a22db44a16e1b97fac5b8">m_Sub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">m_SpecificInt</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(L)))))</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        <span class="keywordflow">return</span> L;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160; </div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <span class="comment">// The following patterns currently only work for rotation patterns.</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <span class="comment">// TODO: Add more general funnel-shift compatible patterns.</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="keywordflow">if</span> (ShVal0 != ShVal1)</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160; </div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="comment">// The shift amount may be masked with negation:</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="comment">// (shl ShVal0, (X &amp; (Width - 1))) | (lshr ShVal1, ((-X) &amp; (Width - 1)))</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a> - 1;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(L, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">m_SpecificInt</a>(<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>))) &amp;&amp;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(R, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2fed53ed2b3225752bd9e4fce4967361">m_Neg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">m_SpecificInt</a>(<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>))))</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160; </div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="comment">// Same as above, but the shift amount may be extended after masking:</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(L, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">m_SpecificInt</a>(<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>)))) &amp;&amp;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(R, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2fed53ed2b3225752bd9e4fce4967361">m_Neg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">m_SpecificInt</a>(<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>)))))</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160; </div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  };</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160; </div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ShAmt = matchShiftAmount(ShAmt0, ShAmt1, NarrowWidth);</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  <span class="keywordtype">bool</span> IsFshl = <span class="keyword">true</span>; <span class="comment">// Sub on LSHR.</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  <span class="keywordflow">if</span> (!ShAmt) {</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    ShAmt = matchShiftAmount(ShAmt1, ShAmt0, NarrowWidth);</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    IsFshl = <span class="keyword">false</span>; <span class="comment">// Sub on SHL.</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;  }</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  <span class="keywordflow">if</span> (!ShAmt)</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160; </div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  <span class="comment">// The right-shifted value must have high zeros in the wide type (for example</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <span class="comment">// from &#39;zext&#39;, &#39;and&#39; or &#39;shift&#39;). High bits of the left-shifted value are</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  <span class="comment">// truncated, so those do not matter.</span></div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> HiBitMask = <a class="code" href="classllvm_1_1APInt.html#adcb96bd09d7c75c7669fa5f9d1190899">APInt::getHighBitsSet</a>(WideWidth, WideWidth - NarrowWidth);</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#aedbf3998b4ff72347a45cb4169d120db">MaskedValueIsZero</a>(ShVal1, HiBitMask, 0, &amp;Trunc))</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160; </div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  <span class="comment">// We have an unnecessarily wide rotate!</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  <span class="comment">// trunc (or (shl ShVal0, ShAmt), (lshr ShVal1, BitWidth - ShAmt))</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  <span class="comment">// Narrow the inputs and convert to funnel shift intrinsic:</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;  <span class="comment">// llvm.fshl.i8(trunc(ShVal), trunc(ShVal), trunc(ShAmt))</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NarrowShAmt = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateTrunc(ShAmt, DestTy);</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateTrunc(ShVal0, DestTy);</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  <span class="keywordflow">if</span> (ShVal0 != ShVal1)</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateTrunc(ShVal1, DestTy);</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  <a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">Intrinsic::ID</a> IID = IsFshl ? Intrinsic::fshl : Intrinsic::fshr;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">Intrinsic::getDeclaration</a>(Trunc.<a class="code" href="classllvm_1_1Instruction.html#a4ba3a5be6c0e9b9e8a525de055836733">getModule</a>(), IID, DestTy);</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">CallInst::Create</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, {<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, NarrowShAmt});</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;}</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;<span class="comment">/// Try to narrow the width of math or bitwise logic instructions by pulling a</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;<span class="comment">/// truncate ahead of binary operators.</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InstCombinerImpl::narrowBinOp(<a class="code" href="classllvm_1_1TruncInst.html">TruncInst</a> &amp;Trunc) {</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *SrcTy = Trunc.<a class="code" href="classllvm_1_1CastInst.html#a6a1a810dc09bf349d1e1481931ce2baa">getSrcTy</a>();</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *DestTy = Trunc.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <span class="keywordtype">unsigned</span> SrcWidth = SrcTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  <span class="keywordtype">unsigned</span> DestWidth = DestTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160; </div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;VectorType&gt;(SrcTy) &amp;&amp; !shouldChangeType(SrcTy, DestTy))</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160; </div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *BinOp;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Trunc.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a43ac4fbaaf63a88eb5ac05f6d3e5649c">m_BinOp</a>(BinOp))))</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160; </div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *BinOp0 = BinOp-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *BinOp1 = BinOp-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;  <span class="keywordflow">switch</span> (BinOp-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>()) {</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  <span class="keywordflow">case</span> Instruction::And:</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <span class="keywordflow">case</span> Instruction::Or:</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  <span class="keywordflow">case</span> Instruction::Xor:</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a>:</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  <span class="keywordflow">case</span> Instruction::Sub:</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Instruction::Mul</a>: {</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(BinOp0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))) {</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;      <span class="comment">// trunc (binop C, X) --&gt; binop (trunc C&#39;, X)</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NarrowC = <a class="code" href="classllvm_1_1ConstantExpr.html#af238147cf5453729781a0fcc7322e1c6">ConstantExpr::getTrunc</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, DestTy);</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *TruncX = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateTrunc(BinOp1, DestTy);</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a02ce9966395063ac501ecbc1623deda4">BinaryOperator::Create</a>(BinOp-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>(), NarrowC, TruncX);</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    }</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(BinOp1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))) {</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;      <span class="comment">// trunc (binop X, C) --&gt; binop (trunc X, C&#39;)</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NarrowC = <a class="code" href="classllvm_1_1ConstantExpr.html#af238147cf5453729781a0fcc7322e1c6">ConstantExpr::getTrunc</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, DestTy);</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *TruncX = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateTrunc(BinOp0, DestTy);</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a02ce9966395063ac501ecbc1623deda4">BinaryOperator::Create</a>(BinOp-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>(), TruncX, NarrowC);</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    }</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(BinOp0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a247b6987d634040b8aa6fb9c5887b703">m_ZExtOrSExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))) &amp;&amp; <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType() == DestTy) {</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;      <span class="comment">// trunc (binop (ext X), Y) --&gt; binop X, (trunc Y)</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NarrowOp1 = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateTrunc(BinOp1, DestTy);</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a02ce9966395063ac501ecbc1623deda4">BinaryOperator::Create</a>(BinOp-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>(), <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, NarrowOp1);</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    }</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(BinOp1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a247b6987d634040b8aa6fb9c5887b703">m_ZExtOrSExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))) &amp;&amp; <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType() == DestTy) {</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;      <span class="comment">// trunc (binop Y, (ext X)) --&gt; binop (trunc Y), X</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NarrowOp0 = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateTrunc(BinOp0, DestTy);</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a02ce9966395063ac501ecbc1623deda4">BinaryOperator::Create</a>(BinOp-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>(), NarrowOp0, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    }</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;  }</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  <span class="keywordflow">case</span> Instruction::LShr:</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  <span class="keywordflow">case</span> Instruction::AShr: {</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <span class="comment">// trunc (*shr (trunc A), C) --&gt; trunc(*shr A, C)</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(BinOp0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5b844aada27c4c6fdb87146ac458c0d8">m_Trunc</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A))) &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(BinOp1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))) {</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;      <span class="keywordtype">unsigned</span> MaxShiftAmt = SrcWidth - DestWidth;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;      <span class="comment">// If the shift is small enough, all zero/sign bits created by the shift</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;      <span class="comment">// are removed by the trunc.</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#abb22519fa3bf66d9e0bc6d1a733a5821">m_SpecificInt_ICMP</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a>,</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;                                      <a class="code" href="classllvm_1_1APInt.html">APInt</a>(SrcWidth, MaxShiftAmt)))) {</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        <span class="keyword">auto</span> *OldShift = cast&lt;Instruction&gt;(Trunc.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0));</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        <span class="keywordtype">bool</span> IsExact = OldShift-&gt;isExact();</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        <span class="keyword">auto</span> *ShAmt = <a class="code" href="classllvm_1_1ConstantExpr.html#a90d84324b6b6aa2a60077a79b31a49e7">ConstantExpr::getIntegerCast</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>-&gt;getType(), <span class="keyword">true</span>);</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;        ShAmt = <a class="code" href="classllvm_1_1Constant.html#a31dbd9cf336966a863e37c5653b6c134">Constant::mergeUndefsWith</a>(ShAmt, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a> =</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;            OldShift-&gt;getOpcode() == Instruction::AShr</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;                ? <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAShr(A, ShAmt, OldShift-&gt;getName(), IsExact)</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                : <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLShr(A, ShAmt, OldShift-&gt;getName(), IsExact);</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#aab2e21628e0e96267839b852a708b38a">CastInst::CreateTruncOrBitCast</a>(<a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>, DestTy);</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;      }</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    }</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  }</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;  <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;  }</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160; </div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NarrowOr = narrowFunnelShift(Trunc))</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <span class="keywordflow">return</span> NarrowOr;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160; </div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;}</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="comment">/// Try to narrow the width of a splat shuffle. This could be generalized to any</span></div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="comment">/// shuffle with a constant operand, but we limit the transform to avoid</span></div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="comment">/// creating a shuffle type that targets may not be able to lower effectively.</span></div>
<div class="line"><a name="l00764"></a><span class="lineno"><a class="line" href="InstCombineCasts_8cpp.html#ab30df4a5809e3189835f2802296da3e7">  764</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineCasts_8cpp.html#ab30df4a5809e3189835f2802296da3e7">shrinkSplatShuffle</a>(<a class="code" href="classllvm_1_1TruncInst.html">TruncInst</a> &amp;Trunc,</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                                       <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  <span class="keyword">auto</span> *Shuf = dyn_cast&lt;ShuffleVectorInst&gt;(Trunc.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0));</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  <span class="keywordflow">if</span> (Shuf &amp;&amp; Shuf-&gt;hasOneUse() &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Shuf-&gt;getOperand(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#adea6dc2e42baa345b97be48b0370313d">m_Undef</a>()) &amp;&amp;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      <a class="code" href="namespacellvm.html#ad78da75bd1f157e72100f97d1ecdc756">all_equal</a>(Shuf-&gt;getShuffleMask()) &amp;&amp;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;      Shuf-&gt;getType() == Shuf-&gt;getOperand(0)-&gt;getType()) {</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <span class="comment">// trunc (shuf X, Undef, SplatMask) --&gt; shuf (trunc X), Poison, SplatMask</span></div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="comment">// trunc (shuf X, Poison, SplatMask) --&gt; shuf (trunc X), Poison, SplatMask</span></div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NarrowOp = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateTrunc(Shuf-&gt;getOperand(0), Trunc.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ShuffleVectorInst.html">ShuffleVectorInst</a>(NarrowOp, Shuf-&gt;getShuffleMask());</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  }</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160; </div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;}</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;<span class="comment">/// Try to narrow the width of an insert element. This could be generalized for</span></div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;<span class="comment">/// any vector constant, but we limit the transform to insertion into undef to</span></div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;<span class="comment">/// avoid potential backend problems from unsupported insertion widths. This</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;<span class="comment">/// could also be extended to handle the case of inserting a scalar constant</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;<span class="comment">/// into a vector variable.</span></div>
<div class="line"><a name="l00784"></a><span class="lineno"><a class="line" href="InstCombineCasts_8cpp.html#aa62178ace163b6ca749c39196edc4147">  784</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineCasts_8cpp.html#aa62178ace163b6ca749c39196edc4147">shrinkInsertElt</a>(<a class="code" href="classllvm_1_1CastInst.html">CastInst</a> &amp;Trunc,</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;                                    <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">Instruction::CastOps</a> Opcode = Trunc.<a class="code" href="classllvm_1_1CastInst.html#a3685b2128d8e6917000e4adc3b266ff6">getOpcode</a>();</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((Opcode == Instruction::Trunc || Opcode == Instruction::FPTrunc) &amp;&amp;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;         <span class="stringliteral">&quot;Unexpected instruction for shrinking&quot;</span>);</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160; </div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  <span class="keyword">auto</span> *InsElt = dyn_cast&lt;InsertElementInst&gt;(Trunc.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0));</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  <span class="keywordflow">if</span> (!InsElt || !InsElt-&gt;hasOneUse())</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160; </div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *DestTy = Trunc.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *DestScalarTy = DestTy-&gt;<a class="code" href="classllvm_1_1Type.html#a4abb39a66573f61fda80469faa5d861d">getScalarType</a>();</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *VecOp = InsElt-&gt;getOperand(0);</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ScalarOp = InsElt-&gt;getOperand(1);</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a> = InsElt-&gt;getOperand(2);</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160; </div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(VecOp, <a class="code" href="namespacellvm_1_1PatternMatch.html#adea6dc2e42baa345b97be48b0370313d">m_Undef</a>())) {</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    <span class="comment">// trunc   (inselt undef, X, Index) --&gt; inselt undef,   (trunc X), Index</span></div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <span class="comment">// fptrunc (inselt undef, X, Index) --&gt; inselt undef, (fptrunc X), Index</span></div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <a class="code" href="classllvm_1_1UndefValue.html">UndefValue</a> *NarrowUndef = <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(DestTy);</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NarrowOp = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCast(Opcode, ScalarOp, DestScalarTy);</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InsertElementInst.html#a44cefc7b60337e7e14d20e843c74e534">InsertElementInst::Create</a>(NarrowUndef, NarrowOp, <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>);</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  }</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160; </div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;}</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160; </div>
<div class="line"><a name="l00811"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a43a1d060dacb05eb645cf91ea86d7bd3">  811</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a43a1d060dacb05eb645cf91ea86d7bd3">InstCombinerImpl::visitTrunc</a>(<a class="code" href="classllvm_1_1TruncInst.html">TruncInst</a> &amp;Trunc) {</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Result = commonCastTransforms(Trunc))</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    <span class="keywordflow">return</span> Result;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160; </div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Src = Trunc.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *DestTy = Trunc.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), *SrcTy = Src-&gt;getType();</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  <span class="keywordtype">unsigned</span> DestWidth = DestTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  <span class="keywordtype">unsigned</span> SrcWidth = SrcTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160; </div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  <span class="comment">// Attempt to truncate the entire input expression tree to the destination</span></div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  <span class="comment">// type.   Only do this if the dest type is a simple type, don&#39;t convert the</span></div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  <span class="comment">// expression tree to something weird like i93 unless the source is also</span></div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  <span class="comment">// strange.</span></div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  <span class="keywordflow">if</span> ((DestTy-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>() || shouldChangeType(SrcTy, DestTy)) &amp;&amp;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;      <a class="code" href="InstCombineCasts_8cpp.html#aefd6331c5fd6ec51f6a9e5558f885f28">canEvaluateTruncated</a>(Src, DestTy, *<span class="keyword">this</span>, &amp;Trunc)) {</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160; </div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <span class="comment">// If this cast is a truncate, evaluting in a different type always</span></div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <span class="comment">// eliminates the cast, so it is always a win.</span></div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ICE: EvaluateInDifferentType converting expression type&quot;</span></div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;                  <span class="stringliteral">&quot; to avoid cast: &quot;</span></div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;               &lt;&lt; Trunc &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Res = EvaluateInDifferentType(Src, DestTy, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Res-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() == DestTy);</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(Trunc, Res);</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;  }</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160; </div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;  <span class="comment">// For integer types, check if we can shorten the entire input expression to</span></div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  <span class="comment">// DestWidth * 2, which won&#39;t allow removing the truncate, but reducing the</span></div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  <span class="comment">// width may enable further optimizations, e.g. allowing for larger</span></div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  <span class="comment">// vectorization factors.</span></div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *DestITy = dyn_cast&lt;IntegerType&gt;(DestTy)) {</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    <span class="keywordflow">if</span> (DestWidth * 2 &lt; SrcWidth) {</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;      <span class="keyword">auto</span> *NewDestTy = DestITy-&gt;getExtendedType();</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;      <span class="keywordflow">if</span> (shouldChangeType(SrcTy, NewDestTy) &amp;&amp;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;          <a class="code" href="InstCombineCasts_8cpp.html#aefd6331c5fd6ec51f6a9e5558f885f28">canEvaluateTruncated</a>(Src, NewDestTy, *<span class="keyword">this</span>, &amp;Trunc)) {</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;            <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ICE: EvaluateInDifferentType converting expression type&quot;</span></div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;                      <span class="stringliteral">&quot; to reduce the width of operand of&quot;</span></div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;                   &lt;&lt; Trunc &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Res = EvaluateInDifferentType(Src, NewDestTy, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1TruncInst.html">TruncInst</a>(Res, DestTy);</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;      }</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    }</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;  }</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160; </div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  <span class="comment">// Test if the trunc is the user of a select which is part of a</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  <span class="comment">// minimum or maximum operation. If so, don&#39;t do any more simplification.</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;  <span class="comment">// Even simplifying demanded bits can break the canonical form of a</span></div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  <span class="comment">// min/max.</span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *Sel = dyn_cast&lt;SelectInst&gt;(Src))</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a7aad5a0e62a54747f455651ee2dd08ed">matchSelectPattern</a>(Sel, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>).Flavor != <a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097aee3dafa9fac8f6fa1e1110ef463cc452">SPF_UNKNOWN</a>)</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160; </div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  <span class="comment">// See if we can simplify any instructions used by the input whose sole</span></div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  <span class="comment">// purpose is to compute bits we don&#39;t care about.</span></div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  <span class="keywordflow">if</span> (SimplifyDemandedInstructionBits(Trunc))</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    <span class="keywordflow">return</span> &amp;Trunc;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160; </div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  <span class="keywordflow">if</span> (DestWidth == 1) {</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Zero = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(SrcTy);</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <span class="keywordflow">if</span> (DestTy-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>()) {</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;      <span class="comment">// Canonicalize trunc x to i1 -&gt; icmp ne (and x, 1), 0 (scalar only).</span></div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;      <span class="comment">// TODO: We canonicalize to more instructions here because we are probably</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;      <span class="comment">// lacking equivalent analysis for trunc relative to icmp. There may also</span></div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;      <span class="comment">// be codegen concerns. If those trunc limitations were removed, we could</span></div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;      <span class="comment">// remove this transform.</span></div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(Src, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(SrcTy, 1));</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>, <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>, Zero);</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    }</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160; </div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    <span class="comment">// For vectors, we do not canonicalize all truncs to icmp, so optimize</span></div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    <span class="comment">// patterns that would be covered within visitICmpInst.</span></div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Src, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">m_LShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))))) {</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;      <span class="comment">// trunc (lshr X, C) to i1 --&gt; icmp ne (and X, C&#39;), 0</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *One = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(SrcTy, <a class="code" href="classllvm_1_1APInt.html">APInt</a>(SrcWidth, 1));</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *MaskC = <a class="code" href="classllvm_1_1ConstantExpr.html#aa5ad9e9e7cc67e1675d8d1631a73e625">ConstantExpr::getShl</a>(One, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, MaskC);</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>, <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>, Zero);</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    }</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Src, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">m_LShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)),</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;                                   <a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))))) {</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;      <span class="comment">// trunc (or (lshr X, C), X) to i1 --&gt; icmp ne (and X, C&#39;), 0</span></div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *One = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(SrcTy, <a class="code" href="classllvm_1_1APInt.html">APInt</a>(SrcWidth, 1));</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *MaskC = <a class="code" href="classllvm_1_1ConstantExpr.html#aa5ad9e9e7cc67e1675d8d1631a73e625">ConstantExpr::getShl</a>(One, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;      MaskC = <a class="code" href="classllvm_1_1ConstantExpr.html#adc8a4e6a8e701e1924f0293da78badb6">ConstantExpr::getOr</a>(MaskC, One);</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, MaskC);</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>, <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>, Zero);</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    }</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  }</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160; </div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *A, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>;</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Src, <a class="code" href="namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">m_LShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">m_SExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A)), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))) {</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    <span class="keywordtype">unsigned</span> AWidth = A-&gt;getType()-&gt;getScalarSizeInBits();</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    <span class="keywordtype">unsigned</span> MaxShiftAmt = SrcWidth - <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(DestWidth, AWidth);</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    <span class="keyword">auto</span> *OldSh = cast&lt;Instruction&gt;(Src);</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    <span class="keywordtype">bool</span> IsExact = OldSh-&gt;isExact();</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160; </div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    <span class="comment">// If the shift is small enough, all zero bits created by the shift are</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <span class="comment">// removed by the trunc.</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#abb22519fa3bf66d9e0bc6d1a733a5821">m_SpecificInt_ICMP</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a>,</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;                                    <a class="code" href="classllvm_1_1APInt.html">APInt</a>(SrcWidth, MaxShiftAmt)))) {</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;      <span class="comment">// trunc (lshr (sext A), C) --&gt; ashr A, C</span></div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;      <span class="keywordflow">if</span> (A-&gt;getType() == DestTy) {</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *MaxAmt = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(SrcTy, DestWidth - 1, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *ShAmt = <a class="code" href="classllvm_1_1ConstantExpr.html#af025ad055219d45906eca0e4fc0dafb7">ConstantExpr::getUMin</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, MaxAmt);</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        ShAmt = <a class="code" href="classllvm_1_1ConstantExpr.html#af238147cf5453729781a0fcc7322e1c6">ConstantExpr::getTrunc</a>(ShAmt, A-&gt;getType());</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        ShAmt = <a class="code" href="classllvm_1_1Constant.html#a31dbd9cf336966a863e37c5653b6c134">Constant::mergeUndefsWith</a>(ShAmt, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        <span class="keywordflow">return</span> IsExact ? BinaryOperator::CreateExactAShr(A, ShAmt)</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;                       : BinaryOperator::CreateAShr(A, ShAmt);</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;      }</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;      <span class="comment">// The types are mismatched, so create a cast after shifting:</span></div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;      <span class="comment">// trunc (lshr (sext A), C) --&gt; sext/trunc (ashr A, C)</span></div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;      <span class="keywordflow">if</span> (Src-&gt;hasOneUse()) {</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *MaxAmt = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(SrcTy, AWidth - 1, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *ShAmt = <a class="code" href="classllvm_1_1ConstantExpr.html#af025ad055219d45906eca0e4fc0dafb7">ConstantExpr::getUMin</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, MaxAmt);</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;        ShAmt = <a class="code" href="classllvm_1_1ConstantExpr.html#af238147cf5453729781a0fcc7322e1c6">ConstantExpr::getTrunc</a>(ShAmt, A-&gt;getType());</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAShr(A, ShAmt, <span class="stringliteral">&quot;&quot;</span>, IsExact);</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#a277c32f1a2c680c0af45cbf0ff67c409">CastInst::CreateIntegerCast</a>(<a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>, DestTy, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;      }</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    }</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    <span class="comment">// TODO: Mask high bits with &#39;and&#39;.</span></div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  }</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160; </div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = narrowBinOp(Trunc))</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160; </div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="InstCombineCasts_8cpp.html#ab30df4a5809e3189835f2802296da3e7">shrinkSplatShuffle</a>(Trunc, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160; </div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="InstCombineCasts_8cpp.html#aa62178ace163b6ca749c39196edc4147">shrinkInsertElt</a>(Trunc, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160; </div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;  <span class="keywordflow">if</span> (Src-&gt;hasOneUse() &amp;&amp;</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;      (isa&lt;VectorType&gt;(SrcTy) || shouldChangeType(SrcTy, DestTy))) {</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    <span class="comment">// Transform &quot;trunc (shl X, cst)&quot; -&gt; &quot;shl (trunc X), cst&quot; so long as the</span></div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    <span class="comment">// dest type is native and cst &lt; dest size.</span></div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Src, <a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))) &amp;&amp;</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;        !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(A, <a class="code" href="namespacellvm_1_1PatternMatch.html#aa41636955199b88164376e06e5914855">m_Shr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>()))) {</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;      <span class="comment">// Skip shifts of shift by constants. It undoes a combine in</span></div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;      <span class="comment">// FoldShiftByConstant and is the extend in reg pattern.</span></div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> Threshold = <a class="code" href="classllvm_1_1APInt.html">APInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getType()-&gt;getScalarSizeInBits(), DestWidth);</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#abb22519fa3bf66d9e0bc6d1a733a5821">m_SpecificInt_ICMP</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>, Threshold))) {</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewTrunc = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateTrunc(A, DestTy, A-&gt;getName() + <span class="stringliteral">&quot;.tr&quot;</span>);</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a02ce9966395063ac501ecbc1623deda4">BinaryOperator::Create</a>(Instruction::Shl, NewTrunc,</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;                                      <a class="code" href="classllvm_1_1ConstantExpr.html#af238147cf5453729781a0fcc7322e1c6">ConstantExpr::getTrunc</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, DestTy));</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;      }</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    }</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;  }</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160; </div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="InstCombineCasts_8cpp.html#a144f501e5d35220bb482eec5a94f7062">foldVecTruncToExtElt</a>(Trunc, *<span class="keyword">this</span>))</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160; </div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;  <span class="comment">// Whenever an element is extracted from a vector, and then truncated,</span></div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;  <span class="comment">// canonicalize by converting it to a bitcast followed by an</span></div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;  <span class="comment">// extractelement.</span></div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;  <span class="comment">// Example (little endian):</span></div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  <span class="comment">//   trunc (extractelement &lt;4 x i64&gt; %X, 0) to i32</span></div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;  <span class="comment">//   ---&gt;</span></div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;  <span class="comment">//   extractelement &lt;8 x i32&gt; (bitcast &lt;4 x i64&gt; %X to &lt;8 x i32&gt;), i32 0</span></div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *VecOp;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *Cst;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Src, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#adf0290c7c322f0bf8b275d6b26410b52">m_ExtractElt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(VecOp), <a class="code" href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">m_ConstantInt</a>(Cst))))) {</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <span class="keyword">auto</span> *VecOpTy = cast&lt;VectorType&gt;(VecOp-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <span class="keyword">auto</span> VecElts = VecOpTy-&gt;getElementCount();</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160; </div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <span class="comment">// A badly fit destination size would result in an invalid cast.</span></div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    <span class="keywordflow">if</span> (SrcWidth % DestWidth == 0) {</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;      <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> TruncRatio = SrcWidth / DestWidth;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;      <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> BitCastNumElts = VecElts.getKnownMinValue() * TruncRatio;</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;      <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> VecOpIdx = Cst-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#ac09a21c371a9c535cbc13e8f82503aec">getZExtValue</a>();</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;      <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> NewIdx = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.isBigEndian() ? (VecOpIdx + 1) * TruncRatio - 1</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;                                         : VecOpIdx * TruncRatio;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(BitCastNumElts &lt;= <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::numeric_limits&lt;uint32_t&gt;::max</a>() &amp;&amp;</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;             <span class="stringliteral">&quot;overflow 32-bits&quot;</span>);</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160; </div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;      <span class="keyword">auto</span> *BitCastTo =</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;          <a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(DestTy, BitCastNumElts, VecElts.isScalable());</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *BitCast = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(VecOp, BitCastTo);</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ExtractElementInst.html#a5d496a334eff64bb2873339b54df932a">ExtractElementInst::Create</a>(BitCast, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt32(NewIdx));</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    }</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;  }</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160; </div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  <span class="comment">// trunc (ctlz_i32(zext(A), B) --&gt; add(ctlz_i16(A, B), C)</span></div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Src, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(m_Intrinsic&lt;Intrinsic::ctlz&gt;(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A)),</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;                                                       <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))))) {</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    <span class="keywordtype">unsigned</span> AWidth = A-&gt;getType()-&gt;getScalarSizeInBits();</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    <span class="keywordflow">if</span> (AWidth == DestWidth &amp;&amp; AWidth &gt; <a class="code" href="namespacellvm.html#a646986783f35e0fef8988f0f28d2589f">Log2_32</a>(SrcWidth)) {</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *WidthDiff = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(A-&gt;getType(), SrcWidth - AWidth);</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NarrowCtlz =</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;          <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIntrinsic(Intrinsic::ctlz, {Trunc.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()}, {A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>});</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="Reassociate_8cpp.html#a680ae08c1b9b93cebdd6cbb726fe8f3d">BinaryOperator::CreateAdd</a>(NarrowCtlz, WidthDiff);</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    }</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;  }</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160; </div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Src, <a class="code" href="namespacellvm_1_1PatternMatch.html#abe28025713ed7d83e0d57e078b28e570">m_VScale</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>))) {</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    <span class="keywordflow">if</span> (Trunc.<a class="code" href="classllvm_1_1Instruction.html#a6a66ebb3aa12757479a3c88de77d78f8">getFunction</a>() &amp;&amp;</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;        Trunc.<a class="code" href="classllvm_1_1Instruction.html#a6a66ebb3aa12757479a3c88de77d78f8">getFunction</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#afb28a4deafe2954b0534cc6399ce518b">hasFnAttribute</a>(Attribute::VScaleRange)) {</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;      <a class="code" href="classllvm_1_1Attribute.html">Attribute</a> Attr =</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;          Trunc.<a class="code" href="classllvm_1_1Instruction.html#a6a66ebb3aa12757479a3c88de77d78f8">getFunction</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#a4c319db4fe05c27cfe55bd133a87414d">getFnAttribute</a>(Attribute::VScaleRange);</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;      <span class="keywordflow">if</span> (std::optional&lt;unsigned&gt; MaxVScale = Attr.<a class="code" href="classllvm_1_1Attribute.html#a190a29f5df3964b269383c0d6fba0ea9">getVScaleRangeMax</a>()) {</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a646986783f35e0fef8988f0f28d2589f">Log2_32</a>(*MaxVScale) &lt; DestWidth) {</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *VScale = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateVScale(<a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(DestTy, 1));</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;          <span class="keywordflow">return</span> replaceInstUsesWith(Trunc, VScale);</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;        }</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;      }</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    }</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;  }</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160; </div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;}</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160; </div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InstCombinerImpl::transformZExtICmp(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *Cmp,</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;                                                 <a class="code" href="classllvm_1_1ZExtInst.html">ZExtInst</a> &amp;Zext) {</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;  <span class="comment">// If we are just checking for a icmp eq of a single bit and zext&#39;ing it</span></div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;  <span class="comment">// to an integer, then shift the bit to the appropriate place and then</span></div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;  <span class="comment">// cast to integer to avoid the comparison.</span></div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160; </div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;  <span class="comment">// FIXME: This set of transforms does not check for extra uses and/or creates</span></div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;  <span class="comment">//        an extra instruction (an optional final cast is not included</span></div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;  <span class="comment">//        in the transform comments). We may also want to favor icmp over</span></div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;  <span class="comment">//        shifts in cases of equal instructions because icmp has better</span></div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;  <span class="comment">//        analysis in general (invert the transform).</span></div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160; </div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *Op1CV;</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Cmp-&gt;getOperand(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(Op1CV))) {</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160; </div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    <span class="comment">// zext (x &lt;s  0) to i32 --&gt; x&gt;&gt;u31      true if signbit set.</span></div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    <span class="keywordflow">if</span> (Cmp-&gt;getPredicate() == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a> &amp;&amp; Op1CV-&gt;<a class="code" href="classllvm_1_1APInt.html#a49cd5939942c6665aba4cae8c220dff1">isZero</a>()) {</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a> = Cmp-&gt;getOperand(0);</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Sh = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>-&gt;getType(),</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;                                   <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>-&gt;getType()-&gt;getScalarSizeInBits() - 1);</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;      <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLShr(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>, Sh, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>-&gt;getName() + <span class="stringliteral">&quot;.lobit&quot;</span>);</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>-&gt;getType() != Zext.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;        <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIntCast(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>, Zext.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), <span class="keyword">false</span> <span class="comment">/*ZExt*/</span>);</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160; </div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(Zext, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>);</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    }</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160; </div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    <span class="comment">// zext (X == 0) to i32 --&gt; X^1      iff X has only the low bit set.</span></div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <span class="comment">// zext (X == 0) to i32 --&gt; (X&gt;&gt;1)^1 iff X has only the 2nd bit set.</span></div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <span class="comment">// zext (X != 0) to i32 --&gt; X        iff X has only the low bit set.</span></div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    <span class="comment">// zext (X != 0) to i32 --&gt; X&gt;&gt;1     iff X has only the 2nd bit set.</span></div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    <span class="keywordflow">if</span> (Op1CV-&gt;<a class="code" href="classllvm_1_1APInt.html#a49cd5939942c6665aba4cae8c220dff1">isZero</a>() &amp;&amp; Cmp-&gt;isEquality() &amp;&amp;</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;        (Cmp-&gt;getOperand(0)-&gt;getType() == Zext.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() ||</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;         Cmp-&gt;getPredicate() == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>)) {</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;      <span class="comment">// If Op1C some other power of two, convert:</span></div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;      <a class="code" href="structllvm_1_1KnownBits.html">KnownBits</a> Known = <a class="code" href="namespacellvm.html#aa1f8f0633edd8b9a1c5ec15bb9fc5640">computeKnownBits</a>(Cmp-&gt;getOperand(0), 0, &amp;Zext);</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160; </div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;      <span class="comment">// Exactly 1 possible 1? But not the high-bit because that is</span></div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;      <span class="comment">// canonicalized to this form.</span></div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> KnownZeroMask(~Known.<a class="code" href="structllvm_1_1KnownBits.html#ac67bca6c764da76f5e152330d92ed916">Zero</a>);</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;      <span class="keywordflow">if</span> (KnownZeroMask.isPowerOf2() &amp;&amp;</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;          (Zext.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>() !=</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;           KnownZeroMask.logBase2() + 1)) {</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;        <a class="code" href="classuint32__t.html">uint32_t</a> ShAmt = KnownZeroMask.logBase2();</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a> = Cmp-&gt;getOperand(0);</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;        <span class="keywordflow">if</span> (ShAmt) {</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;          <span class="comment">// Perform a logical shr by shiftamt.</span></div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;          <span class="comment">// Insert the shift to put the result in the low bit.</span></div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;          <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLShr(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>-&gt;getType(), ShAmt),</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;                                  <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>-&gt;getName() + <span class="stringliteral">&quot;.lobit&quot;</span>);</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;        }</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160; </div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;        <span class="comment">// Toggle the low bit for &quot;X == 0&quot;.</span></div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1X86.html#a86730e94ae6fdf0fe3145b2acc88dea8ac9b4c62f6dc1bc5caf3c768b687cbf7e">Cmp</a>-&gt;getPredicate() == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>)</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;          <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateXor(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>-&gt;getType(), 1));</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160; </div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;        <span class="keywordflow">if</span> (Zext.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() == <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>-&gt;getType())</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;          <span class="keywordflow">return</span> replaceInstUsesWith(Zext, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>);</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160; </div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *IntCast = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIntCast(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>, Zext.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), <span class="keyword">false</span>);</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;        <span class="keywordflow">return</span> replaceInstUsesWith(Zext, IntCast);</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;      }</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    }</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;  }</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160; </div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1X86.html#a86730e94ae6fdf0fe3145b2acc88dea8ac9b4c62f6dc1bc5caf3c768b687cbf7e">Cmp</a>-&gt;isEquality() &amp;&amp; Zext.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() == <a class="code" href="namespacellvm_1_1X86.html#a86730e94ae6fdf0fe3145b2acc88dea8ac9b4c62f6dc1bc5caf3c768b687cbf7e">Cmp</a>-&gt;getOperand(0)-&gt;getType()) {</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    <span class="comment">// Test if a bit is clear/set using a shifted-one mask:</span></div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    <span class="comment">// zext (icmp eq (and X, (1 &lt;&lt; ShAmt)), 0) --&gt; and (lshr (not X), ShAmt), 1</span></div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    <span class="comment">// zext (icmp ne (and X, (1 &lt;&lt; ShAmt)), 0) --&gt; and (lshr X, ShAmt), 1</span></div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *ShAmt;</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1X86.html#a86730e94ae6fdf0fe3145b2acc88dea8ac9b4c62f6dc1bc5caf3c768b687cbf7e">Cmp</a>-&gt;hasOneUse() &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1X86.html#a86730e94ae6fdf0fe3145b2acc88dea8ac9b4c62f6dc1bc5caf3c768b687cbf7e">Cmp</a>-&gt;getOperand(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#a874d53817a4923de8e58af6b278c09b0">m_ZeroInt</a>()) &amp;&amp;</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1X86.html#a86730e94ae6fdf0fe3145b2acc88dea8ac9b4c62f6dc1bc5caf3c768b687cbf7e">Cmp</a>-&gt;getOperand(0),</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;              <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(ShAmt)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))))) {</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1X86.html#a86730e94ae6fdf0fe3145b2acc88dea8ac9b4c62f6dc1bc5caf3c768b687cbf7e">Cmp</a>-&gt;getPredicate() == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>)</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;        <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Lshr = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLShr(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, ShAmt);</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *And1 = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(Lshr, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType(), 1));</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(Zext, And1);</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    }</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;  }</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160; </div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;}</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;<span class="comment">/// Determine if the specified value can be computed in the specified wider type</span></div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;<span class="comment">/// and produce the same low bits. If not, return false.</span></div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;<span class="comment">/// If this function returns true, it can also return a non-zero number of bits</span></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;<span class="comment">/// (in BitsToClear) which indicates that the value it computes is correct for</span></div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;<span class="comment">/// the zero extend, but that the additional BitsToClear bits need to be zero&#39;d</span></div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;<span class="comment">/// out.  For example, to promote something like:</span></div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;<span class="comment">///   %B = trunc i64 %A to i32</span></div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;<span class="comment">///   %C = lshr i32 %B, 8</span></div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;<span class="comment">///   %E = zext i32 %C to i64</span></div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;<span class="comment">/// CanEvaluateZExtd for the &#39;lshr&#39; will return true, and BitsToClear will be</span></div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;<span class="comment">/// set to 8 to indicate that the promoted value needs to have bits 24-31</span></div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;<span class="comment">/// cleared in addition to bits 32-63.  Since an &#39;and&#39; will be generated to</span></div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;<span class="comment">/// clear the top bits anyway, doing this has no extra cost.</span></div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;<span class="comment">/// This function works on both vectors and scalars.</span></div>
<div class="line"><a name="l01130"></a><span class="lineno"><a class="line" href="InstCombineCasts_8cpp.html#a3d3ed8206aabad62293aeddd444bab9f"> 1130</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineCasts_8cpp.html#a3d3ed8206aabad62293aeddd444bab9f">canEvaluateZExtd</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty, <span class="keywordtype">unsigned</span> &amp;BitsToClear,</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;                             <a class="code" href="classllvm_1_1InstCombinerImpl.html">InstCombinerImpl</a> &amp;IC, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *CxtI) {</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;  BitsToClear = 0;</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="InstCombineCasts_8cpp.html#a9cad0d942fb5f64b2ec2ce7e7277c492">canAlwaysEvaluateInType</a>(V, Ty))</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="InstCombineCasts_8cpp.html#aaa977254b83ff622718b40f1aa81271f">canNotEvaluateInType</a>(V, Ty))</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160; </div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;  <span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = cast&lt;Instruction&gt;(V);</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;  <span class="keywordtype">unsigned</span> Tmp;</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode()) {</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  <span class="keywordflow">case</span> Instruction::ZExt:  <span class="comment">// zext(zext(x)) -&gt; zext(x).</span></div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;  <span class="keywordflow">case</span> Instruction::SExt:  <span class="comment">// zext(sext(x)) -&gt; sext(x).</span></div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;  <span class="keywordflow">case</span> Instruction::Trunc: <span class="comment">// zext(trunc(x)) -&gt; trunc(x) or zext(x)</span></div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;  <span class="keywordflow">case</span> Instruction::And:</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;  <span class="keywordflow">case</span> Instruction::Or:</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;  <span class="keywordflow">case</span> Instruction::Xor:</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a>:</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;  <span class="keywordflow">case</span> Instruction::Sub:</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Instruction::Mul</a>:</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="InstCombineCasts_8cpp.html#a3d3ed8206aabad62293aeddd444bab9f">canEvaluateZExtd</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0), Ty, BitsToClear, IC, CxtI) ||</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;        !<a class="code" href="InstCombineCasts_8cpp.html#a3d3ed8206aabad62293aeddd444bab9f">canEvaluateZExtd</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1), Ty, Tmp, IC, CxtI))</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    <span class="comment">// These can all be promoted if neither operand has &#39;bits to clear&#39;.</span></div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    <span class="keywordflow">if</span> (BitsToClear == 0 &amp;&amp; Tmp == 0)</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160; </div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;    <span class="comment">// If the operation is an AND/OR/XOR and the bits to clear are zero in the</span></div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    <span class="comment">// other side, BitsToClear is ok.</span></div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    <span class="keywordflow">if</span> (Tmp == 0 &amp;&amp; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isBitwiseLogicOp()) {</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;      <span class="comment">// We use MaskedValueIsZero here for generality, but the case we care</span></div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;      <span class="comment">// about the most is constant RHS.</span></div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;      <span class="keywordtype">unsigned</span> VSize = V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;      <span class="keywordflow">if</span> (IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae506e7be0a7aaf9001e31d5fca5f2fbc">MaskedValueIsZero</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1),</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;                               <a class="code" href="classllvm_1_1APInt.html#adcb96bd09d7c75c7669fa5f9d1190899">APInt::getHighBitsSet</a>(VSize, BitsToClear),</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;                               0, CxtI)) {</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;        <span class="comment">// If this is an And instruction and all of the BitsToClear are</span></div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;        <span class="comment">// known to be zero we can reset BitsToClear.</span></div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode() == Instruction::And)</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;          BitsToClear = 0;</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;      }</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    }</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160; </div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    <span class="comment">// Otherwise, we don&#39;t know how to analyze this BitsToClear case yet.</span></div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160; </div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;  <span class="keywordflow">case</span> Instruction::Shl: {</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    <span class="comment">// We can promote shl(x, cst) if we can promote x.  Since shl overwrites the</span></div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    <span class="comment">// upper bits we can reduce BitsToClear by the shift amount.</span></div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *Amt;</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(Amt))) {</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="InstCombineCasts_8cpp.html#a3d3ed8206aabad62293aeddd444bab9f">canEvaluateZExtd</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0), Ty, BitsToClear, IC, CxtI))</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;      <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> ShiftAmt = Amt-&gt;<a class="code" href="classllvm_1_1APInt.html#a217e0207d9cc8e046c2dccbf0e4bb198">getZExtValue</a>();</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;      BitsToClear = ShiftAmt &lt; BitsToClear ? BitsToClear - ShiftAmt : 0;</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    }</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;  }</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;  <span class="keywordflow">case</span> Instruction::LShr: {</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    <span class="comment">// We can promote lshr(x, cst) if we can promote x.  This requires the</span></div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    <span class="comment">// ultimate &#39;and&#39; to clear out the high zero bits we&#39;re clearing out though.</span></div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *Amt;</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(Amt))) {</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="InstCombineCasts_8cpp.html#a3d3ed8206aabad62293aeddd444bab9f">canEvaluateZExtd</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0), Ty, BitsToClear, IC, CxtI))</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;      BitsToClear += Amt-&gt;<a class="code" href="classllvm_1_1APInt.html#a217e0207d9cc8e046c2dccbf0e4bb198">getZExtValue</a>();</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;      <span class="keywordflow">if</span> (BitsToClear &gt; V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>())</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;        BitsToClear = V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;    }</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    <span class="comment">// Cannot promote variable LSHR.</span></div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;  }</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="AMDGPURegBankSelect_8cpp.html#a14e0c000ed52e5fc187d4a885914cc1a">Instruction::Select</a>:</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="InstCombineCasts_8cpp.html#a3d3ed8206aabad62293aeddd444bab9f">canEvaluateZExtd</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1), Ty, Tmp, IC, CxtI) ||</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;        !<a class="code" href="InstCombineCasts_8cpp.html#a3d3ed8206aabad62293aeddd444bab9f">canEvaluateZExtd</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(2), Ty, BitsToClear, IC, CxtI) ||</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;        <span class="comment">// TODO: If important, we could handle the case when the BitsToClear are</span></div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;        <span class="comment">// known zero in the disagreeing side.</span></div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;        Tmp != BitsToClear)</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160; </div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">Instruction::PHI</a>: {</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;    <span class="comment">// We can change a phi if we can change all operands.  Note that we never</span></div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    <span class="comment">// get into trouble with cyclic PHIs here because we only consider</span></div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    <span class="comment">// instructions with a single use.</span></div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = cast&lt;PHINode&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="InstCombineCasts_8cpp.html#a3d3ed8206aabad62293aeddd444bab9f">canEvaluateZExtd</a>(PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a16c39eb6e60b42a40c399d8d65347bb6">getIncomingValue</a>(0), Ty, BitsToClear, IC, CxtI))</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#aef51af4b490af6b3bf2dfbc8737a8f9f">getNumIncomingValues</a>(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="InstCombineCasts_8cpp.html#a3d3ed8206aabad62293aeddd444bab9f">canEvaluateZExtd</a>(PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a16c39eb6e60b42a40c399d8d65347bb6">getIncomingValue</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>), Ty, Tmp, IC, CxtI) ||</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;          <span class="comment">// TODO: If important, we could handle the case when the BitsToClear</span></div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;          <span class="comment">// are known zero in the disagreeing input.</span></div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;          Tmp != BitsToClear)</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;  }</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Instruction::Call</a>:</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    <span class="comment">// llvm.vscale() can always be executed in larger type, because the</span></div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    <span class="comment">// value is automatically zero-extended.</span></div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *II = dyn_cast&lt;IntrinsicInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;      <span class="keywordflow">if</span> (II-&gt;getIntrinsicID() == Intrinsic::vscale)</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    <span class="comment">// TODO: Can handle more cases here.</span></div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;  }</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;}</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160; </div>
<div class="line"><a name="l01243"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a2175862566372c3684fe4f7bf62e3143"> 1243</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a2175862566372c3684fe4f7bf62e3143">InstCombinerImpl::visitZExt</a>(<a class="code" href="classllvm_1_1ZExtInst.html">ZExtInst</a> &amp;Zext) {</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;  <span class="comment">// If this zero extend is only used by a truncate, let the truncate be</span></div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;  <span class="comment">// eliminated before we try to optimize this zext.</span></div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;  <span class="keywordflow">if</span> (Zext.<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp; isa&lt;TruncInst&gt;(Zext.<a class="code" href="classllvm_1_1Instruction.html#a2fd1d2dc14e22227cfa8238778ab87b8">user_back</a>()))</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160; </div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;  <span class="comment">// If one of the common conversion will work, do it.</span></div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Result = commonCastTransforms(Zext))</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    <span class="keywordflow">return</span> Result;</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160; </div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Src = Zext.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *SrcTy = Src-&gt;getType(), *DestTy = Zext.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160; </div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;  <span class="comment">// Try to extend the entire expression tree to the wide destination type.</span></div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;  <span class="keywordtype">unsigned</span> BitsToClear;</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;  <span class="keywordflow">if</span> (shouldChangeType(SrcTy, DestTy) &amp;&amp;</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;      <a class="code" href="InstCombineCasts_8cpp.html#a3d3ed8206aabad62293aeddd444bab9f">canEvaluateZExtd</a>(Src, DestTy, BitsToClear, *<span class="keyword">this</span>, &amp;Zext)) {</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(BitsToClear &lt;= SrcTy-&gt;<a class="code" href="SystemZTargetTransformInfo_8cpp.html#a69eeffbc38c079195008fbfb5aaad0b9">getScalarSizeInBits</a>() &amp;&amp;</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;           <span class="stringliteral">&quot;Can&#39;t clear more bits than in SrcTy&quot;</span>);</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160; </div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    <span class="comment">// Okay, we can transform this!  Insert the new expression now.</span></div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ICE: EvaluateInDifferentType converting expression type&quot;</span></div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;                  <span class="stringliteral">&quot; to avoid zero extend: &quot;</span></div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;               &lt;&lt; Zext &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Res = EvaluateInDifferentType(Src, DestTy, <span class="keyword">false</span>);</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Res-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() == DestTy);</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160; </div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    <span class="comment">// Preserve debug values referring to Src if the zext is its last use.</span></div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="classllvm_1_1SrcOp.html">SrcOp</a> = dyn_cast&lt;Instruction&gt;(Src))</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SrcOp.html">SrcOp</a>-&gt;hasOneUse())</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;        <a class="code" href="namespacellvm.html#a9784a018b2dd6a85ee8a70f5f5ab3d02">replaceAllDbgUsesWith</a>(*<a class="code" href="classllvm_1_1SrcOp.html">SrcOp</a>, *Res, Zext, DT);</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160; </div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;    <a class="code" href="classuint32__t.html">uint32_t</a> SrcBitsKept = SrcTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>() - BitsToClear;</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    <a class="code" href="classuint32__t.html">uint32_t</a> DestBitSize = DestTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160; </div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    <span class="comment">// If the high bits are already filled with zeros, just replace this</span></div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;    <span class="comment">// cast with the result.</span></div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#aedbf3998b4ff72347a45cb4169d120db">MaskedValueIsZero</a>(Res,</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;                          <a class="code" href="classllvm_1_1APInt.html#adcb96bd09d7c75c7669fa5f9d1190899">APInt::getHighBitsSet</a>(DestBitSize,</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;                                                DestBitSize - SrcBitsKept),</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;                             0, &amp;Zext))</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(Zext, Res);</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160; </div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;    <span class="comment">// We need to emit an AND to clear the high bits.</span></div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Res-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(),</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;                               <a class="code" href="classllvm_1_1APInt.html#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(DestBitSize, SrcBitsKept));</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateAnd(Res, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;  }</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160; </div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;  <span class="comment">// If this is a TRUNC followed by a ZEXT then we are dealing with integral</span></div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;  <span class="comment">// types and if the sizes are just right we can convert this into a logical</span></div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;  <span class="comment">// &#39;and&#39; which will be much cheaper than the pair of casts.</span></div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CSrc = dyn_cast&lt;TruncInst&gt;(Src)) {   <span class="comment">// A-&gt;B-&gt;C cast</span></div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    <span class="comment">// TODO: Subsume this into EvaluateInDifferentType.</span></div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160; </div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    <span class="comment">// Get the sizes of the types involved.  We know that the intermediate type</span></div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    <span class="comment">// will be smaller than A or C, but don&#39;t know the relation between A and C.</span></div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *A = CSrc-&gt;getOperand(0);</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    <span class="keywordtype">unsigned</span> SrcSize = A-&gt;getType()-&gt;getScalarSizeInBits();</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;    <span class="keywordtype">unsigned</span> MidSize = CSrc-&gt;getType()-&gt;getScalarSizeInBits();</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    <span class="keywordtype">unsigned</span> DstSize = DestTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    <span class="comment">// If we&#39;re actually extending zero bits, then if</span></div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;    <span class="comment">// SrcSize &lt;  DstSize: zext(a &amp; mask)</span></div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    <span class="comment">// SrcSize == DstSize: a &amp; mask</span></div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;    <span class="comment">// SrcSize  &gt; DstSize: trunc(a) &amp; mask</span></div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;    <span class="keywordflow">if</span> (SrcSize &lt; DstSize) {</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> AndValue(<a class="code" href="classllvm_1_1APInt.html#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(SrcSize, MidSize));</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *AndConst = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(A-&gt;getType(), AndValue);</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(A, AndConst, CSrc-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;.mask&quot;</span>);</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ZExtInst.html">ZExtInst</a>(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>, DestTy);</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;    }</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160; </div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    <span class="keywordflow">if</span> (SrcSize == DstSize) {</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> AndValue(<a class="code" href="classllvm_1_1APInt.html#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(SrcSize, MidSize));</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateAnd(A, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(A-&gt;getType(),</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;                                                           AndValue));</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    }</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;    <span class="keywordflow">if</span> (SrcSize &gt; DstSize) {</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Trunc = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateTrunc(A, DestTy);</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> AndValue(<a class="code" href="classllvm_1_1APInt.html#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(DstSize, MidSize));</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateAnd(Trunc,</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;                                       <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Trunc-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(),</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;                                                        AndValue));</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    }</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;  }</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160; </div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Cmp = dyn_cast&lt;ICmpInst&gt;(Src))</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;    <span class="keywordflow">return</span> transformZExtICmp(Cmp, Zext);</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160; </div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;  <span class="comment">// zext(trunc(X) &amp; C) -&gt; (X &amp; zext(C)).</span></div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Src, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a5b844aada27c4c6fdb87146ac458c0d8">m_Trunc</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))) &amp;&amp;</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;      <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType() == DestTy)</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantExpr.html#a58d6359cee16e5da66861058836dcca9">ConstantExpr::getZExt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, DestTy));</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160; </div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;  <span class="comment">// zext((trunc(X) &amp; C) ^ C) -&gt; ((X &amp; zext(C)) ^ zext(C)).</span></div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>;</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Src, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))) &amp;&amp;</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a5b844aada27c4c6fdb87146ac458c0d8">m_Trunc</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))) &amp;&amp;</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;      <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType() == DestTy) {</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *ZC = <a class="code" href="classllvm_1_1ConstantExpr.html#a58d6359cee16e5da66861058836dcca9">ConstantExpr::getZExt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, DestTy);</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateXor(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, ZC), ZC);</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;  }</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160; </div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;  <span class="comment">// If we are truncating, masking, and then zexting back to the original type,</span></div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;  <span class="comment">// that&#39;s just a mask. This is not handled by canEvaluateZextd if the</span></div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;  <span class="comment">// intermediate values have extra uses. This could be generalized further for</span></div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;  <span class="comment">// a non-constant mask operand.</span></div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;  <span class="comment">// zext (and (trunc X), C) --&gt; and X, (zext C)</span></div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Src, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a5b844aada27c4c6fdb87146ac458c0d8">m_Trunc</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))) &amp;&amp;</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;      <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType() == DestTy) {</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *ZextC = <a class="code" href="classllvm_1_1ConstantExpr.html#a58d6359cee16e5da66861058836dcca9">ConstantExpr::getZExt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, DestTy);</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, ZextC);</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;  }</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160; </div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Src, <a class="code" href="namespacellvm_1_1PatternMatch.html#abe28025713ed7d83e0d57e078b28e570">m_VScale</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>))) {</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;    <span class="keywordflow">if</span> (Zext.<a class="code" href="classllvm_1_1Instruction.html#a6a66ebb3aa12757479a3c88de77d78f8">getFunction</a>() &amp;&amp;</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;        Zext.<a class="code" href="classllvm_1_1Instruction.html#a6a66ebb3aa12757479a3c88de77d78f8">getFunction</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#afb28a4deafe2954b0534cc6399ce518b">hasFnAttribute</a>(Attribute::VScaleRange)) {</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;      <a class="code" href="classllvm_1_1Attribute.html">Attribute</a> Attr =</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;          Zext.<a class="code" href="classllvm_1_1Instruction.html#a6a66ebb3aa12757479a3c88de77d78f8">getFunction</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#a4c319db4fe05c27cfe55bd133a87414d">getFnAttribute</a>(Attribute::VScaleRange);</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;      <span class="keywordflow">if</span> (std::optional&lt;unsigned&gt; MaxVScale = Attr.<a class="code" href="classllvm_1_1Attribute.html#a190a29f5df3964b269383c0d6fba0ea9">getVScaleRangeMax</a>()) {</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;        <span class="keywordtype">unsigned</span> TypeWidth = Src-&gt;getType()-&gt;getScalarSizeInBits();</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a646986783f35e0fef8988f0f28d2589f">Log2_32</a>(*MaxVScale) &lt; TypeWidth) {</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *VScale = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateVScale(<a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(DestTy, 1));</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;          <span class="keywordflow">return</span> replaceInstUsesWith(Zext, VScale);</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;        }</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;      }</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    }</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;  }</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160; </div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;}</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;<span class="comment">/// Transform (sext icmp) to bitwise / integer operations to eliminate the icmp.</span></div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InstCombinerImpl::transformSExtICmp(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *Cmp,</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;                                                 <a class="code" href="classllvm_1_1SExtInst.html">SExtInst</a> &amp;Sext) {</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = Cmp-&gt;getOperand(0), *Op1 = Cmp-&gt;getOperand(1);</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred = Cmp-&gt;getPredicate();</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160; </div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;  <span class="comment">// Don&#39;t bother if Op1 isn&#39;t of vector or integer type.</span></div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;  <span class="keywordflow">if</span> (!Op1-&gt;getType()-&gt;isIntOrIntVectorTy())</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160; </div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;  <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a> &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a874d53817a4923de8e58af6b278c09b0">m_ZeroInt</a>())) {</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    <span class="comment">// sext (x &lt;s 0) --&gt; ashr x, 31 (all ones if negative)</span></div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Sh = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(),</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;                                 Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>() - 1);</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAShr(Op0, Sh, Op0-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;.lobit&quot;</span>);</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>-&gt;getType() != Sext.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;      <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIntCast(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>, Sext.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), <span class="keyword">true</span> <span class="comment">/*SExt*/</span>);</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160; </div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(Sext, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>);</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;  }</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160; </div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *Op1C = dyn_cast&lt;ConstantInt&gt;(Op1)) {</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    <span class="comment">// If we know that only one bit of the LHS of the icmp can be set and we</span></div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    <span class="comment">// have an equality comparison with zero or a power of 2, we can transform</span></div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    <span class="comment">// the icmp and sext into bitwise/integer operations.</span></div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    <span class="keywordflow">if</span> (Cmp-&gt;hasOneUse() &amp;&amp;</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;        Cmp-&gt;isEquality() &amp;&amp; (Op1C-&gt;isZero() || Op1C-&gt;getValue().isPowerOf2())){</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;      <a class="code" href="structllvm_1_1KnownBits.html">KnownBits</a> Known = <a class="code" href="namespacellvm.html#aa1f8f0633edd8b9a1c5ec15bb9fc5640">computeKnownBits</a>(Op0, 0, &amp;Sext);</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160; </div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> KnownZeroMask(~Known.<a class="code" href="structllvm_1_1KnownBits.html#ac67bca6c764da76f5e152330d92ed916">Zero</a>);</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;      <span class="keywordflow">if</span> (KnownZeroMask.isPowerOf2()) {</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a> = Cmp-&gt;getOperand(0);</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160; </div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;        <span class="comment">// If the icmp tests for a known zero bit we can constant fold it.</span></div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;        <span class="keywordflow">if</span> (!Op1C-&gt;isZero() &amp;&amp; Op1C-&gt;getValue() != KnownZeroMask) {</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *V = Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a> ?</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;                       <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">ConstantInt::getAllOnesValue</a>(Sext.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()) :</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;                       <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a>::getNullValue(Sext.<a class="code" href="M68kELFObjectWriter_8cpp.html#ae4a8bc3879d2282eefd72b16b12c2a37">getType</a>());</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;          <span class="keywordflow">return</span> replaceInstUsesWith(Sext, V);</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;        }</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160; </div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;        <span class="keywordflow">if</span> (!Op1C-&gt;isZero() == (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>)) {</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;          <span class="comment">// sext ((x &amp; 2^n) == 0)   -&gt; (x &gt;&gt; n) - 1</span></div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;          <span class="comment">// sext ((x &amp; 2^n) != 2^n) -&gt; (x &gt;&gt; n) - 1</span></div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;          <span class="keywordtype">unsigned</span> ShiftAmt = KnownZeroMask.countTrailingZeros();</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;          <span class="comment">// Perform a right shift to place the desired bit in the LSB.</span></div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;          <span class="keywordflow">if</span> (ShiftAmt)</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;            <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLShr(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>,</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;                                    <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>-&gt;getType(), ShiftAmt));</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160; </div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;          <span class="comment">// At this point &quot;In&quot; is either 1 or 0. Subtract 1 to turn</span></div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;          <span class="comment">// {1, 0} -&gt; {0, -1}.</span></div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;          <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>,</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;                                 <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">ConstantInt::getAllOnesValue</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>-&gt;getType()),</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;                                 <span class="stringliteral">&quot;sext&quot;</span>);</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;          <span class="comment">// sext ((x &amp; 2^n) != 0)   -&gt; (x &lt;&lt; bitwidth-n) a&gt;&gt; bitwidth-1</span></div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;          <span class="comment">// sext ((x &amp; 2^n) == 2^n) -&gt; (x &lt;&lt; bitwidth-n) a&gt;&gt; bitwidth-1</span></div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;          <span class="keywordtype">unsigned</span> ShiftAmt = KnownZeroMask.countLeadingZeros();</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;          <span class="comment">// Perform a left shift to place the desired bit in the MSB.</span></div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;          <span class="keywordflow">if</span> (ShiftAmt)</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;            <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShl(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>,</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;                                   <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>-&gt;getType(), ShiftAmt));</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160; </div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;          <span class="comment">// Distribute the bit over the whole bit width.</span></div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;          <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAShr(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>-&gt;getType(),</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;                                  KnownZeroMask.getBitWidth() - 1), <span class="stringliteral">&quot;sext&quot;</span>);</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;        }</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160; </div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;        <span class="keywordflow">if</span> (Sext.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() == <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>-&gt;getType())</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;          <span class="keywordflow">return</span> replaceInstUsesWith(Sext, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>);</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#a277c32f1a2c680c0af45cbf0ff67c409">CastInst::CreateIntegerCast</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">In</a>, Sext.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), <span class="keyword">true</span><span class="comment">/*SExt*/</span>);</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;      }</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;    }</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;  }</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160; </div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;}</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;<span class="comment">/// Return true if we can take the specified value and return it as type Ty</span></div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;<span class="comment">/// without inserting any new casts and without changing the value of the common</span></div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;<span class="comment">/// low bits.  This is used by code that tries to promote integer operations to</span></div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;<span class="comment">/// a wider types will allow us to eliminate the extension.</span></div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;<span class="comment">/// This function works on both vectors and scalars.</span></div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01464"></a><span class="lineno"><a class="line" href="InstCombineCasts_8cpp.html#a16e1399c07ad0fea0b83eaea29c1402e"> 1464</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineCasts_8cpp.html#a16e1399c07ad0fea0b83eaea29c1402e">canEvaluateSExtd</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty) {</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>() &lt; Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>() &amp;&amp;</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;         <span class="stringliteral">&quot;Can&#39;t sign extend type to a smaller type&quot;</span>);</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="InstCombineCasts_8cpp.html#a9cad0d942fb5f64b2ec2ce7e7277c492">canAlwaysEvaluateInType</a>(V, Ty))</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="InstCombineCasts_8cpp.html#aaa977254b83ff622718b40f1aa81271f">canNotEvaluateInType</a>(V, Ty))</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160; </div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;  <span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = cast&lt;Instruction&gt;(V);</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode()) {</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;  <span class="keywordflow">case</span> Instruction::SExt:  <span class="comment">// sext(sext(x)) -&gt; sext(x)</span></div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;  <span class="keywordflow">case</span> Instruction::ZExt:  <span class="comment">// sext(zext(x)) -&gt; zext(x)</span></div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;  <span class="keywordflow">case</span> Instruction::Trunc: <span class="comment">// sext(trunc(x)) -&gt; trunc(x) or sext(x)</span></div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;  <span class="keywordflow">case</span> Instruction::And:</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;  <span class="keywordflow">case</span> Instruction::Or:</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;  <span class="keywordflow">case</span> Instruction::Xor:</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a>:</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;  <span class="keywordflow">case</span> Instruction::Sub:</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Instruction::Mul</a>:</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;    <span class="comment">// These operators can all arbitrarily be extended if their inputs can.</span></div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="InstCombineCasts_8cpp.html#a16e1399c07ad0fea0b83eaea29c1402e">canEvaluateSExtd</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0), Ty) &amp;&amp;</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;           <a class="code" href="InstCombineCasts_8cpp.html#a16e1399c07ad0fea0b83eaea29c1402e">canEvaluateSExtd</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1), Ty);</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160; </div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;  <span class="comment">//case Instruction::Shl:   TODO</span></div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;  <span class="comment">//case Instruction::LShr:  TODO</span></div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160; </div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="AMDGPURegBankSelect_8cpp.html#a14e0c000ed52e5fc187d4a885914cc1a">Instruction::Select</a>:</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="InstCombineCasts_8cpp.html#a16e1399c07ad0fea0b83eaea29c1402e">canEvaluateSExtd</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1), Ty) &amp;&amp;</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;           <a class="code" href="InstCombineCasts_8cpp.html#a16e1399c07ad0fea0b83eaea29c1402e">canEvaluateSExtd</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(2), Ty);</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160; </div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">Instruction::PHI</a>: {</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    <span class="comment">// We can change a phi if we can change all operands.  Note that we never</span></div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    <span class="comment">// get into trouble with cyclic PHIs here because we only consider</span></div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    <span class="comment">// instructions with a single use.</span></div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = cast&lt;PHINode&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *IncValue : PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a1f0ff79b64a40d383b891f1baba89c6b">incoming_values</a>())</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="InstCombineCasts_8cpp.html#a16e1399c07ad0fea0b83eaea29c1402e">canEvaluateSExtd</a>(IncValue, Ty)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;  }</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    <span class="comment">// TODO: Can handle more cases here.</span></div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;  }</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160; </div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;}</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160; </div>
<div class="line"><a name="l01512"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a2a5120238e6845643a37d5a4675a5342"> 1512</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a2a5120238e6845643a37d5a4675a5342">InstCombinerImpl::visitSExt</a>(<a class="code" href="classllvm_1_1SExtInst.html">SExtInst</a> &amp;Sext) {</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;  <span class="comment">// If this sign extend is only used by a truncate, let the truncate be</span></div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;  <span class="comment">// eliminated before we try to optimize this sext.</span></div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;  <span class="keywordflow">if</span> (Sext.<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp; isa&lt;TruncInst&gt;(Sext.<a class="code" href="classllvm_1_1Instruction.html#a2fd1d2dc14e22227cfa8238778ab87b8">user_back</a>()))</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160; </div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = commonCastTransforms(Sext))</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160; </div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Src = Sext.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *SrcTy = Src-&gt;getType(), *DestTy = Sext.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;  <span class="keywordtype">unsigned</span> SrcBitSize = SrcTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;  <span class="keywordtype">unsigned</span> DestBitSize = DestTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160; </div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;  <span class="comment">// If the value being extended is zero or positive, use a zext instead.</span></div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ac0be0d93ccd89dac00411b3a5a8bef87">isKnownNonNegative</a>(Src, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, 0, &amp;AC, &amp;Sext, &amp;DT))</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#a643fe5a9e7042f032dae78109c2b1e72">CastInst::Create</a>(Instruction::ZExt, Src, DestTy);</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160; </div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;  <span class="comment">// Try to extend the entire expression tree to the wide destination type.</span></div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;  <span class="keywordflow">if</span> (shouldChangeType(SrcTy, DestTy) &amp;&amp; <a class="code" href="InstCombineCasts_8cpp.html#a16e1399c07ad0fea0b83eaea29c1402e">canEvaluateSExtd</a>(Src, DestTy)) {</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;    <span class="comment">// Okay, we can transform this!  Insert the new expression now.</span></div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ICE: EvaluateInDifferentType converting expression type&quot;</span></div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;                  <span class="stringliteral">&quot; to avoid sign extend: &quot;</span></div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;               &lt;&lt; Sext &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Res = EvaluateInDifferentType(Src, DestTy, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Res-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() == DestTy);</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160; </div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;    <span class="comment">// If the high bits are already filled with sign bit, just replace this</span></div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;    <span class="comment">// cast with the result.</span></div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ad46ed333b920b20e78d948610366254c">ComputeNumSignBits</a>(Res, 0, &amp;Sext) &gt; DestBitSize - SrcBitSize)</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(Sext, Res);</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160; </div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;    <span class="comment">// We need to emit a shl + ashr to do the sign extend.</span></div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *ShAmt = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(DestTy, DestBitSize-SrcBitSize);</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateAShr(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShl(Res, ShAmt, <span class="stringliteral">&quot;sext&quot;</span>),</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;                                      ShAmt);</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;  }</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160; </div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Src, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5b844aada27c4c6fdb87146ac458c0d8">m_Trunc</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)))) {</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;    <span class="comment">// If the input has more sign bits than bits truncated, then convert</span></div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    <span class="comment">// directly to final type.</span></div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    <span class="keywordtype">unsigned</span> XBitSize = <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()-&gt;getScalarSizeInBits();</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ad46ed333b920b20e78d948610366254c">ComputeNumSignBits</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, 0, &amp;Sext) &gt; XBitSize - SrcBitSize)</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#a277c32f1a2c680c0af45cbf0ff67c409">CastInst::CreateIntegerCast</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, DestTy, <span class="comment">/* isSigned */</span> <span class="keyword">true</span>);</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160; </div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;    <span class="comment">// If input is a trunc from the destination type, then convert into shifts.</span></div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;    <span class="keywordflow">if</span> (Src-&gt;hasOneUse() &amp;&amp; <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType() == DestTy) {</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;      <span class="comment">// sext (trunc X) --&gt; ashr (shl X, C), C</span></div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *ShAmt = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(DestTy, DestBitSize - SrcBitSize);</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateAShr(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShl(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, ShAmt), ShAmt);</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;    }</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160; </div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    <span class="comment">// If we are replacing shifted-in high zero bits with sign bits, convert</span></div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;    <span class="comment">// the logic shift to arithmetic shift and eliminate the cast to</span></div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;    <span class="comment">// intermediate type:</span></div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;    <span class="comment">// sext (trunc (lshr Y, C)) --&gt; sext/trunc (ashr Y, C)</span></div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;    <span class="keywordflow">if</span> (Src-&gt;hasOneUse() &amp;&amp;</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">m_LShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>),</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;                        <a class="code" href="namespacellvm_1_1PatternMatch.html#aa4a99c313af96b3b50a9768338a54b2e">m_SpecificIntAllowUndef</a>(XBitSize - SrcBitSize)))) {</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Ashr = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAShr(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, XBitSize - SrcBitSize);</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#a277c32f1a2c680c0af45cbf0ff67c409">CastInst::CreateIntegerCast</a>(Ashr, DestTy, <span class="comment">/* isSigned */</span> <span class="keyword">true</span>);</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    }</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;  }</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160; </div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Cmp = dyn_cast&lt;ICmpInst&gt;(Src))</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;    <span class="keywordflow">return</span> transformSExtICmp(Cmp, Sext);</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160; </div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;  <span class="comment">// If the input is a shl/ashr pair of a same constant, then this is a sign</span></div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;  <span class="comment">// extension from a smaller value.  If we could trust arbitrary bitwidth</span></div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;  <span class="comment">// integers, we could turn this into a truncate to the smaller bit and then</span></div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;  <span class="comment">// use a sext for the whole extension.  Since we don&#39;t, look deeper and check</span></div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;  <span class="comment">// for a truncate.  If the source and dest are the same type, eliminate the</span></div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;  <span class="comment">// trunc and extend and just do shifts.  For example, turn:</span></div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;  <span class="comment">//   %a = trunc i32 %i to i8</span></div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;  <span class="comment">//   %b = shl i8 %a, C</span></div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;  <span class="comment">//   %c = ashr i8 %b, C</span></div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;  <span class="comment">//   %d = sext i8 %c to i32</span></div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;  <span class="comment">// into:</span></div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;  <span class="comment">//   %a = shl i32 %i, 32-(8-C)</span></div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;  <span class="comment">//   %d = ashr i32 %a, 32-(8-C)</span></div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *A = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;  <span class="comment">// TODO: Eventually this could be subsumed by EvaluateInDifferentType.</span></div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *BA = <span class="keyword">nullptr</span>, *CA = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Src, <a class="code" href="namespacellvm_1_1PatternMatch.html#a64153676e101a130bbbaaf91635d253a">m_AShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a5b844aada27c4c6fdb87146ac458c0d8">m_Trunc</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A)), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(BA)),</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;                        <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(CA))) &amp;&amp;</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;      BA-&gt;<a class="code" href="classllvm_1_1Constant.html#aee0f586f3e5fc07e4c55d3e8caade9a6">isElementWiseEqual</a>(CA) &amp;&amp; A-&gt;getType() == DestTy) {</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *WideCurrShAmt = <a class="code" href="classllvm_1_1ConstantExpr.html#aa342c9b3d47cd9bde63b80c83ead429b">ConstantExpr::getSExt</a>(CA, DestTy);</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NumLowbitsLeft = <a class="code" href="classllvm_1_1ConstantExpr.html#a554ab77949b0a16670a83ec3307501eb">ConstantExpr::getSub</a>(</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;        <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(DestTy, SrcTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>()), WideCurrShAmt);</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NewShAmt = <a class="code" href="classllvm_1_1ConstantExpr.html#a554ab77949b0a16670a83ec3307501eb">ConstantExpr::getSub</a>(</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;        <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(DestTy, DestTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>()),</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;        NumLowbitsLeft);</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;    NewShAmt =</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;        <a class="code" href="classllvm_1_1Constant.html#a31dbd9cf336966a863e37c5653b6c134">Constant::mergeUndefsWith</a>(<a class="code" href="classllvm_1_1Constant.html#a31dbd9cf336966a863e37c5653b6c134">Constant::mergeUndefsWith</a>(NewShAmt, BA), CA);</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;    A = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShl(A, NewShAmt, Sext.<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>());</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateAShr(A, NewShAmt);</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;  }</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160; </div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;  <span class="comment">// Splatting a bit of constant-index across a value:</span></div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;  <span class="comment">// sext (ashr (trunc iN X to iM), M-1) to iN --&gt; ashr (shl X, N-M), N-1</span></div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;  <span class="comment">// If the dest type is different, use a cast (adjust use check).</span></div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Src, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a64153676e101a130bbbaaf91635d253a">m_AShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a5b844aada27c4c6fdb87146ac458c0d8">m_Trunc</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)),</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;                                 <a class="code" href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">m_SpecificInt</a>(SrcBitSize - 1))))) {</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *XTy = <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType();</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;    <span class="keywordtype">unsigned</span> XBitSize = XTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *ShlAmtC = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(XTy, XBitSize - SrcBitSize);</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *AshrAmtC = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(XTy, XBitSize - 1);</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;    <span class="keywordflow">if</span> (XTy == DestTy)</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateAShr(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShl(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, ShlAmtC),</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;                                        AshrAmtC);</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;    <span class="keywordflow">if</span> (cast&lt;BinaryOperator&gt;(Src)-&gt;getOperand(0)-&gt;<a class="code" href="WebAssemblyRegStackify_8cpp.html#a3fe3a133bacc7200702bc7b0b13d092c">hasOneUse</a>()) {</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Ashr = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAShr(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShl(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, ShlAmtC), AshrAmtC);</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#a277c32f1a2c680c0af45cbf0ff67c409">CastInst::CreateIntegerCast</a>(Ashr, DestTy, <span class="comment">/* isSigned */</span> <span class="keyword">true</span>);</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    }</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;  }</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160; </div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Src, <a class="code" href="namespacellvm_1_1PatternMatch.html#abe28025713ed7d83e0d57e078b28e570">m_VScale</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>))) {</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;    <span class="keywordflow">if</span> (Sext.<a class="code" href="classllvm_1_1Instruction.html#a6a66ebb3aa12757479a3c88de77d78f8">getFunction</a>() &amp;&amp;</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;        Sext.<a class="code" href="classllvm_1_1Instruction.html#a6a66ebb3aa12757479a3c88de77d78f8">getFunction</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#afb28a4deafe2954b0534cc6399ce518b">hasFnAttribute</a>(Attribute::VScaleRange)) {</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;      <a class="code" href="classllvm_1_1Attribute.html">Attribute</a> Attr =</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;          Sext.<a class="code" href="classllvm_1_1Instruction.html#a6a66ebb3aa12757479a3c88de77d78f8">getFunction</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#a4c319db4fe05c27cfe55bd133a87414d">getFnAttribute</a>(Attribute::VScaleRange);</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;      <span class="keywordflow">if</span> (std::optional&lt;unsigned&gt; MaxVScale = Attr.<a class="code" href="classllvm_1_1Attribute.html#a190a29f5df3964b269383c0d6fba0ea9">getVScaleRangeMax</a>()) {</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a646986783f35e0fef8988f0f28d2589f">Log2_32</a>(*MaxVScale) &lt; (SrcBitSize - 1)) {</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *VScale = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateVScale(<a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(DestTy, 1));</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;          <span class="keywordflow">return</span> replaceInstUsesWith(Sext, VScale);</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;        }</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;      }</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;    }</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;  }</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160; </div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;}</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;<span class="comment">/// Return a Constant* for the specified floating-point constant if it fits</span></div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;<span class="comment">/// in the specified FP type without changing its value.</span></div>
<div class="line"><a name="l01650"></a><span class="lineno"><a class="line" href="InstCombineCasts_8cpp.html#a68d58b6cb8f56c90aa445f4857a8d430"> 1650</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineCasts_8cpp.html#a68d58b6cb8f56c90aa445f4857a8d430">fitsInFPType</a>(<a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a> *CFP, <span class="keyword">const</span> <a class="code" href="structllvm_1_1fltSemantics.html">fltSemantics</a> &amp;Sem) {</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;  <span class="keywordtype">bool</span> losesInfo;</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;  <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = CFP-&gt;<a class="code" href="classllvm_1_1ConstantFP.html#a7faf4e0334b77ab527e4b45e3a1f4d65">getValueAPF</a>();</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;  (void)<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.convert(Sem, <a class="code" href="structllvm_1_1APFloatBase.html#a22ed74f1ed33c4d33f524a650ea536a6">APFloat::rmNearestTiesToEven</a>, &amp;losesInfo);</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;  <span class="keywordflow">return</span> !losesInfo;</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;}</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160; </div>
<div class="line"><a name="l01657"></a><span class="lineno"><a class="line" href="InstCombineCasts_8cpp.html#ad1cc57bee1a5945eaa94cb3e3692a5a2"> 1657</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Type.html">Type</a> *<a class="code" href="InstCombineCasts_8cpp.html#ad1cc57bee1a5945eaa94cb3e3692a5a2">shrinkFPConstant</a>(<a class="code" href="classllvm_1_1ConstantFP.html">ConstantFP</a> *CFP) {</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;  <span class="keywordflow">if</span> (CFP-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() == <a class="code" href="classllvm_1_1Type.html#a489d14cb1d049f4bcc5e3e9cdaf9c54d">Type::getPPC_FP128Ty</a>(CFP-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>()))</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;  <span class="comment">// No constant folding of this.</span></div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;  <span class="comment">// See if the value can be truncated to half and then reextended.</span></div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="InstCombineCasts_8cpp.html#a68d58b6cb8f56c90aa445f4857a8d430">fitsInFPType</a>(CFP, <a class="code" href="structllvm_1_1APFloatBase.html#a86415bb448a78ef1fed893f9eb0f5d06">APFloat::IEEEhalf</a>()))</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1Type.html#ae550f2e9436b395b614b4377ba27007f">Type::getHalfTy</a>(CFP-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>());</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;  <span class="comment">// See if the value can be truncated to float and then reextended.</span></div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="InstCombineCasts_8cpp.html#a68d58b6cb8f56c90aa445f4857a8d430">fitsInFPType</a>(CFP, <a class="code" href="structllvm_1_1APFloatBase.html#a0c5765e9acba977f6e462c2917276d8f">APFloat::IEEEsingle</a>()))</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1Type.html#ad5e0fe0efdd88f98a5b5eb512d5351c2">Type::getFloatTy</a>(CFP-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>());</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;  <span class="keywordflow">if</span> (CFP-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#aa0fd6bf3d33236279db7b707bba755f4">isDoubleTy</a>())</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;  <span class="comment">// Won&#39;t shrink.</span></div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="InstCombineCasts_8cpp.html#a68d58b6cb8f56c90aa445f4857a8d430">fitsInFPType</a>(CFP, <a class="code" href="structllvm_1_1APFloatBase.html#a6ba7c3d54a5a714f7a27861ee114cce3">APFloat::IEEEdouble</a>()))</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1Type.html#acb145f988329d1d621f73abcafea21d8">Type::getDoubleTy</a>(CFP-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>());</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;  <span class="comment">// Don&#39;t try to shrink to various long double types.</span></div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;}</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160; </div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;<span class="comment">// Determine if this is a vector of ConstantFPs and if so, return the minimal</span></div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;<span class="comment">// type we can safely truncate all elements to.</span></div>
<div class="line"><a name="l01676"></a><span class="lineno"><a class="line" href="InstCombineCasts_8cpp.html#a7496a50ac6cdcc6462f555c033bd8370"> 1676</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Type.html">Type</a> *<a class="code" href="InstCombineCasts_8cpp.html#a7496a50ac6cdcc6462f555c033bd8370">shrinkFPConstantVector</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;  <span class="keyword">auto</span> *CV = dyn_cast&lt;Constant&gt;(V);</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;  <span class="keyword">auto</span> *CVVTy = dyn_cast&lt;FixedVectorType&gt;(V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;  <span class="keywordflow">if</span> (!CV || !CVVTy)</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160; </div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *MinType = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160; </div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;  <span class="keywordtype">unsigned</span> NumElts = CVVTy-&gt;getNumElements();</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160; </div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;  <span class="comment">// For fixed-width vectors we find the minimal type by looking</span></div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;  <span class="comment">// through the constant values of the vector.</span></div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != NumElts; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;    <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(CV-&gt;getAggregateElement(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)))</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160; </div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;    <span class="keyword">auto</span> *CFP = dyn_cast_or_null&lt;ConstantFP&gt;(CV-&gt;getAggregateElement(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;    <span class="keywordflow">if</span> (!CFP)</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160; </div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *<a class="code" href="classT.html">T</a> = <a class="code" href="InstCombineCasts_8cpp.html#ad1cc57bee1a5945eaa94cb3e3692a5a2">shrinkFPConstant</a>(CFP);</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classT.html">T</a>)</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160; </div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;    <span class="comment">// If we haven&#39;t found a type yet or this type has a larger mantissa than</span></div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;    <span class="comment">// our previous type, this is our new minimal type.</span></div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;    <span class="keywordflow">if</span> (!MinType || <a class="code" href="classT.html">T</a>-&gt;getFPMantissaWidth() &gt; MinType-&gt;<a class="code" href="classllvm_1_1Type.html#ad9b99a13e459cb18bb386ddd610ecf8c">getFPMantissaWidth</a>())</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;      MinType = <a class="code" href="classT.html">T</a>;</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;  }</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160; </div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;  <span class="comment">// Make a vector type from the minimal type.</span></div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;  <span class="keywordflow">return</span> MinType ? <a class="code" href="classllvm_1_1FixedVectorType.html#af9a870d5df50fe0133a410b7c9114c80">FixedVectorType::get</a>(MinType, NumElts) : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;}</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;<span class="comment">/// Find the minimum FP type we can safely truncate to.</span></div>
<div class="line"><a name="l01711"></a><span class="lineno"><a class="line" href="InstCombineCasts_8cpp.html#a892ab7536cd879b0be803ff921b5ce06"> 1711</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Type.html">Type</a> *<a class="code" href="InstCombineCasts_8cpp.html#a892ab7536cd879b0be803ff921b5ce06">getMinimumFPType</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *FPExt = dyn_cast&lt;FPExtInst&gt;(V))</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;    <span class="keywordflow">return</span> FPExt-&gt;getOperand(0)-&gt;getType();</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160; </div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;  <span class="comment">// If this value is a constant, return the constant in the smallest FP type</span></div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;  <span class="comment">// that can accurately represent it.  This allows us to turn</span></div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;  <span class="comment">// (float)((double)X+2.0) into x+2.0f.</span></div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CFP = dyn_cast&lt;ConstantFP&gt;(V))</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Type.html">Type</a> *<a class="code" href="classT.html">T</a> = <a class="code" href="InstCombineCasts_8cpp.html#ad1cc57bee1a5945eaa94cb3e3692a5a2">shrinkFPConstant</a>(CFP))</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classT.html">T</a>;</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160; </div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;  <span class="comment">// We can only correctly find a minimum type for a scalable vector when it is</span></div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;  <span class="comment">// a splat. For splats of constant values the fpext is wrapped up as a</span></div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;  <span class="comment">// ConstantExpr.</span></div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *FPCExt = dyn_cast&lt;ConstantExpr&gt;(V))</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;    <span class="keywordflow">if</span> (FPCExt-&gt;getOpcode() == Instruction::FPExt)</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;      <span class="keywordflow">return</span> FPCExt-&gt;getOperand(0)-&gt;getType();</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160; </div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;  <span class="comment">// Try to shrink a vector of FP constants. This returns nullptr on scalable</span></div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;  <span class="comment">// vectors</span></div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Type.html">Type</a> *<a class="code" href="classT.html">T</a> = <a class="code" href="InstCombineCasts_8cpp.html#a7496a50ac6cdcc6462f555c033bd8370">shrinkFPConstantVector</a>(V))</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classT.html">T</a>;</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160; </div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;  <span class="keywordflow">return</span> V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;}</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;<span class="comment">/// Return true if the cast from integer to FP can be proven to be exact for all</span></div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;<span class="comment">/// possible inputs (the conversion does not lose any precision).</span></div>
<div class="line"><a name="l01739"></a><span class="lineno"><a class="line" href="InstCombineCasts_8cpp.html#aac5576a66149a9259706758d613ba555"> 1739</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineCasts_8cpp.html#aac5576a66149a9259706758d613ba555">isKnownExactCastIntToFP</a>(<a class="code" href="classllvm_1_1CastInst.html">CastInst</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1InstCombinerImpl.html">InstCombinerImpl</a> &amp;IC) {</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">CastInst::CastOps</a> Opcode = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode();</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((Opcode == CastInst::SIToFP || Opcode == CastInst::UIToFP) &amp;&amp;</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;         <span class="stringliteral">&quot;Unexpected cast&quot;</span>);</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Src = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0);</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *SrcTy = Src-&gt;getType();</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *FPTy = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType();</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;  <span class="keywordtype">bool</span> IsSigned = Opcode == Instruction::SIToFP;</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;  <span class="keywordtype">int</span> SrcSize = (<a class="code" href="lib_2Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a>)SrcTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>() - IsSigned;</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160; </div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;  <span class="comment">// Easy case - if the source integer type has less bits than the FP mantissa,</span></div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;  <span class="comment">// then the cast must be exact.</span></div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;  <span class="keywordtype">int</span> DestNumSigBits = FPTy-&gt;<a class="code" href="classllvm_1_1Type.html#ad9b99a13e459cb18bb386ddd610ecf8c">getFPMantissaWidth</a>();</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;  <span class="keywordflow">if</span> (SrcSize &lt;= DestNumSigBits)</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160; </div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;  <span class="comment">// Cast from FP to integer and back to FP is independent of the intermediate</span></div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;  <span class="comment">// integer width because of poison on overflow.</span></div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>;</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Src, <a class="code" href="namespacellvm_1_1PatternMatch.html#a56cd13409dd239e680e8eb1bae42fffc">m_FPToSI</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>))) || <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Src, <a class="code" href="namespacellvm_1_1PatternMatch.html#aa60174d3d9de4e501a53c4bddc823f02">m_FPToUI</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)))) {</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;    <span class="comment">// If this is uitofp (fptosi F), the source needs an extra bit to avoid</span></div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;    <span class="comment">// potential rounding of negative FP input values.</span></div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;    <span class="keywordtype">int</span> SrcNumSigBits = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getType()-&gt;getFPMantissaWidth();</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;    <span class="keywordflow">if</span> (!IsSigned &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Src, <a class="code" href="namespacellvm_1_1PatternMatch.html#a56cd13409dd239e680e8eb1bae42fffc">m_FPToSI</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>())))</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;      SrcNumSigBits++;</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160; </div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;    <span class="comment">// [su]itofp (fpto[su]i F) --&gt; exact if the source type has less or equal</span></div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;    <span class="comment">// significant bits than the destination (and make sure neither type is</span></div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;    <span class="comment">// weird -- ppc_fp128).</span></div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;    <span class="keywordflow">if</span> (SrcNumSigBits &gt; 0 &amp;&amp; DestNumSigBits &gt; 0 &amp;&amp;</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;        SrcNumSigBits &lt;= DestNumSigBits)</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;  }</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160; </div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;  <span class="comment">// TODO:</span></div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;  <span class="comment">// Try harder to find if the source integer type has less significant bits.</span></div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;  <span class="comment">// For example, compute number of sign bits.</span></div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;  <a class="code" href="structllvm_1_1KnownBits.html">KnownBits</a> SrcKnown = IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae099c6fa4a0b06306ece7dd372e8d02a">computeKnownBits</a>(Src, 0, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;  <span class="keywordtype">int</span> SigBits = (<a class="code" href="lib_2Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a>)SrcTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>() -</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;                SrcKnown.<a class="code" href="structllvm_1_1KnownBits.html#a7f47812e8e75b0616a97d7004e5fb909">countMinLeadingZeros</a>() -</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;                SrcKnown.<a class="code" href="structllvm_1_1KnownBits.html#a1eeff70353694cb360b2893553c18e7d">countMinTrailingZeros</a>();</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;  <span class="keywordflow">if</span> (SigBits &lt;= DestNumSigBits)</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160; </div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;}</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160; </div>
<div class="line"><a name="l01786"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a7eb1707b3b9ea994955ac9d230535261"> 1786</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a7eb1707b3b9ea994955ac9d230535261">InstCombinerImpl::visitFPTrunc</a>(<a class="code" href="classllvm_1_1FPTruncInst.html">FPTruncInst</a> &amp;FPT) {</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = commonCastTransforms(FPT))</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160; </div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;  <span class="comment">// If we have fptrunc(OpI (fpextend x), (fpextend y)), we would like to</span></div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;  <span class="comment">// simplify this expression to avoid one or more of the trunc/extend</span></div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;  <span class="comment">// operations if we can do so without changing the numerical results.</span></div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;  <span class="comment">// The exact manner in which the widths of the operands interact to limit</span></div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;  <span class="comment">// what we can and cannot do safely varies from operation to operation, and</span></div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;  <span class="comment">// is explained below in the various case statements.</span></div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = FPT.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;  <span class="keyword">auto</span> *BO = dyn_cast&lt;BinaryOperator&gt;(FPT.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0));</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;  <span class="keywordflow">if</span> (BO &amp;&amp; BO-&gt;hasOneUse()) {</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *LHSMinType = <a class="code" href="InstCombineCasts_8cpp.html#a892ab7536cd879b0be803ff921b5ce06">getMinimumFPType</a>(BO-&gt;getOperand(0));</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *RHSMinType = <a class="code" href="InstCombineCasts_8cpp.html#a892ab7536cd879b0be803ff921b5ce06">getMinimumFPType</a>(BO-&gt;getOperand(1));</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;    <span class="keywordtype">unsigned</span> OpWidth = BO-&gt;getType()-&gt;getFPMantissaWidth();</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;    <span class="keywordtype">unsigned</span> LHSWidth = LHSMinType-&gt;<a class="code" href="classllvm_1_1Type.html#ad9b99a13e459cb18bb386ddd610ecf8c">getFPMantissaWidth</a>();</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;    <span class="keywordtype">unsigned</span> RHSWidth = RHSMinType-&gt;<a class="code" href="classllvm_1_1Type.html#ad9b99a13e459cb18bb386ddd610ecf8c">getFPMantissaWidth</a>();</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;    <span class="keywordtype">unsigned</span> SrcWidth = <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(LHSWidth, RHSWidth);</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;    <span class="keywordtype">unsigned</span> DstWidth = Ty-&gt;<a class="code" href="classllvm_1_1Type.html#ad9b99a13e459cb18bb386ddd610ecf8c">getFPMantissaWidth</a>();</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;    <span class="keywordflow">switch</span> (BO-&gt;getOpcode()) {</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;      <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;      <span class="keywordflow">case</span> Instruction::FAdd:</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;      <span class="keywordflow">case</span> Instruction::FSub:</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;        <span class="comment">// For addition and subtraction, the infinitely precise result can</span></div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;        <span class="comment">// essentially be arbitrarily wide; proving that double rounding</span></div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;        <span class="comment">// will not occur because the result of OpI is exact (as we will for</span></div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;        <span class="comment">// FMul, for example) is hopeless.  However, we *can* nonetheless</span></div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;        <span class="comment">// frequently know that double rounding cannot occur (or that it is</span></div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;        <span class="comment">// innocuous) by taking advantage of the specific structure of</span></div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;        <span class="comment">// infinitely-precise results that admit double rounding.</span></div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;        <span class="comment">// Specifically, if OpWidth &gt;= 2*DstWdith+1 and DstWidth is sufficient</span></div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;        <span class="comment">// to represent both sources, we can guarantee that the double</span></div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;        <span class="comment">// rounding is innocuous (See p50 of Figueroa&#39;s 2000 PhD thesis,</span></div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;        <span class="comment">// &quot;A Rigorous Framework for Fully Supporting the IEEE Standard ...&quot;</span></div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;        <span class="comment">// for proof of this fact).</span></div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;        <span class="comment">// Note: Figueroa does not consider the case where DstFormat !=</span></div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;        <span class="comment">// SrcFormat.  It&#39;s possible (likely even!) that this analysis</span></div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;        <span class="comment">// could be tightened for those cases, but they are rare (the main</span></div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;        <span class="comment">// case of interest here is (float)((double)float + float)).</span></div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;        <span class="keywordflow">if</span> (OpWidth &gt;= 2*DstWidth+1 &amp;&amp; DstWidth &gt;= SrcWidth) {</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFPTrunc(BO-&gt;getOperand(0), Ty);</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFPTrunc(BO-&gt;getOperand(1), Ty);</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;          <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *RI = <a class="code" href="classllvm_1_1BinaryOperator.html#a02ce9966395063ac501ecbc1623deda4">BinaryOperator::Create</a>(BO-&gt;getOpcode(), <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;          RI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a24a7664d83746bcda035bddeb773eaae">copyFastMathFlags</a>(BO);</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;          <span class="keywordflow">return</span> RI;</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;        }</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;      <span class="keywordflow">case</span> Instruction::FMul:</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;        <span class="comment">// For multiplication, the infinitely precise result has at most</span></div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;        <span class="comment">// LHSWidth + RHSWidth significant bits; if OpWidth is sufficient</span></div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;        <span class="comment">// that such a value can be exactly represented, then no double</span></div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;        <span class="comment">// rounding can possibly occur; we can safely perform the operation</span></div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;        <span class="comment">// in the destination format if it can represent both sources.</span></div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;        <span class="keywordflow">if</span> (OpWidth &gt;= LHSWidth + RHSWidth &amp;&amp; DstWidth &gt;= SrcWidth) {</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFPTrunc(BO-&gt;getOperand(0), Ty);</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFPTrunc(BO-&gt;getOperand(1), Ty);</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a3b9d9c1b6e4b743230c9c377c40a4247">BinaryOperator::CreateFMulFMF</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, BO);</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;        }</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;      <span class="keywordflow">case</span> Instruction::FDiv:</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;        <span class="comment">// For division, we use again use the bound from Figueroa&#39;s</span></div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;        <span class="comment">// dissertation.  I am entirely certain that this bound can be</span></div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;        <span class="comment">// tightened in the unbalanced operand case by an analysis based on</span></div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;        <span class="comment">// the diophantine rational approximation bound, but the well-known</span></div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;        <span class="comment">// condition used here is a good conservative first pass.</span></div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;        <span class="comment">// TODO: Tighten bound via rigorous analysis of the unbalanced case.</span></div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;        <span class="keywordflow">if</span> (OpWidth &gt;= 2*DstWidth &amp;&amp; DstWidth &gt;= SrcWidth) {</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFPTrunc(BO-&gt;getOperand(0), Ty);</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFPTrunc(BO-&gt;getOperand(1), Ty);</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a59ab64994d74243a175979d5b7b6b535">BinaryOperator::CreateFDivFMF</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, BO);</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;        }</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;      <span class="keywordflow">case</span> Instruction::FRem: {</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;        <span class="comment">// Remainder is straightforward.  Remainder is always exact, so the</span></div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;        <span class="comment">// type of OpI doesn&#39;t enter into things at all.  We simply evaluate</span></div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;        <span class="comment">// in whichever source type is larger, then convert to the</span></div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;        <span class="comment">// destination type.</span></div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;        <span class="keywordflow">if</span> (SrcWidth == OpWidth)</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>;</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;        <span class="keywordflow">if</span> (LHSWidth == SrcWidth) {</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;           <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFPTrunc(BO-&gt;getOperand(0), LHSMinType);</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;           <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFPTrunc(BO-&gt;getOperand(1), LHSMinType);</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;           <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFPTrunc(BO-&gt;getOperand(0), RHSMinType);</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;           <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFPTrunc(BO-&gt;getOperand(1), RHSMinType);</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;        }</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160; </div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *ExactResult = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFRemFMF(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, BO);</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#a7599aeed2eef48eedbf230f4a14a441a">CastInst::CreateFPCast</a>(ExactResult, Ty);</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;      }</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;    }</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;  }</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160; </div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;  <span class="comment">// (fptrunc (fneg x)) -&gt; (fneg (fptrunc x))</span></div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> = dyn_cast&lt;Instruction&gt;(FPT.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0));</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> &amp;&amp; <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>-&gt;hasOneUse()) {</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;    <span class="comment">// FIXME: The FMF should propagate from the fptrunc, not the source op.</span></div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::FastMathFlagGuard</a> FMFG(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;    <span class="keywordflow">if</span> (isa&lt;FPMathOperator&gt;(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>))</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.setFastMathFlags(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>-&gt;getFastMathFlags());</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160; </div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#af431ec215bba8bb9c56e7541d99920f2">m_FNeg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)))) {</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *InnerTrunc = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFPTrunc(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, Ty);</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160; </div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1UnaryOperator.html#a9f731708e681757d51c4dc2a004873c8">UnaryOperator::CreateFNegFMF</a>(InnerTrunc, <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>);</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;    }</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160; </div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;    <span class="comment">// If we are truncating a select that has an extended operand, we can</span></div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;    <span class="comment">// narrow the other operand and do the select as a narrow op.</span></div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#addb87fe3f509b7803d3f5933ee24b560">m_Select</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2997340992a508357b480467a6901c70">m_FPExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))) &amp;&amp;</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;        <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType() == Ty) {</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;      <span class="comment">// fptrunc (select Cond, (fpext X), Y --&gt; select Cond, X, (fptrunc Y)</span></div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NarrowY = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFPTrunc(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, Ty);</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Sel = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, NarrowY, <span class="stringliteral">&quot;narrow.sel&quot;</span>, <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>);</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(FPT, Sel);</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;    }</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#addb87fe3f509b7803d3f5933ee24b560">m_Select</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2997340992a508357b480467a6901c70">m_FPExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)))) &amp;&amp;</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;        <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType() == Ty) {</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;      <span class="comment">// fptrunc (select Cond, Y, (fpext X) --&gt; select Cond, (fptrunc Y), X</span></div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NarrowY = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFPTrunc(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, Ty);</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Sel = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, NarrowY, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <span class="stringliteral">&quot;narrow.sel&quot;</span>, <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>);</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(FPT, Sel);</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;    }</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;  }</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160; </div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *II = dyn_cast&lt;IntrinsicInst&gt;(FPT.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0))) {</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;    <span class="keywordflow">switch</span> (II-&gt;getIntrinsicID()) {</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;    <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="README-FPStack_8txt.html#a9209b9930d4d7750a6b8b38b3b4ddd6a">Intrinsic::ceil</a>:</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;    <span class="keywordflow">case</span> Intrinsic::fabs:</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="README-FPStack_8txt.html#ac25bbfa16d28ab1f83da03668addad0a">Intrinsic::floor</a>:</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;    <span class="keywordflow">case</span> Intrinsic::nearbyint:</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;    <span class="keywordflow">case</span> Intrinsic::rint:</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="xxhash_8cpp.html#ae4e947c75dafebd71b8de03cd0dbf5d6">Intrinsic::round</a>:</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;    <span class="keywordflow">case</span> Intrinsic::roundeven:</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="README-FPStack_8txt.html#aeb9a134c2755c0ad7801bf630a790904">Intrinsic::trunc</a>: {</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Src = II-&gt;getArgOperand(0);</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;      <span class="keywordflow">if</span> (!Src-&gt;hasOneUse())</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160; </div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;      <span class="comment">// Except for fabs, this transformation requires the input of the unary FP</span></div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;      <span class="comment">// operation to be itself an fpext from the type to which we&#39;re</span></div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;      <span class="comment">// truncating.</span></div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;      <span class="keywordflow">if</span> (II-&gt;getIntrinsicID() != Intrinsic::fabs) {</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;        <a class="code" href="classllvm_1_1FPExtInst.html">FPExtInst</a> *FPExtSrc = dyn_cast&lt;FPExtInst&gt;(Src);</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;        <span class="keywordflow">if</span> (!FPExtSrc || FPExtSrc-&gt;<a class="code" href="classllvm_1_1CastInst.html#a6a1a810dc09bf349d1e1481931ce2baa">getSrcTy</a>() != Ty)</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;      }</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160; </div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;      <span class="comment">// Do unary FP operation on smaller type.</span></div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;      <span class="comment">// (fptrunc (fabs x)) -&gt; (fabs (fptrunc x))</span></div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *InnerTrunc = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFPTrunc(Src, Ty);</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;      <a class="code" href="classllvm_1_1Function.html">Function</a> *Overload = <a class="code" href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">Intrinsic::getDeclaration</a>(FPT.<a class="code" href="classllvm_1_1Instruction.html#a4ba3a5be6c0e9b9e8a525de055836733">getModule</a>(),</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;                                                     II-&gt;getIntrinsicID(), Ty);</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;OperandBundleDef, 1&gt;</a> OpBundles;</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;      II-&gt;getOperandBundlesAsDefs(OpBundles);</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;      <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *NewCI =</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;          <a class="code" href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">CallInst::Create</a>(Overload, {InnerTrunc}, OpBundles, II-&gt;getName());</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;      NewCI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a24a7664d83746bcda035bddeb773eaae">copyFastMathFlags</a>(II);</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;      <span class="keywordflow">return</span> NewCI;</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;    }</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;    }</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;  }</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160; </div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="InstCombineCasts_8cpp.html#aa62178ace163b6ca749c39196edc4147">shrinkInsertElt</a>(FPT, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160; </div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Src = FPT.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;  <span class="keywordflow">if</span> (isa&lt;SIToFPInst&gt;(Src) || isa&lt;UIToFPInst&gt;(Src)) {</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;    <span class="keyword">auto</span> *FPCast = cast&lt;CastInst&gt;(Src);</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="InstCombineCasts_8cpp.html#aac5576a66149a9259706758d613ba555">isKnownExactCastIntToFP</a>(*FPCast, *<span class="keyword">this</span>))</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#a643fe5a9e7042f032dae78109c2b1e72">CastInst::Create</a>(FPCast-&gt;getOpcode(), FPCast-&gt;getOperand(0), Ty);</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;  }</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160; </div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;}</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160; </div>
<div class="line"><a name="l01970"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#abdfda4087597a7f3a1f6af6de43c30da"> 1970</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#abdfda4087597a7f3a1f6af6de43c30da">InstCombinerImpl::visitFPExt</a>(<a class="code" href="classllvm_1_1CastInst.html">CastInst</a> &amp;FPExt) {</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;  <span class="comment">// If the source operand is a cast from integer to FP and known exact, then</span></div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;  <span class="comment">// cast the integer operand directly to the destination type.</span></div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = FPExt.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Src = FPExt.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;  <span class="keywordflow">if</span> (isa&lt;SIToFPInst&gt;(Src) || isa&lt;UIToFPInst&gt;(Src)) {</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;    <span class="keyword">auto</span> *FPCast = cast&lt;CastInst&gt;(Src);</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="InstCombineCasts_8cpp.html#aac5576a66149a9259706758d613ba555">isKnownExactCastIntToFP</a>(*FPCast, *<span class="keyword">this</span>))</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#a643fe5a9e7042f032dae78109c2b1e72">CastInst::Create</a>(FPCast-&gt;getOpcode(), FPCast-&gt;getOperand(0), Ty);</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;  }</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160; </div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;  <span class="keywordflow">return</span> commonCastTransforms(FPExt);</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;}</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;<span class="comment">/// fpto{s/u}i({u/s}itofp(X)) --&gt; X or zext(X) or sext(X) or trunc(X)</span></div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;<span class="comment">/// This is safe if the intermediate type has enough bits in its mantissa to</span></div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;<span class="comment">/// accurately represent all values of X.  For example, this won&#39;t work with</span></div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;<span class="comment">/// i64 -&gt; float -&gt; i64.</span></div>
<div class="line"><a name="l01988"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a78d5bb4c6437373debabeb3f816645cb"> 1988</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a78d5bb4c6437373debabeb3f816645cb">InstCombinerImpl::foldItoFPtoI</a>(<a class="code" href="classllvm_1_1CastInst.html">CastInst</a> &amp;FI) {</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;UIToFPInst&gt;(FI.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)) &amp;&amp; !isa&lt;SIToFPInst&gt;(FI.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)))</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160; </div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;  <span class="keyword">auto</span> *OpI = cast&lt;CastInst&gt;(FI.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0));</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = OpI-&gt;getOperand(0);</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *XType = <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType();</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *DestType = FI.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;  <span class="keywordtype">bool</span> IsOutputSigned = isa&lt;FPToSIInst&gt;(FI);</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160; </div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;  <span class="comment">// Since we can assume the conversion won&#39;t overflow, our decision as to</span></div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;  <span class="comment">// whether the input will fit in the float should depend on the minimum</span></div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;  <span class="comment">// of the input range and output range.</span></div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160; </div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;  <span class="comment">// This means this is also safe for a signed input and unsigned output, since</span></div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;  <span class="comment">// a negative input would lead to undefined behavior.</span></div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="InstCombineCasts_8cpp.html#aac5576a66149a9259706758d613ba555">isKnownExactCastIntToFP</a>(*OpI, *<span class="keyword">this</span>)) {</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;    <span class="comment">// The first cast may not round exactly based on the source integer width</span></div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;    <span class="comment">// and FP width, but the overflow UB rules can still allow this to fold.</span></div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;    <span class="comment">// If the destination type is narrow, that means the intermediate FP value</span></div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;    <span class="comment">// must be large enough to hold the source value exactly.</span></div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;    <span class="comment">// For example, (uint8_t)((float)(uint32_t 16777217) is undefined behavior.</span></div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;    <span class="keywordtype">int</span> OutputSize = (<a class="code" href="lib_2Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a>)DestType-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;    <span class="keywordflow">if</span> (OutputSize &gt; OpI-&gt;getType()-&gt;getFPMantissaWidth())</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;  }</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160; </div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;  <span class="keywordflow">if</span> (DestType-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>() &gt; XType-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>()) {</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;    <span class="keywordtype">bool</span> IsInputSigned = isa&lt;SIToFPInst&gt;(OpI);</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;    <span class="keywordflow">if</span> (IsInputSigned &amp;&amp; IsOutputSigned)</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1SExtInst.html">SExtInst</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, DestType);</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ZExtInst.html">ZExtInst</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, DestType);</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;  }</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;  <span class="keywordflow">if</span> (DestType-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>() &lt; XType-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>())</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1TruncInst.html">TruncInst</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, DestType);</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160; </div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(XType == DestType &amp;&amp; <span class="stringliteral">&quot;Unexpected types for int to FP to int casts&quot;</span>);</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;  <span class="keywordflow">return</span> replaceInstUsesWith(FI, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;}</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160; </div>
<div class="line"><a name="l02028"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a9ac14c99f4eb098f5ee3ee89908591b3"> 2028</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a9ac14c99f4eb098f5ee3ee89908591b3">InstCombinerImpl::visitFPToUI</a>(<a class="code" href="classllvm_1_1FPToUIInst.html">FPToUIInst</a> &amp;FI) {</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = foldItoFPtoI(FI))</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160; </div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;  <span class="keywordflow">return</span> commonCastTransforms(FI);</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;}</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160; </div>
<div class="line"><a name="l02035"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a3c0817ca836dbd28642d4f5b2072705a"> 2035</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a3c0817ca836dbd28642d4f5b2072705a">InstCombinerImpl::visitFPToSI</a>(<a class="code" href="classllvm_1_1FPToSIInst.html">FPToSIInst</a> &amp;FI) {</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = foldItoFPtoI(FI))</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160; </div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;  <span class="keywordflow">return</span> commonCastTransforms(FI);</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;}</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160; </div>
<div class="line"><a name="l02042"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a4d45f96f90c7ddd805c6bae2949077de"> 2042</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a4d45f96f90c7ddd805c6bae2949077de">InstCombinerImpl::visitUIToFP</a>(<a class="code" href="classllvm_1_1CastInst.html">CastInst</a> &amp;CI) {</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;  <span class="keywordflow">return</span> commonCastTransforms(CI);</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;}</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160; </div>
<div class="line"><a name="l02046"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a5c5efa376b5dcc0c0b0628d89882a498"> 2046</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a5c5efa376b5dcc0c0b0628d89882a498">InstCombinerImpl::visitSIToFP</a>(<a class="code" href="classllvm_1_1CastInst.html">CastInst</a> &amp;CI) {</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;  <span class="keywordflow">return</span> commonCastTransforms(CI);</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;}</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160; </div>
<div class="line"><a name="l02050"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a9567d315d63f844326900f461f5b3d7a"> 2050</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a9567d315d63f844326900f461f5b3d7a">InstCombinerImpl::visitIntToPtr</a>(<a class="code" href="classllvm_1_1IntToPtrInst.html">IntToPtrInst</a> &amp;CI) {</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;  <span class="comment">// If the source integer type is not the intptr_t type for this target, do a</span></div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;  <span class="comment">// trunc or zext to the intptr_t type, then inttoptr of it.  This allows the</span></div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;  <span class="comment">// cast to be exposed to other transforms.</span></div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;  <span class="keywordtype">unsigned</span> AS = CI.<a class="code" href="classllvm_1_1IntToPtrInst.html#a69434c1c574013fb2765bd2c5b27cc7b">getAddressSpace</a>();</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;  <span class="keywordflow">if</span> (CI.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>() !=</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;      <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getPointerSizeInBits(AS)) {</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = CI.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a8fa51d3da96615af400274e9cd272df4">getWithNewType</a>(</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;        <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getIntPtrType(CI.<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>(), AS));</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateZExtOrTrunc(CI.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), Ty);</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1IntToPtrInst.html">IntToPtrInst</a>(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>, CI.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;  }</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160; </div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = commonCastTransforms(CI))</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160; </div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;}</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;<span class="comment">/// Implement the transforms for cast of pointer (bitcast/ptrtoint)</span></div>
<div class="line"><a name="l02070"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#aeeac018e2130669e49141f4795548c95"> 2070</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#aeeac018e2130669e49141f4795548c95">InstCombinerImpl::commonPointerCastTransforms</a>(<a class="code" href="classllvm_1_1CastInst.html">CastInst</a> &amp;CI) {</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Src = CI.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160; </div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a> = dyn_cast&lt;GetElementPtrInst&gt;(Src)) {</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;    <span class="comment">// If casting the result of a getelementptr instruction with no offset, turn</span></div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;    <span class="comment">// this into a cast of the original pointer!</span></div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;hasAllZeroIndices() &amp;&amp;</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;        <span class="comment">// If CI is an addrspacecast and GEP changes the poiner type, merging</span></div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;        <span class="comment">// GEP into CI would undo canonicalizing addrspacecast with different</span></div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;        <span class="comment">// pointer types, causing infinite loops.</span></div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;        (!isa&lt;AddrSpaceCastInst&gt;(CI) ||</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;         <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;getType() == <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;getPointerOperandType())) {</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;      <span class="comment">// Changing the cast operand is usually not a good idea but it is safe</span></div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;      <span class="comment">// here because the pointer operand is being replaced with another</span></div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;      <span class="comment">// pointer operand so the opcode doesn&#39;t need to change.</span></div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;      <span class="keywordflow">return</span> replaceOperand(CI, 0, <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;getOperand(0));</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;    }</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;  }</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160; </div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;  <span class="keywordflow">return</span> commonCastTransforms(CI);</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;}</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160; </div>
<div class="line"><a name="l02092"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a50b0daca4f05a8d2af14aec07f64f3cc"> 2092</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a50b0daca4f05a8d2af14aec07f64f3cc">InstCombinerImpl::visitPtrToInt</a>(<a class="code" href="classllvm_1_1PtrToIntInst.html">PtrToIntInst</a> &amp;CI) {</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;  <span class="comment">// If the destination integer type is not the intptr_t type for this target,</span></div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;  <span class="comment">// do a ptrtoint to intptr_t then do a trunc or zext.  This allows the cast</span></div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;  <span class="comment">// to be exposed to other transforms.</span></div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="classllvm_1_1SrcOp.html">SrcOp</a> = CI.<a class="code" href="classllvm_1_1PtrToIntInst.html#a133fac5e4f7eefebb884a5da121008bc">getPointerOperand</a>();</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *SrcTy = <a class="code" href="classllvm_1_1SrcOp.html">SrcOp</a>-&gt;getType();</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = CI.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;  <span class="keywordtype">unsigned</span> AS = CI.<a class="code" href="classllvm_1_1PtrToIntInst.html#a378cf64c77de950ae67fc6e279e34620">getPointerAddressSpace</a>();</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;  <span class="keywordtype">unsigned</span> TySize = Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;  <span class="keywordtype">unsigned</span> PtrSize = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getPointerSizeInBits(AS);</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;  <span class="keywordflow">if</span> (TySize != PtrSize) {</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *IntPtrTy =</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;        SrcTy-&gt;<a class="code" href="classllvm_1_1Type.html#a8fa51d3da96615af400274e9cd272df4">getWithNewType</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getIntPtrType(CI.<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>(), AS));</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreatePtrToInt(<a class="code" href="classllvm_1_1SrcOp.html">SrcOp</a>, IntPtrTy);</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#a277c32f1a2c680c0af45cbf0ff67c409">CastInst::CreateIntegerCast</a>(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>, Ty, <span class="comment">/*isSigned=*/</span><span class="keyword">false</span>);</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;  }</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160; </div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a> = dyn_cast&lt;GetElementPtrInst&gt;(<a class="code" href="classllvm_1_1SrcOp.html">SrcOp</a>)) {</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;    <span class="comment">// Fold ptrtoint(gep null, x) to multiply + constant if the GEP has one use.</span></div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;    <span class="comment">// While this can increase the number of instructions it doesn&#39;t actually</span></div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;    <span class="comment">// increase the overall complexity since the arithmetic is just part of</span></div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;    <span class="comment">// the GEP otherwise.</span></div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;hasOneUse() &amp;&amp;</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;        isa&lt;ConstantPointerNull&gt;(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;getPointerOperand())) {</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(CI,</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;                                 <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIntCast(EmitGEPOffset(<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>), Ty,</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;                                                       <span class="comment">/*isSigned=*/</span><span class="keyword">false</span>));</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;    }</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;  }</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160; </div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Vec, *Scalar, *<a class="code" href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a>;</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="classllvm_1_1SrcOp.html">SrcOp</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a9cae528bdb66086aa6c06da36fc6fa24">m_InsertElt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a0408bd846c957324c4ba68d356e4122e">m_IntToPtr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Vec)),</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;                                        <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Scalar), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>)))) &amp;&amp;</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;      Vec-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() == Ty) {</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Vec-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>() == PtrSize &amp;&amp; <span class="stringliteral">&quot;Wrong type&quot;</span>);</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;    <span class="comment">// Convert the scalar to int followed by insert to eliminate one cast:</span></div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;    <span class="comment">// p2i (ins (i2p Vec), Scalar, Index --&gt; ins Vec, (p2i Scalar), Index</span></div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewCast = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreatePtrToInt(Scalar, Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a4abb39a66573f61fda80469faa5d861d">getScalarType</a>());</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InsertElementInst.html#a44cefc7b60337e7e14d20e843c74e534">InsertElementInst::Create</a>(Vec, NewCast, <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>);</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;  }</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160; </div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;  <span class="keywordflow">return</span> commonPointerCastTransforms(CI);</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;}</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;<span class="comment">/// This input value (which is known to have vector type) is being zero extended</span></div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;<span class="comment">/// or truncated to the specified vector type. Since the zext/trunc is done</span></div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;<span class="comment">/// using an integer type, we have a (bitcast(cast(bitcast))) pattern,</span></div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;<span class="comment">/// endianness will impact which end of the vector that is extended or</span></div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;<span class="comment">/// truncated.</span></div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;<span class="comment">/// A vector is always stored with index 0 at the lowest address, which</span></div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;<span class="comment">/// corresponds to the most significant bits for a big endian stored integer and</span></div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;<span class="comment">/// the least significant bits for little endian. A trunc/zext of an integer</span></div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;<span class="comment">/// impacts the big end of the integer. Thus, we need to add/remove elements at</span></div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;<span class="comment">/// the front of the vector for big endian targets, and the back of the vector</span></div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;<span class="comment">/// for little endian targets.</span></div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;<span class="comment">/// Try to replace it with a shuffle (and vector/vector bitcast) if possible.</span></div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;<span class="comment">/// The source and destination vector types may have different element types.</span></div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *</div>
<div class="line"><a name="l02153"></a><span class="lineno"><a class="line" href="InstCombineCasts_8cpp.html#aeae569e7fa3c87e7e39d5b5b04336464"> 2153</a></span>&#160;<a class="code" href="InstCombineCasts_8cpp.html#aeae569e7fa3c87e7e39d5b5b04336464">optimizeVectorResizeWithIntegerBitCasts</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *InVal, <a class="code" href="classllvm_1_1VectorType.html">VectorType</a> *DestTy,</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;                                        <a class="code" href="classllvm_1_1InstCombinerImpl.html">InstCombinerImpl</a> &amp;IC) {</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;  <span class="comment">// We can only do this optimization if the output is a multiple of the input</span></div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;  <span class="comment">// element size, or the input is a multiple of the output element size.</span></div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;  <span class="comment">// Convert the input type to have the same element type as the output.</span></div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;  <a class="code" href="classllvm_1_1VectorType.html">VectorType</a> *SrcTy = cast&lt;VectorType&gt;(InVal-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160; </div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;  <span class="keywordflow">if</span> (SrcTy-&gt;<a class="code" href="classllvm_1_1VectorType.html#a12e23c3d619db313388fe11dc76eb23f">getElementType</a>() != DestTy-&gt;<a class="code" href="classllvm_1_1VectorType.html#a12e23c3d619db313388fe11dc76eb23f">getElementType</a>()) {</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;    <span class="comment">// The input types don&#39;t need to be identical, but for now they must be the</span></div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;    <span class="comment">// same size.  There is no specific reason we couldn&#39;t handle things like</span></div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;    <span class="comment">// &lt;4 x i16&gt; -&gt; &lt;4 x i32&gt; by bitcasting to &lt;2 x i32&gt; but haven&#39;t gotten</span></div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;    <span class="comment">// there yet.</span></div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;    <span class="keywordflow">if</span> (SrcTy-&gt;<a class="code" href="classllvm_1_1VectorType.html#a12e23c3d619db313388fe11dc76eb23f">getElementType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a833daf718a49c5cd637d8c9ddeaebe07">getPrimitiveSizeInBits</a>() !=</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;        DestTy-&gt;<a class="code" href="classllvm_1_1VectorType.html#a12e23c3d619db313388fe11dc76eb23f">getElementType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a833daf718a49c5cd637d8c9ddeaebe07">getPrimitiveSizeInBits</a>())</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160; </div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;    SrcTy =</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;        <a class="code" href="classllvm_1_1FixedVectorType.html#af9a870d5df50fe0133a410b7c9114c80">FixedVectorType::get</a>(DestTy-&gt;<a class="code" href="classllvm_1_1VectorType.html#a12e23c3d619db313388fe11dc76eb23f">getElementType</a>(),</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;                             cast&lt;FixedVectorType&gt;(SrcTy)-&gt;getNumElements());</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;    InVal = IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae1d331bc844ecb92bdeb0b706ae04396">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a06d64f226fabd94d694d6abd82e3c7b3">CreateBitCast</a>(InVal, SrcTy);</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;  }</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160; </div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;  <span class="keywordtype">bool</span> IsBigEndian = IC.<a class="code" href="classllvm_1_1InstCombiner.html#a66eb0dc4cd710cba31cbf66f6c031bfb">getDataLayout</a>().<a class="code" href="classllvm_1_1DataLayout.html#a84c1d72001dd5f34d9a55b3a7bb8a474">isBigEndian</a>();</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;  <span class="keywordtype">unsigned</span> SrcElts = cast&lt;FixedVectorType&gt;(SrcTy)-&gt;getNumElements();</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;  <span class="keywordtype">unsigned</span> DestElts = cast&lt;FixedVectorType&gt;(DestTy)-&gt;getNumElements();</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160; </div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SrcElts != DestElts &amp;&amp; <span class="stringliteral">&quot;Element counts should be different.&quot;</span>);</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160; </div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;  <span class="comment">// Now that the element types match, get the shuffle mask and RHS of the</span></div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;  <span class="comment">// shuffle to use, which depends on whether we&#39;re increasing or decreasing the</span></div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;  <span class="comment">// size of the input.</span></div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;  <span class="keyword">auto</span> ShuffleMaskStorage = llvm::to_vector&lt;16&gt;(llvm::seq&lt;int&gt;(0, SrcElts));</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;int&gt;</a> ShuffleMask;</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>;</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160; </div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;  <span class="keywordflow">if</span> (SrcElts &gt; DestElts) {</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;    <span class="comment">// If we&#39;re shrinking the number of elements (rewriting an integer</span></div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;    <span class="comment">// truncate), just shuffle in the elements corresponding to the least</span></div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;    <span class="comment">// significant bits from the input and use poison as the second shuffle</span></div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;    <span class="comment">// input.</span></div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;    <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a> = <a class="code" href="classllvm_1_1PoisonValue.html#a1bf08613fb664a2e377a9a72c59a6b66">PoisonValue::get</a>(SrcTy);</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;    <span class="comment">// Make sure the shuffle mask selects the &quot;least significant bits&quot; by</span></div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;    <span class="comment">// keeping elements from back of the src vector for big endian, and from the</span></div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;    <span class="comment">// front for little endian.</span></div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;    ShuffleMask = ShuffleMaskStorage;</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;    <span class="keywordflow">if</span> (IsBigEndian)</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;      ShuffleMask = ShuffleMask.<a class="code" href="classllvm_1_1ArrayRef.html#a968dc741b22158310b6f6a6645e29014">take_back</a>(DestElts);</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;      ShuffleMask = ShuffleMask.<a class="code" href="classllvm_1_1ArrayRef.html#a640fb8bb3d3ed856afb1e76b8bcd6e19">take_front</a>(DestElts);</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;    <span class="comment">// If we&#39;re increasing the number of elements (rewriting an integer zext),</span></div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;    <span class="comment">// shuffle in all of the elements from InVal. Fill the rest of the result</span></div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;    <span class="comment">// elements with zeros from a constant zero.</span></div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;    <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a> = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(SrcTy);</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;    <span class="comment">// Use first elt from V2 when indicating zero in the shuffle mask.</span></div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;    <a class="code" href="classuint32__t.html">uint32_t</a> NullElt = SrcElts;</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;    <span class="comment">// Extend with null values in the &quot;most significant bits&quot; by adding elements</span></div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;    <span class="comment">// in front of the src vector for big endian, and at the back for little</span></div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;    <span class="comment">// endian.</span></div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;    <span class="keywordtype">unsigned</span> DeltaElts = DestElts - SrcElts;</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;    <span class="keywordflow">if</span> (IsBigEndian)</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;      ShuffleMaskStorage.insert(ShuffleMaskStorage.begin(), DeltaElts, NullElt);</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;      ShuffleMaskStorage.append(DeltaElts, NullElt);</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;    ShuffleMask = ShuffleMaskStorage;</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;  }</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160; </div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ShuffleVectorInst.html">ShuffleVectorInst</a>(InVal, <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>, ShuffleMask);</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;}</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160; </div>
<div class="line"><a name="l02223"></a><span class="lineno"><a class="line" href="InstCombineCasts_8cpp.html#a8efab72b40fc7836709221d3e97139c6"> 2223</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineCasts_8cpp.html#a8efab72b40fc7836709221d3e97139c6">isMultipleOfTypeSize</a>(<span class="keywordtype">unsigned</span> <a class="code" href="classllvm_1_1Value.html">Value</a>, <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty) {</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1Value.html">Value</a> % Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a833daf718a49c5cd637d8c9ddeaebe07">getPrimitiveSizeInBits</a>() == 0;</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;}</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160; </div>
<div class="line"><a name="l02227"></a><span class="lineno"><a class="line" href="InstCombineCasts_8cpp.html#ac8947451998676abcce5452a1a8f5848"> 2227</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="InstCombineCasts_8cpp.html#ac8947451998676abcce5452a1a8f5848">getTypeSizeIndex</a>(<span class="keywordtype">unsigned</span> <a class="code" href="classllvm_1_1Value.html">Value</a>, <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty) {</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1Value.html">Value</a> / Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a833daf718a49c5cd637d8c9ddeaebe07">getPrimitiveSizeInBits</a>();</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;}</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;<span class="comment">/// V is a value which is inserted into a vector of VecEltTy.</span></div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;<span class="comment">/// Look through the value to see if we can decompose it into</span></div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;<span class="comment">/// insertions into the vector.  See the example in the comment for</span></div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;<span class="comment">/// OptimizeIntegerToVectorInsertions for the pattern this handles.</span></div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;<span class="comment">/// The type of V is always a non-zero multiple of VecEltTy&#39;s size.</span></div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;<span class="comment">/// Shift is the number of bits between the lsb of V and the lsb of</span></div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;<span class="comment">/// the vector.</span></div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;<span class="comment">/// This returns false if the pattern can&#39;t be matched or true if it can,</span></div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;<span class="comment">/// filling in Elements with the elements found here.</span></div>
<div class="line"><a name="l02241"></a><span class="lineno"><a class="line" href="InstCombineCasts_8cpp.html#a01395be91e03a1a4c5fd713885d8327f"> 2241</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineCasts_8cpp.html#a01395be91e03a1a4c5fd713885d8327f">collectInsertionElements</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, <span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>,</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;                                     <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Value *&gt;</a> &amp;Elements,</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;                                     <a class="code" href="classllvm_1_1Type.html">Type</a> *VecEltTy, <span class="keywordtype">bool</span> <a class="code" href="CombinerHelper_8cpp.html#a4743a8a472e0491e534c1efd2935a1a9">isBigEndian</a>) {</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="InstCombineCasts_8cpp.html#a8efab72b40fc7836709221d3e97139c6">isMultipleOfTypeSize</a>(<a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>, VecEltTy) &amp;&amp;</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;         <span class="stringliteral">&quot;Shift should be a multiple of the element type size&quot;</span>);</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160; </div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;  <span class="comment">// Undef values never contribute useful bits to the result.</span></div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;  <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(V)) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160; </div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;  <span class="comment">// If we got down to a value of the right type, we win, try inserting into the</span></div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;  <span class="comment">// right element.</span></div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;  <span class="keywordflow">if</span> (V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() == VecEltTy) {</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;    <span class="comment">// Inserting null doesn&#39;t actually insert any elements.</span></div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;Constant&gt;(V))</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isNullValue())</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160; </div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;    <span class="keywordtype">unsigned</span> ElementIndex = <a class="code" href="InstCombineCasts_8cpp.html#ac8947451998676abcce5452a1a8f5848">getTypeSizeIndex</a>(<a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>, VecEltTy);</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="CombinerHelper_8cpp.html#a4743a8a472e0491e534c1efd2935a1a9">isBigEndian</a>)</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;      ElementIndex = Elements.size() - ElementIndex - 1;</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160; </div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;    <span class="comment">// Fail if multiple elements are inserted into this slot.</span></div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;    <span class="keywordflow">if</span> (Elements[ElementIndex])</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160; </div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;    Elements[ElementIndex] = V;</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;  }</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160; </div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;Constant&gt;(V)) {</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;    <span class="comment">// Figure out the # elements this provides, and bitcast it or slice it up</span></div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;    <span class="comment">// as required.</span></div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;    <span class="keywordtype">unsigned</span> NumElts = <a class="code" href="InstCombineCasts_8cpp.html#ac8947451998676abcce5452a1a8f5848">getTypeSizeIndex</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getType()-&gt;getPrimitiveSizeInBits(),</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;                                        VecEltTy);</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;    <span class="comment">// If the constant is the size of a vector element, we just need to bitcast</span></div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;    <span class="comment">// it to the right type so it gets properly inserted.</span></div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;    <span class="keywordflow">if</span> (NumElts == 1)</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="InstCombineCasts_8cpp.html#a01395be91e03a1a4c5fd713885d8327f">collectInsertionElements</a>(<a class="code" href="classllvm_1_1ConstantExpr.html#ae79d05dd3d0b05e080e08f8c5c33f880">ConstantExpr::getBitCast</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, VecEltTy),</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;                                      <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>, Elements, VecEltTy, <a class="code" href="CombinerHelper_8cpp.html#a4743a8a472e0491e534c1efd2935a1a9">isBigEndian</a>);</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160; </div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;    <span class="comment">// Okay, this is a constant that covers multiple elements.  Slice it up into</span></div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;    <span class="comment">// pieces and insert each element-sized piece into the vector.</span></div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;    <span class="keywordflow">if</span> (!isa&lt;IntegerType&gt;(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getType()))</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;      <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="classllvm_1_1ConstantExpr.html#ae79d05dd3d0b05e080e08f8c5c33f880">ConstantExpr::getBitCast</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(V-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>(),</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;                                       <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getType()-&gt;getPrimitiveSizeInBits()));</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;    <span class="keywordtype">unsigned</span> ElementSize = VecEltTy-&gt;<a class="code" href="classllvm_1_1Type.html#a833daf718a49c5cd637d8c9ddeaebe07">getPrimitiveSizeInBits</a>();</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *ElementIntTy = <a class="code" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getContext(), ElementSize);</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160; </div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != NumElts; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;      <span class="keywordtype">unsigned</span> ShiftI = <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>+<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>*ElementSize;</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Piece = <a class="code" href="classllvm_1_1ConstantExpr.html#aab1f107496b17acc1bc5fdcdb2903b38">ConstantExpr::getLShr</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getType(),</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;                                                                  ShiftI));</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;      Piece = <a class="code" href="classllvm_1_1ConstantExpr.html#af238147cf5453729781a0fcc7322e1c6">ConstantExpr::getTrunc</a>(Piece, ElementIntTy);</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="InstCombineCasts_8cpp.html#a01395be91e03a1a4c5fd713885d8327f">collectInsertionElements</a>(Piece, ShiftI, Elements, VecEltTy,</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;                                    <a class="code" href="CombinerHelper_8cpp.html#a4743a8a472e0491e534c1efd2935a1a9">isBigEndian</a>))</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;    }</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;  }</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160; </div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;  <span class="keywordflow">if</span> (!V-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160; </div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(V);</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode()) {</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;  <span class="keywordflow">default</span>: <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// Unhandled case.</span></div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;  <span class="keywordflow">case</span> Instruction::BitCast:</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0)-&gt;getType()-&gt;isVectorTy())</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="InstCombineCasts_8cpp.html#a01395be91e03a1a4c5fd713885d8327f">collectInsertionElements</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0), <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>, Elements, VecEltTy,</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;                                    <a class="code" href="CombinerHelper_8cpp.html#a4743a8a472e0491e534c1efd2935a1a9">isBigEndian</a>);</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;  <span class="keywordflow">case</span> Instruction::ZExt:</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="InstCombineCasts_8cpp.html#a8efab72b40fc7836709221d3e97139c6">isMultipleOfTypeSize</a>(</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;                          <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0)-&gt;getType()-&gt;getPrimitiveSizeInBits(),</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;                              VecEltTy))</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="InstCombineCasts_8cpp.html#a01395be91e03a1a4c5fd713885d8327f">collectInsertionElements</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0), <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>, Elements, VecEltTy,</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;                                    <a class="code" href="CombinerHelper_8cpp.html#a4743a8a472e0491e534c1efd2935a1a9">isBigEndian</a>);</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;  <span class="keywordflow">case</span> Instruction::Or:</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="InstCombineCasts_8cpp.html#a01395be91e03a1a4c5fd713885d8327f">collectInsertionElements</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0), <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>, Elements, VecEltTy,</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;                                    <a class="code" href="CombinerHelper_8cpp.html#a4743a8a472e0491e534c1efd2935a1a9">isBigEndian</a>) &amp;&amp;</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;           <a class="code" href="InstCombineCasts_8cpp.html#a01395be91e03a1a4c5fd713885d8327f">collectInsertionElements</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1), <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>, Elements, VecEltTy,</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;                                    <a class="code" href="CombinerHelper_8cpp.html#a4743a8a472e0491e534c1efd2935a1a9">isBigEndian</a>);</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;  <span class="keywordflow">case</span> Instruction::Shl: {</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;    <span class="comment">// Must be shifting by a constant that is a multiple of the element size.</span></div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;    <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(1));</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;    <span class="keywordflow">if</span> (!CI) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;    <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a> += CI-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#ac09a21c371a9c535cbc13e8f82503aec">getZExtValue</a>();</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="InstCombineCasts_8cpp.html#a8efab72b40fc7836709221d3e97139c6">isMultipleOfTypeSize</a>(<a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>, VecEltTy)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="InstCombineCasts_8cpp.html#a01395be91e03a1a4c5fd713885d8327f">collectInsertionElements</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(0), <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>, Elements, VecEltTy,</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;                                    <a class="code" href="CombinerHelper_8cpp.html#a4743a8a472e0491e534c1efd2935a1a9">isBigEndian</a>);</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;  }</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160; </div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;  }</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;}</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160; </div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;<span class="comment">/// If the input is an &#39;or&#39; instruction, we may be doing shifts and ors to</span></div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;<span class="comment">/// assemble the elements of the vector manually.</span></div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;<span class="comment">/// Try to rip the code out and replace it with insertelements.  This is to</span></div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;<span class="comment">/// optimize code like this:</span></div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;<span class="comment">///    %tmp37 = bitcast float %inc to i32</span></div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;<span class="comment">///    %tmp38 = zext i32 %tmp37 to i64</span></div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;<span class="comment">///    %tmp31 = bitcast float %inc5 to i32</span></div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;<span class="comment">///    %tmp32 = zext i32 %tmp31 to i64</span></div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;<span class="comment">///    %tmp33 = shl i64 %tmp32, 32</span></div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;<span class="comment">///    %ins35 = or i64 %tmp33, %tmp38</span></div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;<span class="comment">///    %tmp43 = bitcast i64 %ins35 to &lt;2 x float&gt;</span></div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;<span class="comment">/// Into two insertelements that do &quot;buildvector{%inc, %inc5}&quot;.</span></div>
<div class="line"><a name="l02352"></a><span class="lineno"><a class="line" href="InstCombineCasts_8cpp.html#a3ee415805ed8e42dcfc56ec5b615ce99"> 2352</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="InstCombineCasts_8cpp.html#a3ee415805ed8e42dcfc56ec5b615ce99">optimizeIntegerToVectorInsertions</a>(<a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a> &amp;CI,</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;                                                <a class="code" href="classllvm_1_1InstCombinerImpl.html">InstCombinerImpl</a> &amp;IC) {</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;  <span class="keyword">auto</span> *DestVecTy = cast&lt;FixedVectorType&gt;(CI.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *IntInput = CI.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160; </div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value*, 8&gt;</a> Elements(DestVecTy-&gt;getNumElements());</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="InstCombineCasts_8cpp.html#a01395be91e03a1a4c5fd713885d8327f">collectInsertionElements</a>(IntInput, 0, Elements,</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;                                DestVecTy-&gt;getElementType(),</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;                                IC.<a class="code" href="classllvm_1_1InstCombiner.html#a66eb0dc4cd710cba31cbf66f6c031bfb">getDataLayout</a>().<a class="code" href="classllvm_1_1DataLayout.html#a84c1d72001dd5f34d9a55b3a7bb8a474">isBigEndian</a>()))</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160; </div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;  <span class="comment">// If we succeeded, we know that all of the element are specified by Elements</span></div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;  <span class="comment">// or are zero if Elements has a null entry.  Recast this as a set of</span></div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;  <span class="comment">// insertions.</span></div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Result = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(CI.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = Elements.size(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;    <span class="keywordflow">if</span> (!Elements[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]) <span class="keywordflow">continue</span>;  <span class="comment">// Unset element.</span></div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160; </div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;    Result = IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae1d331bc844ecb92bdeb0b706ae04396">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a39b5a72b70df94211893c7fc6bbfe1f5">CreateInsertElement</a>(Result, Elements[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>],</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;                                            IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae1d331bc844ecb92bdeb0b706ae04396">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#ac0e8c554bf1c1e117a74d51df89c137d">getInt32</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>));</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;  }</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160; </div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;  <span class="keywordflow">return</span> Result;</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;}</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;<span class="comment">/// Canonicalize scalar bitcasts of extracted elements into a bitcast of the</span></div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;<span class="comment">/// vector followed by extract element. The backend tends to handle bitcasts of</span></div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;<span class="comment">/// vectors better than bitcasts of scalars because vector registers are</span></div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;<span class="comment">/// usually not type-specific like scalar integer or scalar floating-point.</span></div>
<div class="line"><a name="l02381"></a><span class="lineno"><a class="line" href="InstCombineCasts_8cpp.html#a80c0310e16ef56125c3b7a874d0b2767"> 2381</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineCasts_8cpp.html#a80c0310e16ef56125c3b7a874d0b2767">canonicalizeBitCastExtElt</a>(<a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a> &amp;BitCast,</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;                                              <a class="code" href="classllvm_1_1InstCombinerImpl.html">InstCombinerImpl</a> &amp;IC) {</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *VecOp, *<a class="code" href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a>;</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(BitCast.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0),</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;             <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#adf0290c7c322f0bf8b275d6b26410b52">m_ExtractElt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(VecOp), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>)))))</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160; </div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;  <span class="comment">// The bitcast must be to a vectorizable type, otherwise we can&#39;t make a new</span></div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;  <span class="comment">// type to extract from.</span></div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *DestType = BitCast.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;  <a class="code" href="classllvm_1_1VectorType.html">VectorType</a> *<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07c">VecType</a> = cast&lt;VectorType&gt;(VecOp-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1VectorType.html#a071e25c5c6eae5299b1cdc3350c6d55c">VectorType::isValidElementType</a>(DestType)) {</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;    <span class="keyword">auto</span> *NewVecType = <a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(DestType, <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07c">VecType</a>);</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;    <span class="keyword">auto</span> *NewBC = IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae1d331bc844ecb92bdeb0b706ae04396">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a06d64f226fabd94d694d6abd82e3c7b3">CreateBitCast</a>(VecOp, NewVecType, <span class="stringliteral">&quot;bc&quot;</span>);</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ExtractElementInst.html#a5d496a334eff64bb2873339b54df932a">ExtractElementInst::Create</a>(NewBC, <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>);</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;  }</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160; </div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;  <span class="comment">// Only solve DestType is vector to avoid inverse transform in visitBitCast.</span></div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;  <span class="comment">// bitcast (extractelement &lt;1 x elt&gt;, dest) -&gt; bitcast(&lt;1 x elt&gt;, dest)</span></div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;  <span class="keyword">auto</span> *FixedVType = dyn_cast&lt;FixedVectorType&gt;(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07c">VecType</a>);</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;  <span class="keywordflow">if</span> (DestType-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>() &amp;&amp; FixedVType &amp;&amp; FixedVType-&gt;getNumElements() == 1)</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#a643fe5a9e7042f032dae78109c2b1e72">CastInst::Create</a>(Instruction::BitCast, VecOp, DestType);</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160; </div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;}</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;<span class="comment">/// Change the type of a bitwise logic operation if we can eliminate a bitcast.</span></div>
<div class="line"><a name="l02408"></a><span class="lineno"><a class="line" href="InstCombineCasts_8cpp.html#acf5fb08bdf9cb34b13c3268ae5a4ec47"> 2408</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineCasts_8cpp.html#acf5fb08bdf9cb34b13c3268ae5a4ec47">foldBitCastBitwiseLogic</a>(<a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a> &amp;BitCast,</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;                                            <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *DestTy = BitCast.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;  <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *BO;</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160; </div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(BitCast.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a43ac4fbaaf63a88eb5ac05f6d3e5649c">m_BinOp</a>(BO))) ||</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;      !BO-&gt;<a class="code" href="classllvm_1_1Instruction.html#a2d0036d2d7b30f510927731ba7a4f4b9">isBitwiseLogicOp</a>())</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160; </div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;  <span class="comment">// FIXME: This transform is restricted to vector types to avoid backend</span></div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;  <span class="comment">// problems caused by creating potentially illegal operations. If a fix-up is</span></div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;  <span class="comment">// added to handle that situation, we can remove this check.</span></div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;  <span class="keywordflow">if</span> (!DestTy-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>() || !BO-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>())</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160; </div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;  <span class="keywordflow">if</span> (DestTy-&gt;<a class="code" href="classllvm_1_1Type.html#ad0709baa705ae62c4e09cdd47fb4b420">isFPOrFPVectorTy</a>()) {</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;    <span class="comment">// bitcast(logic(bitcast(X), bitcast(Y))) -&gt; bitcast&#39;(logic(bitcast&#39;(X), Y))</span></div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(BO-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ac0467ca7fad871738b10db95feb40dad">m_BitCast</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)))) &amp;&amp;</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(BO-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ac0467ca7fad871738b10db95feb40dad">m_BitCast</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))))) {</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()-&gt;isFPOrFPVectorTy() &amp;&amp;</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;          <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;getType()-&gt;isIntOrIntVectorTy()) {</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *CastedOp =</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;            <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(BO-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;getType());</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewBO = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(BO-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>(), CastedOp, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#a31d2885660f654b31d8741726c3ea8d9">CastInst::CreateBitOrPointerCast</a>(NewBO, DestTy);</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;      }</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()-&gt;isIntOrIntVectorTy() &amp;&amp;</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;          <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;getType()-&gt;isFPOrFPVectorTy()) {</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *CastedOp =</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;            <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(BO-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1), <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType());</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewBO = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(BO-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>(), CastedOp, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#a31d2885660f654b31d8741726c3ea8d9">CastInst::CreateBitOrPointerCast</a>(NewBO, DestTy);</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;      }</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;    }</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;  }</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160; </div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;  <span class="keywordflow">if</span> (!DestTy-&gt;<a class="code" href="classllvm_1_1Type.html#a34ee40bb2f4f5ece47ef19e5f1f57e3c">isIntOrIntVectorTy</a>())</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160; </div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(BO-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ac0467ca7fad871738b10db95feb40dad">m_BitCast</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)))) &amp;&amp;</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;      <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType() == DestTy &amp;&amp; !isa&lt;Constant&gt;(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)) {</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;    <span class="comment">// bitcast(logic(bitcast(X), Y)) --&gt; logic&#39;(X, bitcast(Y))</span></div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *CastedOp1 = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(BO-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1), DestTy);</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a02ce9966395063ac501ecbc1623deda4">BinaryOperator::Create</a>(BO-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>(), <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, CastedOp1);</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;  }</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160; </div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(BO-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ac0467ca7fad871738b10db95feb40dad">m_BitCast</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)))) &amp;&amp;</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;      <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType() == DestTy &amp;&amp; !isa&lt;Constant&gt;(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)) {</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;    <span class="comment">// bitcast(logic(Y, bitcast(X))) --&gt; logic&#39;(bitcast(Y), X)</span></div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *CastedOp0 = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(BO-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), DestTy);</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a02ce9966395063ac501ecbc1623deda4">BinaryOperator::Create</a>(BO-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>(), CastedOp0, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;  }</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160; </div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;  <span class="comment">// Canonicalize vector bitcasts to come before vector bitwise logic with a</span></div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;  <span class="comment">// constant. This eases recognition of special constants for later ops.</span></div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;  <span class="comment">// Example:</span></div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;  <span class="comment">// icmp u/s (a ^ signmask), (b ^ signmask) --&gt; icmp s/u a, b</span></div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(BO-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))) {</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;    <span class="comment">// bitcast (logic X, C) --&gt; logic (bitcast X, C&#39;)</span></div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *CastedOp0 = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(BO-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), DestTy);</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *CastedC = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, DestTy);</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a02ce9966395063ac501ecbc1623deda4">BinaryOperator::Create</a>(BO-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>(), CastedOp0, CastedC);</div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;  }</div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160; </div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;}</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;<span class="comment">/// Change the type of a select if we can eliminate a bitcast.</span></div>
<div class="line"><a name="l02480"></a><span class="lineno"><a class="line" href="InstCombineCasts_8cpp.html#affc489a864c971a5883ff1df9f7d37ac"> 2480</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineCasts_8cpp.html#affc489a864c971a5883ff1df9f7d37ac">foldBitCastSelect</a>(<a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a> &amp;BitCast,</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;                                      <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, *TVal, *FVal;</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(BitCast.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0),</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;             <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#addb87fe3f509b7803d3f5933ee24b560">m_Select</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(TVal), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(FVal)))))</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160; </div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;  <span class="comment">// A vector select must maintain the same number of elements in its operands.</span></div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *CondTy = <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>-&gt;getType();</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *DestTy = BitCast.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CondVTy = dyn_cast&lt;VectorType&gt;(CondTy))</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;    <span class="keywordflow">if</span> (!DestTy-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>() ||</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;        CondVTy-&gt;getElementCount() !=</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;            cast&lt;VectorType&gt;(DestTy)-&gt;getElementCount())</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160; </div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;  <span class="comment">// FIXME: This transform is restricted from changing the select between</span></div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;  <span class="comment">// scalars and vectors to avoid backend problems caused by creating</span></div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;  <span class="comment">// potentially illegal operations. If a fix-up is added to handle that</span></div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;  <span class="comment">// situation, we can remove this check.</span></div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;  <span class="keywordflow">if</span> (DestTy-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>() != TVal-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>())</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160; </div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;  <span class="keyword">auto</span> *Sel = cast&lt;Instruction&gt;(BitCast.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0));</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(TVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ac0467ca7fad871738b10db95feb40dad">m_BitCast</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)))) &amp;&amp; <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType() == DestTy &amp;&amp;</div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;      !isa&lt;Constant&gt;(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)) {</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;    <span class="comment">// bitcast(select(Cond, bitcast(X), Y)) --&gt; select&#39;(Cond, X, bitcast(Y))</span></div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *CastedVal = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(FVal, DestTy);</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, CastedVal, <span class="stringliteral">&quot;&quot;</span>, <span class="keyword">nullptr</span>, Sel);</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;  }</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160; </div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(FVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ac0467ca7fad871738b10db95feb40dad">m_BitCast</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)))) &amp;&amp; <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType() == DestTy &amp;&amp;</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;      !isa&lt;Constant&gt;(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)) {</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;    <span class="comment">// bitcast(select(Cond, Y, bitcast(X))) --&gt; select&#39;(Cond, bitcast(Y), X)</span></div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *CastedVal = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(TVal, DestTy);</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, CastedVal, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <span class="stringliteral">&quot;&quot;</span>, <span class="keyword">nullptr</span>, Sel);</div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;  }</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160; </div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;}</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;<span class="comment">/// Check if all users of CI are StoreInsts.</span></div>
<div class="line"><a name="l02523"></a><span class="lineno"><a class="line" href="InstCombineCasts_8cpp.html#a24b18f2c77f69e54841c51bb3d31cad2"> 2523</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineCasts_8cpp.html#a24b18f2c77f69e54841c51bb3d31cad2">hasStoreUsersOnly</a>(<a class="code" href="classllvm_1_1CastInst.html">CastInst</a> &amp;CI) {</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : CI.<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>()) {</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;    <span class="keywordflow">if</span> (!isa&lt;StoreInst&gt;(U))</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;  }</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;}</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;<span class="comment">/// This function handles following case</span></div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;<span class="comment">///     A  -&gt;  B    cast</span></div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;<span class="comment">///     PHI</span></div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;<span class="comment">///     B  -&gt;  A    cast</span></div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;<span class="comment">/// All the related PHI nodes can be replaced by new PHI nodes with type A.</span></div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;<span class="comment">/// The uses of \p CI can be changed to the new PHI node corresponding to \p PN.</span></div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InstCombinerImpl::optimizeBitCastFromPhi(<a class="code" href="classllvm_1_1CastInst.html">CastInst</a> &amp;CI,</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;                                                      <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN) {</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;  <span class="comment">// BitCast used by Store can be handled in InstCombineLoadStoreAlloca.cpp.</span></div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="InstCombineCasts_8cpp.html#a24b18f2c77f69e54841c51bb3d31cad2">hasStoreUsersOnly</a>(CI))</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160; </div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Src = CI.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *SrcTy = Src-&gt;getType();         <span class="comment">// Type B</span></div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *DestTy = CI.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();          <span class="comment">// Type A</span></div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160; </div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;PHINode *, 4&gt;</a> PhiWorklist;</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;  <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;PHINode *, 4&gt;</a> OldPhiNodes;</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160; </div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;  <span class="comment">// Find all of the A-&gt;B casts and PHI nodes.</span></div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;  <span class="comment">// We need to inspect all related PHI nodes, but PHIs can be cyclic, so</span></div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;  <span class="comment">// OldPhiNodes is used to track all known PHI nodes, before adding a new</span></div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;  <span class="comment">// PHI to PhiWorklist, it is checked against and added to OldPhiNodes first.</span></div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;  PhiWorklist.push_back(PN);</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;  OldPhiNodes.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(PN);</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;  <span class="keywordflow">while</span> (!PhiWorklist.empty()) {</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;    <span class="keyword">auto</span> *OldPN = PhiWorklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *IncValue : OldPN-&gt;incoming_values()) {</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;      <span class="keywordflow">if</span> (isa&lt;Constant&gt;(IncValue))</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160; </div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *LI = dyn_cast&lt;LoadInst&gt;(IncValue)) {</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;        <span class="comment">// If there is a sequence of one or more load instructions, each loaded</span></div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;        <span class="comment">// value is used as address of later load instruction, bitcast is</span></div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;        <span class="comment">// necessary to change the value type, don&#39;t optimize it. For</span></div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;        <span class="comment">// simplicity we give up if the load address comes from another load.</span></div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a> = LI-&gt;getOperand(0);</div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a> == &amp;CI || isa&lt;LoadInst&gt;(<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>))</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;        <span class="comment">// Don&#39;t tranform &quot;load &lt;256 x i32&gt;, &lt;256 x i32&gt;*&quot; to</span></div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;        <span class="comment">// &quot;load x86_amx, x86_amx*&quot;, because x86_amx* is invalid.</span></div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;        <span class="comment">// TODO: Remove this check when bitcast between vector and x86_amx</span></div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;        <span class="comment">// is replaced with a specific intrinsic.</span></div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;        <span class="keywordflow">if</span> (DestTy-&gt;<a class="code" href="classllvm_1_1Type.html#ab549082d9dfb91ec9a8dc06601d54855">isX86_AMXTy</a>())</div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;        <span class="keywordflow">if</span> (LI-&gt;hasOneUse() &amp;&amp; LI-&gt;isSimple())</div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;        <span class="comment">// If a LoadInst has more than one use, changing the type of loaded</span></div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;        <span class="comment">// value may create another bitcast.</span></div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;      }</div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160; </div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *PNode = dyn_cast&lt;PHINode&gt;(IncValue)) {</div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;        <span class="keywordflow">if</span> (OldPhiNodes.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(PNode))</div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;          PhiWorklist.push_back(PNode);</div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;      }</div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160; </div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;      <span class="keyword">auto</span> *BCI = dyn_cast&lt;BitCastInst&gt;(IncValue);</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;      <span class="comment">// We can&#39;t handle other instructions.</span></div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;      <span class="keywordflow">if</span> (!BCI)</div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160; </div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;      <span class="comment">// Verify it&#39;s a A-&gt;B cast.</span></div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *TyA = BCI-&gt;getOperand(0)-&gt;getType();</div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *TyB = BCI-&gt;getType();</div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;      <span class="keywordflow">if</span> (TyA != DestTy || TyB != SrcTy)</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;    }</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;  }</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160; </div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;  <span class="comment">// Check that each user of each old PHI node is something that we can</span></div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;  <span class="comment">// rewrite, so that all of the old PHI nodes can be cleaned up afterwards.</span></div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *OldPN : OldPhiNodes) {</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *V : OldPN-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>()) {</div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;StoreInst&gt;(V)) {</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;isSimple() || <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getOperand(0) != OldPN)</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *BCI = dyn_cast&lt;BitCastInst&gt;(V)) {</div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;        <span class="comment">// Verify it&#39;s a B-&gt;A cast.</span></div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;        <a class="code" href="classllvm_1_1Type.html">Type</a> *TyB = BCI-&gt;getOperand(0)-&gt;getType();</div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;        <a class="code" href="classllvm_1_1Type.html">Type</a> *TyA = BCI-&gt;getType();</div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;        <span class="keywordflow">if</span> (TyA != DestTy || TyB != SrcTy)</div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a> = dyn_cast&lt;PHINode&gt;(V)) {</div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;        <span class="comment">// As long as the user is another old PHI node, then even if we don&#39;t</span></div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;        <span class="comment">// rewrite it, the PHI web we&#39;re considering won&#39;t have any users</span></div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;        <span class="comment">// outside itself, so it&#39;ll be dead.</span></div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;        <span class="keywordflow">if</span> (!OldPhiNodes.contains(<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>))</div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;      }</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;    }</div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;  }</div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160; </div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;  <span class="comment">// For each old PHI node, create a corresponding new PHI node with a type A.</span></div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;  <a class="code" href="classllvm_1_1SmallDenseMap.html">SmallDenseMap&lt;PHINode *, PHINode *&gt;</a> NewPNodes;</div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *OldPN : OldPhiNodes) {</div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(OldPN);</div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *NewPN = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreatePHI(DestTy, OldPN-&gt;getNumOperands());</div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;    NewPNodes[OldPN] = NewPN;</div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;  }</div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160; </div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;  <span class="comment">// Fill in the operands of new PHI nodes.</span></div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *OldPN : OldPhiNodes) {</div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *NewPN = NewPNodes[OldPN];</div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = OldPN-&gt;getNumOperands(); <a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>) {</div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *V = OldPN-&gt;getOperand(<a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>);</div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NewV = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;Constant&gt;(V)) {</div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;        NewV = <a class="code" href="classllvm_1_1ConstantExpr.html#ae79d05dd3d0b05e080e08f8c5c33f880">ConstantExpr::getBitCast</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, DestTy);</div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *LI = dyn_cast&lt;LoadInst&gt;(V)) {</div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;        <span class="comment">// Explicitly perform load combine to make sure no opposing transform</span></div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;        <span class="comment">// can remove the bitcast in the meantime and trigger an infinite loop.</span></div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(LI);</div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;        NewV = combineLoadToNewType(*LI, DestTy);</div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;        <span class="comment">// Remove the old load and its use in the old phi, which itself becomes</span></div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;        <span class="comment">// dead once the whole transform finishes.</span></div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;        replaceInstUsesWith(*LI, <a class="code" href="classllvm_1_1PoisonValue.html#a1bf08613fb664a2e377a9a72c59a6b66">PoisonValue::get</a>(LI-&gt;getType()));</div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;        eraseInstFromFunction(*LI);</div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *BCI = dyn_cast&lt;BitCastInst&gt;(V)) {</div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;        NewV = BCI-&gt;getOperand(0);</div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *PrevPN = dyn_cast&lt;PHINode&gt;(V)) {</div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;        NewV = NewPNodes[PrevPN];</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;      }</div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NewV);</div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;      NewPN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(NewV, OldPN-&gt;getIncomingBlock(<a class="code" href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a>));</div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;    }</div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;  }</div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160; </div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;  <span class="comment">// Traverse all accumulated PHI nodes and process its users,</span></div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;  <span class="comment">// which are Stores and BitcCasts. Without this processing</span></div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;  <span class="comment">// NewPHI nodes could be replicated and could lead to extra</span></div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;  <span class="comment">// moves generated after DeSSA.</span></div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;  <span class="comment">// If there is a store with type B, change it to type A.</span></div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160; </div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160; </div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;  <span class="comment">// Replace users of BitCast B-&gt;A with NewPHI. These will help</span></div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;  <span class="comment">// later to get rid off a closure formed by OldPHI nodes.</span></div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *RetVal = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *OldPN : OldPhiNodes) {</div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *NewPN = NewPNodes[OldPN];</div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *V : <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">make_early_inc_range</a>(OldPN-&gt;users())) {</div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;StoreInst&gt;(V)) {</div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;isSimple() &amp;&amp; <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;getOperand(0) == OldPN);</div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>);</div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;        <span class="keyword">auto</span> *NewBC =</div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;          cast&lt;BitCastInst&gt;(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(NewPN, SrcTy));</div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;        <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;setOperand(0, NewBC);</div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;        Worklist.push(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>);</div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="InstCombineCasts_8cpp.html#a24b18f2c77f69e54841c51bb3d31cad2">hasStoreUsersOnly</a>(*NewBC));</div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;      }</div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *BCI = dyn_cast&lt;BitCastInst&gt;(V)) {</div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;        <a class="code" href="classllvm_1_1Type.html">Type</a> *TyB = BCI-&gt;getOperand(0)-&gt;getType();</div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;        <a class="code" href="classllvm_1_1Type.html">Type</a> *TyA = BCI-&gt;getType();</div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TyA == DestTy &amp;&amp; TyB == SrcTy);</div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;        (void) TyA;</div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;        (void) TyB;</div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;        <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = replaceInstUsesWith(*BCI, NewPN);</div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;        <span class="keywordflow">if</span> (BCI == &amp;CI)</div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;          RetVal = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a> = dyn_cast&lt;PHINode&gt;(V)) {</div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(OldPhiNodes.contains(<a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>));</div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;        (void) <a class="code" href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a>;</div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;        <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;all uses should be handled&quot;</span>);</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;      }</div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;    }</div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;  }</div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160; </div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;  <span class="keywordflow">return</span> RetVal;</div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;}</div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160; </div>
<div class="line"><a name="l02707"></a><span class="lineno"><a class="line" href="InstCombineCasts_8cpp.html#a38233aa2f7bdb00261cbc773b5da5a09"> 2707</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineCasts_8cpp.html#a38233aa2f7bdb00261cbc773b5da5a09">convertBitCastToGEP</a>(<a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a> &amp;CI, <a class="code" href="classllvm_1_1IRBuilderBase.html">IRBuilderBase</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>,</div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;                                        <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>) {</div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Src = CI.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;  <a class="code" href="classllvm_1_1PointerType.html">PointerType</a> *SrcPTy = cast&lt;PointerType&gt;(Src-&gt;getType());</div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;  <a class="code" href="classllvm_1_1PointerType.html">PointerType</a> *DstPTy = cast&lt;PointerType&gt;(CI.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160; </div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;  <span class="comment">// Bitcasts involving opaque pointers cannot be converted into a GEP.</span></div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;  <span class="keywordflow">if</span> (SrcPTy-&gt;<a class="code" href="classllvm_1_1PointerType.html#a92c4ce3a0a429509bc46cc3875a48c24">isOpaque</a>() || DstPTy-&gt;<a class="code" href="classllvm_1_1PointerType.html#a92c4ce3a0a429509bc46cc3875a48c24">isOpaque</a>())</div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160; </div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *DstElTy = DstPTy-&gt;<a class="code" href="classllvm_1_1Type.html#abceff71202e0269065cf32a2f750a9be">getNonOpaquePointerElementType</a>();</div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *SrcElTy = SrcPTy-&gt;<a class="code" href="classllvm_1_1Type.html#abceff71202e0269065cf32a2f750a9be">getNonOpaquePointerElementType</a>();</div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160; </div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;  <span class="comment">// When the type pointed to is not sized the cast cannot be</span></div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;  <span class="comment">// turned into a gep.</span></div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;  <span class="keywordflow">if</span> (!SrcElTy-&gt;<a class="code" href="classllvm_1_1Type.html#a8ad67a33bae235fe3cca1c3e5a91ed2d">isSized</a>())</div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160; </div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;  <span class="comment">// If the source and destination are pointers, and this cast is equivalent</span></div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;  <span class="comment">// to a getelementptr X, 0, 0, 0...  turn it into the appropriate gep.</span></div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;  <span class="comment">// This can enhance SROA and other transforms that want type-safe pointers.</span></div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;  <span class="keywordtype">unsigned</span> NumZeros = 0;</div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;  <span class="keywordflow">while</span> (SrcElTy &amp;&amp; SrcElTy != DstElTy) {</div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;    SrcElTy = <a class="code" href="classllvm_1_1GetElementPtrInst.html#a056eabb719f475aa4c5a7e2ba11973b9">GetElementPtrInst::getTypeAtIndex</a>(SrcElTy, (<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a>)0);</div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;    ++NumZeros;</div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;  }</div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160; </div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;  <span class="comment">// If we found a path from the src to dest, create the getelementptr now.</span></div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;  <span class="keywordflow">if</span> (SrcElTy == DstElTy) {</div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 8&gt;</a> Idxs(NumZeros + 1, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt32(0));</div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;    <a class="code" href="classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a> = <a class="code" href="classllvm_1_1GetElementPtrInst.html#a74c47d18ecd4ca3399785e6ae07134dc">GetElementPtrInst::Create</a>(</div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;        SrcPTy-&gt;<a class="code" href="classllvm_1_1Type.html#abceff71202e0269065cf32a2f750a9be">getNonOpaquePointerElementType</a>(), Src, Idxs);</div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160; </div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;    <span class="comment">// If the source pointer is dereferenceable, then assume it points to an</span></div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;    <span class="comment">// allocated object and apply &quot;inbounds&quot; to the GEP.</span></div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;    <span class="keywordtype">bool</span> CanBeNull, CanBeFreed;</div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;    <span class="keywordflow">if</span> (Src-&gt;getPointerDereferenceableBytes(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, CanBeNull, CanBeFreed)) {</div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;      <span class="comment">// In a non-default address space (not 0), a null pointer can not be</span></div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;      <span class="comment">// assumed inbounds, so ignore that case (dereferenceable_or_null).</span></div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;      <span class="comment">// The reason is that &#39;null&#39; is not treated differently in these address</span></div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;      <span class="comment">// spaces, and we consequently ignore the &#39;gep inbounds&#39; special case</span></div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;      <span class="comment">// for &#39;null&#39; which allows &#39;inbounds&#39; on &#39;null&#39; if the indices are</span></div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;      <span class="comment">// zeros.</span></div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;      <span class="keywordflow">if</span> (SrcPTy-&gt;<a class="code" href="classllvm_1_1PointerType.html#af8aeced5e71d2589fa3e9791043af5cb">getAddressSpace</a>() == 0 || !CanBeNull)</div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;        <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;setIsInBounds();</div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;    }</div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>;</div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;  }</div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;}</div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160; </div>
<div class="line"><a name="l02758"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a89ab5eaec7693029761c8d0b3ded3b00"> 2758</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a89ab5eaec7693029761c8d0b3ded3b00">InstCombinerImpl::visitBitCast</a>(<a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a> &amp;CI) {</div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;  <span class="comment">// If the operands are integer typed then apply the integer transforms,</span></div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;  <span class="comment">// otherwise just apply the common ones.</span></div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Src = CI.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *SrcTy = Src-&gt;getType();</div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *DestTy = CI.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160; </div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;  <span class="comment">// Get rid of casts from one type to the same type. These are useless and can</span></div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;  <span class="comment">// be replaced by the operand.</span></div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;  <span class="keywordflow">if</span> (DestTy == Src-&gt;getType())</div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(CI, Src);</div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160; </div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;  <span class="keywordflow">if</span> (isa&lt;PointerType&gt;(SrcTy) &amp;&amp; isa&lt;PointerType&gt;(DestTy)) {</div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;    <span class="comment">// If we are casting a alloca to a pointer to a type of the same</span></div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;    <span class="comment">// size, rewrite the allocation instruction to allocate the &quot;right&quot; type.</span></div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;    <span class="comment">// There is no need to modify malloc calls because it is their bitcast that</span></div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;    <span class="comment">// needs to be cleaned up.</span></div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *AI = dyn_cast&lt;AllocaInst&gt;(Src))</div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *V = PromoteCastOfAllocation(CI, *AI))</div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;        <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160; </div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="InstCombineCasts_8cpp.html#a38233aa2f7bdb00261cbc773b5da5a09">convertBitCastToGEP</a>(CI, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>))</div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;  }</div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160; </div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1FixedVectorType.html">FixedVectorType</a> *DestVTy = dyn_cast&lt;FixedVectorType&gt;(DestTy)) {</div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;    <span class="comment">// Beware: messing with this target-specific oddity may cause trouble.</span></div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;    <span class="keywordflow">if</span> (DestVTy-&gt;getNumElements() == 1 &amp;&amp; SrcTy-&gt;<a class="code" href="classllvm_1_1Type.html#a62cbe7441d9ebcac7e1a216bbf696550">isX86_MMXTy</a>()) {</div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Elem = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(Src, DestVTy-&gt;getElementType());</div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1InsertElementInst.html#a44cefc7b60337e7e14d20e843c74e534">InsertElementInst::Create</a>(<a class="code" href="classllvm_1_1PoisonValue.html#a1bf08613fb664a2e377a9a72c59a6b66">PoisonValue::get</a>(DestTy), Elem,</div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;                     <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(CI.<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>())));</div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;    }</div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160; </div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;    <span class="keywordflow">if</span> (isa&lt;IntegerType&gt;(SrcTy)) {</div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;      <span class="comment">// If this is a cast from an integer to vector, check to see if the input</span></div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;      <span class="comment">// is a trunc or zext of a bitcast from vector.  If so, we can replace all</span></div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;      <span class="comment">// the casts with a shuffle and (potentially) a bitcast.</span></div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;      <span class="keywordflow">if</span> (isa&lt;TruncInst&gt;(Src) || isa&lt;ZExtInst&gt;(Src)) {</div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;        <a class="code" href="classllvm_1_1CastInst.html">CastInst</a> *SrcCast = cast&lt;CastInst&gt;(Src);</div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a> *BCIn = dyn_cast&lt;BitCastInst&gt;(SrcCast-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)))</div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;          <span class="keywordflow">if</span> (isa&lt;VectorType&gt;(BCIn-&gt;getOperand(0)-&gt;getType()))</div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="InstCombineCasts_8cpp.html#aeae569e7fa3c87e7e39d5b5b04336464">optimizeVectorResizeWithIntegerBitCasts</a>(</div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;                    BCIn-&gt;getOperand(0), cast&lt;VectorType&gt;(DestTy), *<span class="keyword">this</span>))</div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;              <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;      }</div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160; </div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;      <span class="comment">// If the input is an &#39;or&#39; instruction, we may be doing shifts and ors to</span></div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;      <span class="comment">// assemble the elements of the vector manually.  Try to rip the code out</span></div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;      <span class="comment">// and replace it with insertelements.</span></div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="InstCombineCasts_8cpp.html#a3ee415805ed8e42dcfc56ec5b615ce99">optimizeIntegerToVectorInsertions</a>(CI, *<span class="keyword">this</span>))</div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;        <span class="keywordflow">return</span> replaceInstUsesWith(CI, V);</div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;    }</div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;  }</div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160; </div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1FixedVectorType.html">FixedVectorType</a> *SrcVTy = dyn_cast&lt;FixedVectorType&gt;(SrcTy)) {</div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;    <span class="keywordflow">if</span> (SrcVTy-&gt;getNumElements() == 1) {</div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;      <span class="comment">// If our destination is not a vector, then make this a straight</span></div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;      <span class="comment">// scalar-scalar cast.</span></div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;      <span class="keywordflow">if</span> (!DestTy-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>()) {</div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Elem =</div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;          <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateExtractElement(Src,</div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;                     <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(CI.<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>())));</div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#a643fe5a9e7042f032dae78109c2b1e72">CastInst::Create</a>(Instruction::BitCast, Elem, DestTy);</div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;      }</div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160; </div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;      <span class="comment">// Otherwise, see if our source is an insert. If so, then use the scalar</span></div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;      <span class="comment">// component directly:</span></div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;      <span class="comment">// bitcast (inselt &lt;1 x elt&gt; V, X, 0) to &lt;n x m&gt; --&gt; bitcast X to &lt;n x m&gt;</span></div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *InsElt = dyn_cast&lt;InsertElementInst&gt;(Src))</div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a>(InsElt-&gt;getOperand(1), DestTy);</div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;    }</div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160; </div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;    <span class="comment">// Convert an artificial vector insert into more analyzable bitwise logic.</span></div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> = DestTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> IndexC;</div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Src, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a9cae528bdb66086aa6c06da36fc6fa24">m_InsertElt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ac0467ca7fad871738b10db95feb40dad">m_BitCast</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))),</div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;                                        <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">m_ConstantInt</a>(IndexC)))) &amp;&amp;</div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;        DestTy-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>() &amp;&amp; <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType() == DestTy &amp;&amp;</div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;        <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;getType()-&gt;isIntegerTy() &amp;&amp; isDesirableIntType(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>)) {</div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;      <span class="comment">// Adjust for big endian - the LSBs are at the high index.</span></div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.isBigEndian())</div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;        IndexC = SrcVTy-&gt;getNumElements() - 1 - IndexC;</div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160; </div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;      <span class="comment">// We only handle (endian-normalized) insert to index 0. Any other insert</span></div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;      <span class="comment">// would require a left-shift, so that is an extra instruction.</span></div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;      <span class="keywordflow">if</span> (IndexC == 0) {</div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;        <span class="comment">// bitcast (inselt (bitcast X), Y, 0) --&gt; or (and X, MaskC), (zext Y)</span></div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;        <span class="keywordtype">unsigned</span> EltWidth = <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;getType()-&gt;getScalarSizeInBits();</div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;        <a class="code" href="classllvm_1_1APInt.html">APInt</a> MaskC = <a class="code" href="classllvm_1_1APInt.html#adcb96bd09d7c75c7669fa5f9d1190899">APInt::getHighBitsSet</a>(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>, <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - EltWidth);</div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *AndX = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, MaskC);</div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *ZextY = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateZExt(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, DestTy);</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;        <span class="keywordflow">return</span> BinaryOperator::CreateOr(AndX, ZextY);</div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;      }</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;    }</div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;  }</div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160; </div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Shuf = dyn_cast&lt;ShuffleVectorInst&gt;(Src)) {</div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;    <span class="comment">// Okay, we have (bitcast (shuffle ..)).  Check to see if this is</span></div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;    <span class="comment">// a bitcast to a vector with the same # elts.</span></div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *ShufOp0 = Shuf-&gt;getOperand(0);</div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *ShufOp1 = Shuf-&gt;getOperand(1);</div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;    <span class="keyword">auto</span> ShufElts = cast&lt;VectorType&gt;(Shuf-&gt;getType())-&gt;getElementCount();</div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;    <span class="keyword">auto</span> SrcVecElts = cast&lt;VectorType&gt;(ShufOp0-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())-&gt;getElementCount();</div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;    <span class="keywordflow">if</span> (Shuf-&gt;hasOneUse() &amp;&amp; DestTy-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>() &amp;&amp;</div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;        cast&lt;VectorType&gt;(DestTy)-&gt;getElementCount() == ShufElts &amp;&amp;</div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;        ShufElts == SrcVecElts) {</div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;      <a class="code" href="classllvm_1_1BitCastInst.html">BitCastInst</a> *Tmp;</div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;      <span class="comment">// If either of the operands is a cast from CI.getType(), then</span></div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;      <span class="comment">// evaluating the shuffle in the casted destination&#39;s type will allow</span></div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;      <span class="comment">// us to eliminate at least one cast.</span></div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;      <span class="keywordflow">if</span> (((Tmp = dyn_cast&lt;BitCastInst&gt;(ShufOp0)) &amp;&amp;</div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;           Tmp-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() == DestTy) ||</div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;          ((Tmp = dyn_cast&lt;BitCastInst&gt;(ShufOp1)) &amp;&amp;</div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;           Tmp-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() == DestTy)) {</div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(ShufOp0, DestTy);</div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(ShufOp1, DestTy);</div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;        <span class="comment">// Return a new shuffle vector.  Use the same element ID&#39;s, as we</span></div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;        <span class="comment">// know the vector types match #elts.</span></div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ShuffleVectorInst.html">ShuffleVectorInst</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, Shuf-&gt;getShuffleMask());</div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;      }</div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;    }</div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160; </div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;    <span class="comment">// A bitcasted-to-scalar and byte/bit reversing shuffle is better recognized</span></div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;    <span class="comment">// as a byte/bit swap:</span></div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;    <span class="comment">// bitcast &lt;N x i8&gt; (shuf X, undef, &lt;N, N-1,...0&gt;) -&gt; bswap (bitcast X)</span></div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;    <span class="comment">// bitcast &lt;N x i1&gt; (shuf X, undef, &lt;N, N-1,...0&gt;) -&gt; bitreverse (bitcast X)</span></div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;    <span class="keywordflow">if</span> (DestTy-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>() &amp;&amp; ShufElts.getKnownMinValue() % 2 == 0 &amp;&amp;</div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;        Shuf-&gt;hasOneUse() &amp;&amp; Shuf-&gt;isReverse()) {</div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;      <span class="keywordtype">unsigned</span> IntrinsicNum = 0;</div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.isLegalInteger(DestTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>()) &amp;&amp;</div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;          SrcTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>() == 8) {</div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;        IntrinsicNum = Intrinsic::bswap;</div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (SrcTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>() == 1) {</div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;        IntrinsicNum = Intrinsic::bitreverse;</div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;      }</div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;      <span class="keywordflow">if</span> (IntrinsicNum != 0) {</div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ShufOp0-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() == SrcTy &amp;&amp; <span class="stringliteral">&quot;Unexpected shuffle mask&quot;</span>);</div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(ShufOp1, <a class="code" href="namespacellvm_1_1PatternMatch.html#adea6dc2e42baa345b97be48b0370313d">m_Undef</a>()) &amp;&amp; <span class="stringliteral">&quot;Unexpected shuffle op&quot;</span>);</div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;        <a class="code" href="classllvm_1_1Function.html">Function</a> *BswapOrBitreverse =</div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;            <a class="code" href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">Intrinsic::getDeclaration</a>(CI.<a class="code" href="classllvm_1_1Instruction.html#a4ba3a5be6c0e9b9e8a525de055836733">getModule</a>(), IntrinsicNum, DestTy);</div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *ScalarX = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(ShufOp0, DestTy);</div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">CallInst::Create</a>(BswapOrBitreverse, {ScalarX});</div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;      }</div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;    }</div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;  }</div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160; </div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;  <span class="comment">// Handle the A-&gt;B-&gt;A cast, and there is an intervening PHI node.</span></div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast&lt;PHINode&gt;(Src))</div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = optimizeBitCastFromPhi(CI, PN))</div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160; </div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="InstCombineCasts_8cpp.html#a80c0310e16ef56125c3b7a874d0b2767">canonicalizeBitCastExtElt</a>(CI, *<span class="keyword">this</span>))</div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160; </div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="InstCombineCasts_8cpp.html#acf5fb08bdf9cb34b13c3268ae5a4ec47">foldBitCastBitwiseLogic</a>(CI, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160; </div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="InstCombineCasts_8cpp.html#affc489a864c971a5883ff1df9f7d37ac">foldBitCastSelect</a>(CI, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160; </div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;  <span class="keywordflow">if</span> (SrcTy-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>())</div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;    <span class="keywordflow">return</span> commonPointerCastTransforms(CI);</div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;  <span class="keywordflow">return</span> commonCastTransforms(CI);</div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;}</div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160; </div>
<div class="line"><a name="l02924"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a27c23cfa31727788250c1b6bb11e70e9"> 2924</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a27c23cfa31727788250c1b6bb11e70e9">InstCombinerImpl::visitAddrSpaceCast</a>(<a class="code" href="classllvm_1_1AddrSpaceCastInst.html">AddrSpaceCastInst</a> &amp;CI) {</div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;  <span class="comment">// If the destination pointer element type is not the same as the source&#39;s</span></div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;  <span class="comment">// first do a bitcast to the destination type, and then the addrspacecast.</span></div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;  <span class="comment">// This allows the cast to be exposed to other transforms.</span></div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Src = CI.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;  <a class="code" href="classllvm_1_1PointerType.html">PointerType</a> *SrcTy = cast&lt;PointerType&gt;(Src-&gt;getType()-&gt;getScalarType());</div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;  <a class="code" href="classllvm_1_1PointerType.html">PointerType</a> *DestTy = cast&lt;PointerType&gt;(CI.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a4abb39a66573f61fda80469faa5d861d">getScalarType</a>());</div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160; </div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;  <span class="keywordflow">if</span> (!SrcTy-&gt;<a class="code" href="classllvm_1_1PointerType.html#a755dc3319157403bd85c2d3e97041b5c">hasSameElementTypeAs</a>(DestTy)) {</div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *MidTy =</div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;        <a class="code" href="classllvm_1_1PointerType.html#ac0f741735997264d3018e30ce2a6b2d3">PointerType::getWithSamePointeeType</a>(DestTy, SrcTy-&gt;<a class="code" href="classllvm_1_1PointerType.html#af8aeced5e71d2589fa3e9791043af5cb">getAddressSpace</a>());</div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;    <span class="comment">// Handle vectors of pointers.</span></div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1VectorType.html">VectorType</a> *VT = dyn_cast&lt;VectorType&gt;(CI.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()))</div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;      MidTy = <a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(MidTy, VT-&gt;getElementCount());</div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160; </div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewBitCast = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(Src, MidTy);</div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1AddrSpaceCastInst.html">AddrSpaceCastInst</a>(NewBitCast, CI.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;  }</div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160; </div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;  <span class="keywordflow">return</span> commonPointerCastTransforms(CI);</div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="alib_2Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00029">README.txt:29</a></div></div>
<div class="ttc" id="aInstCombineCasts_8cpp_html_aa62178ace163b6ca749c39196edc4147"><div class="ttname"><a href="InstCombineCasts_8cpp.html#aa62178ace163b6ca749c39196edc4147">shrinkInsertElt</a></div><div class="ttdeci">static Instruction * shrinkInsertElt(CastInst &amp;Trunc, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdoc">Try to narrow the width of an insert element.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l00784">InstCombineCasts.cpp:784</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a8ad67a33bae235fe3cca1c3e5a91ed2d"><div class="ttname"><a href="classllvm_1_1Type.html#a8ad67a33bae235fe3cca1c3e5a91ed2d">llvm::Type::isSized</a></div><div class="ttdeci">bool isSized(SmallPtrSetImpl&lt; Type * &gt; *Visited=nullptr) const</div><div class="ttdoc">Return true if it makes sense to take the size of this type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00295">Type.h:295</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a3c0817ca836dbd28642d4f5b2072705a"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a3c0817ca836dbd28642d4f5b2072705a">llvm::InstCombinerImpl::visitFPToSI</a></div><div class="ttdeci">Instruction * visitFPToSI(FPToSIInst &amp;FI)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l02035">InstCombineCasts.cpp:2035</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a4ba3a5be6c0e9b9e8a525de055836733"><div class="ttname"><a href="classllvm_1_1Instruction.html#a4ba3a5be6c0e9b9e8a525de055836733">llvm::Instruction::getModule</a></div><div class="ttdeci">const Module * getModule() const</div><div class="ttdoc">Return the module owning the function this instruction belongs to or nullptr it the function does not...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00070">Instruction.cpp:70</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">llvm::CmpInst::ICMP_EQ</a></div><div class="ttdeci">@ ICMP_EQ</div><div class="ttdoc">equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00739">InstrTypes.h:739</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac0be0d93ccd89dac00411b3a5a8bef87"><div class="ttname"><a href="namespacellvm.html#ac0be0d93ccd89dac00411b3a5a8bef87">llvm::isKnownNonNegative</a></div><div class="ttdeci">bool isKnownNonNegative(const Value *V, const DataLayout &amp;DL, unsigned Depth=0, AssumptionCache *AC=nullptr, const Instruction *CxtI=nullptr, const DominatorTree *DT=nullptr, bool UseInstrInfo=true)</div><div class="ttdoc">Returns true if the give value is known to be non-negative.</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l00320">ValueTracking.cpp:320</a></div></div>
<div class="ttc" id="anamespacellvm_html_aedbf3998b4ff72347a45cb4169d120db"><div class="ttname"><a href="namespacellvm.html#aedbf3998b4ff72347a45cb4169d120db">llvm::MaskedValueIsZero</a></div><div class="ttdeci">bool MaskedValueIsZero(const Value *V, const APInt &amp;Mask, const DataLayout &amp;DL, unsigned Depth=0, AssumptionCache *AC=nullptr, const Instruction *CxtI=nullptr, const DominatorTree *DT=nullptr, bool UseInstrInfo=true)</div><div class="ttdoc">Return true if 'V &amp; Mask' is known to be zero.</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l00364">ValueTracking.cpp:364</a></div></div>
<div class="ttc" id="astructllvm_1_1PatternMatch_1_1m__Mask_html"><div class="ttname"><a href="structllvm_1_1PatternMatch_1_1m__Mask.html">llvm::PatternMatch::m_Mask</a></div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01514">PatternMatch.h:1514</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_a1f0ff79b64a40d383b891f1baba89c6b"><div class="ttname"><a href="classllvm_1_1PHINode.html#a1f0ff79b64a40d383b891f1baba89c6b">llvm::PHINode::incoming_values</a></div><div class="ttdeci">op_range incoming_values()</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02784">Instructions.h:2784</a></div></div>
<div class="ttc" id="aclassllvm_1_1DataLayout_html"><div class="ttname"><a href="classllvm_1_1DataLayout.html">llvm::DataLayout</a></div><div class="ttdoc">A parsed version of the target data layout string in and methods for querying it.</div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00110">DataLayout.h:110</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a2d0036d2d7b30f510927731ba7a4f4b9"><div class="ttname"><a href="classllvm_1_1Instruction.html#a2d0036d2d7b30f510927731ba7a4f4b9">llvm::Instruction::isBitwiseLogicOp</a></div><div class="ttdeci">static bool isBitwiseLogicOp(unsigned Opcode)</div><div class="ttdoc">Determine if the Opcode is and/or/xor.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00219">Instruction.h:219</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a3a402430a1bbe70a9282dcb0e0b6a2cd"><div class="ttname"><a href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">llvm::Value::hasOneUse</a></div><div class="ttdeci">bool hasOneUse() const</div><div class="ttdoc">Return true if there is exactly one use of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00434">Value.h:434</a></div></div>
<div class="ttc" id="aInstCombiner_8h_html"><div class="ttname"><a href="InstCombiner_8h.html">InstCombiner.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78b"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">llvm::CmpInst::Predicate</a></div><div class="ttdeci">Predicate</div><div class="ttdoc">This enumeration lists the possible predicates for CmpInst subclasses.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00718">InstrTypes.h:718</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a62cbe7441d9ebcac7e1a216bbf696550"><div class="ttname"><a href="classllvm_1_1Type.html#a62cbe7441d9ebcac7e1a216bbf696550">llvm::Type::isX86_MMXTy</a></div><div class="ttdeci">bool isX86_MMXTy() const</div><div class="ttdoc">Return true if this is X86 MMX.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00201">Type.h:201</a></div></div>
<div class="ttc" id="aAMDGPURewriteUndefForPHI_8cpp_html_a2e83cb1bc3f5e8986cbd14575755a134"><div class="ttname"><a href="AMDGPURewriteUndefForPHI_8cpp.html#a2e83cb1bc3f5e8986cbd14575755a134">PHI</a></div><div class="ttdeci">Rewrite undef for PHI</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPURewriteUndefForPHI_8cpp_source.html#l00101">AMDGPURewriteUndefForPHI.cpp:101</a></div></div>
<div class="ttc" id="aclassllvm_1_1AllocaInst_html_a42438d0a43720a6571c9138224481754"><div class="ttname"><a href="classllvm_1_1AllocaInst.html#a42438d0a43720a6571c9138224481754">llvm::AllocaInst::getAlign</a></div><div class="ttdeci">Align getAlign() const</div><div class="ttdoc">Return the alignment of the memory that is being allocated by the instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00125">Instructions.h:125</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a3b996fbf8458aafffc86cb98a68d0a47"><div class="ttname"><a href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">llvm::Type::isPointerTy</a></div><div class="ttdeci">bool isPointerTy() const</div><div class="ttdoc">True if this is an instance of PointerType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00249">Type.h:249</a></div></div>
<div class="ttc" id="aREADME-FPStack_8txt_html_a9209b9930d4d7750a6b8b38b3b4ddd6a"><div class="ttname"><a href="README-FPStack_8txt.html#a9209b9930d4d7750a6b8b38b3b4ddd6a">ceil</a></div><div class="ttdeci">We have fiadd patterns now but the followings have the same cost and complexity We need a way to specify the later is more profitable def def The FP stackifier should handle simple permutates to reduce number of shuffle e g ceil</div><div class="ttdef"><b>Definition:</b> <a href="README-FPStack_8txt_source.html#l00054">README-FPStack.txt:54</a></div></div>
<div class="ttc" id="astructllvm_1_1APFloatBase_html_a0c5765e9acba977f6e462c2917276d8f"><div class="ttname"><a href="structllvm_1_1APFloatBase.html#a0c5765e9acba977f6e462c2917276d8f">llvm::APFloatBase::IEEEsingle</a></div><div class="ttdeci">static const fltSemantics &amp; IEEEsingle() LLVM_READNONE</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8cpp_source.html#l00244">APFloat.cpp:244</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a58d6359cee16e5da66861058836dcca9"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a58d6359cee16e5da66861058836dcca9">llvm::ConstantExpr::getZExt</a></div><div class="ttdeci">static Constant * getZExt(Constant *C, Type *Ty, bool OnlyIfReduced=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02119">Constants.cpp:2119</a></div></div>
<div class="ttc" id="aclassT_html"><div class="ttname"><a href="classT.html">T</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombiner_html_a879221accd38e1327b8dcf596650b031"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a879221accd38e1327b8dcf596650b031">llvm::InstCombiner::ComputeNumSignBits</a></div><div class="ttdeci">unsigned ComputeNumSignBits(const Value *Op, unsigned Depth=0, const Instruction *CxtI=nullptr) const</div><div class="ttdef"><b>Definition:</b> <a href="InstCombiner_8h_source.html#l00482">InstCombiner.h:482</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00059">Function.h:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1Attribute_html"><div class="ttname"><a href="classllvm_1_1Attribute.html">llvm::Attribute</a></div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00067">Attributes.h:67</a></div></div>
<div class="ttc" id="aREADME-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00411">README-SSE.txt:411</a></div></div>
<div class="ttc" id="aInstCombineCasts_8cpp_html_a38233aa2f7bdb00261cbc773b5da5a09"><div class="ttname"><a href="InstCombineCasts_8cpp.html#a38233aa2f7bdb00261cbc773b5da5a09">convertBitCastToGEP</a></div><div class="ttdeci">static Instruction * convertBitCastToGEP(BitCastInst &amp;CI, IRBuilderBase &amp;Builder, const DataLayout &amp;DL)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l02707">InstCombineCasts.cpp:2707</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aa08fee11e8a5ec10c0cc2a7abbbd799a"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">llvm::PatternMatch::m_LShr</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::LShr &gt; m_LShr(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01117">PatternMatch.h:1117</a></div></div>
<div class="ttc" id="aInstCombineCasts_8cpp_html_a80c0310e16ef56125c3b7a874d0b2767"><div class="ttname"><a href="InstCombineCasts_8cpp.html#a80c0310e16ef56125c3b7a874d0b2767">canonicalizeBitCastExtElt</a></div><div class="ttdeci">static Instruction * canonicalizeBitCastExtElt(BitCastInst &amp;BitCast, InstCombinerImpl &amp;IC)</div><div class="ttdoc">Canonicalize scalar bitcasts of extracted elements into a bitcast of the vector followed by extract e...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l02381">InstCombineCasts.cpp:2381</a></div></div>
<div class="ttc" id="aInstCombineCasts_8cpp_html_a01395be91e03a1a4c5fd713885d8327f"><div class="ttname"><a href="InstCombineCasts_8cpp.html#a01395be91e03a1a4c5fd713885d8327f">collectInsertionElements</a></div><div class="ttdeci">static bool collectInsertionElements(Value *V, unsigned Shift, SmallVectorImpl&lt; Value * &gt; &amp;Elements, Type *VecEltTy, bool isBigEndian)</div><div class="ttdoc">V is a value which is inserted into a vector of VecEltTy.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l02241">InstCombineCasts.cpp:2241</a></div></div>
<div class="ttc" id="aclassllvm_1_1BitCastInst_html"><div class="ttname"><a href="classllvm_1_1BitCastInst.html">llvm::BitCastInst</a></div><div class="ttdoc">This class represents a no-op cast from one type to another.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l05258">Instructions.h:5258</a></div></div>
<div class="ttc" id="astructllvm_1_1KnownBits_html_ac67bca6c764da76f5e152330d92ed916"><div class="ttname"><a href="structllvm_1_1KnownBits.html#ac67bca6c764da76f5e152330d92ed916">llvm::KnownBits::Zero</a></div><div class="ttdeci">APInt Zero</div><div class="ttdef"><b>Definition:</b> <a href="KnownBits_8h_source.html#l00024">KnownBits.h:24</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a4abb39a66573f61fda80469faa5d861d"><div class="ttname"><a href="classllvm_1_1Type.html#a4abb39a66573f61fda80469faa5d861d">llvm::Type::getScalarType</a></div><div class="ttdeci">Type * getScalarType() const</div><div class="ttdoc">If this is a vector type, return the element type, otherwise return 'this'.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00341">Type.h:341</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a9cae528bdb66086aa6c06da36fc6fa24"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a9cae528bdb66086aa6c06da36fc6fa24">llvm::PatternMatch::m_InsertElt</a></div><div class="ttdeci">ThreeOps_match&lt; Val_t, Elt_t, Idx_t, Instruction::InsertElement &gt; m_InsertElt(const Val_t &amp;Val, const Elt_t &amp;Elt, const Idx_t &amp;Idx)</div><div class="ttdoc">Matches InsertElementInst.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01484">PatternMatch.h:1484</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_aa342c9b3d47cd9bde63b80c83ead429b"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#aa342c9b3d47cd9bde63b80c83ead429b">llvm::ConstantExpr::getSExt</a></div><div class="ttdeci">static Constant * getSExt(Constant *C, Type *Ty, bool OnlyIfReduced=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02105">Constants.cpp:2105</a></div></div>
<div class="ttc" id="aclassllvm_1_1AllocaInst_html_ac106bea55dfb26f8b14676aac05bd89f"><div class="ttname"><a href="classllvm_1_1AllocaInst.html#ac106bea55dfb26f8b14676aac05bd89f">llvm::AllocaInst::getType</a></div><div class="ttdeci">PointerType * getType() const</div><div class="ttdoc">Overload to return most specific pointer type.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00100">Instructions.h:100</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01199">SmallVector.h:1199</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombiner_html_ae1d331bc844ecb92bdeb0b706ae04396"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#ae1d331bc844ecb92bdeb0b706ae04396">llvm::InstCombiner::Builder</a></div><div class="ttdeci">BuilderTy &amp; Builder</div><div class="ttdef"><b>Definition:</b> <a href="InstCombiner_8h_source.html#l00058">InstCombiner.h:58</a></div></div>
<div class="ttc" id="aInstCombineCasts_8cpp_html_a8efab72b40fc7836709221d3e97139c6"><div class="ttname"><a href="InstCombineCasts_8cpp.html#a8efab72b40fc7836709221d3e97139c6">isMultipleOfTypeSize</a></div><div class="ttdeci">static bool isMultipleOfTypeSize(unsigned Value, Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l02223">InstCombineCasts.cpp:2223</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html_a59ab64994d74243a175979d5b7b6b535"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a59ab64994d74243a175979d5b7b6b535">llvm::BinaryOperator::CreateFDivFMF</a></div><div class="ttdeci">static BinaryOperator * CreateFDivFMF(Value *V1, Value *V2, Instruction *FMFSource, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00271">InstrTypes.h:271</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_adc21598ac33ea9d50f3a939f26a28940"><div class="ttname"><a href="classllvm_1_1Type.html#adc21598ac33ea9d50f3a939f26a28940">llvm::Type::getFltSemantics</a></div><div class="ttdeci">const fltSemantics &amp; getFltSemantics() const</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00066">Type.cpp:66</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_af4feec45578e32fe65d8efc59112bc8e"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#af4feec45578e32fe65d8efc59112bc8e">llvm::PatternMatch::m_CombineOr</a></div><div class="ttdeci">match_combine_or&lt; LTy, RTy &gt; m_CombineOr(const LTy &amp;L, const RTy &amp;R)</div><div class="ttdoc">Combine two pattern matchers matching L || R.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00218">PatternMatch.h:218</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilder_html"><div class="ttname"><a href="classllvm_1_1IRBuilder.html">llvm::IRBuilder&lt; TargetFolder, IRBuilderCallbackInserter &gt;</a></div></div>
<div class="ttc" id="aInstCombineCasts_8cpp_html_a24b18f2c77f69e54841c51bb3d31cad2"><div class="ttname"><a href="InstCombineCasts_8cpp.html#a24b18f2c77f69e54841c51bb3d31cad2">hasStoreUsersOnly</a></div><div class="ttdeci">static bool hasStoreUsersOnly(CastInst &amp;CI)</div><div class="ttdoc">Check if all users of CI are StoreInsts.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l02523">InstCombineCasts.cpp:2523</a></div></div>
<div class="ttc" id="astructllvm_1_1APFloatBase_html_afede4bd63799684de5d737cd51519768"><div class="ttname"><a href="structllvm_1_1APFloatBase.html#afede4bd63799684de5d737cd51519768">llvm::APFloatBase::semanticsIntSizeInBits</a></div><div class="ttdeci">static unsigned int semanticsIntSizeInBits(const fltSemantics &amp;, bool)</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8cpp_source.html#l00303">APFloat.cpp:303</a></div></div>
<div class="ttc" id="aclassllvm_1_1CastInst_html_a643fe5a9e7042f032dae78109c2b1e72"><div class="ttname"><a href="classllvm_1_1CastInst.html#a643fe5a9e7042f032dae78109c2b1e72">llvm::CastInst::Create</a></div><div class="ttdeci">static CastInst * Create(Instruction::CastOps, Value *S, Type *Ty, const Twine &amp;Name=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Provides a way to construct any of the CastInst subclasses using an opcode instead of the subclass's ...</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l03354">Instructions.cpp:3354</a></div></div>
<div class="ttc" id="aclassllvm_1_1PointerType_html_af8aeced5e71d2589fa3e9791043af5cb"><div class="ttname"><a href="classllvm_1_1PointerType.html#af8aeced5e71d2589fa3e9791043af5cb">llvm::PointerType::getAddressSpace</a></div><div class="ttdeci">unsigned getAddressSpace() const</div><div class="ttdoc">Return the address space of the Pointer type.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00682">DerivedTypes.h:682</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallDenseMap_html"><div class="ttname"><a href="classllvm_1_1SmallDenseMap.html">llvm::SmallDenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00880">DenseMap.h:880</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">llvm::CmpInst::ICMP_NE</a></div><div class="ttdeci">@ ICMP_NE</div><div class="ttdoc">not equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00740">InstrTypes.h:740</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_ae79d05dd3d0b05e080e08f8c5c33f880"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#ae79d05dd3d0b05e080e08f8c5c33f880">llvm::ConstantExpr::getBitCast</a></div><div class="ttdeci">static Constant * getBitCast(Constant *C, Type *Ty, bool OnlyIfReduced=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02229">Constants.cpp:2229</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombiner_html_ae099c6fa4a0b06306ece7dd372e8d02a"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#ae099c6fa4a0b06306ece7dd372e8d02a">llvm::InstCombiner::computeKnownBits</a></div><div class="ttdeci">void computeKnownBits(const Value *V, KnownBits &amp;Known, unsigned Depth, const Instruction *CxtI) const</div><div class="ttdef"><b>Definition:</b> <a href="InstCombiner_8h_source.html#l00461">InstCombiner.h:461</a></div></div>
<div class="ttc" id="aclassllvm_1_1CastInst_html_a8b805c54dc1ead67b711a4b1cb72f492"><div class="ttname"><a href="classllvm_1_1CastInst.html#a8b805c54dc1ead67b711a4b1cb72f492">llvm::CastInst::isEliminableCastPair</a></div><div class="ttdeci">static unsigned isEliminableCastPair(Instruction::CastOps firstOpcode, Instruction::CastOps secondOpcode, Type *SrcTy, Type *MidTy, Type *DstTy, Type *SrcIntPtrTy, Type *MidIntPtrTy, Type *DstIntPtrTy)</div><div class="ttdoc">Determine how a pair of casts can be eliminated, if they can be at all.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l03129">Instructions.cpp:3129</a></div></div>
<div class="ttc" id="aInstCombineCasts_8cpp_html_affc489a864c971a5883ff1df9f7d37ac"><div class="ttname"><a href="InstCombineCasts_8cpp.html#affc489a864c971a5883ff1df9f7d37ac">foldBitCastSelect</a></div><div class="ttdeci">static Instruction * foldBitCastSelect(BitCastInst &amp;BitCast, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdoc">Change the type of a select if we can eliminate a bitcast.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l02480">InstCombineCasts.cpp:2480</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_ad0709baa705ae62c4e09cdd47fb4b420"><div class="ttname"><a href="classllvm_1_1Type.html#ad0709baa705ae62c4e09cdd47fb4b420">llvm::Type::isFPOrFPVectorTy</a></div><div class="ttdeci">bool isFPOrFPVectorTy() const</div><div class="ttdoc">Return true if this is a FP type or a vector of FP.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00210">Type.h:210</a></div></div>
<div class="ttc" id="aclassllvm_1_1InsertElementInst_html_a44cefc7b60337e7e14d20e843c74e534"><div class="ttname"><a href="classllvm_1_1InsertElementInst.html#a44cefc7b60337e7e14d20e843c74e534">llvm::InsertElementInst::Create</a></div><div class="ttdeci">static InsertElementInst * Create(Value *Vec, Value *NewElt, Value *Idx, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01959">Instructions.h:1959</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_a8db36c82f32d6f6a4d35a00e55be03a8"><div class="ttname"><a href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a></div><div class="ttdeci">bool Shift</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00468">README.txt:468</a></div></div>
<div class="ttc" id="aclassllvm_1_1ExtractElementInst_html_a5d496a334eff64bb2873339b54df932a"><div class="ttname"><a href="classllvm_1_1ExtractElementInst.html#a5d496a334eff64bb2873339b54df932a">llvm::ExtractElementInst::Create</a></div><div class="ttdeci">static ExtractElementInst * Create(Value *Vec, Value *Idx, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01894">Instructions.h:1894</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a27c23cfa31727788250c1b6bb11e70e9"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a27c23cfa31727788250c1b6bb11e70e9">llvm::InstCombinerImpl::visitAddrSpaceCast</a></div><div class="ttdeci">Instruction * visitAddrSpaceCast(AddrSpaceCastInst &amp;CI)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l02924">InstCombineCasts.cpp:2924</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdoc">The instances of the Type class are immutable: once they are created, they are never changed.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aa60174d3d9de4e501a53c4bddc823f02"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aa60174d3d9de4e501a53c4bddc823f02">llvm::PatternMatch::m_FPToUI</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::FPToUI &gt; m_FPToUI(const OpTy &amp;Op)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01672">PatternMatch.h:1672</a></div></div>
<div class="ttc" id="aInstCombineCasts_8cpp_html_a9cad0d942fb5f64b2ec2ce7e7277c492"><div class="ttname"><a href="InstCombineCasts_8cpp.html#a9cad0d942fb5f64b2ec2ce7e7277c492">canAlwaysEvaluateInType</a></div><div class="ttdeci">static bool canAlwaysEvaluateInType(Value *V, Type *Ty)</div><div class="ttdoc">Constants and extensions/truncates from the destination type are always free to be evaluated in that ...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l00374">InstCombineCasts.cpp:374</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a89ab5eaec7693029761c8d0b3ded3b00"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a89ab5eaec7693029761c8d0b3ded3b00">llvm::InstCombinerImpl::visitBitCast</a></div><div class="ttdeci">Instruction * visitBitCast(BitCastInst &amp;CI)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l02758">InstCombineCasts.cpp:2758</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantFP_html_a7faf4e0334b77ab527e4b45e3a1f4d65"><div class="ttname"><a href="classllvm_1_1ConstantFP.html#a7faf4e0334b77ab527e4b45e3a1f4d65">llvm::ConstantFP::getValueAPF</a></div><div class="ttdeci">const APFloat &amp; getValueAPF() const</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00297">Constants.h:297</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a43ac4fbaaf63a88eb5ac05f6d3e5649c"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a43ac4fbaaf63a88eb5ac05f6d3e5649c">llvm::PatternMatch::m_BinOp</a></div><div class="ttdeci">class_match&lt; BinaryOperator &gt; m_BinOp()</div><div class="ttdoc">Match an arbitrary binary operation and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00084">PatternMatch.h:84</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ore_html_a8f5533240c6722d987a2443cba42019d"><div class="ttname"><a href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">llvm::ore::NV</a></div><div class="ttdeci">DiagnosticInfoOptimizationBase::Argument NV</div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8h_source.html#l00136">OptimizationRemarkEmitter.h:136</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a64153676e101a130bbbaaf91635d253a"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a64153676e101a130bbbaaf91635d253a">llvm::PatternMatch::m_AShr</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::AShr &gt; m_AShr(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01123">PatternMatch.h:1123</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad46ed333b920b20e78d948610366254c"><div class="ttname"><a href="namespacellvm.html#ad46ed333b920b20e78d948610366254c">llvm::ComputeNumSignBits</a></div><div class="ttdeci">unsigned ComputeNumSignBits(const Value *Op, const DataLayout &amp;DL, unsigned Depth=0, AssumptionCache *AC=nullptr, const Instruction *CxtI=nullptr, const DominatorTree *DT=nullptr, bool UseInstrInfo=true)</div><div class="ttdoc">Return the number of times the sign bit of the register is replicated into the other bits.</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l00383">ValueTracking.cpp:383</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a39b5a72b70df94211893c7fc6bbfe1f5"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a39b5a72b70df94211893c7fc6bbfe1f5">llvm::IRBuilderBase::CreateInsertElement</a></div><div class="ttdeci">Value * CreateInsertElement(Type *VecTy, Value *NewElt, Value *Idx, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l02353">IRBuilder.h:2353</a></div></div>
<div class="ttc" id="aclassllvm_1_1VectorType_html_a12e23c3d619db313388fe11dc76eb23f"><div class="ttname"><a href="classllvm_1_1VectorType.html#a12e23c3d619db313388fe11dc76eb23f">llvm::VectorType::getElementType</a></div><div class="ttdeci">Type * getElementType() const</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00422">DerivedTypes.h:422</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab4d4bc901fedd8857f647dcc2c0d71de"><div class="ttname"><a href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">llvm::max</a></div><div class="ttdeci">Expected&lt; ExpressionValue &gt; max(const ExpressionValue &amp;Lhs, const ExpressionValue &amp;Rhs)</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8cpp_source.html#l00337">FileCheck.cpp:337</a></div></div>
<div class="ttc" id="aInstCombineCasts_8cpp_html_ab30df4a5809e3189835f2802296da3e7"><div class="ttname"><a href="InstCombineCasts_8cpp.html#ab30df4a5809e3189835f2802296da3e7">shrinkSplatShuffle</a></div><div class="ttdeci">static Instruction * shrinkSplatShuffle(TruncInst &amp;Trunc, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdoc">Try to narrow the width of a splat shuffle.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l00764">InstCombineCasts.cpp:764</a></div></div>
<div class="ttc" id="aclassllvm_1_1CastInst_html_a277c32f1a2c680c0af45cbf0ff67c409"><div class="ttname"><a href="classllvm_1_1CastInst.html#a277c32f1a2c680c0af45cbf0ff67c409">llvm::CastInst::CreateIntegerCast</a></div><div class="ttdeci">static CastInst * CreateIntegerCast(Value *S, Type *Ty, bool isSigned, const Twine &amp;Name=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Create a ZExt, BitCast, or Trunc for int -&gt; int casts.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l03520">Instructions.cpp:3520</a></div></div>
<div class="ttc" id="aAMDGPURegBankSelect_8cpp_html_a14e0c000ed52e5fc187d4a885914cc1a"><div class="ttname"><a href="AMDGPURegBankSelect_8cpp.html#a14e0c000ed52e5fc187d4a885914cc1a">Select</a></div><div class="ttdeci">amdgpu AMDGPU Register Bank Select</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPURegBankSelect_8cpp_source.html#l00045">AMDGPURegBankSelect.cpp:45</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a87b8bfbbe9d8f7146d7f20a5fb42efd0"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a></div><div class="ttdeci">Value * RHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00076">X86PartialReduction.cpp:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1OverflowingBinaryOperator_html_a95474ea140862464db7ea0580f01eae9"><div class="ttname"><a href="classllvm_1_1OverflowingBinaryOperator.html#a95474ea140862464db7ea0580f01eae9">llvm::OverflowingBinaryOperator::hasNoUnsignedWrap</a></div><div class="ttdeci">bool hasNoUnsignedWrap() const</div><div class="ttdoc">Test whether this operation is known to never undergo unsigned overflow, aka the nuw property.</div><div class="ttdef"><b>Definition:</b> <a href="Operator_8h_source.html#l00099">Operator.h:99</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6dec2b5d3e04b47adf4d918d678e81c9"><div class="ttname"><a href="namespacellvm.html#a6dec2b5d3e04b47adf4d918d678e81c9">llvm::isPowerOf2_32</a></div><div class="ttdeci">constexpr bool isPowerOf2_32(uint32_t Value)</div><div class="ttdoc">Return true if the argument is a power of two &gt; 0.</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00292">MathExtras.h:292</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7aad5a0e62a54747f455651ee2dd08ed"><div class="ttname"><a href="namespacellvm.html#a7aad5a0e62a54747f455651ee2dd08ed">llvm::matchSelectPattern</a></div><div class="ttdeci">SelectPatternResult matchSelectPattern(Value *V, Value *&amp;LHS, Value *&amp;RHS, Instruction::CastOps *CastOp=nullptr, unsigned Depth=0)</div><div class="ttdoc">Pattern match integer [SU]MIN, [SU]MAX and ABS idioms, returning the kind and providing the out param...</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l06536">ValueTracking.cpp:6536</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ae9d735be1ececf149966a4da253f0320"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">llvm::PatternMatch::m_c_And</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::And, true &gt; m_c_And(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches an And with LHS and RHS in either order.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02262">PatternMatch.h:2262</a></div></div>
<div class="ttc" id="aclassllvm_1_1AllocaInst_html_ad2fb148dfac3182fce33be95fc4e9159"><div class="ttname"><a href="classllvm_1_1AllocaInst.html#ad2fb148dfac3182fce33be95fc4e9159">llvm::AllocaInst::getAddressSpace</a></div><div class="ttdeci">unsigned getAddressSpace() const</div><div class="ttdoc">Return the address space for the allocation.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00105">Instructions.h:105</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ac0467ca7fad871738b10db95feb40dad"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ac0467ca7fad871738b10db95feb40dad">llvm::PatternMatch::m_BitCast</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::BitCast &gt; m_BitCast(const OpTy &amp;Op)</div><div class="ttdoc">Matches BitCast.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01593">PatternMatch.h:1593</a></div></div>
<div class="ttc" id="aclassllvm_1_1FixedVectorType_html"><div class="ttname"><a href="classllvm_1_1FixedVectorType.html">llvm::FixedVectorType</a></div><div class="ttdoc">Class to represent fixed width SIMD vectors.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00525">DerivedTypes.h:525</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_abe28025713ed7d83e0d57e078b28e570"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#abe28025713ed7d83e0d57e078b28e570">llvm::PatternMatch::m_VScale</a></div><div class="ttdeci">VScaleVal_match m_VScale(const DataLayout &amp;DL)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02502">PatternMatch.h:2502</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_abceff71202e0269065cf32a2f750a9be"><div class="ttname"><a href="classllvm_1_1Type.html#abceff71202e0269065cf32a2f750a9be">llvm::Type::getNonOpaquePointerElementType</a></div><div class="ttdeci">Type * getNonOpaquePointerElementType() const</div><div class="ttdoc">Only use this method in code that is not reachable with opaque pointers, or part of deprecated method...</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00416">Type.h:416</a></div></div>
<div class="ttc" id="aConstantFolding_8h_html"><div class="ttname"><a href="ConstantFolding_8h.html">ConstantFolding.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a30dd396c5b40cd86c1591872e574ccdf"><div class="ttname"><a href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">llvm::Type::getInt32Ty</a></div><div class="ttdeci">static IntegerType * getInt32Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00241">Type.cpp:241</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a94bf3939e0bea91b481096473d0e549f"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">llvm::PatternMatch::m_Deferred</a></div><div class="ttdeci">deferredval_ty&lt; Value &gt; m_Deferred(Value *const &amp;V)</div><div class="ttdoc">Like m_Specific(), but works if the specific value to match is determined as part of the same match()...</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00790">PatternMatch.h:790</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_abdfda4087597a7f3a1f6af6de43c30da"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#abdfda4087597a7f3a1f6af6de43c30da">llvm::InstCombinerImpl::visitFPExt</a></div><div class="ttdeci">Instruction * visitFPExt(CastInst &amp;CI)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l01970">InstCombineCasts.cpp:1970</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00101">Debug.h:101</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a8fa51d3da96615af400274e9cd272df4"><div class="ttname"><a href="classllvm_1_1Type.html#a8fa51d3da96615af400274e9cd272df4">llvm::Type::getWithNewType</a></div><div class="ttdeci">Type * getWithNewType(Type *EltTy) const</div><div class="ttdoc">Given vector type, change the element type, whilst keeping the old number of elements.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00716">DerivedTypes.h:716</a></div></div>
<div class="ttc" id="anamespacellvm_1_1NVPTX_1_1PTXLdStInstCode_html_a91119cbee2be000c528a690252aee07c"><div class="ttname"><a href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07c">llvm::NVPTX::PTXLdStInstCode::VecType</a></div><div class="ttdeci">VecType</div><div class="ttdef"><b>Definition:</b> <a href="NVPTX_8h_source.html#l00122">NVPTX.h:122</a></div></div>
<div class="ttc" id="aclassllvm_1_1CastInst_html_a7cf02ab81e7b0774ebf78e13f89dabfc"><div class="ttname"><a href="classllvm_1_1CastInst.html#a7cf02ab81e7b0774ebf78e13f89dabfc">llvm::CastInst::getDestTy</a></div><div class="ttdeci">Type * getDestTy() const</div><div class="ttdoc">Return the destination type, as a convenience.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00682">InstrTypes.h:682</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00055">MD5.cpp:55</a></div></div>
<div class="ttc" id="aclassllvm_1_1IntToPtrInst_html_a69434c1c574013fb2765bd2c5b27cc7b"><div class="ttname"><a href="classllvm_1_1IntToPtrInst.html#a69434c1c574013fb2765bd2c5b27cc7b">llvm::IntToPtrInst::getAddressSpace</a></div><div class="ttdeci">unsigned getAddressSpace() const</div><div class="ttdoc">Returns the address space of this instruction's pointer type.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l05189">Instructions.h:5189</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVFenceField_html_a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731"><div class="ttname"><a href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">llvm::RISCVFenceField::R</a></div><div class="ttdeci">@ R</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00278">RISCVBaseInfo.h:278</a></div></div>
<div class="ttc" id="aKnownBits_8h_html"><div class="ttname"><a href="KnownBits_8h.html">KnownBits.h</a></div></div>
<div class="ttc" id="astructllvm_1_1KnownBits_html_a1eeff70353694cb360b2893553c18e7d"><div class="ttname"><a href="structllvm_1_1KnownBits.html#a1eeff70353694cb360b2893553c18e7d">llvm::KnownBits::countMinTrailingZeros</a></div><div class="ttdeci">unsigned countMinTrailingZeros() const</div><div class="ttdoc">Returns the minimum number of trailing zero bits.</div><div class="ttdef"><b>Definition:</b> <a href="KnownBits_8h_source.html#l00233">KnownBits.h:233</a></div></div>
<div class="ttc" id="aREADME-FPStack_8txt_html_ac25bbfa16d28ab1f83da03668addad0a"><div class="ttname"><a href="README-FPStack_8txt.html#ac25bbfa16d28ab1f83da03668addad0a">floor</a></div><div class="ttdeci">We have fiadd patterns now but the followings have the same cost and complexity We need a way to specify the later is more profitable def def The FP stackifier should handle simple permutates to reduce number of shuffle e g floor</div><div class="ttdef"><b>Definition:</b> <a href="README-FPStack_8txt_source.html#l00054">README-FPStack.txt:54</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aca6428e7fec51ba0b55594f469eb9691"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">llvm::PatternMatch::m_OneUse</a></div><div class="ttdeci">OneUse_match&lt; T &gt; m_OneUse(const T &amp;SubPattern)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00067">PatternMatch.h:67</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a554ab77949b0a16670a83ec3307501eb"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a554ab77949b0a16670a83ec3307501eb">llvm::ConstantExpr::getSub</a></div><div class="ttdeci">static Constant * getSub(Constant *C1, Constant *C2, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02664">Constants.cpp:2664</a></div></div>
<div class="ttc" id="aclassllvm_1_1PtrToIntInst_html_a378cf64c77de950ae67fc6e279e34620"><div class="ttname"><a href="classllvm_1_1PtrToIntInst.html#a378cf64c77de950ae67fc6e279e34620">llvm::PtrToIntInst::getPointerAddressSpace</a></div><div class="ttdeci">unsigned getPointerAddressSpace() const</div><div class="ttdoc">Returns the address space of the pointer operand.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l05240">Instructions.h:5240</a></div></div>
<div class="ttc" id="anamespacellvm_1_1BitmaskEnumDetail_html_a91efa71de05b0c2d00730a0279f58658"><div class="ttname"><a href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">llvm::BitmaskEnumDetail::Mask</a></div><div class="ttdeci">constexpr std::underlying_type_t&lt; E &gt; Mask()</div><div class="ttdoc">Get a bitmask with 1s in all places up to the high-order bit of E's largest value.</div><div class="ttdef"><b>Definition:</b> <a href="BitmaskEnum_8h_source.html#l00080">BitmaskEnum.h:80</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aac9e78b3aa02ec087c4621358f506718"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">llvm::PatternMatch::m_APInt</a></div><div class="ttdeci">apint_match m_APInt(const APInt *&amp;Res)</div><div class="ttdoc">Match a ConstantInt or splatted ConstantVector, binding the specified pointer to the contained APInt.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00278">PatternMatch.h:278</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a9e1483f7215664a2315c53c3558d9a8d"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a></div><div class="ttdeci">Value * LHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00075">X86PartialReduction.cpp:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html"><div class="ttname"><a href="classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">This is the shared class of boolean and integer constants.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00078">Constants.h:78</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6bf471c1030973649c2e426afc212097aee3dafa9fac8f6fa1e1110ef463cc452"><div class="ttname"><a href="namespacellvm.html#a6bf471c1030973649c2e426afc212097aee3dafa9fac8f6fa1e1110ef463cc452">llvm::SPF_UNKNOWN</a></div><div class="ttdeci">@ SPF_UNKNOWN</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8h_source.html#l00691">ValueTracking.h:691</a></div></div>
<div class="ttc" id="aInstCombineCasts_8cpp_html_a16e1399c07ad0fea0b83eaea29c1402e"><div class="ttname"><a href="InstCombineCasts_8cpp.html#a16e1399c07ad0fea0b83eaea29c1402e">canEvaluateSExtd</a></div><div class="ttdeci">static bool canEvaluateSExtd(Value *V, Type *Ty)</div><div class="ttdoc">Return true if we can take the specified value and return it as type Ty without inserting any new cas...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l01464">InstCombineCasts.cpp:1464</a></div></div>
<div class="ttc" id="aclassllvm_1_1SelectInst_html_aa55fb74dd22008fdcc26a63f44576022"><div class="ttname"><a href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">llvm::SelectInst::Create</a></div><div class="ttdeci">static SelectInst * Create(Value *C, Value *S1, Value *S2, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr, Instruction *MDFrom=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01777">Instructions.h:1777</a></div></div>
<div class="ttc" id="anamespacellvm_html_aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b"><div class="ttname"><a href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">llvm::RecurKind::And</a></div><div class="ttdeci">@ And</div><div class="ttdoc">Bitwise or logical AND of integers.</div></div>
<div class="ttc" id="aclassllvm_1_1AddrSpaceCastInst_html"><div class="ttname"><a href="classllvm_1_1AddrSpaceCastInst.html">llvm::AddrSpaceCastInst</a></div><div class="ttdoc">This class represents a conversion between pointers from one address space to another.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l05298">Instructions.h:5298</a></div></div>
<div class="ttc" id="aInstCombineInternal_8h_html"><div class="ttname"><a href="InstCombineInternal_8h.html">InstCombineInternal.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_addb87fe3f509b7803d3f5933ee24b560"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#addb87fe3f509b7803d3f5933ee24b560">llvm::PatternMatch::m_Select</a></div><div class="ttdeci">ThreeOps_match&lt; Cond, LHS, RHS, Instruction::Select &gt; m_Select(const Cond &amp;C, const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches SelectInst.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01462">PatternMatch.h:1462</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a247b6987d634040b8aa6fb9c5887b703"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a247b6987d634040b8aa6fb9c5887b703">llvm::PatternMatch::m_ZExtOrSExt</a></div><div class="ttdeci">match_combine_or&lt; CastClass_match&lt; OpTy, Instruction::ZExt &gt;, CastClass_match&lt; OpTy, Instruction::SExt &gt; &gt; m_ZExtOrSExt(const OpTy &amp;Op)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01648">PatternMatch.h:1648</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a25d956d9e0beadd47ce4bc255dfa811d"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">llvm::PatternMatch::match</a></div><div class="ttdeci">bool match(Val *V, const Pattern &amp;P)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00049">PatternMatch.h:49</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_a16c39eb6e60b42a40c399d8d65347bb6"><div class="ttname"><a href="classllvm_1_1PHINode.html#a16c39eb6e60b42a40c399d8d65347bb6">llvm::PHINode::getIncomingValue</a></div><div class="ttdeci">Value * getIncomingValue(unsigned i) const</div><div class="ttdoc">Return incoming value number x.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02794">Instructions.h:2794</a></div></div>
<div class="ttc" id="aclassllvm_1_1AllocaInst_html_a074617b3e2f9f98ee3a2ac208e8e7210"><div class="ttname"><a href="classllvm_1_1AllocaInst.html#a074617b3e2f9f98ee3a2ac208e8e7210">llvm::AllocaInst::getAllocatedType</a></div><div class="ttdeci">Type * getAllocatedType() const</div><div class="ttdoc">Return the type that is being allocated by the instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00118">Instructions.h:118</a></div></div>
<div class="ttc" id="aSystemZTargetTransformInfo_8cpp_html_a69eeffbc38c079195008fbfb5aaad0b9"><div class="ttname"><a href="SystemZTargetTransformInfo_8cpp.html#a69eeffbc38c079195008fbfb5aaad0b9">getScalarSizeInBits</a></div><div class="ttdeci">static unsigned getScalarSizeInBits(Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="SystemZTargetTransformInfo_8cpp_source.html#l00403">SystemZTargetTransformInfo.cpp:403</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a49cd5939942c6665aba4cae8c220dff1"><div class="ttname"><a href="classllvm_1_1APInt.html#a49cd5939942c6665aba4cae8c220dff1">llvm::APInt::isZero</a></div><div class="ttdeci">bool isZero() const</div><div class="ttdoc">Determine if this value is zero, i.e. all bits are clear.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00366">APInt.h:366</a></div></div>
<div class="ttc" id="aInstCombineCasts_8cpp_html_a7496a50ac6cdcc6462f555c033bd8370"><div class="ttname"><a href="InstCombineCasts_8cpp.html#a7496a50ac6cdcc6462f555c033bd8370">shrinkFPConstantVector</a></div><div class="ttdeci">static Type * shrinkFPConstantVector(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l01676">InstCombineCasts.cpp:1676</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a489d14cb1d049f4bcc5e3e9cdaf9c54d"><div class="ttname"><a href="classllvm_1_1Type.html#a489d14cb1d049f4bcc5e3e9cdaf9c54d">llvm::Type::getPPC_FP128Ty</a></div><div class="ttdeci">static Type * getPPC_FP128Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00234">Type.cpp:234</a></div></div>
<div class="ttc" id="astructllvm_1_1APFloatBase_html_a86415bb448a78ef1fed893f9eb0f5d06"><div class="ttname"><a href="structllvm_1_1APFloatBase.html#a86415bb448a78ef1fed893f9eb0f5d06">llvm::APFloatBase::IEEEhalf</a></div><div class="ttdeci">static const fltSemantics &amp; IEEEhalf() LLVM_READNONE</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8cpp_source.html#l00238">APFloat.cpp:238</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html"><div class="ttname"><a href="classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00044">User.h:44</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aa4a99c313af96b3b50a9768338a54b2e"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aa4a99c313af96b3b50a9768338a54b2e">llvm::PatternMatch::m_SpecificIntAllowUndef</a></div><div class="ttdeci">specific_intval&lt; true &gt; m_SpecificIntAllowUndef(APInt V)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00862">PatternMatch.h:862</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_acb145f988329d1d621f73abcafea21d8"><div class="ttname"><a href="classllvm_1_1Type.html#acb145f988329d1d621f73abcafea21d8">llvm::Type::getDoubleTy</a></div><div class="ttdeci">static Type * getDoubleTy(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00229">Type.cpp:229</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A, *B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00086">README_ALTIVEC.txt:86</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">llvm::CmpInst::ICMP_ULE</a></div><div class="ttdeci">@ ICMP_ULE</div><div class="ttdoc">unsigned less or equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00744">InstrTypes.h:744</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARM__PROC_html_aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5"><div class="ttname"><a href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">llvm::ARM_PROC::A</a></div><div class="ttdeci">@ A</div><div class="ttdef"><b>Definition:</b> <a href="MCTargetDesc_2ARMBaseInfo_8h_source.html#l00034">ARMBaseInfo.h:34</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a5c5efa376b5dcc0c0b0628d89882a498"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a5c5efa376b5dcc0c0b0628d89882a498">llvm::InstCombinerImpl::visitSIToFP</a></div><div class="ttdeci">Instruction * visitSIToFP(CastInst &amp;CI)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l02046">InstCombineCasts.cpp:2046</a></div></div>
<div class="ttc" id="axxhash_8cpp_html_ae4e947c75dafebd71b8de03cd0dbf5d6"><div class="ttname"><a href="xxhash_8cpp.html#ae4e947c75dafebd71b8de03cd0dbf5d6">round</a></div><div class="ttdeci">static uint64_t round(uint64_t Acc, uint64_t Input)</div><div class="ttdef"><b>Definition:</b> <a href="xxhash_8cpp_source.html#l00056">xxhash.cpp:56</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_a3217063f680fa8e35dea3c59b6e52b18"><div class="ttname"><a href="lib_2Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a></div><div class="ttdeci">Clang compiles this i1 i64 store i64 i64 store i64 i64 store i64 i64 store i64 align Which gets codegen d xmm0 movaps rbp movaps rbp movaps rbp movaps rbp rbp rbp rbp rbp It would be better to have movq s of instead of the movaps s LLVM produces ret int</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00536">README.txt:536</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a6adc65f05e61f4929966c0e4429c6fc7"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a6adc65f05e61f4929966c0e4429c6fc7">llvm::InstCombinerImpl::commonCastTransforms</a></div><div class="ttdeci">Instruction * commonCastTransforms(CastInst &amp;CI)</div><div class="ttdoc">Implement the transforms common to all CastInst visitors.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l00307">InstCombineCasts.cpp:307</a></div></div>
<div class="ttc" id="aOcamlGCPrinter_8cpp_html_afcf2f797ed287a723263583c9b1c1bce"><div class="ttname"><a href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a></div><div class="ttdeci">static GCMetadataPrinterRegistry::Add&lt; OcamlGCMetadataPrinter &gt; Y(&quot;ocaml&quot;, &quot;ocaml 3.10-compatible collector&quot;)</div></div>
<div class="ttc" id="aInstCombineCasts_8cpp_html_a6adfb24a056815dd3897407a90cd6b8e"><div class="ttname"><a href="InstCombineCasts_8cpp.html#a6adfb24a056815dd3897407a90cd6b8e">decomposeSimpleLinearExpr</a></div><div class="ttdeci">static Value * decomposeSimpleLinearExpr(Value *Val, unsigned &amp;Scale, uint64_t &amp;Offset)</div><div class="ttdoc">Analyze 'Val', seeing if it is a simple linear expression.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l00032">InstCombineCasts.cpp:32</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallInst_html_a850d8262cd900958b3153c4aa080b2bb"><div class="ttname"><a href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">llvm::CallInst::Create</a></div><div class="ttdeci">static CallInst * Create(FunctionType *Ty, Value *F, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01528">Instructions.h:1528</a></div></div>
<div class="ttc" id="aSIInstrInfo_8cpp_html_a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791"><div class="ttname"><a href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a></div><div class="ttdeci">@ SI</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8cpp_source.html#l07993">SIInstrInfo.cpp:7993</a></div></div>
<div class="ttc" id="aclassllvm_1_1CastInst_html_a7599aeed2eef48eedbf230f4a14a441a"><div class="ttname"><a href="classllvm_1_1CastInst.html#a7599aeed2eef48eedbf230f4a14a441a">llvm::CastInst::CreateFPCast</a></div><div class="ttdeci">static CastInst * CreateFPCast(Value *S, Type *Ty, const Twine &amp;Name=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Create an FPExt, BitCast, or FPTrunc for fp -&gt; fp casts.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l03548">Instructions.cpp:3548</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a1bc022868b23918efa44df511f4d5b61"><div class="ttname"><a href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">llvm::Type::isVectorTy</a></div><div class="ttdeci">bool isVectorTy() const</div><div class="ttdoc">True if this is an instance of VectorType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00258">Type.h:258</a></div></div>
<div class="ttc" id="aclassllvm_1_1Attribute_html_a190a29f5df3964b269383c0d6fba0ea9"><div class="ttname"><a href="classllvm_1_1Attribute.html#a190a29f5df3964b269383c0d6fba0ea9">llvm::Attribute::getVScaleRangeMax</a></div><div class="ttdeci">std::optional&lt; unsigned &gt; getVScaleRangeMax() const</div><div class="ttdoc">Returns the maximum value for the vscale_range attribute or std::nullopt when unknown.</div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l00375">Attributes.cpp:375</a></div></div>
<div class="ttc" id="anamespacellvm_1_1dwarf_html_a5d3c920b66ea797d6adb243862fdf47a"><div class="ttname"><a href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">llvm::dwarf::Index</a></div><div class="ttdeci">Index</div><div class="ttdef"><b>Definition:</b> <a href="Dwarf_8h_source.html#l00550">Dwarf.h:550</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a2cbdca7c8267aac6914d674f8e81841b"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">llvm::PatternMatch::m_ZExt</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::ZExt &gt; m_ZExt(const OpTy &amp;Op)</div><div class="ttdoc">Matches ZExt.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01629">PatternMatch.h:1629</a></div></div>
<div class="ttc" id="anamespacellvm_html_a646986783f35e0fef8988f0f28d2589f"><div class="ttname"><a href="namespacellvm.html#a646986783f35e0fef8988f0f28d2589f">llvm::Log2_32</a></div><div class="ttdeci">unsigned Log2_32(uint32_t Value)</div><div class="ttdoc">Return the floor log base 2 of the specified value, -1 if the value is zero.</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00382">MathExtras.h:382</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a7abf5fb4071cb25dbce06dfb5ee3c937"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a></div><div class="ttdeci">static GCRegistry::Add&lt; OcamlGC &gt; B(&quot;ocaml&quot;, &quot;ocaml 3.10-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a4c319db4fe05c27cfe55bd133a87414d"><div class="ttname"><a href="classllvm_1_1Function.html#a4c319db4fe05c27cfe55bd133a87414d">llvm::Function::getFnAttribute</a></div><div class="ttdeci">Attribute getFnAttribute(Attribute::AttrKind Kind) const</div><div class="ttdoc">Return the attribute for the given attribute kind.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00666">Function.cpp:666</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_afa0b2fa29ba074f2b6ec9ac11163f2d9"><div class="ttname"><a href="classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">llvm::Instruction::CastOps</a></div><div class="ttdeci">CastOps</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00823">Instruction.h:823</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_af431ec215bba8bb9c56e7541d99920f2"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#af431ec215bba8bb9c56e7541d99920f2">llvm::PatternMatch::m_FNeg</a></div><div class="ttdeci">FNeg_match&lt; OpTy &gt; m_FNeg(const OpTy &amp;X)</div><div class="ttdoc">Match 'fneg X' as 'fsub -0.0, X'.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01033">PatternMatch.h:1033</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_a4d51384de6e1798bb6aa875aebeea9f0"><div class="ttname"><a href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">llvm::Constant::getAllOnesValue</a></div><div class="ttdeci">static Constant * getAllOnesValue(Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00403">Constants.cpp:403</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html_a31bf07f3f61525486633bc1d0bbaf029"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">llvm::BinaryOperator::getOpcode</a></div><div class="ttdeci">BinaryOps getOpcode() const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00391">InstrTypes.h:391</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a677ac8d99ff3c2d32a95c21de9ed372c"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">llvm::PatternMatch::m_ConstantInt</a></div><div class="ttdeci">class_match&lt; ConstantInt &gt; m_ConstantInt()</div><div class="ttdoc">Match an arbitrary ConstantInt and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00147">PatternMatch.h:147</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00041">Instruction.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a9f382207d841377156d4c7868b66b9a5"><div class="ttname"><a href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">llvm::Type::getScalarSizeInBits</a></div><div class="ttdeci">unsigned getScalarSizeInBits() const LLVM_READONLY</div><div class="ttdoc">If this is a vector type, return the getPrimitiveSizeInBits value for the element type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00188">Type.cpp:188</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a7af604b3a6b3a44113d4c54c5c04d031"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">llvm::PatternMatch::m_c_Or</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Or, true &gt; m_c_Or(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches an Or with LHS and RHS in either order.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02269">PatternMatch.h:2269</a></div></div>
<div class="ttc" id="aInstCombineCasts_8cpp_html_aeae569e7fa3c87e7e39d5b5b04336464"><div class="ttname"><a href="InstCombineCasts_8cpp.html#aeae569e7fa3c87e7e39d5b5b04336464">optimizeVectorResizeWithIntegerBitCasts</a></div><div class="ttdeci">static Instruction * optimizeVectorResizeWithIntegerBitCasts(Value *InVal, VectorType *DestTy, InstCombinerImpl &amp;IC)</div><div class="ttdoc">This input value (which is known to have vector type) is being zero extended or truncated to the spec...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l02153">InstCombineCasts.cpp:2153</a></div></div>
<div class="ttc" id="aclassllvm_1_1AllocaInst_html_aaca14fdf6d151782f7ab0a66405453fb"><div class="ttname"><a href="classllvm_1_1AllocaInst.html#aaca14fdf6d151782f7ab0a66405453fb">llvm::AllocaInst::getArraySize</a></div><div class="ttdeci">const Value * getArraySize() const</div><div class="ttdoc">Get the number of elements allocated.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00096">Instructions.h:96</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a217e0207d9cc8e046c2dccbf0e4bb198"><div class="ttname"><a href="classllvm_1_1APInt.html#a217e0207d9cc8e046c2dccbf0e4bb198">llvm::APInt::getZExtValue</a></div><div class="ttdeci">uint64_t getZExtValue() const</div><div class="ttdoc">Get zero extended value.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01494">APInt.h:1494</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantFP_html"><div class="ttname"><a href="classllvm_1_1ConstantFP.html">llvm::ConstantFP</a></div><div class="ttdoc">ConstantFP - Floating Point Values [float, double].</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00256">Constants.h:256</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_adcb96bd09d7c75c7669fa5f9d1190899"><div class="ttname"><a href="classllvm_1_1APInt.html#adcb96bd09d7c75c7669fa5f9d1190899">llvm::APInt::getHighBitsSet</a></div><div class="ttdeci">static APInt getHighBitsSet(unsigned numBits, unsigned hiBitsSet)</div><div class="ttdoc">Constructs an APInt value that has the top hiBitsSet bits set.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00279">APInt.h:279</a></div></div>
<div class="ttc" id="aclassllvm_1_1UndefValue_html_a4ae5ff22b700a42bcc5d889233721335"><div class="ttname"><a href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">llvm::UndefValue::get</a></div><div class="ttdeci">static UndefValue * get(Type *T)</div><div class="ttdoc">Static factory methods - Return an 'undef' object of the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01740">Constants.cpp:1740</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html">llvm::InstCombinerImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="InstCombineInternal_8h_source.html#l00061">InstCombineInternal.h:61</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a969709dd49c28865a482d8b870f87c46"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">llvm::ConstantInt::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, uint64_t V, bool IsSigned=false)</div><div class="ttdoc">If Ty is a vector type, return a Constant with a splat of the given value.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00887">Constants.cpp:887</a></div></div>
<div class="ttc" id="aPatternMatch_8h_html"><div class="ttname"><a href="PatternMatch_8h.html">PatternMatch.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1CastInst_html_aab2e21628e0e96267839b852a708b38a"><div class="ttname"><a href="classllvm_1_1CastInst.html#aab2e21628e0e96267839b852a708b38a">llvm::CastInst::CreateTruncOrBitCast</a></div><div class="ttdeci">static CastInst * CreateTruncOrBitCast(Value *S, Type *Ty, const Twine &amp;Name=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Create a Trunc or BitCast cast instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l03430">Instructions.cpp:3430</a></div></div>
<div class="ttc" id="aclassllvm_1_1FixedVectorType_html_af9a870d5df50fe0133a410b7c9114c80"><div class="ttname"><a href="classllvm_1_1FixedVectorType.html#af9a870d5df50fe0133a410b7c9114c80">llvm::FixedVectorType::get</a></div><div class="ttdeci">static FixedVectorType * get(Type *ElementType, unsigned NumElts)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00686">Type.cpp:686</a></div></div>
<div class="ttc" id="astructllvm_1_1Align_html"><div class="ttname"><a href="structllvm_1_1Align.html">llvm::Align</a></div><div class="ttdoc">This struct is a compact representation of a valid (non-zero power of two) alignment.</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00039">Alignment.h:39</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MCID_html_ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f"><div class="ttname"><a href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">llvm::MCID::Call</a></div><div class="ttdeci">@ Call</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00156">MCInstrDesc.h:156</a></div></div>
<div class="ttc" id="aclassllvm_1_1PointerType_html_a92c4ce3a0a429509bc46cc3875a48c24"><div class="ttname"><a href="classllvm_1_1PointerType.html#a92c4ce3a0a429509bc46cc3875a48c24">llvm::PointerType::isOpaque</a></div><div class="ttdeci">bool isOpaque() const</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00673">DerivedTypes.h:673</a></div></div>
<div class="ttc" id="aclassllvm_1_1CastInst_html_a6a1a810dc09bf349d1e1481931ce2baa"><div class="ttname"><a href="classllvm_1_1CastInst.html#a6a1a810dc09bf349d1e1481931ce2baa">llvm::CastInst::getSrcTy</a></div><div class="ttdeci">Type * getSrcTy() const</div><div class="ttdoc">Return the source type, as a convenience.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00680">InstrTypes.h:680</a></div></div>
<div class="ttc" id="aInstCombineCasts_8cpp_html_a3ee415805ed8e42dcfc56ec5b615ce99"><div class="ttname"><a href="InstCombineCasts_8cpp.html#a3ee415805ed8e42dcfc56ec5b615ce99">optimizeIntegerToVectorInsertions</a></div><div class="ttdeci">static Value * optimizeIntegerToVectorInsertions(BitCastInst &amp;CI, InstCombinerImpl &amp;IC)</div><div class="ttdoc">If the input is an 'or' instruction, we may be doing shifts and ors to assemble the elements of the v...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l02352">InstCombineCasts.cpp:2352</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_aef51af4b490af6b3bf2dfbc8737a8f9f"><div class="ttname"><a href="classllvm_1_1PHINode.html#aef51af4b490af6b3bf2dfbc8737a8f9f">llvm::PHINode::getNumIncomingValues</a></div><div class="ttdeci">unsigned getNumIncomingValues() const</div><div class="ttdoc">Return the number of incoming edges.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02790">Instructions.h:2790</a></div></div>
<div class="ttc" id="aErlangGCPrinter_8cpp_html_a74b474c0616ab55c1d9487f11fd31d26"><div class="ttname"><a href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a></div><div class="ttdeci">static GCMetadataPrinterRegistry::Add&lt; ErlangGCPrinter &gt; X(&quot;erlang&quot;, &quot;erlang-compatible garbage collector&quot;)</div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aebdb2700a77d10ae6f0ce115e23d9f77"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">llvm::PatternMatch::m_One</a></div><div class="ttdeci">cst_pred_ty&lt; is_one &gt; m_One()</div><div class="ttdoc">Match an integer 1 or a vector with all elements equal to 1.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00517">PatternMatch.h:517</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ae22f493ba8327ce92e87d3b96bce7017"><div class="ttname"><a href="classllvm_1_1Instruction.html#ae22f493ba8327ce92e87d3b96bce7017">llvm::Instruction::getMetadata</a></div><div class="ttdeci">MDNode * getMetadata(unsigned KindID) const</div><div class="ttdoc">Get the metadata of given kind attached to this Instruction.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00275">Instruction.h:275</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html_a968dc741b22158310b6f6a6645e29014"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#a968dc741b22158310b6f6a6645e29014">llvm::ArrayRef::take_back</a></div><div class="ttdeci">ArrayRef&lt; T &gt; take_back(size_t N=1) const</div><div class="ttdoc">Return a copy of *this with only the last N elements.</div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00233">ArrayRef.h:233</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_adf0290c7c322f0bf8b275d6b26410b52"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#adf0290c7c322f0bf8b275d6b26410b52">llvm::PatternMatch::m_ExtractElt</a></div><div class="ttdeci">TwoOps_match&lt; Val_t, Idx_t, Instruction::ExtractElement &gt; m_ExtractElt(const Val_t &amp;Val, const Idx_t &amp;Idx)</div><div class="ttdoc">Matches ExtractElementInst.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01492">PatternMatch.h:1492</a></div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_a07ed0bfaa124c15897944fe3eaa971ab"><div class="ttname"><a href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned long or uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad78da75bd1f157e72100f97d1ecdc756"><div class="ttname"><a href="namespacellvm.html#ad78da75bd1f157e72100f97d1ecdc756">llvm::all_equal</a></div><div class="ttdeci">bool all_equal(std::initializer_list&lt; T &gt; Values)</div><div class="ttdoc">Returns true if all Values in the initializer lists are equal or the list.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01986">STLExtras.h:1986</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a50b0daca4f05a8d2af14aec07f64f3cc"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a50b0daca4f05a8d2af14aec07f64f3cc">llvm::InstCombinerImpl::visitPtrToInt</a></div><div class="ttdeci">Instruction * visitPtrToInt(PtrToIntInst &amp;CI)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l02092">InstCombineCasts.cpp:2092</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a82e2ea7f0ab67e33e22b3a2a188feaba"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">llvm::PatternMatch::m_Xor</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Xor &gt; m_Xor(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01105">PatternMatch.h:1105</a></div></div>
<div class="ttc" id="aclassllvm_1_1PtrToIntInst_html_a133fac5e4f7eefebb884a5da121008bc"><div class="ttname"><a href="classllvm_1_1PtrToIntInst.html#a133fac5e4f7eefebb884a5da121008bc">llvm::PtrToIntInst::getPointerOperand</a></div><div class="ttdeci">Value * getPointerOperand()</div><div class="ttdoc">Gets the pointer operand.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l05233">Instructions.h:5233</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_ac6d28a9b11139182134a9618028a0d07"><div class="ttname"><a href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">llvm::Type::isIntegerTy</a></div><div class="ttdeci">bool isIntegerTy() const</div><div class="ttdoc">True if this is an instance of IntegerType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00222">Type.h:222</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aa41636955199b88164376e06e5914855"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aa41636955199b88164376e06e5914855">llvm::PatternMatch::m_Shr</a></div><div class="ttdeci">BinOpPred_match&lt; LHS, RHS, is_right_shift_op &gt; m_Shr(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches logical shift operations.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01303">PatternMatch.h:1303</a></div></div>
<div class="ttc" id="aCombinerHelper_8cpp_html_a4743a8a472e0491e534c1efd2935a1a9"><div class="ttname"><a href="CombinerHelper_8cpp.html#a4743a8a472e0491e534c1efd2935a1a9">isBigEndian</a></div><div class="ttdeci">static std::optional&lt; bool &gt; isBigEndian(const SmallDenseMap&lt; int64_t, int64_t, 8 &gt; &amp;MemOffset2Idx, int64_t LowestIdx)</div><div class="ttdoc">Given a map from byte offsets in memory to indices in a load/store, determine if that map corresponds...</div><div class="ttdef"><b>Definition:</b> <a href="CombinerHelper_8cpp_source.html#l00112">CombinerHelper.cpp:112</a></div></div>
<div class="ttc" id="aclassllvm_1_1VectorType_html_a071e25c5c6eae5299b1cdc3350c6d55c"><div class="ttname"><a href="classllvm_1_1VectorType.html#a071e25c5c6eae5299b1cdc3350c6d55c">llvm::VectorType::isValidElementType</a></div><div class="ttdeci">static bool isValidElementType(Type *ElemTy)</div><div class="ttdoc">Return true if the specified type is valid as a element type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00677">Type.cpp:677</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a43a1d060dacb05eb645cf91ea86d7bd3"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a43a1d060dacb05eb645cf91ea86d7bd3">llvm::InstCombinerImpl::visitTrunc</a></div><div class="ttdeci">Instruction * visitTrunc(TruncInst &amp;CI)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l00811">InstCombineCasts.cpp:811</a></div></div>
<div class="ttc" id="aclassllvm_1_1VectorType_html"><div class="ttname"><a href="classllvm_1_1VectorType.html">llvm::VectorType</a></div><div class="ttdoc">Base class of all SIMD vector types.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00389">DerivedTypes.h:389</a></div></div>
<div class="ttc" id="anamespacellvm_1_1tgtok_html_abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac"><div class="ttname"><a href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a5fa7b4069ef3bd1ceb9f2caa315cf5ac">llvm::tgtok::In</a></div><div class="ttdeci">@ In</div><div class="ttdef"><b>Definition:</b> <a href="TGLexer_8h_source.html#l00051">TGLexer.h:51</a></div></div>
<div class="ttc" id="aclassllvm_1_1DataLayout_html_a84c1d72001dd5f34d9a55b3a7bb8a474"><div class="ttname"><a href="classllvm_1_1DataLayout.html#a84c1d72001dd5f34d9a55b3a7bb8a474">llvm::DataLayout::isBigEndian</a></div><div class="ttdeci">bool isBigEndian() const</div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00239">DataLayout.h:239</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_af238147cf5453729781a0fcc7322e1c6"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#af238147cf5453729781a0fcc7322e1c6">llvm::ConstantExpr::getTrunc</a></div><div class="ttdeci">static Constant * getTrunc(Constant *C, Type *Ty, bool OnlyIfReduced=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02091">Constants.cpp:2091</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_afb28a4deafe2954b0534cc6399ce518b"><div class="ttname"><a href="classllvm_1_1Function.html#afb28a4deafe2954b0534cc6399ce518b">llvm::Function::hasFnAttribute</a></div><div class="ttdeci">bool hasFnAttribute(Attribute::AttrKind Kind) const</div><div class="ttdoc">Return true if the function has the attribute.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00640">Function.cpp:640</a></div></div>
<div class="ttc" id="aclassllvm_1_1APFloat_html"><div class="ttname"><a href="classllvm_1_1APFloat.html">llvm::APFloat</a></div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00744">APFloat.h:744</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_ad9b99a13e459cb18bb386ddd610ecf8c"><div class="ttname"><a href="classllvm_1_1Type.html#ad9b99a13e459cb18bb386ddd610ecf8c">llvm::Type::getFPMantissaWidth</a></div><div class="ttdeci">int getFPMantissaWidth() const</div><div class="ttdoc">Return the width of the mantissa of this type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00193">Type.cpp:193</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a06d64f226fabd94d694d6abd82e3c7b3"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a06d64f226fabd94d694d6abd82e3c7b3">llvm::IRBuilderBase::CreateBitCast</a></div><div class="ttdeci">Value * CreateBitCast(Value *V, Type *DestTy, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l02008">IRBuilder.h:2008</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a9e42c3b6fa31029268e80ffc16d8aa24"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a9e42c3b6fa31029268e80ffc16d8aa24">llvm::InstCombinerImpl::PromoteCastOfAllocation</a></div><div class="ttdeci">Instruction * PromoteCastOfAllocation(BitCastInst &amp;CI, AllocaInst &amp;AI)</div><div class="ttdoc">If we find a cast of an allocation instruction, try to eliminate the cast by moving the type informat...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l00087">InstCombineCasts.cpp:87</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html"><div class="ttname"><a href="classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">This is an important base class in LLVM.</div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1UnaryOperator_html_a9f731708e681757d51c4dc2a004873c8"><div class="ttname"><a href="classllvm_1_1UnaryOperator.html#a9f731708e681757d51c4dc2a004873c8">llvm::UnaryOperator::CreateFNegFMF</a></div><div class="ttdeci">static UnaryOperator * CreateFNegFMF(Value *Op, Instruction *FMFSource, const Twine &amp;Name=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00163">InstrTypes.h:163</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_aee0f586f3e5fc07e4c55d3e8caade9a6"><div class="ttname"><a href="classllvm_1_1Constant.html#aee0f586f3e5fc07e4c55d3e8caade9a6">llvm::Constant::isElementWiseEqual</a></div><div class="ttdeci">bool isElementWiseEqual(Value *Y) const</div><div class="ttdoc">Return true if this constant and a constant 'Y' are element-wise equal.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00284">Constants.cpp:284</a></div></div>
<div class="ttc" id="aclassllvm_1_1ICmpInst_html"><div class="ttname"><a href="classllvm_1_1ICmpInst.html">llvm::ICmpInst</a></div><div class="ttdoc">This instruction compares its operands according to the predicate given to the constructor.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01197">Instructions.h:1197</a></div></div>
<div class="ttc" id="aELFObjHandler_8cpp_html_aef61945034b9431b804748fc317c5548"><div class="ttname"><a href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a></div><div class="ttdeci">uint32_t Index</div><div class="ttdef"><b>Definition:</b> <a href="ELFObjHandler_8cpp_source.html#l00083">ELFObjHandler.cpp:83</a></div></div>
<div class="ttc" id="aInstCombineCasts_8cpp_html_ad1cc57bee1a5945eaa94cb3e3692a5a2"><div class="ttname"><a href="InstCombineCasts_8cpp.html#ad1cc57bee1a5945eaa94cb3e3692a5a2">shrinkFPConstant</a></div><div class="ttdeci">static Type * shrinkFPConstant(ConstantFP *CFP)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l01657">InstCombineCasts.cpp:1657</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html_a3b9d9c1b6e4b743230c9c377c40a4247"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a3b9d9c1b6e4b743230c9c377c40a4247">llvm::BinaryOperator::CreateFMulFMF</a></div><div class="ttdeci">static BinaryOperator * CreateFMulFMF(Value *V1, Value *V2, Instruction *FMFSource, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00266">InstrTypes.h:266</a></div></div>
<div class="ttc" id="aclassllvm_1_1FPToSIInst_html"><div class="ttname"><a href="classllvm_1_1FPToSIInst.html">llvm::FPToSIInst</a></div><div class="ttdoc">This class represents a cast from floating point to signed integer.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l05125">Instructions.h:5125</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombiner_html_a66eb0dc4cd710cba31cbf66f6c031bfb"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a66eb0dc4cd710cba31cbf66f6c031bfb">llvm::InstCombiner::getDataLayout</a></div><div class="ttdeci">const DataLayout &amp; getDataLayout() const</div><div class="ttdef"><b>Definition:</b> <a href="InstCombiner_8h_source.html#l00372">InstCombiner.h:372</a></div></div>
<div class="ttc" id="aELFObjHandler_8cpp_html_a9df82a8be2f17e80535a8937bf23e022"><div class="ttname"><a href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a></div><div class="ttdeci">uint64_t Addr</div><div class="ttdef"><b>Definition:</b> <a href="ELFObjHandler_8cpp_source.html#l00079">ELFObjHandler.cpp:79</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a9567d315d63f844326900f461f5b3d7a"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a9567d315d63f844326900f461f5b3d7a">llvm::InstCombinerImpl::visitIntToPtr</a></div><div class="ttdeci">Instruction * visitIntToPtr(IntToPtrInst &amp;CI)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l02050">InstCombineCasts.cpp:2050</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a2fd1d2dc14e22227cfa8238778ab87b8"><div class="ttname"><a href="classllvm_1_1Instruction.html#a2fd1d2dc14e22227cfa8238778ab87b8">llvm::Instruction::user_back</a></div><div class="ttdeci">Instruction * user_back()</div><div class="ttdoc">Specialize the methods defined in Value, as we know that an instruction can only be used by other ins...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00087">Instruction.h:87</a></div></div>
<div class="ttc" id="aclassllvm_1_1TruncInst_html"><div class="ttname"><a href="classllvm_1_1TruncInst.html">llvm::TruncInst</a></div><div class="ttdoc">This class represents a truncation of integer types.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l04813">Instructions.h:4813</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_ac0e8c554bf1c1e117a74d51df89c137d"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#ac0e8c554bf1c1e117a74d51df89c137d">llvm::IRBuilderBase::getInt32</a></div><div class="ttdeci">ConstantInt * getInt32(uint32_t C)</div><div class="ttdoc">Get a constant 32-bit value.</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00472">IRBuilder.h:472</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_a089cccb6f231efee72abc76d0f9c695f"><div class="ttname"><a href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">llvm::PHINode::addIncoming</a></div><div class="ttdeci">void addIncoming(Value *V, BasicBlock *BB)</div><div class="ttdoc">Add an incoming value to the end of the PHI list.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02854">Instructions.h:2854</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a42569041ddafba7d40243e126af07f42"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">llvm::PatternMatch::m_Or</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Or &gt; m_Or(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01099">PatternMatch.h:1099</a></div></div>
<div class="ttc" id="aInstCombineCasts_8cpp_html_aac5576a66149a9259706758d613ba555"><div class="ttname"><a href="InstCombineCasts_8cpp.html#aac5576a66149a9259706758d613ba555">isKnownExactCastIntToFP</a></div><div class="ttdeci">static bool isKnownExactCastIntToFP(CastInst &amp;I, InstCombinerImpl &amp;IC)</div><div class="ttdoc">Return true if the cast from integer to FP can be proven to be exact for all possible inputs (the con...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l01739">InstCombineCasts.cpp:1739</a></div></div>
<div class="ttc" id="anamespacellvm_1_1numbers_html_a92f4283d4e0e2ea1776894b3ae93640f"><div class="ttname"><a href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">llvm::numbers::e</a></div><div class="ttdeci">constexpr double e</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00031">MathExtras.h:31</a></div></div>
<div class="ttc" id="aIR_2DebugInfo_8h_html"><div class="ttname"><a href="IR_2DebugInfo_8h.html">DebugInfo.h</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a9ac14c99f4eb098f5ee3ee89908591b3"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a9ac14c99f4eb098f5ee3ee89908591b3">llvm::InstCombinerImpl::visitFPToUI</a></div><div class="ttdeci">Instruction * visitFPToUI(FPToUIInst &amp;FI)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l02028">InstCombineCasts.cpp:2028</a></div></div>
<div class="ttc" id="aclassllvm_1_1UndefValue_html"><div class="ttname"><a href="classllvm_1_1UndefValue.html">llvm::UndefValue</a></div><div class="ttdoc">'undef' values are things that do not have specified contents.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l01382">Constants.h:1382</a></div></div>
<div class="ttc" id="aclassllvm_1_1GetElementPtrInst_html"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html">llvm::GetElementPtrInst</a></div><div class="ttdoc">an instruction for type-safe pointer arithmetic to access elements of arrays and structs</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00940">Instructions.h:940</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_aa5ad9e9e7cc67e1675d8d1631a73e625"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#aa5ad9e9e7cc67e1675d8d1631a73e625">llvm::ConstantExpr::getShl</a></div><div class="ttdeci">static Constant * getShl(Constant *C1, Constant *C2, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02695">Constants.cpp:2695</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8154638df88e4eaa568b67b23d463dac"><div class="ttname"><a href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a></div><div class="ttdeci">iterator_range&lt; early_inc_iterator_impl&lt; detail::IterOfRange&lt; RangeT &gt; &gt; &gt; make_early_inc_range(RangeT &amp;&amp;Range)</div><div class="ttdoc">Make a range that does early increment to allow mutation of the underlying range without disrupting i...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00721">STLExtras.h:721</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_adc8a4e6a8e701e1924f0293da78badb6"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#adc8a4e6a8e701e1924f0293da78badb6">llvm::ConstantExpr::getOr</a></div><div class="ttdeci">static Constant * getOr(Constant *C1, Constant *C2)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02682">Constants.cpp:2682</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a427435d4da769ae680a8e77ef89520aa"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">llvm::PatternMatch::m_And</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::And &gt; m_And(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01093">PatternMatch.h:1093</a></div></div>
<div class="ttc" id="aclassllvm_1_1PointerType_html"><div class="ttname"><a href="classllvm_1_1PointerType.html">llvm::PointerType</a></div><div class="ttdoc">Class to represent pointers.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00632">DerivedTypes.h:632</a></div></div>
<div class="ttc" id="astructllvm_1_1KnownBits_html_a825476b2436eb817b735fdd34ee521c4"><div class="ttname"><a href="structllvm_1_1KnownBits.html#a825476b2436eb817b735fdd34ee521c4">llvm::KnownBits::getMaxValue</a></div><div class="ttdeci">APInt getMaxValue() const</div><div class="ttdoc">Return the maximal unsigned value possible given these KnownBits.</div><div class="ttdef"><b>Definition:</b> <a href="KnownBits_8h_source.html#l00136">KnownBits.h:136</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa1f8f0633edd8b9a1c5ec15bb9fc5640"><div class="ttname"><a href="namespacellvm.html#aa1f8f0633edd8b9a1c5ec15bb9fc5640">llvm::computeKnownBits</a></div><div class="ttdeci">void computeKnownBits(const Value *V, KnownBits &amp;Known, const DataLayout &amp;DL, unsigned Depth=0, AssumptionCache *AC=nullptr, const Instruction *CxtI=nullptr, const DominatorTree *DT=nullptr, OptimizationRemarkEmitter *ORE=nullptr, bool UseInstrInfo=true)</div><div class="ttdoc">Determine which bits of V are known to be either zero or one and return them in the KnownZero/KnownOn...</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l00186">ValueTracking.cpp:186</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ac3ed5602889a22db44a16e1b97fac5b8"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ac3ed5602889a22db44a16e1b97fac5b8">llvm::PatternMatch::m_Sub</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Sub &gt; m_Sub(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00991">PatternMatch.h:991</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_ab05ba39ce6e678149dabd939c9ad4c3e"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#ab05ba39ce6e678149dabd939c9ad4c3e">llvm::InstCombinerImpl::EvaluateInDifferentType</a></div><div class="ttdeci">Value * EvaluateInDifferentType(Value *V, Type *Ty, bool isSigned)</div><div class="ttdoc">Given an expression that CanEvaluateTruncated or CanEvaluateSExtd returns true for,...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l00190">InstCombineCasts.cpp:190</a></div></div>
<div class="ttc" id="anamespacestd_html_ab8424022895aee3e366fb9a32f2883cb"><div class="ttname"><a href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a></div><div class="ttdeci">void swap(llvm::BitVector &amp;LHS, llvm::BitVector &amp;RHS)</div><div class="ttdoc">Implement std::swap in terms of BitVector swap.</div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00853">BitVector.h:853</a></div></div>
<div class="ttc" id="astructllvm_1_1KnownBits_html_a7f47812e8e75b0616a97d7004e5fb909"><div class="ttname"><a href="structllvm_1_1KnownBits.html#a7f47812e8e75b0616a97d7004e5fb909">llvm::KnownBits::countMinLeadingZeros</a></div><div class="ttdeci">unsigned countMinLeadingZeros() const</div><div class="ttdoc">Returns the minimum number of leading zero bits.</div><div class="ttdef"><b>Definition:</b> <a href="KnownBits_8h_source.html#l00243">KnownBits.h:243</a></div></div>
<div class="ttc" id="aclassllvm_1_1SelectInst_html"><div class="ttname"><a href="classllvm_1_1SelectInst.html">llvm::SelectInst</a></div><div class="ttdoc">This class represents the LLVM 'select' instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01746">Instructions.h:1746</a></div></div>
<div class="ttc" id="aclassllvm_1_1FPToUIInst_html"><div class="ttname"><a href="classllvm_1_1FPToUIInst.html">llvm::FPToUIInst</a></div><div class="ttdoc">This class represents a cast from floating point to unsigned integer.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l05086">Instructions.h:5086</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aadd209ba7e1bfa8113a609e09a7fe62f"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">llvm::PatternMatch::m_Constant</a></div><div class="ttdeci">class_match&lt; Constant &gt; m_Constant()</div><div class="ttdoc">Match an arbitrary Constant and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00144">PatternMatch.h:144</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9784a018b2dd6a85ee8a70f5f5ab3d02"><div class="ttname"><a href="namespacellvm.html#a9784a018b2dd6a85ee8a70f5f5ab3d02">llvm::replaceAllDbgUsesWith</a></div><div class="ttdeci">bool replaceAllDbgUsesWith(Instruction &amp;From, Value &amp;To, Instruction &amp;DomPoint, DominatorTree &amp;DT)</div><div class="ttdoc">Point debug users of From to To or salvage them.</div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Utils_2Local_8cpp_source.html#l02171">Local.cpp:2171</a></div></div>
<div class="ttc" id="aAssumeBundleBuilder_8cpp_html_afb136e0532bcaed86521b462e6538d62"><div class="ttname"><a href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a></div><div class="ttdeci">assume Assume Builder</div><div class="ttdef"><b>Definition:</b> <a href="AssumeBundleBuilder_8cpp_source.html#l00651">AssumeBundleBuilder.cpp:651</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a24bca8838396aa81b87de8e7ac774b19"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">llvm::PatternMatch::m_Value</a></div><div class="ttdeci">class_match&lt; Value &gt; m_Value()</div><div class="ttdoc">Match an arbitrary value and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00076">PatternMatch.h:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1ZExtInst_html"><div class="ttname"><a href="classllvm_1_1ZExtInst.html">llvm::ZExtInst</a></div><div class="ttdoc">This class represents zero extension of integer types.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l04852">Instructions.h:4852</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html"><div class="ttname"><a href="classllvm_1_1APInt.html">llvm::APInt</a></div><div class="ttdoc">Class for arbitrary precision integers.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00075">APInt.h:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_a72d928b7fc2c5f2d56c6ac0265fd9c6e"><div class="ttname"><a href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallDenseSet&lt; T, N &gt; &gt;::insert</a></div><div class="ttdeci">bool insert(const value_type &amp;X)</div><div class="ttdoc">Insert a new element into the SetVector.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00141">SetVector.h:141</a></div></div>
<div class="ttc" id="aM68kELFObjectWriter_8cpp_html_ae4a8bc3879d2282eefd72b16b12c2a37"><div class="ttname"><a href="M68kELFObjectWriter_8cpp.html#ae4a8bc3879d2282eefd72b16b12c2a37">getType</a></div><div class="ttdeci">static M68kRelType getType(unsigned Kind, MCSymbolRefExpr::VariantKind &amp;Modifier, bool &amp;IsPCRel)</div><div class="ttdef"><b>Definition:</b> <a href="M68kELFObjectWriter_8cpp_source.html#l00048">M68kELFObjectWriter.cpp:48</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">llvm::CmpInst::ICMP_SLT</a></div><div class="ttdeci">@ ICMP_SLT</div><div class="ttdoc">signed less than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00747">InstrTypes.h:747</a></div></div>
<div class="ttc" id="aclassllvm_1_1GetElementPtrInst_html_a74c47d18ecd4ca3399785e6ae07134dc"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html#a74c47d18ecd4ca3399785e6ae07134dc">llvm::GetElementPtrInst::Create</a></div><div class="ttdeci">static GetElementPtrInst * Create(Type *PointeeType, Value *Ptr, ArrayRef&lt; Value * &gt; IdxList, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00966">Instructions.h:966</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aaab494a433fbb23bc68393ee8bcfc5ac"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">llvm::PatternMatch::m_SExt</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::SExt &gt; m_SExt(const OpTy &amp;Op)</div><div class="ttdoc">Matches SExt.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01623">PatternMatch.h:1623</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a3acbd0be97863e3e03e3b85641254018"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">llvm::PatternMatch::m_SpecificInt</a></div><div class="ttdeci">specific_intval&lt; false &gt; m_SpecificInt(APInt V)</div><div class="ttdoc">Match a specific integer value or vector with all elements equal to the value.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00854">PatternMatch.h:854</a></div></div>
<div class="ttc" id="aInstCombineCasts_8cpp_html_acf5fb08bdf9cb34b13c3268ae5a4ec47"><div class="ttname"><a href="InstCombineCasts_8cpp.html#acf5fb08bdf9cb34b13c3268ae5a4ec47">foldBitCastBitwiseLogic</a></div><div class="ttdeci">static Instruction * foldBitCastBitwiseLogic(BitCastInst &amp;BitCast, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdoc">Change the type of a bitwise logic operation if we can eliminate a bitcast.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l02408">InstCombineCasts.cpp:2408</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef&lt; int &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html">llvm::BinaryOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00187">InstrTypes.h:187</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_ae0f503db91504a3f3440ab81260e4134"><div class="ttname"><a href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a></div><div class="ttdeci">BinaryOperator * Mul</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00070">X86PartialReduction.cpp:70</a></div></div>
<div class="ttc" id="aDataLayout_8h_html"><div class="ttname"><a href="DataLayout_8h.html">DataLayout.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_abb22519fa3bf66d9e0bc6d1a733a5821"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#abb22519fa3bf66d9e0bc6d1a733a5821">llvm::PatternMatch::m_SpecificInt_ICMP</a></div><div class="ttdeci">cst_pred_ty&lt; icmp_pred_with_threshold &gt; m_SpecificInt_ICMP(ICmpInst::Predicate Predicate, const APInt &amp;Threshold)</div><div class="ttdoc">Match an integer or vector with every element comparing 'pred' (eg/ne/...) to Threshold.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00598">PatternMatch.h:598</a></div></div>
<div class="ttc" id="aBasicBlockSections_8cpp_html_a5fd0741d696f28faf65b33f6c6af8fda"><div class="ttname"><a href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a></div><div class="ttdeci">SmallVector&lt; MachineOperand, 4 &gt; Cond</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockSections_8cpp_source.html#l00137">BasicBlockSections.cpp:137</a></div></div>
<div class="ttc" id="astructllvm_1_1APFloatBase_html_a6ba7c3d54a5a714f7a27861ee114cce3"><div class="ttname"><a href="structllvm_1_1APFloatBase.html#a6ba7c3d54a5a714f7a27861ee114cce3">llvm::APFloatBase::IEEEdouble</a></div><div class="ttdeci">static const fltSemantics &amp; IEEEdouble() LLVM_READNONE</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8cpp_source.html#l00247">APFloat.cpp:247</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_adea6dc2e42baa345b97be48b0370313d"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#adea6dc2e42baa345b97be48b0370313d">llvm::PatternMatch::m_Undef</a></div><div class="ttdeci">auto m_Undef()</div><div class="ttdoc">Match an arbitrary undef constant.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00136">PatternMatch.h:136</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_af025ad055219d45906eca0e4fc0dafb7"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#af025ad055219d45906eca0e4fc0dafb7">llvm::ConstantExpr::getUMin</a></div><div class="ttdeci">static Constant * getUMin(Constant *C1, Constant *C2)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02690">Constants.cpp:2690</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">llvm::CmpInst::ICMP_ULT</a></div><div class="ttdeci">@ ICMP_ULT</div><div class="ttdoc">unsigned less than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00743">InstrTypes.h:743</a></div></div>
<div class="ttc" id="aSupport_2ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdoc">Marks that the current location is not supposed to be reachable.</div><div class="ttdef"><b>Definition:</b> <a href="Support_2ErrorHandling_8h_source.html#l00143">ErrorHandling.h:143</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a6393a2d4fe7e10b28a0dcc35f881567b"><div class="ttname"><a href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const</div><div class="ttdoc">All values are typed, get the type of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00255">Value.h:255</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a6a66ebb3aa12757479a3c88de77d78f8"><div class="ttname"><a href="classllvm_1_1Instruction.html#a6a66ebb3aa12757479a3c88de77d78f8">llvm::Instruction::getFunction</a></div><div class="ttdeci">const Function * getFunction() const</div><div class="ttdoc">Return the function this instruction belongs to.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00074">Instruction.cpp:74</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_afd3e8a6706810fef8cdbaf1f9f40dfbd"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#afd3e8a6706810fef8cdbaf1f9f40dfbd">llvm::PatternMatch::m_Shuffle</a></div><div class="ttdeci">TwoOps_match&lt; V1_t, V2_t, Instruction::ShuffleVector &gt; m_Shuffle(const V1_t &amp;v1, const V2_t &amp;v2)</div><div class="ttdoc">Matches ShuffleVectorInst independently of mask value.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01551">PatternMatch.h:1551</a></div></div>
<div class="ttc" id="aclassuint32__t_html"><div class="ttname"><a href="classuint32__t.html">uint32_t</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombiner_html_ae506e7be0a7aaf9001e31d5fca5f2fbc"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#ae506e7be0a7aaf9001e31d5fca5f2fbc">llvm::InstCombiner::MaskedValueIsZero</a></div><div class="ttdeci">bool MaskedValueIsZero(const Value *V, const APInt &amp;Mask, unsigned Depth=0, const Instruction *CxtI=nullptr) const</div><div class="ttdef"><b>Definition:</b> <a href="InstCombiner_8h_source.html#l00477">InstCombiner.h:477</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ab3fc0225d8aaf8434026c3573f961f2c"><div class="ttname"><a href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">All values hold a context through their type.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00994">Value.cpp:994</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_1_1InsertPointGuard_html"><div class="ttname"><a href="classllvm_1_1IRBuilderBase_1_1InsertPointGuard.html">llvm::IRBuilderBase::InsertPointGuard</a></div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00361">IRBuilder.h:361</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html">llvm::IRBuilderBase</a></div><div class="ttdoc">Common base class shared among various IRBuilders.</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00094">IRBuilder.h:94</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_ad467c4ab9119043f9b7750ab986be61a"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a></div><div class="ttdeci">MachineBasicBlock MachineBasicBlock::iterator DebugLoc DL</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00076">AArch64SLSHardening.cpp:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1PtrToIntInst_html"><div class="ttname"><a href="classllvm_1_1PtrToIntInst.html">llvm::PtrToIntInst</a></div><div class="ttdoc">This class represents a cast from a pointer to an integer.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l05207">Instructions.h:5207</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a90d84324b6b6aa2a60077a79b31a49e7"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a90d84324b6b6aa2a60077a79b31a49e7">llvm::ConstantExpr::getIntegerCast</a></div><div class="ttdeci">static Constant * getIntegerCast(Constant *C, Type *Ty, bool IsSigned)</div><div class="ttdoc">Create a ZExt, Bitcast or Trunc for integer -&gt; integer casts.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02067">Constants.cpp:2067</a></div></div>
<div class="ttc" id="aclassllvm_1_1FPExtInst_html"><div class="ttname"><a href="classllvm_1_1FPExtInst.html">llvm::FPExtInst</a></div><div class="ttdoc">This class represents an extension of floating point types.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l04969">Instructions.h:4969</a></div></div>
<div class="ttc" id="aREADME-FPStack_8txt_html_aeb9a134c2755c0ad7801bf630a790904"><div class="ttname"><a href="README-FPStack_8txt.html#aeb9a134c2755c0ad7801bf630a790904">trunc</a></div><div class="ttdeci">We have fiadd patterns now but the followings have the same cost and complexity We need a way to specify the later is more profitable def def The FP stackifier should handle simple permutates to reduce number of shuffle e g trunc</div><div class="ttdef"><b>Definition:</b> <a href="README-FPStack_8txt_source.html#l00063">README-FPStack.txt:63</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a24a7664d83746bcda035bddeb773eaae"><div class="ttname"><a href="classllvm_1_1Instruction.html#a24a7664d83746bcda035bddeb773eaae">llvm::Instruction::copyFastMathFlags</a></div><div class="ttdeci">void copyFastMathFlags(FastMathFlags FMF)</div><div class="ttdoc">Convenience function for transferring all fast-math flag values to this instruction,...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00294">Instruction.cpp:294</a></div></div>
<div class="ttc" id="aclassllvm_1_1OverflowingBinaryOperator_html"><div class="ttname"><a href="classllvm_1_1OverflowingBinaryOperator.html">llvm::OverflowingBinaryOperator</a></div><div class="ttdoc">Utility class for integer operators which may exhibit overflow - Add, Sub, Mul, and Shl.</div><div class="ttdef"><b>Definition:</b> <a href="Operator_8h_source.html#l00075">Operator.h:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_ab03652069eab17006c51f00c261a6a44"><div class="ttname"><a href="classllvm_1_1Type.html#ab03652069eab17006c51f00c261a6a44">llvm::Type::isPtrOrPtrVectorTy</a></div><div class="ttdeci">bool isPtrOrPtrVectorTy() const</div><div class="ttdoc">Return true if this is a pointer type or a vector of pointer types.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00255">Type.h:255</a></div></div>
<div class="ttc" id="aclassllvm_1_1CastInst_html"><div class="ttname"><a href="classllvm_1_1CastInst.html">llvm::CastInst</a></div><div class="ttdoc">This is the base class for all instructions that perform data casts.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00428">InstrTypes.h:428</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a545e8d5dfa1688acea0d0e275b03682f"><div class="ttname"><a href="classllvm_1_1APInt.html#a545e8d5dfa1688acea0d0e275b03682f">llvm::APInt::ult</a></div><div class="ttdeci">bool ult(const APInt &amp;RHS) const</div><div class="ttdoc">Unsigned less than comparison.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01089">APInt.h:1089</a></div></div>
<div class="ttc" id="aclassllvm_1_1SExtInst_html"><div class="ttname"><a href="classllvm_1_1SExtInst.html">llvm::SExtInst</a></div><div class="ttdoc">This class represents a sign extension of integer types.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l04891">Instructions.h:4891</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_adb5c319f5905c1d3ca9eb5df546388c5"><div class="ttname"><a href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">Return a constant reference to the value's name.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00308">Value.cpp:308</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Intrinsic_html_aefa39f6b622360ce4e947feb9f671b73"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">llvm::Intrinsic::getDeclaration</a></div><div class="ttdeci">Function * getDeclaration(Module *M, ID id, ArrayRef&lt; Type * &gt; Tys=std::nullopt)</div><div class="ttdoc">Create or insert an LLVM Function declaration for an intrinsic, and return it.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l01502">Function.cpp:1502</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_ac09a21c371a9c535cbc13e8f82503aec"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#ac09a21c371a9c535cbc13e8f82503aec">llvm::ConstantInt::getZExtValue</a></div><div class="ttdeci">uint64_t getZExtValue() const</div><div class="ttdoc">Return the constant as a 64-bit unsigned integer value after it has been zero extended as appropriate...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00141">Constants.h:141</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a2997340992a508357b480467a6901c70"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a2997340992a508357b480467a6901c70">llvm::PatternMatch::m_FPExt</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::FPExt &gt; m_FPExt(const OpTy &amp;Op)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01687">PatternMatch.h:1687</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_aeeac018e2130669e49141f4795548c95"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#aeeac018e2130669e49141f4795548c95">llvm::InstCombinerImpl::commonPointerCastTransforms</a></div><div class="ttdeci">Instruction * commonPointerCastTransforms(CastInst &amp;CI)</div><div class="ttdoc">Implement the transforms for cast of pointer (bitcast/ptrtoint)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l02070">InstCombineCasts.cpp:2070</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_a3a76669632041022e6976766a22bd2b0"><div class="ttname"><a href="lib_2Target_2README_8txt.html#a3a76669632041022e6976766a22bd2b0">j</a></div><div class="ttdeci">return j(j&lt;&lt; 16)</div></div>
<div class="ttc" id="anamespacellvm_1_1NVPTX_1_1PTXLdStInstCode_html_a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4"><div class="ttname"><a href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">llvm::NVPTX::PTXLdStInstCode::V2</a></div><div class="ttdeci">@ V2</div><div class="ttdef"><b>Definition:</b> <a href="NVPTX_8h_source.html#l00124">NVPTX.h:124</a></div></div>
<div class="ttc" id="aInstCombineCasts_8cpp_html_aefd6331c5fd6ec51f6a9e5558f885f28"><div class="ttname"><a href="InstCombineCasts_8cpp.html#aefd6331c5fd6ec51f6a9e5558f885f28">canEvaluateTruncated</a></div><div class="ttdeci">static bool canEvaluateTruncated(Value *V, Type *Ty, InstCombinerImpl &amp;IC, Instruction *CxtI)</div><div class="ttdoc">Return true if we can evaluate the specified expression tree as type Ty instead of its larger type,...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l00410">InstCombineCasts.cpp:410</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_aa6574d526b3e38a28f688a7bb4325c2c"><div class="ttname"><a href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">llvm::Constant::getNullValue</a></div><div class="ttdeci">static Constant * getNullValue(Type *Ty)</div><div class="ttdoc">Constructor to create a '0' constant of arbitrary type.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00356">Constants.cpp:356</a></div></div>
<div class="ttc" id="astructllvm_1_1KnownBits_html"><div class="ttname"><a href="structllvm_1_1KnownBits.html">llvm::KnownBits</a></div><div class="ttdef"><b>Definition:</b> <a href="KnownBits_8h_source.html#l00023">KnownBits.h:23</a></div></div>
<div class="ttc" id="aclassllvm_1_1PointerType_html_a755dc3319157403bd85c2d3e97041b5c"><div class="ttname"><a href="classllvm_1_1PointerType.html#a755dc3319157403bd85c2d3e97041b5c">llvm::PointerType::hasSameElementTypeAs</a></div><div class="ttdeci">bool hasSameElementTypeAs(PointerType *Other)</div><div class="ttdoc">Return true if both pointer types have the same element type.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00696">DerivedTypes.h:696</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_ae550f2e9436b395b614b4377ba27007f"><div class="ttname"><a href="classllvm_1_1Type.html#ae550f2e9436b395b614b4377ba27007f">llvm::Type::getHalfTy</a></div><div class="ttdeci">static Type * getHalfTy(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00226">Type.cpp:226</a></div></div>
<div class="ttc" id="aclassllvm_1_1CastInst_html_a31d2885660f654b31d8741726c3ea8d9"><div class="ttname"><a href="classllvm_1_1CastInst.html#a31d2885660f654b31d8741726c3ea8d9">llvm::CastInst::CreateBitOrPointerCast</a></div><div class="ttdeci">static CastInst * CreateBitOrPointerCast(Value *S, Type *Ty, const Twine &amp;Name=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Create a BitCast, a PtrToInt, or an IntToPTr cast instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l03509">Instructions.cpp:3509</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1SendMsg_html_a8594419a4ddfad2c9a79279c490e466d"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">llvm::AMDGPU::SendMsg::Op</a></div><div class="ttdeci">Op</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00357">SIDefines.h:357</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_ab0ff669b12c20c07137705c38872ec63"><div class="ttname"><a href="classllvm_1_1PHINode.html#ab0ff669b12c20c07137705c38872ec63">llvm::PHINode::Create</a></div><div class="ttdeci">static PHINode * Create(Type *Ty, unsigned NumReservedValues, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Constructors - NumReservedValues is a hint for the number of incoming edges that this phi node will h...</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02750">Instructions.h:2750</a></div></div>
<div class="ttc" id="anamespacellvm_1_1X86_html_a86730e94ae6fdf0fe3145b2acc88dea8ac9b4c62f6dc1bc5caf3c768b687cbf7e"><div class="ttname"><a href="namespacellvm_1_1X86.html#a86730e94ae6fdf0fe3145b2acc88dea8ac9b4c62f6dc1bc5caf3c768b687cbf7e">llvm::X86::FirstMacroFusionInstKind::Cmp</a></div><div class="ttdeci">@ Cmp</div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html_a640fb8bb3d3ed856afb1e76b8bcd6e19"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#a640fb8bb3d3ed856afb1e76b8bcd6e19">llvm::ArrayRef::take_front</a></div><div class="ttdeci">ArrayRef&lt; T &gt; take_front(size_t N=1) const</div><div class="ttdoc">Return a copy of *this with only the first N elements.</div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00226">ArrayRef.h:226</a></div></div>
<div class="ttc" id="aInstCombineCasts_8cpp_html_a3d3ed8206aabad62293aeddd444bab9f"><div class="ttname"><a href="InstCombineCasts_8cpp.html#a3d3ed8206aabad62293aeddd444bab9f">canEvaluateZExtd</a></div><div class="ttdeci">static bool canEvaluateZExtd(Value *V, Type *Ty, unsigned &amp;BitsToClear, InstCombinerImpl &amp;IC, Instruction *CxtI)</div><div class="ttdoc">Determine if the specified value can be computed in the specified wider type and produce the same low...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l01130">InstCombineCasts.cpp:1130</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a56cd13409dd239e680e8eb1bae42fffc"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a56cd13409dd239e680e8eb1bae42fffc">llvm::PatternMatch::m_FPToSI</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::FPToSI &gt; m_FPToSI(const OpTy &amp;Op)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01677">PatternMatch.h:1677</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a34ee40bb2f4f5ece47ef19e5f1f57e3c"><div class="ttname"><a href="classllvm_1_1Type.html#a34ee40bb2f4f5ece47ef19e5f1f57e3c">llvm::Type::isIntOrIntVectorTy</a></div><div class="ttdeci">bool isIntOrIntVectorTy() const</div><div class="ttdoc">Return true if this is an integer type or a vector of integer types.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00228">Type.h:228</a></div></div>
<div class="ttc" id="astructllvm_1_1fltSemantics_html"><div class="ttname"><a href="structllvm_1_1fltSemantics.html">llvm::fltSemantics</a></div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8cpp_source.html#l00097">APFloat.cpp:97</a></div></div>
<div class="ttc" id="aclassllvm_1_1GetElementPtrInst_html_a056eabb719f475aa4c5a7e2ba11973b9"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html#a056eabb719f475aa4c5a7e2ba11973b9">llvm::GetElementPtrInst::getTypeAtIndex</a></div><div class="ttdeci">static Type * getTypeAtIndex(Type *Ty, Value *Idx)</div><div class="ttdoc">Return the type of the element at the given index of an indexable type.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l01860">Instructions.cpp:1860</a></div></div>
<div class="ttc" id="anamespacellvm_html_abee0df5f7f703bb4462aba260ba0a60f"><div class="ttname"><a href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">llvm::BitWidth</a></div><div class="ttdeci">constexpr unsigned BitWidth</div><div class="ttdef"><b>Definition:</b> <a href="BitmaskEnum_8h_source.html#l00147">BitmaskEnum.h:147</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_aa0fd6bf3d33236279db7b707bba755f4"><div class="ttname"><a href="classllvm_1_1Type.html#aa0fd6bf3d33236279db7b707bba755f4">llvm::Type::isDoubleTy</a></div><div class="ttdeci">bool isDoubleTy() const</div><div class="ttdoc">Return true if this is 'double', a 64-bit IEEE fp type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00157">Type.h:157</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_adf50671db83d2813e0d897ea2cfc9102"><div class="ttname"><a href="classllvm_1_1Function.html#adf50671db83d2813e0d897ea2cfc9102">llvm::Function::getFunctionType</a></div><div class="ttdeci">FunctionType * getFunctionType() const</div><div class="ttdoc">Returns the FunctionType for me.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00174">Function.h:174</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a874d53817a4923de8e58af6b278c09b0"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a874d53817a4923de8e58af6b278c09b0">llvm::PatternMatch::m_ZeroInt</a></div><div class="ttdeci">cst_pred_ty&lt; is_zero_int &gt; m_ZeroInt()</div><div class="ttdoc">Match an integer 0 or a vector with all elements equal to 0.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00524">PatternMatch.h:524</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_aab1f107496b17acc1bc5fdcdb2903b38"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#aab1f107496b17acc1bc5fdcdb2903b38">llvm::ConstantExpr::getLShr</a></div><div class="ttdeci">static Constant * getLShr(Constant *C1, Constant *C2, bool isExact=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02702">Constants.cpp:2702</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MCID_html_ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec"><div class="ttname"><a href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">llvm::MCID::Add</a></div><div class="ttdeci">@ Add</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00186">MCInstrDesc.h:186</a></div></div>
<div class="ttc" id="aclassllvm_1_1IntToPtrInst_html"><div class="ttname"><a href="classllvm_1_1IntToPtrInst.html">llvm::IntToPtrInst</a></div><div class="ttdoc">This class represents a cast from an integer to a pointer.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l05164">Instructions.h:5164</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1Hwreg_html_a6467ebe1e09a75203dd5f14bdfe21d11"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">llvm::AMDGPU::Hwreg::Width</a></div><div class="ttdeci">Width</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00449">SIDefines.h:449</a></div></div>
<div class="ttc" id="aclassllvm_1_1IntrinsicInst_html"><div class="ttname"><a href="classllvm_1_1IntrinsicInst.html">llvm::IntrinsicInst</a></div><div class="ttdoc">A wrapper class for inspecting calls to intrinsic functions.</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00047">IntrinsicInst.h:47</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a595e5029858e33416e500bed9317d309"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a595e5029858e33416e500bed9317d309">llvm::PatternMatch::m_LogicalShift</a></div><div class="ttdeci">BinOpPred_match&lt; LHS, RHS, is_logical_shift_op &gt; m_LogicalShift(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches logical shift operations.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01311">PatternMatch.h:1311</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_a31dbd9cf336966a863e37c5653b6c134"><div class="ttname"><a href="classllvm_1_1Constant.html#a31dbd9cf336966a863e37c5653b6c134">llvm::Constant::mergeUndefsWith</a></div><div class="ttdeci">static Constant * mergeUndefsWith(Constant *C, Constant *Other)</div><div class="ttdoc">Merges undefs of a Constant with another Constant, along with the undefs already present.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00779">Constants.cpp:779</a></div></div>
<div class="ttc" id="aInstCombineCasts_8cpp_html_a68d58b6cb8f56c90aa445f4857a8d430"><div class="ttname"><a href="InstCombineCasts_8cpp.html#a68d58b6cb8f56c90aa445f4857a8d430">fitsInFPType</a></div><div class="ttdeci">static bool fitsInFPType(ConstantFP *CFP, const fltSemantics &amp;Sem)</div><div class="ttdoc">Return a Constant* for the specified floating-point constant if it fits in the specified FP type with...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l01650">InstCombineCasts.cpp:1650</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a2175862566372c3684fe4f7bf62e3143"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a2175862566372c3684fe4f7bf62e3143">llvm::InstCombinerImpl::visitZExt</a></div><div class="ttdeci">Instruction * visitZExt(ZExtInst &amp;Zext)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l01243">InstCombineCasts.cpp:1243</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ac26154a24f393f523c87cc5f8239f36c"><div class="ttname"><a href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">llvm::Instruction::BinaryOps</a></div><div class="ttdeci">BinaryOps</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00809">Instruction.h:809</a></div></div>
<div class="ttc" id="aclassllvm_1_1ShuffleVectorInst_html"><div class="ttname"><a href="classllvm_1_1ShuffleVectorInst.html">llvm::ShuffleVectorInst</a></div><div class="ttdoc">This instruction constructs a fixed permutation of two input vectors.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02017">Instructions.h:2017</a></div></div>
<div class="ttc" id="aExpandLargeDivRem_8cpp_html_a49b2092a066cfbc24bc6925bdea9682a"><div class="ttname"><a href="ExpandLargeDivRem_8cpp.html#a49b2092a066cfbc24bc6925bdea9682a">isSigned</a></div><div class="ttdeci">static bool isSigned(unsigned int Opcode)</div><div class="ttdef"><b>Definition:</b> <a href="ExpandLargeDivRem_8cpp_source.html#l00052">ExpandLargeDivRem.cpp:52</a></div></div>
<div class="ttc" id="astructllvm_1_1APFloatBase_html_a22ed74f1ed33c4d33f524a650ea536a6"><div class="ttname"><a href="structllvm_1_1APFloatBase.html#a22ed74f1ed33c4d33f524a650ea536a6">llvm::APFloatBase::rmNearestTiesToEven</a></div><div class="ttdeci">static constexpr roundingMode rmNearestTiesToEven</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00217">APFloat.h:217</a></div></div>
<div class="ttc" id="aclassllvm_1_1AllocaInst_html_a9bb98c4ac4cf77f5782e5e41f2c6f38a"><div class="ttname"><a href="classllvm_1_1AllocaInst.html#a9bb98c4ac4cf77f5782e5e41f2c6f38a">llvm::AllocaInst::isUsedWithInAlloca</a></div><div class="ttdeci">bool isUsedWithInAlloca() const</div><div class="ttdoc">Return true if this alloca is used as an inalloca argument to a call.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00140">Instructions.h:140</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a2d9861feadd3a09792967a012559e7b2"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">llvm::PatternMatch::m_Specific</a></div><div class="ttdeci">specificval_ty m_Specific(const Value *V)</div><div class="ttdoc">Match if we have a specific specified value.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00772">PatternMatch.h:772</a></div></div>
<div class="ttc" id="aInstCombineCasts_8cpp_html_a892ab7536cd879b0be803ff921b5ce06"><div class="ttname"><a href="InstCombineCasts_8cpp.html#a892ab7536cd879b0be803ff921b5ce06">getMinimumFPType</a></div><div class="ttdeci">static Type * getMinimumFPType(Value *V)</div><div class="ttdoc">Find the minimum FP type we can safely truncate to.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l01711">InstCombineCasts.cpp:1711</a></div></div>
<div class="ttc" id="aclassllvm_1_1PointerType_html_ac0f741735997264d3018e30ce2a6b2d3"><div class="ttname"><a href="classllvm_1_1PointerType.html#ac0f741735997264d3018e30ce2a6b2d3">llvm::PointerType::getWithSamePointeeType</a></div><div class="ttdeci">static PointerType * getWithSamePointeeType(PointerType *PT, unsigned AddressSpace)</div><div class="ttdoc">This constructs a pointer type with the same pointee type as input PointerType (or opaque pointer if ...</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00666">DerivedTypes.h:666</a></div></div>
<div class="ttc" id="aclassllvm_1_1FPTruncInst_html"><div class="ttname"><a href="classllvm_1_1FPTruncInst.html">llvm::FPTruncInst</a></div><div class="ttdoc">This class represents a truncation of floating point types.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l04930">Instructions.h:4930</a></div></div>
<div class="ttc" id="aclassllvm_1_1CastInst_html_a3685b2128d8e6917000e4adc3b266ff6"><div class="ttname"><a href="classllvm_1_1CastInst.html#a3685b2128d8e6917000e4adc3b266ff6">llvm::CastInst::getOpcode</a></div><div class="ttdeci">Instruction::CastOps getOpcode() const</div><div class="ttdoc">Return the opcode of this CastInst.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00675">InstrTypes.h:675</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a0c8ffe664a36e30d49c84d0aded2fe08"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">llvm::SmallVectorImpl::pop_back_val</a></div><div class="ttdeci">T pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00677">SmallVector.h:677</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_a8ce0c4746a1ec805e66409d20ae93922"><div class="ttname"><a href="classllvm_1_1PHINode.html#a8ce0c4746a1ec805e66409d20ae93922">llvm::PHINode::getIncomingBlock</a></div><div class="ttdeci">BasicBlock * getIncomingBlock(unsigned i) const</div><div class="ttdoc">Return incoming basic block number i.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02814">Instructions.h:2814</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a2a5120238e6845643a37d5a4675a5342"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a2a5120238e6845643a37d5a4675a5342">llvm::InstCombinerImpl::visitSExt</a></div><div class="ttdeci">Instruction * visitSExt(SExtInst &amp;Sext)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l01512">InstCombineCasts.cpp:1512</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html"><div class="ttname"><a href="classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02708">Instructions.h:2708</a></div></div>
<div class="ttc" id="aInstCombineCasts_8cpp_html_ac8947451998676abcce5452a1a8f5848"><div class="ttname"><a href="InstCombineCasts_8cpp.html#ac8947451998676abcce5452a1a8f5848">getTypeSizeIndex</a></div><div class="ttdeci">static unsigned getTypeSizeIndex(unsigned Value, Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l02227">InstCombineCasts.cpp:2227</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl&lt; Value * &gt;</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5e655fd99a56d50b071fc26d8db5fd5b"><div class="ttname"><a href="namespacellvm.html#a5e655fd99a56d50b071fc26d8db5fd5b">llvm::ConstantFoldConstant</a></div><div class="ttdeci">Constant * ConstantFoldConstant(const Constant *C, const DataLayout &amp;DL, const TargetLibraryInfo *TLI=nullptr)</div><div class="ttdoc">ConstantFoldConstant - Fold the constant using the specified DataLayout.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFolding_8cpp_source.html#l01203">ConstantFolding.cpp:1203</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a0408bd846c957324c4ba68d356e4122e"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a0408bd846c957324c4ba68d356e4122e">llvm::PatternMatch::m_IntToPtr</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::IntToPtr &gt; m_IntToPtr(const OpTy &amp;Op)</div><div class="ttdoc">Matches IntToPtr.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01605">PatternMatch.h:1605</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallSetVector_html"><div class="ttname"><a href="classllvm_1_1SmallSetVector.html">llvm::SmallSetVector</a></div><div class="ttdoc">A SetVector that performs no allocations if smaller than a certain size.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00300">SetVector.h:300</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a2fed53ed2b3225752bd9e4fce4967361"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a2fed53ed2b3225752bd9e4fce4967361">llvm::PatternMatch::m_Neg</a></div><div class="ttdeci">BinaryOp_match&lt; cst_pred_ty&lt; is_zero_int &gt;, ValTy, Instruction::Sub &gt; m_Neg(const ValTy &amp;V)</div><div class="ttdoc">Matches a 'Neg' as 'sub 0, V'.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02284">PatternMatch.h:2284</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_ad960e1ff48d25c382b6d28e7961f074e"><div class="ttname"><a href="classllvm_1_1APInt.html#ad960e1ff48d25c382b6d28e7961f074e">llvm::APInt::getLowBitsSet</a></div><div class="ttdeci">static APInt getLowBitsSet(unsigned numBits, unsigned loBitsSet)</div><div class="ttdoc">Constructs an APInt value that has the bottom loBitsSet bits set.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00289">APInt.h:289</a></div></div>
<div class="ttc" id="aclassllvm_1_1IntegerType_html_a14f7b4f1aed38192fb6b7772eb506bdb"><div class="ttname"><a href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">llvm::IntegerType::get</a></div><div class="ttdeci">static IntegerType * get(LLVMContext &amp;C, unsigned NumBits)</div><div class="ttdoc">This static method is the primary way of constructing an IntegerType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00313">Type.cpp:313</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallInst_html"><div class="ttname"><a href="classllvm_1_1CallInst.html">llvm::CallInst</a></div><div class="ttdoc">This class represents a function call, abstracting a target machine's calling convention.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01485">Instructions.h:1485</a></div></div>
<div class="ttc" id="aHexagonCommonGEP_8cpp_html_ad532e8710e50302e0a376b61c91fa91d"><div class="ttname"><a href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a></div><div class="ttdeci">Hexagon Common GEP</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCommonGEP_8cpp_source.html#l00171">HexagonCommonGEP.cpp:171</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a78d5bb4c6437373debabeb3f816645cb"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a78d5bb4c6437373debabeb3f816645cb">llvm::InstCombinerImpl::foldItoFPtoI</a></div><div class="ttdeci">Instruction * foldItoFPtoI(CastInst &amp;FI)</div><div class="ttdoc">fpto{s/u}i({u/s}itofp(X)) --&gt; X or zext(X) or sext(X) or trunc(X) This is safe if the intermediate ty...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l01988">InstCombineCasts.cpp:1988</a></div></div>
<div class="ttc" id="aReassociate_8cpp_html_a680ae08c1b9b93cebdd6cbb726fe8f3d"><div class="ttname"><a href="Reassociate_8cpp.html#a680ae08c1b9b93cebdd6cbb726fe8f3d">CreateAdd</a></div><div class="ttdeci">static BinaryOperator * CreateAdd(Value *S1, Value *S2, const Twine &amp;Name, Instruction *InsertBefore, Value *FlagsOp)</div><div class="ttdef"><b>Definition:</b> <a href="Reassociate_8cpp_source.html#l00241">Reassociate.cpp:241</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ae855357b6c5e6e7ed1869272708a3a84"><div class="ttname"><a href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">llvm::Value::takeName</a></div><div class="ttdeci">void takeName(Value *V)</div><div class="ttdoc">Transfer the name from V to this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00381">Value.cpp:381</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_aeaf22e8d92fd978a5eca9ab031994399"><div class="ttname"><a href="classllvm_1_1APInt.html#aeaf22e8d92fd978a5eca9ab031994399">llvm::APInt::getBitsSetFrom</a></div><div class="ttdeci">static APInt getBitsSetFrom(unsigned numBits, unsigned loBit)</div><div class="ttdoc">Constructs an APInt value that has a contiguous range of bits set.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00269">APInt.h:269</a></div></div>
<div class="ttc" id="aclassllvm_1_1AllocaInst_html"><div class="ttname"><a href="classllvm_1_1AllocaInst.html">llvm::AllocaInst</a></div><div class="ttdoc">an instruction to allocate memory on the stack</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00058">Instructions.h:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_abe1de1520a21f77ac57cc210bf0fb0b4"><div class="ttname"><a href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00169">User.h:169</a></div></div>
<div class="ttc" id="aInstCombineCasts_8cpp_html_aaa977254b83ff622718b40f1aa81271f"><div class="ttname"><a href="InstCombineCasts_8cpp.html#aaa977254b83ff622718b40f1aa81271f">canNotEvaluateInType</a></div><div class="ttdeci">static bool canNotEvaluateInType(Value *V, Type *Ty)</div><div class="ttdoc">Filter out values that we can not evaluate in the destination type for free.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l00387">InstCombineCasts.cpp:387</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a5b844aada27c4c6fdb87146ac458c0d8"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a5b844aada27c4c6fdb87146ac458c0d8">llvm::PatternMatch::m_Trunc</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::Trunc &gt; m_Trunc(const OpTy &amp;Op)</div><div class="ttdoc">Matches Trunc.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01611">PatternMatch.h:1611</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html_a02ce9966395063ac501ecbc1623deda4"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a02ce9966395063ac501ecbc1623deda4">llvm::BinaryOperator::Create</a></div><div class="ttdeci">static BinaryOperator * Create(BinaryOps Op, Value *S1, Value *S2, const Twine &amp;Name=Twine(), Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Construct a binary instruction, given the opcode and the two operands.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l02950">Instructions.cpp:2950</a></div></div>
<div class="ttc" id="aWebAssemblyRegStackify_8cpp_html_a3fe3a133bacc7200702bc7b0b13d092c"><div class="ttname"><a href="WebAssemblyRegStackify_8cpp.html#a3fe3a133bacc7200702bc7b0b13d092c">hasOneUse</a></div><div class="ttdeci">static bool hasOneUse(unsigned Reg, MachineInstr *Def, MachineRegisterInfo &amp;MRI, MachineDominatorTree &amp;MDT, LiveIntervals &amp;LIS)</div><div class="ttdef"><b>Definition:</b> <a href="WebAssemblyRegStackify_8cpp_source.html#l00283">WebAssemblyRegStackify.cpp:283</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a7eb1707b3b9ea994955ac9d230535261"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a7eb1707b3b9ea994955ac9d230535261">llvm::InstCombinerImpl::visitFPTrunc</a></div><div class="ttdeci">Instruction * visitFPTrunc(FPTruncInst &amp;CI)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l01786">InstCombineCasts.cpp:1786</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a4d45f96f90c7ddd805c6bae2949077de"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a4d45f96f90c7ddd805c6bae2949077de">llvm::InstCombinerImpl::visitUIToFP</a></div><div class="ttdeci">Instruction * visitUIToFP(CastInst &amp;CI)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l02042">InstCombineCasts.cpp:2042</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00074">Value.h:74</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a37668d9884c78ac77254cf9fb8a4276a"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">llvm::PatternMatch::m_Shl</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Shl &gt; m_Shl(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01111">PatternMatch.h:1111</a></div></div>
<div class="ttc" id="aclassllvm_1_1VectorType_html_a8c90e6c50e795b17466482a04947690e"><div class="ttname"><a href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">llvm::VectorType::get</a></div><div class="ttdeci">static VectorType * get(Type *ElementType, ElementCount EC)</div><div class="ttdoc">This static method is the primary way to construct an VectorType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00670">Type.cpp:670</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ab4e0512c7e1c7adaa56677e3155685f1"><div class="ttname"><a href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">llvm::Value::users</a></div><div class="ttdeci">iterator_range&lt; user_iterator &gt; users()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00421">Value.h:421</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_ad5e0fe0efdd88f98a5b5eb512d5351c2"><div class="ttname"><a href="classllvm_1_1Type.html#ad5e0fe0efdd88f98a5b5eb512d5351c2">llvm::Type::getFloatTy</a></div><div class="ttdeci">static Type * getFloatTy(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00228">Type.cpp:228</a></div></div>
<div class="ttc" id="aclassllvm_1_1SrcOp_html"><div class="ttname"><a href="classllvm_1_1SrcOp.html">llvm::SrcOp</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l00128">MachineIRBuilder.h:128</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_ab549082d9dfb91ec9a8dc06601d54855"><div class="ttname"><a href="classllvm_1_1Type.html#ab549082d9dfb91ec9a8dc06601d54855">llvm::Type::isX86_AMXTy</a></div><div class="ttdeci">bool isX86_AMXTy() const</div><div class="ttdoc">Return true if this is X86 AMX.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00204">Type.h:204</a></div></div>
<div class="ttc" id="aSetVector_8h_html"><div class="ttname"><a href="SetVector_8h.html">SetVector.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a833daf718a49c5cd637d8c9ddeaebe07"><div class="ttname"><a href="classllvm_1_1Type.html#a833daf718a49c5cd637d8c9ddeaebe07">llvm::Type::getPrimitiveSizeInBits</a></div><div class="ttdeci">TypeSize getPrimitiveSizeInBits() const LLVM_READONLY</div><div class="ttdoc">Return the basic size of this type if it is a primitive type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00163">Type.cpp:163</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Intrinsic_html_a80add6b3b1cdaec560907995127adc16"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">llvm::Intrinsic::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00039">TargetTransformInfo.h:39</a></div></div>
<div class="ttc" id="aInstCombineCasts_8cpp_html_a144f501e5d35220bb482eec5a94f7062"><div class="ttname"><a href="InstCombineCasts_8cpp.html#a144f501e5d35220bb482eec5a94f7062">foldVecTruncToExtElt</a></div><div class="ttdeci">static Instruction * foldVecTruncToExtElt(TruncInst &amp;Trunc, InstCombinerImpl &amp;IC)</div><div class="ttdoc">Given a vector that is bitcast to an integer, optionally logically right-shifted, and truncated,...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCasts_8cpp_source.html#l00539">InstCombineCasts.cpp:539</a></div></div>
<div class="ttc" id="aclassllvm_1_1PoisonValue_html_a1bf08613fb664a2e377a9a72c59a6b66"><div class="ttname"><a href="classllvm_1_1PoisonValue.html#a1bf08613fb664a2e377a9a72c59a6b66">llvm::PoisonValue::get</a></div><div class="ttdeci">static PoisonValue * get(Type *T)</div><div class="ttdoc">Static factory methods - Return an 'poison' object of the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01759">Constants.cpp:1759</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:23:41 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

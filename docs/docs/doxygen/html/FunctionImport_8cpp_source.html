<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Transforms/IPO/FunctionImport.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a72932e0778af28115095468f6286ff8.html">Transforms</a></li><li class="navelem"><a class="el" href="dir_13abb262e9c52ddea8d07639819afd6c.html">IPO</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">FunctionImport.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="FunctionImport_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- FunctionImport.cpp - ThinLTO Summary-based Function Import ---------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This file implements Function import based on summaries.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160; </div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="FunctionImport_8h.html">llvm/Transforms/IPO/FunctionImport.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ArrayRef_8h.html">llvm/ADT/ArrayRef.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="STLExtras_8h.html">llvm/ADT/STLExtras.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SetVector_8h.html">llvm/ADT/SetVector.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallVector_8h.html">llvm/ADT/SmallVector.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ADT_2StringMap_8h.html">llvm/ADT/StringMap.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="StringRef_8h.html">llvm/ADT/StringRef.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BitcodeReader_8h.html">llvm/Bitcode/BitcodeReader.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AutoUpgrade_8h.html">llvm/IR/AutoUpgrade.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constants_8h.html">llvm/IR/Constants.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Function_8h.html">llvm/IR/Function.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="GlobalAlias_8h.html">llvm/IR/GlobalAlias.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="GlobalObject_8h.html">llvm/IR/GlobalObject.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="GlobalValue_8h.html">llvm/IR/GlobalValue.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="GlobalVariable_8h.html">llvm/IR/GlobalVariable.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Metadata_8h.html">llvm/IR/Metadata.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Module_8h.html">llvm/IR/Module.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ModuleSummaryIndex_8h.html">llvm/IR/ModuleSummaryIndex.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IRReader_2IRReader_8h.html">llvm/IRReader/IRReader.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InitializePasses_8h.html">llvm/InitializePasses.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IRMover_8h.html">llvm/Linker/IRMover.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Pass_8h.html">llvm/Pass.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Casting_8h.html">llvm/Support/Casting.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Errc_8h.html">llvm/Support/Errc.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Support_2Error_8h.html">llvm/Support/Error.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Support_2ErrorHandling_8h.html">llvm/Support/ErrorHandling.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="FileSystem_8h.html">llvm/Support/FileSystem.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Support_2SourceMgr_8h.html">llvm/Support/SourceMgr.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Internalize_8h.html">llvm/Transforms/IPO/Internalize.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Cloning_8h.html">llvm/Transforms/Utils/Cloning.h</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="FunctionImportUtils_8h.html">llvm/Transforms/Utils/FunctionImportUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueMapper_8h.html">llvm/Transforms/Utils/ValueMapper.h</a>&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &lt;set&gt;</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &lt;system_error&gt;</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &lt;tuple&gt;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160; </div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="FunctionImport_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   59</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;function-import&quot;</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumImportedFunctionsThinLink,</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;          <span class="stringliteral">&quot;Number of functions thin link decided to import&quot;</span>);</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumImportedHotFunctionsThinLink,</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;          <span class="stringliteral">&quot;Number of hot functions thin link decided to import&quot;</span>);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumImportedCriticalFunctionsThinLink,</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;          <span class="stringliteral">&quot;Number of critical functions thin link decided to import&quot;</span>);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumImportedGlobalVarsThinLink,</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;          <span class="stringliteral">&quot;Number of global variables thin link decided to import&quot;</span>);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumImportedFunctions, <span class="stringliteral">&quot;Number of functions imported in backend&quot;</span>);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumImportedGlobalVars,</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;          <span class="stringliteral">&quot;Number of global variables imported in backend&quot;</span>);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumImportedModules, <span class="stringliteral">&quot;Number of modules imported from&quot;</span>);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumDeadSymbols, <span class="stringliteral">&quot;Number of dead stripped symbols in index&quot;</span>);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumLiveSymbols, <span class="stringliteral">&quot;Number of live symbols in index&quot;</span>);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">/// Limit on instruction count of imported functions.</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="FunctionImport_8cpp.html#ae6f46d7423fbac4058566f39d9b57944">ImportInstrLimit</a>(</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="stringliteral">&quot;import-instr-limit&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(100), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="structllvm_1_1cl_1_1value__desc.html">cl::value_desc</a>(<span class="stringliteral">&quot;N&quot;</span>),</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Only import functions with less than N instructions&quot;</span>));</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;int&gt;</a> <a class="code" href="FunctionImport_8cpp.html#a546070e97e00d689119cc2f5776d06a3">ImportCutoff</a>(</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="stringliteral">&quot;import-cutoff&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(-1), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="structllvm_1_1cl_1_1value__desc.html">cl::value_desc</a>(<span class="stringliteral">&quot;N&quot;</span>),</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Only import first N functions if N&gt;=0 (default -1)&quot;</span>));</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <a class="code" href="FunctionImport_8cpp.html#ac69c623576338cd7d9b9de06448e714b">ForceImportAll</a>(<span class="stringliteral">&quot;force-import-all&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                   <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Import functions with noinline attribute&quot;</span>));</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;float&gt;</a></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <a class="code" href="FunctionImport_8cpp.html#aeb35d5c809e3003e07e96bd489608220">ImportInstrFactor</a>(<span class="stringliteral">&quot;import-instr-evolution-factor&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(0.7),</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                      <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="structllvm_1_1cl_1_1value__desc.html">cl::value_desc</a>(<span class="stringliteral">&quot;x&quot;</span>),</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                      <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;As we import functions, multiply the &quot;</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                               <span class="stringliteral">&quot;`import-instr-limit` threshold by this factor &quot;</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                               <span class="stringliteral">&quot;before processing newly imported functions&quot;</span>));</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;float&gt;</a> <a class="code" href="FunctionImport_8cpp.html#ab62a4b224f4cbfde8a42a2ccc7e1348e">ImportHotInstrFactor</a>(</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="stringliteral">&quot;import-hot-evolution-factor&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(1.0), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1value__desc.html">cl::value_desc</a>(<span class="stringliteral">&quot;x&quot;</span>),</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;As we import functions called from hot callsite, multiply the &quot;</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;             <span class="stringliteral">&quot;`import-instr-limit` threshold by this factor &quot;</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;             <span class="stringliteral">&quot;before processing newly imported functions&quot;</span>));</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;float&gt;</a> <a class="code" href="FunctionImport_8cpp.html#a6733e23154688b995553f5023e94cdca">ImportHotMultiplier</a>(</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="stringliteral">&quot;import-hot-multiplier&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(10.0), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="structllvm_1_1cl_1_1value__desc.html">cl::value_desc</a>(<span class="stringliteral">&quot;x&quot;</span>),</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Multiply the `import-instr-limit` threshold for hot callsites&quot;</span>));</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;float&gt;</a> <a class="code" href="FunctionImport_8cpp.html#aa82a05b016fecb419dbb8d4b7d877e98">ImportCriticalMultiplier</a>(</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="stringliteral">&quot;import-critical-multiplier&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(100.0), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1value__desc.html">cl::value_desc</a>(<span class="stringliteral">&quot;x&quot;</span>),</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="stringliteral">&quot;Multiply the `import-instr-limit` threshold for critical callsites&quot;</span>));</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">// FIXME: This multiplier was not really tuned up.</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;float&gt;</a> <a class="code" href="FunctionImport_8cpp.html#a53a869e521f9381b4b175ebd078ae47f">ImportColdMultiplier</a>(</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="stringliteral">&quot;import-cold-multiplier&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(0), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="structllvm_1_1cl_1_1value__desc.html">cl::value_desc</a>(<span class="stringliteral">&quot;N&quot;</span>),</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Multiply the `import-instr-limit` threshold for cold callsites&quot;</span>));</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160; </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="FunctionImport_8cpp.html#a5e4a0be88e228b9e13548dd074c41ba4">PrintImports</a>(<span class="stringliteral">&quot;print-imports&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                                  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Print imported functions&quot;</span>));</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="FunctionImport_8cpp.html#a594c382c0ad71320df28373c39e3ec70">PrintImportFailures</a>(</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="stringliteral">&quot;print-import-failures&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Print information for functions rejected for importing&quot;</span>));</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160; </div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="FunctionImport_8cpp.html#a4f50af5489916353668d76d08cb00ea8">ComputeDead</a>(<span class="stringliteral">&quot;compute-dead&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                                 <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Compute dead symbols&quot;</span>));</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="FunctionImport_8cpp.html#a0736f38219e094f3ee6cb79ecaca6fb2">EnableImportMetadata</a>(</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="stringliteral">&quot;enable-import-metadata&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Enable import metadata like &#39;thinlto_src_module&#39;&quot;</span>));</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">/// Summary file to use for function importing when using -function-import from</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">/// the command line.</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;std::string&gt;</a></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <a class="code" href="FunctionImport_8cpp.html#a437ef847693c65bb072a34d2bb87ba32">SummaryFile</a>(<span class="stringliteral">&quot;summary-file&quot;</span>,</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;The summary file to use for function importing.&quot;</span>));</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">/// Used when testing importing from distributed indexes via opt</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment"></span><span class="comment">// -function-import.</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <a class="code" href="FunctionImport_8cpp.html#a633b579e4d4d2825ca5b39bb8a5f95c8">ImportAllIndex</a>(<span class="stringliteral">&quot;import-all-index&quot;</span>,</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                   <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Import all external functions in index.&quot;</span>));</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">// Load lazily a module from \p FileName in \p Context.</span></div>
<div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="FunctionImport_8cpp.html#ab4380060a95f70b25a8bb6abef24577f">  145</a></span>&#160;<span class="keyword">static</span> std::unique_ptr&lt;Module&gt; <a class="code" href="FunctionImport_8cpp.html#ab4380060a95f70b25a8bb6abef24577f">loadFile</a>(<span class="keyword">const</span> std::string &amp;FileName,</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                                        <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>) {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <a class="code" href="classllvm_1_1SMDiagnostic.html">SMDiagnostic</a> Err;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Loading &#39;&quot;</span> &lt;&lt; FileName &lt;&lt; <span class="stringliteral">&quot;&#39;\n&quot;</span>);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="comment">// Metadata isn&#39;t loaded until functions are imported, to minimize</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="comment">// the memory overhead.</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  std::unique_ptr&lt;Module&gt; Result =</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      <a class="code" href="namespacellvm.html#aac226baa3ffd0f255a8d2b6d978b81b2">getLazyIRFileModule</a>(FileName, Err, <a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>,</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                          <span class="comment">/* ShouldLazyLoadMetadata = */</span> <span class="keyword">true</span>);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="keywordflow">if</span> (!Result) {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    Err.print(<span class="stringliteral">&quot;function-import&quot;</span>, <a class="code" href="namespacellvm.html#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>());</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <a class="code" href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">report_fatal_error</a>(<span class="stringliteral">&quot;Abort&quot;</span>);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  }</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <span class="keywordflow">return</span> Result;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;}</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">/// Given a list of possible callee implementation for a call site, select one</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">/// that fits the \p Threshold.</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">/// FIXME: select &quot;best&quot; instead of first that fits. But what is &quot;best&quot;?</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">/// - The smallest: more likely to be inlined.</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">/// - The one with the least outgoing edges (already well optimized).</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">/// - One from a module already being imported from in order to reduce the</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment">///   number of source modules parsed/linked.</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">/// - One that has PGO data attached.</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">/// - [insert you fancy metric here]</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classllvm_1_1GlobalValueSummary.html">GlobalValueSummary</a> *</div>
<div class="line"><a name="l00173"></a><span class="lineno"><a class="line" href="FunctionImport_8cpp.html#a7c26e0683b89c481ac99e16bb1973668">  173</a></span>&#160;<a class="code" href="FunctionImport_8cpp.html#a7c26e0683b89c481ac99e16bb1973668">selectCallee</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1ModuleSummaryIndex.html">ModuleSummaryIndex</a> &amp;<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>,</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;             <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef</a>&lt;std::unique_ptr&lt;GlobalValueSummary&gt;&gt; CalleeSummaryList,</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;             <span class="keywordtype">unsigned</span> Threshold, <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> CallerModulePath,</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;             <a class="code" href="classllvm_1_1FunctionImporter.html#acbdbb2a799833253c9b3ec9e8e1e5a29">FunctionImporter::ImportFailureReason</a> &amp;Reason,</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;             <a class="code" href="classllvm_1_1GlobalValue.html#a3af0428ec6e48cb2f05c199b7b9f7e07">GlobalValue::GUID</a> GUID) {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  Reason = <a class="code" href="namespacellvm.html#aebf1ed936ad0e792e159d7a4ae1b7f07">FunctionImporter::ImportFailureReason::None</a>;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <span class="keyword">auto</span> It = <a class="code" href="namespacellvm.html#ac78c09ae232b2ce188ff590d51e3c268">llvm::find_if</a>(</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;      CalleeSummaryList,</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      [&amp;](<span class="keyword">const</span> std::unique_ptr&lt;GlobalValueSummary&gt; &amp;SummaryPtr) {</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <span class="keyword">auto</span> *GVSummary = SummaryPtr.get();</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>.isGlobalValueLive(GVSummary)) {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;          Reason = FunctionImporter::ImportFailureReason::NotLive;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;          return false;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        }</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160; </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        <a class="code" href="include_2llvm_2Support_2CMakeLists_8txt.html#aef9367eb0b7430eaf70b1f2725488f2a">if</a> (<a class="code" href="classllvm_1_1GlobalValue.html#aabf6932ed41fc64e17c0030c44eda44e">GlobalValue::isInterposableLinkage</a>(GVSummary-&gt;linkage())) {</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;          Reason = FunctionImporter::ImportFailureReason::InterposableLinkage;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;          <span class="comment">// There is no point in importing these, we can&#39;t inline them</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;          return false;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        }</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160; </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="keyword">auto</span> *Summary = cast&lt;FunctionSummary&gt;(GVSummary-&gt;getBaseObject());</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="comment">// If this is a local function, make sure we import the copy</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <span class="comment">// in the caller&#39;s module. The only time a local function can</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="comment">// share an entry in the index is if there is a local with the same name</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <span class="comment">// in another module that had the same source file name (in a different</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="comment">// directory), where each was compiled in their own directory so there</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <span class="comment">// was not distinguishing path.</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <span class="comment">// However, do the import from another module if there is only one</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <span class="comment">// entry in the list - in that case this must be a reference due</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <span class="comment">// to indirect call profile data, since a function pointer can point to</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <span class="comment">// a local in another module.</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <a class="code" href="include_2llvm_2Support_2CMakeLists_8txt.html#aef9367eb0b7430eaf70b1f2725488f2a">if</a> (<a class="code" href="classllvm_1_1GlobalValue.html#a308b65a044b4f53e31a2026a81c991d2">GlobalValue::isLocalLinkage</a>(Summary-&gt;linkage()) &amp;&amp;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            CalleeSummaryList.size() &gt; 1 &amp;&amp;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            Summary-&gt;modulePath() != CallerModulePath) {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;          Reason =</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;              FunctionImporter::ImportFailureReason::LocalLinkageNotInModule;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;          return false;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        }</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160; </div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <a class="code" href="include_2llvm_2Support_2CMakeLists_8txt.html#aef9367eb0b7430eaf70b1f2725488f2a">if</a> ((Summary-&gt;instCount() &gt; Threshold) &amp;&amp;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            !Summary-&gt;fflags().AlwaysInline &amp;&amp; !<a class="code" href="FunctionImport_8cpp.html#ac69c623576338cd7d9b9de06448e714b">ForceImportAll</a>) {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;          Reason = FunctionImporter::ImportFailureReason::TooLarge;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;          return false;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        }</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160; </div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <span class="comment">// Skip if it isn&#39;t legal to import (e.g. may reference unpromotable</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <span class="comment">// locals).</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <a class="code" href="include_2llvm_2Support_2CMakeLists_8txt.html#aef9367eb0b7430eaf70b1f2725488f2a">if</a> (Summary-&gt;notEligibleToImport()) {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;          Reason = FunctionImporter::ImportFailureReason::NotEligible;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;          return false;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        }</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160; </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <span class="comment">// Don&#39;t bother importing if we can&#39;t inline it anyway.</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <a class="code" href="include_2llvm_2Support_2CMakeLists_8txt.html#aef9367eb0b7430eaf70b1f2725488f2a">if</a> (Summary-&gt;fflags().NoInline &amp;&amp; !<a class="code" href="FunctionImport_8cpp.html#ac69c623576338cd7d9b9de06448e714b">ForceImportAll</a>) {</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;          Reason = FunctionImporter::ImportFailureReason::NoInline;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;          return false;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160; </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      });</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="keywordflow">if</span> (It == CalleeSummaryList.end())</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <span class="keywordflow">return</span> cast&lt;GlobalValueSummary&gt;(It-&gt;get());</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;}</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160; </div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160; </div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="keyword">using</span> EdgeInfo =</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    std::tuple&lt;<span class="keyword">const</span> <a class="code" href="classllvm_1_1GlobalValueSummary.html">GlobalValueSummary</a> *, <span class="keywordtype">unsigned</span> <span class="comment">/* Threshold */</span>&gt;;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;} <span class="comment">// anonymous namespace</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160; </div>
<div class="line"><a name="l00248"></a><span class="lineno"><a class="line" href="FunctionImport_8cpp.html#ac67ddb15395852907f8e86a03ec467bf">  248</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="FunctionImport_8cpp.html#ac67ddb15395852907f8e86a03ec467bf">shouldImportGlobal</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1ValueInfo.html">ValueInfo</a> &amp;<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>,</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                               <span class="keyword">const</span> <a class="code" href="classllvm_1_1DenseMap.html">GVSummaryMapTy</a> &amp;DefinedGVSummaries) {</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;GVS = DefinedGVSummaries.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>.getGUID());</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="keywordflow">if</span> (GVS == DefinedGVSummaries.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>())</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="comment">// We should not skip import if the module contains a definition with</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="comment">// interposable linkage type. This is required for correctness in</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="comment">// the situation with two following conditions:</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <span class="comment">// * the def with interposable linkage is non-prevailing,</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="comment">// * there is a prevailing def available for import and marked read-only.</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="comment">// In this case, the non-prevailing def will be converted to a declaration,</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <span class="comment">// while the prevailing one becomes internal, thus no definitions will be</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <span class="comment">// available for linking. In order to prevent undefined symbol link error,</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="comment">// the prevailing definition must be imported.</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <span class="comment">// FIXME: Consider adding a check that the suitable prevailing definition</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="comment">// exists and marked read-only.</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>.getSummaryList().size() &gt; 1 &amp;&amp;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      <a class="code" href="classllvm_1_1GlobalValue.html#aabf6932ed41fc64e17c0030c44eda44e">GlobalValue::isInterposableLinkage</a>(GVS-&gt;second-&gt;linkage()))</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;}</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno"><a class="line" href="FunctionImport_8cpp.html#ab718cd3b61483e936a7360c9f0861a4e">  271</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="FunctionImport_8cpp.html#ab718cd3b61483e936a7360c9f0861a4e">computeImportForReferencedGlobals</a>(</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1GlobalValueSummary.html">GlobalValueSummary</a> &amp;Summary, <span class="keyword">const</span> <a class="code" href="classllvm_1_1ModuleSummaryIndex.html">ModuleSummaryIndex</a> &amp;<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>,</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1DenseMap.html">GVSummaryMapTy</a> &amp;DefinedGVSummaries,</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;EdgeInfo&gt;</a> &amp;Worklist,</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <a class="code" href="classllvm_1_1StringMap.html">FunctionImporter::ImportMapTy</a> &amp;ImportList,</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <a class="code" href="classllvm_1_1StringMap.html">StringMap&lt;FunctionImporter::ExportSetTy&gt;</a> *ExportLists) {</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a> : Summary.refs()) {</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="FunctionImport_8cpp.html#ac67ddb15395852907f8e86a03ec467bf">shouldImportGlobal</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>, DefinedGVSummaries)) {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Ref ignored! Target already in destination module.\n&quot;</span>);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    }</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; ref -&gt; &quot;</span> &lt;&lt; <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160; </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="comment">// If this is a local variable, make sure we import the copy</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="comment">// in the caller&#39;s module. The only time a local variable can</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="comment">// share an entry in the index is if there is a local with the same name</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="comment">// in another module that had the same source file name (in a different</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="comment">// directory), where each was compiled in their own directory so there</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="comment">// was not distinguishing path.</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keyword">auto</span> LocalNotInModule = [&amp;](<span class="keyword">const</span> <a class="code" href="classllvm_1_1GlobalValueSummary.html">GlobalValueSummary</a> *RefSummary) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1GlobalValue.html#a308b65a044b4f53e31a2026a81c991d2">GlobalValue::isLocalLinkage</a>(RefSummary-&gt;linkage()) &amp;&amp;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;             RefSummary-&gt;modulePath() != Summary.modulePath();</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    };</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160; </div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;RefSummary : <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>.getSummaryList())</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      <span class="keywordflow">if</span> (isa&lt;GlobalVarSummary&gt;(RefSummary.get()) &amp;&amp;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;          <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>.canImportGlobalVar(RefSummary.get(), <span class="comment">/* AnalyzeRefs */</span> <span class="keyword">true</span>) &amp;&amp;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;          !LocalNotInModule(RefSummary.get())) {</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        <span class="keyword">auto</span> ILI = ImportList[RefSummary-&gt;modulePath()].<a class="code" href="classllvm_1_1StringMap.html#afea367cbdd62e85c20d3ebe044253ce7">insert</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>.getGUID());</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        <span class="comment">// Only update stat and exports if we haven&#39;t already imported this</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <span class="comment">// variable.</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        <span class="keywordflow">if</span> (!ILI.second)</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        NumImportedGlobalVarsThinLink++;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <span class="comment">// Any references made by this variable will be marked exported later,</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <span class="comment">// in ComputeCrossModuleImport, after import decisions are complete,</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <span class="comment">// which is more efficient than adding them here.</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        <span class="keywordflow">if</span> (ExportLists)</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;          (*ExportLists)[RefSummary-&gt;modulePath()].insert(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160; </div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        <span class="comment">// If variable is not writeonly we attempt to recursively analyze</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <span class="comment">// its references in order to import referenced constants.</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>.isWriteOnly(cast&lt;GlobalVarSummary&gt;(RefSummary.get())))</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;          Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(RefSummary.get(), 0);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      }</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  }</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;}</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160; </div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *</div>
<div class="line"><a name="l00323"></a><span class="lineno"><a class="line" href="FunctionImport_8cpp.html#a60a4fc74a3465963f7b49b8831508ce4">  323</a></span>&#160;<a class="code" href="FunctionImport_8cpp.html#a60a4fc74a3465963f7b49b8831508ce4">getFailureName</a>(<a class="code" href="classllvm_1_1FunctionImporter.html#acbdbb2a799833253c9b3ec9e8e1e5a29">FunctionImporter::ImportFailureReason</a> Reason) {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <span class="keywordflow">switch</span> (Reason) {</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#aebf1ed936ad0e792e159d7a4ae1b7f07">FunctionImporter::ImportFailureReason::None</a>:</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;None&quot;</span>;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1adaea4ca2c2bbf249ddcb0de15ce2273e">FunctionImporter::ImportFailureReason::GlobalVar</a>:</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;GlobalVar&quot;</span>;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <span class="keywordflow">case</span> FunctionImporter::ImportFailureReason::NotLive:</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;NotLive&quot;</span>;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="keywordflow">case</span> FunctionImporter::ImportFailureReason::TooLarge:</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;TooLarge&quot;</span>;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <span class="keywordflow">case</span> FunctionImporter::ImportFailureReason::InterposableLinkage:</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;InterposableLinkage&quot;</span>;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  <span class="keywordflow">case</span> FunctionImporter::ImportFailureReason::LocalLinkageNotInModule:</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;LocalLinkageNotInModule&quot;</span>;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <span class="keywordflow">case</span> FunctionImporter::ImportFailureReason::NotEligible:</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;NotEligible&quot;</span>;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <span class="keywordflow">case</span> FunctionImporter::ImportFailureReason::NoInline:</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;NoInline&quot;</span>;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  }</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;invalid reason&quot;</span>);</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;}</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment">/// Compute the list of functions to import for a given caller. Mark these</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment">/// imported functions and the symbols they reference in their source module as</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment">/// exported from their source module.</span></div>
<div class="line"><a name="l00348"></a><span class="lineno"><a class="line" href="FunctionImport_8cpp.html#a90f2bd3f2ffe5bc8f3af77910db73295">  348</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="FunctionImport_8cpp.html#a90f2bd3f2ffe5bc8f3af77910db73295">computeImportForFunction</a>(</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1FunctionSummary.html">FunctionSummary</a> &amp;Summary, <span class="keyword">const</span> <a class="code" href="classllvm_1_1ModuleSummaryIndex.html">ModuleSummaryIndex</a> &amp;<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>,</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> Threshold, <span class="keyword">const</span> <a class="code" href="classllvm_1_1DenseMap.html">GVSummaryMapTy</a> &amp;DefinedGVSummaries,</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;EdgeInfo&gt;</a> &amp;Worklist,</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <a class="code" href="classllvm_1_1StringMap.html">FunctionImporter::ImportMapTy</a> &amp;ImportList,</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <a class="code" href="classllvm_1_1StringMap.html">StringMap&lt;FunctionImporter::ExportSetTy&gt;</a> *ExportLists,</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <a class="code" href="classllvm_1_1DenseMap.html">FunctionImporter::ImportThresholdsTy</a> &amp;ImportThresholds) {</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <a class="code" href="FunctionImport_8cpp.html#ab718cd3b61483e936a7360c9f0861a4e">computeImportForReferencedGlobals</a>(Summary, <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>, DefinedGVSummaries,</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                                    Worklist, ImportList, ExportLists);</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">int</span> ImportCount = 0;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;Edge : Summary.calls()) {</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <a class="code" href="structllvm_1_1ValueInfo.html">ValueInfo</a> <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a> = Edge.first;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; edge -&gt; &quot;</span> &lt;&lt; <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a> &lt;&lt; <span class="stringliteral">&quot; Threshold:&quot;</span> &lt;&lt; Threshold</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160; </div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="FunctionImport_8cpp.html#a546070e97e00d689119cc2f5776d06a3">ImportCutoff</a> &gt;= 0 &amp;&amp; ImportCount &gt;= <a class="code" href="FunctionImport_8cpp.html#a546070e97e00d689119cc2f5776d06a3">ImportCutoff</a>) {</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ignored! import-cutoff value of &quot;</span> &lt;&lt; <a class="code" href="FunctionImport_8cpp.html#a546070e97e00d689119cc2f5776d06a3">ImportCutoff</a></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot; reached.\n&quot;</span>);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    }</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160; </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="keywordflow">if</span> (DefinedGVSummaries.<a class="code" href="classllvm_1_1DenseMapBase.html#a53408c95a7bfb5443b43fb2134c3eb23">count</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>.getGUID())) {</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      <span class="comment">// FIXME: Consider not skipping import if the module contains</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      <span class="comment">// a non-prevailing def with interposable linkage. The prevailing copy</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      <span class="comment">// can safely be imported (see shouldImportGlobal()).</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ignored! Target already in destination module.\n&quot;</span>);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    }</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160; </div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keyword">auto</span> GetBonusMultiplier = [](<a class="code" href="structllvm_1_1CalleeInfo.html#a2413e35985411a461b9ab03c17c01caa">CalleeInfo::HotnessType</a> Hotness) -&gt; <span class="keywordtype">float</span> {</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      <span class="keywordflow">if</span> (Hotness == <a class="code" href="structllvm_1_1CalleeInfo.html#a2413e35985411a461b9ab03c17c01caaa4194726ee334e1085d93e002837b73f0">CalleeInfo::HotnessType::Hot</a>)</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="FunctionImport_8cpp.html#a6733e23154688b995553f5023e94cdca">ImportHotMultiplier</a>;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      <span class="keywordflow">if</span> (Hotness == <a class="code" href="structllvm_1_1CalleeInfo.html#a2413e35985411a461b9ab03c17c01caaa1a3c2e99e572ec71d3820d0363d90742">CalleeInfo::HotnessType::Cold</a>)</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="FunctionImport_8cpp.html#a53a869e521f9381b4b175ebd078ae47f">ImportColdMultiplier</a>;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;      <span class="keywordflow">if</span> (Hotness == <a class="code" href="structllvm_1_1CalleeInfo.html#a2413e35985411a461b9ab03c17c01caaa278d01e5af56273bae1bb99a98b370cd">CalleeInfo::HotnessType::Critical</a>)</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="FunctionImport_8cpp.html#aa82a05b016fecb419dbb8d4b7d877e98">ImportCriticalMultiplier</a>;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      <span class="keywordflow">return</span> 1.0;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    };</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> NewThreshold =</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        Threshold * GetBonusMultiplier(Edge.second.getHotness());</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160; </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keyword">auto</span> <a class="code" href="ARMSubtarget_8cpp.html#a6a14930b01ccb1cf446cd96395284102">IT</a> = ImportThresholds.<a class="code" href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">insert</a>(std::make_pair(</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>.getGUID(), std::make_tuple(NewThreshold, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>)));</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keywordtype">bool</span> PreviouslyVisited = !<a class="code" href="ARMSubtarget_8cpp.html#a6a14930b01ccb1cf446cd96395284102">IT</a>.second;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keyword">auto</span> &amp;ProcessedThreshold = std::get&lt;0&gt;(<a class="code" href="ARMSubtarget_8cpp.html#a6a14930b01ccb1cf446cd96395284102">IT</a>.first-&gt;second);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keyword">auto</span> &amp;CalleeSummary = std::get&lt;1&gt;(<a class="code" href="ARMSubtarget_8cpp.html#a6a14930b01ccb1cf446cd96395284102">IT</a>.first-&gt;second);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keyword">auto</span> &amp;FailureInfo = std::get&lt;2&gt;(<a class="code" href="ARMSubtarget_8cpp.html#a6a14930b01ccb1cf446cd96395284102">IT</a>.first-&gt;second);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160; </div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordtype">bool</span> IsHotCallsite =</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        Edge.second.getHotness() == <a class="code" href="structllvm_1_1CalleeInfo.html#a2413e35985411a461b9ab03c17c01caaa4194726ee334e1085d93e002837b73f0">CalleeInfo::HotnessType::Hot</a>;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordtype">bool</span> IsCriticalCallsite =</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        Edge.second.getHotness() == <a class="code" href="structllvm_1_1CalleeInfo.html#a2413e35985411a461b9ab03c17c01caaa278d01e5af56273bae1bb99a98b370cd">CalleeInfo::HotnessType::Critical</a>;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160; </div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1FunctionSummary.html">FunctionSummary</a> *ResolvedCalleeSummary = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="keywordflow">if</span> (CalleeSummary) {</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PreviouslyVisited);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;      <span class="comment">// Since the traversal of the call graph is DFS, we can revisit a function</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      <span class="comment">// a second time with a higher threshold. In this case, it is added back</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;      <span class="comment">// to the worklist with the new threshold (so that its own callee chains</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;      <span class="comment">// can be considered with the higher threshold).</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      <span class="keywordflow">if</span> (NewThreshold &lt;= ProcessedThreshold) {</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ignored! Target was already imported with Threshold &quot;</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                   &lt;&lt; ProcessedThreshold &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      }</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      <span class="comment">// Update with new larger threshold.</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      ProcessedThreshold = NewThreshold;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      ResolvedCalleeSummary = cast&lt;FunctionSummary&gt;(CalleeSummary);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      <span class="comment">// If we already rejected importing a callee at the same or higher</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      <span class="comment">// threshold, don&#39;t waste time calling selectCallee.</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      <span class="keywordflow">if</span> (PreviouslyVisited &amp;&amp; NewThreshold &lt;= ProcessedThreshold) {</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;            <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ignored! Target was already rejected with Threshold &quot;</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            &lt;&lt; ProcessedThreshold &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="FunctionImport_8cpp.html#a594c382c0ad71320df28373c39e3ec70">PrintImportFailures</a>) {</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(FailureInfo &amp;&amp;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                 <span class="stringliteral">&quot;Expected FailureInfo for previously rejected candidate&quot;</span>);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;          FailureInfo-&gt;Attempts++;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        }</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      }</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160; </div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      <a class="code" href="classllvm_1_1FunctionImporter.html#acbdbb2a799833253c9b3ec9e8e1e5a29">FunctionImporter::ImportFailureReason</a> Reason;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;      CalleeSummary = <a class="code" href="FunctionImport_8cpp.html#a7c26e0683b89c481ac99e16bb1973668">selectCallee</a>(<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>.getSummaryList(), NewThreshold,</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                                   Summary.modulePath(), Reason, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>.getGUID());</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      <span class="keywordflow">if</span> (!CalleeSummary) {</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        <span class="comment">// Update with new larger threshold if this was a retry (otherwise</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        <span class="comment">// we would have already inserted with NewThreshold above). Also</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        <span class="comment">// update failure info if requested.</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        <span class="keywordflow">if</span> (PreviouslyVisited) {</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;          ProcessedThreshold = NewThreshold;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="FunctionImport_8cpp.html#a594c382c0ad71320df28373c39e3ec70">PrintImportFailures</a>) {</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;            <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(FailureInfo &amp;&amp;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                   <span class="stringliteral">&quot;Expected FailureInfo for previously rejected candidate&quot;</span>);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;            FailureInfo-&gt;Reason = Reason;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            FailureInfo-&gt;Attempts++;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;            FailureInfo-&gt;MaxHotness =</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(FailureInfo-&gt;MaxHotness, Edge.second.getHotness());</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;          }</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="FunctionImport_8cpp.html#a594c382c0ad71320df28373c39e3ec70">PrintImportFailures</a>) {</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!FailureInfo &amp;&amp;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                 <span class="stringliteral">&quot;Expected no FailureInfo for newly rejected candidate&quot;</span>);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;          FailureInfo = std::make_unique&lt;FunctionImporter::ImportFailureInfo&gt;(</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;              <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>, Edge.second.getHotness(), Reason, 1);</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        }</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="FunctionImport_8cpp.html#ac69c623576338cd7d9b9de06448e714b">ForceImportAll</a>) {</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;          std::string <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#ad7fab8522e49be1b20c4db4fc431bd3c">Msg</a> = std::string(<span class="stringliteral">&quot;Failed to import function &quot;</span>) +</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                            <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>.name().str() + <span class="stringliteral">&quot; due to &quot;</span> +</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                            <a class="code" href="FunctionImport_8cpp.html#a60a4fc74a3465963f7b49b8831508ce4">getFailureName</a>(Reason);</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;          <span class="keyword">auto</span> <a class="code" href="classllvm_1_1Error.html">Error</a> = make_error&lt;StringError&gt;(</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;              <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#ad7fab8522e49be1b20c4db4fc431bd3c">Msg</a>, <a class="code" href="namespacellvm.html#a20e3e08c7de6a230cd66f9e4322c3fbe">make_error_code</a>(<a class="code" href="namespacellvm.html#a59739a4f15fb2ec57a6b7fcfe938546baa55e82356e9721946aa9ba954733c6f0">errc::not_supported</a>));</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;          <a class="code" href="namespacellvm.html#a065ed35b75b9eeb5cca1aa73bcae7183">logAllUnhandledErrors</a>(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(<a class="code" href="classllvm_1_1Error.html">Error</a>), <a class="code" href="namespacellvm.html#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>(),</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                                <span class="stringliteral">&quot;Error importing module: &quot;</span>);</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;          <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                     &lt;&lt; <span class="stringliteral">&quot;ignored! No qualifying callee with summary found.\n&quot;</span>);</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        }</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;      }</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160; </div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;      <span class="comment">// &quot;Resolve&quot; the summary</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;      CalleeSummary = CalleeSummary-&gt;getBaseObject();</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      ResolvedCalleeSummary = cast&lt;FunctionSummary&gt;(CalleeSummary);</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160; </div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((ResolvedCalleeSummary-&gt;<a class="code" href="classllvm_1_1FunctionSummary.html#adf3998a7e0703c1eac651524d9d14a0d">fflags</a>().<a class="code" href="structllvm_1_1FunctionSummary_1_1FFlags.html#aa0f84f67663c19678567a2448731a9a4">AlwaysInline</a> || <a class="code" href="FunctionImport_8cpp.html#ac69c623576338cd7d9b9de06448e714b">ForceImportAll</a> ||</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;              (ResolvedCalleeSummary-&gt;<a class="code" href="classllvm_1_1FunctionSummary.html#aa1c7a4e9c5bce12a30f1fcd3c0d2e580">instCount</a>() &lt;= NewThreshold)) &amp;&amp;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;             <span class="stringliteral">&quot;selectCallee() didn&#39;t honor the threshold&quot;</span>);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160; </div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      <span class="keyword">auto</span> ExportModulePath = ResolvedCalleeSummary-&gt;<a class="code" href="classllvm_1_1GlobalValueSummary.html#a453cb1f2305409dcdb9a8c0193bb620f">modulePath</a>();</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      <span class="keyword">auto</span> ILI = ImportList[ExportModulePath].<a class="code" href="classllvm_1_1StringMap.html#afea367cbdd62e85c20d3ebe044253ce7">insert</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>.getGUID());</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;      <span class="comment">// We previously decided to import this GUID definition if it was already</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      <span class="comment">// inserted in the set of imports from the exporting module.</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      <span class="keywordtype">bool</span> PreviouslyImported = !ILI.second;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      <span class="keywordflow">if</span> (!PreviouslyImported) {</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        NumImportedFunctionsThinLink++;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        <span class="keywordflow">if</span> (IsHotCallsite)</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;          NumImportedHotFunctionsThinLink++;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <span class="keywordflow">if</span> (IsCriticalCallsite)</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;          NumImportedCriticalFunctionsThinLink++;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      }</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160; </div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      <span class="comment">// Any calls/references made by this function will be marked exported</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;      <span class="comment">// later, in ComputeCrossModuleImport, after import decisions are</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      <span class="comment">// complete, which is more efficient than adding them here.</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;      <span class="keywordflow">if</span> (ExportLists)</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        (*ExportLists)[ExportModulePath].insert(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>);</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    }</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160; </div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keyword">auto</span> GetAdjustedThreshold = [](<span class="keywordtype">unsigned</span> Threshold, <span class="keywordtype">bool</span> IsHotCallsite) {</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;      <span class="comment">// Adjust the threshold for next level of imported functions.</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      <span class="comment">// The threshold is different for hot callsites because we can then</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      <span class="comment">// inline chains of hot calls.</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      <span class="keywordflow">if</span> (IsHotCallsite)</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        <span class="keywordflow">return</span> Threshold * <a class="code" href="FunctionImport_8cpp.html#ab62a4b224f4cbfde8a42a2ccc7e1348e">ImportHotInstrFactor</a>;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      <span class="keywordflow">return</span> Threshold * <a class="code" href="FunctionImport_8cpp.html#aeb35d5c809e3003e07e96bd489608220">ImportInstrFactor</a>;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    };</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160; </div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> AdjThreshold = GetAdjustedThreshold(Threshold, IsHotCallsite);</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160; </div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    ImportCount++;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160; </div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="comment">// Insert the newly imported function to the worklist.</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(ResolvedCalleeSummary, AdjThreshold);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  }</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;}</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="comment">/// Given the list of globals defined in a module, compute the list of imports</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment">/// as well as the list of &quot;exports&quot;, i.e. the list of symbols referenced from</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="comment">/// another module (that may require promotion).</span></div>
<div class="line"><a name="l00521"></a><span class="lineno"><a class="line" href="FunctionImport_8cpp.html#aacd91428e0c3e7822839ebf79ea8db4e">  521</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="FunctionImport_8cpp.html#aacd91428e0c3e7822839ebf79ea8db4e">ComputeImportForModule</a>(</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1DenseMap.html">GVSummaryMapTy</a> &amp;DefinedGVSummaries, <span class="keyword">const</span> <a class="code" href="classllvm_1_1ModuleSummaryIndex.html">ModuleSummaryIndex</a> &amp;<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>,</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> ModName, <a class="code" href="classllvm_1_1StringMap.html">FunctionImporter::ImportMapTy</a> &amp;ImportList,</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <a class="code" href="classllvm_1_1StringMap.html">StringMap&lt;FunctionImporter::ExportSetTy&gt;</a> *ExportLists = <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <span class="comment">// Worklist contains the list of function imported in this module, for which</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <span class="comment">// we will analyse the callees and may import further down the callgraph.</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;EdgeInfo, 128&gt;</a> Worklist;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">FunctionImporter::ImportThresholdsTy</a> ImportThresholds;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160; </div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  <span class="comment">// Populate the worklist with the import for the functions in the current</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  <span class="comment">// module</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;GVSummary : DefinedGVSummaries) {</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="comment">// FIXME: Change the GVSummaryMapTy to hold ValueInfo instead of GUID</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <span class="comment">// so this map look up (and possibly others) can be avoided.</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <span class="keyword">auto</span> <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a> = <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>.getValueInfo(GVSummary.first);</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>.isGlobalValueLive(GVSummary.second)) {</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Ignores Dead GUID: &quot;</span> &lt;&lt; <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    }</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keyword">auto</span> *FuncSummary =</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        dyn_cast&lt;FunctionSummary&gt;(GVSummary.second-&gt;getBaseObject());</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keywordflow">if</span> (!FuncSummary)</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      <span class="comment">// Skip import for global variables</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Initialize import for &quot;</span> &lt;&lt; <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <a class="code" href="FunctionImport_8cpp.html#a90f2bd3f2ffe5bc8f3af77910db73295">computeImportForFunction</a>(*FuncSummary, <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>, <a class="code" href="FunctionImport_8cpp.html#ae6f46d7423fbac4058566f39d9b57944">ImportInstrLimit</a>,</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                             DefinedGVSummaries, Worklist, ImportList,</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                             ExportLists, ImportThresholds);</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  }</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160; </div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <span class="comment">// Process the newly imported functions and add callees to the worklist.</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <span class="keywordflow">while</span> (!Worklist.empty()) {</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <span class="keyword">auto</span> GVInfo = Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <span class="keyword">auto</span> *Summary = std::get&lt;0&gt;(GVInfo);</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <span class="keyword">auto</span> Threshold = std::get&lt;1&gt;(GVInfo);</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160; </div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">FS</a> = dyn_cast&lt;FunctionSummary&gt;(Summary))</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      <a class="code" href="FunctionImport_8cpp.html#a90f2bd3f2ffe5bc8f3af77910db73295">computeImportForFunction</a>(*<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">FS</a>, <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>, Threshold, DefinedGVSummaries,</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                               Worklist, ImportList, ExportLists,</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                               ImportThresholds);</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      <a class="code" href="FunctionImport_8cpp.html#ab718cd3b61483e936a7360c9f0861a4e">computeImportForReferencedGlobals</a>(*Summary, <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>, DefinedGVSummaries,</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                                        Worklist, ImportList, ExportLists);</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  }</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160; </div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  <span class="comment">// Print stats about functions considered but rejected for importing</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  <span class="comment">// when requested.</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="FunctionImport_8cpp.html#a594c382c0ad71320df28373c39e3ec70">PrintImportFailures</a>) {</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Missed imports into module &quot;</span> &lt;&lt; ModName &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : ImportThresholds) {</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;      <span class="keyword">auto</span> &amp;ProcessedThreshold = std::get&lt;0&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.second);</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;      <span class="keyword">auto</span> &amp;CalleeSummary = std::get&lt;1&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.second);</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      <span class="keyword">auto</span> &amp;FailureInfo = std::get&lt;2&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.second);</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      <span class="keywordflow">if</span> (CalleeSummary)</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        <span class="keywordflow">continue</span>; <span class="comment">// We are going to import.</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(FailureInfo);</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;      <a class="code" href="classllvm_1_1FunctionSummary.html">FunctionSummary</a> *<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">FS</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;      <span class="keywordflow">if</span> (!FailureInfo-&gt;VI.getSummaryList().empty())</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">FS</a> = dyn_cast&lt;FunctionSummary&gt;(</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;            FailureInfo-&gt;VI.getSummaryList()[0]-&gt;getBaseObject());</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; FailureInfo-&gt;VI</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;: Reason = &quot;</span> &lt;&lt; <a class="code" href="FunctionImport_8cpp.html#a60a4fc74a3465963f7b49b8831508ce4">getFailureName</a>(FailureInfo-&gt;Reason)</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;, Threshold = &quot;</span> &lt;&lt; ProcessedThreshold</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;, Size = &quot;</span> &lt;&lt; (<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">FS</a> ? (<a class="code" href="lib_2Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a>)<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">FS</a>-&gt;instCount() : -1)</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;, MaxHotness = &quot;</span> &lt;&lt; <a class="code" href="namespacellvm.html#a82d12b13c0992d81737c1ba236579249">getHotnessName</a>(FailureInfo-&gt;MaxHotness)</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;, Attempts = &quot;</span> &lt;&lt; FailureInfo-&gt;Attempts &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    }</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  }</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;}</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160; </div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00594"></a><span class="lineno"><a class="line" href="FunctionImport_8cpp.html#a99b9fbe728ecb449155f59118b29ec5c">  594</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="FunctionImport_8cpp.html#a99b9fbe728ecb449155f59118b29ec5c">isGlobalVarSummary</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1ModuleSummaryIndex.html">ModuleSummaryIndex</a> &amp;<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>, <a class="code" href="structllvm_1_1ValueInfo.html">ValueInfo</a> <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>) {</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  <span class="keyword">auto</span> SL = <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>.getSummaryList();</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  <span class="keywordflow">return</span> SL.empty()</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;             ? <a class="code" href="AliasAnalysis_8cpp.html#af930af31a919474bec5b29dd0d0bb8ba">false</a></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;             : SL[0]-&gt;getSummaryKind() == <a class="code" href="classllvm_1_1GlobalValueSummary.html#a0c8dfea65f1f5dfba143b1fc9768614ca461342c05a59e66da9d6b38eaccda99a">GlobalValueSummary::GlobalVarKind</a>;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;}</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160; </div>
<div class="line"><a name="l00601"></a><span class="lineno"><a class="line" href="FunctionImport_8cpp.html#ac291695c9c0aeacdc46efc24d36905b1">  601</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="FunctionImport_8cpp.html#a99b9fbe728ecb449155f59118b29ec5c">isGlobalVarSummary</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1ModuleSummaryIndex.html">ModuleSummaryIndex</a> &amp;<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>,</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                               <a class="code" href="classllvm_1_1GlobalValue.html#a3af0428ec6e48cb2f05c199b7b9f7e07">GlobalValue::GUID</a> <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>) {</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a> = <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>.getValueInfo(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>))</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="FunctionImport_8cpp.html#a99b9fbe728ecb449155f59118b29ec5c">isGlobalVarSummary</a>(<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>);</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;}</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160; </div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;</div>
<div class="line"><a name="l00609"></a><span class="lineno"><a class="line" href="FunctionImport_8cpp.html#ae32ac1f5b44726ab1de654ef3576e00b">  609</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="FunctionImport_8cpp.html#ae32ac1f5b44726ab1de654ef3576e00b">numGlobalVarSummaries</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1ModuleSummaryIndex.html">ModuleSummaryIndex</a> &amp;<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>,</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                                      <a class="code" href="classT.html">T</a> &amp;Cont) {</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  <span class="keywordtype">unsigned</span> NumGVS = 0;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;V : Cont)</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="FunctionImport_8cpp.html#a99b9fbe728ecb449155f59118b29ec5c">isGlobalVarSummary</a>(<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>, V))</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;      ++NumGVS;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  <span class="keywordflow">return</span> NumGVS;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;}</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160; </div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span></div>
<div class="line"><a name="l00621"></a><span class="lineno"><a class="line" href="FunctionImport_8cpp.html#a04038fdd608b9eb5590e13d9e091d01c">  621</a></span>&#160;<a class="code" href="FunctionImport_8cpp.html#a04038fdd608b9eb5590e13d9e091d01c">checkVariableImport</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1ModuleSummaryIndex.html">ModuleSummaryIndex</a> &amp;<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>,</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                    <a class="code" href="classllvm_1_1StringMap.html">StringMap&lt;FunctionImporter::ImportMapTy&gt;</a> &amp;ImportLists,</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                    <a class="code" href="classllvm_1_1StringMap.html">StringMap&lt;FunctionImporter::ExportSetTy&gt;</a> &amp;ExportLists) {</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160; </div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;GlobalValue::GUID&gt;</a> FlattenedImports;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160; </div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;ImportPerModule : ImportLists)</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;ExportPerModule : ImportPerModule.second)</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;      FlattenedImports.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#a79eed48913651aeedda2eed25201ea84">insert</a>(ExportPerModule.second.begin(),</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                              ExportPerModule.second.end());</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160; </div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  <span class="comment">// Checks that all GUIDs of read/writeonly vars we see in export lists</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  <span class="comment">// are also in the import lists. Otherwise we my face linker undefs,</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  <span class="comment">// because readonly and writeonly vars are internalized in their</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  <span class="comment">// source modules.</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  <span class="keyword">auto</span> IsReadOrWriteOnlyVar = [&amp;](<a class="code" href="classllvm_1_1StringRef.html">StringRef</a> ModulePath, <span class="keyword">const</span> <a class="code" href="structllvm_1_1ValueInfo.html">ValueInfo</a> &amp;<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>) {</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="keyword">auto</span> *GVS = dyn_cast_or_null&lt;GlobalVarSummary&gt;(</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>.findSummaryInModule(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>, ModulePath));</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <span class="keywordflow">return</span> GVS &amp;&amp; (<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>.isReadOnly(GVS) || <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>.isWriteOnly(GVS));</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  };</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160; </div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;ExportPerModule : ExportLists)</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a> : ExportPerModule.second)</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;      <span class="keywordflow">if</span> (!FlattenedImports.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#afe504aa31a6a354cec13f5b32d0b1d9d">count</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>.getGUID()) &amp;&amp;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;          IsReadOrWriteOnlyVar(ExportPerModule.first(), <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>))</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160; </div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;}</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="comment">/// Compute all the import and export for every module using the Index.</span></div>
<div class="line"><a name="l00653"></a><span class="lineno"><a class="line" href="namespacellvm.html#a81a2aefedf0b4e9b9ba33c711c8cbf71">  653</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#a81a2aefedf0b4e9b9ba33c711c8cbf71">llvm::ComputeCrossModuleImport</a>(</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1ModuleSummaryIndex.html">ModuleSummaryIndex</a> &amp;<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>,</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1StringMap.html">StringMap&lt;GVSummaryMapTy&gt;</a> &amp;ModuleToDefinedGVSummaries,</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <a class="code" href="classllvm_1_1StringMap.html">StringMap&lt;FunctionImporter::ImportMapTy&gt;</a> &amp;ImportLists,</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <a class="code" href="classllvm_1_1StringMap.html">StringMap&lt;FunctionImporter::ExportSetTy&gt;</a> &amp;ExportLists) {</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <span class="comment">// For each module that has function defined, compute the import/export lists.</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;DefinedGVSummaries : ModuleToDefinedGVSummaries) {</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <span class="keyword">auto</span> &amp;ImportList = ImportLists[DefinedGVSummaries.first()];</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Computing import for Module &#39;&quot;</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                      &lt;&lt; DefinedGVSummaries.first() &lt;&lt; <span class="stringliteral">&quot;&#39;\n&quot;</span>);</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <a class="code" href="FunctionImport_8cpp.html#aacd91428e0c3e7822839ebf79ea8db4e">ComputeImportForModule</a>(DefinedGVSummaries.second, <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>,</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                           DefinedGVSummaries.first(), ImportList,</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                           &amp;ExportLists);</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  }</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160; </div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  <span class="comment">// When computing imports we only added the variables and functions being</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  <span class="comment">// imported to the export list. We also need to mark any references and calls</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  <span class="comment">// they make as exported as well. We do this here, as it is more efficient</span></div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  <span class="comment">// since we may import the same values multiple times into different modules</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  <span class="comment">// during the import computation.</span></div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;ELI : ExportLists) {</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <a class="code" href="classllvm_1_1DenseSet.html">FunctionImporter::ExportSetTy</a> NewExports;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;DefinedGVSummaries =</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        ModuleToDefinedGVSummaries.lookup(ELI.first());</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;EI : ELI.second) {</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;      <span class="comment">// Find the copy defined in the exporting module so that we can mark the</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;      <span class="comment">// values it references in that specific definition as exported.</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;      <span class="comment">// Below we will add all references and called values, without regard to</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;      <span class="comment">// whether they are also defined in this module. We subsequently prune the</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;      <span class="comment">// list to only include those defined in the exporting module, see comment</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;      <span class="comment">// there as to why.</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;      <span class="keyword">auto</span> DS = DefinedGVSummaries.find(EI.getGUID());</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;      <span class="comment">// Anything marked exported during the import computation must have been</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;      <span class="comment">// defined in the exporting module.</span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DS != DefinedGVSummaries.end());</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;      <span class="keyword">auto</span> *<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> = DS-&gt;getSecond();</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;      <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;getBaseObject();</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *GVS = dyn_cast&lt;GlobalVarSummary&gt;(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>)) {</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        <span class="comment">// Export referenced functions and variables. We don&#39;t export/promote</span></div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        <span class="comment">// objects referenced by writeonly variable initializer, because</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        <span class="comment">// we convert such variables initializers to &quot;zeroinitializer&quot;.</span></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        <span class="comment">// See processGlobalForThinLTO.</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>.isWriteOnly(GVS))</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;          <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a> : GVS-&gt;refs())</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;            NewExports.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#a79eed48913651aeedda2eed25201ea84">insert</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>);</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        <span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">FS</a> = cast&lt;FunctionSummary&gt;(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>);</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;Edge : <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">FS</a>-&gt;calls())</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;          NewExports.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#a79eed48913651aeedda2eed25201ea84">insert</a>(Edge.first);</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="namespacellvm.html#a9db8c44b250b90e3ab7e4d144e7c9c2ea60baadb22e80b147e4885ad16760e569">Ref</a> : <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">FS</a>-&gt;refs())</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;          NewExports.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#a79eed48913651aeedda2eed25201ea84">insert</a>(<a class="code" href="namespacellvm.html#a9db8c44b250b90e3ab7e4d144e7c9c2ea60baadb22e80b147e4885ad16760e569">Ref</a>);</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;      }</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    }</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <span class="comment">// Prune list computed above to only include values defined in the exporting</span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <span class="comment">// module. We do this after the above insertion since we may hit the same</span></div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <span class="comment">// ref/call target multiple times in above loop, and it is more efficient to</span></div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <span class="comment">// avoid a set lookup each time.</span></div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> EI = NewExports.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#ad7dc7318244359268414719e0959346e">begin</a>(); EI != NewExports.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#a8cd802dcaed35e1f28ea3cbe4af4eff5">end</a>();) {</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      <span class="keywordflow">if</span> (!DefinedGVSummaries.count(EI-&gt;getGUID()))</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        NewExports.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#af972d87e15b5f6ed61bd5c3956c5213d">erase</a>(EI++);</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        ++EI;</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    }</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    ELI.second.insert(NewExports.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#ad7dc7318244359268414719e0959346e">begin</a>(), NewExports.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#a8cd802dcaed35e1f28ea3cbe4af4eff5">end</a>());</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  }</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160; </div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="FunctionImport_8cpp.html#a04038fdd608b9eb5590e13d9e091d01c">checkVariableImport</a>(<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>, ImportLists, ExportLists));</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Import/Export lists for &quot;</span> &lt;&lt; ImportLists.<a class="code" href="classllvm_1_1StringMapImpl.html#a80596ea56fa14ea5a773d303ee64293c">size</a>()</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot; modules:\n&quot;</span>);</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;ModuleImports : ImportLists) {</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="keyword">auto</span> ModName = ModuleImports.first();</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="keyword">auto</span> &amp;Exports = ExportLists[ModName];</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <span class="keywordtype">unsigned</span> NumGVS = <a class="code" href="FunctionImport_8cpp.html#ae32ac1f5b44726ab1de654ef3576e00b">numGlobalVarSummaries</a>(<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>, Exports);</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;* Module &quot;</span> &lt;&lt; ModName &lt;&lt; <span class="stringliteral">&quot; exports &quot;</span></div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                      &lt;&lt; Exports.size() - NumGVS &lt;&lt; <span class="stringliteral">&quot; functions and &quot;</span> &lt;&lt; NumGVS</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; vars. Imports from &quot;</span> &lt;&lt; ModuleImports.second.size()</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; modules.\n&quot;</span>);</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;Src : ModuleImports.second) {</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;      <span class="keyword">auto</span> SrcModName = Src.first();</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;      <span class="keywordtype">unsigned</span> NumGVSPerMod = <a class="code" href="FunctionImport_8cpp.html#ae32ac1f5b44726ab1de654ef3576e00b">numGlobalVarSummaries</a>(<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>, Src.second);</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; - &quot;</span> &lt;&lt; Src.second.size() - NumGVSPerMod</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot; functions imported from &quot;</span> &lt;&lt; SrcModName &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; - &quot;</span> &lt;&lt; NumGVSPerMod</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot; global vars imported from &quot;</span> &lt;&lt; SrcModName &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    }</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  }</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;}</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160; </div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00744"></a><span class="lineno"><a class="line" href="FunctionImport_8cpp.html#ad7bfd8da79e55bf6a2b2ac4955b7f95d">  744</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="FunctionImport_8cpp.html#ad7bfd8da79e55bf6a2b2ac4955b7f95d">dumpImportListForModule</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1ModuleSummaryIndex.html">ModuleSummaryIndex</a> &amp;<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>,</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;                                    <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> ModulePath,</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                                    <a class="code" href="classllvm_1_1StringMap.html">FunctionImporter::ImportMapTy</a> &amp;ImportList) {</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;* Module &quot;</span> &lt;&lt; ModulePath &lt;&lt; <span class="stringliteral">&quot; imports from &quot;</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;                    &lt;&lt; ImportList.<a class="code" href="classllvm_1_1StringMapImpl.html#a80596ea56fa14ea5a773d303ee64293c">size</a>() &lt;&lt; <span class="stringliteral">&quot; modules.\n&quot;</span>);</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;Src : ImportList) {</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="keyword">auto</span> SrcModName = Src.first();</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="keywordtype">unsigned</span> NumGVSPerMod = <a class="code" href="FunctionImport_8cpp.html#ae32ac1f5b44726ab1de654ef3576e00b">numGlobalVarSummaries</a>(<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>, Src.second);</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; - &quot;</span> &lt;&lt; Src.second.size() - NumGVSPerMod</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; functions imported from &quot;</span> &lt;&lt; SrcModName &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; - &quot;</span> &lt;&lt; NumGVSPerMod &lt;&lt; <span class="stringliteral">&quot; vars imported from &quot;</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;                      &lt;&lt; SrcModName &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  }</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;}</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="comment">/// Compute all the imports for the given module in the Index.</span></div>
<div class="line"><a name="l00761"></a><span class="lineno"><a class="line" href="namespacellvm.html#ae3df80802cff4cb5736b3f9f87d70767">  761</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#ae3df80802cff4cb5736b3f9f87d70767">llvm::ComputeCrossModuleImportForModule</a>(</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> ModulePath, <span class="keyword">const</span> <a class="code" href="classllvm_1_1ModuleSummaryIndex.html">ModuleSummaryIndex</a> &amp;<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>,</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    <a class="code" href="classllvm_1_1StringMap.html">FunctionImporter::ImportMapTy</a> &amp;ImportList) {</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  <span class="comment">// Collect the list of functions this module defines.</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  <span class="comment">// GUID -&gt; Summary</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">GVSummaryMapTy</a> FunctionSummaryMap;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>.collectDefinedFunctionsForModule(ModulePath, FunctionSummaryMap);</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160; </div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  <span class="comment">// Compute the import list for this module.</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Computing import for Module &#39;&quot;</span> &lt;&lt; ModulePath &lt;&lt; <span class="stringliteral">&quot;&#39;\n&quot;</span>);</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;  <a class="code" href="FunctionImport_8cpp.html#aacd91428e0c3e7822839ebf79ea8db4e">ComputeImportForModule</a>(FunctionSummaryMap, <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>, ModulePath, ImportList);</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160; </div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  <a class="code" href="FunctionImport_8cpp.html#ad7bfd8da79e55bf6a2b2ac4955b7f95d">dumpImportListForModule</a>(<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>, ModulePath, ImportList);</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;}</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160; </div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;<span class="comment">// Mark all external summaries in Index for import into the given module.</span></div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;<span class="comment">// Used for distributed builds using a distributed index.</span></div>
<div class="line"><a name="l00780"></a><span class="lineno"><a class="line" href="namespacellvm.html#a7475afb80c692a3cfc942b212701a96e">  780</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#a7475afb80c692a3cfc942b212701a96e">llvm::ComputeCrossModuleImportForModuleFromIndex</a>(</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> ModulePath, <span class="keyword">const</span> <a class="code" href="classllvm_1_1ModuleSummaryIndex.html">ModuleSummaryIndex</a> &amp;<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>,</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    <a class="code" href="classllvm_1_1StringMap.html">FunctionImporter::ImportMapTy</a> &amp;ImportList) {</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;GlobalList : <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>) {</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    <span class="comment">// Ignore entries for undefined references.</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <span class="keywordflow">if</span> (GlobalList.second.SummaryList.empty())</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160; </div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    <span class="keyword">auto</span> GUID = GlobalList.first;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(GlobalList.second.SummaryList.size() == 1 &amp;&amp;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;           <span class="stringliteral">&quot;Expected individual combined index to have one summary per GUID&quot;</span>);</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    <span class="keyword">auto</span> &amp;Summary = GlobalList.second.SummaryList[0];</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <span class="comment">// Skip the summaries for the importing module. These are included to</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <span class="comment">// e.g. record required linkage changes.</span></div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <span class="keywordflow">if</span> (Summary-&gt;modulePath() == ModulePath)</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <span class="comment">// Add an entry to provoke importing by thinBackend.</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    ImportList[Summary-&gt;modulePath()].<a class="code" href="classllvm_1_1StringMap.html#afea367cbdd62e85c20d3ebe044253ce7">insert</a>(GUID);</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  }</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  <a class="code" href="FunctionImport_8cpp.html#ad7bfd8da79e55bf6a2b2ac4955b7f95d">dumpImportListForModule</a>(<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>, ModulePath, ImportList);</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;}</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160; </div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="comment">// For SamplePGO, the indirect call targets for local functions will</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="comment">// have its original name annotated in profile. We try to find the</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="comment">// corresponding PGOFuncName as the GUID, and fix up the edges</span></div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="comment">// accordingly.</span></div>
<div class="line"><a name="l00808"></a><span class="lineno"><a class="line" href="FunctionImport_8cpp.html#a8afb9de4d8239806728ad5d82d550b87">  808</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="FunctionImport_8cpp.html#a8afb9de4d8239806728ad5d82d550b87">updateValueInfoForIndirectCalls</a>(<a class="code" href="classllvm_1_1ModuleSummaryIndex.html">ModuleSummaryIndex</a> &amp;<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>,</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;                                     <a class="code" href="classllvm_1_1FunctionSummary.html">FunctionSummary</a> *<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">FS</a>) {</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;EI : <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">FS</a>-&gt;mutableCalls()) {</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <span class="keywordflow">if</span> (!EI.first.getSummaryList().empty())</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    <span class="keyword">auto</span> GUID = <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>.getGUIDFromOriginalID(EI.first.getGUID());</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <span class="keywordflow">if</span> (GUID == 0)</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    <span class="comment">// Update the edge to point directly to the correct GUID.</span></div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <span class="keyword">auto</span> <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a> = <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>.getValueInfo(GUID);</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">llvm::any_of</a>(</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;            <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>.getSummaryList(),</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;            [&amp;](<span class="keyword">const</span> std::unique_ptr&lt;GlobalValueSummary&gt; &amp;SummaryPtr) {</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;              <span class="comment">// The mapping from OriginalId to GUID may return a GUID</span></div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;              <span class="comment">// that corresponds to a static variable. Filter it out here.</span></div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;              <span class="comment">// This can happen when</span></div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;              <span class="comment">// 1) There is a call to a library function which is not defined</span></div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;              <span class="comment">// in the index.</span></div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;              <span class="comment">// 2) There is a static variable with the  OriginalGUID identical</span></div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;              <span class="comment">// to the GUID of the library function in 1);</span></div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;              <span class="comment">// When this happens the static variable in 2) will be found,</span></div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;              <span class="comment">// which needs to be filtered out.</span></div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;              return SummaryPtr-&gt;getSummaryKind() ==</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;                     GlobalValueSummary::GlobalVarKind;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;            }))</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    EI.first = <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  }</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;}</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160; </div>
<div class="line"><a name="l00838"></a><span class="lineno"><a class="line" href="namespacellvm.html#a9a3d3d86175f9b2db2ffcd643b16ff8f">  838</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#a9a3d3d86175f9b2db2ffcd643b16ff8f">llvm::updateIndirectCalls</a>(<a class="code" href="classllvm_1_1ModuleSummaryIndex.html">ModuleSummaryIndex</a> &amp;<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>) {</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;Entry : <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>) {</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> : Entry.second.SummaryList) {</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">FS</a> = dyn_cast&lt;FunctionSummary&gt;(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.get()))</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;        <a class="code" href="FunctionImport_8cpp.html#a8afb9de4d8239806728ad5d82d550b87">updateValueInfoForIndirectCalls</a>(<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>, <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">FS</a>);</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    }</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  }</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;}</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160; </div>
<div class="line"><a name="l00847"></a><span class="lineno"><a class="line" href="namespacellvm.html#a7b5d72a4e8c39c8d0ea81cb9c547bc8c">  847</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#a7b5d72a4e8c39c8d0ea81cb9c547bc8c">llvm::computeDeadSymbolsAndUpdateIndirectCalls</a>(</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    <a class="code" href="classllvm_1_1ModuleSummaryIndex.html">ModuleSummaryIndex</a> &amp;<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>,</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;GlobalValue::GUID&gt;</a> &amp;GUIDPreservedSymbols,</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="namespacellvm.html#ac505d74d262ee1e64d87b07121199e36">PrevailingType</a>(<a class="code" href="classllvm_1_1GlobalValue.html#a3af0428ec6e48cb2f05c199b7b9f7e07">GlobalValue::GUID</a>)&gt; isPrevailing) {</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>.withGlobalValueDeadStripping());</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="FunctionImport_8cpp.html#a4f50af5489916353668d76d08cb00ea8">ComputeDead</a> ||</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;      <span class="comment">// Don&#39;t do anything when nothing is live, this is friendly with tests.</span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;      GUIDPreservedSymbols.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#a9a3c9d867ff6bde97841c2b7983f5c70">empty</a>()) {</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <span class="comment">// Still need to update indirect calls.</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    <a class="code" href="namespacellvm.html#a9a3d3d86175f9b2db2ffcd643b16ff8f">updateIndirectCalls</a>(<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>);</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  }</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;  <span class="keywordtype">unsigned</span> LiveSymbols = 0;</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;ValueInfo, 128&gt;</a> Worklist;</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a499ea32ca1b8d16cedfe01d1e5b08f29">reserve</a>(GUIDPreservedSymbols.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#a9a025cb106832026cd05c2b4648a699f">size</a>() * 2);</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> GUID : GUIDPreservedSymbols) {</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    <a class="code" href="structllvm_1_1ValueInfo.html">ValueInfo</a> <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a> = <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>.getValueInfo(GUID);</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>)</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> : <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>.getSummaryList())</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;      <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;setLive(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  }</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160; </div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;  <span class="comment">// Add values flagged in the index as live roots to the worklist.</span></div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;Entry : <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>) {</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    <span class="keyword">auto</span> <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a> = <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>.getValueInfo(Entry);</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> : Entry.second.SummaryList) {</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">FS</a> = dyn_cast&lt;FunctionSummary&gt;(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.get()))</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;        <a class="code" href="FunctionImport_8cpp.html#a8afb9de4d8239806728ad5d82d550b87">updateValueInfoForIndirectCalls</a>(<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>, <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">FS</a>);</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;isLive()) {</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Live root: &quot;</span> &lt;&lt; <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;        Worklist.push_back(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>);</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        ++LiveSymbols;</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;      }</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    }</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  }</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160; </div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  <span class="comment">// Make value live and add it to the worklist if it was not live before.</span></div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  <span class="keyword">auto</span> visit = [&amp;](<a class="code" href="structllvm_1_1ValueInfo.html">ValueInfo</a> <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>, <span class="keywordtype">bool</span> IsAliasee) {</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    <span class="comment">// FIXME: If we knew which edges were created for indirect call profiles,</span></div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <span class="comment">// we could skip them here. Any that are live should be reached via</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    <span class="comment">// other edges, e.g. reference edges. Otherwise, using a profile collected</span></div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    <span class="comment">// on a slightly different binary might provoke preserving, importing</span></div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    <span class="comment">// and ultimately promoting calls to functions not linked into this</span></div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <span class="comment">// binary, which increases the binary size unnecessarily. Note that</span></div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    <span class="comment">// if this code changes, the importer needs to change so that edges</span></div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <span class="comment">// to functions marked dead are skipped.</span></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160; </div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">llvm::any_of</a>(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>.getSummaryList(),</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;                     [](<span class="keyword">const</span> std::unique_ptr&lt;llvm::GlobalValueSummary&gt; &amp;<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>) {</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;                       return S-&gt;isLive();</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;                     }))</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160; </div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    <span class="comment">// We only keep live symbols that are known to be non-prevailing if any are</span></div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <span class="comment">// available_externally, linkonceodr, weakodr. Those symbols are discarded</span></div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    <span class="comment">// later in the EliminateAvailableExternally pass and setting them to</span></div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    <span class="comment">// not-live could break downstreams users of liveness information (PR36483)</span></div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <span class="comment">// or limit optimization opportunities.</span></div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    <span class="keywordflow">if</span> (isPrevailing(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>.getGUID()) == <a class="code" href="namespacellvm.html#ac505d74d262ee1e64d87b07121199e36abafd7322c6e97d25b6299b5d6fe8920b">PrevailingType::No</a>) {</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;      <span class="keywordtype">bool</span> KeepAliveLinkage = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;      <span class="keywordtype">bool</span> Interposable = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> : <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>.getSummaryList()) {</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;linkage() == <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57caa67f293befacbbf974525116ccf2ff42">GlobalValue::AvailableExternallyLinkage</a> ||</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;            <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;linkage() == <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca696bb1c9b0b0e76bb70c61f68866452a">GlobalValue::WeakODRLinkage</a> ||</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;            <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;linkage() == <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57caf2b592edf18170e7aff4e8f3bae3360c">GlobalValue::LinkOnceODRLinkage</a>)</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;          KeepAliveLinkage = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GlobalValue.html#aabf6932ed41fc64e17c0030c44eda44e">GlobalValue::isInterposableLinkage</a>(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;linkage()))</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;          Interposable = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;      }</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160; </div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;      <span class="keywordflow">if</span> (!IsAliasee) {</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;        <span class="keywordflow">if</span> (!KeepAliveLinkage)</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;          <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160; </div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        <span class="keywordflow">if</span> (Interposable)</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;          <a class="code" href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">report_fatal_error</a>(</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;              <span class="stringliteral">&quot;Interposable and available_externally/linkonce_odr/weak_odr &quot;</span></div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;              <span class="stringliteral">&quot;symbol&quot;</span>);</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;      }</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    }</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160; </div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> : <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>.getSummaryList())</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;      <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;setLive(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    ++LiveSymbols;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    Worklist.push_back(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>);</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  };</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160; </div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  <span class="keywordflow">while</span> (!Worklist.empty()) {</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    <span class="keyword">auto</span> <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a> = Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;Summary : <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>.getSummaryList()) {</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *AS = dyn_cast&lt;AliasSummary&gt;(Summary.get())) {</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        <span class="comment">// If this is an alias, visit the aliasee VI to ensure that all copies</span></div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;        <span class="comment">// are marked live and it is added to the worklist for further</span></div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;        <span class="comment">// processing of its references.</span></div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;        visit(AS-&gt;getAliaseeVI(), <span class="keyword">true</span>);</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;      }</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="namespacellvm.html#a9db8c44b250b90e3ab7e4d144e7c9c2ea60baadb22e80b147e4885ad16760e569">Ref</a> : Summary-&gt;refs())</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;        visit(<a class="code" href="namespacellvm.html#a9db8c44b250b90e3ab7e4d144e7c9c2ea60baadb22e80b147e4885ad16760e569">Ref</a>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">FS</a> = dyn_cast&lt;FunctionSummary&gt;(Summary.get()))</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> Call : <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">FS</a>-&gt;calls())</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;          visit(Call.first, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    }</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;  }</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;  <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>.setWithGlobalValueDeadStripping();</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160; </div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;  <span class="keywordtype">unsigned</span> DeadSymbols = <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>.size() - LiveSymbols;</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; LiveSymbols &lt;&lt; <span class="stringliteral">&quot; symbols Live, and &quot;</span> &lt;&lt; DeadSymbols</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot; symbols Dead \n&quot;</span>);</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  NumDeadSymbols += DeadSymbols;</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  NumLiveSymbols += LiveSymbols;</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;}</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160; </div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;<span class="comment">// Compute dead symbols and propagate constants in combined index.</span></div>
<div class="line"><a name="l00963"></a><span class="lineno"><a class="line" href="namespacellvm.html#aee23fa24e474fb6e443445dd3545adf9">  963</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#aee23fa24e474fb6e443445dd3545adf9">llvm::computeDeadSymbolsWithConstProp</a>(</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    <a class="code" href="classllvm_1_1ModuleSummaryIndex.html">ModuleSummaryIndex</a> &amp;<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>,</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;GlobalValue::GUID&gt;</a> &amp;GUIDPreservedSymbols,</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="namespacellvm.html#ac505d74d262ee1e64d87b07121199e36">PrevailingType</a>(<a class="code" href="classllvm_1_1GlobalValue.html#a3af0428ec6e48cb2f05c199b7b9f7e07">GlobalValue::GUID</a>)&gt; isPrevailing,</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    <span class="keywordtype">bool</span> ImportEnabled) {</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;  <a class="code" href="namespacellvm.html#a7b5d72a4e8c39c8d0ea81cb9c547bc8c">computeDeadSymbolsAndUpdateIndirectCalls</a>(<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>, GUIDPreservedSymbols,</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;                                           isPrevailing);</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;  <span class="keywordflow">if</span> (ImportEnabled)</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>.propagateAttributes(GUIDPreservedSymbols);</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;}</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;<span class="comment">/// Compute the set of summaries needed for a ThinLTO backend compilation of</span></div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;<span class="comment">/// \p ModulePath.</span></div>
<div class="line"><a name="l00976"></a><span class="lineno"><a class="line" href="namespacellvm.html#a31192bb939153e2442a7a73ac6be0f5a">  976</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#a31192bb939153e2442a7a73ac6be0f5a">llvm::gatherImportedSummariesForModule</a>(</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> ModulePath,</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1StringMap.html">StringMap&lt;GVSummaryMapTy&gt;</a> &amp;ModuleToDefinedGVSummaries,</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1StringMap.html">FunctionImporter::ImportMapTy</a> &amp;ImportList,</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    std::map&lt;std::string, GVSummaryMapTy&gt; &amp;ModuleToSummariesForIndex) {</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;  <span class="comment">// Include all summaries from the importing module.</span></div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;  ModuleToSummariesForIndex[std::string(ModulePath)] =</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;      ModuleToDefinedGVSummaries.<a class="code" href="classllvm_1_1StringMap.html#aa6528965c64b379c2cb311599babdd66">lookup</a>(ModulePath);</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  <span class="comment">// Include summaries for imports.</span></div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;ILI : ImportList) {</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    <span class="keyword">auto</span> &amp;SummariesForIndex =</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;        ModuleToSummariesForIndex[std::string(ILI.first())];</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;DefinedGVSummaries =</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;        ModuleToDefinedGVSummaries.<a class="code" href="classllvm_1_1StringMap.html#aa6528965c64b379c2cb311599babdd66">lookup</a>(ILI.first());</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;GI : ILI.second) {</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> &amp;DS = DefinedGVSummaries.find(GI);</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DS != DefinedGVSummaries.end() &amp;&amp;</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;             <span class="stringliteral">&quot;Expected a defined summary for imported global value&quot;</span>);</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;      SummariesForIndex[GI] = DS-&gt;second;</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    }</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;  }</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;}</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;<span class="comment">/// Emit the files \p ModulePath will import from into \p OutputFilename.</span></div>
<div class="line"><a name="l01000"></a><span class="lineno"><a class="line" href="namespacellvm.html#a37d72b5677ac289d04703245553722d9"> 1000</a></span>&#160;<span class="comment"></span>std::error_code <a class="code" href="namespacellvm.html#a37d72b5677ac289d04703245553722d9">llvm::EmitImportsFiles</a>(</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> ModulePath, <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> <a class="code" href="Main_8cpp.html#a829a4bef9a485f5acc5c677f23f4f28c">OutputFilename</a>,</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    <span class="keyword">const</span> std::map&lt;std::string, GVSummaryMapTy&gt; &amp;ModuleToSummariesForIndex) {</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;  std::error_code EC;</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  <a class="code" href="classllvm_1_1raw__fd__ostream.html">raw_fd_ostream</a> ImportsOS(<a class="code" href="Main_8cpp.html#a829a4bef9a485f5acc5c677f23f4f28c">OutputFilename</a>, EC, <a class="code" href="namespacellvm_1_1sys_1_1fs.html#a662978c0cdf81de0d448032f142a3695a8ae6a0a158ab49e5bbe92cbc2cabcbcd">sys::fs::OpenFlags::OF_None</a>);</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;  <span class="keywordflow">if</span> (EC)</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    <span class="keywordflow">return</span> EC;</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;ILI : ModuleToSummariesForIndex)</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    <span class="comment">// The ModuleToSummariesForIndex map includes an entry for the current</span></div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    <span class="comment">// Module (needed for writing out the index files). We don&#39;t want to</span></div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    <span class="comment">// include it in the imports file, however, so filter it out.</span></div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    <span class="keywordflow">if</span> (ILI.first != ModulePath)</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;      ImportsOS &lt;&lt; ILI.first &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;  <span class="keywordflow">return</span> std::error_code();</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;}</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160; </div>
<div class="line"><a name="l01016"></a><span class="lineno"><a class="line" href="namespacellvm.html#a3e9604d679f4806943544dceaeb68149"> 1016</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#a3e9604d679f4806943544dceaeb68149">llvm::convertToDeclaration</a>(<a class="code" href="classllvm_1_1GlobalValue.html">GlobalValue</a> &amp;GV) {</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Converting to a declaration: `&quot;</span> &lt;&lt; GV.<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>()</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = dyn_cast&lt;Function&gt;(&amp;GV)) {</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;deleteBody();</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;clearMetadata();</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;setComdat(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *V = dyn_cast&lt;GlobalVariable&gt;(&amp;GV)) {</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    V-&gt;setInitializer(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    V-&gt;setLinkage(<a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e">GlobalValue::ExternalLinkage</a>);</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    V-&gt;clearMetadata();</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    V-&gt;setComdat(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <a class="code" href="classllvm_1_1GlobalValue.html">GlobalValue</a> *NewGV;</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    <span class="keywordflow">if</span> (GV.<a class="code" href="classllvm_1_1GlobalValue.html#a29e0b1c558b350347e2652b35b26fea8">getValueType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#aba930e0564c4207f112d9243eb2fc13a">isFunctionTy</a>())</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;      NewGV =</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;          <a class="code" href="classllvm_1_1Function.html#a6adbed68009f582caa84cdfd2adf36f1">Function::Create</a>(cast&lt;FunctionType&gt;(GV.<a class="code" href="classllvm_1_1GlobalValue.html#a29e0b1c558b350347e2652b35b26fea8">getValueType</a>()),</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;                           <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e">GlobalValue::ExternalLinkage</a>, GV.<a class="code" href="classllvm_1_1GlobalValue.html#a702d4986803a1782ba305b1c7a0f1c21">getAddressSpace</a>(),</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;                           <span class="stringliteral">&quot;&quot;</span>, GV.<a class="code" href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>());</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;      NewGV =</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;          <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>(*GV.<a class="code" href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>(), GV.<a class="code" href="classllvm_1_1GlobalValue.html#a29e0b1c558b350347e2652b35b26fea8">getValueType</a>(),</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;                             <span class="comment">/*isConstant*/</span> <span class="keyword">false</span>, <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e">GlobalValue::ExternalLinkage</a>,</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;                             <span class="comment">/*init*/</span> <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;                             <span class="comment">/*insertbefore*/</span> <span class="keyword">nullptr</span>, GV.<a class="code" href="classllvm_1_1GlobalValue.html#a52126ae2091b18cecfd5ad0f0012839a">getThreadLocalMode</a>(),</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;                             GV.<a class="code" href="classllvm_1_1GlobalValue.html#a92041fc7f781ba4fe708eec99139b72f">getType</a>()-&gt;<a class="code" href="classllvm_1_1PointerType.html#af8aeced5e71d2589fa3e9791043af5cb">getAddressSpace</a>());</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    NewGV-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(&amp;GV);</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    GV.<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(NewGV);</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;  }</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;  <span class="keywordflow">if</span> (!GV.<a class="code" href="classllvm_1_1GlobalValue.html#a2df2f2e94b5493e9434dbf1c483dbc72">isImplicitDSOLocal</a>())</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    GV.<a class="code" href="classllvm_1_1GlobalValue.html#a78c4d0538c7dbffa955486abae2b61bb">setDSOLocal</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;}</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160; </div>
<div class="line"><a name="l01051"></a><span class="lineno"><a class="line" href="namespacellvm.html#aff4d1b90a120cf50deb15494c801d589"> 1051</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#aff4d1b90a120cf50deb15494c801d589">llvm::thinLTOFinalizeInModule</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;TheModule,</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;                                   <span class="keyword">const</span> <a class="code" href="classllvm_1_1DenseMap.html">GVSummaryMapTy</a> &amp;DefinedGlobals,</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;                                   <span class="keywordtype">bool</span> <a class="code" href="ModuleSummaryIndex_8cpp.html#ad5e32957f486ff1941b83e4f796d95cd">PropagateAttrs</a>) {</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;  <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;Comdat *&gt;</a> NonPrevailingComdats;</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;  <span class="keyword">auto</span> FinalizeInModule = [&amp;](<a class="code" href="classllvm_1_1GlobalValue.html">GlobalValue</a> &amp;GV, <span class="keywordtype">bool</span> Propagate = <span class="keyword">false</span>) {</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <span class="comment">// See if the global summary analysis computed a new resolved linkage.</span></div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730">GS</a> = DefinedGlobals.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(GV.<a class="code" href="classllvm_1_1GlobalValue.html#a97918d8b2f03a703571385ca2d0fe5cd">getGUID</a>());</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730">GS</a> == DefinedGlobals.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>())</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160; </div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    <span class="keywordflow">if</span> (Propagate)</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1FunctionSummary.html">FunctionSummary</a> *<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">FS</a> = dyn_cast&lt;FunctionSummary&gt;(<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730">GS</a>-&gt;second)) {</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = dyn_cast&lt;Function&gt;(&amp;GV)) {</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;          <span class="comment">// TODO: propagate ReadNone and ReadOnly.</span></div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">FS</a>-&gt;fflags().ReadNone &amp;&amp; !<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;doesNotAccessMemory())</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;            <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;setDoesNotAccessMemory();</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160; </div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">FS</a>-&gt;fflags().ReadOnly &amp;&amp; !<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;onlyReadsMemory())</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;            <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;setOnlyReadsMemory();</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160; </div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">FS</a>-&gt;fflags().NoRecurse &amp;&amp; !<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;doesNotRecurse())</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;            <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;setDoesNotRecurse();</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160; </div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">FS</a>-&gt;fflags().NoUnwind &amp;&amp; !<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;doesNotThrow())</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;            <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;setDoesNotThrow();</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;        }</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;      }</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160; </div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    <span class="keyword">auto</span> NewLinkage = <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730">GS</a>-&gt;second-&gt;linkage();</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GlobalValue.html#a308b65a044b4f53e31a2026a81c991d2">GlobalValue::isLocalLinkage</a>(GV.<a class="code" href="classllvm_1_1GlobalValue.html#a3547d58a060ee2e4a29cbea85bef91af">getLinkage</a>()) ||</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;        <span class="comment">// Don&#39;t internalize anything here, because the code below</span></div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;        <span class="comment">// lacks necessary correctness checks. Leave this job to</span></div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;        <span class="comment">// LLVM &#39;internalize&#39; pass.</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;        <a class="code" href="classllvm_1_1GlobalValue.html#a308b65a044b4f53e31a2026a81c991d2">GlobalValue::isLocalLinkage</a>(NewLinkage) ||</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;        <span class="comment">// In case it was dead and already converted to declaration.</span></div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;        GV.<a class="code" href="classllvm_1_1GlobalValue.html#a32e606ac4c88f71f14212e42b808e7f4">isDeclaration</a>())</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160; </div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    <span class="comment">// Set the potentially more constraining visibility computed from summaries.</span></div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    <span class="comment">// The DefaultVisibility condition is because older GlobalValueSummary does</span></div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    <span class="comment">// not record DefaultVisibility and we don&#39;t want to change protected/hidden</span></div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    <span class="comment">// to default.</span></div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730">GS</a>-&gt;second-&gt;getVisibility() != <a class="code" href="classllvm_1_1GlobalValue.html#a9141f967188383108a69cc1b8ed3c195a2491e41d821f1d8fd3958ce3df2fddb2">GlobalValue::DefaultVisibility</a>)</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;      GV.<a class="code" href="classllvm_1_1GlobalValue.html#aa242d8ab89216c14beab812e07009b2a">setVisibility</a>(<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730">GS</a>-&gt;second-&gt;getVisibility());</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160; </div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    <span class="keywordflow">if</span> (NewLinkage == GV.<a class="code" href="classllvm_1_1GlobalValue.html#a3547d58a060ee2e4a29cbea85bef91af">getLinkage</a>())</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160; </div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    <span class="comment">// Check for a non-prevailing def that has interposable linkage</span></div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    <span class="comment">// (e.g. non-odr weak or linkonce). In that case we can&#39;t simply</span></div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    <span class="comment">// convert to available_externally, since it would lose the</span></div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    <span class="comment">// interposable property and possibly get inlined. Simply drop</span></div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    <span class="comment">// the definition in that case.</span></div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GlobalValue.html#a578061260691a59a9e7b0455fd68359c">GlobalValue::isAvailableExternallyLinkage</a>(NewLinkage) &amp;&amp;</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;        <a class="code" href="classllvm_1_1GlobalValue.html#aabf6932ed41fc64e17c0030c44eda44e">GlobalValue::isInterposableLinkage</a>(GV.<a class="code" href="classllvm_1_1GlobalValue.html#a3547d58a060ee2e4a29cbea85bef91af">getLinkage</a>())) {</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#a3e9604d679f4806943544dceaeb68149">convertToDeclaration</a>(GV))</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;        <span class="comment">// FIXME: Change this to collect replaced GVs and later erase</span></div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;        <span class="comment">// them from the parent module once thinLTOResolvePrevailingGUID is</span></div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;        <span class="comment">// changed to enable this for aliases.</span></div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;        <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Expected GV to be converted&quot;</span>);</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;      <span class="comment">// If all copies of the original symbol had global unnamed addr and</span></div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;      <span class="comment">// linkonce_odr linkage, or if all of them had local unnamed addr linkage</span></div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;      <span class="comment">// and are constants, then it should be an auto hide symbol. In that case</span></div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;      <span class="comment">// the thin link would have marked it as CanAutoHide. Add hidden</span></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;      <span class="comment">// visibility to the symbol to preserve the property.</span></div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;      <span class="keywordflow">if</span> (NewLinkage == <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca696bb1c9b0b0e76bb70c61f68866452a">GlobalValue::WeakODRLinkage</a> &amp;&amp;</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;          <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730">GS</a>-&gt;second-&gt;canAutoHide()) {</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(GV.<a class="code" href="classllvm_1_1GlobalValue.html#ae3a42354a5b89aa8ade55dab229036f6">canBeOmittedFromSymbolTable</a>());</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;        GV.<a class="code" href="classllvm_1_1GlobalValue.html#aa242d8ab89216c14beab812e07009b2a">setVisibility</a>(<a class="code" href="classllvm_1_1GlobalValue.html#a9141f967188383108a69cc1b8ed3c195a7eade123587a08e674f2ca72e2443771">GlobalValue::HiddenVisibility</a>);</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;      }</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160; </div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;ODR fixing up linkage for `&quot;</span> &lt;&lt; GV.<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>()</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;` from &quot;</span> &lt;&lt; GV.<a class="code" href="classllvm_1_1GlobalValue.html#a3547d58a060ee2e4a29cbea85bef91af">getLinkage</a>() &lt;&lt; <span class="stringliteral">&quot; to &quot;</span> &lt;&lt; NewLinkage</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;      GV.<a class="code" href="classllvm_1_1GlobalValue.html#a687973de03d041e04b50a76d19d4fd36">setLinkage</a>(NewLinkage);</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    }</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    <span class="comment">// Remove declarations from comdats, including available_externally</span></div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    <span class="comment">// as this is a declaration for the linker, and will be dropped eventually.</span></div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    <span class="comment">// It is illegal for comdats to contain declarations.</span></div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    <span class="keyword">auto</span> *GO = dyn_cast_or_null&lt;GlobalObject&gt;(&amp;GV);</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    <span class="keywordflow">if</span> (GO &amp;&amp; GO-&gt;isDeclarationForLinker() &amp;&amp; GO-&gt;hasComdat()) {</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;      <span class="keywordflow">if</span> (GO-&gt;getComdat()-&gt;getName() == GO-&gt;getName())</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;        NonPrevailingComdats.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#a79eed48913651aeedda2eed25201ea84">insert</a>(GO-&gt;getComdat());</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;      GO-&gt;setComdat(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    }</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;  };</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160; </div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;  <span class="comment">// Process functions and global now</span></div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;GV : TheModule)</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    FinalizeInModule(GV, <a class="code" href="ModuleSummaryIndex_8cpp.html#ad5e32957f486ff1941b83e4f796d95cd">PropagateAttrs</a>);</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;GV : TheModule.globals())</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    FinalizeInModule(GV);</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;GV : TheModule.aliases())</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    FinalizeInModule(GV);</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160; </div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;  <span class="comment">// For a non-prevailing comdat, all its members must be available_externally.</span></div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;  <span class="comment">// FinalizeInModule has handled non-local-linkage GlobalValues. Here we handle</span></div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;  <span class="comment">// local linkage GlobalValues.</span></div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;  <span class="keywordflow">if</span> (NonPrevailingComdats.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#a9a3c9d867ff6bde97841c2b7983f5c70">empty</a>())</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;GO : TheModule.global_objects()) {</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = GO.getComdat(); <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &amp;&amp; NonPrevailingComdats.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#afe504aa31a6a354cec13f5b32d0b1d9d">count</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)) {</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;      GO.setComdat(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;      GO.setLinkage(<a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57caa67f293befacbbf974525116ccf2ff42">GlobalValue::AvailableExternallyLinkage</a>);</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    }</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;  }</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  <span class="keywordtype">bool</span> Changed;</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    <span class="comment">// If an alias references a GlobalValue in a non-prevailing comdat, change</span></div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    <span class="comment">// it to available_externally. For simplicity we only handle GlobalValue and</span></div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    <span class="comment">// ConstantExpr with a base object. ConstantExpr without a base object is</span></div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    <span class="comment">// unlikely used in a COMDAT.</span></div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;GA : TheModule.aliases()) {</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;      <span class="keywordflow">if</span> (GA.hasAvailableExternallyLinkage())</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;      <a class="code" href="classllvm_1_1GlobalObject.html">GlobalObject</a> *Obj = GA.<a class="code" href="classllvm_1_1GlobalValue.html#a788ede5201dc9b44e419e9fd2fbb38bf">getAliaseeObject</a>();</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Obj &amp;&amp; <span class="stringliteral">&quot;aliasee without an base object is unimplemented&quot;</span>);</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;      <span class="keywordflow">if</span> (Obj-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#ae76e0b39c563b63554b4c99a8ad726e4">hasAvailableExternallyLinkage</a>()) {</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;        GA.setLinkage(<a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57caa67f293befacbbf974525116ccf2ff42">GlobalValue::AvailableExternallyLinkage</a>);</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;        Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;      }</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    }</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;  } <span class="keywordflow">while</span> (Changed);</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;}</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;<span class="comment">/// Run internalization on \p TheModule based on symmary analysis.</span></div>
<div class="line"><a name="l01179"></a><span class="lineno"><a class="line" href="namespacellvm.html#aac69630533101ec5ba74953a63082148"> 1179</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#aac69630533101ec5ba74953a63082148">llvm::thinLTOInternalizeModule</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;TheModule,</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;                                    <span class="keyword">const</span> <a class="code" href="classllvm_1_1DenseMap.html">GVSummaryMapTy</a> &amp;DefinedGlobals) {</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;  <span class="comment">// Declare a callback for the internalize pass that will ask for every</span></div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;  <span class="comment">// candidate GlobalValue if it can be internalized or not.</span></div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;  <span class="keyword">auto</span> MustPreserveGV = [&amp;](<span class="keyword">const</span> <a class="code" href="classllvm_1_1GlobalValue.html">GlobalValue</a> &amp;GV) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    <span class="comment">// It may be the case that GV is on a chain of an ifunc, its alias and</span></div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    <span class="comment">// subsequent aliases. In this case, the summary for the value is not</span></div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    <span class="comment">// available.</span></div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    <span class="keywordflow">if</span> (isa&lt;GlobalIFunc&gt;(&amp;GV) ||</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;        (isa&lt;GlobalAlias&gt;(&amp;GV) &amp;&amp;</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;         isa&lt;GlobalIFunc&gt;(cast&lt;GlobalAlias&gt;(&amp;GV)-&gt;getAliaseeObject())))</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160; </div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    <span class="comment">// Lookup the linkage recorded in the summaries during global analysis.</span></div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    <span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730">GS</a> = DefinedGlobals.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(GV.getGUID());</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730">GS</a> == DefinedGlobals.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>()) {</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;      <span class="comment">// Must have been promoted (possibly conservatively). Find original</span></div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;      <span class="comment">// name so that we can access the correct summary and see if it can</span></div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;      <span class="comment">// be internalized again.</span></div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;      <span class="comment">// FIXME: Eventually we should control promotion instead of promoting</span></div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;      <span class="comment">// and internalizing again.</span></div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;      <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> OrigName =</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;          <a class="code" href="classllvm_1_1ModuleSummaryIndex.html#a352678c0e0c1d28bf963d1d96090733c">ModuleSummaryIndex::getOriginalNameBeforePromote</a>(GV.getName());</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;      std::string OrigId = <a class="code" href="classllvm_1_1GlobalValue.html#aed99d84162082a52cd08efb7dfe017e4">GlobalValue::getGlobalIdentifier</a>(</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;          OrigName, <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">GlobalValue::InternalLinkage</a>,</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;          TheModule.<a class="code" href="classllvm_1_1Module.html#a506a727316531d896d2f5e2095eff2b6">getSourceFileName</a>());</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;      <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730">GS</a> = DefinedGlobals.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(<a class="code" href="classllvm_1_1GlobalValue.html#a71ee7e63264e4997a3340a781d44832e">GlobalValue::getGUID</a>(OrigId));</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730">GS</a> == DefinedGlobals.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>()) {</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;        <span class="comment">// Also check the original non-promoted non-globalized name. In some</span></div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;        <span class="comment">// cases a preempted weak value is linked in as a local copy because</span></div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;        <span class="comment">// it is referenced by an alias (IRLinker::linkGlobalValueProto).</span></div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;        <span class="comment">// In that case, since it was originally not a local value, it was</span></div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;        <span class="comment">// recorded in the index using the original name.</span></div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;        <span class="comment">// FIXME: This may not be needed once PR27866 is fixed.</span></div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;        <a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730">GS</a> = DefinedGlobals.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(<a class="code" href="classllvm_1_1GlobalValue.html#a71ee7e63264e4997a3340a781d44832e">GlobalValue::getGUID</a>(OrigName));</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730">GS</a> != DefinedGlobals.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>());</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;      }</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;    }</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="classllvm_1_1GlobalValue.html#a308b65a044b4f53e31a2026a81c991d2">GlobalValue::isLocalLinkage</a>(<a class="code" href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730">GS</a>-&gt;second-&gt;linkage());</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;  };</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160; </div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;  <span class="comment">// FIXME: See if we can just internalize directly here via linkage changes</span></div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;  <span class="comment">// based on the index, rather than invoking internalizeModule.</span></div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;  <a class="code" href="namespacellvm.html#aaff01b50a31ed4a32a8da645a9a18e40">internalizeModule</a>(TheModule, MustPreserveGV);</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;}</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;<span class="comment">/// Make alias a clone of its aliasee.</span></div>
<div class="line"><a name="l01226"></a><span class="lineno"><a class="line" href="FunctionImport_8cpp.html#ad08d91df5d0fa58431d60a9e412c430b"> 1226</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="FunctionImport_8cpp.html#ad08d91df5d0fa58431d60a9e412c430b">replaceAliasWithAliasee</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> *SrcModule, <a class="code" href="classllvm_1_1GlobalAlias.html">GlobalAlias</a> *GA) {</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *Fn = cast&lt;Function&gt;(GA-&gt;<a class="code" href="classllvm_1_1GlobalAlias.html#a311a097af4f0f77da22ac7acddc496f5">getAliaseeObject</a>());</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160; </div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;  <a class="code" href="classllvm_1_1ValueMap.html">ValueToValueMapTy</a> VMap;</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *NewFn = <a class="code" href="namespacellvm.html#aedeb89fa4ceb608d9d49bcd53ddcd2c1">CloneFunction</a>(Fn, VMap);</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;  <span class="comment">// Clone should use the original alias&#39;s linkage, visibility and name, and we</span></div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;  <span class="comment">// ensure all uses of alias instead use the new clone (casted if necessary).</span></div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;  NewFn-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a687973de03d041e04b50a76d19d4fd36">setLinkage</a>(GA-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a3547d58a060ee2e4a29cbea85bef91af">getLinkage</a>());</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;  NewFn-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#aa242d8ab89216c14beab812e07009b2a">setVisibility</a>(GA-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a28b9561d9ef3d237ef894023187fa26c">getVisibility</a>());</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;  GA-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(<a class="code" href="classllvm_1_1ConstantExpr.html#ae79d05dd3d0b05e080e08f8c5c33f880">ConstantExpr::getBitCast</a>(NewFn, GA-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a92041fc7f781ba4fe708eec99139b72f">getType</a>()));</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;  NewFn-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(GA);</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;  <span class="keywordflow">return</span> NewFn;</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;}</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160; </div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;<span class="comment">// Internalize values that we marked with specific attribute</span></div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;<span class="comment">// in processGlobalForThinLTO.</span></div>
<div class="line"><a name="l01242"></a><span class="lineno"><a class="line" href="FunctionImport_8cpp.html#a82b2bae54059511efe7441d4213e4add"> 1242</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="FunctionImport_8cpp.html#a82b2bae54059511efe7441d4213e4add">internalizeGVsAfterImport</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M) {</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;GV : <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.globals())</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    <span class="comment">// Skip GVs which have been converted to declarations</span></div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    <span class="comment">// by dropDeadSymbols.</span></div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    <span class="keywordflow">if</span> (!GV.isDeclaration() &amp;&amp; GV.hasAttribute(<span class="stringliteral">&quot;thinlto-internalize&quot;</span>)) {</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;      GV.setLinkage(<a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">GlobalValue::InternalLinkage</a>);</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;      GV.setVisibility(<a class="code" href="classllvm_1_1GlobalValue.html#a9141f967188383108a69cc1b8ed3c195a2491e41d821f1d8fd3958ce3df2fddb2">GlobalValue::DefaultVisibility</a>);</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;    }</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;}</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160; </div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;<span class="comment">// Automatically import functions in Module \p DestModule based on the summaries</span></div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;<span class="comment">// index.</span></div>
<div class="line"><a name="l01254"></a><span class="lineno"><a class="line" href="classllvm_1_1FunctionImporter.html#a293aab6abe312ff6dbe227a3bcde838c"> 1254</a></span>&#160;<a class="code" href="classllvm_1_1Expected.html">Expected&lt;bool&gt;</a> <a class="code" href="classllvm_1_1FunctionImporter.html#a293aab6abe312ff6dbe227a3bcde838c">FunctionImporter::importFunctions</a>(</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    <a class="code" href="classllvm_1_1Module.html">Module</a> &amp;DestModule, <span class="keyword">const</span> <a class="code" href="classllvm_1_1StringMap.html">FunctionImporter::ImportMapTy</a> &amp;ImportList) {</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Starting import for Module &quot;</span></div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;                    &lt;&lt; DestModule.<a class="code" href="classllvm_1_1Module.html#a168fb8190f7a201fd0c85b276cac268f">getModuleIdentifier</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;  <span class="keywordtype">unsigned</span> ImportedCount = 0, ImportedGVCount = 0;</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160; </div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;  <a class="code" href="classllvm_1_1IRMover.html">IRMover</a> Mover(DestModule);</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;  <span class="comment">// Do the actual import of functions now, one Module at a time</span></div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  std::set&lt;StringRef&gt; ModuleNameOrderedList;</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;FunctionsToImportPerModule : ImportList) {</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    ModuleNameOrderedList.insert(FunctionsToImportPerModule.first());</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;  }</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;Name : ModuleNameOrderedList) {</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    <span class="comment">// Get the module for the import</span></div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;FunctionsToImportPerModule = ImportList.find(Name);</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(FunctionsToImportPerModule != ImportList.end());</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    <a class="code" href="classllvm_1_1Expected.html">Expected&lt;std::unique_ptr&lt;Module&gt;</a>&gt; SrcModuleOrErr = ModuleLoader(Name);</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    <span class="keywordflow">if</span> (!SrcModuleOrErr)</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;      <span class="keywordflow">return</span> SrcModuleOrErr.<a class="code" href="classllvm_1_1Expected.html#a94789df4ebd03dc008e8adebaa66ac1f">takeError</a>();</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    std::unique_ptr&lt;Module&gt; SrcModule = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(*SrcModuleOrErr);</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(&amp;DestModule.<a class="code" href="classllvm_1_1Module.html#a9c00c70121af456007404bd456047766">getContext</a>() == &amp;SrcModule-&gt;getContext() &amp;&amp;</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;           <span class="stringliteral">&quot;Context mismatch&quot;</span>);</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160; </div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    <span class="comment">// If modules were created with lazy metadata loading, materialize it</span></div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    <span class="comment">// now, before linking it (otherwise this will be a noop).</span></div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Error.html">Error</a> Err = SrcModule-&gt;materializeMetadata())</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(Err);</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160; </div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;    <span class="keyword">auto</span> &amp;ImportGUIDs = FunctionsToImportPerModule-&gt;second;</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    <span class="comment">// Find the globals to import</span></div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    <a class="code" href="classllvm_1_1SetVector.html">SetVector&lt;GlobalValue *&gt;</a> GlobalsToImport;</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> : *SrcModule) {</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.hasName())</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;      <span class="keyword">auto</span> GUID = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getGUID();</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;      <span class="keyword">auto</span> <a class="code" href="namespacellvm.html#a38a0bdae7fb49d99f161aa6de0379d7ea72d6d7a1885885bb55a565fd1070581a">Import</a> = ImportGUIDs.count(GUID);</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; (<a class="code" href="namespacellvm.html#a38a0bdae7fb49d99f161aa6de0379d7ea72d6d7a1885885bb55a565fd1070581a">Import</a> ? <span class="stringliteral">&quot;Is&quot;</span> : <span class="stringliteral">&quot;Not&quot;</span>) &lt;&lt; <span class="stringliteral">&quot; importing function &quot;</span></div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;                        &lt;&lt; GUID &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName() &lt;&lt; <span class="stringliteral">&quot; from &quot;</span></div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;                        &lt;&lt; SrcModule-&gt;getSourceFileName() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a38a0bdae7fb49d99f161aa6de0379d7ea72d6d7a1885885bb55a565fd1070581a">Import</a>) {</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Error.html">Error</a> Err = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.materialize())</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(Err);</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="FunctionImport_8cpp.html#a0736f38219e094f3ee6cb79ecaca6fb2">EnableImportMetadata</a>) {</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;          <span class="comment">// Add &#39;thinlto_src_module&#39; metadata for statistics and debugging.</span></div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;          <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.setMetadata(</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;              <span class="stringliteral">&quot;thinlto_src_module&quot;</span>,</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;              <a class="code" href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">MDNode::get</a>(DestModule.<a class="code" href="classllvm_1_1Module.html#a9c00c70121af456007404bd456047766">getContext</a>(),</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;                          {MDString::get(DestModule.getContext(),</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;                                         SrcModule-&gt;getSourceFileName())}));</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;        }</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;        GlobalsToImport.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;      }</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;    }</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> &amp;GV : SrcModule-&gt;globals()) {</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;      <span class="keywordflow">if</span> (!GV.hasName())</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;      <span class="keyword">auto</span> GUID = GV.getGUID();</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;      <span class="keyword">auto</span> <a class="code" href="namespacellvm.html#a38a0bdae7fb49d99f161aa6de0379d7ea72d6d7a1885885bb55a565fd1070581a">Import</a> = ImportGUIDs.count(GUID);</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; (<a class="code" href="namespacellvm.html#a38a0bdae7fb49d99f161aa6de0379d7ea72d6d7a1885885bb55a565fd1070581a">Import</a> ? <span class="stringliteral">&quot;Is&quot;</span> : <span class="stringliteral">&quot;Not&quot;</span>) &lt;&lt; <span class="stringliteral">&quot; importing global &quot;</span></div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;                        &lt;&lt; GUID &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; GV.getName() &lt;&lt; <span class="stringliteral">&quot; from &quot;</span></div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;                        &lt;&lt; SrcModule-&gt;getSourceFileName() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a38a0bdae7fb49d99f161aa6de0379d7ea72d6d7a1885885bb55a565fd1070581a">Import</a>) {</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Error.html">Error</a> Err = GV.materialize())</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(Err);</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;        ImportedGVCount += GlobalsToImport.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(&amp;GV);</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;      }</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    }</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1GlobalAlias.html">GlobalAlias</a> &amp;GA : SrcModule-&gt;aliases()) {</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;      <span class="keywordflow">if</span> (!GA.hasName() || isa&lt;GlobalIFunc&gt;(GA.getAliaseeObject()))</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;      <span class="keyword">auto</span> GUID = GA.getGUID();</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;      <span class="keyword">auto</span> <a class="code" href="namespacellvm.html#a38a0bdae7fb49d99f161aa6de0379d7ea72d6d7a1885885bb55a565fd1070581a">Import</a> = ImportGUIDs.count(GUID);</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; (<a class="code" href="namespacellvm.html#a38a0bdae7fb49d99f161aa6de0379d7ea72d6d7a1885885bb55a565fd1070581a">Import</a> ? <span class="stringliteral">&quot;Is&quot;</span> : <span class="stringliteral">&quot;Not&quot;</span>) &lt;&lt; <span class="stringliteral">&quot; importing alias &quot;</span></div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;                        &lt;&lt; GUID &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; GA.getName() &lt;&lt; <span class="stringliteral">&quot; from &quot;</span></div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;                        &lt;&lt; SrcModule-&gt;getSourceFileName() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a38a0bdae7fb49d99f161aa6de0379d7ea72d6d7a1885885bb55a565fd1070581a">Import</a>) {</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Error.html">Error</a> Err = GA.materialize())</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(Err);</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;        <span class="comment">// Import alias as a copy of its aliasee.</span></div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;        <a class="code" href="classllvm_1_1GlobalObject.html">GlobalObject</a> *GO = GA.<a class="code" href="classllvm_1_1GlobalValue.html#a788ede5201dc9b44e419e9fd2fbb38bf">getAliaseeObject</a>();</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Error.html">Error</a> Err = GO-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#ac1b5643f40dd3c7b92a548027eb13de0">materialize</a>())</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(Err);</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;        <span class="keyword">auto</span> *Fn = <a class="code" href="FunctionImport_8cpp.html#ad08d91df5d0fa58431d60a9e412c430b">replaceAliasWithAliasee</a>(SrcModule.get(), &amp;GA);</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Is importing aliasee fn &quot;</span> &lt;&lt; GO-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a97918d8b2f03a703571385ca2d0fe5cd">getGUID</a>() &lt;&lt; <span class="stringliteral">&quot; &quot;</span></div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;                          &lt;&lt; GO-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() &lt;&lt; <span class="stringliteral">&quot; from &quot;</span></div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;                          &lt;&lt; SrcModule-&gt;getSourceFileName() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="FunctionImport_8cpp.html#a0736f38219e094f3ee6cb79ecaca6fb2">EnableImportMetadata</a>) {</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;          <span class="comment">// Add &#39;thinlto_src_module&#39; metadata for statistics and debugging.</span></div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;          Fn-&gt;setMetadata(</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;              <span class="stringliteral">&quot;thinlto_src_module&quot;</span>,</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;              <a class="code" href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">MDNode::get</a>(DestModule.<a class="code" href="classllvm_1_1Module.html#a9c00c70121af456007404bd456047766">getContext</a>(),</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;                          {MDString::get(DestModule.getContext(),</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;                                         SrcModule-&gt;getSourceFileName())}));</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;        }</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;        GlobalsToImport.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(Fn);</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;      }</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;    }</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160; </div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;    <span class="comment">// Upgrade debug info after we&#39;re done materializing all the globals and we</span></div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;    <span class="comment">// have loaded all the required metadata!</span></div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    <a class="code" href="namespacellvm.html#ad3c29183c5faa7f5a352807af8aca268">UpgradeDebugInfo</a>(*SrcModule);</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160; </div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    <span class="comment">// Set the partial sample profile ratio in the profile summary module flag</span></div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    <span class="comment">// of the imported source module, if applicable, so that the profile summary</span></div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;    <span class="comment">// module flag will match with that of the destination module when it&#39;s</span></div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;    <span class="comment">// imported.</span></div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    SrcModule-&gt;setPartialSampleProfileRatio(<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>);</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160; </div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;    <span class="comment">// Link in the specified functions.</span></div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a5bc0113ff10282702b2cd6d275f47beb">renameModuleForThinLTO</a>(*SrcModule, <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>, ClearDSOLocalOnDeclarations,</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;                               &amp;GlobalsToImport))</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160; </div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="FunctionImport_8cpp.html#a5e4a0be88e228b9e13548dd074c41ba4">PrintImports</a>) {</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *GV : GlobalsToImport)</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; DestModule.<a class="code" href="classllvm_1_1Module.html#a506a727316531d896d2f5e2095eff2b6">getSourceFileName</a>() &lt;&lt; <span class="stringliteral">&quot;: Import &quot;</span> &lt;&lt; GV-&gt;getName()</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;               &lt;&lt; <span class="stringliteral">&quot; from &quot;</span> &lt;&lt; SrcModule-&gt;getSourceFileName() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    }</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160; </div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Error.html">Error</a> Err = Mover.<a class="code" href="classllvm_1_1IRMover.html#a2dc5bdd64e84f396f958cd168e6e89e2">move</a>(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(SrcModule),</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;                               GlobalsToImport.<a class="code" href="classllvm_1_1SetVector.html#a55ffacfbd9b6de5eb90a9f443001e3a6">getArrayRef</a>(), <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;                               <span class="comment">/*IsPerformingImport=*/</span><span class="keyword">true</span>))</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;      <a class="code" href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">report_fatal_error</a>(<a class="code" href="classllvm_1_1Twine.html">Twine</a>(<span class="stringliteral">&quot;Function Import: link error: &quot;</span>) +</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;                         <a class="code" href="namespacellvm.html#a63540526d092e2f4bbc70590b6034f4e">toString</a>(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(Err)));</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160; </div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    ImportedCount += GlobalsToImport.<a class="code" href="classllvm_1_1SetVector.html#a18b9d328d2490f447589ba60345eba6e">size</a>();</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    NumImportedModules++;</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;  }</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160; </div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;  <a class="code" href="FunctionImport_8cpp.html#a82b2bae54059511efe7441d4213e4add">internalizeGVsAfterImport</a>(DestModule);</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160; </div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;  NumImportedFunctions += (ImportedCount - ImportedGVCount);</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;  NumImportedGlobalVars += ImportedGVCount;</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160; </div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Imported &quot;</span> &lt;&lt; ImportedCount - ImportedGVCount</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot; functions for Module &quot;</span></div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;                    &lt;&lt; DestModule.<a class="code" href="classllvm_1_1Module.html#a168fb8190f7a201fd0c85b276cac268f">getModuleIdentifier</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Imported &quot;</span> &lt;&lt; ImportedGVCount</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot; global variables for Module &quot;</span></div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;                    &lt;&lt; DestModule.<a class="code" href="classllvm_1_1Module.html#a168fb8190f7a201fd0c85b276cac268f">getModuleIdentifier</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;  <span class="keywordflow">return</span> ImportedCount;</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;}</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160; </div>
<div class="line"><a name="l01397"></a><span class="lineno"><a class="line" href="FunctionImport_8cpp.html#aa94c90f8129dab9ddd3bdee5c218ae49"> 1397</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="FunctionImport_8cpp.html#aa94c90f8129dab9ddd3bdee5c218ae49">doImportingForModule</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M) {</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="FunctionImport_8cpp.html#a437ef847693c65bb072a34d2bb87ba32">SummaryFile</a>.empty())</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    <a class="code" href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">report_fatal_error</a>(<span class="stringliteral">&quot;error: -function-import requires -summary-file\n&quot;</span>);</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;  <a class="code" href="classllvm_1_1Expected.html">Expected&lt;std::unique_ptr&lt;ModuleSummaryIndex&gt;</a>&gt; IndexPtrOrErr =</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;      <a class="code" href="namespacellvm.html#af7fed2696a3bda04b9f93d8b986758b3">getModuleSummaryIndexForFile</a>(<a class="code" href="FunctionImport_8cpp.html#a437ef847693c65bb072a34d2bb87ba32">SummaryFile</a>);</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;  <span class="keywordflow">if</span> (!IndexPtrOrErr) {</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    <a class="code" href="namespacellvm.html#a065ed35b75b9eeb5cca1aa73bcae7183">logAllUnhandledErrors</a>(IndexPtrOrErr.<a class="code" href="classllvm_1_1Expected.html#a94789df4ebd03dc008e8adebaa66ac1f">takeError</a>(), <a class="code" href="namespacellvm.html#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>(),</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;                          <span class="stringliteral">&quot;Error loading file &#39;&quot;</span> + <a class="code" href="FunctionImport_8cpp.html#a437ef847693c65bb072a34d2bb87ba32">SummaryFile</a> + <span class="stringliteral">&quot;&#39;: &quot;</span>);</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;  }</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;  std::unique_ptr&lt;ModuleSummaryIndex&gt; <a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a> = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(*IndexPtrOrErr);</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160; </div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;  <span class="comment">// First step is collecting the import list.</span></div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;  <a class="code" href="classllvm_1_1StringMap.html">FunctionImporter::ImportMapTy</a> ImportList;</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;  <span class="comment">// If requested, simply import all functions in the index. This is used</span></div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;  <span class="comment">// when testing distributed backend handling via the opt tool, when</span></div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;  <span class="comment">// we have distributed indexes containing exactly the summaries to import.</span></div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="FunctionImport_8cpp.html#a633b579e4d4d2825ca5b39bb8a5f95c8">ImportAllIndex</a>)</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    <a class="code" href="namespacellvm.html#a7475afb80c692a3cfc942b212701a96e">ComputeCrossModuleImportForModuleFromIndex</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getModuleIdentifier(), *<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>,</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;                                               ImportList);</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;    <a class="code" href="namespacellvm.html#ae3df80802cff4cb5736b3f9f87d70767">ComputeCrossModuleImportForModule</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getModuleIdentifier(), *<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>,</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;                                      ImportList);</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160; </div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;  <span class="comment">// Conservatively mark all internal values as promoted. This interface is</span></div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;  <span class="comment">// only used when doing importing via the function importing pass. The pass</span></div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;  <span class="comment">// is only enabled when testing importing via the &#39;opt&#39; tool, which does</span></div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;  <span class="comment">// not do the ThinLink that would normally determine what values to promote.</span></div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>) {</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.second.SummaryList) {</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GlobalValue.html#a308b65a044b4f53e31a2026a81c991d2">GlobalValue::isLocalLinkage</a>(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;linkage()))</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;        <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;setLinkage(<a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e">GlobalValue::ExternalLinkage</a>);</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    }</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;  }</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160; </div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;  <span class="comment">// Next we need to promote to global scope and rename any local values that</span></div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;  <span class="comment">// are potentially exported to other modules.</span></div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a5bc0113ff10282702b2cd6d275f47beb">renameModuleForThinLTO</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, *<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>, <span class="comment">/*ClearDSOLocalOnDeclarations=*/</span><span class="keyword">false</span>,</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;                             <span class="comment">/*GlobalsToImport=*/</span><span class="keyword">nullptr</span>)) {</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    <a class="code" href="namespacellvm.html#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; <span class="stringliteral">&quot;Error renaming module\n&quot;</span>;</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;  }</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160; </div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;  <span class="comment">// Perform the import now.</span></div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;  <span class="keyword">auto</span> ModuleLoader = [&amp;<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>](<a class="code" href="classllvm_1_1StringRef.html">StringRef</a> Identifier) {</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="FunctionImport_8cpp.html#ab4380060a95f70b25a8bb6abef24577f">loadFile</a>(std::string(Identifier), <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext());</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;  };</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;  <a class="code" href="classllvm_1_1FunctionImporter.html">FunctionImporter</a> Importer(*<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>, ModuleLoader,</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;                            <span class="comment">/*ClearDSOLocalOnDeclarations=*/</span><span class="keyword">false</span>);</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;  <a class="code" href="classllvm_1_1Expected.html">Expected&lt;bool&gt;</a> Result = Importer.<a class="code" href="classllvm_1_1FunctionImporter.html#a293aab6abe312ff6dbe227a3bcde838c">importFunctions</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, ImportList);</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160; </div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;  <span class="comment">// FIXME: Probably need to propagate Errors through the pass manager.</span></div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;  <span class="keywordflow">if</span> (!Result) {</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;    <a class="code" href="namespacellvm.html#a065ed35b75b9eeb5cca1aa73bcae7183">logAllUnhandledErrors</a>(Result.takeError(), <a class="code" href="namespacellvm.html#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>(),</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;                          <span class="stringliteral">&quot;Error importing module: &quot;</span>);</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;  }</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160; </div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;  <span class="keywordflow">return</span> *Result;</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;}</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160; </div>
<div class="line"><a name="l01458"></a><span class="lineno"><a class="line" href="classllvm_1_1FunctionImportPass.html#a4eb08e2a18ca18c8e8ee7d1a8d3de7f2"> 1458</a></span>&#160;<a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> <a class="code" href="classllvm_1_1FunctionImportPass.html#a4eb08e2a18ca18c8e8ee7d1a8d3de7f2">FunctionImportPass::run</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M,</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;                                          <a class="code" href="classllvm_1_1AnalysisManager.html">ModuleAnalysisManager</a> &amp;AM) {</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="FunctionImport_8cpp.html#aa94c90f8129dab9ddd3bdee5c218ae49">doImportingForModule</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>))</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160; </div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html#a03797a73044a81cbc6a3409d6c72ee8f">PreservedAnalyses::none</a>();</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aFunctionImport_8cpp_html_a4f50af5489916353668d76d08cb00ea8"><div class="ttname"><a href="FunctionImport_8cpp.html#a4f50af5489916353668d76d08cb00ea8">ComputeDead</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ComputeDead(&quot;compute-dead&quot;, cl::init(true), cl::Hidden, cl::desc(&quot;Compute dead symbols&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a3af0428ec6e48cb2f05c199b7b9f7e07"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a3af0428ec6e48cb2f05c199b7b9f7e07">llvm::GlobalValue::GUID</a></div><div class="ttdeci">uint64_t GUID</div><div class="ttdoc">Declare a type to represent a global unique identifier for a global value.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00583">GlobalValue.h:583</a></div></div>
<div class="ttc" id="aFunctionImport_8cpp_html_ae6f46d7423fbac4058566f39d9b57944"><div class="ttname"><a href="FunctionImport_8cpp.html#ae6f46d7423fbac4058566f39d9b57944">ImportInstrLimit</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; ImportInstrLimit(&quot;import-instr-limit&quot;, cl::init(100), cl::Hidden, cl::value_desc(&quot;N&quot;), cl::desc(&quot;Only import functions with less than N instructions&quot;))</div><div class="ttdoc">Limit on instruction count of imported functions.</div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html">llvm::PreservedAnalyses</a></div><div class="ttdoc">A set of analyses that are preserved following a run of a transformation pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00152">PassManager.h:152</a></div></div>
<div class="ttc" id="aFunctionImportUtils_8h_html"><div class="ttname"><a href="FunctionImportUtils_8h.html">FunctionImportUtils.h</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aFunctionImport_8cpp_html_ab62a4b224f4cbfde8a42a2ccc7e1348e"><div class="ttname"><a href="FunctionImport_8cpp.html#ab62a4b224f4cbfde8a42a2ccc7e1348e">ImportHotInstrFactor</a></div><div class="ttdeci">static cl::opt&lt; float &gt; ImportHotInstrFactor(&quot;import-hot-evolution-factor&quot;, cl::init(1.0), cl::Hidden, cl::value_desc(&quot;x&quot;), cl::desc(&quot;As we import functions called from hot callsite, multiply the &quot; &quot;`import-instr-limit` threshold by this factor &quot; &quot;before processing newly imported functions&quot;))</div></div>
<div class="ttc" id="alib_2Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2X86_2README_8txt_source.html#l00252">README.txt:252</a></div></div>
<div class="ttc" id="anamespacellvm_html_aac69630533101ec5ba74953a63082148"><div class="ttname"><a href="namespacellvm.html#aac69630533101ec5ba74953a63082148">llvm::thinLTOInternalizeModule</a></div><div class="ttdeci">void thinLTOInternalizeModule(Module &amp;TheModule, const GVSummaryMapTy &amp;DefinedGlobals)</div><div class="ttdoc">Internalize TheModule based on the information recorded in the summaries during global summary-based ...</div><div class="ttdef"><b>Definition:</b> <a href="FunctionImport_8cpp_source.html#l01179">FunctionImport.cpp:1179</a></div></div>
<div class="ttc" id="aValueMapper_8h_html"><div class="ttname"><a href="ValueMapper_8h.html">ValueMapper.h</a></div></div>
<div class="ttc" id="aFileSystem_8h_html"><div class="ttname"><a href="FileSystem_8h.html">FileSystem.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sys_1_1fs_html_a662978c0cdf81de0d448032f142a3695a8ae6a0a158ab49e5bbe92cbc2cabcbcd"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#a662978c0cdf81de0d448032f142a3695a8ae6a0a158ab49e5bbe92cbc2cabcbcd">llvm::sys::fs::OF_None</a></div><div class="ttdeci">@ OF_None</div><div class="ttdef"><b>Definition:</b> <a href="FileSystem_8h_source.html#l00757">FileSystem.h:757</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_aed99d84162082a52cd08efb7dfe017e4"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aed99d84162082a52cd08efb7dfe017e4">llvm::GlobalValue::getGlobalIdentifier</a></div><div class="ttdeci">std::string getGlobalIdentifier() const</div><div class="ttdoc">Return the modified name for this global value suitable to be used as the key for a global lookup (e....</div><div class="ttdef"><b>Definition:</b> <a href="Globals_8cpp_source.html#l00170">Globals.cpp:170</a></div></div>
<div class="ttc" id="aMetadata_8h_html"><div class="ttname"><a href="Metadata_8h.html">Metadata.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad3c29183c5faa7f5a352807af8aca268"><div class="ttname"><a href="namespacellvm.html#ad3c29183c5faa7f5a352807af8aca268">llvm::UpgradeDebugInfo</a></div><div class="ttdeci">bool UpgradeDebugInfo(Module &amp;M)</div><div class="ttdoc">Check the debug info version number, if it is out-dated, drop the debug info.</div><div class="ttdef"><b>Definition:</b> <a href="AutoUpgrade_8cpp_source.html#l04460">AutoUpgrade.cpp:4460</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a3547d58a060ee2e4a29cbea85bef91af"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a3547d58a060ee2e4a29cbea85bef91af">llvm::GlobalValue::getLinkage</a></div><div class="ttdeci">LinkageTypes getLinkage() const</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00541">GlobalValue.h:541</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a9141f967188383108a69cc1b8ed3c195a7eade123587a08e674f2ca72e2443771"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a9141f967188383108a69cc1b8ed3c195a7eade123587a08e674f2ca72e2443771">llvm::GlobalValue::HiddenVisibility</a></div><div class="ttdeci">@ HiddenVisibility</div><div class="ttdoc">The GV is hidden.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00064">GlobalValue.h:64</a></div></div>
<div class="ttc" id="aclassT_html"><div class="ttname"><a href="classT.html">T</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionSummary_html_adf3998a7e0703c1eac651524d9d14a0d"><div class="ttname"><a href="classllvm_1_1FunctionSummary.html#adf3998a7e0703c1eac651524d9d14a0d">llvm::FunctionSummary::fflags</a></div><div class="ttdeci">FFlags fflags() const</div><div class="ttdoc">Get function summary flags.</div><div class="ttdef"><b>Definition:</b> <a href="ModuleSummaryIndex_8h_source.html#l00842">ModuleSummaryIndex.h:842</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a2df2f2e94b5493e9434dbf1c483dbc72"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a2df2f2e94b5493e9434dbf1c483dbc72">llvm::GlobalValue::isImplicitDSOLocal</a></div><div class="ttdeci">bool isImplicitDSOLocal() const</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00294">GlobalValue.h:294</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00059">Function.h:59</a></div></div>
<div class="ttc" id="aStringRef_8h_html"><div class="ttname"><a href="StringRef_8h.html">StringRef.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5bc0113ff10282702b2cd6d275f47beb"><div class="ttname"><a href="namespacellvm.html#a5bc0113ff10282702b2cd6d275f47beb">llvm::renameModuleForThinLTO</a></div><div class="ttdeci">bool renameModuleForThinLTO(Module &amp;M, const ModuleSummaryIndex &amp;Index, bool ClearDSOLocalOnDeclarations, SetVector&lt; GlobalValue * &gt; *GlobalsToImport=nullptr)</div><div class="ttdoc">Perform in-place global value handling on the given Module for exported local functions renamed and p...</div><div class="ttdef"><b>Definition:</b> <a href="FunctionImportUtils_8cpp_source.html#l00355">FunctionImportUtils.cpp:355</a></div></div>
<div class="ttc" id="aPass_8h_html"><div class="ttname"><a href="Pass_8h.html">Pass.h</a></div></div>
<div class="ttc" id="astructllvm_1_1FunctionSummary_1_1FFlags_html_aa0f84f67663c19678567a2448731a9a4"><div class="ttname"><a href="structllvm_1_1FunctionSummary_1_1FFlags.html#aa0f84f67663c19678567a2448731a9a4">llvm::FunctionSummary::FFlags::AlwaysInline</a></div><div class="ttdeci">unsigned AlwaysInline</div><div class="ttdef"><b>Definition:</b> <a href="ModuleSummaryIndex_8h_source.html#l00648">ModuleSummaryIndex.h:648</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_a18b9d328d2490f447589ba60345eba6e"><div class="ttname"><a href="classllvm_1_1SetVector.html#a18b9d328d2490f447589ba60345eba6e">llvm::SetVector::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdoc">Determine the number of elements in the SetVector.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00077">SetVector.h:77</a></div></div>
<div class="ttc" id="aFunctionImport_8cpp_html_a99b9fbe728ecb449155f59118b29ec5c"><div class="ttname"><a href="FunctionImport_8cpp.html#a99b9fbe728ecb449155f59118b29ec5c">isGlobalVarSummary</a></div><div class="ttdeci">static bool isGlobalVarSummary(const ModuleSummaryIndex &amp;Index, ValueInfo VI)</div><div class="ttdef"><b>Definition:</b> <a href="FunctionImport_8cpp_source.html#l00594">FunctionImport.cpp:594</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01199">SmallVector.h:1199</a></div></div>
<div class="ttc" id="aStatistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="aFunctionImport_8h_html"><div class="ttname"><a href="FunctionImport_8h.html">FunctionImport.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a308b65a044b4f53e31a2026a81c991d2"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a308b65a044b4f53e31a2026a81c991d2">llvm::GlobalValue::isLocalLinkage</a></div><div class="ttdeci">static bool isLocalLinkage(LinkageTypes Linkage)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00404">GlobalValue.h:404</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_ac1b5643f40dd3c7b92a548027eb13de0"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#ac1b5643f40dd3c7b92a548027eb13de0">llvm::GlobalValue::materialize</a></div><div class="ttdeci">Error materialize()</div><div class="ttdoc">Make sure this GlobalValue is fully read.</div><div class="ttdef"><b>Definition:</b> <a href="Globals_8cpp_source.html#l00047">Globals.cpp:47</a></div></div>
<div class="ttc" id="aSupport_2ErrorHandling_8h_html"><div class="ttname"><a href="Support_2ErrorHandling_8h.html">ErrorHandling.h</a></div></div>
<div class="ttc" id="astructllvm_1_1CalleeInfo_html_a2413e35985411a461b9ab03c17c01caaa1a3c2e99e572ec71d3820d0363d90742"><div class="ttname"><a href="structllvm_1_1CalleeInfo.html#a2413e35985411a461b9ab03c17c01caaa1a3c2e99e572ec71d3820d0363d90742">llvm::CalleeInfo::HotnessType::Cold</a></div><div class="ttdeci">@ Cold</div></div>
<div class="ttc" id="aclassllvm_1_1GlobalVariable_html"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html">llvm::GlobalVariable</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalVariable_8h_source.html#l00039">GlobalVariable.h:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1PointerType_html_af8aeced5e71d2589fa3e9791043af5cb"><div class="ttname"><a href="classllvm_1_1PointerType.html#af8aeced5e71d2589fa3e9791043af5cb">llvm::PointerType::getAddressSpace</a></div><div class="ttdeci">unsigned getAddressSpace() const</div><div class="ttdoc">Return the address space of the Pointer type.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00682">DerivedTypes.h:682</a></div></div>
<div class="ttc" id="aFunctionImport_8cpp_html_a90f2bd3f2ffe5bc8f3af77910db73295"><div class="ttname"><a href="FunctionImport_8cpp.html#a90f2bd3f2ffe5bc8f3af77910db73295">computeImportForFunction</a></div><div class="ttdeci">static void computeImportForFunction(const FunctionSummary &amp;Summary, const ModuleSummaryIndex &amp;Index, const unsigned Threshold, const GVSummaryMapTy &amp;DefinedGVSummaries, SmallVectorImpl&lt; EdgeInfo &gt; &amp;Worklist, FunctionImporter::ImportMapTy &amp;ImportList, StringMap&lt; FunctionImporter::ExportSetTy &gt; *ExportLists, FunctionImporter::ImportThresholdsTy &amp;ImportThresholds)</div><div class="ttdoc">Compute the list of functions to import for a given caller.</div><div class="ttdef"><b>Definition:</b> <a href="FunctionImport_8cpp_source.html#l00348">FunctionImport.cpp:348</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_ae79d05dd3d0b05e080e08f8c5c33f880"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#ae79d05dd3d0b05e080e08f8c5c33f880">llvm::ConstantExpr::getBitCast</a></div><div class="ttdeci">static Constant * getBitCast(Constant *C, Type *Ty, bool OnlyIfReduced=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02229">Constants.cpp:2229</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalAlias_html"><div class="ttname"><a href="classllvm_1_1GlobalAlias.html">llvm::GlobalAlias</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalAlias_8h_source.html#l00028">GlobalAlias.h:28</a></div></div>
<div class="ttc" id="aSupport_2Error_8h_html"><div class="ttname"><a href="Support_2Error_8h.html">Error.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdeci">@ Hidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00138">CommandLine.h:138</a></div></div>
<div class="ttc" id="aARMSubtarget_8cpp_html_a6a14930b01ccb1cf446cd96395284102"><div class="ttname"><a href="ARMSubtarget_8cpp.html#a6a14930b01ccb1cf446cd96395284102">IT</a></div><div class="ttdeci">static cl::opt&lt; ITMode &gt; IT(cl::desc(&quot;IT block support&quot;), cl::Hidden, cl::init(DefaultIT), cl::values(clEnumValN(DefaultIT, &quot;arm-default-it&quot;, &quot;Generate any type of IT block&quot;), clEnumValN(RestrictedIT, &quot;arm-restrict-it&quot;, &quot;Disallow complex IT blocks&quot;)))</div></div>
<div class="ttc" id="aErrc_8h_html"><div class="ttname"><a href="Errc_8h.html">Errc.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_a03797a73044a81cbc6a3409d6c72ee8f"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#a03797a73044a81cbc6a3409d6c72ee8f">llvm::PreservedAnalyses::none</a></div><div class="ttdeci">static PreservedAnalyses none()</div><div class="ttdoc">Convenience factory function for the empty preserved set.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00155">PassManager.h:155</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_a55ffacfbd9b6de5eb90a9f443001e3a6"><div class="ttname"><a href="classllvm_1_1SetVector.html#a55ffacfbd9b6de5eb90a9f443001e3a6">llvm::SetVector::getArrayRef</a></div><div class="ttdeci">ArrayRef&lt; T &gt; getArrayRef() const</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00063">SetVector.h:63</a></div></div>
<div class="ttc" id="aModule_8h_html"><div class="ttname"><a href="Module_8h.html">Module.h</a></div></div>
<div class="ttc" id="aModuleSummaryIndex_8cpp_html_ad5e32957f486ff1941b83e4f796d95cd"><div class="ttname"><a href="ModuleSummaryIndex_8cpp.html#ad5e32957f486ff1941b83e4f796d95cd">PropagateAttrs</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; PropagateAttrs(&quot;propagate-attrs&quot;, cl::init(true), cl::Hidden, cl::desc(&quot;Propagate attributes in index&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a53408c95a7bfb5443b43fb2134c3eb23"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a53408c95a7bfb5443b43fb2134c3eb23">llvm::DenseMapBase::count</a></div><div class="ttdeci">size_type count(const_arg_type_t&lt; KeyT &gt; Val) const</div><div class="ttdoc">Return 1 if the specified key is in the map, 0 otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00145">DenseMap.h:145</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a9141f967188383108a69cc1b8ed3c195a2491e41d821f1d8fd3958ce3df2fddb2"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a9141f967188383108a69cc1b8ed3c195a2491e41d821f1d8fd3958ce3df2fddb2">llvm::GlobalValue::DefaultVisibility</a></div><div class="ttdeci">@ DefaultVisibility</div><div class="ttdoc">The GV is visible.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00063">GlobalValue.h:63</a></div></div>
<div class="ttc" id="aGlobalObject_8h_html"><div class="ttname"><a href="GlobalObject_8h.html">GlobalObject.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab4d4bc901fedd8857f647dcc2c0d71de"><div class="ttname"><a href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">llvm::max</a></div><div class="ttdeci">Expected&lt; ExpressionValue &gt; max(const ExpressionValue &amp;Lhs, const ExpressionValue &amp;Rhs)</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8cpp_source.html#l00337">FileCheck.cpp:337</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9a7b5c68c90f85baaedaa854cc5002cc"><div class="ttname"><a href="namespacellvm.html#a9a7b5c68c90f85baaedaa854cc5002cc">llvm::errs</a></div><div class="ttdeci">raw_fd_ostream &amp; errs()</div><div class="ttdoc">This returns a reference to a raw_ostream for standard error.</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8cpp_source.html#l00899">raw_ostream.cpp:899</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionImporter_html"><div class="ttname"><a href="classllvm_1_1FunctionImporter.html">llvm::FunctionImporter</a></div><div class="ttdoc">The function importer is automatically importing function from other modules based on the provided su...</div><div class="ttdef"><b>Definition:</b> <a href="FunctionImport_8h_source.html#l00033">FunctionImport.h:33</a></div></div>
<div class="ttc" id="aclassllvm_1_1Expected_html"><div class="ttname"><a href="classllvm_1_1Expected.html">llvm::Expected</a></div><div class="ttdoc">Tagged union holding either a T or a Error.</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00041">APFloat.h:41</a></div></div>
<div class="ttc" id="aSTLExtras_8h_html"><div class="ttname"><a href="STLExtras_8h.html">STLExtras.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ModuleSummaryIndex_html_a352678c0e0c1d28bf963d1d96090733c"><div class="ttname"><a href="classllvm_1_1ModuleSummaryIndex.html#a352678c0e0c1d28bf963d1d96090733c">llvm::ModuleSummaryIndex::getOriginalNameBeforePromote</a></div><div class="ttdeci">static StringRef getOriginalNameBeforePromote(StringRef Name)</div><div class="ttdoc">Helper to obtain the unpromoted name for a global value (or the original name if not promoted).</div><div class="ttdef"><b>Definition:</b> <a href="ModuleSummaryIndex_8h_source.html#l01631">ModuleSummaryIndex.h:1631</a></div></div>
<div class="ttc" id="anamespacellvm_html_a31192bb939153e2442a7a73ac6be0f5a"><div class="ttname"><a href="namespacellvm.html#a31192bb939153e2442a7a73ac6be0f5a">llvm::gatherImportedSummariesForModule</a></div><div class="ttdeci">void gatherImportedSummariesForModule(StringRef ModulePath, const StringMap&lt; GVSummaryMapTy &gt; &amp;ModuleToDefinedGVSummaries, const FunctionImporter::ImportMapTy &amp;ImportList, std::map&lt; std::string, GVSummaryMapTy &gt; &amp;ModuleToSummariesForIndex)</div><div class="ttdoc">Compute the set of summaries needed for a ThinLTO backend compilation of ModulePath.</div><div class="ttdef"><b>Definition:</b> <a href="FunctionImport_8cpp_source.html#l00976">FunctionImport.cpp:976</a></div></div>
<div class="ttc" id="aFunctionImport_8cpp_html_ac67ddb15395852907f8e86a03ec467bf"><div class="ttname"><a href="FunctionImport_8cpp.html#ac67ddb15395852907f8e86a03ec467bf">shouldImportGlobal</a></div><div class="ttdeci">static bool shouldImportGlobal(const ValueInfo &amp;VI, const GVSummaryMapTy &amp;DefinedGVSummaries)</div><div class="ttdef"><b>Definition:</b> <a href="FunctionImport_8cpp_source.html#l00248">FunctionImport.cpp:248</a></div></div>
<div class="ttc" id="aclassllvm_1_1detail_1_1DenseSetImpl_html_a79eed48913651aeedda2eed25201ea84"><div class="ttname"><a href="classllvm_1_1detail_1_1DenseSetImpl.html#a79eed48913651aeedda2eed25201ea84">llvm::detail::DenseSetImpl::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const ValueT &amp;V)</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00206">DenseSet.h:206</a></div></div>
<div class="ttc" id="aclassllvm_1_1detail_1_1DenseSetImpl_html_afe504aa31a6a354cec13f5b32d0b1d9d"><div class="ttname"><a href="classllvm_1_1detail_1_1DenseSetImpl.html#afe504aa31a6a354cec13f5b32d0b1d9d">llvm::detail::DenseSetImpl::count</a></div><div class="ttdeci">size_type count(const_arg_type_t&lt; ValueT &gt; V) const</div><div class="ttdoc">Return 1 if the specified key is in the set, 0 otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00097">DenseSet.h:97</a></div></div>
<div class="ttc" id="aInternalize_8h_html"><div class="ttname"><a href="Internalize_8h.html">Internalize.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a37d72b5677ac289d04703245553722d9"><div class="ttname"><a href="namespacellvm.html#a37d72b5677ac289d04703245553722d9">llvm::EmitImportsFiles</a></div><div class="ttdeci">std::error_code EmitImportsFiles(StringRef ModulePath, StringRef OutputFilename, const std::map&lt; std::string, GVSummaryMapTy &gt; &amp;ModuleToSummariesForIndex)</div><div class="ttdoc">Emit into OutputFilename the files module ModulePath will import from.</div><div class="ttdef"><b>Definition:</b> <a href="FunctionImport_8cpp_source.html#l01000">FunctionImport.cpp:1000</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a78c4d0538c7dbffa955486abae2b61bb"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a78c4d0538c7dbffa955486abae2b61bb">llvm::GlobalValue::setDSOLocal</a></div><div class="ttdeci">void setDSOLocal(bool Local)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00299">GlobalValue.h:299</a></div></div>
<div class="ttc" id="aModuleSummaryIndex_8h_html"><div class="ttname"><a href="ModuleSummaryIndex_8h.html">ModuleSummaryIndex.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9a3d3d86175f9b2db2ffcd643b16ff8f"><div class="ttname"><a href="namespacellvm.html#a9a3d3d86175f9b2db2ffcd643b16ff8f">llvm::updateIndirectCalls</a></div><div class="ttdeci">void updateIndirectCalls(ModuleSummaryIndex &amp;Index)</div><div class="ttdoc">Update call edges for indirect calls to local functions added from SamplePGO when needed.</div><div class="ttdef"><b>Definition:</b> <a href="FunctionImport_8cpp_source.html#l00838">FunctionImport.cpp:838</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00101">Debug.h:101</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html_a7d10a7b9b7f40b04d27ed97c38ea1950"><div class="ttname"><a href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">llvm::MDNode::get</a></div><div class="ttdeci">static MDTuple * get(LLVMContext &amp;Context, ArrayRef&lt; Metadata * &gt; MDs)</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l01399">Metadata.h:1399</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00055">MD5.cpp:55</a></div></div>
<div class="ttc" id="aFunctionImport_8cpp_html_a546070e97e00d689119cc2f5776d06a3"><div class="ttname"><a href="FunctionImport_8cpp.html#a546070e97e00d689119cc2f5776d06a3">ImportCutoff</a></div><div class="ttdeci">static cl::opt&lt; int &gt; ImportCutoff(&quot;import-cutoff&quot;, cl::init(-1), cl::Hidden, cl::value_desc(&quot;N&quot;), cl::desc(&quot;Only import first N functions if N&gt;=0 (default -1)&quot;))</div></div>
<div class="ttc" id="aNVVMIntrRange_8cpp_html_afad351d7bf10ac0446b64e7827634e94"><div class="ttname"><a href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a></div><div class="ttdeci">LLVMContext &amp; Context</div><div class="ttdef"><b>Definition:</b> <a href="NVVMIntrRange_8cpp_source.html#l00066">NVVMIntrRange.cpp:66</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionImporter_html_a293aab6abe312ff6dbe227a3bcde838c"><div class="ttname"><a href="classllvm_1_1FunctionImporter.html#a293aab6abe312ff6dbe227a3bcde838c">llvm::FunctionImporter::importFunctions</a></div><div class="ttdeci">Expected&lt; bool &gt; importFunctions(Module &amp;M, const ImportMapTy &amp;ImportList)</div><div class="ttdoc">Import functions in Module M based on the supplied import list.</div><div class="ttdef"><b>Definition:</b> <a href="FunctionImport_8cpp_source.html#l01254">FunctionImport.cpp:1254</a></div></div>
<div class="ttc" id="aclassllvm_1_1detail_1_1DenseSetImpl_html_a8cd802dcaed35e1f28ea3cbe4af4eff5"><div class="ttname"><a href="classllvm_1_1detail_1_1DenseSetImpl.html#a8cd802dcaed35e1f28ea3cbe4af4eff5">llvm::detail::DenseSetImpl::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00174">DenseSet.h:174</a></div></div>
<div class="ttc" id="aCommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="aFunctionImport_8cpp_html_a6733e23154688b995553f5023e94cdca"><div class="ttname"><a href="FunctionImport_8cpp.html#a6733e23154688b995553f5023e94cdca">ImportHotMultiplier</a></div><div class="ttdeci">static cl::opt&lt; float &gt; ImportHotMultiplier(&quot;import-hot-multiplier&quot;, cl::init(10.0), cl::Hidden, cl::value_desc(&quot;x&quot;), cl::desc(&quot;Multiply the `import-instr-limit` threshold for hot callsites&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValueSummary_html"><div class="ttname"><a href="classllvm_1_1GlobalValueSummary.html">llvm::GlobalValueSummary</a></div><div class="ttdoc">Function and variable summary information to aid decisions and implementation of importing.</div><div class="ttdef"><b>Definition:</b> <a href="ModuleSummaryIndex_8h_source.html#l00364">ModuleSummaryIndex.h:364</a></div></div>
<div class="ttc" id="aGlobalValue_8h_html"><div class="ttname"><a href="GlobalValue_8h.html">GlobalValue.h</a></div></div>
<div class="ttc" id="aFunctionImport_8cpp_html_a594c382c0ad71320df28373c39e3ec70"><div class="ttname"><a href="FunctionImport_8cpp.html#a594c382c0ad71320df28373c39e3ec70">PrintImportFailures</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; PrintImportFailures(&quot;print-import-failures&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Print information for functions rejected for importing&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a32e606ac4c88f71f14212e42b808e7f4"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a32e606ac4c88f71f14212e42b808e7f4">llvm::GlobalValue::isDeclaration</a></div><div class="ttdeci">bool isDeclaration() const</div><div class="ttdoc">Return true if the primary definition of this global value is outside of the current translation unit...</div><div class="ttdef"><b>Definition:</b> <a href="Globals_8cpp_source.html#l00275">Globals.cpp:275</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9db8c44b250b90e3ab7e4d144e7c9c2ea60baadb22e80b147e4885ad16760e569"><div class="ttname"><a href="namespacellvm.html#a9db8c44b250b90e3ab7e4d144e7c9c2ea60baadb22e80b147e4885ad16760e569">llvm::ModRefInfo::Ref</a></div><div class="ttdeci">@ Ref</div><div class="ttdoc">The access may reference the value stored in memory.</div></div>
<div class="ttc" id="aConstants_8h_html"><div class="ttname"><a href="Constants_8h.html">Constants.h</a></div></div>
<div class="ttc" id="aFunctionImport_8cpp_html_ab4380060a95f70b25a8bb6abef24577f"><div class="ttname"><a href="FunctionImport_8cpp.html#ab4380060a95f70b25a8bb6abef24577f">loadFile</a></div><div class="ttdeci">static std::unique_ptr&lt; Module &gt; loadFile(const std::string &amp;FileName, LLVMContext &amp;Context)</div><div class="ttdef"><b>Definition:</b> <a href="FunctionImport_8cpp_source.html#l00145">FunctionImport.cpp:145</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A, *B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00086">README_ALTIVEC.txt:86</a></div></div>
<div class="ttc" id="aAliasAnalysis_8cpp_html_af930af31a919474bec5b29dd0d0bb8ba"><div class="ttname"><a href="AliasAnalysis_8cpp.html#af930af31a919474bec5b29dd0d0bb8ba">false</a></div><div class="ttdeci">Function Alias Analysis false</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8cpp_source.html#l00769">AliasAnalysis.cpp:769</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a52126ae2091b18cecfd5ad0f0012839a"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a52126ae2091b18cecfd5ad0f0012839a">llvm::GlobalValue::getThreadLocalMode</a></div><div class="ttdeci">ThreadLocalMode getThreadLocalMode() const</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00267">GlobalValue.h:267</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_a3217063f680fa8e35dea3c59b6e52b18"><div class="ttname"><a href="lib_2Target_2README_8txt.html#a3217063f680fa8e35dea3c59b6e52b18">int</a></div><div class="ttdeci">Clang compiles this i1 i64 store i64 i64 store i64 i64 store i64 i64 store i64 align Which gets codegen d xmm0 movaps rbp movaps rbp movaps rbp movaps rbp rbp rbp rbp rbp It would be better to have movq s of instead of the movaps s LLVM produces ret int</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00536">README.txt:536</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringMap_html_afea367cbdd62e85c20d3ebe044253ce7"><div class="ttname"><a href="classllvm_1_1StringMap.html#afea367cbdd62e85c20d3ebe044253ce7">llvm::StringMap::insert</a></div><div class="ttdeci">bool insert(MapEntryTy *KeyValue)</div><div class="ttdoc">insert - Insert the specified key/value pair into the map.</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2StringMap_8h_source.html#l00275">StringMap.h:275</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalObject_html"><div class="ttname"><a href="classllvm_1_1GlobalObject.html">llvm::GlobalObject</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalObject_8h_source.html#l00027">GlobalObject.h:27</a></div></div>
<div class="ttc" id="aclassllvm_1_1SMDiagnostic_html"><div class="ttname"><a href="classllvm_1_1SMDiagnostic.html">llvm::SMDiagnostic</a></div><div class="ttdoc">Instances of this class encapsulate one diagnostic report, allowing printing to a raw_ostream as a ca...</div><div class="ttdef"><b>Definition:</b> <a href="Support_2SourceMgr_8h_source.html#l00281">SourceMgr.h:281</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac505d74d262ee1e64d87b07121199e36"><div class="ttname"><a href="namespacellvm.html#ac505d74d262ee1e64d87b07121199e36">llvm::PrevailingType</a></div><div class="ttdeci">PrevailingType</div><div class="ttdoc">PrevailingType enum used as a return type of callback passed to computeDeadSymbolsAndUpdateIndirectCa...</div><div class="ttdef"><b>Definition:</b> <a href="FunctionImport_8h_source.html#l00172">FunctionImport.h:172</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValueSummary_html_a0c8dfea65f1f5dfba143b1fc9768614ca461342c05a59e66da9d6b38eaccda99a"><div class="ttname"><a href="classllvm_1_1GlobalValueSummary.html#a0c8dfea65f1f5dfba143b1fc9768614ca461342c05a59e66da9d6b38eaccda99a">llvm::GlobalValueSummary::GlobalVarKind</a></div><div class="ttdeci">@ GlobalVarKind</div><div class="ttdef"><b>Definition:</b> <a href="ModuleSummaryIndex_8h_source.html#l00367">ModuleSummaryIndex.h:367</a></div></div>
<div class="ttc" id="astructllvm_1_1CalleeInfo_html_a2413e35985411a461b9ab03c17c01caa"><div class="ttname"><a href="structllvm_1_1CalleeInfo.html#a2413e35985411a461b9ab03c17c01caa">llvm::CalleeInfo::HotnessType</a></div><div class="ttdeci">HotnessType</div><div class="ttdef"><b>Definition:</b> <a href="ModuleSummaryIndex_8h_source.html#l00059">ModuleSummaryIndex.h:59</a></div></div>
<div class="ttc" id="anamespacellvm_1_1dwarf_html_a5d3c920b66ea797d6adb243862fdf47a"><div class="ttname"><a href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">llvm::dwarf::Index</a></div><div class="ttdeci">Index</div><div class="ttdef"><b>Definition:</b> <a href="Dwarf_8h_source.html#l00550">Dwarf.h:550</a></div></div>
<div class="ttc" id="aclassllvm_1_1detail_1_1DenseSetImpl_html_a9a025cb106832026cd05c2b4648a699f"><div class="ttname"><a href="classllvm_1_1detail_1_1DenseSetImpl.html#a9a025cb106832026cd05c2b4648a699f">llvm::detail::DenseSetImpl::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00081">DenseSet.h:81</a></div></div>
<div class="ttc" id="anamespacellvm_html_aac226baa3ffd0f255a8d2b6d978b81b2"><div class="ttname"><a href="namespacellvm.html#aac226baa3ffd0f255a8d2b6d978b81b2">llvm::getLazyIRFileModule</a></div><div class="ttdeci">std::unique_ptr&lt; Module &gt; getLazyIRFileModule(StringRef Filename, SMDiagnostic &amp;Err, LLVMContext &amp;Context, bool ShouldLazyLoadMetadata=false)</div><div class="ttdoc">If the given file holds a bitcode image, return a Module for it which does lazy deserialization of fu...</div><div class="ttdef"><b>Definition:</b> <a href="IRReader_8cpp_source.html#l00053">IRReader.cpp:53</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRMover_html_a2dc5bdd64e84f396f958cd168e6e89e2"><div class="ttname"><a href="classllvm_1_1IRMover.html#a2dc5bdd64e84f396f958cd168e6e89e2">llvm::IRMover::move</a></div><div class="ttdeci">Error move(std::unique_ptr&lt; Module &gt; Src, ArrayRef&lt; GlobalValue * &gt; ValuesToLink, LazyCallback AddLazyFor, bool IsPerformingImport)</div><div class="ttdoc">Move in the provide values in ValuesToLink from Src.</div><div class="ttdef"><b>Definition:</b> <a href="IRMover_8cpp_source.html#l01786">IRMover.cpp:1786</a></div></div>
<div class="ttc" id="anamespacellvm_html_aff4d1b90a120cf50deb15494c801d589"><div class="ttname"><a href="namespacellvm.html#aff4d1b90a120cf50deb15494c801d589">llvm::thinLTOFinalizeInModule</a></div><div class="ttdeci">void thinLTOFinalizeInModule(Module &amp;TheModule, const GVSummaryMapTy &amp;DefinedGlobals, bool PropagateAttrs)</div><div class="ttdoc">Based on the information recorded in the summaries during global summary-based analysis:</div><div class="ttdef"><b>Definition:</b> <a href="FunctionImport_8cpp_source.html#l01051">FunctionImport.cpp:1051</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7f2a3d4dcfee70225988aec53ff1e173"><div class="ttname"><a href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">llvm::report_fatal_error</a></div><div class="ttdeci">void report_fatal_error(Error Err, bool gen_crash_diag=true)</div><div class="ttdoc">Report a serious error, calling any installed error handler.</div><div class="ttdef"><b>Definition:</b> <a href="Testing_2Support_2Error_8cpp_source.html#l00145">Error.cpp:145</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0bf75467957937ad23ad7be19f489934"><div class="ttname"><a href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">llvm::STATISTIC</a></div><div class="ttdeci">STATISTIC(NumFunctions, &quot;Total number of functions&quot;)</div></div>
<div class="ttc" id="anamespacellvm_html_a82d12b13c0992d81737c1ba236579249"><div class="ttname"><a href="namespacellvm.html#a82d12b13c0992d81737c1ba236579249">llvm::getHotnessName</a></div><div class="ttdeci">const char * getHotnessName(CalleeInfo::HotnessType HT)</div><div class="ttdef"><b>Definition:</b> <a href="ModuleSummaryIndex_8h_source.html#l00107">ModuleSummaryIndex.h:107</a></div></div>
<div class="ttc" id="aFunctionImport_8cpp_html_a633b579e4d4d2825ca5b39bb8a5f95c8"><div class="ttname"><a href="FunctionImport_8cpp.html#a633b579e4d4d2825ca5b39bb8a5f95c8">ImportAllIndex</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ImportAllIndex(&quot;import-all-index&quot;, cl::desc(&quot;Import all external functions in index.&quot;))</div><div class="ttdoc">Used when testing importing from distributed indexes via opt.</div></div>
<div class="ttc" id="anamespacellvm_html_ae3df80802cff4cb5736b3f9f87d70767"><div class="ttname"><a href="namespacellvm.html#ae3df80802cff4cb5736b3f9f87d70767">llvm::ComputeCrossModuleImportForModule</a></div><div class="ttdeci">void ComputeCrossModuleImportForModule(StringRef ModulePath, const ModuleSummaryIndex &amp;Index, FunctionImporter::ImportMapTy &amp;ImportList)</div><div class="ttdoc">Compute all the imports for the given module using the Index.</div><div class="ttdef"><b>Definition:</b> <a href="FunctionImport_8cpp_source.html#l00761">FunctionImport.cpp:761</a></div></div>
<div class="ttc" id="aFunctionImport_8cpp_html_ab718cd3b61483e936a7360c9f0861a4e"><div class="ttname"><a href="FunctionImport_8cpp.html#ab718cd3b61483e936a7360c9f0861a4e">computeImportForReferencedGlobals</a></div><div class="ttdeci">static void computeImportForReferencedGlobals(const GlobalValueSummary &amp;Summary, const ModuleSummaryIndex &amp;Index, const GVSummaryMapTy &amp;DefinedGVSummaries, SmallVectorImpl&lt; EdgeInfo &gt; &amp;Worklist, FunctionImporter::ImportMapTy &amp;ImportList, StringMap&lt; FunctionImporter::ExportSetTy &gt; *ExportLists)</div><div class="ttdef"><b>Definition:</b> <a href="FunctionImport_8cpp_source.html#l00271">FunctionImport.cpp:271</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">llvm::GlobalValue::InternalLinkage</a></div><div class="ttdeci">@ InternalLinkage</div><div class="ttdoc">Rename collisions when linking (static functions).</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00055">GlobalValue.h:55</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_aba930e0564c4207f112d9243eb2fc13a"><div class="ttname"><a href="classllvm_1_1Type.html#aba930e0564c4207f112d9243eb2fc13a">llvm::Type::isFunctionTy</a></div><div class="ttdeci">bool isFunctionTy() const</div><div class="ttdoc">True if this is an instance of FunctionType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00240">Type.h:240</a></div></div>
<div class="ttc" id="anamespacellvm_html_a38a0bdae7fb49d99f161aa6de0379d7ea72d6d7a1885885bb55a565fd1070581a"><div class="ttname"><a href="namespacellvm.html#a38a0bdae7fb49d99f161aa6de0379d7ea72d6d7a1885885bb55a565fd1070581a">llvm::PassSummaryAction::Import</a></div><div class="ttdeci">@ Import</div><div class="ttdoc">Import information from summary.</div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a97918d8b2f03a703571385ca2d0fe5cd"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a97918d8b2f03a703571385ca2d0fe5cd">llvm::GlobalValue::getGUID</a></div><div class="ttdeci">static GUID getGUID(StringRef GlobalName)</div><div class="ttdoc">Return a 64-bit global unique ID constructed from global value name (i.e.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00587">GlobalValue.h:587</a></div></div>
<div class="ttc" id="aSupport_2SourceMgr_8h_html"><div class="ttname"><a href="Support_2SourceMgr_8h.html">SourceMgr.h</a></div></div>
<div class="ttc" id="aFunctionImport_8cpp_html_a7c26e0683b89c481ac99e16bb1973668"><div class="ttname"><a href="FunctionImport_8cpp.html#a7c26e0683b89c481ac99e16bb1973668">selectCallee</a></div><div class="ttdeci">static const GlobalValueSummary * selectCallee(const ModuleSummaryIndex &amp;Index, ArrayRef&lt; std::unique_ptr&lt; GlobalValueSummary &gt;&gt; CalleeSummaryList, unsigned Threshold, StringRef CallerModulePath, FunctionImporter::ImportFailureReason &amp;Reason, GlobalValue::GUID GUID)</div><div class="ttdoc">Given a list of possible callee implementation for a call site, select one that fits the Threshold.</div><div class="ttdef"><b>Definition:</b> <a href="FunctionImport_8cpp_source.html#l00173">FunctionImport.cpp:173</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringMap_html"><div class="ttname"><a href="classllvm_1_1StringMap.html">llvm::StringMap</a></div><div class="ttdoc">StringMap - This is an unconventional map that is specialized for handling keys that are &quot;strings&quot;,...</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2StringMap_8h_source.html#l00110">StringMap.h:110</a></div></div>
<div class="ttc" id="astructllvm_1_1ValueInfo_html"><div class="ttname"><a href="structllvm_1_1ValueInfo.html">llvm::ValueInfo</a></div><div class="ttdoc">Struct that holds a reference to a particular GUID in a global value summary.</div><div class="ttdef"><b>Definition:</b> <a href="ModuleSummaryIndex_8h_source.html#l00169">ModuleSummaryIndex.h:169</a></div></div>
<div class="ttc" id="anamespacellvm_html_a3e9604d679f4806943544dceaeb68149"><div class="ttname"><a href="namespacellvm.html#a3e9604d679f4806943544dceaeb68149">llvm::convertToDeclaration</a></div><div class="ttdeci">bool convertToDeclaration(GlobalValue &amp;GV)</div><div class="ttdoc">Converts value GV to declaration, or replaces with a declaration if it is an alias.</div><div class="ttdef"><b>Definition:</b> <a href="FunctionImport_8cpp_source.html#l01016">FunctionImport.cpp:1016</a></div></div>
<div class="ttc" id="aclassllvm_1_1function__ref_html"><div class="ttname"><a href="classllvm_1_1function__ref.html">llvm::function_ref</a></div><div class="ttdoc">An efficient, type-erasing, non-owning reference to a callable.</div><div class="ttdef"><b>Definition:</b> <a href="STLFunctionalExtras_8h_source.html#l00036">STLFunctionalExtras.h:36</a></div></div>
<div class="ttc" id="aRDFGraph_8cpp_html_af153ca0eadca8bc464492b7aba7feb00"><div class="ttname"><a href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a></div><div class="ttdeci">const DataFlowGraph &amp; G</div><div class="ttdef"><b>Definition:</b> <a href="RDFGraph_8cpp_source.html#l00200">RDFGraph.cpp:200</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseSet_html"><div class="ttname"><a href="classllvm_1_1DenseSet.html">llvm::DenseSet&lt; GlobalValue::GUID &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l01410">CommandLine.h:1410</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_ae76e0b39c563b63554b4c99a8ad726e4"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#ae76e0b39c563b63554b4c99a8ad726e4">llvm::GlobalValue::hasAvailableExternallyLinkage</a></div><div class="ttdeci">bool hasAvailableExternallyLinkage() const</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00507">GlobalValue.h:507</a></div></div>
<div class="ttc" id="astructllvm_1_1CalleeInfo_html_a2413e35985411a461b9ab03c17c01caaa4194726ee334e1085d93e002837b73f0"><div class="ttname"><a href="structllvm_1_1CalleeInfo.html#a2413e35985411a461b9ab03c17c01caaa4194726ee334e1085d93e002837b73f0">llvm::CalleeInfo::HotnessType::Hot</a></div><div class="ttdeci">@ Hot</div></div>
<div class="ttc" id="aclassllvm_1_1IRMover_html"><div class="ttname"><a href="classllvm_1_1IRMover.html">llvm::IRMover</a></div><div class="ttdef"><b>Definition:</b> <a href="IRMover_8h_source.html#l00026">IRMover.h:26</a></div></div>
<div class="ttc" id="aFunctionImport_8cpp_html_aa82a05b016fecb419dbb8d4b7d877e98"><div class="ttname"><a href="FunctionImport_8cpp.html#aa82a05b016fecb419dbb8d4b7d877e98">ImportCriticalMultiplier</a></div><div class="ttdeci">static cl::opt&lt; float &gt; ImportCriticalMultiplier(&quot;import-critical-multiplier&quot;, cl::init(100.0), cl::Hidden, cl::value_desc(&quot;x&quot;), cl::desc(&quot;Multiply the `import-instr-limit` threshold for critical callsites&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html"><div class="ttname"><a href="classllvm_1_1GlobalValue.html">llvm::GlobalValue</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00044">GlobalValue.h:44</a></div></div>
<div class="ttc" id="aSIInstrInfo_8cpp_html_a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd"><div class="ttname"><a href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a></div><div class="ttdeci">@ VI</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8cpp_source.html#l07994">SIInstrInfo.cpp:7994</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a28b9561d9ef3d237ef894023187fa26c"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a28b9561d9ef3d237ef894023187fa26c">llvm::GlobalValue::getVisibility</a></div><div class="ttdeci">VisibilityTypes getVisibility() const</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00244">GlobalValue.h:244</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a9e1fc23a17e97d2d1732e753ae9251ac"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">llvm::GlobalValue::getParent</a></div><div class="ttdeci">Module * getParent()</div><div class="ttdoc">Get the module that this global value is contained inside of...</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00652">GlobalValue.h:652</a></div></div>
<div class="ttc" id="anamespacellvm_html_aee23fa24e474fb6e443445dd3545adf9"><div class="ttname"><a href="namespacellvm.html#aee23fa24e474fb6e443445dd3545adf9">llvm::computeDeadSymbolsWithConstProp</a></div><div class="ttdeci">void computeDeadSymbolsWithConstProp(ModuleSummaryIndex &amp;Index, const DenseSet&lt; GlobalValue::GUID &gt; &amp;GUIDPreservedSymbols, function_ref&lt; PrevailingType(GlobalValue::GUID)&gt; isPrevailing, bool ImportEnabled)</div><div class="ttdoc">Compute dead symbols and run constant propagation in combined index after that.</div><div class="ttdef"><b>Definition:</b> <a href="FunctionImport_8cpp_source.html#l00963">FunctionImport.cpp:963</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_ad3a99906764c35b2694ae90fa57744a5"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">move</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional move</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00546">README.txt:546</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLVMContext_html"><div class="ttname"><a href="classllvm_1_1LLVMContext.html">llvm::LLVMContext</a></div><div class="ttdoc">This is an important class for using LLVM in a threaded context.</div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00067">LLVMContext.h:67</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00714">DenseMap.h:714</a></div></div>
<div class="ttc" id="aFunctionImport_8cpp_html_ae32ac1f5b44726ab1de654ef3576e00b"><div class="ttname"><a href="FunctionImport_8cpp.html#ae32ac1f5b44726ab1de654ef3576e00b">numGlobalVarSummaries</a></div><div class="ttdeci">static unsigned numGlobalVarSummaries(const ModuleSummaryIndex &amp;Index, T &amp;Cont)</div><div class="ttdef"><b>Definition:</b> <a href="FunctionImport_8cpp_source.html#l00609">FunctionImport.cpp:609</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringMap_html_aa6528965c64b379c2cb311599babdd66"><div class="ttname"><a href="classllvm_1_1StringMap.html#aa6528965c64b379c2cb311599babdd66">llvm::StringMap::lookup</a></div><div class="ttdeci">ValueTy lookup(StringRef Key) const</div><div class="ttdoc">lookup - Return the entry for the specified key, or a default constructed value if no such entry exis...</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2StringMap_8h_source.html#l00233">StringMap.h:233</a></div></div>
<div class="ttc" id="aCloning_8h_html"><div class="ttname"><a href="Cloning_8h.html">Cloning.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1detail_1_1DenseSetImpl_html_a9a3c9d867ff6bde97841c2b7983f5c70"><div class="ttname"><a href="classllvm_1_1detail_1_1DenseSetImpl.html#a9a3c9d867ff6bde97841c2b7983f5c70">llvm::detail::DenseSetImpl::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00080">DenseSet.h:80</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00445">CommandLine.h:445</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a687973de03d041e04b50a76d19d4fd36"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a687973de03d041e04b50a76d19d4fd36">llvm::GlobalValue::setLinkage</a></div><div class="ttdeci">void setLinkage(LinkageTypes LT)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00532">GlobalValue.h:532</a></div></div>
<div class="ttc" id="aArrayRef_8h_html"><div class="ttname"><a href="ArrayRef_8h.html">ArrayRef.h</a></div></div>
<div class="ttc" id="aFunctionImport_8cpp_html_a53a869e521f9381b4b175ebd078ae47f"><div class="ttname"><a href="FunctionImport_8cpp.html#a53a869e521f9381b4b175ebd078ae47f">ImportColdMultiplier</a></div><div class="ttdeci">static cl::opt&lt; float &gt; ImportColdMultiplier(&quot;import-cold-multiplier&quot;, cl::init(0), cl::Hidden, cl::value_desc(&quot;N&quot;), cl::desc(&quot;Multiply the `import-instr-limit` threshold for cold callsites&quot;))</div></div>
<div class="ttc" id="aFunctionImport_8cpp_html_ad08d91df5d0fa58431d60a9e412c430b"><div class="ttname"><a href="FunctionImport_8cpp.html#ad08d91df5d0fa58431d60a9e412c430b">replaceAliasWithAliasee</a></div><div class="ttdeci">static Function * replaceAliasWithAliasee(Module *SrcModule, GlobalAlias *GA)</div><div class="ttdoc">Make alias a clone of its aliasee.</div><div class="ttdef"><b>Definition:</b> <a href="FunctionImport_8cpp_source.html#l01226">FunctionImport.cpp:1226</a></div></div>
<div class="ttc" id="aclassllvm_1_1detail_1_1DenseSetImpl_html_ad7dc7318244359268414719e0959346e"><div class="ttname"><a href="classllvm_1_1detail_1_1DenseSetImpl.html#ad7dc7318244359268414719e0959346e">llvm::detail::DenseSetImpl::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00173">DenseSet.h:173</a></div></div>
<div class="ttc" id="anamespacellvm_html_af7fed2696a3bda04b9f93d8b986758b3"><div class="ttname"><a href="namespacellvm.html#af7fed2696a3bda04b9f93d8b986758b3">llvm::getModuleSummaryIndexForFile</a></div><div class="ttdeci">Expected&lt; std::unique_ptr&lt; ModuleSummaryIndex &gt; &gt; getModuleSummaryIndexForFile(StringRef Path, bool IgnoreEmptyThinLTOIndexFile=false)</div><div class="ttdoc">Parse the module summary index out of an IR file and return the module summary index object if found,...</div><div class="ttdef"><b>Definition:</b> <a href="BitcodeReader_8cpp_source.html#l08222">BitcodeReader.cpp:8222</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a0c047f127ed4380a6f383d70bec4eb94"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">llvm::DenseMapBase::find</a></div><div class="ttdeci">iterator find(const_arg_type_t&lt; KeyT &gt; Val)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00150">DenseMap.h:150</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a6adbed68009f582caa84cdfd2adf36f1"><div class="ttname"><a href="classllvm_1_1Function.html#a6adbed68009f582caa84cdfd2adf36f1">llvm::Function::Create</a></div><div class="ttdeci">static Function * Create(FunctionType *Ty, LinkageTypes Linkage, unsigned AddrSpace, const Twine &amp;N=&quot;&quot;, Module *M=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00136">Function.h:136</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a702d4986803a1782ba305b1c7a0f1c21"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a702d4986803a1782ba305b1c7a0f1c21">llvm::GlobalValue::getAddressSpace</a></div><div class="ttdeci">unsigned getAddressSpace() const</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00201">GlobalValue.h:201</a></div></div>
<div class="ttc" id="aFunctionImport_8cpp_html_a82b2bae54059511efe7441d4213e4add"><div class="ttname"><a href="FunctionImport_8cpp.html#a82b2bae54059511efe7441d4213e4add">internalizeGVsAfterImport</a></div><div class="ttdeci">static void internalizeGVsAfterImport(Module &amp;M)</div><div class="ttdef"><b>Definition:</b> <a href="FunctionImport_8cpp_source.html#l01242">FunctionImport.cpp:1242</a></div></div>
<div class="ttc" id="anamespacellvm_1_1X86AS_html_aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f"><div class="ttname"><a href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31a5b3a782ccae295a254e2794ad30ad07f">llvm::X86AS::FS</a></div><div class="ttdeci">@ FS</div><div class="ttdef"><b>Definition:</b> <a href="X86_8h_source.html#l00201">X86.h:201</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html_a168fb8190f7a201fd0c85b276cac268f"><div class="ttname"><a href="classllvm_1_1Module.html#a168fb8190f7a201fd0c85b276cac268f">llvm::Module::getModuleIdentifier</a></div><div class="ttdeci">const std::string &amp; getModuleIdentifier() const</div><div class="ttdoc">Get the module identifier which is, essentially, the name of the module.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00228">Module.h:228</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a578061260691a59a9e7b0455fd68359c"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a578061260691a59a9e7b0455fd68359c">llvm::GlobalValue::isAvailableExternallyLinkage</a></div><div class="ttdeci">static bool isAvailableExternallyLinkage(LinkageTypes Linkage)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00374">GlobalValue.h:374</a></div></div>
<div class="ttc" id="aFunctionImport_8cpp_html_aeb35d5c809e3003e07e96bd489608220"><div class="ttname"><a href="FunctionImport_8cpp.html#aeb35d5c809e3003e07e96bd489608220">ImportInstrFactor</a></div><div class="ttdeci">static cl::opt&lt; float &gt; ImportInstrFactor(&quot;import-instr-evolution-factor&quot;, cl::init(0.7), cl::Hidden, cl::value_desc(&quot;x&quot;), cl::desc(&quot;As we import functions, multiply the &quot; &quot;`import-instr-limit` threshold by this factor &quot; &quot;before processing newly imported functions&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1Module_html"><div class="ttname"><a href="classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">A Module instance is used to store all the information related to an LLVM module.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00065">Module.h:65</a></div></div>
<div class="ttc" id="aIRMover_8h_html"><div class="ttname"><a href="IRMover_8h.html">IRMover.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringMapImpl_html_a80596ea56fa14ea5a773d303ee64293c"><div class="ttname"><a href="classllvm_1_1StringMapImpl.html#a80596ea56fa14ea5a773d303ee64293c">llvm::StringMapImpl::size</a></div><div class="ttdeci">unsigned size() const</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2StringMap_8h_source.html#l00095">StringMap.h:95</a></div></div>
<div class="ttc" id="aFunctionImport_8cpp_html_a5e4a0be88e228b9e13548dd074c41ba4"><div class="ttname"><a href="FunctionImport_8cpp.html#a5e4a0be88e228b9e13548dd074c41ba4">PrintImports</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; PrintImports(&quot;print-imports&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Print imported functions&quot;))</div></div>
<div class="ttc" id="anamespacellvm_html_aaff01b50a31ed4a32a8da645a9a18e40"><div class="ttname"><a href="namespacellvm.html#aaff01b50a31ed4a32a8da645a9a18e40">llvm::internalizeModule</a></div><div class="ttdeci">bool internalizeModule(Module &amp;TheModule, std::function&lt; bool(const GlobalValue &amp;)&gt; MustPreserveGV, CallGraph *CG=nullptr)</div><div class="ttdoc">Helper function to internalize functions and variables in a Module.</div><div class="ttdef"><b>Definition:</b> <a href="Internalize_8h_source.html#l00079">Internalize.h:79</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_a72d928b7fc2c5f2d56c6ac0265fd9c6e"><div class="ttname"><a href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">llvm::SetVector::insert</a></div><div class="ttdeci">bool insert(const value_type &amp;X)</div><div class="ttdoc">Insert a new element into the SetVector.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00141">SetVector.h:141</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionSummary_html_aa1c7a4e9c5bce12a30f1fcd3c0d2e580"><div class="ttname"><a href="classllvm_1_1FunctionSummary.html#aa1c7a4e9c5bce12a30f1fcd3c0d2e580">llvm::FunctionSummary::instCount</a></div><div class="ttdeci">unsigned instCount() const</div><div class="ttdoc">Get the instruction count recorded for this function.</div><div class="ttdef"><b>Definition:</b> <a href="ModuleSummaryIndex_8h_source.html#l00849">ModuleSummaryIndex.h:849</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_ae3a42354a5b89aa8ade55dab229036f6"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#ae3a42354a5b89aa8ade55dab229036f6">llvm::GlobalValue::canBeOmittedFromSymbolTable</a></div><div class="ttdeci">bool canBeOmittedFromSymbolTable() const</div><div class="ttdoc">True if GV can be left out of the object symbol table.</div><div class="ttdef"><b>Definition:</b> <a href="Globals_8cpp_source.html#l00394">Globals.cpp:394</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef</a></div><div class="ttdoc">ArrayRef - Represent a constant reference to an array (0 or more elements consecutively in memory),...</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00033">APInt.h:33</a></div></div>
<div class="ttc" id="anamespacellvm_html_a61d13d6824ec46c31260a4fd0997eda0"><div class="ttname"><a href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">llvm::any_of</a></div><div class="ttdeci">bool any_of(R &amp;&amp;range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::any_of which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01742">STLExtras.h:1742</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html"><div class="ttname"><a href="classllvm_1_1StringRef.html">llvm::StringRef</a></div><div class="ttdoc">StringRef - Represent a constant reference to a string, i.e.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00050">StringRef.h:50</a></div></div>
<div class="ttc" id="anamespacellvm_html_a59739a4f15fb2ec57a6b7fcfe938546baa55e82356e9721946aa9ba954733c6f0"><div class="ttname"><a href="namespacellvm.html#a59739a4f15fb2ec57a6b7fcfe938546baa55e82356e9721946aa9ba954733c6f0">llvm::errc::not_supported</a></div><div class="ttdeci">@ not_supported</div></div>
<div class="ttc" id="aSupport_2ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdoc">Marks that the current location is not supposed to be reachable.</div><div class="ttdef"><b>Definition:</b> <a href="Support_2ErrorHandling_8h_source.html#l00143">ErrorHandling.h:143</a></div></div>
<div class="ttc" id="ainclude_2llvm_2Support_2CMakeLists_8txt_html_aef9367eb0b7430eaf70b1f2725488f2a"><div class="ttname"><a href="include_2llvm_2Support_2CMakeLists_8txt.html#aef9367eb0b7430eaf70b1f2725488f2a">if</a></div><div class="ttdeci">if(llvm_vc STREQUAL &quot;&quot;) set(fake_version_inc &quot;$</div><div class="ttdef"><b>Definition:</b> <a href="include_2llvm_2Support_2CMakeLists_8txt_source.html#l00014">CMakeLists.txt:14</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_aedfa75f0c85c4aa85b257f066fbea57ca696bb1c9b0b0e76bb70c61f68866452a"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca696bb1c9b0b0e76bb70c61f68866452a">llvm::GlobalValue::WeakODRLinkage</a></div><div class="ttdeci">@ WeakODRLinkage</div><div class="ttdoc">Same, but only replaced by something equivalent.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00053">GlobalValue.h:53</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdoc">Change all uses of this to point to a new Value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00532">Value.cpp:532</a></div></div>
<div class="ttc" id="aFunctionImport_8cpp_html_a60a4fc74a3465963f7b49b8831508ce4"><div class="ttname"><a href="FunctionImport_8cpp.html#a60a4fc74a3465963f7b49b8831508ce4">getFailureName</a></div><div class="ttdeci">static const char * getFailureName(FunctionImporter::ImportFailureReason Reason)</div><div class="ttdef"><b>Definition:</b> <a href="FunctionImport_8cpp_source.html#l00323">FunctionImport.cpp:323</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_a1b45f45820a60c09244a87eb59824aec"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a></div><div class="ttdeci">add sub stmia L5 ldr r0 bl L_printf $stub Instead of a and a wouldn t it be better to do three moves *Return an aggregate type is even return S</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00210">README.txt:210</a></div></div>
<div class="ttc" id="anamespacellvm_html_aedeb89fa4ceb608d9d49bcd53ddcd2c1"><div class="ttname"><a href="namespacellvm.html#aedeb89fa4ceb608d9d49bcd53ddcd2c1">llvm::CloneFunction</a></div><div class="ttdeci">Function * CloneFunction(Function *F, ValueToValueMapTy &amp;VMap, ClonedCodeInfo *CodeInfo=nullptr)</div><div class="ttdoc">Return a copy of the specified function and add it to that function's module.</div><div class="ttdef"><b>Definition:</b> <a href="CloneFunction_8cpp_source.html#l00311">CloneFunction.cpp:311</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_aedfa75f0c85c4aa85b257f066fbea57caa67f293befacbbf974525116ccf2ff42"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57caa67f293befacbbf974525116ccf2ff42">llvm::GlobalValue::AvailableExternallyLinkage</a></div><div class="ttdeci">@ AvailableExternallyLinkage</div><div class="ttdoc">Available for inspection, not emission.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00049">GlobalValue.h:49</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a788ede5201dc9b44e419e9fd2fbb38bf"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a788ede5201dc9b44e419e9fd2fbb38bf">llvm::GlobalValue::getAliaseeObject</a></div><div class="ttdeci">const GlobalObject * getAliaseeObject() const</div><div class="ttdef"><b>Definition:</b> <a href="Globals_8cpp_source.html#l00369">Globals.cpp:369</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_adb5c319f5905c1d3ca9eb5df546388c5"><div class="ttname"><a href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">Return a constant reference to the value's name.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00308">Value.cpp:308</a></div></div>
<div class="ttc" id="aclassllvm_1_1ValueMap_html"><div class="ttname"><a href="classllvm_1_1ValueMap.html">llvm::ValueMap&lt; const Value *, WeakTrackingVH &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a99f811d53704275b4158c62a2dd138d9"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">llvm::DenseMapBase::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const std::pair&lt; KeyT, ValueT &gt; &amp;KV)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00207">DenseMap.h:207</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html_a506a727316531d896d2f5e2095eff2b6"><div class="ttname"><a href="classllvm_1_1Module.html#a506a727316531d896d2f5e2095eff2b6">llvm::Module::getSourceFileName</a></div><div class="ttdeci">const std::string &amp; getSourceFileName() const</div><div class="ttdoc">Get the module's original source file name.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00239">Module.h:239</a></div></div>
<div class="ttc" id="aclassllvm_1_1raw__fd__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__fd__ostream.html">llvm::raw_fd_ostream</a></div><div class="ttdoc">A raw_ostream that writes to a file descriptor.</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00454">raw_ostream.h:454</a></div></div>
<div class="ttc" id="aFunctionImport_8cpp_html_aa94c90f8129dab9ddd3bdee5c218ae49"><div class="ttname"><a href="FunctionImport_8cpp.html#aa94c90f8129dab9ddd3bdee5c218ae49">doImportingForModule</a></div><div class="ttdeci">static bool doImportingForModule(Module &amp;M)</div><div class="ttdef"><b>Definition:</b> <a href="FunctionImport_8cpp_source.html#l01397">FunctionImport.cpp:1397</a></div></div>
<div class="ttc" id="aFunctionImport_8cpp_html_a0736f38219e094f3ee6cb79ecaca6fb2"><div class="ttname"><a href="FunctionImport_8cpp.html#a0736f38219e094f3ee6cb79ecaca6fb2">EnableImportMetadata</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; EnableImportMetadata(&quot;enable-import-metadata&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Enable import metadata like 'thinlto_src_module'&quot;))</div></div>
<div class="ttc" id="anamespacellvm_html_a20e3e08c7de6a230cd66f9e4322c3fbe"><div class="ttname"><a href="namespacellvm.html#a20e3e08c7de6a230cd66f9e4322c3fbe">llvm::make_error_code</a></div><div class="ttdeci">std::error_code make_error_code(BitcodeError E)</div><div class="ttdef"><b>Definition:</b> <a href="BitcodeReader_8h_source.html#l00311">BitcodeReader.h:311</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac78c09ae232b2ce188ff590d51e3c268"><div class="ttname"><a href="namespacellvm.html#ac78c09ae232b2ce188ff590d51e3c268">llvm::find_if</a></div><div class="ttdeci">auto find_if(R &amp;&amp;Range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::find_if which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01762">STLExtras.h:1762</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1SendMsg_html_ad7fab8522e49be1b20c4db4fc431bd3c"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#ad7fab8522e49be1b20c4db4fc431bd3c">llvm::AMDGPU::SendMsg::Msg</a></div><div class="ttdeci">const CustomOperand&lt; const MCSubtargetInfo &amp; &gt; Msg[]</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUAsmUtils_8cpp_source.html#l00039">AMDGPUAsmUtils.cpp:39</a></div></div>
<div class="ttc" id="anamespacellvm_html_a065ed35b75b9eeb5cca1aa73bcae7183"><div class="ttname"><a href="namespacellvm.html#a065ed35b75b9eeb5cca1aa73bcae7183">llvm::logAllUnhandledErrors</a></div><div class="ttdeci">void logAllUnhandledErrors(Error E, raw_ostream &amp;OS, Twine ErrorBanner={})</div><div class="ttdoc">Log all errors (if any) in E to OS.</div><div class="ttdef"><b>Definition:</b> <a href="Testing_2Support_2Error_8cpp_source.html#l00063">Error.cpp:63</a></div></div>
<div class="ttc" id="aFunctionImport_8cpp_html_ad7bfd8da79e55bf6a2b2ac4955b7f95d"><div class="ttname"><a href="FunctionImport_8cpp.html#ad7bfd8da79e55bf6a2b2ac4955b7f95d">dumpImportListForModule</a></div><div class="ttdeci">static void dumpImportListForModule(const ModuleSummaryIndex &amp;Index, StringRef ModulePath, FunctionImporter::ImportMapTy &amp;ImportList)</div><div class="ttdef"><b>Definition:</b> <a href="FunctionImport_8cpp_source.html#l00744">FunctionImport.cpp:744</a></div></div>
<div class="ttc" id="astructllvm_1_1CalleeInfo_html_a2413e35985411a461b9ab03c17c01caaa278d01e5af56273bae1bb99a98b370cd"><div class="ttname"><a href="structllvm_1_1CalleeInfo.html#a2413e35985411a461b9ab03c17c01caaa278d01e5af56273bae1bb99a98b370cd">llvm::CalleeInfo::HotnessType::Critical</a></div><div class="ttdeci">@ Critical</div></div>
<div class="ttc" id="aclassllvm_1_1Twine_html"><div class="ttname"><a href="classllvm_1_1Twine.html">llvm::Twine</a></div><div class="ttdoc">Twine - A lightweight data structure for efficiently representing the concatenation of temporary valu...</div><div class="ttdef"><b>Definition:</b> <a href="Twine_8h_source.html#l00081">Twine.h:81</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionSummary_html"><div class="ttname"><a href="classllvm_1_1FunctionSummary.html">llvm::FunctionSummary</a></div><div class="ttdoc">Function summary information to aid decisions and implementation of importing.</div><div class="ttdef"><b>Definition:</b> <a href="ModuleSummaryIndex_8h_source.html#l00587">ModuleSummaryIndex.h:587</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7475afb80c692a3cfc942b212701a96e"><div class="ttname"><a href="namespacellvm.html#a7475afb80c692a3cfc942b212701a96e">llvm::ComputeCrossModuleImportForModuleFromIndex</a></div><div class="ttdeci">void ComputeCrossModuleImportForModuleFromIndex(StringRef ModulePath, const ModuleSummaryIndex &amp;Index, FunctionImporter::ImportMapTy &amp;ImportList)</div><div class="ttdoc">Mark all external summaries in Index for import into the given module.</div><div class="ttdef"><b>Definition:</b> <a href="FunctionImport_8cpp_source.html#l00780">FunctionImport.cpp:780</a></div></div>
<div class="ttc" id="aFunctionImport_8cpp_html_ac69c623576338cd7d9b9de06448e714b"><div class="ttname"><a href="FunctionImport_8cpp.html#ac69c623576338cd7d9b9de06448e714b">ForceImportAll</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ForceImportAll(&quot;force-import-all&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Import functions with noinline attribute&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1FunctionImporter_html_acbdbb2a799833253c9b3ec9e8e1e5a29"><div class="ttname"><a href="classllvm_1_1FunctionImporter.html#acbdbb2a799833253c9b3ec9e8e1e5a29">llvm::FunctionImporter::ImportFailureReason</a></div><div class="ttdeci">ImportFailureReason</div><div class="ttdoc">The different reasons selectCallee will chose not to import a candidate.</div><div class="ttdef"><b>Definition:</b> <a href="FunctionImport_8h_source.html#l00041">FunctionImport.h:41</a></div></div>
<div class="ttc" id="anamespacellvm_html_aebf1ed936ad0e792e159d7a4ae1b7f07"><div class="ttname"><a href="namespacellvm.html#aebf1ed936ad0e792e159d7a4ae1b7f07">llvm::None</a></div><div class="ttdeci">constexpr std::nullopt_t None</div><div class="ttdef"><b>Definition:</b> <a href="None_8h_source.html#l00028">None.h:28</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_aabf6932ed41fc64e17c0030c44eda44e"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aabf6932ed41fc64e17c0030c44eda44e">llvm::GlobalValue::isInterposableLinkage</a></div><div class="ttdeci">static bool isInterposableLinkage(LinkageTypes Linkage)</div><div class="ttdoc">Whether the definition of this global may be replaced by something non-equivalent at link time.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00420">GlobalValue.h:420</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a65520b9c67759099e313d0f4e7b5ff9e"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">llvm::DenseMapBase::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00084">DenseMap.h:84</a></div></div>
<div class="ttc" id="anamespacellvm_html_a63540526d092e2f4bbc70590b6034f4e"><div class="ttname"><a href="namespacellvm.html#a63540526d092e2f4bbc70590b6034f4e">llvm::toString</a></div><div class="ttdeci">const char * toString(DWARFSectionKind Kind)</div><div class="ttdef"><b>Definition:</b> <a href="DWARFUnitIndex_8h_source.html#l00067">DWARFUnitIndex.h:67</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_a1258a1ff55557c27684010ebd7283712"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">llvm::PreservedAnalyses::all</a></div><div class="ttdeci">static PreservedAnalyses all()</div><div class="ttdoc">Construct a special preserved set that preserves all passes.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00158">PassManager.h:158</a></div></div>
<div class="ttc" id="aclassllvm_1_1Error_html"><div class="ttname"><a href="classllvm_1_1Error.html">llvm::Error</a></div><div class="ttdoc">Lightweight error class with error context and mandatory checking.</div><div class="ttdef"><b>Definition:</b> <a href="Support_2Error_8h_source.html#l00156">Error.h:156</a></div></div>
<div class="ttc" id="aGlobalVariable_8h_html"><div class="ttname"><a href="GlobalVariable_8h.html">GlobalVariable.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html_a9c00c70121af456007404bd456047766"><div class="ttname"><a href="classllvm_1_1Module.html#a9c00c70121af456007404bd456047766">llvm::Module::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">Get the global data context.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00262">Module.h:262</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a71ee7e63264e4997a3340a781d44832e"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a71ee7e63264e4997a3340a781d44832e">llvm::GlobalValue::getGUID</a></div><div class="ttdeci">GUID getGUID() const</div><div class="ttdoc">Return a 64-bit global unique ID constructed from global value name (i.e.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00591">GlobalValue.h:591</a></div></div>
<div class="ttc" id="aCasting_8h_html"><div class="ttname"><a href="Casting_8h.html">Casting.h</a></div></div>
<div class="ttc" id="aFunction_8h_html"><div class="ttname"><a href="Function_8h.html">Function.h</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1value__desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1value__desc.html">llvm::cl::value_desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00420">CommandLine.h:420</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac505d74d262ee1e64d87b07121199e36abafd7322c6e97d25b6299b5d6fe8920b"><div class="ttname"><a href="namespacellvm.html#ac505d74d262ee1e64d87b07121199e36abafd7322c6e97d25b6299b5d6fe8920b">llvm::PrevailingType::No</a></div><div class="ttdeci">@ No</div></div>
<div class="ttc" id="aGlobalAlias_8h_html"><div class="ttname"><a href="GlobalAlias_8h.html">GlobalAlias.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e">llvm::GlobalValue::ExternalLinkage</a></div><div class="ttdeci">@ ExternalLinkage</div><div class="ttdoc">Externally visible function.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00048">GlobalValue.h:48</a></div></div>
<div class="ttc" id="aclassllvm_1_1Expected_html_a94789df4ebd03dc008e8adebaa66ac1f"><div class="ttname"><a href="classllvm_1_1Expected.html#a94789df4ebd03dc008e8adebaa66ac1f">llvm::Expected::takeError</a></div><div class="ttdeci">Error takeError()</div><div class="ttdoc">Take ownership of the stored error.</div><div class="ttdef"><b>Definition:</b> <a href="Support_2Error_8h_source.html#l00597">Error.h:597</a></div></div>
<div class="ttc" id="aFunctionImport_8cpp_html_a8afb9de4d8239806728ad5d82d550b87"><div class="ttname"><a href="FunctionImport_8cpp.html#a8afb9de4d8239806728ad5d82d550b87">updateValueInfoForIndirectCalls</a></div><div class="ttdeci">void updateValueInfoForIndirectCalls(ModuleSummaryIndex &amp;Index, FunctionSummary *FS)</div><div class="ttdef"><b>Definition:</b> <a href="FunctionImport_8cpp_source.html#l00808">FunctionImport.cpp:808</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionImportPass_html_a4eb08e2a18ca18c8e8ee7d1a8d3de7f2"><div class="ttname"><a href="classllvm_1_1FunctionImportPass.html#a4eb08e2a18ca18c8e8ee7d1a8d3de7f2">llvm::FunctionImportPass::run</a></div><div class="ttdeci">PreservedAnalyses run(Module &amp;M, ModuleAnalysisManager &amp;AM)</div><div class="ttdef"><b>Definition:</b> <a href="FunctionImport_8cpp_source.html#l01458">FunctionImport.cpp:1458</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7b5d72a4e8c39c8d0ea81cb9c547bc8c"><div class="ttname"><a href="namespacellvm.html#a7b5d72a4e8c39c8d0ea81cb9c547bc8c">llvm::computeDeadSymbolsAndUpdateIndirectCalls</a></div><div class="ttdeci">void computeDeadSymbolsAndUpdateIndirectCalls(ModuleSummaryIndex &amp;Index, const DenseSet&lt; GlobalValue::GUID &gt; &amp;GUIDPreservedSymbols, function_ref&lt; PrevailingType(GlobalValue::GUID)&gt; isPrevailing)</div><div class="ttdoc">Compute all the symbols that are &quot;dead&quot;: i.e these that can't be reached in the graph from any of the...</div><div class="ttdef"><b>Definition:</b> <a href="FunctionImport_8cpp_source.html#l00847">FunctionImport.cpp:847</a></div></div>
<div class="ttc" id="aFunctionImport_8cpp_html_a437ef847693c65bb072a34d2bb87ba32"><div class="ttname"><a href="FunctionImport_8cpp.html#a437ef847693c65bb072a34d2bb87ba32">SummaryFile</a></div><div class="ttdeci">static cl::opt&lt; std::string &gt; SummaryFile(&quot;summary-file&quot;, cl::desc(&quot;The summary file to use for function importing.&quot;))</div><div class="ttdoc">Summary file to use for function importing when using -function-import from the command line.</div></div>
<div class="ttc" id="aclassllvm_1_1GlobalAlias_html_a311a097af4f0f77da22ac7acddc496f5"><div class="ttname"><a href="classllvm_1_1GlobalAlias.html#a311a097af4f0f77da22ac7acddc496f5">llvm::GlobalAlias::getAliaseeObject</a></div><div class="ttdeci">const GlobalObject * getAliaseeObject() const</div><div class="ttdef"><b>Definition:</b> <a href="Globals_8cpp_source.html#l00562">Globals.cpp:562</a></div></div>
<div class="ttc" id="aSmallVector_8h_html"><div class="ttname"><a href="SmallVector_8h.html">SmallVector.h</a></div></div>
<div class="ttc" id="aMain_8cpp_html_a829a4bef9a485f5acc5c677f23f4f28c"><div class="ttname"><a href="Main_8cpp.html#a829a4bef9a485f5acc5c677f23f4f28c">OutputFilename</a></div><div class="ttdeci">static cl::opt&lt; std::string &gt; OutputFilename(&quot;o&quot;, cl::desc(&quot;Output filename&quot;), cl::value_desc(&quot;filename&quot;), cl::init(&quot;-&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1ModuleSummaryIndex_html"><div class="ttname"><a href="classllvm_1_1ModuleSummaryIndex.html">llvm::ModuleSummaryIndex</a></div><div class="ttdoc">Class to hold module path string table and global value map, and encapsulate methods for operating on...</div><div class="ttdef"><b>Definition:</b> <a href="ModuleSummaryIndex_8h_source.html#l01199">ModuleSummaryIndex.h:1199</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValueSummary_html_a453cb1f2305409dcdb9a8c0193bb620f"><div class="ttname"><a href="classllvm_1_1GlobalValueSummary.html#a453cb1f2305409dcdb9a8c0193bb620f">llvm::GlobalValueSummary::modulePath</a></div><div class="ttdeci">StringRef modulePath() const</div><div class="ttdoc">Get the path to the module containing this function.</div><div class="ttdef"><b>Definition:</b> <a href="ModuleSummaryIndex_8h_source.html#l00470">ModuleSummaryIndex.h:470</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a0c8ffe664a36e30d49c84d0aded2fe08"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">llvm::SmallVectorImpl::pop_back_val</a></div><div class="ttdeci">T pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00677">SmallVector.h:677</a></div></div>
<div class="ttc" id="aIRReader_2IRReader_8h_html"><div class="ttname"><a href="IRReader_2IRReader_8h.html">IRReader.h</a></div></div>
<div class="ttc" id="aAutoUpgrade_8h_html"><div class="ttname"><a href="AutoUpgrade_8h.html">AutoUpgrade.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1detail_1_1DenseSetImpl_html_af972d87e15b5f6ed61bd5c3956c5213d"><div class="ttname"><a href="classllvm_1_1detail_1_1DenseSetImpl.html#af972d87e15b5f6ed61bd5c3956c5213d">llvm::detail::DenseSetImpl::erase</a></div><div class="ttdeci">bool erase(const ValueT &amp;V)</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00101">DenseSet.h:101</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdoc">This class consists of common code factored out of the SmallVector class to reduce code duplication b...</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00042">APFloat.h:42</a></div></div>
<div class="ttc" id="anamespacellvm_1_1lltok_html_af353621f14cb4b4b3af5ffaff84076b1adaea4ca2c2bbf249ddcb0de15ce2273e"><div class="ttname"><a href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1adaea4ca2c2bbf249ddcb0de15ce2273e">llvm::lltok::GlobalVar</a></div><div class="ttdeci">@ GlobalVar</div><div class="ttdef"><b>Definition:</b> <a href="LLToken_8h_source.html#l00440">LLToken.h:440</a></div></div>
<div class="ttc" id="anamespacellvm_html_a81a2aefedf0b4e9b9ba33c711c8cbf71"><div class="ttname"><a href="namespacellvm.html#a81a2aefedf0b4e9b9ba33c711c8cbf71">llvm::ComputeCrossModuleImport</a></div><div class="ttdeci">void ComputeCrossModuleImport(const ModuleSummaryIndex &amp;Index, const StringMap&lt; GVSummaryMapTy &gt; &amp;ModuleToDefinedGVSummaries, StringMap&lt; FunctionImporter::ImportMapTy &gt; &amp;ImportLists, StringMap&lt; FunctionImporter::ExportSetTy &gt; &amp;ExportLists)</div><div class="ttdoc">Compute all the imports and exports for every module in the Index.</div><div class="ttdef"><b>Definition:</b> <a href="FunctionImport_8cpp_source.html#l00653">FunctionImport.cpp:653</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a92041fc7f781ba4fe708eec99139b72f"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a92041fc7f781ba4fe708eec99139b72f">llvm::GlobalValue::getType</a></div><div class="ttdeci">PointerType * getType() const</div><div class="ttdoc">Global values are always pointers.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00290">GlobalValue.h:290</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html">llvm::AnalysisManager</a></div><div class="ttdoc">A container for analyses that lazily runs them and caches their results.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00042">InstructionSimplify.h:42</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a29e0b1c558b350347e2652b35b26fea8"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a29e0b1c558b350347e2652b35b26fea8">llvm::GlobalValue::getValueType</a></div><div class="ttdeci">Type * getValueType() const</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00292">GlobalValue.h:292</a></div></div>
<div class="ttc" id="aADT_2StringMap_8h_html"><div class="ttname"><a href="ADT_2StringMap_8h.html">StringMap.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ae855357b6c5e6e7ed1869272708a3a84"><div class="ttname"><a href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">llvm::Value::takeName</a></div><div class="ttdeci">void takeName(Value *V)</div><div class="ttdoc">Transfer the name from V to this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00381">Value.cpp:381</a></div></div>
<div class="ttc" id="aFunctionImport_8cpp_html_a04038fdd608b9eb5590e13d9e091d01c"><div class="ttname"><a href="FunctionImport_8cpp.html#a04038fdd608b9eb5590e13d9e091d01c">checkVariableImport</a></div><div class="ttdeci">static bool checkVariableImport(const ModuleSummaryIndex &amp;Index, StringMap&lt; FunctionImporter::ImportMapTy &gt; &amp;ImportLists, StringMap&lt; FunctionImporter::ExportSetTy &gt; &amp;ExportLists)</div><div class="ttdef"><b>Definition:</b> <a href="FunctionImport_8cpp_source.html#l00621">FunctionImport.cpp:621</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00411">CommandLine.h:411</a></div></div>
<div class="ttc" id="aBitcodeReader_8h_html"><div class="ttname"><a href="BitcodeReader_8h.html">BitcodeReader.h</a></div></div>
<div class="ttc" id="araw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html"><div class="ttname"><a href="classllvm_1_1SetVector.html">llvm::SetVector</a></div><div class="ttdoc">A vector that has set insertion semantics.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00040">SetVector.h:40</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a499ea32ca1b8d16cedfe01d1e5b08f29"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a499ea32ca1b8d16cedfe01d1e5b08f29">llvm::SmallVectorImpl::reserve</a></div><div class="ttdeci">void reserve(size_type N)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00667">SmallVector.h:667</a></div></div>
<div class="ttc" id="anamespacellvm_1_1X86AS_html_aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730"><div class="ttname"><a href="namespacellvm_1_1X86AS.html#aea2591d7d017866934bcf72ee3dc8a31ae6c7f069a983c84ea52c71b384ad2730">llvm::X86AS::GS</a></div><div class="ttdeci">@ GS</div><div class="ttdef"><b>Definition:</b> <a href="X86_8h_source.html#l00200">X86.h:200</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_aedfa75f0c85c4aa85b257f066fbea57caf2b592edf18170e7aff4e8f3bae3360c"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57caf2b592edf18170e7aff4e8f3bae3360c">llvm::GlobalValue::LinkOnceODRLinkage</a></div><div class="ttdeci">@ LinkOnceODRLinkage</div><div class="ttdoc">Same, but only replaced by something equivalent.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00051">GlobalValue.h:51</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_aa242d8ab89216c14beab812e07009b2a"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aa242d8ab89216c14beab812e07009b2a">llvm::GlobalValue::setVisibility</a></div><div class="ttdeci">void setVisibility(VisibilityTypes V)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00250">GlobalValue.h:250</a></div></div>
<div class="ttc" id="aInitializePasses_8h_html"><div class="ttname"><a href="InitializePasses_8h.html">InitializePasses.h</a></div></div>
<div class="ttc" id="aDebug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="aSetVector_8h_html"><div class="ttname"><a href="SetVector_8h.html">SetVector.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a396fcfee6914c76974b73c3d203da6a5"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">llvm::SmallVectorImpl::emplace_back</a></div><div class="ttdeci">reference emplace_back(ArgTypes &amp;&amp;... Args)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00941">SmallVector.h:941</a></div></div>
<div class="ttc" id="aFunctionImport_8cpp_html_aacd91428e0c3e7822839ebf79ea8db4e"><div class="ttname"><a href="FunctionImport_8cpp.html#aacd91428e0c3e7822839ebf79ea8db4e">ComputeImportForModule</a></div><div class="ttdeci">static void ComputeImportForModule(const GVSummaryMapTy &amp;DefinedGVSummaries, const ModuleSummaryIndex &amp;Index, StringRef ModName, FunctionImporter::ImportMapTy &amp;ImportList, StringMap&lt; FunctionImporter::ExportSetTy &gt; *ExportLists=nullptr)</div><div class="ttdoc">Given the list of globals defined in a module, compute the list of imports as well as the list of &quot;ex...</div><div class="ttdef"><b>Definition:</b> <a href="FunctionImport_8cpp_source.html#l00521">FunctionImport.cpp:521</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:25:59 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Transforms/InstCombine/InstCombineAndOrXor.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a72932e0778af28115095468f6286ff8.html">Transforms</a></li><li class="navelem"><a class="el" href="dir_99567d9c0c7f3685f25b19ecc341a865.html">InstCombine</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">InstCombineAndOrXor.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="InstCombineAndOrXor_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- InstCombineAndOrXor.cpp --------------------------------------------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This file implements the visitAnd, visitOr, and visitXor functions.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160; </div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstCombineInternal_8h.html">InstCombineInternal.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CmpInstAnalysis_8h.html">llvm/Analysis/CmpInstAnalysis.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstructionSimplify_8h.html">llvm/Analysis/InstructionSimplify.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ConstantRange_8h.html">llvm/IR/ConstantRange.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Intrinsics_8h.html">llvm/IR/Intrinsics.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PatternMatch_8h.html">llvm/IR/PatternMatch.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstCombiner_8h.html">llvm/Transforms/InstCombine/InstCombiner.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Transforms_2Utils_2Local_8h.html">llvm/Transforms/Utils/Local.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160; </div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="keyword">using namespace </span>PatternMatch;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160; </div>
<div class="line"><a name="l00025"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   25</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;instcombine&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">/// This is the complement of getICmpCode, which turns an opcode and two</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">/// operands into either a constant true or false, or a brand new ICmp</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">/// instruction. The sign is passed in to determine which kind of predicate to</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">/// use in the new icmp instruction.</span></div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#a5c7e4979ac460c21af594ebda068ee77">   31</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="InstCombineAndOrXor_8cpp.html#a5c7e4979ac460c21af594ebda068ee77">getNewICmpValue</a>(<span class="keywordtype">unsigned</span> Code, <span class="keywordtype">bool</span> Sign, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>,</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;                              <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> NewPred;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *TorF = <a class="code" href="namespacellvm.html#aff210c52130b5778e2ef75dd74778afb">getPredForICmpCode</a>(Code, Sign, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), NewPred))</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <span class="keywordflow">return</span> TorF;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(NewPred, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;}</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">/// This is the complement of getFCmpCode, which turns an opcode and two</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">/// operands into either a FCmp instruction, or a true/false constant.</span></div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#a325aa976ba1006c79a069b089a4b714d">   41</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="InstCombineAndOrXor_8cpp.html#a325aa976ba1006c79a069b089a4b714d">getFCmpValue</a>(<span class="keywordtype">unsigned</span> Code, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>,</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;                           <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">FCmpInst::Predicate</a> NewPred;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *TorF = <a class="code" href="namespacellvm.html#a071d237c0318d336cc84124ec3a8d037">getPredForFCmpCode</a>(Code, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), NewPred))</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keywordflow">return</span> TorF;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFCmp(NewPred, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;}</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">/// Transform BITWISE_OP(BSWAP(A),BSWAP(B)) or</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">/// BITWISE_OP(BSWAP(A), Constant) to BSWAP(BITWISE_OP(A, B))</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">/// \param I Binary operator to transform.</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">/// \return Pointer to node that must replace the original binary operator, or</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">///         null pointer if no transformation was made.</span></div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#aed3110e8dfc807586686091e1b17995d">   54</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="InstCombineAndOrXor_8cpp.html#aed3110e8dfc807586686091e1b17995d">SimplifyBSwap</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;                            <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isBitwiseLogicOp() &amp;&amp; <span class="stringliteral">&quot;Unexpected opcode for bswap simplifying&quot;</span>);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *OldLHS = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *OldRHS = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NewLHS;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(OldLHS, <a class="code" href="namespacellvm_1_1PatternMatch.html#a39d717dc10783ec7bd5a24111bd5b8a5">m_BSwap</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(NewLHS))))</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NewRHS;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160; </div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(OldRHS, <a class="code" href="namespacellvm_1_1PatternMatch.html#a39d717dc10783ec7bd5a24111bd5b8a5">m_BSwap</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(NewRHS)))) {</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="comment">// OP( BSWAP(x), BSWAP(y) ) -&gt; BSWAP( OP(x, y) )</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keywordflow">if</span> (!OldLHS-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp; !OldRHS-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="comment">// NewRHS initialized by the matcher.</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(OldRHS, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))) {</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="comment">// OP( BSWAP(x), CONSTANT ) -&gt; BSWAP( OP(x, BSWAP(CONSTANT) ) )</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="keywordflow">if</span> (!OldLHS-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    NewRHS = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType(), <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;byteSwap());</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *BinOp = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode(), NewLHS, NewRHS);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">Intrinsic::getDeclaration</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getModule(), Intrinsic::bswap,</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                                          <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType());</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, BinOp);</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;}</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">/// Emit a computation of: (V &gt;= Lo &amp;&amp; V &lt; Hi) if Inside is true, otherwise</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">/// (V &lt; Lo || V &gt;= Hi). This method expects that Lo &lt; Hi. IsSigned indicates</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">/// whether to treat V, Lo, and Hi as signed or not.</span></div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a33c929139a72254b75f7ebb9593af9a9">   90</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a33c929139a72254b75f7ebb9593af9a9">InstCombinerImpl::insertRangeTest</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;Lo,</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                                         <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;Hi, <span class="keywordtype">bool</span> <a class="code" href="ExpandLargeDivRem_8cpp.html#a49b2092a066cfbc24bc6925bdea9682a">isSigned</a>,</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                                         <span class="keywordtype">bool</span> Inside) {</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a class="code" href="ExpandLargeDivRem_8cpp.html#a49b2092a066cfbc24bc6925bdea9682a">isSigned</a> ? Lo.slt(Hi) : Lo.ult(Hi)) &amp;&amp;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;         <span class="stringliteral">&quot;Lo is not &lt; Hi in range emission code!&quot;</span>);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160; </div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="comment">// V &gt;= Min &amp;&amp; V &lt;  Hi --&gt; V &lt;  Hi</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="comment">// V &lt;  Min || V &gt;= Hi --&gt; V &gt;= Hi</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred = Inside ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a>;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="ExpandLargeDivRem_8cpp.html#a49b2092a066cfbc24bc6925bdea9682a">isSigned</a> ? Lo.isMinSignedValue() : Lo.isMinValue()) {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    Pred = <a class="code" href="ExpandLargeDivRem_8cpp.html#a49b2092a066cfbc24bc6925bdea9682a">isSigned</a> ? <a class="code" href="classllvm_1_1ICmpInst.html#a9d5f70171d811078c4d263811f13c121">ICmpInst::getSignedPredicate</a>(Pred) : Pred;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(Pred, V, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, Hi));</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  }</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="comment">// V &gt;= Lo &amp;&amp; V &lt;  Hi --&gt; V - Lo u&lt;  Hi - Lo</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="comment">// V &lt;  Lo || V &gt;= Hi --&gt; V - Lo u&gt;= Hi - Lo</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *VMinusLo =</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSub(V, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, Lo), V-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;.off&quot;</span>);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *HiMinusLo = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, Hi - Lo);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(Pred, VMinusLo, HiMinusLo);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;}</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">/// Classify (icmp eq (A &amp; B), C) and (icmp ne (A &amp; B), C) as matching patterns</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">/// that can be simplified.</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">/// One of A and B is considered the mask. The other is the value. This is</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">/// described as the &quot;AMask&quot; or &quot;BMask&quot; part of the enum. If the enum contains</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">/// only &quot;Mask&quot;, then both A and B can be considered masks. If A is the mask,</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">/// then it was proven that (A &amp; C) == C. This is trivial if C == A or C == 0.</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">/// If both A and C are constants, this proof is also easy.</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">/// For the following explanations, we assume that A is the mask.</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">/// &quot;AllOnes&quot; declares that the comparison is true only if (A &amp; B) == A or all</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">/// bits of A are set in B.</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">///   Example: (icmp eq (A &amp; 3), 3) -&gt; AMask_AllOnes</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">/// &quot;AllZeros&quot; declares that the comparison is true only if (A &amp; B) == 0 or all</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">/// bits of A are cleared in B.</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">///   Example: (icmp eq (A &amp; 3), 0) -&gt; Mask_AllZeroes</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">/// &quot;Mixed&quot; declares that (A &amp; B) == C and C might or might not contain any</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">/// number of one bits and zero bits.</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">///   Example: (icmp eq (A &amp; 3), 1) -&gt; AMask_Mixed</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">/// &quot;Not&quot; means that in above descriptions &quot;==&quot; should be replaced by &quot;!=&quot;.</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">///   Example: (icmp ne (A &amp; 3), 3) -&gt; AMask_NotAllOnes</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">/// If the mask A contains a single bit, then the following is equivalent:</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">///    (icmp eq (A &amp; B), A) equals (icmp ne (A &amp; B), 0)</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">///    (icmp ne (A &amp; B), A) equals (icmp eq (A &amp; B), 0)</span></div>
<div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1">  141</a></span>&#160;<span class="comment"></span><span class="keyword">enum</span> <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1">MaskedICmpType</a> {</div>
<div class="line"><a name="l00142"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a7cc1609a568ad3b240cf86126370e24f">  142</a></span>&#160;  <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a7cc1609a568ad3b240cf86126370e24f">AMask_AllOnes</a>           =     1,</div>
<div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a54ee032f1a4a27e3066fbb88346cd49a">  143</a></span>&#160;  <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a54ee032f1a4a27e3066fbb88346cd49a">AMask_NotAllOnes</a>        =     2,</div>
<div class="line"><a name="l00144"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a4357ae5a8ec7cec4162a1f25c69558ff">  144</a></span>&#160;  <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a4357ae5a8ec7cec4162a1f25c69558ff">BMask_AllOnes</a>           =     4,</div>
<div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a2b00a345b6b0214f7aa5cbe8203aeb3e">  145</a></span>&#160;  <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a2b00a345b6b0214f7aa5cbe8203aeb3e">BMask_NotAllOnes</a>        =     8,</div>
<div class="line"><a name="l00146"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a37651a7acaf5871fb8a4d593749c06f4">  146</a></span>&#160;  <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a37651a7acaf5871fb8a4d593749c06f4">Mask_AllZeros</a>           =    16,</div>
<div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1ac7606c30ddb7a593051b6e5ad209f30c">  147</a></span>&#160;  <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1ac7606c30ddb7a593051b6e5ad209f30c">Mask_NotAllZeros</a>        =    32,</div>
<div class="line"><a name="l00148"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1ada8a0932439ca5f15218c4d7cd43d895">  148</a></span>&#160;  <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1ada8a0932439ca5f15218c4d7cd43d895">AMask_Mixed</a>             =    64,</div>
<div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a1ee37b18b82ef426e90d86a093d45334">  149</a></span>&#160;  <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a1ee37b18b82ef426e90d86a093d45334">AMask_NotMixed</a>          =   128,</div>
<div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a3f5a9337c05ff64ea433ed2d4e9d49d5">  150</a></span>&#160;  <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a3f5a9337c05ff64ea433ed2d4e9d49d5">BMask_Mixed</a>             =   256,</div>
<div class="line"><a name="l00151"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a10e63e798489e9c5ad2dc2c5ed98ac10">  151</a></span>&#160;  <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a10e63e798489e9c5ad2dc2c5ed98ac10">BMask_NotMixed</a>          =   512</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;};</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">/// Return the set of patterns (from MaskedICmpType) that (icmp SCC (A &amp; B), C)</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">/// satisfies.</span></div>
<div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#a39257c6c73db3440e6d05b9eec5999a0">  156</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="InstCombineAndOrXor_8cpp.html#a39257c6c73db3440e6d05b9eec5999a0">getMaskedICmpType</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *A, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>,</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                                  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred) {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *ConstA = <span class="keyword">nullptr</span>, *ConstB = <span class="keyword">nullptr</span>, *ConstC = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(A, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(ConstA));</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(ConstB));</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(ConstC));</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="keywordtype">bool</span> IsEq = (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <span class="keywordtype">bool</span> IsAPow2 = ConstA &amp;&amp; ConstA-&gt;<a class="code" href="classllvm_1_1APInt.html#ad1b0513de876d1c85cf6268ca21b2c86">isPowerOf2</a>();</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="keywordtype">bool</span> IsBPow2 = ConstB &amp;&amp; ConstB-&gt;isPowerOf2();</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="keywordtype">unsigned</span> MaskVal = 0;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="keywordflow">if</span> (ConstC &amp;&amp; ConstC-&gt;isZero()) {</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="comment">// if C is zero, then both A and B qualify as mask</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    MaskVal |= (IsEq ? (<a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a37651a7acaf5871fb8a4d593749c06f4">Mask_AllZeros</a> | <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1ada8a0932439ca5f15218c4d7cd43d895">AMask_Mixed</a> | <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a3f5a9337c05ff64ea433ed2d4e9d49d5">BMask_Mixed</a>)</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                     : (<a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1ac7606c30ddb7a593051b6e5ad209f30c">Mask_NotAllZeros</a> | <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a1ee37b18b82ef426e90d86a093d45334">AMask_NotMixed</a> | <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a10e63e798489e9c5ad2dc2c5ed98ac10">BMask_NotMixed</a>));</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">if</span> (IsAPow2)</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      MaskVal |= (IsEq ? (<a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a54ee032f1a4a27e3066fbb88346cd49a">AMask_NotAllOnes</a> | <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a1ee37b18b82ef426e90d86a093d45334">AMask_NotMixed</a>)</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                       : (<a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a7cc1609a568ad3b240cf86126370e24f">AMask_AllOnes</a> | <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1ada8a0932439ca5f15218c4d7cd43d895">AMask_Mixed</a>));</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordflow">if</span> (IsBPow2)</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      MaskVal |= (IsEq ? (<a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a2b00a345b6b0214f7aa5cbe8203aeb3e">BMask_NotAllOnes</a> | <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a10e63e798489e9c5ad2dc2c5ed98ac10">BMask_NotMixed</a>)</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                       : (<a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a4357ae5a8ec7cec4162a1f25c69558ff">BMask_AllOnes</a> | <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a3f5a9337c05ff64ea433ed2d4e9d49d5">BMask_Mixed</a>));</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">return</span> MaskVal;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  }</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160; </div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <span class="keywordflow">if</span> (A == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    MaskVal |= (IsEq ? (<a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a7cc1609a568ad3b240cf86126370e24f">AMask_AllOnes</a> | <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1ada8a0932439ca5f15218c4d7cd43d895">AMask_Mixed</a>)</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                     : (<a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a54ee032f1a4a27e3066fbb88346cd49a">AMask_NotAllOnes</a> | <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a1ee37b18b82ef426e90d86a093d45334">AMask_NotMixed</a>));</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordflow">if</span> (IsAPow2)</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      MaskVal |= (IsEq ? (<a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1ac7606c30ddb7a593051b6e5ad209f30c">Mask_NotAllZeros</a> | <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a1ee37b18b82ef426e90d86a093d45334">AMask_NotMixed</a>)</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                       : (<a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a37651a7acaf5871fb8a4d593749c06f4">Mask_AllZeros</a> | <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1ada8a0932439ca5f15218c4d7cd43d895">AMask_Mixed</a>));</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ConstA &amp;&amp; ConstC &amp;&amp; ConstC-&gt;<a class="code" href="classllvm_1_1APInt.html#acfae9bdee6027ffa8ffe244cc22e3a76">isSubsetOf</a>(*ConstA)) {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    MaskVal |= (IsEq ? <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1ada8a0932439ca5f15218c4d7cd43d895">AMask_Mixed</a> : <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a1ee37b18b82ef426e90d86a093d45334">AMask_NotMixed</a>);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  }</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160; </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    MaskVal |= (IsEq ? (<a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a4357ae5a8ec7cec4162a1f25c69558ff">BMask_AllOnes</a> | <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a3f5a9337c05ff64ea433ed2d4e9d49d5">BMask_Mixed</a>)</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                     : (<a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a2b00a345b6b0214f7aa5cbe8203aeb3e">BMask_NotAllOnes</a> | <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a10e63e798489e9c5ad2dc2c5ed98ac10">BMask_NotMixed</a>));</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordflow">if</span> (IsBPow2)</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      MaskVal |= (IsEq ? (<a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1ac7606c30ddb7a593051b6e5ad209f30c">Mask_NotAllZeros</a> | <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a10e63e798489e9c5ad2dc2c5ed98ac10">BMask_NotMixed</a>)</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                       : (<a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a37651a7acaf5871fb8a4d593749c06f4">Mask_AllZeros</a> | <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a3f5a9337c05ff64ea433ed2d4e9d49d5">BMask_Mixed</a>));</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ConstB &amp;&amp; ConstC &amp;&amp; ConstC-&gt;isSubsetOf(*ConstB)) {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    MaskVal |= (IsEq ? <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a3f5a9337c05ff64ea433ed2d4e9d49d5">BMask_Mixed</a> : <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a10e63e798489e9c5ad2dc2c5ed98ac10">BMask_NotMixed</a>);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  }</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <span class="keywordflow">return</span> MaskVal;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;}</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment">/// Convert an analysis of a masked ICmp into its equivalent if all boolean</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">/// operations had the opposite sense. Since each &quot;NotXXX&quot; flag (recording !=)</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment">/// is adjacent to the corresponding normal flag (recording ==), this just</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment">/// involves swapping those bits over.</span></div>
<div class="line"><a name="l00206"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#a09c36c07a47775cef8f8e93d8090d919">  206</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="InstCombineAndOrXor_8cpp.html#a09c36c07a47775cef8f8e93d8090d919">conjugateICmpMask</a>(<span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>) {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <span class="keywordtype">unsigned</span> NewMask;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  NewMask = (<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> &amp; (<a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a7cc1609a568ad3b240cf86126370e24f">AMask_AllOnes</a> | <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a4357ae5a8ec7cec4162a1f25c69558ff">BMask_AllOnes</a> | <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a37651a7acaf5871fb8a4d593749c06f4">Mask_AllZeros</a> |</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                     <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1ada8a0932439ca5f15218c4d7cd43d895">AMask_Mixed</a> | <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a3f5a9337c05ff64ea433ed2d4e9d49d5">BMask_Mixed</a>))</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            &lt;&lt; 1;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160; </div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  NewMask |= (<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> &amp; (<a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a54ee032f1a4a27e3066fbb88346cd49a">AMask_NotAllOnes</a> | <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a2b00a345b6b0214f7aa5cbe8203aeb3e">BMask_NotAllOnes</a> | <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1ac7606c30ddb7a593051b6e5ad209f30c">Mask_NotAllZeros</a> |</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                      <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a1ee37b18b82ef426e90d86a093d45334">AMask_NotMixed</a> | <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a10e63e798489e9c5ad2dc2c5ed98ac10">BMask_NotMixed</a>))</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;             &gt;&gt; 1;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160; </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <span class="keywordflow">return</span> NewMask;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;}</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160; </div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">// Adapts the external decomposeBitTestICmp for local use.</span></div>
<div class="line"><a name="l00220"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#a1d1267ddd1fbc10bd31ab88ecb2109bd">  220</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#ad4d2f143e181b60a4f70d791bbcba8b3">decomposeBitTestICmp</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> &amp;Pred,</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                                 <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>) {</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#ad4d2f143e181b60a4f70d791bbcba8b3">llvm::decomposeBitTestICmp</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>))</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160; </div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType(), <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a> = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType(), 0);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;}</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">/// Handle (icmp(A &amp; B) ==/!= C) &amp;/| (icmp(A &amp; D) ==/!= E).</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment">/// Return the pattern classes (from MaskedICmpType) for the left hand side and</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">/// the right hand side as a pair.</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment">/// LHS and RHS are the left hand side and the right hand side ICmps and PredL</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">/// and PredR are their predicates, respectively.</span></div>
<div class="line"><a name="l00236"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#a8f2b734aaecf27ea6cc4b0c6c84d1ec2">  236</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> std::optional&lt;std::pair&lt;unsigned, unsigned&gt;&gt; <a class="code" href="InstCombineAndOrXor_8cpp.html#a8f2b734aaecf27ea6cc4b0c6c84d1ec2">getMaskedTypeForICmpPair</a>(</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;A, <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>,</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> &amp;PredL, <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> &amp;PredR) {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="comment">// Don&#39;t allow pointers. Splat vectors are fine.</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;getOperand(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a34ee40bb2f4f5ece47ef19e5f1f57e3c">isIntOrIntVectorTy</a>() ||</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      !<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;getOperand(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a34ee40bb2f4f5ece47ef19e5f1f57e3c">isIntOrIntVectorTy</a>())</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160; </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="comment">// Here comes the tricky part:</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <span class="comment">// LHS might be of the form L11 &amp; L12 == X, X == L21 &amp; L22,</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="comment">// and L11 &amp; L12 == L21 &amp; L22. The same goes for RHS.</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="comment">// Now we must find those components L** and R**, that are equal, so</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="comment">// that we can extract the parameters A, B, C, D, and E for the canonical</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="comment">// above.</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *L1 = <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;getOperand(0);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="lib_2Target_2ARM_2README_8txt.html#adefbb946b174533d5eb8db503b1f4ffa">L2</a> = <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;getOperand(1);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *L11, *L12, *L21, *L22;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="comment">// Check whether the icmp can be decomposed into a bit test.</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ad4d2f143e181b60a4f70d791bbcba8b3">decomposeBitTestICmp</a>(L1, <a class="code" href="lib_2Target_2ARM_2README_8txt.html#adefbb946b174533d5eb8db503b1f4ffa">L2</a>, PredL, L11, L12, <a class="code" href="lib_2Target_2ARM_2README_8txt.html#adefbb946b174533d5eb8db503b1f4ffa">L2</a>)) {</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    L21 = L22 = L1 = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="comment">// Look for ANDs in the LHS icmp.</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(L1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(L11), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(L12)))) {</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      <span class="comment">// Any icmp can be viewed as being trivially masked; if it allows us to</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      <span class="comment">// remove one, it&#39;s worth it.</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      L11 = L1;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      L12 = <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">Constant::getAllOnesValue</a>(L1-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    }</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#adefbb946b174533d5eb8db503b1f4ffa">L2</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(L21), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(L22)))) {</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      L21 = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#adefbb946b174533d5eb8db503b1f4ffa">L2</a>;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      L22 = <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">Constant::getAllOnesValue</a>(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#adefbb946b174533d5eb8db503b1f4ffa">L2</a>-&gt;getType());</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    }</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  }</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="comment">// Bail if LHS was a icmp that can&#39;t be decomposed into an equality.</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1ICmpInst.html#aaaeded5d0cab77f531b294638459aca5">ICmpInst::isEquality</a>(PredL))</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160; </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *R1 = <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;getOperand(0);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="MathExtras_8h.html#a9211f62d8e1e6de999eaa63ec0f6ae02">R2</a> = <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;getOperand(1);</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *R11, *R12;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <span class="keywordtype">bool</span> Ok = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ad4d2f143e181b60a4f70d791bbcba8b3">decomposeBitTestICmp</a>(R1, <a class="code" href="MathExtras_8h.html#a9211f62d8e1e6de999eaa63ec0f6ae02">R2</a>, PredR, R11, R12, <a class="code" href="MathExtras_8h.html#a9211f62d8e1e6de999eaa63ec0f6ae02">R2</a>)) {</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordflow">if</span> (R11 == L11 || R11 == L12 || R11 == L21 || R11 == L22) {</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      A = R11;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a> = R12;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (R12 == L11 || R12 == L12 || R12 == L21 || R12 == L22) {</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      A = R12;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a> = R11;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    }</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <a class="code" href="MathExtras_8h.html#a9211f62d8e1e6de999eaa63ec0f6ae02">R2</a>;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    R1 = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    Ok = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(R1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(R11), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(R12)))) {</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      <span class="comment">// As before, model no mask as a trivial mask if it&#39;ll let us do an</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      <span class="comment">// optimization.</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      R11 = R1;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      R12 = <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">Constant::getAllOnesValue</a>(R1-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    }</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160; </div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keywordflow">if</span> (R11 == L11 || R11 == L12 || R11 == L21 || R11 == L22) {</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      A = R11;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a> = R12;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <a class="code" href="MathExtras_8h.html#a9211f62d8e1e6de999eaa63ec0f6ae02">R2</a>;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      Ok = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (R12 == L11 || R12 == L12 || R12 == L21 || R12 == L22) {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      A = R12;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a> = R11;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <a class="code" href="MathExtras_8h.html#a9211f62d8e1e6de999eaa63ec0f6ae02">R2</a>;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      Ok = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  }</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160; </div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="comment">// Bail if RHS was a icmp that can&#39;t be decomposed into an equality.</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1ICmpInst.html#aaaeded5d0cab77f531b294638459aca5">ICmpInst::isEquality</a>(PredR))</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160; </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <span class="comment">// Look for ANDs on the right side of the RHS icmp.</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <span class="keywordflow">if</span> (!Ok) {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="MathExtras_8h.html#a9211f62d8e1e6de999eaa63ec0f6ae02">R2</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(R11), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(R12)))) {</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      R11 = <a class="code" href="MathExtras_8h.html#a9211f62d8e1e6de999eaa63ec0f6ae02">R2</a>;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      R12 = <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">Constant::getAllOnesValue</a>(<a class="code" href="MathExtras_8h.html#a9211f62d8e1e6de999eaa63ec0f6ae02">R2</a>-&gt;getType());</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    }</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160; </div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordflow">if</span> (R11 == L11 || R11 == L12 || R11 == L21 || R11 == L22) {</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      A = R11;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a> = R12;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = R1;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      Ok = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (R12 == L11 || R12 == L12 || R12 == L21 || R12 == L22) {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      A = R12;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a> = R11;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = R1;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      Ok = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    }</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160; </div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Ok &amp;&amp; <span class="stringliteral">&quot;Failed to find AND on the right side of the RHS icmp.&quot;</span>);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  }</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160; </div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <span class="keywordflow">if</span> (L11 == A) {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> = L12;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#adefbb946b174533d5eb8db503b1f4ffa">L2</a>;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (L12 == A) {</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> = L11;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#adefbb946b174533d5eb8db503b1f4ffa">L2</a>;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (L21 == A) {</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> = L22;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = L1;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (L22 == A) {</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> = L21;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = L1;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  }</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160; </div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <span class="keywordtype">unsigned</span> LeftType = <a class="code" href="InstCombineAndOrXor_8cpp.html#a39257c6c73db3440e6d05b9eec5999a0">getMaskedICmpType</a>(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, PredL);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="keywordtype">unsigned</span> RightType = <a class="code" href="InstCombineAndOrXor_8cpp.html#a39257c6c73db3440e6d05b9eec5999a0">getMaskedICmpType</a>(A, <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, PredR);</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="keywordflow">return</span> std::optional&lt;std::pair&lt;unsigned, unsigned&gt;&gt;(</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;      std::make_pair(LeftType, RightType));</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;}</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="comment">/// Try to fold (icmp(A &amp; B) ==/!= C) &amp;/| (icmp(A &amp; D) ==/!= E) into a single</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment">/// (icmp(A &amp; X) ==/!= Y), where the left-hand side is of type Mask_NotAllZeros</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="comment">/// and the right hand side is of type BMask_Mixed. For example,</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="comment">/// (icmp (A &amp; 12) != 0) &amp; (icmp (A &amp; 15) == 8) -&gt; (icmp (A &amp; 15) == 8).</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment">/// Also used for logical and/or, must be poison safe.</span></div>
<div class="line"><a name="l00366"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#a41e8745b994de6cc84c9245722bc1a3b">  366</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="InstCombineAndOrXor_8cpp.html#a41e8745b994de6cc84c9245722bc1a3b">foldLogOpOfMaskedICmps_NotAllZeros_BMask_Mixed</a>(</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <span class="keywordtype">bool</span> IsAnd, <a class="code" href="classllvm_1_1Value.html">Value</a> *A, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>,</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> PredL, <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> PredR,</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <span class="comment">// We are given the canonical form:</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <span class="comment">//   (icmp ne (A &amp; B), 0) &amp; (icmp eq (A &amp; D), E).</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <span class="comment">// where D &amp; E == E.</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <span class="comment">// If IsAnd is false, we get it in negated form:</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <span class="comment">//   (icmp eq (A &amp; B), 0) | (icmp ne (A &amp; D), E) -&gt;</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <span class="comment">//      !((icmp ne (A &amp; B), 0) &amp; (icmp eq (A &amp; D), E)).</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <span class="comment">// We currently handle the case of B, C, D, E are constant.</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *BCst, *CCst, *DCst, *OrigECst;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(BCst)) || !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(CCst)) ||</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;      !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(DCst)) || !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(OrigECst)))</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160; </div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> NewCC = IsAnd ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <span class="comment">// Update E to the canonical form when D is a power of two and RHS is</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="comment">// canonicalized as,</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <span class="comment">// (icmp ne (A &amp; D), 0) -&gt; (icmp eq (A &amp; D), D) or</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="comment">// (icmp ne (A &amp; D), D) -&gt; (icmp eq (A &amp; D), 0).</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> ECst = *OrigECst;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <span class="keywordflow">if</span> (PredR != NewCC)</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    ECst ^= *DCst;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160; </div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <span class="comment">// If B or D is zero, skip because if LHS or RHS can be trivially folded by</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="comment">// other folding rules and this pattern won&#39;t apply any more.</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <span class="keywordflow">if</span> (*BCst == 0 || *DCst == 0)</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160; </div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="comment">// If B and D don&#39;t intersect, ie. (B &amp; D) == 0, no folding because we can&#39;t</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <span class="comment">// deduce anything from it.</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="comment">// For example,</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <span class="comment">// (icmp ne (A &amp; 12), 0) &amp; (icmp eq (A &amp; 3), 1) -&gt; no folding.</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  <span class="keywordflow">if</span> ((*BCst &amp; *DCst) == 0)</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160; </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <span class="comment">// If the following two conditions are met:</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <span class="comment">// 1. mask B covers only a single bit that&#39;s not covered by mask D, that is,</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <span class="comment">// (B &amp; (B ^ D)) is a power of 2 (in other words, B minus the intersection of</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="comment">// B and D has only one bit set) and,</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <span class="comment">// 2. RHS (and E) indicates that the rest of B&#39;s bits are zero (in other</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <span class="comment">// words, the intersection of B and D is zero), that is, ((B &amp; D) &amp; E) == 0</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <span class="comment">// then that single bit in B must be one and thus the whole expression can be</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="comment">// folded to</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <span class="comment">//   (A &amp; (B | D)) == (B &amp; (B ^ D)) | E.</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="comment">// For example,</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <span class="comment">// (icmp ne (A &amp; 12), 0) &amp; (icmp eq (A &amp; 7), 1) -&gt; (icmp eq (A &amp; 15), 9)</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <span class="comment">// (icmp ne (A &amp; 15), 0) &amp; (icmp eq (A &amp; 7), 0) -&gt; (icmp eq (A &amp; 15), 8)</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  <span class="keywordflow">if</span> ((((*BCst &amp; *DCst) &amp; ECst) == 0) &amp;&amp;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      (*BCst &amp; (*BCst ^ *DCst)).isPowerOf2()) {</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> BorD = *BCst | *DCst;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> BandBxorDorE = (*BCst &amp; (*BCst ^ *DCst)) | ECst;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewMask = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(A-&gt;getType(), BorD);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewMaskedValue = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(A-&gt;getType(), BandBxorDorE);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewAnd = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(A, NewMask);</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(NewCC, NewAnd, NewMaskedValue);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  }</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160; </div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <span class="keyword">auto</span> IsSubSetOrEqual = [](<span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *C2) {</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keywordflow">return</span> (*<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a> &amp; *C2) == *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  };</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <span class="keyword">auto</span> IsSuperSetOrEqual = [](<span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *C2) {</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="keywordflow">return</span> (*<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a> &amp; *C2) == *C2;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  };</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160; </div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  <span class="comment">// In the following, we consider only the cases where B is a superset of D, B</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  <span class="comment">// is a subset of D, or B == D because otherwise there&#39;s at least one bit</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  <span class="comment">// covered by B but not D, in which case we can&#39;t deduce much from it, so</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <span class="comment">// no folding (aside from the single must-be-one bit case right above.)</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <span class="comment">// For example,</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <span class="comment">// (icmp ne (A &amp; 14), 0) &amp; (icmp eq (A &amp; 3), 1) -&gt; no folding.</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <span class="keywordflow">if</span> (!IsSubSetOrEqual(BCst, DCst) &amp;&amp; !IsSuperSetOrEqual(BCst, DCst))</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160; </div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <span class="comment">// At this point, either B is a superset of D, B is a subset of D or B == D.</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160; </div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  <span class="comment">// If E is zero, if B is a subset of (or equal to) D, LHS and RHS contradict</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <span class="comment">// and the whole expression becomes false (or true if negated), otherwise, no</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  <span class="comment">// folding.</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <span class="comment">// For example,</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  <span class="comment">// (icmp ne (A &amp; 3), 0) &amp; (icmp eq (A &amp; 7), 0) -&gt; false.</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  <span class="comment">// (icmp ne (A &amp; 15), 0) &amp; (icmp eq (A &amp; 3), 0) -&gt; no folding.</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  <span class="keywordflow">if</span> (ECst.isZero()) {</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="keywordflow">if</span> (IsSubSetOrEqual(BCst, DCst))</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), !IsAnd);</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  }</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160; </div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <span class="comment">// At this point, B, D, E aren&#39;t zero and (B &amp; D) == B, (B &amp; D) == D or B ==</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <span class="comment">// D. If B is a superset of (or equal to) D, since E is not zero, LHS is</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  <span class="comment">// subsumed by RHS (RHS implies LHS.) So the whole expression becomes</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  <span class="comment">// RHS. For example,</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <span class="comment">// (icmp ne (A &amp; 255), 0) &amp; (icmp eq (A &amp; 15), 8) -&gt; (icmp eq (A &amp; 15), 8).</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  <span class="comment">// (icmp ne (A &amp; 15), 0) &amp; (icmp eq (A &amp; 15), 8) -&gt; (icmp eq (A &amp; 15), 8).</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  <span class="keywordflow">if</span> (IsSuperSetOrEqual(BCst, DCst))</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  <span class="comment">// Otherwise, B is a subset of D. If B and E have a common bit set,</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  <span class="comment">// ie. (B &amp; E) != 0, then LHS is subsumed by RHS. For example.</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  <span class="comment">// (icmp ne (A &amp; 12), 0) &amp; (icmp eq (A &amp; 15), 8) -&gt; (icmp eq (A &amp; 15), 8).</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IsSubSetOrEqual(BCst, DCst) &amp;&amp; <span class="stringliteral">&quot;Precondition due to above code&quot;</span>);</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  <span class="keywordflow">if</span> ((*BCst &amp; ECst) != 0)</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <span class="comment">// Otherwise, LHS and RHS contradict and the whole expression becomes false</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <span class="comment">// (or true if negated.) For example,</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  <span class="comment">// (icmp ne (A &amp; 7), 0) &amp; (icmp eq (A &amp; 15), 8) -&gt; false.</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  <span class="comment">// (icmp ne (A &amp; 6), 0) &amp; (icmp eq (A &amp; 15), 8) -&gt; false.</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), !IsAnd);</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;}</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment">/// Try to fold (icmp(A &amp; B) ==/!= 0) &amp;/| (icmp(A &amp; D) ==/!= E) into a single</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment">/// (icmp(A &amp; X) ==/!= Y), where the left-hand side and the right hand side</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment">/// aren&#39;t of the common mask pattern type.</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment">/// Also used for logical and/or, must be poison safe.</span></div>
<div class="line"><a name="l00488"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#ae9d0de0ffc23e4d5ca0a744d213e8439">  488</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="InstCombineAndOrXor_8cpp.html#ae9d0de0ffc23e4d5ca0a744d213e8439">foldLogOpOfMaskedICmpsAsymmetric</a>(</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <span class="keywordtype">bool</span> IsAnd, <a class="code" href="classllvm_1_1Value.html">Value</a> *A, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>,</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> PredL, <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> PredR,</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keywordtype">unsigned</span> LHSMask, <span class="keywordtype">unsigned</span> RHSMask, <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1ICmpInst.html#aaaeded5d0cab77f531b294638459aca5">ICmpInst::isEquality</a>(PredL) &amp;&amp; <a class="code" href="classllvm_1_1ICmpInst.html#aaaeded5d0cab77f531b294638459aca5">ICmpInst::isEquality</a>(PredR) &amp;&amp;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;         <span class="stringliteral">&quot;Expected equality predicates for masked type of icmps.&quot;</span>);</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  <span class="comment">// Handle Mask_NotAllZeros-BMask_Mixed cases.</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <span class="comment">// (icmp ne/eq (A &amp; B), C) &amp;/| (icmp eq/ne (A &amp; D), E), or</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  <span class="comment">// (icmp eq/ne (A &amp; B), C) &amp;/| (icmp ne/eq (A &amp; D), E)</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  <span class="comment">//    which gets swapped to</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  <span class="comment">//    (icmp ne/eq (A &amp; D), E) &amp;/| (icmp eq/ne (A &amp; B), C).</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  <span class="keywordflow">if</span> (!IsAnd) {</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    LHSMask = <a class="code" href="InstCombineAndOrXor_8cpp.html#a09c36c07a47775cef8f8e93d8090d919">conjugateICmpMask</a>(LHSMask);</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    RHSMask = <a class="code" href="InstCombineAndOrXor_8cpp.html#a09c36c07a47775cef8f8e93d8090d919">conjugateICmpMask</a>(RHSMask);</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  }</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  <span class="keywordflow">if</span> ((LHSMask &amp; <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1ac7606c30ddb7a593051b6e5ad209f30c">Mask_NotAllZeros</a>) &amp;&amp; (RHSMask &amp; <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a3f5a9337c05ff64ea433ed2d4e9d49d5">BMask_Mixed</a>)) {</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="InstCombineAndOrXor_8cpp.html#a41e8745b994de6cc84c9245722bc1a3b">foldLogOpOfMaskedICmps_NotAllZeros_BMask_Mixed</a>(</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, IsAnd, A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>,</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;            PredL, PredR, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>)) {</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;      <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    }</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((LHSMask &amp; <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a3f5a9337c05ff64ea433ed2d4e9d49d5">BMask_Mixed</a>) &amp;&amp; (RHSMask &amp; <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1ac7606c30ddb7a593051b6e5ad209f30c">Mask_NotAllZeros</a>)) {</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="InstCombineAndOrXor_8cpp.html#a41e8745b994de6cc84c9245722bc1a3b">foldLogOpOfMaskedICmps_NotAllZeros_BMask_Mixed</a>(</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;            <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, IsAnd, A, <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>,</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;            PredR, PredL, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>)) {</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;      <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    }</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  }</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;}</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment">/// Try to fold (icmp(A &amp; B) ==/!= C) &amp;/| (icmp(A &amp; D) ==/!= E)</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="comment">/// into a single (icmp(A &amp; X) ==/!= Y).</span></div>
<div class="line"><a name="l00521"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#a6dc6439ff11aa90e3d267d4e0de33e0e">  521</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="InstCombineAndOrXor_8cpp.html#a6dc6439ff11aa90e3d267d4e0de33e0e">foldLogOpOfMaskedICmps</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <span class="keywordtype">bool</span> IsAnd,</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                                     <span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1SystemZII.html#aa317b5cb849b283c734d16de54db29b9af491d0ac44efff3d6022cfdaefeccec6">IsLogical</a>,</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                                     <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *A = <span class="keyword">nullptr</span>, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> = <span class="keyword">nullptr</span>, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <span class="keyword">nullptr</span>, *<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a> = <span class="keyword">nullptr</span>, *<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> PredL = <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;getPredicate(), PredR = <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;getPredicate();</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  std::optional&lt;std::pair&lt;unsigned, unsigned&gt;&gt; MaskPair =</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      <a class="code" href="InstCombineAndOrXor_8cpp.html#a8f2b734aaecf27ea6cc4b0c6c84d1ec2">getMaskedTypeForICmpPair</a>(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, PredL, PredR);</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  <span class="keywordflow">if</span> (!MaskPair)</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1ICmpInst.html#aaaeded5d0cab77f531b294638459aca5">ICmpInst::isEquality</a>(PredL) &amp;&amp; <a class="code" href="classllvm_1_1ICmpInst.html#aaaeded5d0cab77f531b294638459aca5">ICmpInst::isEquality</a>(PredR) &amp;&amp;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;         <span class="stringliteral">&quot;Expected equality predicates for masked type of icmps.&quot;</span>);</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  <span class="keywordtype">unsigned</span> LHSMask = MaskPair-&gt;first;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  <span class="keywordtype">unsigned</span> RHSMask = MaskPair-&gt;second;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = LHSMask &amp; RHSMask;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> == 0) {</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <span class="comment">// Even if the two sides don&#39;t share a common pattern, check if folding can</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="comment">// still happen.</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="InstCombineAndOrXor_8cpp.html#ae9d0de0ffc23e4d5ca0a744d213e8439">foldLogOpOfMaskedICmpsAsymmetric</a>(</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;            <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, IsAnd, A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, PredL, PredR, LHSMask, RHSMask,</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;            <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;      <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  }</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160; </div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  <span class="comment">// In full generality:</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  <span class="comment">//     (icmp (A &amp; B) Op C) | (icmp (A &amp; D) Op E)</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <span class="comment">// ==  ![ (icmp (A &amp; B) !Op C) &amp; (icmp (A &amp; D) !Op E) ]</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  <span class="comment">// If the latter can be converted into (icmp (A &amp; X) Op Y) then the former is</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  <span class="comment">// equivalent to (icmp (A &amp; X) !Op Y).</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  <span class="comment">// Therefore, we can pretend for the rest of this function that we&#39;re dealing</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <span class="comment">// with the conjunction, provided we flip the sense of any comparisons (both</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <span class="comment">// input and output).</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160; </div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  <span class="comment">// In most cases we&#39;re going to produce an EQ for the &quot;&amp;&amp;&quot; case.</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> NewCC = IsAnd ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <span class="keywordflow">if</span> (!IsAnd) {</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <span class="comment">// Convert the masking analysis into its equivalent with negated</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="comment">// comparisons.</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = <a class="code" href="InstCombineAndOrXor_8cpp.html#a09c36c07a47775cef8f8e93d8090d919">conjugateICmpMask</a>(<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  }</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160; </div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> &amp; <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a37651a7acaf5871fb8a4d593749c06f4">Mask_AllZeros</a>) {</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <span class="comment">// (icmp eq (A &amp; B), 0) &amp; (icmp eq (A &amp; D), 0)</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <span class="comment">// -&gt; (icmp eq (A &amp; (B|D)), 0)</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1SystemZII.html#aa317b5cb849b283c734d16de54db29b9af491d0ac44efff3d6022cfdaefeccec6">IsLogical</a> &amp;&amp; !<a class="code" href="namespacellvm.html#ab8a7ef433279aabf7f30fa5504a4d4ef">isGuaranteedNotToBeUndefOrPoison</a>(<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>))</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; <span class="comment">// TODO: Use freeze?</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewOr = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateOr(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>);</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewAnd = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(A, NewOr);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="comment">// We can&#39;t use C as zero because we might actually handle</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="comment">//   (icmp ne (A &amp; B), B) &amp; (icmp ne (A &amp; D), D)</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="comment">// with B and D, having a single bit set.</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Zero = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(A-&gt;getType());</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(NewCC, NewAnd, Zero);</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  }</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> &amp; <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a4357ae5a8ec7cec4162a1f25c69558ff">BMask_AllOnes</a>) {</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="comment">// (icmp eq (A &amp; B), B) &amp; (icmp eq (A &amp; D), D)</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="comment">// -&gt; (icmp eq (A &amp; (B|D)), (B|D))</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1SystemZII.html#aa317b5cb849b283c734d16de54db29b9af491d0ac44efff3d6022cfdaefeccec6">IsLogical</a> &amp;&amp; !<a class="code" href="namespacellvm.html#ab8a7ef433279aabf7f30fa5504a4d4ef">isGuaranteedNotToBeUndefOrPoison</a>(<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>))</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; <span class="comment">// TODO: Use freeze?</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewOr = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateOr(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>);</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewAnd = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(A, NewOr);</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(NewCC, NewAnd, NewOr);</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  }</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> &amp; <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a7cc1609a568ad3b240cf86126370e24f">AMask_AllOnes</a>) {</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="comment">// (icmp eq (A &amp; B), A) &amp; (icmp eq (A &amp; D), A)</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="comment">// -&gt; (icmp eq (A &amp; (B&amp;D)), A)</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1SystemZII.html#aa317b5cb849b283c734d16de54db29b9af491d0ac44efff3d6022cfdaefeccec6">IsLogical</a> &amp;&amp; !<a class="code" href="namespacellvm.html#ab8a7ef433279aabf7f30fa5504a4d4ef">isGuaranteedNotToBeUndefOrPoison</a>(<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>))</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; <span class="comment">// TODO: Use freeze?</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewAnd1 = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>);</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewAnd2 = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(A, NewAnd1);</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(NewCC, NewAnd2, A);</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  }</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160; </div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  <span class="comment">// Remaining cases assume at least that B and D are constant, and depend on</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  <span class="comment">// their actual values. This isn&#39;t strictly necessary, just a &quot;handle the</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <span class="comment">// easy cases for now&quot; decision.</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *ConstB, *ConstD;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(ConstB)) || !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(ConstD)))</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160; </div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> &amp; (<a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1ac7606c30ddb7a593051b6e5ad209f30c">Mask_NotAllZeros</a> | <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a2b00a345b6b0214f7aa5cbe8203aeb3e">BMask_NotAllOnes</a>)) {</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="comment">// (icmp ne (A &amp; B), 0) &amp; (icmp ne (A &amp; D), 0) and</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="comment">// (icmp ne (A &amp; B), B) &amp; (icmp ne (A &amp; D), D)</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <span class="comment">//     -&gt; (icmp ne (A &amp; B), 0) or (icmp ne (A &amp; D), 0)</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="comment">// Only valid if one of the masks is a superset of the other (check &quot;B&amp;D&quot; is</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="comment">// the same as either B or D).</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> NewMask = *ConstB &amp; *ConstD;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <span class="keywordflow">if</span> (NewMask == *ConstB)</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (NewMask == *ConstD)</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  }</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160; </div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> &amp; <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a54ee032f1a4a27e3066fbb88346cd49a">AMask_NotAllOnes</a>) {</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="comment">// (icmp ne (A &amp; B), B) &amp; (icmp ne (A &amp; D), D)</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="comment">//     -&gt; (icmp ne (A &amp; B), A) or (icmp ne (A &amp; D), A)</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <span class="comment">// Only valid if one of the masks is a superset of the other (check &quot;B|D&quot; is</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <span class="comment">// the same as either B or D).</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> NewMask = *ConstB | *ConstD;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <span class="keywordflow">if</span> (NewMask == *ConstB)</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (NewMask == *ConstD)</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  }</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160; </div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> &amp; (<a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a3f5a9337c05ff64ea433ed2d4e9d49d5">BMask_Mixed</a> | <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a10e63e798489e9c5ad2dc2c5ed98ac10">BMask_NotMixed</a>)) {</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="comment">// Mixed:</span></div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <span class="comment">// (icmp eq (A &amp; B), C) &amp; (icmp eq (A &amp; D), E)</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="comment">// We already know that B &amp; C == C &amp;&amp; D &amp; E == E.</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="comment">// If we can prove that (B &amp; D) &amp; (C ^ E) == 0, that is, the bits of</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="comment">// C and E, which are shared by both the mask B and the mask D, don&#39;t</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <span class="comment">// contradict, then we can transform to</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <span class="comment">// -&gt; (icmp eq (A &amp; (B|D)), (C|E))</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <span class="comment">// Currently, we only handle the case of B, C, D, and E being constant.</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="comment">// We can&#39;t simply use C and E because we might actually handle</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="comment">//   (icmp ne (A &amp; B), B) &amp; (icmp eq (A &amp; D), D)</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <span class="comment">// with B and D, having a single bit set.</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160; </div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="comment">// NotMixed:</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="comment">// (icmp ne (A &amp; B), C) &amp; (icmp ne (A &amp; D), E)</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <span class="comment">// -&gt; (icmp ne (A &amp; (B &amp; D)), (C &amp; E))</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <span class="comment">// Check the intersection (B &amp; D) for inequality.</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="comment">// Assume that (B &amp; D) == B || (B &amp; D) == D, i.e B/D is a subset of D/B</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <span class="comment">// and (B &amp; D) &amp; (C ^ E) == 0, bits of C and E, which are shared by both the</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <span class="comment">// B and the D, don&#39;t contradict.</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="comment">// Note that we can assume (~B &amp; C) == 0 &amp;&amp; (~D &amp; E) == 0, previous</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="comment">// operation should delete these icmps if it hadn&#39;t been met.</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160; </div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *OldConstC, *OldConstE;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(OldConstC)) || !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(OldConstE)))</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160; </div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <span class="keyword">auto</span> FoldBMixed = [&amp;](<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> <a class="code" href="RISCVRedundantCopyElimination_8cpp.html#a77c69067ae8279bc00ab8757731e90d7">CC</a>, <span class="keywordtype">bool</span> IsNot) -&gt; <a class="code" href="classllvm_1_1Value.html">Value</a> * {</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;      <a class="code" href="RISCVRedundantCopyElimination_8cpp.html#a77c69067ae8279bc00ab8757731e90d7">CC</a> = IsNot ? <a class="code" href="classllvm_1_1CmpInst.html#aa2a54b545d237ecfe450fd1292f7675e">CmpInst::getInversePredicate</a>(<a class="code" href="RISCVRedundantCopyElimination_8cpp.html#a77c69067ae8279bc00ab8757731e90d7">CC</a>) : <a class="code" href="RISCVRedundantCopyElimination_8cpp.html#a77c69067ae8279bc00ab8757731e90d7">CC</a>;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> ConstC = PredL != <a class="code" href="RISCVRedundantCopyElimination_8cpp.html#a77c69067ae8279bc00ab8757731e90d7">CC</a> ? *ConstB ^ *OldConstC : *OldConstC;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> ConstE = PredR != <a class="code" href="RISCVRedundantCopyElimination_8cpp.html#a77c69067ae8279bc00ab8757731e90d7">CC</a> ? *ConstD ^ *OldConstE : *OldConstE;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160; </div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;      <span class="keywordflow">if</span> (((*ConstB &amp; *ConstD) &amp; (ConstC ^ ConstE)).getBoolValue())</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        <span class="keywordflow">return</span> IsNot ? nullptr : <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), !IsAnd);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160; </div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;      <span class="keywordflow">if</span> (IsNot &amp;&amp; !ConstB-&gt;<a class="code" href="classllvm_1_1APInt.html#acfae9bdee6027ffa8ffe244cc22e3a76">isSubsetOf</a>(*ConstD) &amp;&amp; !ConstD-&gt;isSubsetOf(*ConstB))</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160; </div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> BD, CE;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;      <span class="keywordflow">if</span> (IsNot) {</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;        BD = *ConstB &amp; *ConstD;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        CE = ConstC &amp; ConstE;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        BD = *ConstB | *ConstD;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;        CE = ConstC | ConstE;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;      }</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NewAnd = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(A, BD);</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *CEVal = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(A-&gt;getType(), CE);</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(<a class="code" href="RISCVRedundantCopyElimination_8cpp.html#a77c69067ae8279bc00ab8757731e90d7">CC</a>, CEVal, NewAnd);</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    };</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160; </div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> &amp; <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a3f5a9337c05ff64ea433ed2d4e9d49d5">BMask_Mixed</a>)</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;      <span class="keywordflow">return</span> FoldBMixed(NewCC, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> &amp; <a class="code" href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a10e63e798489e9c5ad2dc2c5ed98ac10">BMask_NotMixed</a>) <span class="comment">// can be else also</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;      <span class="keywordflow">return</span> FoldBMixed(NewCC, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  }</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;}</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="comment">/// Try to fold a signed range checked with lower bound 0 to an unsigned icmp.</span></div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="comment">/// Example: (icmp sge x, 0) &amp; (icmp slt x, n) --&gt; icmp ult x, n</span></div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;<span class="comment">/// If \p Inverted is true then the check is for the inverted range, e.g.</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;<span class="comment">/// (icmp slt x, 0) | (icmp sgt x, n) --&gt; icmp ugt x, n</span></div>
<div class="line"><a name="l00691"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#aa4100f52d21246ec944e97fe1b64b124">  691</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#aa4100f52d21246ec944e97fe1b64b124">InstCombinerImpl::simplifyRangeCheck</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *Cmp0, <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *Cmp1,</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                                            <span class="keywordtype">bool</span> Inverted) {</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  <span class="comment">// Check the lower range comparison, e.g. x &gt;= 0</span></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  <span class="comment">// InstCombine already ensured that if there is a constant it&#39;s on the RHS.</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *RangeStart = dyn_cast&lt;ConstantInt&gt;(Cmp0-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1));</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  <span class="keywordflow">if</span> (!RangeStart)</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160; </div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred0 = (Inverted ? Cmp0-&gt;<a class="code" href="classllvm_1_1CmpInst.html#aa2a54b545d237ecfe450fd1292f7675e">getInversePredicate</a>() :</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;                               Cmp0-&gt;<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>());</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160; </div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  <span class="comment">// Accept x &gt; -1 or x &gt;= 0 (after potentially inverting the predicate).</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  <span class="keywordflow">if</span> (!((Pred0 == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a> &amp;&amp; RangeStart-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a13cc1f5d3225f4ec063520a747acec4c">isMinusOne</a>()) ||</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        (Pred0 == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a> &amp;&amp; RangeStart-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a882d55a6aa2028e1a5ad708b275334e0">isZero</a>())))</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160; </div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred1 = (Inverted ? Cmp1-&gt;<a class="code" href="classllvm_1_1CmpInst.html#aa2a54b545d237ecfe450fd1292f7675e">getInversePredicate</a>() :</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;                               Cmp1-&gt;<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>());</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160; </div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Input = Cmp0-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *RangeEnd;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  <span class="keywordflow">if</span> (Cmp1-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0) == Input) {</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <span class="comment">// For the upper range compare we have: icmp x, n</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    RangeEnd = Cmp1-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Cmp1-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1) == Input) {</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <span class="comment">// For the upper range compare we have: icmp n, x</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    RangeEnd = Cmp1-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    Pred1 = <a class="code" href="classllvm_1_1CmpInst.html#a49a2d8f483ea08a3d6ea75f90c640d76">ICmpInst::getSwappedPredicate</a>(Pred1);</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  }</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160; </div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  <span class="comment">// Check the upper range comparison, e.g. x &lt; n</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> NewPred;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <span class="keywordflow">switch</span> (Pred1) {</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>: NewPred = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba2751d6136a2819749dcef65dc19a4246">ICmpInst::ICMP_SLE</a>: NewPred = <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="keywordflow">default</span>: <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  }</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160; </div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  <span class="comment">// This simplification is only valid if the upper range is not negative.</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  <a class="code" href="structllvm_1_1KnownBits.html">KnownBits</a> Known = <a class="code" href="namespacellvm.html#aa1f8f0633edd8b9a1c5ec15bb9fc5640">computeKnownBits</a>(RangeEnd, <span class="comment">/*Depth=*/</span>0, Cmp1);</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  <span class="keywordflow">if</span> (!Known.<a class="code" href="structllvm_1_1KnownBits.html#a157efd68e8b4b838829cad165b1583f8">isNonNegative</a>())</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160; </div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  <span class="keywordflow">if</span> (Inverted)</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    NewPred = <a class="code" href="classllvm_1_1CmpInst.html#aa2a54b545d237ecfe450fd1292f7675e">ICmpInst::getInversePredicate</a>(NewPred);</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160; </div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(NewPred, Input, RangeEnd);</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;}</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160; </div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;<span class="comment">// Fold (iszero(A &amp; K1) | iszero(A &amp; K2)) -&gt; (A &amp; (K1 | K2)) != (K1 | K2)</span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="comment">// Fold (!iszero(A &amp; K1) &amp; !iszero(A &amp; K2)) -&gt; (A &amp; (K1 | K2)) == (K1 | K2)</span></div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *InstCombinerImpl::foldAndOrOfICmpsOfAndWithPow2(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>,</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;                                                       <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>,</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                                                       <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *CxtI,</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;                                                       <span class="keywordtype">bool</span> IsAnd,</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;                                                       <span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1SystemZII.html#aa317b5cb849b283c734d16de54db29b9af491d0ac44efff3d6022cfdaefeccec6">IsLogical</a>) {</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> Pred = IsAnd ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP_NE</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">CmpInst::ICMP_EQ</a>;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;getPredicate() != Pred || <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;getPredicate() != Pred)</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160; </div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;getOperand(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>()) ||</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;      !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;getOperand(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>()))</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160; </div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *L1, *<a class="code" href="lib_2Target_2ARM_2README_8txt.html#adefbb946b174533d5eb8db503b1f4ffa">L2</a>, *R1, *<a class="code" href="MathExtras_8h.html#a9211f62d8e1e6de999eaa63ec0f6ae02">R2</a>;</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;getOperand(0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(L1), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#adefbb946b174533d5eb8db503b1f4ffa">L2</a>))) &amp;&amp;</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;getOperand(0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(R1), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="MathExtras_8h.html#a9211f62d8e1e6de999eaa63ec0f6ae02">R2</a>)))) {</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    <span class="keywordflow">if</span> (L1 == <a class="code" href="MathExtras_8h.html#a9211f62d8e1e6de999eaa63ec0f6ae02">R2</a> || <a class="code" href="lib_2Target_2ARM_2README_8txt.html#adefbb946b174533d5eb8db503b1f4ffa">L2</a> == <a class="code" href="MathExtras_8h.html#a9211f62d8e1e6de999eaa63ec0f6ae02">R2</a>)</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;      <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(R1, <a class="code" href="MathExtras_8h.html#a9211f62d8e1e6de999eaa63ec0f6ae02">R2</a>);</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lib_2Target_2ARM_2README_8txt.html#adefbb946b174533d5eb8db503b1f4ffa">L2</a> == R1)</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;      <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(L1, <a class="code" href="lib_2Target_2ARM_2README_8txt.html#adefbb946b174533d5eb8db503b1f4ffa">L2</a>);</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160; </div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <span class="keywordflow">if</span> (L1 == R1 &amp;&amp;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        <a class="code" href="namespacellvm.html#a4036c3c75bcee1206cd199548b87f9ae">isKnownToBeAPowerOfTwo</a>(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#adefbb946b174533d5eb8db503b1f4ffa">L2</a>, <span class="keyword">false</span>, 0, CxtI) &amp;&amp;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;        <a class="code" href="namespacellvm.html#a4036c3c75bcee1206cd199548b87f9ae">isKnownToBeAPowerOfTwo</a>(<a class="code" href="MathExtras_8h.html#a9211f62d8e1e6de999eaa63ec0f6ae02">R2</a>, <span class="keyword">false</span>, 0, CxtI)) {</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      <span class="comment">// If this is a logical and/or, then we must prevent propagation of a</span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;      <span class="comment">// poison value from the RHS by inserting freeze.</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1SystemZII.html#aa317b5cb849b283c734d16de54db29b9af491d0ac44efff3d6022cfdaefeccec6">IsLogical</a>)</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        <a class="code" href="MathExtras_8h.html#a9211f62d8e1e6de999eaa63ec0f6ae02">R2</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFreeze(<a class="code" href="MathExtras_8h.html#a9211f62d8e1e6de999eaa63ec0f6ae02">R2</a>);</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateOr(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#adefbb946b174533d5eb8db503b1f4ffa">L2</a>, <a class="code" href="MathExtras_8h.html#a9211f62d8e1e6de999eaa63ec0f6ae02">R2</a>);</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Masked = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(L1, <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>);</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;      <span class="keyword">auto</span> NewPred = IsAnd ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">CmpInst::ICMP_EQ</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP_NE</a>;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(NewPred, Masked, <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>);</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    }</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  }</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160; </div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;}</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;<span class="comment">/// General pattern:</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;<span class="comment">///   X &amp; Y</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;<span class="comment">/// Where Y is checking that all the high bits (covered by a mask 4294967168)</span></div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;<span class="comment">/// are uniform, i.e.  %arg &amp; 4294967168  can be either  4294967168  or  0</span></div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;<span class="comment">/// Pattern can be one of:</span></div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;<span class="comment">///   %t = add        i32 %arg,    128</span></div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;<span class="comment">///   %r = icmp   ult i32 %t,      256</span></div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;<span class="comment">/// Or</span></div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;<span class="comment">///   %t0 = shl       i32 %arg,    24</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;<span class="comment">///   %t1 = ashr      i32 %t0,     24</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;<span class="comment">///   %r  = icmp  eq  i32 %t1,     %arg</span></div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="comment">/// Or</span></div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="comment">///   %t0 = trunc     i32 %arg  to i8</span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="comment">///   %t1 = sext      i8  %t0   to i32</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;<span class="comment">///   %r  = icmp  eq  i32 %t1,     %arg</span></div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;<span class="comment">/// This pattern is a signed truncation check.</span></div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;<span class="comment">/// And X is checking that some bit in that same mask is zero.</span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;<span class="comment">/// I.e. can be one of:</span></div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="comment">///   %r = icmp sgt i32   %arg,    -1</span></div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="comment">/// Or</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="comment">///   %t = and      i32   %arg,    2147483648</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="comment">///   %r = icmp eq  i32   %t,      0</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="comment">/// Since we are checking that all the bits in that mask are the same,</span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="comment">/// and a particular bit is zero, what we are really checking is that all the</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="comment">/// masked bits are zero.</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="comment">/// So this should be transformed to:</span></div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="comment">///   %r = icmp ult i32 %arg, 128</span></div>
<div class="line"><a name="l00812"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#a0c93fe8370899bc77907f9cb55f57c4b">  812</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="InstCombineAndOrXor_8cpp.html#a0c93fe8370899bc77907f9cb55f57c4b">foldSignedTruncationCheck</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *ICmp0, <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *ICmp1,</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;                                        <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;CxtI,</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;                                        <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CxtI.<a class="code" href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">getOpcode</a>() == Instruction::And);</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160; </div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  <span class="comment">// Match  icmp ult (add %arg, C01), C1   (C1 == C01 &lt;&lt; 1; powers of two)</span></div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  <span class="keyword">auto</span> tryToMatchSignedTruncationCheck = [](<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *ICmp, <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>,</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                                            <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;SignBitMask) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> Pred;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *I01, *I1; <span class="comment">// powers of two; I1 == I01 &lt;&lt; 1</span></div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <span class="keywordflow">if</span> (!(<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(ICmp,</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;                <a class="code" href="namespacellvm_1_1PatternMatch.html#a3fe9b3ddb71b9fb53d9fc74b3a0710bf">m_ICmp</a>(Pred, <a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#ad5e60756e331a97669d11b5c9d8691a2">m_Power2</a>(I01)), <a class="code" href="namespacellvm_1_1PatternMatch.html#ad5e60756e331a97669d11b5c9d8691a2">m_Power2</a>(I1))) &amp;&amp;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;          Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a> &amp;&amp; I1-&gt;ugt(*I01) &amp;&amp; I01-&gt;<a class="code" href="classllvm_1_1APInt.html#acb9c55b6986369948507ca5241b4e411">shl</a>(1) == *I1))</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    <span class="comment">// Which bit is the new sign bit as per the &#39;signed truncation&#39; pattern?</span></div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    SignBitMask = *I01;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;  };</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160; </div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;  <span class="comment">// One icmp needs to be &#39;signed truncation check&#39;.</span></div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  <span class="comment">// We need to match this first, else we will mismatch commutative cases.</span></div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *X1;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> HighestBit;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *OtherICmp;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;  <span class="keywordflow">if</span> (tryToMatchSignedTruncationCheck(ICmp1, X1, HighestBit))</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    OtherICmp = ICmp0;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tryToMatchSignedTruncationCheck(ICmp0, X1, HighestBit))</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    OtherICmp = ICmp1;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160; </div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(HighestBit.<a class="code" href="classllvm_1_1APInt.html#ad1b0513de876d1c85cf6268ca21b2c86">isPowerOf2</a>() &amp;&amp; <span class="stringliteral">&quot;expected to be power of two (non-zero)&quot;</span>);</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160; </div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  <span class="comment">// Try to match/decompose into:  icmp eq (X &amp; Mask), 0</span></div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  <span class="keyword">auto</span> tryToDecompose = [](<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *ICmp, <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>,</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;                           <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;UnsetBitsMask) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> Pred = ICmp-&gt;<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>();</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    <span class="comment">// Can it be decomposed into  icmp eq (X &amp; Mask), 0  ?</span></div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ad4d2f143e181b60a4f70d791bbcba8b3">llvm::decomposeBitTestICmp</a>(ICmp-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), ICmp-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1),</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;                                   Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, UnsetBitsMask,</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;                                   <span class="comment">/*LookThroughTrunc=*/</span><span class="keyword">false</span>) &amp;&amp;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;        Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>)</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <span class="comment">// Is it  icmp eq (X &amp; Mask), 0  already?</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>;</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(ICmp, <a class="code" href="namespacellvm_1_1PatternMatch.html#a3fe9b3ddb71b9fb53d9fc74b3a0710bf">m_ICmp</a>(Pred, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>())) &amp;&amp;</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>) {</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;      UnsetBitsMask = *<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>;</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    }</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  };</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160; </div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;  <span class="comment">// And the other icmp needs to be decomposable into a bit test.</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *X0;</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> UnsetBitsMask;</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  <span class="keywordflow">if</span> (!tryToDecompose(OtherICmp, X0, UnsetBitsMask))</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160; </div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!UnsetBitsMask.<a class="code" href="classllvm_1_1APInt.html#a49cd5939942c6665aba4cae8c220dff1">isZero</a>() &amp;&amp; <span class="stringliteral">&quot;empty mask makes no sense.&quot;</span>);</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160; </div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  <span class="comment">// Are they working on the same value?</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;  <span class="keywordflow">if</span> (X1 == X0) {</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <span class="comment">// Ok as is.</span></div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = X1;</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(X0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5b844aada27c4c6fdb87146ac458c0d8">m_Trunc</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(X1)))) {</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    UnsetBitsMask = UnsetBitsMask.<a class="code" href="classllvm_1_1APInt.html#a1dc76cc8bf703e6ada68bededcbb9573">zext</a>(X1-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>());</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = X1;</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;  } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160; </div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  <span class="comment">// So which bits should be uniform as per the &#39;signed truncation check&#39;?</span></div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  <span class="comment">// (all the bits starting with (i.e. including) HighestBit)</span></div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> SignBitsMask = ~(HighestBit - 1U);</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160; </div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  <span class="comment">// UnsetBitsMask must have some common bits with SignBitsMask,</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  <span class="keywordflow">if</span> (!UnsetBitsMask.<a class="code" href="classllvm_1_1APInt.html#a6da514c588b2668280a861a59bfc9fa5">intersects</a>(SignBitsMask))</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160; </div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  <span class="comment">// Does UnsetBitsMask contain any bits outside of SignBitsMask?</span></div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  <span class="keywordflow">if</span> (!UnsetBitsMask.<a class="code" href="classllvm_1_1APInt.html#acfae9bdee6027ffa8ffe244cc22e3a76">isSubsetOf</a>(SignBitsMask)) {</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> OtherHighestBit = (~UnsetBitsMask) + 1U;</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    <span class="keywordflow">if</span> (!OtherHighestBit.<a class="code" href="classllvm_1_1APInt.html#ad1b0513de876d1c85cf6268ca21b2c86">isPowerOf2</a>())</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    HighestBit = <a class="code" href="namespacellvm_1_1APIntOps.html#aa606171b17bdde9015fa656e226ca9e0">APIntOps::umin</a>(HighestBit, OtherHighestBit);</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  }</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;  <span class="comment">// Else, if it does not, then all is ok as-is.</span></div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160; </div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;  <span class="comment">// %r = icmp ult %X, SignBit</span></div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmpULT(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType(), HighestBit),</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;                               CxtI.<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;.simplified&quot;</span>);</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;}</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;<span class="comment">/// Fold (icmp eq ctpop(X) 1) | (icmp eq X 0) into (icmp ult ctpop(X) 2) and</span></div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;<span class="comment">/// fold (icmp ne ctpop(X) 1) &amp; (icmp ne X 0) into (icmp ugt ctpop(X) 1).</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;<span class="comment">/// Also used for logical and/or, must be poison safe.</span></div>
<div class="line"><a name="l00909"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#a01b718ba51f478d513417084e315ab50">  909</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="InstCombineAndOrXor_8cpp.html#a01b718ba51f478d513417084e315ab50">foldIsPowerOf2OrZero</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *Cmp0, <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *Cmp1, <span class="keywordtype">bool</span> IsAnd,</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;                                   <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> Pred0, Pred1;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Cmp0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a3fe9b3ddb71b9fb53d9fc74b3a0710bf">m_ICmp</a>(Pred0, m_Intrinsic&lt;Intrinsic::ctpop&gt;(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)),</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;                          <a class="code" href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">m_SpecificInt</a>(1))) ||</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;      !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Cmp1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a3fe9b3ddb71b9fb53d9fc74b3a0710bf">m_ICmp</a>(Pred1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a874d53817a4923de8e58af6b278c09b0">m_ZeroInt</a>())))</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160; </div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CtPop = Cmp0-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;  <span class="keywordflow">if</span> (IsAnd &amp;&amp; Pred0 == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a> &amp;&amp; Pred1 == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>)</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmpUGT(CtPop, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(CtPop-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), 1));</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;  <span class="keywordflow">if</span> (!IsAnd &amp;&amp; Pred0 == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a> &amp;&amp; Pred1 == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>)</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmpULT(CtPop, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(CtPop-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), 2));</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160; </div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;}</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;<span class="comment">/// Reduce a pair of compares that check if a value has exactly 1 bit set.</span></div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;<span class="comment">/// Also used for logical and/or, must be poison safe.</span></div>
<div class="line"><a name="l00929"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#aa4159fc490483f3aad3d0d98c55ac851">  929</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="InstCombineAndOrXor_8cpp.html#aa4159fc490483f3aad3d0d98c55ac851">foldIsPowerOf2</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *Cmp0, <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *Cmp1, <span class="keywordtype">bool</span> JoinedByAnd,</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;                             <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  <span class="comment">// Handle &#39;and&#39; / &#39;or&#39; commutation: make the equality check the first operand.</span></div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  <span class="keywordflow">if</span> (JoinedByAnd &amp;&amp; Cmp1-&gt;<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>)</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Cmp0, Cmp1);</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!JoinedByAnd &amp;&amp; Cmp1-&gt;<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>)</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Cmp0, Cmp1);</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160; </div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  <span class="comment">// (X != 0) &amp;&amp; (ctpop(X) u&lt; 2) --&gt; ctpop(X) == 1</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> Pred0, Pred1;</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;  <span class="keywordflow">if</span> (JoinedByAnd &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Cmp0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a3fe9b3ddb71b9fb53d9fc74b3a0710bf">m_ICmp</a>(Pred0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a874d53817a4923de8e58af6b278c09b0">m_ZeroInt</a>())) &amp;&amp;</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Cmp1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a3fe9b3ddb71b9fb53d9fc74b3a0710bf">m_ICmp</a>(Pred1, m_Intrinsic&lt;Intrinsic::ctpop&gt;(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)),</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;                         <a class="code" href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">m_SpecificInt</a>(2))) &amp;&amp;</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;      Pred0 == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a> &amp;&amp; Pred1 == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>) {</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *CtPop = Cmp1-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmpEQ(CtPop, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(CtPop-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), 1));</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;  }</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  <span class="comment">// (X == 0) || (ctpop(X) u&gt; 1) --&gt; ctpop(X) != 1</span></div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;  <span class="keywordflow">if</span> (!JoinedByAnd &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Cmp0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a3fe9b3ddb71b9fb53d9fc74b3a0710bf">m_ICmp</a>(Pred0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a874d53817a4923de8e58af6b278c09b0">m_ZeroInt</a>())) &amp;&amp;</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Cmp1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a3fe9b3ddb71b9fb53d9fc74b3a0710bf">m_ICmp</a>(Pred1, m_Intrinsic&lt;Intrinsic::ctpop&gt;(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)),</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;                         <a class="code" href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">m_SpecificInt</a>(1))) &amp;&amp;</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;      Pred0 == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a> &amp;&amp; Pred1 == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>) {</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *CtPop = Cmp1-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmpNE(CtPop, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(CtPop-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), 1));</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;  }</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;}</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;<span class="comment">/// Commuted variants are assumed to be handled by calling this function again</span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="comment">/// with the parameters swapped.</span></div>
<div class="line"><a name="l00960"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#abfae6b141dd2ac5a749a0db37842e4c7">  960</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="InstCombineAndOrXor_8cpp.html#abfae6b141dd2ac5a749a0db37842e4c7">foldUnsignedUnderflowCheck</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *ZeroICmp,</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;                                         <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *UnsignedICmp, <span class="keywordtype">bool</span> IsAnd,</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;                                         <span class="keyword">const</span> <a class="code" href="structllvm_1_1SimplifyQuery.html">SimplifyQuery</a> &amp;Q,</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;                                         <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ZeroCmpOp;</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> EqPred;</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(ZeroICmp, <a class="code" href="namespacellvm_1_1PatternMatch.html#a3fe9b3ddb71b9fb53d9fc74b3a0710bf">m_ICmp</a>(EqPred, <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(ZeroCmpOp), <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>())) ||</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;      !<a class="code" href="classllvm_1_1ICmpInst.html#aaaeded5d0cab77f531b294638459aca5">ICmpInst::isEquality</a>(EqPred))</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160; </div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;  <span class="keyword">auto</span> IsKnownNonZero = [&amp;](<a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a07256e6859fcb3b9d5eb02ecea9e9a38">isKnownNonZero</a>(V, Q.<a class="code" href="structllvm_1_1SimplifyQuery.html#a0ffb6d79f6befe2030328bd1d7110feb">DL</a>, <span class="comment">/*Depth=*/</span>0, Q.<a class="code" href="structllvm_1_1SimplifyQuery.html#a928ce56952772d0e0f43cab3a489a6fe">AC</a>, Q.<a class="code" href="structllvm_1_1SimplifyQuery.html#a30647c42c8c40890c577ba5b4ab16468">CxtI</a>, Q.<a class="code" href="structllvm_1_1SimplifyQuery.html#a4776fa0f5a726bd5a8a444981c283c69">DT</a>);</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;  };</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160; </div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> UnsignedPred;</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160; </div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *A, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(UnsignedICmp,</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;            <a class="code" href="namespacellvm_1_1PatternMatch.html#a3de757fc0f1dc7f8f8e9211b32ac106d">m_c_ICmp</a>(UnsignedPred, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(ZeroCmpOp), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A))) &amp;&amp;</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(ZeroCmpOp, <a class="code" href="namespacellvm_1_1PatternMatch.html#ad191220adaaedcfba833985509a17452">m_c_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))) &amp;&amp;</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;      (ZeroICmp-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || UnsignedICmp-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())) {</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    <span class="keyword">auto</span> GetKnownNonZeroAndOther = [&amp;](<a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;NonZero, <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;<a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>) {</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;      <span class="keywordflow">if</span> (!IsKnownNonZero(NonZero))</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;        <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(NonZero, <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>);</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;      <span class="keywordflow">return</span> IsKnownNonZero(NonZero);</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    };</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160; </div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <span class="comment">// Given  ZeroCmpOp = (A + B)</span></div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <span class="comment">//   ZeroCmpOp &lt;  A &amp;&amp; ZeroCmpOp != 0  --&gt;  (0-X) &lt;  Y  iff</span></div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    <span class="comment">//   ZeroCmpOp &gt;= A || ZeroCmpOp == 0  --&gt;  (0-X) &gt;= Y  iff</span></div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <span class="comment">//     with X being the value (A/B) that is known to be non-zero,</span></div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    <span class="comment">//     and Y being remaining value.</span></div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    <span class="keywordflow">if</span> (UnsignedPred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a> &amp;&amp; EqPred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a> &amp;&amp;</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;        IsAnd &amp;&amp; GetKnownNonZeroAndOther(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, A))</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmpULT(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNeg(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), A);</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    <span class="keywordflow">if</span> (UnsignedPred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a> &amp;&amp; EqPred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a> &amp;&amp;</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        !IsAnd &amp;&amp; GetKnownNonZeroAndOther(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, A))</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmpUGE(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNeg(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), A);</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;  }</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160; </div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>, *Offset;</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(ZeroCmpOp, <a class="code" href="namespacellvm_1_1PatternMatch.html#ac3ed5602889a22db44a16e1b97fac5b8">m_Sub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Offset))))</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160; </div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(UnsignedICmp,</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;             <a class="code" href="namespacellvm_1_1PatternMatch.html#a3de757fc0f1dc7f8f8e9211b32ac106d">m_c_ICmp</a>(UnsignedPred, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Offset))) ||</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;      !<a class="code" href="classllvm_1_1CmpInst.html#af206a3d6f58d9e53b074460f0d1ecb86">ICmpInst::isUnsigned</a>(UnsignedPred))</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160; </div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;  <span class="comment">// Base &gt;=/&gt; Offset &amp;&amp; (Base - Offset) != 0  &lt;--&gt;  Base &gt; Offset</span></div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;  <span class="comment">// (no overflow and not null)</span></div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;  <span class="keywordflow">if</span> ((UnsignedPred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a> ||</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;       UnsignedPred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>) &amp;&amp;</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;      EqPred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a> &amp;&amp; IsAnd)</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmpUGT(<a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>, Offset);</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160; </div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;  <span class="comment">// Base &lt;=/&lt; Offset || (Base - Offset) == 0  &lt;--&gt;  Base &lt;= Offset</span></div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;  <span class="comment">// (overflow or null)</span></div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;  <span class="keywordflow">if</span> ((UnsignedPred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a> ||</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;       UnsignedPred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>) &amp;&amp;</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;      EqPred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a> &amp;&amp; !IsAnd)</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmpULE(<a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>, Offset);</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160; </div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;  <span class="comment">// Base &lt;= Offset &amp;&amp; (Base - Offset) != 0  --&gt;  Base &lt; Offset</span></div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;  <span class="keywordflow">if</span> (UnsignedPred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a> &amp;&amp; EqPred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a> &amp;&amp;</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;      IsAnd)</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmpULT(<a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>, Offset);</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160; </div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;  <span class="comment">// Base &gt; Offset || (Base - Offset) == 0  --&gt;  Base &gt;= Offset</span></div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;  <span class="keywordflow">if</span> (UnsignedPred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a> &amp;&amp; EqPred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a> &amp;&amp;</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;      !IsAnd)</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmpUGE(<a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>, Offset);</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160; </div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;}</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160; </div>
<div class="line"><a name="l01036"></a><span class="lineno"><a class="line" href="structIntPart.html"> 1036</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structIntPart.html">IntPart</a> {</div>
<div class="line"><a name="l01037"></a><span class="lineno"><a class="line" href="structIntPart.html#a0abe536eb02b48a16035f06c3af14455"> 1037</a></span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="structIntPart.html#a0abe536eb02b48a16035f06c3af14455">From</a>;</div>
<div class="line"><a name="l01038"></a><span class="lineno"><a class="line" href="structIntPart.html#a13e1a33fe6b6bfe43b975865c3f82300"> 1038</a></span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="structIntPart.html#a13e1a33fe6b6bfe43b975865c3f82300">StartBit</a>;</div>
<div class="line"><a name="l01039"></a><span class="lineno"><a class="line" href="structIntPart.html#a0534bf89c97ddef9c7b9cbc0a276c077"> 1039</a></span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="structIntPart.html#a0534bf89c97ddef9c7b9cbc0a276c077">NumBits</a>;</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;};</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;<span class="comment">/// Match an extraction of bits from an integer.</span></div>
<div class="line"><a name="l01043"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#a84af3264bc3024391dcda854ec87d7fc"> 1043</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> std::optional&lt;IntPart&gt; <a class="code" href="InstCombineAndOrXor_8cpp.html#a84af3264bc3024391dcda854ec87d7fc">matchIntPart</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(V, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a5b844aada27c4c6fdb87146ac458c0d8">m_Trunc</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)))))</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160; </div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;  <span class="keywordtype">unsigned</span> NumOriginalBits = <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()-&gt;getScalarSizeInBits();</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;  <span class="keywordtype">unsigned</span> NumExtractedBits = V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *<a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>;</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;  <span class="comment">// For a trunc(lshr Y, Shift) pattern, make sure we&#39;re only extracting bits</span></div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;  <span class="comment">// from Y, not any shifted-in zeroes.</span></div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">m_LShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>)))) &amp;&amp;</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;      <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>-&gt;ule(NumOriginalBits - NumExtractedBits))</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <span class="keywordflow">return</span> {{<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, (<a class="code" href="ADT_2tmp_8txt.html#aa10ee7493bddf2c751ca6e05451ef410">unsigned</a>)<a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>-&gt;getZExtValue(), NumExtractedBits}};</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;  <span class="keywordflow">return</span> {{<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, 0, NumExtractedBits}};</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;}</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;<span class="comment">/// Materialize an extraction of bits from an integer in IR.</span></div>
<div class="line"><a name="l01061"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#a9cc37ff4f50e97f7e94c348ca2b4ca68"> 1061</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="InstCombineAndOrXor_8cpp.html#a9cc37ff4f50e97f7e94c348ca2b4ca68">extractIntPart</a>(<span class="keyword">const</span> <a class="code" href="structIntPart.html">IntPart</a> &amp;<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>, <a class="code" href="classllvm_1_1IRBuilderBase.html">IRBuilderBase</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.From;</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.StartBit)</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    V = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLShr(V, <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.StartBit);</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *TruncTy = V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a83725435ece9bc12c40ceb34dbd1727c">getWithNewBitWidth</a>(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.NumBits);</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;  <span class="keywordflow">if</span> (TruncTy != V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    V = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateTrunc(V, TruncTy);</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;  <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;}</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;<span class="comment">/// (icmp eq X0, Y0) &amp; (icmp eq X1, Y1) -&gt; icmp eq X01, Y01</span></div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;<span class="comment">/// (icmp ne X0, Y0) | (icmp ne X1, Y1) -&gt; icmp ne X01, Y01</span></div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;<span class="comment">/// where X0, X1 and Y0, Y1 are adjacent parts extracted from an integer.</span></div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Value.html">Value</a> *InstCombinerImpl::foldEqOfParts(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *Cmp0, <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *Cmp1,</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;                                       <span class="keywordtype">bool</span> IsAnd) {</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;  <span class="keywordflow">if</span> (!Cmp0-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || !Cmp1-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160; </div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> Pred = IsAnd ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">CmpInst::ICMP_EQ</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP_NE</a>;</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;  <span class="keywordflow">if</span> (Cmp0-&gt;<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>() != Pred || Cmp1-&gt;<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>() != Pred)</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160; </div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;  std::optional&lt;IntPart&gt; L0 = <a class="code" href="InstCombineAndOrXor_8cpp.html#a84af3264bc3024391dcda854ec87d7fc">matchIntPart</a>(Cmp0-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0));</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;  std::optional&lt;IntPart&gt; R0 = <a class="code" href="InstCombineAndOrXor_8cpp.html#a84af3264bc3024391dcda854ec87d7fc">matchIntPart</a>(Cmp0-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1));</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;  std::optional&lt;IntPart&gt; L1 = <a class="code" href="InstCombineAndOrXor_8cpp.html#a84af3264bc3024391dcda854ec87d7fc">matchIntPart</a>(Cmp1-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0));</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;  std::optional&lt;IntPart&gt; R1 = <a class="code" href="InstCombineAndOrXor_8cpp.html#a84af3264bc3024391dcda854ec87d7fc">matchIntPart</a>(Cmp1-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1));</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;  <span class="keywordflow">if</span> (!L0 || !R0 || !L1 || !R1)</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160; </div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;  <span class="comment">// Make sure the LHS/RHS compare a part of the same value, possibly after</span></div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;  <span class="comment">// an operand swap.</span></div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;  <span class="keywordflow">if</span> (L0-&gt;From != L1-&gt;From || R0-&gt;From != R1-&gt;From) {</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    <span class="keywordflow">if</span> (L0-&gt;From != R1-&gt;From || R0-&gt;From != L1-&gt;From)</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(L1, R1);</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;  }</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160; </div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;  <span class="comment">// Make sure the extracted parts are adjacent, canonicalizing to L0/R0 being</span></div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;  <span class="comment">// the low part and L1/R1 being the high part.</span></div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  <span class="keywordflow">if</span> (L0-&gt;StartBit + L0-&gt;NumBits != L1-&gt;StartBit ||</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;      R0-&gt;StartBit + R0-&gt;NumBits != R1-&gt;StartBit) {</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    <span class="keywordflow">if</span> (L1-&gt;StartBit + L1-&gt;NumBits != L0-&gt;StartBit ||</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;        R1-&gt;StartBit + R1-&gt;NumBits != R0-&gt;StartBit)</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(L0, L1);</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(R0, R1);</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;  }</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160; </div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;  <span class="comment">// We can simplify to a comparison of these larger parts of the integers.</span></div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  <a class="code" href="structIntPart.html">IntPart</a> L = {L0-&gt;<a class="code" href="structIntPart.html#a0abe536eb02b48a16035f06c3af14455">From</a>, L0-&gt;StartBit, L0-&gt;NumBits + L1-&gt;NumBits};</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  <a class="code" href="structIntPart.html">IntPart</a> <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> = {R0-&gt;From, R0-&gt;StartBit, R0-&gt;NumBits + R1-&gt;NumBits};</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ItaniumDemangle_8h.html#ab67ef02b75c3226cfe0b2791e2b48b06a74accfde3d3f8e8a27c326eba229d16c">LValue</a> = <a class="code" href="InstCombineAndOrXor_8cpp.html#a9cc37ff4f50e97f7e94c348ca2b4ca68">extractIntPart</a>(L, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ItaniumDemangle_8h.html#ab67ef02b75c3226cfe0b2791e2b48b06ac756c8b5e0e5217b000321397a40be7e">RValue</a> = <a class="code" href="InstCombineAndOrXor_8cpp.html#a9cc37ff4f50e97f7e94c348ca2b4ca68">extractIntPart</a>(R, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(Pred, LValue, RValue);</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;}</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;<span class="comment">/// Reduce logic-of-compares with equality to a constant by substituting a</span></div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;<span class="comment">/// common operand with the constant. Callers are expected to call this with</span></div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;<span class="comment">/// Cmp0/Cmp1 switched to handle logic op commutativity.</span></div>
<div class="line"><a name="l01120"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#aaf30a02917241dc81db8fdba1b8a5972"> 1120</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="InstCombineAndOrXor_8cpp.html#aaf30a02917241dc81db8fdba1b8a5972">foldAndOrOfICmpsWithConstEq</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *Cmp0, <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *Cmp1,</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;                                          <span class="keywordtype">bool</span> IsAnd, <span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1SystemZII.html#aa317b5cb849b283c734d16de54db29b9af491d0ac44efff3d6022cfdaefeccec6">IsLogical</a>,</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;                                          <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>,</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;                                          <span class="keyword">const</span> <a class="code" href="structllvm_1_1SimplifyQuery.html">SimplifyQuery</a> &amp;Q) {</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;  <span class="comment">// Match an equality compare with a non-poison constant as Cmp0.</span></div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;  <span class="comment">// Also, give up if the compare can be constant-folded to avoid looping.</span></div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred0;</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Cmp0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a3fe9b3ddb71b9fb53d9fc74b3a0710bf">m_ICmp</a>(Pred0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))) ||</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;      !<a class="code" href="namespacellvm.html#ab8a7ef433279aabf7f30fa5504a4d4ef">isGuaranteedNotToBeUndefOrPoison</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) || isa&lt;Constant&gt;(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;  <span class="keywordflow">if</span> ((IsAnd &amp;&amp; Pred0 != <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>) ||</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;      (!IsAnd &amp;&amp; Pred0 != <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>))</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160; </div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;  <span class="comment">// The other compare must include a common operand (X). Canonicalize the</span></div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;  <span class="comment">// common operand as operand 1 (Pred1 is swapped if the common operand was</span></div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;  <span class="comment">// operand 0).</span></div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred1;</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Cmp1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a3de757fc0f1dc7f8f8e9211b32ac106d">m_c_ICmp</a>(Pred1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))))</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160; </div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;  <span class="comment">// Replace variable with constant value equivalence to remove a variable use:</span></div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;  <span class="comment">// (X == C) &amp;&amp; (Y Pred1 X) --&gt; (X == C) &amp;&amp; (Y Pred1 C)</span></div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;  <span class="comment">// (X != C) || (Y Pred1 X) --&gt; (X != C) || (Y Pred1 C)</span></div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;  <span class="comment">// Can think of the &#39;or&#39; substitution with the &#39;and&#39; bool equivalent:</span></div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;  <span class="comment">// A || B --&gt; A || (!A &amp;&amp; B)</span></div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *SubstituteCmp = <a class="code" href="namespacellvm.html#a969e30a11e5b3ac2ad7ab5fcc537d495">simplifyICmpInst</a>(Pred1, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, Q);</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;  <span class="keywordflow">if</span> (!SubstituteCmp) {</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    <span class="comment">// If we need to create a new instruction, require that the old compare can</span></div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    <span class="comment">// be removed.</span></div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    <span class="keywordflow">if</span> (!Cmp1-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    SubstituteCmp = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(Pred1, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;  }</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1SystemZII.html#aa317b5cb849b283c734d16de54db29b9af491d0ac44efff3d6022cfdaefeccec6">IsLogical</a>)</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;    <span class="keywordflow">return</span> IsAnd ? <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLogicalAnd(Cmp0, SubstituteCmp)</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;                 : <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLogicalOr(Cmp0, SubstituteCmp);</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(IsAnd ? Instruction::And : Instruction::Or, Cmp0,</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;                             SubstituteCmp);</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;}</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;<span class="comment">/// Fold (icmp Pred1 V1, C1) &amp; (icmp Pred2 V2, C2)</span></div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;<span class="comment">/// or   (icmp Pred1 V1, C1) | (icmp Pred2 V2, C2)</span></div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;<span class="comment">/// into a single comparison using range-based reasoning.</span></div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;<span class="comment">/// NOTE: This is also used for logical and/or, must be poison-safe!</span></div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Value.html">Value</a> *InstCombinerImpl::foldAndOrOfICmpsUsingRanges(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *ICmp1,</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;                                                     <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *ICmp2,</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;                                                     <span class="keywordtype">bool</span> IsAnd) {</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred1, Pred2;</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *V1, *<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>;</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, *C2;</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(ICmp1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a3fe9b3ddb71b9fb53d9fc74b3a0710bf">m_ICmp</a>(Pred1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(V1), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>))) ||</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;      !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(ICmp2, <a class="code" href="namespacellvm_1_1PatternMatch.html#a3fe9b3ddb71b9fb53d9fc74b3a0710bf">m_ICmp</a>(Pred2, <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(C2))))</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160; </div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;  <span class="comment">// Look through add of a constant offset on V1, V2, or both operands. This</span></div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;  <span class="comment">// allows us to interpret the V + C&#39; &lt; C&#39;&#39; range idiom into a proper range.</span></div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *Offset1 = <span class="keyword">nullptr</span>, *Offset2 = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;  <span class="keywordflow">if</span> (V1 != <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>) {</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(V1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(Offset1))))</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;      V1 = <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(Offset2))))</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;      <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a> = <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;  }</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160; </div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;  <span class="keywordflow">if</span> (V1 != <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">V2</a>)</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160; </div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;  <a class="code" href="classllvm_1_1ConstantRange.html">ConstantRange</a> CR1 = <a class="code" href="classllvm_1_1ConstantRange.html#aa89e9cec92a0b38d2f47a077bf12cc98">ConstantRange::makeExactICmpRegion</a>(</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;      IsAnd ? <a class="code" href="classllvm_1_1CmpInst.html#aa2a54b545d237ecfe450fd1292f7675e">ICmpInst::getInversePredicate</a>(Pred1) : Pred1, *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>);</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;  <span class="keywordflow">if</span> (Offset1)</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    CR1 = CR1.<a class="code" href="classllvm_1_1ConstantRange.html#a1d29074c7a610816d4f328b7cd9b783d">subtract</a>(*Offset1);</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160; </div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;  <a class="code" href="classllvm_1_1ConstantRange.html">ConstantRange</a> CR2 = <a class="code" href="classllvm_1_1ConstantRange.html#aa89e9cec92a0b38d2f47a077bf12cc98">ConstantRange::makeExactICmpRegion</a>(</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;      IsAnd ? <a class="code" href="classllvm_1_1CmpInst.html#aa2a54b545d237ecfe450fd1292f7675e">ICmpInst::getInversePredicate</a>(Pred2) : Pred2, *C2);</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;  <span class="keywordflow">if</span> (Offset2)</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    CR2 = CR2.<a class="code" href="classllvm_1_1ConstantRange.html#a1d29074c7a610816d4f328b7cd9b783d">subtract</a>(*Offset2);</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160; </div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = V1-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NewV = V1;</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;  std::optional&lt;ConstantRange&gt; CR = CR1.<a class="code" href="classllvm_1_1ConstantRange.html#a104cf3ac04ba840d0bd3b37685d6cdbe">exactUnionWith</a>(CR2);</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;  <span class="keywordflow">if</span> (!CR) {</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    <span class="keywordflow">if</span> (!(ICmp1-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp; ICmp2-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>()) || CR1.<a class="code" href="classllvm_1_1ConstantRange.html#a76bca22a9253d0962fd07031c89b98e7">isWrappedSet</a>() ||</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;        CR2.<a class="code" href="classllvm_1_1ConstantRange.html#a76bca22a9253d0962fd07031c89b98e7">isWrappedSet</a>())</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160; </div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    <span class="comment">// Check whether we have equal-size ranges that only differ by one bit.</span></div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    <span class="comment">// In that case we can apply a mask to map one range onto the other.</span></div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> LowerDiff = CR1.<a class="code" href="classllvm_1_1ConstantRange.html#a4c57cff33f93411b9c32991f3c5336ad">getLower</a>() ^ CR2.<a class="code" href="classllvm_1_1ConstantRange.html#a4c57cff33f93411b9c32991f3c5336ad">getLower</a>();</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> UpperDiff = (CR1.<a class="code" href="classllvm_1_1ConstantRange.html#a04459fa7cb4eeda3238a0f7d554ad3be">getUpper</a>() - 1) ^ (CR2.<a class="code" href="classllvm_1_1ConstantRange.html#a04459fa7cb4eeda3238a0f7d554ad3be">getUpper</a>() - 1);</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> CR1Size = CR1.<a class="code" href="classllvm_1_1ConstantRange.html#a04459fa7cb4eeda3238a0f7d554ad3be">getUpper</a>() - CR1.<a class="code" href="classllvm_1_1ConstantRange.html#a4c57cff33f93411b9c32991f3c5336ad">getLower</a>();</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    <span class="keywordflow">if</span> (!LowerDiff.<a class="code" href="classllvm_1_1APInt.html#ad1b0513de876d1c85cf6268ca21b2c86">isPowerOf2</a>() || LowerDiff != UpperDiff ||</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;        CR1Size != CR2.<a class="code" href="classllvm_1_1ConstantRange.html#a04459fa7cb4eeda3238a0f7d554ad3be">getUpper</a>() - CR2.<a class="code" href="classllvm_1_1ConstantRange.html#a4c57cff33f93411b9c32991f3c5336ad">getLower</a>())</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160; </div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    CR = CR1.<a class="code" href="classllvm_1_1ConstantRange.html#a4c57cff33f93411b9c32991f3c5336ad">getLower</a>().<a class="code" href="classllvm_1_1APInt.html#a545e8d5dfa1688acea0d0e275b03682f">ult</a>(CR2.<a class="code" href="classllvm_1_1ConstantRange.html#a4c57cff33f93411b9c32991f3c5336ad">getLower</a>()) ? CR1 : CR2;</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    NewV = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(NewV, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, ~LowerDiff));</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;  }</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160; </div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;  <span class="keywordflow">if</span> (IsAnd)</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    CR = CR-&gt;inverse();</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160; </div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> NewPred;</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> NewC, <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6110fc30bc7311a6cf99814530362e21">Offset</a>;</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;  CR-&gt;getEquivalentICmp(NewPred, NewC, Offset);</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160; </div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;  <span class="keywordflow">if</span> (Offset != 0)</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    NewV = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(NewV, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, Offset));</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(NewPred, NewV, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, NewC));</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;}</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;<span class="comment">/// Ignore all operations which only change the sign of a value, returning the</span></div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;<span class="comment">/// underlying magnitude value.</span></div>
<div class="line"><a name="l01237"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#a1b65a6c813fe2a3bfcc0db1863ee6642"> 1237</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="InstCombineAndOrXor_8cpp.html#a1b65a6c813fe2a3bfcc0db1863ee6642">stripSignOnlyFPOps</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *Val) {</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;  <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Val, <a class="code" href="namespacellvm_1_1PatternMatch.html#af431ec215bba8bb9c56e7541d99920f2">m_FNeg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Val)));</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;  <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Val, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7638daf70e17d093dd35f06211dc7a87">m_FAbs</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Val)));</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;  <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Val, <a class="code" href="namespacellvm_1_1PatternMatch.html#acb52eaa15512b845d33e0ec03648af5c">m_CopySign</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Val), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>()));</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;  <span class="keywordflow">return</span> Val;</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;}</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;<span class="comment">/// Matches canonical form of isnan, fcmp ord x, 0</span></div>
<div class="line"><a name="l01245"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#a9e92e028c2dd81bf7d518dfc3960624a"> 1245</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineAndOrXor_8cpp.html#a9e92e028c2dd81bf7d518dfc3960624a">matchIsNotNaN</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">FCmpInst::Predicate</a> <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>) {</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa3213b645e029aba8bb1b85213607d5e">FCmpInst::FCMP_ORD</a> &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ab9370b798ae530641518075b0832723a">m_AnyZeroFP</a>());</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;}</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;<span class="comment">/// Matches fcmp u__ x, +/-inf</span></div>
<div class="line"><a name="l01250"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#a9977c80be67ea7e51bb37ee242d1cc4c"> 1250</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineAndOrXor_8cpp.html#a9977c80be67ea7e51bb37ee242d1cc4c">matchUnorderedInfCompare</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">FCmpInst::Predicate</a> <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>,</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;                                     <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>) {</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CmpInst.html#aae55ea42185b7528c0c149625b998968">FCmpInst::isUnordered</a>(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>) &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a67a3e55827742843c6cd23e49805e233">m_Inf</a>());</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;}</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;<span class="comment">/// and (fcmp ord x, 0), (fcmp u* x, inf) -&gt; fcmp o* x, inf</span></div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;<span class="comment">/// Clang emits this pattern for doing an isfinite check in __builtin_isnormal.</span></div>
<div class="line"><a name="l01258"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#aab47f48b5ac73fccc75d0e09395dded5"> 1258</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="InstCombineAndOrXor_8cpp.html#aab47f48b5ac73fccc75d0e09395dded5">matchIsFiniteTest</a>(<a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, <a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>,</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;                                <a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>) {</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *LHS0 = <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;getOperand(0), *LHS1 = <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;getOperand(1);</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *RHS0 = <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;getOperand(0), *RHS1 = <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;getOperand(1);</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">FCmpInst::Predicate</a> PredL = <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;getPredicate(), PredR = <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;getPredicate();</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160; </div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="InstCombineAndOrXor_8cpp.html#a9e92e028c2dd81bf7d518dfc3960624a">matchIsNotNaN</a>(PredL, LHS0, LHS1) ||</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;      !<a class="code" href="InstCombineAndOrXor_8cpp.html#a9977c80be67ea7e51bb37ee242d1cc4c">matchUnorderedInfCompare</a>(PredR, RHS0, RHS1))</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160; </div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::FastMathFlagGuard</a> FMFG(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;  <a class="code" href="classllvm_1_1FastMathFlags.html">FastMathFlags</a> FMF = <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;getFastMathFlags();</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;  FMF &amp;= <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;getFastMathFlags();</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.setFastMathFlags(FMF);</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160; </div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFCmp(<a class="code" href="classllvm_1_1CmpInst.html#a661fa29fe8d4acd9640aefa3a067f942">FCmpInst::getOrderedPredicate</a>(PredR), RHS0, RHS1);</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;}</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;<span class="comment">/// Returns a pair of values, which if passed to llvm.is.fpclass, returns the</span></div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;<span class="comment">/// same result as an fcmp with the given operands.</span></div>
<div class="line"><a name="l01278"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#a6baa2d8de7d4e93c9b6c9324733d0ec3"> 1278</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> std::pair&lt;Value *, unsigned&gt; <a class="code" href="InstCombineAndOrXor_8cpp.html#a6baa2d8de7d4e93c9b6c9324733d0ec3">fcmpToClassTest</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">FCmpInst::Predicate</a> Pred,</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;                                                    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>) {</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> *ConstRHS;</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#acd794d7b3653822f61ba126e1678e03f">m_APFloat</a>(ConstRHS)))</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;    <span class="keywordflow">return</span> {<span class="keyword">nullptr</span>, 0};</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160; </div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;  <span class="keywordflow">if</span> (ConstRHS-&gt;<a class="code" href="classllvm_1_1APFloat.html#a9aaed17970b55e9e1bfa906822ea7b71">isZero</a>()) {</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    <span class="keywordflow">switch</span> (Pred) {</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <span class="comment">// TODO: Compares eq/ne with 0 depends on the denormal handling mode.</span></div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa3213b645e029aba8bb1b85213607d5e">FCmpInst::FCMP_ORD</a>:</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;      <span class="comment">// Canonical form of ord/uno is with a zero. We could also handle</span></div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;      <span class="comment">// non-canonical other non-NaN constants or LHS == RHS.</span></div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;      <span class="keywordflow">return</span> {<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, ~<a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a3084d5e0be64d39d4c09ec2b7b933248">fcNan</a> &amp; <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67ae40661d92d6edd95f9ba785c04e08362">fcAllFlags</a>};</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baf0159e4005258dc54f20b6fc227d19ed">FCmpInst::FCMP_UNO</a>:</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;      <span class="keywordflow">return</span> {<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a3084d5e0be64d39d4c09ec2b7b933248">fcNan</a>};</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;    }</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160; </div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    <span class="keywordflow">return</span> {<span class="keyword">nullptr</span>, 0};</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;  }</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160; </div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Src = <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>;</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> IsFabs = <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7638daf70e17d093dd35f06211dc7a87">m_FAbs</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Src)));</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160; </div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;  <span class="comment">// Compute the test mask that would return true for the ordered comparisons.</span></div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>;</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160; </div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;  <span class="keywordflow">if</span> (ConstRHS-&gt;<a class="code" href="classllvm_1_1APFloat.html#afdbfe0ba27cece5e333f4a7ae68fa82e">isInfinity</a>()) {</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    <span class="keywordflow">switch</span> (Pred) {</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba024db78a5ed74f64666f3ca4955e6eca">FCmpInst::FCMP_OEQ</a>:</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad601460c9371d0f0ada5ae006bdba2bd">FCmpInst::FCMP_UNE</a>: {</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;      <span class="comment">// Match __builtin_isinf patterns</span></div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;      <span class="comment">//   fcmp oeq x, +inf -&gt; is_fpclass x, fcPosInf</span></div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;      <span class="comment">//   fcmp oeq fabs(x), +inf -&gt; is_fpclass x, fcInf</span></div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;      <span class="comment">//   fcmp oeq x, -inf -&gt; is_fpclass x, fcNegInf</span></div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;      <span class="comment">//   fcmp oeq fabs(x), -inf -&gt; is_fpclass x, 0 -&gt; false</span></div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;      <span class="comment">//   fcmp une x, +inf -&gt; is_fpclass x, ~fcPosInf</span></div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;      <span class="comment">//   fcmp une fabs(x), +inf -&gt; is_fpclass x, ~fcInf</span></div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;      <span class="comment">//   fcmp une x, -inf -&gt; is_fpclass x, ~fcNegInf</span></div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;      <span class="comment">//   fcmp une fabs(x), -inf -&gt; is_fpclass x, fcAllFlags -&gt; true</span></div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160; </div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;      <span class="keywordflow">if</span> (ConstRHS-&gt;<a class="code" href="classllvm_1_1APFloat.html#a2b901c3a0625a7d7173e9bd4864e2775">isNegative</a>()) {</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;        <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a716ec8744e413e6a82f58f1095b40b99">fcNegInf</a>;</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;        <span class="keywordflow">if</span> (IsFabs)</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;          <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = 0;</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;        <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67ace8cc3cdd99d4ce78ff9f4bf4c681d28">fcPosInf</a>;</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;        <span class="keywordflow">if</span> (IsFabs)</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;          <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> |= <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a716ec8744e413e6a82f58f1095b40b99">fcNegInf</a>;</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;      }</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160; </div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    }</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba8a80b27ca29fe2076b9bbdee02c65464">FCmpInst::FCMP_ONE</a>:</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba919643b83ce3c9af2e4296ed5e413a1f">FCmpInst::FCMP_UEQ</a>: {</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;      <span class="comment">// Match __builtin_isinf patterns</span></div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;      <span class="comment">//   fcmp one x, -inf -&gt; is_fpclass x, fcNegInf</span></div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;      <span class="comment">//   fcmp one fabs(x), -inf -&gt; is_fpclass x, ~fcNegInf &amp; ~fcNan</span></div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;      <span class="comment">//   fcmp one x, +inf -&gt; is_fpclass x, ~fcNegInf &amp; ~fcNan</span></div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;      <span class="comment">//   fcmp one fabs(x), +inf -&gt; is_fpclass x, ~fcInf &amp; fcNan</span></div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;      <span class="comment">//   fcmp ueq x, +inf -&gt; is_fpclass x, fcPosInf|fcNan</span></div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;      <span class="comment">//   fcmp ueq (fabs x), +inf -&gt; is_fpclass x, fcInf|fcNan</span></div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;      <span class="comment">//   fcmp ueq x, -inf -&gt; is_fpclass x, fcNegInf|fcNan</span></div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;      <span class="comment">//   fcmp ueq fabs(x), -inf -&gt; is_fpclass x, fcNan</span></div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;      <span class="keywordflow">if</span> (ConstRHS-&gt;<a class="code" href="classllvm_1_1APFloat.html#a2b901c3a0625a7d7173e9bd4864e2775">isNegative</a>()) {</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;        <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = ~<a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a716ec8744e413e6a82f58f1095b40b99">fcNegInf</a> &amp; ~<a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a3084d5e0be64d39d4c09ec2b7b933248">fcNan</a>;</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;        <span class="keywordflow">if</span> (IsFabs)</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;          <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = ~<a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a3084d5e0be64d39d4c09ec2b7b933248">fcNan</a>;</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;        <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = ~<a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67ace8cc3cdd99d4ce78ff9f4bf4c681d28">fcPosInf</a> &amp; ~<a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a3084d5e0be64d39d4c09ec2b7b933248">fcNan</a>;</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;        <span class="keywordflow">if</span> (IsFabs)</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;          <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> &amp;= ~<a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a716ec8744e413e6a82f58f1095b40b99">fcNegInf</a>;</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;      }</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160; </div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;      <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> &amp;= <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67ae40661d92d6edd95f9ba785c04e08362">fcAllFlags</a>;</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;    }</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba326bee0a4a424cef21c1cf8adb8b8dd8">FCmpInst::FCMP_OLT</a>:</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bae51609fc6a425f849d37c28cb9bc0344">FCmpInst::FCMP_UGE</a>: {</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;      <span class="keywordflow">if</span> (ConstRHS-&gt;<a class="code" href="classllvm_1_1APFloat.html#a2b901c3a0625a7d7173e9bd4864e2775">isNegative</a>()) <span class="comment">// TODO</span></div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;        <span class="keywordflow">return</span> {<span class="keyword">nullptr</span>, 0};</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160; </div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;      <span class="comment">// fcmp olt fabs(x), +inf -&gt; fcFinite</span></div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;      <span class="comment">// fcmp uge fabs(x), +inf -&gt; ~fcFinite</span></div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;      <span class="comment">// fcmp olt x, +inf -&gt; fcFinite|fcNegInf</span></div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;      <span class="comment">// fcmp uge x, +inf -&gt; ~(fcFinite|fcNegInf)</span></div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;      <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a65e723f5216f7e4c19d5c7c81e290053">fcFinite</a>;</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;      <span class="keywordflow">if</span> (!IsFabs)</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;        <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> |= <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a716ec8744e413e6a82f58f1095b40b99">fcNegInf</a>;</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    }</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba541533f34077bbbcfb703a90f6d2da9b">FCmpInst::FCMP_OGE</a>:</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba75016d5872d90adf89cc1cbf5763f474">FCmpInst::FCMP_ULT</a>: {</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;      <span class="keywordflow">if</span> (ConstRHS-&gt;<a class="code" href="classllvm_1_1APFloat.html#a2b901c3a0625a7d7173e9bd4864e2775">isNegative</a>()) <span class="comment">// TODO</span></div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;        <span class="keywordflow">return</span> {<span class="keyword">nullptr</span>, 0};</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160; </div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;      <span class="comment">// fcmp oge fabs(x), +inf -&gt; fcInf</span></div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;      <span class="comment">// fcmp oge x, +inf -&gt; fcPosInf</span></div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;      <span class="comment">// fcmp ult fabs(x), +inf -&gt; ~fcInf</span></div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;      <span class="comment">// fcmp ult x, +inf -&gt; ~fcPosInf</span></div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;      <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67ace8cc3cdd99d4ce78ff9f4bf4c681d28">fcPosInf</a>;</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;      <span class="keywordflow">if</span> (IsFabs)</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;        <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> |= <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a716ec8744e413e6a82f58f1095b40b99">fcNegInf</a>;</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;    }</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;      <span class="keywordflow">return</span> {<span class="keyword">nullptr</span>, 0};</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    }</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ConstRHS-&gt;<a class="code" href="classllvm_1_1APFloat.html#af8943302f831d2fc16d84eaf1f2740ed">isSmallestNormalized</a>() &amp;&amp; !ConstRHS-&gt;<a class="code" href="classllvm_1_1APFloat.html#a2b901c3a0625a7d7173e9bd4864e2775">isNegative</a>()) {</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    <span class="comment">// Match pattern that&#39;s used in __builtin_isnormal.</span></div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    <span class="keywordflow">switch</span> (Pred) {</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba326bee0a4a424cef21c1cf8adb8b8dd8">FCmpInst::FCMP_OLT</a>:</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bae51609fc6a425f849d37c28cb9bc0344">FCmpInst::FCMP_UGE</a>: {</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;      <span class="comment">// fcmp olt x, smallest_normal -&gt; fcNegInf|fcNegNormal|fcSubnormal|fcZero</span></div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;      <span class="comment">// fcmp olt fabs(x), smallest_normal -&gt; fcSubnormal|fcZero</span></div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;      <span class="comment">// fcmp uge x, smallest_normal -&gt; fcNan|fcPosNormal|fcPosInf</span></div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;      <span class="comment">// fcmp uge fabs(x), smallest_normal -&gt; ~(fcSubnormal|fcZero)</span></div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;      <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a68c7b3dbc94a6864f2cf566958954247">fcZero</a> | <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a1d0a7c99f3541df874ad98ba481b27d6">fcSubnormal</a>;</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;      <span class="keywordflow">if</span> (!IsFabs)</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;        <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> |= <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a60c3b254a3f56b2bf31bc568492c4a74">fcNegNormal</a> | <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a716ec8744e413e6a82f58f1095b40b99">fcNegInf</a>;</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160; </div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    }</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba541533f34077bbbcfb703a90f6d2da9b">FCmpInst::FCMP_OGE</a>:</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba75016d5872d90adf89cc1cbf5763f474">FCmpInst::FCMP_ULT</a>: {</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;      <span class="comment">// fcmp oge x, smallest_normal -&gt; fcPosNormal | fcPosInf</span></div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;      <span class="comment">// fcmp oge fabs(x), smallest_normal -&gt; fcInf | fcNormal</span></div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;      <span class="comment">// fcmp ult x, smallest_normal -&gt; ~(fcPosNormal | fcPosInf)</span></div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;      <span class="comment">// fcmp ult fabs(x), smallest_normal -&gt; ~(fcInf | fcNormal)</span></div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;      <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67ace8cc3cdd99d4ce78ff9f4bf4c681d28">fcPosInf</a> | <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67afff82cc4502e0e3bf3575c9622284e18">fcPosNormal</a>;</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;      <span class="keywordflow">if</span> (IsFabs)</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;        <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> |= <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a716ec8744e413e6a82f58f1095b40b99">fcNegInf</a> | <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a60c3b254a3f56b2bf31bc568492c4a74">fcNegNormal</a>;</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    }</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;      <span class="keywordflow">return</span> {<span class="keyword">nullptr</span>, 0};</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;    }</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;  } <span class="keywordflow">else</span></div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;    <span class="keywordflow">return</span> {<span class="keyword">nullptr</span>, 0};</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160; </div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;  <span class="comment">// Invert the comparison for the unordered cases.</span></div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CmpInst.html#aae55ea42185b7528c0c149625b998968">FCmpInst::isUnordered</a>(Pred))</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;    <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = ~<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> &amp; <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67ae40661d92d6edd95f9ba785c04e08362">fcAllFlags</a>;</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160; </div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> &amp; ~<a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67ae40661d92d6edd95f9ba785c04e08362">fcAllFlags</a>) == 0);</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160; </div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;  <span class="keywordflow">return</span> {Src, <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>};</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;}</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160; </div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *InstCombinerImpl::foldLogicOfFCmps(<a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>,</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;                                          <span class="keywordtype">bool</span> IsAnd, <span class="keywordtype">bool</span> IsLogicalSelect) {</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *LHS0 = <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;getOperand(0), *LHS1 = <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;getOperand(1);</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *RHS0 = <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;getOperand(0), *RHS1 = <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;getOperand(1);</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">FCmpInst::Predicate</a> PredL = <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;getPredicate(), PredR = <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;getPredicate();</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160; </div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;  <span class="keywordflow">if</span> (LHS0 == RHS1 &amp;&amp; RHS0 == LHS1) {</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    <span class="comment">// Swap RHS operands to match LHS.</span></div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;    PredR = <a class="code" href="classllvm_1_1CmpInst.html#a49a2d8f483ea08a3d6ea75f90c640d76">FCmpInst::getSwappedPredicate</a>(PredR);</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(RHS0, RHS1);</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;  }</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160; </div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;  <span class="comment">// Simplify (fcmp cc0 x, y) &amp; (fcmp cc1 x, y).</span></div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;  <span class="comment">// Suppose the relation between x and y is R, where R is one of</span></div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;  <span class="comment">// U(1000), L(0100), G(0010) or E(0001), and CC0 and CC1 are the bitmasks for</span></div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;  <span class="comment">// testing the desired relations.</span></div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;  <span class="comment">// Since (R &amp; CC0) and (R &amp; CC1) are either R or 0, we actually have this:</span></div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;  <span class="comment">//    bool(R &amp; CC0) &amp;&amp; bool(R &amp; CC1)</span></div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;  <span class="comment">//  = bool((R &amp; CC0) &amp; (R &amp; CC1))</span></div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;  <span class="comment">//  = bool(R &amp; (CC0 &amp; CC1)) &lt;= by re-association, commutation, and idempotency</span></div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;  <span class="comment">// Since (R &amp; CC0) and (R &amp; CC1) are either R or 0, we actually have this:</span></div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;  <span class="comment">//    bool(R &amp; CC0) || bool(R &amp; CC1)</span></div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;  <span class="comment">//  = bool((R &amp; CC0) | (R &amp; CC1))</span></div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;  <span class="comment">//  = bool(R &amp; (CC0 | CC1)) &lt;= by reversed distribution (contribution? ;)</span></div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;  <span class="keywordflow">if</span> (LHS0 == RHS0 &amp;&amp; LHS1 == RHS1) {</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;    <span class="keywordtype">unsigned</span> FCmpCodeL = <a class="code" href="namespacellvm.html#aea99b554c16d2006d637156e877f9e6c">getFCmpCode</a>(PredL);</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;    <span class="keywordtype">unsigned</span> FCmpCodeR = <a class="code" href="namespacellvm.html#aea99b554c16d2006d637156e877f9e6c">getFCmpCode</a>(PredR);</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;    <span class="keywordtype">unsigned</span> NewPred = IsAnd ? FCmpCodeL &amp; FCmpCodeR : FCmpCodeL | FCmpCodeR;</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160; </div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;    <span class="comment">// Intersect the fast math flags.</span></div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;    <span class="comment">// TODO: We can union the fast math flags unless this is a logical select.</span></div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::FastMathFlagGuard</a> FMFG(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;    <a class="code" href="classllvm_1_1FastMathFlags.html">FastMathFlags</a> FMF = <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;getFastMathFlags();</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;    FMF &amp;= <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;getFastMathFlags();</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.setFastMathFlags(FMF);</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160; </div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="InstCombineAndOrXor_8cpp.html#a325aa976ba1006c79a069b089a4b714d">getFCmpValue</a>(NewPred, LHS0, LHS1, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;  }</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160; </div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;  <span class="comment">// This transform is not valid for a logical select.</span></div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;  <span class="keywordflow">if</span> (!IsLogicalSelect &amp;&amp;</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;      ((PredL == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa3213b645e029aba8bb1b85213607d5e">FCmpInst::FCMP_ORD</a> &amp;&amp; PredR == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa3213b645e029aba8bb1b85213607d5e">FCmpInst::FCMP_ORD</a> &amp;&amp; IsAnd) ||</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;       (PredL == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baf0159e4005258dc54f20b6fc227d19ed">FCmpInst::FCMP_UNO</a> &amp;&amp; PredR == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baf0159e4005258dc54f20b6fc227d19ed">FCmpInst::FCMP_UNO</a> &amp;&amp;</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;        !IsAnd))) {</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;    <span class="keywordflow">if</span> (LHS0-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() != RHS0-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160; </div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;    <span class="comment">// FCmp canonicalization ensures that (fcmp ord/uno X, X) and</span></div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;    <span class="comment">// (fcmp ord/uno X, C) will be transformed to (fcmp X, +0.0).</span></div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(LHS1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7a371c4faf8e41f7cac98ad694f504dc">m_PosZeroFP</a>()) &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(RHS1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7a371c4faf8e41f7cac98ad694f504dc">m_PosZeroFP</a>()))</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;      <span class="comment">// Ignore the constants because they are obviously not NANs:</span></div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;      <span class="comment">// (fcmp ord x, 0.0) &amp; (fcmp ord y, 0.0)  -&gt; (fcmp ord x, y)</span></div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;      <span class="comment">// (fcmp uno x, 0.0) | (fcmp uno y, 0.0)  -&gt; (fcmp uno x, y)</span></div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFCmp(PredL, LHS0, RHS0);</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;  }</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160; </div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;  <span class="keywordflow">if</span> (IsAnd &amp;&amp; <a class="code" href="InstCombineAndOrXor_8cpp.html#a1b65a6c813fe2a3bfcc0db1863ee6642">stripSignOnlyFPOps</a>(LHS0) == <a class="code" href="InstCombineAndOrXor_8cpp.html#a1b65a6c813fe2a3bfcc0db1863ee6642">stripSignOnlyFPOps</a>(RHS0)) {</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    <span class="comment">// and (fcmp ord x, 0), (fcmp u* x, inf) -&gt; fcmp o* x, inf</span></div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    <span class="comment">// and (fcmp ord x, 0), (fcmp u* fabs(x), inf) -&gt; fcmp o* x, inf</span></div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Left = <a class="code" href="InstCombineAndOrXor_8cpp.html#aab47f48b5ac73fccc75d0e09395dded5">matchIsFiniteTest</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>))</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a2554a96c67bdd7d0a62855a844ec55b0a945d5e233cf7d6240f6b783b36a374ff">Left</a>;</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Right = <a class="code" href="InstCombineAndOrXor_8cpp.html#aab47f48b5ac73fccc75d0e09395dded5">matchIsFiniteTest</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>))</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="README__P9_8txt.html#acc80d72f12f6f9e1d8eda2ec3d74133c">Right</a>;</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;  }</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160; </div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;}</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;<span class="comment">/// Match an fcmp against a special value that performs a test possible by</span></div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;<span class="comment">/// llvm.is.fpclass.</span></div>
<div class="line"><a name="l01503"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#a151e95d3f063067aa27c74930296a25e"> 1503</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineAndOrXor_8cpp.html#a151e95d3f063067aa27c74930296a25e">matchIsFPClassLikeFCmp</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;ClassVal,</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;                                   <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> &amp;ClassMask) {</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;  <span class="keyword">auto</span> *FCmp = dyn_cast&lt;FCmpInst&gt;(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>);</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;  <span class="keywordflow">if</span> (!FCmp || !FCmp-&gt;hasOneUse())</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160; </div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;  std::tie(ClassVal, ClassMask) = <a class="code" href="InstCombineAndOrXor_8cpp.html#a6baa2d8de7d4e93c9b6c9324733d0ec3">fcmpToClassTest</a>(</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;      FCmp-&gt;getPredicate(), FCmp-&gt;getOperand(0), FCmp-&gt;getOperand(1));</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;  <span class="keywordflow">return</span> ClassVal != <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;}</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;<span class="comment">/// or (is_fpclass x, mask0), (is_fpclass x, mask1)</span></div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;<span class="comment">///     -&gt; is_fpclass x, (mask0 | mask1)</span></div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;<span class="comment">/// and (is_fpclass x, mask0), (is_fpclass x, mask1)</span></div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;<span class="comment">///     -&gt; is_fpclass x, (mask0 &amp; mask1)</span></div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;<span class="comment">/// xor (is_fpclass x, mask0), (is_fpclass x, mask1)</span></div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;<span class="comment">///     -&gt; is_fpclass x, (mask0 ^ mask1)</span></div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InstCombinerImpl::foldLogicOfIsFPClass(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;BO,</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;                                                    <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0, <a class="code" href="classllvm_1_1Value.html">Value</a> *Op1) {</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ClassVal0 = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ClassVal1 = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> ClassMask0, ClassMask1;</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160; </div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;  <span class="comment">// Restrict to folding one fcmp into one is.fpclass for now, don&#39;t introduce a</span></div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;  <span class="comment">// new class.</span></div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;  <span class="comment">// TODO: Support forming is.fpclass out of 2 separate fcmps when codegen is</span></div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;  <span class="comment">// better.</span></div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160; </div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;  <span class="keywordtype">bool</span> IsLHSClass =</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(m_Intrinsic&lt;Intrinsic::is_fpclass&gt;(</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;                     <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(ClassVal0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">m_ConstantInt</a>(ClassMask0))));</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;  <span class="keywordtype">bool</span> IsRHSClass =</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(m_Intrinsic&lt;Intrinsic::is_fpclass&gt;(</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;                     <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(ClassVal1), <a class="code" href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">m_ConstantInt</a>(ClassMask1))));</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;  <span class="keywordflow">if</span> (((IsLHSClass &amp;&amp; IsRHSClass) ||</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;       ((!IsLHSClass &amp;&amp; <a class="code" href="InstCombineAndOrXor_8cpp.html#a151e95d3f063067aa27c74930296a25e">matchIsFPClassLikeFCmp</a>(Op0, ClassVal0, ClassMask0)) ||</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;        (!IsRHSClass &amp;&amp; <a class="code" href="InstCombineAndOrXor_8cpp.html#a151e95d3f063067aa27c74930296a25e">matchIsFPClassLikeFCmp</a>(Op1, ClassVal1, ClassMask1)))) &amp;&amp;</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;      ClassVal0 == ClassVal1) {</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    <span class="keywordtype">unsigned</span> NewClassMask;</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;    <span class="keywordflow">switch</span> (BO.<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>()) {</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;    <span class="keywordflow">case</span> Instruction::And:</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;      NewClassMask = ClassMask0 &amp; ClassMask1;</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;    <span class="keywordflow">case</span> Instruction::Or:</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;      NewClassMask = ClassMask0 | ClassMask1;</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;    <span class="keywordflow">case</span> Instruction::Xor:</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;      NewClassMask = ClassMask0 ^ ClassMask1;</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;      <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;not a binary logic operator&quot;</span>);</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    }</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160; </div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    <span class="keyword">auto</span> *II = IsLHSClass ? cast&lt;IntrinsicInst&gt;(Op0) : <a class="code" href="namespacellvm.html#ac4fc845f5ed92de63cd4474f128f5fc5">cast</a>&lt;<a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a>&gt;(Op1);</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;    II-&gt;<a class="code" href="classllvm_1_1CallBase.html#abc10b887caad109288ffceb230493a85">setArgOperand</a>(</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;        1, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(II-&gt;getArgOperand(1)-&gt;getType(), NewClassMask));</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(BO, II);</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;  }</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160; </div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;}</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;<span class="comment">/// Look for the pattern that conditionally negates a value via math operations:</span></div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;<span class="comment">///   cond.splat = sext i1 cond</span></div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;<span class="comment">///   sub = add cond.splat, x</span></div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;<span class="comment">///   xor = xor sub, cond.splat</span></div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;<span class="comment">/// and rewrite it to do the same, but via logical operations:</span></div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;<span class="comment">///   value.neg = sub 0, value</span></div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;<span class="comment">///   cond = select i1 neg, value.neg, value</span></div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InstCombinerImpl::canonicalizeConditionalNegationViaMathToSelect(</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;    <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode() == BinaryOperator::Xor &amp;&amp; <span class="stringliteral">&quot;Only for xor!&quot;</span>);</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;  <span class="comment">// As per complexity ordering, `xor` is not commutative here.</span></div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ac56cd25f664c1497623d26158a6c5997">m_c_BinOp</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>()), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>())) ||</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;      !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">m_SExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>))) ||</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;      !<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>-&gt;getType()-&gt;isIntOrIntVectorTy(1) ||</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;      !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0), <a class="code" href="namespacellvm_1_1PatternMatch.html#ad191220adaaedcfba833985509a17452">m_c_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">m_SExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))))</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNeg(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getName() + <span class="stringliteral">&quot;.neg&quot;</span>),</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;                            <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;}</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;<span class="comment">/// This a limited reassociation for a special case (see above) where we are</span></div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;<span class="comment">/// checking if two values are either both NAN (unordered) or not-NAN (ordered).</span></div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;<span class="comment">/// This could be handled more generally in &#39;-reassociation&#39;, but it seems like</span></div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;<span class="comment">/// an unlikely pattern for a large number of logic ops and fcmps.</span></div>
<div class="line"><a name="l01591"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#aa33f3f8b4a1aab74406aefba21d98510"> 1591</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineAndOrXor_8cpp.html#aa33f3f8b4a1aab74406aefba21d98510">reassociateFCmps</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;BO,</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;                                     <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> Opcode = BO.<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>();</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((Opcode == Instruction::And || Opcode == Instruction::Or) &amp;&amp;</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;         <span class="stringliteral">&quot;Expecting and/or op for fcmp transform&quot;</span>);</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160; </div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;  <span class="comment">// There are 4 commuted variants of the pattern. Canonicalize operands of this</span></div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;  <span class="comment">// logic op so an fcmp is operand 0 and a matching logic op is operand 1.</span></div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = BO.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), *Op1 = BO.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1), *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">FCmpInst::Predicate</a> Pred;</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5772946ca265c6a5c951cb331983daa5">m_FCmp</a>(Pred, <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#ab9370b798ae530641518075b0832723a">m_AnyZeroFP</a>())))</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Op0, Op1);</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160; </div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;  <span class="comment">// Match inner binop and the predicate for combining 2 NAN checks into 1.</span></div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *BO10, *BO11;</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">FCmpInst::Predicate</a> NanPred = Opcode == Instruction::And ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa3213b645e029aba8bb1b85213607d5e">FCmpInst::FCMP_ORD</a></div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;                                                           : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baf0159e4005258dc54f20b6fc227d19ed">FCmpInst::FCMP_UNO</a>;</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5772946ca265c6a5c951cb331983daa5">m_FCmp</a>(Pred, <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#ab9370b798ae530641518075b0832723a">m_AnyZeroFP</a>())) || Pred != NanPred ||</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;      !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a43ac4fbaaf63a88eb5ac05f6d3e5649c">m_BinOp</a>(Opcode, <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(BO10), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(BO11))))</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160; </div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;  <span class="comment">// The inner logic op must have a matching fcmp operand.</span></div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(BO10, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5772946ca265c6a5c951cb331983daa5">m_FCmp</a>(Pred, <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#ab9370b798ae530641518075b0832723a">m_AnyZeroFP</a>())) ||</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;      Pred != NanPred || <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType() != <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;getType())</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(BO10, BO11);</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160; </div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(BO10, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5772946ca265c6a5c951cb331983daa5">m_FCmp</a>(Pred, <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#ab9370b798ae530641518075b0832723a">m_AnyZeroFP</a>())) ||</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;      Pred != NanPred || <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType() != <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;getType())</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160; </div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;  <span class="comment">// and (fcmp ord X, 0), (and (fcmp ord Y, 0), Z) --&gt; and (fcmp ord X, Y), Z</span></div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;  <span class="comment">// or  (fcmp uno X, 0), (or  (fcmp uno Y, 0), Z) --&gt; or  (fcmp uno X, Y), Z</span></div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NewFCmp = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFCmp(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *NewFCmpInst = dyn_cast&lt;FCmpInst&gt;(NewFCmp)) {</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    <span class="comment">// Intersect FMF from the 2 source fcmps.</span></div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    NewFCmpInst-&gt;copyIRFlags(Op0);</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    NewFCmpInst-&gt;andIRFlags(BO10);</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;  }</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a02ce9966395063ac501ecbc1623deda4">BinaryOperator::Create</a>(Opcode, NewFCmp, BO11);</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;}</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;<span class="comment">/// Match variations of De Morgan&#39;s Laws:</span></div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;<span class="comment">/// (~A &amp; ~B) == (~(A | B))</span></div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;<span class="comment">/// (~A | ~B) == (~(A &amp; B))</span></div>
<div class="line"><a name="l01636"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#a28b8014cf8170890bc8ce47028e95741"> 1636</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineAndOrXor_8cpp.html#a28b8014cf8170890bc8ce47028e95741">matchDeMorgansLaws</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;                                       <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> Opcode = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode();</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((Opcode == Instruction::And || Opcode == Instruction::Or) &amp;&amp;</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;         <span class="stringliteral">&quot;Trying to match De Morgan&#39;s Laws with something other than and/or&quot;</span>);</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160; </div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;  <span class="comment">// Flip the logic operation.</span></div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> FlippedOpcode =</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;      (Opcode == Instruction::And) ? Instruction::Or : Instruction::And;</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160; </div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0), *Op1 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *A, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>;</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A)))) &amp;&amp;</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)))) &amp;&amp;</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;      !<a class="code" href="classllvm_1_1InstCombiner.html#a4f79ea1865b13e2d0915fb15370c87e9">InstCombiner::isFreeToInvert</a>(A, A-&gt;hasOneUse()) &amp;&amp;</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;      !<a class="code" href="classllvm_1_1InstCombiner.html#a4f79ea1865b13e2d0915fb15370c87e9">InstCombiner::isFreeToInvert</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>-&gt;hasOneUse())) {</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *AndOr =</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(FlippedOpcode, A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getName() + <span class="stringliteral">&quot;.demorgan&quot;</span>);</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a4f500ae0de71695b652af4c0958d8ea8">BinaryOperator::CreateNot</a>(AndOr);</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;  }</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160; </div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;  <span class="comment">// The &#39;not&#39; ops may require reassociation.</span></div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;  <span class="comment">// (A &amp; ~B) &amp; ~C --&gt; A &amp; ~(B | C)</span></div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;  <span class="comment">// (~B &amp; A) &amp; ~C --&gt; A &amp; ~(B | C)</span></div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;  <span class="comment">// (A | ~B) | ~C --&gt; A | ~(B &amp; C)</span></div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;  <span class="comment">// (~B | A) | ~C --&gt; A | ~(B &amp; C)</span></div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ac56cd25f664c1497623d26158a6c5997">m_c_BinOp</a>(Opcode, <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))))) &amp;&amp;</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))) {</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *FlippedBO = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(FlippedOpcode, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a02ce9966395063ac501ecbc1623deda4">BinaryOperator::Create</a>(Opcode, A, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(FlippedBO));</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;  }</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160; </div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;}</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160; </div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;<span class="keywordtype">bool</span> InstCombinerImpl::shouldOptimizeCast(<a class="code" href="classllvm_1_1CastInst.html">CastInst</a> *CI) {</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CastSrc = CI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160; </div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;  <span class="comment">// Noop casts and casts of constants should be eliminated trivially.</span></div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;  <span class="keywordflow">if</span> (CI-&gt;<a class="code" href="classllvm_1_1CastInst.html#a6a1a810dc09bf349d1e1481931ce2baa">getSrcTy</a>() == CI-&gt;<a class="code" href="classllvm_1_1CastInst.html#a7cf02ab81e7b0774ebf78e13f89dabfc">getDestTy</a>() || isa&lt;Constant&gt;(CastSrc))</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160; </div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;  <span class="comment">// If this cast is paired with another cast that can be eliminated, we prefer</span></div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;  <span class="comment">// to have it eliminated.</span></div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *PrecedingCI = dyn_cast&lt;CastInst&gt;(CastSrc))</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;    <span class="keywordflow">if</span> (isEliminableCastPair(PrecedingCI, CI))</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160; </div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;}</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;<span class="comment">/// Fold {and,or,xor} (cast X), C.</span></div>
<div class="line"><a name="l01689"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#a09c7f412064dea0ffea0d0f12f509ae9"> 1689</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineAndOrXor_8cpp.html#a09c7f412064dea0ffea0d0f12f509ae9">foldLogicCastConstant</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;Logic, <a class="code" href="classllvm_1_1CastInst.html">CastInst</a> *Cast,</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;                                          <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;Constant&gt;(Logic.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1));</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160; </div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;  <span class="keyword">auto</span> LogicOpc = Logic.<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>();</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *DestTy = Logic.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *SrcTy = Cast-&gt;<a class="code" href="classllvm_1_1CastInst.html#a6a1a810dc09bf349d1e1481931ce2baa">getSrcTy</a>();</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160; </div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;  <span class="comment">// Move the logic operation ahead of a zext or sext if the constant is</span></div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;  <span class="comment">// unchanged in the smaller source type. Performing the logic in a smaller</span></div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;  <span class="comment">// type may provide more information to later folds, and the smaller logic</span></div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;  <span class="comment">// instruction may be cheaper (particularly in the case of vectors).</span></div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Cast, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))))) {</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *TruncC = <a class="code" href="classllvm_1_1ConstantExpr.html#af238147cf5453729781a0fcc7322e1c6">ConstantExpr::getTrunc</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, SrcTy);</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *ZextTruncC = <a class="code" href="classllvm_1_1ConstantExpr.html#a58d6359cee16e5da66861058836dcca9">ConstantExpr::getZExt</a>(TruncC, DestTy);</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;    <span class="keywordflow">if</span> (ZextTruncC == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;      <span class="comment">// LogicOpc (zext X), C --&gt; zext (LogicOpc X, C)</span></div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NewOp = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(LogicOpc, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, TruncC);</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ZExtInst.html">ZExtInst</a>(NewOp, DestTy);</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;    }</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;  }</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160; </div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Cast, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">m_SExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))))) {</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *TruncC = <a class="code" href="classllvm_1_1ConstantExpr.html#af238147cf5453729781a0fcc7322e1c6">ConstantExpr::getTrunc</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, SrcTy);</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SextTruncC = <a class="code" href="classllvm_1_1ConstantExpr.html#aa342c9b3d47cd9bde63b80c83ead429b">ConstantExpr::getSExt</a>(TruncC, DestTy);</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    <span class="keywordflow">if</span> (SextTruncC == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;      <span class="comment">// LogicOpc (sext X), C --&gt; sext (LogicOpc X, C)</span></div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NewOp = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(LogicOpc, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, TruncC);</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1SExtInst.html">SExtInst</a>(NewOp, DestTy);</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;    }</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;  }</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160; </div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;}</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;<span class="comment">/// Fold {and,or,xor} (cast X), Y.</span></div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InstCombinerImpl::foldCastedBitwiseLogic(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;  <span class="keyword">auto</span> LogicOpc = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode();</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isBitwiseLogicOp() &amp;&amp; <span class="stringliteral">&quot;Unexpected opcode for bitwise logic folding&quot;</span>);</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160; </div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0), *Op1 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;  <a class="code" href="classllvm_1_1CastInst.html">CastInst</a> *Cast0 = dyn_cast&lt;CastInst&gt;(Op0);</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;  <span class="keywordflow">if</span> (!Cast0)</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160; </div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;  <span class="comment">// This must be a cast from an integer or integer vector source type to allow</span></div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;  <span class="comment">// transformation of the logic operation to the source type.</span></div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *DestTy = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType();</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *SrcTy = Cast0-&gt;<a class="code" href="classllvm_1_1CastInst.html#a6a1a810dc09bf349d1e1481931ce2baa">getSrcTy</a>();</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;  <span class="keywordflow">if</span> (!SrcTy-&gt;<a class="code" href="classllvm_1_1Type.html#a34ee40bb2f4f5ece47ef19e5f1f57e3c">isIntOrIntVectorTy</a>())</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160; </div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> = <a class="code" href="InstCombineAndOrXor_8cpp.html#a09c7f412064dea0ffea0d0f12f509ae9">foldLogicCastConstant</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Cast0, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>;</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160; </div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;  <a class="code" href="classllvm_1_1CastInst.html">CastInst</a> *Cast1 = dyn_cast&lt;CastInst&gt;(Op1);</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;  <span class="keywordflow">if</span> (!Cast1)</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160; </div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;  <span class="comment">// Both operands of the logic operation are casts. The casts must be the</span></div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;  <span class="comment">// same kind for reduction.</span></div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">Instruction::CastOps</a> CastOpcode = Cast0-&gt;<a class="code" href="classllvm_1_1CastInst.html#a3685b2128d8e6917000e4adc3b266ff6">getOpcode</a>();</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;  <span class="keywordflow">if</span> (CastOpcode != Cast1-&gt;<a class="code" href="classllvm_1_1CastInst.html#a3685b2128d8e6917000e4adc3b266ff6">getOpcode</a>())</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160; </div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;  <span class="comment">// If the source types do not match, but the casts are matching extends, we</span></div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;  <span class="comment">// can still narrow the logic op.</span></div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;  <span class="keywordflow">if</span> (SrcTy != Cast1-&gt;<a class="code" href="classllvm_1_1CastInst.html#a6a1a810dc09bf349d1e1481931ce2baa">getSrcTy</a>()) {</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Cast0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a247b6987d634040b8aa6fb9c5887b703">m_ZExtOrSExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)))) &amp;&amp;</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Cast1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a247b6987d634040b8aa6fb9c5887b703">m_ZExtOrSExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))))) {</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;      <span class="comment">// Cast the narrower source to the wider source type.</span></div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;      <span class="keywordtype">unsigned</span> XNumBits = <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()-&gt;getScalarSizeInBits();</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;      <span class="keywordtype">unsigned</span> YNumBits = <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;getType()-&gt;getScalarSizeInBits();</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;      <span class="keywordflow">if</span> (XNumBits &lt; YNumBits)</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;        <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCast(CastOpcode, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;getType());</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;        <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCast(CastOpcode, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType());</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;      <span class="comment">// Do the logic op in the intermediate width, then widen more.</span></div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NarrowLogic = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(LogicOpc, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#a643fe5a9e7042f032dae78109c2b1e72">CastInst::Create</a>(CastOpcode, NarrowLogic, DestTy);</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;    }</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160; </div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;    <span class="comment">// Give up for other cast opcodes.</span></div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;  }</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160; </div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Cast0Src = Cast0-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Cast1Src = Cast1-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160; </div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;  <span class="comment">// fold logic(cast(A), cast(B)) -&gt; cast(logic(A, B))</span></div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;  <span class="keywordflow">if</span> ((Cast0-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || Cast1-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>()) &amp;&amp;</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;      shouldOptimizeCast(Cast0) &amp;&amp; shouldOptimizeCast(Cast1)) {</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewOp = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(LogicOpc, Cast0Src, Cast1Src,</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;                                       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getName());</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#a643fe5a9e7042f032dae78109c2b1e72">CastInst::Create</a>(CastOpcode, NewOp, DestTy);</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;  }</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160; </div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;  <span class="comment">// For now, only &#39;and&#39;/&#39;or&#39; have optimizations after this.</span></div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;  <span class="keywordflow">if</span> (LogicOpc == Instruction::Xor)</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160; </div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;  <span class="comment">// If this is logic(cast(icmp), cast(icmp)), try to fold this even if the</span></div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;  <span class="comment">// cast is otherwise not optimizable.  This happens for vector sexts.</span></div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;  <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *ICmp0 = dyn_cast&lt;ICmpInst&gt;(Cast0Src);</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;  <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *ICmp1 = dyn_cast&lt;ICmpInst&gt;(Cast1Src);</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;  <span class="keywordflow">if</span> (ICmp0 &amp;&amp; ICmp1) {</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Res =</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;            foldAndOrOfICmps(ICmp0, ICmp1, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, LogicOpc == Instruction::And))</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#a643fe5a9e7042f032dae78109c2b1e72">CastInst::Create</a>(CastOpcode, Res, DestTy);</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;  }</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160; </div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;  <span class="comment">// If this is logic(cast(fcmp), cast(fcmp)), try to fold this even if the</span></div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;  <span class="comment">// cast is otherwise not optimizable.  This happens for vector sexts.</span></div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;  <a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a> *FCmp0 = dyn_cast&lt;FCmpInst&gt;(Cast0Src);</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;  <a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a> *FCmp1 = dyn_cast&lt;FCmpInst&gt;(Cast1Src);</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;  <span class="keywordflow">if</span> (FCmp0 &amp;&amp; FCmp1)</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *R = foldLogicOfFCmps(FCmp0, FCmp1, LogicOpc == Instruction::And))</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#a643fe5a9e7042f032dae78109c2b1e72">CastInst::Create</a>(CastOpcode, R, DestTy);</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160; </div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;}</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160; </div>
<div class="line"><a name="l01816"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#a8b70ede59539d5a0a6c0a879e48174d3"> 1816</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineAndOrXor_8cpp.html#a8b70ede59539d5a0a6c0a879e48174d3">foldAndToXor</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;                                 <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode() == Instruction::And);</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0);</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op1 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *A, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>;</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160; </div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;  <span class="comment">// Operand complexity canonicalization guarantees that the &#39;or&#39; is Op0.</span></div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;  <span class="comment">// (A | B) &amp; ~(A &amp; B) --&gt; A ^ B</span></div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;  <span class="comment">// (A | B) &amp; ~(B &amp; A) --&gt; A ^ B</span></div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a43ac4fbaaf63a88eb5ac05f6d3e5649c">m_BinOp</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)),</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;                        <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))))))</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateXor(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160; </div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;  <span class="comment">// (A | ~B) &amp; (~A | B) --&gt; ~(A ^ B)</span></div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;  <span class="comment">// (A | ~B) &amp; (B | ~A) --&gt; ~(A ^ B)</span></div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;  <span class="comment">// (~B | A) &amp; (~A | B) --&gt; ~(A ^ B)</span></div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;  <span class="comment">// (~B | A) &amp; (B | ~A) --&gt; ~(A ^ B)</span></div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;  <span class="keywordflow">if</span> (Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || Op1-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a43ac4fbaaf63a88eb5ac05f6d3e5649c">m_BinOp</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))),</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;                          <a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(A)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)))))</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a4f500ae0de71695b652af4c0958d8ea8">BinaryOperator::CreateNot</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateXor(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>));</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160; </div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;}</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160; </div>
<div class="line"><a name="l01842"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#aa68f985008cf9a9a6dcdac5e59b84baa"> 1842</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineAndOrXor_8cpp.html#aa68f985008cf9a9a6dcdac5e59b84baa">foldOrToXor</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;                                <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode() == Instruction::Or);</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0);</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op1 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *A, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>;</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160; </div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;  <span class="comment">// Operand complexity canonicalization guarantees that the &#39;and&#39; is Op0.</span></div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;  <span class="comment">// (A &amp; B) | ~(A | B) --&gt; ~(A ^ B)</span></div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;  <span class="comment">// (A &amp; B) | ~(B | A) --&gt; ~(A ^ B)</span></div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;  <span class="keywordflow">if</span> (Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || Op1-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))) &amp;&amp;</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)))))</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a4f500ae0de71695b652af4c0958d8ea8">BinaryOperator::CreateNot</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateXor(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>));</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160; </div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;  <span class="comment">// Operand complexity canonicalization guarantees that the &#39;xor&#39; is Op0.</span></div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;  <span class="comment">// (A ^ B) | ~(A | B) --&gt; ~(A &amp; B)</span></div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;  <span class="comment">// (A ^ B) | ~(B | A) --&gt; ~(A &amp; B)</span></div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;  <span class="keywordflow">if</span> (Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || Op1-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))) &amp;&amp;</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)))))</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a4f500ae0de71695b652af4c0958d8ea8">BinaryOperator::CreateNot</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>));</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160; </div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;  <span class="comment">// (A &amp; ~B) | (~A &amp; B) --&gt; A ^ B</span></div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;  <span class="comment">// (A &amp; ~B) | (B &amp; ~A) --&gt; A ^ B</span></div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;  <span class="comment">// (~B &amp; A) | (~A &amp; B) --&gt; A ^ B</span></div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;  <span class="comment">// (~B &amp; A) | (B &amp; ~A) --&gt; A ^ B</span></div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)))) &amp;&amp;</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))))</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateXor(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160; </div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;}</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;<span class="comment">/// Return true if a constant shift amount is always less than the specified</span></div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;<span class="comment">/// bit-width. If not, the shift could create poison in the narrower type.</span></div>
<div class="line"><a name="l01878"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#a3f025ca3dbad2ca618ad4bf63fa51bb0"> 1878</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineAndOrXor_8cpp.html#a3f025ca3dbad2ca618ad4bf63fa51bb0">canNarrowShiftAmt</a>(<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>) {</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> Threshold(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getType()-&gt;getScalarSizeInBits(), <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>);</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#abb22519fa3bf66d9e0bc6d1a733a5821">m_SpecificInt_ICMP</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>, Threshold));</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;}</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;<span class="comment">/// Try to use narrower ops (sink zext ops) for an &#39;and&#39; with binop operand and</span></div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;<span class="comment">/// a common zext operand: and (binop (zext X), C), (zext X).</span></div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InstCombinerImpl::narrowMaskedBinOp(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;And) {</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;  <span class="comment">// This transform could also apply to {or, and, xor}, but there are better</span></div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;  <span class="comment">// folds for those cases, so we don&#39;t expect those patterns here. AShr is not</span></div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;  <span class="comment">// handled because it should always be transformed to LShr in this sequence.</span></div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;  <span class="comment">// The subtract transform is different because it has a constant on the left.</span></div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;  <span class="comment">// Add/mul commute the constant to RHS; sub with constant RHS becomes add.</span></div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>.getOperand(0), *Op1 = <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>.getOperand(1);</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op1), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))) &amp;&amp;</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;      !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a971522b36bf432ad69a0083581ab4108">m_Mul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op1), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))) &amp;&amp;</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;      !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">m_LShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op1), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))) &amp;&amp;</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;      !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op1), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))) &amp;&amp;</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;      !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ac3ed5602889a22db44a16e1b97fac5b8">m_Sub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op1)))))</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160; </div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))) || Op1-&gt;<a class="code" href="classllvm_1_1Value.html#a72fb137716cff838d389e392b9729dc9">hasNUsesOrMore</a>(3))</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160; </div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>.getType();</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;VectorType&gt;(Ty) &amp;&amp; !shouldChangeType(Ty, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()))</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160; </div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;  <span class="comment">// If we&#39;re narrowing a shift, the shift amount must be safe (less than the</span></div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;  <span class="comment">// width) in the narrower type. If the shift amount is greater, instsimplify</span></div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;  <span class="comment">// usually handles that case, but we can&#39;t guarantee/assert it.</span></div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> Opc = cast&lt;BinaryOperator&gt;(Op0)-&gt;getOpcode();</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;  <span class="keywordflow">if</span> (Opc == Instruction::LShr || Opc == Instruction::Shl)</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="InstCombineAndOrXor_8cpp.html#a3f025ca3dbad2ca618ad4bf63fa51bb0">canNarrowShiftAmt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()-&gt;getScalarSizeInBits()))</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160; </div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;  <span class="comment">// and (sub C, (zext X)), (zext X) --&gt; zext (and (sub C&#39;, X), X)</span></div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;  <span class="comment">// and (binop (zext X), C), (zext X) --&gt; zext (and (binop X, C&#39;), X)</span></div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NewC = <a class="code" href="classllvm_1_1ConstantExpr.html#af238147cf5453729781a0fcc7322e1c6">ConstantExpr::getTrunc</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType());</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NewBO = Opc == Instruction::Sub ? <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(Opc, NewC, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;                                         : <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(Opc, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, NewC);</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ZExtInst.html">ZExtInst</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(NewBO, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), Ty);</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;}</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;<span class="comment">/// Try folding relatively complex patterns for both And and Or operations</span></div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;<span class="comment">/// with all And and Or swapped.</span></div>
<div class="line"><a name="l01926"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#a22537aeb0cd6de9b7ec250a476b3f728"> 1926</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineAndOrXor_8cpp.html#a22537aeb0cd6de9b7ec250a476b3f728">foldComplexAndOrPatterns</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;                                             <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> Opcode = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode();</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Opcode == Instruction::And || Opcode == Instruction::Or);</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160; </div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;  <span class="comment">// Flip the logic operation.</span></div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> FlippedOpcode =</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;      (Opcode == Instruction::And) ? Instruction::Or : Instruction::And;</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160; </div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0), *Op1 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *A, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, *<a class="code" href="namespacellvm_1_1NVPTXISD.html#ab995b6d422b079c863075e073b2eb96ba7cff9cc4a40fe2b19129ee8e9b0ec645">Dummy</a>;</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160; </div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;  <span class="comment">// Match following expressions:</span></div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;  <span class="comment">// (~(A | B) &amp; C)</span></div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;  <span class="comment">// (~(A &amp; B) | C)</span></div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;  <span class="comment">// Captures X = ~(A | B) or ~(A &amp; B)</span></div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> matchNotOrAnd =</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;      [Opcode, FlippedOpcode](<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, <span class="keyword">auto</span> m_A, <span class="keyword">auto</span> m_B, <span class="keyword">auto</span> m_C,</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;                              <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <span class="keywordtype">bool</span> CountUses = <span class="keyword">false</span>) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;    <span class="keywordflow">if</span> (CountUses &amp;&amp; !<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>-&gt;hasOneUse())</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160; </div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ac56cd25f664c1497623d26158a6c5997">m_c_BinOp</a>(FlippedOpcode,</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;                            <a class="code" href="namespacellvm_1_1PatternMatch.html#a575c2299c6f145ba3a12efa20829db43">m_CombineAnd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>),</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;                                         <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ac56cd25f664c1497623d26158a6c5997">m_c_BinOp</a>(Opcode, m_A, m_B))),</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;                            m_C)))</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;      <span class="keywordflow">return</span> !CountUses || <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;hasOneUse();</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160; </div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;  };</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160; </div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;  <span class="comment">// (~(A | B) &amp; C) | ... --&gt; ...</span></div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;  <span class="comment">// (~(A &amp; B) | C) &amp; ... --&gt; ...</span></div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;  <span class="comment">// TODO: One use checks are conservative. We just need to check that a total</span></div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;  <span class="comment">//       number of multiple used values does not exceed reduction</span></div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;  <span class="comment">//       in operations.</span></div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;  <span class="keywordflow">if</span> (matchNotOrAnd(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>), <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)) {</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;    <span class="comment">// (~(A | B) &amp; C) | (~(A | C) &amp; B) --&gt; (B ^ C) &amp; ~A</span></div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;    <span class="comment">// (~(A &amp; B) | C) &amp; (~(A &amp; C) | B) --&gt; ~((B ^ C) &amp; A)</span></div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;    <span class="keywordflow">if</span> (matchNotOrAnd(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), <a class="code" href="namespacellvm_1_1NVPTXISD.html#ab995b6d422b079c863075e073b2eb96ba7cff9cc4a40fe2b19129ee8e9b0ec645">Dummy</a>,</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;                      <span class="keyword">true</span>)) {</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateXor(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;      <span class="keywordflow">return</span> (Opcode == Instruction::Or)</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;                 ? BinaryOperator::CreateAnd(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(A))</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;                 : <a class="code" href="classllvm_1_1BinaryOperator.html#a4f500ae0de71695b652af4c0958d8ea8">BinaryOperator::CreateNot</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a>, A));</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;    }</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160; </div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;    <span class="comment">// (~(A | B) &amp; C) | (~(B | C) &amp; A) --&gt; (A ^ C) &amp; ~B</span></div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;    <span class="comment">// (~(A &amp; B) | C) &amp; (~(B &amp; C) | A) --&gt; ~((A ^ C) &amp; B)</span></div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;    <span class="keywordflow">if</span> (matchNotOrAnd(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A), <a class="code" href="namespacellvm_1_1NVPTXISD.html#ab995b6d422b079c863075e073b2eb96ba7cff9cc4a40fe2b19129ee8e9b0ec645">Dummy</a>,</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;                      <span class="keyword">true</span>)) {</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateXor(A, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;      <span class="keywordflow">return</span> (Opcode == Instruction::Or)</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;                 ? BinaryOperator::CreateAnd(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;                 : <a class="code" href="classllvm_1_1BinaryOperator.html#a4f500ae0de71695b652af4c0958d8ea8">BinaryOperator::CreateNot</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>));</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;    }</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160; </div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;    <span class="comment">// (~(A | B) &amp; C) | ~(A | C) --&gt; ~((B &amp; C) | A)</span></div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;    <span class="comment">// (~(A &amp; B) | C) &amp; ~(A &amp; C) --&gt; ~((B | C) &amp; A)</span></div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;                       <a class="code" href="namespacellvm_1_1PatternMatch.html#ac56cd25f664c1497623d26158a6c5997">m_c_BinOp</a>(Opcode, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))))))</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a4f500ae0de71695b652af4c0958d8ea8">BinaryOperator::CreateNot</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;          Opcode, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(FlippedOpcode, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>), A));</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160; </div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;    <span class="comment">// (~(A | B) &amp; C) | ~(B | C) --&gt; ~((A &amp; C) | B)</span></div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;    <span class="comment">// (~(A &amp; B) | C) &amp; ~(B &amp; C) --&gt; ~((A | C) &amp; B)</span></div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;                       <a class="code" href="namespacellvm_1_1PatternMatch.html#ac56cd25f664c1497623d26158a6c5997">m_c_BinOp</a>(Opcode, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))))))</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a4f500ae0de71695b652af4c0958d8ea8">BinaryOperator::CreateNot</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;          Opcode, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(FlippedOpcode, A, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>), <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>));</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160; </div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;    <span class="comment">// (~(A | B) &amp; C) | ~(C | (A ^ B)) --&gt; ~((A | B) &amp; (C | (A ^ B)))</span></div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;    <span class="comment">// Note, the pattern with swapped and/or is not handled because the</span></div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;    <span class="comment">// result is more undefined than a source:</span></div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;    <span class="comment">// (~(A &amp; B) | C) &amp; ~(C &amp; (A ^ B)) --&gt; (A ^ B ^ C) | ~(A | C) is invalid.</span></div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;    <span class="keywordflow">if</span> (Opcode == Instruction::Or &amp;&amp; Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp;</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a575c2299c6f145ba3a12efa20829db43">m_CombineAnd</a>(</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;                       <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>),</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;                       <a class="code" href="namespacellvm_1_1PatternMatch.html#ac56cd25f664c1497623d26158a6c5997">m_c_BinOp</a>(Opcode, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>),</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;                                 <a class="code" href="namespacellvm_1_1PatternMatch.html#a5cd1934b6c8ddec3a2d161ce710d59bc">m_c_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)))))))) {</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;      <span class="comment">// X = ~(A | B)</span></div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;      <span class="comment">// Y = (C | (A ^ B)</span></div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a> = cast&lt;BinaryOperator&gt;(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)-&gt;getOperand(0);</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a4f500ae0de71695b652af4c0958d8ea8">BinaryOperator::CreateNot</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>));</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;    }</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;  }</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160; </div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;  <span class="comment">// (~A &amp; B &amp; C) | ... --&gt; ...</span></div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;  <span class="comment">// (~A | B | C) | ... --&gt; ...</span></div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;  <span class="comment">// TODO: One use checks are conservative. We just need to check that a total</span></div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;  <span class="comment">//       number of multiple used values does not exceed reduction</span></div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;  <span class="comment">//       in operations.</span></div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0,</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;            <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ac56cd25f664c1497623d26158a6c5997">m_c_BinOp</a>(FlippedOpcode,</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;                               <a class="code" href="namespacellvm_1_1PatternMatch.html#a43ac4fbaaf63a88eb5ac05f6d3e5649c">m_BinOp</a>(FlippedOpcode, <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)),</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;                               <a class="code" href="namespacellvm_1_1PatternMatch.html#a575c2299c6f145ba3a12efa20829db43">m_CombineAnd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A)))))) ||</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ac56cd25f664c1497623d26158a6c5997">m_c_BinOp</a>(</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;                     FlippedOpcode,</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;                     <a class="code" href="namespacellvm_1_1PatternMatch.html#ac56cd25f664c1497623d26158a6c5997">m_c_BinOp</a>(FlippedOpcode, <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>),</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;                               <a class="code" href="namespacellvm_1_1PatternMatch.html#a575c2299c6f145ba3a12efa20829db43">m_CombineAnd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A)))),</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;                     <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))))) {</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;    <span class="comment">// X = ~A</span></div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;    <span class="comment">// (~A &amp; B &amp; C) | ~(A | B | C) --&gt; ~(A | (B ^ C))</span></div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;    <span class="comment">// (~A | B | C) &amp; ~(A &amp; B &amp; C) --&gt; (~A | (B ^ C))</span></div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ac56cd25f664c1497623d26158a6c5997">m_c_BinOp</a>(</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;                       Opcode, <a class="code" href="namespacellvm_1_1PatternMatch.html#ac56cd25f664c1497623d26158a6c5997">m_c_BinOp</a>(Opcode, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)),</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;                       <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))))) ||</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ac56cd25f664c1497623d26158a6c5997">m_c_BinOp</a>(</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;                       Opcode, <a class="code" href="namespacellvm_1_1PatternMatch.html#ac56cd25f664c1497623d26158a6c5997">m_c_BinOp</a>(Opcode, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)),</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;                       <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A))))) ||</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ac56cd25f664c1497623d26158a6c5997">m_c_BinOp</a>(</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;                       Opcode, <a class="code" href="namespacellvm_1_1PatternMatch.html#ac56cd25f664c1497623d26158a6c5997">m_c_BinOp</a>(Opcode, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)),</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;                       <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)))))) {</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateXor(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;      <span class="keywordflow">return</span> (Opcode == Instruction::Or)</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;                 ? <a class="code" href="classllvm_1_1BinaryOperator.html#a4f500ae0de71695b652af4c0958d8ea8">BinaryOperator::CreateNot</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateOr(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a>, A))</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;                 : BinaryOperator::CreateOr(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;    }</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160; </div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;    <span class="comment">// (~A &amp; B &amp; C) | ~(A | B) --&gt; (C | ~B) &amp; ~A</span></div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;    <span class="comment">// (~A | B | C) &amp; ~(A &amp; B) --&gt; (C &amp; ~B) | ~A</span></div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;                       <a class="code" href="namespacellvm_1_1PatternMatch.html#ac56cd25f664c1497623d26158a6c5997">m_c_BinOp</a>(Opcode, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)))))))</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a02ce9966395063ac501ecbc1623deda4">BinaryOperator::Create</a>(</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;          FlippedOpcode, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(Opcode, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)),</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;          <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160; </div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;    <span class="comment">// (~A &amp; B &amp; C) | ~(A | C) --&gt; (B | ~C) &amp; ~A</span></div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;    <span class="comment">// (~A | B | C) &amp; ~(A &amp; C) --&gt; (B &amp; ~C) | ~A</span></div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;                       <a class="code" href="namespacellvm_1_1PatternMatch.html#ac56cd25f664c1497623d26158a6c5997">m_c_BinOp</a>(Opcode, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))))))</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a02ce9966395063ac501ecbc1623deda4">BinaryOperator::Create</a>(</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;          FlippedOpcode, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(Opcode, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)),</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;          <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;  }</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160; </div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;}</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;<span class="comment">/// Try to reassociate a pair of binops so that values with one use only are</span></div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;<span class="comment">/// part of the same instruction. This may enable folds that are limited with</span></div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;<span class="comment">/// multi-use restrictions and makes it more likely to match other patterns that</span></div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;<span class="comment">/// are looking for a common operand.</span></div>
<div class="line"><a name="l02069"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#affac2d5de1541e56c48dd8df0c7d11ab"> 2069</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineAndOrXor_8cpp.html#affac2d5de1541e56c48dd8df0c7d11ab">reassociateForUses</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;BO,</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;                                       <a class="code" href="classllvm_1_1InstCombiner.html#a19c4df37b96c2a73991556b696924584">InstCombinerImpl::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> Opcode = BO.<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>();</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, *<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>;</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;BO,</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;            <a class="code" href="namespacellvm_1_1PatternMatch.html#ac56cd25f664c1497623d26158a6c5997">m_c_BinOp</a>(Opcode, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a43ac4fbaaf63a88eb5ac05f6d3e5649c">m_BinOp</a>(Opcode, <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))),</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;                      <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>))))) {</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;    <span class="keywordflow">if</span> (!isa&lt;Constant&gt;(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>) &amp;&amp; !isa&lt;Constant&gt;(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>) &amp;&amp; !isa&lt;Constant&gt;(<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>)) {</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;      <span class="comment">// (X op Y) op Z --&gt; (Y op Z) op X</span></div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;hasOneUse()) {</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *YZ = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(Opcode, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>);</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a02ce9966395063ac501ecbc1623deda4">BinaryOperator::Create</a>(Opcode, YZ, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;      }</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;      <span class="comment">// (X op Y) op Z --&gt; (X op Z) op Y</span></div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;hasOneUse()) {</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *XZ = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(Opcode, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>);</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a02ce9966395063ac501ecbc1623deda4">BinaryOperator::Create</a>(Opcode, XZ, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;      }</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;    }</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;  }</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160; </div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;}</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160; </div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;<span class="comment">// Match</span></div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;<span class="comment">// (X + C2) | C</span></div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;<span class="comment">// (X + C2) ^ C</span></div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;<span class="comment">// (X + C2) &amp; C</span></div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;<span class="comment">// and convert to do the bitwise logic first:</span></div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;<span class="comment">// (X | C) + C2</span></div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;<span class="comment">// (X ^ C) + C2</span></div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;<span class="comment">// (X &amp; C) + C2</span></div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;<span class="comment">// iff bits affected by logic op are lower than last bit affected by math op</span></div>
<div class="line"><a name="l02102"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#a8855aa9db25fdae341f388f891bec03a"> 2102</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineAndOrXor_8cpp.html#a8855aa9db25fdae341f388f891bec03a">canonicalizeLogicFirst</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;                                           <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType();</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> OpC = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode();</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0);</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op1 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, *C2;</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160; </div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;  <span class="keywordflow">if</span> (!(<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(C2)))) &amp;&amp;</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))))</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160; </div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a> = Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;  <span class="keywordtype">unsigned</span> LastOneMath = <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a> - C2-&gt;<a class="code" href="classllvm_1_1APInt.html#a9a99431f0828d0222c617eb876bc5d34">countTrailingZeros</a>();</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160; </div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;  <span class="keywordflow">switch</span> (OpC) {</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;  <span class="keywordflow">case</span> Instruction::And:</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;countLeadingOnes() &lt; LastOneMath)</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;  <span class="keywordflow">case</span> Instruction::Xor:</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;  <span class="keywordflow">case</span> Instruction::Or:</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;countLeadingZeros() &lt; LastOneMath)</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unexpected BinaryOp!&quot;</span>);</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;  }</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160; </div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NewBinOp = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(OpC, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>));</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="Reassociate_8cpp.html#a680ae08c1b9b93cebdd6cbb726fe8f3d">BinaryOperator::CreateAdd</a>(NewBinOp, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, *C2));</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;}</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160; </div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;<span class="comment">// FIXME: We use commutative matchers (m_c_*) for some, but not all, matches</span></div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;<span class="comment">// here. We should standardize that construct where it is needed or choose some</span></div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;<span class="comment">// other way to ensure that commutated variants of patterns are not missed.</span></div>
<div class="line"><a name="l02139"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a648710a93ceb0bbddf0a2ae7a8bb2ca5"> 2139</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a648710a93ceb0bbddf0a2ae7a8bb2ca5">InstCombinerImpl::visitAnd</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType();</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160; </div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#a8f751e3ed5adc61048480e9fd0e257cc">simplifyAndInst</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1),</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;                                 SQ.getWithInstruction(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)))</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160; </div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;  <span class="keywordflow">if</span> (SimplifyAssociativeOrCommutative(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160; </div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = foldVectorBinop(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160; </div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Phi = foldBinopWithPhiOperands(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;    <span class="keywordflow">return</span> Phi;</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160; </div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;  <span class="comment">// See if we can simplify any instructions used by the instruction whose sole</span></div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;  <span class="comment">// purpose is to compute bits we don&#39;t care about.</span></div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;  <span class="keywordflow">if</span> (SimplifyDemandedInstructionBits(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160; </div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;  <span class="comment">// Do this before using distributive laws to catch simple and/or/not patterns.</span></div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a> = <a class="code" href="InstCombineAndOrXor_8cpp.html#a8b70ede59539d5a0a6c0a879e48174d3">foldAndToXor</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a>;</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160; </div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = <a class="code" href="InstCombineAndOrXor_8cpp.html#a22537aeb0cd6de9b7ec250a476b3f728">foldComplexAndOrPatterns</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160; </div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;  <span class="comment">// (A|B)&amp;(A|C) -&gt; A|(B&amp;C) etc</span></div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = foldUsingDistributiveLaws(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160; </div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="InstCombineAndOrXor_8cpp.html#aed3110e8dfc807586686091e1b17995d">SimplifyBSwap</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160; </div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0), *Op1 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160; </div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a595e5029858e33416e500bed9317d309">m_LogicalShift</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)))) &amp;&amp;</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>())) {</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;    <span class="comment">// (1 &lt;&lt; X) &amp; 1 --&gt; zext(X == 0)</span></div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;    <span class="comment">// (1 &gt;&gt; X) &amp; 1 --&gt; zext(X == 0)</span></div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *IsZero = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmpEQ(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, 0));</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ZExtInst.html">ZExtInst</a>(IsZero, Ty);</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;  }</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160; </div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;  <span class="comment">// (-(X &amp; 1)) &amp; Y --&gt; (X &amp; 1) == 0 ? 0 : Y</span></div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Neg;</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;            <a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a575c2299c6f145ba3a12efa20829db43">m_CombineAnd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Neg),</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;                                 <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2fed53ed2b3225752bd9e4fce4967361">m_Neg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>())))),</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;                    <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)))) {</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Cmp = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIsNull(Neg);</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(Cmp, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(Ty), <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;  }</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160; </div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))) {</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *XorC;</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(XorC))))) {</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;      <span class="comment">// (X ^ C1) &amp; C2 --&gt; (X &amp; C2) ^ (C1&amp;C2)</span></div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *NewC = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &amp; *XorC);</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, Op1);</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;      <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>-&gt;takeName(Op0);</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateXor(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>, NewC);</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;    }</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160; </div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *OrC;</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(OrC))))) {</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;      <span class="comment">// (X | C1) &amp; C2 --&gt; (X &amp; C2^(C1&amp;C2)) | (C1&amp;C2)</span></div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;      <span class="comment">// NOTE: This reduces the number of bits set in the &amp; mask, which</span></div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;      <span class="comment">// can expose opportunities for store narrowing for scalars.</span></div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;      <span class="comment">// NOTE: SimplifyDemandedBits should have already removed bits from C1</span></div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;      <span class="comment">// that aren&#39;t set in C2. Meaning we can replace (C1&amp;C2) with C1 in</span></div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;      <span class="comment">// above, but this feels safer.</span></div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> Together = *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &amp; *OrC;</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, Together ^ *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>));</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;      <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>-&gt;takeName(Op0);</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateOr(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, Together));</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;    }</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160; </div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a> = Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *ShiftC;</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">m_SExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a64153676e101a130bbbaaf91635d253a">m_AShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(ShiftC))))) &amp;&amp;</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;        ShiftC-&gt;<a class="code" href="classllvm_1_1APInt.html#a545e8d5dfa1688acea0d0e275b03682f">ult</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a>)) {</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;      <span class="keywordflow">if</span> (*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> == <a class="code" href="classllvm_1_1APInt.html#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a>, <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a> - ShiftC-&gt;<a class="code" href="classllvm_1_1APInt.html#a217e0207d9cc8e046c2dccbf0e4bb198">getZExtValue</a>())) {</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;        <span class="comment">// We are clearing high bits that were potentially set by sext+ashr:</span></div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;        <span class="comment">// and (sext (ashr X, ShiftC)), C --&gt; lshr (sext X), ShiftC</span></div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Sext = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSExt(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, Ty);</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *ShAmtC = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, ShiftC-&gt;<a class="code" href="classllvm_1_1APInt.html#a1dc76cc8bf703e6ada68bededcbb9573">zext</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a>));</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;        <span class="keywordflow">return</span> BinaryOperator::CreateLShr(Sext, ShAmtC);</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;      }</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;    }</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160; </div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;    <span class="comment">// If this &#39;and&#39; clears the sign-bits added by ashr, replace with lshr:</span></div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;    <span class="comment">// and (ashr X, ShiftC), C --&gt; lshr X, ShiftC</span></div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a64153676e101a130bbbaaf91635d253a">m_AShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(ShiftC))) &amp;&amp; ShiftC-&gt;<a class="code" href="classllvm_1_1APInt.html#a545e8d5dfa1688acea0d0e275b03682f">ult</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a>) &amp;&amp;</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;        <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isMask(<a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a> - ShiftC-&gt;<a class="code" href="classllvm_1_1APInt.html#a217e0207d9cc8e046c2dccbf0e4bb198">getZExtValue</a>()))</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateLShr(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, *ShiftC));</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160; </div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *AddC;</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(AddC)))) {</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;      <span class="comment">// If we add zeros to every bit below a mask, the add has no effect:</span></div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;      <span class="comment">// (X + AddC) &amp; LowMaskC --&gt; X &amp; LowMaskC</span></div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;      <span class="keywordtype">unsigned</span> Ctlz = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;<a class="code" href="classllvm_1_1APInt.html#aa074b9f5a1efaa0fd8aa4522593f299a">countLeadingZeros</a>();</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> LowMask(<a class="code" href="classllvm_1_1APInt.html#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a>, <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a> - Ctlz));</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;      <span class="keywordflow">if</span> ((*AddC &amp; LowMask).<a class="code" href="Lint_8cpp.html#a45005634b54e2126cb3e6ec0dbc9ade4">isZero</a>())</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;        <span class="keywordflow">return</span> BinaryOperator::CreateAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, Op1);</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160; </div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;      <span class="comment">// If we are masking the result of the add down to exactly one bit and</span></div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;      <span class="comment">// the constant we are adding has no bits set below that bit, then the</span></div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;      <span class="comment">// add is flipping a single bit. Example:</span></div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;      <span class="comment">// (X + 4) &amp; 4 --&gt; (X &amp; 4) ^ 4</span></div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;      <span class="keywordflow">if</span> (Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp; <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isPowerOf2() &amp;&amp; (*AddC &amp; (*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> - 1)) == 0) {</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &amp; *AddC) != 0 &amp;&amp; <span class="stringliteral">&quot;Expected common bit&quot;</span>);</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewAnd = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, Op1);</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;        <span class="keywordflow">return</span> BinaryOperator::CreateXor(NewAnd, Op1);</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;      }</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;    }</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160; </div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;    <span class="comment">// ((C1 OP zext(X)) &amp; C2) -&gt; zext((C1 OP X) &amp; C2) if C2 fits in the</span></div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;    <span class="comment">// bitwidth of X and OP behaves well when given trunc(C1) and X.</span></div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;    <span class="keyword">auto</span> isNarrowableBinOpcode = [](<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) {</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;      <span class="keywordflow">switch</span> (<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>-&gt;getOpcode()) {</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;      <span class="keywordflow">case</span> Instruction::Xor:</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;      <span class="keywordflow">case</span> Instruction::Or:</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Instruction::Mul</a>:</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a>:</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;      <span class="keywordflow">case</span> Instruction::Sub:</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;      }</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;    };</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;    <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *BO;</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a43ac4fbaaf63a88eb5ac05f6d3e5649c">m_BinOp</a>(BO))) &amp;&amp; isNarrowableBinOpcode(BO)) {</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> BOpcode = BO-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>();</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>;</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;      <span class="comment">// TODO: The one-use restrictions could be relaxed a little if the AND</span></div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;      <span class="comment">// is going to be removed.</span></div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;      <span class="comment">// Try to narrow the &#39;and&#39; and a binop with constant operand:</span></div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;      <span class="comment">// and (bo (zext X), C1), C --&gt; zext (and (bo X, TruncC1), TruncC)</span></div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(BO, <a class="code" href="namespacellvm_1_1PatternMatch.html#ac56cd25f664c1497623d26158a6c5997">m_c_BinOp</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>))) &amp;&amp;</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;          <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isIntN(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()-&gt;getScalarSizeInBits())) {</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;        <span class="keywordtype">unsigned</span> XWidth = <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()-&gt;getScalarSizeInBits();</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *TruncC1 = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType(), <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>-&gt;trunc(XWidth));</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *BinOp = isa&lt;ZExtInst&gt;(BO-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0))</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;                           ? <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(BOpcode, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, TruncC1)</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;                           : <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(BOpcode, TruncC1, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *TruncC = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType(), <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;trunc(XWidth));</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(BinOp, TruncC);</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ZExtInst.html">ZExtInst</a>(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>, Ty);</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;      }</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160; </div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;      <span class="comment">// Similar to above: if the mask matches the zext input width, then the</span></div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;      <span class="comment">// &#39;and&#39; can be eliminated, so we can truncate the other variable op:</span></div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;      <span class="comment">// and (bo (zext X), Y), C --&gt; zext (bo X, (trunc Y))</span></div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;      <span class="keywordflow">if</span> (isa&lt;Instruction&gt;(BO-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)) &amp;&amp;</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;          <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(BO-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)))) &amp;&amp;</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;          <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isMask(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()-&gt;getScalarSizeInBits())) {</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;        <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = BO-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *TrY = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateTrunc(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType(), <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;getName() + <span class="stringliteral">&quot;.tr&quot;</span>);</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewBO =</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;            <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(BOpcode, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, TrY, BO-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;.narrow&quot;</span>);</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ZExtInst.html">ZExtInst</a>(NewBO, Ty);</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;      }</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;      <span class="comment">// and (bo Y, (zext X)), C --&gt; zext (bo (trunc Y), X)</span></div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;      <span class="keywordflow">if</span> (isa&lt;Instruction&gt;(BO-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1)) &amp;&amp;</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;          <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(BO-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)))) &amp;&amp;</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;          <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isMask(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()-&gt;getScalarSizeInBits())) {</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;        <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = BO-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *TrY = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateTrunc(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType(), <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;getName() + <span class="stringliteral">&quot;.tr&quot;</span>);</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewBO =</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;            <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(BOpcode, TrY, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, BO-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;.narrow&quot;</span>);</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ZExtInst.html">ZExtInst</a>(NewBO, Ty);</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;      }</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;    }</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160; </div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;    <span class="comment">// This is intentionally placed after the narrowing transforms for</span></div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;    <span class="comment">// efficiency (transform directly to the narrow logic op if possible).</span></div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;    <span class="comment">// If the mask is only needed on one incoming arm, push the &#39;and&#39; op up.</span></div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)))) ||</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))))) {</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> NotAndMask(~(*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>));</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">BinaryOperator::BinaryOps</a> BinOp = cast&lt;BinaryOperator&gt;(Op0)-&gt;getOpcode();</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#aedbf3998b4ff72347a45cb4169d120db">MaskedValueIsZero</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, NotAndMask, 0, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;        <span class="comment">// Not masking anything out for the LHS, move mask to RHS.</span></div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;        <span class="comment">// and ({x}or X, Y), C --&gt; {x}or X, (and Y, C)</span></div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewRHS = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, Op1, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;getName() + <span class="stringliteral">&quot;.masked&quot;</span>);</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a02ce9966395063ac501ecbc1623deda4">BinaryOperator::Create</a>(BinOp, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, NewRHS);</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;      }</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;      <span class="keywordflow">if</span> (!isa&lt;Constant&gt;(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>) &amp;&amp; <a class="code" href="namespacellvm.html#aedbf3998b4ff72347a45cb4169d120db">MaskedValueIsZero</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, NotAndMask, 0, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;        <span class="comment">// Not masking anything out for the RHS, move mask to LHS.</span></div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;        <span class="comment">// and ({x}or X, Y), C --&gt; {x}or (and X, C), Y</span></div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewLHS = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, Op1, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getName() + <span class="stringliteral">&quot;.masked&quot;</span>);</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a02ce9966395063ac501ecbc1623deda4">BinaryOperator::Create</a>(BinOp, NewLHS, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;      }</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;    }</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160; </div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;    <span class="comment">// When the mask is a power-of-2 constant and op0 is a shifted-power-of-2</span></div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;    <span class="comment">// constant, test if the shift amount equals the offset bit index:</span></div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;    <span class="comment">// (ShiftC &lt;&lt; X) &amp; C --&gt; X == (log2(C) - log2(ShiftC)) ? C : 0</span></div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;    <span class="comment">// (ShiftC &gt;&gt; X) &amp; C --&gt; X == (log2(ShiftC) - log2(C)) ? C : 0</span></div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isPowerOf2() &amp;&amp;</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a595e5029858e33416e500bed9317d309">m_LogicalShift</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ad5e60756e331a97669d11b5c9d8691a2">m_Power2</a>(ShiftC), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))))) {</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;      <span class="keywordtype">int</span> Log2ShiftC = ShiftC-&gt;<a class="code" href="classllvm_1_1APInt.html#a6f1d5427c61a0f0159f6e85f41944c5c">exactLogBase2</a>();</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;      <span class="keywordtype">int</span> Log2C = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;exactLogBase2();</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;      <span class="keywordtype">bool</span> IsShiftLeft =</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;         cast&lt;BinaryOperator&gt;(Op0)-&gt;getOpcode() == Instruction::Shl;</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;      <span class="keywordtype">int</span> BitNum = IsShiftLeft ? Log2C - Log2ShiftC : Log2ShiftC - Log2C;</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(BitNum &gt;= 0 &amp;&amp; <span class="stringliteral">&quot;Expected demanded bits to handle impossible mask&quot;</span>);</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Cmp = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmpEQ(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, BitNum));</div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(Cmp, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>),</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;                                <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(Ty));</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;    }</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160; </div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, *C2;</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *C3 = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;    <span class="keywordflow">if</span> (C3-&gt;<a class="code" href="classllvm_1_1APInt.html#ad1b0513de876d1c85cf6268ca21b2c86">isPowerOf2</a>()) {</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Log2C3 = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, C3-&gt;<a class="code" href="classllvm_1_1APInt.html#a9a99431f0828d0222c617eb876bc5d34">countTrailingZeros</a>());</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">m_LShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aec0ccdbde0581b3aae7f001634a34d8e">m_ImmConstant</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)),</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;                                     <a class="code" href="namespacellvm_1_1PatternMatch.html#aec0ccdbde0581b3aae7f001634a34d8e">m_ImmConstant</a>(C2)))) &amp;&amp;</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;          <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ad5e60756e331a97669d11b5c9d8691a2">m_Power2</a>())) {</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Log2C1 = <a class="code" href="classllvm_1_1ConstantExpr.html#af46fd5126112a587bb12f09b1c0e385b">ConstantExpr::getExactLogBase2</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>);</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *LshrC = <a class="code" href="classllvm_1_1ConstantExpr.html#ae6f1c15034bc5515033874630a8ecce6">ConstantExpr::getAdd</a>(C2, Log2C3);</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;        <a class="code" href="structllvm_1_1KnownBits.html">KnownBits</a> KnownLShrc = <a class="code" href="namespacellvm.html#aa1f8f0633edd8b9a1c5ec15bb9fc5640">computeKnownBits</a>(LshrC, 0, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;        <span class="keywordflow">if</span> (KnownLShrc.<a class="code" href="structllvm_1_1KnownBits.html#a825476b2436eb817b735fdd34ee521c4">getMaxValue</a>().<a class="code" href="classllvm_1_1APInt.html#a545e8d5dfa1688acea0d0e275b03682f">ult</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a>)) {</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;          <span class="comment">// iff C1,C3 is pow2 and C2 + cttz(C3) &lt; BitWidth:</span></div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;          <span class="comment">// ((C1 &lt;&lt; X) &gt;&gt; C2) &amp; C3 -&gt; X == (cttz(C3)+C2-cttz(C1)) ? C3 : 0</span></div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;          <a class="code" href="classllvm_1_1Constant.html">Constant</a> *CmpC = <a class="code" href="classllvm_1_1ConstantExpr.html#a554ab77949b0a16670a83ec3307501eb">ConstantExpr::getSub</a>(LshrC, Log2C1);</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *Cmp = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmpEQ(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, CmpC);</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(Cmp, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, *C3),</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;                                    <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(Ty));</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;        }</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;      }</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160; </div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">m_LShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aec0ccdbde0581b3aae7f001634a34d8e">m_ImmConstant</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)),</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;                                    <a class="code" href="namespacellvm_1_1PatternMatch.html#aec0ccdbde0581b3aae7f001634a34d8e">m_ImmConstant</a>(C2)))) &amp;&amp;</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;          <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ad5e60756e331a97669d11b5c9d8691a2">m_Power2</a>())) {</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Log2C1 = <a class="code" href="classllvm_1_1ConstantExpr.html#af46fd5126112a587bb12f09b1c0e385b">ConstantExpr::getExactLogBase2</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>);</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Cmp =</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;            <a class="code" href="classllvm_1_1ConstantExpr.html#afe6a25e856a1a63ffff098f05e3f26d2">ConstantExpr::getCompare</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>, Log2C3, C2);</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;        <span class="keywordflow">if</span> (Cmp-&gt;isZeroValue()) {</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;          <span class="comment">// iff C1,C3 is pow2 and Log2(C3) &gt;= C2:</span></div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;          <span class="comment">// ((C1 &gt;&gt; X) &lt;&lt; C2) &amp; C3 -&gt; X == (cttz(C1)+C2-cttz(C3)) ? C3 : 0</span></div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;          <a class="code" href="classllvm_1_1Constant.html">Constant</a> *ShlC = <a class="code" href="classllvm_1_1ConstantExpr.html#ae6f1c15034bc5515033874630a8ecce6">ConstantExpr::getAdd</a>(C2, Log2C1);</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;          <a class="code" href="classllvm_1_1Constant.html">Constant</a> *CmpC = <a class="code" href="classllvm_1_1ConstantExpr.html#a554ab77949b0a16670a83ec3307501eb">ConstantExpr::getSub</a>(ShlC, Log2C3);</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *Cmp = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmpEQ(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, CmpC);</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(Cmp, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, *C3),</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;                                    <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(Ty));</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;        }</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;      }</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;    }</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;  }</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160; </div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))),</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;                      <a class="code" href="namespacellvm_1_1PatternMatch.html#a8c0f3bd24cad8bf9994d62b2d8cff6a0">m_SignMask</a>())) &amp;&amp;</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#abb22519fa3bf66d9e0bc6d1a733a5821">m_SpecificInt_ICMP</a>(</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;                   ICmpInst::Predicate::ICMP_EQ,</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;                   <a class="code" href="classllvm_1_1APInt.html">APInt</a>(Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>(),</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;                         Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>() -</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;                             <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()-&gt;getScalarSizeInBits())))) {</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;    <span class="keyword">auto</span> *SExt = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSExt(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, Ty, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getName() + <span class="stringliteral">&quot;.signext&quot;</span>);</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;    <span class="keyword">auto</span> *SanitizedSignMask = cast&lt;Constant&gt;(Op1);</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;    <span class="comment">// We must be careful with the undef elements of the sign bit mask, however:</span></div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;    <span class="comment">// the mask elt can be undef iff the shift amount for that lane was undef,</span></div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;    <span class="comment">// otherwise we need to sanitize undef masks to zero.</span></div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;    SanitizedSignMask = <a class="code" href="classllvm_1_1Constant.html#a174c8fd19771468c53842a7fde8ddce1">Constant::replaceUndefsWith</a>(</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;        SanitizedSignMask, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a4abb39a66573f61fda80469faa5d861d">getScalarType</a>()));</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;    SanitizedSignMask =</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;        <a class="code" href="classllvm_1_1Constant.html#a31dbd9cf336966a863e37c5653b6c134">Constant::mergeUndefsWith</a>(SanitizedSignMask, cast&lt;Constant&gt;(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>));</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateAnd(SExt, SanitizedSignMask);</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;  }</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160; </div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a> = narrowMaskedBinOp(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>;</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160; </div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType()-&gt;isIntOrIntVectorTy(1)) {</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *SI0 = dyn_cast&lt;SelectInst&gt;(Op0)) {</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> =</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;              foldAndOrOfSelectUsingImpliedCond(Op1, *SI0, <span class="comment">/* IsAnd */</span> <span class="keyword">true</span>))</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;    }</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *SI1 = dyn_cast&lt;SelectInst&gt;(Op1)) {</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> =</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;              foldAndOrOfSelectUsingImpliedCond(Op0, *SI1, <span class="comment">/* IsAnd */</span> <span class="keyword">true</span>))</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;    }</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;  }</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160; </div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *FoldedLogic = foldBinOpIntoSelectOrPhi(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;    <span class="keywordflow">return</span> FoldedLogic;</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160; </div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *DeMorgan = <a class="code" href="InstCombineAndOrXor_8cpp.html#a28b8014cf8170890bc8ce47028e95741">matchDeMorgansLaws</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;    <span class="keywordflow">return</span> DeMorgan;</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160; </div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;  {</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *A, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;    <span class="comment">// A &amp; (A ^ B) --&gt; A &amp; ~B</span></div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a5cd1934b6c8ddec3a2d161ce710d59bc">m_c_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)))))</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateAnd(Op0, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>));</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;    <span class="comment">// (A ^ B) &amp; A --&gt; A &amp; ~B</span></div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a5cd1934b6c8ddec3a2d161ce710d59bc">m_c_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op1), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)))))</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateAnd(Op1, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>));</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160; </div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;    <span class="comment">// A &amp; ~(A ^ B) --&gt; A &amp; B</span></div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a5cd1934b6c8ddec3a2d161ce710d59bc">m_c_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)))))</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateAnd(Op0, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;    <span class="comment">// ~(A ^ B) &amp; A --&gt; A &amp; B</span></div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a5cd1934b6c8ddec3a2d161ce710d59bc">m_c_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op1), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)))))</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateAnd(Op1, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160; </div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;    <span class="comment">// (A ^ B) &amp; ((B ^ C) ^ A) -&gt; (A ^ B) &amp; ~C</span></div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))))</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A))))</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;        <span class="keywordflow">if</span> (Op1-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || isFreeToInvert(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;hasOneUse()))</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;          <span class="keywordflow">return</span> BinaryOperator::CreateAnd(Op0, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>));</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160; </div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;    <span class="comment">// ((A ^ C) ^ B) &amp; (B ^ A) -&gt; (B ^ A) &amp; ~C</span></div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))))</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A))))</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;        <span class="keywordflow">if</span> (Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || isFreeToInvert(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;hasOneUse()))</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;          <span class="keywordflow">return</span> BinaryOperator::CreateAnd(Op1, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>));</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160; </div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;    <span class="comment">// (A | B) &amp; (~A ^ B) -&gt; A &amp; B</span></div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;    <span class="comment">// (A | B) &amp; (B ^ ~A) -&gt; A &amp; B</span></div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;    <span class="comment">// (B | A) &amp; (~A ^ B) -&gt; A &amp; B</span></div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;    <span class="comment">// (B | A) &amp; (B ^ ~A) -&gt; A &amp; B</span></div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5cd1934b6c8ddec3a2d161ce710d59bc">m_c_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))) &amp;&amp;</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))))</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateAnd(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160; </div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;    <span class="comment">// (~A ^ B) &amp; (A | B) -&gt; A &amp; B</span></div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;    <span class="comment">// (~A ^ B) &amp; (B | A) -&gt; A &amp; B</span></div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;    <span class="comment">// (B ^ ~A) &amp; (A | B) -&gt; A &amp; B</span></div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;    <span class="comment">// (B ^ ~A) &amp; (B | A) -&gt; A &amp; B</span></div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5cd1934b6c8ddec3a2d161ce710d59bc">m_c_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))) &amp;&amp;</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))))</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateAnd(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160; </div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;    <span class="comment">// (~A | B) &amp; (A ^ B) -&gt; ~A &amp; B</span></div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;    <span class="comment">// (~A | B) &amp; (B ^ A) -&gt; ~A &amp; B</span></div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;    <span class="comment">// (B | ~A) &amp; (A ^ B) -&gt; ~A &amp; B</span></div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;    <span class="comment">// (B | ~A) &amp; (B ^ A) -&gt; ~A &amp; B</span></div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))) &amp;&amp;</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5cd1934b6c8ddec3a2d161ce710d59bc">m_c_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))))</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateAnd(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(A), <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160; </div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;    <span class="comment">// (A ^ B) &amp; (~A | B) -&gt; ~A &amp; B</span></div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;    <span class="comment">// (B ^ A) &amp; (~A | B) -&gt; ~A &amp; B</span></div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;    <span class="comment">// (A ^ B) &amp; (B | ~A) -&gt; ~A &amp; B</span></div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;    <span class="comment">// (B ^ A) &amp; (B | ~A) -&gt; ~A &amp; B</span></div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))) &amp;&amp;</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5cd1934b6c8ddec3a2d161ce710d59bc">m_c_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))))</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateAnd(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(A), <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;  }</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160; </div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;  {</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;    <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = dyn_cast&lt;ICmpInst&gt;(Op0);</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;    <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = dyn_cast&lt;ICmpInst&gt;(Op1);</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> &amp;&amp; <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>)</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Res = foldAndOrOfICmps(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="comment">/* IsAnd */</span> <span class="keyword">true</span>))</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;        <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Res);</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160; </div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;    <span class="comment">// TODO: Make this recursive; it&#39;s a little tricky because an arbitrary</span></div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;    <span class="comment">// number of &#39;and&#39; instructions might have to be created.</span></div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a213e6c0ca6e838157373b9a6018c0769">m_LogicalAnd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))))) {</div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;      <span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1SystemZII.html#aa317b5cb849b283c734d16de54db29b9af491d0ac44efff3d6022cfdaefeccec6">IsLogical</a> = isa&lt;SelectInst&gt;(Op1);</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;      <span class="comment">// LHS &amp; (X &amp;&amp; Y) --&gt; (LHS &amp;&amp; X) &amp;&amp; Y</span></div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Cmp = dyn_cast&lt;ICmpInst&gt;(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Res =</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;                foldAndOrOfICmps(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, Cmp, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="comment">/* IsAnd */</span> <span class="keyword">true</span>, <a class="code" href="namespacellvm_1_1SystemZII.html#aa317b5cb849b283c734d16de54db29b9af491d0ac44efff3d6022cfdaefeccec6">IsLogical</a>))</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;          <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1SystemZII.html#aa317b5cb849b283c734d16de54db29b9af491d0ac44efff3d6022cfdaefeccec6">IsLogical</a></div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;                                            ? <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLogicalAnd(Res, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;                                            : <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(Res, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>));</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;      <span class="comment">// LHS &amp; (X &amp;&amp; Y) --&gt; X &amp;&amp; (LHS &amp; Y)</span></div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Cmp = dyn_cast&lt;ICmpInst&gt;(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Res = foldAndOrOfICmps(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, Cmp, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="comment">/* IsAnd */</span> <span class="keyword">true</span>,</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;                                          <span class="comment">/* IsLogical */</span> <span class="keyword">false</span>))</div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;          <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1SystemZII.html#aa317b5cb849b283c734d16de54db29b9af491d0ac44efff3d6022cfdaefeccec6">IsLogical</a></div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;                                            ? <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLogicalAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, Res)</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;                                            : <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, Res));</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;    }</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a213e6c0ca6e838157373b9a6018c0769">m_LogicalAnd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))))) {</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;      <span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1SystemZII.html#aa317b5cb849b283c734d16de54db29b9af491d0ac44efff3d6022cfdaefeccec6">IsLogical</a> = isa&lt;SelectInst&gt;(Op0);</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;      <span class="comment">// (X &amp;&amp; Y) &amp; RHS --&gt; (X &amp;&amp; RHS) &amp;&amp; Y</span></div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Cmp = dyn_cast&lt;ICmpInst&gt;(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Res =</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;                foldAndOrOfICmps(Cmp, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="comment">/* IsAnd */</span> <span class="keyword">true</span>, <a class="code" href="namespacellvm_1_1SystemZII.html#aa317b5cb849b283c734d16de54db29b9af491d0ac44efff3d6022cfdaefeccec6">IsLogical</a>))</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;          <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1SystemZII.html#aa317b5cb849b283c734d16de54db29b9af491d0ac44efff3d6022cfdaefeccec6">IsLogical</a></div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;                                            ? <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLogicalAnd(Res, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;                                            : <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(Res, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>));</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;      <span class="comment">// (X &amp;&amp; Y) &amp; RHS --&gt; X &amp;&amp; (Y &amp; RHS)</span></div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Cmp = dyn_cast&lt;ICmpInst&gt;(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Res = foldAndOrOfICmps(Cmp, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="comment">/* IsAnd */</span> <span class="keyword">true</span>,</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;                                          <span class="comment">/* IsLogical */</span> <span class="keyword">false</span>))</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;          <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1SystemZII.html#aa317b5cb849b283c734d16de54db29b9af491d0ac44efff3d6022cfdaefeccec6">IsLogical</a></div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;                                            ? <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLogicalAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, Res)</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;                                            : <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, Res));</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;    }</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;  }</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160; </div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = dyn_cast&lt;FCmpInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0)))</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = dyn_cast&lt;FCmpInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1)))</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Res = foldLogicOfFCmps(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <span class="comment">/*IsAnd*/</span> <span class="keyword">true</span>))</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;        <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Res);</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160; </div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *FoldedFCmps = <a class="code" href="InstCombineAndOrXor_8cpp.html#aa33f3f8b4a1aab74406aefba21d98510">reassociateFCmps</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;    <span class="keywordflow">return</span> FoldedFCmps;</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160; </div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *CastedAnd = foldCastedBitwiseLogic(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;    <span class="keywordflow">return</span> CastedAnd;</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160; </div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Sel = foldBinopOfSextBoolToSelect(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;    <span class="keywordflow">return</span> Sel;</div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160; </div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;  <span class="comment">// and(sext(A), B) / and(B, sext(A)) --&gt; A ? B : 0, where A is i1 or &lt;N x i1&gt;.</span></div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;  <span class="comment">// TODO: Move this into foldBinopOfSextBoolToSelect as a more generalized fold</span></div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;  <span class="comment">//       with binop identity constant. But creating a select with non-constant</span></div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;  <span class="comment">//       arm may not be reversible due to poison semantics. Is that a good</span></div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;  <span class="comment">//       canonicalization?</span></div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *A;</div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">m_SExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A)))) &amp;&amp;</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;      A-&gt;getType()-&gt;isIntOrIntVectorTy(1))</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(A, Op1, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Ty));</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">m_SExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A)))) &amp;&amp;</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;      A-&gt;getType()-&gt;isIntOrIntVectorTy(1))</div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(A, Op0, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Ty));</div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160; </div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;  <span class="comment">// Similarly, a &#39;not&#39; of the bool translates to a swap of the select arms:</span></div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;  <span class="comment">// ~sext(A) &amp; Op1 --&gt; A ? 0 : Op1</span></div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;  <span class="comment">// Op0 &amp; ~sext(A) --&gt; A ? 0 : Op0</span></div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">m_SExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A)))) &amp;&amp;</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;      A-&gt;getType()-&gt;isIntOrIntVectorTy(1))</div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(A, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Ty), Op1);</div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">m_SExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A)))) &amp;&amp;</div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;      A-&gt;getType()-&gt;isIntOrIntVectorTy(1))</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(A, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Ty), Op0);</div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160; </div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;  <span class="comment">// (iN X s&gt;&gt; (N-1)) &amp; Y --&gt; (X s&lt; 0) ? Y : 0 -- with optional sext</span></div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a0702b4620c670aea616d41c7871dcec6">m_SExtOrSelf</a>(</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;                            <a class="code" href="namespacellvm_1_1PatternMatch.html#a64153676e101a130bbbaaf91635d253a">m_AShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a0f8629c0ff1db9c384e378b2ca860f0a">m_APIntAllowUndef</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))),</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;                        <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))) &amp;&amp;</div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;      *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> == <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()-&gt;getScalarSizeInBits() - 1) {</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *IsNeg = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIsNeg(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <span class="stringliteral">&quot;isneg&quot;</span>);</div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(IsNeg, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(Ty));</div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;  }</div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;  <span class="comment">// If there&#39;s a &#39;not&#39; of the shifted value, swap the select operands:</span></div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;  <span class="comment">// ~(iN X s&gt;&gt; (N-1)) &amp; Y --&gt; (X s&lt; 0) ? 0 : Y -- with optional sext</span></div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a0702b4620c670aea616d41c7871dcec6">m_SExtOrSelf</a>(</div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;                            <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a64153676e101a130bbbaaf91635d253a">m_AShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a0f8629c0ff1db9c384e378b2ca860f0a">m_APIntAllowUndef</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))))),</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;                        <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))) &amp;&amp;</div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;      *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> == <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()-&gt;getScalarSizeInBits() - 1) {</div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *IsNeg = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIsNeg(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <span class="stringliteral">&quot;isneg&quot;</span>);</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(IsNeg, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(Ty), <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;  }</div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160; </div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;  <span class="comment">// (~x) &amp; y  --&gt;  ~(x | (~y))  iff that gets rid of inversions</span></div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;  <span class="keywordflow">if</span> (sinkNotIntoOtherHandOfLogicalOp(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160; </div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;  <span class="comment">// An and recurrence w/loop invariant step is equivelent to (and start, step)</span></div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Start = <span class="keyword">nullptr</span>, *Step = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a5be4877e6cc76e0fe6f8a005c69aa7c2">matchSimpleRecurrence</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, PN, Start, Step) &amp;&amp; DT.dominates(Step, PN))</div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(Start, Step));</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160; </div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *R = <a class="code" href="InstCombineAndOrXor_8cpp.html#affac2d5de1541e56c48dd8df0c7d11ab">reassociateForUses</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;    <span class="keywordflow">return</span> R;</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160; </div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Canonicalized = <a class="code" href="InstCombineAndOrXor_8cpp.html#a8855aa9db25fdae341f388f891bec03a">canonicalizeLogicFirst</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;    <span class="keywordflow">return</span> Canonicalized;</div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160; </div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Folded = foldLogicOfIsFPClass(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Op0, Op1))</div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;    <span class="keywordflow">return</span> Folded;</div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160; </div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;}</div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160; </div>
<div class="line"><a name="l02620"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#adf0b3634500370e379ded8d75a72e791"> 2620</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#adf0b3634500370e379ded8d75a72e791">InstCombinerImpl::matchBSwapOrBitReverse</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;                                                      <span class="keywordtype">bool</span> MatchBSwaps,</div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;                                                      <span class="keywordtype">bool</span> MatchBitReversals) {</div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 4&gt;</a> Insts;</div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#a6c402f49fa595af618c5ad1500565d92">recognizeBSwapOrBitReverseIdiom</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, MatchBSwaps, MatchBitReversals,</div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;                                       Insts))</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *LastInst = Insts.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">pop_back_val</a>();</div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;  LastInst-&gt;<a class="code" href="classllvm_1_1Instruction.html#a0fd53f63d349dc8a7c5fc0cdd7a94c8d">removeFromParent</a>();</div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160; </div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Inst : Insts)</div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;    Worklist.push(Inst);</div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;  <span class="keywordflow">return</span> LastInst;</div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;}</div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;<span class="comment">/// Match UB-safe variants of the funnel shift intrinsic.</span></div>
<div class="line"><a name="l02636"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#ac320b4b6e3a52b4ebf6bd8969a318683"> 2636</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineAndOrXor_8cpp.html#ac320b4b6e3a52b4ebf6bd8969a318683">matchFunnelShift</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;Or, <a class="code" href="classllvm_1_1InstCombinerImpl.html">InstCombinerImpl</a> &amp;IC) {</div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;  <span class="comment">// TODO: Can we reduce the code duplication between this and the related</span></div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;  <span class="comment">// rotate matching code under visitSelect and visitTrunc?</span></div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a> = <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>.getType()-&gt;getScalarSizeInBits();</div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160; </div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;  <span class="comment">// First, find an or&#39;d pair of opposite shifts:</span></div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;  <span class="comment">// or (lshr ShVal0, ShAmt0), (shl ShVal1, ShAmt1)</span></div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;  <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *Or0, *Or1;</div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>.getOperand(0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a43ac4fbaaf63a88eb5ac05f6d3e5649c">m_BinOp</a>(Or0)) ||</div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;      !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>.getOperand(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#a43ac4fbaaf63a88eb5ac05f6d3e5649c">m_BinOp</a>(Or1)))</div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160; </div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ShVal0, *ShVal1, *ShAmt0, *ShAmt1;</div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Or0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a595e5029858e33416e500bed9317d309">m_LogicalShift</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(ShVal0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(ShAmt0)))) ||</div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;      !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Or1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a595e5029858e33416e500bed9317d309">m_LogicalShift</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(ShVal1), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(ShAmt1)))) ||</div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;      Or0-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>() == Or1-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>())</div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160; </div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;  <span class="comment">// Canonicalize to or(shl(ShVal0, ShAmt0), lshr(ShVal1, ShAmt1)).</span></div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;  <span class="keywordflow">if</span> (Or0-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>() == BinaryOperator::LShr) {</div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Or0, Or1);</div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(ShVal0, ShVal1);</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(ShAmt0, ShAmt1);</div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;  }</div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Or0-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>() == BinaryOperator::Shl &amp;&amp;</div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;         Or1-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>() == BinaryOperator::LShr &amp;&amp;</div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;         <span class="stringliteral">&quot;Illegal or(shift,shift) pair&quot;</span>);</div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160; </div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;  <span class="comment">// Match the shift amount operands for a funnel shift pattern. This always</span></div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;  <span class="comment">// matches a subtraction on the R operand.</span></div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;  <span class="keyword">auto</span> matchShiftAmount = [&amp;](<a class="code" href="classllvm_1_1Value.html">Value</a> *L, <a class="code" href="classllvm_1_1Value.html">Value</a> *R, <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a>) -&gt; <a class="code" href="classllvm_1_1Value.html">Value</a> * {</div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;    <span class="comment">// Check for constant shift amounts that sum to the bitwidth.</span></div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *LI, *RI;</div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(L, <a class="code" href="namespacellvm_1_1PatternMatch.html#a0f8629c0ff1db9c384e378b2ca860f0a">m_APIntAllowUndef</a>(LI)) &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(R, <a class="code" href="namespacellvm_1_1PatternMatch.html#a0f8629c0ff1db9c384e378b2ca860f0a">m_APIntAllowUndef</a>(RI)))</div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;      <span class="keywordflow">if</span> (LI-&gt;<a class="code" href="classllvm_1_1APInt.html#a545e8d5dfa1688acea0d0e275b03682f">ult</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a>) &amp;&amp; RI-&gt;<a class="code" href="classllvm_1_1APInt.html#a545e8d5dfa1688acea0d0e275b03682f">ult</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a>) &amp;&amp; (*LI + *RI) == <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a>)</div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(L-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), *LI);</div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160; </div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *LC, *RC;</div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(L, <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(LC)) &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(R, <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(RC)) &amp;&amp;</div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(L, <a class="code" href="namespacellvm_1_1PatternMatch.html#abb22519fa3bf66d9e0bc6d1a733a5821">m_SpecificInt_ICMP</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>, <a class="code" href="classllvm_1_1APInt.html">APInt</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a>, <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a>))) &amp;&amp;</div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(R, <a class="code" href="namespacellvm_1_1PatternMatch.html#abb22519fa3bf66d9e0bc6d1a733a5821">m_SpecificInt_ICMP</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>, <a class="code" href="classllvm_1_1APInt.html">APInt</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a>, <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a>))) &amp;&amp;</div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="classllvm_1_1ConstantExpr.html#ae6f1c15034bc5515033874630a8ecce6">ConstantExpr::getAdd</a>(LC, RC), <a class="code" href="namespacellvm_1_1PatternMatch.html#aa4a99c313af96b3b50a9768338a54b2e">m_SpecificIntAllowUndef</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a>)))</div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1Constant.html#a31dbd9cf336966a863e37c5653b6c134">ConstantExpr::mergeUndefsWith</a>(LC, RC);</div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160; </div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;    <span class="comment">// (shl ShVal, X) | (lshr ShVal, (Width - x)) iff X &lt; Width.</span></div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;    <span class="comment">// We limit this to X &lt; Width in case the backend re-expands the intrinsic,</span></div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;    <span class="comment">// and has to reintroduce a shift modulo operation (InstCombine might remove</span></div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;    <span class="comment">// it after this fold). This still doesn&#39;t guarantee that the final codegen</span></div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;    <span class="comment">// will match this original pattern.</span></div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(R, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ac3ed5602889a22db44a16e1b97fac5b8">m_Sub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">m_SpecificInt</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(L))))) {</div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;      <a class="code" href="structllvm_1_1KnownBits.html">KnownBits</a> KnownL = IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae099c6fa4a0b06306ece7dd372e8d02a">computeKnownBits</a>(L, <span class="comment">/*Depth*/</span> 0, &amp;<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>);</div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;      <span class="keywordflow">return</span> KnownL.<a class="code" href="structllvm_1_1KnownBits.html#a825476b2436eb817b735fdd34ee521c4">getMaxValue</a>().<a class="code" href="classllvm_1_1APInt.html#a545e8d5dfa1688acea0d0e275b03682f">ult</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a>) ? L : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;    }</div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160; </div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;    <span class="comment">// For non-constant cases, the following patterns currently only work for</span></div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;    <span class="comment">// rotation patterns.</span></div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;    <span class="comment">// TODO: Add general funnel-shift compatible patterns.</span></div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;    <span class="keywordflow">if</span> (ShVal0 != ShVal1)</div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160; </div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;    <span class="comment">// For non-constant cases we don&#39;t support non-pow2 shift masks.</span></div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;    <span class="comment">// TODO: Is it worth matching urem as well?</span></div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2_32</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a>))</div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160; </div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;    <span class="comment">// The shift amount may be masked with negation:</span></div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;    <span class="comment">// (shl ShVal, (X &amp; (Width - 1))) | (lshr ShVal, ((-X) &amp; (Width - 1)))</span></div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a> - 1;</div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(L, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">m_SpecificInt</a>(<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>))) &amp;&amp;</div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(R, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2fed53ed2b3225752bd9e4fce4967361">m_Neg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">m_SpecificInt</a>(<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>))))</div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160; </div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;    <span class="comment">// Similar to above, but the shift amount may be extended after masking,</span></div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;    <span class="comment">// so return the extended value as the parameter for the intrinsic.</span></div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(L, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">m_SpecificInt</a>(<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>)))) &amp;&amp;</div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(R, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2fed53ed2b3225752bd9e4fce4967361">m_Neg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">m_SpecificInt</a>(<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>)))),</div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;                       <a class="code" href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">m_SpecificInt</a>(<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>))))</div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;      <span class="keywordflow">return</span> L;</div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160; </div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(L, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">m_SpecificInt</a>(<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>)))) &amp;&amp;</div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(R, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2fed53ed2b3225752bd9e4fce4967361">m_Neg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">m_SpecificInt</a>(<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>)))))</div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;      <span class="keywordflow">return</span> L;</div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160; </div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;  };</div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160; </div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ShAmt = matchShiftAmount(ShAmt0, ShAmt1, <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a>);</div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;  <span class="keywordtype">bool</span> IsFshl = <span class="keyword">true</span>; <span class="comment">// Sub on LSHR.</span></div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;  <span class="keywordflow">if</span> (!ShAmt) {</div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;    ShAmt = matchShiftAmount(ShAmt1, ShAmt0, <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a>);</div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;    IsFshl = <span class="keyword">false</span>; <span class="comment">// Sub on SHL.</span></div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;  }</div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;  <span class="keywordflow">if</span> (!ShAmt)</div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160; </div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;  <a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">Intrinsic::ID</a> IID = IsFshl ? Intrinsic::fshl : Intrinsic::fshr;</div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">Intrinsic::getDeclaration</a>(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>.getModule(), IID, <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>.getType());</div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">CallInst::Create</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, {ShVal0, ShVal1, ShAmt});</div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;}</div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;<span class="comment">/// Attempt to combine or(zext(x),shl(zext(y),bw/2) concat packing patterns.</span></div>
<div class="line"><a name="l02738"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#aecefcddf870caa1e8373d3abd78a2775"> 2738</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineAndOrXor_8cpp.html#aecefcddf870caa1e8373d3abd78a2775">matchOrConcat</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;Or,</div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;                                  <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>.getOpcode() == Instruction::Or &amp;&amp; <span class="stringliteral">&quot;bswap requires an &#39;or&#39;&quot;</span>);</div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>.getOperand(0), *Op1 = <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>.getOperand(1);</div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>.getType();</div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160; </div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a> = Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;  <span class="keywordflow">if</span> ((<a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a> &amp; 1) != 0)</div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;  <span class="keywordtype">unsigned</span> HalfWidth = <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a> / 2;</div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160; </div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;  <span class="comment">// Canonicalize zext (lower half) to LHS.</span></div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;ZExtInst&gt;(Op0))</div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Op0, Op1);</div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160; </div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;  <span class="comment">// Find lower/upper half.</span></div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *LowerSrc, *ShlVal, *UpperSrc;</div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(LowerSrc)))) ||</div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;      !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(ShlVal), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))) ||</div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;      !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(ShlVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(UpperSrc)))))</div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;  <span class="keywordflow">if</span> (*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> != HalfWidth || LowerSrc-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() != UpperSrc-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() ||</div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;      LowerSrc-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>() != HalfWidth)</div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160; </div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;  <span class="keyword">auto</span> ConcatIntrinsicCalls = [&amp;](<a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">Intrinsic::ID</a> id, <a class="code" href="classllvm_1_1Value.html">Value</a> *Lo, <a class="code" href="classllvm_1_1Value.html">Value</a> *Hi) {</div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewLower = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateZExt(Lo, Ty);</div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewUpper = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateZExt(Hi, Ty);</div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;    NewUpper = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShl(NewUpper, HalfWidth);</div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *BinOp = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateOr(NewLower, NewUpper);</div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">Intrinsic::getDeclaration</a>(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>.getModule(), <span class="keywordtype">id</span>, Ty);</div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, BinOp);</div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;  };</div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160; </div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;  <span class="comment">// BSWAP: Push the concat down, swapping the lower/upper sources.</span></div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;  <span class="comment">// concat(bswap(x),bswap(y)) -&gt; bswap(concat(x,y))</span></div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *LowerBSwap, *UpperBSwap;</div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(LowerSrc, <a class="code" href="namespacellvm_1_1PatternMatch.html#a39d717dc10783ec7bd5a24111bd5b8a5">m_BSwap</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(LowerBSwap))) &amp;&amp;</div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(UpperSrc, <a class="code" href="namespacellvm_1_1PatternMatch.html#a39d717dc10783ec7bd5a24111bd5b8a5">m_BSwap</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(UpperBSwap))))</div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;    <span class="keywordflow">return</span> ConcatIntrinsicCalls(Intrinsic::bswap, UpperBSwap, LowerBSwap);</div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160; </div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;  <span class="comment">// BITREVERSE: Push the concat down, swapping the lower/upper sources.</span></div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;  <span class="comment">// concat(bitreverse(x),bitreverse(y)) -&gt; bitreverse(concat(x,y))</span></div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *LowerBRev, *UpperBRev;</div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(LowerSrc, <a class="code" href="namespacellvm_1_1PatternMatch.html#a8f793deb2edf1656236f570c01d7042e">m_BitReverse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(LowerBRev))) &amp;&amp;</div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(UpperSrc, <a class="code" href="namespacellvm_1_1PatternMatch.html#a8f793deb2edf1656236f570c01d7042e">m_BitReverse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(UpperBRev))))</div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;    <span class="keywordflow">return</span> ConcatIntrinsicCalls(Intrinsic::bitreverse, UpperBRev, LowerBRev);</div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160; </div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;}</div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;<span class="comment">/// If all elements of two constant vectors are 0/-1 and inverses, return true.</span></div>
<div class="line"><a name="l02791"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#aa7934618280f5dc61a34615b689744d1"> 2791</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineAndOrXor_8cpp.html#aa7934618280f5dc61a34615b689744d1">areInverseVectorBitmasks</a>(<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, <a class="code" href="classllvm_1_1Constant.html">Constant</a> *C2) {</div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;  <span class="keywordtype">unsigned</span> NumElts = cast&lt;FixedVectorType&gt;(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>-&gt;getType())-&gt;getNumElements();</div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != NumElts; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *EltC1 = <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>-&gt;getAggregateElement(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *EltC2 = C2-&gt;<a class="code" href="classllvm_1_1Constant.html#acd530d0571f320d47d37e7ae51cf70ff">getAggregateElement</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;    <span class="keywordflow">if</span> (!EltC1 || !EltC2)</div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160; </div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;    <span class="comment">// One element must be all ones, and the other must be all zeros.</span></div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;    <span class="keywordflow">if</span> (!((<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(EltC1, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>()) &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(EltC2, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>())) ||</div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;          (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(EltC2, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>()) &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(EltC1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>()))))</div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;  }</div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;}</div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;<span class="comment">/// We have an expression of the form (A &amp; C) | (B &amp; D). If A is a scalar or</span></div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;<span class="comment">/// vector composed of all-zeros or all-ones values and is the bitwise &#39;not&#39; of</span></div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;<span class="comment">/// B, it can be used as the condition operand of a select instruction.</span></div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;<span class="comment">/// We will detect (A &amp; C) | ~(B | D) when the flag ABIsTheSame enabled.</span></div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Value.html">Value</a> *InstCombinerImpl::getSelectCondition(<a class="code" href="classllvm_1_1Value.html">Value</a> *A, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,</div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;                                            <span class="keywordtype">bool</span> ABIsTheSame) {</div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;  <span class="comment">// We may have peeked through bitcasts in the caller.</span></div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;  <span class="comment">// Exit immediately if we don&#39;t have (vector) integer types.</span></div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>-&gt;getType();</div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;  <span class="keywordflow">if</span> (!Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a34ee40bb2f4f5ece47ef19e5f1f57e3c">isIntOrIntVectorTy</a>() || !<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>-&gt;getType()-&gt;isIntOrIntVectorTy())</div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160; </div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;  <span class="comment">// If A is the &#39;not&#39; operand of B and has enough signbits, we have our answer.</span></div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;  <span class="keywordflow">if</span> (ABIsTheSame ? (A == <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) : <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A)))) {</div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;    <span class="comment">// If these are scalars or vectors of i1, A can be used directly.</span></div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;    <span class="keywordflow">if</span> (Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a34ee40bb2f4f5ece47ef19e5f1f57e3c">isIntOrIntVectorTy</a>(1))</div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>;</div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160; </div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;    <span class="comment">// If we look through a vector bitcast, the caller will bitcast the operands</span></div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;    <span class="comment">// to match the condition&#39;s number of bits (N x i1).</span></div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;    <span class="comment">// To make this poison-safe, disallow bitcast from wide element to narrow</span></div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;    <span class="comment">// element. That could allow poison in lanes where it was not present in the</span></div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;    <span class="comment">// original code.</span></div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;    <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a> = <a class="code" href="CombinerHelper_8cpp.html#a78ed4247b51cb6ffdaedcc1ff8730246">peekThroughBitcast</a>(A);</div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>-&gt;getType()-&gt;isIntOrIntVectorTy()) {</div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;      <span class="keywordtype">unsigned</span> NumSignBits = <a class="code" href="namespacellvm.html#ad46ed333b920b20e78d948610366254c">ComputeNumSignBits</a>(A);</div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;      <span class="keywordflow">if</span> (NumSignBits == <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>-&gt;getType()-&gt;getScalarSizeInBits() &amp;&amp;</div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;          NumSignBits &lt;= Ty-&gt;<a class="code" href="SystemZTargetTransformInfo_8cpp.html#a69eeffbc38c079195008fbfb5aaad0b9">getScalarSizeInBits</a>())</div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateTrunc(A, <a class="code" href="classllvm_1_1CmpInst.html#a4b5e1f50cb0890ec60d8c61a61241170">CmpInst::makeCmpResultType</a>(<a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>-&gt;getType()));</div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;    }</div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;  }</div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160; </div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;  <span class="comment">// TODO: add support for sext and constant case</span></div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;  <span class="keywordflow">if</span> (ABIsTheSame)</div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160; </div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;  <span class="comment">// If both operands are constants, see if the constants are inverse bitmasks.</span></div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *AConst, *BConst;</div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(A, <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(AConst)) &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(BConst)))</div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;    <span class="keywordflow">if</span> (AConst == <a class="code" href="classllvm_1_1ConstantExpr.html#a5b43a866f0fca605556f0f69f70c522a">ConstantExpr::getNot</a>(BConst) &amp;&amp;</div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;        <a class="code" href="namespacellvm.html#ad46ed333b920b20e78d948610366254c">ComputeNumSignBits</a>(A) == Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>())</div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateZExtOrTrunc(A, <a class="code" href="classllvm_1_1CmpInst.html#a4b5e1f50cb0890ec60d8c61a61241170">CmpInst::makeCmpResultType</a>(Ty));</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160; </div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;  <span class="comment">// Look for more complex patterns. The &#39;not&#39; op may be hidden behind various</span></div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;  <span class="comment">// casts. Look through sexts and bitcasts to find the booleans.</span></div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>;</div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NotB;</div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(A, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">m_SExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>))) &amp;&amp;</div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;      <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>-&gt;getType()-&gt;isIntOrIntVectorTy(1)) {</div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;    <span class="comment">// A = sext i1 Cond; B = sext (not (i1 Cond))</span></div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">m_SExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>)))))</div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>;</div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160; </div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;    <span class="comment">// A = sext i1 Cond; B = not ({bitcast} (sext (i1 Cond)))</span></div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;    <span class="comment">// TODO: The one-use checks are unnecessary or misplaced. If the caller</span></div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;    <span class="comment">//       checked for uses on logic ops/casts, that should be enough to</span></div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;    <span class="comment">//       make this transform worthwhile.</span></div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(NotB))))) {</div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;      NotB = <a class="code" href="CombinerHelper_8cpp.html#a78ed4247b51cb6ffdaedcc1ff8730246">peekThroughBitcast</a>(NotB, <span class="keyword">true</span>);</div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(NotB, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">m_SExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>))))</div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>;</div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;    }</div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;  }</div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160; </div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;  <span class="comment">// All scalar (and most vector) possibilities should be handled now.</span></div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;  <span class="comment">// Try more matches that only apply to non-splat constant vectors.</span></div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;  <span class="keywordflow">if</span> (!Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>())</div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160; </div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;  <span class="comment">// If both operands are xor&#39;d with constants using the same sexted boolean</span></div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;  <span class="comment">// operand, see if the constants are inverse bitmasks.</span></div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;  <span class="comment">// TODO: Use ConstantExpr::getNot()?</span></div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(A, (<a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">m_SExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(AConst)))) &amp;&amp;</div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, (<a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">m_SExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(BConst)))) &amp;&amp;</div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;      <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>-&gt;getType()-&gt;isIntOrIntVectorTy(1) &amp;&amp;</div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;      <a class="code" href="InstCombineAndOrXor_8cpp.html#aa7934618280f5dc61a34615b689744d1">areInverseVectorBitmasks</a>(AConst, BConst)) {</div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;    AConst = <a class="code" href="classllvm_1_1ConstantExpr.html#af238147cf5453729781a0fcc7322e1c6">ConstantExpr::getTrunc</a>(AConst, <a class="code" href="classllvm_1_1CmpInst.html#a4b5e1f50cb0890ec60d8c61a61241170">CmpInst::makeCmpResultType</a>(Ty));</div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateXor(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, AConst);</div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;  }</div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;}</div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;<span class="comment">/// We have an expression of the form (A &amp; C) | (B &amp; D). Try to simplify this</span></div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;<span class="comment">/// to &quot;A&#39; ? C : D&quot;, where A&#39; is a boolean or vector of booleans.</span></div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;<span class="comment">/// When InvertFalseVal is set to true, we try to match the pattern</span></div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;<span class="comment">/// where we have peeked through a &#39;not&#39; op and A and B are the same:</span></div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;<span class="comment">/// (A &amp; C) | ~(A | D) --&gt; (A &amp; C) | (~A &amp; ~D) --&gt; A&#39; ? C : ~D</span></div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Value.html">Value</a> *InstCombinerImpl::matchSelectFromAndOr(<a class="code" href="classllvm_1_1Value.html">Value</a> *A, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,</div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;                                              <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, <span class="keywordtype">bool</span> InvertFalseVal) {</div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;  <span class="comment">// The potential condition of the select may be bitcasted. In that case, look</span></div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;  <span class="comment">// through its bitcast and the corresponding bitcast of the &#39;not&#39; condition.</span></div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *OrigType = <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>-&gt;getType();</div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;  <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a> = <a class="code" href="CombinerHelper_8cpp.html#a78ed4247b51cb6ffdaedcc1ff8730246">peekThroughBitcast</a>(A, <span class="keyword">true</span>);</div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> = <a class="code" href="CombinerHelper_8cpp.html#a78ed4247b51cb6ffdaedcc1ff8730246">peekThroughBitcast</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = getSelectCondition(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, InvertFalseVal)) {</div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;    <span class="comment">// ((bc Cond) &amp; C) | ((bc ~Cond) &amp; D) --&gt; bc (select Cond, (bc C), (bc D))</span></div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;    <span class="comment">// If this is a vector, we may need to cast to match the condition&#39;s length.</span></div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;    <span class="comment">// The bitcasts will either all exist or all not exist. The builder will</span></div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;    <span class="comment">// not create unnecessary casts if the types already match.</span></div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *SelTy = <a class="code" href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a>-&gt;getType();</div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *VecTy = dyn_cast&lt;VectorType&gt;(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>-&gt;getType())) {</div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;      <span class="comment">// For a fixed or scalable vector get N from &lt;{vscale x} N x iM&gt;</span></div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;      <span class="keywordtype">unsigned</span> Elts = VecTy-&gt;getElementCount().getKnownMinValue();</div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;      <span class="comment">// For a fixed or scalable vector, get the size in bits of N x iM; for a</span></div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;      <span class="comment">// scalar this is just M.</span></div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;      <span class="keywordtype">unsigned</span> SelEltSize = SelTy-&gt;<a class="code" href="classllvm_1_1Type.html#a833daf718a49c5cd637d8c9ddeaebe07">getPrimitiveSizeInBits</a>().<a class="code" href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">getKnownMinValue</a>();</div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *EltTy = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getIntNTy(SelEltSize / Elts);</div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;      SelTy = <a class="code" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(EltTy, VecTy-&gt;getElementCount());</div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;    }</div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *BitcastC = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, SelTy);</div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;    <span class="keywordflow">if</span> (InvertFalseVal)</div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>);</div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *BitcastD = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, SelTy);</div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="AMDGPURegBankSelect_8cpp.html#a14e0c000ed52e5fc187d4a885914cc1a">Select</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, BitcastC, BitcastD);</div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(<a class="code" href="AMDGPURegBankSelect_8cpp.html#a14e0c000ed52e5fc187d4a885914cc1a">Select</a>, OrigType);</div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;  }</div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160; </div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;}</div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160; </div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;<span class="comment">// (icmp eq X, 0) | (icmp ult Other, X) -&gt; (icmp ule Other, X-1)</span></div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;<span class="comment">// (icmp ne X, 0) &amp; (icmp uge Other, X) -&gt; (icmp ugt Other, X-1)</span></div>
<div class="line"><a name="l02930"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#a7830717462da5623b2c4728d566ff66f"> 2930</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="InstCombineAndOrXor_8cpp.html#a7830717462da5623b2c4728d566ff66f">foldAndOrOfICmpEqZeroAndICmp</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>,</div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;                                           <span class="keywordtype">bool</span> IsAnd, <span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1SystemZII.html#aa317b5cb849b283c734d16de54db29b9af491d0ac44efff3d6022cfdaefeccec6">IsLogical</a>,</div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;                                           <a class="code" href="classllvm_1_1IRBuilderBase.html">IRBuilderBase</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> LPred =</div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;      IsAnd ? <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;getInversePredicate() : <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;getPredicate();</div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> RPred =</div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;      IsAnd ? <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;getInversePredicate() : <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;getPredicate();</div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *LHS0 = <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;getOperand(0);</div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;  <span class="keywordflow">if</span> (LPred != <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a> || !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;getOperand(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>()) ||</div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;      !LHS0-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a34ee40bb2f4f5ece47ef19e5f1f57e3c">isIntOrIntVectorTy</a>() ||</div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;      !(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>()))</div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160; </div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>;</div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;  <span class="keywordflow">if</span> (RPred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a> &amp;&amp; <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;getOperand(1) == LHS0)</div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;    <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a> = <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;getOperand(0);</div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (RPred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a> &amp;&amp; <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;getOperand(0) == LHS0)</div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;    <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a> = <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;getOperand(1);</div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160; </div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1SystemZII.html#aa317b5cb849b283c734d16de54db29b9af491d0ac44efff3d6022cfdaefeccec6">IsLogical</a>)</div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;    <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFreeze(<a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>);</div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(</div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;      IsAnd ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a>,</div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(LHS0, <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">Constant::getAllOnesValue</a>(LHS0-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())),</div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;      <a class="code" href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a>);</div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;}</div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;<span class="comment">/// Fold (icmp)&amp;(icmp) or (icmp)|(icmp) if possible.</span></div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;<span class="comment">/// If IsLogical is true, then the and/or is in select form and the transform</span></div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;<span class="comment">/// must be poison-safe.</span></div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Value.html">Value</a> *InstCombinerImpl::foldAndOrOfICmps(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>,</div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;                                          <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="keywordtype">bool</span> IsAnd,</div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;                                          <span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1SystemZII.html#aa317b5cb849b283c734d16de54db29b9af491d0ac44efff3d6022cfdaefeccec6">IsLogical</a>) {</div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;  <span class="keyword">const</span> <a class="code" href="structllvm_1_1SimplifyQuery.html">SimplifyQuery</a> Q = SQ.<a class="code" href="structllvm_1_1SimplifyQuery.html#aaf05c1194f5c7869a00434c13c46c228">getWithInstruction</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160; </div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;  <span class="comment">// Fold (iszero(A &amp; K1) | iszero(A &amp; K2)) -&gt;  (A &amp; (K1 | K2)) != (K1 | K2)</span></div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;  <span class="comment">// Fold (!iszero(A &amp; K1) &amp; !iszero(A &amp; K2)) -&gt;  (A &amp; (K1 | K2)) == (K1 | K2)</span></div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;  <span class="comment">// if K1 and K2 are a one-bit mask.</span></div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = foldAndOrOfICmpsOfAndWithPow2(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, IsAnd, <a class="code" href="namespacellvm_1_1SystemZII.html#aa317b5cb849b283c734d16de54db29b9af491d0ac44efff3d6022cfdaefeccec6">IsLogical</a>))</div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;    <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160; </div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> PredL = <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;getPredicate(), PredR = <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;getPredicate();</div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *LHS0 = <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;getOperand(0), *RHS0 = <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;getOperand(0);</div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *LHS1 = <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;getOperand(1), *RHS1 = <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;getOperand(1);</div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *LHSC = <span class="keyword">nullptr</span>, *RHSC = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;  <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(LHS1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(LHSC));</div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;  <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(RHS1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(RHSC));</div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160; </div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;  <span class="comment">// (icmp1 A, B) | (icmp2 A, B) --&gt; (icmp3 A, B)</span></div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;  <span class="comment">// (icmp1 A, B) &amp; (icmp2 A, B) --&gt; (icmp3 A, B)</span></div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a39b2cbd58018001ca6c1b2d26be87b86">predicatesFoldable</a>(PredL, PredR)) {</div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;    <span class="keywordflow">if</span> (LHS0 == RHS1 &amp;&amp; LHS1 == RHS0) {</div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;      PredL = <a class="code" href="classllvm_1_1CmpInst.html#a49a2d8f483ea08a3d6ea75f90c640d76">ICmpInst::getSwappedPredicate</a>(PredL);</div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;      <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(LHS0, LHS1);</div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;    }</div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;    <span class="keywordflow">if</span> (LHS0 == RHS0 &amp;&amp; LHS1 == RHS1) {</div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a4a6621856674f376740a1ba6efd809e3">Code</a> = IsAnd ? <a class="code" href="namespacellvm.html#ad877baf4953321b0cf8a72fb4fc4f14a">getICmpCode</a>(PredL) &amp; <a class="code" href="namespacellvm.html#ad877baf4953321b0cf8a72fb4fc4f14a">getICmpCode</a>(PredR)</div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;                            : <a class="code" href="namespacellvm.html#ad877baf4953321b0cf8a72fb4fc4f14a">getICmpCode</a>(PredL) | <a class="code" href="namespacellvm.html#ad877baf4953321b0cf8a72fb4fc4f14a">getICmpCode</a>(PredR);</div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;      <span class="keywordtype">bool</span> IsSigned = <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;isSigned() || <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;isSigned();</div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="InstCombineAndOrXor_8cpp.html#a5c7e4979ac460c21af594ebda068ee77">getNewICmpValue</a>(Code, IsSigned, LHS0, LHS1, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;    }</div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;  }</div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160; </div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;  <span class="comment">// handle (roughly):</span></div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;  <span class="comment">// (icmp ne (A &amp; B), C) | (icmp ne (A &amp; D), E)</span></div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;  <span class="comment">// (icmp eq (A &amp; B), C) &amp; (icmp eq (A &amp; D), E)</span></div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="InstCombineAndOrXor_8cpp.html#a6dc6439ff11aa90e3d267d4e0de33e0e">foldLogOpOfMaskedICmps</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, IsAnd, <a class="code" href="namespacellvm_1_1SystemZII.html#aa317b5cb849b283c734d16de54db29b9af491d0ac44efff3d6022cfdaefeccec6">IsLogical</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;    <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160; </div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V =</div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;          <a class="code" href="InstCombineAndOrXor_8cpp.html#a7830717462da5623b2c4728d566ff66f">foldAndOrOfICmpEqZeroAndICmp</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, IsAnd, <a class="code" href="namespacellvm_1_1SystemZII.html#aa317b5cb849b283c734d16de54db29b9af491d0ac44efff3d6022cfdaefeccec6">IsLogical</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;    <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;  <span class="comment">// We can treat logical like bitwise here, because both operands are used on</span></div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;  <span class="comment">// the LHS, and as such poison from both will propagate.</span></div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="InstCombineAndOrXor_8cpp.html#a7830717462da5623b2c4728d566ff66f">foldAndOrOfICmpEqZeroAndICmp</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, IsAnd,</div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;                                              <span class="comment">/*IsLogical*/</span> <span class="keyword">false</span>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;    <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160; </div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V =</div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;          <a class="code" href="InstCombineAndOrXor_8cpp.html#aaf30a02917241dc81db8fdba1b8a5972">foldAndOrOfICmpsWithConstEq</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, IsAnd, <a class="code" href="namespacellvm_1_1SystemZII.html#aa317b5cb849b283c734d16de54db29b9af491d0ac44efff3d6022cfdaefeccec6">IsLogical</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, Q))</div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;    <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;  <span class="comment">// We can convert this case to bitwise and, because both operands are used</span></div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;  <span class="comment">// on the LHS, and as such poison from both will propagate.</span></div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="InstCombineAndOrXor_8cpp.html#aaf30a02917241dc81db8fdba1b8a5972">foldAndOrOfICmpsWithConstEq</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, IsAnd,</div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;                                             <span class="comment">/*IsLogical*/</span> <span class="keyword">false</span>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, Q))</div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;    <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160; </div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="InstCombineAndOrXor_8cpp.html#a01b718ba51f478d513417084e315ab50">foldIsPowerOf2OrZero</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, IsAnd, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;    <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="InstCombineAndOrXor_8cpp.html#a01b718ba51f478d513417084e315ab50">foldIsPowerOf2OrZero</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, IsAnd, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;    <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160; </div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;  <span class="comment">// TODO: One of these directions is fine with logical and/or, the other could</span></div>
<div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;  <span class="comment">// be supported by inserting freeze.</span></div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1SystemZII.html#aa317b5cb849b283c734d16de54db29b9af491d0ac44efff3d6022cfdaefeccec6">IsLogical</a>) {</div>
<div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;    <span class="comment">// E.g. (icmp slt x, 0) | (icmp sgt x, n) --&gt; icmp ugt x, n</span></div>
<div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;    <span class="comment">// E.g. (icmp sge x, 0) &amp; (icmp slt x, n) --&gt; icmp ult x, n</span></div>
<div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = simplifyRangeCheck(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <span class="comment">/*Inverted=*/</span>!IsAnd))</div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;      <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160; </div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;    <span class="comment">// E.g. (icmp sgt x, n) | (icmp slt x, 0) --&gt; icmp ugt x, n</span></div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;    <span class="comment">// E.g. (icmp slt x, n) &amp; (icmp sge x, 0) --&gt; icmp ult x, n</span></div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = simplifyRangeCheck(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <span class="comment">/*Inverted=*/</span>!IsAnd))</div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;      <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;  }</div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160; </div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;  <span class="comment">// TODO: Add conjugated or fold, check whether it is safe for logical and/or.</span></div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;  <span class="keywordflow">if</span> (IsAnd &amp;&amp; !<a class="code" href="namespacellvm_1_1SystemZII.html#aa317b5cb849b283c734d16de54db29b9af491d0ac44efff3d6022cfdaefeccec6">IsLogical</a>)</div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="InstCombineAndOrXor_8cpp.html#a0c93fe8370899bc77907f9cb55f57c4b">foldSignedTruncationCheck</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;      <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160; </div>
<div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="InstCombineAndOrXor_8cpp.html#aa4159fc490483f3aad3d0d98c55ac851">foldIsPowerOf2</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, IsAnd, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;    <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160; </div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;  <span class="comment">// TODO: Verify whether this is safe for logical and/or.</span></div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1SystemZII.html#aa317b5cb849b283c734d16de54db29b9af491d0ac44efff3d6022cfdaefeccec6">IsLogical</a>) {</div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = <a class="code" href="InstCombineAndOrXor_8cpp.html#abfae6b141dd2ac5a749a0db37842e4c7">foldUnsignedUnderflowCheck</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, IsAnd, Q, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = <a class="code" href="InstCombineAndOrXor_8cpp.html#abfae6b141dd2ac5a749a0db37842e4c7">foldUnsignedUnderflowCheck</a>(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, IsAnd, Q, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;  }</div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160; </div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = foldEqOfParts(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, IsAnd))</div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160; </div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;  <span class="comment">// (icmp ne A, 0) | (icmp ne B, 0) --&gt; (icmp ne (A|B), 0)</span></div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;  <span class="comment">// (icmp eq A, 0) &amp; (icmp eq B, 0) --&gt; (icmp eq (A|B), 0)</span></div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;  <span class="comment">// TODO: Remove this when foldLogOpOfMaskedICmps can handle undefs.</span></div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1SystemZII.html#aa317b5cb849b283c734d16de54db29b9af491d0ac44efff3d6022cfdaefeccec6">IsLogical</a> &amp;&amp; PredL == (IsAnd ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>) &amp;&amp;</div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;      PredL == PredR &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(LHS1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a874d53817a4923de8e58af6b278c09b0">m_ZeroInt</a>()) &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(RHS1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a874d53817a4923de8e58af6b278c09b0">m_ZeroInt</a>()) &amp;&amp;</div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;      LHS0-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() == RHS0-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()) {</div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewOr = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateOr(LHS0, RHS0);</div>
<div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(PredL, NewOr,</div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;                              <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(NewOr-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()));</div>
<div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;  }</div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160; </div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;  <span class="comment">// This only handles icmp of constants: (icmp1 A, C1) | (icmp2 B, C2).</span></div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;  <span class="keywordflow">if</span> (!LHSC || !RHSC)</div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160; </div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;  <span class="comment">// (trunc x) == C1 &amp; (and x, CA) == C2 -&gt; (and x, CA|CMAX) == C1|C2</span></div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;  <span class="comment">// (trunc x) != C1 | (and x, CA) != C2 -&gt; (and x, CA|CMAX) != C1|C2</span></div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;  <span class="comment">// where CMAX is the all ones value for the truncated type,</span></div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;  <span class="comment">// iff the lower bits of C2 and CA are zero.</span></div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;  <span class="keywordflow">if</span> (PredL == (IsAnd ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>) &amp;&amp;</div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;      PredL == PredR &amp;&amp; <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp; <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>()) {</div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *V;</div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *AndC, *SmallC = <span class="keyword">nullptr</span>, *BigC = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160; </div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;    <span class="comment">// (trunc x) == C1 &amp; (and x, CA) == C2</span></div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;    <span class="comment">// (and x, CA) == C2 &amp; (trunc x) == C1</span></div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(RHS0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5b844aada27c4c6fdb87146ac458c0d8">m_Trunc</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(V))) &amp;&amp;</div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(LHS0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(V), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(AndC)))) {</div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;      SmallC = RHSC;</div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;      BigC = LHSC;</div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(LHS0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5b844aada27c4c6fdb87146ac458c0d8">m_Trunc</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(V))) &amp;&amp;</div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;               <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(RHS0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(V), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(AndC)))) {</div>
<div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;      SmallC = LHSC;</div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;      BigC = RHSC;</div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;    }</div>
<div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160; </div>
<div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;    <span class="keywordflow">if</span> (SmallC &amp;&amp; BigC) {</div>
<div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;      <span class="keywordtype">unsigned</span> BigBitSize = BigC-&gt;<a class="code" href="classllvm_1_1APInt.html#a512fe2c15ea651294688eeec1341644c">getBitWidth</a>();</div>
<div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;      <span class="keywordtype">unsigned</span> SmallBitSize = SmallC-&gt;<a class="code" href="classllvm_1_1APInt.html#a512fe2c15ea651294688eeec1341644c">getBitWidth</a>();</div>
<div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160; </div>
<div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;      <span class="comment">// Check that the low bits are zero.</span></div>
<div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> <a class="code" href="namespacellvm.html#a05609d049bfe3c5c2f64711566131a86a28d0edd045e05cf5af64e35ae0c4c6ef">Low</a> = <a class="code" href="classllvm_1_1APInt.html#ad960e1ff48d25c382b6d28e7961f074e">APInt::getLowBitsSet</a>(BigBitSize, SmallBitSize);</div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;      <span class="keywordflow">if</span> ((Low &amp; *AndC).<a class="code" href="Lint_8cpp.html#a45005634b54e2126cb3e6ec0dbc9ade4">isZero</a>() &amp;&amp; (Low &amp; *BigC).<a class="code" href="Lint_8cpp.html#a45005634b54e2126cb3e6ec0dbc9ade4">isZero</a>()) {</div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewAnd = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(V, Low | *AndC);</div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;        <a class="code" href="classllvm_1_1APInt.html">APInt</a> <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> = SmallC-&gt;<a class="code" href="classllvm_1_1APInt.html#a1dc76cc8bf703e6ada68bededcbb9573">zext</a>(BigBitSize) | *BigC;</div>
<div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewVal = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(NewAnd-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(PredL, NewAnd, NewVal);</div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;      }</div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;    }</div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;  }</div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160; </div>
<div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;  <span class="comment">// Match naive pattern (and its inverted form) for checking if two values</span></div>
<div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;  <span class="comment">// share same sign. An example of the pattern:</span></div>
<div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;  <span class="comment">// (icmp slt (X &amp; Y), 0) | (icmp sgt (X | Y), -1) -&gt; (icmp sgt (X ^ Y), -1)</span></div>
<div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;  <span class="comment">// Inverted form (example):</span></div>
<div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;  <span class="comment">// (icmp slt (X | Y), 0) &amp; (icmp sgt (X &amp; Y), -1) -&gt; (icmp slt (X ^ Y), 0)</span></div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;  <span class="keywordtype">bool</span> TrueIfSignedL, TrueIfSignedR;</div>
<div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;  <span class="keywordflow">if</span> (isSignBitCheck(PredL, *LHSC, TrueIfSignedL) &amp;&amp;</div>
<div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;      isSignBitCheck(PredR, *RHSC, TrueIfSignedR) &amp;&amp;</div>
<div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;      (<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())) {</div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;    <span class="keywordflow">if</span> (IsAnd) {</div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;      <span class="keywordflow">if</span> ((TrueIfSignedL &amp;&amp; !TrueIfSignedR &amp;&amp;</div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;           <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(LHS0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))) &amp;&amp;</div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;           <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(RHS0, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)))) ||</div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;          (!TrueIfSignedL &amp;&amp; TrueIfSignedR &amp;&amp;</div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;           <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(LHS0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))) &amp;&amp;</div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;           <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(RHS0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))))) {</div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewXor = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateXor(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIsNeg(NewXor);</div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;      }</div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;      <span class="keywordflow">if</span> ((TrueIfSignedL &amp;&amp; !TrueIfSignedR &amp;&amp;</div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;            <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(LHS0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))) &amp;&amp;</div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;            <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(RHS0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)))) ||</div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;          (!TrueIfSignedL &amp;&amp; TrueIfSignedR &amp;&amp;</div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;           <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(LHS0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))) &amp;&amp;</div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;           <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(RHS0, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))))) {</div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewXor = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateXor(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIsNotNeg(NewXor);</div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;      }</div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;    }</div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;  }</div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160; </div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;  <span class="keywordflow">return</span> foldAndOrOfICmpsUsingRanges(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, IsAnd);</div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;}</div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160; </div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;<span class="comment">// FIXME: We use commutative matchers (m_c_*) for some, but not all, matches</span></div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;<span class="comment">// here. We should standardize that construct where it is needed or choose some</span></div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;<span class="comment">// other way to ensure that commutated variants of patterns are not missed.</span></div>
<div class="line"><a name="l03147"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a1e893463cbb4b5e2e3830b2e4c28cbdb"> 3147</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a1e893463cbb4b5e2e3830b2e4c28cbdb">InstCombinerImpl::visitOr</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#a4f2dc2393a7799e74a0ab4aaa96783f6">simplifyOrInst</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1),</div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;                                SQ.getWithInstruction(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)))</div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160; </div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;  <span class="keywordflow">if</span> (SimplifyAssociativeOrCommutative(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160; </div>
<div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = foldVectorBinop(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160; </div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Phi = foldBinopWithPhiOperands(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;    <span class="keywordflow">return</span> Phi;</div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160; </div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;  <span class="comment">// See if we can simplify any instructions used by the instruction whose sole</span></div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;  <span class="comment">// purpose is to compute bits we don&#39;t care about.</span></div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;  <span class="keywordflow">if</span> (SimplifyDemandedInstructionBits(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160; </div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;  <span class="comment">// Do this before using distributive laws to catch simple and/or/not patterns.</span></div>
<div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a> = <a class="code" href="InstCombineAndOrXor_8cpp.html#aa68f985008cf9a9a6dcdac5e59b84baa">foldOrToXor</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a>;</div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160; </div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = <a class="code" href="InstCombineAndOrXor_8cpp.html#a22537aeb0cd6de9b7ec250a476b3f728">foldComplexAndOrPatterns</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160; </div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;  <span class="comment">// (A&amp;B)|(A&amp;C) -&gt; A&amp;(B|C) etc</span></div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = foldUsingDistributiveLaws(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160; </div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="InstCombineAndOrXor_8cpp.html#aed3110e8dfc807586686091e1b17995d">SimplifyBSwap</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160; </div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0), *Op1 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType();</div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;  <span class="keywordflow">if</span> (Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a34ee40bb2f4f5ece47ef19e5f1f57e3c">isIntOrIntVectorTy</a>(1)) {</div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *SI0 = dyn_cast&lt;SelectInst&gt;(Op0)) {</div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> =</div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;              foldAndOrOfSelectUsingImpliedCond(Op1, *SI0, <span class="comment">/* IsAnd */</span> <span class="keyword">false</span>))</div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;    }</div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *SI1 = dyn_cast&lt;SelectInst&gt;(Op1)) {</div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> =</div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;              foldAndOrOfSelectUsingImpliedCond(Op0, *SI1, <span class="comment">/* IsAnd */</span> <span class="keyword">false</span>))</div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;    }</div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;  }</div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160; </div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *FoldedLogic = foldBinOpIntoSelectOrPhi(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;    <span class="keywordflow">return</span> FoldedLogic;</div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160; </div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *BitOp = matchBSwapOrBitReverse(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="comment">/*MatchBSwaps*/</span> <span class="keyword">true</span>,</div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;                                                  <span class="comment">/*MatchBitReversals*/</span> <span class="keyword">true</span>))</div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;    <span class="keywordflow">return</span> BitOp;</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160; </div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Funnel = <a class="code" href="InstCombineAndOrXor_8cpp.html#ac320b4b6e3a52b4ebf6bd8969a318683">matchFunnelShift</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, *<span class="keyword">this</span>))</div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;    <span class="keywordflow">return</span> Funnel;</div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160; </div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="X86InterleavedAccess_8cpp.html#a76c9562101f54d25482f88ae29ed6131">Concat</a> = <a class="code" href="InstCombineAndOrXor_8cpp.html#aecefcddf870caa1e8373d3abd78a2775">matchOrConcat</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="X86InterleavedAccess_8cpp.html#a76c9562101f54d25482f88ae29ed6131">Concat</a>);</div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160; </div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *CV;</div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(CV))), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))) &amp;&amp;</div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;      !CV-&gt;<a class="code" href="classllvm_1_1APInt.html#a423e2c491de1408d54e35f0b47d076be">isAllOnes</a>() &amp;&amp; <a class="code" href="namespacellvm.html#aedbf3998b4ff72347a45cb4169d120db">MaskedValueIsZero</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, *CV, 0, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;    <span class="comment">// (X ^ C) | Y -&gt; (X | Y) ^ C iff Y &amp; C == 0</span></div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;    <span class="comment">// The check for a &#39;not&#39; op is for efficiency (if Y is known zero --&gt; ~X).</span></div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateOr(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateXor(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, *CV));</div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;  }</div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160; </div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;  <span class="comment">// If the operands have no common bits set:</span></div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;  <span class="comment">// or (mul X, Y), X --&gt; add (mul X, Y), X --&gt; mul X, (Y + 1)</span></div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;            <a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a971522b36bf432ad69a0083581ab4108">m_Mul</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))), <a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))) &amp;&amp;</div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;      <a class="code" href="namespacellvm.html#aa0f28bd61d319f9fd170e9ffee1ec7ba">haveNoCommonBitsSet</a>(Op0, Op1, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>)) {</div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *IncrementY = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, 1));</div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="Reassociate_8cpp.html#abe860e1e952cdc501c96210be5e00805">BinaryOperator::CreateMul</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, IncrementY);</div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;  }</div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160; </div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;  <span class="comment">// X | (X ^ Y) --&gt; X | Y (4 commuted patterns)</span></div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a5cd1934b6c8ddec3a2d161ce710d59bc">m_c_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)))))</div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateOr(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160; </div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;  <span class="comment">// (A &amp; C) | (B &amp; D)</span></div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *A, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, *<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>;</div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))) &amp;&amp;</div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>)))) {</div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160; </div>
<div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;    <span class="comment">// (A &amp; C0) | (B &amp; C1)</span></div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *C0, *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>;</div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(C0)) &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>))) {</div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;      <span class="keywordflow">if</span> (*C0 == ~*<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>) {</div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;        <span class="comment">// ((X | B) &amp; MaskC) | (B &amp; ~MaskC) -&gt; (X &amp; MaskC) | B</span></div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(A, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))))</div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;          <span class="keywordflow">return</span> BinaryOperator::CreateOr(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *C0), <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;        <span class="comment">// (A &amp; MaskC) | ((X | A) &amp; ~MaskC) -&gt; (X &amp; ~MaskC) | A</span></div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))))</div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;          <span class="keywordflow">return</span> BinaryOperator::CreateOr(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>), A);</div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160; </div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;        <span class="comment">// ((X ^ B) &amp; MaskC) | (B &amp; ~MaskC) -&gt; (X &amp; MaskC) ^ B</span></div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(A, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5cd1934b6c8ddec3a2d161ce710d59bc">m_c_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))))</div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;          <span class="keywordflow">return</span> BinaryOperator::CreateXor(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *C0), <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;        <span class="comment">// (A &amp; MaskC) | ((X ^ A) &amp; ~MaskC) -&gt; (X &amp; ~MaskC) ^ A</span></div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5cd1934b6c8ddec3a2d161ce710d59bc">m_c_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))))</div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;          <span class="keywordflow">return</span> BinaryOperator::CreateXor(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>), A);</div>
<div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;      }</div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160; </div>
<div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;      <span class="keywordflow">if</span> ((*C0 &amp; *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>).<a class="code" href="Lint_8cpp.html#a45005634b54e2126cb3e6ec0dbc9ade4">isZero</a>()) {</div>
<div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;        <span class="comment">// ((X | B) &amp; C0) | (B &amp; C1) --&gt; (X | B) &amp; (C0 | C1)</span></div>
<div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;        <span class="comment">// iff (C0 &amp; C1) == 0 and (X &amp; ~C0) == 0</span></div>
<div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(A, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))) &amp;&amp;</div>
<div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;            <a class="code" href="namespacellvm.html#aedbf3998b4ff72347a45cb4169d120db">MaskedValueIsZero</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, ~*C0, 0, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;          <a class="code" href="classllvm_1_1Constant.html">Constant</a> *C01 = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, *C0 | *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>);</div>
<div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;          <span class="keywordflow">return</span> BinaryOperator::CreateAnd(A, C01);</div>
<div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;        }</div>
<div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;        <span class="comment">// (A &amp; C0) | ((X | A) &amp; C1) --&gt; (X | A) &amp; (C0 | C1)</span></div>
<div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;        <span class="comment">// iff (C0 &amp; C1) == 0 and (X &amp; ~C1) == 0</span></div>
<div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A))) &amp;&amp;</div>
<div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;            <a class="code" href="namespacellvm.html#aedbf3998b4ff72347a45cb4169d120db">MaskedValueIsZero</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, ~*<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, 0, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;          <a class="code" href="classllvm_1_1Constant.html">Constant</a> *C01 = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, *C0 | *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>);</div>
<div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;          <span class="keywordflow">return</span> BinaryOperator::CreateAnd(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, C01);</div>
<div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;        }</div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;        <span class="comment">// ((X | C2) &amp; C0) | ((X | C3) &amp; C1) --&gt; (X | C2 | C3) &amp; (C0 | C1)</span></div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;        <span class="comment">// iff (C0 &amp; C1) == 0 and (C2 &amp; ~C0) == 0 and (C3 &amp; ~C1) == 0.</span></div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *C2, *C3;</div>
<div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(A, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(C2))) &amp;&amp;</div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;            <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(C3))) &amp;&amp;</div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;            (*C2 &amp; ~*C0).<a class="code" href="Lint_8cpp.html#a45005634b54e2126cb3e6ec0dbc9ade4">isZero</a>() &amp;&amp; (*C3 &amp; ~*<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>).<a class="code" href="Lint_8cpp.html#a45005634b54e2126cb3e6ec0dbc9ade4">isZero</a>()) {</div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateOr(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *C2 | *C3, <span class="stringliteral">&quot;bitfield&quot;</span>);</div>
<div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;          <a class="code" href="classllvm_1_1Constant.html">Constant</a> *C01 = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, *C0 | *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>);</div>
<div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;          <span class="keywordflow">return</span> BinaryOperator::CreateAnd(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>, C01);</div>
<div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;        }</div>
<div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;      }</div>
<div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;    }</div>
<div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160; </div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;    <span class="comment">// Don&#39;t try to form a select if it&#39;s unlikely that we&#39;ll get rid of at</span></div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;    <span class="comment">// least one of the operands. A select is generally more expensive than the</span></div>
<div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;    <span class="comment">// &#39;or&#39; that it is replacing.</span></div>
<div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;    <span class="keywordflow">if</span> (Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || Op1-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>()) {</div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;      <span class="comment">// (Cond &amp; C) | (~Cond &amp; D) -&gt; Cond ? C : D, and commuted variants.</span></div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = matchSelectFromAndOr(A, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>))</div>
<div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;        <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = matchSelectFromAndOr(A, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))</div>
<div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;        <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = matchSelectFromAndOr(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>))</div>
<div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;        <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = matchSelectFromAndOr(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, A, <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))</div>
<div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;        <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = matchSelectFromAndOr(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, A, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))</div>
<div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;        <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = matchSelectFromAndOr(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, A))</div>
<div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;        <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = matchSelectFromAndOr(<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, A, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))</div>
<div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;        <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = matchSelectFromAndOr(<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, A))</div>
<div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;        <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;    }</div>
<div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;  }</div>
<div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160; </div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))) &amp;&amp;</div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>)))) &amp;&amp;</div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;      (Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || Op1-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())) {</div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;    <span class="comment">// (Cond &amp; C) | ~(Cond | D) -&gt; Cond ? C : ~D</span></div>
<div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = matchSelectFromAndOr(A, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, <span class="keyword">true</span>))</div>
<div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = matchSelectFromAndOr(A, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <span class="keyword">true</span>))</div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = matchSelectFromAndOr(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, <span class="keyword">true</span>))</div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = matchSelectFromAndOr(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, A, <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <span class="keyword">true</span>))</div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;  }</div>
<div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160; </div>
<div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;  <span class="comment">// (A ^ B) | ((B ^ C) ^ A) -&gt; (A ^ B) | C</span></div>
<div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))))</div>
<div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A))))</div>
<div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateOr(Op0, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160; </div>
<div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;  <span class="comment">// ((A ^ C) ^ B) | (B ^ A) -&gt; (B ^ A) | C</span></div>
<div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))))</div>
<div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A))))</div>
<div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateOr(Op1, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160; </div>
<div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;  <span class="comment">// ((A &amp; B) ^ C) | B -&gt; C | B</span></div>
<div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5cd1934b6c8ddec3a2d161ce710d59bc">m_c_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op1)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))))</div>
<div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateOr(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, Op1);</div>
<div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160; </div>
<div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;  <span class="comment">// B | ((A &amp; B) ^ C) -&gt; B | C</span></div>
<div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5cd1934b6c8ddec3a2d161ce710d59bc">m_c_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op0)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))))</div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateOr(Op0, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160; </div>
<div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;  <span class="comment">// ((B | C) &amp; A) | B -&gt; B | (A &amp; C)</span></div>
<div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op1), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A))))</div>
<div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateOr(Op1, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(A, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>));</div>
<div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160; </div>
<div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *DeMorgan = <a class="code" href="InstCombineAndOrXor_8cpp.html#a28b8014cf8170890bc8ce47028e95741">matchDeMorgansLaws</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;    <span class="keywordflow">return</span> DeMorgan;</div>
<div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160; </div>
<div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;  <span class="comment">// Canonicalize xor to the RHS.</span></div>
<div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;  <span class="keywordtype">bool</span> SwappedForXor = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>()))) {</div>
<div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Op0, Op1);</div>
<div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;    SwappedForXor = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;  }</div>
<div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160; </div>
<div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)))) {</div>
<div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;    <span class="comment">// (A | ?) | (A ^ B) --&gt; (A | ?) | B</span></div>
<div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;    <span class="comment">// (B | ?) | (A ^ B) --&gt; (B | ?) | A</span></div>
<div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>())))</div>
<div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateOr(Op0, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>())))</div>
<div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateOr(Op0, A);</div>
<div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160; </div>
<div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;    <span class="comment">// (A &amp; B) | (A ^ B) --&gt; A | B</span></div>
<div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;    <span class="comment">// (B &amp; A) | (A ^ B) --&gt; A | B</span></div>
<div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))) ||</div>
<div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A))))</div>
<div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateOr(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160; </div>
<div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;    <span class="comment">// ~A | (A ^ B) --&gt; ~(A &amp; B)</span></div>
<div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;    <span class="comment">// ~B | (A ^ B) --&gt; ~(A &amp; B)</span></div>
<div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;    <span class="comment">// The swap above should always make Op0 the &#39;not&#39;.</span></div>
<div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;    <span class="keywordflow">if</span> ((Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || Op1-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>()) &amp;&amp;</div>
<div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;        (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A))) || <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)))))</div>
<div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a4f500ae0de71695b652af4c0958d8ea8">BinaryOperator::CreateNot</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>));</div>
<div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160; </div>
<div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;    <span class="comment">// Same as above, but peek through an &#39;and&#39; to the common operand:</span></div>
<div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;    <span class="comment">// ~(A &amp; ?) | (A ^ B) --&gt; ~((A &amp; ?) &amp; B)</span></div>
<div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;    <span class="comment">// ~(B &amp; ?) | (A ^ B) --&gt; ~((B &amp; ?) &amp; A)</span></div>
<div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>;</div>
<div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;    <span class="keywordflow">if</span> ((Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || Op1-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>()) &amp;&amp;</div>
<div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a575c2299c6f145ba3a12efa20829db43">m_CombineAnd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a04353aa48874f9bda89ff9059cd1a5a6">m_Instruction</a>(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>),</div>
<div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;                                      <a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>())))))</div>
<div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a4f500ae0de71695b652af4c0958d8ea8">BinaryOperator::CreateNot</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>));</div>
<div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;    <span class="keywordflow">if</span> ((Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || Op1-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>()) &amp;&amp;</div>
<div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a575c2299c6f145ba3a12efa20829db43">m_CombineAnd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a04353aa48874f9bda89ff9059cd1a5a6">m_Instruction</a>(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>),</div>
<div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;                                      <a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>())))))</div>
<div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a4f500ae0de71695b652af4c0958d8ea8">BinaryOperator::CreateNot</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>, A));</div>
<div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160; </div>
<div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;    <span class="comment">// (~A | C) | (A ^ B) --&gt; ~(A &amp; B) | C</span></div>
<div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;    <span class="comment">// (~B | C) | (A ^ B) --&gt; ~(A &amp; B) | C</span></div>
<div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;    <span class="keywordflow">if</span> (Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp; Op1-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp;</div>
<div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;        (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))) ||</div>
<div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;         <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))))) {</div>
<div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Nand = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), <span class="stringliteral">&quot;nand&quot;</span>);</div>
<div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateOr(Nand, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;    }</div>
<div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160; </div>
<div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;    <span class="comment">// A | (~A ^ B) --&gt; ~B | A</span></div>
<div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;    <span class="comment">// B | (A ^ ~B) --&gt; ~A | B</span></div>
<div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;    <span class="keywordflow">if</span> (Op1-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(A, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op0)))) {</div>
<div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NotB = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>-&gt;getName() + <span class="stringliteral">&quot;.not&quot;</span>);</div>
<div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateOr(NotB, Op0);</div>
<div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;    }</div>
<div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;    <span class="keywordflow">if</span> (Op1-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op0)))) {</div>
<div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NotA = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(A, A-&gt;getName() + <span class="stringliteral">&quot;.not&quot;</span>);</div>
<div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateOr(NotA, Op0);</div>
<div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;    }</div>
<div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;  }</div>
<div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160; </div>
<div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;  <span class="comment">// A | ~(A | B) -&gt; A | ~B</span></div>
<div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;  <span class="comment">// A | ~(A ^ B) -&gt; A | ~B</span></div>
<div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A))))</div>
<div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> = dyn_cast&lt;BinaryOperator&gt;(A))</div>
<div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;      <span class="keywordflow">if</span> ((Op0 == <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>-&gt;getOperand(0) || Op0 == <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>-&gt;getOperand(1)) &amp;&amp;</div>
<div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;          Op1-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp; (<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>-&gt;getOpcode() == Instruction::Or ||</div>
<div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;                               <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>-&gt;getOpcode() == Instruction::Xor)) {</div>
<div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NotOp = Op0 == <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>-&gt;getOperand(0) ? <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>-&gt;getOperand(1) :</div>
<div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;                                                 <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>-&gt;getOperand(0);</div>
<div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Not = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(NotOp, NotOp-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;.not&quot;</span>);</div>
<div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;        <span class="keywordflow">return</span> BinaryOperator::CreateOr(Not, Op0);</div>
<div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;      }</div>
<div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160; </div>
<div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;  <span class="keywordflow">if</span> (SwappedForXor)</div>
<div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Op0, Op1);</div>
<div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160; </div>
<div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;  {</div>
<div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;    <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = dyn_cast&lt;ICmpInst&gt;(Op0);</div>
<div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;    <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = dyn_cast&lt;ICmpInst&gt;(Op1);</div>
<div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> &amp;&amp; <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>)</div>
<div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Res = foldAndOrOfICmps(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="comment">/* IsAnd */</span> <span class="keyword">false</span>))</div>
<div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;        <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Res);</div>
<div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160; </div>
<div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;    <span class="comment">// TODO: Make this recursive; it&#39;s a little tricky because an arbitrary</span></div>
<div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;    <span class="comment">// number of &#39;or&#39; instructions might have to be created.</span></div>
<div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a1a06b1cff93069d7403ea03e6150e386">m_LogicalOr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))))) {</div>
<div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;      <span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1SystemZII.html#aa317b5cb849b283c734d16de54db29b9af491d0ac44efff3d6022cfdaefeccec6">IsLogical</a> = isa&lt;SelectInst&gt;(Op1);</div>
<div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;      <span class="comment">// LHS | (X || Y) --&gt; (LHS || X) || Y</span></div>
<div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Cmp = dyn_cast&lt;ICmpInst&gt;(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))</div>
<div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Res =</div>
<div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;                foldAndOrOfICmps(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, Cmp, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="comment">/* IsAnd */</span> <span class="keyword">false</span>, <a class="code" href="namespacellvm_1_1SystemZII.html#aa317b5cb849b283c734d16de54db29b9af491d0ac44efff3d6022cfdaefeccec6">IsLogical</a>))</div>
<div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;          <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1SystemZII.html#aa317b5cb849b283c734d16de54db29b9af491d0ac44efff3d6022cfdaefeccec6">IsLogical</a></div>
<div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;                                            ? <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLogicalOr(Res, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)</div>
<div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;                                            : <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateOr(Res, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>));</div>
<div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;      <span class="comment">// LHS | (X || Y) --&gt; X || (LHS | Y)</span></div>
<div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Cmp = dyn_cast&lt;ICmpInst&gt;(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))</div>
<div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Res = foldAndOrOfICmps(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, Cmp, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="comment">/* IsAnd */</span> <span class="keyword">false</span>,</div>
<div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;                                          <span class="comment">/* IsLogical */</span> <span class="keyword">false</span>))</div>
<div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;          <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1SystemZII.html#aa317b5cb849b283c734d16de54db29b9af491d0ac44efff3d6022cfdaefeccec6">IsLogical</a></div>
<div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;                                            ? <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLogicalOr(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, Res)</div>
<div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;                                            : <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateOr(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, Res));</div>
<div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;    }</div>
<div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a1a06b1cff93069d7403ea03e6150e386">m_LogicalOr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))))) {</div>
<div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;      <span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1SystemZII.html#aa317b5cb849b283c734d16de54db29b9af491d0ac44efff3d6022cfdaefeccec6">IsLogical</a> = isa&lt;SelectInst&gt;(Op0);</div>
<div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;      <span class="comment">// (X || Y) | RHS --&gt; (X || RHS) || Y</span></div>
<div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Cmp = dyn_cast&lt;ICmpInst&gt;(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))</div>
<div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Res =</div>
<div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;                foldAndOrOfICmps(Cmp, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="comment">/* IsAnd */</span> <span class="keyword">false</span>, <a class="code" href="namespacellvm_1_1SystemZII.html#aa317b5cb849b283c734d16de54db29b9af491d0ac44efff3d6022cfdaefeccec6">IsLogical</a>))</div>
<div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;          <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1SystemZII.html#aa317b5cb849b283c734d16de54db29b9af491d0ac44efff3d6022cfdaefeccec6">IsLogical</a></div>
<div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;                                            ? <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLogicalOr(Res, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)</div>
<div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;                                            : <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateOr(Res, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>));</div>
<div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;      <span class="comment">// (X || Y) | RHS --&gt; X || (Y | RHS)</span></div>
<div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Cmp = dyn_cast&lt;ICmpInst&gt;(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))</div>
<div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Res = foldAndOrOfICmps(Cmp, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="comment">/* IsAnd */</span> <span class="keyword">false</span>,</div>
<div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;                                          <span class="comment">/* IsLogical */</span> <span class="keyword">false</span>))</div>
<div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;          <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1SystemZII.html#aa317b5cb849b283c734d16de54db29b9af491d0ac44efff3d6022cfdaefeccec6">IsLogical</a></div>
<div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;                                            ? <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLogicalOr(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, Res)</div>
<div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;                                            : <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateOr(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, Res));</div>
<div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;    }</div>
<div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;  }</div>
<div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160; </div>
<div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = dyn_cast&lt;FCmpInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0)))</div>
<div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1FCmpInst.html">FCmpInst</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = dyn_cast&lt;FCmpInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1)))</div>
<div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Res = foldLogicOfFCmps(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <span class="comment">/*IsAnd*/</span> <span class="keyword">false</span>))</div>
<div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;        <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Res);</div>
<div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160; </div>
<div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *FoldedFCmps = <a class="code" href="InstCombineAndOrXor_8cpp.html#aa33f3f8b4a1aab74406aefba21d98510">reassociateFCmps</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;    <span class="keywordflow">return</span> FoldedFCmps;</div>
<div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160; </div>
<div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *CastedOr = foldCastedBitwiseLogic(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;    <span class="keywordflow">return</span> CastedOr;</div>
<div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160; </div>
<div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Sel = foldBinopOfSextBoolToSelect(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;    <span class="keywordflow">return</span> Sel;</div>
<div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160; </div>
<div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;  <span class="comment">// or(sext(A), B) / or(B, sext(A)) --&gt; A ? -1 : B, where A is i1 or &lt;N x i1&gt;.</span></div>
<div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;  <span class="comment">// TODO: Move this into foldBinopOfSextBoolToSelect as a more generalized fold</span></div>
<div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;  <span class="comment">//       with binop identity constant. But creating a select with non-constant</span></div>
<div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;  <span class="comment">//       arm may not be reversible due to poison semantics. Is that a good</span></div>
<div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;  <span class="comment">//       canonicalization?</span></div>
<div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">m_SExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A)))) &amp;&amp;</div>
<div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;      A-&gt;getType()-&gt;isIntOrIntVectorTy(1))</div>
<div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(A, <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">ConstantInt::getAllOnesValue</a>(Ty), Op1);</div>
<div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">m_SExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A)))) &amp;&amp;</div>
<div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;      A-&gt;getType()-&gt;isIntOrIntVectorTy(1))</div>
<div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(A, <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">ConstantInt::getAllOnesValue</a>(Ty), Op0);</div>
<div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160; </div>
<div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;  <span class="comment">// Note: If we&#39;ve gotten to the point of visiting the outer OR, then the</span></div>
<div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;  <span class="comment">// inner one couldn&#39;t be simplified.  If it was a constant, then it won&#39;t</span></div>
<div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;  <span class="comment">// be simplified by a later pass either, so we try swapping the inner/outer</span></div>
<div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;  <span class="comment">// ORs in the hopes that we&#39;ll be able to simplify it this way.</span></div>
<div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;  <span class="comment">// (X|C) | V --&gt; (X|V) | C</span></div>
<div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI;</div>
<div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;  <span class="keywordflow">if</span> (Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp; !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">m_ConstantInt</a>()) &amp;&amp;</div>
<div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">m_ConstantInt</a>(CI)))) {</div>
<div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Inner = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateOr(A, Op1);</div>
<div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;    Inner-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(Op0);</div>
<div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateOr(Inner, CI);</div>
<div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;  }</div>
<div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160; </div>
<div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;  <span class="comment">// Change (or (bool?A:B),(bool?C:D)) --&gt; (bool?(or A,C):(or B,D))</span></div>
<div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;  <span class="comment">// Since this OR statement hasn&#39;t been optimized further yet, we hope</span></div>
<div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;  <span class="comment">// that this transformation will allow the new ORs to be optimized.</span></div>
<div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;  {</div>
<div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = <span class="keyword">nullptr</span>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;    <span class="keywordflow">if</span> (Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp; Op1-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp;</div>
<div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#addb87fe3f509b7803d3f5933ee24b560">m_Select</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))) &amp;&amp;</div>
<div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#addb87fe3f509b7803d3f5933ee24b560">m_Select</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>))) &amp;&amp; <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> == <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>) {</div>
<div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *orTrue = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateOr(A, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *orFalse = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateOr(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>);</div>
<div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, orTrue, orFalse);</div>
<div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;    }</div>
<div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;  }</div>
<div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160; </div>
<div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;  <span class="comment">// or(ashr(subNSW(Y, X), ScalarSizeInBits(Y) - 1), X)  --&gt; X s&gt; Y ? -1 : X.</span></div>
<div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;  {</div>
<div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a64153676e101a130bbbaaf91635d253a">m_AShr</a>(</div>
<div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;                             <a class="code" href="namespacellvm_1_1PatternMatch.html#ace8c2df4c506b92296cad275b4211022">m_NSWSub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)),</div>
<div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;                             <a class="code" href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">m_SpecificInt</a>(Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>() - 1))),</div>
<div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;                         <a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)))) {</div>
<div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NewICmpInst = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmpSGT(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#af14335020a68db7b9f722810e4a05180a421c6b20238e6e6585270538188f15b9">AllOnes</a> = <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">ConstantInt::getAllOnesValue</a>(Ty);</div>
<div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(NewICmpInst, <a class="code" href="namespacellvm.html#af14335020a68db7b9f722810e4a05180a421c6b20238e6e6585270538188f15b9">AllOnes</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;    }</div>
<div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;  }</div>
<div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160; </div>
<div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *V =</div>
<div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;          canonicalizeCondSignextOfHighBitExtractToSignextHighBitExtract(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;    <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160; </div>
<div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> Pred;</div>
<div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>, *Ov, *MulIsNotZero, *UMulWithOv;</div>
<div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;  <span class="comment">// Check if the OR weakens the overflow condition for umul.with.overflow by</span></div>
<div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;  <span class="comment">// treating any non-zero result as overflow. In that case, we overflow if both</span></div>
<div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;  <span class="comment">// umul.with.overflow operands are != 0, as in that case the result can only</span></div>
<div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;  <span class="comment">// be 0, iff the multiplication overflows.</span></div>
<div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;            <a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a575c2299c6f145ba3a12efa20829db43">m_CombineAnd</a>(m_ExtractValue&lt;1&gt;(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(UMulWithOv)),</div>
<div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;                                <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Ov)),</div>
<div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;                   <a class="code" href="namespacellvm_1_1PatternMatch.html#a575c2299c6f145ba3a12efa20829db43">m_CombineAnd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a3fe9b3ddb71b9fb53d9fc74b3a0710bf">m_ICmp</a>(Pred,</div>
<div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;                                       <a class="code" href="namespacellvm_1_1PatternMatch.html#a575c2299c6f145ba3a12efa20829db43">m_CombineAnd</a>(m_ExtractValue&lt;0&gt;(</div>
<div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;                                                        <a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(UMulWithOv)),</div>
<div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;                                                    <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>)),</div>
<div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;                                       <a class="code" href="namespacellvm_1_1PatternMatch.html#a874d53817a4923de8e58af6b278c09b0">m_ZeroInt</a>()),</div>
<div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;                                <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(MulIsNotZero)))) &amp;&amp;</div>
<div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;      (Ov-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || (MulIsNotZero-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp; <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())) &amp;&amp;</div>
<div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;      Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP_NE</a>) {</div>
<div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *A, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>;</div>
<div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(UMulWithOv, m_Intrinsic&lt;Intrinsic::umul_with_overflow&gt;(</div>
<div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;                              <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)))) {</div>
<div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NotNullA = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIsNotNull(A);</div>
<div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NotNullB = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIsNotNull(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateAnd(NotNullA, NotNullB);</div>
<div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;    }</div>
<div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;  }</div>
<div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160; </div>
<div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;  <span class="comment">// (~x) | y  --&gt;  ~(x &amp; (~y))  iff that gets rid of inversions</span></div>
<div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;  <span class="keywordflow">if</span> (sinkNotIntoOtherHandOfLogicalOp(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160; </div>
<div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;  <span class="comment">// Improve &quot;get low bit mask up to and including bit X&quot; pattern:</span></div>
<div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;  <span class="comment">//   (1 &lt;&lt; X) | ((1 &lt;&lt; X) + -1)  --&gt;  -1 l&gt;&gt; (bitwidth(x) - 1 - X)</span></div>
<div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>()),</div>
<div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;                       <a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)))) &amp;&amp;</div>
<div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>()), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>()))) {</div>
<div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Sub = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSub(</div>
<div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;        <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>() - 1), <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateLShr(<a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">Constant::getAllOnesValue</a>(Ty), Sub);</div>
<div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;  }</div>
<div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160; </div>
<div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;  <span class="comment">// An or recurrence w/loop invariant step is equivelent to (or start, step)</span></div>
<div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Start = <span class="keyword">nullptr</span>, *Step = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a5be4877e6cc76e0fe6f8a005c69aa7c2">matchSimpleRecurrence</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, PN, Start, Step) &amp;&amp; DT.dominates(Step, PN))</div>
<div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateOr(Start, Step));</div>
<div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160; </div>
<div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;  <span class="comment">// (A &amp; B) | (C | D) or (C | D) | (A &amp; B)</span></div>
<div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;  <span class="comment">// Can be combined if C or D is of type (A/B &amp; X)</span></div>
<div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))),</div>
<div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;                       <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>)))))) {</div>
<div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;    <span class="comment">// (A &amp; B) | (C | ?) -&gt; C | (? | (A &amp; B))</span></div>
<div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;    <span class="comment">// (A &amp; B) | (C | ?) -&gt; C | (? | (A &amp; B))</span></div>
<div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;    <span class="comment">// (A &amp; B) | (C | ?) -&gt; C | (? | (A &amp; B))</span></div>
<div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;    <span class="comment">// (A &amp; B) | (C | ?) -&gt; C | (? | (A &amp; B))</span></div>
<div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;    <span class="comment">// (C | ?) | (A &amp; B) -&gt; C | (? | (A &amp; B))</span></div>
<div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;    <span class="comment">// (C | ?) | (A &amp; B) -&gt; C | (? | (A &amp; B))</span></div>
<div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;    <span class="comment">// (C | ?) | (A &amp; B) -&gt; C | (? | (A &amp; B))</span></div>
<div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;    <span class="comment">// (C | ?) | (A &amp; B) -&gt; C | (? | (A &amp; B))</span></div>
<div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>()))) ||</div>
<div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>()))))</div>
<div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateOr(</div>
<div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;          <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateOr(<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)));</div>
<div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;    <span class="comment">// (A &amp; B) | (? | D) -&gt; (? | (A &amp; B)) | D</span></div>
<div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;    <span class="comment">// (A &amp; B) | (? | D) -&gt; (? | (A &amp; B)) | D</span></div>
<div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;    <span class="comment">// (A &amp; B) | (? | D) -&gt; (? | (A &amp; B)) | D</span></div>
<div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;    <span class="comment">// (A &amp; B) | (? | D) -&gt; (? | (A &amp; B)) | D</span></div>
<div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;    <span class="comment">// (? | D) | (A &amp; B) -&gt; (? | (A &amp; B)) | D</span></div>
<div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;    <span class="comment">// (? | D) | (A &amp; B) -&gt; (? | (A &amp; B)) | D</span></div>
<div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;    <span class="comment">// (? | D) | (A &amp; B) -&gt; (? | (A &amp; B)) | D</span></div>
<div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;    <span class="comment">// (? | D) | (A &amp; B) -&gt; (? | (A &amp; B)) | D</span></div>
<div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>()))) ||</div>
<div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>()))))</div>
<div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateOr(</div>
<div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;          <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateOr(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)), <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>);</div>
<div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;  }</div>
<div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160; </div>
<div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *R = <a class="code" href="InstCombineAndOrXor_8cpp.html#affac2d5de1541e56c48dd8df0c7d11ab">reassociateForUses</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;    <span class="keywordflow">return</span> R;</div>
<div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160; </div>
<div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Canonicalized = <a class="code" href="InstCombineAndOrXor_8cpp.html#a8855aa9db25fdae341f388f891bec03a">canonicalizeLogicFirst</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;    <span class="keywordflow">return</span> Canonicalized;</div>
<div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160; </div>
<div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Folded = foldLogicOfIsFPClass(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Op0, Op1))</div>
<div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;    <span class="keywordflow">return</span> Folded;</div>
<div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160; </div>
<div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;}</div>
<div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;<span class="comment">/// A ^ B can be specified using other logic ops in a variety of patterns. We</span></div>
<div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;<span class="comment">/// can fold these early and efficiently by morphing an existing instruction.</span></div>
<div class="line"><a name="l03631"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#a8a000056a3cea859eae917d17f8acfac"> 3631</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineAndOrXor_8cpp.html#a8a000056a3cea859eae917d17f8acfac">foldXorToXor</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;                                 <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode() == Instruction::Xor);</div>
<div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0);</div>
<div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op1 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</div>
<div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *A, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>;</div>
<div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160; </div>
<div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;  <span class="comment">// There are 4 commuted variants for each of the basic patterns.</span></div>
<div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160; </div>
<div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;  <span class="comment">// (A &amp; B) ^ (A | B) -&gt; A ^ B</span></div>
<div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;  <span class="comment">// (A &amp; B) ^ (B | A) -&gt; A ^ B</span></div>
<div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;  <span class="comment">// (A | B) ^ (A &amp; B) -&gt; A ^ B</span></div>
<div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;  <span class="comment">// (A | B) ^ (B &amp; A) -&gt; A ^ B</span></div>
<div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5cd1934b6c8ddec3a2d161ce710d59bc">m_c_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)),</div>
<div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;                        <a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)))))</div>
<div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateXor(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160; </div>
<div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;  <span class="comment">// (A | ~B) ^ (~A | B) -&gt; A ^ B</span></div>
<div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;  <span class="comment">// (~B | A) ^ (~A | B) -&gt; A ^ B</span></div>
<div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;  <span class="comment">// (~A | B) ^ (A | ~B) -&gt; A ^ B</span></div>
<div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;  <span class="comment">// (B | ~A) ^ (A | ~B) -&gt; A ^ B</span></div>
<div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))),</div>
<div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;                      <a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(A)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)))))</div>
<div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateXor(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160; </div>
<div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;  <span class="comment">// (A &amp; ~B) ^ (~A &amp; B) -&gt; A ^ B</span></div>
<div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;  <span class="comment">// (~B &amp; A) ^ (~A &amp; B) -&gt; A ^ B</span></div>
<div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;  <span class="comment">// (~A &amp; B) ^ (A &amp; ~B) -&gt; A ^ B</span></div>
<div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;  <span class="comment">// (B &amp; ~A) ^ (A &amp; ~B) -&gt; A ^ B</span></div>
<div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))),</div>
<div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;                      <a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(A)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)))))</div>
<div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateXor(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160; </div>
<div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;  <span class="comment">// For the remaining cases we need to get rid of one of the operands.</span></div>
<div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;  <span class="keywordflow">if</span> (!Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp; !Op1-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())</div>
<div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160; </div>
<div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;  <span class="comment">// (A | B) ^ ~(A &amp; B) -&gt; ~(A ^ B)</span></div>
<div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;  <span class="comment">// (A | B) ^ ~(B &amp; A) -&gt; ~(A ^ B)</span></div>
<div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;  <span class="comment">// (A &amp; B) ^ ~(A | B) -&gt; ~(A ^ B)</span></div>
<div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;  <span class="comment">// (A &amp; B) ^ ~(B | A) -&gt; ~(A ^ B)</span></div>
<div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;  <span class="comment">// Complexity sorting ensures the not will be on the right side.</span></div>
<div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;  <span class="keywordflow">if</span> ((<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))) &amp;&amp;</div>
<div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;       <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))))) ||</div>
<div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;      (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))) &amp;&amp;</div>
<div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;       <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))))))</div>
<div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a4f500ae0de71695b652af4c0958d8ea8">BinaryOperator::CreateNot</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateXor(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>));</div>
<div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160; </div>
<div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;}</div>
<div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160; </div>
<div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *InstCombinerImpl::foldXorOfICmps(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>,</div>
<div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;                                        <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode() == Instruction::Xor &amp;&amp; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0) == <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> &amp;&amp;</div>
<div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;         <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1) == <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> &amp;&amp; <span class="stringliteral">&quot;Should be &#39;xor&#39; with these operands&quot;</span>);</div>
<div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160; </div>
<div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> PredL = <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;getPredicate(), PredR = <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;getPredicate();</div>
<div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *LHS0 = <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;getOperand(0), *LHS1 = <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;getOperand(1);</div>
<div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *RHS0 = <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;getOperand(0), *RHS1 = <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;getOperand(1);</div>
<div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160; </div>
<div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a39b2cbd58018001ca6c1b2d26be87b86">predicatesFoldable</a>(PredL, PredR)) {</div>
<div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;    <span class="keywordflow">if</span> (LHS0 == RHS1 &amp;&amp; LHS1 == RHS0) {</div>
<div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;      <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(LHS0, LHS1);</div>
<div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;      PredL = <a class="code" href="classllvm_1_1CmpInst.html#a49a2d8f483ea08a3d6ea75f90c640d76">ICmpInst::getSwappedPredicate</a>(PredL);</div>
<div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;    }</div>
<div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;    <span class="keywordflow">if</span> (LHS0 == RHS0 &amp;&amp; LHS1 == RHS1) {</div>
<div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;      <span class="comment">// (icmp1 A, B) ^ (icmp2 A, B) --&gt; (icmp3 A, B)</span></div>
<div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a4a6621856674f376740a1ba6efd809e3">Code</a> = <a class="code" href="namespacellvm.html#ad877baf4953321b0cf8a72fb4fc4f14a">getICmpCode</a>(PredL) ^ <a class="code" href="namespacellvm.html#ad877baf4953321b0cf8a72fb4fc4f14a">getICmpCode</a>(PredR);</div>
<div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;      <span class="keywordtype">bool</span> IsSigned = <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;isSigned() || <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;isSigned();</div>
<div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="InstCombineAndOrXor_8cpp.html#a5c7e4979ac460c21af594ebda068ee77">getNewICmpValue</a>(Code, IsSigned, LHS0, LHS1, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;    }</div>
<div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;  }</div>
<div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160; </div>
<div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;  <span class="comment">// TODO: This can be generalized to compares of non-signbits using</span></div>
<div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;  <span class="comment">// decomposeBitTestICmp(). It could be enhanced more by using (something like)</span></div>
<div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;  <span class="comment">// foldLogOpOfMaskedICmps().</span></div>
<div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *LC, *RC;</div>
<div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(LHS1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(LC)) &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(RHS1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(RC)) &amp;&amp;</div>
<div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;      LHS0-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() == RHS0-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() &amp;&amp;</div>
<div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;      LHS0-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a34ee40bb2f4f5ece47ef19e5f1f57e3c">isIntOrIntVectorTy</a>() &amp;&amp;</div>
<div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;      (<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())) {</div>
<div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;    <span class="comment">// Convert xor of signbit tests to signbit test of xor&#39;d values:</span></div>
<div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;    <span class="comment">// (X &gt; -1) ^ (Y &gt; -1) --&gt; (X ^ Y) &lt; 0</span></div>
<div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;    <span class="comment">// (X &lt;  0) ^ (Y &lt;  0) --&gt; (X ^ Y) &lt; 0</span></div>
<div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;    <span class="comment">// (X &gt; -1) ^ (Y &lt;  0) --&gt; (X ^ Y) &gt; -1</span></div>
<div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;    <span class="comment">// (X &lt;  0) ^ (Y &gt; -1) --&gt; (X ^ Y) &gt; -1</span></div>
<div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;    <span class="keywordtype">bool</span> TrueIfSignedL, TrueIfSignedR;</div>
<div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;    <span class="keywordflow">if</span> (isSignBitCheck(PredL, *LC, TrueIfSignedL) &amp;&amp;</div>
<div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;        isSignBitCheck(PredR, *RC, TrueIfSignedR)) {</div>
<div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *XorLR = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateXor(LHS0, RHS0);</div>
<div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;      <span class="keywordflow">return</span> TrueIfSignedL == TrueIfSignedR ? <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIsNeg(XorLR) :</div>
<div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;                                              <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIsNotNeg(XorLR);</div>
<div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;    }</div>
<div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160; </div>
<div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;    <span class="comment">// (X &gt; C) ^ (X &lt; C + 2) --&gt; X != C + 1</span></div>
<div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;    <span class="comment">// (X &lt; C + 2) ^ (X &gt; C) --&gt; X != C + 1</span></div>
<div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;    <span class="comment">// Considering the correctness of this pattern, we should avoid that C is</span></div>
<div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;    <span class="comment">// non-negative and C + 2 is negative, although it will be matched by other</span></div>
<div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;    <span class="comment">// patterns.</span></div>
<div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, *C2;</div>
<div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;    <span class="keywordflow">if</span> ((PredL == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">CmpInst::ICMP_SGT</a> &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(LHS1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>)) &amp;&amp;</div>
<div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;         PredR == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">CmpInst::ICMP_SLT</a> &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(RHS1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(C2))) ||</div>
<div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;        (PredL == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">CmpInst::ICMP_SLT</a> &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(LHS1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(C2)) &amp;&amp;</div>
<div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;         PredR == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">CmpInst::ICMP_SGT</a> &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(RHS1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>))))</div>
<div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;      <span class="keywordflow">if</span> (LHS0 == RHS0 &amp;&amp; *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a> + 2 == *C2 &amp;&amp;</div>
<div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;          (<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>-&gt;isNegative() || C2-&gt;<a class="code" href="classllvm_1_1APInt.html#ac8c0157adbe12649beac0009c2f6ad8d">isNonNegative</a>()))</div>
<div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmpNE(LHS0,</div>
<div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;                                    <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(LHS0-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a> + 1));</div>
<div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;  }</div>
<div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160; </div>
<div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;  <span class="comment">// Instead of trying to imitate the folds for and/or, decompose this &#39;xor&#39;</span></div>
<div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;  <span class="comment">// into those logic ops. That is, try to turn this into an and-of-icmps</span></div>
<div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;  <span class="comment">// because we have many folds for that pattern.</span></div>
<div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;  <span class="comment">// This is based on a truth table definition of xor:</span></div>
<div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;  <span class="comment">// X ^ Y --&gt; (X | Y) &amp; !(X &amp; Y)</span></div>
<div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *OrICmp = <a class="code" href="namespacellvm.html#aa750395459fa1eb7130d6de8e3d074f6">simplifyBinOp</a>(Instruction::Or, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, SQ)) {</div>
<div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;    <span class="comment">// TODO: If OrICmp is true, then the definition of xor simplifies to !(X&amp;Y).</span></div>
<div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;    <span class="comment">// TODO: If OrICmp is false, the whole thing is false (InstSimplify?).</span></div>
<div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *AndICmp = <a class="code" href="namespacellvm.html#aa750395459fa1eb7130d6de8e3d074f6">simplifyBinOp</a>(Instruction::And, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, SQ)) {</div>
<div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;      <span class="comment">// TODO: Independently handle cases where the &#39;and&#39; side is a constant.</span></div>
<div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;      <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = <span class="keyword">nullptr</span>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;      <span class="keywordflow">if</span> (OrICmp == <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> &amp;&amp; AndICmp == <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>) {</div>
<div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;        <span class="comment">// (LHS | RHS) &amp; !(LHS &amp; RHS) --&gt; LHS &amp; !RHS  --&gt; X &amp; !Y</span></div>
<div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;        <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>;</div>
<div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;        <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>;</div>
<div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;      }</div>
<div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;      <span class="keywordflow">if</span> (OrICmp == <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> &amp;&amp; AndICmp == <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>) {</div>
<div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;        <span class="comment">// !(LHS &amp; RHS) &amp; (LHS | RHS) --&gt; !LHS &amp; RHS  --&gt; !Y &amp; X</span></div>
<div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;        <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>;</div>
<div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;        <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>;</div>
<div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;      }</div>
<div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> &amp;&amp; <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> &amp;&amp; (<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;hasOneUse() || canFreelyInvertAllUsersOf(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))) {</div>
<div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;        <span class="comment">// Invert the predicate of &#39;Y&#39;, thus inverting its output.</span></div>
<div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;        <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;setPredicate(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;getInversePredicate());</div>
<div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;        <span class="comment">// So, are there other uses of Y?</span></div>
<div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;hasOneUse()) {</div>
<div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;          <span class="comment">// We need to adapt other uses of Y though. Get a value that matches</span></div>
<div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;          <span class="comment">// the original value of Y before inversion. While this increases</span></div>
<div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;          <span class="comment">// immediate instruction count, we have just ensured that all the</span></div>
<div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;          <span class="comment">// users are freely-invertible, so that &#39;not&#39; *will* get folded away.</span></div>
<div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;          <a class="code" href="classllvm_1_1IRBuilderBase_1_1InsertPointGuard.html">BuilderTy::InsertPointGuard</a> Guard(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;          <span class="comment">// Set insertion point to right after the Y.</span></div>
<div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;          <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;getParent(), ++(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;getIterator()));</div>
<div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *NotY = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;getName() + <span class="stringliteral">&quot;.not&quot;</span>);</div>
<div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;          <span class="comment">// Replace all uses of Y (excluding the one in NotY!) with NotY.</span></div>
<div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;          Worklist.pushUsersToWorkList(*<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;          <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;replaceUsesWithIf(NotY,</div>
<div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;                               [NotY](<a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U) { <span class="keywordflow">return</span> U.<a class="code" href="classllvm_1_1Use.html#a50a2e57da274f8d69b9f932977379cdf">getUser</a>() != NotY; });</div>
<div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;        }</div>
<div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;        <span class="comment">// All done.</span></div>
<div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;      }</div>
<div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;    }</div>
<div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;  }</div>
<div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160; </div>
<div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;}</div>
<div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;<span class="comment">/// If we have a masked merge, in the canonical form of:</span></div>
<div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;<span class="comment">/// (assuming that A only has one use.)</span></div>
<div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;<span class="comment">///   |        A  |  |B|</span></div>
<div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;<span class="comment">///   ((x ^ y) &amp; M) ^ y</span></div>
<div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;<span class="comment">///    |  D  |</span></div>
<div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;<span class="comment">/// * If M is inverted:</span></div>
<div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;<span class="comment">///      |  D  |</span></div>
<div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;<span class="comment">///     ((x ^ y) &amp; ~M) ^ y</span></div>
<div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;<span class="comment">///   We can canonicalize by swapping the final xor operand</span></div>
<div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;<span class="comment">///   to eliminate the &#39;not&#39; of the mask.</span></div>
<div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;<span class="comment">///     ((x ^ y) &amp; M) ^ x</span></div>
<div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;<span class="comment">/// * If M is a constant, and D has one use, we transform to &#39;and&#39; / &#39;or&#39; ops</span></div>
<div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;<span class="comment">///   because that shortens the dependency chain and improves analysis:</span></div>
<div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;<span class="comment">///     (x &amp; M) | (y &amp; ~M)</span></div>
<div class="line"><a name="l03804"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#ae9cd0e6daeff5d17a0ef34311ed19540"> 3804</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineAndOrXor_8cpp.html#ae9cd0e6daeff5d17a0ef34311ed19540">visitMaskedMerge</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;                                     <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>;</div>
<div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>;</div>
<div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5cd1934b6c8ddec3a2d161ce710d59bc">m_c_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>),</div>
<div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;                         <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(</div>
<div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;                             <a class="code" href="namespacellvm_1_1PatternMatch.html#a575c2299c6f145ba3a12efa20829db43">m_CombineAnd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a5cd1934b6c8ddec3a2d161ce710d59bc">m_c_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)),</div>
<div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;                                          <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>)),</div>
<div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;                             <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>))))))</div>
<div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160; </div>
<div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NotM;</div>
<div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(NotM)))) {</div>
<div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;    <span class="comment">// De-invert the mask and swap the value in B part.</span></div>
<div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewA = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, NotM);</div>
<div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateXor(NewA, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;  }</div>
<div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160; </div>
<div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>-&gt;hasOneUse() &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))) {</div>
<div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;    <span class="comment">// Propagating undef is unsafe. Clamp undef elements to -1.</span></div>
<div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *EltTy = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getType()-&gt;<a class="code" href="classllvm_1_1Type.html#a4abb39a66573f61fda80469faa5d861d">getScalarType</a>();</div>
<div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;    <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="classllvm_1_1Constant.html#a174c8fd19771468c53842a7fde8ddce1">Constant::replaceUndefsWith</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">ConstantInt::getAllOnesValue</a>(EltTy));</div>
<div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;    <span class="comment">// Unfold.</span></div>
<div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NotC = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, NotC);</div>
<div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateOr(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;  }</div>
<div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160; </div>
<div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;}</div>
<div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160; </div>
<div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;<span class="comment">// Transform</span></div>
<div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;<span class="comment">//   ~(x ^ y)</span></div>
<div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;<span class="comment">// into:</span></div>
<div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;<span class="comment">//   (~x) ^ y</span></div>
<div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;<span class="comment">// or into</span></div>
<div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;<span class="comment">//   x ^ (~y)</span></div>
<div class="line"><a name="l03843"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#ab3d31fa8d6fbe5eefe6b7edbd4d2add5"> 3843</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineAndOrXor_8cpp.html#ab3d31fa8d6fbe5eefe6b7edbd4d2add5">sinkNotIntoXor</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>,</div>
<div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;                                   <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;  <span class="comment">// We only want to do the transform if it is free to do.</span></div>
<div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InstCombiner.html#a4f79ea1865b13e2d0915fb15370c87e9">InstCombiner::isFreeToInvert</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;hasOneUse())) {</div>
<div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;    <span class="comment">// Ok, good.</span></div>
<div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1InstCombiner.html#a4f79ea1865b13e2d0915fb15370c87e9">InstCombiner::isFreeToInvert</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;hasOneUse())) {</div>
<div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;  } <span class="keywordflow">else</span></div>
<div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160; </div>
<div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NotX = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getName() + <span class="stringliteral">&quot;.not&quot;</span>);</div>
<div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;  <span class="keywordflow">return</span> BinaryOperator::CreateXor(NotX, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getName() + <span class="stringliteral">&quot;.demorgan&quot;</span>);</div>
<div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;}</div>
<div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160; </div>
<div class="line"><a name="l03857"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#ab1eb2ac0947ffc98daa262f6391a805d"> 3857</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineAndOrXor_8cpp.html#ab1eb2ac0947ffc98daa262f6391a805d">foldNotXor</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;                               <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;  <span class="comment">// FIXME: one-use check is not needed in general, but currently we are unable</span></div>
<div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;  <span class="comment">// to fold &#39;not&#39; into &#39;icmp&#39;, if that &#39;icmp&#39; has multiple uses. (D35182)</span></div>
<div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))))))</div>
<div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160; </div>
<div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewXor = <a class="code" href="InstCombineAndOrXor_8cpp.html#ab3d31fa8d6fbe5eefe6b7edbd4d2add5">sinkNotIntoXor</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;    <span class="keywordflow">return</span> NewXor;</div>
<div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160; </div>
<div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;  <span class="keyword">auto</span> hasCommonOperand = [](<a class="code" href="classllvm_1_1Value.html">Value</a> *A, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>) {</div>
<div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;    <span class="keywordflow">return</span> A == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> || A == <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a> || <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> || <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> == <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>;</div>
<div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;  };</div>
<div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160; </div>
<div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *A, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, *<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>;</div>
<div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;  <span class="comment">// Canonicalize ~((A &amp; B) ^ (A | ?)) -&gt; (A &amp; B) | ~(A | ?)</span></div>
<div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;  <span class="comment">// 4 commuted variants</span></div>
<div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))) &amp;&amp;</div>
<div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>))) &amp;&amp; hasCommonOperand(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>)) {</div>
<div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NotY = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateOr(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, NotY);</div>
<div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;  };</div>
<div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160; </div>
<div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;  <span class="comment">// Canonicalize ~((A | ?) ^ (A &amp; B)) -&gt; (A &amp; B) | ~(A | ?)</span></div>
<div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;  <span class="comment">// 4 commuted variants</span></div>
<div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))) &amp;&amp;</div>
<div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>))) &amp;&amp; hasCommonOperand(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>)) {</div>
<div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NotX = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateOr(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, NotX);</div>
<div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;  };</div>
<div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160; </div>
<div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;}</div>
<div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;<span class="comment">/// Canonicalize a shifty way to code absolute value to the more common pattern</span></div>
<div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;<span class="comment">/// that uses negation and select.</span></div>
<div class="line"><a name="l03894"></a><span class="lineno"><a class="line" href="InstCombineAndOrXor_8cpp.html#a3bb4f8a59bc79743a01bfc530cb50689"> 3894</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineAndOrXor_8cpp.html#a3bb4f8a59bc79743a01bfc530cb50689">canonicalizeAbs</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;Xor,</div>
<div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;                                    <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a>.getOpcode() == Instruction::Xor &amp;&amp; <span class="stringliteral">&quot;Expected an xor instruction.&quot;</span>);</div>
<div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160; </div>
<div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;  <span class="comment">// There are 4 potential commuted variants. Move the &#39;ashr&#39; candidate to Op1.</span></div>
<div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;  <span class="comment">// We&#39;re relying on the fact that we only do this transform when the shift has</span></div>
<div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;  <span class="comment">// exactly 2 uses and the add has exactly 1 use (otherwise, we might increase</span></div>
<div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;  <span class="comment">// instructions).</span></div>
<div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a>.getOperand(0), *Op1 = <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a>.getOperand(1);</div>
<div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;  <span class="keywordflow">if</span> (Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a7c779ce2ba55bc94f52014fc25f3d520">hasNUses</a>(2))</div>
<div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Op0, Op1);</div>
<div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160; </div>
<div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a>.getType();</div>
<div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *A;</div>
<div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *ShAmt;</div>
<div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a64153676e101a130bbbaaf91635d253a">m_AShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(ShAmt))) &amp;&amp;</div>
<div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;      Op1-&gt;<a class="code" href="classllvm_1_1Value.html#a7c779ce2ba55bc94f52014fc25f3d520">hasNUses</a>(2) &amp;&amp; *ShAmt == Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>() - 1 &amp;&amp;</div>
<div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ad191220adaaedcfba833985509a17452">m_c_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op1))))) {</div>
<div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;    <span class="comment">// Op1 = ashr i32 A, 31   ; smear the sign bit</span></div>
<div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;    <span class="comment">// xor (add A, Op1), Op1  ; add -1 and flip bits if negative</span></div>
<div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;    <span class="comment">// --&gt; (A &lt; 0) ? -A : A</span></div>
<div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *IsNeg = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIsNeg(A);</div>
<div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;    <span class="comment">// Copy the nuw/nsw flags from the add to the negate.</span></div>
<div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;    <span class="keyword">auto</span> *Add = cast&lt;BinaryOperator&gt;(Op0);</div>
<div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NegA = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNeg(A, <span class="stringliteral">&quot;&quot;</span>, Add-&gt;hasNoUnsignedWrap(),</div>
<div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;                                   Add-&gt;hasNoSignedWrap());</div>
<div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(IsNeg, NegA, A);</div>
<div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;  }</div>
<div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;}</div>
<div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160; </div>
<div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;<span class="comment">// Transform</span></div>
<div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;<span class="comment">//   z = ~(x &amp;/| y)</span></div>
<div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;<span class="comment">// into:</span></div>
<div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;<span class="comment">//   z = ((~x) |/&amp; (~y))</span></div>
<div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;<span class="comment">// iff both x and y are free to invert and all uses of z can be freely updated.</span></div>
<div class="line"><a name="l03930"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a4e2dd07eceeed7496e6c3df4d364c91e"> 3930</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1InstCombinerImpl.html#a4e2dd07eceeed7496e6c3df4d364c91e">InstCombinerImpl::sinkNotIntoLogicalOp</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0, *Op1;</div>
<div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a3ab1823ec9dd8bdc5803e568bf72b0b3">m_LogicalOp</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Op0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Op1))))</div>
<div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160; </div>
<div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;  <span class="comment">// If this logic op has not been simplified yet, just bail out and let that</span></div>
<div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160;  <span class="comment">// happen first. Otherwise, the code below may wrongly invert.</span></div>
<div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160;  <span class="keywordflow">if</span> (Op0 == Op1)</div>
<div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160; </div>
<div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> NewOpc =</div>
<div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a213e6c0ca6e838157373b9a6018c0769">m_LogicalAnd</a>()) ? Instruction::Or : Instruction::And;</div>
<div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;  <span class="keywordtype">bool</span> IsBinaryOp = isa&lt;BinaryOperator&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160; </div>
<div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;  <span class="comment">// Can our users be adapted?</span></div>
<div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1InstCombiner.html#a0c32de3a8e64735bd308fb50fa7f1f38">InstCombiner::canFreelyInvertAllUsersOf</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="comment">/*IgnoredUser=*/</span><span class="keyword">nullptr</span>))</div>
<div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160; </div>
<div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;  <span class="comment">// And can the operands be adapted?</span></div>
<div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> : {Op0, Op1})</div>
<div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;    <span class="keywordflow">if</span> (!(<a class="code" href="classllvm_1_1InstCombiner.html#a4f79ea1865b13e2d0915fb15370c87e9">InstCombiner::isFreeToInvert</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, <span class="comment">/*WillInvertAllUses=*/</span><span class="keyword">true</span>) &amp;&amp;</div>
<div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;          (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aec0ccdbde0581b3aae7f001634a34d8e">m_ImmConstant</a>()) ||</div>
<div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;           (isa&lt;Instruction&gt;(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>) &amp;&amp;</div>
<div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;            <a class="code" href="classllvm_1_1InstCombiner.html#a0c32de3a8e64735bd308fb50fa7f1f38">InstCombiner::canFreelyInvertAllUsersOf</a>(cast&lt;Instruction&gt;(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>),</div>
<div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;                                                    <span class="comment">/*IgnoredUser=*/</span>&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)))))</div>
<div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160; </div>
<div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> **<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> : {&amp;Op0, &amp;Op1}) {</div>
<div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NotOp;</div>
<div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;Constant&gt;(*<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>)) {</div>
<div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;      NotOp = <a class="code" href="classllvm_1_1ConstantExpr.html#a5b43a866f0fca605556f0f69f70c522a">ConstantExpr::getNot</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(</div>
<div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;          &amp;*cast&lt;Instruction&gt;(*Op)-&gt;getInsertionPointAfterDef());</div>
<div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;      NotOp = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(*<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, (*Op)-&gt;getName() + <span class="stringliteral">&quot;.not&quot;</span>);</div>
<div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;      (*Op)-&gt;replaceUsesWithIf(</div>
<div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;          NotOp, [NotOp](<a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U) { <span class="keywordflow">return</span> U.<a class="code" href="classllvm_1_1Use.html#a50a2e57da274f8d69b9f932977379cdf">getUser</a>() != NotOp; });</div>
<div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;      freelyInvertAllUsersOf(NotOp, <span class="comment">/*IgnoredUser=*/</span>&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;    }</div>
<div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;    *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> = NotOp;</div>
<div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;  }</div>
<div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160; </div>
<div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getInsertionPointAfterDef());</div>
<div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NewLogicOp;</div>
<div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;  <span class="keywordflow">if</span> (IsBinaryOp)</div>
<div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;    NewLogicOp = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(NewOpc, Op0, Op1, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getName() + <span class="stringliteral">&quot;.not&quot;</span>);</div>
<div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;    NewLogicOp =</div>
<div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLogicalOp(NewOpc, Op0, Op1, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getName() + <span class="stringliteral">&quot;.not&quot;</span>);</div>
<div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160; </div>
<div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;  replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, NewLogicOp);</div>
<div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;  <span class="comment">// We can not just create an outer `not`, it will most likely be immediately</span></div>
<div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;  <span class="comment">// folded back, reconstructing our initial pattern, and causing an</span></div>
<div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;  <span class="comment">// infinite combine loop, so immediately manually fold it away.</span></div>
<div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;  freelyInvertAllUsersOf(NewLogicOp);</div>
<div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;}</div>
<div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160; </div>
<div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;<span class="comment">// Transform</span></div>
<div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;<span class="comment">//   z = (~x) &amp;/| y</span></div>
<div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160;<span class="comment">// into:</span></div>
<div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;<span class="comment">//   z = ~(x |/&amp; (~y))</span></div>
<div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;<span class="comment">// iff y is free to invert and all uses of z can be freely updated.</span></div>
<div class="line"><a name="l03993"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a8d44c548f74b3d233a248672402b5dd1"> 3993</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1InstCombinerImpl.html#a8d44c548f74b3d233a248672402b5dd1">InstCombinerImpl::sinkNotIntoOtherHandOfLogicalOp</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0, *Op1;</div>
<div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a3ab1823ec9dd8bdc5803e568bf72b0b3">m_LogicalOp</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Op0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Op1))))</div>
<div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a> NewOpc =</div>
<div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a213e6c0ca6e838157373b9a6018c0769">m_LogicalAnd</a>()) ? Instruction::Or : Instruction::And;</div>
<div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;  <span class="keywordtype">bool</span> IsBinaryOp = isa&lt;BinaryOperator&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160; </div>
<div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NotOp0 = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NotOp1 = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> **OpToInvert = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(NotOp0))) &amp;&amp;</div>
<div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;      <a class="code" href="classllvm_1_1InstCombiner.html#a4f79ea1865b13e2d0915fb15370c87e9">InstCombiner::isFreeToInvert</a>(Op1, <span class="comment">/*WillInvertAllUses=*/</span><span class="keyword">true</span>) &amp;&amp;</div>
<div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;      (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aec0ccdbde0581b3aae7f001634a34d8e">m_ImmConstant</a>()) ||</div>
<div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;       (isa&lt;Instruction&gt;(Op1) &amp;&amp;</div>
<div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;        <a class="code" href="classllvm_1_1InstCombiner.html#a0c32de3a8e64735bd308fb50fa7f1f38">InstCombiner::canFreelyInvertAllUsersOf</a>(cast&lt;Instruction&gt;(Op1),</div>
<div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;                                                <span class="comment">/*IgnoredUser=*/</span>&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)))) {</div>
<div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160;    Op0 = NotOp0;</div>
<div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;    OpToInvert = &amp;Op1;</div>
<div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(NotOp1))) &amp;&amp;</div>
<div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;             <a class="code" href="classllvm_1_1InstCombiner.html#a4f79ea1865b13e2d0915fb15370c87e9">InstCombiner::isFreeToInvert</a>(Op0, <span class="comment">/*WillInvertAllUses=*/</span><span class="keyword">true</span>) &amp;&amp;</div>
<div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;             (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aec0ccdbde0581b3aae7f001634a34d8e">m_ImmConstant</a>()) ||</div>
<div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;              (isa&lt;Instruction&gt;(Op0) &amp;&amp;</div>
<div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;               <a class="code" href="classllvm_1_1InstCombiner.html#a0c32de3a8e64735bd308fb50fa7f1f38">InstCombiner::canFreelyInvertAllUsersOf</a>(cast&lt;Instruction&gt;(Op0),</div>
<div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;                                                       <span class="comment">/*IgnoredUser=*/</span>&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)))) {</div>
<div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;    Op1 = NotOp1;</div>
<div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;    OpToInvert = &amp;Op0;</div>
<div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;  } <span class="keywordflow">else</span></div>
<div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160; </div>
<div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;  <span class="comment">// And can our users be adapted?</span></div>
<div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1InstCombiner.html#a0c32de3a8e64735bd308fb50fa7f1f38">InstCombiner::canFreelyInvertAllUsersOf</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="comment">/*IgnoredUser=*/</span><span class="keyword">nullptr</span>))</div>
<div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160; </div>
<div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = dyn_cast&lt;Constant&gt;(*OpToInvert)) {</div>
<div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;    *OpToInvert = <a class="code" href="classllvm_1_1ConstantExpr.html#a5b43a866f0fca605556f0f69f70c522a">ConstantExpr::getNot</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(</div>
<div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;        &amp;*cast&lt;Instruction&gt;(*OpToInvert)-&gt;getInsertionPointAfterDef());</div>
<div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NotOpToInvert =</div>
<div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(*OpToInvert, (*OpToInvert)-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;.not&quot;</span>);</div>
<div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;    (*OpToInvert)-&gt;replaceUsesWithIf(NotOpToInvert, [NotOpToInvert](<a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U) {</div>
<div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;      <span class="keywordflow">return</span> U.<a class="code" href="classllvm_1_1Use.html#a50a2e57da274f8d69b9f932977379cdf">getUser</a>() != NotOpToInvert;</div>
<div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;    });</div>
<div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;    freelyInvertAllUsersOf(NotOpToInvert, <span class="comment">/*IgnoredUser=*/</span>&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;    *OpToInvert = NotOpToInvert;</div>
<div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;  }</div>
<div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160; </div>
<div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(&amp;*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getInsertionPointAfterDef());</div>
<div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NewBinOp;</div>
<div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;  <span class="keywordflow">if</span> (IsBinaryOp)</div>
<div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;    NewBinOp = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinOp(NewOpc, Op0, Op1, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getName() + <span class="stringliteral">&quot;.not&quot;</span>);</div>
<div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;    NewBinOp = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLogicalOp(NewOpc, Op0, Op1, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getName() + <span class="stringliteral">&quot;.not&quot;</span>);</div>
<div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;  replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, NewBinOp);</div>
<div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;  <span class="comment">// We can not just create an outer `not`, it will most likely be immediately</span></div>
<div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;  <span class="comment">// folded back, reconstructing our initial pattern, and causing an</span></div>
<div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;  <span class="comment">// infinite combine loop, so immediately manually fold it away.</span></div>
<div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;  freelyInvertAllUsersOf(NewBinOp);</div>
<div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;}</div>
<div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160; </div>
<div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InstCombinerImpl::foldNot(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NotOp;</div>
<div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(NotOp))))</div>
<div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160; </div>
<div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;  <span class="comment">// Apply DeMorgan&#39;s Law for &#39;nand&#39; / &#39;nor&#39; logic with an inverted operand.</span></div>
<div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;  <span class="comment">// We must eliminate the and/or (one-use) for these transforms to not increase</span></div>
<div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;  <span class="comment">// the instruction count.</span></div>
<div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;  <span class="comment">// ~(~X &amp; Y) --&gt; (X | ~Y)</span></div>
<div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;  <span class="comment">// ~(Y &amp; ~X) --&gt; (X | ~Y)</span></div>
<div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;  <span class="comment">// Note: The logical matches do not check for the commuted patterns because</span></div>
<div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;  <span class="comment">//       those are handled via SimplifySelectsFeedingBinaryOp().</span></div>
<div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType();</div>
<div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(NotOp, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))))) {</div>
<div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NotY = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;getName() + <span class="stringliteral">&quot;.not&quot;</span>);</div>
<div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateOr(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, NotY);</div>
<div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;  }</div>
<div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(NotOp, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a213e6c0ca6e838157373b9a6018c0769">m_LogicalAnd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))))) {</div>
<div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NotY = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;getName() + <span class="stringliteral">&quot;.not&quot;</span>);</div>
<div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(Ty), NotY);</div>
<div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;  }</div>
<div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160; </div>
<div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160;  <span class="comment">// ~(~X | Y) --&gt; (X &amp; ~Y)</span></div>
<div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;  <span class="comment">// ~(Y | ~X) --&gt; (X &amp; ~Y)</span></div>
<div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(NotOp, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))))) {</div>
<div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NotY = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;getName() + <span class="stringliteral">&quot;.not&quot;</span>);</div>
<div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, NotY);</div>
<div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;  }</div>
<div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(NotOp, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a1a06b1cff93069d7403ea03e6150e386">m_LogicalOr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))))) {</div>
<div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NotY = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;getName() + <span class="stringliteral">&quot;.not&quot;</span>);</div>
<div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, NotY, <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(Ty));</div>
<div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160;  }</div>
<div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160; </div>
<div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;  <span class="comment">// Is this a &#39;not&#39; (~) fed by a binary operator?</span></div>
<div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;  <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *NotVal;</div>
<div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(NotOp, <a class="code" href="namespacellvm_1_1PatternMatch.html#a43ac4fbaaf63a88eb5ac05f6d3e5649c">m_BinOp</a>(NotVal))) {</div>
<div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160;    <span class="comment">// ~((-X) | Y) --&gt; (X - 1) &amp; (~Y)</span></div>
<div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(NotVal,</div>
<div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;              <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2fed53ed2b3225752bd9e4fce4967361">m_Neg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))))) {</div>
<div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *DecX = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">ConstantInt::getAllOnesValue</a>(Ty));</div>
<div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NotY = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateAnd(DecX, NotY);</div>
<div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160;    }</div>
<div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160; </div>
<div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160;    <span class="comment">// ~(~X &gt;&gt;s Y) --&gt; (X &gt;&gt;s Y)</span></div>
<div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(NotVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#a64153676e101a130bbbaaf91635d253a">m_AShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))))</div>
<div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateAShr(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160; </div>
<div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160;    <span class="comment">// Bit-hack form of a signbit test for iN type:</span></div>
<div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;    <span class="comment">// ~(X &gt;&gt;s (N - 1)) --&gt; sext i1 (X &gt; -1) to iN</span></div>
<div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;    <span class="keywordtype">unsigned</span> FullShift = Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>() - 1;</div>
<div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(NotVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a64153676e101a130bbbaaf91635d253a">m_AShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">m_SpecificInt</a>(FullShift))))) {</div>
<div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *IsNotNeg = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIsNotNeg(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <span class="stringliteral">&quot;isnotneg&quot;</span>);</div>
<div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1SExtInst.html">SExtInst</a>(IsNotNeg, Ty);</div>
<div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160;    }</div>
<div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160; </div>
<div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160;    <span class="comment">// If we are inverting a right-shifted constant, we may be able to eliminate</span></div>
<div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;    <span class="comment">// the &#39;not&#39; by inverting the constant and using the opposite shift type.</span></div>
<div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;    <span class="comment">// Canonicalization rules ensure that only a negative constant uses &#39;ashr&#39;,</span></div>
<div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160;    <span class="comment">// but we must check that in case that transform has not fired yet.</span></div>
<div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160; </div>
<div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160;    <span class="comment">// ~(C &gt;&gt;s Y) --&gt; ~C &gt;&gt;u Y (when inverting the replicated sign bits)</span></div>
<div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(NotVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#a64153676e101a130bbbaaf91635d253a">m_AShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))) &amp;&amp;</div>
<div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aa82e8cd74318874b5a685021e96a412f">m_Negative</a>())) {</div>
<div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160;      <span class="comment">// We matched a negative constant, so propagating undef is unsafe.</span></div>
<div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;      <span class="comment">// Clamp undef elements to -1.</span></div>
<div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *EltTy = Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a4abb39a66573f61fda80469faa5d861d">getScalarType</a>();</div>
<div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;      <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="classllvm_1_1Constant.html#a174c8fd19771468c53842a7fde8ddce1">Constant::replaceUndefsWith</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">ConstantInt::getAllOnesValue</a>(EltTy));</div>
<div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateLShr(<a class="code" href="classllvm_1_1ConstantExpr.html#a5b43a866f0fca605556f0f69f70c522a">ConstantExpr::getNot</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>), <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;    }</div>
<div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160; </div>
<div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160;    <span class="comment">// ~(C &gt;&gt;u Y) --&gt; ~C &gt;&gt;s Y (when inverting the replicated sign bits)</span></div>
<div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(NotVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">m_LShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))) &amp;&amp;</div>
<div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a1c0eba92185bf1962f1b627ff0a85a82">m_NonNegative</a>())) {</div>
<div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160;      <span class="comment">// We matched a non-negative constant, so propagating undef is unsafe.</span></div>
<div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;      <span class="comment">// Clamp undef elements to 0.</span></div>
<div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *EltTy = Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a4abb39a66573f61fda80469faa5d861d">getScalarType</a>();</div>
<div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;      <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="classllvm_1_1Constant.html#a174c8fd19771468c53842a7fde8ddce1">Constant::replaceUndefsWith</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(EltTy));</div>
<div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateAShr(<a class="code" href="classllvm_1_1ConstantExpr.html#a5b43a866f0fca605556f0f69f70c522a">ConstantExpr::getNot</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>), <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160;    }</div>
<div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160; </div>
<div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;    <span class="comment">// ~(X + C) --&gt; ~C - X</span></div>
<div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(NotVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#ad191220adaaedcfba833985509a17452">m_c_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aec0ccdbde0581b3aae7f001634a34d8e">m_ImmConstant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))))</div>
<div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateSub(<a class="code" href="classllvm_1_1ConstantExpr.html#a5b43a866f0fca605556f0f69f70c522a">ConstantExpr::getNot</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>), <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160; </div>
<div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160;    <span class="comment">// ~(X - Y) --&gt; ~X + Y</span></div>
<div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160;    <span class="comment">// FIXME: is it really beneficial to sink the `not` here?</span></div>
<div class="line"><a name="l04146"></a><span class="lineno"> 4146</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(NotVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#ac3ed5602889a22db44a16e1b97fac5b8">m_Sub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))))</div>
<div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160;      <span class="keywordflow">if</span> (isa&lt;Constant&gt;(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>) || NotVal-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())</div>
<div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="Reassociate_8cpp.html#a680ae08c1b9b93cebdd6cbb726fe8f3d">BinaryOperator::CreateAdd</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160; </div>
<div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;    <span class="comment">// ~(~X + Y) --&gt; X - Y</span></div>
<div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(NotVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#ad191220adaaedcfba833985509a17452">m_c_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))))</div>
<div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a16799e07e39d599e81926d1a69301fab">BinaryOperator::CreateWithCopiedFlags</a>(Instruction::Sub, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>,</div>
<div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;                                                   NotVal);</div>
<div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;  }</div>
<div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160; </div>
<div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;  <span class="comment">// not (cmp A, B) = !cmp A, B</span></div>
<div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> Pred;</div>
<div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(NotOp, <a class="code" href="namespacellvm_1_1PatternMatch.html#a753e1338645ec04d045211b8a46d968d">m_Cmp</a>(Pred, <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>())) &amp;&amp;</div>
<div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;      (NotOp-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() ||</div>
<div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;       <a class="code" href="classllvm_1_1InstCombiner.html#a0c32de3a8e64735bd308fb50fa7f1f38">InstCombiner::canFreelyInvertAllUsersOf</a>(cast&lt;Instruction&gt;(NotOp),</div>
<div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;                                               <span class="comment">/*IgnoredUser=*/</span><span class="keyword">nullptr</span>))) {</div>
<div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160;    cast&lt;CmpInst&gt;(NotOp)-&gt;setPredicate(<a class="code" href="classllvm_1_1CmpInst.html#aa2a54b545d237ecfe450fd1292f7675e">CmpInst::getInversePredicate</a>(Pred));</div>
<div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160;    freelyInvertAllUsersOf(NotOp);</div>
<div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;  }</div>
<div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160; </div>
<div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160;  <span class="comment">// Move a &#39;not&#39; ahead of casts of a bool to enable logic reduction:</span></div>
<div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;  <span class="comment">// not (bitcast (sext i1 X)) --&gt; bitcast (sext (not i1 X))</span></div>
<div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(NotOp, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ac0467ca7fad871738b10db95feb40dad">m_BitCast</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">m_SExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)))))) &amp;&amp; <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()-&gt;isIntOrIntVectorTy(1)) {</div>
<div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *SextTy = cast&lt;BitCastOperator&gt;(NotOp)-&gt;getSrcTy();</div>
<div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NotX = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Sext = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSExt(NotX, SextTy);</div>
<div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#a31d2885660f654b31d8741726c3ea8d9">CastInst::CreateBitOrPointerCast</a>(Sext, Ty);</div>
<div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;  }</div>
<div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160; </div>
<div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *NotOpI = dyn_cast&lt;Instruction&gt;(NotOp))</div>
<div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;    <span class="keywordflow">if</span> (sinkNotIntoLogicalOp(*NotOpI))</div>
<div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160; </div>
<div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;  <span class="comment">// Eliminate a bitwise &#39;not&#39; op of &#39;not&#39; min/max by inverting the min/max:</span></div>
<div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;  <span class="comment">// ~min(~X, ~Y) --&gt; max(X, Y)</span></div>
<div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;  <span class="comment">// ~max(~X, Y) --&gt; min(X, ~Y)</span></div>
<div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160;  <span class="keyword">auto</span> *II = dyn_cast&lt;IntrinsicInst&gt;(NotOp);</div>
<div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;  <span class="keywordflow">if</span> (II &amp;&amp; II-&gt;hasOneUse()) {</div>
<div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(NotOp, <a class="code" href="namespacellvm_1_1PatternMatch.html#a74a8221adbd09a9076a1ab471644b223">m_MaxOrMin</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))) &amp;&amp;</div>
<div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;        isFreeToInvert(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;hasOneUse()) &amp;&amp;</div>
<div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160;        isFreeToInvert(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;hasOneUse())) {</div>
<div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;      <a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">Intrinsic::ID</a> InvID = <a class="code" href="namespacellvm.html#a0434306df3aa5ec48fcf19d0958d7c01">getInverseMinMaxIntrinsic</a>(II-&gt;getIntrinsicID());</div>
<div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NotX = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NotY = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *InvMaxMin = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinaryIntrinsic(InvID, NotX, NotY);</div>
<div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, InvMaxMin);</div>
<div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;    }</div>
<div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(NotOp, <a class="code" href="namespacellvm_1_1PatternMatch.html#adcc0eb018adede4d62dafa5e60bce4be">m_c_MaxOrMin</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)))) {</div>
<div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;      <a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">Intrinsic::ID</a> InvID = <a class="code" href="namespacellvm.html#a0434306df3aa5ec48fcf19d0958d7c01">getInverseMinMaxIntrinsic</a>(II-&gt;getIntrinsicID());</div>
<div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NotY = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *InvMaxMin = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinaryIntrinsic(InvID, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, NotY);</div>
<div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, InvMaxMin);</div>
<div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160;    }</div>
<div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160; </div>
<div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;    <span class="keywordflow">if</span> (II-&gt;getIntrinsicID() == Intrinsic::is_fpclass) {</div>
<div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;      <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *ClassMask = cast&lt;ConstantInt&gt;(II-&gt;getArgOperand(1));</div>
<div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;      II-&gt;setArgOperand(</div>
<div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160;          1, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(ClassMask-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#afe3ce7fc89f36474eb0369cbb792c05a">getType</a>(),</div>
<div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;                              ~ClassMask-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#ac09a21c371a9c535cbc13e8f82503aec">getZExtValue</a>() &amp; <a class="code" href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67ae40661d92d6edd95f9ba785c04e08362">fcAllFlags</a>));</div>
<div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, II);</div>
<div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160;    }</div>
<div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;  }</div>
<div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160; </div>
<div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160;  <span class="keywordflow">if</span> (NotOp-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>()) {</div>
<div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160;    <span class="comment">// Pull &#39;not&#39; into operands of select if both operands are one-use compares</span></div>
<div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160;    <span class="comment">// or one is one-use compare and the other one is a constant.</span></div>
<div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160;    <span class="comment">// Inverting the predicates eliminates the &#39;not&#39; operation.</span></div>
<div class="line"><a name="l04214"></a><span class="lineno"> 4214</span>&#160;    <span class="comment">// Example:</span></div>
<div class="line"><a name="l04215"></a><span class="lineno"> 4215</span>&#160;    <span class="comment">//   not (select ?, (cmp TPred, ?, ?), (cmp FPred, ?, ?) --&gt;</span></div>
<div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160;    <span class="comment">//     select ?, (cmp InvTPred, ?, ?), (cmp InvFPred, ?, ?)</span></div>
<div class="line"><a name="l04217"></a><span class="lineno"> 4217</span>&#160;    <span class="comment">//   not (select ?, (cmp TPred, ?, ?), true --&gt;</span></div>
<div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160;    <span class="comment">//     select ?, (cmp InvTPred, ?, ?), false</span></div>
<div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Sel = dyn_cast&lt;SelectInst&gt;(NotOp)) {</div>
<div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *TV = Sel-&gt;getTrueValue();</div>
<div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *FV = Sel-&gt;getFalseValue();</div>
<div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;      <span class="keyword">auto</span> *CmpT = dyn_cast&lt;CmpInst&gt;(TV);</div>
<div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160;      <span class="keyword">auto</span> *CmpF = dyn_cast&lt;CmpInst&gt;(FV);</div>
<div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;      <span class="keywordtype">bool</span> InvertibleT = (CmpT &amp;&amp; CmpT-&gt;hasOneUse()) || isa&lt;Constant&gt;(TV);</div>
<div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160;      <span class="keywordtype">bool</span> InvertibleF = (CmpF &amp;&amp; CmpF-&gt;hasOneUse()) || isa&lt;Constant&gt;(FV);</div>
<div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;      <span class="keywordflow">if</span> (InvertibleT &amp;&amp; InvertibleF) {</div>
<div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160;        <span class="keywordflow">if</span> (CmpT)</div>
<div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160;          CmpT-&gt;setPredicate(CmpT-&gt;getInversePredicate());</div>
<div class="line"><a name="l04229"></a><span class="lineno"> 4229</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160;          Sel-&gt;setTrueValue(<a class="code" href="classllvm_1_1ConstantExpr.html#a5b43a866f0fca605556f0f69f70c522a">ConstantExpr::getNot</a>(cast&lt;Constant&gt;(TV)));</div>
<div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;        <span class="keywordflow">if</span> (CmpF)</div>
<div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;          CmpF-&gt;setPredicate(CmpF-&gt;getInversePredicate());</div>
<div class="line"><a name="l04233"></a><span class="lineno"> 4233</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160;          Sel-&gt;setFalseValue(<a class="code" href="classllvm_1_1ConstantExpr.html#a5b43a866f0fca605556f0f69f70c522a">ConstantExpr::getNot</a>(cast&lt;Constant&gt;(FV)));</div>
<div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;        <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Sel);</div>
<div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;      }</div>
<div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;    }</div>
<div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160;  }</div>
<div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160; </div>
<div class="line"><a name="l04240"></a><span class="lineno"> 4240</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewXor = <a class="code" href="InstCombineAndOrXor_8cpp.html#ab1eb2ac0947ffc98daa262f6391a805d">foldNotXor</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160;    <span class="keywordflow">return</span> NewXor;</div>
<div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160; </div>
<div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160;}</div>
<div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160; </div>
<div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;<span class="comment">// FIXME: We use commutative matchers (m_c_*) for some, but not all, matches</span></div>
<div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;<span class="comment">// here. We should standardize that construct where it is needed or choose some</span></div>
<div class="line"><a name="l04248"></a><span class="lineno"> 4248</span>&#160;<span class="comment">// other way to ensure that commutated variants of patterns are not missed.</span></div>
<div class="line"><a name="l04249"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#aaf7b6cd7c3ceb4af17b610cba09648c9"> 4249</a></span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#aaf7b6cd7c3ceb4af17b610cba09648c9">InstCombinerImpl::visitXor</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l04250"></a><span class="lineno"> 4250</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#a4f6b08837306196c6ff45fc5c65fe815">simplifyXorInst</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1),</div>
<div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160;                                 SQ.getWithInstruction(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)))</div>
<div class="line"><a name="l04252"></a><span class="lineno"> 4252</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l04253"></a><span class="lineno"> 4253</span>&#160; </div>
<div class="line"><a name="l04254"></a><span class="lineno"> 4254</span>&#160;  <span class="keywordflow">if</span> (SimplifyAssociativeOrCommutative(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l04255"></a><span class="lineno"> 4255</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l04256"></a><span class="lineno"> 4256</span>&#160; </div>
<div class="line"><a name="l04257"></a><span class="lineno"> 4257</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = foldVectorBinop(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l04258"></a><span class="lineno"> 4258</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l04259"></a><span class="lineno"> 4259</span>&#160; </div>
<div class="line"><a name="l04260"></a><span class="lineno"> 4260</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Phi = foldBinopWithPhiOperands(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l04261"></a><span class="lineno"> 4261</span>&#160;    <span class="keywordflow">return</span> Phi;</div>
<div class="line"><a name="l04262"></a><span class="lineno"> 4262</span>&#160; </div>
<div class="line"><a name="l04263"></a><span class="lineno"> 4263</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewXor = <a class="code" href="InstCombineAndOrXor_8cpp.html#a8a000056a3cea859eae917d17f8acfac">foldXorToXor</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l04264"></a><span class="lineno"> 4264</span>&#160;    <span class="keywordflow">return</span> NewXor;</div>
<div class="line"><a name="l04265"></a><span class="lineno"> 4265</span>&#160; </div>
<div class="line"><a name="l04266"></a><span class="lineno"> 4266</span>&#160;  <span class="comment">// (A&amp;B)^(A&amp;C) -&gt; A&amp;(B^C) etc</span></div>
<div class="line"><a name="l04267"></a><span class="lineno"> 4267</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = foldUsingDistributiveLaws(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l04268"></a><span class="lineno"> 4268</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l04269"></a><span class="lineno"> 4269</span>&#160; </div>
<div class="line"><a name="l04270"></a><span class="lineno"> 4270</span>&#160;  <span class="comment">// See if we can simplify any instructions used by the instruction whose sole</span></div>
<div class="line"><a name="l04271"></a><span class="lineno"> 4271</span>&#160;  <span class="comment">// purpose is to compute bits we don&#39;t care about.</span></div>
<div class="line"><a name="l04272"></a><span class="lineno"> 4272</span>&#160;  <span class="keywordflow">if</span> (SimplifyDemandedInstructionBits(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l04273"></a><span class="lineno"> 4273</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l04274"></a><span class="lineno"> 4274</span>&#160; </div>
<div class="line"><a name="l04275"></a><span class="lineno"> 4275</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="InstCombineAndOrXor_8cpp.html#aed3110e8dfc807586686091e1b17995d">SimplifyBSwap</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l04276"></a><span class="lineno"> 4276</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l04277"></a><span class="lineno"> 4277</span>&#160; </div>
<div class="line"><a name="l04278"></a><span class="lineno"> 4278</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *R = foldNot(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l04279"></a><span class="lineno"> 4279</span>&#160;    <span class="keywordflow">return</span> R;</div>
<div class="line"><a name="l04280"></a><span class="lineno"> 4280</span>&#160; </div>
<div class="line"><a name="l04281"></a><span class="lineno"> 4281</span>&#160;  <span class="comment">// Fold (X &amp; M) ^ (Y &amp; ~M) -&gt; (X &amp; M) | (Y &amp; ~M)</span></div>
<div class="line"><a name="l04282"></a><span class="lineno"> 4282</span>&#160;  <span class="comment">// This it a special case in haveNoCommonBitsSet, but the computeKnownBits</span></div>
<div class="line"><a name="l04283"></a><span class="lineno"> 4283</span>&#160;  <span class="comment">// calls in there are unnecessary as SimplifyDemandedInstructionBits should</span></div>
<div class="line"><a name="l04284"></a><span class="lineno"> 4284</span>&#160;  <span class="comment">// have already taken care of those cases.</span></div>
<div class="line"><a name="l04285"></a><span class="lineno"> 4285</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0), *Op1 = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1);</div>
<div class="line"><a name="l04286"></a><span class="lineno"> 4286</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>;</div>
<div class="line"><a name="l04287"></a><span class="lineno"> 4287</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5cd1934b6c8ddec3a2d161ce710d59bc">m_c_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>()),</div>
<div class="line"><a name="l04288"></a><span class="lineno"> 4288</span>&#160;                        <a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>()))))</div>
<div class="line"><a name="l04289"></a><span class="lineno"> 4289</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateOr(Op0, Op1);</div>
<div class="line"><a name="l04290"></a><span class="lineno"> 4290</span>&#160; </div>
<div class="line"><a name="l04291"></a><span class="lineno"> 4291</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a> = <a class="code" href="InstCombineAndOrXor_8cpp.html#ae9cd0e6daeff5d17a0ef34311ed19540">visitMaskedMerge</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l04292"></a><span class="lineno"> 4292</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">Xor</a>;</div>
<div class="line"><a name="l04293"></a><span class="lineno"> 4293</span>&#160; </div>
<div class="line"><a name="l04294"></a><span class="lineno"> 4294</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l04295"></a><span class="lineno"> 4295</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>;</div>
<div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>))) {</div>
<div class="line"><a name="l04297"></a><span class="lineno"> 4297</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *C2;</div>
<div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160; </div>
<div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aec0ccdbde0581b3aae7f001634a34d8e">m_ImmConstant</a>(C2)))) &amp;&amp;</div>
<div class="line"><a name="l04300"></a><span class="lineno"> 4300</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aec0ccdbde0581b3aae7f001634a34d8e">m_ImmConstant</a>())) {</div>
<div class="line"><a name="l04301"></a><span class="lineno"> 4301</span>&#160;      <span class="comment">// (X | C2) ^ C1 --&gt; (X &amp; ~C2) ^ (C1^C2)</span></div>
<div class="line"><a name="l04302"></a><span class="lineno"> 4302</span>&#160;      C2 = <a class="code" href="classllvm_1_1Constant.html#a174c8fd19771468c53842a7fde8ddce1">Constant::replaceUndefsWith</a>(</div>
<div class="line"><a name="l04303"></a><span class="lineno"> 4303</span>&#160;          C2, <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">Constant::getAllOnesValue</a>(C2-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a4abb39a66573f61fda80469faa5d861d">getScalarType</a>()));</div>
<div class="line"><a name="l04304"></a><span class="lineno"> 4304</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(</div>
<div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160;          <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1Constant.html#a31dbd9cf336966a863e37c5653b6c134">Constant::mergeUndefsWith</a>(<a class="code" href="classllvm_1_1ConstantExpr.html#a5b43a866f0fca605556f0f69f70c522a">ConstantExpr::getNot</a>(C2), <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>));</div>
<div class="line"><a name="l04306"></a><span class="lineno"> 4306</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateXor(</div>
<div class="line"><a name="l04307"></a><span class="lineno"> 4307</span>&#160;          <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>, <a class="code" href="classllvm_1_1Constant.html#a31dbd9cf336966a863e37c5653b6c134">Constant::mergeUndefsWith</a>(<a class="code" href="classllvm_1_1ConstantExpr.html#a9fe0b1e68f897c642cde7e54184f2f4e">ConstantExpr::getXor</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, C2), <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>));</div>
<div class="line"><a name="l04308"></a><span class="lineno"> 4308</span>&#160;    }</div>
<div class="line"><a name="l04309"></a><span class="lineno"> 4309</span>&#160; </div>
<div class="line"><a name="l04310"></a><span class="lineno"> 4310</span>&#160;    <span class="comment">// Use DeMorgan and reassociation to eliminate a &#39;not&#39; op.</span></div>
<div class="line"><a name="l04311"></a><span class="lineno"> 4311</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(C2))))) {</div>
<div class="line"><a name="l04312"></a><span class="lineno"> 4312</span>&#160;      <span class="comment">// (~X | C2) ^ C1 --&gt; ((X &amp; ~C2) ^ -1) ^ C1 --&gt; (X &amp; ~C2) ^ ~C1</span></div>
<div class="line"><a name="l04313"></a><span class="lineno"> 4313</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantExpr.html#a5b43a866f0fca605556f0f69f70c522a">ConstantExpr::getNot</a>(C2));</div>
<div class="line"><a name="l04314"></a><span class="lineno"> 4314</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateXor(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>, <a class="code" href="classllvm_1_1ConstantExpr.html#a5b43a866f0fca605556f0f69f70c522a">ConstantExpr::getNot</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>));</div>
<div class="line"><a name="l04315"></a><span class="lineno"> 4315</span>&#160;    }</div>
<div class="line"><a name="l04316"></a><span class="lineno"> 4316</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(C2))))) {</div>
<div class="line"><a name="l04317"></a><span class="lineno"> 4317</span>&#160;      <span class="comment">// (~X &amp; C2) ^ C1 --&gt; ((X | ~C2) ^ -1) ^ C1 --&gt; (X | ~C2) ^ ~C1</span></div>
<div class="line"><a name="l04318"></a><span class="lineno"> 4318</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateOr(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantExpr.html#a5b43a866f0fca605556f0f69f70c522a">ConstantExpr::getNot</a>(C2));</div>
<div class="line"><a name="l04319"></a><span class="lineno"> 4319</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateXor(<a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">Or</a>, <a class="code" href="classllvm_1_1ConstantExpr.html#a5b43a866f0fca605556f0f69f70c522a">ConstantExpr::getNot</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>));</div>
<div class="line"><a name="l04320"></a><span class="lineno"> 4320</span>&#160;    }</div>
<div class="line"><a name="l04321"></a><span class="lineno"> 4321</span>&#160; </div>
<div class="line"><a name="l04322"></a><span class="lineno"> 4322</span>&#160;    <span class="comment">// Convert xor ([trunc] (ashr X, BW-1)), C =&gt;</span></div>
<div class="line"><a name="l04323"></a><span class="lineno"> 4323</span>&#160;    <span class="comment">//   select(X &gt;s -1, C, ~C)</span></div>
<div class="line"><a name="l04324"></a><span class="lineno"> 4324</span>&#160;    <span class="comment">// The ashr creates &quot;AllZeroOrAllOne&#39;s&quot;, which then optionally inverses the</span></div>
<div class="line"><a name="l04325"></a><span class="lineno"> 4325</span>&#160;    <span class="comment">// constant depending on whether this input is less than 0.</span></div>
<div class="line"><a name="l04326"></a><span class="lineno"> 4326</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *CA;</div>
<div class="line"><a name="l04327"></a><span class="lineno"> 4327</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a054bc550cc29339bf1b5c79c73aa4dac">m_TruncOrSelf</a>(</div>
<div class="line"><a name="l04328"></a><span class="lineno"> 4328</span>&#160;                       <a class="code" href="namespacellvm_1_1PatternMatch.html#a64153676e101a130bbbaaf91635d253a">m_AShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a0f8629c0ff1db9c384e378b2ca860f0a">m_APIntAllowUndef</a>(CA))))) &amp;&amp;</div>
<div class="line"><a name="l04329"></a><span class="lineno"> 4329</span>&#160;        *CA == <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()-&gt;getScalarSizeInBits() - 1 &amp;&amp;</div>
<div class="line"><a name="l04330"></a><span class="lineno"> 4330</span>&#160;        !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>())) {</div>
<div class="line"><a name="l04331"></a><span class="lineno"> 4331</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>-&gt;isZeroValue() &amp;&amp; <span class="stringliteral">&quot;Unexpected xor with 0&quot;</span>);</div>
<div class="line"><a name="l04332"></a><span class="lineno"> 4332</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *IsNotNeg = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIsNotNeg(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l04333"></a><span class="lineno"> 4333</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(IsNotNeg, Op1, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(Op1));</div>
<div class="line"><a name="l04334"></a><span class="lineno"> 4334</span>&#160;    }</div>
<div class="line"><a name="l04335"></a><span class="lineno"> 4335</span>&#160;  }</div>
<div class="line"><a name="l04336"></a><span class="lineno"> 4336</span>&#160; </div>
<div class="line"><a name="l04337"></a><span class="lineno"> 4337</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType();</div>
<div class="line"><a name="l04338"></a><span class="lineno"> 4338</span>&#160;  {</div>
<div class="line"><a name="l04339"></a><span class="lineno"> 4339</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *RHSC;</div>
<div class="line"><a name="l04340"></a><span class="lineno"> 4340</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(RHSC))) {</div>
<div class="line"><a name="l04341"></a><span class="lineno"> 4341</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l04342"></a><span class="lineno"> 4342</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l04343"></a><span class="lineno"> 4343</span>&#160;      <span class="comment">// (C - X) ^ signmaskC --&gt; (C + signmaskC) - X</span></div>
<div class="line"><a name="l04344"></a><span class="lineno"> 4344</span>&#160;      <span class="keywordflow">if</span> (RHSC-&gt;<a class="code" href="classllvm_1_1APInt.html#a4aa7e7ca8ab4093fd0dbadb223b998c0">isSignMask</a>() &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#ac3ed5602889a22db44a16e1b97fac5b8">m_Sub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))))</div>
<div class="line"><a name="l04345"></a><span class="lineno"> 4345</span>&#160;        <span class="keywordflow">return</span> BinaryOperator::CreateSub(<a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> + *RHSC), <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l04346"></a><span class="lineno"> 4346</span>&#160; </div>
<div class="line"><a name="l04347"></a><span class="lineno"> 4347</span>&#160;      <span class="comment">// (X + C) ^ signmaskC --&gt; X + (C + signmaskC)</span></div>
<div class="line"><a name="l04348"></a><span class="lineno"> 4348</span>&#160;      <span class="keywordflow">if</span> (RHSC-&gt;<a class="code" href="classllvm_1_1APInt.html#a4aa7e7ca8ab4093fd0dbadb223b998c0">isSignMask</a>() &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))))</div>
<div class="line"><a name="l04349"></a><span class="lineno"> 4349</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="Reassociate_8cpp.html#a680ae08c1b9b93cebdd6cbb726fe8f3d">BinaryOperator::CreateAdd</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> + *RHSC));</div>
<div class="line"><a name="l04350"></a><span class="lineno"> 4350</span>&#160; </div>
<div class="line"><a name="l04351"></a><span class="lineno"> 4351</span>&#160;      <span class="comment">// (X | C) ^ RHSC --&gt; X ^ (C ^ RHSC) iff X &amp; C == 0</span></div>
<div class="line"><a name="l04352"></a><span class="lineno"> 4352</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))) &amp;&amp;</div>
<div class="line"><a name="l04353"></a><span class="lineno"> 4353</span>&#160;          <a class="code" href="namespacellvm.html#aedbf3998b4ff72347a45cb4169d120db">MaskedValueIsZero</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, 0, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l04354"></a><span class="lineno"> 4354</span>&#160;        <span class="keywordflow">return</span> BinaryOperator::CreateXor(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> ^ *RHSC));</div>
<div class="line"><a name="l04355"></a><span class="lineno"> 4355</span>&#160; </div>
<div class="line"><a name="l04356"></a><span class="lineno"> 4356</span>&#160;      <span class="comment">// When X is a power-of-two or zero and zero input is poison:</span></div>
<div class="line"><a name="l04357"></a><span class="lineno"> 4357</span>&#160;      <span class="comment">// ctlz(i32 X) ^ 31 --&gt; cttz(X)</span></div>
<div class="line"><a name="l04358"></a><span class="lineno"> 4358</span>&#160;      <span class="comment">// cttz(i32 X) ^ 31 --&gt; ctlz(X)</span></div>
<div class="line"><a name="l04359"></a><span class="lineno"> 4359</span>&#160;      <span class="keyword">auto</span> *II = dyn_cast&lt;IntrinsicInst&gt;(Op0);</div>
<div class="line"><a name="l04360"></a><span class="lineno"> 4360</span>&#160;      <span class="keywordflow">if</span> (II &amp;&amp; II-&gt;hasOneUse() &amp;&amp; *RHSC == Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>() - 1) {</div>
<div class="line"><a name="l04361"></a><span class="lineno"> 4361</span>&#160;        <a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">Intrinsic::ID</a> IID = II-&gt;getIntrinsicID();</div>
<div class="line"><a name="l04362"></a><span class="lineno"> 4362</span>&#160;        <span class="keywordflow">if</span> ((IID == Intrinsic::ctlz || IID == Intrinsic::cttz) &amp;&amp;</div>
<div class="line"><a name="l04363"></a><span class="lineno"> 4363</span>&#160;            <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(II-&gt;getArgOperand(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>()) &amp;&amp;</div>
<div class="line"><a name="l04364"></a><span class="lineno"> 4364</span>&#160;            <a class="code" href="namespacellvm.html#a4036c3c75bcee1206cd199548b87f9ae">isKnownToBeAPowerOfTwo</a>(II-&gt;getArgOperand(0), <span class="comment">/*OrZero */</span> <span class="keyword">true</span>)) {</div>
<div class="line"><a name="l04365"></a><span class="lineno"> 4365</span>&#160;          IID = (IID == Intrinsic::ctlz) ? Intrinsic::cttz : Intrinsic::ctlz;</div>
<div class="line"><a name="l04366"></a><span class="lineno"> 4366</span>&#160;          <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">Intrinsic::getDeclaration</a>(II-&gt;getModule(), IID, Ty);</div>
<div class="line"><a name="l04367"></a><span class="lineno"> 4367</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">CallInst::Create</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, {II-&gt;getArgOperand(0), <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getTrue()});</div>
<div class="line"><a name="l04368"></a><span class="lineno"> 4368</span>&#160;        }</div>
<div class="line"><a name="l04369"></a><span class="lineno"> 4369</span>&#160;      }</div>
<div class="line"><a name="l04370"></a><span class="lineno"> 4370</span>&#160; </div>
<div class="line"><a name="l04371"></a><span class="lineno"> 4371</span>&#160;      <span class="comment">// If RHSC is inverting the remaining bits of shifted X,</span></div>
<div class="line"><a name="l04372"></a><span class="lineno"> 4372</span>&#160;      <span class="comment">// canonicalize to a &#39;not&#39; before the shift to help SCEV and codegen:</span></div>
<div class="line"><a name="l04373"></a><span class="lineno"> 4373</span>&#160;      <span class="comment">// (X &lt;&lt; C) ^ RHSC --&gt; ~X &lt;&lt; C</span></div>
<div class="line"><a name="l04374"></a><span class="lineno"> 4374</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">m_Shl</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))) &amp;&amp;</div>
<div class="line"><a name="l04375"></a><span class="lineno"> 4375</span>&#160;          *RHSC == <a class="code" href="classllvm_1_1APInt.html#a071e8d814b2b30b02544fad964227b8e">APInt::getAllOnes</a>(Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>()).<a class="code" href="classllvm_1_1APInt.html#acb9c55b6986369948507ca5241b4e411">shl</a>(*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)) {</div>
<div class="line"><a name="l04376"></a><span class="lineno"> 4376</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NotX = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l04377"></a><span class="lineno"> 4377</span>&#160;        <span class="keywordflow">return</span> BinaryOperator::CreateShl(NotX, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>));</div>
<div class="line"><a name="l04378"></a><span class="lineno"> 4378</span>&#160;      }</div>
<div class="line"><a name="l04379"></a><span class="lineno"> 4379</span>&#160;      <span class="comment">// (X &gt;&gt;u C) ^ RHSC --&gt; ~X &gt;&gt;u C</span></div>
<div class="line"><a name="l04380"></a><span class="lineno"> 4380</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">m_LShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))) &amp;&amp;</div>
<div class="line"><a name="l04381"></a><span class="lineno"> 4381</span>&#160;          *RHSC == <a class="code" href="classllvm_1_1APInt.html#a071e8d814b2b30b02544fad964227b8e">APInt::getAllOnes</a>(Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>()).<a class="code" href="classllvm_1_1APInt.html#af34549c39d6f741fbdaf9a795aa306e9">lshr</a>(*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)) {</div>
<div class="line"><a name="l04382"></a><span class="lineno"> 4382</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NotX = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l04383"></a><span class="lineno"> 4383</span>&#160;        <span class="keywordflow">return</span> BinaryOperator::CreateLShr(NotX, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>));</div>
<div class="line"><a name="l04384"></a><span class="lineno"> 4384</span>&#160;      }</div>
<div class="line"><a name="l04385"></a><span class="lineno"> 4385</span>&#160;      <span class="comment">// TODO: We could handle &#39;ashr&#39; here as well. That would be matching</span></div>
<div class="line"><a name="l04386"></a><span class="lineno"> 4386</span>&#160;      <span class="comment">//       a &#39;not&#39; op and moving it before the shift. Doing that requires</span></div>
<div class="line"><a name="l04387"></a><span class="lineno"> 4387</span>&#160;      <span class="comment">//       preventing the inverse fold in canShiftBinOpWithConstantRHS().</span></div>
<div class="line"><a name="l04388"></a><span class="lineno"> 4388</span>&#160;    }</div>
<div class="line"><a name="l04389"></a><span class="lineno"> 4389</span>&#160;  }</div>
<div class="line"><a name="l04390"></a><span class="lineno"> 4390</span>&#160; </div>
<div class="line"><a name="l04391"></a><span class="lineno"> 4391</span>&#160;  <span class="comment">// FIXME: This should not be limited to scalar (pull into APInt match above).</span></div>
<div class="line"><a name="l04392"></a><span class="lineno"> 4392</span>&#160;  {</div>
<div class="line"><a name="l04393"></a><span class="lineno"> 4393</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l04394"></a><span class="lineno"> 4394</span>&#160;    <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, *C2, *C3;</div>
<div class="line"><a name="l04395"></a><span class="lineno"> 4395</span>&#160;    <span class="comment">// ((X^C1) &gt;&gt; C2) ^ C3 -&gt; (X&gt;&gt;C2) ^ ((C1&gt;&gt;C2)^C3)</span></div>
<div class="line"><a name="l04396"></a><span class="lineno"> 4396</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">m_ConstantInt</a>(C3)) &amp;&amp;</div>
<div class="line"><a name="l04397"></a><span class="lineno"> 4397</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">m_LShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">m_ConstantInt</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>)),</div>
<div class="line"><a name="l04398"></a><span class="lineno"> 4398</span>&#160;                          <a class="code" href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">m_ConstantInt</a>(C2))) &amp;&amp;</div>
<div class="line"><a name="l04399"></a><span class="lineno"> 4399</span>&#160;        Op0-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>()) {</div>
<div class="line"><a name="l04400"></a><span class="lineno"> 4400</span>&#160;      <span class="comment">// fold (C1 &gt;&gt; C2) ^ C3</span></div>
<div class="line"><a name="l04401"></a><span class="lineno"> 4401</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> FoldConst = <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>-&gt;getValue().lshr(C2-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a4b001d9b458035fbbfc154d52d354ee9">getValue</a>());</div>
<div class="line"><a name="l04402"></a><span class="lineno"> 4402</span>&#160;      FoldConst ^= C3-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#a4b001d9b458035fbbfc154d52d354ee9">getValue</a>();</div>
<div class="line"><a name="l04403"></a><span class="lineno"> 4403</span>&#160;      <span class="comment">// Prepare the two operands.</span></div>
<div class="line"><a name="l04404"></a><span class="lineno"> 4404</span>&#160;      <span class="keyword">auto</span> *Opnd0 = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLShr(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, C2);</div>
<div class="line"><a name="l04405"></a><span class="lineno"> 4405</span>&#160;      Opnd0-&gt;takeName(Op0);</div>
<div class="line"><a name="l04406"></a><span class="lineno"> 4406</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateXor(Opnd0, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, FoldConst));</div>
<div class="line"><a name="l04407"></a><span class="lineno"> 4407</span>&#160;    }</div>
<div class="line"><a name="l04408"></a><span class="lineno"> 4408</span>&#160;  }</div>
<div class="line"><a name="l04409"></a><span class="lineno"> 4409</span>&#160; </div>
<div class="line"><a name="l04410"></a><span class="lineno"> 4410</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *FoldedLogic = foldBinOpIntoSelectOrPhi(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l04411"></a><span class="lineno"> 4411</span>&#160;    <span class="keywordflow">return</span> FoldedLogic;</div>
<div class="line"><a name="l04412"></a><span class="lineno"> 4412</span>&#160; </div>
<div class="line"><a name="l04413"></a><span class="lineno"> 4413</span>&#160;  <span class="comment">// Y ^ (X | Y) --&gt; X &amp; ~Y</span></div>
<div class="line"><a name="l04414"></a><span class="lineno"> 4414</span>&#160;  <span class="comment">// Y ^ (Y | X) --&gt; X &amp; ~Y</span></div>
<div class="line"><a name="l04415"></a><span class="lineno"> 4415</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op0)))))</div>
<div class="line"><a name="l04416"></a><span class="lineno"> 4416</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(Op0));</div>
<div class="line"><a name="l04417"></a><span class="lineno"> 4417</span>&#160;  <span class="comment">// (X | Y) ^ Y --&gt; X &amp; ~Y</span></div>
<div class="line"><a name="l04418"></a><span class="lineno"> 4418</span>&#160;  <span class="comment">// (Y | X) ^ Y --&gt; X &amp; ~Y</span></div>
<div class="line"><a name="l04419"></a><span class="lineno"> 4419</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op1)))))</div>
<div class="line"><a name="l04420"></a><span class="lineno"> 4420</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(Op1));</div>
<div class="line"><a name="l04421"></a><span class="lineno"> 4421</span>&#160; </div>
<div class="line"><a name="l04422"></a><span class="lineno"> 4422</span>&#160;  <span class="comment">// Y ^ (X &amp; Y) --&gt; ~X &amp; Y</span></div>
<div class="line"><a name="l04423"></a><span class="lineno"> 4423</span>&#160;  <span class="comment">// Y ^ (Y &amp; X) --&gt; ~X &amp; Y</span></div>
<div class="line"><a name="l04424"></a><span class="lineno"> 4424</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op0)))))</div>
<div class="line"><a name="l04425"></a><span class="lineno"> 4425</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateAnd(Op0, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>));</div>
<div class="line"><a name="l04426"></a><span class="lineno"> 4426</span>&#160;  <span class="comment">// (X &amp; Y) ^ Y --&gt; ~X &amp; Y</span></div>
<div class="line"><a name="l04427"></a><span class="lineno"> 4427</span>&#160;  <span class="comment">// (Y &amp; X) ^ Y --&gt; ~X &amp; Y</span></div>
<div class="line"><a name="l04428"></a><span class="lineno"> 4428</span>&#160;  <span class="comment">// Canonical form is (X &amp; C) ^ C; don&#39;t touch that.</span></div>
<div class="line"><a name="l04429"></a><span class="lineno"> 4429</span>&#160;  <span class="comment">// TODO: A &#39;not&#39; op is better for analysis and codegen, but demanded bits must</span></div>
<div class="line"><a name="l04430"></a><span class="lineno"> 4430</span>&#160;  <span class="comment">//       be fixed to prefer that (otherwise we get infinite looping).</span></div>
<div class="line"><a name="l04431"></a><span class="lineno"> 4431</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>()) &amp;&amp;</div>
<div class="line"><a name="l04432"></a><span class="lineno"> 4432</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op1)))))</div>
<div class="line"><a name="l04433"></a><span class="lineno"> 4433</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateAnd(Op1, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>));</div>
<div class="line"><a name="l04434"></a><span class="lineno"> 4434</span>&#160; </div>
<div class="line"><a name="l04435"></a><span class="lineno"> 4435</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *A, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l04436"></a><span class="lineno"> 4436</span>&#160;  <span class="comment">// (A ^ B) ^ (A | C) --&gt; (~A &amp; C) ^ B -- There are 4 commuted variants.</span></div>
<div class="line"><a name="l04437"></a><span class="lineno"> 4437</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5cd1934b6c8ddec3a2d161ce710d59bc">m_c_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))),</div>
<div class="line"><a name="l04438"></a><span class="lineno"> 4438</span>&#160;                        <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))))))</div>
<div class="line"><a name="l04439"></a><span class="lineno"> 4439</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateXor(</div>
<div class="line"><a name="l04440"></a><span class="lineno"> 4440</span>&#160;          <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(A), <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>), <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l04441"></a><span class="lineno"> 4441</span>&#160; </div>
<div class="line"><a name="l04442"></a><span class="lineno"> 4442</span>&#160;  <span class="comment">// (A ^ B) ^ (B | C) --&gt; (~B &amp; C) ^ A -- There are 4 commuted variants.</span></div>
<div class="line"><a name="l04443"></a><span class="lineno"> 4443</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5cd1934b6c8ddec3a2d161ce710d59bc">m_c_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))),</div>
<div class="line"><a name="l04444"></a><span class="lineno"> 4444</span>&#160;                        <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))))))</div>
<div class="line"><a name="l04445"></a><span class="lineno"> 4445</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateXor(</div>
<div class="line"><a name="l04446"></a><span class="lineno"> 4446</span>&#160;          <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>), A);</div>
<div class="line"><a name="l04447"></a><span class="lineno"> 4447</span>&#160; </div>
<div class="line"><a name="l04448"></a><span class="lineno"> 4448</span>&#160;  <span class="comment">// (A &amp; B) ^ (A ^ B) -&gt; (A | B)</span></div>
<div class="line"><a name="l04449"></a><span class="lineno"> 4449</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))) &amp;&amp;</div>
<div class="line"><a name="l04450"></a><span class="lineno"> 4450</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5cd1934b6c8ddec3a2d161ce710d59bc">m_c_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))))</div>
<div class="line"><a name="l04451"></a><span class="lineno"> 4451</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateOr(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l04452"></a><span class="lineno"> 4452</span>&#160;  <span class="comment">// (A ^ B) ^ (A &amp; B) -&gt; (A | B)</span></div>
<div class="line"><a name="l04453"></a><span class="lineno"> 4453</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))) &amp;&amp;</div>
<div class="line"><a name="l04454"></a><span class="lineno"> 4454</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))))</div>
<div class="line"><a name="l04455"></a><span class="lineno"> 4455</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateOr(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l04456"></a><span class="lineno"> 4456</span>&#160; </div>
<div class="line"><a name="l04457"></a><span class="lineno"> 4457</span>&#160;  <span class="comment">// (A &amp; ~B) ^ ~A -&gt; ~(A &amp; B)</span></div>
<div class="line"><a name="l04458"></a><span class="lineno"> 4458</span>&#160;  <span class="comment">// (~B &amp; A) ^ ~A -&gt; ~(A &amp; B)</span></div>
<div class="line"><a name="l04459"></a><span class="lineno"> 4459</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)))) &amp;&amp;</div>
<div class="line"><a name="l04460"></a><span class="lineno"> 4460</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(A))))</div>
<div class="line"><a name="l04461"></a><span class="lineno"> 4461</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a4f500ae0de71695b652af4c0958d8ea8">BinaryOperator::CreateNot</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>));</div>
<div class="line"><a name="l04462"></a><span class="lineno"> 4462</span>&#160; </div>
<div class="line"><a name="l04463"></a><span class="lineno"> 4463</span>&#160;  <span class="comment">// (~A &amp; B) ^ A --&gt; A | B -- There are 4 commuted variants.</span></div>
<div class="line"><a name="l04464"></a><span class="lineno"> 4464</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5cd1934b6c8ddec3a2d161ce710d59bc">m_c_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(A))))</div>
<div class="line"><a name="l04465"></a><span class="lineno"> 4465</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateOr(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l04466"></a><span class="lineno"> 4466</span>&#160; </div>
<div class="line"><a name="l04467"></a><span class="lineno"> 4467</span>&#160;  <span class="comment">// (~A | B) ^ A --&gt; ~(A &amp; B)</span></div>
<div class="line"><a name="l04468"></a><span class="lineno"> 4468</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op1)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)))))</div>
<div class="line"><a name="l04469"></a><span class="lineno"> 4469</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a4f500ae0de71695b652af4c0958d8ea8">BinaryOperator::CreateNot</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(Op1, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>));</div>
<div class="line"><a name="l04470"></a><span class="lineno"> 4470</span>&#160; </div>
<div class="line"><a name="l04471"></a><span class="lineno"> 4471</span>&#160;  <span class="comment">// A ^ (~A | B) --&gt; ~(A &amp; B)</span></div>
<div class="line"><a name="l04472"></a><span class="lineno"> 4472</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">m_c_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Op0)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)))))</div>
<div class="line"><a name="l04473"></a><span class="lineno"> 4473</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a4f500ae0de71695b652af4c0958d8ea8">BinaryOperator::CreateNot</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(Op0, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>));</div>
<div class="line"><a name="l04474"></a><span class="lineno"> 4474</span>&#160; </div>
<div class="line"><a name="l04475"></a><span class="lineno"> 4475</span>&#160;  <span class="comment">// (A | B) ^ (A | C) --&gt; (B ^ C) &amp; ~A -- There are 4 commuted variants.</span></div>
<div class="line"><a name="l04476"></a><span class="lineno"> 4476</span>&#160;  <span class="comment">// TODO: Loosen one-use restriction if common operand is a constant.</span></div>
<div class="line"><a name="l04477"></a><span class="lineno"> 4477</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>;</div>
<div class="line"><a name="l04478"></a><span class="lineno"> 4478</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)))) &amp;&amp;</div>
<div class="line"><a name="l04479"></a><span class="lineno"> 4479</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>))))) {</div>
<div class="line"><a name="l04480"></a><span class="lineno"> 4480</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> || <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> == <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>)</div>
<div class="line"><a name="l04481"></a><span class="lineno"> 4481</span>&#160;      <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l04482"></a><span class="lineno"> 4482</span>&#160;    <span class="keywordflow">if</span> (A == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l04483"></a><span class="lineno"> 4483</span>&#160;      <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>);</div>
<div class="line"><a name="l04484"></a><span class="lineno"> 4484</span>&#160;    <span class="keywordflow">if</span> (A == <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>) {</div>
<div class="line"><a name="l04485"></a><span class="lineno"> 4485</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NotA = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(A);</div>
<div class="line"><a name="l04486"></a><span class="lineno"> 4486</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateAnd(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateXor(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>), NotA);</div>
<div class="line"><a name="l04487"></a><span class="lineno"> 4487</span>&#160;    }</div>
<div class="line"><a name="l04488"></a><span class="lineno"> 4488</span>&#160;  }</div>
<div class="line"><a name="l04489"></a><span class="lineno"> 4489</span>&#160; </div>
<div class="line"><a name="l04490"></a><span class="lineno"> 4490</span>&#160;  <span class="comment">// (A &amp; B) ^ (A | C) --&gt; A ? ~B : C -- There are 4 commuted variants.</span></div>
<div class="line"><a name="l04491"></a><span class="lineno"> 4491</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType()-&gt;isIntOrIntVectorTy(1) &amp;&amp;</div>
<div class="line"><a name="l04492"></a><span class="lineno"> 4492</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a213e6c0ca6e838157373b9a6018c0769">m_LogicalAnd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(A), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)))) &amp;&amp;</div>
<div class="line"><a name="l04493"></a><span class="lineno"> 4493</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Op1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a1a06b1cff93069d7403ea03e6150e386">m_LogicalOr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>))))) {</div>
<div class="line"><a name="l04494"></a><span class="lineno"> 4494</span>&#160;    <span class="keywordtype">bool</span> NeedFreeze = isa&lt;SelectInst&gt;(Op0) &amp;&amp; isa&lt;SelectInst&gt;(Op1) &amp;&amp; <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> == <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>;</div>
<div class="line"><a name="l04495"></a><span class="lineno"> 4495</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> || <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> == <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>)</div>
<div class="line"><a name="l04496"></a><span class="lineno"> 4496</span>&#160;      <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(A, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l04497"></a><span class="lineno"> 4497</span>&#160;    <span class="keywordflow">if</span> (A == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l04498"></a><span class="lineno"> 4498</span>&#160;      <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>);</div>
<div class="line"><a name="l04499"></a><span class="lineno"> 4499</span>&#160;    <span class="keywordflow">if</span> (A == <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>) {</div>
<div class="line"><a name="l04500"></a><span class="lineno"> 4500</span>&#160;      <span class="keywordflow">if</span> (NeedFreeze)</div>
<div class="line"><a name="l04501"></a><span class="lineno"> 4501</span>&#160;        A = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFreeze(A);</div>
<div class="line"><a name="l04502"></a><span class="lineno"> 4502</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NotB = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l04503"></a><span class="lineno"> 4503</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(A, NotB, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l04504"></a><span class="lineno"> 4504</span>&#160;    }</div>
<div class="line"><a name="l04505"></a><span class="lineno"> 4505</span>&#160;  }</div>
<div class="line"><a name="l04506"></a><span class="lineno"> 4506</span>&#160; </div>
<div class="line"><a name="l04507"></a><span class="lineno"> 4507</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = dyn_cast&lt;ICmpInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(0)))</div>
<div class="line"><a name="l04508"></a><span class="lineno"> 4508</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = dyn_cast&lt;ICmpInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOperand(1)))</div>
<div class="line"><a name="l04509"></a><span class="lineno"> 4509</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = foldXorOfICmps(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l04510"></a><span class="lineno"> 4510</span>&#160;        <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V);</div>
<div class="line"><a name="l04511"></a><span class="lineno"> 4511</span>&#160; </div>
<div class="line"><a name="l04512"></a><span class="lineno"> 4512</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *CastedXor = foldCastedBitwiseLogic(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l04513"></a><span class="lineno"> 4513</span>&#160;    <span class="keywordflow">return</span> CastedXor;</div>
<div class="line"><a name="l04514"></a><span class="lineno"> 4514</span>&#160; </div>
<div class="line"><a name="l04515"></a><span class="lineno"> 4515</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Abs = <a class="code" href="InstCombineAndOrXor_8cpp.html#a3bb4f8a59bc79743a01bfc530cb50689">canonicalizeAbs</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l04516"></a><span class="lineno"> 4516</span>&#160;    <span class="keywordflow">return</span> Abs;</div>
<div class="line"><a name="l04517"></a><span class="lineno"> 4517</span>&#160; </div>
<div class="line"><a name="l04518"></a><span class="lineno"> 4518</span>&#160;  <span class="comment">// Otherwise, if all else failed, try to hoist the xor-by-constant:</span></div>
<div class="line"><a name="l04519"></a><span class="lineno"> 4519</span>&#160;  <span class="comment">//   (X ^ C) ^ Y --&gt; (X ^ Y) ^ C</span></div>
<div class="line"><a name="l04520"></a><span class="lineno"> 4520</span>&#160;  <span class="comment">// Just like we do in other places, we completely avoid the fold</span></div>
<div class="line"><a name="l04521"></a><span class="lineno"> 4521</span>&#160;  <span class="comment">// for constantexprs, at least to avoid endless combine loop.</span></div>
<div class="line"><a name="l04522"></a><span class="lineno"> 4522</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5cd1934b6c8ddec3a2d161ce710d59bc">m_c_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a575c2299c6f145ba3a12efa20829db43">m_CombineAnd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>),</div>
<div class="line"><a name="l04523"></a><span class="lineno"> 4523</span>&#160;                                                    <a class="code" href="namespacellvm_1_1PatternMatch.html#ad10dbdfb0cba1fad1a0f7cfae3b55f1a">m_Unless</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a300db8bf3acf4b1cff9a56ae53a8727c">m_ConstantExpr</a>())),</div>
<div class="line"><a name="l04524"></a><span class="lineno"> 4524</span>&#160;                                       <a class="code" href="namespacellvm_1_1PatternMatch.html#aec0ccdbde0581b3aae7f001634a34d8e">m_ImmConstant</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>))),</div>
<div class="line"><a name="l04525"></a><span class="lineno"> 4525</span>&#160;                        <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))))</div>
<div class="line"><a name="l04526"></a><span class="lineno"> 4526</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateXor(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateXor(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>), <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>);</div>
<div class="line"><a name="l04527"></a><span class="lineno"> 4527</span>&#160; </div>
<div class="line"><a name="l04528"></a><span class="lineno"> 4528</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *R = <a class="code" href="InstCombineAndOrXor_8cpp.html#affac2d5de1541e56c48dd8df0c7d11ab">reassociateForUses</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l04529"></a><span class="lineno"> 4529</span>&#160;    <span class="keywordflow">return</span> R;</div>
<div class="line"><a name="l04530"></a><span class="lineno"> 4530</span>&#160; </div>
<div class="line"><a name="l04531"></a><span class="lineno"> 4531</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Canonicalized = <a class="code" href="InstCombineAndOrXor_8cpp.html#a8855aa9db25fdae341f388f891bec03a">canonicalizeLogicFirst</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l04532"></a><span class="lineno"> 4532</span>&#160;    <span class="keywordflow">return</span> Canonicalized;</div>
<div class="line"><a name="l04533"></a><span class="lineno"> 4533</span>&#160; </div>
<div class="line"><a name="l04534"></a><span class="lineno"> 4534</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Folded = foldLogicOfIsFPClass(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Op0, Op1))</div>
<div class="line"><a name="l04535"></a><span class="lineno"> 4535</span>&#160;    <span class="keywordflow">return</span> Folded;</div>
<div class="line"><a name="l04536"></a><span class="lineno"> 4536</span>&#160; </div>
<div class="line"><a name="l04537"></a><span class="lineno"> 4537</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Folded = canonicalizeConditionalNegationViaMathToSelect(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l04538"></a><span class="lineno"> 4538</span>&#160;    <span class="keywordflow">return</span> Folded;</div>
<div class="line"><a name="l04539"></a><span class="lineno"> 4539</span>&#160; </div>
<div class="line"><a name="l04540"></a><span class="lineno"> 4540</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l04541"></a><span class="lineno"> 4541</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_aa4159fc490483f3aad3d0d98c55ac851"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#aa4159fc490483f3aad3d0d98c55ac851">foldIsPowerOf2</a></div><div class="ttdeci">static Value * foldIsPowerOf2(ICmpInst *Cmp0, ICmpInst *Cmp1, bool JoinedByAnd, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdoc">Reduce a pair of compares that check if a value has exactly 1 bit set.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00929">InstCombineAndOrXor.cpp:929</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00029">README.txt:29</a></div></div>
<div class="ttc" id="aItaniumDemangle_8h_html_ab67ef02b75c3226cfe0b2791e2b48b06ac756c8b5e0e5217b000321397a40be7e"><div class="ttname"><a href="ItaniumDemangle_8h.html#ab67ef02b75c3226cfe0b2791e2b48b06ac756c8b5e0e5217b000321397a40be7e">ReferenceKind::RValue</a></div><div class="ttdeci">@ RValue</div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_aa9c705ecec80ebd584bb3d54b48f7ee1ac7606c30ddb7a593051b6e5ad209f30c"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1ac7606c30ddb7a593051b6e5ad209f30c">Mask_NotAllZeros</a></div><div class="ttdeci">@ Mask_NotAllZeros</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00147">InstCombineAndOrXor.cpp:147</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_aa9c705ecec80ebd584bb3d54b48f7ee1a1ee37b18b82ef426e90d86a093d45334"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a1ee37b18b82ef426e90d86a093d45334">AMask_NotMixed</a></div><div class="ttdeci">@ AMask_NotMixed</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00149">InstCombineAndOrXor.cpp:149</a></div></div>
<div class="ttc" id="aclassllvm_1_1APFloat_html_afdbfe0ba27cece5e333f4a7ae68fa82e"><div class="ttname"><a href="classllvm_1_1APFloat.html#afdbfe0ba27cece5e333f4a7ae68fa82e">llvm::APFloat::isInfinity</a></div><div class="ttdeci">bool isInfinity() const</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l01256">APFloat.h:1256</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a1c0eba92185bf1962f1b627ff0a85a82"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a1c0eba92185bf1962f1b627ff0a85a82">llvm::PatternMatch::m_NonNegative</a></div><div class="ttdeci">cst_pred_ty&lt; is_nonnegative &gt; m_NonNegative()</div><div class="ttdoc">Match an integer or vector of non-negative values.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00485">PatternMatch.h:485</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a49a2d8f483ea08a3d6ea75f90c640d76"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a49a2d8f483ea08a3d6ea75f90c640d76">llvm::CmpInst::getSwappedPredicate</a></div><div class="ttdeci">Predicate getSwappedPredicate() const</div><div class="ttdoc">For example, EQ-&gt;EQ, SLE-&gt;SGE, ULT-&gt;UGT, OEQ-&gt;OEQ, ULE-&gt;UGE, OLT-&gt;OGT, etc.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00859">InstrTypes.h:859</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa0f28bd61d319f9fd170e9ffee1ec7ba"><div class="ttname"><a href="namespacellvm.html#aa0f28bd61d319f9fd170e9ffee1ec7ba">llvm::haveNoCommonBitsSet</a></div><div class="ttdeci">bool haveNoCommonBitsSet(const Value *LHS, const Value *RHS, const DataLayout &amp;DL, AssumptionCache *AC=nullptr, const Instruction *CxtI=nullptr, const DominatorTree *DT=nullptr, bool UseInstrInfo=true)</div><div class="ttdoc">Return true if LHS and RHS have no common bits set.</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l00231">ValueTracking.cpp:231</a></div></div>
<div class="ttc" id="alib_2Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2X86_2README_8txt_source.html#l00252">README.txt:252</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">llvm::CmpInst::ICMP_EQ</a></div><div class="ttdeci">@ ICMP_EQ</div><div class="ttdoc">equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00739">InstrTypes.h:739</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_aaf30a02917241dc81db8fdba1b8a5972"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#aaf30a02917241dc81db8fdba1b8a5972">foldAndOrOfICmpsWithConstEq</a></div><div class="ttdeci">static Value * foldAndOrOfICmpsWithConstEq(ICmpInst *Cmp0, ICmpInst *Cmp1, bool IsAnd, bool IsLogical, InstCombiner::BuilderTy &amp;Builder, const SimplifyQuery &amp;Q)</div><div class="ttdoc">Reduce logic-of-compares with equality to a constant by substituting a common operand with the consta...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l01120">InstCombineAndOrXor.cpp:1120</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a054bc550cc29339bf1b5c79c73aa4dac"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a054bc550cc29339bf1b5c79c73aa4dac">llvm::PatternMatch::m_TruncOrSelf</a></div><div class="ttdeci">match_combine_or&lt; CastClass_match&lt; OpTy, Instruction::Trunc &gt;, OpTy &gt; m_TruncOrSelf(const OpTy &amp;Op)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01617">PatternMatch.h:1617</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombiner_html_a0c32de3a8e64735bd308fb50fa7f1f38"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a0c32de3a8e64735bd308fb50fa7f1f38">llvm::InstCombiner::canFreelyInvertAllUsersOf</a></div><div class="ttdeci">static bool canFreelyInvertAllUsersOf(Instruction *V, Value *IgnoredUser)</div><div class="ttdoc">Given i1 V, can every user of V be freely adapted if V is changed to !V ? InstCombine's freelyInvertA...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombiner_8h_source.html#l00279">InstCombiner.h:279</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a5b43a866f0fca605556f0f69f70c522a"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a5b43a866f0fca605556f0f69f70c522a">llvm::ConstantExpr::getNot</a></div><div class="ttdeci">static Constant * getNot(Constant *C)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02651">Constants.cpp:2651</a></div></div>
<div class="ttc" id="anamespacellvm_html_aedbf3998b4ff72347a45cb4169d120db"><div class="ttname"><a href="namespacellvm.html#aedbf3998b4ff72347a45cb4169d120db">llvm::MaskedValueIsZero</a></div><div class="ttdeci">bool MaskedValueIsZero(const Value *V, const APInt &amp;Mask, const DataLayout &amp;DL, unsigned Depth=0, AssumptionCache *AC=nullptr, const Instruction *CxtI=nullptr, const DominatorTree *DT=nullptr, bool UseInstrInfo=true)</div><div class="ttdoc">Return true if 'V &amp; Mask' is known to be zero.</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l00364">ValueTracking.cpp:364</a></div></div>
<div class="ttc" id="anamespacellvm_html_aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c"><div class="ttname"><a href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea3a2d5fe857d8f9541136a124c2edec6c">llvm::RecurKind::Or</a></div><div class="ttdeci">@ Or</div><div class="ttdoc">Bitwise or logical OR of integers.</div></div>
<div class="ttc" id="aCmpInstAnalysis_8h_html"><div class="ttname"><a href="CmpInstAnalysis_8h.html">CmpInstAnalysis.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombiner_html_a4f79ea1865b13e2d0915fb15370c87e9"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a4f79ea1865b13e2d0915fb15370c87e9">llvm::InstCombiner::isFreeToInvert</a></div><div class="ttdeci">static bool isFreeToInvert(Value *V, bool WillInvertAllUses)</div><div class="ttdoc">Return true if the specified value is free to invert (apply ~ to).</div><div class="ttdef"><b>Definition:</b> <a href="InstCombiner_8h_source.html#l00235">InstCombiner.h:235</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_a84af3264bc3024391dcda854ec87d7fc"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#a84af3264bc3024391dcda854ec87d7fc">matchIntPart</a></div><div class="ttdeci">static std::optional&lt; IntPart &gt; matchIntPart(Value *V)</div><div class="ttdoc">Match an extraction of bits from an integer.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l01043">InstCombineAndOrXor.cpp:1043</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a3a402430a1bbe70a9282dcb0e0b6a2cd"><div class="ttname"><a href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">llvm::Value::hasOneUse</a></div><div class="ttdeci">bool hasOneUse() const</div><div class="ttdoc">Return true if there is exactly one use of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00434">Value.h:434</a></div></div>
<div class="ttc" id="aInstCombiner_8h_html"><div class="ttname"><a href="InstCombiner_8h.html">InstCombiner.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78b"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">llvm::CmpInst::Predicate</a></div><div class="ttdeci">Predicate</div><div class="ttdoc">This enumeration lists the possible predicates for CmpInst subclasses.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00718">InstrTypes.h:718</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_afe3ce7fc89f36474eb0369cbb792c05a"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#afe3ce7fc89f36474eb0369cbb792c05a">llvm::ConstantInt::getType</a></div><div class="ttdeci">IntegerType * getType() const</div><div class="ttdoc">getType - Specialize the getType() method to always return an IntegerType, which reduces the amount o...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00172">Constants.h:172</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_a8f2b734aaecf27ea6cc4b0c6c84d1ec2"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#a8f2b734aaecf27ea6cc4b0c6c84d1ec2">getMaskedTypeForICmpPair</a></div><div class="ttdeci">static std::optional&lt; std::pair&lt; unsigned, unsigned &gt; &gt; getMaskedTypeForICmpPair(Value *&amp;A, Value *&amp;B, Value *&amp;C, Value *&amp;D, Value *&amp;E, ICmpInst *LHS, ICmpInst *RHS, ICmpInst::Predicate &amp;PredL, ICmpInst::Predicate &amp;PredR)</div><div class="ttdoc">Handle (icmp(A &amp; B) ==/!= C) &amp;/| (icmp(A &amp; D) ==/!= E).</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00236">InstCombineAndOrXor.cpp:236</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_aa9c705ecec80ebd584bb3d54b48f7ee1ada8a0932439ca5f15218c4d7cd43d895"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1ada8a0932439ca5f15218c4d7cd43d895">AMask_Mixed</a></div><div class="ttdeci">@ AMask_Mixed</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00148">InstCombineAndOrXor.cpp:148</a></div></div>
<div class="ttc" id="astructllvm_1_1SimplifyQuery_html"><div class="ttname"><a href="structllvm_1_1SimplifyQuery.html">llvm::SimplifyQuery</a></div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00093">InstructionSimplify.h:93</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a58d6359cee16e5da66861058836dcca9"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a58d6359cee16e5da66861058836dcca9">llvm::ConstantExpr::getZExt</a></div><div class="ttdeci">static Constant * getZExt(Constant *C, Type *Ty, bool OnlyIfReduced=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02119">Constants.cpp:2119</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00059">Function.h:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_aaf7b6cd7c3ceb4af17b610cba09648c9"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#aaf7b6cd7c3ceb4af17b610cba09648c9">llvm::InstCombinerImpl::visitXor</a></div><div class="ttdeci">Instruction * visitXor(BinaryOperator &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l04249">InstCombineAndOrXor.cpp:4249</a></div></div>
<div class="ttc" id="aREADME-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00411">README-SSE.txt:411</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html_a16799e07e39d599e81926d1a69301fab"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a16799e07e39d599e81926d1a69301fab">llvm::BinaryOperator::CreateWithCopiedFlags</a></div><div class="ttdeci">static BinaryOperator * CreateWithCopiedFlags(BinaryOps Opc, Value *V1, Value *V2, Instruction *CopyO, const Twine &amp;Name=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00248">InstrTypes.h:248</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html_a4f500ae0de71695b652af4c0958d8ea8"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a4f500ae0de71695b652af4c0958d8ea8">llvm::BinaryOperator::CreateNot</a></div><div class="ttdeci">static BinaryOperator * CreateNot(Value *Op, const Twine &amp;Name=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l03006">Instructions.cpp:3006</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aa08fee11e8a5ec10c0cc2a7abbbd799a"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">llvm::PatternMatch::m_LShr</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::LShr &gt; m_LShr(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01117">PatternMatch.h:1117</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_ad1b0513de876d1c85cf6268ca21b2c86"><div class="ttname"><a href="classllvm_1_1APInt.html#ad1b0513de876d1c85cf6268ca21b2c86">llvm::APInt::isPowerOf2</a></div><div class="ttdeci">bool isPowerOf2() const</div><div class="ttdoc">Check if this APInt's value is a power of two greater than zero.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00432">APInt.h:432</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_a2a2df5a25b9c703e74e82b48a75d0c3d"><div class="ttname"><a href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a></div><div class="ttdeci">instcombine should handle this C2 when C1</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00263">README.txt:263</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_aa33f3f8b4a1aab74406aefba21d98510"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#aa33f3f8b4a1aab74406aefba21d98510">reassociateFCmps</a></div><div class="ttdeci">static Instruction * reassociateFCmps(BinaryOperator &amp;BO, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdoc">This a limited reassociation for a special case (see above) where we are checking if two values are e...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l01591">InstCombineAndOrXor.cpp:1591</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab8a7ef433279aabf7f30fa5504a4d4ef"><div class="ttname"><a href="namespacellvm.html#ab8a7ef433279aabf7f30fa5504a4d4ef">llvm::isGuaranteedNotToBeUndefOrPoison</a></div><div class="ttdeci">bool isGuaranteedNotToBeUndefOrPoison(const Value *V, AssumptionCache *AC=nullptr, const Instruction *CtxI=nullptr, const DominatorTree *DT=nullptr, unsigned Depth=0)</div><div class="ttdoc">Return true if this function can prove that V does not have undef bits and is never poison.</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l05581">ValueTracking.cpp:5581</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a4abb39a66573f61fda80469faa5d861d"><div class="ttname"><a href="classllvm_1_1Type.html#a4abb39a66573f61fda80469faa5d861d">llvm::Type::getScalarType</a></div><div class="ttdeci">Type * getScalarType() const</div><div class="ttdoc">If this is a vector type, return the element type, otherwise return 'this'.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00341">Type.h:341</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a4b001d9b458035fbbfc154d52d354ee9"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a4b001d9b458035fbbfc154d52d354ee9">llvm::ConstantInt::getValue</a></div><div class="ttdeci">const APInt &amp; getValue() const</div><div class="ttdoc">Return the constant as an APInt value reference.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00132">Constants.h:132</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_aa342c9b3d47cd9bde63b80c83ead429b"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#aa342c9b3d47cd9bde63b80c83ead429b">llvm::ConstantExpr::getSExt</a></div><div class="ttdeci">static Constant * getSExt(Constant *C, Type *Ty, bool OnlyIfReduced=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02105">Constants.cpp:2105</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01199">SmallVector.h:1199</a></div></div>
<div class="ttc" id="anamespacellvm_1_1tgtok_html_abbc5259d649363016626e2529fabe0c5a4a6621856674f376740a1ba6efd809e3"><div class="ttname"><a href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a4a6621856674f376740a1ba6efd809e3">llvm::tgtok::Code</a></div><div class="ttdeci">@ Code</div><div class="ttdef"><b>Definition:</b> <a href="TGLexer_8h_source.html#l00050">TGLexer.h:50</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_aa9c705ecec80ebd584bb3d54b48f7ee1a7cc1609a568ad3b240cf86126370e24f"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a7cc1609a568ad3b240cf86126370e24f">AMask_AllOnes</a></div><div class="ttdeci">@ AMask_AllOnes</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00142">InstCombineAndOrXor.cpp:142</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a944c25ac9b73b02a17a20a08a25b9b21"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">llvm::PatternMatch::m_Add</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Add &gt; m_Add(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00979">PatternMatch.h:979</a></div></div>
<div class="ttc" id="aCombinerHelper_8cpp_html_a78ed4247b51cb6ffdaedcc1ff8730246"><div class="ttname"><a href="CombinerHelper_8cpp.html#a78ed4247b51cb6ffdaedcc1ff8730246">peekThroughBitcast</a></div><div class="ttdeci">static Register peekThroughBitcast(Register Reg, const MachineRegisterInfo &amp;MRI)</div><div class="ttdef"><b>Definition:</b> <a href="CombinerHelper_8cpp_source.html#l01719">CombinerHelper.cpp:1719</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba8a80b27ca29fe2076b9bbdee02c65464"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba8a80b27ca29fe2076b9bbdee02c65464">llvm::CmpInst::FCMP_ONE</a></div><div class="ttdeci">@ FCMP_ONE</div><div class="ttdoc">0 1 1 0 True if ordered and operands are unequal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00726">InstrTypes.h:726</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5be4877e6cc76e0fe6f8a005c69aa7c2"><div class="ttname"><a href="namespacellvm.html#a5be4877e6cc76e0fe6f8a005c69aa7c2">llvm::matchSimpleRecurrence</a></div><div class="ttdeci">bool matchSimpleRecurrence(const PHINode *P, BinaryOperator *&amp;BO, Value *&amp;Start, Value *&amp;Step)</div><div class="ttdoc">Attempt to match a simple first order recurrence cycle of the form: iv = phi Ty [Start,...</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l06674">ValueTracking.cpp:6674</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a4b5e1f50cb0890ec60d8c61a61241170"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a4b5e1f50cb0890ec60d8c61a61241170">llvm::CmpInst::makeCmpResultType</a></div><div class="ttdeci">static Type * makeCmpResultType(Type *opnd_type)</div><div class="ttdoc">Create a result type for fcmp/icmp.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01054">InstrTypes.h:1054</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantRange_html_a104cf3ac04ba840d0bd3b37685d6cdbe"><div class="ttname"><a href="classllvm_1_1ConstantRange.html#a104cf3ac04ba840d0bd3b37685d6cdbe">llvm::ConstantRange::exactUnionWith</a></div><div class="ttdeci">std::optional&lt; ConstantRange &gt; exactUnionWith(const ConstantRange &amp;CR) const</div><div class="ttdoc">Union the two ranges and return the result if it can be represented exactly, otherwise return std::nu...</div><div class="ttdef"><b>Definition:</b> <a href="ConstantRange_8cpp_source.html#l00709">ConstantRange.cpp:709</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilder_html"><div class="ttname"><a href="classllvm_1_1IRBuilder.html">llvm::IRBuilder&lt; TargetFolder, IRBuilderCallbackInserter &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1CastInst_html_a643fe5a9e7042f032dae78109c2b1e72"><div class="ttname"><a href="classllvm_1_1CastInst.html#a643fe5a9e7042f032dae78109c2b1e72">llvm::CastInst::Create</a></div><div class="ttdeci">static CastInst * Create(Instruction::CastOps, Value *S, Type *Ty, const Twine &amp;Name=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Provides a way to construct any of the CastInst subclasses using an opcode instead of the subclass's ...</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l03354">Instructions.cpp:3354</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">llvm::CmpInst::ICMP_NE</a></div><div class="ttdeci">@ ICMP_NE</div><div class="ttdoc">not equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00740">InstrTypes.h:740</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_aa2a54b545d237ecfe450fd1292f7675e"><div class="ttname"><a href="classllvm_1_1CmpInst.html#aa2a54b545d237ecfe450fd1292f7675e">llvm::CmpInst::getInversePredicate</a></div><div class="ttdeci">Predicate getInversePredicate() const</div><div class="ttdoc">For example, EQ -&gt; NE, UGT -&gt; ULE, SLT -&gt; SGE, OEQ -&gt; UNE, UGT -&gt; OLE, OLT -&gt; UGE,...</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00832">InstrTypes.h:832</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombiner_html_ae099c6fa4a0b06306ece7dd372e8d02a"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#ae099c6fa4a0b06306ece7dd372e8d02a">llvm::InstCombiner::computeKnownBits</a></div><div class="ttdeci">void computeKnownBits(const Value *V, KnownBits &amp;Known, unsigned Depth, const Instruction *CxtI) const</div><div class="ttdef"><b>Definition:</b> <a href="InstCombiner_8h_source.html#l00461">InstCombiner.h:461</a></div></div>
<div class="ttc" id="aTransforms_2Utils_2Local_8h_html"><div class="ttname"><a href="Transforms_2Utils_2Local_8h.html">Local.h</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_aecefcddf870caa1e8373d3abd78a2775"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#aecefcddf870caa1e8373d3abd78a2775">matchOrConcat</a></div><div class="ttdeci">static Instruction * matchOrConcat(Instruction &amp;Or, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdoc">Attempt to combine or(zext(x),shl(zext(y),bw/2) concat packing patterns.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l02738">InstCombineAndOrXor.cpp:2738</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_acd794d7b3653822f61ba126e1678e03f"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#acd794d7b3653822f61ba126e1678e03f">llvm::PatternMatch::m_APFloat</a></div><div class="ttdeci">apfloat_match m_APFloat(const APFloat *&amp;Res)</div><div class="ttdoc">Match a ConstantFP or splatted ConstantVector, binding the specified pointer to the contained APFloat...</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00295">PatternMatch.h:295</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_a39257c6c73db3440e6d05b9eec5999a0"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#a39257c6c73db3440e6d05b9eec5999a0">getMaskedICmpType</a></div><div class="ttdeci">static unsigned getMaskedICmpType(Value *A, Value *B, Value *C, ICmpInst::Predicate Pred)</div><div class="ttdoc">Return the set of patterns (from MaskedICmpType) that (icmp SCC (A &amp; B), C) satisfies.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00156">InstCombineAndOrXor.cpp:156</a></div></div>
<div class="ttc" id="aREADME__P9_8txt_html_acc80d72f12f6f9e1d8eda2ec3d74133c"><div class="ttname"><a href="README__P9_8txt.html#acc80d72f12f6f9e1d8eda2ec3d74133c">Right</a></div><div class="ttdeci">Vector Shift Left Right</div><div class="ttdef"><b>Definition:</b> <a href="README__P9_8txt_source.html#l00118">README_P9.txt:118</a></div></div>
<div class="ttc" id="aclassllvm_1_1APFloat_html_a9aaed17970b55e9e1bfa906822ea7b71"><div class="ttname"><a href="classllvm_1_1APFloat.html#a9aaed17970b55e9e1bfa906822ea7b71">llvm::APFloat::isZero</a></div><div class="ttdeci">bool isZero() const</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l01255">APFloat.h:1255</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a8f793deb2edf1656236f570c01d7042e"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a8f793deb2edf1656236f570c01d7042e">llvm::PatternMatch::m_BitReverse</a></div><div class="ttdeci">m_Intrinsic_Ty&lt; Opnd0 &gt;::Ty m_BitReverse(const Opnd0 &amp;Op0)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02161">PatternMatch.h:2161</a></div></div>
<div class="ttc" id="aclassllvm_1_1ICmpInst_html_a9d5f70171d811078c4d263811f13c121"><div class="ttname"><a href="classllvm_1_1ICmpInst.html#a9d5f70171d811078c4d263811f13c121">llvm::ICmpInst::getSignedPredicate</a></div><div class="ttdeci">Predicate getSignedPredicate() const</div><div class="ttdoc">For example, EQ-&gt;EQ, SLE-&gt;SLE, UGT-&gt;SGT, etc.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01264">Instructions.h:1264</a></div></div>
<div class="ttc" id="anamespacellvm_html_a07256e6859fcb3b9d5eb02ecea9e9a38"><div class="ttname"><a href="namespacellvm.html#a07256e6859fcb3b9d5eb02ecea9e9a38">llvm::isKnownNonZero</a></div><div class="ttdeci">bool isKnownNonZero(const Value *V, const DataLayout &amp;DL, unsigned Depth=0, AssumptionCache *AC=nullptr, const Instruction *CxtI=nullptr, const DominatorTree *DT=nullptr, bool UseInstrInfo=true)</div><div class="ttdoc">Return true if the given value is known to be non-zero when defined.</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l00313">ValueTracking.cpp:313</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_a325aa976ba1006c79a069b089a4b714d"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#a325aa976ba1006c79a069b089a4b714d">getFCmpValue</a></div><div class="ttdeci">static Value * getFCmpValue(unsigned Code, Value *LHS, Value *RHS, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdoc">This is the complement of getFCmpCode, which turns an opcode and two operands into either a FCmp inst...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00041">InstCombineAndOrXor.cpp:41</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_a22537aeb0cd6de9b7ec250a476b3f728"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#a22537aeb0cd6de9b7ec250a476b3f728">foldComplexAndOrPatterns</a></div><div class="ttdeci">static Instruction * foldComplexAndOrPatterns(BinaryOperator &amp;I, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdoc">Try folding relatively complex patterns for both And and Or operations with all And and Or swapped.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l01926">InstCombineAndOrXor.cpp:1926</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">llvm::CmpInst::ICMP_SGT</a></div><div class="ttdeci">@ ICMP_SGT</div><div class="ttdoc">signed greater than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00745">InstrTypes.h:745</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_a8db36c82f32d6f6a4d35a00e55be03a8"><div class="ttname"><a href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a></div><div class="ttdeci">bool Shift</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00468">README.txt:468</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdoc">The instances of the Type class are immutable: once they are created, they are never changed.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a512fe2c15ea651294688eeec1341644c"><div class="ttname"><a href="classllvm_1_1APInt.html#a512fe2c15ea651294688eeec1341644c">llvm::APInt::getBitWidth</a></div><div class="ttdeci">unsigned getBitWidth() const</div><div class="ttdoc">Return the number of bits in the APInt.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01439">APInt.h:1439</a></div></div>
<div class="ttc" id="aclassllvm_1_1ICmpInst_html_aaaeded5d0cab77f531b294638459aca5"><div class="ttname"><a href="classllvm_1_1ICmpInst.html#aaaeded5d0cab77f531b294638459aca5">llvm::ICmpInst::isEquality</a></div><div class="ttdeci">bool isEquality() const</div><div class="ttdoc">Return true if this predicate is either EQ or NE.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01292">Instructions.h:1292</a></div></div>
<div class="ttc" id="aFloatingPointMode_8h_html_a75561e03bba6883c8023574327d92b67a3084d5e0be64d39d4c09ec2b7b933248"><div class="ttname"><a href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a3084d5e0be64d39d4c09ec2b7b933248">fcNan</a></div><div class="ttdeci">@ fcNan</div><div class="ttdef"><b>Definition:</b> <a href="FloatingPointMode_8h_source.html#l00211">FloatingPointMode.h:211</a></div></div>
<div class="ttc" id="anamespacellvm_html_aea99b554c16d2006d637156e877f9e6c"><div class="ttname"><a href="namespacellvm.html#aea99b554c16d2006d637156e877f9e6c">llvm::getFCmpCode</a></div><div class="ttdeci">unsigned getFCmpCode(CmpInst::Predicate CC)</div><div class="ttdoc">Similar to getICmpCode but for FCmpInst.</div><div class="ttdef"><b>Definition:</b> <a href="CmpInstAnalysis_8h_source.html#l00063">CmpInstAnalysis.h:63</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a43ac4fbaaf63a88eb5ac05f6d3e5649c"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a43ac4fbaaf63a88eb5ac05f6d3e5649c">llvm::PatternMatch::m_BinOp</a></div><div class="ttdeci">class_match&lt; BinaryOperator &gt; m_BinOp()</div><div class="ttdoc">Match an arbitrary binary operation and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00084">PatternMatch.h:84</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a64153676e101a130bbbaaf91635d253a"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a64153676e101a130bbbaaf91635d253a">llvm::PatternMatch::m_AShr</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::AShr &gt; m_AShr(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01123">PatternMatch.h:1123</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad46ed333b920b20e78d948610366254c"><div class="ttname"><a href="namespacellvm.html#ad46ed333b920b20e78d948610366254c">llvm::ComputeNumSignBits</a></div><div class="ttdeci">unsigned ComputeNumSignBits(const Value *Op, const DataLayout &amp;DL, unsigned Depth=0, AssumptionCache *AC=nullptr, const Instruction *CxtI=nullptr, const DominatorTree *DT=nullptr, bool UseInstrInfo=true)</div><div class="ttdoc">Return the number of times the sign bit of the register is replicated into the other bits.</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l00383">ValueTracking.cpp:383</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba2751d6136a2819749dcef65dc19a4246"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba2751d6136a2819749dcef65dc19a4246">llvm::CmpInst::ICMP_SLE</a></div><div class="ttdeci">@ ICMP_SLE</div><div class="ttdoc">signed less or equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00748">InstrTypes.h:748</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a6da514c588b2668280a861a59bfc9fa5"><div class="ttname"><a href="classllvm_1_1APInt.html#a6da514c588b2668280a861a59bfc9fa5">llvm::APInt::intersects</a></div><div class="ttdeci">bool intersects(const APInt &amp;RHS) const</div><div class="ttdoc">This operation tests if there are any pairs of corresponding bits between this APInt and RHS that are...</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01227">APInt.h:1227</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_a1b65a6c813fe2a3bfcc0db1863ee6642"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#a1b65a6c813fe2a3bfcc0db1863ee6642">stripSignOnlyFPOps</a></div><div class="ttdeci">static Value * stripSignOnlyFPOps(Value *Val)</div><div class="ttdoc">Ignore all operations which only change the sign of a value, returning the underlying magnitude value...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l01237">InstCombineAndOrXor.cpp:1237</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_af46fd5126112a587bb12f09b1c0e385b"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#af46fd5126112a587bb12f09b1c0e385b">llvm::ConstantExpr::getExactLogBase2</a></div><div class="ttdeci">static Constant * getExactLogBase2(Constant *C)</div><div class="ttdoc">If C is a scalar/fixed width vector of known powers of 2, then this function returns a new scalar/fix...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02712">Constants.cpp:2712</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MipsISD_html_a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8"><div class="ttname"><a href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">llvm::MipsISD::Ret</a></div><div class="ttdeci">@ Ret</div><div class="ttdef"><b>Definition:</b> <a href="MipsISelLowering_8h_source.html#l00119">MipsISelLowering.h:119</a></div></div>
<div class="ttc" id="aAMDGPURegBankSelect_8cpp_html_a14e0c000ed52e5fc187d4a885914cc1a"><div class="ttname"><a href="AMDGPURegBankSelect_8cpp.html#a14e0c000ed52e5fc187d4a885914cc1a">Select</a></div><div class="ttdeci">amdgpu AMDGPU Register Bank Select</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPURegBankSelect_8cpp_source.html#l00045">AMDGPURegBankSelect.cpp:45</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_af34549c39d6f741fbdaf9a795aa306e9"><div class="ttname"><a href="classllvm_1_1APInt.html#af34549c39d6f741fbdaf9a795aa306e9">llvm::APInt::lshr</a></div><div class="ttdeci">APInt lshr(unsigned shiftAmt) const</div><div class="ttdoc">Logical right-shift function.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00839">APInt.h:839</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a87b8bfbbe9d8f7146d7f20a5fb42efd0"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a></div><div class="ttdeci">Value * RHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00076">X86PartialReduction.cpp:76</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6dec2b5d3e04b47adf4d918d678e81c9"><div class="ttname"><a href="namespacellvm.html#a6dec2b5d3e04b47adf4d918d678e81c9">llvm::isPowerOf2_32</a></div><div class="ttdeci">constexpr bool isPowerOf2_32(uint32_t Value)</div><div class="ttdoc">Return true if the argument is a power of two &gt; 0.</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00292">MathExtras.h:292</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ae9d735be1ececf149966a4da253f0320"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">llvm::PatternMatch::m_c_And</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::And, true &gt; m_c_And(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches an And with LHS and RHS in either order.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02262">PatternMatch.h:2262</a></div></div>
<div class="ttc" id="aFloatingPointMode_8h_html_a75561e03bba6883c8023574327d92b67afff82cc4502e0e3bf3575c9622284e18"><div class="ttname"><a href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67afff82cc4502e0e3bf3575c9622284e18">fcPosNormal</a></div><div class="ttdeci">@ fcPosNormal</div><div class="ttdef"><b>Definition:</b> <a href="FloatingPointMode_8h_source.html#l00208">FloatingPointMode.h:208</a></div></div>
<div class="ttc" id="anamespacellvm_html_a4f6b08837306196c6ff45fc5c65fe815"><div class="ttname"><a href="namespacellvm.html#a4f6b08837306196c6ff45fc5c65fe815">llvm::simplifyXorInst</a></div><div class="ttdeci">Value * simplifyXorInst(Value *LHS, Value *RHS, const SimplifyQuery &amp;Q)</div><div class="ttdoc">Given operands for an Xor, fold the result or return null.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l02608">InstructionSimplify.cpp:2608</a></div></div>
<div class="ttc" id="aclassllvm_1_1FastMathFlags_html"><div class="ttname"><a href="classllvm_1_1FastMathFlags.html">llvm::FastMathFlags</a></div><div class="ttdoc">Convenience struct for specifying and reasoning about fast-math flags.</div><div class="ttdef"><b>Definition:</b> <a href="FMF_8h_source.html#l00021">FMF.h:21</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ac0467ca7fad871738b10db95feb40dad"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ac0467ca7fad871738b10db95feb40dad">llvm::PatternMatch::m_BitCast</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::BitCast &gt; m_BitCast(const OpTy &amp;Op)</div><div class="ttdoc">Matches BitCast.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01593">PatternMatch.h:1593</a></div></div>
<div class="ttc" id="aItaniumDemangle_8h_html_ab67ef02b75c3226cfe0b2791e2b48b06a74accfde3d3f8e8a27c326eba229d16c"><div class="ttname"><a href="ItaniumDemangle_8h.html#ab67ef02b75c3226cfe0b2791e2b48b06a74accfde3d3f8e8a27c326eba229d16c">ReferenceKind::LValue</a></div><div class="ttdeci">@ LValue</div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a94bf3939e0bea91b481096473d0e549f"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">llvm::PatternMatch::m_Deferred</a></div><div class="ttdeci">deferredval_ty&lt; Value &gt; m_Deferred(Value *const &amp;V)</div><div class="ttdoc">Like m_Specific(), but works if the specific value to match is determined as part of the same match()...</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00790">PatternMatch.h:790</a></div></div>
<div class="ttc" id="aFloatingPointMode_8h_html_a75561e03bba6883c8023574327d92b67ace8cc3cdd99d4ce78ff9f4bf4c681d28"><div class="ttname"><a href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67ace8cc3cdd99d4ce78ff9f4bf4c681d28">fcPosInf</a></div><div class="ttdeci">@ fcPosInf</div><div class="ttdef"><b>Definition:</b> <a href="FloatingPointMode_8h_source.html#l00209">FloatingPointMode.h:209</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_aa9c705ecec80ebd584bb3d54b48f7ee1a4357ae5a8ec7cec4162a1f25c69558ff"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a4357ae5a8ec7cec4162a1f25c69558ff">BMask_AllOnes</a></div><div class="ttdeci">@ BMask_AllOnes</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00144">InstCombineAndOrXor.cpp:144</a></div></div>
<div class="ttc" id="anamespacellvm_1_1APIntOps_html_aa606171b17bdde9015fa656e226ca9e0"><div class="ttname"><a href="namespacellvm_1_1APIntOps.html#aa606171b17bdde9015fa656e226ca9e0">llvm::APIntOps::umin</a></div><div class="ttdeci">const APInt &amp; umin(const APInt &amp;A, const APInt &amp;B)</div><div class="ttdoc">Determine the smaller of two APInts considered to be unsigned.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l02185">APInt.h:2185</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_adcc0eb018adede4d62dafa5e60bce4be"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#adcc0eb018adede4d62dafa5e60bce4be">llvm::PatternMatch::m_c_MaxOrMin</a></div><div class="ttdeci">match_combine_or&lt; match_combine_or&lt; MaxMin_match&lt; ICmpInst, LHS, RHS, smax_pred_ty, true &gt;, MaxMin_match&lt; ICmpInst, LHS, RHS, smin_pred_ty, true &gt; &gt;, match_combine_or&lt; MaxMin_match&lt; ICmpInst, LHS, RHS, umax_pred_ty, true &gt;, MaxMin_match&lt; ICmpInst, LHS, RHS, umin_pred_ty, true &gt; &gt; &gt; m_c_MaxOrMin(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02362">PatternMatch.h:2362</a></div></div>
<div class="ttc" id="aclassllvm_1_1CastInst_html_a7cf02ab81e7b0774ebf78e13f89dabfc"><div class="ttname"><a href="classllvm_1_1CastInst.html#a7cf02ab81e7b0774ebf78e13f89dabfc">llvm::CastInst::getDestTy</a></div><div class="ttdeci">Type * getDestTy() const</div><div class="ttdoc">Return the destination type, as a convenience.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00682">InstrTypes.h:682</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00055">MD5.cpp:55</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVFenceField_html_a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731"><div class="ttname"><a href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">llvm::RISCVFenceField::R</a></div><div class="ttdeci">@ R</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00278">RISCVBaseInfo.h:278</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ad10dbdfb0cba1fad1a0f7cfae3b55f1a"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ad10dbdfb0cba1fad1a0f7cfae3b55f1a">llvm::PatternMatch::m_Unless</a></div><div class="ttdeci">match_unless&lt; Ty &gt; m_Unless(const Ty &amp;M)</div><div class="ttdoc">Match if the inner matcher does NOT match.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00182">PatternMatch.h:182</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a4aa7e7ca8ab4093fd0dbadb223b998c0"><div class="ttname"><a href="classllvm_1_1APInt.html#a4aa7e7ca8ab4093fd0dbadb223b998c0">llvm::APInt::isSignMask</a></div><div class="ttdeci">bool isSignMask() const</div><div class="ttdoc">Check if the APInt's value is returned by getSignMask.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00454">APInt.h:454</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a3de757fc0f1dc7f8f8e9211b32ac106d"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a3de757fc0f1dc7f8f8e9211b32ac106d">llvm::PatternMatch::m_c_ICmp</a></div><div class="ttdeci">CmpClass_match&lt; LHS, RHS, ICmpInst, ICmpInst::Predicate, true &gt; m_c_ICmp(ICmpInst::Predicate &amp;Pred, const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches an ICmp with a predicate over LHS and RHS in either order.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02234">PatternMatch.h:2234</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aca6428e7fec51ba0b55594f469eb9691"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">llvm::PatternMatch::m_OneUse</a></div><div class="ttdeci">OneUse_match&lt; T &gt; m_OneUse(const T &amp;SubPattern)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00067">PatternMatch.h:67</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba75016d5872d90adf89cc1cbf5763f474"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba75016d5872d90adf89cc1cbf5763f474">llvm::CmpInst::FCMP_ULT</a></div><div class="ttdeci">@ FCMP_ULT</div><div class="ttdoc">1 1 0 0 True if unordered or less than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00732">InstrTypes.h:732</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a554ab77949b0a16670a83ec3307501eb"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a554ab77949b0a16670a83ec3307501eb">llvm::ConstantExpr::getSub</a></div><div class="ttdeci">static Constant * getSub(Constant *C1, Constant *C2, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02664">Constants.cpp:2664</a></div></div>
<div class="ttc" id="anamespacellvm_html_a2554a96c67bdd7d0a62855a844ec55b0a945d5e233cf7d6240f6b783b36a374ff"><div class="ttname"><a href="namespacellvm.html#a2554a96c67bdd7d0a62855a844ec55b0a945d5e233cf7d6240f6b783b36a374ff">llvm::AlignStyle::Left</a></div><div class="ttdeci">@ Left</div></div>
<div class="ttc" id="anamespacellvm_1_1BitmaskEnumDetail_html_a91efa71de05b0c2d00730a0279f58658"><div class="ttname"><a href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">llvm::BitmaskEnumDetail::Mask</a></div><div class="ttdeci">constexpr std::underlying_type_t&lt; E &gt; Mask()</div><div class="ttdoc">Get a bitmask with 1s in all places up to the high-order bit of E's largest value.</div><div class="ttdef"><b>Definition:</b> <a href="BitmaskEnum_8h_source.html#l00080">BitmaskEnum.h:80</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aac9e78b3aa02ec087c4621358f506718"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">llvm::PatternMatch::m_APInt</a></div><div class="ttdeci">apint_match m_APInt(const APInt *&amp;Res)</div><div class="ttdoc">Match a ConstantInt or splatted ConstantVector, binding the specified pointer to the contained APInt.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00278">PatternMatch.h:278</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ac56cd25f664c1497623d26158a6c5997"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ac56cd25f664c1497623d26158a6c5997">llvm::PatternMatch::m_c_BinOp</a></div><div class="ttdeci">AnyBinaryOp_match&lt; LHS, RHS, true &gt; m_c_BinOp(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches a BinaryOperator with LHS and RHS in either order.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02226">PatternMatch.h:2226</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac4fc845f5ed92de63cd4474f128f5fc5"><div class="ttname"><a href="namespacellvm.html#ac4fc845f5ed92de63cd4474f128f5fc5">llvm::cast</a></div><div class="ttdeci">decltype(auto) cast(const From &amp;Val)</div><div class="ttdoc">cast&lt;X&gt; - Return the argument parameter cast to the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="Casting_8h_source.html#l00566">Casting.h:566</a></div></div>
<div class="ttc" id="astructllvm_1_1SimplifyQuery_html_a928ce56952772d0e0f43cab3a489a6fe"><div class="ttname"><a href="structllvm_1_1SimplifyQuery.html#a928ce56952772d0e0f43cab3a489a6fe">llvm::SimplifyQuery::AC</a></div><div class="ttdeci">AssumptionCache * AC</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00097">InstructionSimplify.h:97</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a9e1483f7215664a2315c53c3558d9a8d"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a></div><div class="ttdeci">Value * LHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00075">X86PartialReduction.cpp:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_adf0b3634500370e379ded8d75a72e791"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#adf0b3634500370e379ded8d75a72e791">llvm::InstCombinerImpl::matchBSwapOrBitReverse</a></div><div class="ttdeci">Instruction * matchBSwapOrBitReverse(Instruction &amp;I, bool MatchBSwaps, bool MatchBitReversals)</div><div class="ttdoc">Given an initial instruction, check to see if it is the root of a bswap/bitreverse idiom.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l02620">InstCombineAndOrXor.cpp:2620</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html"><div class="ttname"><a href="classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">This is the shared class of boolean and integer constants.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00078">Constants.h:78</a></div></div>
<div class="ttc" id="astructllvm_1_1KnownBits_html_a157efd68e8b4b838829cad165b1583f8"><div class="ttname"><a href="structllvm_1_1KnownBits.html#a157efd68e8b4b838829cad165b1583f8">llvm::KnownBits::isNonNegative</a></div><div class="ttdeci">bool isNonNegative() const</div><div class="ttdoc">Returns true if this value is known to be non-negative.</div><div class="ttdef"><b>Definition:</b> <a href="KnownBits_8h_source.html#l00099">KnownBits.h:99</a></div></div>
<div class="ttc" id="aMathExtras_8h_html_a9211f62d8e1e6de999eaa63ec0f6ae02"><div class="ttname"><a href="MathExtras_8h.html#a9211f62d8e1e6de999eaa63ec0f6ae02">R2</a></div><div class="ttdeci">#define R2(n)</div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ab4e05d690df389b8b1477c90387b575f"><div class="ttname"><a href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">llvm::Instruction::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const</div><div class="ttdoc">Returns a member of one of the enums like Instruction::Add.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00168">Instruction.h:168</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_ac8c0157adbe12649beac0009c2f6ad8d"><div class="ttname"><a href="classllvm_1_1APInt.html#ac8c0157adbe12649beac0009c2f6ad8d">llvm::APInt::isNonNegative</a></div><div class="ttdeci">bool isNonNegative() const</div><div class="ttdoc">Determine if this APInt Value is non-negative (&gt;= 0)</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00317">APInt.h:317</a></div></div>
<div class="ttc" id="aFloatingPointMode_8h_html_a75561e03bba6883c8023574327d92b67ae40661d92d6edd95f9ba785c04e08362"><div class="ttname"><a href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67ae40661d92d6edd95f9ba785c04e08362">fcAllFlags</a></div><div class="ttdeci">@ fcAllFlags</div><div class="ttdef"><b>Definition:</b> <a href="FloatingPointMode_8h_source.html#l00219">FloatingPointMode.h:219</a></div></div>
<div class="ttc" id="aclassllvm_1_1SelectInst_html_aa55fb74dd22008fdcc26a63f44576022"><div class="ttname"><a href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">llvm::SelectInst::Create</a></div><div class="ttdeci">static SelectInst * Create(Value *C, Value *S1, Value *S2, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr, Instruction *MDFrom=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01777">Instructions.h:1777</a></div></div>
<div class="ttc" id="anamespacellvm_html_aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b"><div class="ttname"><a href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">llvm::RecurKind::And</a></div><div class="ttdeci">@ And</div><div class="ttdoc">Bitwise or logical AND of integers.</div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_acb52eaa15512b845d33e0ec03648af5c"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#acb52eaa15512b845d33e0ec03648af5c">llvm::PatternMatch::m_CopySign</a></div><div class="ttdeci">m_Intrinsic_Ty&lt; Opnd0, Opnd1 &gt;::Ty m_CopySign(const Opnd0 &amp;Op0, const Opnd1 &amp;Op1)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02210">PatternMatch.h:2210</a></div></div>
<div class="ttc" id="anamespacellvm_html_a39b2cbd58018001ca6c1b2d26be87b86"><div class="ttname"><a href="namespacellvm.html#a39b2cbd58018001ca6c1b2d26be87b86">llvm::predicatesFoldable</a></div><div class="ttdeci">bool predicatesFoldable(CmpInst::Predicate P1, CmpInst::Predicate P2)</div><div class="ttdoc">Return true if both predicates match sign or if at least one of them is an equality comparison (which...</div><div class="ttdef"><b>Definition:</b> <a href="CmpInstAnalysis_8cpp_source.html#l00058">CmpInstAnalysis.cpp:58</a></div></div>
<div class="ttc" id="aInstCombineInternal_8h_html"><div class="ttname"><a href="InstCombineInternal_8h.html">InstCombineInternal.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_addb87fe3f509b7803d3f5933ee24b560"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#addb87fe3f509b7803d3f5933ee24b560">llvm::PatternMatch::m_Select</a></div><div class="ttdeci">ThreeOps_match&lt; Cond, LHS, RHS, Instruction::Select &gt; m_Select(const Cond &amp;C, const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches SelectInst.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01462">PatternMatch.h:1462</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_adefbb946b174533d5eb8db503b1f4ffa"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#adefbb946b174533d5eb8db503b1f4ffa">L2</a></div><div class="ttdeci">add sub stmia L5 ldr L2</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00201">README.txt:201</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a247b6987d634040b8aa6fb9c5887b703"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a247b6987d634040b8aa6fb9c5887b703">llvm::PatternMatch::m_ZExtOrSExt</a></div><div class="ttdeci">match_combine_or&lt; CastClass_match&lt; OpTy, Instruction::ZExt &gt;, CastClass_match&lt; OpTy, Instruction::SExt &gt; &gt; m_ZExtOrSExt(const OpTy &amp;Op)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01648">PatternMatch.h:1648</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a25d956d9e0beadd47ce4bc255dfa811d"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">llvm::PatternMatch::match</a></div><div class="ttdeci">bool match(Val *V, const Pattern &amp;P)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00049">PatternMatch.h:49</a></div></div>
<div class="ttc" id="aLint_8cpp_html_a45005634b54e2126cb3e6ec0dbc9ade4"><div class="ttname"><a href="Lint_8cpp.html#a45005634b54e2126cb3e6ec0dbc9ade4">isZero</a></div><div class="ttdeci">static bool isZero(Value *V, const DataLayout &amp;DL, DominatorTree *DT, AssumptionCache *AC)</div><div class="ttdef"><b>Definition:</b> <a href="Lint_8cpp_source.html#l00524">Lint.cpp:524</a></div></div>
<div class="ttc" id="aSystemZTargetTransformInfo_8cpp_html_a69eeffbc38c079195008fbfb5aaad0b9"><div class="ttname"><a href="SystemZTargetTransformInfo_8cpp.html#a69eeffbc38c079195008fbfb5aaad0b9">getScalarSizeInBits</a></div><div class="ttdeci">static unsigned getScalarSizeInBits(Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="SystemZTargetTransformInfo_8cpp_source.html#l00403">SystemZTargetTransformInfo.cpp:403</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a49cd5939942c6665aba4cae8c220dff1"><div class="ttname"><a href="classllvm_1_1APInt.html#a49cd5939942c6665aba4cae8c220dff1">llvm::APInt::isZero</a></div><div class="ttdeci">bool isZero() const</div><div class="ttdoc">Determine if this value is zero, i.e. all bits are clear.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00366">APInt.h:366</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantRange_html_a76bca22a9253d0962fd07031c89b98e7"><div class="ttname"><a href="classllvm_1_1ConstantRange.html#a76bca22a9253d0962fd07031c89b98e7">llvm::ConstantRange::isWrappedSet</a></div><div class="ttdeci">bool isWrappedSet() const</div><div class="ttdoc">Return true if this set wraps around the unsigned domain.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantRange_8cpp_source.html#l00371">ConstantRange.cpp:371</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aa4a99c313af96b3b50a9768338a54b2e"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aa4a99c313af96b3b50a9768338a54b2e">llvm::PatternMatch::m_SpecificIntAllowUndef</a></div><div class="ttdeci">specific_intval&lt; true &gt; m_SpecificIntAllowUndef(APInt V)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00862">PatternMatch.h:862</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_a09c7f412064dea0ffea0d0f12f509ae9"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#a09c7f412064dea0ffea0d0f12f509ae9">foldLogicCastConstant</a></div><div class="ttdeci">static Instruction * foldLogicCastConstant(BinaryOperator &amp;Logic, CastInst *Cast, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdoc">Fold {and,or,xor} (cast X), C.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l01689">InstCombineAndOrXor.cpp:1689</a></div></div>
<div class="ttc" id="aIntrinsics_8h_html"><div class="ttname"><a href="Intrinsics_8h.html">Intrinsics.h</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A, *B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00086">README_ALTIVEC.txt:86</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">llvm::CmpInst::ICMP_ULE</a></div><div class="ttdeci">@ ICMP_ULE</div><div class="ttdoc">unsigned less or equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00744">InstrTypes.h:744</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARM__PROC_html_aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5"><div class="ttname"><a href="namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">llvm::ARM_PROC::A</a></div><div class="ttdeci">@ A</div><div class="ttdef"><b>Definition:</b> <a href="MCTargetDesc_2ARMBaseInfo_8h_source.html#l00034">ARMBaseInfo.h:34</a></div></div>
<div class="ttc" id="aclassllvm_1_1FCmpInst_html"><div class="ttname"><a href="classllvm_1_1FCmpInst.html">llvm::FCmpInst</a></div><div class="ttdoc">This instruction compares its operands according to the predicate given to the constructor.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01371">Instructions.h:1371</a></div></div>
<div class="ttc" id="aOcamlGCPrinter_8cpp_html_afcf2f797ed287a723263583c9b1c1bce"><div class="ttname"><a href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a></div><div class="ttdeci">static GCMetadataPrinterRegistry::Add&lt; OcamlGCMetadataPrinter &gt; Y(&quot;ocaml&quot;, &quot;ocaml 3.10-compatible collector&quot;)</div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a7a371c4faf8e41f7cac98ad694f504dc"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a7a371c4faf8e41f7cac98ad694f504dc">llvm::PatternMatch::m_PosZeroFP</a></div><div class="ttdeci">cstfp_pred_ty&lt; is_pos_zero_fp &gt; m_PosZeroFP()</div><div class="ttdoc">Match a floating-point positive zero.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00673">PatternMatch.h:673</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallInst_html_a850d8262cd900958b3153c4aa080b2bb"><div class="ttname"><a href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">llvm::CallInst::Create</a></div><div class="ttdeci">static CallInst * Create(FunctionType *Ty, Value *F, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01528">Instructions.h:1528</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78bae51609fc6a425f849d37c28cb9bc0344"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bae51609fc6a425f849d37c28cb9bc0344">llvm::CmpInst::FCMP_UGE</a></div><div class="ttdeci">@ FCMP_UGE</div><div class="ttdoc">1 0 1 1 True if unordered, greater than, or equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00731">InstrTypes.h:731</a></div></div>
<div class="ttc" id="astructIntPart_html_a0534bf89c97ddef9c7b9cbc0a276c077"><div class="ttname"><a href="structIntPart.html#a0534bf89c97ddef9c7b9cbc0a276c077">IntPart::NumBits</a></div><div class="ttdeci">unsigned NumBits</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l01039">InstCombineAndOrXor.cpp:1039</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa750395459fa1eb7130d6de8e3d074f6"><div class="ttname"><a href="namespacellvm.html#aa750395459fa1eb7130d6de8e3d074f6">llvm::simplifyBinOp</a></div><div class="ttdeci">Value * simplifyBinOp(unsigned Opcode, Value *LHS, Value *RHS, const SimplifyQuery &amp;Q)</div><div class="ttdoc">Given operands for a BinaryOperator, fold the result or return null.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l05812">InstructionSimplify.cpp:5812</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a071e8d814b2b30b02544fad964227b8e"><div class="ttname"><a href="classllvm_1_1APInt.html#a071e8d814b2b30b02544fad964227b8e">llvm::APInt::getAllOnes</a></div><div class="ttdeci">static APInt getAllOnes(unsigned numBits)</div><div class="ttdoc">Return an APInt of a specified width with all bits set.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00214">APInt.h:214</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a1bc022868b23918efa44df511f4d5b61"><div class="ttname"><a href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">llvm::Type::isVectorTy</a></div><div class="ttdeci">bool isVectorTy() const</div><div class="ttdoc">True if this is an instance of VectorType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00258">Type.h:258</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a04353aa48874f9bda89ff9059cd1a5a6"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a04353aa48874f9bda89ff9059cd1a5a6">llvm::PatternMatch::m_Instruction</a></div><div class="ttdeci">bind_ty&lt; Instruction &gt; m_Instruction(Instruction *&amp;I)</div><div class="ttdoc">Match an instruction, capturing it if we match.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00716">PatternMatch.h:716</a></div></div>
<div class="ttc" id="astructllvm_1_1SimplifyQuery_html_a0ffb6d79f6befe2030328bd1d7110feb"><div class="ttname"><a href="structllvm_1_1SimplifyQuery.html#a0ffb6d79f6befe2030328bd1d7110feb">llvm::SimplifyQuery::DL</a></div><div class="ttdeci">const DataLayout &amp; DL</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00094">InstructionSimplify.h:94</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a2cbdca7c8267aac6914d674f8e81841b"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">llvm::PatternMatch::m_ZExt</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::ZExt &gt; m_ZExt(const OpTy &amp;Op)</div><div class="ttdoc">Matches ZExt.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01629">PatternMatch.h:1629</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ad191220adaaedcfba833985509a17452"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ad191220adaaedcfba833985509a17452">llvm::PatternMatch::m_c_Add</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Add, true &gt; m_c_Add(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches a Add with LHS and RHS in either order.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02248">PatternMatch.h:2248</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a7abf5fb4071cb25dbce06dfb5ee3c937"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a></div><div class="ttdeci">static GCRegistry::Add&lt; OcamlGC &gt; B(&quot;ocaml&quot;, &quot;ocaml 3.10-compatible GC&quot;)</div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a74a8221adbd09a9076a1ab471644b223"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a74a8221adbd09a9076a1ab471644b223">llvm::PatternMatch::m_MaxOrMin</a></div><div class="ttdeci">match_combine_or&lt; match_combine_or&lt; MaxMin_match&lt; ICmpInst, LHS, RHS, smax_pred_ty &gt;, MaxMin_match&lt; ICmpInst, LHS, RHS, smin_pred_ty &gt; &gt;, match_combine_or&lt; MaxMin_match&lt; ICmpInst, LHS, RHS, umax_pred_ty &gt;, MaxMin_match&lt; ICmpInst, LHS, RHS, umin_pred_ty &gt; &gt; &gt; m_MaxOrMin(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01882">PatternMatch.h:1882</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_afa0b2fa29ba074f2b6ec9ac11163f2d9"><div class="ttname"><a href="classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">llvm::Instruction::CastOps</a></div><div class="ttdeci">CastOps</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00823">Instruction.h:823</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_af431ec215bba8bb9c56e7541d99920f2"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#af431ec215bba8bb9c56e7541d99920f2">llvm::PatternMatch::m_FNeg</a></div><div class="ttdeci">FNeg_match&lt; OpTy &gt; m_FNeg(const OpTy &amp;X)</div><div class="ttdoc">Match 'fneg X' as 'fsub -0.0, X'.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01033">PatternMatch.h:1033</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_aa9c705ecec80ebd584bb3d54b48f7ee1"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1">MaskedICmpType</a></div><div class="ttdeci">MaskedICmpType</div><div class="ttdoc">Classify (icmp eq (A &amp; B), C) and (icmp ne (A &amp; B), C) as matching patterns that can be simplified.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00141">InstCombineAndOrXor.cpp:141</a></div></div>
<div class="ttc" id="aclassllvm_1_1APFloat_html_a2b901c3a0625a7d7173e9bd4864e2775"><div class="ttname"><a href="classllvm_1_1APFloat.html#a2b901c3a0625a7d7173e9bd4864e2775">llvm::APFloat::isNegative</a></div><div class="ttdeci">bool isNegative() const</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l01259">APFloat.h:1259</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_a4d51384de6e1798bb6aa875aebeea9f0"><div class="ttname"><a href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">llvm::Constant::getAllOnesValue</a></div><div class="ttdeci">static Constant * getAllOnesValue(Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00403">Constants.cpp:403</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html_a31bf07f3f61525486633bc1d0bbaf029"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">llvm::BinaryOperator::getOpcode</a></div><div class="ttdeci">BinaryOps getOpcode() const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00391">InstrTypes.h:391</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a677ac8d99ff3c2d32a95c21de9ed372c"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">llvm::PatternMatch::m_ConstantInt</a></div><div class="ttdeci">class_match&lt; ConstantInt &gt; m_ConstantInt()</div><div class="ttdoc">Match an arbitrary ConstantInt and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00147">PatternMatch.h:147</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78baf0159e4005258dc54f20b6fc227d19ed"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baf0159e4005258dc54f20b6fc227d19ed">llvm::CmpInst::FCMP_UNO</a></div><div class="ttdeci">@ FCMP_UNO</div><div class="ttdoc">1 0 0 0 True if unordered: isnan(X) | isnan(Y)</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00728">InstrTypes.h:728</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00041">Instruction.h:41</a></div></div>
<div class="ttc" id="aX86InterleavedAccess_8cpp_html_a76c9562101f54d25482f88ae29ed6131"><div class="ttname"><a href="X86InterleavedAccess_8cpp.html#a76c9562101f54d25482f88ae29ed6131">Concat</a></div><div class="ttdeci">static constexpr int Concat[]</div><div class="ttdef"><b>Definition:</b> <a href="X86InterleavedAccess_8cpp_source.html#l00239">X86InterleavedAccess.cpp:239</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a9f382207d841377156d4c7868b66b9a5"><div class="ttname"><a href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">llvm::Type::getScalarSizeInBits</a></div><div class="ttdeci">unsigned getScalarSizeInBits() const LLVM_READONLY</div><div class="ttdoc">If this is a vector type, return the getPrimitiveSizeInBits value for the element type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00188">Type.cpp:188</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a423e2c491de1408d54e35f0b47d076be"><div class="ttname"><a href="classllvm_1_1APInt.html#a423e2c491de1408d54e35f0b47d076be">llvm::APInt::isAllOnes</a></div><div class="ttdeci">bool isAllOnes() const</div><div class="ttdoc">Determine if all bits are set. This is true for zero-width values.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00354">APInt.h:354</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a7af604b3a6b3a44113d4c54c5c04d031"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a7af604b3a6b3a44113d4c54c5c04d031">llvm::PatternMatch::m_c_Or</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Or, true &gt; m_c_Or(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches an Or with LHS and RHS in either order.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02269">PatternMatch.h:2269</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a217e0207d9cc8e046c2dccbf0e4bb198"><div class="ttname"><a href="classllvm_1_1APInt.html#a217e0207d9cc8e046c2dccbf0e4bb198">llvm::APInt::getZExtValue</a></div><div class="ttdeci">uint64_t getZExtValue() const</div><div class="ttdoc">Get zero extended value.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01494">APInt.h:1494</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_abfae6b141dd2ac5a749a0db37842e4c7"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#abfae6b141dd2ac5a749a0db37842e4c7">foldUnsignedUnderflowCheck</a></div><div class="ttdeci">static Value * foldUnsignedUnderflowCheck(ICmpInst *ZeroICmp, ICmpInst *UnsignedICmp, bool IsAnd, const SimplifyQuery &amp;Q, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdoc">Commuted variants are assumed to be handled by calling this function again with the parameters swappe...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00960">InstCombineAndOrXor.cpp:960</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a9fe0b1e68f897c642cde7e54184f2f4e"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a9fe0b1e68f897c642cde7e54184f2f4e">llvm::ConstantExpr::getXor</a></div><div class="ttdeci">static Constant * getXor(Constant *C1, Constant *C2)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02686">Constants.cpp:2686</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html">llvm::InstCombinerImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="InstCombineInternal_8h_source.html#l00061">InstCombineInternal.h:61</a></div></div>
<div class="ttc" id="anamespacellvm_html_a05609d049bfe3c5c2f64711566131a86a28d0edd045e05cf5af64e35ae0c4c6ef"><div class="ttname"><a href="namespacellvm.html#a05609d049bfe3c5c2f64711566131a86a28d0edd045e05cf5af64e35ae0c4c6ef">llvm::ThreadPriority::Low</a></div><div class="ttdeci">@ Low</div><div class="ttdoc">Lower the current thread's priority such that it does not affect foreground tasks significantly.</div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a969709dd49c28865a482d8b870f87c46"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">llvm::ConstantInt::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, uint64_t V, bool IsSigned=false)</div><div class="ttdoc">If Ty is a vector type, return a Constant with a splat of the given value.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00887">Constants.cpp:887</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ace8c2df4c506b92296cad275b4211022"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ace8c2df4c506b92296cad275b4211022">llvm::PatternMatch::m_NSWSub</a></div><div class="ttdeci">OverflowingBinaryOp_match&lt; LHS, RHS, Instruction::Sub, OverflowingBinaryOperator::NoSignedWrap &gt; m_NSWSub(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01164">PatternMatch.h:1164</a></div></div>
<div class="ttc" id="aclassllvm_1_1Use_html_a50a2e57da274f8d69b9f932977379cdf"><div class="ttname"><a href="classllvm_1_1Use.html#a50a2e57da274f8d69b9f932977379cdf">llvm::Use::getUser</a></div><div class="ttdeci">User * getUser() const</div><div class="ttdoc">Returns the User that contains this Use.</div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00072">Use.h:72</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba024db78a5ed74f64666f3ca4955e6eca"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba024db78a5ed74f64666f3ca4955e6eca">llvm::CmpInst::FCMP_OEQ</a></div><div class="ttdeci">@ FCMP_OEQ</div><div class="ttdoc">0 0 0 1 True if ordered and equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00721">InstrTypes.h:721</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba326bee0a4a424cef21c1cf8adb8b8dd8"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba326bee0a4a424cef21c1cf8adb8b8dd8">llvm::CmpInst::FCMP_OLT</a></div><div class="ttdeci">@ FCMP_OLT</div><div class="ttdoc">0 1 0 0 True if ordered and less than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00724">InstrTypes.h:724</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a0fd53f63d349dc8a7c5fc0cdd7a94c8d"><div class="ttname"><a href="classllvm_1_1Instruction.html#a0fd53f63d349dc8a7c5fc0cdd7a94c8d">llvm::Instruction::removeFromParent</a></div><div class="ttdeci">void removeFromParent()</div><div class="ttdoc">This method unlinks 'this' from the containing basic block, but does not delete it.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00078">Instruction.cpp:78</a></div></div>
<div class="ttc" id="anamespacellvm_html_a4f2dc2393a7799e74a0ab4aaa96783f6"><div class="ttname"><a href="namespacellvm.html#a4f2dc2393a7799e74a0ab4aaa96783f6">llvm::simplifyOrInst</a></div><div class="ttdeci">Value * simplifyOrInst(Value *LHS, Value *RHS, const SimplifyQuery &amp;Q)</div><div class="ttdoc">Given operands for an Or, fold the result or return null.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l02530">InstructionSimplify.cpp:2530</a></div></div>
<div class="ttc" id="aPatternMatch_8h_html"><div class="ttname"><a href="PatternMatch_8h.html">PatternMatch.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a9a99431f0828d0222c617eb876bc5d34"><div class="ttname"><a href="classllvm_1_1APInt.html#a9a99431f0828d0222c617eb876bc5d34">llvm::APInt::countTrailingZeros</a></div><div class="ttdeci">unsigned countTrailingZeros() const</div><div class="ttdoc">Count the number of trailing zero bits.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01591">APInt.h:1591</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a0f8629c0ff1db9c384e378b2ca860f0a"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a0f8629c0ff1db9c384e378b2ca860f0a">llvm::PatternMatch::m_APIntAllowUndef</a></div><div class="ttdeci">apint_match m_APIntAllowUndef(const APInt *&amp;Res)</div><div class="ttdoc">Match APInt while allowing undefs in splat vector constants.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00284">PatternMatch.h:284</a></div></div>
<div class="ttc" id="aclassllvm_1_1CastInst_html_a6a1a810dc09bf349d1e1481931ce2baa"><div class="ttname"><a href="classllvm_1_1CastInst.html#a6a1a810dc09bf349d1e1481931ce2baa">llvm::CastInst::getSrcTy</a></div><div class="ttdeci">Type * getSrcTy() const</div><div class="ttdoc">Return the source type, as a convenience.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00680">InstrTypes.h:680</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_a7830717462da5623b2c4728d566ff66f"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#a7830717462da5623b2c4728d566ff66f">foldAndOrOfICmpEqZeroAndICmp</a></div><div class="ttdeci">static Value * foldAndOrOfICmpEqZeroAndICmp(ICmpInst *LHS, ICmpInst *RHS, bool IsAnd, bool IsLogical, IRBuilderBase &amp;Builder)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l02930">InstCombineAndOrXor.cpp:2930</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_a8a000056a3cea859eae917d17f8acfac"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#a8a000056a3cea859eae917d17f8acfac">foldXorToXor</a></div><div class="ttdeci">static Instruction * foldXorToXor(BinaryOperator &amp;I, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdoc">A ^ B can be specified using other logic ops in a variety of patterns.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l03631">InstCombineAndOrXor.cpp:3631</a></div></div>
<div class="ttc" id="aErlangGCPrinter_8cpp_html_a74b474c0616ab55c1d9487f11fd31d26"><div class="ttname"><a href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a></div><div class="ttdeci">static GCMetadataPrinterRegistry::Add&lt; ErlangGCPrinter &gt; X(&quot;erlang&quot;, &quot;erlang-compatible garbage collector&quot;)</div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aebdb2700a77d10ae6f0ce115e23d9f77"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">llvm::PatternMatch::m_One</a></div><div class="ttdeci">cst_pred_ty&lt; is_one &gt; m_One()</div><div class="ttdoc">Match an integer 1 or a vector with all elements equal to 1.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00517">PatternMatch.h:517</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a648710a93ceb0bbddf0a2ae7a8bb2ca5"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a648710a93ceb0bbddf0a2ae7a8bb2ca5">llvm::InstCombinerImpl::visitAnd</a></div><div class="ttdeci">Instruction * visitAnd(BinaryOperator &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l02139">InstCombineAndOrXor.cpp:2139</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_aa9c705ecec80ebd584bb3d54b48f7ee1a37651a7acaf5871fb8a4d593749c06f4"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a37651a7acaf5871fb8a4d593749c06f4">Mask_AllZeros</a></div><div class="ttdeci">@ Mask_AllZeros</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00146">InstCombineAndOrXor.cpp:146</a></div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_a07ed0bfaa124c15897944fe3eaa971ab"><div class="ttname"><a href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned long or uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ad5e60756e331a97669d11b5c9d8691a2"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ad5e60756e331a97669d11b5c9d8691a2">llvm::PatternMatch::m_Power2</a></div><div class="ttdeci">cst_pred_ty&lt; is_power2 &gt; m_Power2()</div><div class="ttdoc">Match an integer or vector power-of-2.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00544">PatternMatch.h:544</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a82e2ea7f0ab67e33e22b3a2a188feaba"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">llvm::PatternMatch::m_Xor</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Xor &gt; m_Xor(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01105">PatternMatch.h:1105</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_acfae9bdee6027ffa8ffe244cc22e3a76"><div class="ttname"><a href="classllvm_1_1APInt.html#acfae9bdee6027ffa8ffe244cc22e3a76">llvm::APInt::isSubsetOf</a></div><div class="ttdeci">bool isSubsetOf(const APInt &amp;RHS) const</div><div class="ttdoc">This operation checks that all bits set in this APInt are also set in RHS.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01235">APInt.h:1235</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_a9e92e028c2dd81bf7d518dfc3960624a"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#a9e92e028c2dd81bf7d518dfc3960624a">matchIsNotNaN</a></div><div class="ttdeci">static bool matchIsNotNaN(FCmpInst::Predicate P, Value *LHS, Value *RHS)</div><div class="ttdoc">Matches canonical form of isnan, fcmp ord x, 0.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l01245">InstCombineAndOrXor.cpp:1245</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_af238147cf5453729781a0fcc7322e1c6"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#af238147cf5453729781a0fcc7322e1c6">llvm::ConstantExpr::getTrunc</a></div><div class="ttdeci">static Constant * getTrunc(Constant *C, Type *Ty, bool OnlyIfReduced=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02091">Constants.cpp:2091</a></div></div>
<div class="ttc" id="aclassllvm_1_1APFloat_html"><div class="ttname"><a href="classllvm_1_1APFloat.html">llvm::APFloat</a></div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00744">APFloat.h:744</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_a0c93fe8370899bc77907f9cb55f57c4b"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#a0c93fe8370899bc77907f9cb55f57c4b">foldSignedTruncationCheck</a></div><div class="ttdeci">static Value * foldSignedTruncationCheck(ICmpInst *ICmp0, ICmpInst *ICmp1, Instruction &amp;CxtI, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdoc">General pattern: X &amp; Y.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00812">InstCombineAndOrXor.cpp:812</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a8d44c548f74b3d233a248672402b5dd1"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a8d44c548f74b3d233a248672402b5dd1">llvm::InstCombinerImpl::sinkNotIntoOtherHandOfLogicalOp</a></div><div class="ttdeci">bool sinkNotIntoOtherHandOfLogicalOp(Instruction &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l03993">InstCombineAndOrXor.cpp:3993</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_afe6a25e856a1a63ffff098f05e3f26d2"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#afe6a25e856a1a63ffff098f05e3f26d2">llvm::ConstantExpr::getCompare</a></div><div class="ttdeci">static Constant * getCompare(unsigned short pred, Constant *C1, Constant *C2, bool OnlyIfReduced=false)</div><div class="ttdoc">Return an ICmp or FCmp comparison operator constant expression.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02419">Constants.cpp:2419</a></div></div>
<div class="ttc" id="anamespacellvm_html_a969e30a11e5b3ac2ad7ab5fcc537d495"><div class="ttname"><a href="namespacellvm.html#a969e30a11e5b3ac2ad7ab5fcc537d495">llvm::simplifyICmpInst</a></div><div class="ttdeci">Value * simplifyICmpInst(unsigned Predicate, Value *LHS, Value *RHS, const SimplifyQuery &amp;Q)</div><div class="ttdoc">Given operands for an ICmpInst, fold the result or return null.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l03946">InstructionSimplify.cpp:3946</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ae77be336e228cf9aa00709a8606dfb98"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">llvm::PatternMatch::m_Zero</a></div><div class="ttdeci">is_zero m_Zero()</div><div class="ttdoc">Match any null constant or a vector with all elements equal to 0.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00537">PatternMatch.h:537</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_a8b70ede59539d5a0a6c0a879e48174d3"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#a8b70ede59539d5a0a6c0a879e48174d3">foldAndToXor</a></div><div class="ttdeci">static Instruction * foldAndToXor(BinaryOperator &amp;I, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l01816">InstCombineAndOrXor.cpp:1816</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_ac320b4b6e3a52b4ebf6bd8969a318683"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#ac320b4b6e3a52b4ebf6bd8969a318683">matchFunnelShift</a></div><div class="ttdeci">static Instruction * matchFunnelShift(Instruction &amp;Or, InstCombinerImpl &amp;IC)</div><div class="ttdoc">Match UB-safe variants of the funnel shift intrinsic.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l02636">InstCombineAndOrXor.cpp:2636</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html"><div class="ttname"><a href="classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">This is an important base class in LLVM.</div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="anamespacellvm_1_1SystemZII_html_aa317b5cb849b283c734d16de54db29b9af491d0ac44efff3d6022cfdaefeccec6"><div class="ttname"><a href="namespacellvm_1_1SystemZII.html#aa317b5cb849b283c734d16de54db29b9af491d0ac44efff3d6022cfdaefeccec6">llvm::SystemZII::IsLogical</a></div><div class="ttdeci">@ IsLogical</div><div class="ttdef"><b>Definition:</b> <a href="SystemZInstrInfo_8h_source.html#l00049">SystemZInstrInfo.h:49</a></div></div>
<div class="ttc" id="astructIntPart_html_a0abe536eb02b48a16035f06c3af14455"><div class="ttname"><a href="structIntPart.html#a0abe536eb02b48a16035f06c3af14455">IntPart::From</a></div><div class="ttdeci">Value * From</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l01037">InstCombineAndOrXor.cpp:1037</a></div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_aa10ee7493bddf2c751ca6e05451ef410"><div class="ttname"><a href="ADT_2tmp_8txt.html#aa10ee7493bddf2c751ca6e05451ef410">unsigned</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_ae9d0de0ffc23e4d5ca0a744d213e8439"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#ae9d0de0ffc23e4d5ca0a744d213e8439">foldLogOpOfMaskedICmpsAsymmetric</a></div><div class="ttdeci">static Value * foldLogOpOfMaskedICmpsAsymmetric(ICmpInst *LHS, ICmpInst *RHS, bool IsAnd, Value *A, Value *B, Value *C, Value *D, Value *E, ICmpInst::Predicate PredL, ICmpInst::Predicate PredR, unsigned LHSMask, unsigned RHSMask, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdoc">Try to fold (icmp(A &amp; B) ==/!= 0) &amp;/| (icmp(A &amp; D) ==/!= E) into a single (icmp(A &amp; X) ==/!...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00488">InstCombineAndOrXor.cpp:488</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a33c929139a72254b75f7ebb9593af9a9"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a33c929139a72254b75f7ebb9593af9a9">llvm::InstCombinerImpl::insertRangeTest</a></div><div class="ttdeci">Value * insertRangeTest(Value *V, const APInt &amp;Lo, const APInt &amp;Hi, bool isSigned, bool Inside)</div><div class="ttdoc">Emit a computation of: (V &gt;= Lo &amp;&amp; V &lt; Hi) if Inside is true, otherwise (V &lt; Lo || V &gt;= Hi).</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00090">InstCombineAndOrXor.cpp:90</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1Hwreg_html_a6110fc30bc7311a6cf99814530362e21"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6110fc30bc7311a6cf99814530362e21">llvm::AMDGPU::Hwreg::Offset</a></div><div class="ttdeci">Offset</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00432">SIDefines.h:432</a></div></div>
<div class="ttc" id="aclassllvm_1_1ICmpInst_html"><div class="ttname"><a href="classllvm_1_1ICmpInst.html">llvm::ICmpInst</a></div><div class="ttdoc">This instruction compares its operands according to the predicate given to the constructor.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01197">Instructions.h:1197</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_a174c8fd19771468c53842a7fde8ddce1"><div class="ttname"><a href="classllvm_1_1Constant.html#a174c8fd19771468c53842a7fde8ddce1">llvm::Constant::replaceUndefsWith</a></div><div class="ttdeci">static Constant * replaceUndefsWith(Constant *C, Constant *Replacement)</div><div class="ttdoc">Try to replace undefined constant C or undefined elements in C with Replacement.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00755">Constants.cpp:755</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_a41e8745b994de6cc84c9245722bc1a3b"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#a41e8745b994de6cc84c9245722bc1a3b">foldLogOpOfMaskedICmps_NotAllZeros_BMask_Mixed</a></div><div class="ttdeci">static Value * foldLogOpOfMaskedICmps_NotAllZeros_BMask_Mixed(ICmpInst *LHS, ICmpInst *RHS, bool IsAnd, Value *A, Value *B, Value *C, Value *D, Value *E, ICmpInst::Predicate PredL, ICmpInst::Predicate PredR, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdoc">Try to fold (icmp(A &amp; B) ==/!= C) &amp;/| (icmp(A &amp; D) ==/!= E) into a single (icmp(A &amp; X) ==/!...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00366">InstCombineAndOrXor.cpp:366</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a83725435ece9bc12c40ceb34dbd1727c"><div class="ttname"><a href="classllvm_1_1Type.html#a83725435ece9bc12c40ceb34dbd1727c">llvm::Type::getWithNewBitWidth</a></div><div class="ttdeci">Type * getWithNewBitWidth(unsigned NewBitWidth) const</div><div class="ttdoc">Given an integer or vector type, change the lane bitwidth to NewBitwidth, whilst keeping the old numb...</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00722">DerivedTypes.h:722</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a9bf617fd3367180fb96cebccfaae8dfa"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a></div><div class="ttdeci">static GCRegistry::Add&lt; StatepointGC &gt; D(&quot;statepoint-example&quot;, &quot;an example strategy for statepoint&quot;)</div></div>
<div class="ttc" id="aFloatingPointMode_8h_html_a75561e03bba6883c8023574327d92b67a68c7b3dbc94a6864f2cf566958954247"><div class="ttname"><a href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a68c7b3dbc94a6864f2cf566958954247">fcZero</a></div><div class="ttdeci">@ fcZero</div><div class="ttdef"><b>Definition:</b> <a href="FloatingPointMode_8h_source.html#l00215">FloatingPointMode.h:215</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a1a06b1cff93069d7403ea03e6150e386"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a1a06b1cff93069d7403ea03e6150e386">llvm::PatternMatch::m_LogicalOr</a></div><div class="ttdeci">LogicalOp_match&lt; LHS, RHS, Instruction::Or &gt; m_LogicalOr(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches L || R either in the form of L | R or L ? true : R.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02574">PatternMatch.h:2574</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a67a3e55827742843c6cd23e49805e233"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a67a3e55827742843c6cd23e49805e233">llvm::PatternMatch::m_Inf</a></div><div class="ttdeci">cstfp_pred_ty&lt; is_inf &gt; m_Inf()</div><div class="ttdoc">Match a positive or negative infinity FP constant.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00626">PatternMatch.h:626</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_aa9c705ecec80ebd584bb3d54b48f7ee1a10e63e798489e9c5ad2dc2c5ed98ac10"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a10e63e798489e9c5ad2dc2c5ed98ac10">BMask_NotMixed</a></div><div class="ttdeci">@ BMask_NotMixed</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00151">InstCombineAndOrXor.cpp:151</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a42569041ddafba7d40243e126af07f42"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">llvm::PatternMatch::m_Or</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Or &gt; m_Or(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01099">PatternMatch.h:1099</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aaea0d5ebb8b57ddde2095f80e2e94bb2"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">llvm::PatternMatch::m_AllOnes</a></div><div class="ttdeci">cst_pred_ty&lt; is_all_ones &gt; m_AllOnes()</div><div class="ttdoc">Match an integer or vector with all bits set.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00453">PatternMatch.h:453</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a72fb137716cff838d389e392b9729dc9"><div class="ttname"><a href="classllvm_1_1Value.html#a72fb137716cff838d389e392b9729dc9">llvm::Value::hasNUsesOrMore</a></div><div class="ttdeci">bool hasNUsesOrMore(unsigned N) const</div><div class="ttdoc">Return true if this value has N uses or more.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00152">Value.cpp:152</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aec0ccdbde0581b3aae7f001634a34d8e"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aec0ccdbde0581b3aae7f001634a34d8e">llvm::PatternMatch::m_ImmConstant</a></div><div class="ttdeci">match_combine_and&lt; class_match&lt; Constant &gt;, match_unless&lt; constantexpr_match &gt; &gt; m_ImmConstant()</div><div class="ttdoc">Match an arbitrary immediate Constant and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00751">PatternMatch.h:751</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_ae9cd0e6daeff5d17a0ef34311ed19540"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#ae9cd0e6daeff5d17a0ef34311ed19540">visitMaskedMerge</a></div><div class="ttdeci">static Instruction * visitMaskedMerge(BinaryOperator &amp;I, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdoc">If we have a masked merge, in the canonical form of: (assuming that A only has one use....</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l03804">InstCombineAndOrXor.cpp:3804</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a7638daf70e17d093dd35f06211dc7a87"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a7638daf70e17d093dd35f06211dc7a87">llvm::PatternMatch::m_FAbs</a></div><div class="ttdeci">m_Intrinsic_Ty&lt; Opnd0 &gt;::Ty m_FAbs(const Opnd0 &amp;Op0)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02171">PatternMatch.h:2171</a></div></div>
<div class="ttc" id="astructllvm_1_1SimplifyQuery_html_a4776fa0f5a726bd5a8a444981c283c69"><div class="ttname"><a href="structllvm_1_1SimplifyQuery.html#a4776fa0f5a726bd5a8a444981c283c69">llvm::SimplifyQuery::DT</a></div><div class="ttdeci">const DominatorTree * DT</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00096">InstructionSimplify.h:96</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_a09c36c07a47775cef8f8e93d8090d919"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#a09c36c07a47775cef8f8e93d8090d919">conjugateICmpMask</a></div><div class="ttdeci">static unsigned conjugateICmpMask(unsigned Mask)</div><div class="ttdoc">Convert an analysis of a masked ICmp into its equivalent if all boolean operations had the opposite s...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00206">InstCombineAndOrXor.cpp:206</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a427435d4da769ae680a8e77ef89520aa"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">llvm::PatternMatch::m_And</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::And &gt; m_And(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01093">PatternMatch.h:1093</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_ab3d31fa8d6fbe5eefe6b7edbd4d2add5"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#ab3d31fa8d6fbe5eefe6b7edbd4d2add5">sinkNotIntoXor</a></div><div class="ttdeci">static Instruction * sinkNotIntoXor(BinaryOperator &amp;I, Value *X, Value *Y, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l03843">InstCombineAndOrXor.cpp:3843</a></div></div>
<div class="ttc" id="astructllvm_1_1KnownBits_html_a825476b2436eb817b735fdd34ee521c4"><div class="ttname"><a href="structllvm_1_1KnownBits.html#a825476b2436eb817b735fdd34ee521c4">llvm::KnownBits::getMaxValue</a></div><div class="ttdeci">APInt getMaxValue() const</div><div class="ttdoc">Return the maximal unsigned value possible given these KnownBits.</div><div class="ttdef"><b>Definition:</b> <a href="KnownBits_8h_source.html#l00136">KnownBits.h:136</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa1f8f0633edd8b9a1c5ec15bb9fc5640"><div class="ttname"><a href="namespacellvm.html#aa1f8f0633edd8b9a1c5ec15bb9fc5640">llvm::computeKnownBits</a></div><div class="ttdeci">void computeKnownBits(const Value *V, KnownBits &amp;Known, const DataLayout &amp;DL, unsigned Depth=0, AssumptionCache *AC=nullptr, const Instruction *CxtI=nullptr, const DominatorTree *DT=nullptr, OptimizationRemarkEmitter *ORE=nullptr, bool UseInstrInfo=true)</div><div class="ttdoc">Determine which bits of V are known to be either zero or one and return them in the KnownZero/KnownOn...</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l00186">ValueTracking.cpp:186</a></div></div>
<div class="ttc" id="anamespacellvm_html_a071d237c0318d336cc84124ec3a8d037"><div class="ttname"><a href="namespacellvm.html#a071d237c0318d336cc84124ec3a8d037">llvm::getPredForFCmpCode</a></div><div class="ttdeci">Constant * getPredForFCmpCode(unsigned Code, Type *OpTy, CmpInst::Predicate &amp;Pred)</div><div class="ttdoc">This is the complement of getFCmpCode.</div><div class="ttdef"><b>Definition:</b> <a href="CmpInstAnalysis_8cpp_source.html#l00064">CmpInstAnalysis.cpp:64</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ac3ed5602889a22db44a16e1b97fac5b8"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ac3ed5602889a22db44a16e1b97fac5b8">llvm::PatternMatch::m_Sub</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Sub &gt; m_Sub(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00991">PatternMatch.h:991</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_aab47f48b5ac73fccc75d0e09395dded5"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#aab47f48b5ac73fccc75d0e09395dded5">matchIsFiniteTest</a></div><div class="ttdeci">static Value * matchIsFiniteTest(InstCombiner::BuilderTy &amp;Builder, FCmpInst *LHS, FCmpInst *RHS)</div><div class="ttdoc">and (fcmp ord x, 0), (fcmp u* x, inf) -&gt; fcmp o* x, inf</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l01258">InstCombineAndOrXor.cpp:1258</a></div></div>
<div class="ttc" id="anamespacestd_html_ab8424022895aee3e366fb9a32f2883cb"><div class="ttname"><a href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a></div><div class="ttdeci">void swap(llvm::BitVector &amp;LHS, llvm::BitVector &amp;RHS)</div><div class="ttdoc">Implement std::swap in terms of BitVector swap.</div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00853">BitVector.h:853</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_affac2d5de1541e56c48dd8df0c7d11ab"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#affac2d5de1541e56c48dd8df0c7d11ab">reassociateForUses</a></div><div class="ttdeci">static Instruction * reassociateForUses(BinaryOperator &amp;BO, InstCombinerImpl::BuilderTy &amp;Builder)</div><div class="ttdoc">Try to reassociate a pair of binops so that values with one use only are part of the same instruction...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l02069">InstCombineAndOrXor.cpp:2069</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_aa4100f52d21246ec944e97fe1b64b124"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#aa4100f52d21246ec944e97fe1b64b124">llvm::InstCombinerImpl::simplifyRangeCheck</a></div><div class="ttdeci">Value * simplifyRangeCheck(ICmpInst *Cmp0, ICmpInst *Cmp1, bool Inverted)</div><div class="ttdoc">Try to fold a signed range checked with lower bound 0 to an unsigned icmp.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00691">InstCombineAndOrXor.cpp:691</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba541533f34077bbbcfb703a90f6d2da9b"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba541533f34077bbbcfb703a90f6d2da9b">llvm::CmpInst::FCMP_OGE</a></div><div class="ttdeci">@ FCMP_OGE</div><div class="ttdoc">0 0 1 1 True if ordered and greater than or equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00723">InstrTypes.h:723</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">llvm::CmpInst::ICMP_UGE</a></div><div class="ttdeci">@ ICMP_UGE</div><div class="ttdoc">unsigned greater or equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00742">InstrTypes.h:742</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a300db8bf3acf4b1cff9a56ae53a8727c"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a300db8bf3acf4b1cff9a56ae53a8727c">llvm::PatternMatch::m_ConstantExpr</a></div><div class="ttdeci">constantexpr_match m_ConstantExpr()</div><div class="ttdoc">Match a constant expression or a constant that contains a constant expression.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00165">PatternMatch.h:165</a></div></div>
<div class="ttc" id="astructllvm_1_1SimplifyQuery_html_aaf05c1194f5c7869a00434c13c46c228"><div class="ttname"><a href="structllvm_1_1SimplifyQuery.html#aaf05c1194f5c7869a00434c13c46c228">llvm::SimplifyQuery::getWithInstruction</a></div><div class="ttdeci">SimplifyQuery getWithInstruction(Instruction *I) const</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00120">InstructionSimplify.h:120</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aa82e8cd74318874b5a685021e96a412f"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aa82e8cd74318874b5a685021e96a412f">llvm::PatternMatch::m_Negative</a></div><div class="ttdeci">cst_pred_ty&lt; is_negative &gt; m_Negative()</div><div class="ttdoc">Match an integer or vector of negative values.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00475">PatternMatch.h:475</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aadd209ba7e1bfa8113a609e09a7fe62f"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">llvm::PatternMatch::m_Constant</a></div><div class="ttdeci">class_match&lt; Constant &gt; m_Constant()</div><div class="ttdoc">Match an arbitrary Constant and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00144">PatternMatch.h:144</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8f751e3ed5adc61048480e9fd0e257cc"><div class="ttname"><a href="namespacellvm.html#a8f751e3ed5adc61048480e9fd0e257cc">llvm::simplifyAndInst</a></div><div class="ttdeci">Value * simplifyAndInst(Value *LHS, Value *RHS, const SimplifyQuery &amp;Q)</div><div class="ttdoc">Given operands for an And, fold the result or return null.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l02266">InstructionSimplify.cpp:2266</a></div></div>
<div class="ttc" id="astructIntPart_html_a13e1a33fe6b6bfe43b975865c3f82300"><div class="ttname"><a href="structIntPart.html#a13e1a33fe6b6bfe43b975865c3f82300">IntPart::StartBit</a></div><div class="ttdeci">unsigned StartBit</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l01038">InstCombineAndOrXor.cpp:1038</a></div></div>
<div class="ttc" id="aAssumeBundleBuilder_8cpp_html_afb136e0532bcaed86521b462e6538d62"><div class="ttname"><a href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a></div><div class="ttdeci">assume Assume Builder</div><div class="ttdef"><b>Definition:</b> <a href="AssumeBundleBuilder_8cpp_source.html#l00651">AssumeBundleBuilder.cpp:651</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a24bca8838396aa81b87de8e7ac774b19"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">llvm::PatternMatch::m_Value</a></div><div class="ttdeci">class_match&lt; Value &gt; m_Value()</div><div class="ttdoc">Match an arbitrary value and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00076">PatternMatch.h:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1ZExtInst_html"><div class="ttname"><a href="classllvm_1_1ZExtInst.html">llvm::ZExtInst</a></div><div class="ttdoc">This class represents zero extension of integer types.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l04852">Instructions.h:4852</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html"><div class="ttname"><a href="classllvm_1_1APInt.html">llvm::APInt</a></div><div class="ttdoc">Class for arbitrary precision integers.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00075">APInt.h:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a1e893463cbb4b5e2e3830b2e4c28cbdb"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a1e893463cbb4b5e2e3830b2e4c28cbdb">llvm::InstCombinerImpl::visitOr</a></div><div class="ttdeci">Instruction * visitOr(BinaryOperator &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l03147">InstCombineAndOrXor.cpp:3147</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">llvm::CmpInst::ICMP_SLT</a></div><div class="ttdeci">@ ICMP_SLT</div><div class="ttdoc">signed less than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00747">InstrTypes.h:747</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_a8855aa9db25fdae341f388f891bec03a"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#a8855aa9db25fdae341f388f891bec03a">canonicalizeLogicFirst</a></div><div class="ttdeci">static Instruction * canonicalizeLogicFirst(BinaryOperator &amp;I, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l02102">InstCombineAndOrXor.cpp:2102</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aaab494a433fbb23bc68393ee8bcfc5ac"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">llvm::PatternMatch::m_SExt</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::SExt &gt; m_SExt(const OpTy &amp;Op)</div><div class="ttdoc">Matches SExt.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01623">PatternMatch.h:1623</a></div></div>
<div class="ttc" id="anamespacellvm_1_1NVPTXISD_html_ab995b6d422b079c863075e073b2eb96ba7cff9cc4a40fe2b19129ee8e9b0ec645"><div class="ttname"><a href="namespacellvm_1_1NVPTXISD.html#ab995b6d422b079c863075e073b2eb96ba7cff9cc4a40fe2b19129ee8e9b0ec645">llvm::NVPTXISD::Dummy</a></div><div class="ttdeci">@ Dummy</div><div class="ttdef"><b>Definition:</b> <a href="NVPTXISelLowering_8h_source.html#l00060">NVPTXISelLowering.h:60</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a3acbd0be97863e3e03e3b85641254018"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">llvm::PatternMatch::m_SpecificInt</a></div><div class="ttdeci">specific_intval&lt; false &gt; m_SpecificInt(APInt V)</div><div class="ttdoc">Match a specific integer value or vector with all elements equal to the value.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00854">PatternMatch.h:854</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a575c2299c6f145ba3a12efa20829db43"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a575c2299c6f145ba3a12efa20829db43">llvm::PatternMatch::m_CombineAnd</a></div><div class="ttdeci">match_combine_and&lt; LTy, RTy &gt; m_CombineAnd(const LTy &amp;L, const RTy &amp;R)</div><div class="ttdoc">Combine two pattern matchers matching L &amp;&amp; R.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00224">PatternMatch.h:224</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html">llvm::BinaryOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00187">InstrTypes.h:187</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a3ab1823ec9dd8bdc5803e568bf72b0b3"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a3ab1823ec9dd8bdc5803e568bf72b0b3">llvm::PatternMatch::m_LogicalOp</a></div><div class="ttdeci">auto m_LogicalOp(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches either L &amp;&amp; R or L || R, either one being in the either binary or logical form.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02593">PatternMatch.h:2593</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_ae0f503db91504a3f3440ab81260e4134"><div class="ttname"><a href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a></div><div class="ttdeci">BinaryOperator * Mul</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00070">X86PartialReduction.cpp:70</a></div></div>
<div class="ttc" id="aclassllvm_1_1APFloat_html_af8943302f831d2fc16d84eaf1f2740ed"><div class="ttname"><a href="classllvm_1_1APFloat.html#af8943302f831d2fc16d84eaf1f2740ed">llvm::APFloat::isSmallestNormalized</a></div><div class="ttdeci">bool isSmallestNormalized() const</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l01279">APFloat.h:1279</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_abb22519fa3bf66d9e0bc6d1a733a5821"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#abb22519fa3bf66d9e0bc6d1a733a5821">llvm::PatternMatch::m_SpecificInt_ICMP</a></div><div class="ttdeci">cst_pred_ty&lt; icmp_pred_with_threshold &gt; m_SpecificInt_ICMP(ICmpInst::Predicate Predicate, const APInt &amp;Threshold)</div><div class="ttdoc">Match an integer or vector with every element comparing 'pred' (eg/ne/...) to Threshold.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00598">PatternMatch.h:598</a></div></div>
<div class="ttc" id="aclassllvm_1_1details_1_1FixedOrScalableQuantity_html_ac4ab9dd9440c55bee1aa4a1195cee759"><div class="ttname"><a href="classllvm_1_1details_1_1FixedOrScalableQuantity.html#ac4ab9dd9440c55bee1aa4a1195cee759">llvm::details::FixedOrScalableQuantity::getKnownMinValue</a></div><div class="ttdeci">constexpr ScalarTy getKnownMinValue() const</div><div class="ttdoc">Returns the minimum value this quantity can represent.</div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00163">TypeSize.h:163</a></div></div>
<div class="ttc" id="aBasicBlockSections_8cpp_html_a5fd0741d696f28faf65b33f6c6af8fda"><div class="ttname"><a href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a></div><div class="ttdeci">SmallVector&lt; MachineOperand, 4 &gt; Cond</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockSections_8cpp_source.html#l00137">BasicBlockSections.cpp:137</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">llvm::CmpInst::ICMP_ULT</a></div><div class="ttdeci">@ ICMP_ULT</div><div class="ttdoc">unsigned less than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00743">InstrTypes.h:743</a></div></div>
<div class="ttc" id="aSupport_2ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdoc">Marks that the current location is not supposed to be reachable.</div><div class="ttdef"><b>Definition:</b> <a href="Support_2ErrorHandling_8h_source.html#l00143">ErrorHandling.h:143</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_acd530d0571f320d47d37e7ae51cf70ff"><div class="ttname"><a href="classllvm_1_1Constant.html#acd530d0571f320d47d37e7ae51cf70ff">llvm::Constant::getAggregateElement</a></div><div class="ttdeci">Constant * getAggregateElement(unsigned Elt) const</div><div class="ttdoc">For aggregates (struct/array/vector) return the constant that corresponds to the specified element if...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00418">Constants.cpp:418</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a6393a2d4fe7e10b28a0dcc35f881567b"><div class="ttname"><a href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const</div><div class="ttdoc">All values are typed, get the type of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00255">Value.h:255</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a882d55a6aa2028e1a5ad708b275334e0"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a882d55a6aa2028e1a5ad708b275334e0">llvm::ConstantInt::isZero</a></div><div class="ttdeci">bool isZero() const</div><div class="ttdoc">This is just a convenience method to make client code smaller for a common code.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00193">Constants.h:193</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_1_1InsertPointGuard_html"><div class="ttname"><a href="classllvm_1_1IRBuilderBase_1_1InsertPointGuard.html">llvm::IRBuilderBase::InsertPointGuard</a></div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00361">IRBuilder.h:361</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html">llvm::IRBuilderBase</a></div><div class="ttdoc">Common base class shared among various IRBuilders.</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00094">IRBuilder.h:94</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_ad467c4ab9119043f9b7750ab986be61a"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a></div><div class="ttdeci">MachineBasicBlock MachineBasicBlock::iterator DebugLoc DL</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00076">AArch64SLSHardening.cpp:76</a></div></div>
<div class="ttc" id="aConstantRange_8h_html"><div class="ttname"><a href="ConstantRange_8h.html">ConstantRange.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a13cc1f5d3225f4ec063520a747acec4c"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a13cc1f5d3225f4ec063520a747acec4c">llvm::ConstantInt::isMinusOne</a></div><div class="ttdeci">bool isMinusOne() const</div><div class="ttdoc">This function will return true iff every bit in this constant is set to true.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00205">Constants.h:205</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6c402f49fa595af618c5ad1500565d92"><div class="ttname"><a href="namespacellvm.html#a6c402f49fa595af618c5ad1500565d92">llvm::recognizeBSwapOrBitReverseIdiom</a></div><div class="ttdeci">bool recognizeBSwapOrBitReverseIdiom(Instruction *I, bool MatchBSwaps, bool MatchBitReversals, SmallVectorImpl&lt; Instruction * &gt; &amp;InsertedInsts)</div><div class="ttdoc">Try to match a bswap or bitreverse idiom.</div><div class="ttdef"><b>Definition:</b> <a href="Transforms_2Utils_2Local_8cpp_source.html#l03299">Local.cpp:3299</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_a3bb4f8a59bc79743a01bfc530cb50689"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#a3bb4f8a59bc79743a01bfc530cb50689">canonicalizeAbs</a></div><div class="ttdeci">static Instruction * canonicalizeAbs(BinaryOperator &amp;Xor, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdoc">Canonicalize a shifty way to code absolute value to the more common pattern that uses negation and se...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l03894">InstCombineAndOrXor.cpp:3894</a></div></div>
<div class="ttc" id="aRISCVRedundantCopyElimination_8cpp_html_a77c69067ae8279bc00ab8757731e90d7"><div class="ttname"><a href="RISCVRedundantCopyElimination_8cpp.html#a77c69067ae8279bc00ab8757731e90d7">CC</a></div><div class="ttdeci">auto CC</div><div class="ttdef"><b>Definition:</b> <a href="RISCVRedundantCopyElimination_8cpp_source.html#l00079">RISCVRedundantCopyElimination.cpp:79</a></div></div>
<div class="ttc" id="aclassllvm_1_1CastInst_html"><div class="ttname"><a href="classllvm_1_1CastInst.html">llvm::CastInst</a></div><div class="ttdoc">This is the base class for all instructions that perform data casts.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00428">InstrTypes.h:428</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a545e8d5dfa1688acea0d0e275b03682f"><div class="ttname"><a href="classllvm_1_1APInt.html#a545e8d5dfa1688acea0d0e275b03682f">llvm::APInt::ult</a></div><div class="ttdeci">bool ult(const APInt &amp;RHS) const</div><div class="ttdoc">Unsigned less than comparison.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01089">APInt.h:1089</a></div></div>
<div class="ttc" id="aclassllvm_1_1SExtInst_html"><div class="ttname"><a href="classllvm_1_1SExtInst.html">llvm::SExtInst</a></div><div class="ttdoc">This class represents a sign extension of integer types.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l04891">Instructions.h:4891</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_adb5c319f5905c1d3ca9eb5df546388c5"><div class="ttname"><a href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">Return a constant reference to the value's name.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00308">Value.cpp:308</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_abc10b887caad109288ffceb230493a85"><div class="ttname"><a href="classllvm_1_1CallBase.html#abc10b887caad109288ffceb230493a85">llvm::CallBase::setArgOperand</a></div><div class="ttdeci">void setArgOperand(unsigned i, Value *v)</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01356">InstrTypes.h:1356</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_aa68f985008cf9a9a6dcdac5e59b84baa"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#aa68f985008cf9a9a6dcdac5e59b84baa">foldOrToXor</a></div><div class="ttdeci">static Instruction * foldOrToXor(BinaryOperator &amp;I, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l01842">InstCombineAndOrXor.cpp:1842</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Intrinsic_html_aefa39f6b622360ce4e947feb9f671b73"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#aefa39f6b622360ce4e947feb9f671b73">llvm::Intrinsic::getDeclaration</a></div><div class="ttdeci">Function * getDeclaration(Module *M, ID id, ArrayRef&lt; Type * &gt; Tys=std::nullopt)</div><div class="ttdoc">Create or insert an LLVM Function declaration for an intrinsic, and return it.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l01502">Function.cpp:1502</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad877baf4953321b0cf8a72fb4fc4f14a"><div class="ttname"><a href="namespacellvm.html#ad877baf4953321b0cf8a72fb4fc4f14a">llvm::getICmpCode</a></div><div class="ttdeci">unsigned getICmpCode(CmpInst::Predicate Pred)</div><div class="ttdoc">Encode a icmp predicate into a three bit mask.</div><div class="ttdef"><b>Definition:</b> <a href="CmpInstAnalysis_8cpp_source.html#l00021">CmpInstAnalysis.cpp:21</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_aa7cce62ac5cc6df09cce0535874336b7"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">llvm::ConstantInt::getFalse</a></div><div class="ttdeci">static ConstantInt * getFalse(LLVMContext &amp;Context)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00842">Constants.cpp:842</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_ac09a21c371a9c535cbc13e8f82503aec"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#ac09a21c371a9c535cbc13e8f82503aec">llvm::ConstantInt::getZExtValue</a></div><div class="ttdeci">uint64_t getZExtValue() const</div><div class="ttdoc">Return the constant as a 64-bit unsigned integer value after it has been zero extended as appropriate...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00141">Constants.h:141</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_a5c7e4979ac460c21af594ebda068ee77"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#a5c7e4979ac460c21af594ebda068ee77">getNewICmpValue</a></div><div class="ttdeci">static Value * getNewICmpValue(unsigned Code, bool Sign, Value *LHS, Value *RHS, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdoc">This is the complement of getICmpCode, which turns an opcode and two operands into either a constant ...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00031">InstCombineAndOrXor.cpp:31</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_aa9c705ecec80ebd584bb3d54b48f7ee1a54ee032f1a4a27e3066fbb88346cd49a"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a54ee032f1a4a27e3066fbb88346cd49a">AMask_NotAllOnes</a></div><div class="ttdeci">@ AMask_NotAllOnes</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00143">InstCombineAndOrXor.cpp:143</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a1dc76cc8bf703e6ada68bededcbb9573"><div class="ttname"><a href="classllvm_1_1APInt.html#a1dc76cc8bf703e6ada68bededcbb9573">llvm::APInt::zext</a></div><div class="ttdeci">APInt zext(unsigned width) const</div><div class="ttdoc">Zero extend to a new width.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l00973">APInt.cpp:973</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_aa9c705ecec80ebd584bb3d54b48f7ee1a2b00a345b6b0214f7aa5cbe8203aeb3e"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a2b00a345b6b0214f7aa5cbe8203aeb3e">BMask_NotAllOnes</a></div><div class="ttdeci">@ BMask_NotAllOnes</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00145">InstCombineAndOrXor.cpp:145</a></div></div>
<div class="ttc" id="anamespacellvm_1_1NVPTX_1_1PTXLdStInstCode_html_a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4"><div class="ttname"><a href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a91119cbee2be000c528a690252aee07ca24244a27b634ef3e256ab3c64c6fecd4">llvm::NVPTX::PTXLdStInstCode::V2</a></div><div class="ttdeci">@ V2</div><div class="ttdef"><b>Definition:</b> <a href="NVPTX_8h_source.html#l00124">NVPTX.h:124</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_aa074b9f5a1efaa0fd8aa4522593f299a"><div class="ttname"><a href="classllvm_1_1APInt.html#aa074b9f5a1efaa0fd8aa4522593f299a">llvm::APInt::countLeadingZeros</a></div><div class="ttdeci">unsigned countLeadingZeros() const</div><div class="ttdoc">The APInt version of the countLeadingZeros functions in MathExtras.h.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01552">APInt.h:1552</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantRange_html_a4c57cff33f93411b9c32991f3c5336ad"><div class="ttname"><a href="classllvm_1_1ConstantRange.html#a4c57cff33f93411b9c32991f3c5336ad">llvm::ConstantRange::getLower</a></div><div class="ttdeci">const APInt &amp; getLower() const</div><div class="ttdoc">Return the lower value for this range.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantRange_8h_source.html#l00198">ConstantRange.h:198</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a0702b4620c670aea616d41c7871dcec6"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a0702b4620c670aea616d41c7871dcec6">llvm::PatternMatch::m_SExtOrSelf</a></div><div class="ttdeci">match_combine_or&lt; CastClass_match&lt; OpTy, Instruction::SExt &gt;, OpTy &gt; m_SExtOrSelf(const OpTy &amp;Op)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01641">PatternMatch.h:1641</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a82dbbd8e3688b0bc1eedb338864d0d0c"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">llvm::ConstantInt::getTrue</a></div><div class="ttdeci">static ConstantInt * getTrue(LLVMContext &amp;Context)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00835">Constants.cpp:835</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombiner_html_a19c4df37b96c2a73991556b696924584"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a19c4df37b96c2a73991556b696924584">llvm::InstCombiner::BuilderTy</a></div><div class="ttdeci">IRBuilder&lt; TargetFolder, IRBuilderCallbackInserter &gt; BuilderTy</div><div class="ttdoc">An IRBuilder that automatically inserts new instructions into the worklist.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombiner_8h_source.html#l00057">InstCombiner.h:57</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_aa6574d526b3e38a28f688a7bb4325c2c"><div class="ttname"><a href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">llvm::Constant::getNullValue</a></div><div class="ttdeci">static Constant * getNullValue(Type *Ty)</div><div class="ttdoc">Constructor to create a '0' constant of arbitrary type.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00356">Constants.cpp:356</a></div></div>
<div class="ttc" id="astructllvm_1_1KnownBits_html"><div class="ttname"><a href="structllvm_1_1KnownBits.html">llvm::KnownBits</a></div><div class="ttdef"><b>Definition:</b> <a href="KnownBits_8h_source.html#l00023">KnownBits.h:23</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad4d2f143e181b60a4f70d791bbcba8b3"><div class="ttname"><a href="namespacellvm.html#ad4d2f143e181b60a4f70d791bbcba8b3">llvm::decomposeBitTestICmp</a></div><div class="ttdeci">bool decomposeBitTestICmp(Value *LHS, Value *RHS, CmpInst::Predicate &amp;Pred, Value *&amp;X, APInt &amp;Mask, bool LookThroughTrunc=true)</div><div class="ttdoc">Decompose an icmp into the form ((X &amp; Mask) pred 0) if possible.</div><div class="ttdef"><b>Definition:</b> <a href="CmpInstAnalysis_8cpp_source.html#l00076">CmpInstAnalysis.cpp:76</a></div></div>
<div class="ttc" id="astructllvm_1_1SimplifyQuery_html_a30647c42c8c40890c577ba5b4ab16468"><div class="ttname"><a href="structllvm_1_1SimplifyQuery.html#a30647c42c8c40890c577ba5b4ab16468">llvm::SimplifyQuery::CxtI</a></div><div class="ttdeci">const Instruction * CxtI</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00098">InstructionSimplify.h:98</a></div></div>
<div class="ttc" id="aclassllvm_1_1CastInst_html_a31d2885660f654b31d8741726c3ea8d9"><div class="ttname"><a href="classllvm_1_1CastInst.html#a31d2885660f654b31d8741726c3ea8d9">llvm::CastInst::CreateBitOrPointerCast</a></div><div class="ttdeci">static CastInst * CreateBitOrPointerCast(Value *S, Type *Ty, const Twine &amp;Name=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Create a BitCast, a PtrToInt, or an IntToPTr cast instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l03509">Instructions.cpp:3509</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1SendMsg_html_a8594419a4ddfad2c9a79279c490e466d"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">llvm::AMDGPU::SendMsg::Op</a></div><div class="ttdeci">Op</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00357">SIDefines.h:357</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_a9977c80be67ea7e51bb37ee242d1cc4c"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#a9977c80be67ea7e51bb37ee242d1cc4c">matchUnorderedInfCompare</a></div><div class="ttdeci">static bool matchUnorderedInfCompare(FCmpInst::Predicate P, Value *LHS, Value *RHS)</div><div class="ttdoc">Matches fcmp u__ x, +/-inf.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l01250">InstCombineAndOrXor.cpp:1250</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_ae6f1c15034bc5515033874630a8ecce6"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#ae6f1c15034bc5515033874630a8ecce6">llvm::ConstantExpr::getAdd</a></div><div class="ttdeci">static Constant * getAdd(Constant *C1, Constant *C2, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02657">Constants.cpp:2657</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a34ee40bb2f4f5ece47ef19e5f1f57e3c"><div class="ttname"><a href="classllvm_1_1Type.html#a34ee40bb2f4f5ece47ef19e5f1f57e3c">llvm::Type::isIntOrIntVectorTy</a></div><div class="ttdeci">bool isIntOrIntVectorTy() const</div><div class="ttdoc">Return true if this is an integer type or a vector of integer types.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00228">Type.h:228</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_af206a3d6f58d9e53b074460f0d1ecb86"><div class="ttname"><a href="classllvm_1_1CmpInst.html#af206a3d6f58d9e53b074460f0d1ecb86">llvm::CmpInst::isUnsigned</a></div><div class="ttdeci">bool isUnsigned() const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00963">InstrTypes.h:963</a></div></div>
<div class="ttc" id="aFloatingPointMode_8h_html_a75561e03bba6883c8023574327d92b67a1d0a7c99f3541df874ad98ba481b27d6"><div class="ttname"><a href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a1d0a7c99f3541df874ad98ba481b27d6">fcSubnormal</a></div><div class="ttdeci">@ fcSubnormal</div><div class="ttdef"><b>Definition:</b> <a href="FloatingPointMode_8h_source.html#l00214">FloatingPointMode.h:214</a></div></div>
<div class="ttc" id="anamespacellvm_html_aff210c52130b5778e2ef75dd74778afb"><div class="ttname"><a href="namespacellvm.html#aff210c52130b5778e2ef75dd74778afb">llvm::getPredForICmpCode</a></div><div class="ttdeci">Constant * getPredForICmpCode(unsigned Code, bool Sign, Type *OpTy, CmpInst::Predicate &amp;Pred)</div><div class="ttdoc">This is the complement of getICmpCode.</div><div class="ttdef"><b>Definition:</b> <a href="CmpInstAnalysis_8cpp_source.html#l00040">CmpInstAnalysis.cpp:40</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a8c0f3bd24cad8bf9994d62b2d8cff6a0"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a8c0f3bd24cad8bf9994d62b2d8cff6a0">llvm::PatternMatch::m_SignMask</a></div><div class="ttdeci">cst_pred_ty&lt; is_sign_mask &gt; m_SignMask()</div><div class="ttdoc">Match an integer or vector with only the sign bit(s) set.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00576">PatternMatch.h:576</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a7c779ce2ba55bc94f52014fc25f3d520"><div class="ttname"><a href="classllvm_1_1Value.html#a7c779ce2ba55bc94f52014fc25f3d520">llvm::Value::hasNUses</a></div><div class="ttdeci">bool hasNUses(unsigned N) const</div><div class="ttdoc">Return true if this Value has exactly N uses.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00148">Value.cpp:148</a></div></div>
<div class="ttc" id="anamespacellvm_html_abee0df5f7f703bb4462aba260ba0a60f"><div class="ttname"><a href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">llvm::BitWidth</a></div><div class="ttdeci">constexpr unsigned BitWidth</div><div class="ttdef"><b>Definition:</b> <a href="BitmaskEnum_8h_source.html#l00147">BitmaskEnum.h:147</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a39d717dc10783ec7bd5a24111bd5b8a5"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a39d717dc10783ec7bd5a24111bd5b8a5">llvm::PatternMatch::m_BSwap</a></div><div class="ttdeci">m_Intrinsic_Ty&lt; Opnd0 &gt;::Ty m_BSwap(const Opnd0 &amp;Op0)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02166">PatternMatch.h:2166</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_a151e95d3f063067aa27c74930296a25e"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#a151e95d3f063067aa27c74930296a25e">matchIsFPClassLikeFCmp</a></div><div class="ttdeci">static bool matchIsFPClassLikeFCmp(Value *Op, Value *&amp;ClassVal, uint64_t &amp;ClassMask)</div><div class="ttdoc">Match an fcmp against a special value that performs a test possible by llvm.is.fpclass.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l01503">InstCombineAndOrXor.cpp:1503</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a6f1d5427c61a0f0159f6e85f41944c5c"><div class="ttname"><a href="classllvm_1_1APInt.html#a6f1d5427c61a0f0159f6e85f41944c5c">llvm::APInt::exactLogBase2</a></div><div class="ttdeci">int32_t exactLogBase2() const</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01722">APInt.h:1722</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARCCC_html_a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4"><div class="ttname"><a href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">llvm::ARCCC::Z</a></div><div class="ttdeci">@ Z</div><div class="ttdef"><b>Definition:</b> <a href="ARCInfo_8h_source.html#l00041">ARCInfo.h:41</a></div></div>
<div class="ttc" id="anamespacellvm_html_af14335020a68db7b9f722810e4a05180a421c6b20238e6e6585270538188f15b9"><div class="ttname"><a href="namespacellvm.html#af14335020a68db7b9f722810e4a05180a421c6b20238e6e6585270538188f15b9">llvm::fltNanEncoding::AllOnes</a></div><div class="ttdeci">@ AllOnes</div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a874d53817a4923de8e58af6b278c09b0"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a874d53817a4923de8e58af6b278c09b0">llvm::PatternMatch::m_ZeroInt</a></div><div class="ttdeci">cst_pred_ty&lt; is_zero_int &gt; m_ZeroInt()</div><div class="ttdoc">Match an integer 0 or a vector with all elements equal to 0.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00524">PatternMatch.h:524</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0434306df3aa5ec48fcf19d0958d7c01"><div class="ttname"><a href="namespacellvm.html#a0434306df3aa5ec48fcf19d0958d7c01">llvm::getInverseMinMaxIntrinsic</a></div><div class="ttdeci">Intrinsic::ID getInverseMinMaxIntrinsic(Intrinsic::ID MinMaxID)</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l06614">ValueTracking.cpp:6614</a></div></div>
<div class="ttc" id="aFloatingPointMode_8h_html_a75561e03bba6883c8023574327d92b67a65e723f5216f7e4c19d5c7c81e290053"><div class="ttname"><a href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a65e723f5216f7e4c19d5c7c81e290053">fcFinite</a></div><div class="ttdeci">@ fcFinite</div><div class="ttdef"><b>Definition:</b> <a href="FloatingPointMode_8h_source.html#l00218">FloatingPointMode.h:218</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78bac1aa7b798ba11d2e497d5cce6ce6d3dc"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac1aa7b798ba11d2e497d5cce6ce6d3dc">llvm::CmpInst::ICMP_SGE</a></div><div class="ttdeci">@ ICMP_SGE</div><div class="ttdoc">signed greater or equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00746">InstrTypes.h:746</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MCID_html_ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec"><div class="ttname"><a href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">llvm::MCID::Add</a></div><div class="ttdeci">@ Add</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00186">MCInstrDesc.h:186</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1Hwreg_html_a6467ebe1e09a75203dd5f14bdfe21d11"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">llvm::AMDGPU::Hwreg::Width</a></div><div class="ttdeci">Width</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00449">SIDefines.h:449</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantRange_html"><div class="ttname"><a href="classllvm_1_1ConstantRange.html">llvm::ConstantRange</a></div><div class="ttdoc">This class represents a range of values.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantRange_8h_source.html#l00047">ConstantRange.h:47</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a5cd1934b6c8ddec3a2d161ce710d59bc"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a5cd1934b6c8ddec3a2d161ce710d59bc">llvm::PatternMatch::m_c_Xor</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Xor, true &gt; m_c_Xor(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches an Xor with LHS and RHS in either order.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02276">PatternMatch.h:2276</a></div></div>
<div class="ttc" id="aclassllvm_1_1IntrinsicInst_html"><div class="ttname"><a href="classllvm_1_1IntrinsicInst.html">llvm::IntrinsicInst</a></div><div class="ttdoc">A wrapper class for inspecting calls to intrinsic functions.</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00047">IntrinsicInst.h:47</a></div></div>
<div class="ttc" id="aFloatingPointMode_8h_html_a75561e03bba6883c8023574327d92b67a60c3b254a3f56b2bf31bc568492c4a74"><div class="ttname"><a href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a60c3b254a3f56b2bf31bc568492c4a74">fcNegNormal</a></div><div class="ttdeci">@ fcNegNormal</div><div class="ttdef"><b>Definition:</b> <a href="FloatingPointMode_8h_source.html#l00203">FloatingPointMode.h:203</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a595e5029858e33416e500bed9317d309"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a595e5029858e33416e500bed9317d309">llvm::PatternMatch::m_LogicalShift</a></div><div class="ttdeci">BinOpPred_match&lt; LHS, RHS, is_logical_shift_op &gt; m_LogicalShift(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches logical shift operations.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01311">PatternMatch.h:1311</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ab9370b798ae530641518075b0832723a"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ab9370b798ae530641518075b0832723a">llvm::PatternMatch::m_AnyZeroFP</a></div><div class="ttdeci">cstfp_pred_ty&lt; is_any_zero_fp &gt; m_AnyZeroFP()</div><div class="ttdoc">Match a floating-point negative zero or positive zero.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00664">PatternMatch.h:664</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_a31dbd9cf336966a863e37c5653b6c134"><div class="ttname"><a href="classllvm_1_1Constant.html#a31dbd9cf336966a863e37c5653b6c134">llvm::Constant::mergeUndefsWith</a></div><div class="ttdeci">static Constant * mergeUndefsWith(Constant *C, Constant *Other)</div><div class="ttdoc">Merges undefs of a Constant with another Constant, along with the undefs already present.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00779">Constants.cpp:779</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a2ff0f084844b189a858647d637d47eba"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a2ff0f084844b189a858647d637d47eba">llvm::PatternMatch::m_Not</a></div><div class="ttdeci">BinaryOp_match&lt; cst_pred_ty&lt; is_all_ones &gt;, ValTy, Instruction::Xor, true &gt; m_Not(const ValTy &amp;V)</div><div class="ttdoc">Matches a 'Not' as 'xor V, -1' or 'xor -1, V'.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02302">PatternMatch.h:2302</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ac26154a24f393f523c87cc5f8239f36c"><div class="ttname"><a href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">llvm::Instruction::BinaryOps</a></div><div class="ttdeci">BinaryOps</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00809">Instruction.h:809</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_ab1eb2ac0947ffc98daa262f6391a805d"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#ab1eb2ac0947ffc98daa262f6391a805d">foldNotXor</a></div><div class="ttdeci">static Instruction * foldNotXor(BinaryOperator &amp;I, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l03857">InstCombineAndOrXor.cpp:3857</a></div></div>
<div class="ttc" id="aExpandLargeDivRem_8cpp_html_a49b2092a066cfbc24bc6925bdea9682a"><div class="ttname"><a href="ExpandLargeDivRem_8cpp.html#a49b2092a066cfbc24bc6925bdea9682a">isSigned</a></div><div class="ttdeci">static bool isSigned(unsigned int Opcode)</div><div class="ttdef"><b>Definition:</b> <a href="ExpandLargeDivRem_8cpp_source.html#l00052">ExpandLargeDivRem.cpp:52</a></div></div>
<div class="ttc" id="aFloatingPointMode_8h_html_a75561e03bba6883c8023574327d92b67a716ec8744e413e6a82f58f1095b40b99"><div class="ttname"><a href="FloatingPointMode_8h.html#a75561e03bba6883c8023574327d92b67a716ec8744e413e6a82f58f1095b40b99">fcNegInf</a></div><div class="ttdeci">@ fcNegInf</div><div class="ttdef"><b>Definition:</b> <a href="FloatingPointMode_8h_source.html#l00202">FloatingPointMode.h:202</a></div></div>
<div class="ttc" id="aELFYAML_8cpp_html_a941c34da9850676ce3380813c636cff2"><div class="ttname"><a href="ELFYAML_8cpp.html#a941c34da9850676ce3380813c636cff2">Other</a></div><div class="ttdeci">std::optional&lt; std::vector&lt; StOtherPiece &gt; &gt; Other</div><div class="ttdef"><b>Definition:</b> <a href="ELFYAML_8cpp_source.html#l01260">ELFYAML.cpp:1260</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a2d9861feadd3a09792967a012559e7b2"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">llvm::PatternMatch::m_Specific</a></div><div class="ttdeci">specificval_ty m_Specific(const Value *V)</div><div class="ttdoc">Match if we have a specific specified value.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00772">PatternMatch.h:772</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a3fe9b3ddb71b9fb53d9fc74b3a0710bf"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a3fe9b3ddb71b9fb53d9fc74b3a0710bf">llvm::PatternMatch::m_ICmp</a></div><div class="ttdeci">CmpClass_match&lt; LHS, RHS, ICmpInst, ICmpInst::Predicate &gt; m_ICmp(ICmpInst::Predicate &amp;Pred, const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01394">PatternMatch.h:1394</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">llvm::CmpInst::ICMP_UGT</a></div><div class="ttdeci">@ ICMP_UGT</div><div class="ttdoc">unsigned greater than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00741">InstrTypes.h:741</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78bad601460c9371d0f0ada5ae006bdba2bd"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad601460c9371d0f0ada5ae006bdba2bd">llvm::CmpInst::FCMP_UNE</a></div><div class="ttdeci">@ FCMP_UNE</div><div class="ttdoc">1 1 1 0 True if unordered or not equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00734">InstrTypes.h:734</a></div></div>
<div class="ttc" id="aReassociate_8cpp_html_abe860e1e952cdc501c96210be5e00805"><div class="ttname"><a href="Reassociate_8cpp.html#abe860e1e952cdc501c96210be5e00805">CreateMul</a></div><div class="ttdeci">static BinaryOperator * CreateMul(Value *S1, Value *S2, const Twine &amp;Name, Instruction *InsertBefore, Value *FlagsOp)</div><div class="ttdef"><b>Definition:</b> <a href="Reassociate_8cpp_source.html#l00253">Reassociate.cpp:253</a></div></div>
<div class="ttc" id="aregcomp_8c_html_a0240ac851181b84ac374872dc5434ee4"><div class="ttname"><a href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></div><div class="ttdeci">#define N</div></div>
<div class="ttc" id="aclassllvm_1_1CastInst_html_a3685b2128d8e6917000e4adc3b266ff6"><div class="ttname"><a href="classllvm_1_1CastInst.html#a3685b2128d8e6917000e4adc3b266ff6">llvm::CastInst::getOpcode</a></div><div class="ttdeci">Instruction::CastOps getOpcode() const</div><div class="ttdoc">Return the opcode of this CastInst.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00675">InstrTypes.h:675</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_aa9c705ecec80ebd584bb3d54b48f7ee1a3f5a9337c05ff64ea433ed2d4e9d49d5"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#aa9c705ecec80ebd584bb3d54b48f7ee1a3f5a9337c05ff64ea433ed2d4e9d49d5">BMask_Mixed</a></div><div class="ttdeci">@ BMask_Mixed</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00150">InstCombineAndOrXor.cpp:150</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_a01b718ba51f478d513417084e315ab50"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#a01b718ba51f478d513417084e315ab50">foldIsPowerOf2OrZero</a></div><div class="ttdeci">static Value * foldIsPowerOf2OrZero(ICmpInst *Cmp0, ICmpInst *Cmp1, bool IsAnd, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdoc">Fold (icmp eq ctpop(X) 1) | (icmp eq X 0) into (icmp ult ctpop(X) 2) and fold (icmp ne ctpop(X) 1) &amp; ...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00909">InstCombineAndOrXor.cpp:909</a></div></div>
<div class="ttc" id="aInstructionSimplify_8h_html"><div class="ttname"><a href="InstructionSimplify_8h.html">InstructionSimplify.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a0c8ffe664a36e30d49c84d0aded2fe08"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a0c8ffe664a36e30d49c84d0aded2fe08">llvm::SmallVectorImpl::pop_back_val</a></div><div class="ttdeci">T pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00677">SmallVector.h:677</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_aa7414ba9f658ff1287d22a4b8fe81bcb"><div class="ttname"><a href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">llvm::CmpInst::getPredicate</a></div><div class="ttdeci">Predicate getPredicate() const</div><div class="ttdoc">Return the predicate for this instruction.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00808">InstrTypes.h:808</a></div></div>
<div class="ttc" id="astructIntPart_html"><div class="ttname"><a href="structIntPart.html">IntPart</a></div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l01036">InstCombineAndOrXor.cpp:1036</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_aed3110e8dfc807586686091e1b17995d"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#aed3110e8dfc807586686091e1b17995d">SimplifyBSwap</a></div><div class="ttdeci">static Value * SimplifyBSwap(BinaryOperator &amp;I, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdoc">Transform BITWISE_OP(BSWAP(A),BSWAP(B)) or BITWISE_OP(BSWAP(A), Constant) to BSWAP(BITWISE_OP(A,...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00054">InstCombineAndOrXor.cpp:54</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a661fa29fe8d4acd9640aefa3a067f942"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a661fa29fe8d4acd9640aefa3a067f942">llvm::CmpInst::getOrderedPredicate</a></div><div class="ttdeci">Predicate getOrderedPredicate() const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00843">InstrTypes.h:843</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html"><div class="ttname"><a href="classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02708">Instructions.h:2708</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a5772946ca265c6a5c951cb331983daa5"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a5772946ca265c6a5c951cb331983daa5">llvm::PatternMatch::m_FCmp</a></div><div class="ttdeci">CmpClass_match&lt; LHS, RHS, FCmpInst, FCmpInst::Predicate &gt; m_FCmp(FCmpInst::Predicate &amp;Pred, const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01400">PatternMatch.h:1400</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_a9cc37ff4f50e97f7e94c348ca2b4ca68"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#a9cc37ff4f50e97f7e94c348ca2b4ca68">extractIntPart</a></div><div class="ttdeci">static Value * extractIntPart(const IntPart &amp;P, IRBuilderBase &amp;Builder)</div><div class="ttdoc">Materialize an extraction of bits from an integer in IR.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l01061">InstCombineAndOrXor.cpp:1061</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantRange_html_aa89e9cec92a0b38d2f47a077bf12cc98"><div class="ttname"><a href="classllvm_1_1ConstantRange.html#aa89e9cec92a0b38d2f47a077bf12cc98">llvm::ConstantRange::makeExactICmpRegion</a></div><div class="ttdeci">static ConstantRange makeExactICmpRegion(CmpInst::Predicate Pred, const APInt &amp;Other)</div><div class="ttdoc">Produce the exact range such that all values in the returned range satisfy the given predicate with a...</div><div class="ttdef"><b>Definition:</b> <a href="ConstantRange_8cpp_source.html#l00157">ConstantRange.cpp:157</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_a3f025ca3dbad2ca618ad4bf63fa51bb0"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#a3f025ca3dbad2ca618ad4bf63fa51bb0">canNarrowShiftAmt</a></div><div class="ttdeci">static bool canNarrowShiftAmt(Constant *C, unsigned BitWidth)</div><div class="ttdoc">Return true if a constant shift amount is always less than the specified bit-width.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l01878">InstCombineAndOrXor.cpp:1878</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_a6baa2d8de7d4e93c9b6c9324733d0ec3"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#a6baa2d8de7d4e93c9b6c9324733d0ec3">fcmpToClassTest</a></div><div class="ttdeci">static std::pair&lt; Value *, unsigned &gt; fcmpToClassTest(FCmpInst::Predicate Pred, Value *LHS, Value *RHS)</div><div class="ttdoc">Returns a pair of values, which if passed to llvm.is.fpclass, returns the same result as an fcmp with...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l01278">InstCombineAndOrXor.cpp:1278</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_aa7934618280f5dc61a34615b689744d1"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#aa7934618280f5dc61a34615b689744d1">areInverseVectorBitmasks</a></div><div class="ttdeci">static bool areInverseVectorBitmasks(Constant *C1, Constant *C2)</div><div class="ttdoc">If all elements of two constant vectors are 0/-1 and inverses, return true.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l02791">InstCombineAndOrXor.cpp:2791</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_aae55ea42185b7528c0c149625b998968"><div class="ttname"><a href="classllvm_1_1CmpInst.html#aae55ea42185b7528c0c149625b998968">llvm::CmpInst::isUnordered</a></div><div class="ttdeci">static bool isUnordered(Predicate predicate)</div><div class="ttdoc">Determine if the predicate is an unordered operation.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l04427">Instructions.cpp:4427</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a2fed53ed2b3225752bd9e4fce4967361"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a2fed53ed2b3225752bd9e4fce4967361">llvm::PatternMatch::m_Neg</a></div><div class="ttdeci">BinaryOp_match&lt; cst_pred_ty&lt; is_zero_int &gt;, ValTy, Instruction::Sub &gt; m_Neg(const ValTy &amp;V)</div><div class="ttdoc">Matches a 'Neg' as 'sub 0, V'.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02284">PatternMatch.h:2284</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_ad960e1ff48d25c382b6d28e7961f074e"><div class="ttname"><a href="classllvm_1_1APInt.html#ad960e1ff48d25c382b6d28e7961f074e">llvm::APInt::getLowBitsSet</a></div><div class="ttdeci">static APInt getLowBitsSet(unsigned numBits, unsigned loBitsSet)</div><div class="ttdoc">Constructs an APInt value that has the bottom loBitsSet bits set.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00289">APInt.h:289</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantRange_html_a1d29074c7a610816d4f328b7cd9b783d"><div class="ttname"><a href="classllvm_1_1ConstantRange.html#a1d29074c7a610816d4f328b7cd9b783d">llvm::ConstantRange::subtract</a></div><div class="ttdeci">ConstantRange subtract(const APInt &amp;CI) const</div><div class="ttdoc">Subtract the specified constant from the endpoints of this constant range.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantRange_8cpp_source.html#l00488">ConstantRange.cpp:488</a></div></div>
<div class="ttc" id="anamespacellvm_html_a4036c3c75bcee1206cd199548b87f9ae"><div class="ttname"><a href="namespacellvm.html#a4036c3c75bcee1206cd199548b87f9ae">llvm::isKnownToBeAPowerOfTwo</a></div><div class="ttdeci">bool isKnownToBeAPowerOfTwo(const Value *V, const DataLayout &amp;DL, bool OrZero=false, unsigned Depth=0, AssumptionCache *AC=nullptr, const Instruction *CxtI=nullptr, const DominatorTree *DT=nullptr, bool UseInstrInfo=true)</div><div class="ttdoc">Return true if the given value is known to have exactly one bit set when defined.</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l00300">ValueTracking.cpp:300</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a4e2dd07eceeed7496e6c3df4d364c91e"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a4e2dd07eceeed7496e6c3df4d364c91e">llvm::InstCombinerImpl::sinkNotIntoLogicalOp</a></div><div class="ttdeci">bool sinkNotIntoLogicalOp(Instruction &amp;I)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l03930">InstCombineAndOrXor.cpp:3930</a></div></div>
<div class="ttc" id="aReassociate_8cpp_html_a680ae08c1b9b93cebdd6cbb726fe8f3d"><div class="ttname"><a href="Reassociate_8cpp.html#a680ae08c1b9b93cebdd6cbb726fe8f3d">CreateAdd</a></div><div class="ttdeci">static BinaryOperator * CreateAdd(Value *S1, Value *S2, const Twine &amp;Name, Instruction *InsertBefore, Value *FlagsOp)</div><div class="ttdef"><b>Definition:</b> <a href="Reassociate_8cpp_source.html#l00241">Reassociate.cpp:241</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_a6dc6439ff11aa90e3d267d4e0de33e0e"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#a6dc6439ff11aa90e3d267d4e0de33e0e">foldLogOpOfMaskedICmps</a></div><div class="ttdeci">static Value * foldLogOpOfMaskedICmps(ICmpInst *LHS, ICmpInst *RHS, bool IsAnd, bool IsLogical, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdoc">Try to fold (icmp(A &amp; B) ==/!= C) &amp;/| (icmp(A &amp; D) ==/!= E) into a single (icmp(A &amp; X) ==/!...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l00521">InstCombineAndOrXor.cpp:521</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ae855357b6c5e6e7ed1869272708a3a84"><div class="ttname"><a href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">llvm::Value::takeName</a></div><div class="ttdeci">void takeName(Value *V)</div><div class="ttdoc">Transfer the name from V to this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00381">Value.cpp:381</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_acb9c55b6986369948507ca5241b4e411"><div class="ttname"><a href="classllvm_1_1APInt.html#acb9c55b6986369948507ca5241b4e411">llvm::APInt::shl</a></div><div class="ttdeci">APInt shl(unsigned shiftAmt) const</div><div class="ttdoc">Left-shift function.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00861">APInt.h:861</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_abe1de1520a21f77ac57cc210bf0fb0b4"><div class="ttname"><a href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00169">User.h:169</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a5b844aada27c4c6fdb87146ac458c0d8"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a5b844aada27c4c6fdb87146ac458c0d8">llvm::PatternMatch::m_Trunc</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::Trunc &gt; m_Trunc(const OpTy &amp;Op)</div><div class="ttdoc">Matches Trunc.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01611">PatternMatch.h:1611</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html_a02ce9966395063ac501ecbc1623deda4"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a02ce9966395063ac501ecbc1623deda4">llvm::BinaryOperator::Create</a></div><div class="ttdeci">static BinaryOperator * Create(BinaryOps Op, Value *S1, Value *S2, const Twine &amp;Name=Twine(), Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Construct a binary instruction, given the opcode and the two operands.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l02950">Instructions.cpp:2950</a></div></div>
<div class="ttc" id="aInstCombineAndOrXor_8cpp_html_a28b8014cf8170890bc8ce47028e95741"><div class="ttname"><a href="InstCombineAndOrXor_8cpp.html#a28b8014cf8170890bc8ce47028e95741">matchDeMorgansLaws</a></div><div class="ttdeci">static Instruction * matchDeMorgansLaws(BinaryOperator &amp;I, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdoc">Match variations of De Morgan's Laws: (~A &amp; ~B) == (~(A | B)) (~A | ~B) == (~(A &amp; B))</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineAndOrXor_8cpp_source.html#l01636">InstCombineAndOrXor.cpp:1636</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantRange_html_a04459fa7cb4eeda3238a0f7d554ad3be"><div class="ttname"><a href="classllvm_1_1ConstantRange.html#a04459fa7cb4eeda3238a0f7d554ad3be">llvm::ConstantRange::getUpper</a></div><div class="ttdeci">const APInt &amp; getUpper() const</div><div class="ttdoc">Return the upper value for this range.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantRange_8h_source.html#l00201">ConstantRange.h:201</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a753e1338645ec04d045211b8a46d968d"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a753e1338645ec04d045211b8a46d968d">llvm::PatternMatch::m_Cmp</a></div><div class="ttdeci">class_match&lt; CmpInst &gt; m_Cmp()</div><div class="ttdoc">Matches any compare instruction and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00089">PatternMatch.h:89</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00074">Value.h:74</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a37668d9884c78ac77254cf9fb8a4276a"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a37668d9884c78ac77254cf9fb8a4276a">llvm::PatternMatch::m_Shl</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Shl &gt; m_Shl(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01111">PatternMatch.h:1111</a></div></div>
<div class="ttc" id="aclassllvm_1_1VectorType_html_a8c90e6c50e795b17466482a04947690e"><div class="ttname"><a href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">llvm::VectorType::get</a></div><div class="ttdeci">static VectorType * get(Type *ElementType, ElementCount EC)</div><div class="ttdoc">This static method is the primary way to construct an VectorType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00670">Type.cpp:670</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a213e6c0ca6e838157373b9a6018c0769"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a213e6c0ca6e838157373b9a6018c0769">llvm::PatternMatch::m_LogicalAnd</a></div><div class="ttdeci">LogicalOp_match&lt; LHS, RHS, Instruction::And &gt; m_LogicalAnd(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches L &amp;&amp; R either in the form of L &amp; R or L ? R : false.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02556">PatternMatch.h:2556</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78baa3213b645e029aba8bb1b85213607d5e"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa3213b645e029aba8bb1b85213607d5e">llvm::CmpInst::FCMP_ORD</a></div><div class="ttdeci">@ FCMP_ORD</div><div class="ttdoc">0 1 1 1 True if ordered (no nans)</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00727">InstrTypes.h:727</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a971522b36bf432ad69a0083581ab4108"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a971522b36bf432ad69a0083581ab4108">llvm::PatternMatch::m_Mul</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Mul &gt; m_Mul(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01045">PatternMatch.h:1045</a></div></div>
<div class="ttc" id="anamespacellvm_html_aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548"><div class="ttname"><a href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830ea76feb79109026728a20736a8c6504548">llvm::RecurKind::Xor</a></div><div class="ttdeci">@ Xor</div><div class="ttdoc">Bitwise or logical XOR of integers.</div></div>
<div class="ttc" id="anamespacellvm_1_1sampleprof_html_a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41"><div class="ttname"><a href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">llvm::sampleprof::Base</a></div><div class="ttdeci">@ Base</div><div class="ttdef"><b>Definition:</b> <a href="Discriminator_8h_source.html#l00058">Discriminator.h:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba919643b83ce3c9af2e4296ed5e413a1f"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba919643b83ce3c9af2e4296ed5e413a1f">llvm::CmpInst::FCMP_UEQ</a></div><div class="ttdeci">@ FCMP_UEQ</div><div class="ttdoc">1 0 0 1 True if unordered or equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00729">InstrTypes.h:729</a></div></div>
<div class="ttc" id="aclassllvm_1_1Use_html"><div class="ttname"><a href="classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdoc">A Use represents the edge between a Value definition and its users.</div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00043">Use.h:43</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a833daf718a49c5cd637d8c9ddeaebe07"><div class="ttname"><a href="classllvm_1_1Type.html#a833daf718a49c5cd637d8c9ddeaebe07">llvm::Type::getPrimitiveSizeInBits</a></div><div class="ttdeci">TypeSize getPrimitiveSizeInBits() const LLVM_READONLY</div><div class="ttdoc">Return the basic size of this type if it is a primitive type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00163">Type.cpp:163</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Intrinsic_html_a80add6b3b1cdaec560907995127adc16"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">llvm::Intrinsic::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00039">TargetTransformInfo.h:39</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:23:40 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

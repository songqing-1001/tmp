<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Support/Windows/Threading.inc Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_f0dc79bace318df7ec0fa0bdb179ed95.html">Support</a></li><li class="navelem"><a class="el" href="dir_3517577039c8cab3aba0e0e4cb0c6785.html">Windows</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Threading.inc</div>  </div>
</div><!--header-->
<div class="contents">
<a href="Windows_2Threading_8inc.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- Windows/Threading.inc - Win32 Threading Implementation - -*- C++ -*-===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This file provides the Win32 specific implementation of Threading functions.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160; </div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallString_8h.html">llvm/ADT/SmallString.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Twine_8h.html">llvm/ADT/Twine.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160; </div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="WindowsSupport_8h.html">llvm/Support/Windows/WindowsSupport.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;process.h&gt;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160; </div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;bitset&gt;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160; </div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">// Windows will at times define MemoryFence.</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#ifdef MemoryFence</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#undef MemoryFence</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160; </div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;HANDLE</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<a class="code" href="namespacellvm.html#ad84885edee73e7b54f903c49e721022e">llvm_execute_on_thread_impl</a>(<span class="keywordtype">unsigned</span>(__stdcall *ThreadFunc)(<span class="keywordtype">void</span> *), <span class="keywordtype">void</span> *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>,</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;                            std::optional&lt;unsigned&gt; StackSizeInBytes) {</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  HANDLE hThread = (HANDLE)::_beginthreadex(NULL, StackSizeInBytes.value_or(0),</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;                                            ThreadFunc, <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>, 0, NULL);</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160; </div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <span class="keywordflow">if</span> (!hThread) {</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <a class="code" href="namespacellvm.html#a1596a52acbeafe1bba5bbef7f2c8abe3">ReportLastErrorFatal</a>(<span class="stringliteral">&quot;_beginthreadex failed&quot;</span>);</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  }</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160; </div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="keywordflow">return</span> hThread;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;}</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160; </div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#a402ea7aa4aac22f6feeac7223ac65a7e">llvm_thread_join_impl</a>(HANDLE hThread) {</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <span class="keywordflow">if</span> (::WaitForSingleObject(hThread, INFINITE) == WAIT_FAILED) {</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <a class="code" href="namespacellvm.html#a1596a52acbeafe1bba5bbef7f2c8abe3">ReportLastErrorFatal</a>(<span class="stringliteral">&quot;WaitForSingleObject failed&quot;</span>);</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  }</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;}</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160; </div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#a0d8a563a94a90ad8168f18f52b9c93fa">llvm_thread_detach_impl</a>(HANDLE hThread) {</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <span class="keywordflow">if</span> (::CloseHandle(hThread) == FALSE) {</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <a class="code" href="namespacellvm.html#a1596a52acbeafe1bba5bbef7f2c8abe3">ReportLastErrorFatal</a>(<span class="stringliteral">&quot;CloseHandle failed&quot;</span>);</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  }</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;}</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160; </div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<a class="code" href="namespacellvm_1_1AMDGPU_1_1SDWA.html#a487d59303b94fbf4adddd9a08c30da0aaddbc3f8d705f646af626fd73cdf3618b">DWORD</a> <a class="code" href="namespacellvm.html#a0a6d59b391af72542baf423e4a8a4a1e">llvm_thread_get_id_impl</a>(HANDLE hThread) { return ::GetThreadId(hThread); }</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<a class="code" href="namespacellvm_1_1AMDGPU_1_1SDWA.html#a487d59303b94fbf4adddd9a08c30da0aaddbc3f8d705f646af626fd73cdf3618b">DWORD</a> <a class="code" href="namespacellvm.html#aa3d43dd7607cd606667ca32af3fc67ac">llvm_thread_get_current_id_impl</a>() { return ::GetCurrentThreadId(); }</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;} <span class="comment">// namespace llvm</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="namespacellvm.html#aaa33daad43dedada2aa398a44b91be01">llvm::get_threadid</a>() { <span class="keywordflow">return</span> <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a>(::GetCurrentThreadId()); }</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<a class="code" href="classuint32__t.html">uint32_t</a> <a class="code" href="namespacellvm.html#a28e648caeff381f571c4f282c869ccd7">llvm::get_max_thread_name_length</a>() { <span class="keywordflow">return</span> 0; }</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160; </div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#if defined(_MSC_VER)</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> SetThreadName(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SDWA.html#a487d59303b94fbf4adddd9a08c30da0aaddbc3f8d705f646af626fd73cdf3618b">DWORD</a> <a class="code" href="namespacellvm_1_1AMDGPU_1_1VGPRIndexMode.html#a9afd95476c40096a5898ba0f06370b3a">Id</a>, LPCSTR <a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>) {</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  constexpr <a class="code" href="namespacellvm_1_1AMDGPU_1_1SDWA.html#a487d59303b94fbf4adddd9a08c30da0aaddbc3f8d705f646af626fd73cdf3618b">DWORD</a> MS_VC_EXCEPTION = 0x406D1388;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160; </div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#pragma pack(push, 8)</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="keyword">struct </span>THREADNAME_INFO {</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <a class="code" href="namespacellvm_1_1AMDGPU_1_1SDWA.html#a487d59303b94fbf4adddd9a08c30da0aaddbc3f8d705f646af626fd73cdf3618b">DWORD</a> dwType;     <span class="comment">// Must be 0x1000.</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    LPCSTR szName;    <span class="comment">// Pointer to thread name</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <a class="code" href="namespacellvm_1_1AMDGPU_1_1SDWA.html#a487d59303b94fbf4adddd9a08c30da0aaddbc3f8d705f646af626fd73cdf3618b">DWORD</a> dwThreadId; <span class="comment">// Thread ID (-1 == current thread)</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <a class="code" href="namespacellvm_1_1AMDGPU_1_1SDWA.html#a487d59303b94fbf4adddd9a08c30da0aaddbc3f8d705f646af626fd73cdf3618b">DWORD</a> dwFlags;    <span class="comment">// Reserved.  Do not use.</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  };</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor">#pragma pack(pop)</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  THREADNAME_INFO <a class="code" href="LazyValueInfo_8cpp.html#add11cb1bc38847ce70e526af765dcce7">info</a>;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <a class="code" href="LazyValueInfo_8cpp.html#add11cb1bc38847ce70e526af765dcce7">info</a>.dwType = 0x1000;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <a class="code" href="LazyValueInfo_8cpp.html#add11cb1bc38847ce70e526af765dcce7">info</a>.szName = <a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <a class="code" href="LazyValueInfo_8cpp.html#add11cb1bc38847ce70e526af765dcce7">info</a>.dwThreadId = <a class="code" href="namespacellvm_1_1AMDGPU_1_1VGPRIndexMode.html#a9afd95476c40096a5898ba0f06370b3a">Id</a>;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <a class="code" href="LazyValueInfo_8cpp.html#add11cb1bc38847ce70e526af765dcce7">info</a>.dwFlags = 0;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  __try {</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    ::RaiseException(MS_VC_EXCEPTION, 0, <span class="keyword">sizeof</span>(<a class="code" href="LazyValueInfo_8cpp.html#add11cb1bc38847ce70e526af765dcce7">info</a>) / <span class="keyword">sizeof</span>(ULONG_PTR),</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                     (ULONG_PTR *)&amp;<a class="code" href="LazyValueInfo_8cpp.html#add11cb1bc38847ce70e526af765dcce7">info</a>);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  } __except (EXCEPTION_EXECUTE_HANDLER) {</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  }</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;}</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#a8c2b8c55bed6ebcda541d21bab7e6a42">llvm::set_thread_name</a>(<span class="keyword">const</span> Twine &amp;<a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>) {</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="preprocessor">#if defined(_MSC_VER)</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="comment">// Make sure the input is null terminated.</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  SmallString&lt;64&gt; Storage;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  StringRef NameStr = <a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>.toNullTerminatedStringRef(Storage);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  SetThreadName(::GetCurrentThreadId(), NameStr.data());</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;}</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160; </div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#a9f631c8bd3916d1984a0df4ccce73461">llvm::get_thread_name</a>(SmallVectorImpl&lt;char&gt; &amp;<a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>) {</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="comment">// &quot;Name&quot; is not an inherent property of a thread on Windows.  In fact, when</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="comment">// you &quot;set&quot; the name, you are only firing a one-time message to a debugger</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="comment">// which it interprets as a program setting its threads&#39; name.  We may be</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="comment">// able to get fancy by creating a TLS entry when someone calls</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="comment">// set_thread_name so that subsequent calls to get_thread_name return this</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="comment">// value.</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>.clear();</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;}</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<a class="code" href="namespacellvm.html#a95d9b0bc59230b7a9ecfd7b49e001f2a">SetThreadPriorityResult</a> <a class="code" href="namespacellvm.html#a071c654a304712c768496d4ea8b404e9">llvm::set_thread_priority</a>(<a class="code" href="namespacellvm.html#a05609d049bfe3c5c2f64711566131a86">ThreadPriority</a> Priority) {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="comment">// https://docs.microsoft.com/en-us/windows/desktop/api/processthreadsapi/nf-processthreadsapi-setthreadpriority</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="comment">// Begin background processing mode. The system lowers the resource scheduling</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <span class="comment">// priorities of the thread so that it can perform background work without</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="comment">// significantly affecting activity in the foreground.</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="comment">// End background processing mode. The system restores the resource scheduling</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="comment">// priorities of the thread as they were before the thread entered background</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="comment">// processing mode.</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="comment">// FIXME: consider THREAD_PRIORITY_BELOW_NORMAL for Low</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="keywordflow">return</span> SetThreadPriority(GetCurrentThread(),</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                           Priority != <a class="code" href="namespacellvm_1_1TargetStackID.html#a71392100eb15ba746b1f898986f5d8a5af2af9eb94ff1bc08308bc738d744ee85">ThreadPriority::Default</a></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                               ? THREAD_MODE_BACKGROUND_BEGIN</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                               : THREAD_MODE_BACKGROUND_END)</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;             ? SetThreadPriorityResult::SUCCESS</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;             : SetThreadPriorityResult::FAILURE;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;}</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="keyword">struct </span>ProcessorGroup {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46">ID</a>;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="keywordtype">unsigned</span> AllThreads;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="keywordtype">unsigned</span> UsableThreads;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="keywordtype">unsigned</span> ThreadsPerCore;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> Affinity;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <span class="keywordtype">unsigned</span> useableCores()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(1U, UsableThreads / ThreadsPerCore);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  }</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;};</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> F&gt;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> IterateProcInfo(LOGICAL_PROCESSOR_RELATIONSHIP Relationship, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> Fn) {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <a class="code" href="namespacellvm_1_1AMDGPU_1_1SDWA.html#a487d59303b94fbf4adddd9a08c30da0aaddbc3f8d705f646af626fd73cdf3618b">DWORD</a> <a class="code" href="namespacellvm_1_1omp.html#a16d7c5f77008a84ae20bf4a5c41e51f0ae88b4464fe326a51e6e6dfae28dd536d">Len</a> = 0;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  BOOL <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> = ::GetLogicalProcessorInformationEx(Relationship, NULL, &amp;Len);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> || GetLastError() != ERROR_INSUFFICIENT_BUFFER) {</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  }</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <span class="keyword">auto</span> *<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a> = (SYSTEM_LOGICAL_PROCESSOR_INFORMATION_EX *)calloc(1, Len);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> = ::GetLogicalProcessorInformationEx(Relationship, <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>, &amp;Len);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>) {</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keyword">auto</span> *End =</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        (SYSTEM_LOGICAL_PROCESSOR_INFORMATION_EX *)((uint8_t *)<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a> + <a class="code" href="namespacellvm_1_1omp.html#a16d7c5f77008a84ae20bf4a5c41e51f0ae88b4464fe326a51e6e6dfae28dd536d">Len</a>);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Curr = <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>; Curr &lt; End;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;         Curr = (SYSTEM_LOGICAL_PROCESSOR_INFORMATION_EX *)((uint8_t *)Curr +</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                                                            Curr-&gt;Size)) {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      <span class="keywordflow">if</span> (Curr-&gt;Relationship != Relationship)</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      Fn(Curr);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    }</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  }</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  free(<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;}</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160; </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="keyword">static</span> std::optional&lt;std::vector&lt;USHORT&gt;&gt; getActiveGroups() {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  USHORT Count = 0;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="keywordflow">if</span> (::GetProcessGroupAffinity(GetCurrentProcess(), &amp;Count, <span class="keyword">nullptr</span>))</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160; </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="keywordflow">if</span> (GetLastError() != ERROR_INSUFFICIENT_BUFFER)</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160; </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  std::vector&lt;USHORT&gt; <a class="code" href="X86InstrFMA3Info_8cpp.html#ab138684de9096eb96683328900f78e48">Groups</a>;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <a class="code" href="X86InstrFMA3Info_8cpp.html#ab138684de9096eb96683328900f78e48">Groups</a>.resize(Count);</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="keywordflow">if</span> (!::GetProcessGroupAffinity(GetCurrentProcess(), &amp;Count, <a class="code" href="X86InstrFMA3Info_8cpp.html#ab138684de9096eb96683328900f78e48">Groups</a>.data()))</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="X86InstrFMA3Info_8cpp.html#ab138684de9096eb96683328900f78e48">Groups</a>;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;}</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160; </div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="keyword">static</span> ArrayRef&lt;ProcessorGroup&gt; getProcessorGroups() {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <span class="keyword">auto</span> computeGroups = []() {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    SmallVector&lt;ProcessorGroup, 4&gt; <a class="code" href="X86InstrFMA3Info_8cpp.html#ab138684de9096eb96683328900f78e48">Groups</a>;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160; </div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keyword">auto</span> HandleGroup = [&amp;](SYSTEM_LOGICAL_PROCESSOR_INFORMATION_EX *ProcInfo) {</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      GROUP_RELATIONSHIP &amp;El = ProcInfo-&gt;Group;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> J = 0; J &lt; El.ActiveGroupCount; ++J) {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        ProcessorGroup <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.ID = <a class="code" href="X86InstrFMA3Info_8cpp.html#ab138684de9096eb96683328900f78e48">Groups</a>.size();</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.AllThreads = El.GroupInfo[J].MaximumProcessorCount;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.UsableThreads = El.GroupInfo[J].ActiveProcessorCount;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.UsableThreads &lt;= 64);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.Affinity = El.GroupInfo[J].ActiveProcessorMask;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <a class="code" href="X86InstrFMA3Info_8cpp.html#ab138684de9096eb96683328900f78e48">Groups</a>.push_back(<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      }</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    };</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keywordflow">if</span> (!IterateProcInfo(RelationGroup, HandleGroup))</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      <span class="keywordflow">return</span> std::vector&lt;ProcessorGroup&gt;();</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keyword">auto</span> HandleProc = [&amp;](SYSTEM_LOGICAL_PROCESSOR_INFORMATION_EX *ProcInfo) {</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      PROCESSOR_RELATIONSHIP &amp;El = ProcInfo-&gt;Processor;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(El.GroupCount == 1);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      <span class="keywordtype">unsigned</span> NumHyperThreads = 1;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;      <span class="comment">// If the flag is set, each core supports more than one hyper-thread.</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      <span class="keywordflow">if</span> (El.Flags &amp; LTP_PC_SMT)</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        NumHyperThreads = std::bitset&lt;64&gt;(El.GroupMask[0].Mask).count();</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = El.GroupMask[0].Group;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      <a class="code" href="X86InstrFMA3Info_8cpp.html#ab138684de9096eb96683328900f78e48">Groups</a>[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>].ThreadsPerCore = NumHyperThreads;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    };</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160; </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">if</span> (!IterateProcInfo(RelationProcessorCore, HandleProc))</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      <span class="keywordflow">return</span> std::vector&lt;ProcessorGroup&gt;();</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160; </div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keyword">auto</span> ActiveGroups = getActiveGroups();</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordflow">if</span> (!ActiveGroups)</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      <span class="keywordflow">return</span> std::vector&lt;ProcessorGroup&gt;();</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160; </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="comment">// If there&#39;s an affinity mask set, assume the user wants to constrain the</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="comment">// current process to only a single CPU group. On Windows, it is not</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="comment">// possible for affinity masks to cross CPU group boundaries.</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    DWORD_PTR ProcessAffinityMask = 0, SystemAffinityMask = 0;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordflow">if</span> (::GetProcessAffinityMask(GetCurrentProcess(), &amp;ProcessAffinityMask,</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                                 &amp;SystemAffinityMask)) {</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160; </div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;      <span class="keywordflow">if</span> (ProcessAffinityMask != SystemAffinityMask) {</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ab3abb890c185b173d92b30cf96983dd5">llvm::RunningWindows11OrGreater</a>() &amp;&amp; ActiveGroups-&gt;size() &gt; 1) {</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;          <span class="comment">// The process affinity mask is spurious, due to an OS bug, ignore it.</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;          <span class="keywordflow">return</span> std::vector&lt;ProcessorGroup&gt;(<a class="code" href="X86InstrFMA3Info_8cpp.html#ab138684de9096eb96683328900f78e48">Groups</a>.begin(), <a class="code" href="X86InstrFMA3Info_8cpp.html#ab138684de9096eb96683328900f78e48">Groups</a>.end());</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        }</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ActiveGroups-&gt;size() == 1 &amp;&amp;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;               <span class="stringliteral">&quot;When an affinity mask is set, the process is expected to be &quot;</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;               <span class="stringliteral">&quot;assigned to a single processor group!&quot;</span>);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160; </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <span class="keywordtype">unsigned</span> CurrentGroupID = (*ActiveGroups)[0];</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        ProcessorGroup NewG{<a class="code" href="X86InstrFMA3Info_8cpp.html#ab138684de9096eb96683328900f78e48">Groups</a>[CurrentGroupID]};</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        NewG.Affinity = ProcessAffinityMask;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        NewG.UsableThreads = <a class="code" href="namespacellvm.html#a0eea77e7bfa82e0219d2ec7b4efbc94f">llvm::popcount</a>(ProcessAffinityMask);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <a class="code" href="X86InstrFMA3Info_8cpp.html#ab138684de9096eb96683328900f78e48">Groups</a>.clear();</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <a class="code" href="X86InstrFMA3Info_8cpp.html#ab138684de9096eb96683328900f78e48">Groups</a>.push_back(NewG);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      }</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    }</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordflow">return</span> std::vector&lt;ProcessorGroup&gt;(<a class="code" href="X86InstrFMA3Info_8cpp.html#ab138684de9096eb96683328900f78e48">Groups</a>.begin(), <a class="code" href="X86InstrFMA3Info_8cpp.html#ab138684de9096eb96683328900f78e48">Groups</a>.end());</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  };</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="keyword">static</span> <span class="keyword">auto</span> <a class="code" href="X86InstrFMA3Info_8cpp.html#ab138684de9096eb96683328900f78e48">Groups</a> = computeGroups();</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="keywordflow">return</span> ArrayRef&lt;ProcessorGroup&gt;(<a class="code" href="X86InstrFMA3Info_8cpp.html#ab138684de9096eb96683328900f78e48">Groups</a>);</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;}</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> R, <span class="keyword">typename</span> UnaryPredicate&gt;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="keyword">static</span> <span class="keywordtype">unsigned</span> aggregate(<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> &amp;&amp;Range, UnaryPredicate <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>) {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>{};</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;It : Range)</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> += <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>(It);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;}</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160; </div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="keywordtype">int</span> <a class="code" href="namespacellvm.html#aa79a8fc8721314e9f7199ca4cc22e51b">llvm::get_physical_cores</a>() {</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">unsigned</span> Cores =</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      aggregate(getProcessorGroups(), [](<span class="keyword">const</span> ProcessorGroup &amp;<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>) {</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.UsableThreads / <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.ThreadsPerCore;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      });</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <span class="keywordflow">return</span> Cores;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;}</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160; </div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="Threading_8cpp.html#a60105968395d0951760c358c56e0f561">computeHostNumHardwareThreads</a>() {</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">unsigned</span> Threads =</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      aggregate(getProcessorGroups(),</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                [](<span class="keyword">const</span> ProcessorGroup &amp;<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>) { <span class="keywordflow">return</span> <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.UsableThreads; });</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="keywordflow">return</span> Threads;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;}</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160; </div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">// Finds the proper CPU socket where a thread number should go. Returns</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">// &#39;std::nullopt&#39; if the thread shall remain on the actual CPU socket.</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;std::optional&lt;unsigned&gt;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<a class="code" href="classllvm_1_1ThreadPoolStrategy.html#a37c77aaf2dbf3d8f8599c3e734425a0e">llvm::ThreadPoolStrategy::compute_cpu_socket</a>(<span class="keywordtype">unsigned</span> ThreadPoolNum)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  ArrayRef&lt;ProcessorGroup&gt; <a class="code" href="X86InstrFMA3Info_8cpp.html#ab138684de9096eb96683328900f78e48">Groups</a> = getProcessorGroups();</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <span class="comment">// Only one CPU socket in the system or process affinity was set, no need to</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <span class="comment">// move the thread(s) to another CPU socket.</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="X86InstrFMA3Info_8cpp.html#ab138684de9096eb96683328900f78e48">Groups</a>.size() &lt;= 1)</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160; </div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="comment">// We ask for less threads than there are hardware threads per CPU socket, no</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="comment">// need to dispatch threads to other CPU sockets.</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <span class="keywordtype">unsigned</span> MaxThreadsPerSocket =</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      <a class="code" href="classllvm_1_1ThreadPoolStrategy.html#a4d05cc9321306f401f9cc9990720173b">UseHyperThreads</a> ? <a class="code" href="X86InstrFMA3Info_8cpp.html#ab138684de9096eb96683328900f78e48">Groups</a>[0].UsableThreads : <a class="code" href="X86InstrFMA3Info_8cpp.html#ab138684de9096eb96683328900f78e48">Groups</a>[0].useableCores();</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ThreadPoolStrategy.html#ac128c3b3bd0420224f86d2c385f3af99">compute_thread_count</a>() &lt;= MaxThreadsPerSocket)</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160; </div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ThreadPoolNum &lt; <a class="code" href="classllvm_1_1ThreadPoolStrategy.html#ac128c3b3bd0420224f86d2c385f3af99">compute_thread_count</a>() &amp;&amp;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;         <span class="stringliteral">&quot;The thread index is not within thread strategy&#39;s range!&quot;</span>);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160; </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <span class="comment">// Assumes the same number of hardware threads per CPU socket.</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <span class="keywordflow">return</span> (ThreadPoolNum * <a class="code" href="X86InstrFMA3Info_8cpp.html#ab138684de9096eb96683328900f78e48">Groups</a>.size()) / <a class="code" href="classllvm_1_1ThreadPoolStrategy.html#ac128c3b3bd0420224f86d2c385f3af99">compute_thread_count</a>();</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;}</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment">// Assign the current thread to a more appropriate CPU socket or CPU group</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1ThreadPoolStrategy.html#a91973a96c25c9148226db40b463b5681">llvm::ThreadPoolStrategy::apply_thread_strategy</a>(</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keywordtype">unsigned</span> ThreadPoolNum)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="comment">// After Windows 11 and Windows Server 2022, let the OS do the scheduling,</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="comment">// since a process automatically gains access to all processor groups.</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ab3abb890c185b173d92b30cf96983dd5">llvm::RunningWindows11OrGreater</a>())</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160; </div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  std::optional&lt;unsigned&gt; Socket = <a class="code" href="classllvm_1_1ThreadPoolStrategy.html#a37c77aaf2dbf3d8f8599c3e734425a0e">compute_cpu_socket</a>(ThreadPoolNum);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <span class="keywordflow">if</span> (!Socket)</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  ArrayRef&lt;ProcessorGroup&gt; <a class="code" href="X86InstrFMA3Info_8cpp.html#ab138684de9096eb96683328900f78e48">Groups</a> = getProcessorGroups();</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  GROUP_AFFINITY Affinity{};</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  Affinity.Group = <a class="code" href="X86InstrFMA3Info_8cpp.html#ab138684de9096eb96683328900f78e48">Groups</a>[*Socket].ID;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  Affinity.Mask = <a class="code" href="X86InstrFMA3Info_8cpp.html#ab138684de9096eb96683328900f78e48">Groups</a>[*Socket].Affinity;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  SetThreadGroupAffinity(GetCurrentThread(), &amp;Affinity, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;}</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160; </div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<a class="code" href="classllvm_1_1BitVector.html">llvm::BitVector</a> <a class="code" href="namespacellvm.html#a28b7afb4a2fb8c445d23dc24b3627bd6">llvm::get_thread_affinity_mask</a>() {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  GROUP_AFFINITY Affinity{};</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  GetThreadGroupAffinity(GetCurrentThread(), &amp;Affinity);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160; </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1MachO.html#a11849daa1b55a8c00390b349546112e7a2005c1eb611537027feb90dafcbbb444">All</a> =</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      aggregate(getProcessorGroups(),</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                [](<span class="keyword">const</span> ProcessorGroup &amp;<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>) { <span class="keywordflow">return</span> <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.AllThreads; });</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160; </div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <span class="keywordtype">unsigned</span> StartOffset =</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      aggregate(getProcessorGroups(), [&amp;](<span class="keyword">const</span> ProcessorGroup &amp;<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>) {</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.ID &lt; Affinity.Group ? <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.AllThreads : 0;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      });</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160; </div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <a class="code" href="classllvm_1_1BitVector.html">llvm::BitVector</a> V;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  V.<a class="code" href="classllvm_1_1BitVector.html#a32859a24aa7a3be269855b989d92a4b4">resize</a>(All);</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; <span class="keyword">sizeof</span>(KAFFINITY) * 8; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keywordflow">if</span> ((Affinity.Mask &gt;&gt; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp; 1)</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      V.set(StartOffset + <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  }</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;}</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm.html#a52707521404204cff06fe8d1a663952b">llvm::get_cpus</a>() { <span class="keywordflow">return</span> getProcessorGroups().size(); }</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="anamespacellvm_html_a0a6d59b391af72542baf423e4a8a4a1e"><div class="ttname"><a href="namespacellvm.html#a0a6d59b391af72542baf423e4a8a4a1e">llvm::llvm_thread_get_id_impl</a></div><div class="ttdeci">thread::id llvm_thread_get_id_impl(thread::native_handle_type Thread)</div></div>
<div class="ttc" id="aclassllvm_1_1ThreadPoolStrategy_html_ac128c3b3bd0420224f86d2c385f3af99"><div class="ttname"><a href="classllvm_1_1ThreadPoolStrategy.html#ac128c3b3bd0420224f86d2c385f3af99">llvm::ThreadPoolStrategy::compute_thread_count</a></div><div class="ttdeci">unsigned compute_thread_count() const</div><div class="ttdoc">Retrieves the max available threads for the current strategy.</div><div class="ttdef"><b>Definition:</b> <a href="Threading_8cpp_source.html#l00055">Threading.cpp:55</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab3abb890c185b173d92b30cf96983dd5"><div class="ttname"><a href="namespacellvm.html#ab3abb890c185b173d92b30cf96983dd5">llvm::RunningWindows11OrGreater</a></div><div class="ttdeci">bool RunningWindows11OrGreater()</div><div class="ttdoc">Determines if the program is running on Windows 11 or Windows Server 2022.</div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64PACKey_html_abf4394f452bde3f544999858d71e4b46"><div class="ttname"><a href="namespacellvm_1_1AArch64PACKey.html#abf4394f452bde3f544999858d71e4b46">llvm::AArch64PACKey::ID</a></div><div class="ttdeci">ID</div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00790">AArch64BaseInfo.h:790</a></div></div>
<div class="ttc" id="aclassllvm_1_1ThreadPoolStrategy_html_a4d05cc9321306f401f9cc9990720173b"><div class="ttname"><a href="classllvm_1_1ThreadPoolStrategy.html#a4d05cc9321306f401f9cc9990720173b">llvm::ThreadPoolStrategy::UseHyperThreads</a></div><div class="ttdeci">bool UseHyperThreads</div><div class="ttdef"><b>Definition:</b> <a href="Threading_8h_source.html#l00126">Threading.h:126</a></div></div>
<div class="ttc" id="aREADME-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00411">README-SSE.txt:411</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa3d43dd7607cd606667ca32af3fc67ac"><div class="ttname"><a href="namespacellvm.html#aa3d43dd7607cd606667ca32af3fc67ac">llvm::llvm_thread_get_current_id_impl</a></div><div class="ttdeci">thread::id llvm_thread_get_current_id_impl()</div></div>
<div class="ttc" id="anamespacellvm_html_a402ea7aa4aac22f6feeac7223ac65a7e"><div class="ttname"><a href="namespacellvm.html#a402ea7aa4aac22f6feeac7223ac65a7e">llvm::llvm_thread_join_impl</a></div><div class="ttdeci">void llvm_thread_join_impl(thread::native_handle_type Thread)</div></div>
<div class="ttc" id="anamespacellvm_html_a0d8a563a94a90ad8168f18f52b9c93fa"><div class="ttname"><a href="namespacellvm.html#a0d8a563a94a90ad8168f18f52b9c93fa">llvm::llvm_thread_detach_impl</a></div><div class="ttdeci">void llvm_thread_detach_impl(thread::native_handle_type Thread)</div></div>
<div class="ttc" id="aWindowsSupport_8h_html"><div class="ttname"><a href="WindowsSupport_8h.html">WindowsSupport.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BitVector_html_a32859a24aa7a3be269855b989d92a4b4"><div class="ttname"><a href="classllvm_1_1BitVector.html#a32859a24aa7a3be269855b989d92a4b4">llvm::BitVector::resize</a></div><div class="ttdeci">void resize(unsigned N, bool t=false)</div><div class="ttdoc">resize - Grow or shrink the bitvector.</div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00334">BitVector.h:334</a></div></div>
<div class="ttc" id="aX86InstrFMA3Info_8cpp_html_ab138684de9096eb96683328900f78e48"><div class="ttname"><a href="X86InstrFMA3Info_8cpp.html#ab138684de9096eb96683328900f78e48">Groups</a></div><div class="ttdeci">static const X86InstrFMA3Group Groups[]</div><div class="ttdef"><b>Definition:</b> <a href="X86InstrFMA3Info_8cpp_source.html#l00073">X86InstrFMA3Info.cpp:73</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab4d4bc901fedd8857f647dcc2c0d71de"><div class="ttname"><a href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">llvm::max</a></div><div class="ttdeci">Expected&lt; ExpressionValue &gt; max(const ExpressionValue &amp;Lhs, const ExpressionValue &amp;Rhs)</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8cpp_source.html#l00337">FileCheck.cpp:337</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00055">MD5.cpp:55</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVFenceField_html_a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731"><div class="ttname"><a href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">llvm::RISCVFenceField::R</a></div><div class="ttdeci">@ R</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00278">RISCVBaseInfo.h:278</a></div></div>
<div class="ttc" id="aAMDGPULibCalls_8cpp_html_afecf1cc1292b07f57d343c0f4d682044"><div class="ttname"><a href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a></div><div class="ttdeci">amdgpu Simplify well known AMD library false FunctionCallee Value * Arg</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULibCalls_8cpp_source.html#l00187">AMDGPULibCalls.cpp:187</a></div></div>
<div class="ttc" id="aSmallString_8h_html"><div class="ttname"><a href="SmallString_8h.html">SmallString.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0eea77e7bfa82e0219d2ec7b4efbc94f"><div class="ttname"><a href="namespacellvm.html#a0eea77e7bfa82e0219d2ec7b4efbc94f">llvm::popcount</a></div><div class="ttdeci">int popcount(T Value) noexcept</div><div class="ttdoc">Count the number of set bits in a value.</div><div class="ttdef"><b>Definition:</b> <a href="bit_8h_source.html#l00349">bit.h:349</a></div></div>
<div class="ttc" id="aTwine_8h_html"><div class="ttname"><a href="Twine_8h.html">Twine.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_aaa33daad43dedada2aa398a44b91be01"><div class="ttname"><a href="namespacellvm.html#aaa33daad43dedada2aa398a44b91be01">llvm::get_threadid</a></div><div class="ttdeci">uint64_t get_threadid()</div><div class="ttdoc">Return the current thread id, as used in various OS system calls.</div></div>
<div class="ttc" id="anamespacellvm_html_a28e648caeff381f571c4f282c869ccd7"><div class="ttname"><a href="namespacellvm.html#a28e648caeff381f571c4f282c869ccd7">llvm::get_max_thread_name_length</a></div><div class="ttdeci">uint32_t get_max_thread_name_length()</div><div class="ttdoc">Get the maximum length of a thread name on this platform.</div></div>
<div class="ttc" id="anamespacellvm_html_a9f631c8bd3916d1984a0df4ccce73461"><div class="ttname"><a href="namespacellvm.html#a9f631c8bd3916d1984a0df4ccce73461">llvm::get_thread_name</a></div><div class="ttdeci">void get_thread_name(SmallVectorImpl&lt; char &gt; &amp;Name)</div><div class="ttdoc">Get the name of the current thread.</div></div>
<div class="ttc" id="aclassllvm_1_1ThreadPoolStrategy_html_a91973a96c25c9148226db40b463b5681"><div class="ttname"><a href="classllvm_1_1ThreadPoolStrategy.html#a91973a96c25c9148226db40b463b5681">llvm::ThreadPoolStrategy::apply_thread_strategy</a></div><div class="ttdeci">void apply_thread_strategy(unsigned ThreadPoolNum) const</div><div class="ttdoc">Assign the current thread to an ideal hardware CPU or NUMA node.</div></div>
<div class="ttc" id="aCSEInfo_8cpp_html_a75f8a8519c2c9b30e7c06dc5e256fffa"><div class="ttname"><a href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a></div><div class="ttdeci">Analysis containing CSE Info</div><div class="ttdef"><b>Definition:</b> <a href="CSEInfo_8cpp_source.html#l00027">CSEInfo.cpp:27</a></div></div>
<div class="ttc" id="aclassllvm_1_1BitVector_html"><div class="ttname"><a href="classllvm_1_1BitVector.html">llvm::BitVector</a></div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00075">BitVector.h:75</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a16d7c5f77008a84ae20bf4a5c41e51f0ae88b4464fe326a51e6e6dfae28dd536d"><div class="ttname"><a href="namespacellvm_1_1omp.html#a16d7c5f77008a84ae20bf4a5c41e51f0ae88b4464fe326a51e6e6dfae28dd536d">llvm::omp::RTLDependInfoFields::Len</a></div><div class="ttdeci">@ Len</div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_a07ed0bfaa124c15897944fe3eaa971ab"><div class="ttname"><a href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned long or uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="aRDFGraph_8cpp_html_af153ca0eadca8bc464492b7aba7feb00"><div class="ttname"><a href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a></div><div class="ttdeci">const DataFlowGraph &amp; G</div><div class="ttdef"><b>Definition:</b> <a href="RDFGraph_8cpp_source.html#l00200">RDFGraph.cpp:200</a></div></div>
<div class="ttc" id="anamespacellvm_html_a05609d049bfe3c5c2f64711566131a86"><div class="ttname"><a href="namespacellvm.html#a05609d049bfe3c5c2f64711566131a86">llvm::ThreadPriority</a></div><div class="ttdeci">ThreadPriority</div><div class="ttdef"><b>Definition:</b> <a href="Threading_8h_source.html#l00240">Threading.h:240</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1SDWA_html_a487d59303b94fbf4adddd9a08c30da0aaddbc3f8d705f646af626fd73cdf3618b"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1SDWA.html#a487d59303b94fbf4adddd9a08c30da0aaddbc3f8d705f646af626fd73cdf3618b">llvm::AMDGPU::SDWA::DWORD</a></div><div class="ttdeci">@ DWORD</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00782">SIDefines.h:782</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa79a8fc8721314e9f7199ca4cc22e51b"><div class="ttname"><a href="namespacellvm.html#aa79a8fc8721314e9f7199ca4cc22e51b">llvm::get_physical_cores</a></div><div class="ttdeci">int get_physical_cores()</div><div class="ttdoc">Returns how many physical cores (as opposed to logical cores returned from thread::hardware_concurren...</div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="aLazyValueInfo_8cpp_html_add11cb1bc38847ce70e526af765dcce7"><div class="ttname"><a href="LazyValueInfo_8cpp.html#add11cb1bc38847ce70e526af765dcce7">info</a></div><div class="ttdeci">lazy value info</div><div class="ttdef"><b>Definition:</b> <a href="LazyValueInfo_8cpp_source.html#l00058">LazyValueInfo.cpp:58</a></div></div>
<div class="ttc" id="aclassuint32__t_html"><div class="ttname"><a href="classuint32__t.html">uint32_t</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MachO_html_a11849daa1b55a8c00390b349546112e7a2005c1eb611537027feb90dafcbbb444"><div class="ttname"><a href="namespacellvm_1_1MachO.html#a11849daa1b55a8c00390b349546112e7a2005c1eb611537027feb90dafcbbb444">llvm::MachO::All</a></div><div class="ttdeci">@ All</div><div class="ttdef"><b>Definition:</b> <a href="InterfaceFile_8h_source.html#l00069">InterfaceFile.h:69</a></div></div>
<div class="ttc" id="anamespacellvm_1_1GraphProgram_html_a0ad4685976f8c4d4a697a53fbe05d10b"><div class="ttname"><a href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">llvm::GraphProgram::Name</a></div><div class="ttdeci">Name</div><div class="ttdef"><b>Definition:</b> <a href="GraphWriter_8h_source.html#l00050">GraphWriter.h:50</a></div></div>
<div class="ttc" id="aclassllvm_1_1ThreadPoolStrategy_html_a37c77aaf2dbf3d8f8599c3e734425a0e"><div class="ttname"><a href="classllvm_1_1ThreadPoolStrategy.html#a37c77aaf2dbf3d8f8599c3e734425a0e">llvm::ThreadPoolStrategy::compute_cpu_socket</a></div><div class="ttdeci">std::optional&lt; unsigned &gt; compute_cpu_socket(unsigned ThreadPoolNum) const</div><div class="ttdoc">Finds the CPU socket where a thread should go.</div></div>
<div class="ttc" id="anamespacellvm_html_ad84885edee73e7b54f903c49e721022e"><div class="ttname"><a href="namespacellvm.html#ad84885edee73e7b54f903c49e721022e">llvm::llvm_execute_on_thread_impl</a></div><div class="ttdeci">thread::native_handle_type llvm_execute_on_thread_impl(thread::start_routine_type ThreadFunc, void *Arg, std::optional&lt; unsigned &gt; StackSizeInBytes)</div></div>
<div class="ttc" id="anamespacellvm_1_1TargetStackID_html_a71392100eb15ba746b1f898986f5d8a5af2af9eb94ff1bc08308bc738d744ee85"><div class="ttname"><a href="namespacellvm_1_1TargetStackID.html#a71392100eb15ba746b1f898986f5d8a5af2af9eb94ff1bc08308bc738d744ee85">llvm::TargetStackID::Default</a></div><div class="ttdeci">@ Default</div><div class="ttdef"><b>Definition:</b> <a href="TargetFrameLowering_8h_source.html#l00028">TargetFrameLowering.h:28</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8c2b8c55bed6ebcda541d21bab7e6a42"><div class="ttname"><a href="namespacellvm.html#a8c2b8c55bed6ebcda541d21bab7e6a42">llvm::set_thread_name</a></div><div class="ttdeci">void set_thread_name(const Twine &amp;Name)</div><div class="ttdoc">Set the name of the current thread.</div></div>
<div class="ttc" id="anamespacellvm_html_a52707521404204cff06fe8d1a663952b"><div class="ttname"><a href="namespacellvm.html#a52707521404204cff06fe8d1a663952b">llvm::get_cpus</a></div><div class="ttdeci">unsigned get_cpus()</div><div class="ttdoc">Returns how many physical CPUs or NUMA groups the system has.</div></div>
<div class="ttc" id="anamespacellvm_html_a95d9b0bc59230b7a9ecfd7b49e001f2a"><div class="ttname"><a href="namespacellvm.html#a95d9b0bc59230b7a9ecfd7b49e001f2a">llvm::SetThreadPriorityResult</a></div><div class="ttdeci">SetThreadPriorityResult</div><div class="ttdef"><b>Definition:</b> <a href="Threading_8h_source.html#l00255">Threading.h:255</a></div></div>
<div class="ttc" id="anamespacellvm_html_a28b7afb4a2fb8c445d23dc24b3627bd6"><div class="ttname"><a href="namespacellvm.html#a28b7afb4a2fb8c445d23dc24b3627bd6">llvm::get_thread_affinity_mask</a></div><div class="ttdeci">llvm::BitVector get_thread_affinity_mask()</div><div class="ttdoc">Returns a mask that represents on which hardware thread, core, CPU, NUMA group, the calling thread ca...</div></div>
<div class="ttc" id="anamespacellvm_html_a071c654a304712c768496d4ea8b404e9"><div class="ttname"><a href="namespacellvm.html#a071c654a304712c768496d4ea8b404e9">llvm::set_thread_priority</a></div><div class="ttdeci">SetThreadPriorityResult set_thread_priority(ThreadPriority Priority)</div></div>
<div class="ttc" id="anamespacellvm_html_a1596a52acbeafe1bba5bbef7f2c8abe3"><div class="ttname"><a href="namespacellvm.html#a1596a52acbeafe1bba5bbef7f2c8abe3">llvm::ReportLastErrorFatal</a></div><div class="ttdeci">void ReportLastErrorFatal(const char *Msg)</div><div class="ttdef"><b>Definition:</b> <a href="WindowsSupport_8h_source.html#l00074">WindowsSupport.h:74</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1VGPRIndexMode_html_a9afd95476c40096a5898ba0f06370b3a"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1VGPRIndexMode.html#a9afd95476c40096a5898ba0f06370b3a">llvm::AMDGPU::VGPRIndexMode::Id</a></div><div class="ttdeci">Id</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00250">SIDefines.h:250</a></div></div>
<div class="ttc" id="aThreading_8cpp_html_a60105968395d0951760c358c56e0f561"><div class="ttname"><a href="Threading_8cpp.html#a60105968395d0951760c358c56e0f561">computeHostNumHardwareThreads</a></div><div class="ttdeci">static int computeHostNumHardwareThreads()</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:07:46 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

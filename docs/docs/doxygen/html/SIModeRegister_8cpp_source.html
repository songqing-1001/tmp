<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Target/AMDGPU/SIModeRegister.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_794e483eb1cc7921d35fd149d9cc325b.html">Target</a></li><li class="navelem"><a class="el" href="dir_447ce995d6e35417de5ec3060e97c93e.html">AMDGPU</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">SIModeRegister.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="SIModeRegister_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===-- SIModeRegister.cpp - Mode Register --------------------------------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span><span class="comment"></span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">/// \file</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">/// This pass inserts changes to the Mode register settings as required.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">/// Note that currently it only deals with the Double Precision Floating Point</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">/// rounding mode setting, but is intended to be generic enough to be easily</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">/// expanded.</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"></span><span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AMDGPU_8h.html">AMDGPU.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="GCNSubtarget_8h.html">GCNSubtarget.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AMDGPUMCTargetDesc_8h.html">MCTargetDesc/AMDGPUMCTargetDesc.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineFunctionPass_8h.html">llvm/CodeGen/MachineFunctionPass.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;queue&gt;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160; </div>
<div class="line"><a name="l00023"></a><span class="lineno"><a class="line" href="SIModeRegister_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   23</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;si-mode-register&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160; </div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<a class="code" href="SIModeRegister_8cpp.html#a30c0948db8a2855682bf18fe7ef02750">STATISTIC</a>(NumSetregInserted, <span class="stringliteral">&quot;Number of setreg of mode register inserted.&quot;</span>);</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160; </div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160; </div>
<div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="structStatus.html">   29</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structStatus.html">Status</a> {</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <span class="comment">// Mask is a bitmask where a &#39;1&#39; indicates the corresponding Mode bit has a</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  <span class="comment">// known value</span></div>
<div class="line"><a name="l00032"></a><span class="lineno"><a class="line" href="structStatus.html#ad278024750ac1478e4a551043df7ff65">   32</a></span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="structStatus.html#ad278024750ac1478e4a551043df7ff65">Mask</a>;</div>
<div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="structStatus.html#ae0d986f890ca1ef807fb7bbf99cff5bf">   33</a></span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="structStatus.html#ae0d986f890ca1ef807fb7bbf99cff5bf">Mode</a>;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160; </div>
<div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="structStatus.html#a944586fb328a3524805748c8f7b17f32">   35</a></span>&#160;  <a class="code" href="structStatus.html#a944586fb328a3524805748c8f7b17f32">Status</a>() : <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>(0), <a class="code" href="SIWholeQuadMode_8cpp.html#a0c198437833c48138f49e3589bd08773">Mode</a>(0){};</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160; </div>
<div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="structStatus.html#a521e597985be481067010a6b7b40f7dc">   37</a></span>&#160;  <a class="code" href="structStatus.html#a521e597985be481067010a6b7b40f7dc">Status</a>(<span class="keywordtype">unsigned</span> NewMask, <span class="keywordtype">unsigned</span> NewMode) : <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>(NewMask), <a class="code" href="SIWholeQuadMode_8cpp.html#a0c198437833c48138f49e3589bd08773">Mode</a>(NewMode) {</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <a class="code" href="SIWholeQuadMode_8cpp.html#a0c198437833c48138f49e3589bd08773">Mode</a> &amp;= <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  };</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160; </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <span class="comment">// merge two status values such that only values that don&#39;t conflict are</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <span class="comment">// preserved</span></div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="structStatus.html#a7d238cf08ca2aca7b1ef0e8b7a4b0770">   43</a></span>&#160;  <a class="code" href="structStatus.html">Status</a> <a class="code" href="structStatus.html#a7d238cf08ca2aca7b1ef0e8b7a4b0770">merge</a>(<span class="keyword">const</span> <a class="code" href="structStatus.html">Status</a> &amp;<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structStatus.html">Status</a>((<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> | <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.Mask), ((<a class="code" href="SIWholeQuadMode_8cpp.html#a0c198437833c48138f49e3589bd08773">Mode</a> &amp; ~<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.Mask) | (<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.Mode &amp; <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.Mask)));</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  }</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <span class="comment">// merge an unknown value by using the unknown value&#39;s mask to remove bits</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="comment">// from the result</span></div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="structStatus.html#aedf18ee1c895e1fea6c0e7e195a5a1ca">   49</a></span>&#160;  <a class="code" href="structStatus.html">Status</a> <a class="code" href="structStatus.html#aedf18ee1c895e1fea6c0e7e195a5a1ca">mergeUnknown</a>(<span class="keywordtype">unsigned</span> newMask) {</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structStatus.html">Status</a>(<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> &amp; ~newMask, <a class="code" href="SIWholeQuadMode_8cpp.html#a0c198437833c48138f49e3589bd08773">Mode</a> &amp; ~newMask);</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  }</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160; </div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="comment">// intersect two Status values to produce a mode and mask that is a subset</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <span class="comment">// of both values</span></div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="structStatus.html#aa6c36013b7c84c75cc978506e306a1a4">   55</a></span>&#160;  <a class="code" href="structStatus.html">Status</a> <a class="code" href="structStatus.html#aa6c36013b7c84c75cc978506e306a1a4">intersect</a>(<span class="keyword">const</span> <a class="code" href="structStatus.html">Status</a> &amp;<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keywordtype">unsigned</span> NewMask = (<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> &amp; <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.Mask) &amp; (<a class="code" href="SIWholeQuadMode_8cpp.html#a0c198437833c48138f49e3589bd08773">Mode</a> ^ ~<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.Mode);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keywordtype">unsigned</span> NewMode = (<a class="code" href="SIWholeQuadMode_8cpp.html#a0c198437833c48138f49e3589bd08773">Mode</a> &amp; NewMask);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structStatus.html">Status</a>(NewMask, NewMode);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  }</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="comment">// produce the delta required to change the Mode to the required Mode</span></div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="structStatus.html#a4d49768146ce886e2eb17aacd8159ca9">   62</a></span>&#160;  <a class="code" href="structStatus.html">Status</a> <a class="code" href="structStatus.html#a4d49768146ce886e2eb17aacd8159ca9">delta</a>(<span class="keyword">const</span> <a class="code" href="structStatus.html">Status</a> &amp;<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structStatus.html">Status</a>((<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.Mask &amp; (<a class="code" href="SIWholeQuadMode_8cpp.html#a0c198437833c48138f49e3589bd08773">Mode</a> ^ <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.Mode)) | (~<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> &amp; <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.Mask), <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.Mode);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  }</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160; </div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="structStatus.html#a6927b9d6af12920e80ae469aa1660491">   66</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structStatus.html#a6927b9d6af12920e80ae469aa1660491">operator==</a>(<span class="keyword">const</span> <a class="code" href="structStatus.html">Status</a> &amp;<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> == <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.Mask) &amp;&amp; (<a class="code" href="SIWholeQuadMode_8cpp.html#a0c198437833c48138f49e3589bd08773">Mode</a> == <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.Mode);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  }</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="structStatus.html#aa92eb76e83481bf6df6ecb43ae05964d">   70</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structStatus.html#aa92eb76e83481bf6df6ecb43ae05964d">operator!=</a>(<span class="keyword">const</span> <a class="code" href="structStatus.html">Status</a> &amp;<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> !(*<span class="keyword">this</span> == <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>); }</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160; </div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="structStatus.html#a78cea2430649ceb585466218022bd579">   72</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structStatus.html#a78cea2430649ceb585466218022bd579">isCompatible</a>(<a class="code" href="structStatus.html">Status</a> &amp;<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>) {</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keywordflow">return</span> ((<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> &amp; <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.Mask) == <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.Mask) &amp;&amp; ((<a class="code" href="SIWholeQuadMode_8cpp.html#a0c198437833c48138f49e3589bd08773">Mode</a> &amp; <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.Mask) == <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.Mode);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  }</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="structStatus.html#a62c91ffba279ca27ad70766196e3367c">   76</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structStatus.html#a62c91ffba279ca27ad70766196e3367c">isCombinable</a>(<a class="code" href="structStatus.html">Status</a> &amp;<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>) { <span class="keywordflow">return</span> !(<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> &amp; <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.Mask) || isCompatible(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>); }</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;};</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="classBlockData.html">   79</a></span>&#160;<span class="keyword">class </span><a class="code" href="classBlockData.html#a3a4dfddb67525d6766e5b78956395fb9">BlockData</a> {</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="comment">// The Status that represents the mode register settings required by the</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="comment">// FirstInsertionPoint (if any) in this block. Calculated in Phase 1.</span></div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="classBlockData.html#a7e85ac3d26806a2701681fe1a29fe08b">   83</a></span>&#160;  <a class="code" href="structStatus.html">Status</a> <a class="code" href="classBlockData.html#a7e85ac3d26806a2701681fe1a29fe08b">Require</a>;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="comment">// The Status that represents the net changes to the Mode register made by</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="comment">// this block, Calculated in Phase 1.</span></div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="classBlockData.html#a1f3c9376e6a4054bbc88635859eb16cb">   87</a></span>&#160;  <a class="code" href="structStatus.html">Status</a> <a class="code" href="classBlockData.html#a1f3c9376e6a4054bbc88635859eb16cb">Change</a>;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="comment">// The Status that represents the mode register settings on exit from this</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="comment">// block. Calculated in Phase 2.</span></div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="classBlockData.html#a74d8253f53eb9b3275801c555cb447ec">   91</a></span>&#160;  <a class="code" href="structStatus.html">Status</a> <a class="code" href="classBlockData.html#a74d8253f53eb9b3275801c555cb447ec">Exit</a>;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <span class="comment">// The Status that represents the intersection of exit Mode register settings</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="comment">// from all predecessor blocks. Calculated in Phase 2, and used by Phase 3.</span></div>
<div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="classBlockData.html#a43a066245da94488e55f6cc308f46636">   95</a></span>&#160;  <a class="code" href="structStatus.html">Status</a> <a class="code" href="classBlockData.html#a43a066245da94488e55f6cc308f46636">Pred</a>;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="comment">// In Phase 1 we record the first instruction that has a mode requirement,</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="comment">// which is used in Phase 3 if we need to insert a mode change.</span></div>
<div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="classBlockData.html#a596f7df03267b0d4812287cac2550bff">   99</a></span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="classBlockData.html#a596f7df03267b0d4812287cac2550bff">FirstInsertionPoint</a>;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="comment">// A flag to indicate whether an Exit value has been set (we can&#39;t tell by</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="comment">// examining the Exit value itself as all values may be valid results).</span></div>
<div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="classBlockData.html#a8a91d4cd279a7137bbd4472e375c7d35">  103</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classBlockData.html#a8a91d4cd279a7137bbd4472e375c7d35">ExitSet</a>;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="classBlockData.html#a3a4dfddb67525d6766e5b78956395fb9">  105</a></span>&#160;  <a class="code" href="classBlockData.html#a3a4dfddb67525d6766e5b78956395fb9">BlockData</a>() : FirstInsertionPoint(nullptr), ExitSet(<a class="code" href="namespacefalse.html">false</a>){};</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;};</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; </div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="keyword">class </span>SIModeRegister : <span class="keyword">public</span> <a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a> {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  std::vector&lt;std::unique_ptr&lt;BlockData&gt;&gt; BlockInfo;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  std::queue&lt;MachineBasicBlock *&gt; Phase2List;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="comment">// The default mode register setting currently only caters for the floating</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="comment">// point double precision rounding mode.</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="comment">// We currently assume the default rounding mode is Round to Nearest</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="comment">// NOTE: this should come from a per function rounding mode setting once such</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="comment">// a setting exists.</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="keywordtype">unsigned</span> DefaultMode = <a class="code" href="SIDefines_8h.html#a41f16ecef0a587cf75f9be3cce955f46">FP_ROUND_ROUND_TO_NEAREST</a>;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <a class="code" href="structStatus.html">Status</a> DefaultStatus =</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      <a class="code" href="structStatus.html">Status</a>(<a class="code" href="SIDefines_8h.html#a3bf6098fe268447f483c33ef54b0bd27">FP_ROUND_MODE_DP</a>(0<a class="code" href="README-SSE_8txt.html#a11ca92463dc5dfc09bbe2ba2f3ea0c96">x3</a>), <a class="code" href="SIDefines_8h.html#a3bf6098fe268447f483c33ef54b0bd27">FP_ROUND_MODE_DP</a>(DefaultMode));</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  SIModeRegister() : <a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a>(<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>) {}</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="keywordtype">bool</span> runOnMachineFunction(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const override </span>{</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#af11a6ebf7ab3c388234cb6d5378439a3">setPreservesCFG</a>();</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <a class="code" href="classllvm_1_1MachineFunctionPass.html#a864fd57b4304ef933b3281d0ef85a88e">MachineFunctionPass::getAnalysisUsage</a>(AU);</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  }</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="keywordtype">void</span> processBlockPhase1(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1SIInstrInfo.html">SIInstrInfo</a> *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="keywordtype">void</span> processBlockPhase2(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1SIInstrInfo.html">SIInstrInfo</a> *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="keywordtype">void</span> processBlockPhase3(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1SIInstrInfo.html">SIInstrInfo</a> *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <a class="code" href="structStatus.html">Status</a> getInstructionMode(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1SIInstrInfo.html">SIInstrInfo</a> *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160; </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="keywordtype">void</span> insertSetreg(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SIInstrInfo.html">SIInstrInfo</a> *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>, <a class="code" href="structStatus.html">Status</a> InstrMode);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;};</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;} <span class="comment">// End anonymous namespace.</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160; </div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<a class="code" href="PassSupport_8h.html#af807c9595d50b45c0008924c4679c85c">INITIALIZE_PASS</a>(SIModeRegister, <a class="code" href="SIModeRegister_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>,</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                <span class="stringliteral">&quot;Insert required mode register values&quot;</span>, <span class="keyword">false</span>, <span class="keyword">false</span>)</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;char SIModeRegister::<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a> = 0;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160; </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="keywordtype">char</span> &amp;<a class="code" href="namespacellvm.html">llvm</a>::<a class="code" href="namespacellvm.html#a6c0ae8eb34e767f864323920af14b58b">SIModeRegisterID</a> = SIModeRegister::<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160; </div>
<div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="namespacellvm.html#a1ce45e5b72435b4b7423275d41cd2b63">  158</a></span>&#160;<a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a> *<a class="code" href="namespacellvm.html">llvm</a>::<a class="code" href="namespacellvm.html#a1ce45e5b72435b4b7423275d41cd2b63">createSIModeRegisterPass</a>() { <span class="keywordflow">return</span> <span class="keyword">new</span> SIModeRegister(); }</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160; </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">// Determine the Mode register setting required for this instruction.</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">// Instructions which don&#39;t use the Mode register return a null Status.</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">// Note this currently only deals with instructions that use the floating point</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">// double precision setting.</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<a class="code" href="structStatus.html">Status</a> SIModeRegister::getInstructionMode(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                                          <span class="keyword">const</span> <a class="code" href="classllvm_1_1SIInstrInfo.html">SIInstrInfo</a> *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>) {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;usesFPDPRounding(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) ||</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == AMDGPU::FPTRUNC_UPWARD_PSEUDO ||</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == AMDGPU::FPTRUNC_DOWNWARD_PSEUDO) {</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode()) {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">case</span> AMDGPU::V_INTERP_P1LL_F16:</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordflow">case</span> AMDGPU::V_INTERP_P1LV_F16:</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">case</span> AMDGPU::V_INTERP_P2_F16:</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      <span class="comment">// f16 interpolation instructions need double precision round to zero</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="structStatus.html">Status</a>(<a class="code" href="SIDefines_8h.html#a3bf6098fe268447f483c33ef54b0bd27">FP_ROUND_MODE_DP</a>(3),</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                    <a class="code" href="SIDefines_8h.html#a3bf6098fe268447f483c33ef54b0bd27">FP_ROUND_MODE_DP</a>(<a class="code" href="SIDefines_8h.html#a4acbc6661acdb47237bd5ed7c9b73f3d">FP_ROUND_ROUND_TO_ZERO</a>));</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">case</span> AMDGPU::FPTRUNC_UPWARD_PSEUDO: {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      <span class="comment">// Replacing the pseudo by a real instruction in place</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;getSubtarget().hasTrue16BitInsts()) {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> = *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getParent();</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>(*<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">getParent</a>(), <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.setDesc(<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(AMDGPU::V_CVT_F16_F32_t16_e64));</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> Src0 = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.removeOperand(1);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.addImm(0); <span class="comment">// src0_modifiers</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.add(Src0); <span class="comment">// re-add src0 operand</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.addImm(0); <span class="comment">// clamp</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.addImm(0); <span class="comment">// omod</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.setDesc(<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(AMDGPU::V_CVT_F16_F32_e32));</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="structStatus.html">Status</a>(<a class="code" href="SIDefines_8h.html#a3bf6098fe268447f483c33ef54b0bd27">FP_ROUND_MODE_DP</a>(3),</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                    <a class="code" href="SIDefines_8h.html#a3bf6098fe268447f483c33ef54b0bd27">FP_ROUND_MODE_DP</a>(<a class="code" href="SIDefines_8h.html#a3de6b9fc40f27b2963ef551d5e2c0387">FP_ROUND_ROUND_TO_INF</a>));</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    }</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordflow">case</span> AMDGPU::FPTRUNC_DOWNWARD_PSEUDO: {</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      <span class="comment">// Replacing the pseudo by a real instruction in place</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;getSubtarget().hasTrue16BitInsts()) {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> = *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getParent();</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>(*<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">getParent</a>(), <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.setDesc(<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(AMDGPU::V_CVT_F16_F32_t16_e64));</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> Src0 = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.removeOperand(1);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.addImm(0); <span class="comment">// src0_modifiers</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.add(Src0); <span class="comment">// re-add src0 operand</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.addImm(0); <span class="comment">// clamp</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.addImm(0); <span class="comment">// omod</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.setDesc(<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(AMDGPU::V_CVT_F16_F32_e32));</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="structStatus.html">Status</a>(<a class="code" href="SIDefines_8h.html#a3bf6098fe268447f483c33ef54b0bd27">FP_ROUND_MODE_DP</a>(3),</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                    <a class="code" href="SIDefines_8h.html#a3bf6098fe268447f483c33ef54b0bd27">FP_ROUND_MODE_DP</a>(<a class="code" href="SIDefines_8h.html#ab9143452ed7db1816eba0c236666b84d">FP_ROUND_ROUND_TO_NEGINF</a>));</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    }</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      <span class="keywordflow">return</span> DefaultStatus;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    }</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  }</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="structStatus.html">Status</a>();</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;}</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">// Insert a setreg instruction to update the Mode register.</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">// It is possible (though unlikely) for an instruction to require a change to</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">// the value of disjoint parts of the Mode register when we don&#39;t know the</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">// value of the intervening bits. In that case we need to use more than one</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">// setreg instruction.</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="keywordtype">void</span> SIModeRegister::insertSetreg(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                                  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SIInstrInfo.html">SIInstrInfo</a> *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>, <a class="code" href="structStatus.html">Status</a> InstrMode) {</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <span class="keywordflow">while</span> (InstrMode.<a class="code" href="structStatus.html#ad278024750ac1478e4a551043df7ff65">Mask</a>) {</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> = llvm::countr_zero&lt;unsigned&gt;(InstrMode.<a class="code" href="structStatus.html#ad278024750ac1478e4a551043df7ff65">Mask</a>);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a> = llvm::countr_one&lt;unsigned&gt;(InstrMode.<a class="code" href="structStatus.html#ad278024750ac1478e4a551043df7ff65">Mask</a> &gt;&gt; <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="classllvm_1_1Value.html">Value</a> = (InstrMode.<a class="code" href="structStatus.html#ae0d986f890ca1ef807fb7bbf99cff5bf">Mode</a> &gt;&gt; <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>) &amp; ((1 &lt;&lt; <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a>) - 1);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <a class="code" href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keyword">nullptr</span>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(AMDGPU::S_SETREG_IMM32_B32))</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="classllvm_1_1Value.html">Value</a>)</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(((<a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a> - 1) &lt;&lt; <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a2dd789820f1036a942eb3ee6a4b8a71da607eee7dd279e8007ab5c43c71f1a2bb">AMDGPU::Hwreg::WIDTH_M1_SHIFT_</a>) |</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                (<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> &lt;&lt; <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6110fc30bc7311a6cf99814530362e21aac0a8352cc7cdb2686e5536f915725f1">AMDGPU::Hwreg::OFFSET_SHIFT_</a>) |</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                (<a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a018924463515df5f66f3c5a039750da8aebfc48ed48afe18e84417d0de513b6bb">AMDGPU::Hwreg::ID_MODE</a> &lt;&lt; <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a018924463515df5f66f3c5a039750da8a15f3309c3ab0756b51a04de06e4e5e68">AMDGPU::Hwreg::ID_SHIFT_</a>));</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    ++NumSetregInserted;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    InstrMode.<a class="code" href="structStatus.html#ad278024750ac1478e4a551043df7ff65">Mask</a> &amp;= ~(((1 &lt;&lt; <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a>) - 1) &lt;&lt; <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  }</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;}</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">// In Phase 1 we iterate through the instructions of the block and for each</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">// instruction we get its mode usage. If the instruction uses the Mode register</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment">// we:</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment">// - update the Change status, which tracks the changes to the Mode register</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">//   made by this block</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">// - if this instruction&#39;s requirements are compatible with the current setting</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment">//   of the Mode register we merge the modes</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment">// - if it isn&#39;t compatible and an InsertionPoint isn&#39;t set, then we set the</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment">//   InsertionPoint to the current instruction, and we remember the current</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">//   mode</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">// - if it isn&#39;t compatible and InsertionPoint is set we insert a seteg before</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment">//   that instruction (unless this instruction forms part of the block&#39;s</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment">//   entry requirements in which case the insertion is deferred until Phase 3</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment">//   when predecessor exit values are known), and move the insertion point to</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment">//   this instruction</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment">// - if this is a setreg instruction we treat it as an incompatible instruction.</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment">//   This is sub-optimal but avoids some nasty corner cases, and is expected to</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment">//   occur very rarely.</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">// - on exit we have set the Require, Change, and initial Exit modes.</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="keywordtype">void</span> SIModeRegister::processBlockPhase1(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>,</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                                        <span class="keyword">const</span> <a class="code" href="classllvm_1_1SIInstrInfo.html">SIInstrInfo</a> *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>) {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <span class="keyword">auto</span> NewInfo = std::make_unique&lt;BlockData&gt;();</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *InsertionPoint = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <span class="comment">// RequirePending is used to indicate whether we are collecting the initial</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="comment">// requirements for the block, and need to defer the first InsertionPoint to</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="comment">// Phase 3. It is set to false once we have set FirstInsertionPoint, or when</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <span class="comment">// we discover an explicit setreg that means this block doesn&#39;t have any</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="comment">// initial requirements.</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="keywordtype">bool</span> RequirePending = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <a class="code" href="structStatus.html">Status</a> IPChange;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>) {</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <a class="code" href="structStatus.html">Status</a> InstrMode = getInstructionMode(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == AMDGPU::S_SETREG_B32 ||</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == AMDGPU::S_SETREG_B32_mode ||</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == AMDGPU::S_SETREG_IMM32_B32 ||</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == AMDGPU::S_SETREG_IMM32_B32_mode) {</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      <span class="comment">// We preserve any explicit mode register setreg instruction we encounter,</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      <span class="comment">// as we assume it has been inserted by a higher authority (this is</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      <span class="comment">// likely to be a very rare occurrence).</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      <span class="keywordtype">unsigned</span> Dst = <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;getNamedOperand(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, AMDGPU::OpName::simm16)-&gt;getImm();</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      <span class="keywordflow">if</span> (((Dst &amp; <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a018924463515df5f66f3c5a039750da8a4695b7195044788ba3cbb7b53df196bf">AMDGPU::Hwreg::ID_MASK_</a>) &gt;&gt; <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a018924463515df5f66f3c5a039750da8a15f3309c3ab0756b51a04de06e4e5e68">AMDGPU::Hwreg::ID_SHIFT_</a>) !=</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;          <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a018924463515df5f66f3c5a039750da8aebfc48ed48afe18e84417d0de513b6bb">AMDGPU::Hwreg::ID_MODE</a>)</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a> = ((Dst &amp; <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a2dd789820f1036a942eb3ee6a4b8a71da4c6e1231407d8f2c735947f02cbcee1f">AMDGPU::Hwreg::WIDTH_M1_MASK_</a>) &gt;&gt;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                        <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a2dd789820f1036a942eb3ee6a4b8a71da607eee7dd279e8007ab5c43c71f1a2bb">AMDGPU::Hwreg::WIDTH_M1_SHIFT_</a>) +</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                       1;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> =</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;          (Dst &amp; <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6110fc30bc7311a6cf99814530362e21a87dc8c966eee8fa4eb7c4d526effcdc8">AMDGPU::Hwreg::OFFSET_MASK_</a>) &gt;&gt; <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6110fc30bc7311a6cf99814530362e21aac0a8352cc7cdb2686e5536f915725f1">AMDGPU::Hwreg::OFFSET_SHIFT_</a>;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = ((1 &lt;&lt; <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a>) - 1) &lt;&lt; <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160; </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      <span class="comment">// If an InsertionPoint is set we will insert a setreg there.</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      <span class="keywordflow">if</span> (InsertionPoint) {</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        insertSetreg(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, InsertionPoint, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>, IPChange.<a class="code" href="structStatus.html#a4d49768146ce886e2eb17aacd8159ca9">delta</a>(NewInfo-&gt;Change));</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        InsertionPoint = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      }</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      <span class="comment">// If this is an immediate then we know the value being set, but if it is</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      <span class="comment">// not an immediate then we treat the modified bits of the mode register</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      <span class="comment">// as unknown.</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == AMDGPU::S_SETREG_IMM32_B32 ||</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;          <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == AMDGPU::S_SETREG_IMM32_B32_mode) {</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        <span class="keywordtype">unsigned</span> Val = <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;getNamedOperand(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, AMDGPU::OpName::imm)-&gt;getImm();</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        <span class="keywordtype">unsigned</span> <a class="code" href="SIWholeQuadMode_8cpp.html#a0c198437833c48138f49e3589bd08773">Mode</a> = (Val &lt;&lt; <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>) &amp; <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        <a class="code" href="structStatus.html">Status</a> Setreg = <a class="code" href="structStatus.html">Status</a>(<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>, <a class="code" href="SIWholeQuadMode_8cpp.html#a0c198437833c48138f49e3589bd08773">Mode</a>);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <span class="comment">// If we haven&#39;t already set the initial requirements for the block we</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        <span class="comment">// don&#39;t need to as the requirements start from this explicit setreg.</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        RequirePending = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        NewInfo-&gt;Change = NewInfo-&gt;Change.merge(Setreg);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        NewInfo-&gt;Change = NewInfo-&gt;Change.mergeUnknown(<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>);</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      }</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!NewInfo-&gt;Change.isCompatible(InstrMode)) {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      <span class="comment">// This instruction uses the Mode register and its requirements aren&#39;t</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      <span class="comment">// compatible with the current mode.</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      <span class="keywordflow">if</span> (InsertionPoint) {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <span class="comment">// If the required mode change cannot be included in the current</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <span class="comment">// InsertionPoint changes, we need a setreg and start a new</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <span class="comment">// InsertionPoint.</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="keywordflow">if</span> (!IPChange.<a class="code" href="structStatus.html#a4d49768146ce886e2eb17aacd8159ca9">delta</a>(NewInfo-&gt;Change).<a class="code" href="structStatus.html#a62c91ffba279ca27ad70766196e3367c">isCombinable</a>(InstrMode)) {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;          <span class="keywordflow">if</span> (RequirePending) {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            <span class="comment">// This is the first insertionPoint in the block so we will defer</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            <span class="comment">// the insertion of the setreg to Phase 3 where we know whether or</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            <span class="comment">// not it is actually needed.</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            NewInfo-&gt;FirstInsertionPoint = InsertionPoint;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            NewInfo-&gt;Require = NewInfo-&gt;Change;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            RequirePending = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            insertSetreg(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, InsertionPoint, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>,</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                         IPChange.<a class="code" href="structStatus.html#a4d49768146ce886e2eb17aacd8159ca9">delta</a>(NewInfo-&gt;Change));</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            IPChange = NewInfo-&gt;Change;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;          }</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;          <span class="comment">// Set the new InsertionPoint</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;          InsertionPoint = &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        }</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        NewInfo-&gt;Change = NewInfo-&gt;Change.merge(InstrMode);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        <span class="comment">// No InsertionPoint is currently set - this is either the first in</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        <span class="comment">// the block or we have previously seen an explicit setreg.</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        InsertionPoint = &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        IPChange = NewInfo-&gt;Change;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        NewInfo-&gt;Change = NewInfo-&gt;Change.<a class="code" href="structStatus.html#a7d238cf08ca2aca7b1ef0e8b7a4b0770">merge</a>(InstrMode);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      }</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    }</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  }</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="keywordflow">if</span> (RequirePending) {</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="comment">// If we haven&#39;t yet set the initial requirements for the block we set them</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="comment">// now.</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    NewInfo-&gt;FirstInsertionPoint = InsertionPoint;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    NewInfo-&gt;Require = NewInfo-&gt;Change;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (InsertionPoint) {</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="comment">// We need to insert a setreg at the InsertionPoint</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    insertSetreg(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, InsertionPoint, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>, IPChange.<a class="code" href="structStatus.html#a4d49768146ce886e2eb17aacd8159ca9">delta</a>(NewInfo-&gt;Change));</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  }</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  NewInfo-&gt;Exit = NewInfo-&gt;Change;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  BlockInfo[<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3aa22d521bd6a7e6b9f35545dc7b0f1e">getNumber</a>()] = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(NewInfo);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;}</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160; </div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="comment">// In Phase 2 we revisit each block and calculate the common Mode register</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment">// value provided by all predecessor blocks. If the Exit value for the block</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment">// is changed, then we add the successor blocks to the worklist so that the</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="comment">// exit value is propagated.</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="keywordtype">void</span> SIModeRegister::processBlockPhase2(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>,</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                                        <span class="keyword">const</span> <a class="code" href="classllvm_1_1SIInstrInfo.html">SIInstrInfo</a> *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>) {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  <span class="keywordtype">bool</span> RevisitRequired = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <span class="keywordtype">bool</span> ExitSet = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <span class="keywordtype">unsigned</span> ThisBlock = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3aa22d521bd6a7e6b9f35545dc7b0f1e">getNumber</a>();</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a877507fda31c207ec36a018784369708">pred_empty</a>()) {</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="comment">// There are no predecessors, so use the default starting status.</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    BlockInfo[ThisBlock]-&gt;Pred = DefaultStatus;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    ExitSet = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="comment">// Build a status that is common to all the predecessors by intersecting</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="comment">// all the predecessor exit status values.</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="comment">// Mask bits (which represent the Mode bits with a known value) can only be</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="comment">// added by explicit SETREG instructions or the initial default value -</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="comment">// the intersection process may remove Mask bits.</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="comment">// If we find a predecessor that has not yet had an exit value determined</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="comment">// (this can happen for example if a block is its own predecessor) we defer</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="comment">// use of that value as the Mask will be all zero, and we will revisit this</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="comment">// block again later (unless the only predecessor without an exit value is</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="comment">// this block).</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html#af7bdb491eed9d2c9119dc21d4002de9d">MachineBasicBlock::pred_iterator</a> <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab644fcf07a4c2708333cf66276282357">pred_begin</a>(), <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a0359a738e0412c5a7ea55d61175e0661">pred_end</a>();</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#afd1501c49c84f3addfd108c2484f5674">PB</a> = *(*P);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keywordtype">unsigned</span> PredBlock = <a class="code" href="PassBuilderBindings_8cpp.html#afd1501c49c84f3addfd108c2484f5674">PB</a>.getNumber();</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keywordflow">if</span> ((ThisBlock == PredBlock) &amp;&amp; (std::next(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>) == <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>)) {</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      BlockInfo[ThisBlock]-&gt;Pred = DefaultStatus;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      ExitSet = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (BlockInfo[PredBlock]-&gt;ExitSet) {</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      BlockInfo[ThisBlock]-&gt;Pred = BlockInfo[PredBlock]-&gt;Exit;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      ExitSet = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (PredBlock != ThisBlock)</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;      RevisitRequired = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160; </div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = std::next(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>); <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = std::next(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>)) {</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Pred = *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      <span class="keywordtype">unsigned</span> PredBlock = Pred-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3aa22d521bd6a7e6b9f35545dc7b0f1e">getNumber</a>();</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      <span class="keywordflow">if</span> (BlockInfo[PredBlock]-&gt;ExitSet) {</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        <span class="keywordflow">if</span> (BlockInfo[ThisBlock]-&gt;ExitSet) {</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;          BlockInfo[ThisBlock]-&gt;Pred =</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;              BlockInfo[ThisBlock]-&gt;Pred.intersect(BlockInfo[PredBlock]-&gt;Exit);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;          BlockInfo[ThisBlock]-&gt;Pred = BlockInfo[PredBlock]-&gt;Exit;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        }</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        ExitSet = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (PredBlock != ThisBlock)</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        RevisitRequired = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    }</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  }</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <a class="code" href="structStatus.html">Status</a> TmpStatus =</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;      BlockInfo[ThisBlock]-&gt;Pred.<a class="code" href="structStatus.html#a7d238cf08ca2aca7b1ef0e8b7a4b0770">merge</a>(BlockInfo[ThisBlock]-&gt;Change);</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <span class="keywordflow">if</span> (BlockInfo[ThisBlock]-&gt;Exit != TmpStatus) {</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    BlockInfo[ThisBlock]-&gt;Exit = TmpStatus;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="comment">// Add the successors to the work list so we can propagate the changed exit</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="comment">// status.</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Succ : <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4d2c96836214c1f13357ffb99125fb4a">successors</a>())</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      Phase2List.push(Succ);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  }</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  BlockInfo[ThisBlock]-&gt;ExitSet = ExitSet;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="keywordflow">if</span> (RevisitRequired)</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    Phase2List.push(&amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;}</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160; </div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment">// In Phase 3 we revisit each block and if it has an insertion point defined we</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment">// check whether the predecessor mode meets the block&#39;s entry requirements. If</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment">// not we insert an appropriate setreg instruction to modify the Mode register.</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="keywordtype">void</span> SIModeRegister::processBlockPhase3(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>,</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                                        <span class="keyword">const</span> <a class="code" href="classllvm_1_1SIInstrInfo.html">SIInstrInfo</a> *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>) {</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  <span class="keywordtype">unsigned</span> ThisBlock = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3aa22d521bd6a7e6b9f35545dc7b0f1e">getNumber</a>();</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <span class="keywordflow">if</span> (!BlockInfo[ThisBlock]-&gt;Pred.isCompatible(BlockInfo[ThisBlock]-&gt;Require)) {</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <a class="code" href="structStatus.html">Status</a> Delta =</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        BlockInfo[ThisBlock]-&gt;Pred.<a class="code" href="structStatus.html#a4d49768146ce886e2eb17aacd8159ca9">delta</a>(BlockInfo[ThisBlock]-&gt;Require);</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="keywordflow">if</span> (BlockInfo[ThisBlock]-&gt;FirstInsertionPoint)</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      insertSetreg(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, BlockInfo[ThisBlock]-&gt;FirstInsertionPoint, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>, Delta);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      insertSetreg(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#af649bbd13ab113aa88f7df6c918b6832">instr_front</a>(), <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>, Delta);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  }</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;}</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160; </div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="keywordtype">bool</span> SIModeRegister::runOnMachineFunction(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF) {</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  BlockInfo.resize(MF.<a class="code" href="classllvm_1_1MachineFunction.html#aa22424ba23740b6a748e8d0c239b7e4c">getNumBlockIDs</a>());</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1GCNSubtarget.html">GCNSubtarget</a> &amp;<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a> = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1GCNSubtarget.html">GCNSubtarget</a>&gt;();</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SIInstrInfo.html">SIInstrInfo</a> *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a> = <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.getInstrInfo();</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160; </div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  <span class="comment">// Processing is performed in a number of phases</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160; </div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <span class="comment">// Phase 1 - determine the initial mode required by each block, and add setreg</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <span class="comment">// instructions for intra block requirements.</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : MF)</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    processBlockPhase1(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160; </div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <span class="comment">// Phase 2 - determine the exit mode from each block. We add all blocks to the</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  <span class="comment">// list here, but will also add any that need to be revisited during Phase 2</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  <span class="comment">// processing.</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : MF)</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    Phase2List.push(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <span class="keywordflow">while</span> (!Phase2List.empty()) {</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    processBlockPhase2(*Phase2List.front(), <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    Phase2List.pop();</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  }</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160; </div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <span class="comment">// Phase 3 - add an initial setreg to each block where the required entry mode</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  <span class="comment">// is not satisfied by the exit mode of all its predecessors.</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : MF)</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    processBlockPhase3(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160; </div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  BlockInfo.clear();</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160; </div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aSIDefines_8h_html_a41f16ecef0a587cf75f9be3cce955f46"><div class="ttname"><a href="SIDefines_8h.html#a41f16ecef0a587cf75f9be3cce955f46">FP_ROUND_ROUND_TO_NEAREST</a></div><div class="ttdeci">#define FP_ROUND_ROUND_TO_NEAREST</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l01034">SIDefines.h:1034</a></div></div>
<div class="ttc" id="aclassBlockData_html_a1f3c9376e6a4054bbc88635859eb16cb"><div class="ttname"><a href="classBlockData.html#a1f3c9376e6a4054bbc88635859eb16cb">BlockData::Change</a></div><div class="ttdeci">Status Change</div><div class="ttdef"><b>Definition:</b> <a href="SIModeRegister_8cpp_source.html#l00087">SIModeRegister.cpp:87</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_ab644fcf07a4c2708333cf66276282357"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ab644fcf07a4c2708333cf66276282357">llvm::MachineBasicBlock::pred_begin</a></div><div class="ttdeci">pred_iterator pred_begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00357">MachineBasicBlock.h:357</a></div></div>
<div class="ttc" id="aIRTranslator_8cpp_html_abe44dfdea65b4f7e11e0a608ab708b76"><div class="ttname"><a href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a></div><div class="ttdeci">IRTranslator LLVM IR MI</div><div class="ttdef"><b>Definition:</b> <a href="IRTranslator_8cpp_source.html#l00109">IRTranslator.cpp:109</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_a4f1ceb770fe3446bfb2b3fa26858098f"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">llvm::MachineInstrBuilder::addImm</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addImm(int64_t Val) const</div><div class="ttdoc">Add a new immediate operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00131">MachineInstrBuilder.h:131</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="astructStatus_html_aedf18ee1c895e1fea6c0e7e195a5a1ca"><div class="ttname"><a href="structStatus.html#aedf18ee1c895e1fea6c0e7e195a5a1ca">Status::mergeUnknown</a></div><div class="ttdeci">Status mergeUnknown(unsigned newMask)</div><div class="ttdef"><b>Definition:</b> <a href="SIModeRegister_8cpp_source.html#l00049">SIModeRegister.cpp:49</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1Hwreg_html_a018924463515df5f66f3c5a039750da8a15f3309c3ab0756b51a04de06e4e5e68"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a018924463515df5f66f3c5a039750da8a15f3309c3ab0756b51a04de06e4e5e68">llvm::AMDGPU::Hwreg::ID_SHIFT_</a></div><div class="ttdeci">@ ID_SHIFT_</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00427">SIDefines.h:427</a></div></div>
<div class="ttc" id="aREADME-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00411">README-SSE.txt:411</a></div></div>
<div class="ttc" id="aStatistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunctionPass_html"><div class="ttname"><a href="classllvm_1_1MachineFunctionPass.html">llvm::MachineFunctionPass</a></div><div class="ttdoc">MachineFunctionPass - This class adapts the FunctionPass interface to allow convenient creation of pa...</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunctionPass_8h_source.html#l00030">MachineFunctionPass.h:30</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_aa22424ba23740b6a748e8d0c239b7e4c"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#aa22424ba23740b6a748e8d0c239b7e4c">llvm::MachineFunction::getNumBlockIDs</a></div><div class="ttdeci">unsigned getNumBlockIDs() const</div><div class="ttdoc">getNumBlockIDs - Return the number of MBB ID's allocated.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00815">MachineFunction.h:815</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1Hwreg_html_a018924463515df5f66f3c5a039750da8a4695b7195044788ba3cbb7b53df196bf"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a018924463515df5f66f3c5a039750da8a4695b7195044788ba3cbb7b53df196bf">llvm::AMDGPU::Hwreg::ID_MASK_</a></div><div class="ttdeci">@ ID_MASK_</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00429">SIDefines.h:429</a></div></div>
<div class="ttc" id="aclassBlockData_html_a3a4dfddb67525d6766e5b78956395fb9"><div class="ttname"><a href="classBlockData.html#a3a4dfddb67525d6766e5b78956395fb9">BlockData::BlockData</a></div><div class="ttdeci">BlockData()</div><div class="ttdef"><b>Definition:</b> <a href="SIModeRegister_8cpp_source.html#l00105">SIModeRegister.cpp:105</a></div></div>
<div class="ttc" id="aclassBlockData_html_a43a066245da94488e55f6cc308f46636"><div class="ttname"><a href="classBlockData.html#a43a066245da94488e55f6cc308f46636">BlockData::Pred</a></div><div class="ttdeci">Status Pred</div><div class="ttdef"><b>Definition:</b> <a href="SIModeRegister_8cpp_source.html#l00095">SIModeRegister.cpp:95</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSubtarget_html"><div class="ttname"><a href="classllvm_1_1GCNSubtarget.html">llvm::GCNSubtarget</a></div><div class="ttdef"><b>Definition:</b> <a href="GCNSubtarget_8h_source.html#l00032">GCNSubtarget.h:32</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunctionPass_html_a864fd57b4304ef933b3281d0ef85a88e"><div class="ttname"><a href="classllvm_1_1MachineFunctionPass.html#a864fd57b4304ef933b3281d0ef85a88e">llvm::MachineFunctionPass::getAnalysisUsage</a></div><div class="ttdeci">void getAnalysisUsage(AnalysisUsage &amp;AU) const override</div><div class="ttdoc">getAnalysisUsage - Subclasses that override getAnalysisUsage must call this.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunctionPass_8cpp_source.html#l00167">MachineFunctionPass.cpp:167</a></div></div>
<div class="ttc" id="aSIDefines_8h_html_a4acbc6661acdb47237bd5ed7c9b73f3d"><div class="ttname"><a href="SIDefines_8h.html#a4acbc6661acdb47237bd5ed7c9b73f3d">FP_ROUND_ROUND_TO_ZERO</a></div><div class="ttdeci">#define FP_ROUND_ROUND_TO_ZERO</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l01037">SIDefines.h:1037</a></div></div>
<div class="ttc" id="anamespacellvm_1_1BitmaskEnumDetail_html_a91efa71de05b0c2d00730a0279f58658"><div class="ttname"><a href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">llvm::BitmaskEnumDetail::Mask</a></div><div class="ttdeci">constexpr std::underlying_type_t&lt; E &gt; Mask()</div><div class="ttdoc">Get a bitmask with 1s in all places up to the high-order bit of E's largest value.</div><div class="ttdef"><b>Definition:</b> <a href="BitmaskEnum_8h_source.html#l00080">BitmaskEnum.h:80</a></div></div>
<div class="ttc" id="aSIModeRegister_8cpp_html_ad78e062f62e0d6e453941fb4ca843e4d"><div class="ttname"><a href="SIModeRegister_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a></div><div class="ttdeci">#define DEBUG_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="SIModeRegister_8cpp_source.html#l00023">SIModeRegister.cpp:23</a></div></div>
<div class="ttc" id="aREADME-SSE_8txt_html_a11ca92463dc5dfc09bbe2ba2f3ea0c96"><div class="ttname"><a href="README-SSE_8txt.html#a11ca92463dc5dfc09bbe2ba2f3ea0c96">x3</a></div><div class="ttdeci">In x86 we generate this spiffy xmm0 xmm0 ret in x86 we generate this which could be xmm1 movss xmm1 xmm0 ret In sse4 we could use insertps to make both better Here s another testcase that could use x3</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00547">README-SSE.txt:547</a></div></div>
<div class="ttc" id="aGCNSubtarget_8h_html"><div class="ttname"><a href="GCNSubtarget_8h.html">GCNSubtarget.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1Hwreg_html_a018924463515df5f66f3c5a039750da8aebfc48ed48afe18e84417d0de513b6bb"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a018924463515df5f66f3c5a039750da8aebfc48ed48afe18e84417d0de513b6bb">llvm::AMDGPU::Hwreg::ID_MODE</a></div><div class="ttdeci">@ ID_MODE</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00395">SIDefines.h:395</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="aPassSupport_8h_html_af807c9595d50b45c0008924c4679c85c"><div class="ttname"><a href="PassSupport_8h.html#af807c9595d50b45c0008924c4679c85c">INITIALIZE_PASS</a></div><div class="ttdeci">#define INITIALIZE_PASS(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00038">PassSupport.h:38</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdoc">Represent the analysis usage information of a pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00047">PassAnalysisSupport.h:47</a></div></div>
<div class="ttc" id="aclassBlockData_html_a596f7df03267b0d4812287cac2550bff"><div class="ttname"><a href="classBlockData.html#a596f7df03267b0d4812287cac2550bff">BlockData::FirstInsertionPoint</a></div><div class="ttdeci">MachineInstr * FirstInsertionPoint</div><div class="ttdef"><b>Definition:</b> <a href="SIModeRegister_8cpp_source.html#l00099">SIModeRegister.cpp:99</a></div></div>
<div class="ttc" id="anamespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00141">StackSlotColoring.cpp:141</a></div></div>
<div class="ttc" id="aHexagonCopyToCombine_8cpp_html_a1d40004718218dbdf06b496766299101"><div class="ttname"><a href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a></div><div class="ttdeci">const HexagonInstrInfo * TII</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCopyToCombine_8cpp_source.html#l00125">HexagonCopyToCombine.cpp:125</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a7abf5fb4071cb25dbce06dfb5ee3c937"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a></div><div class="ttdeci">static GCRegistry::Add&lt; OcamlGC &gt; B(&quot;ocaml&quot;, &quot;ocaml 3.10-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html"><div class="ttname"><a href="classllvm_1_1MachineOperand.html">llvm::MachineOperand</a></div><div class="ttdoc">MachineOperand class - Representation of each machine instruction operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00048">MachineOperand.h:48</a></div></div>
<div class="ttc" id="aSIModeRegister_8cpp_html_a30c0948db8a2855682bf18fe7ef02750"><div class="ttname"><a href="SIModeRegister_8cpp.html#a30c0948db8a2855682bf18fe7ef02750">STATISTIC</a></div><div class="ttdeci">STATISTIC(NumSetregInserted, &quot;Number of setreg of mode register inserted.&quot;)</div></div>
<div class="ttc" id="aclassBlockData_html_a74d8253f53eb9b3275801c555cb447ec"><div class="ttname"><a href="classBlockData.html#a74d8253f53eb9b3275801c555cb447ec">BlockData::Exit</a></div><div class="ttdeci">Status Exit</div><div class="ttdef"><b>Definition:</b> <a href="SIModeRegister_8cpp_source.html#l00091">SIModeRegister.cpp:91</a></div></div>
<div class="ttc" id="astructStatus_html_a6927b9d6af12920e80ae469aa1660491"><div class="ttname"><a href="structStatus.html#a6927b9d6af12920e80ae469aa1660491">Status::operator==</a></div><div class="ttdeci">bool operator==(const Status &amp;S) const</div><div class="ttdef"><b>Definition:</b> <a href="SIModeRegister_8cpp_source.html#l00066">SIModeRegister.cpp:66</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a188c0836f8c3528401f1c236fd93b977"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">llvm::CallingConv::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdoc">LLVM IR allows to use arbitrary numbers as calling convention identifiers.</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00024">CallingConv.h:24</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html">llvm::MachineBasicBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00094">MachineBasicBlock.h:94</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1Hwreg_html_a6110fc30bc7311a6cf99814530362e21a87dc8c966eee8fa4eb7c4d526effcdc8"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6110fc30bc7311a6cf99814530362e21a87dc8c966eee8fa4eb7c4d526effcdc8">llvm::AMDGPU::Hwreg::OFFSET_MASK_</a></div><div class="ttdeci">@ OFFSET_MASK_</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00436">SIDefines.h:436</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1Hwreg_html_a2dd789820f1036a942eb3ee6a4b8a71da607eee7dd279e8007ab5c43c71f1a2bb"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a2dd789820f1036a942eb3ee6a4b8a71da607eee7dd279e8007ab5c43c71f1a2bb">llvm::AMDGPU::Hwreg::WIDTH_M1_SHIFT_</a></div><div class="ttdeci">@ WIDTH_M1_SHIFT_</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00443">SIDefines.h:443</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a325f6b611ef9ec06798d3b4eb9572093"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">llvm::MachineFunction::getSubtarget</a></div><div class="ttdeci">const TargetSubtargetInfo &amp; getSubtarget() const</div><div class="ttdoc">getSubtarget - Return the subtarget for which this machine code is being compiled.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00672">MachineFunction.h:672</a></div></div>
<div class="ttc" id="aclassBlockData_html_a7e85ac3d26806a2701681fe1a29fe08b"><div class="ttname"><a href="classBlockData.html#a7e85ac3d26806a2701681fe1a29fe08b">BlockData::Require</a></div><div class="ttdeci">Status Require</div><div class="ttdef"><b>Definition:</b> <a href="SIModeRegister_8cpp_source.html#l00083">SIModeRegister.cpp:83</a></div></div>
<div class="ttc" id="aSIDefines_8h_html_a3de6b9fc40f27b2963ef551d5e2c0387"><div class="ttname"><a href="SIDefines_8h.html#a3de6b9fc40f27b2963ef551d5e2c0387">FP_ROUND_ROUND_TO_INF</a></div><div class="ttdeci">#define FP_ROUND_ROUND_TO_INF</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l01035">SIDefines.h:1035</a></div></div>
<div class="ttc" id="aAMDGPUMCTargetDesc_8h_html"><div class="ttname"><a href="AMDGPUMCTargetDesc_8h.html">AMDGPUMCTargetDesc.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a0359a738e0412c5a7ea55d61175e0661"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a0359a738e0412c5a7ea55d61175e0661">llvm::MachineBasicBlock::pred_end</a></div><div class="ttdeci">pred_iterator pred_end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00359">MachineBasicBlock.h:359</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html"><div class="ttname"><a href="classllvm_1_1MachineInstr.html">llvm::MachineInstr</a></div><div class="ttdoc">Representation of each machine instruction.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00066">MachineInstr.h:66</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html">llvm::MachineInstrBuilder</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00069">MachineInstrBuilder.h:69</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARM__MB_html_ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2"><div class="ttname"><a href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">llvm::ARM_MB::ST</a></div><div class="ttdeci">@ ST</div><div class="ttdef"><b>Definition:</b> <a href="MCTargetDesc_2ARMBaseInfo_8h_source.html#l00073">ARMBaseInfo.h:73</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_ad3a99906764c35b2694ae90fa57744a5"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">move</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional move</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00546">README.txt:546</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="aMachineFunctionPass_8h_html"><div class="ttname"><a href="MachineFunctionPass_8h.html">MachineFunctionPass.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_af7bdb491eed9d2c9119dc21d4002de9d"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#af7bdb491eed9d2c9119dc21d4002de9d">llvm::MachineBasicBlock::pred_iterator</a></div><div class="ttdeci">std::vector&lt; MachineBasicBlock * &gt;::iterator pred_iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00345">MachineBasicBlock.h:345</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a4e21760f681d6f97f95c8414e7b83ea5"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">llvm::MachineBasicBlock::getParent</a></div><div class="ttdeci">const MachineFunction * getParent() const</div><div class="ttdoc">Return the MachineFunction containing this basic block.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00265">MachineBasicBlock.h:265</a></div></div>
<div class="ttc" id="aSIDefines_8h_html_ab9143452ed7db1816eba0c236666b84d"><div class="ttname"><a href="SIDefines_8h.html#ab9143452ed7db1816eba0c236666b84d">FP_ROUND_ROUND_TO_NEGINF</a></div><div class="ttdeci">#define FP_ROUND_ROUND_TO_NEGINF</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l01036">SIDefines.h:1036</a></div></div>
<div class="ttc" id="aSIWholeQuadMode_8cpp_html_a0c198437833c48138f49e3589bd08773"><div class="ttname"><a href="SIWholeQuadMode_8cpp.html#a0c198437833c48138f49e3589bd08773">Mode</a></div><div class="ttdeci">SI Whole Quad Mode</div><div class="ttdef"><b>Definition:</b> <a href="SIWholeQuadMode_8cpp_source.html#l00262">SIWholeQuadMode.cpp:262</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6c0ae8eb34e767f864323920af14b58b"><div class="ttname"><a href="namespacellvm.html#a6c0ae8eb34e767f864323920af14b58b">llvm::SIModeRegisterID</a></div><div class="ttdeci">char &amp; SIModeRegisterID</div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a877507fda31c207ec36a018784369708"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a877507fda31c207ec36a018784369708">llvm::MachineBasicBlock::pred_empty</a></div><div class="ttdeci">bool pred_empty() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00372">MachineBasicBlock.h:372</a></div></div>
<div class="ttc" id="astructStatus_html"><div class="ttname"><a href="structStatus.html">Status</a></div><div class="ttdef"><b>Definition:</b> <a href="SIModeRegister_8cpp_source.html#l00029">SIModeRegister.cpp:29</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html"><div class="ttname"><a href="classllvm_1_1MachineFunction.html">llvm::MachineFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00258">MachineFunction.h:258</a></div></div>
<div class="ttc" id="astructStatus_html_aa92eb76e83481bf6df6ecb43ae05964d"><div class="ttname"><a href="structStatus.html#aa92eb76e83481bf6df6ecb43ae05964d">Status::operator!=</a></div><div class="ttdeci">bool operator!=(const Status &amp;S) const</div><div class="ttdef"><b>Definition:</b> <a href="SIModeRegister_8cpp_source.html#l00070">SIModeRegister.cpp:70</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a3aa22d521bd6a7e6b9f35545dc7b0f1e"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a3aa22d521bd6a7e6b9f35545dc7b0f1e">llvm::MachineBasicBlock::getNumber</a></div><div class="ttdeci">int getNumber() const</div><div class="ttdoc">MachineBasicBlocks are uniquely numbered at the function level, unless they're not in a MachineFuncti...</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l01143">MachineBasicBlock.h:1143</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a4d2c96836214c1f13357ffb99125fb4a"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a4d2c96836214c1f13357ffb99125fb4a">llvm::MachineBasicBlock::successors</a></div><div class="ttdeci">iterator_range&lt; succ_iterator &gt; successors()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00396">MachineBasicBlock.h:396</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_af11a6ebf7ab3c388234cb6d5378439a3"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#af11a6ebf7ab3c388234cb6d5378439a3">llvm::AnalysisUsage::setPreservesCFG</a></div><div class="ttdeci">void setPreservesCFG()</div><div class="ttdoc">This function should be called by the pass, iff they do not:</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8cpp_source.html#l00265">Pass.cpp:265</a></div></div>
<div class="ttc" id="aAMDGPU_8h_html"><div class="ttname"><a href="AMDGPU_8h.html">AMDGPU.h</a></div></div>
<div class="ttc" id="astructStatus_html_a944586fb328a3524805748c8f7b17f32"><div class="ttname"><a href="structStatus.html#a944586fb328a3524805748c8f7b17f32">Status::Status</a></div><div class="ttdeci">Status()</div><div class="ttdef"><b>Definition:</b> <a href="SIModeRegister_8cpp_source.html#l00035">SIModeRegister.cpp:35</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1Hwreg_html_a6110fc30bc7311a6cf99814530362e21aac0a8352cc7cdb2686e5536f915725f1"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6110fc30bc7311a6cf99814530362e21aac0a8352cc7cdb2686e5536f915725f1">llvm::AMDGPU::Hwreg::OFFSET_SHIFT_</a></div><div class="ttdeci">@ OFFSET_SHIFT_</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00434">SIDefines.h:434</a></div></div>
<div class="ttc" id="anamespacellvm_html_a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4"><div class="ttname"><a href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">llvm::Offset</a></div><div class="ttdeci">@ Offset</div><div class="ttdef"><b>Definition:</b> <a href="DWP_8cpp_source.html#l00406">DWP.cpp:406</a></div></div>
<div class="ttc" id="astructStatus_html_ae0d986f890ca1ef807fb7bbf99cff5bf"><div class="ttname"><a href="structStatus.html#ae0d986f890ca1ef807fb7bbf99cff5bf">Status::Mode</a></div><div class="ttdeci">unsigned Mode</div><div class="ttdef"><b>Definition:</b> <a href="SIModeRegister_8cpp_source.html#l00033">SIModeRegister.cpp:33</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_a1b45f45820a60c09244a87eb59824aec"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a></div><div class="ttdeci">add sub stmia L5 ldr r0 bl L_printf $stub Instead of a and a wouldn t it be better to do three moves *Return an aggregate type is even return S</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00210">README.txt:210</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_af649bbd13ab113aa88f7df6c918b6832"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#af649bbd13ab113aa88f7df6c918b6832">llvm::MachineBasicBlock::instr_front</a></div><div class="ttdeci">MachineInstr &amp; instr_front()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00283">MachineBasicBlock.h:283</a></div></div>
<div class="ttc" id="aSIDefines_8h_html_a3bf6098fe268447f483c33ef54b0bd27"><div class="ttname"><a href="SIDefines_8h.html#a3bf6098fe268447f483c33ef54b0bd27">FP_ROUND_MODE_DP</a></div><div class="ttdeci">#define FP_ROUND_MODE_DP(x)</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l01042">SIDefines.h:1042</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_a5958512eae2979bd2eb383977996a600"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a></div><div class="ttdeci">MachineBasicBlock &amp; MBB</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00074">AArch64SLSHardening.cpp:74</a></div></div>
<div class="ttc" id="astructStatus_html_a7d238cf08ca2aca7b1ef0e8b7a4b0770"><div class="ttname"><a href="structStatus.html#a7d238cf08ca2aca7b1ef0e8b7a4b0770">Status::merge</a></div><div class="ttdeci">Status merge(const Status &amp;S) const</div><div class="ttdef"><b>Definition:</b> <a href="SIModeRegister_8cpp_source.html#l00043">SIModeRegister.cpp:43</a></div></div>
<div class="ttc" id="astructStatus_html_a4d49768146ce886e2eb17aacd8159ca9"><div class="ttname"><a href="structStatus.html#a4d49768146ce886e2eb17aacd8159ca9">Status::delta</a></div><div class="ttdeci">Status delta(const Status &amp;S) const</div><div class="ttdef"><b>Definition:</b> <a href="SIModeRegister_8cpp_source.html#l00062">SIModeRegister.cpp:62</a></div></div>
<div class="ttc" id="astructStatus_html_aa6c36013b7c84c75cc978506e306a1a4"><div class="ttname"><a href="structStatus.html#aa6c36013b7c84c75cc978506e306a1a4">Status::intersect</a></div><div class="ttdeci">Status intersect(const Status &amp;S) const</div><div class="ttdef"><b>Definition:</b> <a href="SIModeRegister_8cpp_source.html#l00055">SIModeRegister.cpp:55</a></div></div>
<div class="ttc" id="anamespacellvm_html_a1ce45e5b72435b4b7423275d41cd2b63"><div class="ttname"><a href="namespacellvm.html#a1ce45e5b72435b4b7423275d41cd2b63">llvm::createSIModeRegisterPass</a></div><div class="ttdeci">FunctionPass * createSIModeRegisterPass()</div><div class="ttdef"><b>Definition:</b> <a href="SIModeRegister_8cpp_source.html#l00158">SIModeRegister.cpp:158</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1Hwreg_html_a6467ebe1e09a75203dd5f14bdfe21d11"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">llvm::AMDGPU::Hwreg::Width</a></div><div class="ttdeci">Width</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00449">SIDefines.h:449</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1Hwreg_html_a2dd789820f1036a942eb3ee6a4b8a71da4c6e1231407d8f2c735947f02cbcee1f"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a2dd789820f1036a942eb3ee6a4b8a71da4c6e1231407d8f2c735947f02cbcee1f">llvm::AMDGPU::Hwreg::WIDTH_M1_MASK_</a></div><div class="ttdeci">@ WIDTH_M1_MASK_</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00445">SIDefines.h:445</a></div></div>
<div class="ttc" id="aclassllvm_1_1SIInstrInfo_html"><div class="ttname"><a href="classllvm_1_1SIInstrInfo.html">llvm::SIInstrInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8h_source.html#l00044">SIInstrInfo.h:44</a></div></div>
<div class="ttc" id="astructStatus_html_a521e597985be481067010a6b7b40f7dc"><div class="ttname"><a href="structStatus.html#a521e597985be481067010a6b7b40f7dc">Status::Status</a></div><div class="ttdeci">Status(unsigned NewMask, unsigned NewMode)</div><div class="ttdef"><b>Definition:</b> <a href="SIModeRegister_8cpp_source.html#l00037">SIModeRegister.cpp:37</a></div></div>
<div class="ttc" id="anamespacellvm_html_a17e04afcf0c5efeb0eb6a9a45287b5e4"><div class="ttname"><a href="namespacellvm.html#a17e04afcf0c5efeb0eb6a9a45287b5e4">llvm::BuildMI</a></div><div class="ttdeci">MachineInstrBuilder BuildMI(MachineFunction &amp;MF, const MIMetadata &amp;MIMD, const MCInstrDesc &amp;MCID)</div><div class="ttdoc">Builder interface. Specify how to create the initial instruction itself.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00357">MachineInstrBuilder.h:357</a></div></div>
<div class="ttc" id="astructStatus_html_a62c91ffba279ca27ad70766196e3367c"><div class="ttname"><a href="structStatus.html#a62c91ffba279ca27ad70766196e3367c">Status::isCombinable</a></div><div class="ttdeci">bool isCombinable(Status &amp;S)</div><div class="ttdef"><b>Definition:</b> <a href="SIModeRegister_8cpp_source.html#l00076">SIModeRegister.cpp:76</a></div></div>
<div class="ttc" id="astructStatus_html_a78cea2430649ceb585466218022bd579"><div class="ttname"><a href="structStatus.html#a78cea2430649ceb585466218022bd579">Status::isCompatible</a></div><div class="ttdeci">bool isCompatible(Status &amp;S)</div><div class="ttdef"><b>Definition:</b> <a href="SIModeRegister_8cpp_source.html#l00072">SIModeRegister.cpp:72</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionPass_html"><div class="ttname"><a href="classllvm_1_1FunctionPass.html">llvm::FunctionPass</a></div><div class="ttdoc">FunctionPass class - This class is used to implement most global optimizations.</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00308">Pass.h:308</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="aPassBuilderBindings_8cpp_html_afd1501c49c84f3addfd108c2484f5674"><div class="ttname"><a href="PassBuilderBindings_8cpp.html#afd1501c49c84f3addfd108c2484f5674">PB</a></div><div class="ttdeci">PassBuilder PB(Machine, PassOpts-&gt;PTO, std::nullopt, &amp;PIC)</div></div>
<div class="ttc" id="astructStatus_html_ad278024750ac1478e4a551043df7ff65"><div class="ttname"><a href="structStatus.html#ad278024750ac1478e4a551043df7ff65">Status::Mask</a></div><div class="ttdeci">unsigned Mask</div><div class="ttdef"><b>Definition:</b> <a href="SIModeRegister_8cpp_source.html#l00032">SIModeRegister.cpp:32</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00074">Value.h:74</a></div></div>
<div class="ttc" id="aclassBlockData_html_a8a91d4cd279a7137bbd4472e375c7d35"><div class="ttname"><a href="classBlockData.html#a8a91d4cd279a7137bbd4472e375c7d35">BlockData::ExitSet</a></div><div class="ttdeci">bool ExitSet</div><div class="ttdef"><b>Definition:</b> <a href="SIModeRegister_8cpp_source.html#l00103">SIModeRegister.cpp:103</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:10:24 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Target/AMDGPU/GCNSchedStrategy.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_794e483eb1cc7921d35fd149d9cc325b.html">Target</a></li><li class="navelem"><a class="el" href="dir_447ce995d6e35417de5ec3060e97c93e.html">AMDGPU</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">GCNSchedStrategy.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="GCNSchedStrategy_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===-- GCNSchedStrategy.cpp - GCN Scheduler Strategy ---------------------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span><span class="comment"></span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">/// \file</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">/// This contains a MachineSchedStrategy implementation for maximizing wave</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">/// occupancy on GCN hardware.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">/// This pass will apply multiple scheduling stages to the same function.</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">/// Regions are first recorded in GCNScheduleDAGMILive::schedule. The actual</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">/// entry point for the scheduling of those regions is</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">/// GCNScheduleDAGMILive::runSchedStages.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"></span><span class="comment"></span> </div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">/// Generally, the reason for having multiple scheduling stages is to account</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">/// for the kernel-wide effect of register usage on occupancy.  Usually, only a</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">/// few scheduling regions will have register pressure high enough to limit</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">/// occupancy for the kernel, so constraints can be relaxed to improve ILP in</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">/// other regions.</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"></span><span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160; </div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="GCNSchedStrategy_8h.html">GCNSchedStrategy.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AMDGPUIGroupLP_8h.html">AMDGPUIGroupLP.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SIMachineFunctionInfo_8h.html">SIMachineFunctionInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="RegisterClassInfo_8h.html">llvm/CodeGen/RegisterClassInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160; </div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="GCNSchedStrategy_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   31</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;machine-scheduler&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160; </div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160; </div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <a class="code" href="GCNSchedStrategy_8cpp.html#a3b9f8729601d93f7ada55a93097dfcaf">DisableUnclusterHighRP</a>(<span class="stringliteral">&quot;amdgpu-disable-unclustred-high-rp-reschedule&quot;</span>,</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;                           <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;                           <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Disable unclustred high register pressure &quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;                                    <span class="stringliteral">&quot;reduction scheduling stage.&quot;</span>),</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;                           <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>));</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="GCNSchedStrategy_8cpp.html#ab19b78e94c87be3c2e2b19bf037f451b">ScheduleMetricBias</a>(</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="stringliteral">&quot;amdgpu-schedule-metric-bias&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        <span class="stringliteral">&quot;Sets the bias which adds weight to occupancy vs latency. Set it to &quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        <span class="stringliteral">&quot;100 to chase the occupancy only.&quot;</span>),</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(10));</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160; </div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code" href="classllvm_1_1ScheduleMetrics.html#ad737e526fab5f750adfdbdd427a014fb">ScheduleMetrics::ScaleFactor</a> = 100;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160; </div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="classllvm_1_1GCNSchedStrategy.html#a14f3300bee7a18474eb2f103afa3ea22">   50</a></span>&#160;<a class="code" href="classllvm_1_1GCNSchedStrategy.html#a14f3300bee7a18474eb2f103afa3ea22">GCNSchedStrategy::GCNSchedStrategy</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1MachineSchedContext.html">MachineSchedContext</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    : <a class="code" href="classllvm_1_1GenericScheduler.html">GenericScheduler</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>), TargetOccupancy(0), MF(nullptr),</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;      HasHighPressure(<a class="code" href="namespacefalse.html">false</a>) {}</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="classllvm_1_1GCNSchedStrategy.html#ab57c0b13438062a884d3e620300fbc03">   54</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1GCNSchedStrategy.html#ab57c0b13438062a884d3e620300fbc03">GCNSchedStrategy::initialize</a>(<a class="code" href="classllvm_1_1ScheduleDAGMI.html">ScheduleDAGMI</a> *DAG) {</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <a class="code" href="classllvm_1_1GenericScheduler.html#aa8cddd2ea015f8177a8395035f87e332">GenericScheduler::initialize</a>(<a class="code" href="classllvm_1_1GenericScheduler.html#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>);</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160; </div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a5655f7a9e04872d7a5834a44a1d5359c">MF</a> = &amp;<a class="code" href="classllvm_1_1GenericScheduler.html#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;<a class="code" href="classllvm_1_1ScheduleDAG.html#a5a3d3d075a208011a24a0918b58d7daa">MF</a>;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1GCNSubtarget.html">GCNSubtarget</a> &amp;<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a> = <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a5655f7a9e04872d7a5834a44a1d5359c">MF</a>-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1GCNSubtarget.html">GCNSubtarget</a>&gt;();</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStrategy.html#aa8793c7d097d298c1590b67980054d8b">SGPRExcessLimit</a> =</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;      <a class="code" href="classllvm_1_1GenericSchedulerBase.html#ad0f9f52bf2f7c54d9546cedd1c47ef45">Context</a>-&gt;<a class="code" href="structllvm_1_1MachineSchedContext.html#a510c29d57e9f0343df48b7c58cb89228">RegClassInfo</a>-&gt;<a class="code" href="classllvm_1_1RegisterClassInfo.html#a564b41bec163c7661e29ee3a0773ca6a">getNumAllocatableRegs</a>(&amp;AMDGPU::SGPR_32RegClass);</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a54479ded7088e7b425de5d6c1f77fb7a">VGPRExcessLimit</a> =</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;      <a class="code" href="classllvm_1_1GenericSchedulerBase.html#ad0f9f52bf2f7c54d9546cedd1c47ef45">Context</a>-&gt;<a class="code" href="structllvm_1_1MachineSchedContext.html#a510c29d57e9f0343df48b7c58cb89228">RegClassInfo</a>-&gt;<a class="code" href="classllvm_1_1RegisterClassInfo.html#a564b41bec163c7661e29ee3a0773ca6a">getNumAllocatableRegs</a>(&amp;AMDGPU::VGPR_32RegClass);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160; </div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <a class="code" href="classllvm_1_1SIMachineFunctionInfo.html">SIMachineFunctionInfo</a> &amp;MFI = *<a class="code" href="classllvm_1_1GCNSchedStrategy.html#a5655f7a9e04872d7a5834a44a1d5359c">MF</a>-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1SIMachineFunctionInfo.html">SIMachineFunctionInfo</a>&gt;();</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="comment">// Set the initial TargetOccupnacy to the maximum occupancy that we can</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <span class="comment">// achieve for this function. This effectively sets a lower bound on the</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="comment">// &#39;Critical&#39; register limits in the scheduler.</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a45c6b23ba1bf5916572a93ef35d962c5">TargetOccupancy</a> = MFI.<a class="code" href="classllvm_1_1SIMachineFunctionInfo.html#a09166d86fd4b0141f17b248f6fcdf0b6">getOccupancy</a>();</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a2ed3b8acc5fc8c2f5c155620b5c32555">SGPRCriticalLimit</a> =</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;      <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.getMaxNumSGPRs(<a class="code" href="classllvm_1_1GCNSchedStrategy.html#a45c6b23ba1bf5916572a93ef35d962c5">TargetOccupancy</a>, <span class="keyword">true</span>), <a class="code" href="classllvm_1_1GCNSchedStrategy.html#aa8793c7d097d298c1590b67980054d8b">SGPRExcessLimit</a>);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1GCNSchedStrategy.html#a508f8eece85480c2520ebf5d1f3ef945">KnownExcessRP</a>) {</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a87648a3c33abb5fb8ff110b760424ecc">VGPRCriticalLimit</a> =</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.getMaxNumVGPRs(<a class="code" href="classllvm_1_1GCNSchedStrategy.html#a45c6b23ba1bf5916572a93ef35d962c5">TargetOccupancy</a>), <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a54479ded7088e7b425de5d6c1f77fb7a">VGPRExcessLimit</a>);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="comment">// This is similar to ST.getMaxNumVGPRs(TargetOccupancy) result except</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="comment">// returns a reasonably small number for targets with lots of VGPRs, such</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="comment">// as GFX10 and GFX11.</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Region is known to spill, use alternative &quot;</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                         <span class="stringliteral">&quot;VGPRCriticalLimit calculation method.\n&quot;</span>);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordtype">unsigned</span> Granule = <a class="code" href="namespacellvm_1_1AMDGPU_1_1IsaInfo.html#ae47a2723f63ec4e85b4228b56e5d759c">AMDGPU::IsaInfo::getVGPRAllocGranule</a>(&amp;<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>);</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordtype">unsigned</span> Addressable = <a class="code" href="namespacellvm_1_1AMDGPU_1_1IsaInfo.html#a842a99d2928e264423f0ac73b0910ec9">AMDGPU::IsaInfo::getAddressableNumVGPRs</a>(&amp;<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordtype">unsigned</span> VGPRBudget = <a class="code" href="namespacellvm.html#ad9be86c95736bfa4bb0dc52322a0002a">alignDown</a>(Addressable / <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a45c6b23ba1bf5916572a93ef35d962c5">TargetOccupancy</a>, Granule);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    VGPRBudget = <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(VGPRBudget, Granule);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a87648a3c33abb5fb8ff110b760424ecc">VGPRCriticalLimit</a> = <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(VGPRBudget, <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a54479ded7088e7b425de5d6c1f77fb7a">VGPRExcessLimit</a>);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  }</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160; </div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="comment">// Subtract error margin and bias from register limits and avoid overflow.</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a2ed3b8acc5fc8c2f5c155620b5c32555">SGPRCriticalLimit</a> -= <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(<a class="code" href="classllvm_1_1GCNSchedStrategy.html#aa5bfab3502e3953ac33f90ae4c86fecc">SGPRLimitBias</a> + <a class="code" href="classllvm_1_1GCNSchedStrategy.html#aca0e645faeaad83ce440e96cc39b6763">ErrorMargin</a>, <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a2ed3b8acc5fc8c2f5c155620b5c32555">SGPRCriticalLimit</a>);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a87648a3c33abb5fb8ff110b760424ecc">VGPRCriticalLimit</a> -= <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(<a class="code" href="classllvm_1_1GCNSchedStrategy.html#af100c4ee35e4de0856b35b151479ec3d">VGPRLimitBias</a> + <a class="code" href="classllvm_1_1GCNSchedStrategy.html#aca0e645faeaad83ce440e96cc39b6763">ErrorMargin</a>, <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a87648a3c33abb5fb8ff110b760424ecc">VGPRCriticalLimit</a>);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStrategy.html#aa8793c7d097d298c1590b67980054d8b">SGPRExcessLimit</a> -= <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(<a class="code" href="classllvm_1_1GCNSchedStrategy.html#aa5bfab3502e3953ac33f90ae4c86fecc">SGPRLimitBias</a> + <a class="code" href="classllvm_1_1GCNSchedStrategy.html#aca0e645faeaad83ce440e96cc39b6763">ErrorMargin</a>, <a class="code" href="classllvm_1_1GCNSchedStrategy.html#aa8793c7d097d298c1590b67980054d8b">SGPRExcessLimit</a>);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a54479ded7088e7b425de5d6c1f77fb7a">VGPRExcessLimit</a> -= <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(<a class="code" href="classllvm_1_1GCNSchedStrategy.html#af100c4ee35e4de0856b35b151479ec3d">VGPRLimitBias</a> + <a class="code" href="classllvm_1_1GCNSchedStrategy.html#aca0e645faeaad83ce440e96cc39b6763">ErrorMargin</a>, <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a54479ded7088e7b425de5d6c1f77fb7a">VGPRExcessLimit</a>);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;VGPRCriticalLimit = &quot;</span> &lt;&lt; <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a87648a3c33abb5fb8ff110b760424ecc">VGPRCriticalLimit</a></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;, VGPRExcessLimit = &quot;</span> &lt;&lt; <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a54479ded7088e7b425de5d6c1f77fb7a">VGPRExcessLimit</a></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;, SGPRCriticalLimit = &quot;</span> &lt;&lt; <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a2ed3b8acc5fc8c2f5c155620b5c32555">SGPRCriticalLimit</a></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;, SGPRExcessLimit = &quot;</span> &lt;&lt; <a class="code" href="classllvm_1_1GCNSchedStrategy.html#aa8793c7d097d298c1590b67980054d8b">SGPRExcessLimit</a> &lt;&lt; <span class="stringliteral">&quot;\n\n&quot;</span>);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;}</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="classllvm_1_1GCNSchedStrategy.html#a930e9c13af62567b3802674269bd4f72">  103</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a930e9c13af62567b3802674269bd4f72">GCNSchedStrategy::initCandidate</a>(<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html">SchedCandidate</a> &amp;Cand, <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU,</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                                     <span class="keywordtype">bool</span> AtTop,</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                                     <span class="keyword">const</span> <a class="code" href="classllvm_1_1RegPressureTracker.html">RegPressureTracker</a> &amp;RPTracker,</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                                     <span class="keyword">const</span> <a class="code" href="classllvm_1_1SIRegisterInfo.html">SIRegisterInfo</a> *SRI,</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                                     <span class="keywordtype">unsigned</span> SGPRPressure,</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                                     <span class="keywordtype">unsigned</span> VGPRPressure) {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  Cand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a310a170b7d2442d12634d53db262fb92">SU</a> = SU;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  Cand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a> = AtTop;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160; </div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1GenericScheduler.html#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMILive.html#a87daf83eb223263e4c8766d10aa911be">isTrackingPressure</a>())</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="comment">// getDownwardPressure() and getUpwardPressure() make temporary changes to</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="comment">// the tracker, so we need to pass those function a non-const copy.</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <a class="code" href="classllvm_1_1RegPressureTracker.html">RegPressureTracker</a> &amp;TempTracker = <span class="keyword">const_cast&lt;</span><a class="code" href="classllvm_1_1RegPressureTracker.html">RegPressureTracker</a>&amp;<span class="keyword">&gt;</span>(RPTracker);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStrategy.html#ab169c359dc2328b0a4e93f5f95b82fc0">Pressure</a>.clear();</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a3d63ae4c61c0f0cce4bcff4a33587d31">MaxPressure</a>.clear();</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160; </div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="keywordflow">if</span> (AtTop)</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    TempTracker.<a class="code" href="classllvm_1_1RegPressureTracker.html#ac1bfd03ca8fa96ab674c7f7b620dd8a6">getDownwardPressure</a>(SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a0727ce4ffb9b167e7ad283259d82b10c">getInstr</a>(), <a class="code" href="classllvm_1_1GCNSchedStrategy.html#ab169c359dc2328b0a4e93f5f95b82fc0">Pressure</a>, <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a3d63ae4c61c0f0cce4bcff4a33587d31">MaxPressure</a>);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="comment">// FIXME: I think for bottom up scheduling, the register pressure is cached</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="comment">// and can be retrieved by DAG-&gt;getPressureDif(SU).</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    TempTracker.<a class="code" href="classllvm_1_1RegPressureTracker.html#ad552b6e557acce957b3bd5a1960a53dd">getUpwardPressure</a>(SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a0727ce4ffb9b167e7ad283259d82b10c">getInstr</a>(), <a class="code" href="classllvm_1_1GCNSchedStrategy.html#ab169c359dc2328b0a4e93f5f95b82fc0">Pressure</a>, <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a3d63ae4c61c0f0cce4bcff4a33587d31">MaxPressure</a>);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  }</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160; </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="keywordtype">unsigned</span> NewSGPRPressure = <a class="code" href="classllvm_1_1GCNSchedStrategy.html#ab169c359dc2328b0a4e93f5f95b82fc0">Pressure</a>[AMDGPU::RegisterPressureSets::SReg_32];</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="keywordtype">unsigned</span> NewVGPRPressure = <a class="code" href="classllvm_1_1GCNSchedStrategy.html#ab169c359dc2328b0a4e93f5f95b82fc0">Pressure</a>[AMDGPU::RegisterPressureSets::VGPR_32];</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <span class="comment">// If two instructions increase the pressure of different register sets</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <span class="comment">// by the same amount, the generic scheduler will prefer to schedule the</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <span class="comment">// instruction that increases the set with the least amount of registers,</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="comment">// which in our case would be SGPRs.  This is rarely what we want, so</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="comment">// when we report excess/critical register pressure, we do it either</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="comment">// only for VGPRs or only for SGPRs.</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="comment">// FIXME: Better heuristics to determine whether to prefer SGPRs or VGPRs.</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> MaxVGPRPressureInc = 16;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="keywordtype">bool</span> ShouldTrackVGPRs = VGPRPressure + MaxVGPRPressureInc &gt;= <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a54479ded7088e7b425de5d6c1f77fb7a">VGPRExcessLimit</a>;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="keywordtype">bool</span> ShouldTrackSGPRs = !ShouldTrackVGPRs &amp;&amp; SGPRPressure &gt;= <a class="code" href="classllvm_1_1GCNSchedStrategy.html#aa8793c7d097d298c1590b67980054d8b">SGPRExcessLimit</a>;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160; </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="comment">// FIXME: We have to enter REG-EXCESS before we reach the actual threshold</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <span class="comment">// to increase the likelihood we don&#39;t go over the limits.  We should improve</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="comment">// the analysis to look through dependencies to find the path with the least</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="comment">// register pressure.</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160; </div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="comment">// We only need to update the RPDelta for instructions that increase register</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <span class="comment">// pressure. Instructions that decrease or keep reg pressure the same will be</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="comment">// marked as RegExcess in tryCandidate() when they are compared with</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="comment">// instructions that increase the register pressure.</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="keywordflow">if</span> (ShouldTrackVGPRs &amp;&amp; NewVGPRPressure &gt;= <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a54479ded7088e7b425de5d6c1f77fb7a">VGPRExcessLimit</a>) {</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a1902cf3722582eecec1d87862513ba3b">HasHighPressure</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    Cand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>.<a class="code" href="structllvm_1_1RegPressureDelta.html#aff9c3b403c6d4af795dd8be1c9612240">Excess</a> = <a class="code" href="classllvm_1_1PressureChange.html">PressureChange</a>(AMDGPU::RegisterPressureSets::VGPR_32);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    Cand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>.<a class="code" href="structllvm_1_1RegPressureDelta.html#aff9c3b403c6d4af795dd8be1c9612240">Excess</a>.<a class="code" href="classllvm_1_1PressureChange.html#a4b74a0d0d1bc2e22fa7376eda3fdd85f">setUnitInc</a>(NewVGPRPressure - <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a54479ded7088e7b425de5d6c1f77fb7a">VGPRExcessLimit</a>);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  }</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160; </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="keywordflow">if</span> (ShouldTrackSGPRs &amp;&amp; NewSGPRPressure &gt;= <a class="code" href="classllvm_1_1GCNSchedStrategy.html#aa8793c7d097d298c1590b67980054d8b">SGPRExcessLimit</a>) {</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a1902cf3722582eecec1d87862513ba3b">HasHighPressure</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    Cand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>.<a class="code" href="structllvm_1_1RegPressureDelta.html#aff9c3b403c6d4af795dd8be1c9612240">Excess</a> = <a class="code" href="classllvm_1_1PressureChange.html">PressureChange</a>(AMDGPU::RegisterPressureSets::SReg_32);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    Cand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>.<a class="code" href="structllvm_1_1RegPressureDelta.html#aff9c3b403c6d4af795dd8be1c9612240">Excess</a>.<a class="code" href="classllvm_1_1PressureChange.html#a4b74a0d0d1bc2e22fa7376eda3fdd85f">setUnitInc</a>(NewSGPRPressure - <a class="code" href="classllvm_1_1GCNSchedStrategy.html#aa8793c7d097d298c1590b67980054d8b">SGPRExcessLimit</a>);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  }</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160; </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="comment">// Register pressure is considered &#39;CRITICAL&#39; if it is approaching a value</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="comment">// that would reduce the wave occupancy for the execution unit.  When</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="comment">// register pressure is &#39;CRITICAL&#39;, increasing SGPR and VGPR pressure both</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="comment">// has the same cost, so we don&#39;t need to prefer one over the other.</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160; </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="keywordtype">int</span> SGPRDelta = NewSGPRPressure - <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a2ed3b8acc5fc8c2f5c155620b5c32555">SGPRCriticalLimit</a>;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="keywordtype">int</span> VGPRDelta = NewVGPRPressure - <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a87648a3c33abb5fb8ff110b760424ecc">VGPRCriticalLimit</a>;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="keywordflow">if</span> (SGPRDelta &gt;= 0 || VGPRDelta &gt;= 0) {</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a1902cf3722582eecec1d87862513ba3b">HasHighPressure</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordflow">if</span> (SGPRDelta &gt; VGPRDelta) {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      Cand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>.<a class="code" href="structllvm_1_1RegPressureDelta.html#a277da5755f2b30ebcebdba51d0de1acf">CriticalMax</a> =</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <a class="code" href="classllvm_1_1PressureChange.html">PressureChange</a>(AMDGPU::RegisterPressureSets::SReg_32);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;      Cand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>.<a class="code" href="structllvm_1_1RegPressureDelta.html#a277da5755f2b30ebcebdba51d0de1acf">CriticalMax</a>.<a class="code" href="classllvm_1_1PressureChange.html#a4b74a0d0d1bc2e22fa7376eda3fdd85f">setUnitInc</a>(SGPRDelta);</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;      Cand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>.<a class="code" href="structllvm_1_1RegPressureDelta.html#a277da5755f2b30ebcebdba51d0de1acf">CriticalMax</a> =</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <a class="code" href="classllvm_1_1PressureChange.html">PressureChange</a>(AMDGPU::RegisterPressureSets::VGPR_32);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      Cand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>.<a class="code" href="structllvm_1_1RegPressureDelta.html#a277da5755f2b30ebcebdba51d0de1acf">CriticalMax</a>.<a class="code" href="classllvm_1_1PressureChange.html#a4b74a0d0d1bc2e22fa7376eda3fdd85f">setUnitInc</a>(VGPRDelta);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    }</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  }</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;}</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160; </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">// This function is mostly cut and pasted from</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">// GenericScheduler::pickNodeFromQueue()</span></div>
<div class="line"><a name="l00191"></a><span class="lineno"><a class="line" href="classllvm_1_1GCNSchedStrategy.html#a1ab6d6847aab23799f897da576a08cef">  191</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a1ab6d6847aab23799f897da576a08cef">GCNSchedStrategy::pickNodeFromQueue</a>(<a class="code" href="classllvm_1_1SchedBoundary.html">SchedBoundary</a> &amp;Zone,</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                                         <span class="keyword">const</span> <a class="code" href="structllvm_1_1GenericSchedulerBase_1_1CandPolicy.html">CandPolicy</a> &amp;ZonePolicy,</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                                         <span class="keyword">const</span> <a class="code" href="classllvm_1_1RegPressureTracker.html">RegPressureTracker</a> &amp;RPTracker,</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                                         <a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html">SchedCandidate</a> &amp;Cand) {</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SIRegisterInfo.html">SIRegisterInfo</a> *SRI = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classllvm_1_1SIRegisterInfo.html">SIRegisterInfo</a>*<span class="keyword">&gt;</span>(<a class="code" href="classllvm_1_1GenericSchedulerBase.html#ae9476ffbc2f3f195a2116b13f3186194">TRI</a>);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> <a class="code" href="classllvm_1_1GCNSchedStrategy.html#ab169c359dc2328b0a4e93f5f95b82fc0">Pressure</a> = RPTracker.<a class="code" href="classllvm_1_1RegPressureTracker.html#ab453d1aae79439afdded9083ba2137b5">getRegSetPressureAtPos</a>();</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <span class="keywordtype">unsigned</span> SGPRPressure = 0;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <span class="keywordtype">unsigned</span> VGPRPressure = 0;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GenericScheduler.html#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMILive.html#a87daf83eb223263e4c8766d10aa911be">isTrackingPressure</a>()) {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    SGPRPressure = <a class="code" href="classllvm_1_1GCNSchedStrategy.html#ab169c359dc2328b0a4e93f5f95b82fc0">Pressure</a>[AMDGPU::RegisterPressureSets::SReg_32];</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    VGPRPressure = <a class="code" href="classllvm_1_1GCNSchedStrategy.html#ab169c359dc2328b0a4e93f5f95b82fc0">Pressure</a>[AMDGPU::RegisterPressureSets::VGPR_32];</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  }</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <a class="code" href="classllvm_1_1ReadyQueue.html">ReadyQueue</a> &amp;Q = Zone.<a class="code" href="classllvm_1_1SchedBoundary.html#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU : Q) {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160; </div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html">SchedCandidate</a> TryCand(ZonePolicy);</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a930e9c13af62567b3802674269bd4f72">initCandidate</a>(TryCand, SU, Zone.<a class="code" href="classllvm_1_1SchedBoundary.html#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>(), RPTracker, SRI,</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                  SGPRPressure, VGPRPressure);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="comment">// Pass SchedBoundary only when comparing nodes from the same boundary.</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <a class="code" href="classllvm_1_1SchedBoundary.html">SchedBoundary</a> *ZoneArg = Cand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a> == TryCand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a> ? &amp;Zone : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <a class="code" href="classllvm_1_1GenericScheduler.html#a6ef23d22af6c895d9c255de3e940b8bf">tryCandidate</a>(Cand, TryCand, ZoneArg);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keywordflow">if</span> (TryCand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a class="code" href="classllvm_1_1GenericSchedulerBase.html#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>) {</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      <span class="comment">// Initialize resource delta if needed in case future heuristics query it.</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      <span class="keywordflow">if</span> (TryCand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#ab86856838bf1e1577210f03d35273ccb">ResDelta</a> == <a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedResourceDelta.html">SchedResourceDelta</a>())</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        TryCand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a47cc8c89db10ac27483585cd61cf4f91">initResourceDelta</a>(Zone.<a class="code" href="classllvm_1_1SchedBoundary.html#a4f3e434b23939cec7a3c61b45071a017">DAG</a>, <a class="code" href="classllvm_1_1GenericSchedulerBase.html#a9730ea0068843718868a8667f52e3680">SchedModel</a>);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      Cand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a294e77c4f7245940981e5e259045c7c0">setBest</a>(TryCand);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="classllvm_1_1GenericSchedulerBase.html#a0fc28b204833d49b88dbeceb366b7439">traceCandidate</a>(Cand));</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    }</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  }</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;}</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160; </div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">// This function is mostly cut and pasted from</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">// GenericScheduler::pickNodeBidirectional()</span></div>
<div class="line"><a name="l00224"></a><span class="lineno"><a class="line" href="classllvm_1_1GCNSchedStrategy.html#a26b8231b39c104871f78b2da6dc1eff5">  224</a></span>&#160;<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *<a class="code" href="classllvm_1_1GCNSchedStrategy.html#a26b8231b39c104871f78b2da6dc1eff5">GCNSchedStrategy::pickNodeBidirectional</a>(<span class="keywordtype">bool</span> &amp;IsTopNode) {</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <span class="comment">// Schedule as far as possible in the direction of no choice. This is most</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="comment">// efficient, but also provides the best heuristics for CriticalPSets.</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU = <a class="code" href="classllvm_1_1GenericScheduler.html#a3763f96e92009d4dc101837627fff3bd">Bot</a>.<a class="code" href="classllvm_1_1SchedBoundary.html#a744d69baffaf2903667eb65cf07a6814">pickOnlyChoice</a>()) {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    IsTopNode = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordflow">return</span> SU;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  }</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU = <a class="code" href="classllvm_1_1GenericScheduler.html#a253bc2bd1ae8e7f36e0c3c1c9bb67367">Top</a>.<a class="code" href="classllvm_1_1SchedBoundary.html#a744d69baffaf2903667eb65cf07a6814">pickOnlyChoice</a>()) {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    IsTopNode = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordflow">return</span> SU;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  }</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="comment">// Set the bottom-up policy based on the state of the current bottom zone and</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <span class="comment">// the instructions outside the zone, including the top zone.</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <a class="code" href="structllvm_1_1GenericSchedulerBase_1_1CandPolicy.html">CandPolicy</a> BotPolicy;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <a class="code" href="classllvm_1_1GenericSchedulerBase.html#a8668556014566994c07b21391762551b">setPolicy</a>(BotPolicy, <span class="comment">/*IsPostRA=*/</span><span class="keyword">false</span>, <a class="code" href="classllvm_1_1GenericScheduler.html#a3763f96e92009d4dc101837627fff3bd">Bot</a>, &amp;<a class="code" href="classllvm_1_1GenericScheduler.html#a253bc2bd1ae8e7f36e0c3c1c9bb67367">Top</a>);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="comment">// Set the top-down policy based on the state of the current top zone and</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="comment">// the instructions outside the zone, including the bottom zone.</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <a class="code" href="structllvm_1_1GenericSchedulerBase_1_1CandPolicy.html">CandPolicy</a> TopPolicy;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <a class="code" href="classllvm_1_1GenericSchedulerBase.html#a8668556014566994c07b21391762551b">setPolicy</a>(TopPolicy, <span class="comment">/*IsPostRA=*/</span><span class="keyword">false</span>, <a class="code" href="classllvm_1_1GenericScheduler.html#a253bc2bd1ae8e7f36e0c3c1c9bb67367">Top</a>, &amp;<a class="code" href="classllvm_1_1GenericScheduler.html#a3763f96e92009d4dc101837627fff3bd">Bot</a>);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160; </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="comment">// See if BotCand is still valid (because we previously scheduled from Top).</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Picking from Bot:\n&quot;</span>);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1GenericScheduler.html#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#acdc733638a93dca6bb0eb290ec896271">isValid</a>() || <a class="code" href="classllvm_1_1GenericScheduler.html#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a class="code" href="classllvm_1_1SUnit.html#a8c201d7a769bda1cd75d8d6788123068">isScheduled</a> ||</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      <a class="code" href="classllvm_1_1GenericScheduler.html#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#ae861d440b366cf033d7f2764b2b34be0">Policy</a> != BotPolicy) {</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <a class="code" href="classllvm_1_1GenericScheduler.html#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a361fa10c095c303e093021c6a1d04e75">reset</a>(<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1CandPolicy.html">CandPolicy</a>());</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a1ab6d6847aab23799f897da576a08cef">pickNodeFromQueue</a>(<a class="code" href="classllvm_1_1GenericScheduler.html#a3763f96e92009d4dc101837627fff3bd">Bot</a>, BotPolicy, <a class="code" href="classllvm_1_1GenericScheduler.html#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMILive.html#a8742ed4740b887868143aa8a64b9f4ce">getBotRPTracker</a>(), <a class="code" href="classllvm_1_1GenericScheduler.html#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1GenericScheduler.html#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a class="code" href="classllvm_1_1GenericSchedulerBase.html#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a> &amp;&amp; <span class="stringliteral">&quot;failed to find the first candidate&quot;</span>);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="classllvm_1_1GenericSchedulerBase.html#a0fc28b204833d49b88dbeceb366b7439">traceCandidate</a>(<a class="code" href="classllvm_1_1GenericScheduler.html#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>));</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ad7649adad973f341b72103836b310042">VerifyScheduling</a>) {</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      <a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html">SchedCandidate</a> TCand;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      TCand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a361fa10c095c303e093021c6a1d04e75">reset</a>(<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1CandPolicy.html">CandPolicy</a>());</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a1ab6d6847aab23799f897da576a08cef">pickNodeFromQueue</a>(<a class="code" href="classllvm_1_1GenericScheduler.html#a3763f96e92009d4dc101837627fff3bd">Bot</a>, BotPolicy, <a class="code" href="classllvm_1_1GenericScheduler.html#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMILive.html#a8742ed4740b887868143aa8a64b9f4ce">getBotRPTracker</a>(), TCand);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TCand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a310a170b7d2442d12634d53db262fb92">SU</a> == <a class="code" href="classllvm_1_1GenericScheduler.html#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a310a170b7d2442d12634d53db262fb92">SU</a> &amp;&amp;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;             <span class="stringliteral">&quot;Last pick result should correspond to re-picking right now&quot;</span>);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    }</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  }</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160; </div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="comment">// Check if the top Q has a better candidate.</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Picking from Top:\n&quot;</span>);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1GenericScheduler.html#a33cc1a55125b89319e048d24625a2925">TopCand</a>.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#acdc733638a93dca6bb0eb290ec896271">isValid</a>() || <a class="code" href="classllvm_1_1GenericScheduler.html#a33cc1a55125b89319e048d24625a2925">TopCand</a>.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a class="code" href="classllvm_1_1SUnit.html#a8c201d7a769bda1cd75d8d6788123068">isScheduled</a> ||</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      <a class="code" href="classllvm_1_1GenericScheduler.html#a33cc1a55125b89319e048d24625a2925">TopCand</a>.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#ae861d440b366cf033d7f2764b2b34be0">Policy</a> != TopPolicy) {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <a class="code" href="classllvm_1_1GenericScheduler.html#a33cc1a55125b89319e048d24625a2925">TopCand</a>.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a361fa10c095c303e093021c6a1d04e75">reset</a>(<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1CandPolicy.html">CandPolicy</a>());</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a1ab6d6847aab23799f897da576a08cef">pickNodeFromQueue</a>(<a class="code" href="classllvm_1_1GenericScheduler.html#a253bc2bd1ae8e7f36e0c3c1c9bb67367">Top</a>, TopPolicy, <a class="code" href="classllvm_1_1GenericScheduler.html#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMILive.html#ad811abbb60a7c33b42b51b3a1fd9d26b">getTopRPTracker</a>(), <a class="code" href="classllvm_1_1GenericScheduler.html#a33cc1a55125b89319e048d24625a2925">TopCand</a>);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1GenericScheduler.html#a33cc1a55125b89319e048d24625a2925">TopCand</a>.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a class="code" href="classllvm_1_1GenericSchedulerBase.html#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a> &amp;&amp; <span class="stringliteral">&quot;failed to find the first candidate&quot;</span>);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="classllvm_1_1GenericSchedulerBase.html#a0fc28b204833d49b88dbeceb366b7439">traceCandidate</a>(<a class="code" href="classllvm_1_1GenericScheduler.html#a33cc1a55125b89319e048d24625a2925">TopCand</a>));</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ad7649adad973f341b72103836b310042">VerifyScheduling</a>) {</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      <a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html">SchedCandidate</a> TCand;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      TCand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a361fa10c095c303e093021c6a1d04e75">reset</a>(<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1CandPolicy.html">CandPolicy</a>());</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a1ab6d6847aab23799f897da576a08cef">pickNodeFromQueue</a>(<a class="code" href="classllvm_1_1GenericScheduler.html#a253bc2bd1ae8e7f36e0c3c1c9bb67367">Top</a>, TopPolicy, <a class="code" href="classllvm_1_1GenericScheduler.html#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMILive.html#ad811abbb60a7c33b42b51b3a1fd9d26b">getTopRPTracker</a>(), TCand);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TCand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a310a170b7d2442d12634d53db262fb92">SU</a> == <a class="code" href="classllvm_1_1GenericScheduler.html#a33cc1a55125b89319e048d24625a2925">TopCand</a>.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a310a170b7d2442d12634d53db262fb92">SU</a> &amp;&amp;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;           <span class="stringliteral">&quot;Last pick result should correspond to re-picking right now&quot;</span>);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    }</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  }</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <span class="comment">// Pick best from BotCand and TopCand.</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Top Cand: &quot;</span>; <a class="code" href="classllvm_1_1GenericSchedulerBase.html#a0fc28b204833d49b88dbeceb366b7439">traceCandidate</a>(<a class="code" href="classllvm_1_1GenericScheduler.html#a33cc1a55125b89319e048d24625a2925">TopCand</a>);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;             <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Bot Cand: &quot;</span>; <a class="code" href="classllvm_1_1GenericSchedulerBase.html#a0fc28b204833d49b88dbeceb366b7439">traceCandidate</a>(<a class="code" href="classllvm_1_1GenericScheduler.html#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>););</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  <a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html">SchedCandidate</a> Cand = <a class="code" href="classllvm_1_1GenericScheduler.html#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <a class="code" href="classllvm_1_1GenericScheduler.html#a33cc1a55125b89319e048d24625a2925">TopCand</a>.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#ad9372964d55580636efe92281b42ad6c">Reason</a> = <a class="code" href="classllvm_1_1GenericSchedulerBase.html#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <a class="code" href="classllvm_1_1GenericScheduler.html#a6ef23d22af6c895d9c255de3e940b8bf">tryCandidate</a>(Cand, <a class="code" href="classllvm_1_1GenericScheduler.html#a33cc1a55125b89319e048d24625a2925">TopCand</a>, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GenericScheduler.html#a33cc1a55125b89319e048d24625a2925">TopCand</a>.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a class="code" href="classllvm_1_1GenericSchedulerBase.html#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>) {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    Cand.setBest(<a class="code" href="classllvm_1_1GenericScheduler.html#a33cc1a55125b89319e048d24625a2925">TopCand</a>);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  }</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Picking: &quot;</span>; <a class="code" href="classllvm_1_1GenericSchedulerBase.html#a0fc28b204833d49b88dbeceb366b7439">traceCandidate</a>(Cand););</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160; </div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  IsTopNode = Cand.AtTop;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <span class="keywordflow">return</span> Cand.SU;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;}</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160; </div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment">// This function is mostly cut and pasted from</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment">// GenericScheduler::pickNode()</span></div>
<div class="line"><a name="l00301"></a><span class="lineno"><a class="line" href="classllvm_1_1GCNSchedStrategy.html#af3f3a45f145bc8538e160bc3177ffc8f">  301</a></span>&#160;<a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *<a class="code" href="classllvm_1_1GCNSchedStrategy.html#af3f3a45f145bc8538e160bc3177ffc8f">GCNSchedStrategy::pickNode</a>(<span class="keywordtype">bool</span> &amp;IsTopNode) {</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GenericScheduler.html#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a5bcc40c244c6a33d738b3e4f1d490ca3">top</a>() == <a class="code" href="classllvm_1_1GenericScheduler.html#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a70e4bd877aac0a63c10463277c9a52c5">bottom</a>()) {</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1GenericScheduler.html#a253bc2bd1ae8e7f36e0c3c1c9bb67367">Top</a>.<a class="code" href="classllvm_1_1SchedBoundary.html#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.<a class="code" href="classllvm_1_1ReadyQueue.html#ac4384acfabedebaf6fd9a05d86109f47">empty</a>() &amp;&amp; <a class="code" href="classllvm_1_1GenericScheduler.html#a253bc2bd1ae8e7f36e0c3c1c9bb67367">Top</a>.<a class="code" href="classllvm_1_1SchedBoundary.html#ad3f102348942e4ca3ec057e895138609">Pending</a>.<a class="code" href="classllvm_1_1ReadyQueue.html#ac4384acfabedebaf6fd9a05d86109f47">empty</a>() &amp;&amp;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;           <a class="code" href="classllvm_1_1GenericScheduler.html#a3763f96e92009d4dc101837627fff3bd">Bot</a>.<a class="code" href="classllvm_1_1SchedBoundary.html#aa49fbb78ca6f0a19a967f2f8fb70097d">Available</a>.<a class="code" href="classllvm_1_1ReadyQueue.html#ac4384acfabedebaf6fd9a05d86109f47">empty</a>() &amp;&amp; <a class="code" href="classllvm_1_1GenericScheduler.html#a3763f96e92009d4dc101837627fff3bd">Bot</a>.<a class="code" href="classllvm_1_1SchedBoundary.html#ad3f102348942e4ca3ec057e895138609">Pending</a>.<a class="code" href="classllvm_1_1ReadyQueue.html#ac4384acfabedebaf6fd9a05d86109f47">empty</a>() &amp;&amp; <span class="stringliteral">&quot;ReadyQ garbage&quot;</span>);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  }</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GenericScheduler.html#a67813956a4d16d9f7403ca4462c0d9ae">RegionPolicy</a>.<a class="code" href="structllvm_1_1MachineSchedPolicy.html#a0f609dd4ed94ea69ab680a7228f8786b">OnlyTopDown</a>) {</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      SU = <a class="code" href="classllvm_1_1GenericScheduler.html#a253bc2bd1ae8e7f36e0c3c1c9bb67367">Top</a>.<a class="code" href="classllvm_1_1SchedBoundary.html#a744d69baffaf2903667eb65cf07a6814">pickOnlyChoice</a>();</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      <span class="keywordflow">if</span> (!SU) {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <a class="code" href="structllvm_1_1GenericSchedulerBase_1_1CandPolicy.html">CandPolicy</a> NoPolicy;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        <a class="code" href="classllvm_1_1GenericScheduler.html#a33cc1a55125b89319e048d24625a2925">TopCand</a>.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a361fa10c095c303e093021c6a1d04e75">reset</a>(NoPolicy);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a1ab6d6847aab23799f897da576a08cef">pickNodeFromQueue</a>(<a class="code" href="classllvm_1_1GenericScheduler.html#a253bc2bd1ae8e7f36e0c3c1c9bb67367">Top</a>, NoPolicy, <a class="code" href="classllvm_1_1GenericScheduler.html#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMILive.html#ad811abbb60a7c33b42b51b3a1fd9d26b">getTopRPTracker</a>(), <a class="code" href="classllvm_1_1GenericScheduler.html#a33cc1a55125b89319e048d24625a2925">TopCand</a>);</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1GenericScheduler.html#a33cc1a55125b89319e048d24625a2925">TopCand</a>.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a class="code" href="classllvm_1_1GenericSchedulerBase.html#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a> &amp;&amp; <span class="stringliteral">&quot;failed to find a candidate&quot;</span>);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        SU = <a class="code" href="classllvm_1_1GenericScheduler.html#a33cc1a55125b89319e048d24625a2925">TopCand</a>.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a310a170b7d2442d12634d53db262fb92">SU</a>;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      }</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      IsTopNode = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GenericScheduler.html#a67813956a4d16d9f7403ca4462c0d9ae">RegionPolicy</a>.<a class="code" href="structllvm_1_1MachineSchedPolicy.html#a47ee8ec29daa3551f798ff4449fbf4d5">OnlyBottomUp</a>) {</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      SU = <a class="code" href="classllvm_1_1GenericScheduler.html#a3763f96e92009d4dc101837627fff3bd">Bot</a>.<a class="code" href="classllvm_1_1SchedBoundary.html#a744d69baffaf2903667eb65cf07a6814">pickOnlyChoice</a>();</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      <span class="keywordflow">if</span> (!SU) {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <a class="code" href="structllvm_1_1GenericSchedulerBase_1_1CandPolicy.html">CandPolicy</a> NoPolicy;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <a class="code" href="classllvm_1_1GenericScheduler.html#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a361fa10c095c303e093021c6a1d04e75">reset</a>(NoPolicy);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a1ab6d6847aab23799f897da576a08cef">pickNodeFromQueue</a>(<a class="code" href="classllvm_1_1GenericScheduler.html#a3763f96e92009d4dc101837627fff3bd">Bot</a>, NoPolicy, <a class="code" href="classllvm_1_1GenericScheduler.html#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMILive.html#a8742ed4740b887868143aa8a64b9f4ce">getBotRPTracker</a>(), <a class="code" href="classllvm_1_1GenericScheduler.html#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1GenericScheduler.html#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a class="code" href="classllvm_1_1GenericSchedulerBase.html#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a> &amp;&amp; <span class="stringliteral">&quot;failed to find a candidate&quot;</span>);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        SU = <a class="code" href="classllvm_1_1GenericScheduler.html#a190c2995c11bd6de755bbd8311a8f176">BotCand</a>.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a310a170b7d2442d12634d53db262fb92">SU</a>;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      }</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      IsTopNode = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      SU = <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a26b8231b39c104871f78b2da6dc1eff5">pickNodeBidirectional</a>(IsTopNode);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    }</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  } <span class="keywordflow">while</span> (SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a8c201d7a769bda1cd75d8d6788123068">isScheduled</a>);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160; </div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="keywordflow">if</span> (SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#ae0b8da4dfde85d4ddc32359ca52dc493">isTopReady</a>())</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <a class="code" href="classllvm_1_1GenericScheduler.html#a253bc2bd1ae8e7f36e0c3c1c9bb67367">Top</a>.<a class="code" href="classllvm_1_1SchedBoundary.html#ae28da0579ee268c38eb2a5ababa222fa">removeReady</a>(SU);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="keywordflow">if</span> (SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#ac198a5fb130b4c09836ba20e01b4290d">isBottomReady</a>())</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <a class="code" href="classllvm_1_1GenericScheduler.html#a3763f96e92009d4dc101837627fff3bd">Bot</a>.<a class="code" href="classllvm_1_1SchedBoundary.html#ae28da0579ee268c38eb2a5ababa222fa">removeReady</a>(SU);</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160; </div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Scheduling SU(&quot;</span> &lt;&lt; SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt;&lt; <span class="stringliteral">&quot;) &quot;</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                    &lt;&lt; *SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a0727ce4ffb9b167e7ad283259d82b10c">getInstr</a>());</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <span class="keywordflow">return</span> SU;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;}</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160; </div>
<div class="line"><a name="l00344"></a><span class="lineno"><a class="line" href="classllvm_1_1GCNSchedStrategy.html#a5303450aec4d4b8fe49b3af743da555a">  344</a></span>&#160;<a class="code" href="namespacellvm.html#a66b412ba6b33cdefeb59dde7139dc8b0">GCNSchedStageID</a> <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a5303450aec4d4b8fe49b3af743da555a">GCNSchedStrategy::getCurrentStage</a>() {</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1GCNSchedStrategy.html#a7eb7baa0abad1c0fb63869eae07507a7">CurrentStage</a> &amp;&amp; <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a7eb7baa0abad1c0fb63869eae07507a7">CurrentStage</a> != <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a1736ffcc1fcc46c9c47748d5a9a04c4b">SchedStages</a>.end());</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <span class="keywordflow">return</span> *<a class="code" href="classllvm_1_1GCNSchedStrategy.html#a7eb7baa0abad1c0fb63869eae07507a7">CurrentStage</a>;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;}</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160; </div>
<div class="line"><a name="l00349"></a><span class="lineno"><a class="line" href="classllvm_1_1GCNSchedStrategy.html#a797dfd2abf170515d119ff35a4b5ffe7">  349</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a797dfd2abf170515d119ff35a4b5ffe7">GCNSchedStrategy::advanceStage</a>() {</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1GCNSchedStrategy.html#a7eb7baa0abad1c0fb63869eae07507a7">CurrentStage</a> != <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a1736ffcc1fcc46c9c47748d5a9a04c4b">SchedStages</a>.end());</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1GCNSchedStrategy.html#a7eb7baa0abad1c0fb63869eae07507a7">CurrentStage</a>)</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a7eb7baa0abad1c0fb63869eae07507a7">CurrentStage</a> = <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a1736ffcc1fcc46c9c47748d5a9a04c4b">SchedStages</a>.begin();</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a7eb7baa0abad1c0fb63869eae07507a7">CurrentStage</a>++;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160; </div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a7eb7baa0abad1c0fb63869eae07507a7">CurrentStage</a> != <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a1736ffcc1fcc46c9c47748d5a9a04c4b">SchedStages</a>.end();</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;}</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160; </div>
<div class="line"><a name="l00359"></a><span class="lineno"><a class="line" href="classllvm_1_1GCNSchedStrategy.html#a405838f7f99c2b64659702103f8bf43f">  359</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a405838f7f99c2b64659702103f8bf43f">GCNSchedStrategy::hasNextStage</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1GCNSchedStrategy.html#a7eb7baa0abad1c0fb63869eae07507a7">CurrentStage</a>);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  <span class="keywordflow">return</span> std::next(<a class="code" href="classllvm_1_1GCNSchedStrategy.html#a7eb7baa0abad1c0fb63869eae07507a7">CurrentStage</a>) != <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a1736ffcc1fcc46c9c47748d5a9a04c4b">SchedStages</a>.end();</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;}</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160; </div>
<div class="line"><a name="l00364"></a><span class="lineno"><a class="line" href="classllvm_1_1GCNSchedStrategy.html#aff69df5b1b61c9a71b8b75855e303e35">  364</a></span>&#160;<a class="code" href="namespacellvm.html#a66b412ba6b33cdefeb59dde7139dc8b0">GCNSchedStageID</a> <a class="code" href="classllvm_1_1GCNSchedStrategy.html#aff69df5b1b61c9a71b8b75855e303e35">GCNSchedStrategy::getNextStage</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1GCNSchedStrategy.html#a7eb7baa0abad1c0fb63869eae07507a7">CurrentStage</a> &amp;&amp; std::next(<a class="code" href="classllvm_1_1GCNSchedStrategy.html#a7eb7baa0abad1c0fb63869eae07507a7">CurrentStage</a>) != <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a1736ffcc1fcc46c9c47748d5a9a04c4b">SchedStages</a>.end());</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <span class="keywordflow">return</span> *std::next(<a class="code" href="classllvm_1_1GCNSchedStrategy.html#a7eb7baa0abad1c0fb63869eae07507a7">CurrentStage</a>);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;}</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160; </div>
<div class="line"><a name="l00369"></a><span class="lineno"><a class="line" href="classllvm_1_1GCNMaxOccupancySchedStrategy.html#a20d63f383bbf4b14e7e0e1ad30207ff3">  369</a></span>&#160;<a class="code" href="classllvm_1_1GCNMaxOccupancySchedStrategy.html#a20d63f383bbf4b14e7e0e1ad30207ff3">GCNMaxOccupancySchedStrategy::GCNMaxOccupancySchedStrategy</a>(</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1MachineSchedContext.html">MachineSchedContext</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    : <a class="code" href="classllvm_1_1GCNSchedStrategy.html">GCNSchedStrategy</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a1736ffcc1fcc46c9c47748d5a9a04c4b">SchedStages</a>.push_back(<a class="code" href="namespacellvm.html#a66b412ba6b33cdefeb59dde7139dc8b0afc7d208fa38407036d4d3dfc7ac1ccff">GCNSchedStageID::OccInitialSchedule</a>);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a1736ffcc1fcc46c9c47748d5a9a04c4b">SchedStages</a>.push_back(<a class="code" href="namespacellvm.html#a66b412ba6b33cdefeb59dde7139dc8b0a3199673fa17ebc25c0c9925028d225e0">GCNSchedStageID::UnclusteredHighRPReschedule</a>);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a1736ffcc1fcc46c9c47748d5a9a04c4b">SchedStages</a>.push_back(<a class="code" href="namespacellvm.html#a66b412ba6b33cdefeb59dde7139dc8b0aff2914ea67320c4b23b0c3bf909a201c">GCNSchedStageID::ClusteredLowOccupancyReschedule</a>);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a1736ffcc1fcc46c9c47748d5a9a04c4b">SchedStages</a>.push_back(<a class="code" href="namespacellvm.html#a66b412ba6b33cdefeb59dde7139dc8b0aa2def37e6bb76e915e4ae7cc4b47ae7a">GCNSchedStageID::PreRARematerialize</a>);</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;}</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160; </div>
<div class="line"><a name="l00378"></a><span class="lineno"><a class="line" href="classllvm_1_1GCNMaxILPSchedStrategy.html#ab9b774c18357fd89d3da62c07828868d">  378</a></span>&#160;<a class="code" href="classllvm_1_1GCNMaxILPSchedStrategy.html#ab9b774c18357fd89d3da62c07828868d">GCNMaxILPSchedStrategy::GCNMaxILPSchedStrategy</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1MachineSchedContext.html">MachineSchedContext</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    : <a class="code" href="classllvm_1_1GCNSchedStrategy.html">GCNSchedStrategy</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStrategy.html#a1736ffcc1fcc46c9c47748d5a9a04c4b">SchedStages</a>.push_back(<a class="code" href="namespacellvm.html#a66b412ba6b33cdefeb59dde7139dc8b0a6fc19a20667f6a2cc7adb83e3f67a487">GCNSchedStageID::ILPInitialSchedule</a>);</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;}</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160; </div>
<div class="line"><a name="l00383"></a><span class="lineno"><a class="line" href="classllvm_1_1GCNMaxILPSchedStrategy.html#adaaa8b026820461823cf355979353b3a">  383</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1GCNMaxILPSchedStrategy.html#adaaa8b026820461823cf355979353b3a">GCNMaxILPSchedStrategy::tryCandidate</a>(<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html">SchedCandidate</a> &amp;Cand,</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                                          <a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html">SchedCandidate</a> &amp;TryCand,</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                                          <a class="code" href="classllvm_1_1SchedBoundary.html">SchedBoundary</a> *Zone)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <span class="comment">// Initialize the candidate if needed.</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <span class="keywordflow">if</span> (!Cand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#acdc733638a93dca6bb0eb290ec896271">isValid</a>()) {</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    TryCand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#ad9372964d55580636efe92281b42ad6c">Reason</a> = <a class="code" href="classllvm_1_1GenericSchedulerBase.html#ae0da1bc94e326020069c0f44170a48d3aa00a8e5741a604eb07320e981473b4e7">NodeOrder</a>;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  }</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160; </div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <span class="comment">// Avoid spilling by exceeding the register limit.</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GenericScheduler.html#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMILive.html#a87daf83eb223263e4c8766d10aa911be">isTrackingPressure</a>() &amp;&amp;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      <a class="code" href="namespacellvm.html#a62cf34ac18c5612524978166788b5c80">tryPressure</a>(TryCand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>.<a class="code" href="structllvm_1_1RegPressureDelta.html#aff9c3b403c6d4af795dd8be1c9612240">Excess</a>, Cand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>.<a class="code" href="structllvm_1_1RegPressureDelta.html#aff9c3b403c6d4af795dd8be1c9612240">Excess</a>, TryCand, Cand,</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                  <a class="code" href="classllvm_1_1GenericSchedulerBase.html#ae0da1bc94e326020069c0f44170a48d3a01d264553167fb005aba23a6d2a6e9bb">RegExcess</a>, <a class="code" href="classllvm_1_1GenericSchedulerBase.html#ae9476ffbc2f3f195a2116b13f3186194">TRI</a>, <a class="code" href="classllvm_1_1GenericScheduler.html#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;<a class="code" href="classllvm_1_1ScheduleDAG.html#a5a3d3d075a208011a24a0918b58d7daa">MF</a>))</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="keywordflow">return</span> TryCand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a class="code" href="classllvm_1_1GenericSchedulerBase.html#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160; </div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <span class="comment">// Bias PhysReg Defs and copies to their uses and defined respectively.</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ab618de2b7dea1e1859018a1a7e8b3ee5">tryGreater</a>(<a class="code" href="namespacellvm.html#afb4b9423201406d79ba16481c90cb6cb">biasPhysReg</a>(TryCand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a310a170b7d2442d12634d53db262fb92">SU</a>, TryCand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a>),</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                 <a class="code" href="namespacellvm.html#afb4b9423201406d79ba16481c90cb6cb">biasPhysReg</a>(Cand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a310a170b7d2442d12634d53db262fb92">SU</a>, Cand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a>), TryCand, Cand, <a class="code" href="classllvm_1_1GenericSchedulerBase.html#ae0da1bc94e326020069c0f44170a48d3ab58c08e8fa9324ebf332e11601ec6c0d">PhysReg</a>))</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordflow">return</span> TryCand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a class="code" href="classllvm_1_1GenericSchedulerBase.html#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160; </div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <span class="keywordtype">bool</span> SameBoundary = Zone != <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  <span class="keywordflow">if</span> (SameBoundary) {</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="comment">// Prioritize instructions that read unbuffered resources by stall cycles.</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ae0fdc8ed1e4e4ae29b810aeffc13fb47">tryLess</a>(Zone-&gt;<a class="code" href="classllvm_1_1SchedBoundary.html#a4a674627365b72b17a9b2e0a99d40ce1">getLatencyStallCycles</a>(TryCand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a310a170b7d2442d12634d53db262fb92">SU</a>),</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                Zone-&gt;<a class="code" href="classllvm_1_1SchedBoundary.html#a4a674627365b72b17a9b2e0a99d40ce1">getLatencyStallCycles</a>(Cand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a310a170b7d2442d12634d53db262fb92">SU</a>), TryCand, Cand, <a class="code" href="classllvm_1_1GenericSchedulerBase.html#ae0da1bc94e326020069c0f44170a48d3ab6aae8902e724a36ed16d537784777a2">Stall</a>))</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;      <span class="keywordflow">return</span> TryCand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a class="code" href="classllvm_1_1GenericSchedulerBase.html#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160; </div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="comment">// Avoid critical resource consumption and balance the schedule.</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    TryCand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a47cc8c89db10ac27483585cd61cf4f91">initResourceDelta</a>(<a class="code" href="classllvm_1_1GenericScheduler.html#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>, <a class="code" href="classllvm_1_1GenericSchedulerBase.html#a9730ea0068843718868a8667f52e3680">SchedModel</a>);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ae0fdc8ed1e4e4ae29b810aeffc13fb47">tryLess</a>(TryCand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#ab86856838bf1e1577210f03d35273ccb">ResDelta</a>.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedResourceDelta.html#a3ffd08e01bba20c9af1ae13630ed7acd">CritResources</a>, Cand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#ab86856838bf1e1577210f03d35273ccb">ResDelta</a>.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedResourceDelta.html#a3ffd08e01bba20c9af1ae13630ed7acd">CritResources</a>,</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                TryCand, Cand, <a class="code" href="classllvm_1_1GenericSchedulerBase.html#ae0da1bc94e326020069c0f44170a48d3a56637d3435d7e1953a615371cfe4d5ec">ResourceReduce</a>))</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      <span class="keywordflow">return</span> TryCand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a class="code" href="classllvm_1_1GenericSchedulerBase.html#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ab618de2b7dea1e1859018a1a7e8b3ee5">tryGreater</a>(TryCand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#ab86856838bf1e1577210f03d35273ccb">ResDelta</a>.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedResourceDelta.html#ab660550157a92f83f7b4f2db2d2d9304">DemandedResources</a>,</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                   Cand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#ab86856838bf1e1577210f03d35273ccb">ResDelta</a>.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedResourceDelta.html#ab660550157a92f83f7b4f2db2d2d9304">DemandedResources</a>, TryCand, Cand,</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                   <a class="code" href="classllvm_1_1GenericSchedulerBase.html#ae0da1bc94e326020069c0f44170a48d3a07409a8a5b9657af23f0a1c962f5c0c1">ResourceDemand</a>))</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      <span class="keywordflow">return</span> TryCand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a class="code" href="classllvm_1_1GenericSchedulerBase.html#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="comment">// Unconditionally try to reduce latency.</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a8c9a83bf7b5f6e85f215ff07a31e0fbe">tryLatency</a>(TryCand, Cand, *Zone))</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;      <span class="keywordflow">return</span> TryCand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a class="code" href="classllvm_1_1GenericSchedulerBase.html#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160; </div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="comment">// Weak edges are for clustering and other constraints.</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ae0fdc8ed1e4e4ae29b810aeffc13fb47">tryLess</a>(<a class="code" href="namespacellvm.html#a13933f8ac2f5e1a34cf53b2c1e1bdc5b">getWeakLeft</a>(TryCand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a310a170b7d2442d12634d53db262fb92">SU</a>, TryCand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a>),</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                <a class="code" href="namespacellvm.html#a13933f8ac2f5e1a34cf53b2c1e1bdc5b">getWeakLeft</a>(Cand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a310a170b7d2442d12634d53db262fb92">SU</a>, Cand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a>), TryCand, Cand, <a class="code" href="classllvm_1_1GenericSchedulerBase.html#ae0da1bc94e326020069c0f44170a48d3aed8b719fe1a669c2fed4bacc6f46e8df">Weak</a>))</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      <span class="keywordflow">return</span> TryCand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a class="code" href="classllvm_1_1GenericSchedulerBase.html#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  }</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160; </div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="comment">// Keep clustered nodes together to encourage downstream peephole</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <span class="comment">// optimizations which may reduce resource requirements.</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <span class="comment">// This is a best effort to set things up for a post-RA pass. Optimizations</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <span class="comment">// like generating loads of multiple registers should ideally be done within</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <span class="comment">// the scheduler pass by combining the loads during DAG postprocessing.</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *CandNextClusterSU =</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;      Cand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a> ? <a class="code" href="classllvm_1_1GenericScheduler.html#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#ae8a7d2f5a351f2a80d6bc781d32b1dae">getNextClusterSucc</a>() : <a class="code" href="classllvm_1_1GenericScheduler.html#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a87100b77d9d1f05bdbd1465e9146fb6d">getNextClusterPred</a>();</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *TryCandNextClusterSU =</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      TryCand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a87328c4ecbb87961dd2c970d343b9ca0">AtTop</a> ? <a class="code" href="classllvm_1_1GenericScheduler.html#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#ae8a7d2f5a351f2a80d6bc781d32b1dae">getNextClusterSucc</a>() : <a class="code" href="classllvm_1_1GenericScheduler.html#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a87100b77d9d1f05bdbd1465e9146fb6d">getNextClusterPred</a>();</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ab618de2b7dea1e1859018a1a7e8b3ee5">tryGreater</a>(TryCand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a310a170b7d2442d12634d53db262fb92">SU</a> == TryCandNextClusterSU,</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                 Cand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a310a170b7d2442d12634d53db262fb92">SU</a> == CandNextClusterSU, TryCand, Cand, <a class="code" href="classllvm_1_1GenericSchedulerBase.html#ae0da1bc94e326020069c0f44170a48d3a5a905614458af47ec4a5054a53d23e1b">Cluster</a>))</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keywordflow">return</span> TryCand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a class="code" href="classllvm_1_1GenericSchedulerBase.html#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160; </div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <span class="comment">// Avoid increasing the max critical pressure in the scheduled region.</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GenericScheduler.html#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMILive.html#a87daf83eb223263e4c8766d10aa911be">isTrackingPressure</a>() &amp;&amp;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;      <a class="code" href="namespacellvm.html#a62cf34ac18c5612524978166788b5c80">tryPressure</a>(TryCand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>.<a class="code" href="structllvm_1_1RegPressureDelta.html#a277da5755f2b30ebcebdba51d0de1acf">CriticalMax</a>, Cand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>.<a class="code" href="structllvm_1_1RegPressureDelta.html#a277da5755f2b30ebcebdba51d0de1acf">CriticalMax</a>,</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                  TryCand, Cand, <a class="code" href="classllvm_1_1GenericSchedulerBase.html#ae0da1bc94e326020069c0f44170a48d3a974161ce84e375b6d40bd8855c29dd7f">RegCritical</a>, <a class="code" href="classllvm_1_1GenericSchedulerBase.html#ae9476ffbc2f3f195a2116b13f3186194">TRI</a>, <a class="code" href="classllvm_1_1GenericScheduler.html#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;<a class="code" href="classllvm_1_1ScheduleDAG.html#a5a3d3d075a208011a24a0918b58d7daa">MF</a>))</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="keywordflow">return</span> TryCand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a class="code" href="classllvm_1_1GenericSchedulerBase.html#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160; </div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  <span class="comment">// Avoid increasing the max pressure of the entire region.</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GenericScheduler.html#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;<a class="code" href="classllvm_1_1ScheduleDAGMILive.html#a87daf83eb223263e4c8766d10aa911be">isTrackingPressure</a>() &amp;&amp;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;      <a class="code" href="namespacellvm.html#a62cf34ac18c5612524978166788b5c80">tryPressure</a>(TryCand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>.<a class="code" href="structllvm_1_1RegPressureDelta.html#a589e1a7e9a8a095d8d01ff8ba32b3d14">CurrentMax</a>, Cand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a81fbfdac1b8c1e736493b56b50853322">RPDelta</a>.<a class="code" href="structllvm_1_1RegPressureDelta.html#a589e1a7e9a8a095d8d01ff8ba32b3d14">CurrentMax</a>, TryCand,</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                  Cand, <a class="code" href="classllvm_1_1GenericSchedulerBase.html#ae0da1bc94e326020069c0f44170a48d3a01ef8d8423fe645e50ad5a179b4f4483">RegMax</a>, <a class="code" href="classllvm_1_1GenericSchedulerBase.html#ae9476ffbc2f3f195a2116b13f3186194">TRI</a>, <a class="code" href="classllvm_1_1GenericScheduler.html#a75edfd9bb13c765b11b0b400cbe2aaed">DAG</a>-&gt;<a class="code" href="classllvm_1_1ScheduleDAG.html#a5a3d3d075a208011a24a0918b58d7daa">MF</a>))</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="keywordflow">return</span> TryCand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#ad9372964d55580636efe92281b42ad6c">Reason</a> != <a class="code" href="classllvm_1_1GenericSchedulerBase.html#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">NoCand</a>;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160; </div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  <span class="keywordflow">if</span> (SameBoundary) {</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="comment">// Fall through to original instruction order.</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="keywordflow">if</span> ((Zone-&gt;<a class="code" href="classllvm_1_1SchedBoundary.html#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>() &amp;&amp; TryCand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a class="code" href="classllvm_1_1SUnit.html#a3f708b119627541f144d703a1d183202">NodeNum</a> &lt; Cand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a class="code" href="classllvm_1_1SUnit.html#a3f708b119627541f144d703a1d183202">NodeNum</a>) ||</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        (!Zone-&gt;<a class="code" href="classllvm_1_1SchedBoundary.html#a589e51a1ef960a2b6aaa3854ce04d77a">isTop</a>() &amp;&amp; TryCand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a class="code" href="classllvm_1_1SUnit.html#a3f708b119627541f144d703a1d183202">NodeNum</a> &gt; Cand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a310a170b7d2442d12634d53db262fb92">SU</a>-&gt;<a class="code" href="classllvm_1_1SUnit.html#a3f708b119627541f144d703a1d183202">NodeNum</a>)) {</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;      TryCand.<a class="code" href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#ad9372964d55580636efe92281b42ad6c">Reason</a> = <a class="code" href="classllvm_1_1GenericSchedulerBase.html#ae0da1bc94e326020069c0f44170a48d3aa00a8e5741a604eb07320e981473b4e7">NodeOrder</a>;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    }</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  }</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;}</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160; </div>
<div class="line"><a name="l00467"></a><span class="lineno"><a class="line" href="classllvm_1_1GCNScheduleDAGMILive.html#a586d595322e6cb11cc1663b937d9aca7">  467</a></span>&#160;<a class="code" href="classllvm_1_1GCNScheduleDAGMILive.html#a586d595322e6cb11cc1663b937d9aca7">GCNScheduleDAGMILive::GCNScheduleDAGMILive</a>(</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <a class="code" href="structllvm_1_1MachineSchedContext.html">MachineSchedContext</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, std::unique_ptr&lt;MachineSchedStrategy&gt; <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>)</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    : <a class="code" href="classllvm_1_1ScheduleDAGMILive.html">ScheduleDAGMILive</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="namespacestd.html">std</a>::<a class="code" href="namespacellvm.html#abfc9c7ecf70f66901e439f7c04ef3dbb">move</a>(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>)), <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>(MF.getSubtarget&lt;<a class="code" href="classllvm_1_1GCNSubtarget.html">GCNSubtarget</a>&gt;()),</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;      MFI(*MF.getInfo&lt;<a class="code" href="classllvm_1_1SIMachineFunctionInfo.html">SIMachineFunctionInfo</a>&gt;()),</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;      StartingOccupancy(MFI.getOccupancy()), MinOccupancy(StartingOccupancy) {</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160; </div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Starting occupancy is &quot;</span> &lt;&lt; StartingOccupancy &lt;&lt; <span class="stringliteral">&quot;.\n&quot;</span>);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;}</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160; </div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;std::unique_ptr&lt;GCNSchedStage&gt;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;GCNScheduleDAGMILive::createSchedStage(<a class="code" href="namespacellvm.html#a66b412ba6b33cdefeb59dde7139dc8b0">GCNSchedStageID</a> SchedStageID) {</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <span class="keywordflow">switch</span> (SchedStageID) {</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a66b412ba6b33cdefeb59dde7139dc8b0afc7d208fa38407036d4d3dfc7ac1ccff">GCNSchedStageID::OccInitialSchedule</a>:</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <span class="keywordflow">return</span> std::make_unique&lt;OccInitialScheduleStage&gt;(SchedStageID, *<span class="keyword">this</span>);</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a66b412ba6b33cdefeb59dde7139dc8b0a3199673fa17ebc25c0c9925028d225e0">GCNSchedStageID::UnclusteredHighRPReschedule</a>:</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="keywordflow">return</span> std::make_unique&lt;UnclusteredHighRPStage&gt;(SchedStageID, *<span class="keyword">this</span>);</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a66b412ba6b33cdefeb59dde7139dc8b0aff2914ea67320c4b23b0c3bf909a201c">GCNSchedStageID::ClusteredLowOccupancyReschedule</a>:</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="keywordflow">return</span> std::make_unique&lt;ClusteredLowOccStage&gt;(SchedStageID, *<span class="keyword">this</span>);</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a66b412ba6b33cdefeb59dde7139dc8b0aa2def37e6bb76e915e4ae7cc4b47ae7a">GCNSchedStageID::PreRARematerialize</a>:</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="keywordflow">return</span> std::make_unique&lt;PreRARematStage&gt;(SchedStageID, *<span class="keyword">this</span>);</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a66b412ba6b33cdefeb59dde7139dc8b0a6fc19a20667f6a2cc7adb83e3f67a487">GCNSchedStageID::ILPInitialSchedule</a>:</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keywordflow">return</span> std::make_unique&lt;ILPInitialScheduleStage&gt;(SchedStageID, *<span class="keyword">this</span>);</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  }</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160; </div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unknown SchedStageID.&quot;</span>);</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;}</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160; </div>
<div class="line"><a name="l00494"></a><span class="lineno"><a class="line" href="classllvm_1_1GCNScheduleDAGMILive.html#a3c1701146006f98eaa57e38932060160">  494</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1GCNScheduleDAGMILive.html#a3c1701146006f98eaa57e38932060160">GCNScheduleDAGMILive::schedule</a>() {</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <span class="comment">// Collect all scheduling regions. The actual scheduling is performed in</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  <span class="comment">// GCNScheduleDAGMILive::finalizeSchedule.</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  Regions.push_back(std::pair(<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#ae81ad8ece7681af658742f6d4e2fcfb1">RegionBegin</a>, <a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#a3f74b283acf0dfb537bc387e49344f04">RegionEnd</a>));</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;}</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160; </div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<a class="code" href="structllvm_1_1GCNRegPressure.html">GCNRegPressure</a></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;GCNScheduleDAGMILive::getRealRegPressure(<span class="keywordtype">unsigned</span> RegionIdx)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  <a class="code" href="classllvm_1_1GCNDownwardRPTracker.html">GCNDownwardRPTracker</a> <a class="code" href="classllvm_1_1ScheduleDAGMILive.html#abd3a9c68e31ad35d6468f200facdd0e3">RPTracker</a>(*<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a9d67b1cafa36e90d7060d1da84907885">LIS</a>);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  <a class="code" href="classllvm_1_1ScheduleDAGMILive.html#abd3a9c68e31ad35d6468f200facdd0e3">RPTracker</a>.<a class="code" href="classllvm_1_1RegPressureTracker.html#a99487c5b550882cba98d817d47cc3fc0">advance</a>(<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#ab50b64c518a7455daf3e0bc87aee5514">begin</a>(), <a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#a21805259f54dab47c2b3da009216996a">end</a>(), &amp;LiveIns[RegionIdx]);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ScheduleDAGMILive.html#abd3a9c68e31ad35d6468f200facdd0e3">RPTracker</a>.moveMaxPressure();</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;}</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160; </div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="keywordtype">void</span> GCNScheduleDAGMILive::computeBlockPressure(<span class="keywordtype">unsigned</span> RegionIdx,</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                                                <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>) {</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  <a class="code" href="classllvm_1_1GCNDownwardRPTracker.html">GCNDownwardRPTracker</a> <a class="code" href="classllvm_1_1ScheduleDAGMILive.html#abd3a9c68e31ad35d6468f200facdd0e3">RPTracker</a>(*<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a9d67b1cafa36e90d7060d1da84907885">LIS</a>);</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160; </div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  <span class="comment">// If the block has the only successor then live-ins of that successor are</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  <span class="comment">// live-outs of the current block. We can reuse calculated live set if the</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <span class="comment">// successor will be sent to scheduling past current block.</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *OnlySucc = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a81626de817a0cb021ff8e915cf1942ed">succ_size</a>() == 1 &amp;&amp; !(*<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6321b189ea8fd5058663f8a87d6c23e9">succ_begin</a>())-&gt;empty()) {</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <a class="code" href="classllvm_1_1SlotIndexes.html">SlotIndexes</a> *Ind = <a class="code" href="classllvm_1_1ScheduleDAGMI.html#a9d67b1cafa36e90d7060d1da84907885">LIS</a>-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#aaedf1d3001470af7cdb616868c247ffe">getSlotIndexes</a>();</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="keywordflow">if</span> (Ind-&gt;<a class="code" href="classllvm_1_1SlotIndexes.html#aaf0c07cc1cdb9c78c6dfdfdd5913420a">getMBBStartIdx</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>) &lt; Ind-&gt;<a class="code" href="classllvm_1_1SlotIndexes.html#aaf0c07cc1cdb9c78c6dfdfdd5913420a">getMBBStartIdx</a>(*<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6321b189ea8fd5058663f8a87d6c23e9">succ_begin</a>()))</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;      OnlySucc = *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a6321b189ea8fd5058663f8a87d6c23e9">succ_begin</a>();</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  }</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160; </div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <span class="comment">// Scheduler sends regions from the end of the block upwards.</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <span class="keywordtype">size_t</span> CurRegion = RegionIdx;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = Regions.size(); CurRegion != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++CurRegion)</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <span class="keywordflow">if</span> (Regions[CurRegion].first-&gt;getParent() != <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>)</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  --CurRegion;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160; </div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  <span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>();</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  <span class="keyword">auto</span> LiveInIt = MBBLiveIns.find(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  <span class="keyword">auto</span> &amp;Rgn = Regions[CurRegion];</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  <span class="keyword">auto</span> *NonDbgMI = &amp;*<a class="code" href="namespacellvm.html#a5bacbbd03e9261f7b30dc174f26d680c">skipDebugInstructionsForward</a>(Rgn.first, Rgn.second);</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  <span class="keywordflow">if</span> (LiveInIt != MBBLiveIns.end()) {</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <span class="keyword">auto</span> LiveIn = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(LiveInIt-&gt;second);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <a class="code" href="classllvm_1_1ScheduleDAGMILive.html#abd3a9c68e31ad35d6468f200facdd0e3">RPTracker</a>.<a class="code" href="classllvm_1_1RegPressureTracker.html#ac9e57447ee6550f3ffcb4a432bd3dbab">reset</a>(*<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>(), &amp;LiveIn);</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    MBBLiveIns.erase(LiveInIt);</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Rgn.first;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keyword">auto</span> LRS = BBLiveInMap.lookup(NonDbgMI);</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="preprocessor">#ifdef EXPENSIVE_CHECKS</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm.html#a0f0d66fa63bebb53ddd51f1cc4def0f8">isEqual</a>(<a class="code" href="namespacellvm.html#adb88334dcf6976de300fb1e3667430d7">getLiveRegsBefore</a>(*NonDbgMI, *<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a9d67b1cafa36e90d7060d1da84907885">LIS</a>), LRS));</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <a class="code" href="classllvm_1_1ScheduleDAGMILive.html#abd3a9c68e31ad35d6468f200facdd0e3">RPTracker</a>.<a class="code" href="classllvm_1_1RegPressureTracker.html#ac9e57447ee6550f3ffcb4a432bd3dbab">reset</a>(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, &amp;LRS);</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  }</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160; </div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="classllvm_1_1ScheduleDAGMILive.html#abd3a9c68e31ad35d6468f200facdd0e3">RPTracker</a>.getNext();</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160; </div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="keywordflow">if</span> (Regions[CurRegion].first == <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> || NonDbgMI == <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;      LiveIns[CurRegion] = <a class="code" href="classllvm_1_1ScheduleDAGMILive.html#abd3a9c68e31ad35d6468f200facdd0e3">RPTracker</a>.getLiveRegs();</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      <a class="code" href="classllvm_1_1ScheduleDAGMILive.html#abd3a9c68e31ad35d6468f200facdd0e3">RPTracker</a>.clearMaxPressure();</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    }</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160; </div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="keywordflow">if</span> (Regions[CurRegion].second == <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      Pressure[CurRegion] = <a class="code" href="classllvm_1_1ScheduleDAGMILive.html#abd3a9c68e31ad35d6468f200facdd0e3">RPTracker</a>.moveMaxPressure();</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      <span class="keywordflow">if</span> (CurRegion-- == RegionIdx)</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    }</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <a class="code" href="classllvm_1_1ScheduleDAGMILive.html#abd3a9c68e31ad35d6468f200facdd0e3">RPTracker</a>.advanceToNext();</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <a class="code" href="classllvm_1_1ScheduleDAGMILive.html#abd3a9c68e31ad35d6468f200facdd0e3">RPTracker</a>.advanceBeforeNext();</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  }</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160; </div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  <span class="keywordflow">if</span> (OnlySucc) {</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>()) {</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      <a class="code" href="classllvm_1_1ScheduleDAGMILive.html#abd3a9c68e31ad35d6468f200facdd0e3">RPTracker</a>.advanceToNext();</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      <a class="code" href="classllvm_1_1ScheduleDAGMILive.html#abd3a9c68e31ad35d6468f200facdd0e3">RPTracker</a>.<a class="code" href="classllvm_1_1RegPressureTracker.html#a99487c5b550882cba98d817d47cc3fc0">advance</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>());</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    }</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <a class="code" href="classllvm_1_1ScheduleDAGMILive.html#abd3a9c68e31ad35d6468f200facdd0e3">RPTracker</a>.advanceBeforeNext();</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    MBBLiveIns[OnlySucc] = <a class="code" href="classllvm_1_1ScheduleDAGMILive.html#abd3a9c68e31ad35d6468f200facdd0e3">RPTracker</a>.moveLiveRegs();</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  }</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;}</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160; </div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;MachineInstr *, GCNRPTracker::LiveRegSet&gt;</a></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;GCNScheduleDAGMILive::getBBLiveInMap()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!Regions.empty());</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  std::vector&lt;MachineInstr *&gt; BBStarters;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  BBStarters.reserve(Regions.size());</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  <span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Regions.rbegin(), <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = Regions.rend();</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  <span class="keyword">auto</span> *<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#a254403f7804208ade3cb68086201cb7a">BB</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;first-&gt;getParent();</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = &amp;*<a class="code" href="namespacellvm.html#a5bacbbd03e9261f7b30dc174f26d680c">skipDebugInstructionsForward</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;first, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;second);</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    BBStarters.push_back(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    } <span class="keywordflow">while</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> &amp;&amp; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;first-&gt;getParent() == <a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#a254403f7804208ade3cb68086201cb7a">BB</a>);</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  } <span class="keywordflow">while</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>);</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a9e8c07e4142b6708ae1c68aa8bf8f066">getLiveRegMap</a>(BBStarters, <span class="keyword">false</span> <span class="comment">/*After*/</span>, *<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a9d67b1cafa36e90d7060d1da84907885">LIS</a>);</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;}</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160; </div>
<div class="line"><a name="l00589"></a><span class="lineno"><a class="line" href="classllvm_1_1GCNScheduleDAGMILive.html#a07b7b7af2f5068531a7f854726ed6d0c">  589</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1GCNScheduleDAGMILive.html#a07b7b7af2f5068531a7f854726ed6d0c">GCNScheduleDAGMILive::finalizeSchedule</a>() {</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  <span class="comment">// Start actual scheduling here. This function is called by the base</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  <span class="comment">// MachineScheduler after all regions have been recorded by</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <span class="comment">// GCNScheduleDAGMILive::schedule().</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  LiveIns.resize(Regions.size());</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  Pressure.resize(Regions.size());</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  RescheduleRegions.<a class="code" href="classllvm_1_1BitVector.html#a32859a24aa7a3be269855b989d92a4b4">resize</a>(Regions.size());</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  RegionsWithHighRP.<a class="code" href="classllvm_1_1BitVector.html#a32859a24aa7a3be269855b989d92a4b4">resize</a>(Regions.size());</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  RegionsWithExcessRP.<a class="code" href="classllvm_1_1BitVector.html#a32859a24aa7a3be269855b989d92a4b4">resize</a>(Regions.size());</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  RegionsWithMinOcc.<a class="code" href="classllvm_1_1BitVector.html#a32859a24aa7a3be269855b989d92a4b4">resize</a>(Regions.size());</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  RegionsWithIGLPInstrs.<a class="code" href="classllvm_1_1BitVector.html#a32859a24aa7a3be269855b989d92a4b4">resize</a>(Regions.size());</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  RescheduleRegions.<a class="code" href="classllvm_1_1BitVector.html#a1964207fae81f04966b2a9dcfc21cf7b">set</a>();</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  RegionsWithHighRP.<a class="code" href="classllvm_1_1BitVector.html#a5109693c2cdda2a4118e7d588b51bfa6">reset</a>();</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  RegionsWithExcessRP.<a class="code" href="classllvm_1_1BitVector.html#a5109693c2cdda2a4118e7d588b51bfa6">reset</a>();</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  RegionsWithMinOcc.<a class="code" href="classllvm_1_1BitVector.html#a5109693c2cdda2a4118e7d588b51bfa6">reset</a>();</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  RegionsWithIGLPInstrs.<a class="code" href="classllvm_1_1BitVector.html#a5109693c2cdda2a4118e7d588b51bfa6">reset</a>();</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160; </div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  runSchedStages();</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;}</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160; </div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="keywordtype">void</span> GCNScheduleDAGMILive::runSchedStages() {</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;All regions recorded, starting actual scheduling.\n&quot;</span>);</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160; </div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <span class="keywordflow">if</span> (!Regions.empty())</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    BBLiveInMap = getBBLiveInMap();</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160; </div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStrategy.html">GCNSchedStrategy</a> &amp;<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> = <span class="keyword">static_cast&lt;</span><a class="code" href="classllvm_1_1GCNSchedStrategy.html">GCNSchedStrategy</a> &amp;<span class="keyword">&gt;</span>(*SchedImpl);</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.advanceStage()) {</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="keyword">auto</span> Stage = createSchedStage(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.getCurrentStage());</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="keywordflow">if</span> (!Stage-&gt;initGCNSchedStage())</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160; </div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="classllvm_1_1Region.html">Region</a> : Regions) {</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      <a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#ae81ad8ece7681af658742f6d4e2fcfb1">RegionBegin</a> = <a class="code" href="classllvm_1_1Region.html">Region</a>.first;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;      <a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#a3f74b283acf0dfb537bc387e49344f04">RegionEnd</a> = <a class="code" href="classllvm_1_1Region.html">Region</a>.second;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;      <span class="comment">// Setup for scheduling the region and check whether it should be skipped.</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;      <span class="keywordflow">if</span> (!Stage-&gt;initGCNRegion()) {</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        Stage-&gt;advanceRegion();</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        <a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#abc5a5c32ac78a99ee2633dbbeec20397">exitRegion</a>();</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;      }</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160; </div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;      <a class="code" href="classllvm_1_1ScheduleDAGMILive.html#a1583ce23a69e8a1b4af8065e2019c75f">ScheduleDAGMILive::schedule</a>();</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;      Stage-&gt;finalizeGCNRegion();</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    }</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160; </div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    Stage-&gt;finalizeGCNSchedStage();</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  }</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;}</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160; </div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00640"></a><span class="lineno"><a class="line" href="namespacellvm.html#ae2dbe7289b0cfb133f45ccf35cc6dc36">  640</a></span>&#160;<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="namespacellvm.html#a5ee0a415cf089775fd277550b257f74e">llvm::operator&lt;&lt;</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>, <span class="keyword">const</span> <a class="code" href="namespacellvm.html#a66b412ba6b33cdefeb59dde7139dc8b0">GCNSchedStageID</a> &amp;StageID) {</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  <span class="keywordflow">switch</span> (StageID) {</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a66b412ba6b33cdefeb59dde7139dc8b0afc7d208fa38407036d4d3dfc7ac1ccff">GCNSchedStageID::OccInitialSchedule</a>:</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;Max Occupancy Initial Schedule&quot;</span>;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a66b412ba6b33cdefeb59dde7139dc8b0a3199673fa17ebc25c0c9925028d225e0">GCNSchedStageID::UnclusteredHighRPReschedule</a>:</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;Unclustered High Register Pressure Reschedule&quot;</span>;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a66b412ba6b33cdefeb59dde7139dc8b0aff2914ea67320c4b23b0c3bf909a201c">GCNSchedStageID::ClusteredLowOccupancyReschedule</a>:</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;Clustered Low Occupancy Reschedule&quot;</span>;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a66b412ba6b33cdefeb59dde7139dc8b0aa2def37e6bb76e915e4ae7cc4b47ae7a">GCNSchedStageID::PreRARematerialize</a>:</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;Pre-RA Rematerialize&quot;</span>;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a66b412ba6b33cdefeb59dde7139dc8b0a6fc19a20667f6a2cc7adb83e3f67a487">GCNSchedStageID::ILPInitialSchedule</a>:</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a> &lt;&lt; <span class="stringliteral">&quot;Max ILP Initial Schedule&quot;</span>;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  }</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160; </div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a>;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;}</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160; </div>
<div class="line"><a name="l00663"></a><span class="lineno"><a class="line" href="classllvm_1_1GCNSchedStage.html#ad59ed5d84fb3a647d8572705f541e881">  663</a></span>&#160;<a class="code" href="classllvm_1_1GCNSchedStage.html#ad59ed5d84fb3a647d8572705f541e881">GCNSchedStage::GCNSchedStage</a>(<a class="code" href="namespacellvm.html#a66b412ba6b33cdefeb59dde7139dc8b0">GCNSchedStageID</a> StageID, <a class="code" href="classllvm_1_1GCNScheduleDAGMILive.html">GCNScheduleDAGMILive</a> &amp;DAG)</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    : DAG(DAG), <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>(static_cast&lt;<a class="code" href="classllvm_1_1GCNSchedStrategy.html">GCNSchedStrategy</a> &amp;&gt;(*DAG.SchedImpl)), MF(DAG.MF),</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;      MFI(DAG.MFI), <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>(DAG.<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>), StageID(StageID) {}</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160; </div>
<div class="line"><a name="l00667"></a><span class="lineno"><a class="line" href="classllvm_1_1GCNSchedStage.html#abf59722e7890dda4515a601ddf65ce1a">  667</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1GCNSchedStage.html#abf59722e7890dda4515a601ddf65ce1a">GCNSchedStage::initGCNSchedStage</a>() {</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a9d67b1cafa36e90d7060d1da84907885">LIS</a>)</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160; </div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Starting scheduling stage: &quot;</span> &lt;&lt; <a class="code" href="classllvm_1_1GCNSchedStage.html#a82cf0aa779669bf7afa305d3789618d1">StageID</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;}</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160; </div>
<div class="line"><a name="l00675"></a><span class="lineno"><a class="line" href="classllvm_1_1UnclusteredHighRPStage.html#a2468e5cc789e17c8e2fb2b6102404e8f">  675</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1UnclusteredHighRPStage.html#a2468e5cc789e17c8e2fb2b6102404e8f">UnclusteredHighRPStage::initGCNSchedStage</a>() {</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="GCNSchedStrategy_8cpp.html#a3b9f8729601d93f7ada55a93097dfcaf">DisableUnclusterHighRP</a>)</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160; </div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1GCNSchedStage.html#abf59722e7890dda4515a601ddf65ce1a">GCNSchedStage::initGCNSchedStage</a>())</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160; </div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.RegionsWithHighRP.<a class="code" href="classllvm_1_1BitVector.html#aa19094c99ca405ec1efe38da727d27de">none</a>() &amp;&amp; <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.RegionsWithExcessRP.<a class="code" href="classllvm_1_1BitVector.html#aa19094c99ca405ec1efe38da727d27de">none</a>())</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160; </div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStage.html#ac9371d95e0cd8d242a9a3fe319105b54">SavedMutations</a>.swap(<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGMI.html#aed362d97300c9cd91f179f9c6c31c9ac">Mutations</a>);</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a2002164aea6fabe20598e0526746b1fa">addMutation</a>(<a class="code" href="namespacellvm.html#a71fc5e23072a3c0807e8379f61235248">createIGroupLPDAGMutation</a>());</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160; </div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  InitialOccupancy = <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.MinOccupancy;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  <span class="comment">// Aggressivly try to reduce register pressure in the unclustered high RP</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  <span class="comment">// stage. Temporarily increase occupancy target in the region.</span></div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStage.html#a2f14a5fe09608fc5cce9e68e4f516a68">S</a>.<a class="code" href="classllvm_1_1GCNSchedStrategy.html#aa5bfab3502e3953ac33f90ae4c86fecc">SGPRLimitBias</a> = <a class="code" href="classllvm_1_1GCNSchedStage.html#a2f14a5fe09608fc5cce9e68e4f516a68">S</a>.<a class="code" href="classllvm_1_1GCNSchedStrategy.html#a07d3ce50a12f46f5923bc2496b05bfb6">HighRPSGPRBias</a>;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStage.html#a2f14a5fe09608fc5cce9e68e4f516a68">S</a>.<a class="code" href="classllvm_1_1GCNSchedStrategy.html#af100c4ee35e4de0856b35b151479ec3d">VGPRLimitBias</a> = <a class="code" href="classllvm_1_1GCNSchedStage.html#a2f14a5fe09608fc5cce9e68e4f516a68">S</a>.<a class="code" href="classllvm_1_1GCNSchedStrategy.html#abc922b5ccbfe87a7c54c8d07e122eea7">HighRPVGPRBias</a>;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GCNSchedStage.html#aa22f1a1dc2d882a5c94b02777ed9a878">MFI</a>.<a class="code" href="classllvm_1_1SIMachineFunctionInfo.html#a31ecea76a64e57b030ad7b2d1e7b226c">getMaxWavesPerEU</a>() &gt; <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.MinOccupancy)</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <a class="code" href="classllvm_1_1GCNSchedStage.html#aa22f1a1dc2d882a5c94b02777ed9a878">MFI</a>.<a class="code" href="classllvm_1_1SIMachineFunctionInfo.html#a17e3b288cc69f7b6c8c0c4d1795dfc2a">increaseOccupancy</a>(<a class="code" href="classllvm_1_1GCNSchedStage.html#a979d350534fac63dad98d8f2937bf5a7">MF</a>, ++<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.MinOccupancy);</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160; </div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;Retrying function scheduling without clustering. &quot;</span></div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;         <span class="stringliteral">&quot;Aggressivly try to reduce register pressure to achieve occupancy &quot;</span></div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;      &lt;&lt; <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.MinOccupancy &lt;&lt; <span class="stringliteral">&quot;.\n&quot;</span>);</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160; </div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;}</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160; </div>
<div class="line"><a name="l00705"></a><span class="lineno"><a class="line" href="classllvm_1_1ClusteredLowOccStage.html#a0bdb7b684aa1f51dc79bf9b7f9bf079f">  705</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1ClusteredLowOccStage.html#a0bdb7b684aa1f51dc79bf9b7f9bf079f">ClusteredLowOccStage::initGCNSchedStage</a>() {</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1GCNSchedStage.html#abf59722e7890dda4515a601ddf65ce1a">GCNSchedStage::initGCNSchedStage</a>())</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160; </div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  <span class="comment">// Don&#39;t bother trying to improve ILP in lower RP regions if occupancy has not</span></div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  <span class="comment">// been dropped. All regions will have already been scheduled with the ideal</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  <span class="comment">// occupancy targets.</span></div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.StartingOccupancy &lt;= <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.MinOccupancy)</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160; </div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Retrying function scheduling with lowest recorded occupancy &quot;</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;             &lt;&lt; <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.MinOccupancy &lt;&lt; <span class="stringliteral">&quot;.\n&quot;</span>);</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;}</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160; </div>
<div class="line"><a name="l00721"></a><span class="lineno"><a class="line" href="classllvm_1_1PreRARematStage.html#aef3c65c6f9af28a14119e3fcee53f17a">  721</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1PreRARematStage.html#aef3c65c6f9af28a14119e3fcee53f17a">PreRARematStage::initGCNSchedStage</a>() {</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1GCNSchedStage.html#abf59722e7890dda4515a601ddf65ce1a">GCNSchedStage::initGCNSchedStage</a>())</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160; </div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.RegionsWithMinOcc.<a class="code" href="classllvm_1_1BitVector.html#aa19094c99ca405ec1efe38da727d27de">none</a>() || <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.Regions.size() == 1)</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160; </div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a> = <a class="code" href="classllvm_1_1GCNSchedStage.html#a979d350534fac63dad98d8f2937bf5a7">MF</a>.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>().<a class="code" href="classllvm_1_1TargetSubtargetInfo.html#ad34f7e3cd7a9add3ab2529e267b48004">getInstrInfo</a>();</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  <span class="comment">// Check maximum occupancy</span></div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GCNSchedStage.html#afce50f36ba47b66bbea271c232ac99e2">ST</a>.<a class="code" href="classllvm_1_1GCNSubtarget.html#a22e6e95a4f532492fa0ec707993ecab9">computeOccupancy</a>(<a class="code" href="classllvm_1_1GCNSchedStage.html#a979d350534fac63dad98d8f2937bf5a7">MF</a>.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>(), <a class="code" href="classllvm_1_1GCNSchedStage.html#aa22f1a1dc2d882a5c94b02777ed9a878">MFI</a>.<a class="code" href="classllvm_1_1AMDGPUMachineFunction.html#a1e2bde424bd7365a73971777ed20a7a8">getLDSSize</a>()) ==</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;      <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.MinOccupancy)</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160; </div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  <span class="comment">// FIXME: This pass will invalidate cached MBBLiveIns for regions</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  <span class="comment">// inbetween the defs and region we sinked the def to. Cached pressure</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  <span class="comment">// for regions where a def is sinked from will also be invalidated. Will</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  <span class="comment">// need to be fixed if there is another pass after this pass.</span></div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="classllvm_1_1GCNSchedStage.html#a2f14a5fe09608fc5cce9e68e4f516a68">S</a>.<a class="code" href="classllvm_1_1GCNSchedStrategy.html#a405838f7f99c2b64659702103f8bf43f">hasNextStage</a>());</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160; </div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  collectRematerializableInstructions();</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  <span class="keywordflow">if</span> (RematerializableInsts.empty() || !sinkTriviallyRematInsts(<a class="code" href="classllvm_1_1GCNSchedStage.html#afce50f36ba47b66bbea271c232ac99e2">ST</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>))</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160; </div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Retrying function scheduling with improved occupancy of &quot;</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;             &lt;&lt; <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.MinOccupancy &lt;&lt; <span class="stringliteral">&quot; from rematerializing\n&quot;</span>);</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;}</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160; </div>
<div class="line"><a name="l00750"></a><span class="lineno"><a class="line" href="classllvm_1_1GCNSchedStage.html#abe70a14f7fe3a1883d731a8e399535b9">  750</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1GCNSchedStage.html#abe70a14f7fe3a1883d731a8e399535b9">GCNSchedStage::finalizeGCNSchedStage</a>() {</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a9ca687b69b34efab1604af98db151cbf">finishBlock</a>();</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Ending scheduling stage: &quot;</span> &lt;&lt; <a class="code" href="classllvm_1_1GCNSchedStage.html#a82cf0aa779669bf7afa305d3789618d1">StageID</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;}</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160; </div>
<div class="line"><a name="l00755"></a><span class="lineno"><a class="line" href="classllvm_1_1UnclusteredHighRPStage.html#a439f8b8a746c9571e58e9aaaa6d60e2c">  755</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1UnclusteredHighRPStage.html#a439f8b8a746c9571e58e9aaaa6d60e2c">UnclusteredHighRPStage::finalizeGCNSchedStage</a>() {</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStage.html#ac9371d95e0cd8d242a9a3fe319105b54">SavedMutations</a>.swap(<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGMI.html#aed362d97300c9cd91f179f9c6c31c9ac">Mutations</a>);</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStage.html#a2f14a5fe09608fc5cce9e68e4f516a68">S</a>.<a class="code" href="classllvm_1_1GCNSchedStrategy.html#aa5bfab3502e3953ac33f90ae4c86fecc">SGPRLimitBias</a> = <a class="code" href="classllvm_1_1GCNSchedStage.html#a2f14a5fe09608fc5cce9e68e4f516a68">S</a>.<a class="code" href="classllvm_1_1GCNSchedStrategy.html#af100c4ee35e4de0856b35b151479ec3d">VGPRLimitBias</a> = 0;</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.MinOccupancy &gt; InitialOccupancy) {</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> IDX = 0; IDX &lt; <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.Pressure.size(); ++IDX)</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;      <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.RegionsWithMinOcc[IDX] =</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;          <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.Pressure[IDX].getOccupancy(<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.ST) == <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.MinOccupancy;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160; </div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a class="code" href="classllvm_1_1GCNSchedStage.html#a82cf0aa779669bf7afa305d3789618d1">StageID</a></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; stage successfully increased occupancy to &quot;</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                      &lt;&lt; <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.MinOccupancy &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  }</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160; </div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStage.html#abe70a14f7fe3a1883d731a8e399535b9">GCNSchedStage::finalizeGCNSchedStage</a>();</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;}</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160; </div>
<div class="line"><a name="l00771"></a><span class="lineno"><a class="line" href="classllvm_1_1GCNSchedStage.html#a02add63fe5ce109718dea7e87b1db3c1">  771</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1GCNSchedStage.html#a02add63fe5ce109718dea7e87b1db3c1">GCNSchedStage::initGCNRegion</a>() {</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;  <span class="comment">// Check whether this new region is also a new block.</span></div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#ae81ad8ece7681af658742f6d4e2fcfb1">RegionBegin</a>-&gt;getParent() != <a class="code" href="classllvm_1_1GCNSchedStage.html#af72ae40b5f2dbcbf6898d7420b1250c7">CurrentMBB</a>)</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    <a class="code" href="classllvm_1_1GCNSchedStage.html#ae61160f05c56687090740404f3ce0862">setupNewBlock</a>();</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160; </div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  <span class="keywordtype">unsigned</span> NumRegionInstrs = std::distance(<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#ab50b64c518a7455daf3e0bc87aee5514">begin</a>(), <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#a21805259f54dab47c2b3da009216996a">end</a>());</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGMILive.html#a34481791fdd8f5d9131431cb0a1a0c01">enterRegion</a>(<a class="code" href="classllvm_1_1GCNSchedStage.html#af72ae40b5f2dbcbf6898d7420b1250c7">CurrentMBB</a>, <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#ab50b64c518a7455daf3e0bc87aee5514">begin</a>(), <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#a21805259f54dab47c2b3da009216996a">end</a>(), NumRegionInstrs);</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160; </div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  <span class="comment">// Skip empty scheduling regions (0 or 1 schedulable instructions).</span></div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#ab50b64c518a7455daf3e0bc87aee5514">begin</a>() == <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#a21805259f54dab47c2b3da009216996a">end</a>() || <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#ab50b64c518a7455daf3e0bc87aee5514">begin</a>() == std::prev(<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#a21805259f54dab47c2b3da009216996a">end</a>()))</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160; </div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;********** MI Scheduling **********\n&quot;</span>);</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <a class="code" href="classllvm_1_1GCNSchedStage.html#a979d350534fac63dad98d8f2937bf5a7">MF</a>.<a class="code" href="classllvm_1_1MachineFunction.html#a3d142c9e7c066059e15232c56dec9e2e">getName</a>() &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; <a class="code" href="namespacellvm.html#af7881286e3ea4d7f1c4a63c87c132dac">printMBBReference</a>(*<a class="code" href="classllvm_1_1GCNSchedStage.html#af72ae40b5f2dbcbf6898d7420b1250c7">CurrentMBB</a>)</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code" href="classllvm_1_1GCNSchedStage.html#af72ae40b5f2dbcbf6898d7420b1250c7">CurrentMBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#aedf6cb1135961f41f39dc58ca8576123">getName</a>()</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;\n  From: &quot;</span> &lt;&lt; *<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#ab50b64c518a7455daf3e0bc87aee5514">begin</a>() &lt;&lt; <span class="stringliteral">&quot;    To: &quot;</span>;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;             <a class="code" href="include_2llvm_2Support_2CMakeLists_8txt.html#aef9367eb0b7430eaf70b1f2725488f2a">if</a> (<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#a3f74b283acf0dfb537bc387e49344f04">RegionEnd</a> != <a class="code" href="classllvm_1_1GCNSchedStage.html#af72ae40b5f2dbcbf6898d7420b1250c7">CurrentMBB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>()) <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; *<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#a3f74b283acf0dfb537bc387e49344f04">RegionEnd</a>;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;             <span class="keywordflow">else</span> <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;End&quot;</span>;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;             <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; RegionInstrs: &quot;</span> &lt;&lt; NumRegionInstrs &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160; </div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  <span class="comment">// Save original instruction order before scheduling for possible revert.</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStage.html#a875f89663ff968a4a76625dd0dd804eb">Unsched</a>.clear();</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStage.html#a875f89663ff968a4a76625dd0dd804eb">Unsched</a>.reserve(<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#af1c8be2ff5fd8eab8091e6ffa40ded8d">NumRegionInstrs</a>);</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GCNSchedStage.html#a82cf0aa779669bf7afa305d3789618d1">StageID</a> == <a class="code" href="namespacellvm.html#a66b412ba6b33cdefeb59dde7139dc8b0afc7d208fa38407036d4d3dfc7ac1ccff">GCNSchedStageID::OccInitialSchedule</a> ||</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;      <a class="code" href="classllvm_1_1GCNSchedStage.html#a82cf0aa779669bf7afa305d3789618d1">StageID</a> == <a class="code" href="namespacellvm.html#a66b412ba6b33cdefeb59dde7139dc8b0a6fc19a20667f6a2cc7adb83e3f67a487">GCNSchedStageID::ILPInitialSchedule</a>) {</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>) {</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;      <a class="code" href="classllvm_1_1GCNSchedStage.html#a875f89663ff968a4a76625dd0dd804eb">Unsched</a>.push_back(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode() == AMDGPU::SCHED_GROUP_BARRIER ||</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;          <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode() == AMDGPU::IGLP_OPT)</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.RegionsWithIGLPInstrs[<a class="code" href="classllvm_1_1GCNSchedStage.html#aa7ee003eb6297edeab5ac83fb99711a0">RegionIdx</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    }</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>)</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      <a class="code" href="classllvm_1_1GCNSchedStage.html#a875f89663ff968a4a76625dd0dd804eb">Unsched</a>.push_back(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;  }</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160; </div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStage.html#a30bb50e213057f1830b72558972019fa">PressureBefore</a> = <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.Pressure[<a class="code" href="classllvm_1_1GCNSchedStage.html#aa7ee003eb6297edeab5ac83fb99711a0">RegionIdx</a>];</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160; </div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Pressure before scheduling:\nRegion live-ins:&quot;</span></div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;             &lt;&lt; <a class="code" href="namespacellvm.html#a67980a8ae101d2fda845eb750ffb1942">print</a>(<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.LiveIns[<a class="code" href="classllvm_1_1GCNSchedStage.html#aa7ee003eb6297edeab5ac83fb99711a0">RegionIdx</a>], <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAG.html#a1b09f4d9c91e25f7bc2ac60b3b929d11">MRI</a>)</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;Region live-in pressure:  &quot;</span></div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;             &lt;&lt; <a class="code" href="namespacellvm.html#a67980a8ae101d2fda845eb750ffb1942">print</a>(<a class="code" href="namespacellvm.html#a273ec9d4a470ecb7362abd00438e9b26">llvm::getRegPressure</a>(<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAG.html#a1b09f4d9c91e25f7bc2ac60b3b929d11">MRI</a>, <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.LiveIns[<a class="code" href="classllvm_1_1GCNSchedStage.html#aa7ee003eb6297edeab5ac83fb99711a0">RegionIdx</a>]))</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;Region register pressure: &quot;</span> &lt;&lt; <a class="code" href="namespacellvm.html#a67980a8ae101d2fda845eb750ffb1942">print</a>(<a class="code" href="classllvm_1_1GCNSchedStage.html#a30bb50e213057f1830b72558972019fa">PressureBefore</a>));</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160; </div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStage.html#a2f14a5fe09608fc5cce9e68e4f516a68">S</a>.<a class="code" href="classllvm_1_1GCNSchedStrategy.html#a1902cf3722582eecec1d87862513ba3b">HasHighPressure</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStage.html#a2f14a5fe09608fc5cce9e68e4f516a68">S</a>.<a class="code" href="classllvm_1_1GCNSchedStrategy.html#a508f8eece85480c2520ebf5d1f3ef945">KnownExcessRP</a> = <a class="code" href="classllvm_1_1GCNSchedStage.html#a5344e12321c46ea1f7e78aaaed43f984">isRegionWithExcessRP</a>();</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160; </div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.RegionsWithIGLPInstrs[<a class="code" href="classllvm_1_1GCNSchedStage.html#aa7ee003eb6297edeab5ac83fb99711a0">RegionIdx</a>] &amp;&amp;</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;      <a class="code" href="classllvm_1_1GCNSchedStage.html#a82cf0aa779669bf7afa305d3789618d1">StageID</a> != <a class="code" href="namespacellvm.html#a66b412ba6b33cdefeb59dde7139dc8b0a3199673fa17ebc25c0c9925028d225e0">GCNSchedStageID::UnclusteredHighRPReschedule</a>) {</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <a class="code" href="classllvm_1_1GCNSchedStage.html#ac9371d95e0cd8d242a9a3fe319105b54">SavedMutations</a>.clear();</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <a class="code" href="classllvm_1_1GCNSchedStage.html#ac9371d95e0cd8d242a9a3fe319105b54">SavedMutations</a>.swap(<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGMI.html#aed362d97300c9cd91f179f9c6c31c9ac">Mutations</a>);</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a2002164aea6fabe20598e0526746b1fa">addMutation</a>(<a class="code" href="namespacellvm.html#a71fc5e23072a3c0807e8379f61235248">createIGroupLPDAGMutation</a>());</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  }</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160; </div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;}</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160; </div>
<div class="line"><a name="l00829"></a><span class="lineno"><a class="line" href="classllvm_1_1UnclusteredHighRPStage.html#a2bb4889375018fd6bcc64fb3d3258d95">  829</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1UnclusteredHighRPStage.html#a2bb4889375018fd6bcc64fb3d3258d95">UnclusteredHighRPStage::initGCNRegion</a>() {</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  <span class="comment">// Only reschedule regions with the minimum occupancy or regions that may have</span></div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;  <span class="comment">// spilling (excess register pressure).</span></div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  <span class="keywordflow">if</span> ((!<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.RegionsWithMinOcc[<a class="code" href="classllvm_1_1GCNSchedStage.html#aa7ee003eb6297edeab5ac83fb99711a0">RegionIdx</a>] ||</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;       <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.MinOccupancy &lt;= InitialOccupancy) &amp;&amp;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;      !<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.RegionsWithExcessRP[<a class="code" href="classllvm_1_1GCNSchedStage.html#aa7ee003eb6297edeab5ac83fb99711a0">RegionIdx</a>])</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160; </div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1GCNSchedStage.html#a02add63fe5ce109718dea7e87b1db3c1">GCNSchedStage::initGCNRegion</a>();</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;}</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160; </div>
<div class="line"><a name="l00840"></a><span class="lineno"><a class="line" href="classllvm_1_1ClusteredLowOccStage.html#a251a257a2bc03ff04c73072f8d7eeb8d">  840</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1ClusteredLowOccStage.html#a251a257a2bc03ff04c73072f8d7eeb8d">ClusteredLowOccStage::initGCNRegion</a>() {</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  <span class="comment">// We may need to reschedule this region if it wasn&#39;t rescheduled in the last</span></div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  <span class="comment">// stage, or if we found it was testing critical register pressure limits in</span></div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  <span class="comment">// the unclustered reschedule stage. The later is because we may not have been</span></div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  <span class="comment">// able to raise the min occupancy in the previous stage so the region may be</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  <span class="comment">// overly constrained even if it was already rescheduled.</span></div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.RegionsWithHighRP[<a class="code" href="classllvm_1_1GCNSchedStage.html#aa7ee003eb6297edeab5ac83fb99711a0">RegionIdx</a>])</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160; </div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1GCNSchedStage.html#a02add63fe5ce109718dea7e87b1db3c1">GCNSchedStage::initGCNRegion</a>();</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;}</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160; </div>
<div class="line"><a name="l00852"></a><span class="lineno"><a class="line" href="classllvm_1_1PreRARematStage.html#adaf8209252a511c74f8db1e37b572672">  852</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1PreRARematStage.html#adaf8209252a511c74f8db1e37b572672">PreRARematStage::initGCNRegion</a>() {</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.RescheduleRegions[<a class="code" href="classllvm_1_1GCNSchedStage.html#aa7ee003eb6297edeab5ac83fb99711a0">RegionIdx</a>])</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160; </div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1GCNSchedStage.html#a02add63fe5ce109718dea7e87b1db3c1">GCNSchedStage::initGCNRegion</a>();</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;}</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160; </div>
<div class="line"><a name="l00859"></a><span class="lineno"><a class="line" href="classllvm_1_1GCNSchedStage.html#ae61160f05c56687090740404f3ce0862">  859</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1GCNSchedStage.html#ae61160f05c56687090740404f3ce0862">GCNSchedStage::setupNewBlock</a>() {</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GCNSchedStage.html#af72ae40b5f2dbcbf6898d7420b1250c7">CurrentMBB</a>)</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a9ca687b69b34efab1604af98db151cbf">finishBlock</a>();</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160; </div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStage.html#af72ae40b5f2dbcbf6898d7420b1250c7">CurrentMBB</a> = <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#ae81ad8ece7681af658742f6d4e2fcfb1">RegionBegin</a>-&gt;getParent();</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a19c5e2b675721f465bc85a5f58e7c084">startBlock</a>(<a class="code" href="classllvm_1_1GCNSchedStage.html#af72ae40b5f2dbcbf6898d7420b1250c7">CurrentMBB</a>);</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;  <span class="comment">// Get real RP for the region if it hasn&#39;t be calculated before. After the</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  <span class="comment">// initial schedule stage real RP will be collected after scheduling.</span></div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GCNSchedStage.html#a82cf0aa779669bf7afa305d3789618d1">StageID</a> == <a class="code" href="namespacellvm.html#a66b412ba6b33cdefeb59dde7139dc8b0afc7d208fa38407036d4d3dfc7ac1ccff">GCNSchedStageID::OccInitialSchedule</a>)</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.computeBlockPressure(<a class="code" href="classllvm_1_1GCNSchedStage.html#aa7ee003eb6297edeab5ac83fb99711a0">RegionIdx</a>, <a class="code" href="classllvm_1_1GCNSchedStage.html#af72ae40b5f2dbcbf6898d7420b1250c7">CurrentMBB</a>);</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;}</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160; </div>
<div class="line"><a name="l00871"></a><span class="lineno"><a class="line" href="classllvm_1_1GCNSchedStage.html#a999c9b7a7e0362970a608dca15f4c5e0">  871</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1GCNSchedStage.html#a999c9b7a7e0362970a608dca15f4c5e0">GCNSchedStage::finalizeGCNRegion</a>() {</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.Regions[<a class="code" href="classllvm_1_1GCNSchedStage.html#aa7ee003eb6297edeab5ac83fb99711a0">RegionIdx</a>] = std::pair(<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#ae81ad8ece7681af658742f6d4e2fcfb1">RegionBegin</a>, <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#a3f74b283acf0dfb537bc387e49344f04">RegionEnd</a>);</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.RescheduleRegions[<a class="code" href="classllvm_1_1GCNSchedStage.html#aa7ee003eb6297edeab5ac83fb99711a0">RegionIdx</a>] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GCNSchedStage.html#a2f14a5fe09608fc5cce9e68e4f516a68">S</a>.<a class="code" href="classllvm_1_1GCNSchedStrategy.html#a1902cf3722582eecec1d87862513ba3b">HasHighPressure</a>)</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.RegionsWithHighRP[<a class="code" href="classllvm_1_1GCNSchedStage.html#aa7ee003eb6297edeab5ac83fb99711a0">RegionIdx</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160; </div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;  <span class="comment">// Revert scheduling if we have dropped occupancy or there is some other</span></div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;  <span class="comment">// reason that the original schedule is better.</span></div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStage.html#aa4200885c657056ba7d712d516e7d4b6">checkScheduling</a>();</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160; </div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.RegionsWithIGLPInstrs[<a class="code" href="classllvm_1_1GCNSchedStage.html#aa7ee003eb6297edeab5ac83fb99711a0">RegionIdx</a>] &amp;&amp;</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;      <a class="code" href="classllvm_1_1GCNSchedStage.html#a82cf0aa779669bf7afa305d3789618d1">StageID</a> != <a class="code" href="namespacellvm.html#a66b412ba6b33cdefeb59dde7139dc8b0a3199673fa17ebc25c0c9925028d225e0">GCNSchedStageID::UnclusteredHighRPReschedule</a>)</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    <a class="code" href="classllvm_1_1GCNSchedStage.html#ac9371d95e0cd8d242a9a3fe319105b54">SavedMutations</a>.swap(<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGMI.html#aed362d97300c9cd91f179f9c6c31c9ac">Mutations</a>);</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160; </div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#abc5a5c32ac78a99ee2633dbbeec20397">exitRegion</a>();</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStage.html#aa7ee003eb6297edeab5ac83fb99711a0">RegionIdx</a>++;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;}</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160; </div>
<div class="line"><a name="l00889"></a><span class="lineno"><a class="line" href="classllvm_1_1GCNSchedStage.html#aa4200885c657056ba7d712d516e7d4b6">  889</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1GCNSchedStage.html#aa4200885c657056ba7d712d516e7d4b6">GCNSchedStage::checkScheduling</a>() {</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  <span class="comment">// Check the results of scheduling.</span></div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStage.html#a935e3a2cbb8d260bc1cc4dcf701db0ec">PressureAfter</a> = <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.getRealRegPressure(<a class="code" href="classllvm_1_1GCNSchedStage.html#aa7ee003eb6297edeab5ac83fb99711a0">RegionIdx</a>);</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Pressure after scheduling: &quot;</span> &lt;&lt; <a class="code" href="namespacellvm.html#a67980a8ae101d2fda845eb750ffb1942">print</a>(<a class="code" href="classllvm_1_1GCNSchedStage.html#a935e3a2cbb8d260bc1cc4dcf701db0ec">PressureAfter</a>));</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Region: &quot;</span> &lt;&lt; <a class="code" href="classllvm_1_1GCNSchedStage.html#aa7ee003eb6297edeab5ac83fb99711a0">RegionIdx</a> &lt;&lt; <span class="stringliteral">&quot;.\n&quot;</span>);</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160; </div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GCNSchedStage.html#a935e3a2cbb8d260bc1cc4dcf701db0ec">PressureAfter</a>.<a class="code" href="structllvm_1_1GCNRegPressure.html#abd577f5d55cd0fde5973c8c5a1cdb816">getSGPRNum</a>() &lt;= <a class="code" href="classllvm_1_1GCNSchedStage.html#a2f14a5fe09608fc5cce9e68e4f516a68">S</a>.<a class="code" href="classllvm_1_1GCNSchedStrategy.html#a2ed3b8acc5fc8c2f5c155620b5c32555">SGPRCriticalLimit</a> &amp;&amp;</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;      <a class="code" href="classllvm_1_1GCNSchedStage.html#a935e3a2cbb8d260bc1cc4dcf701db0ec">PressureAfter</a>.<a class="code" href="structllvm_1_1GCNRegPressure.html#a6b5acc4933b30383d7b31729281dacc3">getVGPRNum</a>(<a class="code" href="classllvm_1_1GCNSchedStage.html#afce50f36ba47b66bbea271c232ac99e2">ST</a>.<a class="code" href="classllvm_1_1GCNSubtarget.html#a1fc0ea9be83e3d4cb2aeb2d7b2363e73">hasGFX90AInsts</a>()) &lt;= <a class="code" href="classllvm_1_1GCNSchedStage.html#a2f14a5fe09608fc5cce9e68e4f516a68">S</a>.<a class="code" href="classllvm_1_1GCNSchedStrategy.html#a87648a3c33abb5fb8ff110b760424ecc">VGPRCriticalLimit</a>) {</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.Pressure[<a class="code" href="classllvm_1_1GCNSchedStage.html#aa7ee003eb6297edeab5ac83fb99711a0">RegionIdx</a>] = <a class="code" href="classllvm_1_1GCNSchedStage.html#a935e3a2cbb8d260bc1cc4dcf701db0ec">PressureAfter</a>;</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.RegionsWithMinOcc[<a class="code" href="classllvm_1_1GCNSchedStage.html#aa7ee003eb6297edeab5ac83fb99711a0">RegionIdx</a>] =</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        <a class="code" href="classllvm_1_1GCNSchedStage.html#a935e3a2cbb8d260bc1cc4dcf701db0ec">PressureAfter</a>.<a class="code" href="structllvm_1_1GCNRegPressure.html#a478ab8c9c868e81201d1d7467e096863">getOccupancy</a>(<a class="code" href="classllvm_1_1GCNSchedStage.html#afce50f36ba47b66bbea271c232ac99e2">ST</a>) == <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.MinOccupancy;</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160; </div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <span class="comment">// Early out if we have achieve the occupancy target.</span></div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Pressure in desired limits, done.\n&quot;</span>);</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  }</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160; </div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  <span class="keywordtype">unsigned</span> TargetOccupancy =</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;      <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(<a class="code" href="classllvm_1_1GCNSchedStage.html#a2f14a5fe09608fc5cce9e68e4f516a68">S</a>.<a class="code" href="classllvm_1_1GCNSchedStrategy.html#ad37490b68720625392a017b47f21b349">getTargetOccupancy</a>(), <a class="code" href="classllvm_1_1GCNSchedStage.html#afce50f36ba47b66bbea271c232ac99e2">ST</a>.<a class="code" href="classllvm_1_1AMDGPUSubtarget.html#a070c057941562774c1ffa4f85b1095ed">getOccupancyWithLocalMemSize</a>(<a class="code" href="classllvm_1_1GCNSchedStage.html#a979d350534fac63dad98d8f2937bf5a7">MF</a>));</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;  <span class="keywordtype">unsigned</span> WavesAfter =</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;      <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(TargetOccupancy, <a class="code" href="classllvm_1_1GCNSchedStage.html#a935e3a2cbb8d260bc1cc4dcf701db0ec">PressureAfter</a>.<a class="code" href="structllvm_1_1GCNRegPressure.html#a478ab8c9c868e81201d1d7467e096863">getOccupancy</a>(<a class="code" href="classllvm_1_1GCNSchedStage.html#afce50f36ba47b66bbea271c232ac99e2">ST</a>));</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  <span class="keywordtype">unsigned</span> WavesBefore =</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;      <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(TargetOccupancy, <a class="code" href="classllvm_1_1GCNSchedStage.html#a30bb50e213057f1830b72558972019fa">PressureBefore</a>.<a class="code" href="structllvm_1_1GCNRegPressure.html#a478ab8c9c868e81201d1d7467e096863">getOccupancy</a>(<a class="code" href="classllvm_1_1GCNSchedStage.html#afce50f36ba47b66bbea271c232ac99e2">ST</a>));</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Occupancy before scheduling: &quot;</span> &lt;&lt; WavesBefore</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;, after &quot;</span> &lt;&lt; WavesAfter &lt;&lt; <span class="stringliteral">&quot;.\n&quot;</span>);</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160; </div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;  <span class="comment">// We may not be able to keep the current target occupancy because of the just</span></div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;  <span class="comment">// scheduled region. We might still be able to revert scheduling if the</span></div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;  <span class="comment">// occupancy before was higher, or if the current schedule has register</span></div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;  <span class="comment">// pressure higher than the excess limits which could lead to more spilling.</span></div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;  <span class="keywordtype">unsigned</span> NewOccupancy = <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(WavesAfter, WavesBefore);</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160; </div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;  <span class="comment">// Allow memory bound functions to drop to 4 waves if not limited by an</span></div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;  <span class="comment">// attribute.</span></div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  <span class="keywordflow">if</span> (WavesAfter &lt; WavesBefore &amp;&amp; WavesAfter &lt; <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.MinOccupancy &amp;&amp;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;      WavesAfter &gt;= <a class="code" href="classllvm_1_1GCNSchedStage.html#aa22f1a1dc2d882a5c94b02777ed9a878">MFI</a>.<a class="code" href="classllvm_1_1SIMachineFunctionInfo.html#ab51348abdbbc76d0e8db5c01a5ee5280">getMinAllowedOccupancy</a>()) {</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Function is memory bound, allow occupancy drop up to &quot;</span></div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;                      &lt;&lt; <a class="code" href="classllvm_1_1GCNSchedStage.html#aa22f1a1dc2d882a5c94b02777ed9a878">MFI</a>.<a class="code" href="classllvm_1_1SIMachineFunctionInfo.html#ab51348abdbbc76d0e8db5c01a5ee5280">getMinAllowedOccupancy</a>() &lt;&lt; <span class="stringliteral">&quot; waves\n&quot;</span>);</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    NewOccupancy = WavesAfter;</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  }</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160; </div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  <span class="keywordflow">if</span> (NewOccupancy &lt; <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.MinOccupancy) {</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.MinOccupancy = NewOccupancy;</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    <a class="code" href="classllvm_1_1GCNSchedStage.html#aa22f1a1dc2d882a5c94b02777ed9a878">MFI</a>.<a class="code" href="classllvm_1_1SIMachineFunctionInfo.html#adb6a722f44ce97ecb6dda56ba8d1ac4c">limitOccupancy</a>(<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.MinOccupancy);</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.RegionsWithMinOcc.<a class="code" href="classllvm_1_1BitVector.html#a5109693c2cdda2a4118e7d588b51bfa6">reset</a>();</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Occupancy lowered for the function to &quot;</span></div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;                      &lt;&lt; <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.MinOccupancy &lt;&lt; <span class="stringliteral">&quot;.\n&quot;</span>);</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  }</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160; </div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;  <span class="keywordtype">unsigned</span> MaxVGPRs = <a class="code" href="classllvm_1_1GCNSchedStage.html#afce50f36ba47b66bbea271c232ac99e2">ST</a>.<a class="code" href="classllvm_1_1GCNSubtarget.html#a4f492fa16404497b8f15ea82c4b0a725">getMaxNumVGPRs</a>(<a class="code" href="classllvm_1_1GCNSchedStage.html#a979d350534fac63dad98d8f2937bf5a7">MF</a>);</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;  <span class="keywordtype">unsigned</span> MaxSGPRs = <a class="code" href="classllvm_1_1GCNSchedStage.html#afce50f36ba47b66bbea271c232ac99e2">ST</a>.<a class="code" href="classllvm_1_1GCNSubtarget.html#acf6141c742569e20d289c523560f8b00">getMaxNumSGPRs</a>(<a class="code" href="classllvm_1_1GCNSchedStage.html#a979d350534fac63dad98d8f2937bf5a7">MF</a>);</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GCNSchedStage.html#a935e3a2cbb8d260bc1cc4dcf701db0ec">PressureAfter</a>.<a class="code" href="structllvm_1_1GCNRegPressure.html#a6b5acc4933b30383d7b31729281dacc3">getVGPRNum</a>(<span class="keyword">false</span>) &gt; MaxVGPRs ||</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;      <a class="code" href="classllvm_1_1GCNSchedStage.html#a935e3a2cbb8d260bc1cc4dcf701db0ec">PressureAfter</a>.<a class="code" href="structllvm_1_1GCNRegPressure.html#ab822633324180bbee7b05a0d2518c563">getAGPRNum</a>() &gt; MaxVGPRs ||</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;      <a class="code" href="classllvm_1_1GCNSchedStage.html#a935e3a2cbb8d260bc1cc4dcf701db0ec">PressureAfter</a>.<a class="code" href="structllvm_1_1GCNRegPressure.html#abd577f5d55cd0fde5973c8c5a1cdb816">getSGPRNum</a>() &gt; MaxSGPRs) {</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.RescheduleRegions[<a class="code" href="classllvm_1_1GCNSchedStage.html#aa7ee003eb6297edeab5ac83fb99711a0">RegionIdx</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.RegionsWithHighRP[<a class="code" href="classllvm_1_1GCNSchedStage.html#aa7ee003eb6297edeab5ac83fb99711a0">RegionIdx</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.RegionsWithExcessRP[<a class="code" href="classllvm_1_1GCNSchedStage.html#aa7ee003eb6297edeab5ac83fb99711a0">RegionIdx</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;  }</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160; </div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;  <span class="comment">// Revert if this region&#39;s schedule would cause a drop in occupancy or</span></div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  <span class="comment">// spilling.</span></div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GCNSchedStage.html#ac390d9a2fce4a940cbf643a47f699cd7">shouldRevertScheduling</a>(WavesAfter)) {</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    <a class="code" href="classllvm_1_1GCNSchedStage.html#a3d32369a2a741e4657a7f65cfc32dcdf">revertScheduling</a>();</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.Pressure[<a class="code" href="classllvm_1_1GCNSchedStage.html#aa7ee003eb6297edeab5ac83fb99711a0">RegionIdx</a>] = <a class="code" href="classllvm_1_1GCNSchedStage.html#a935e3a2cbb8d260bc1cc4dcf701db0ec">PressureAfter</a>;</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.RegionsWithMinOcc[<a class="code" href="classllvm_1_1GCNSchedStage.html#aa7ee003eb6297edeab5ac83fb99711a0">RegionIdx</a>] =</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;        <a class="code" href="classllvm_1_1GCNSchedStage.html#a935e3a2cbb8d260bc1cc4dcf701db0ec">PressureAfter</a>.<a class="code" href="structllvm_1_1GCNRegPressure.html#a478ab8c9c868e81201d1d7467e096863">getOccupancy</a>(<a class="code" href="classllvm_1_1GCNSchedStage.html#afce50f36ba47b66bbea271c232ac99e2">ST</a>) == <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.MinOccupancy;</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;  }</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;}</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160; </div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="keywordtype">unsigned</span></div>
<div class="line"><a name="l00960"></a><span class="lineno"><a class="line" href="classllvm_1_1GCNSchedStage.html#aaea2f970a2bbb337f3098d43c1fdfb8c">  960</a></span>&#160;<a class="code" href="classllvm_1_1GCNSchedStage.html#aaea2f970a2bbb337f3098d43c1fdfb8c">GCNSchedStage::computeSUnitReadyCycle</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> &amp;SU, <span class="keywordtype">unsigned</span> CurrCycle,</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;                                      <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;unsigned, unsigned&gt;</a> &amp;ReadyCycles,</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;                                      <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetSchedModel.html">TargetSchedModel</a> &amp;SM) {</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;  <span class="keywordtype">unsigned</span> ReadyCycle = CurrCycle;</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a> : SU.<a class="code" href="classllvm_1_1SUnit.html#ae2b43854b542de66eec6475adc48f56c">Preds</a>) {</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>.isAssignedRegDep()) {</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;      <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a> = <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>.getSUnit()-&gt;getInstr();</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm.html#a1eb5609345b906d024fbf9e4bc1adc06a2d68d32ff95cd10b4899c2823ec28e97">Latency</a> = SM.computeInstrLatency(<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a>);</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;      <span class="keywordtype">unsigned</span> DefReady = ReadyCycles[<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#ab75cd37a7a0319d5a4c77189cca106ec">getSUnit</a>(<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a>)-&gt;<a class="code" href="classllvm_1_1SUnit.html#a3f708b119627541f144d703a1d183202">NodeNum</a>];</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;      ReadyCycle = <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(ReadyCycle, DefReady + <a class="code" href="namespacellvm.html#a1eb5609345b906d024fbf9e4bc1adc06a2d68d32ff95cd10b4899c2823ec28e97">Latency</a>);</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    }</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;  }</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;  ReadyCycles[SU.<a class="code" href="classllvm_1_1SUnit.html#a3f708b119627541f144d703a1d183202">NodeNum</a>] = ReadyCycle;</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  <span class="keywordflow">return</span> ReadyCycle;</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;}</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160; </div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00977"></a><span class="lineno"><a class="line" href="structEarlierIssuingCycle.html">  977</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structEarlierIssuingCycle.html">EarlierIssuingCycle</a> {</div>
<div class="line"><a name="l00978"></a><span class="lineno"><a class="line" href="structEarlierIssuingCycle.html#af8999f5b0afdef371312c753bc47815d">  978</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structEarlierIssuingCycle.html#af8999f5b0afdef371312c753bc47815d">operator()</a>(std::pair&lt;MachineInstr *, unsigned&gt; A,</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;                  std::pair&lt;MachineInstr *, unsigned&gt; <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <span class="keywordflow">return</span> A.second &lt; <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.second;</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;  }</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;};</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160; </div>
<div class="line"><a name="l00984"></a><span class="lineno"><a class="line" href="GCNSchedStrategy_8cpp.html#a76923341fddafb3d1ed56aef0569ee68">  984</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="GCNSchedStrategy_8cpp.html#a76923341fddafb3d1ed56aef0569ee68">printScheduleModel</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#a9a315d042512705500b545a6c6acb2bd">std::set</a>&lt;std::pair&lt;MachineInstr *, unsigned&gt;,</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;                                        <a class="code" href="structEarlierIssuingCycle.html">EarlierIssuingCycle</a>&gt; &amp;ReadyCycles) {</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;  <span class="keywordflow">if</span> (ReadyCycles.empty())</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;  <span class="keywordtype">unsigned</span> BBNum = ReadyCycles.begin()-&gt;first-&gt;getParent()-&gt;getNumber();</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;  <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n################## Schedule time ReadyCycles for MBB : &quot;</span> &lt;&lt; BBNum</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;         &lt;&lt; <span class="stringliteral">&quot; ##################\n# Cycle #\t\t\tInstruction          &quot;</span></div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;            <span class="stringliteral">&quot;             &quot;</span></div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;            <span class="stringliteral">&quot;                            \n&quot;</span>;</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;  <span class="keywordtype">unsigned</span> IPrev = 1;</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : ReadyCycles) {</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.second &gt; IPrev + 1)</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;****************************** BUBBLE OF &quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.second - IPrev</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;             &lt;&lt; <span class="stringliteral">&quot; CYCLES DETECTED ******************************\n\n&quot;</span>;</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;[ &quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.second &lt;&lt; <span class="stringliteral">&quot; ]  :  &quot;</span> &lt;&lt; *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.first &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    IPrev = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.second;</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;  }</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;}</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160; </div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;<a class="code" href="classllvm_1_1ScheduleMetrics.html">ScheduleMetrics</a></div>
<div class="line"><a name="l01005"></a><span class="lineno"><a class="line" href="classllvm_1_1GCNSchedStage.html#a741c05e011507c0982568e68fa599a8c"> 1005</a></span>&#160;<a class="code" href="classllvm_1_1GCNSchedStage.html#a741c05e011507c0982568e68fa599a8c">GCNSchedStage::getScheduleMetrics</a>(<span class="keyword">const</span> std::vector&lt;SUnit&gt; &amp;InputSchedule) {</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;  std::set&lt;std::pair&lt;MachineInstr *, unsigned&gt;, <a class="code" href="structEarlierIssuingCycle.html">EarlierIssuingCycle</a>&gt;</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;      ReadyCyclesSorted;</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetSchedModel.html">TargetSchedModel</a> &amp;SM = <a class="code" href="classllvm_1_1GCNSchedStage.html#afce50f36ba47b66bbea271c232ac99e2">ST</a>.<a class="code" href="classllvm_1_1GCNSubtarget.html#a4bbc0f0059b8fc54fdd919e558f0b911">getInstrInfo</a>()-&gt;<a class="code" href="classllvm_1_1SIInstrInfo.html#a73c5c62286bf6da4e995283f012602fc">getSchedModel</a>();</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;  <span class="keywordtype">unsigned</span> SumBubbles = 0;</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;unsigned, unsigned&gt;</a> ReadyCycles;</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;  <span class="keywordtype">unsigned</span> CurrCycle = 0;</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;SU : InputSchedule) {</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    <span class="keywordtype">unsigned</span> ReadyCycle =</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        <a class="code" href="classllvm_1_1GCNSchedStage.html#aaea2f970a2bbb337f3098d43c1fdfb8c">computeSUnitReadyCycle</a>(SU, CurrCycle, ReadyCycles, SM);</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    SumBubbles += ReadyCycle - CurrCycle;</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    ReadyCyclesSorted.insert(std::make_pair(SU.getInstr(), ReadyCycle));</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    CurrCycle = ++ReadyCycle;</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;  }</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;      <a class="code" href="GCNSchedStrategy_8cpp.html#a76923341fddafb3d1ed56aef0569ee68">printScheduleModel</a>(ReadyCyclesSorted);</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;Metric: &quot;</span></div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;             &lt;&lt; (SumBubbles</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;                     ? (SumBubbles * <a class="code" href="classllvm_1_1ScheduleMetrics.html#ad737e526fab5f750adfdbdd427a014fb">ScheduleMetrics::ScaleFactor</a>) / CurrCycle</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;                     : 1)</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;\n\n&quot;</span>);</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160; </div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ScheduleMetrics.html">ScheduleMetrics</a>(CurrCycle, SumBubbles);</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;}</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160; </div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;<a class="code" href="classllvm_1_1ScheduleMetrics.html">ScheduleMetrics</a></div>
<div class="line"><a name="l01038"></a><span class="lineno"><a class="line" href="classllvm_1_1GCNSchedStage.html#a35ad2560fecc16262b15e21c9375cf3d"> 1038</a></span>&#160;<a class="code" href="classllvm_1_1GCNSchedStage.html#a741c05e011507c0982568e68fa599a8c">GCNSchedStage::getScheduleMetrics</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1GCNScheduleDAGMILive.html">GCNScheduleDAGMILive</a> &amp;DAG) {</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;  std::set&lt;std::pair&lt;MachineInstr *, unsigned&gt;, <a class="code" href="structEarlierIssuingCycle.html">EarlierIssuingCycle</a>&gt;</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;      ReadyCyclesSorted;</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetSchedModel.html">TargetSchedModel</a> &amp;SM = <a class="code" href="classllvm_1_1GCNSchedStage.html#afce50f36ba47b66bbea271c232ac99e2">ST</a>.<a class="code" href="classllvm_1_1GCNSubtarget.html#a4bbc0f0059b8fc54fdd919e558f0b911">getInstrInfo</a>()-&gt;<a class="code" href="classllvm_1_1SIInstrInfo.html#a73c5c62286bf6da4e995283f012602fc">getSchedModel</a>();</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;  <span class="keywordtype">unsigned</span> SumBubbles = 0;</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;unsigned, unsigned&gt;</a> ReadyCycles;</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;  <span class="keywordtype">unsigned</span> CurrCycle = 0;</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>) {</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <a class="code" href="classllvm_1_1SUnit.html">SUnit</a> *SU = <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#ab75cd37a7a0319d5a4c77189cca106ec">getSUnit</a>(&amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    <span class="keywordflow">if</span> (!SU)</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    <span class="keywordtype">unsigned</span> ReadyCycle =</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;        <a class="code" href="classllvm_1_1GCNSchedStage.html#aaea2f970a2bbb337f3098d43c1fdfb8c">computeSUnitReadyCycle</a>(*SU, CurrCycle, ReadyCycles, SM);</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    SumBubbles += ReadyCycle - CurrCycle;</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    ReadyCyclesSorted.insert(std::make_pair(SU-&gt;<a class="code" href="classllvm_1_1SUnit.html#a0727ce4ffb9b167e7ad283259d82b10c">getInstr</a>(), ReadyCycle));</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    CurrCycle = ++ReadyCycle;</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;  }</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;      <a class="code" href="GCNSchedStrategy_8cpp.html#a76923341fddafb3d1ed56aef0569ee68">printScheduleModel</a>(ReadyCyclesSorted);</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n\t&quot;</span></div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;Metric: &quot;</span></div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;             &lt;&lt; (SumBubbles</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;                     ? (SumBubbles * <a class="code" href="classllvm_1_1ScheduleMetrics.html#ad737e526fab5f750adfdbdd427a014fb">ScheduleMetrics::ScaleFactor</a>) / CurrCycle</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;                     : 1)</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;\n\n&quot;</span>);</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160; </div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ScheduleMetrics.html">ScheduleMetrics</a>(CurrCycle, SumBubbles);</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;}</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160; </div>
<div class="line"><a name="l01073"></a><span class="lineno"><a class="line" href="classllvm_1_1GCNSchedStage.html#ac390d9a2fce4a940cbf643a47f699cd7"> 1073</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1GCNSchedStage.html#ac390d9a2fce4a940cbf643a47f699cd7">GCNSchedStage::shouldRevertScheduling</a>(<span class="keywordtype">unsigned</span> WavesAfter) {</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;  <span class="keywordflow">if</span> (WavesAfter &lt; <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.MinOccupancy)</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160; </div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;}</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160; </div>
<div class="line"><a name="l01080"></a><span class="lineno"><a class="line" href="classllvm_1_1OccInitialScheduleStage.html#a6059a5bf340a6ed8e1c76e25bebf5485"> 1080</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1OccInitialScheduleStage.html#a6059a5bf340a6ed8e1c76e25bebf5485">OccInitialScheduleStage::shouldRevertScheduling</a>(<span class="keywordtype">unsigned</span> WavesAfter) {</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GCNSchedStage.html#a935e3a2cbb8d260bc1cc4dcf701db0ec">PressureAfter</a> == <a class="code" href="classllvm_1_1GCNSchedStage.html#a30bb50e213057f1830b72558972019fa">PressureBefore</a>)</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160; </div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GCNSchedStage.html#ac390d9a2fce4a940cbf643a47f699cd7">GCNSchedStage::shouldRevertScheduling</a>(WavesAfter))</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160; </div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GCNSchedStage.html#a662bfd2df36d8694de75d5bfc3efcf5a">mayCauseSpilling</a>(WavesAfter))</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160; </div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;}</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160; </div>
<div class="line"><a name="l01093"></a><span class="lineno"><a class="line" href="classllvm_1_1UnclusteredHighRPStage.html#a6a4f926bc4da7d151b71ea78aa07f2e6"> 1093</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1UnclusteredHighRPStage.html#a6a4f926bc4da7d151b71ea78aa07f2e6">UnclusteredHighRPStage::shouldRevertScheduling</a>(<span class="keywordtype">unsigned</span> WavesAfter) {</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;  <span class="comment">// If RP is not reduced in the unclustred reschedule stage, revert to the</span></div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;  <span class="comment">// old schedule.</span></div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;  <span class="keywordflow">if</span> ((WavesAfter &lt;= <a class="code" href="classllvm_1_1GCNSchedStage.html#a30bb50e213057f1830b72558972019fa">PressureBefore</a>.<a class="code" href="structllvm_1_1GCNRegPressure.html#a478ab8c9c868e81201d1d7467e096863">getOccupancy</a>(<a class="code" href="classllvm_1_1GCNSchedStage.html#afce50f36ba47b66bbea271c232ac99e2">ST</a>) &amp;&amp;</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;       <a class="code" href="classllvm_1_1GCNSchedStage.html#a662bfd2df36d8694de75d5bfc3efcf5a">mayCauseSpilling</a>(WavesAfter)) ||</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;      <a class="code" href="classllvm_1_1GCNSchedStage.html#ac390d9a2fce4a940cbf643a47f699cd7">GCNSchedStage::shouldRevertScheduling</a>(WavesAfter)) {</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Unclustered reschedule did not help.\n&quot;</span>);</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;  }</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160; </div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;  <span class="comment">// Do not attempt to relax schedule even more if we are already spilling.</span></div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GCNSchedStage.html#a5344e12321c46ea1f7e78aaaed43f984">isRegionWithExcessRP</a>())</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160; </div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;\n\t      *** In shouldRevertScheduling ***\n&quot;</span></div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;      *********** BEFORE UnclusteredHighRPStage ***********\n&quot;</span>);</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  <a class="code" href="classllvm_1_1ScheduleMetrics.html">ScheduleMetrics</a> MBefore =</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;      <a class="code" href="classllvm_1_1GCNSchedStage.html#a741c05e011507c0982568e68fa599a8c">getScheduleMetrics</a>(<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAG.html#a3d5aacd5fc7d6a739ce913974ed1e53d">SUnits</a>);</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;\n      *********** AFTER UnclusteredHighRPStage ***********\n&quot;</span>);</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;  <a class="code" href="classllvm_1_1ScheduleMetrics.html">ScheduleMetrics</a> MAfter = <a class="code" href="classllvm_1_1GCNSchedStage.html#a741c05e011507c0982568e68fa599a8c">getScheduleMetrics</a>(<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>);</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;  <span class="keywordtype">unsigned</span> OldMetric = MBefore.<a class="code" href="classllvm_1_1ScheduleMetrics.html#ae07936418f440db324ca02542a0fa200">getMetric</a>();</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;  <span class="keywordtype">unsigned</span> NewMetric = MAfter.<a class="code" href="classllvm_1_1ScheduleMetrics.html#ae07936418f440db324ca02542a0fa200">getMetric</a>();</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;  <span class="keywordtype">unsigned</span> WavesBefore =</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;      <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(<a class="code" href="classllvm_1_1GCNSchedStage.html#a2f14a5fe09608fc5cce9e68e4f516a68">S</a>.<a class="code" href="classllvm_1_1GCNSchedStrategy.html#ad37490b68720625392a017b47f21b349">getTargetOccupancy</a>(), <a class="code" href="classllvm_1_1GCNSchedStage.html#a30bb50e213057f1830b72558972019fa">PressureBefore</a>.<a class="code" href="structllvm_1_1GCNRegPressure.html#a478ab8c9c868e81201d1d7467e096863">getOccupancy</a>(<a class="code" href="classllvm_1_1GCNSchedStage.html#afce50f36ba47b66bbea271c232ac99e2">ST</a>));</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  <span class="keywordtype">unsigned</span> Profit =</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;      ((WavesAfter * <a class="code" href="classllvm_1_1ScheduleMetrics.html#ad737e526fab5f750adfdbdd427a014fb">ScheduleMetrics::ScaleFactor</a>) / WavesBefore *</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;       ((OldMetric + <a class="code" href="GCNSchedStrategy_8cpp.html#ab19b78e94c87be3c2e2b19bf037f451b">ScheduleMetricBias</a>) * <a class="code" href="classllvm_1_1ScheduleMetrics.html#ad737e526fab5f750adfdbdd427a014fb">ScheduleMetrics::ScaleFactor</a>) /</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;       NewMetric) /</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;      <a class="code" href="classllvm_1_1ScheduleMetrics.html#ad737e526fab5f750adfdbdd427a014fb">ScheduleMetrics::ScaleFactor</a>;</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\tMetric before &quot;</span> &lt;&lt; MBefore &lt;&lt; <span class="stringliteral">&quot;\tMetric after &quot;</span></div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;                    &lt;&lt; MAfter &lt;&lt; <span class="stringliteral">&quot;Profit: &quot;</span> &lt;&lt; Profit &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;  <span class="keywordflow">return</span> Profit &lt; <a class="code" href="classllvm_1_1ScheduleMetrics.html#ad737e526fab5f750adfdbdd427a014fb">ScheduleMetrics::ScaleFactor</a>;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;}</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160; </div>
<div class="line"><a name="l01131"></a><span class="lineno"><a class="line" href="classllvm_1_1ClusteredLowOccStage.html#a127448c080b34adaa6a570697e88ea41"> 1131</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1ClusteredLowOccStage.html#a127448c080b34adaa6a570697e88ea41">ClusteredLowOccStage::shouldRevertScheduling</a>(<span class="keywordtype">unsigned</span> WavesAfter) {</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GCNSchedStage.html#a935e3a2cbb8d260bc1cc4dcf701db0ec">PressureAfter</a> == <a class="code" href="classllvm_1_1GCNSchedStage.html#a30bb50e213057f1830b72558972019fa">PressureBefore</a>)</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160; </div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GCNSchedStage.html#ac390d9a2fce4a940cbf643a47f699cd7">GCNSchedStage::shouldRevertScheduling</a>(WavesAfter))</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160; </div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GCNSchedStage.html#a662bfd2df36d8694de75d5bfc3efcf5a">mayCauseSpilling</a>(WavesAfter))</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160; </div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;}</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160; </div>
<div class="line"><a name="l01144"></a><span class="lineno"><a class="line" href="classllvm_1_1PreRARematStage.html#a639de91c60044b41677c7f4b01c38a4c"> 1144</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1PreRARematStage.html#a639de91c60044b41677c7f4b01c38a4c">PreRARematStage::shouldRevertScheduling</a>(<span class="keywordtype">unsigned</span> WavesAfter) {</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GCNSchedStage.html#ac390d9a2fce4a940cbf643a47f699cd7">GCNSchedStage::shouldRevertScheduling</a>(WavesAfter))</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160; </div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GCNSchedStage.html#a662bfd2df36d8694de75d5bfc3efcf5a">mayCauseSpilling</a>(WavesAfter))</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160; </div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;}</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160; </div>
<div class="line"><a name="l01154"></a><span class="lineno"><a class="line" href="classllvm_1_1ILPInitialScheduleStage.html#a0ba423ecf423204880b387df3fc52c91"> 1154</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1ILPInitialScheduleStage.html#a0ba423ecf423204880b387df3fc52c91">ILPInitialScheduleStage::shouldRevertScheduling</a>(<span class="keywordtype">unsigned</span> WavesAfter) {</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GCNSchedStage.html#a662bfd2df36d8694de75d5bfc3efcf5a">mayCauseSpilling</a>(WavesAfter))</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160; </div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;}</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160; </div>
<div class="line"><a name="l01161"></a><span class="lineno"><a class="line" href="classllvm_1_1GCNSchedStage.html#a662bfd2df36d8694de75d5bfc3efcf5a"> 1161</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1GCNSchedStage.html#a662bfd2df36d8694de75d5bfc3efcf5a">GCNSchedStage::mayCauseSpilling</a>(<span class="keywordtype">unsigned</span> WavesAfter) {</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;  <span class="keywordflow">if</span> (WavesAfter &lt;= <a class="code" href="classllvm_1_1GCNSchedStage.html#aa22f1a1dc2d882a5c94b02777ed9a878">MFI</a>.<a class="code" href="classllvm_1_1SIMachineFunctionInfo.html#a87942cc9ab72e2069e1921e49ec90eb3">getMinWavesPerEU</a>() &amp;&amp;</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;      !<a class="code" href="classllvm_1_1GCNSchedStage.html#a935e3a2cbb8d260bc1cc4dcf701db0ec">PressureAfter</a>.<a class="code" href="structllvm_1_1GCNRegPressure.html#abdd682d4cc4a832b22edda3b7974a766">less</a>(<a class="code" href="classllvm_1_1GCNSchedStage.html#afce50f36ba47b66bbea271c232ac99e2">ST</a>, <a class="code" href="classllvm_1_1GCNSchedStage.html#a30bb50e213057f1830b72558972019fa">PressureBefore</a>) &amp;&amp;</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;      <a class="code" href="classllvm_1_1GCNSchedStage.html#a5344e12321c46ea1f7e78aaaed43f984">isRegionWithExcessRP</a>()) {</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;New pressure will result in more spilling.\n&quot;</span>);</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;  }</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160; </div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;}</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160; </div>
<div class="line"><a name="l01172"></a><span class="lineno"><a class="line" href="classllvm_1_1GCNSchedStage.html#a3d32369a2a741e4657a7f65cfc32dcdf"> 1172</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1GCNSchedStage.html#a3d32369a2a741e4657a7f65cfc32dcdf">GCNSchedStage::revertScheduling</a>() {</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.RegionsWithMinOcc[<a class="code" href="classllvm_1_1GCNSchedStage.html#aa7ee003eb6297edeab5ac83fb99711a0">RegionIdx</a>] =</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;      <a class="code" href="classllvm_1_1GCNSchedStage.html#a30bb50e213057f1830b72558972019fa">PressureBefore</a>.<a class="code" href="structllvm_1_1GCNRegPressure.html#a478ab8c9c868e81201d1d7467e096863">getOccupancy</a>(<a class="code" href="classllvm_1_1GCNSchedStage.html#afce50f36ba47b66bbea271c232ac99e2">ST</a>) == <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.MinOccupancy;</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Attempting to revert scheduling.\n&quot;</span>);</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.RescheduleRegions[<a class="code" href="classllvm_1_1GCNSchedStage.html#aa7ee003eb6297edeab5ac83fb99711a0">RegionIdx</a>] =</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;      <a class="code" href="classllvm_1_1GCNSchedStage.html#a2f14a5fe09608fc5cce9e68e4f516a68">S</a>.<a class="code" href="classllvm_1_1GCNSchedStrategy.html#a405838f7f99c2b64659702103f8bf43f">hasNextStage</a>() &amp;&amp;</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;      <a class="code" href="classllvm_1_1GCNSchedStage.html#a2f14a5fe09608fc5cce9e68e4f516a68">S</a>.<a class="code" href="classllvm_1_1GCNSchedStrategy.html#aff69df5b1b61c9a71b8b75855e303e35">getNextStage</a>() != <a class="code" href="namespacellvm.html#a66b412ba6b33cdefeb59dde7139dc8b0a3199673fa17ebc25c0c9925028d225e0">GCNSchedStageID::UnclusteredHighRPReschedule</a>;</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#a3f74b283acf0dfb537bc387e49344f04">RegionEnd</a> = <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#ae81ad8ece7681af658742f6d4e2fcfb1">RegionBegin</a>;</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;  <span class="keywordtype">int</span> SkippedDebugInstr = 0;</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : <a class="code" href="classllvm_1_1GCNSchedStage.html#a875f89663ff968a4a76625dd0dd804eb">Unsched</a>) {</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;isDebugInstr()) {</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;      ++SkippedDebugInstr;</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    }</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160; </div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getIterator() != <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#a3f74b283acf0dfb537bc387e49344f04">RegionEnd</a>) {</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;      <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#a254403f7804208ade3cb68086201cb7a">BB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a00c9d82d8d59adedd1734fed16051c73">remove</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;      <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#a254403f7804208ade3cb68086201cb7a">BB</a>-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3435a2381e60e842e915f85c931b7dde">insert</a>(<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#a3f74b283acf0dfb537bc387e49344f04">RegionEnd</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;isDebugInstr())</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;        <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a9d67b1cafa36e90d7060d1da84907885">LIS</a>-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a29d12c5a65b3940bfac7b5aa1121ac70">handleMove</a>(*<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    }</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160; </div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    <span class="comment">// Reset read-undef flags and update them later.</span></div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> : <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;operands())</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>.isReg() &amp;&amp; <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>.isDef())</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;        <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>.setIsUndef(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    <a class="code" href="classllvm_1_1RegisterOperands.html">RegisterOperands</a> RegOpers;</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    RegOpers.<a class="code" href="classllvm_1_1RegisterOperands.html#a74e0a918c9705f23a1e5b66f68cc97e9">collect</a>(*<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, *<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAG.html#a418bc6d3f660325fa6d5b9fb269add62">TRI</a>, <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAG.html#a1b09f4d9c91e25f7bc2ac60b3b929d11">MRI</a>, <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGMILive.html#a3dfceb23c208cc886dcd2a82dab9d5c2">ShouldTrackLaneMasks</a>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;isDebugInstr()) {</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGMILive.html#a3dfceb23c208cc886dcd2a82dab9d5c2">ShouldTrackLaneMasks</a>) {</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;        <span class="comment">// Adjust liveness and add missing dead+read-undef flags.</span></div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;        <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> SlotIdx = <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a9d67b1cafa36e90d7060d1da84907885">LIS</a>-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a6f3043b29023d270fc4bc5062dff7cee">getInstructionIndex</a>(*MI).<a class="code" href="classllvm_1_1SlotIndex.html#ae3b98982e2036f3d26806de5ed5e02d0">getRegSlot</a>();</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;        RegOpers.<a class="code" href="classllvm_1_1RegisterOperands.html#a8affa4b2a934ff08aa04e63253a00126">adjustLaneLiveness</a>(*<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a9d67b1cafa36e90d7060d1da84907885">LIS</a>, <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAG.html#a1b09f4d9c91e25f7bc2ac60b3b929d11">MRI</a>, SlotIdx, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;        <span class="comment">// Adjust for missing dead-def flags.</span></div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;        RegOpers.<a class="code" href="classllvm_1_1RegisterOperands.html#acee6dacd4d30da478f3ad67f7fc27142">detectDeadDefs</a>(*<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, *<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a9d67b1cafa36e90d7060d1da84907885">LIS</a>);</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;      }</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    }</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#a3f74b283acf0dfb537bc387e49344f04">RegionEnd</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getIterator();</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    ++<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#a3f74b283acf0dfb537bc387e49344f04">RegionEnd</a>;</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Scheduling &quot;</span> &lt;&lt; *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;  }</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160; </div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;  <span class="comment">// After reverting schedule, debug instrs will now be at the end of the block</span></div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;  <span class="comment">// and RegionEnd will point to the first debug instr. Increment RegionEnd</span></div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;  <span class="comment">// pass debug instrs to the actual end of the scheduling region.</span></div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;  <span class="keywordflow">while</span> (SkippedDebugInstr-- &gt; 0)</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    ++<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#a3f74b283acf0dfb537bc387e49344f04">RegionEnd</a>;</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160; </div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;  <span class="comment">// If Unsched.front() instruction is a debug instruction, this will actually</span></div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;  <span class="comment">// shrink the region since we moved all debug instructions to the end of the</span></div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;  <span class="comment">// block. Find the first instruction that is not a debug instruction.</span></div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#ae81ad8ece7681af658742f6d4e2fcfb1">RegionBegin</a> = <a class="code" href="classllvm_1_1GCNSchedStage.html#a875f89663ff968a4a76625dd0dd804eb">Unsched</a>.front()-&gt;getIterator();</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#ae81ad8ece7681af658742f6d4e2fcfb1">RegionBegin</a>-&gt;isDebugInstr()) {</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : <a class="code" href="classllvm_1_1GCNSchedStage.html#a875f89663ff968a4a76625dd0dd804eb">Unsched</a>) {</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;isDebugInstr())</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;      <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#ae81ad8ece7681af658742f6d4e2fcfb1">RegionBegin</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getIterator();</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    }</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;  }</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160; </div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;  <span class="comment">// Then move the debug instructions back into their correct place and set</span></div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;  <span class="comment">// RegionBegin and RegionEnd if needed.</span></div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGMI.html#ac2dafe98c88d43b256622413886e2152">placeDebugValues</a>();</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160; </div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.Regions[<a class="code" href="classllvm_1_1GCNSchedStage.html#aa7ee003eb6297edeab5ac83fb99711a0">RegionIdx</a>] = std::pair(<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#ae81ad8ece7681af658742f6d4e2fcfb1">RegionBegin</a>, <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#a3f74b283acf0dfb537bc387e49344f04">RegionEnd</a>);</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;}</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160; </div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;<span class="keywordtype">void</span> PreRARematStage::collectRematerializableInstructions() {</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SIRegisterInfo.html">SIRegisterInfo</a> *SRI = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classllvm_1_1SIRegisterInfo.html">SIRegisterInfo</a> *<span class="keyword">&gt;</span>(<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAG.html#a418bc6d3f660325fa6d5b9fb269add62">TRI</a>);</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAG.html#a1b09f4d9c91e25f7bc2ac60b3b929d11">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#ae73582bbbc71758dcac70cd8c56210e4">getNumVirtRegs</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = <a class="code" href="classllvm_1_1Register.html#a1979c563289f871907832e419889f979">Register::index2VirtReg</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a9d67b1cafa36e90d7060d1da84907885">LIS</a>-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a11cd70de340f310acc70781d57a00136">hasInterval</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>))</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160; </div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    <span class="comment">// TODO: Handle AGPR and SGPR rematerialization</span></div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;    <span class="keywordflow">if</span> (!SRI-&gt;<a class="code" href="classllvm_1_1SIRegisterInfo.html#a929252209ec1fab87cd43439ed3365c7">isVGPRClass</a>(<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAG.html#a1b09f4d9c91e25f7bc2ac60b3b929d11">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#aa363afffca4fc13a709673936b47fe33">getRegClass</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>)) ||</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;        !<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAG.html#a1b09f4d9c91e25f7bc2ac60b3b929d11">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a92d46fa856af865f8c997f97596990ec">hasOneDef</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>) || !<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAG.html#a1b09f4d9c91e25f7bc2ac60b3b929d11">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a01bf72631b0bc836a8c07fe840b13233">hasOneNonDBGUse</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>))</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160; </div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> = <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAG.html#a1b09f4d9c91e25f7bc2ac60b3b929d11">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#abc6a478b8e8957fb476c3e553aecacc6">getOneDef</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a> = <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>-&gt;getParent();</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>-&gt;getSubReg() != 0 || !isTriviallyReMaterializable(*<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>))</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160; </div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *UseI = &amp;*<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAG.html#a1b09f4d9c91e25f7bc2ac60b3b929d11">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a741b5105cca6e98538c79acf275ca733">use_instr_nodbg_begin</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>-&gt;getParent() == UseI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a002fd916e7206e01d512eeb06d405cf0">getParent</a>())</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160; </div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;    <span class="comment">// We are only collecting defs that are defined in another block and are</span></div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    <span class="comment">// live-through or used inside regions at MinOccupancy. This means that the</span></div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    <span class="comment">// register must be in the live-in set for the region.</span></div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    <span class="keywordtype">bool</span> AddedToRematList = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.Regions.size(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;      <span class="keyword">auto</span> It = <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.LiveIns[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>].find(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;      <span class="keywordflow">if</span> (It != <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.LiveIns[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>].end() &amp;&amp; !It-&gt;second.none()) {</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.RegionsWithMinOcc[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]) {</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;          RematerializableInsts[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>][<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>] = UseI;</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;          AddedToRematList = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;        }</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160; </div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;        <span class="comment">// Collect regions with rematerializable reg as live-in to avoid</span></div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;        <span class="comment">// searching later when updating RP.</span></div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;        RematDefToLiveInRegions[<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>].push_back(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;      }</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    }</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    <span class="keywordflow">if</span> (!AddedToRematList)</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;      RematDefToLiveInRegions.erase(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>);</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;  }</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;}</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160; </div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;<span class="keywordtype">bool</span> PreRARematStage::sinkTriviallyRematInsts(<span class="keyword">const</span> <a class="code" href="classllvm_1_1GCNSubtarget.html">GCNSubtarget</a> &amp;<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>,</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;                                              <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>) {</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;  <span class="comment">// Temporary copies of cached variables we will be modifying and replacing if</span></div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;  <span class="comment">// sinking succeeds.</span></div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector</a>&lt;</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;      std::pair&lt;MachineBasicBlock::iterator, MachineBasicBlock::iterator&gt;, 32&gt;</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;      NewRegions;</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;unsigned, GCNRPTracker::LiveRegSet&gt;</a> NewLiveIns;</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;unsigned, GCNRegPressure&gt;</a> NewPressure;</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;  <a class="code" href="classllvm_1_1BitVector.html">BitVector</a> NewRescheduleRegions;</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;  <a class="code" href="classllvm_1_1LiveIntervals.html">LiveIntervals</a> *LIS = <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAGMI.html#a9d67b1cafa36e90d7060d1da84907885">LIS</a>;</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160; </div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;  NewRegions.<a class="code" href="classllvm_1_1SmallVectorImpl.html#ad0b3d8447f88377b62d9c019f3c4e118">resize</a>(<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.Regions.size());</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;  NewRescheduleRegions.<a class="code" href="classllvm_1_1BitVector.html#a32859a24aa7a3be269855b989d92a4b4">resize</a>(<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.Regions.size());</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160; </div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;  <span class="comment">// Collect only regions that has a rematerializable def as a live-in.</span></div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;  <a class="code" href="classllvm_1_1SmallSet.html">SmallSet&lt;unsigned, 16&gt;</a> ImpactedRegions;</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;It : RematDefToLiveInRegions)</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    ImpactedRegions.<a class="code" href="classllvm_1_1SmallSet.html#a1679469af9bb8ccfbe98441fb8228c79">insert</a>(It.second.begin(), It.second.end());</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160; </div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;  <span class="comment">// Make copies of register pressure and live-ins cache that will be updated</span></div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;  <span class="comment">// as we rematerialize.</span></div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> Idx : ImpactedRegions) {</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    NewPressure[Idx] = <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.Pressure[Idx];</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;    NewLiveIns[Idx] = <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.LiveIns[Idx];</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;  }</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;  NewRegions = <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.Regions;</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;  NewRescheduleRegions.<a class="code" href="classllvm_1_1BitVector.html#a5109693c2cdda2a4118e7d588b51bfa6">reset</a>();</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160; </div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;MachineInstr *, MachineInstr *&gt;</a> InsertedMIToOldDef;</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;  <span class="keywordtype">bool</span> Improved = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : ImpactedRegions) {</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.RegionsWithMinOcc[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>])</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160; </div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;    Improved = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    <span class="keywordtype">int</span> VGPRUsage = NewPressure[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>].getVGPRNum(<a class="code" href="classllvm_1_1GCNSchedStage.html#afce50f36ba47b66bbea271c232ac99e2">ST</a>.<a class="code" href="classllvm_1_1GCNSubtarget.html#a1fc0ea9be83e3d4cb2aeb2d7b2363e73">hasGFX90AInsts</a>());</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;    <span class="keywordtype">int</span> SGPRUsage = NewPressure[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>].getSGPRNum();</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160; </div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;    <span class="comment">// TODO: Handle occupancy drop due to AGPR and SGPR.</span></div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    <span class="comment">// Check if cause of occupancy drop is due to VGPR usage and not SGPR.</span></div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GCNSchedStage.html#afce50f36ba47b66bbea271c232ac99e2">ST</a>.<a class="code" href="classllvm_1_1GCNSubtarget.html#ab20982dc4ff887572a43754228a94fc0">getOccupancyWithNumSGPRs</a>(SGPRUsage) == <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.MinOccupancy)</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160; </div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    <span class="comment">// The occupancy of this region could have been improved by a previous</span></div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    <span class="comment">// iteration&#39;s sinking of defs.</span></div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    <span class="keywordflow">if</span> (NewPressure[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>].getOccupancy(<a class="code" href="classllvm_1_1GCNSchedStage.html#afce50f36ba47b66bbea271c232ac99e2">ST</a>) &gt; <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.MinOccupancy) {</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;      NewRescheduleRegions[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;      Improved = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    }</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160; </div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;    <span class="comment">// First check if we have enough trivially rematerializable instructions to</span></div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;    <span class="comment">// improve occupancy. Optimistically assume all instructions we are able to</span></div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    <span class="comment">// sink decreased RP.</span></div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    <span class="keywordtype">int</span> TotalSinkableRegs = 0;</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;It : RematerializableInsts[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]) {</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;      <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a> = It.first;</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> DefReg = <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>-&gt;getOperand(0).getReg();</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;      TotalSinkableRegs +=</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;          <a class="code" href="classllvm_1_1SIRegisterInfo.html#a1dd11f1c73a15ab0fc73bacd1cdb64a6">SIRegisterInfo::getNumCoveredRegs</a>(NewLiveIns[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>][DefReg]);</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    }</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;    <span class="keywordtype">int</span> VGPRsAfterSink = VGPRUsage - TotalSinkableRegs;</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;    <span class="keywordtype">unsigned</span> OptimisticOccupancy = <a class="code" href="classllvm_1_1GCNSchedStage.html#afce50f36ba47b66bbea271c232ac99e2">ST</a>.<a class="code" href="classllvm_1_1GCNSubtarget.html#aa19ea7d1223b3dbc9f1c432059f8e040">getOccupancyWithNumVGPRs</a>(VGPRsAfterSink);</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    <span class="comment">// If in the most optimistic scenario, we cannot improve occupancy, then do</span></div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;    <span class="comment">// not attempt to sink any instructions.</span></div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;    <span class="keywordflow">if</span> (OptimisticOccupancy &lt;= <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.MinOccupancy)</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160; </div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;    <span class="keywordtype">unsigned</span> ImproveOccupancy = 0;</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineInstr *, 4&gt;</a> SinkedDefs;</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;It : RematerializableInsts[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]) {</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;      <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a> = It.first;</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;      <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> InsertPos =</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;          <a class="code" href="classllvm_1_1MachineBasicBlock.html#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a>(It.second);</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>-&gt;getOperand(0).getReg();</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;      <span class="comment">// Rematerialize MI to its use block. Since we are only rematerializing</span></div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;      <span class="comment">// instructions that do not have any virtual reg uses, we do not need to</span></div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;      <span class="comment">// call LiveRangeEdit::allUsesAvailableAt() and</span></div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;      <span class="comment">// LiveRangeEdit::canRematerializeAt().</span></div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;      <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;reMaterialize(*InsertPos-&gt;getParent(), InsertPos, <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>,</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;                         <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>-&gt;getOperand(0).getSubReg(), *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>, *<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAG.html#a418bc6d3f660325fa6d5b9fb269add62">TRI</a>);</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;      <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *NewMI = &amp;*std::prev(InsertPos);</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;      LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a2035620c14bf7bdedfa4e2655f88d114">InsertMachineInstrInMaps</a>(*NewMI);</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;      LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#aa07c0db20cf93bf2f558d00af34a6cb6">removeInterval</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;      LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#aff210756ea606fd0fd721c8ccaba10c8">createAndComputeVirtRegInterval</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;      InsertedMIToOldDef[NewMI] = <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>;</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160; </div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;      <span class="comment">// Update region boundaries in scheduling region we sinked from since we</span></div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;      <span class="comment">// may sink an instruction that was at the beginning or end of its region</span></div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;      <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.updateRegionBoundaries(NewRegions, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>, <span class="comment">/*NewMI =*/</span><span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;                                 <span class="comment">/*Removing =*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160; </div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;      <span class="comment">// Update region boundaries in region we sinked to.</span></div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;      <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.updateRegionBoundaries(NewRegions, InsertPos, NewMI);</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160; </div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;      <a class="code" href="structllvm_1_1LaneBitmask.html">LaneBitmask</a> PrevMask = NewLiveIns[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>][<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>];</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;      <span class="comment">// FIXME: Also update cached pressure for where the def was sinked from.</span></div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;      <span class="comment">// Update RP for all regions that has this reg as a live-in and remove</span></div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;      <span class="comment">// the reg from all regions as a live-in.</span></div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> Idx : RematDefToLiveInRegions[<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>]) {</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;        NewLiveIns[Idx].<a class="code" href="classllvm_1_1DenseMapBase.html#a1eb8504bab5f794778d82db6ac829923">erase</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;        <span class="keywordflow">if</span> (InsertPos-&gt;getParent() != <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.Regions[Idx].first-&gt;getParent()) {</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;          <span class="comment">// Def is live-through and not used in this block.</span></div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;          NewPressure[Idx].inc(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, PrevMask, <a class="code" href="structllvm_1_1LaneBitmask.html#a9082b6aa4021114645045d9c5628eb26">LaneBitmask::getNone</a>(), <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAG.html#a1b09f4d9c91e25f7bc2ac60b3b929d11">MRI</a>);</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;          <span class="comment">// Def is used and rematerialized into this block.</span></div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;          <a class="code" href="classllvm_1_1GCNDownwardRPTracker.html">GCNDownwardRPTracker</a> RPT(*LIS);</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;          <span class="keyword">auto</span> *NonDbgMI = &amp;*<a class="code" href="namespacellvm.html#a5bacbbd03e9261f7b30dc174f26d680c">skipDebugInstructionsForward</a>(</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;              NewRegions[Idx].first, NewRegions[Idx].second);</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;          RPT.reset(*NonDbgMI, &amp;NewLiveIns[Idx]);</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;          RPT.advance(NewRegions[Idx].second);</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;          NewPressure[Idx] = RPT.moveMaxPressure();</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;        }</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;      }</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160; </div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;      SinkedDefs.push_back(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>);</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;      ImproveOccupancy = NewPressure[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>].getOccupancy(<a class="code" href="classllvm_1_1GCNSchedStage.html#afce50f36ba47b66bbea271c232ac99e2">ST</a>);</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;      <span class="keywordflow">if</span> (ImproveOccupancy &gt; <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.MinOccupancy)</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    }</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160; </div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <span class="comment">// Remove defs we just sinked from all regions&#39; list of sinkable defs</span></div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a> : SinkedDefs)</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> TrackedIdx : RematDefToLiveInRegions[<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>])</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;        RematerializableInsts[TrackedIdx].erase(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>);</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160; </div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;    <span class="keywordflow">if</span> (ImproveOccupancy &lt;= <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.MinOccupancy)</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160; </div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;    NewRescheduleRegions[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    Improved = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;  }</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160; </div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;  <span class="keywordflow">if</span> (!Improved) {</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;    <span class="comment">// Occupancy was not improved for all regions that were at MinOccupancy.</span></div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;    <span class="comment">// Undo sinking and remove newly rematerialized instructions.</span></div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;Entry : InsertedMIToOldDef) {</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;      <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = Entry.first;</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;      <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *OldMI = Entry.second;</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(0).getReg();</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;      LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a73f605751be73f0a910a586bb1b5d869">RemoveMachineInstrFromMaps</a>(*<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;      OldMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ad4a32b52ea36d2c35a9860fe263d0574">clearRegisterDeads</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;      LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#aa07c0db20cf93bf2f558d00af34a6cb6">removeInterval</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;      LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#aff210756ea606fd0fd721c8ccaba10c8">createAndComputeVirtRegInterval</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;    }</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;  }</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160; </div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;  <span class="comment">// Occupancy was improved for all regions.</span></div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;Entry : InsertedMIToOldDef) {</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = Entry.first;</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *OldMI = Entry.second;</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160; </div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;    <span class="comment">// Remove OldMI from BBLiveInMap since we are sinking it from its MBB.</span></div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.BBLiveInMap.erase(OldMI);</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160; </div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;    <span class="comment">// Remove OldMI and update LIS</span></div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(0).getReg();</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;    LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#a73f605751be73f0a910a586bb1b5d869">RemoveMachineInstrFromMaps</a>(*OldMI);</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;    OldMI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#ac2421adbb9996e1b15f03a8abb6c70a8">eraseFromParent</a>();</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;    LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#aa07c0db20cf93bf2f558d00af34a6cb6">removeInterval</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;    LIS-&gt;<a class="code" href="classllvm_1_1LiveIntervals.html#aff210756ea606fd0fd721c8ccaba10c8">createAndComputeVirtRegInterval</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;  }</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160; </div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;  <span class="comment">// Update live-ins, register pressure, and regions caches.</span></div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> Idx : ImpactedRegions) {</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;    <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.LiveIns[Idx] = NewLiveIns[Idx];</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;    <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.Pressure[Idx] = NewPressure[Idx];</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.MBBLiveIns.erase(<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.Regions[Idx].first-&gt;getParent());</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;  }</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.Regions = NewRegions;</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.RescheduleRegions = NewRescheduleRegions;</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160; </div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;  <a class="code" href="classllvm_1_1SIMachineFunctionInfo.html">SIMachineFunctionInfo</a> &amp;<a class="code" href="classllvm_1_1GCNSchedStage.html#aa22f1a1dc2d882a5c94b02777ed9a878">MFI</a> = *<a class="code" href="classllvm_1_1GCNSchedStage.html#a979d350534fac63dad98d8f2937bf5a7">MF</a>.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1SIMachineFunctionInfo.html">SIMachineFunctionInfo</a>&gt;();</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;  <a class="code" href="classllvm_1_1GCNSchedStage.html#aa22f1a1dc2d882a5c94b02777ed9a878">MFI</a>.<a class="code" href="classllvm_1_1SIMachineFunctionInfo.html#a17e3b288cc69f7b6c8c0c4d1795dfc2a">increaseOccupancy</a>(<a class="code" href="classllvm_1_1GCNSchedStage.html#a979d350534fac63dad98d8f2937bf5a7">MF</a>, ++<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.MinOccupancy);</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160; </div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;}</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160; </div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;<span class="comment">// Copied from MachineLICM</span></div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;<span class="keywordtype">bool</span> PreRARematStage::isTriviallyReMaterializable(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">DAG</a>.<a class="code" href="classllvm_1_1ScheduleDAG.html#a348590624c488b04d0f9e227e6c3960e">TII</a>-&gt;<a class="code" href="classllvm_1_1TargetInstrInfo.html#a1d142d4718ca758481e0b49ad9d8ea97">isTriviallyReMaterializable</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>))</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160; </div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;MO : <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.operands())</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;    <span class="keywordflow">if</span> (MO.isReg() &amp;&amp; MO.isUse() &amp;&amp; MO.getReg().isVirtual())</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160; </div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;}</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160; </div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;<span class="comment">// When removing, we will have to check both beginning and ending of the region.</span></div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;<span class="comment">// When inserting, we will only have to check if we are inserting NewMI in front</span></div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;<span class="comment">// of a scheduling region and do not need to check the ending since we will only</span></div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;<span class="comment">// ever be inserting before an already existing MI.</span></div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;<span class="keywordtype">void</span> GCNScheduleDAGMILive::updateRegionBoundaries(</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt;std::pair&lt;<a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a>,</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;                              <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a>&gt;&gt; &amp;RegionBoundaries,</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;    <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *NewMI, <span class="keywordtype">bool</span> Removing) {</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = RegionBoundaries.size();</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;  <span class="comment">// Search for first region of the block where MI is located</span></div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> &amp;&amp; <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getParent() != RegionBoundaries[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>].first-&gt;getParent())</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;    ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160; </div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;  <span class="keywordflow">for</span> (; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getParent() != RegionBoundaries[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>].first-&gt;getParent())</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160; </div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    <span class="keywordflow">if</span> (Removing &amp;&amp; <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> == RegionBoundaries[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>].first &amp;&amp;</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;        <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> == RegionBoundaries[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>].second) {</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;      <span class="comment">// MI is in a region with size 1, after removing, the region will be</span></div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;      <span class="comment">// size 0, set RegionBegin and RegionEnd to pass end of block iterator.</span></div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;      RegionBoundaries[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] =</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;          std::pair(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getParent()-&gt;end(), <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getParent()-&gt;end());</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;    }</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> == RegionBoundaries[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>].first) {</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;      <span class="keywordflow">if</span> (Removing)</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;        RegionBoundaries[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] =</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;            std::pair(std::next(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>), RegionBoundaries[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>].second);</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;        <span class="comment">// Inserted NewMI in front of region, set new RegionBegin to NewMI</span></div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;        RegionBoundaries[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] = std::pair(<a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a>(NewMI),</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;                                        RegionBoundaries[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>].second);</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;    }</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;    <span class="keywordflow">if</span> (Removing &amp;&amp; <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> == RegionBoundaries[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>].second) {</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;      RegionBoundaries[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] = std::pair(RegionBoundaries[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>].first, std::prev(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>));</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    }</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;  }</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;}</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160; </div>
<div class="line"><a name="l01519"></a><span class="lineno"><a class="line" href="GCNSchedStrategy_8cpp.html#a9caea6f361f31119324b93999ad1028c"> 1519</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="GCNSchedStrategy_8cpp.html#a9caea6f361f31119324b93999ad1028c">hasIGLPInstrs</a>(<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html">ScheduleDAGInstrs</a> *DAG) {</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">std::any_of</a>(</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;      DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#ab50b64c518a7455daf3e0bc87aee5514">begin</a>(), DAG-&gt;<a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#a21805259f54dab47c2b3da009216996a">end</a>(), [](<a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;        unsigned Opc = MI-&gt;getOpcode();</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;        return Opc == AMDGPU::SCHED_GROUP_BARRIER || Opc == AMDGPU::IGLP_OPT;</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;      });</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;}</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160; </div>
<div class="line"><a name="l01527"></a><span class="lineno"><a class="line" href="classllvm_1_1GCNPostScheduleDAGMILive.html#ac1db9853e3ddfa9a2177147d8c03eacb"> 1527</a></span>&#160;<a class="code" href="classllvm_1_1GCNPostScheduleDAGMILive.html#ac1db9853e3ddfa9a2177147d8c03eacb">GCNPostScheduleDAGMILive::GCNPostScheduleDAGMILive</a>(</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    <a class="code" href="structllvm_1_1MachineSchedContext.html">MachineSchedContext</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, std::unique_ptr&lt;MachineSchedStrategy&gt; <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>,</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;    <span class="keywordtype">bool</span> RemoveKillFlags)</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;    : <a class="code" href="classllvm_1_1ScheduleDAGMI.html">ScheduleDAGMI</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="namespacestd.html">std</a>::<a class="code" href="namespacellvm.html#abfc9c7ecf70f66901e439f7c04ef3dbb">move</a>(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>), RemoveKillFlags) {}</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160; </div>
<div class="line"><a name="l01532"></a><span class="lineno"><a class="line" href="classllvm_1_1GCNPostScheduleDAGMILive.html#ab0fcaad7b05dc36681c5abeabca7991c"> 1532</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1GCNPostScheduleDAGMILive.html#ab0fcaad7b05dc36681c5abeabca7991c">GCNPostScheduleDAGMILive::schedule</a>() {</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;  HasIGLPInstrs = <a class="code" href="GCNSchedStrategy_8cpp.html#a9caea6f361f31119324b93999ad1028c">hasIGLPInstrs</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;  <span class="keywordflow">if</span> (HasIGLPInstrs) {</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;    SavedMutations.clear();</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;    SavedMutations.swap(<a class="code" href="classllvm_1_1ScheduleDAGMI.html#aed362d97300c9cd91f179f9c6c31c9ac">Mutations</a>);</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    <a class="code" href="classllvm_1_1ScheduleDAGMI.html#a2002164aea6fabe20598e0526746b1fa">addMutation</a>(<a class="code" href="namespacellvm.html#a71fc5e23072a3c0807e8379f61235248">createIGroupLPDAGMutation</a>());</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;  }</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160; </div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;  <a class="code" href="classllvm_1_1ScheduleDAGMI.html#a5d7e71cf32573e6b1762b5a1d82a1cf5">ScheduleDAGMI::schedule</a>();</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;}</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160; </div>
<div class="line"><a name="l01543"></a><span class="lineno"><a class="line" href="classllvm_1_1GCNPostScheduleDAGMILive.html#a2573535a1fb6914feb4615e6f6e1ef5d"> 1543</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1GCNPostScheduleDAGMILive.html#a2573535a1fb6914feb4615e6f6e1ef5d">GCNPostScheduleDAGMILive::finalizeSchedule</a>() {</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;  <span class="keywordflow">if</span> (HasIGLPInstrs)</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;    SavedMutations.swap(<a class="code" href="classllvm_1_1ScheduleDAGMI.html#aed362d97300c9cd91f179f9c6c31c9ac">Mutations</a>);</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160; </div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;  <a class="code" href="classllvm_1_1ScheduleDAGInstrs.html#a7c30ee6cdef3f4784c192654dcb9bab0">ScheduleDAGMI::finalizeSchedule</a>();</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="astructllvm_1_1LaneBitmask_html"><div class="ttname"><a href="structllvm_1_1LaneBitmask.html">llvm::LaneBitmask</a></div><div class="ttdef"><b>Definition:</b> <a href="LaneBitmask_8h_source.html#l00040">LaneBitmask.h:40</a></div></div>
<div class="ttc" id="aclassllvm_1_1GenericScheduler_html_a253bc2bd1ae8e7f36e0c3c1c9bb67367"><div class="ttname"><a href="classllvm_1_1GenericScheduler.html#a253bc2bd1ae8e7f36e0c3c1c9bb67367">llvm::GenericScheduler::Top</a></div><div class="ttdeci">SchedBoundary Top</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l01034">MachineScheduler.h:1034</a></div></div>
<div class="ttc" id="anamespacellvm_html_a66b412ba6b33cdefeb59dde7139dc8b0afc7d208fa38407036d4d3dfc7ac1ccff"><div class="ttname"><a href="namespacellvm.html#a66b412ba6b33cdefeb59dde7139dc8b0afc7d208fa38407036d4d3dfc7ac1ccff">llvm::GCNSchedStageID::OccInitialSchedule</a></div><div class="ttdeci">@ OccInitialSchedule</div></div>
<div class="ttc" id="astructllvm_1_1MachineSchedPolicy_html_a47ee8ec29daa3551f798ff4449fbf4d5"><div class="ttname"><a href="structllvm_1_1MachineSchedPolicy.html#a47ee8ec29daa3551f798ff4449fbf4d5">llvm::MachineSchedPolicy::OnlyBottomUp</a></div><div class="ttdeci">bool OnlyBottomUp</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00191">MachineScheduler.h:191</a></div></div>
<div class="ttc" id="astructllvm_1_1GenericSchedulerBase_1_1SchedResourceDelta_html_ab660550157a92f83f7b4f2db2d2d9304"><div class="ttname"><a href="structllvm_1_1GenericSchedulerBase_1_1SchedResourceDelta.html#ab660550157a92f83f7b4f2db2d2d9304">llvm::GenericSchedulerBase::SchedResourceDelta::DemandedResources</a></div><div class="ttdeci">unsigned DemandedResources</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00878">MachineScheduler.h:878</a></div></div>
<div class="ttc" id="aclassllvm_1_1ClusteredLowOccStage_html_a0bdb7b684aa1f51dc79bf9b7f9bf079f"><div class="ttname"><a href="classllvm_1_1ClusteredLowOccStage.html#a0bdb7b684aa1f51dc79bf9b7f9bf079f">llvm::ClusteredLowOccStage::initGCNSchedStage</a></div><div class="ttdeci">bool initGCNSchedStage() override</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l00705">GCNSchedStrategy.cpp:705</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScheduleDAG_html_a1b09f4d9c91e25f7bc2ac60b3b929d11"><div class="ttname"><a href="classllvm_1_1ScheduleDAG.html#a1b09f4d9c91e25f7bc2ac60b3b929d11">llvm::ScheduleDAG::MRI</a></div><div class="ttdeci">MachineRegisterInfo &amp; MRI</div><div class="ttdoc">Virtual/real register map.</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00560">ScheduleDAG.h:560</a></div></div>
<div class="ttc" id="aclassllvm_1_1GenericSchedulerBase_html_ae0da1bc94e326020069c0f44170a48d3aed8b719fe1a669c2fed4bacc6f46e8df"><div class="ttname"><a href="classllvm_1_1GenericSchedulerBase.html#ae0da1bc94e326020069c0f44170a48d3aed8b719fe1a669c2fed4bacc6f46e8df">llvm::GenericSchedulerBase::Weak</a></div><div class="ttdeci">@ Weak</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00846">MachineScheduler.h:846</a></div></div>
<div class="ttc" id="alib_2Target_2X86_2README_8txt_html_a9a315d042512705500b545a6c6acb2bd"><div class="ttname"><a href="lib_2Target_2X86_2README_8txt.html#a9a315d042512705500b545a6c6acb2bd">set</a></div><div class="ttdeci">We currently generate a but we really shouldn eax ecx xorl edx divl ecx eax divl ecx movl eax ret A similar code sequence works for division We currently compile i32 v2 eax eax jo LBB1_2 atomic and others It is also currently not done for read modify write instructions It is also current not done if the OF or CF flags are needed The shift operators have the complication that when the shift count is EFLAGS is not set</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2X86_2README_8txt_source.html#l01277">README.txt:1277</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStrategy_html_a45c6b23ba1bf5916572a93ef35d962c5"><div class="ttname"><a href="classllvm_1_1GCNSchedStrategy.html#a45c6b23ba1bf5916572a93ef35d962c5">llvm::GCNSchedStrategy::TargetOccupancy</a></div><div class="ttdeci">unsigned TargetOccupancy</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8h_source.html#l00063">GCNSchedStrategy.h:63</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a81626de817a0cb021ff8e915cf1942ed"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a81626de817a0cb021ff8e915cf1942ed">llvm::MachineBasicBlock::succ_size</a></div><div class="ttdeci">unsigned succ_size() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00385">MachineBasicBlock.h:385</a></div></div>
<div class="ttc" id="aclassllvm_1_1GenericSchedulerBase_html_ae9476ffbc2f3f195a2116b13f3186194"><div class="ttname"><a href="classllvm_1_1GenericSchedulerBase.html#ae9476ffbc2f3f195a2116b13f3186194">llvm::GenericSchedulerBase::TRI</a></div><div class="ttdeci">const TargetRegisterInfo * TRI</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00942">MachineScheduler.h:942</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_ad4a32b52ea36d2c35a9860fe263d0574"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#ad4a32b52ea36d2c35a9860fe263d0574">llvm::MachineInstr::clearRegisterDeads</a></div><div class="ttdeci">void clearRegisterDeads(Register Reg)</div><div class="ttdoc">Clear all dead flags on operands defining register Reg.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8cpp_source.html#l02021">MachineInstr.cpp:2021</a></div></div>
<div class="ttc" id="aclassllvm_1_1RegisterOperands_html_acee6dacd4d30da478f3ad67f7fc27142"><div class="ttname"><a href="classllvm_1_1RegisterOperands.html#acee6dacd4d30da478f3ad67f7fc27142">llvm::RegisterOperands::detectDeadDefs</a></div><div class="ttdeci">void detectDeadDefs(const MachineInstr &amp;MI, const LiveIntervals &amp;LIS)</div><div class="ttdoc">Use liveness information to find dead defs not marked with a dead flag and move them to the DeadDefs ...</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00580">RegisterPressure.cpp:580</a></div></div>
<div class="ttc" id="astructllvm_1_1GenericSchedulerBase_1_1SchedCandidate_html_a294e77c4f7245940981e5e259045c7c0"><div class="ttname"><a href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a294e77c4f7245940981e5e259045c7c0">llvm::GenericSchedulerBase::SchedCandidate::setBest</a></div><div class="ttdeci">void setBest(SchedCandidate &amp;Best)</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00926">MachineScheduler.h:926</a></div></div>
<div class="ttc" id="aIRTranslator_8cpp_html_abe44dfdea65b4f7e11e0a608ab708b76"><div class="ttname"><a href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a></div><div class="ttdeci">IRTranslator LLVM IR MI</div><div class="ttdef"><b>Definition:</b> <a href="IRTranslator_8cpp_source.html#l00109">IRTranslator.cpp:109</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="astructllvm_1_1GCNRegPressure_html"><div class="ttname"><a href="structllvm_1_1GCNRegPressure.html">llvm::GCNRegPressure</a></div><div class="ttdef"><b>Definition:</b> <a href="GCNRegPressure_8h_source.html#l00030">GCNRegPressure.h:30</a></div></div>
<div class="ttc" id="anamespacellvm_1_1tgtok_html_abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a"><div class="ttname"><a href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">llvm::tgtok::Def</a></div><div class="ttdeci">@ Def</div><div class="ttdef"><b>Definition:</b> <a href="TGLexer_8h_source.html#l00050">TGLexer.h:50</a></div></div>
<div class="ttc" id="aclassllvm_1_1GenericSchedulerBase_html_ae0da1bc94e326020069c0f44170a48d3aa00a8e5741a604eb07320e981473b4e7"><div class="ttname"><a href="classllvm_1_1GenericSchedulerBase.html#ae0da1bc94e326020069c0f44170a48d3aa00a8e5741a604eb07320e981473b4e7">llvm::GenericSchedulerBase::NodeOrder</a></div><div class="ttdeci">@ NodeOrder</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00848">MachineScheduler.h:848</a></div></div>
<div class="ttc" id="aclassllvm_1_1ClusteredLowOccStage_html_a251a257a2bc03ff04c73072f8d7eeb8d"><div class="ttname"><a href="classllvm_1_1ClusteredLowOccStage.html#a251a257a2bc03ff04c73072f8d7eeb8d">llvm::ClusteredLowOccStage::initGCNRegion</a></div><div class="ttdeci">bool initGCNRegion() override</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l00840">GCNSchedStrategy.cpp:840</a></div></div>
<div class="ttc" id="anamespacellvm_html_adb88334dcf6976de300fb1e3667430d7"><div class="ttname"><a href="namespacellvm.html#adb88334dcf6976de300fb1e3667430d7">llvm::getLiveRegsBefore</a></div><div class="ttdeci">GCNRPTracker::LiveRegSet getLiveRegsBefore(const MachineInstr &amp;MI, const LiveIntervals &amp;LIS)</div><div class="ttdef"><b>Definition:</b> <a href="GCNRegPressure_8h_source.html#l00253">GCNRegPressure.h:253</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStrategy_html_a26b8231b39c104871f78b2da6dc1eff5"><div class="ttname"><a href="classllvm_1_1GCNSchedStrategy.html#a26b8231b39c104871f78b2da6dc1eff5">llvm::GCNSchedStrategy::pickNodeBidirectional</a></div><div class="ttdeci">SUnit * pickNodeBidirectional(bool &amp;IsTopNode)</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l00224">GCNSchedStrategy.cpp:224</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveIntervals_html_aaedf1d3001470af7cdb616868c247ffe"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html#aaedf1d3001470af7cdb616868c247ffe">llvm::LiveIntervals::getSlotIndexes</a></div><div class="ttdeci">SlotIndexes * getSlotIndexes() const</div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervals_8h_source.html#l00209">LiveIntervals.h:209</a></div></div>
<div class="ttc" id="aclassllvm_1_1SIMachineFunctionInfo_html_ab51348abdbbc76d0e8db5c01a5ee5280"><div class="ttname"><a href="classllvm_1_1SIMachineFunctionInfo.html#ab51348abdbbc76d0e8db5c01a5ee5280">llvm::SIMachineFunctionInfo::getMinAllowedOccupancy</a></div><div class="ttdeci">unsigned getMinAllowedOccupancy() const</div><div class="ttdef"><b>Definition:</b> <a href="SIMachineFunctionInfo_8h_source.html#l01035">SIMachineFunctionInfo.h:1035</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStage_html_a979d350534fac63dad98d8f2937bf5a7"><div class="ttname"><a href="classllvm_1_1GCNSchedStage.html#a979d350534fac63dad98d8f2937bf5a7">llvm::GCNSchedStage::MF</a></div><div class="ttdeci">MachineFunction &amp; MF</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8h_source.html#l00251">GCNSchedStrategy.h:251</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStrategy_html_a7eb7baa0abad1c0fb63869eae07507a7"><div class="ttname"><a href="classllvm_1_1GCNSchedStrategy.html#a7eb7baa0abad1c0fb63869eae07507a7">llvm::GCNSchedStrategy::CurrentStage</a></div><div class="ttdeci">SmallVectorImpl&lt; GCNSchedStageID &gt;::iterator CurrentStage</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8h_source.html#l00071">GCNSchedStrategy.h:71</a></div></div>
<div class="ttc" id="aSIMachineFunctionInfo_8h_html"><div class="ttname"><a href="SIMachineFunctionInfo_8h.html">SIMachineFunctionInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1GenericSchedulerBase_html_ae0da1bc94e326020069c0f44170a48d3a5a905614458af47ec4a5054a53d23e1b"><div class="ttname"><a href="classllvm_1_1GenericSchedulerBase.html#ae0da1bc94e326020069c0f44170a48d3a5a905614458af47ec4a5054a53d23e1b">llvm::GenericSchedulerBase::Cluster</a></div><div class="ttdeci">@ Cluster</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00846">MachineScheduler.h:846</a></div></div>
<div class="ttc" id="anamespacellvm_html_a1eb5609345b906d024fbf9e4bc1adc06a2d68d32ff95cd10b4899c2823ec28e97"><div class="ttname"><a href="namespacellvm.html#a1eb5609345b906d024fbf9e4bc1adc06a2d68d32ff95cd10b4899c2823ec28e97">llvm::Latency</a></div><div class="ttdeci">@ Latency</div><div class="ttdef"><b>Definition:</b> <a href="SIMachineScheduler_8h_source.html#l00034">SIMachineScheduler.h:34</a></div></div>
<div class="ttc" id="astructllvm_1_1MachineSchedContext_html_a510c29d57e9f0343df48b7c58cb89228"><div class="ttname"><a href="structllvm_1_1MachineSchedContext.html#a510c29d57e9f0343df48b7c58cb89228">llvm::MachineSchedContext::RegClassInfo</a></div><div class="ttdeci">RegisterClassInfo * RegClassInfo</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00135">MachineScheduler.h:135</a></div></div>
<div class="ttc" id="anamespacellvm_html_a273ec9d4a470ecb7362abd00438e9b26"><div class="ttname"><a href="namespacellvm.html#a273ec9d4a470ecb7362abd00438e9b26">llvm::getRegPressure</a></div><div class="ttdeci">GCNRegPressure getRegPressure(const MachineRegisterInfo &amp;MRI, Range &amp;&amp;LiveRegs)</div><div class="ttdef"><b>Definition:</b> <a href="GCNRegPressure_8h_source.html#l00260">GCNRegPressure.h:260</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9e8c07e4142b6708ae1c68aa8bf8f066"><div class="ttname"><a href="namespacellvm.html#a9e8c07e4142b6708ae1c68aa8bf8f066">llvm::getLiveRegMap</a></div><div class="ttdeci">DenseMap&lt; MachineInstr *, GCNRPTracker::LiveRegSet &gt; getLiveRegMap(Range &amp;&amp;R, bool After, LiveIntervals &amp;LIS)</div><div class="ttdoc">creates a map MachineInstr -&gt; LiveRegSet R - range of iterators on instructions After - upon entry or...</div><div class="ttdef"><b>Definition:</b> <a href="GCNRegPressure_8h_source.html#l00210">GCNRegPressure.h:210</a></div></div>
<div class="ttc" id="aclassllvm_1_1SchedBoundary_html_a4f3e434b23939cec7a3c61b45071a017"><div class="ttname"><a href="classllvm_1_1SchedBoundary.html#a4f3e434b23939cec7a3c61b45071a017">llvm::SchedBoundary::DAG</a></div><div class="ttdeci">ScheduleDAGMI * DAG</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00623">MachineScheduler.h:623</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreRARematStage_html_a639de91c60044b41677c7f4b01c38a4c"><div class="ttname"><a href="classllvm_1_1PreRARematStage.html#a639de91c60044b41677c7f4b01c38a4c">llvm::PreRARematStage::shouldRevertScheduling</a></div><div class="ttdeci">bool shouldRevertScheduling(unsigned WavesAfter) override</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l01144">GCNSchedStrategy.cpp:1144</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScheduleDAGInstrs_html_ab50b64c518a7455daf3e0bc87aee5514"><div class="ttname"><a href="classllvm_1_1ScheduleDAGInstrs.html#ab50b64c518a7455daf3e0bc87aee5514">llvm::ScheduleDAGInstrs::begin</a></div><div class="ttdeci">MachineBasicBlock::iterator begin() const</div><div class="ttdoc">Returns an iterator to the top of the current scheduling region.</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAGInstrs_8h_source.html#l00278">ScheduleDAGInstrs.h:278</a></div></div>
<div class="ttc" id="aclassllvm_1_1BitVector_html_a1964207fae81f04966b2a9dcfc21cf7b"><div class="ttname"><a href="classllvm_1_1BitVector.html#a1964207fae81f04966b2a9dcfc21cf7b">llvm::BitVector::set</a></div><div class="ttdeci">BitVector &amp; set()</div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00344">BitVector.h:344</a></div></div>
<div class="ttc" id="aclassllvm_1_1RegisterOperands_html"><div class="ttname"><a href="classllvm_1_1RegisterOperands.html">llvm::RegisterOperands</a></div><div class="ttdoc">List of registers defined and used by a machine instruction.</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8h_source.html#l00166">RegisterPressure.h:166</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetSubtargetInfo_html_ad34f7e3cd7a9add3ab2529e267b48004"><div class="ttname"><a href="classllvm_1_1TargetSubtargetInfo.html#ad34f7e3cd7a9add3ab2529e267b48004">llvm::TargetSubtargetInfo::getInstrInfo</a></div><div class="ttdeci">virtual const TargetInstrInfo * getInstrInfo() const</div><div class="ttdef"><b>Definition:</b> <a href="TargetSubtargetInfo_8h_source.html#l00095">TargetSubtargetInfo.h:95</a></div></div>
<div class="ttc" id="aclassllvm_1_1GenericSchedulerBase_html_ae0da1bc94e326020069c0f44170a48d3ab6aae8902e724a36ed16d537784777a2"><div class="ttname"><a href="classllvm_1_1GenericSchedulerBase.html#ae0da1bc94e326020069c0f44170a48d3ab6aae8902e724a36ed16d537784777a2">llvm::GenericSchedulerBase::Stall</a></div><div class="ttdeci">@ Stall</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00846">MachineScheduler.h:846</a></div></div>
<div class="ttc" id="aclassllvm_1_1BitVector_html_aa19094c99ca405ec1efe38da727d27de"><div class="ttname"><a href="classllvm_1_1BitVector.html#aa19094c99ca405ec1efe38da727d27de">llvm::BitVector::none</a></div><div class="ttdeci">bool none() const</div><div class="ttdoc">none - Returns true if none of the bits are set.</div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00181">BitVector.h:181</a></div></div>
<div class="ttc" id="astructllvm_1_1GenericSchedulerBase_1_1SchedCandidate_html_a361fa10c095c303e093021c6a1d04e75"><div class="ttname"><a href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a361fa10c095c303e093021c6a1d04e75">llvm::GenericSchedulerBase::SchedCandidate::reset</a></div><div class="ttdeci">void reset(const CandPolicy &amp;NewPolicy)</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00914">MachineScheduler.h:914</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNMaxILPSchedStrategy_html_ab9b774c18357fd89d3da62c07828868d"><div class="ttname"><a href="classllvm_1_1GCNMaxILPSchedStrategy.html#ab9b774c18357fd89d3da62c07828868d">llvm::GCNMaxILPSchedStrategy::GCNMaxILPSchedStrategy</a></div><div class="ttdeci">GCNMaxILPSchedStrategy(const MachineSchedContext *C)</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l00378">GCNSchedStrategy.cpp:378</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01199">SmallVector.h:1199</a></div></div>
<div class="ttc" id="anamespacellvm_html_a66b412ba6b33cdefeb59dde7139dc8b0"><div class="ttname"><a href="namespacellvm.html#a66b412ba6b33cdefeb59dde7139dc8b0">llvm::GCNSchedStageID</a></div><div class="ttdeci">GCNSchedStageID</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8h_source.html#l00027">GCNSchedStrategy.h:27</a></div></div>
<div class="ttc" id="aclassllvm_1_1RegPressureTracker_html_ad552b6e557acce957b3bd5a1960a53dd"><div class="ttname"><a href="classllvm_1_1RegPressureTracker.html#ad552b6e557acce957b3bd5a1960a53dd">llvm::RegPressureTracker::getUpwardPressure</a></div><div class="ttdeci">void getUpwardPressure(const MachineInstr *MI, std::vector&lt; unsigned &gt; &amp;PressureResult, std::vector&lt; unsigned &gt; &amp;MaxPressureResult)</div><div class="ttdoc">Get the pressure of each PSet after traversing this instruction bottom-up.</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l01366">RegisterPressure.cpp:1366</a></div></div>
<div class="ttc" id="aclassllvm_1_1SchedBoundary_html_ad3f102348942e4ca3ec057e895138609"><div class="ttname"><a href="classllvm_1_1SchedBoundary.html#ad3f102348942e4ca3ec057e895138609">llvm::SchedBoundary::Pending</a></div><div class="ttdeci">ReadyQueue Pending</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00628">MachineScheduler.h:628</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScheduleDAGInstrs_html_af1c8be2ff5fd8eab8091e6ffa40ded8d"><div class="ttname"><a href="classllvm_1_1ScheduleDAGInstrs.html#af1c8be2ff5fd8eab8091e6ffa40ded8d">llvm::ScheduleDAGInstrs::NumRegionInstrs</a></div><div class="ttdeci">unsigned NumRegionInstrs</div><div class="ttdoc">Instructions in this region (distance(RegionBegin, RegionEnd)).</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAGInstrs_8h_source.html#l00155">ScheduleDAGInstrs.h:155</a></div></div>
<div class="ttc" id="anamespacellvm_html_af7881286e3ea4d7f1c4a63c87c132dac"><div class="ttname"><a href="namespacellvm.html#af7881286e3ea4d7f1c4a63c87c132dac">llvm::printMBBReference</a></div><div class="ttdeci">Printable printMBBReference(const MachineBasicBlock &amp;MBB)</div><div class="ttdoc">Prints a machine basic block reference.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00118">MachineBasicBlock.cpp:118</a></div></div>
<div class="ttc" id="aGCNSchedStrategy_8h_html"><div class="ttname"><a href="GCNSchedStrategy_8h.html">GCNSchedStrategy.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1GenericSchedulerBase_html_a9730ea0068843718868a8667f52e3680"><div class="ttname"><a href="classllvm_1_1GenericSchedulerBase.html#a9730ea0068843718868a8667f52e3680">llvm::GenericSchedulerBase::SchedModel</a></div><div class="ttdeci">const TargetSchedModel * SchedModel</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00941">MachineScheduler.h:941</a></div></div>
<div class="ttc" id="anamespacellvm_1_1X86Disassembler_html_a1e59b79e1d09149912cad9c0ef2809ad"><div class="ttname"><a href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">llvm::X86Disassembler::Reg</a></div><div class="ttdeci">Reg</div><div class="ttdoc">All possible values of the reg field in the ModR/M byte.</div><div class="ttdef"><b>Definition:</b> <a href="X86DisassemblerDecoder_8h_source.html#l00462">X86DisassemblerDecoder.h:462</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab618de2b7dea1e1859018a1a7e8b3ee5"><div class="ttname"><a href="namespacellvm.html#ab618de2b7dea1e1859018a1a7e8b3ee5">llvm::tryGreater</a></div><div class="ttdeci">bool tryGreater(int TryVal, int CandVal, GenericSchedulerBase::SchedCandidate &amp;TryCand, GenericSchedulerBase::SchedCandidate &amp;Cand, GenericSchedulerBase::CandReason Reason)</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l03028">MachineScheduler.cpp:3028</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNMaxILPSchedStrategy_html_adaaa8b026820461823cf355979353b3a"><div class="ttname"><a href="classllvm_1_1GCNMaxILPSchedStrategy.html#adaaa8b026820461823cf355979353b3a">llvm::GCNMaxILPSchedStrategy::tryCandidate</a></div><div class="ttdeci">bool tryCandidate(SchedCandidate &amp;Cand, SchedCandidate &amp;TryCand, SchedBoundary *Zone) const override</div><div class="ttdoc">Apply a set of heuristics to a new candidate.</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l00383">GCNSchedStrategy.cpp:383</a></div></div>
<div class="ttc" id="astructllvm_1_1GenericSchedulerBase_1_1SchedCandidate_html_a81fbfdac1b8c1e736493b56b50853322"><div class="ttname"><a href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a81fbfdac1b8c1e736493b56b50853322">llvm::GenericSchedulerBase::SchedCandidate::RPDelta</a></div><div class="ttdeci">RegPressureDelta RPDelta</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00906">MachineScheduler.h:906</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScheduleMetrics_html_ae07936418f440db324ca02542a0fa200"><div class="ttname"><a href="classllvm_1_1ScheduleMetrics.html#ae07936418f440db324ca02542a0fa200">llvm::ScheduleMetrics::getMetric</a></div><div class="ttdeci">unsigned getMetric() const</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8h_source.html#l00149">GCNSchedStrategy.h:149</a></div></div>
<div class="ttc" id="anamespacellvm_html_a66b412ba6b33cdefeb59dde7139dc8b0a3199673fa17ebc25c0c9925028d225e0"><div class="ttname"><a href="namespacellvm.html#a66b412ba6b33cdefeb59dde7139dc8b0a3199673fa17ebc25c0c9925028d225e0">llvm::GCNSchedStageID::UnclusteredHighRPReschedule</a></div><div class="ttdeci">@ UnclusteredHighRPReschedule</div></div>
<div class="ttc" id="aclassllvm_1_1GenericSchedulerBase_html_ae0da1bc94e326020069c0f44170a48d3a974161ce84e375b6d40bd8855c29dd7f"><div class="ttname"><a href="classllvm_1_1GenericSchedulerBase.html#ae0da1bc94e326020069c0f44170a48d3a974161ce84e375b6d40bd8855c29dd7f">llvm::GenericSchedulerBase::RegCritical</a></div><div class="ttdeci">@ RegCritical</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00846">MachineScheduler.h:846</a></div></div>
<div class="ttc" id="aRegisterClassInfo_8h_html"><div class="ttname"><a href="RegisterClassInfo_8h.html">RegisterClassInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1GenericScheduler_html_a6ef23d22af6c895d9c255de3e940b8bf"><div class="ttname"><a href="classllvm_1_1GenericScheduler.html#a6ef23d22af6c895d9c255de3e940b8bf">llvm::GenericScheduler::tryCandidate</a></div><div class="ttdeci">virtual bool tryCandidate(SchedCandidate &amp;Cand, SchedCandidate &amp;TryCand, SchedBoundary *Zone) const</div><div class="ttdoc">Apply a set of heuristics to a new candidate.</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l03372">MachineScheduler.cpp:3372</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_a741b5105cca6e98538c79acf275ca733"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a741b5105cca6e98538c79acf275ca733">llvm::MachineRegisterInfo::use_instr_nodbg_begin</a></div><div class="ttdeci">use_instr_nodbg_iterator use_instr_nodbg_begin(Register RegNo) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00557">MachineRegisterInfo.h:557</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdeci">@ Hidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00138">CommandLine.h:138</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetInstrInfo_html_a1d142d4718ca758481e0b49ad9d8ea97"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html#a1d142d4718ca758481e0b49ad9d8ea97">llvm::TargetInstrInfo::isTriviallyReMaterializable</a></div><div class="ttdeci">bool isTriviallyReMaterializable(const MachineInstr &amp;MI) const</div><div class="ttdoc">Return true if the instruction is trivially rematerializable, meaning it has no side effects and requ...</div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00130">TargetInstrInfo.h:130</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a1eb8504bab5f794778d82db6ac829923"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a1eb8504bab5f794778d82db6ac829923">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::erase</a></div><div class="ttdeci">bool erase(const KeyT &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00302">DenseMap.h:302</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPUSubtarget_html_a070c057941562774c1ffa4f85b1095ed"><div class="ttname"><a href="classllvm_1_1AMDGPUSubtarget.html#a070c057941562774c1ffa4f85b1095ed">llvm::AMDGPUSubtarget::getOccupancyWithLocalMemSize</a></div><div class="ttdeci">unsigned getOccupancyWithLocalMemSize(uint32_t Bytes, const Function &amp;) const</div><div class="ttdoc">Inverse of getMaxLocalMemWithWaveCount.</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUSubtarget_8cpp_source.html#l00336">AMDGPUSubtarget.cpp:336</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStrategy_html_aa8793c7d097d298c1590b67980054d8b"><div class="ttname"><a href="classllvm_1_1GCNSchedStrategy.html#aa8793c7d097d298c1590b67980054d8b">llvm::GCNSchedStrategy::SGPRExcessLimit</a></div><div class="ttdeci">unsigned SGPRExcessLimit</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8h_source.html#l00059">GCNSchedStrategy.h:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPUMachineFunction_html_a1e2bde424bd7365a73971777ed20a7a8"><div class="ttname"><a href="classllvm_1_1AMDGPUMachineFunction.html#a1e2bde424bd7365a73971777ed20a7a8">llvm::AMDGPUMachineFunction::getLDSSize</a></div><div class="ttdeci">uint32_t getLDSSize() const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUMachineFunction_8h_source.html#l00074">AMDGPUMachineFunction.h:74</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveIntervals_html_aa07c0db20cf93bf2f558d00af34a6cb6"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html#aa07c0db20cf93bf2f558d00af34a6cb6">llvm::LiveIntervals::removeInterval</a></div><div class="ttdeci">void removeInterval(Register Reg)</div><div class="ttdoc">Interval removal.</div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervals_8h_source.html#l00143">LiveIntervals.h:143</a></div></div>
<div class="ttc" id="aclassllvm_1_1RegPressureTracker_html"><div class="ttname"><a href="classllvm_1_1RegPressureTracker.html">llvm::RegPressureTracker</a></div><div class="ttdoc">Track the current register pressure at some position in the instruction stream, and remember the high...</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8h_source.html#l00357">RegisterPressure.h:357</a></div></div>
<div class="ttc" id="aclassllvm_1_1GenericSchedulerBase_html_a8668556014566994c07b21391762551b"><div class="ttname"><a href="classllvm_1_1GenericSchedulerBase.html#a8668556014566994c07b21391762551b">llvm::GenericSchedulerBase::setPolicy</a></div><div class="ttdeci">void setPolicy(CandPolicy &amp;Policy, bool IsPostRA, SchedBoundary &amp;CurrZone, SchedBoundary *OtherZone)</div><div class="ttdoc">Set the CandPolicy given a scheduling zone given the current resources and latencies inside and outsi...</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l02876">MachineScheduler.cpp:2876</a></div></div>
<div class="ttc" id="aclassllvm_1_1BitVector_html_a32859a24aa7a3be269855b989d92a4b4"><div class="ttname"><a href="classllvm_1_1BitVector.html#a32859a24aa7a3be269855b989d92a4b4">llvm::BitVector::resize</a></div><div class="ttdeci">void resize(unsigned N, bool t=false)</div><div class="ttdoc">resize - Grow or shrink the bitvector.</div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00334">BitVector.h:334</a></div></div>
<div class="ttc" id="aclassllvm_1_1GenericScheduler_html_aa8cddd2ea015f8177a8395035f87e332"><div class="ttname"><a href="classllvm_1_1GenericScheduler.html#aa8cddd2ea015f8177a8395035f87e332">llvm::GenericScheduler::initialize</a></div><div class="ttdeci">void initialize(ScheduleDAGMI *dag) override</div><div class="ttdoc">Initialize the strategy after building the DAG for a new region.</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l03087">MachineScheduler.cpp:3087</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallSet_html"><div class="ttname"><a href="classllvm_1_1SmallSet.html">llvm::SmallSet&lt; unsigned, 16 &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1SIMachineFunctionInfo_html_a17e3b288cc69f7b6c8c0c4d1795dfc2a"><div class="ttname"><a href="classllvm_1_1SIMachineFunctionInfo.html#a17e3b288cc69f7b6c8c0c4d1795dfc2a">llvm::SIMachineFunctionInfo::increaseOccupancy</a></div><div class="ttdeci">void increaseOccupancy(const MachineFunction &amp;MF, unsigned Limit)</div><div class="ttdef"><b>Definition:</b> <a href="SIMachineFunctionInfo_8h_source.html#l01048">SIMachineFunctionInfo.h:1048</a></div></div>
<div class="ttc" id="astructllvm_1_1GenericSchedulerBase_1_1SchedCandidate_html_ad9372964d55580636efe92281b42ad6c"><div class="ttname"><a href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#ad9372964d55580636efe92281b42ad6c">llvm::GenericSchedulerBase::SchedCandidate::Reason</a></div><div class="ttdeci">CandReason Reason</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00900">MachineScheduler.h:900</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNScheduleDAGMILive_html"><div class="ttname"><a href="classllvm_1_1GCNScheduleDAGMILive.html">llvm::GCNScheduleDAGMILive</a></div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8h_source.html#l00166">GCNSchedStrategy.h:166</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_ae73582bbbc71758dcac70cd8c56210e4"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#ae73582bbbc71758dcac70cd8c56210e4">llvm::MachineRegisterInfo::getNumVirtRegs</a></div><div class="ttdeci">unsigned getNumVirtRegs() const</div><div class="ttdoc">getNumVirtRegs - Return the number of virtual registers created.</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00784">MachineRegisterInfo.h:784</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSubtarget_html"><div class="ttname"><a href="classllvm_1_1GCNSubtarget.html">llvm::GCNSubtarget</a></div><div class="ttdef"><b>Definition:</b> <a href="GCNSubtarget_8h_source.html#l00032">GCNSubtarget.h:32</a></div></div>
<div class="ttc" id="aclassllvm_1_1Register_html_a1979c563289f871907832e419889f979"><div class="ttname"><a href="classllvm_1_1Register.html#a1979c563289f871907832e419889f979">llvm::Register::index2VirtReg</a></div><div class="ttdeci">static Register index2VirtReg(unsigned Index)</div><div class="ttdoc">Convert a 0-based index to a virtual register number.</div><div class="ttdef"><b>Definition:</b> <a href="Register_8h_source.html#l00084">Register.h:84</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab4d4bc901fedd8857f647dcc2c0d71de"><div class="ttname"><a href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">llvm::max</a></div><div class="ttdeci">Expected&lt; ExpressionValue &gt; max(const ExpressionValue &amp;Lhs, const ExpressionValue &amp;Rhs)</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8cpp_source.html#l00337">FileCheck.cpp:337</a></div></div>
<div class="ttc" id="aclassllvm_1_1GenericSchedulerBase_html_ae0da1bc94e326020069c0f44170a48d3a07409a8a5b9657af23f0a1c962f5c0c1"><div class="ttname"><a href="classllvm_1_1GenericSchedulerBase.html#ae0da1bc94e326020069c0f44170a48d3a07409a8a5b9657af23f0a1c962f5c0c1">llvm::GenericSchedulerBase::ResourceDemand</a></div><div class="ttdeci">@ ResourceDemand</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00847">MachineScheduler.h:847</a></div></div>
<div class="ttc" id="aAMDGPUIGroupLP_8h_html"><div class="ttname"><a href="AMDGPUIGroupLP_8h.html">AMDGPUIGroupLP.h</a></div></div>
<div class="ttc" id="astructllvm_1_1GCNRegPressure_html_abdd682d4cc4a832b22edda3b7974a766"><div class="ttname"><a href="structllvm_1_1GCNRegPressure.html#abdd682d4cc4a832b22edda3b7974a766">llvm::GCNRegPressure::less</a></div><div class="ttdeci">bool less(const GCNSubtarget &amp;ST, const GCNRegPressure &amp;O, unsigned MaxOccupancy=std::numeric_limits&lt; unsigned &gt;::max()) const</div><div class="ttdef"><b>Definition:</b> <a href="GCNRegPressure_8cpp_source.html#l00089">GCNRegPressure.cpp:89</a></div></div>
<div class="ttc" id="aclassllvm_1_1SUnit_html_ae0b8da4dfde85d4ddc32359ca52dc493"><div class="ttname"><a href="classllvm_1_1SUnit.html#ae0b8da4dfde85d4ddc32359ca52dc493">llvm::SUnit::isTopReady</a></div><div class="ttdeci">bool isTopReady() const</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00446">ScheduleDAG.h:446</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScheduleDAGInstrs_html_a21805259f54dab47c2b3da009216996a"><div class="ttname"><a href="classllvm_1_1ScheduleDAGInstrs.html#a21805259f54dab47c2b3da009216996a">llvm::ScheduleDAGInstrs::end</a></div><div class="ttdeci">MachineBasicBlock::iterator end() const</div><div class="ttdoc">Returns an iterator to the bottom of the current scheduling region.</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAGInstrs_8h_source.html#l00281">ScheduleDAGInstrs.h:281</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0f0d66fa63bebb53ddd51f1cc4def0f8"><div class="ttname"><a href="namespacellvm.html#a0f0d66fa63bebb53ddd51f1cc4def0f8">llvm::isEqual</a></div><div class="ttdeci">bool isEqual(const GCNRPTracker::LiveRegSet &amp;S1, const GCNRPTracker::LiveRegSet &amp;S2)</div><div class="ttdef"><b>Definition:</b> <a href="GCNRegPressure_8cpp_source.html#l00021">GCNRegPressure.cpp:21</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveIntervals_html_aff210756ea606fd0fd721c8ccaba10c8"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html#aff210756ea606fd0fd721c8ccaba10c8">llvm::LiveIntervals::createAndComputeVirtRegInterval</a></div><div class="ttdeci">LiveInterval &amp; createAndComputeVirtRegInterval(Register Reg)</div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervals_8h_source.html#l00136">LiveIntervals.h:136</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00101">Debug.h:101</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveIntervals_html_a6f3043b29023d270fc4bc5062dff7cee"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html#a6f3043b29023d270fc4bc5062dff7cee">llvm::LiveIntervals::getInstructionIndex</a></div><div class="ttdeci">SlotIndex getInstructionIndex(const MachineInstr &amp;Instr) const</div><div class="ttdoc">Returns the base index of the given instruction.</div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervals_8h_source.html#l00220">LiveIntervals.h:220</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNScheduleDAGMILive_html_a07b7b7af2f5068531a7f854726ed6d0c"><div class="ttname"><a href="classllvm_1_1GCNScheduleDAGMILive.html#a07b7b7af2f5068531a7f854726ed6d0c">llvm::GCNScheduleDAGMILive::finalizeSchedule</a></div><div class="ttdeci">void finalizeSchedule() override</div><div class="ttdoc">Allow targets to perform final scheduling actions at the level of the whole MachineFunction.</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l00589">GCNSchedStrategy.cpp:589</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStrategy_html_aca0e645faeaad83ce440e96cc39b6763"><div class="ttname"><a href="classllvm_1_1GCNSchedStrategy.html#aca0e645faeaad83ce440e96cc39b6763">llvm::GCNSchedStrategy::ErrorMargin</a></div><div class="ttdeci">unsigned ErrorMargin</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8h_source.html#l00085">GCNSchedStrategy.h:85</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNDownwardRPTracker_html"><div class="ttname"><a href="classllvm_1_1GCNDownwardRPTracker.html">llvm::GCNDownwardRPTracker</a></div><div class="ttdef"><b>Definition:</b> <a href="GCNRegPressure_8h_source.html#l00159">GCNRegPressure.h:159</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSubtarget_html_a4bbc0f0059b8fc54fdd919e558f0b911"><div class="ttname"><a href="classllvm_1_1GCNSubtarget.html#a4bbc0f0059b8fc54fdd919e558f0b911">llvm::GCNSubtarget::getInstrInfo</a></div><div class="ttdeci">const SIInstrInfo * getInstrInfo() const override</div><div class="ttdef"><b>Definition:</b> <a href="GCNSubtarget_8h_source.html#l00222">GCNSubtarget.h:222</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScheduleDAGMI_html_aed362d97300c9cd91f179f9c6c31c9ac"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#aed362d97300c9cd91f179f9c6c31c9ac">llvm::ScheduleDAGMI::Mutations</a></div><div class="ttdeci">std::vector&lt; std::unique_ptr&lt; ScheduleDAGMutation &gt; &gt; Mutations</div><div class="ttdoc">Ordered list of DAG postprocessing steps.</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00280">MachineScheduler.h:280</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveIntervals_html_a29d12c5a65b3940bfac7b5aa1121ac70"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html#a29d12c5a65b3940bfac7b5aa1121ac70">llvm::LiveIntervals::handleMove</a></div><div class="ttdeci">void handleMove(MachineInstr &amp;MI, bool UpdateFlags=false)</div><div class="ttdoc">Call this method to notify LiveIntervals that instruction MI has been moved within a basic block.</div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervals_8cpp_source.html#l01505">LiveIntervals.cpp:1505</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStage_html_a741c05e011507c0982568e68fa599a8c"><div class="ttname"><a href="classllvm_1_1GCNSchedStage.html#a741c05e011507c0982568e68fa599a8c">llvm::GCNSchedStage::getScheduleMetrics</a></div><div class="ttdeci">ScheduleMetrics getScheduleMetrics(const std::vector&lt; SUnit &gt; &amp;InputSchedule)</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l01005">GCNSchedStrategy.cpp:1005</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreRARematStage_html_adaf8209252a511c74f8db1e37b572672"><div class="ttname"><a href="classllvm_1_1PreRARematStage.html#adaf8209252a511c74f8db1e37b572672">llvm::PreRARematStage::initGCNRegion</a></div><div class="ttdeci">bool initGCNRegion() override</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l00852">GCNSchedStrategy.cpp:852</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="aclassllvm_1_1GenericScheduler_html_a33cc1a55125b89319e048d24625a2925"><div class="ttname"><a href="classllvm_1_1GenericScheduler.html#a33cc1a55125b89319e048d24625a2925">llvm::GenericScheduler::TopCand</a></div><div class="ttdeci">SchedCandidate TopCand</div><div class="ttdoc">Candidate last picked from Top boundary.</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l01038">MachineScheduler.h:1038</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStage_html_aa22f1a1dc2d882a5c94b02777ed9a878"><div class="ttname"><a href="classllvm_1_1GCNSchedStage.html#aa22f1a1dc2d882a5c94b02777ed9a878">llvm::GCNSchedStage::MFI</a></div><div class="ttdeci">SIMachineFunctionInfo &amp; MFI</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8h_source.html#l00253">GCNSchedStrategy.h:253</a></div></div>
<div class="ttc" id="aclassllvm_1_1UnclusteredHighRPStage_html_a2468e5cc789e17c8e2fb2b6102404e8f"><div class="ttname"><a href="classllvm_1_1UnclusteredHighRPStage.html#a2468e5cc789e17c8e2fb2b6102404e8f">llvm::UnclusteredHighRPStage::initGCNSchedStage</a></div><div class="ttdeci">bool initGCNSchedStage() override</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l00675">GCNSchedStrategy.cpp:675</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStrategy_html_aa5bfab3502e3953ac33f90ae4c86fecc"><div class="ttname"><a href="classllvm_1_1GCNSchedStrategy.html#aa5bfab3502e3953ac33f90ae4c86fecc">llvm::GCNSchedStrategy::SGPRLimitBias</a></div><div class="ttdeci">unsigned SGPRLimitBias</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8h_source.html#l00097">GCNSchedStrategy.h:97</a></div></div>
<div class="ttc" id="aclassllvm_1_1SchedBoundary_html_a589e51a1ef960a2b6aaa3854ce04d77a"><div class="ttname"><a href="classllvm_1_1SchedBoundary.html#a589e51a1ef960a2b6aaa3854ce04d77a">llvm::SchedBoundary::isTop</a></div><div class="ttdeci">bool isTop() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00733">MachineScheduler.h:733</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetInstrInfo_html"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html">llvm::TargetInstrInfo</a></div><div class="ttdoc">TargetInstrInfo - Interface to description of machine instruction set.</div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00098">TargetInstrInfo.h:98</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a00c9d82d8d59adedd1734fed16051c73"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a00c9d82d8d59adedd1734fed16051c73">llvm::MachineBasicBlock::remove</a></div><div class="ttdeci">MachineInstr * remove(MachineInstr *I)</div><div class="ttdoc">Remove the unbundled instruction from the instruction list without deleting it.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l01017">MachineBasicBlock.h:1017</a></div></div>
<div class="ttc" id="aclassllvm_1_1SUnit_html_ac198a5fb130b4c09836ba20e01b4290d"><div class="ttname"><a href="classllvm_1_1SUnit.html#ac198a5fb130b4c09836ba20e01b4290d">llvm::SUnit::isBottomReady</a></div><div class="ttdeci">bool isBottomReady() const</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00449">ScheduleDAG.h:449</a></div></div>
<div class="ttc" id="aclassllvm_1_1UnclusteredHighRPStage_html_a2bb4889375018fd6bcc64fb3d3258d95"><div class="ttname"><a href="classllvm_1_1UnclusteredHighRPStage.html#a2bb4889375018fd6bcc64fb3d3258d95">llvm::UnclusteredHighRPStage::initGCNRegion</a></div><div class="ttdeci">bool initGCNRegion() override</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l00829">GCNSchedStrategy.cpp:829</a></div></div>
<div class="ttc" id="astructllvm_1_1RegPressureDelta_html_a589e1a7e9a8a095d8d01ff8ba32b3d14"><div class="ttname"><a href="structllvm_1_1RegPressureDelta.html#a589e1a7e9a8a095d8d01ff8ba32b3d14">llvm::RegPressureDelta::CurrentMax</a></div><div class="ttdeci">PressureChange CurrentMax</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8h_source.html#l00241">RegisterPressure.h:241</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSubtarget_html_acf6141c742569e20d289c523560f8b00"><div class="ttname"><a href="classllvm_1_1GCNSubtarget.html#acf6141c742569e20d289c523560f8b00">llvm::GCNSubtarget::getMaxNumSGPRs</a></div><div class="ttdeci">unsigned getMaxNumSGPRs(unsigned WavesPerEU, bool Addressable) const</div><div class="ttdef"><b>Definition:</b> <a href="GCNSubtarget_8h_source.html#l01176">GCNSubtarget.h:1176</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStrategy_html_a5655f7a9e04872d7a5834a44a1d5359c"><div class="ttname"><a href="classllvm_1_1GCNSchedStrategy.html#a5655f7a9e04872d7a5834a44a1d5359c">llvm::GCNSchedStrategy::MF</a></div><div class="ttdeci">MachineFunction * MF</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8h_source.html#l00065">GCNSchedStrategy.h:65</a></div></div>
<div class="ttc" id="astructllvm_1_1GCNRegPressure_html_abd577f5d55cd0fde5973c8c5a1cdb816"><div class="ttname"><a href="structllvm_1_1GCNRegPressure.html#abd577f5d55cd0fde5973c8c5a1cdb816">llvm::GCNRegPressure::getSGPRNum</a></div><div class="ttdeci">unsigned getSGPRNum() const</div><div class="ttdef"><b>Definition:</b> <a href="GCNRegPressure_8h_source.html#l00049">GCNRegPressure.h:49</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1SIInstrInfo_html_a73c5c62286bf6da4e995283f012602fc"><div class="ttname"><a href="classllvm_1_1SIInstrInfo.html#a73c5c62286bf6da4e995283f012602fc">llvm::SIInstrInfo::getSchedModel</a></div><div class="ttdeci">const TargetSchedModel &amp; getSchedModel() const</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8h_source.html#l01191">SIInstrInfo.h:1191</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStage_html_a2f14a5fe09608fc5cce9e68e4f516a68"><div class="ttname"><a href="classllvm_1_1GCNSchedStage.html#a2f14a5fe09608fc5cce9e68e4f516a68">llvm::GCNSchedStage::S</a></div><div class="ttdeci">GCNSchedStrategy &amp; S</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8h_source.html#l00249">GCNSchedStrategy.h:249</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_ac2dc0fa143c9f2127f0501734577a0a0"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">llvm::MachineFunction::getInfo</a></div><div class="ttdeci">Ty * getInfo()</div><div class="ttdoc">getInfo - Keep track of various per-function pieces of information for backends that would like to do...</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00770">MachineFunction.h:770</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A, *B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00086">README_ALTIVEC.txt:86</a></div></div>
<div class="ttc" id="astructllvm_1_1GCNRegPressure_html_a478ab8c9c868e81201d1d7467e096863"><div class="ttname"><a href="structllvm_1_1GCNRegPressure.html#a478ab8c9c868e81201d1d7467e096863">llvm::GCNRegPressure::getOccupancy</a></div><div class="ttdeci">unsigned getOccupancy(const GCNSubtarget &amp;ST) const</div><div class="ttdef"><b>Definition:</b> <a href="GCNRegPressure_8h_source.html#l00063">GCNRegPressure.h:63</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScheduleDAGInstrs_html_abc5a5c32ac78a99ee2633dbbeec20397"><div class="ttname"><a href="classllvm_1_1ScheduleDAGInstrs.html#abc5a5c32ac78a99ee2633dbbeec20397">llvm::ScheduleDAGInstrs::exitRegion</a></div><div class="ttdeci">virtual void exitRegion()</div><div class="ttdoc">Called when the scheduler has finished scheduling the current region.</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAGInstrs_8cpp_source.html#l00199">ScheduleDAGInstrs.cpp:199</a></div></div>
<div class="ttc" id="aclassllvm_1_1RegPressureTracker_html_ac1bfd03ca8fa96ab674c7f7b620dd8a6"><div class="ttname"><a href="classllvm_1_1RegPressureTracker.html#ac1bfd03ca8fa96ab674c7f7b620dd8a6">llvm::RegPressureTracker::getDownwardPressure</a></div><div class="ttdeci">void getDownwardPressure(const MachineInstr *MI, std::vector&lt; unsigned &gt; &amp;PressureResult, std::vector&lt; unsigned &gt; &amp;MaxPressureResult)</div><div class="ttdoc">Get the pressure of each PSet after traversing this instruction top-down.</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l01382">RegisterPressure.cpp:1382</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8c9a83bf7b5f6e85f215ff07a31e0fbe"><div class="ttname"><a href="namespacellvm.html#a8c9a83bf7b5f6e85f215ff07a31e0fbe">llvm::tryLatency</a></div><div class="ttdeci">bool tryLatency(GenericSchedulerBase::SchedCandidate &amp;TryCand, GenericSchedulerBase::SchedCandidate &amp;Cand, SchedBoundary &amp;Zone)</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l03044">MachineScheduler.cpp:3044</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveIntervals_html_a2035620c14bf7bdedfa4e2655f88d114"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html#a2035620c14bf7bdedfa4e2655f88d114">llvm::LiveIntervals::InsertMachineInstrInMaps</a></div><div class="ttdeci">SlotIndex InsertMachineInstrInMaps(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervals_8h_source.html#l00260">LiveIntervals.h:260</a></div></div>
<div class="ttc" id="aclassllvm_1_1SUnit_html_a3f708b119627541f144d703a1d183202"><div class="ttname"><a href="classllvm_1_1SUnit.html#a3f708b119627541f144d703a1d183202">llvm::SUnit::NodeNum</a></div><div class="ttdeci">unsigned NodeNum</div><div class="ttdoc">Entry # of node in the node vector.</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00264">ScheduleDAG.h:264</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSubtarget_html_ab20982dc4ff887572a43754228a94fc0"><div class="ttname"><a href="classllvm_1_1GCNSubtarget.html#ab20982dc4ff887572a43754228a94fc0">llvm::GCNSubtarget::getOccupancyWithNumSGPRs</a></div><div class="ttdeci">unsigned getOccupancyWithNumSGPRs(unsigned SGPRs) const</div><div class="ttdoc">Return the maximum number of waves per SIMD for kernels using SGPRs SGPRs.</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUSubtarget_8cpp_source.html#l00625">AMDGPUSubtarget.cpp:625</a></div></div>
<div class="ttc" id="astructllvm_1_1LaneBitmask_html_a9082b6aa4021114645045d9c5628eb26"><div class="ttname"><a href="structllvm_1_1LaneBitmask.html#a9082b6aa4021114645045d9c5628eb26">llvm::LaneBitmask::getNone</a></div><div class="ttdeci">static constexpr LaneBitmask getNone()</div><div class="ttdef"><b>Definition:</b> <a href="LaneBitmask_8h_source.html#l00081">LaneBitmask.h:81</a></div></div>
<div class="ttc" id="aclassllvm_1_1GenericSchedulerBase_html_ae0da1bc94e326020069c0f44170a48d3a01ef8d8423fe645e50ad5a179b4f4483"><div class="ttname"><a href="classllvm_1_1GenericSchedulerBase.html#ae0da1bc94e326020069c0f44170a48d3a01ef8d8423fe645e50ad5a179b4f4483">llvm::GenericSchedulerBase::RegMax</a></div><div class="ttdeci">@ RegMax</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00847">MachineScheduler.h:847</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScheduleDAGInstrs_html_ab75cd37a7a0319d5a4c77189cca106ec"><div class="ttname"><a href="classllvm_1_1ScheduleDAGInstrs.html#ab75cd37a7a0319d5a4c77189cca106ec">llvm::ScheduleDAGInstrs::getSUnit</a></div><div class="ttdeci">SUnit * getSUnit(MachineInstr *MI) const</div><div class="ttdoc">Returns an existing SUnit for this MI, or nullptr.</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAGInstrs_8h_source.html#l00391">ScheduleDAGInstrs.h:391</a></div></div>
<div class="ttc" id="anamespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00141">StackSlotColoring.cpp:141</a></div></div>
<div class="ttc" id="aHexagonCopyToCombine_8cpp_html_a1d40004718218dbdf06b496766299101"><div class="ttname"><a href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a></div><div class="ttdeci">const HexagonInstrInfo * TII</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCopyToCombine_8cpp_source.html#l00125">HexagonCopyToCombine.cpp:125</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad9be86c95736bfa4bb0dc52322a0002a"><div class="ttname"><a href="namespacellvm.html#ad9be86c95736bfa4bb0dc52322a0002a">llvm::alignDown</a></div><div class="ttdeci">uint64_t alignDown(uint64_t Value, uint64_t Align, uint64_t Skew=0)</div><div class="ttdoc">Returns the largest uint64_t less than or equal to Value and is Skew mod Align.</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00533">MathExtras.h:533</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a7abf5fb4071cb25dbce06dfb5ee3c937"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a></div><div class="ttdeci">static GCRegistry::Add&lt; OcamlGC &gt; B(&quot;ocaml&quot;, &quot;ocaml 3.10-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html"><div class="ttname"><a href="classllvm_1_1MachineOperand.html">llvm::MachineOperand</a></div><div class="ttdoc">MachineOperand class - Representation of each machine instruction operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00048">MachineOperand.h:48</a></div></div>
<div class="ttc" id="astructllvm_1_1GenericSchedulerBase_1_1CandPolicy_html"><div class="ttname"><a href="structllvm_1_1GenericSchedulerBase_1_1CandPolicy.html">llvm::GenericSchedulerBase::CandPolicy</a></div><div class="ttdoc">Policy for scheduling the next instruction in the candidate's zone.</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00855">MachineScheduler.h:855</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScheduleDAGMI_html_a2002164aea6fabe20598e0526746b1fa"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#a2002164aea6fabe20598e0526746b1fa">llvm::ScheduleDAGMI::addMutation</a></div><div class="ttdeci">void addMutation(std::unique_ptr&lt; ScheduleDAGMutation &gt; Mutation)</div><div class="ttdoc">Add a postprocessing step to the DAG builder.</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00325">MachineScheduler.h:325</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStrategy_html_a508f8eece85480c2520ebf5d1f3ef945"><div class="ttname"><a href="classllvm_1_1GCNSchedStrategy.html#a508f8eece85480c2520ebf5d1f3ef945">llvm::GCNSchedStrategy::KnownExcessRP</a></div><div class="ttdeci">bool KnownExcessRP</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8h_source.html#l00080">GCNSchedStrategy.h:80</a></div></div>
<div class="ttc" id="aclassllvm_1_1UnclusteredHighRPStage_html_a6a4f926bc4da7d151b71ea78aa07f2e6"><div class="ttname"><a href="classllvm_1_1UnclusteredHighRPStage.html#a6a4f926bc4da7d151b71ea78aa07f2e6">llvm::UnclusteredHighRPStage::shouldRevertScheduling</a></div><div class="ttdeci">bool shouldRevertScheduling(unsigned WavesAfter) override</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l01093">GCNSchedStrategy.cpp:1093</a></div></div>
<div class="ttc" id="aclassllvm_1_1raw__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__ostream.html">llvm::raw_ostream</a></div><div class="ttdoc">This class implements an extremely fast bulk output stream that can only output to a stream.</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00052">raw_ostream.h:52</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_ad0b3d8447f88377b62d9c019f3c4e118"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#ad0b3d8447f88377b62d9c019f3c4e118">llvm::SmallVectorImpl::resize</a></div><div class="ttdeci">void resize(size_type N)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00642">SmallVector.h:642</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5ee0a415cf089775fd277550b257f74e"><div class="ttname"><a href="namespacellvm.html#a5ee0a415cf089775fd277550b257f74e">llvm::operator&lt;&lt;</a></div><div class="ttdeci">raw_ostream &amp; operator&lt;&lt;(raw_ostream &amp;OS, const APFixedPoint &amp;FX)</div><div class="ttdef"><b>Definition:</b> <a href="APFixedPoint_8h_source.html#l00292">APFixedPoint.h:292</a></div></div>
<div class="ttc" id="aclassllvm_1_1SlotIndexes_html"><div class="ttname"><a href="classllvm_1_1SlotIndexes.html">llvm::SlotIndexes</a></div><div class="ttdoc">SlotIndexes pass.</div><div class="ttdef"><b>Definition:</b> <a href="SlotIndexes_8h_source.html#l00319">SlotIndexes.h:319</a></div></div>
<div class="ttc" id="anamespacellvm_html_a66b412ba6b33cdefeb59dde7139dc8b0aa2def37e6bb76e915e4ae7cc4b47ae7a"><div class="ttname"><a href="namespacellvm.html#a66b412ba6b33cdefeb59dde7139dc8b0aa2def37e6bb76e915e4ae7cc4b47ae7a">llvm::GCNSchedStageID::PreRARematerialize</a></div><div class="ttdeci">@ PreRARematerialize</div></div>
<div class="ttc" id="aclassllvm_1_1ScheduleDAGMI_html_a19c5e2b675721f465bc85a5f58e7c084"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#a19c5e2b675721f465bc85a5f58e7c084">llvm::ScheduleDAGMI::startBlock</a></div><div class="ttdeci">void startBlock(MachineBasicBlock *bb) override</div><div class="ttdoc">Prepares to perform scheduling in the given block.</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l00729">MachineScheduler.cpp:729</a></div></div>
<div class="ttc" id="aGCNSchedStrategy_8cpp_html_a3b9f8729601d93f7ada55a93097dfcaf"><div class="ttname"><a href="GCNSchedStrategy_8cpp.html#a3b9f8729601d93f7ada55a93097dfcaf">DisableUnclusterHighRP</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; DisableUnclusterHighRP(&quot;amdgpu-disable-unclustred-high-rp-reschedule&quot;, cl::Hidden, cl::desc(&quot;Disable unclustred high register pressure &quot; &quot;reduction scheduling stage.&quot;), cl::init(false))</div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStage_html_abe70a14f7fe3a1883d731a8e399535b9"><div class="ttname"><a href="classllvm_1_1GCNSchedStage.html#abe70a14f7fe3a1883d731a8e399535b9">llvm::GCNSchedStage::finalizeGCNSchedStage</a></div><div class="ttdeci">virtual void finalizeGCNSchedStage()</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l00750">GCNSchedStrategy.cpp:750</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1IsaInfo_html_ae47a2723f63ec4e85b4228b56e5d759c"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1IsaInfo.html#ae47a2723f63ec4e85b4228b56e5d759c">llvm::AMDGPU::IsaInfo::getVGPRAllocGranule</a></div><div class="ttdeci">unsigned getVGPRAllocGranule(const MCSubtargetInfo *STI, std::optional&lt; bool &gt; EnableWavefrontSize32)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUBaseInfo_8cpp_source.html#l01026">AMDGPUBaseInfo.cpp:1026</a></div></div>
<div class="ttc" id="astructllvm_1_1RegPressureDelta_html_aff9c3b403c6d4af795dd8be1c9612240"><div class="ttname"><a href="structllvm_1_1RegPressureDelta.html#aff9c3b403c6d4af795dd8be1c9612240">llvm::RegPressureDelta::Excess</a></div><div class="ttdeci">PressureChange Excess</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8h_source.html#l00239">RegisterPressure.h:239</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScheduleDAGInstrs_html_a3f74b283acf0dfb537bc387e49344f04"><div class="ttname"><a href="classllvm_1_1ScheduleDAGInstrs.html#a3f74b283acf0dfb537bc387e49344f04">llvm::ScheduleDAGInstrs::RegionEnd</a></div><div class="ttdeci">MachineBasicBlock::iterator RegionEnd</div><div class="ttdoc">The end of the range to be scheduled.</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAGInstrs_8h_source.html#l00152">ScheduleDAGInstrs.h:152</a></div></div>
<div class="ttc" id="aclassllvm_1_1SIRegisterInfo_html"><div class="ttname"><a href="classllvm_1_1SIRegisterInfo.html">llvm::SIRegisterInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="SIRegisterInfo_8h_source.html#l00030">SIRegisterInfo.h:30</a></div></div>
<div class="ttc" id="astructEarlierIssuingCycle_html"><div class="ttname"><a href="structEarlierIssuingCycle.html">EarlierIssuingCycle</a></div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l00977">GCNSchedStrategy.cpp:977</a></div></div>
<div class="ttc" id="aclassllvm_1_1BitVector_html"><div class="ttname"><a href="classllvm_1_1BitVector.html">llvm::BitVector</a></div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00075">BitVector.h:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStrategy_html_a3d63ae4c61c0f0cce4bcff4a33587d31"><div class="ttname"><a href="classllvm_1_1GCNSchedStrategy.html#a3d63ae4c61c0f0cce4bcff4a33587d31">llvm::GCNSchedStrategy::MaxPressure</a></div><div class="ttdeci">std::vector&lt; unsigned &gt; MaxPressure</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8h_source.html#l00057">GCNSchedStrategy.h:57</a></div></div>
<div class="ttc" id="aclassllvm_1_1SlotIndex_html"><div class="ttname"><a href="classllvm_1_1SlotIndex.html">llvm::SlotIndex</a></div><div class="ttdoc">SlotIndex - An opaque wrapper around machine indexes.</div><div class="ttdef"><b>Definition:</b> <a href="SlotIndexes_8h_source.html#l00082">SlotIndexes.h:82</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSubtarget_html_a4f492fa16404497b8f15ea82c4b0a725"><div class="ttname"><a href="classllvm_1_1GCNSubtarget.html#a4f492fa16404497b8f15ea82c4b0a725">llvm::GCNSubtarget::getMaxNumVGPRs</a></div><div class="ttdeci">unsigned getMaxNumVGPRs(unsigned WavesPerEU) const</div><div class="ttdef"><b>Definition:</b> <a href="GCNSubtarget_8h_source.html#l01246">GCNSubtarget.h:1246</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStrategy_html_ab57c0b13438062a884d3e620300fbc03"><div class="ttname"><a href="classllvm_1_1GCNSchedStrategy.html#ab57c0b13438062a884d3e620300fbc03">llvm::GCNSchedStrategy::initialize</a></div><div class="ttdeci">void initialize(ScheduleDAGMI *DAG) override</div><div class="ttdoc">Initialize the strategy after building the DAG for a new region.</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l00054">GCNSchedStrategy.cpp:54</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStrategy_html_aff69df5b1b61c9a71b8b75855e303e35"><div class="ttname"><a href="classllvm_1_1GCNSchedStrategy.html#aff69df5b1b61c9a71b8b75855e303e35">llvm::GCNSchedStrategy::getNextStage</a></div><div class="ttdeci">GCNSchedStageID getNextStage() const</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l00364">GCNSchedStrategy.cpp:364</a></div></div>
<div class="ttc" id="astructllvm_1_1GenericSchedulerBase_1_1SchedCandidate_html_a310a170b7d2442d12634d53db262fb92"><div class="ttname"><a href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a310a170b7d2442d12634d53db262fb92">llvm::GenericSchedulerBase::SchedCandidate::SU</a></div><div class="ttdeci">SUnit * SU</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00897">MachineScheduler.h:897</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScheduleDAGMILive_html_abd3a9c68e31ad35d6468f200facdd0e3"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMILive.html#abd3a9c68e31ad35d6468f200facdd0e3">llvm::ScheduleDAGMILive::RPTracker</a></div><div class="ttdeci">RegPressureTracker RPTracker</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00418">MachineScheduler.h:418</a></div></div>
<div class="ttc" id="aclassllvm_1_1GenericScheduler_html_a67813956a4d16d9f7403ca4462c0d9ae"><div class="ttname"><a href="classllvm_1_1GenericScheduler.html#a67813956a4d16d9f7403ca4462c0d9ae">llvm::GenericScheduler::RegionPolicy</a></div><div class="ttdeci">MachineSchedPolicy RegionPolicy</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l01031">MachineScheduler.h:1031</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html">llvm::MachineBasicBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00094">MachineBasicBlock.h:94</a></div></div>
<div class="ttc" id="aclassllvm_1_1RegisterOperands_html_a74e0a918c9705f23a1e5b66f68cc97e9"><div class="ttname"><a href="classllvm_1_1RegisterOperands.html#a74e0a918c9705f23a1e5b66f68cc97e9">llvm::RegisterOperands::collect</a></div><div class="ttdeci">void collect(const MachineInstr &amp;MI, const TargetRegisterInfo &amp;TRI, const MachineRegisterInfo &amp;MRI, bool TrackLaneMasks, bool IgnoreDead)</div><div class="ttdoc">Analyze the given instruction MI and fill in the Uses, Defs and DeadDefs list based on the MachineOpe...</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00569">RegisterPressure.cpp:569</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStrategy_html_ad37490b68720625392a017b47f21b349"><div class="ttname"><a href="classllvm_1_1GCNSchedStrategy.html#ad37490b68720625392a017b47f21b349">llvm::GCNSchedStrategy::getTargetOccupancy</a></div><div class="ttdeci">unsigned getTargetOccupancy()</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8h_source.html#l00107">GCNSchedStrategy.h:107</a></div></div>
<div class="ttc" id="aclassllvm_1_1RegisterClassInfo_html_a564b41bec163c7661e29ee3a0773ca6a"><div class="ttname"><a href="classllvm_1_1RegisterClassInfo.html#a564b41bec163c7661e29ee3a0773ca6a">llvm::RegisterClassInfo::getNumAllocatableRegs</a></div><div class="ttdeci">unsigned getNumAllocatableRegs(const TargetRegisterClass *RC) const</div><div class="ttdoc">getNumAllocatableRegs - Returns the number of actually allocatable registers in RC in the current fun...</div><div class="ttdef"><b>Definition:</b> <a href="RegisterClassInfo_8h_source.html#l00094">RegisterClassInfo.h:94</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_aa363afffca4fc13a709673936b47fe33"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#aa363afffca4fc13a709673936b47fe33">llvm::MachineRegisterInfo::getRegClass</a></div><div class="ttdeci">const TargetRegisterClass * getRegClass(Register Reg) const</div><div class="ttdoc">Return the register class of the specified virtual register.</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00661">MachineRegisterInfo.h:661</a></div></div>
<div class="ttc" id="anamespacellvm_html_ae0fdc8ed1e4e4ae29b810aeffc13fb47"><div class="ttname"><a href="namespacellvm.html#ae0fdc8ed1e4e4ae29b810aeffc13fb47">llvm::tryLess</a></div><div class="ttdeci">bool tryLess(int TryVal, int CandVal, GenericSchedulerBase::SchedCandidate &amp;TryCand, GenericSchedulerBase::SchedCandidate &amp;Cand, GenericSchedulerBase::CandReason Reason)</div><div class="ttdoc">Return true if this heuristic determines order.</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l03012">MachineScheduler.cpp:3012</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a325f6b611ef9ec06798d3b4eb9572093"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">llvm::MachineFunction::getSubtarget</a></div><div class="ttdeci">const TargetSubtargetInfo &amp; getSubtarget() const</div><div class="ttdoc">getSubtarget - Return the subtarget for which this machine code is being compiled.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00672">MachineFunction.h:672</a></div></div>
<div class="ttc" id="aclassllvm_1_1RegPressureTracker_html_ab453d1aae79439afdded9083ba2137b5"><div class="ttname"><a href="classllvm_1_1RegPressureTracker.html#ab453d1aae79439afdded9083ba2137b5">llvm::RegPressureTracker::getRegSetPressureAtPos</a></div><div class="ttdeci">const std::vector&lt; unsigned &gt; &amp; getRegSetPressureAtPos() const</div><div class="ttdoc">Get the register set pressure at the current position, which may be less than the pressure across the...</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8h_source.html#l00463">RegisterPressure.h:463</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt&lt; bool &gt;</a></div></div>
<div class="ttc" id="astructllvm_1_1GenericSchedulerBase_1_1SchedCandidate_html"><div class="ttname"><a href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html">llvm::GenericSchedulerBase::SchedCandidate</a></div><div class="ttdoc">Store the state used by GenericScheduler heuristics, required for the lifetime of one invocation of p...</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00893">MachineScheduler.h:893</a></div></div>
<div class="ttc" id="aclassllvm_1_1GenericSchedulerBase_html_ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece"><div class="ttname"><a href="classllvm_1_1GenericSchedulerBase.html#ae0da1bc94e326020069c0f44170a48d3a810d389a7def234e94c2631683ab0ece">llvm::GenericSchedulerBase::NoCand</a></div><div class="ttdeci">@ NoCand</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00846">MachineScheduler.h:846</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStage_html_a875f89663ff968a4a76625dd0dd804eb"><div class="ttname"><a href="classllvm_1_1GCNSchedStage.html#a875f89663ff968a4a76625dd0dd804eb">llvm::GCNSchedStage::Unsched</a></div><div class="ttdeci">std::vector&lt; MachineInstr * &gt; Unsched</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8h_source.html#l00266">GCNSchedStrategy.h:266</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScheduleDAGMI_html_a9d67b1cafa36e90d7060d1da84907885"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#a9d67b1cafa36e90d7060d1da84907885">llvm::ScheduleDAGMI::LIS</a></div><div class="ttdeci">LiveIntervals * LIS</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00276">MachineScheduler.h:276</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStage_html_abf59722e7890dda4515a601ddf65ce1a"><div class="ttname"><a href="classllvm_1_1GCNSchedStage.html#abf59722e7890dda4515a601ddf65ce1a">llvm::GCNSchedStage::initGCNSchedStage</a></div><div class="ttdeci">virtual bool initGCNSchedStage()</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l00667">GCNSchedStrategy.cpp:667</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStage_html_ae61160f05c56687090740404f3ce0862"><div class="ttname"><a href="classllvm_1_1GCNSchedStage.html#ae61160f05c56687090740404f3ce0862">llvm::GCNSchedStage::setupNewBlock</a></div><div class="ttdeci">void setupNewBlock()</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l00859">GCNSchedStrategy.cpp:859</a></div></div>
<div class="ttc" id="aclassllvm_1_1SlotIndexes_html_aaf0c07cc1cdb9c78c6dfdfdd5913420a"><div class="ttname"><a href="classllvm_1_1SlotIndexes.html#aaf0c07cc1cdb9c78c6dfdfdd5913420a">llvm::SlotIndexes::getMBBStartIdx</a></div><div class="ttdeci">SlotIndex getMBBStartIdx(unsigned Num) const</div><div class="ttdoc">Returns the first index in the given basic block number.</div><div class="ttdef"><b>Definition:</b> <a href="SlotIndexes_8h_source.html#l00471">SlotIndexes.h:471</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetSchedModel_html"><div class="ttname"><a href="classllvm_1_1TargetSchedModel.html">llvm::TargetSchedModel</a></div><div class="ttdoc">Provide an instruction scheduling machine model to CodeGen passes.</div><div class="ttdef"><b>Definition:</b> <a href="TargetSchedule_8h_source.html#l00030">TargetSchedule.h:30</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html"><div class="ttname"><a href="classllvm_1_1MachineInstr.html">llvm::MachineInstr</a></div><div class="ttdoc">Representation of each machine instruction.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00066">MachineInstr.h:66</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStrategy_html_a930e9c13af62567b3802674269bd4f72"><div class="ttname"><a href="classllvm_1_1GCNSchedStrategy.html#a930e9c13af62567b3802674269bd4f72">llvm::GCNSchedStrategy::initCandidate</a></div><div class="ttdeci">void initCandidate(SchedCandidate &amp;Cand, SUnit *SU, bool AtTop, const RegPressureTracker &amp;RPTracker, const SIRegisterInfo *SRI, unsigned SGPRPressure, unsigned VGPRPressure)</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l00103">GCNSchedStrategy.cpp:103</a></div></div>
<div class="ttc" id="aclassllvm_1_1SIRegisterInfo_html_a929252209ec1fab87cd43439ed3365c7"><div class="ttname"><a href="classllvm_1_1SIRegisterInfo.html#a929252209ec1fab87cd43439ed3365c7">llvm::SIRegisterInfo::isVGPRClass</a></div><div class="ttdeci">static bool isVGPRClass(const TargetRegisterClass *RC)</div><div class="ttdef"><b>Definition:</b> <a href="SIRegisterInfo_8h_source.html#l00198">SIRegisterInfo.h:198</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a9bf617fd3367180fb96cebccfaae8dfa"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a></div><div class="ttdeci">static GCRegistry::Add&lt; StatepointGC &gt; D(&quot;statepoint-example&quot;, &quot;an example strategy for statepoint&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStrategy_html_af100c4ee35e4de0856b35b151479ec3d"><div class="ttname"><a href="classllvm_1_1GCNSchedStrategy.html#af100c4ee35e4de0856b35b151479ec3d">llvm::GCNSchedStrategy::VGPRLimitBias</a></div><div class="ttdeci">unsigned VGPRLimitBias</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8h_source.html#l00099">GCNSchedStrategy.h:99</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARM__MB_html_ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2"><div class="ttname"><a href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">llvm::ARM_MB::ST</a></div><div class="ttdeci">@ ST</div><div class="ttdef"><b>Definition:</b> <a href="MCTargetDesc_2ARMBaseInfo_8h_source.html#l00073">ARMBaseInfo.h:73</a></div></div>
<div class="ttc" id="aclassllvm_1_1RegPressureTracker_html_ac9e57447ee6550f3ffcb4a432bd3dbab"><div class="ttname"><a href="classllvm_1_1RegPressureTracker.html#ac9e57447ee6550f3ffcb4a432bd3dbab">llvm::RegPressureTracker::reset</a></div><div class="ttdeci">void reset()</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00243">RegisterPressure.cpp:243</a></div></div>
<div class="ttc" id="aclassllvm_1_1SIMachineFunctionInfo_html_a31ecea76a64e57b030ad7b2d1e7b226c"><div class="ttname"><a href="classllvm_1_1SIMachineFunctionInfo.html#a31ecea76a64e57b030ad7b2d1e7b226c">llvm::SIMachineFunctionInfo::getMaxWavesPerEU</a></div><div class="ttdeci">unsigned getMaxWavesPerEU() const</div><div class="ttdef"><b>Definition:</b> <a href="SIMachineFunctionInfo_8h_source.html#l01006">SIMachineFunctionInfo.h:1006</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStage_html_a662bfd2df36d8694de75d5bfc3efcf5a"><div class="ttname"><a href="classllvm_1_1GCNSchedStage.html#a662bfd2df36d8694de75d5bfc3efcf5a">llvm::GCNSchedStage::mayCauseSpilling</a></div><div class="ttdeci">bool mayCauseSpilling(unsigned WavesAfter)</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l01161">GCNSchedStrategy.cpp:1161</a></div></div>
<div class="ttc" id="aclassllvm_1_1GenericSchedulerBase_html_ad0f9f52bf2f7c54d9546cedd1c47ef45"><div class="ttname"><a href="classllvm_1_1GenericSchedulerBase.html#ad0f9f52bf2f7c54d9546cedd1c47ef45">llvm::GenericSchedulerBase::Context</a></div><div class="ttdeci">const MachineSchedContext * Context</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00940">MachineScheduler.h:940</a></div></div>
<div class="ttc" id="anamespacellvm_html_a62cf34ac18c5612524978166788b5c80"><div class="ttname"><a href="namespacellvm.html#a62cf34ac18c5612524978166788b5c80">llvm::tryPressure</a></div><div class="ttdeci">bool tryPressure(const PressureChange &amp;TryP, const PressureChange &amp;CandP, GenericSchedulerBase::SchedCandidate &amp;TryCand, GenericSchedulerBase::SchedCandidate &amp;Cand, GenericSchedulerBase::CandReason Reason, const TargetRegisterInfo *TRI, const MachineFunction &amp;MF)</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l03237">MachineScheduler.cpp:3237</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_ad3a99906764c35b2694ae90fa57744a5"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">move</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional move</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00546">README.txt:546</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00714">DenseMap.h:714</a></div></div>
<div class="ttc" id="aclassllvm_1_1SchedBoundary_html_a4a674627365b72b17a9b2e0a99d40ce1"><div class="ttname"><a href="classllvm_1_1SchedBoundary.html#a4a674627365b72b17a9b2e0a99d40ce1">llvm::SchedBoundary::getLatencyStallCycles</a></div><div class="ttdeci">unsigned getLatencyStallCycles(SUnit *SU)</div><div class="ttdoc">Get the difference between the given SUnit's ready time and the current cycle.</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l02239">MachineScheduler.cpp:2239</a></div></div>
<div class="ttc" id="astructllvm_1_1MachineSchedContext_html"><div class="ttname"><a href="structllvm_1_1MachineSchedContext.html">llvm::MachineSchedContext</a></div><div class="ttdoc">MachineSchedContext provides enough context from the MachineScheduler pass for the target to instanti...</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00127">MachineScheduler.h:127</a></div></div>
<div class="ttc" id="aclassllvm_1_1PressureChange_html_a4b74a0d0d1bc2e22fa7376eda3fdd85f"><div class="ttname"><a href="classllvm_1_1PressureChange.html#a4b74a0d0d1bc2e22fa7376eda3fdd85f">llvm::PressureChange::setUnitInc</a></div><div class="ttdeci">void setUnitInc(int Inc)</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8h_source.html#l00126">RegisterPressure.h:126</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1SUnit_html_a0727ce4ffb9b167e7ad283259d82b10c"><div class="ttname"><a href="classllvm_1_1SUnit.html#a0727ce4ffb9b167e7ad283259d82b10c">llvm::SUnit::getInstr</a></div><div class="ttdeci">MachineInstr * getInstr() const</div><div class="ttdoc">Returns the representative MachineInstr for this SUnit.</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00373">ScheduleDAG.h:373</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStage_html_a3d32369a2a741e4657a7f65cfc32dcdf"><div class="ttname"><a href="classllvm_1_1GCNSchedStage.html#a3d32369a2a741e4657a7f65cfc32dcdf">llvm::GCNSchedStage::revertScheduling</a></div><div class="ttdeci">void revertScheduling()</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l01172">GCNSchedStrategy.cpp:1172</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStage_html_a7b1949efaeff587aabe24ae6865f9e1e"><div class="ttname"><a href="classllvm_1_1GCNSchedStage.html#a7b1949efaeff587aabe24ae6865f9e1e">llvm::GCNSchedStage::DAG</a></div><div class="ttdeci">GCNScheduleDAGMILive &amp; DAG</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8h_source.html#l00247">GCNSchedStrategy.h:247</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStrategy_html"><div class="ttname"><a href="classllvm_1_1GCNSchedStrategy.html">llvm::GCNSchedStrategy</a></div><div class="ttdoc">This is a minimal scheduler strategy.</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8h_source.html#l00042">GCNSchedStrategy.h:42</a></div></div>
<div class="ttc" id="aclassllvm_1_1RegPressureTracker_html_a99487c5b550882cba98d817d47cc3fc0"><div class="ttname"><a href="classllvm_1_1RegPressureTracker.html#a99487c5b550882cba98d817d47cc3fc0">llvm::RegPressureTracker::advance</a></div><div class="ttdeci">void advance()</div><div class="ttdoc">Advance across the current instruction.</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00947">RegisterPressure.cpp:947</a></div></div>
<div class="ttc" id="aclassllvm_1_1SUnit_html_a8c201d7a769bda1cd75d8d6788123068"><div class="ttname"><a href="classllvm_1_1SUnit.html#a8c201d7a769bda1cd75d8d6788123068">llvm::SUnit::isScheduled</a></div><div class="ttdeci">bool isScheduled</div><div class="ttdoc">True once scheduled.</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00284">ScheduleDAG.h:284</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00445">CommandLine.h:445</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStage_html_a82cf0aa779669bf7afa305d3789618d1"><div class="ttname"><a href="classllvm_1_1GCNSchedStage.html#a82cf0aa779669bf7afa305d3789618d1">llvm::GCNSchedStage::StageID</a></div><div class="ttdeci">const GCNSchedStageID StageID</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8h_source.html#l00257">GCNSchedStrategy.h:257</a></div></div>
<div class="ttc" id="aGCNSchedStrategy_8cpp_html_a76923341fddafb3d1ed56aef0569ee68"><div class="ttname"><a href="GCNSchedStrategy_8cpp.html#a76923341fddafb3d1ed56aef0569ee68">printScheduleModel</a></div><div class="ttdeci">static void printScheduleModel(std::set&lt; std::pair&lt; MachineInstr *, unsigned &gt;, EarlierIssuingCycle &gt; &amp;ReadyCycles)</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l00984">GCNSchedStrategy.cpp:984</a></div></div>
<div class="ttc" id="aclassllvm_1_1SIMachineFunctionInfo_html_a87942cc9ab72e2069e1921e49ec90eb3"><div class="ttname"><a href="classllvm_1_1SIMachineFunctionInfo.html#a87942cc9ab72e2069e1921e49ec90eb3">llvm::SIMachineFunctionInfo::getMinWavesPerEU</a></div><div class="ttdeci">unsigned getMinWavesPerEU() const</div><div class="ttdef"><b>Definition:</b> <a href="SIMachineFunctionInfo_8h_source.html#l01001">SIMachineFunctionInfo.h:1001</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a3d142c9e7c066059e15232c56dec9e2e"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a3d142c9e7c066059e15232c56dec9e2e">llvm::MachineFunction::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">getName - Return the name of the corresponding LLVM function.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8cpp_source.html#l00582">MachineFunction.cpp:582</a></div></div>
<div class="ttc" id="astructllvm_1_1RegPressureDelta_html_a277da5755f2b30ebcebdba51d0de1acf"><div class="ttname"><a href="structllvm_1_1RegPressureDelta.html#a277da5755f2b30ebcebdba51d0de1acf">llvm::RegPressureDelta::CriticalMax</a></div><div class="ttdeci">PressureChange CriticalMax</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8h_source.html#l00240">RegisterPressure.h:240</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_abc6a478b8e8957fb476c3e553aecacc6"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#abc6a478b8e8957fb476c3e553aecacc6">llvm::MachineRegisterInfo::getOneDef</a></div><div class="ttdeci">MachineOperand * getOneDef(Register Reg) const</div><div class="ttdoc">Returns the defining operand if there is exactly one operand defining the specified register,...</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00472">MachineRegisterInfo.h:472</a></div></div>
<div class="ttc" id="aclassllvm_1_1ClusteredLowOccStage_html_a127448c080b34adaa6a570697e88ea41"><div class="ttname"><a href="classllvm_1_1ClusteredLowOccStage.html#a127448c080b34adaa6a570697e88ea41">llvm::ClusteredLowOccStage::shouldRevertScheduling</a></div><div class="ttdeci">bool shouldRevertScheduling(unsigned WavesAfter) override</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l01131">GCNSchedStrategy.cpp:1131</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="anamespacellvm_html_abfc9c7ecf70f66901e439f7c04ef3dbb"><div class="ttname"><a href="namespacellvm.html#abfc9c7ecf70f66901e439f7c04ef3dbb">llvm::move</a></div><div class="ttdeci">OutputIt move(R &amp;&amp;Range, OutputIt Out)</div><div class="ttdoc">Provide wrappers to std::move which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01862">STLExtras.h:1862</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStage_html_aa7ee003eb6297edeab5ac83fb99711a0"><div class="ttname"><a href="classllvm_1_1GCNSchedStage.html#aa7ee003eb6297edeab5ac83fb99711a0">llvm::GCNSchedStage::RegionIdx</a></div><div class="ttdeci">unsigned RegionIdx</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8h_source.html#l00263">GCNSchedStrategy.h:263</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a6321b189ea8fd5058663f8a87d6c23e9"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a6321b189ea8fd5058663f8a87d6c23e9">llvm::MachineBasicBlock::succ_begin</a></div><div class="ttdeci">succ_iterator succ_begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00373">MachineBasicBlock.h:373</a></div></div>
<div class="ttc" id="astructllvm_1_1GenericSchedulerBase_1_1SchedCandidate_html_ae861d440b366cf033d7f2764b2b34be0"><div class="ttname"><a href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#ae861d440b366cf033d7f2764b2b34be0">llvm::GenericSchedulerBase::SchedCandidate::Policy</a></div><div class="ttdeci">CandPolicy Policy</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00894">MachineScheduler.h:894</a></div></div>
<div class="ttc" id="astructllvm_1_1GenericSchedulerBase_1_1SchedResourceDelta_html_a3ffd08e01bba20c9af1ae13630ed7acd"><div class="ttname"><a href="structllvm_1_1GenericSchedulerBase_1_1SchedResourceDelta.html#a3ffd08e01bba20c9af1ae13630ed7acd">llvm::GenericSchedulerBase::SchedResourceDelta::CritResources</a></div><div class="ttdeci">unsigned CritResources</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00875">MachineScheduler.h:875</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSubtarget_html_a1fc0ea9be83e3d4cb2aeb2d7b2363e73"><div class="ttname"><a href="classllvm_1_1GCNSubtarget.html#a1fc0ea9be83e3d4cb2aeb2d7b2363e73">llvm::GCNSubtarget::hasGFX90AInsts</a></div><div class="ttdeci">bool hasGFX90AInsts() const</div><div class="ttdef"><b>Definition:</b> <a href="GCNSubtarget_8h_source.html#l01064">GCNSubtarget.h:1064</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSubtarget_html_aa19ea7d1223b3dbc9f1c432059f8e040"><div class="ttname"><a href="classllvm_1_1GCNSubtarget.html#aa19ea7d1223b3dbc9f1c432059f8e040">llvm::GCNSubtarget::getOccupancyWithNumVGPRs</a></div><div class="ttdeci">unsigned getOccupancyWithNumVGPRs(unsigned VGPRs) const</div><div class="ttdoc">Return the maximum number of waves per SIMD for kernels using VGPRs VGPRs.</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUSubtarget_8cpp_source.html#l00651">AMDGPUSubtarget.cpp:651</a></div></div>
<div class="ttc" id="aclassllvm_1_1GenericScheduler_html_a190c2995c11bd6de755bbd8311a8f176"><div class="ttname"><a href="classllvm_1_1GenericScheduler.html#a190c2995c11bd6de755bbd8311a8f176">llvm::GenericScheduler::BotCand</a></div><div class="ttdeci">SchedCandidate BotCand</div><div class="ttdoc">Candidate last picked from Bot boundary.</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l01040">MachineScheduler.h:1040</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_a92d46fa856af865f8c997f97596990ec"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a92d46fa856af865f8c997f97596990ec">llvm::MachineRegisterInfo::hasOneDef</a></div><div class="ttdeci">bool hasOneDef(Register RegNo) const</div><div class="ttdoc">Return true if there is exactly one operand defining the specified register.</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00466">MachineRegisterInfo.h:466</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScheduleDAGMI_html"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html">llvm::ScheduleDAGMI</a></div><div class="ttdoc">ScheduleDAGMI is an implementation of ScheduleDAGInstrs that simply schedules machine instructions ac...</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00273">MachineScheduler.h:273</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNPostScheduleDAGMILive_html_a2573535a1fb6914feb4615e6f6e1ef5d"><div class="ttname"><a href="classllvm_1_1GCNPostScheduleDAGMILive.html#a2573535a1fb6914feb4615e6f6e1ef5d">llvm::GCNPostScheduleDAGMILive::finalizeSchedule</a></div><div class="ttdeci">void finalizeSchedule() override</div><div class="ttdoc">Allow targets to perform final scheduling actions at the level of the whole MachineFunction.</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l01543">GCNSchedStrategy.cpp:1543</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStage_html_a02add63fe5ce109718dea7e87b1db3c1"><div class="ttname"><a href="classllvm_1_1GCNSchedStage.html#a02add63fe5ce109718dea7e87b1db3c1">llvm::GCNSchedStage::initGCNRegion</a></div><div class="ttdeci">virtual bool initGCNRegion()</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l00771">GCNSchedStrategy.cpp:771</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScheduleDAGMI_html_ac2dafe98c88d43b256622413886e2152"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#ac2dafe98c88d43b256622413886e2152">llvm::ScheduleDAGMI::placeDebugValues</a></div><div class="ttdeci">void placeDebugValues()</div><div class="ttdoc">Reinsert debug_values recorded in ScheduleDAGInstrs::DbgValues.</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l00928">MachineScheduler.cpp:928</a></div></div>
<div class="ttc" id="anamespacellvm_html_a66b412ba6b33cdefeb59dde7139dc8b0a6fc19a20667f6a2cc7adb83e3f67a487"><div class="ttname"><a href="namespacellvm.html#a66b412ba6b33cdefeb59dde7139dc8b0a6fc19a20667f6a2cc7adb83e3f67a487">llvm::GCNSchedStageID::ILPInitialSchedule</a></div><div class="ttdeci">@ ILPInitialSchedule</div></div>
<div class="ttc" id="aclassllvm_1_1SIMachineFunctionInfo_html_a09166d86fd4b0141f17b248f6fcdf0b6"><div class="ttname"><a href="classllvm_1_1SIMachineFunctionInfo.html#a09166d86fd4b0141f17b248f6fcdf0b6">llvm::SIMachineFunctionInfo::getOccupancy</a></div><div class="ttdeci">unsigned getOccupancy() const</div><div class="ttdef"><b>Definition:</b> <a href="SIMachineFunctionInfo_8h_source.html#l01031">SIMachineFunctionInfo.h:1031</a></div></div>
<div class="ttc" id="aclassllvm_1_1SlotIndex_html_ae3b98982e2036f3d26806de5ed5e02d0"><div class="ttname"><a href="classllvm_1_1SlotIndex.html#ae3b98982e2036f3d26806de5ed5e02d0">llvm::SlotIndex::getRegSlot</a></div><div class="ttdeci">SlotIndex getRegSlot(bool EC=false) const</div><div class="ttdoc">Returns the register use/def slot in the current instruction for a normal or early-clobber def.</div><div class="ttdef"><b>Definition:</b> <a href="SlotIndexes_8h_source.html#l00259">SlotIndexes.h:259</a></div></div>
<div class="ttc" id="aGCNSchedStrategy_8cpp_html_ab19b78e94c87be3c2e2b19bf037f451b"><div class="ttname"><a href="GCNSchedStrategy_8cpp.html#ab19b78e94c87be3c2e2b19bf037f451b">ScheduleMetricBias</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; ScheduleMetricBias(&quot;amdgpu-schedule-metric-bias&quot;, cl::Hidden, cl::desc(&quot;Sets the bias which adds weight to occupancy vs latency. Set it to &quot; &quot;100 to chase the occupancy only.&quot;), cl::init(10))</div></div>
<div class="ttc" id="aclassllvm_1_1GCNPostScheduleDAGMILive_html_ac1db9853e3ddfa9a2177147d8c03eacb"><div class="ttname"><a href="classllvm_1_1GCNPostScheduleDAGMILive.html#ac1db9853e3ddfa9a2177147d8c03eacb">llvm::GCNPostScheduleDAGMILive::GCNPostScheduleDAGMILive</a></div><div class="ttdeci">GCNPostScheduleDAGMILive(MachineSchedContext *C, std::unique_ptr&lt; MachineSchedStrategy &gt; S, bool RemoveKillFlags)</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l01527">GCNSchedStrategy.cpp:1527</a></div></div>
<div class="ttc" id="anamespacellvm_html_a67980a8ae101d2fda845eb750ffb1942"><div class="ttname"><a href="namespacellvm.html#a67980a8ae101d2fda845eb750ffb1942">llvm::print</a></div><div class="ttdeci">Printable print(const GCNRegPressure &amp;RP, const GCNSubtarget *ST=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="GCNRegPressure_8cpp_source.html#l00138">GCNRegPressure.cpp:138</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStage_html_af72ae40b5f2dbcbf6898d7420b1250c7"><div class="ttname"><a href="classllvm_1_1GCNSchedStage.html#af72ae40b5f2dbcbf6898d7420b1250c7">llvm::GCNSchedStage::CurrentMBB</a></div><div class="ttdeci">MachineBasicBlock * CurrentMBB</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8h_source.html#l00260">GCNSchedStrategy.h:260</a></div></div>
<div class="ttc" id="aclassllvm_1_1GenericScheduler_html_a3763f96e92009d4dc101837627fff3bd"><div class="ttname"><a href="classllvm_1_1GenericScheduler.html#a3763f96e92009d4dc101837627fff3bd">llvm::GenericScheduler::Bot</a></div><div class="ttdeci">SchedBoundary Bot</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l01035">MachineScheduler.h:1035</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScheduleDAGInstrs_html_a7c30ee6cdef3f4784c192654dcb9bab0"><div class="ttname"><a href="classllvm_1_1ScheduleDAGInstrs.html#a7c30ee6cdef3f4784c192654dcb9bab0">llvm::ScheduleDAGInstrs::finalizeSchedule</a></div><div class="ttdeci">virtual void finalizeSchedule()</div><div class="ttdoc">Allow targets to perform final scheduling actions at the level of the whole MachineFunction.</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAGInstrs_8h_source.html#l00339">ScheduleDAGInstrs.h:339</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5bacbbd03e9261f7b30dc174f26d680c"><div class="ttname"><a href="namespacellvm.html#a5bacbbd03e9261f7b30dc174f26d680c">llvm::skipDebugInstructionsForward</a></div><div class="ttdeci">IterT skipDebugInstructionsForward(IterT It, IterT End, bool SkipPseudoOp=true)</div><div class="ttdoc">Increment It until it points to a non-debug instruction or to End and return the resulting iterator.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l01299">MachineBasicBlock.h:1299</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScheduleDAG_html_a418bc6d3f660325fa6d5b9fb269add62"><div class="ttname"><a href="classllvm_1_1ScheduleDAG.html#a418bc6d3f660325fa6d5b9fb269add62">llvm::ScheduleDAG::TRI</a></div><div class="ttdeci">const TargetRegisterInfo * TRI</div><div class="ttdoc">Target processor register info.</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00558">ScheduleDAG.h:558</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_ae34c996b58df9b9ce6695a0c8b70c533"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ae34c996b58df9b9ce6695a0c8b70c533">llvm::MachineBasicBlock::iterator</a></div><div class="ttdeci">MachineInstrBundleIterator&lt; MachineInstr &gt; iterator</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00273">MachineBasicBlock.h:273</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef&lt; unsigned &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1UnclusteredHighRPStage_html_a439f8b8a746c9571e58e9aaaa6d60e2c"><div class="ttname"><a href="classllvm_1_1UnclusteredHighRPStage.html#a439f8b8a746c9571e58e9aaaa6d60e2c">llvm::UnclusteredHighRPStage::finalizeGCNSchedStage</a></div><div class="ttdeci">void finalizeGCNSchedStage() override</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l00755">GCNSchedStrategy.cpp:755</a></div></div>
<div class="ttc" id="aclassllvm_1_1GenericScheduler_html_a75edfd9bb13c765b11b0b400cbe2aaed"><div class="ttname"><a href="classllvm_1_1GenericScheduler.html#a75edfd9bb13c765b11b0b400cbe2aaed">llvm::GenericScheduler::DAG</a></div><div class="ttdeci">ScheduleDAGMILive * DAG</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l01029">MachineScheduler.h:1029</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNScheduleDAGMILive_html_a3c1701146006f98eaa57e38932060160"><div class="ttname"><a href="classllvm_1_1GCNScheduleDAGMILive.html#a3c1701146006f98eaa57e38932060160">llvm::GCNScheduleDAGMILive::schedule</a></div><div class="ttdeci">void schedule() override</div><div class="ttdoc">Implement ScheduleDAGInstrs interface for scheduling a sequence of reorderable instructions.</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l00494">GCNSchedStrategy.cpp:494</a></div></div>
<div class="ttc" id="anamespacellvm_html_a57f2ca0e57f4f7b13f56f9aa16af3e0d"><div class="ttname"><a href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">llvm::min</a></div><div class="ttdeci">Expected&lt; ExpressionValue &gt; min(const ExpressionValue &amp;Lhs, const ExpressionValue &amp;Rhs)</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8cpp_source.html#l00357">FileCheck.cpp:357</a></div></div>
<div class="ttc" id="aclassllvm_1_1SIRegisterInfo_html_a1dd11f1c73a15ab0fc73bacd1cdb64a6"><div class="ttname"><a href="classllvm_1_1SIRegisterInfo.html#a1dd11f1c73a15ab0fc73bacd1cdb64a6">llvm::SIRegisterInfo::getNumCoveredRegs</a></div><div class="ttdeci">static unsigned getNumCoveredRegs(LaneBitmask LM)</div><div class="ttdef"><b>Definition:</b> <a href="SIRegisterInfo_8h_source.html#l00358">SIRegisterInfo.h:358</a></div></div>
<div class="ttc" id="anamespacellvm_html_a61d13d6824ec46c31260a4fd0997eda0"><div class="ttname"><a href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">llvm::any_of</a></div><div class="ttdeci">bool any_of(R &amp;&amp;range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::any_of which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01742">STLExtras.h:1742</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStage_html_aaea2f970a2bbb337f3098d43c1fdfb8c"><div class="ttname"><a href="classllvm_1_1GCNSchedStage.html#aaea2f970a2bbb337f3098d43c1fdfb8c">llvm::GCNSchedStage::computeSUnitReadyCycle</a></div><div class="ttdeci">unsigned computeSUnitReadyCycle(const SUnit &amp;SU, unsigned CurrCycle, DenseMap&lt; unsigned, unsigned &gt; &amp;ReadyCycles, const TargetSchedModel &amp;SM)</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l00960">GCNSchedStrategy.cpp:960</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScheduleDAGMILive_html_a34481791fdd8f5d9131431cb0a1a0c01"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMILive.html#a34481791fdd8f5d9131431cb0a1a0c01">llvm::ScheduleDAGMILive::enterRegion</a></div><div class="ttdeci">void enterRegion(MachineBasicBlock *bb, MachineBasicBlock::iterator begin, MachineBasicBlock::iterator end, unsigned regioninstrs) override</div><div class="ttdoc">Implement the ScheduleDAGInstrs interface for handling the next scheduling region.</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l01155">MachineScheduler.cpp:1155</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStrategy_html_a1736ffcc1fcc46c9c47748d5a9a04c4b"><div class="ttname"><a href="classllvm_1_1GCNSchedStrategy.html#a1736ffcc1fcc46c9c47748d5a9a04c4b">llvm::GCNSchedStrategy::SchedStages</a></div><div class="ttdeci">SmallVector&lt; GCNSchedStageID, 4 &gt; SchedStages</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8h_source.html#l00068">GCNSchedStrategy.h:68</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreRARematStage_html_aef3c65c6f9af28a14119e3fcee53f17a"><div class="ttname"><a href="classllvm_1_1PreRARematStage.html#aef3c65c6f9af28a14119e3fcee53f17a">llvm::PreRARematStage::initGCNSchedStage</a></div><div class="ttdeci">bool initGCNSchedStage() override</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l00721">GCNSchedStrategy.cpp:721</a></div></div>
<div class="ttc" id="aclassllvm_1_1OccInitialScheduleStage_html_a6059a5bf340a6ed8e1c76e25bebf5485"><div class="ttname"><a href="classllvm_1_1OccInitialScheduleStage.html#a6059a5bf340a6ed8e1c76e25bebf5485">llvm::OccInitialScheduleStage::shouldRevertScheduling</a></div><div class="ttdeci">bool shouldRevertScheduling(unsigned WavesAfter) override</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l01080">GCNSchedStrategy.cpp:1080</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStage_html_a999c9b7a7e0362970a608dca15f4c5e0"><div class="ttname"><a href="classllvm_1_1GCNSchedStage.html#a999c9b7a7e0362970a608dca15f4c5e0">llvm::GCNSchedStage::finalizeGCNRegion</a></div><div class="ttdeci">void finalizeGCNRegion()</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l00871">GCNSchedStrategy.cpp:871</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_a01bf72631b0bc836a8c07fe840b13233"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a01bf72631b0bc836a8c07fe840b13233">llvm::MachineRegisterInfo::hasOneNonDBGUse</a></div><div class="ttdeci">bool hasOneNonDBGUse(Register RegNo) const</div><div class="ttdoc">hasOneNonDBGUse - Return true if there is exactly one non-Debug use of the specified register.</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00417">MachineRegisterInfo.cpp:417</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScheduleDAGMILive_html_a8742ed4740b887868143aa8a64b9f4ce"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMILive.html#a8742ed4740b887868143aa8a64b9f4ce">llvm::ScheduleDAGMILive::getBotRPTracker</a></div><div class="ttdeci">const RegPressureTracker &amp; getBotRPTracker() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00454">MachineScheduler.h:454</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScheduleDAG_html_a5a3d3d075a208011a24a0918b58d7daa"><div class="ttname"><a href="classllvm_1_1ScheduleDAG.html#a5a3d3d075a208011a24a0918b58d7daa">llvm::ScheduleDAG::MF</a></div><div class="ttdeci">MachineFunction &amp; MF</div><div class="ttdoc">Machine function.</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00559">ScheduleDAG.h:559</a></div></div>
<div class="ttc" id="aSupport_2ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdoc">Marks that the current location is not supposed to be reachable.</div><div class="ttdef"><b>Definition:</b> <a href="Support_2ErrorHandling_8h_source.html#l00143">ErrorHandling.h:143</a></div></div>
<div class="ttc" id="ainclude_2llvm_2Support_2CMakeLists_8txt_html_aef9367eb0b7430eaf70b1f2725488f2a"><div class="ttname"><a href="include_2llvm_2Support_2CMakeLists_8txt.html#aef9367eb0b7430eaf70b1f2725488f2a">if</a></div><div class="ttdeci">if(llvm_vc STREQUAL &quot;&quot;) set(fake_version_inc &quot;$</div><div class="ttdef"><b>Definition:</b> <a href="include_2llvm_2Support_2CMakeLists_8txt_source.html#l00014">CMakeLists.txt:14</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStrategy_html_a797dfd2abf170515d119ff35a4b5ffe7"><div class="ttname"><a href="classllvm_1_1GCNSchedStrategy.html#a797dfd2abf170515d119ff35a4b5ffe7">llvm::GCNSchedStrategy::advanceStage</a></div><div class="ttdeci">bool advanceStage()</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l00349">GCNSchedStrategy.cpp:349</a></div></div>
<div class="ttc" id="aclassllvm_1_1SIMachineFunctionInfo_html_adb6a722f44ce97ecb6dda56ba8d1ac4c"><div class="ttname"><a href="classllvm_1_1SIMachineFunctionInfo.html#adb6a722f44ce97ecb6dda56ba8d1ac4c">llvm::SIMachineFunctionInfo::limitOccupancy</a></div><div class="ttdeci">void limitOccupancy(const MachineFunction &amp;MF)</div><div class="ttdef"><b>Definition:</b> <a href="SIMachineFunctionInfo_8cpp_source.html#l00213">SIMachineFunctionInfo.cpp:213</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScheduleDAGMILive_html_a3dfceb23c208cc886dcd2a82dab9d5c2"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMILive.html#a3dfceb23c208cc886dcd2a82dab9d5c2">llvm::ScheduleDAGMILive::ShouldTrackLaneMasks</a></div><div class="ttdeci">bool ShouldTrackLaneMasks</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00416">MachineScheduler.h:416</a></div></div>
<div class="ttc" id="anamespacellvm_html_afb4b9423201406d79ba16481c90cb6cb"><div class="ttname"><a href="namespacellvm.html#afb4b9423201406d79ba16481c90cb6cb">llvm::biasPhysReg</a></div><div class="ttdeci">int biasPhysReg(const SUnit *SU, bool isTop)</div><div class="ttdoc">Minimize physical register live ranges.</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l03287">MachineScheduler.cpp:3287</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_a1b45f45820a60c09244a87eb59824aec"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a></div><div class="ttdeci">add sub stmia L5 ldr r0 bl L_printf $stub Instead of a and a wouldn t it be better to do three moves *Return an aggregate type is even return S</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00210">README.txt:210</a></div></div>
<div class="ttc" id="aclassllvm_1_1GenericSchedulerBase_html_a0fc28b204833d49b88dbeceb366b7439"><div class="ttname"><a href="classllvm_1_1GenericSchedulerBase.html#a0fc28b204833d49b88dbeceb366b7439">llvm::GenericSchedulerBase::traceCandidate</a></div><div class="ttdeci">void traceCandidate(const SchedCandidate &amp;Cand)</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l02955">MachineScheduler.cpp:2955</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStrategy_html_a1902cf3722582eecec1d87862513ba3b"><div class="ttname"><a href="classllvm_1_1GCNSchedStrategy.html#a1902cf3722582eecec1d87862513ba3b">llvm::GCNSchedStrategy::HasHighPressure</a></div><div class="ttdeci">bool HasHighPressure</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8h_source.html#l00076">GCNSchedStrategy.h:76</a></div></div>
<div class="ttc" id="astructllvm_1_1GenericSchedulerBase_1_1SchedCandidate_html_ab86856838bf1e1577210f03d35273ccb"><div class="ttname"><a href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#ab86856838bf1e1577210f03d35273ccb">llvm::GenericSchedulerBase::SchedCandidate::ResDelta</a></div><div class="ttdeci">SchedResourceDelta ResDelta</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00909">MachineScheduler.h:909</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_a002fd916e7206e01d512eeb06d405cf0"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a002fd916e7206e01d512eeb06d405cf0">llvm::MachineInstr::getParent</a></div><div class="ttdeci">const MachineBasicBlock * getParent() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00313">MachineInstr.h:313</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStage_html_aa4200885c657056ba7d712d516e7d4b6"><div class="ttname"><a href="classllvm_1_1GCNSchedStage.html#aa4200885c657056ba7d712d516e7d4b6">llvm::GCNSchedStage::checkScheduling</a></div><div class="ttdeci">void checkScheduling()</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l00889">GCNSchedStrategy.cpp:889</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNMaxOccupancySchedStrategy_html_a20d63f383bbf4b14e7e0e1ad30207ff3"><div class="ttname"><a href="classllvm_1_1GCNMaxOccupancySchedStrategy.html#a20d63f383bbf4b14e7e0e1ad30207ff3">llvm::GCNMaxOccupancySchedStrategy::GCNMaxOccupancySchedStrategy</a></div><div class="ttdeci">GCNMaxOccupancySchedStrategy(const MachineSchedContext *C)</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l00369">GCNSchedStrategy.cpp:369</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad7649adad973f341b72103836b310042"><div class="ttname"><a href="namespacellvm.html#ad7649adad973f341b72103836b310042">llvm::VerifyScheduling</a></div><div class="ttdeci">cl::opt&lt; bool &gt; VerifyScheduling</div></div>
<div class="ttc" id="aSampleProfWriter_8cpp_html_ac5f3689931c7238da06ba00cf1002c62"><div class="ttname"><a href="SampleProfWriter_8cpp.html#ac5f3689931c7238da06ba00cf1002c62">OS</a></div><div class="ttdeci">raw_pwrite_stream &amp; OS</div><div class="ttdef"><b>Definition:</b> <a href="SampleProfWriter_8cpp_source.html#l00053">SampleProfWriter.cpp:53</a></div></div>
<div class="ttc" id="aclassllvm_1_1SchedBoundary_html_a744d69baffaf2903667eb65cf07a6814"><div class="ttname"><a href="classllvm_1_1SchedBoundary.html#a744d69baffaf2903667eb65cf07a6814">llvm::SchedBoundary::pickOnlyChoice</a></div><div class="ttdeci">SUnit * pickOnlyChoice()</div><div class="ttdoc">Call this before applying any other heuristics to the Available queue.</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l02727">MachineScheduler.cpp:2727</a></div></div>
<div class="ttc" id="aclassllvm_1_1Register_html"><div class="ttname"><a href="classllvm_1_1Register.html">llvm::Register</a></div><div class="ttdoc">Wrapper class representing virtual and physical registers.</div><div class="ttdef"><b>Definition:</b> <a href="Register_8h_source.html#l00019">Register.h:19</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStrategy_html_abc922b5ccbfe87a7c54c8d07e122eea7"><div class="ttname"><a href="classllvm_1_1GCNSchedStrategy.html#abc922b5ccbfe87a7c54c8d07e122eea7">llvm::GCNSchedStrategy::HighRPVGPRBias</a></div><div class="ttdeci">const unsigned HighRPVGPRBias</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8h_source.html#l00091">GCNSchedStrategy.h:91</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStrategy_html_a2ed3b8acc5fc8c2f5c155620b5c32555"><div class="ttname"><a href="classllvm_1_1GCNSchedStrategy.html#a2ed3b8acc5fc8c2f5c155620b5c32555">llvm::GCNSchedStrategy::SGPRCriticalLimit</a></div><div class="ttdeci">unsigned SGPRCriticalLimit</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8h_source.html#l00093">GCNSchedStrategy.h:93</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_a5958512eae2979bd2eb383977996a600"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a></div><div class="ttdeci">MachineBasicBlock &amp; MBB</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00074">AArch64SLSHardening.cpp:74</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStage_html_a935e3a2cbb8d260bc1cc4dcf701db0ec"><div class="ttname"><a href="classllvm_1_1GCNSchedStage.html#a935e3a2cbb8d260bc1cc4dcf701db0ec">llvm::GCNSchedStage::PressureAfter</a></div><div class="ttdeci">GCNRegPressure PressureAfter</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8h_source.html#l00272">GCNSchedStrategy.h:272</a></div></div>
<div class="ttc" id="astructllvm_1_1GenericSchedulerBase_1_1SchedCandidate_html_a47cc8c89db10ac27483585cd61cf4f91"><div class="ttname"><a href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a47cc8c89db10ac27483585cd61cf4f91">llvm::GenericSchedulerBase::SchedCandidate::initResourceDelta</a></div><div class="ttdeci">void initResourceDelta(const ScheduleDAGMI *DAG, const TargetSchedModel *SchedModel)</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l02812">MachineScheduler.cpp:2812</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScheduleDAG_html_a3d5aacd5fc7d6a739ce913974ed1e53d"><div class="ttname"><a href="classllvm_1_1ScheduleDAG.html#a3d5aacd5fc7d6a739ce913974ed1e53d">llvm::ScheduleDAG::SUnits</a></div><div class="ttdeci">std::vector&lt; SUnit &gt; SUnits</div><div class="ttdoc">The scheduling units.</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00561">ScheduleDAG.h:561</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScheduleDAGInstrs_html_ae81ad8ece7681af658742f6d4e2fcfb1"><div class="ttname"><a href="classllvm_1_1ScheduleDAGInstrs.html#ae81ad8ece7681af658742f6d4e2fcfb1">llvm::ScheduleDAGInstrs::RegionBegin</a></div><div class="ttdeci">MachineBasicBlock::iterator RegionBegin</div><div class="ttdoc">The beginning of the range to be scheduled.</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAGInstrs_8h_source.html#l00149">ScheduleDAGInstrs.h:149</a></div></div>
<div class="ttc" id="anamespacestd_html"><div class="ttname"><a href="namespacestd.html">std</a></div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00851">BitVector.h:851</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a4b21394c138cc5ae719510bb529ee099"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">llvm::MachineFunction::getFunction</a></div><div class="ttdeci">Function &amp; getFunction()</div><div class="ttdoc">Return the LLVM function that this machine code represents.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00638">MachineFunction.h:638</a></div></div>
<div class="ttc" id="astructllvm_1_1MachineSchedPolicy_html_a0f609dd4ed94ea69ab680a7228f8786b"><div class="ttname"><a href="structllvm_1_1MachineSchedPolicy.html#a0f609dd4ed94ea69ab680a7228f8786b">llvm::MachineSchedPolicy::OnlyTopDown</a></div><div class="ttdeci">bool OnlyTopDown</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00190">MachineScheduler.h:190</a></div></div>
<div class="ttc" id="aclassllvm_1_1GenericSchedulerBase_html_ae0da1bc94e326020069c0f44170a48d3a01d264553167fb005aba23a6d2a6e9bb"><div class="ttname"><a href="classllvm_1_1GenericSchedulerBase.html#ae0da1bc94e326020069c0f44170a48d3a01d264553167fb005aba23a6d2a6e9bb">llvm::GenericSchedulerBase::RegExcess</a></div><div class="ttdeci">@ RegExcess</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00846">MachineScheduler.h:846</a></div></div>
<div class="ttc" id="astructllvm_1_1GCNRegPressure_html_a6b5acc4933b30383d7b31729281dacc3"><div class="ttname"><a href="structllvm_1_1GCNRegPressure.html#a6b5acc4933b30383d7b31729281dacc3">llvm::GCNRegPressure::getVGPRNum</a></div><div class="ttdeci">unsigned getVGPRNum(bool UnifiedVGPRFile) const</div><div class="ttdef"><b>Definition:</b> <a href="GCNRegPressure_8h_source.html#l00050">GCNRegPressure.h:50</a></div></div>
<div class="ttc" id="aclassllvm_1_1ReadyQueue_html_ac4384acfabedebaf6fd9a05d86109f47"><div class="ttname"><a href="classllvm_1_1ReadyQueue.html#ac4384acfabedebaf6fd9a05d86109f47">llvm::ReadyQueue::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00552">MachineScheduler.h:552</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStrategy_html_a54479ded7088e7b425de5d6c1f77fb7a"><div class="ttname"><a href="classllvm_1_1GCNSchedStrategy.html#a54479ded7088e7b425de5d6c1f77fb7a">llvm::GCNSchedStrategy::VGPRExcessLimit</a></div><div class="ttdeci">unsigned VGPRExcessLimit</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8h_source.html#l00061">GCNSchedStrategy.h:61</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1SendMsg_html_a8594419a4ddfad2c9a79279c490e466d"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">llvm::AMDGPU::SendMsg::Op</a></div><div class="ttdeci">Op</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00357">SIDefines.h:357</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a3435a2381e60e842e915f85c931b7dde"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a3435a2381e60e842e915f85c931b7dde">llvm::MachineBasicBlock::insert</a></div><div class="ttdeci">instr_iterator insert(instr_iterator I, MachineInstr *M)</div><div class="ttdoc">Insert MI into the instruction list before I, possibly inside a bundle.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l01336">MachineBasicBlock.cpp:1336</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScheduleDAGMI_html_a70e4bd877aac0a63c10463277c9a52c5"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#a70e4bd877aac0a63c10463277c9a52c5">llvm::ScheduleDAGMI::bottom</a></div><div class="ttdeci">MachineBasicBlock::iterator bottom() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00331">MachineScheduler.h:331</a></div></div>
<div class="ttc" id="astructllvm_1_1GenericSchedulerBase_1_1SchedCandidate_html_a87328c4ecbb87961dd2c970d343b9ca0"><div class="ttname"><a href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#a87328c4ecbb87961dd2c970d343b9ca0">llvm::GenericSchedulerBase::SchedCandidate::AtTop</a></div><div class="ttdeci">bool AtTop</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00903">MachineScheduler.h:903</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScheduleDAG_html_a348590624c488b04d0f9e227e6c3960e"><div class="ttname"><a href="classllvm_1_1ScheduleDAG.html#a348590624c488b04d0f9e227e6c3960e">llvm::ScheduleDAG::TII</a></div><div class="ttdeci">const TargetInstrInfo * TII</div><div class="ttdoc">Target instruction information.</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00557">ScheduleDAG.h:557</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStage_html_ad59ed5d84fb3a647d8572705f541e881"><div class="ttname"><a href="classllvm_1_1GCNSchedStage.html#ad59ed5d84fb3a647d8572705f541e881">llvm::GCNSchedStage::GCNSchedStage</a></div><div class="ttdeci">GCNSchedStage(GCNSchedStageID StageID, GCNScheduleDAGMILive &amp;DAG)</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l00663">GCNSchedStrategy.cpp:663</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStage_html_ac9371d95e0cd8d242a9a3fe319105b54"><div class="ttname"><a href="classllvm_1_1GCNSchedStage.html#ac9371d95e0cd8d242a9a3fe319105b54">llvm::GCNSchedStage::SavedMutations</a></div><div class="ttdeci">std::vector&lt; std::unique_ptr&lt; ScheduleDAGMutation &gt; &gt; SavedMutations</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8h_source.html#l00274">GCNSchedStrategy.h:274</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScheduleDAGMI_html_a87100b77d9d1f05bdbd1465e9146fb6d"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#a87100b77d9d1f05bdbd1465e9146fb6d">llvm::ScheduleDAGMI::getNextClusterPred</a></div><div class="ttdeci">const SUnit * getNextClusterPred() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00352">MachineScheduler.h:352</a></div></div>
<div class="ttc" id="aGCNSchedStrategy_8cpp_html_a9caea6f361f31119324b93999ad1028c"><div class="ttname"><a href="GCNSchedStrategy_8cpp.html#a9caea6f361f31119324b93999ad1028c">hasIGLPInstrs</a></div><div class="ttdeci">static bool hasIGLPInstrs(ScheduleDAGInstrs *DAG)</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l01519">GCNSchedStrategy.cpp:1519</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScheduleDAGMI_html_a9ca687b69b34efab1604af98db151cbf"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#a9ca687b69b34efab1604af98db151cbf">llvm::ScheduleDAGMI::finishBlock</a></div><div class="ttdeci">void finishBlock() override</div><div class="ttdoc">Cleans up after scheduling in the given block.</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l00734">MachineScheduler.cpp:734</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScheduleDAGMI_html_ae8a7d2f5a351f2a80d6bc781d32b1dae"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#ae8a7d2f5a351f2a80d6bc781d32b1dae">llvm::ScheduleDAGMI::getNextClusterSucc</a></div><div class="ttdeci">const SUnit * getNextClusterSucc() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00354">MachineScheduler.h:354</a></div></div>
<div class="ttc" id="aclassllvm_1_1ILPInitialScheduleStage_html_a0ba423ecf423204880b387df3fc52c91"><div class="ttname"><a href="classllvm_1_1ILPInitialScheduleStage.html#a0ba423ecf423204880b387df3fc52c91">llvm::ILPInitialScheduleStage::shouldRevertScheduling</a></div><div class="ttdeci">bool shouldRevertScheduling(unsigned WavesAfter) override</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l01154">GCNSchedStrategy.cpp:1154</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScheduleDAGMILive_html_a87daf83eb223263e4c8766d10aa911be"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMILive.html#a87daf83eb223263e4c8766d10aa911be">llvm::ScheduleDAGMILive::isTrackingPressure</a></div><div class="ttdeci">bool isTrackingPressure() const</div><div class="ttdoc">Return true if register pressure tracking is enabled.</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00446">MachineScheduler.h:446</a></div></div>
<div class="ttc" id="aclassllvm_1_1PressureChange_html"><div class="ttname"><a href="classllvm_1_1PressureChange.html">llvm::PressureChange</a></div><div class="ttdoc">Capture a change in pressure for a single pressure set.</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8h_source.html#l00102">RegisterPressure.h:102</a></div></div>
<div class="ttc" id="aclassllvm_1_1SchedBoundary_html"><div class="ttname"><a href="classllvm_1_1SchedBoundary.html">llvm::SchedBoundary</a></div><div class="ttdoc">Each Scheduling boundary is associated with ready queues.</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00614">MachineScheduler.h:614</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveIntervals_html"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html">llvm::LiveIntervals</a></div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervals_8h_source.html#l00053">LiveIntervals.h:53</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStrategy_html_a405838f7f99c2b64659702103f8bf43f"><div class="ttname"><a href="classllvm_1_1GCNSchedStrategy.html#a405838f7f99c2b64659702103f8bf43f">llvm::GCNSchedStrategy::hasNextStage</a></div><div class="ttdeci">bool hasNextStage() const</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l00359">GCNSchedStrategy.cpp:359</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStrategy_html_af3f3a45f145bc8538e160bc3177ffc8f"><div class="ttname"><a href="classllvm_1_1GCNSchedStrategy.html#af3f3a45f145bc8538e160bc3177ffc8f">llvm::GCNSchedStrategy::pickNode</a></div><div class="ttdeci">SUnit * pickNode(bool &amp;IsTopNode) override</div><div class="ttdoc">Pick the best node to balance the schedule. Implements MachineSchedStrategy.</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l00301">GCNSchedStrategy.cpp:301</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1IsaInfo_html_a842a99d2928e264423f0ac73b0910ec9"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1IsaInfo.html#a842a99d2928e264423f0ac73b0910ec9">llvm::AMDGPU::IsaInfo::getAddressableNumVGPRs</a></div><div class="ttdeci">unsigned getAddressableNumVGPRs(const MCSubtargetInfo *STI)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUBaseInfo_8cpp_source.html#l01067">AMDGPUBaseInfo.cpp:1067</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallSet_html_a1679469af9bb8ccfbe98441fb8228c79"><div class="ttname"><a href="classllvm_1_1SmallSet.html#a1679469af9bb8ccfbe98441fb8228c79">llvm::SmallSet::insert</a></div><div class="ttdeci">std::pair&lt; const_iterator, bool &gt; insert(const T &amp;V)</div><div class="ttdoc">insert - Insert an element into the set if it isn't already there.</div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00177">SmallSet.h:177</a></div></div>
<div class="ttc" id="astructllvm_1_1GenericSchedulerBase_1_1SchedResourceDelta_html"><div class="ttname"><a href="structllvm_1_1GenericSchedulerBase_1_1SchedResourceDelta.html">llvm::GenericSchedulerBase::SchedResourceDelta</a></div><div class="ttdoc">Status of an instruction's critical resource consumption.</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00873">MachineScheduler.h:873</a></div></div>
<div class="ttc" id="anamespacellvm_html_a66b412ba6b33cdefeb59dde7139dc8b0aff2914ea67320c4b23b0c3bf909a201c"><div class="ttname"><a href="namespacellvm.html#a66b412ba6b33cdefeb59dde7139dc8b0aff2914ea67320c4b23b0c3bf909a201c">llvm::GCNSchedStageID::ClusteredLowOccupancyReschedule</a></div><div class="ttdeci">@ ClusteredLowOccupancyReschedule</div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStrategy_html_a1ab6d6847aab23799f897da576a08cef"><div class="ttname"><a href="classllvm_1_1GCNSchedStrategy.html#a1ab6d6847aab23799f897da576a08cef">llvm::GCNSchedStrategy::pickNodeFromQueue</a></div><div class="ttdeci">void pickNodeFromQueue(SchedBoundary &amp;Zone, const CandPolicy &amp;ZonePolicy, const RegPressureTracker &amp;RPTracker, SchedCandidate &amp;Cand)</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l00191">GCNSchedStrategy.cpp:191</a></div></div>
<div class="ttc" id="aclassllvm_1_1BitVector_html_a5109693c2cdda2a4118e7d588b51bfa6"><div class="ttname"><a href="classllvm_1_1BitVector.html#a5109693c2cdda2a4118e7d588b51bfa6">llvm::BitVector::reset</a></div><div class="ttdeci">BitVector &amp; reset()</div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00385">BitVector.h:385</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStrategy_html_a07d3ce50a12f46f5923bc2496b05bfb6"><div class="ttname"><a href="classllvm_1_1GCNSchedStrategy.html#a07d3ce50a12f46f5923bc2496b05bfb6">llvm::GCNSchedStrategy::HighRPSGPRBias</a></div><div class="ttdeci">const unsigned HighRPSGPRBias</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8h_source.html#l00088">GCNSchedStrategy.h:88</a></div></div>
<div class="ttc" id="aclassllvm_1_1RegisterOperands_html_a8affa4b2a934ff08aa04e63253a00126"><div class="ttname"><a href="classllvm_1_1RegisterOperands.html#a8affa4b2a934ff08aa04e63253a00126">llvm::RegisterOperands::adjustLaneLiveness</a></div><div class="ttdeci">void adjustLaneLiveness(const LiveIntervals &amp;LIS, const MachineRegisterInfo &amp;MRI, SlotIndex Pos, MachineInstr *AddFlagsMI=nullptr)</div><div class="ttdoc">Use liveness information to find out which uses/defs are partially undefined/dead and adjust the Regi...</div><div class="ttdef"><b>Definition:</b> <a href="RegisterPressure_8cpp_source.html#l00600">RegisterPressure.cpp:600</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScheduleDAGInstrs_html_a254403f7804208ade3cb68086201cb7a"><div class="ttname"><a href="classllvm_1_1ScheduleDAGInstrs.html#a254403f7804208ade3cb68086201cb7a">llvm::ScheduleDAGInstrs::BB</a></div><div class="ttdeci">MachineBasicBlock * BB</div><div class="ttdoc">The block in which to insert instructions.</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAGInstrs_8h_source.html#l00146">ScheduleDAGInstrs.h:146</a></div></div>
<div class="ttc" id="aclassllvm_1_1GenericSchedulerBase_html_ae0da1bc94e326020069c0f44170a48d3a56637d3435d7e1953a615371cfe4d5ec"><div class="ttname"><a href="classllvm_1_1GenericSchedulerBase.html#ae0da1bc94e326020069c0f44170a48d3a56637d3435d7e1953a615371cfe4d5ec">llvm::GenericSchedulerBase::ResourceReduce</a></div><div class="ttdeci">@ ResourceReduce</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00847">MachineScheduler.h:847</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScheduleMetrics_html_ad737e526fab5f750adfdbdd427a014fb"><div class="ttname"><a href="classllvm_1_1ScheduleMetrics.html#ad737e526fab5f750adfdbdd427a014fb">llvm::ScheduleMetrics::ScaleFactor</a></div><div class="ttdeci">static const unsigned ScaleFactor</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8h_source.html#l00155">GCNSchedStrategy.h:155</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScheduleDAGMILive_html_a1583ce23a69e8a1b4af8065e2019c75f"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMILive.html#a1583ce23a69e8a1b4af8065e2019c75f">llvm::ScheduleDAGMILive::schedule</a></div><div class="ttdeci">void schedule() override</div><div class="ttdoc">Implement ScheduleDAGInstrs interface for scheduling a sequence of reorderable instructions.</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l01381">MachineScheduler.cpp:1381</a></div></div>
<div class="ttc" id="aclassllvm_1_1SchedBoundary_html_aa49fbb78ca6f0a19a967f2f8fb70097d"><div class="ttname"><a href="classllvm_1_1SchedBoundary.html#aa49fbb78ca6f0a19a967f2f8fb70097d">llvm::SchedBoundary::Available</a></div><div class="ttdeci">ReadyQueue Available</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00627">MachineScheduler.h:627</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_ab2d91e7bec944efcbc39d8e30644f111"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">llvm::MachineBasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00309">MachineBasicBlock.h:309</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveIntervals_html_a73f605751be73f0a910a586bb1b5d869"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html#a73f605751be73f0a910a586bb1b5d869">llvm::LiveIntervals::RemoveMachineInstrFromMaps</a></div><div class="ttdeci">void RemoveMachineInstrFromMaps(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervals_8h_source.html#l00270">LiveIntervals.h:270</a></div></div>
<div class="ttc" id="aAArch64ExpandPseudoInsts_8cpp_html_ad3ece0ac2421637044624c9b01c42466"><div class="ttname"><a href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a></div><div class="ttdeci">MachineInstrBuilder MachineInstrBuilder &amp; DefMI</div><div class="ttdef"><b>Definition:</b> <a href="AArch64ExpandPseudoInsts_8cpp_source.html#l00108">AArch64ExpandPseudoInsts.cpp:108</a></div></div>
<div class="ttc" id="aclassllvm_1_1SIMachineFunctionInfo_html"><div class="ttname"><a href="classllvm_1_1SIMachineFunctionInfo.html">llvm::SIMachineFunctionInfo</a></div><div class="ttdoc">This class keeps track of the SPI_SP_INPUT_ADDR config register, which tells the hardware which inter...</div><div class="ttdef"><b>Definition:</b> <a href="SIMachineFunctionInfo_8h_source.html#l00358">SIMachineFunctionInfo.h:358</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScheduleDAGMILive_html_ad811abbb60a7c33b42b51b3a1fd9d26b"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMILive.html#ad811abbb60a7c33b42b51b3a1fd9d26b">llvm::ScheduleDAGMILive::getTopRPTracker</a></div><div class="ttdeci">const RegPressureTracker &amp; getTopRPTracker() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00450">MachineScheduler.h:450</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStage_html_afce50f36ba47b66bbea271c232ac99e2"><div class="ttname"><a href="classllvm_1_1GCNSchedStage.html#afce50f36ba47b66bbea271c232ac99e2">llvm::GCNSchedStage::ST</a></div><div class="ttdeci">const GCNSubtarget &amp; ST</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8h_source.html#l00255">GCNSchedStrategy.h:255</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScheduleDAGMI_html_a5bcc40c244c6a33d738b3e4f1d490ca3"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#a5bcc40c244c6a33d738b3e4f1d490ca3">llvm::ScheduleDAGMI::top</a></div><div class="ttdeci">MachineBasicBlock::iterator top() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00330">MachineScheduler.h:330</a></div></div>
<div class="ttc" id="astructEarlierIssuingCycle_html_af8999f5b0afdef371312c753bc47815d"><div class="ttname"><a href="structEarlierIssuingCycle.html#af8999f5b0afdef371312c753bc47815d">EarlierIssuingCycle::operator()</a></div><div class="ttdeci">bool operator()(std::pair&lt; MachineInstr *, unsigned &gt; A, std::pair&lt; MachineInstr *, unsigned &gt; B) const</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l00978">GCNSchedStrategy.cpp:978</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScheduleDAGMI_html_a5d7e71cf32573e6b1762b5a1d82a1cf5"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMI.html#a5d7e71cf32573e6b1762b5a1d82a1cf5">llvm::ScheduleDAGMI::schedule</a></div><div class="ttdeci">void schedule() override</div><div class="ttdoc">Implement ScheduleDAGInstrs interface for scheduling a sequence of reorderable instructions.</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l00788">MachineScheduler.cpp:788</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdoc">This class consists of common code factored out of the SmallVector class to reduce code duplication b...</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00042">APFloat.h:42</a></div></div>
<div class="ttc" id="aclassllvm_1_1SUnit_html_ae2b43854b542de66eec6475adc48f56c"><div class="ttname"><a href="classllvm_1_1SUnit.html#ae2b43854b542de66eec6475adc48f56c">llvm::SUnit::Preds</a></div><div class="ttdeci">SmallVector&lt; SDep, 4 &gt; Preds</div><div class="ttdoc">All sunit predecessors.</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00256">ScheduleDAG.h:256</a></div></div>
<div class="ttc" id="aclassllvm_1_1SUnit_html"><div class="ttname"><a href="classllvm_1_1SUnit.html">llvm::SUnit</a></div><div class="ttdoc">Scheduling unit. This is a node in the scheduling DAG.</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAG_8h_source.html#l00242">ScheduleDAG.h:242</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStrategy_html_a14f3300bee7a18474eb2f103afa3ea22"><div class="ttname"><a href="classllvm_1_1GCNSchedStrategy.html#a14f3300bee7a18474eb2f103afa3ea22">llvm::GCNSchedStrategy::GCNSchedStrategy</a></div><div class="ttdeci">GCNSchedStrategy(const MachineSchedContext *C)</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l00050">GCNSchedStrategy.cpp:50</a></div></div>
<div class="ttc" id="anamespacellvm_html_a13933f8ac2f5e1a34cf53b2c1e1bdc5b"><div class="ttname"><a href="namespacellvm.html#a13933f8ac2f5e1a34cf53b2c1e1bdc5b">llvm::getWeakLeft</a></div><div class="ttdeci">unsigned getWeakLeft(const SUnit *SU, bool isTop)</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l03276">MachineScheduler.cpp:3276</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStrategy_html_ab169c359dc2328b0a4e93f5f95b82fc0"><div class="ttname"><a href="classllvm_1_1GCNSchedStrategy.html#ab169c359dc2328b0a4e93f5f95b82fc0">llvm::GCNSchedStrategy::Pressure</a></div><div class="ttdeci">std::vector&lt; unsigned &gt; Pressure</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8h_source.html#l00055">GCNSchedStrategy.h:55</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveIntervals_html_a11cd70de340f310acc70781d57a00136"><div class="ttname"><a href="classllvm_1_1LiveIntervals.html#a11cd70de340f310acc70781d57a00136">llvm::LiveIntervals::hasInterval</a></div><div class="ttdeci">bool hasInterval(Register Reg) const</div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervals_8h_source.html#l00123">LiveIntervals.h:123</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStrategy_html_a87648a3c33abb5fb8ff110b760424ecc"><div class="ttname"><a href="classllvm_1_1GCNSchedStrategy.html#a87648a3c33abb5fb8ff110b760424ecc">llvm::GCNSchedStrategy::VGPRCriticalLimit</a></div><div class="ttdeci">unsigned VGPRCriticalLimit</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8h_source.html#l00095">GCNSchedStrategy.h:95</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStrategy_html_a5303450aec4d4b8fe49b3af743da555a"><div class="ttname"><a href="classllvm_1_1GCNSchedStrategy.html#a5303450aec4d4b8fe49b3af743da555a">llvm::GCNSchedStrategy::getCurrentStage</a></div><div class="ttdeci">GCNSchedStageID getCurrentStage()</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l00344">GCNSchedStrategy.cpp:344</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00411">CommandLine.h:411</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScheduleDAGMILive_html"><div class="ttname"><a href="classllvm_1_1ScheduleDAGMILive.html">llvm::ScheduleDAGMILive</a></div><div class="ttdoc">ScheduleDAGMILive is an implementation of ScheduleDAGInstrs that schedules machine instructions while...</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00395">MachineScheduler.h:395</a></div></div>
<div class="ttc" id="aclassllvm_1_1Region_html"><div class="ttname"><a href="classllvm_1_1Region.html">llvm::Region</a></div><div class="ttdef"><b>Definition:</b> <a href="RegionInfo_8h_source.html#l00889">RegionInfo.h:889</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScheduleDAGInstrs_html"><div class="ttname"><a href="classllvm_1_1ScheduleDAGInstrs.html">llvm::ScheduleDAGInstrs</a></div><div class="ttdoc">A ScheduleDAG for scheduling lists of MachineInstr.</div><div class="ttdef"><b>Definition:</b> <a href="ScheduleDAGInstrs_8h_source.html#l00120">ScheduleDAGInstrs.h:120</a></div></div>
<div class="ttc" id="aclassllvm_1_1ReadyQueue_html"><div class="ttname"><a href="classllvm_1_1ReadyQueue.html">llvm::ReadyQueue</a></div><div class="ttdoc">Helpers for implementing custom MachineSchedStrategy classes.</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00537">MachineScheduler.h:537</a></div></div>
<div class="ttc" id="aclassllvm_1_1GenericScheduler_html"><div class="ttname"><a href="classllvm_1_1GenericScheduler.html">llvm::GenericScheduler</a></div><div class="ttdoc">GenericScheduler shrinks the unscheduled zone using heuristics to balance the schedule.</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00984">MachineScheduler.h:984</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_ac2421adbb9996e1b15f03a8abb6c70a8"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#ac2421adbb9996e1b15f03a8abb6c70a8">llvm::MachineInstr::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdoc">Unlink 'this' from the containing basic block and delete it.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8cpp_source.html#l00705">MachineInstr.cpp:705</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBundleIterator_html"><div class="ttname"><a href="classllvm_1_1MachineInstrBundleIterator.html">llvm::MachineInstrBundleIterator&lt; MachineInstr &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1ScheduleMetrics_html"><div class="ttname"><a href="classllvm_1_1ScheduleMetrics.html">llvm::ScheduleMetrics</a></div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8h_source.html#l00139">GCNSchedStrategy.h:139</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNPostScheduleDAGMILive_html_ab0fcaad7b05dc36681c5abeabca7991c"><div class="ttname"><a href="classllvm_1_1GCNPostScheduleDAGMILive.html#ab0fcaad7b05dc36681c5abeabca7991c">llvm::GCNPostScheduleDAGMILive::schedule</a></div><div class="ttdeci">void schedule() override</div><div class="ttdoc">Implement ScheduleDAGInstrs interface for scheduling a sequence of reorderable instructions.</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l01532">GCNSchedStrategy.cpp:1532</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSubtarget_html_a22e6e95a4f532492fa0ec707993ecab9"><div class="ttname"><a href="classllvm_1_1GCNSubtarget.html#a22e6e95a4f532492fa0ec707993ecab9">llvm::GCNSubtarget::computeOccupancy</a></div><div class="ttdeci">unsigned computeOccupancy(const Function &amp;F, unsigned LDSSize=0, unsigned NumSGPRs=0, unsigned NumVGPRs=0) const</div><div class="ttdoc">Return occupancy for the given function.</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUSubtarget_8cpp_source.html#l00685">AMDGPUSubtarget.cpp:685</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStage_html_a30bb50e213057f1830b72558972019fa"><div class="ttname"><a href="classllvm_1_1GCNSchedStage.html#a30bb50e213057f1830b72558972019fa">llvm::GCNSchedStage::PressureBefore</a></div><div class="ttdeci">GCNRegPressure PressureBefore</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8h_source.html#l00269">GCNSchedStrategy.h:269</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_aedf6cb1135961f41f39dc58ca8576123"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#aedf6cb1135961f41f39dc58ca8576123">llvm::MachineBasicBlock::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">Return the name of the corresponding LLVM basic block, or an empty string.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00316">MachineBasicBlock.cpp:316</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_acbc921830578e2741be6549db716c0ce"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">llvm::MachineBasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00311">MachineBasicBlock.h:311</a></div></div>
<div class="ttc" id="aclassllvm_1_1SchedBoundary_html_ae28da0579ee268c38eb2a5ababa222fa"><div class="ttname"><a href="classllvm_1_1SchedBoundary.html#ae28da0579ee268c38eb2a5ababa222fa">llvm::SchedBoundary::removeReady</a></div><div class="ttdeci">void removeReady(SUnit *SU)</div><div class="ttdoc">Remove SU from the ready set for this boundary.</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8cpp_source.html#l02715">MachineScheduler.cpp:2715</a></div></div>
<div class="ttc" id="anamespacellvm_html_a71fc5e23072a3c0807e8379f61235248"><div class="ttname"><a href="namespacellvm.html#a71fc5e23072a3c0807e8379f61235248">llvm::createIGroupLPDAGMutation</a></div><div class="ttdeci">std::unique_ptr&lt; ScheduleDAGMutation &gt; createIGroupLPDAGMutation()</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUIGroupLP_8cpp_source.html#l01125">AMDGPUIGroupLP.cpp:1125</a></div></div>
<div class="ttc" id="astructllvm_1_1GCNRegPressure_html_ab822633324180bbee7b05a0d2518c563"><div class="ttname"><a href="structllvm_1_1GCNRegPressure.html#ab822633324180bbee7b05a0d2518c563">llvm::GCNRegPressure::getAGPRNum</a></div><div class="ttdeci">unsigned getAGPRNum() const</div><div class="ttdef"><b>Definition:</b> <a href="GCNRegPressure_8h_source.html#l00057">GCNRegPressure.h:57</a></div></div>
<div class="ttc" id="astructllvm_1_1GenericSchedulerBase_1_1SchedCandidate_html_acdc733638a93dca6bb0eb290ec896271"><div class="ttname"><a href="structllvm_1_1GenericSchedulerBase_1_1SchedCandidate.html#acdc733638a93dca6bb0eb290ec896271">llvm::GenericSchedulerBase::SchedCandidate::isValid</a></div><div class="ttdeci">bool isValid() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00923">MachineScheduler.h:923</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNScheduleDAGMILive_html_a586d595322e6cb11cc1663b937d9aca7"><div class="ttname"><a href="classllvm_1_1GCNScheduleDAGMILive.html#a586d595322e6cb11cc1663b937d9aca7">llvm::GCNScheduleDAGMILive::GCNScheduleDAGMILive</a></div><div class="ttdeci">GCNScheduleDAGMILive(MachineSchedContext *C, std::unique_ptr&lt; MachineSchedStrategy &gt; S)</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l00467">GCNSchedStrategy.cpp:467</a></div></div>
<div class="ttc" id="aclassllvm_1_1GenericSchedulerBase_html_ae0da1bc94e326020069c0f44170a48d3ab58c08e8fa9324ebf332e11601ec6c0d"><div class="ttname"><a href="classllvm_1_1GenericSchedulerBase.html#ae0da1bc94e326020069c0f44170a48d3ab58c08e8fa9324ebf332e11601ec6c0d">llvm::GenericSchedulerBase::PhysReg</a></div><div class="ttdeci">@ PhysReg</div><div class="ttdef"><b>Definition:</b> <a href="MachineScheduler_8h_source.html#l00846">MachineScheduler.h:846</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStage_html_a5344e12321c46ea1f7e78aaaed43f984"><div class="ttname"><a href="classllvm_1_1GCNSchedStage.html#a5344e12321c46ea1f7e78aaaed43f984">llvm::GCNSchedStage::isRegionWithExcessRP</a></div><div class="ttdeci">bool isRegionWithExcessRP() const</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8h_source.html#l00310">GCNSchedStrategy.h:310</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSchedStage_html_ac390d9a2fce4a940cbf643a47f699cd7"><div class="ttname"><a href="classllvm_1_1GCNSchedStage.html#ac390d9a2fce4a940cbf643a47f699cd7">llvm::GCNSchedStage::shouldRevertScheduling</a></div><div class="ttdeci">virtual bool shouldRevertScheduling(unsigned WavesAfter)</div><div class="ttdef"><b>Definition:</b> <a href="GCNSchedStrategy_8cpp_source.html#l01073">GCNSchedStrategy.cpp:1073</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:09:45 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Target/AMDGPU/AMDGPULegalizerInfo.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">17.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_794e483eb1cc7921d35fd149d9cc325b.html">Target</a></li><li class="navelem"><a class="el" href="dir_447ce995d6e35417de5ec3060e97c93e.html">AMDGPU</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">AMDGPULegalizerInfo.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="AMDGPULegalizerInfo_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- AMDGPULegalizerInfo.cpp -----------------------------------*- C++ -*-==//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span><span class="comment"></span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">/// \file</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">/// This file implements the targeting of the Machinelegalizer class for</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">/// AMDGPU.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">/// \todo This should be generated by TableGen.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"></span><span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160; </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AMDGPULegalizerInfo_8h.html">AMDGPULegalizerInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160; </div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AMDGPU_8h.html">AMDGPU.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AMDGPUGlobalISelUtils_8h.html">AMDGPUGlobalISelUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AMDGPUInstrInfo_8h.html">AMDGPUInstrInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AMDGPUTargetMachine_8h.html">AMDGPUTargetMachine.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SIMachineFunctionInfo_8h.html">SIMachineFunctionInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AMDGPUBaseInfo_8h.html">Utils/AMDGPUBaseInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ScopeExit_8h.html">llvm/ADT/ScopeExit.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BinaryFormat_2ELF_8h.html">llvm/BinaryFormat/ELF.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LegalizerHelper_8h.html">llvm/CodeGen/GlobalISel/LegalizerHelper.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MIPatternMatch_8h.html">llvm/CodeGen/GlobalISel/MIPatternMatch.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineIRBuilder_8h.html">llvm/CodeGen/GlobalISel/MachineIRBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DiagnosticInfo_8h.html">llvm/IR/DiagnosticInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;llvm/IR/IntrinsicsAMDGPU.h&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;llvm/IR/IntrinsicsR600.h&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160; </div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   31</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;amdgpu-legalinfo&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160; </div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="keyword">using namespace </span>LegalizeActions;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="keyword">using namespace </span>LegalizeMutations;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="keyword">using namespace </span>LegalityPredicates;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="keyword">using namespace </span>MIPatternMatch;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160; </div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">// Hack until load/store selection patterns support any tuple of legal types.</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a09eff726b407c3dfd6363c47c26856fd">EnableNewLegality</a>(</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <span class="stringliteral">&quot;amdgpu-global-isel-new-legality&quot;</span>,</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Use GlobalISel desired legality, rather than try to use&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;           <span class="stringliteral">&quot;rules compatible with selection patterns&quot;</span>),</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>),</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40ab81f279502bb9ca74e6629cfb62844be">cl::ReallyHidden</a>);</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#aabec8e9bc89e3e905a71769f8be922c1">   47</a></span>&#160;<span class="keyword">static</span> constexpr <span class="keywordtype">unsigned</span> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#aabec8e9bc89e3e905a71769f8be922c1">MaxRegisterSize</a> = 1024;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160; </div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">// Round the number of elements to the next power of two elements</span></div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#ae6dc00935578ac3d7b43326b5f02b2bc">   50</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#ae6dc00935578ac3d7b43326b5f02b2bc">getPow2VectorType</a>(<a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty) {</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="keywordtype">unsigned</span> NElts = Ty.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>();</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="keywordtype">unsigned</span> Pow2NElts = 1 &lt;&lt;  <a class="code" href="namespacellvm.html#a058782b98991f0719657d9008d3df41b">Log2_32_Ceil</a>(NElts);</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="keywordflow">return</span> Ty.<a class="code" href="classllvm_1_1LLT.html#adabd45e67a1847750a117317b5ef8f9f">changeElementCount</a>(<a class="code" href="classllvm_1_1ElementCount.html#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(Pow2NElts));</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;}</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">// Round the number of bits to the next power of two bits</span></div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#ae9bc1717e31ed947b2eae89a230c744b">   57</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#ae9bc1717e31ed947b2eae89a230c744b">getPow2ScalarType</a>(<a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty) {</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a3c0710aa6b054662f67b480712fa2b95">Bits</a> = Ty.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <span class="keywordtype">unsigned</span> Pow2Bits = 1 &lt;&lt;  <a class="code" href="namespacellvm.html#a058782b98991f0719657d9008d3df41b">Log2_32_Ceil</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a3c0710aa6b054662f67b480712fa2b95">Bits</a>);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(Pow2Bits);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;}</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">/// \returns true if this is an odd sized vector which should widen by adding an</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">/// additional element. This is mostly to handle &lt;3 x s16&gt; -&gt; &lt;4 x s16&gt;. This</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">/// excludes s1 vectors, which should always be scalarized.</span></div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#a0dbe048033c8b5adaf283b8fe7de3ba1">   66</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="namespacellvm.html#afee35431ecf461b5ea8e58d3f05e1ba1">LegalityPredicate</a> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a0dbe048033c8b5adaf283b8fe7de3ba1">isSmallOddVector</a>(<span class="keywordtype">unsigned</span> TypeIdx) {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="keywordflow">return</span> [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = Query.Types[TypeIdx];</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keywordflow">if</span> (!Ty.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>())</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160; </div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> EltTy = Ty.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>();</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> EltSize = EltTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keywordflow">return</span> Ty.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>() % 2 != 0 &amp;&amp;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;           EltSize &gt; 1 &amp;&amp; EltSize &lt; 32 &amp;&amp;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;           Ty.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() % 32 != 0;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  };</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;}</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#afa3cedfbe23049312e516145f0e46cbb">   80</a></span>&#160;<span class="keyword">static</span> <a class="code" href="namespacellvm.html#afee35431ecf461b5ea8e58d3f05e1ba1">LegalityPredicate</a> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#afa3cedfbe23049312e516145f0e46cbb">sizeIsMultipleOf32</a>(<span class="keywordtype">unsigned</span> TypeIdx) {</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="keywordflow">return</span> [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = Query.Types[TypeIdx];</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordflow">return</span> Ty.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() % 32 == 0;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  };</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;}</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#a3d552c29a563f3462800870d14e72b0f">   87</a></span>&#160;<span class="keyword">static</span> <a class="code" href="namespacellvm.html#afee35431ecf461b5ea8e58d3f05e1ba1">LegalityPredicate</a> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a3d552c29a563f3462800870d14e72b0f">isWideVec16</a>(<span class="keywordtype">unsigned</span> TypeIdx) {</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="keywordflow">return</span> [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = Query.Types[TypeIdx];</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> EltTy = Ty.<a class="code" href="classllvm_1_1LLT.html#ae4165ca7bcbee300d5e9c065adcc1415">getScalarType</a>();</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordflow">return</span> EltTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() == 16 &amp;&amp; Ty.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>() &gt; 2;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  };</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;}</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160; </div>
<div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#a0e3fd79bb281f248eefd08814023d8c8">   95</a></span>&#160;<span class="keyword">static</span> <a class="code" href="namespacellvm.html#a7c33e33f2b308b4ea58e1a65dcd754de">LegalizeMutation</a> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a0e3fd79bb281f248eefd08814023d8c8">oneMoreElement</a>(<span class="keywordtype">unsigned</span> TypeIdx) {</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="keywordflow">return</span> [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = Query.Types[TypeIdx];</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> EltTy = Ty.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>();</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordflow">return</span> std::pair(TypeIdx,</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                     <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(Ty.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>() + 1, EltTy));</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  };</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;}</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160; </div>
<div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#a3b5805e73f162bbb84584fbc2091806e">  104</a></span>&#160;<span class="keyword">static</span> <a class="code" href="namespacellvm.html#a7c33e33f2b308b4ea58e1a65dcd754de">LegalizeMutation</a> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a3b5805e73f162bbb84584fbc2091806e">fewerEltsToSize64Vector</a>(<span class="keywordtype">unsigned</span> TypeIdx) {</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="keywordflow">return</span> [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = Query.Types[TypeIdx];</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> EltTy = Ty.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>();</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordtype">unsigned</span> Size = Ty.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordtype">unsigned</span> Pieces = (Size + 63) / 64;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="keywordtype">unsigned</span> NewNumElts = (Ty.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>() + 1) / Pieces;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordflow">return</span> std::pair(TypeIdx, <a class="code" href="classllvm_1_1LLT.html#ae74a60e5edcee0609a1e4fddc62a8a01">LLT::scalarOrVector</a>(</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                                  <a class="code" href="classllvm_1_1ElementCount.html#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(NewNumElts), EltTy));</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  };</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;}</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160; </div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">// Increase the number of vector elements to reach the next multiple of 32-bit</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">// type.</span></div>
<div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#ad64f039266036a2ac4d704000928d65b">  118</a></span>&#160;<span class="keyword">static</span> <a class="code" href="namespacellvm.html#a7c33e33f2b308b4ea58e1a65dcd754de">LegalizeMutation</a> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#ad64f039266036a2ac4d704000928d65b">moreEltsToNext32Bit</a>(<span class="keywordtype">unsigned</span> TypeIdx) {</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="keywordflow">return</span> [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = Query.Types[TypeIdx];</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160; </div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> EltTy = Ty.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>();</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> Size = Ty.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> EltSize = EltTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> NextMul32 = (Size + 31) / 32;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160; </div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(EltSize &lt; 32);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> NewNumElts = (32 * NextMul32 + EltSize - 1) / EltSize;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordflow">return</span> std::pair(TypeIdx, <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(NewNumElts, EltTy));</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  };</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;}</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#a639711ef50cb300db9e9ade1445ccf07">  134</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a639711ef50cb300db9e9ade1445ccf07">getBitcastRegisterType</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty) {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> Size = Ty.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="keywordflow">if</span> (Size &lt;= 32) {</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="comment">// &lt;2 x s8&gt; -&gt; s16</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="comment">// &lt;4 x s8&gt; -&gt; s32</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(Size);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  }</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160; </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LLT.html#ae74a60e5edcee0609a1e4fddc62a8a01">LLT::scalarOrVector</a>(<a class="code" href="classllvm_1_1ElementCount.html#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(Size / 32), 32);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;}</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160; </div>
<div class="line"><a name="l00146"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#a6eb46b558dd23ba908853adcc6ba76b7">  146</a></span>&#160;<span class="keyword">static</span> <a class="code" href="namespacellvm.html#a7c33e33f2b308b4ea58e1a65dcd754de">LegalizeMutation</a> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a6eb46b558dd23ba908853adcc6ba76b7">bitcastToRegisterType</a>(<span class="keywordtype">unsigned</span> TypeIdx) {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <span class="keywordflow">return</span> [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = Query.Types[TypeIdx];</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">return</span> std::pair(TypeIdx, <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a639711ef50cb300db9e9ade1445ccf07">getBitcastRegisterType</a>(Ty));</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  };</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;}</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160; </div>
<div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#a0aab1c76215e1773caa058744d6ae6af">  153</a></span>&#160;<span class="keyword">static</span> <a class="code" href="namespacellvm.html#a7c33e33f2b308b4ea58e1a65dcd754de">LegalizeMutation</a> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a0aab1c76215e1773caa058744d6ae6af">bitcastToVectorElement32</a>(<span class="keywordtype">unsigned</span> TypeIdx) {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="keywordflow">return</span> [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = Query.Types[TypeIdx];</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordtype">unsigned</span> Size = Ty.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Size % 32 == 0);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">return</span> std::pair(</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        TypeIdx, <a class="code" href="classllvm_1_1LLT.html#ae74a60e5edcee0609a1e4fddc62a8a01">LLT::scalarOrVector</a>(<a class="code" href="classllvm_1_1ElementCount.html#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(Size / 32), 32));</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  };</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;}</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160; </div>
<div class="line"><a name="l00163"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#a144b2ed41ce4f22842225b0b1b117a58">  163</a></span>&#160;<span class="keyword">static</span> <a class="code" href="namespacellvm.html#afee35431ecf461b5ea8e58d3f05e1ba1">LegalityPredicate</a> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a144b2ed41ce4f22842225b0b1b117a58">vectorSmallerThan</a>(<span class="keywordtype">unsigned</span> TypeIdx, <span class="keywordtype">unsigned</span> Size) {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="keywordflow">return</span> [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> QueryTy = Query.Types[TypeIdx];</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordflow">return</span> QueryTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() &amp;&amp; QueryTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() &lt; Size;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  };</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;}</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160; </div>
<div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#a2d0beabfcf00e6fd23c97eff8ee516a6">  170</a></span>&#160;<span class="keyword">static</span> <a class="code" href="namespacellvm.html#afee35431ecf461b5ea8e58d3f05e1ba1">LegalityPredicate</a> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a2d0beabfcf00e6fd23c97eff8ee516a6">vectorWiderThan</a>(<span class="keywordtype">unsigned</span> TypeIdx, <span class="keywordtype">unsigned</span> Size) {</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="keywordflow">return</span> [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> QueryTy = Query.Types[TypeIdx];</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordflow">return</span> QueryTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() &amp;&amp; QueryTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() &gt; Size;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  };</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;}</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160; </div>
<div class="line"><a name="l00177"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#a8e4a67e6620c2b437e4b7a7707ac0914">  177</a></span>&#160;<span class="keyword">static</span> <a class="code" href="namespacellvm.html#afee35431ecf461b5ea8e58d3f05e1ba1">LegalityPredicate</a> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a8e4a67e6620c2b437e4b7a7707ac0914">numElementsNotEven</a>(<span class="keywordtype">unsigned</span> TypeIdx) {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="keywordflow">return</span> [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> QueryTy = Query.Types[TypeIdx];</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">return</span> QueryTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() &amp;&amp; QueryTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>() % 2 != 0;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  };</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;}</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; </div>
<div class="line"><a name="l00184"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#a3986167503ccf79606f2249e660c9961">  184</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a3986167503ccf79606f2249e660c9961">isRegisterSize</a>(<span class="keywordtype">unsigned</span> Size) {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="keywordflow">return</span> Size % 32 == 0 &amp;&amp; Size &lt;= <a class="code" href="AMDGPULegalizerInfo_8cpp.html#aabec8e9bc89e3e905a71769f8be922c1">MaxRegisterSize</a>;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;}</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160; </div>
<div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#a31648fb7411d04ec274b46d8dd635564">  188</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a31648fb7411d04ec274b46d8dd635564">isRegisterVectorElementType</a>(<a class="code" href="classllvm_1_1LLT.html">LLT</a> EltTy) {</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> EltSize = EltTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="keywordflow">return</span> EltSize == 16 || EltSize % 32 == 0;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;}</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#af6ee8616537a0f758b8962b4e5076b35">  193</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#af6ee8616537a0f758b8962b4e5076b35">isRegisterVectorType</a>(<a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty) {</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> EltSize = Ty.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>().<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="keywordflow">return</span> EltSize == 32 || EltSize == 64 ||</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;         (EltSize == 16 &amp;&amp; Ty.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>() % 2 == 0) ||</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;         EltSize == 128 || EltSize == 256;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;}</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160; </div>
<div class="line"><a name="l00200"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#a2ea867ab6af309ac37d89c0ac9242600">  200</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a2ea867ab6af309ac37d89c0ac9242600">isRegisterType</a>(<a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty) {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="AMDGPULegalizerInfo_8cpp.html#a3986167503ccf79606f2249e660c9961">isRegisterSize</a>(Ty.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>()))</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160; </div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="keywordflow">if</span> (Ty.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>())</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#af6ee8616537a0f758b8962b4e5076b35">isRegisterVectorType</a>(Ty);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;}</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160; </div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">// Any combination of 32 or 64-bit elements up the maximum register size, and</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">// multiples of v2s16.</span></div>
<div class="line"><a name="l00212"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#a6828238e57f3a265b56fb009a227af4e">  212</a></span>&#160;<span class="keyword">static</span> <a class="code" href="namespacellvm.html#afee35431ecf461b5ea8e58d3f05e1ba1">LegalityPredicate</a> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a2ea867ab6af309ac37d89c0ac9242600">isRegisterType</a>(<span class="keywordtype">unsigned</span> TypeIdx) {</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="keywordflow">return</span> [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a2ea867ab6af309ac37d89c0ac9242600">isRegisterType</a>(Query.Types[TypeIdx]);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  };</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;}</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160; </div>
<div class="line"><a name="l00218"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#aed4feaa9baf8df7fe949b9a5ce246646">  218</a></span>&#160;<span class="keyword">static</span> <a class="code" href="namespacellvm.html#afee35431ecf461b5ea8e58d3f05e1ba1">LegalityPredicate</a> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#aed4feaa9baf8df7fe949b9a5ce246646">elementTypeIsLegal</a>(<span class="keywordtype">unsigned</span> TypeIdx) {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="keywordflow">return</span> [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> QueryTy = Query.Types[TypeIdx];</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keywordflow">if</span> (!QueryTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>())</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> EltTy = QueryTy.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>();</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordflow">return</span> EltTy == <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(16) || EltTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() &gt;= 32;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  };</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;}</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160; </div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">// If we have a truncating store or an extending load with a data size larger</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">// than 32-bits, we need to reduce to a 32-bit type.</span></div>
<div class="line"><a name="l00230"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#ab92c68720091c48aa146f82db0f9ce88">  230</a></span>&#160;<span class="keyword">static</span> <a class="code" href="namespacellvm.html#afee35431ecf461b5ea8e58d3f05e1ba1">LegalityPredicate</a> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#ab92c68720091c48aa146f82db0f9ce88">isWideScalarExtLoadTruncStore</a>(<span class="keywordtype">unsigned</span> TypeIdx) {</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="keywordflow">return</span> [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = Query.Types[TypeIdx];</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordflow">return</span> !Ty.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() &amp;&amp; Ty.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() &gt; 32 &amp;&amp;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;           Query.MMODescrs[0].MemoryTy.getSizeInBits() &lt; Ty.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  };</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;}</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment">// TODO: Should load to s16 be legal? Most loads extend to 32-bits, but we</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">// handle some operations by just promoting the register during</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">// selection. There are also d16 loads on GFX9+ which preserve the high bits.</span></div>
<div class="line"><a name="l00241"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#a807f9ab682878abe0a704736d1f9f298">  241</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a807f9ab682878abe0a704736d1f9f298">maxSizeForAddrSpace</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1GCNSubtarget.html">GCNSubtarget</a> &amp;<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>, <span class="keywordtype">unsigned</span> AS,</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                                    <span class="keywordtype">bool</span> IsLoad, <span class="keywordtype">bool</span> IsAtomic) {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="keywordflow">switch</span> (AS) {</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3faec164f45437d8827346f2d8ec645479a">AMDGPUAS::PRIVATE_ADDRESS</a>:</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="comment">// FIXME: Private element size.</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.enableFlatScratch() ? 128 : 32;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3fa77b1c964e2ff99057bf5e75140457abe">AMDGPUAS::LOCAL_ADDRESS</a>:</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.useDS128() ? 128 : 64;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3fabf4559ef958a13c33f6ec7ed13fd44e5">AMDGPUAS::GLOBAL_ADDRESS</a>:</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3faa6d3112da64eecbdbb50aacb5f8251e8">AMDGPUAS::CONSTANT_ADDRESS</a>:</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3fa1caf1e287a5fe7250388d66ed72aa0c1">AMDGPUAS::CONSTANT_ADDRESS_32BIT</a>:</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="comment">// Treat constant and global as identical. SMRD loads are sometimes usable for</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="comment">// global loads (ideally constant address space should be eliminated)</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="comment">// depending on the context. Legality cannot be context dependent, but</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="comment">// RegBankSelect can split the load as necessary depending on the pointer</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="comment">// register bank/uniformity and if the memory is invariant or not written in a</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="comment">// kernel.</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordflow">return</span> IsLoad ? 512 : 128;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="comment">// FIXME: Flat addresses may contextually need to be split to 32-bit parts</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="comment">// if they may alias scratch depending on the subtarget.  This needs to be</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="comment">// moved to custom handling to use addressMayBeAccessedAsPrivate</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasMultiDwordFlatScratchAddressing() || IsAtomic ? 128 : 32;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  }</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;}</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160; </div>
<div class="line"><a name="l00267"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#a812ebabddd1ad2d8f8bbc6194346e2ed">  267</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a812ebabddd1ad2d8f8bbc6194346e2ed">isLoadStoreSizeLegal</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1GCNSubtarget.html">GCNSubtarget</a> &amp;<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>,</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                                 <span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0];</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="comment">// Handle G_LOAD, G_ZEXTLOAD, G_SEXTLOAD</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> IsLoad = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#afd4ab894cdbdc5888a2d10fa5e5f8333">Opcode</a> != AMDGPU::G_STORE;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160; </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="AArch64MIPeepholeOpt_8cpp.html#a9c374320ed4e895f9afa199987182bd2">RegSize</a> = Ty.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> MemSize = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#a9e26ab57991dfde2757e4790a626d6a3">MMODescrs</a>[0].MemoryTy.getSizeInBits();</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> AlignBits = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#a9e26ab57991dfde2757e4790a626d6a3">MMODescrs</a>[0].AlignInBits;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="keywordtype">unsigned</span> AS = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[1].getAddressSpace();</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="comment">// All of these need to be custom lowered to cast the pointer operand.</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="keywordflow">if</span> (AS == <a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3fa1caf1e287a5fe7250388d66ed72aa0c1">AMDGPUAS::CONSTANT_ADDRESS_32BIT</a>)</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <span class="comment">// Do not handle extending vector loads.</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <span class="keywordflow">if</span> (Ty.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() &amp;&amp; MemSize != <a class="code" href="AArch64MIPeepholeOpt_8cpp.html#a9c374320ed4e895f9afa199987182bd2">RegSize</a>)</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160; </div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  <span class="comment">// TODO: We should be able to widen loads if the alignment is high enough, but</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="comment">// we also need to modify the memory access size.</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="preprocessor">#if 0</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <span class="comment">// Accept widening loads based on alignment.</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <span class="keywordflow">if</span> (IsLoad &amp;&amp; MemSize &lt; Size)</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    MemSize = <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(MemSize, <a class="code" href="structllvm_1_1Align.html">Align</a>);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160; </div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <span class="comment">// Only 1-byte and 2-byte to 32-bit extloads are valid.</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <span class="keywordflow">if</span> (MemSize != <a class="code" href="AArch64MIPeepholeOpt_8cpp.html#a9c374320ed4e895f9afa199987182bd2">RegSize</a> &amp;&amp; <a class="code" href="AArch64MIPeepholeOpt_8cpp.html#a9c374320ed4e895f9afa199987182bd2">RegSize</a> != 32)</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160; </div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="keywordflow">if</span> (MemSize &gt; <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a807f9ab682878abe0a704736d1f9f298">maxSizeForAddrSpace</a>(<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>, AS, IsLoad,</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                                    Query.<a class="code" href="structllvm_1_1LegalityQuery.html#a9e26ab57991dfde2757e4790a626d6a3">MMODescrs</a>[0].Ordering !=</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                                        <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7a56a57d29a3f9dda8671b4d6490a94b08">AtomicOrdering::NotAtomic</a>))</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; </div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <span class="keywordflow">switch</span> (MemSize) {</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="keywordflow">case</span> 8:</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="keywordflow">case</span> 16:</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <span class="keywordflow">case</span> 32:</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <span class="keywordflow">case</span> 64:</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <span class="keywordflow">case</span> 128:</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <span class="keywordflow">case</span> 96:</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasDwordx3LoadStores())</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <span class="keywordflow">case</span> 256:</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <span class="keywordflow">case</span> 512:</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="comment">// These may contextually need to be broken down.</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  }</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="AArch64MIPeepholeOpt_8cpp.html#a9c374320ed4e895f9afa199987182bd2">RegSize</a> &gt;= MemSize);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160; </div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <span class="keywordflow">if</span> (AlignBits &lt; MemSize) {</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SITargetLowering.html">SITargetLowering</a> *TLI = <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.getTargetLowering();</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="keywordflow">if</span> (!TLI-&gt;<a class="code" href="classllvm_1_1SITargetLowering.html#a21805127d5ae570ea5776ee098c951f1">allowsMisalignedMemoryAccessesImpl</a>(MemSize, AS,</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                                                 <a class="code" href="structllvm_1_1Align.html">Align</a>(AlignBits / 8)))</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  }</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160; </div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;}</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment">// The current selector can&#39;t handle &lt;6 x s16&gt;, &lt;8 x s16&gt;, s96, s128 etc, so</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment">// workaround this. Eventually it should ignore the type for loads and only care</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment">// about the size. Return true in cases where we will workaround this for now by</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment">// bitcasting.</span></div>
<div class="line"><a name="l00339"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#ac6f0c363a0260f50a2e3dae5b8c00d21">  339</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#ac6f0c363a0260f50a2e3dae5b8c00d21">loadStoreBitcastWorkaround</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty) {</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AMDGPULegalizerInfo_8cpp.html#a09eff726b407c3dfd6363c47c26856fd">EnableNewLegality</a>)</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> Size = Ty.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <span class="keywordflow">if</span> (Size &lt;= 64)</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <span class="keywordflow">if</span> (!Ty.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>())</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160; </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> EltTy = Ty.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>();</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <span class="keywordflow">if</span> (EltTy.<a class="code" href="classllvm_1_1LLT.html#a9d825f5954d7bd527aea490668c624c6">isPointer</a>())</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160; </div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <span class="keywordtype">unsigned</span> EltSize = EltTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <span class="keywordflow">return</span> EltSize != 32 &amp;&amp; EltSize != 64;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;}</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160; </div>
<div class="line"><a name="l00357"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#ad2c8a875d4d2a4e73f7a48e64226b265">  357</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#ad2c8a875d4d2a4e73f7a48e64226b265">isLoadStoreLegal</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1GCNSubtarget.html">GCNSubtarget</a> &amp;<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>, <span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0];</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a2ea867ab6af309ac37d89c0ac9242600">isRegisterType</a>(Ty) &amp;&amp; <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a812ebabddd1ad2d8f8bbc6194346e2ed">isLoadStoreSizeLegal</a>(<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>, Query) &amp;&amp;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;         !<a class="code" href="AMDGPULegalizerInfo_8cpp.html#ac6f0c363a0260f50a2e3dae5b8c00d21">loadStoreBitcastWorkaround</a>(Ty);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;}</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="comment">/// Return true if a load or store of the type should be lowered with a bitcast</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="comment">/// to a different type.</span></div>
<div class="line"><a name="l00365"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#a1c42298ffb49a95c87577d3e5de46aea">  365</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a1c42298ffb49a95c87577d3e5de46aea">shouldBitcastLoadStoreType</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1GCNSubtarget.html">GCNSubtarget</a> &amp;<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty,</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                                       <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> MemTy) {</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> MemSizeInBits = MemTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> Size = Ty.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <span class="keywordflow">if</span> (Size != MemSizeInBits)</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keywordflow">return</span> Size &lt;= 32 &amp;&amp; Ty.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>();</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160; </div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AMDGPULegalizerInfo_8cpp.html#ac6f0c363a0260f50a2e3dae5b8c00d21">loadStoreBitcastWorkaround</a>(Ty) &amp;&amp; <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a2ea867ab6af309ac37d89c0ac9242600">isRegisterType</a>(Ty))</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160; </div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <span class="comment">// Don&#39;t try to handle bitcasting vector ext loads for now.</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <span class="keywordflow">return</span> Ty.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() &amp;&amp; (!MemTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() || MemTy == Ty) &amp;&amp;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;         (Size &lt;= 32 || <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a3986167503ccf79606f2249e660c9961">isRegisterSize</a>(Size)) &amp;&amp;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;         !<a class="code" href="AMDGPULegalizerInfo_8cpp.html#a31648fb7411d04ec274b46d8dd635564">isRegisterVectorElementType</a>(Ty.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>());</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;}</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="comment">/// Return true if we should legalize a load by widening an odd sized memory</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="comment">/// access up to the alignment. Note this case when the memory access itself</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="comment">/// changes, not the size of the result register.</span></div>
<div class="line"><a name="l00384"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#a2d595a51e66614b8adb83efbc8114401">  384</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a2d595a51e66614b8adb83efbc8114401">shouldWidenLoad</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1GCNSubtarget.html">GCNSubtarget</a> &amp;<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>, <a class="code" href="classllvm_1_1LLT.html">LLT</a> MemoryTy,</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                            <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> AlignInBits, <span class="keywordtype">unsigned</span> AddrSpace,</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                            <span class="keywordtype">unsigned</span> Opcode) {</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <span class="keywordtype">unsigned</span> SizeInBits = MemoryTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="comment">// We don&#39;t want to widen cases that are naturally legal.</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2_32</a>(SizeInBits))</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160; </div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <span class="comment">// If we have 96-bit memory operations, we shouldn&#39;t touch them. Note we may</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <span class="comment">// end up widening these for a scalar load during RegBankSelect, since there</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <span class="comment">// aren&#39;t 96-bit scalar loads.</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <span class="keywordflow">if</span> (SizeInBits == 96 &amp;&amp; <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasDwordx3LoadStores())</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160; </div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <span class="keywordflow">if</span> (SizeInBits &gt;= <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a807f9ab682878abe0a704736d1f9f298">maxSizeForAddrSpace</a>(<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>, AddrSpace, Opcode, <span class="keyword">false</span>))</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160; </div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <span class="comment">// A load is known dereferenceable up to the alignment, so it&#39;s legal to widen</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="comment">// to it.</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  <span class="comment">// TODO: Could check dereferenceable for less aligned cases.</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <span class="keywordtype">unsigned</span> RoundedSize = <a class="code" href="namespacellvm.html#afb65eef479f0473d0fe1666b80155237">NextPowerOf2</a>(SizeInBits);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <span class="keywordflow">if</span> (AlignInBits &lt; RoundedSize)</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160; </div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <span class="comment">// Do not widen if it would introduce a slow unaligned load.</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SITargetLowering.html">SITargetLowering</a> *TLI = <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.getTargetLowering();</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="keywordtype">unsigned</span> Fast = 0;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="keywordflow">return</span> TLI-&gt;<a class="code" href="classllvm_1_1SITargetLowering.html#a21805127d5ae570ea5776ee098c951f1">allowsMisalignedMemoryAccessesImpl</a>(</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;             RoundedSize, AddrSpace, <a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(AlignInBits / 8),</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;             <a class="code" href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2dda7d12be6206e5b0026c71bbcd5cb76494">MachineMemOperand::MOLoad</a>, &amp;Fast) &amp;&amp;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;         Fast;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;}</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160; </div>
<div class="line"><a name="l00418"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#a9ae9993cc0e622c6d10e6e9a2aad0a05">  418</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a2d595a51e66614b8adb83efbc8114401">shouldWidenLoad</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1GCNSubtarget.html">GCNSubtarget</a> &amp;<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>, <span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query,</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                            <span class="keywordtype">unsigned</span> Opcode) {</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="keywordflow">if</span> (Query.<a class="code" href="structllvm_1_1LegalityQuery.html#a9e26ab57991dfde2757e4790a626d6a3">MMODescrs</a>[0].Ordering != <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7a56a57d29a3f9dda8671b4d6490a94b08">AtomicOrdering::NotAtomic</a>)</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160; </div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a2d595a51e66614b8adb83efbc8114401">shouldWidenLoad</a>(<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>, Query.<a class="code" href="structllvm_1_1LegalityQuery.html#a9e26ab57991dfde2757e4790a626d6a3">MMODescrs</a>[0].MemoryTy,</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                         Query.<a class="code" href="structllvm_1_1LegalityQuery.html#a9e26ab57991dfde2757e4790a626d6a3">MMODescrs</a>[0].AlignInBits,</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                         Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[1].getAddressSpace(), Opcode);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;}</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160; </div>
<div class="line"><a name="l00428"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a44a4d4c034685aa34a4e8f62b0976e6c">  428</a></span>&#160;<a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a44a4d4c034685aa34a4e8f62b0976e6c">AMDGPULegalizerInfo::AMDGPULegalizerInfo</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1GCNSubtarget.html">GCNSubtarget</a> &amp;ST_,</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                                         <span class="keyword">const</span> <a class="code" href="classllvm_1_1GCNTargetMachine.html">GCNTargetMachine</a> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#ab76052bb166c65901edb603a3e1f03ab">TM</a>)</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  :  <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>(ST_) {</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <span class="keyword">using namespace </span>TargetOpcode;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160; </div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <span class="keyword">auto</span> GetAddrSpacePtr = [&amp;<a class="code" href="PassBuilderBindings_8cpp.html#ab76052bb166c65901edb603a3e1f03ab">TM</a>](<span class="keywordtype">unsigned</span> AS) {</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LLT.html#a7ff0361855acbbe71b15b8dc6003fbc5">LLT::pointer</a>(AS, <a class="code" href="PassBuilderBindings_8cpp.html#ab76052bb166c65901edb603a3e1f03ab">TM</a>.getPointerSizeInBits(AS));</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  };</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160; </div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S1 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1);</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S8 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(8);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S16 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(16);</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S32 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S64 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64);</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S128 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(128);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S256 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(256);</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S512 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(512);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> MaxScalar = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(<a class="code" href="AMDGPULegalizerInfo_8cpp.html#aabec8e9bc89e3e905a71769f8be922c1">MaxRegisterSize</a>);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160; </div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> V2S8 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(2, 8);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> V2S16 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(2, 16);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> V4S16 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(4, 16);</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160; </div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> V2S32 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(2, 32);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> V3S32 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(3, 32);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> V4S32 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(4, 32);</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> V5S32 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(5, 32);</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> V6S32 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(6, 32);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> V7S32 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(7, 32);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> V8S32 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(8, 32);</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> V9S32 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(9, 32);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> V10S32 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(10, 32);</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> V11S32 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(11, 32);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> V12S32 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(12, 32);</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> V13S32 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(13, 32);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> V14S32 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(14, 32);</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> V15S32 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(15, 32);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> V16S32 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(16, 32);</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> V32S32 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(32, 32);</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160; </div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> V2S64 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(2, 64);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> V3S64 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(3, 64);</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> V4S64 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(4, 64);</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> V5S64 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(5, 64);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> V6S64 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(6, 64);</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> V7S64 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(7, 64);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> V8S64 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(8, 64);</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> V16S64 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(16, 64);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160; </div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  std::initializer_list&lt;LLT&gt; AllS32Vectors =</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    {V2S32, V3S32, V4S32, V5S32, V6S32, V7S32, V8S32,</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;     V9S32, V10S32, V11S32, V12S32, V13S32, V14S32, V15S32, V16S32, V32S32};</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  std::initializer_list&lt;LLT&gt; AllS64Vectors =</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    {V2S64, V3S64, V4S64, V5S64, V6S64, V7S64, V8S64, V16S64};</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160; </div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> GlobalPtr = GetAddrSpacePtr(<a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3fabf4559ef958a13c33f6ec7ed13fd44e5">AMDGPUAS::GLOBAL_ADDRESS</a>);</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> ConstantPtr = GetAddrSpacePtr(<a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3faa6d3112da64eecbdbb50aacb5f8251e8">AMDGPUAS::CONSTANT_ADDRESS</a>);</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> Constant32Ptr = GetAddrSpacePtr(<a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3fa1caf1e287a5fe7250388d66ed72aa0c1">AMDGPUAS::CONSTANT_ADDRESS_32BIT</a>);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> LocalPtr = GetAddrSpacePtr(<a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3fa77b1c964e2ff99057bf5e75140457abe">AMDGPUAS::LOCAL_ADDRESS</a>);</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> RegionPtr = GetAddrSpacePtr(<a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3fa5b71ba6fa435ec288aba849e113721a7">AMDGPUAS::REGION_ADDRESS</a>);</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> FlatPtr = GetAddrSpacePtr(<a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3faaa1e27e4fc68e5706a4b7bbaed447c14">AMDGPUAS::FLAT_ADDRESS</a>);</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> PrivatePtr = GetAddrSpacePtr(<a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3faec164f45437d8827346f2d8ec645479a">AMDGPUAS::PRIVATE_ADDRESS</a>);</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160; </div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> CodePtr = FlatPtr;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160; </div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  <span class="keyword">const</span> std::initializer_list&lt;LLT&gt; AddrSpaces64 = {</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    GlobalPtr, ConstantPtr, FlatPtr</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  };</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160; </div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  <span class="keyword">const</span> std::initializer_list&lt;LLT&gt; AddrSpaces32 = {</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    LocalPtr, PrivatePtr, Constant32Ptr, RegionPtr</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  };</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160; </div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <span class="keyword">const</span> std::initializer_list&lt;LLT&gt; FPTypesBase = {</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    S32, S64</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  };</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160; </div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  <span class="keyword">const</span> std::initializer_list&lt;LLT&gt; FPTypes16 = {</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    S32, S64, S16</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  };</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160; </div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  <span class="keyword">const</span> std::initializer_list&lt;LLT&gt; FPTypesPK16 = {</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    S32, S64, S16, V2S16</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  };</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160; </div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> MinScalarFPTy = ST.has16BitInsts() ? S16 : S32;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160; </div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <span class="comment">// s1 for VCC branches, s32 for SCC branches.</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_BRCOND).<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({S1, S32});</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160; </div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  <span class="comment">// TODO: All multiples of 32, vectors of pointers, all v2s16 pairs, more</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  <span class="comment">// elements for v3s16</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_PHI)</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({S32, S64, V2S16, S16, V4S16, S1, S128, S256})</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    .legalFor(AllS32Vectors)</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>(AllS64Vectors)</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>(AddrSpaces64)</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>(AddrSpaces32)</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a37e356f8716e1bf292a3f999818f7a1e">legalIf</a>(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#a3a162108a998b12a5f51009e450d898c">isPointer</a>(0))</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6fb778e7cc82464d03d353b0cfe292b">clampScalar</a>(0, S16, S256)</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#ab38b237c564a670c78640d09642faa40">widenScalarToNextPow2</a>(0, 32)</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a2e9c70ce46c94a7dbccb0aefd6219571">clampMaxNumElements</a>(0, S32, 16)</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a1b1955725d8c86c73337fdf8aa0e3ef0">moreElementsIf</a>(<a class="code" href="AMDGPULegalizerInfo_8cpp.html#a0dbe048033c8b5adaf283b8fe7de3ba1">isSmallOddVector</a>(0), <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a0e3fd79bb281f248eefd08814023d8c8">oneMoreElement</a>(0))</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6ec49293cfc66ba0163caa2da451201">scalarize</a>(0);</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160; </div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  <span class="keywordflow">if</span> (ST.hasVOP3PInsts() &amp;&amp; ST.hasAddNoCarry() &amp;&amp; ST.hasIntClamp()) {</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="comment">// Full set of gfx9 features.</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({G_ADD, G_SUB})</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;      .legalFor({S32, S16, V2S16})</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      .clampMaxNumElementsStrict(0, S16, 2)</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6ec49293cfc66ba0163caa2da451201">scalarize</a>(0)</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#ab7414b66de51a2dd2f255c46b782157a">minScalar</a>(0, S16)</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a1dd89b108ca049d44fc41716b8173787">widenScalarToNextMultipleOf</a>(0, 32)</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#aa26c4ddd5be38780eb5b4fff05938fe1">maxScalar</a>(0, S32);</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160; </div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_MUL)</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({S32, S16, V2S16})</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      .clampMaxNumElementsStrict(0, S16, 2)</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6ec49293cfc66ba0163caa2da451201">scalarize</a>(0)</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#ab7414b66de51a2dd2f255c46b782157a">minScalar</a>(0, S16)</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a1dd89b108ca049d44fc41716b8173787">widenScalarToNextMultipleOf</a>(0, 32)</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a62e6c26793769f611ca8477969c1d686">custom</a>();</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ST.hasMad64_32());</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160; </div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({G_UADDSAT, G_USUBSAT, G_SADDSAT, G_SSUBSAT})</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      .legalFor({S32, S16, V2S16}) <span class="comment">// Clamp modifier</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      .minScalarOrElt(0, S16)</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a4dcf08a04e17ce028ce83be250f2b0f9">clampMaxNumElementsStrict</a>(0, S16, 2)</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6ec49293cfc66ba0163caa2da451201">scalarize</a>(0)</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#ab38b237c564a670c78640d09642faa40">widenScalarToNextPow2</a>(0, 32)</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a8001d93939045f0e2c4b82e1b5eab30a">lower</a>();</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ST.has16BitInsts()) {</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({G_ADD, G_SUB})</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      .legalFor({S32, S16})</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      .minScalar(0, S16)</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a1dd89b108ca049d44fc41716b8173787">widenScalarToNextMultipleOf</a>(0, 32)</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#aa26c4ddd5be38780eb5b4fff05938fe1">maxScalar</a>(0, S32)</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6ec49293cfc66ba0163caa2da451201">scalarize</a>(0);</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160; </div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_MUL)</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({S32, S16})</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      .<a class="code" href="namespacellvm_1_1LegalizeMutations.html#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0)</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      .minScalar(0, S16)</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      .widenScalarToNextMultipleOf(0, 32)</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      .custom();</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ST.hasMad64_32());</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160; </div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="comment">// Technically the saturating operations require clamp bit support, but this</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="comment">// was introduced at the same time as 16-bit operations.</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({G_UADDSAT, G_USUBSAT})</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      .legalFor({S32, S16}) <span class="comment">// Clamp modifier</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;      .minScalar(0, S16)</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6ec49293cfc66ba0163caa2da451201">scalarize</a>(0)</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#ab38b237c564a670c78640d09642faa40">widenScalarToNextPow2</a>(0, 16)</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a8001d93939045f0e2c4b82e1b5eab30a">lower</a>();</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160; </div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="comment">// We&#39;re just lowering this, but it helps get a better result to try to</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="comment">// coerce to the desired type first.</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({G_SADDSAT, G_SSUBSAT})</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;      .minScalar(0, S16)</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6ec49293cfc66ba0163caa2da451201">scalarize</a>(0)</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a8001d93939045f0e2c4b82e1b5eab30a">lower</a>();</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({G_ADD, G_SUB})</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;      .legalFor({S32})</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;      .widenScalarToNextMultipleOf(0, 32)</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6fb778e7cc82464d03d353b0cfe292b">clampScalar</a>(0, S32, S32)</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6ec49293cfc66ba0163caa2da451201">scalarize</a>(0);</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160; </div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <span class="keyword">auto</span> &amp;<a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a> = <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_MUL)</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({S32})</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;      .<a class="code" href="namespacellvm_1_1LegalizeMutations.html#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0)</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;      .minScalar(0, S32)</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;      .widenScalarToNextMultipleOf(0, 32);</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160; </div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="keywordflow">if</span> (ST.hasMad64_32())</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;      <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>.custom();</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;      <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>.maxScalar(0, S32);</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160; </div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="keywordflow">if</span> (ST.hasIntClamp()) {</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;      <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({G_UADDSAT, G_USUBSAT})</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        .legalFor({S32}) <span class="comment">// Clamp modifier.</span></div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        .<a class="code" href="namespacellvm_1_1LegalizeMutations.html#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0)</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        .minScalarOrElt(0, S32)</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        .lower();</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      <span class="comment">// Clamp bit support was added in VI, along with 16-bit operations.</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;      <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({G_UADDSAT, G_USUBSAT})</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        .minScalar(0, S32)</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6ec49293cfc66ba0163caa2da451201">scalarize</a>(0)</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a8001d93939045f0e2c4b82e1b5eab30a">lower</a>();</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    }</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160; </div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <span class="comment">// FIXME: DAG expansion gets better results. The widening uses the smaller</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <span class="comment">// range values and goes for the min/max lowering directly.</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({G_SADDSAT, G_SSUBSAT})</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;      .minScalar(0, S32)</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6ec49293cfc66ba0163caa2da451201">scalarize</a>(0)</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a8001d93939045f0e2c4b82e1b5eab30a">lower</a>();</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  }</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160; </div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;      {G_SDIV, G_UDIV, G_SREM, G_UREM, G_SDIVREM, G_UDIVREM})</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;      .customFor({S32, S64})</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      .clampScalar(0, S32, S64)</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#ab38b237c564a670c78640d09642faa40">widenScalarToNextPow2</a>(0, 32)</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6ec49293cfc66ba0163caa2da451201">scalarize</a>(0);</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160; </div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  <span class="keyword">auto</span> &amp;Mulh = <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({G_UMULH, G_SMULH})</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                   .legalFor({S32})</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;                   .maxScalar(0, S32);</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160; </div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  <span class="keywordflow">if</span> (ST.hasVOP3PInsts()) {</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    Mulh</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;      .clampMaxNumElements(0, S8, 2)</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;      .lowerFor({V2S8});</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  }</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160; </div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  Mulh</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    .scalarize(0)</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    .lower();</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160; </div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  <span class="comment">// Report legal for any types we can handle anywhere. For the cases only legal</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  <span class="comment">// on the SALU, RegBankSelect will be able to re-legalize.</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({G_AND, G_OR, G_XOR})</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    .legalFor({S32, S1, S64, V2S32, S16, V2S16, V4S16})</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    .clampScalar(0, S32, S64)</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a1b1955725d8c86c73337fdf8aa0e3ef0">moreElementsIf</a>(<a class="code" href="AMDGPULegalizerInfo_8cpp.html#a0dbe048033c8b5adaf283b8fe7de3ba1">isSmallOddVector</a>(0), <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a0e3fd79bb281f248eefd08814023d8c8">oneMoreElement</a>(0))</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a84458721a72ec165f39c359c1e36268f">fewerElementsIf</a>(<a class="code" href="AMDGPULegalizerInfo_8cpp.html#a2d0beabfcf00e6fd23c97eff8ee516a6">vectorWiderThan</a>(0, 64), <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a3b5805e73f162bbb84584fbc2091806e">fewerEltsToSize64Vector</a>(0))</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#ab38b237c564a670c78640d09642faa40">widenScalarToNextPow2</a>(0)</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6ec49293cfc66ba0163caa2da451201">scalarize</a>(0);</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160; </div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      {G_UADDO, G_USUBO, G_UADDE, G_SADDE, G_USUBE, G_SSUBE})</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;      .legalFor({{S32, S1}, {S32, S32}})</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;      .clampScalar(0, S32, S32)</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6ec49293cfc66ba0163caa2da451201">scalarize</a>(0);</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160; </div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_BITCAST)</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <span class="comment">// Don&#39;t worry about the size constraint.</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a37e356f8716e1bf292a3f999818f7a1e">legalIf</a>(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#ad7ac7032baa62cc00002886633b9f281">all</a>(<a class="code" href="AMDGPULegalizerInfo_8cpp.html#a2ea867ab6af309ac37d89c0ac9242600">isRegisterType</a>(0), <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a2ea867ab6af309ac37d89c0ac9242600">isRegisterType</a>(1)))</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a8001d93939045f0e2c4b82e1b5eab30a">lower</a>();</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160; </div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160; </div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_CONSTANT)</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({S1, S32, S64, S16, GlobalPtr,</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;               LocalPtr, ConstantPtr, PrivatePtr, FlatPtr })</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    .legalIf(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#a3a162108a998b12a5f51009e450d898c">isPointer</a>(0))</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6fb778e7cc82464d03d353b0cfe292b">clampScalar</a>(0, S32, S64)</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#ab38b237c564a670c78640d09642faa40">widenScalarToNextPow2</a>(0);</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160; </div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_FCONSTANT)</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({S32, S64, S16})</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    .clampScalar(0, S16, S64);</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160; </div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({G_IMPLICIT_DEF, G_FREEZE})</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;      .legalIf(<a class="code" href="AMDGPULegalizerInfo_8cpp.html#a2ea867ab6af309ac37d89c0ac9242600">isRegisterType</a>(0))</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;      <span class="comment">// s1 and s16 are special cases because they have legal operations on</span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;      <span class="comment">// them, but don&#39;t really occupy registers in the normal way.</span></div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({S1, S16})</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;      .moreElementsIf(<a class="code" href="AMDGPULegalizerInfo_8cpp.html#a0dbe048033c8b5adaf283b8fe7de3ba1">isSmallOddVector</a>(0), <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a0e3fd79bb281f248eefd08814023d8c8">oneMoreElement</a>(0))</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#ab6681792605e467459f8a618fe57b705">clampScalarOrElt</a>(0, S32, MaxScalar)</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#ab38b237c564a670c78640d09642faa40">widenScalarToNextPow2</a>(0, 32)</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a2e9c70ce46c94a7dbccb0aefd6219571">clampMaxNumElements</a>(0, S32, 16);</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160; </div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_FRAME_INDEX).<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({PrivatePtr});</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160; </div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  <span class="comment">// If the amount is divergent, we have to do a wave reduction to get the</span></div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <span class="comment">// maximum value, so this is expanded during RegBankSelect.</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_DYN_STACKALLOC)</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({{PrivatePtr, S32}});</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160; </div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_GLOBAL_VALUE)</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#aac9ffa01f634953a291122d63c8df338">customIf</a>(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#ab82dcf447c1a6ace035cab178a049b39">typeIsNot</a>(0, PrivatePtr));</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160; </div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_BLOCK_ADDR).<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({CodePtr});</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160; </div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  <span class="keyword">auto</span> &amp;FPOpActions = <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    { G_FADD, G_FMUL, G_FMA, G_FCANONICALIZE,</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      G_STRICT_FADD, G_STRICT_FMUL, G_STRICT_FMA})</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    .legalFor({S32, S64});</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  <span class="keyword">auto</span> &amp;TrigActions = <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({G_FSIN, G_FCOS})</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    .customFor({S32, S64});</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  <span class="keyword">auto</span> &amp;FDIVActions = <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_FDIV)</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af56ef6d2982131944aab4e6c249d7269">customFor</a>({S32, S64});</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160; </div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  <span class="keywordflow">if</span> (ST.has16BitInsts()) {</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <span class="keywordflow">if</span> (ST.hasVOP3PInsts())</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;      FPOpActions.<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({S16, V2S16});</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;      FPOpActions.<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({S16});</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160; </div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    TrigActions.<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af56ef6d2982131944aab4e6c249d7269">customFor</a>({S16});</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    FDIVActions.<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af56ef6d2982131944aab4e6c249d7269">customFor</a>({S16});</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  }</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160; </div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <span class="keyword">auto</span> &amp;MinNumMaxNum = <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;      G_FMINNUM, G_FMAXNUM, G_FMINNUM_IEEE, G_FMAXNUM_IEEE});</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160; </div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  <span class="keywordflow">if</span> (ST.hasVOP3PInsts()) {</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    MinNumMaxNum.<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af56ef6d2982131944aab4e6c249d7269">customFor</a>(FPTypesPK16)</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a1b1955725d8c86c73337fdf8aa0e3ef0">moreElementsIf</a>(<a class="code" href="AMDGPULegalizerInfo_8cpp.html#a0dbe048033c8b5adaf283b8fe7de3ba1">isSmallOddVector</a>(0), <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a0e3fd79bb281f248eefd08814023d8c8">oneMoreElement</a>(0))</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a2e9c70ce46c94a7dbccb0aefd6219571">clampMaxNumElements</a>(0, S16, 2)</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6fb778e7cc82464d03d353b0cfe292b">clampScalar</a>(0, S16, S64)</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6ec49293cfc66ba0163caa2da451201">scalarize</a>(0);</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ST.has16BitInsts()) {</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    MinNumMaxNum.<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af56ef6d2982131944aab4e6c249d7269">customFor</a>(FPTypes16)</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6fb778e7cc82464d03d353b0cfe292b">clampScalar</a>(0, S16, S64)</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6ec49293cfc66ba0163caa2da451201">scalarize</a>(0);</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    MinNumMaxNum.<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af56ef6d2982131944aab4e6c249d7269">customFor</a>(FPTypesBase)</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6fb778e7cc82464d03d353b0cfe292b">clampScalar</a>(0, S32, S64)</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6ec49293cfc66ba0163caa2da451201">scalarize</a>(0);</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  }</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160; </div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  <span class="keywordflow">if</span> (ST.hasVOP3PInsts())</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    FPOpActions.<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a4dcf08a04e17ce028ce83be250f2b0f9">clampMaxNumElementsStrict</a>(0, S16, 2);</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160; </div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  FPOpActions</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6ec49293cfc66ba0163caa2da451201">scalarize</a>(0)</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6fb778e7cc82464d03d353b0cfe292b">clampScalar</a>(0, ST.has16BitInsts() ? S16 : S32, S64);</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160; </div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  TrigActions</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6ec49293cfc66ba0163caa2da451201">scalarize</a>(0)</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6fb778e7cc82464d03d353b0cfe292b">clampScalar</a>(0, ST.has16BitInsts() ? S16 : S32, S64);</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160; </div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  FDIVActions</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6ec49293cfc66ba0163caa2da451201">scalarize</a>(0)</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6fb778e7cc82464d03d353b0cfe292b">clampScalar</a>(0, ST.has16BitInsts() ? S16 : S32, S64);</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160; </div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({G_FNEG, G_FABS})</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    .legalFor(FPTypesPK16)</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a4dcf08a04e17ce028ce83be250f2b0f9">clampMaxNumElementsStrict</a>(0, S16, 2)</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6ec49293cfc66ba0163caa2da451201">scalarize</a>(0)</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6fb778e7cc82464d03d353b0cfe292b">clampScalar</a>(0, S16, S64);</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160; </div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  <span class="keywordflow">if</span> (ST.has16BitInsts()) {</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({G_FSQRT, G_FFLOOR})</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      .legalFor({S32, S64, S16})</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      .<a class="code" href="namespacellvm_1_1LegalizeMutations.html#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0)</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;      .clampScalar(0, S16, S64);</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_FSQRT)</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({S32, S64})</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;      .<a class="code" href="namespacellvm_1_1LegalizeMutations.html#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0)</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;      .clampScalar(0, S32, S64);</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160; </div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <span class="keywordflow">if</span> (ST.hasFractBug()) {</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;      <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_FFLOOR)</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af56ef6d2982131944aab4e6c249d7269">customFor</a>({S64})</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        .legalFor({S32, S64})</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;        .<a class="code" href="namespacellvm_1_1LegalizeMutations.html#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0)</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        .clampScalar(0, S32, S64);</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;      <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_FFLOOR)</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;        .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({S32, S64})</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;        .<a class="code" href="namespacellvm_1_1LegalizeMutations.html#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0)</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        .clampScalar(0, S32, S64);</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    }</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  }</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160; </div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_FPTRUNC)</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({{S32, S64}, {S16, S32}})</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    .<a class="code" href="namespacellvm_1_1LegalizeMutations.html#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0)</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    .lower();</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160; </div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_FPEXT)</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({{S64, S32}, {S32, S16}})</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    .narrowScalarFor({{S64, S16}}, <a class="code" href="namespacellvm_1_1LegalizeMutations.html#acd331b959990c033f8d612adf7701b05">changeTo</a>(0, S32))</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    .<a class="code" href="namespacellvm_1_1LegalizeMutations.html#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0);</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160; </div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  <span class="keyword">auto</span> &amp;FSubActions = <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({G_FSUB, G_STRICT_FSUB});</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;  <span class="keywordflow">if</span> (ST.has16BitInsts()) {</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    FSubActions</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      <span class="comment">// Use actual fsub instruction</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({S32, S16})</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;      <span class="comment">// Must use fadd + fneg</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;      .lowerFor({S64, V2S16});</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    FSubActions</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;      <span class="comment">// Use actual fsub instruction</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({S32})</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;      <span class="comment">// Must use fadd + fneg</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;      .lowerFor({S64, S16, V2S16});</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;  }</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160; </div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  FSubActions</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6ec49293cfc66ba0163caa2da451201">scalarize</a>(0)</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6fb778e7cc82464d03d353b0cfe292b">clampScalar</a>(0, S32, S64);</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160; </div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  <span class="comment">// Whether this is legal depends on the floating point mode for the function.</span></div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  <span class="keyword">auto</span> &amp;FMad = <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_FMAD);</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  <span class="keywordflow">if</span> (ST.hasMadF16() &amp;&amp; ST.hasMadMacF32Insts())</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    FMad.customFor({S32, S16});</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ST.hasMadMacF32Insts())</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    FMad.customFor({S32});</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ST.hasMadF16())</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    FMad.customFor({S16});</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  FMad.scalarize(0)</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;      .lower();</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160; </div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  <span class="keyword">auto</span> &amp;FRem = <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_FREM);</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;  <span class="keywordflow">if</span> (ST.has16BitInsts()) {</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    FRem.customFor({S16, S32, S64});</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    FRem.minScalar(0, S32)</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        .customFor({S32, S64});</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;  }</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;  FRem.scalarize(0);</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160; </div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  <span class="comment">// TODO: Do we need to clamp maximum bitwidth?</span></div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>(G_TRUNC)</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a37e356f8716e1bf292a3f999818f7a1e">legalIf</a>(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#a082316e51330aeb051eaed458a9f8304">isScalar</a>(0))</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({{V2S16, V2S32}})</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    .clampMaxNumElements(0, S16, 2)</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    <span class="comment">// Avoid scalarizing in cases that should be truly illegal. In unresolvable</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    <span class="comment">// situations (like an invalid implicit use), we don&#39;t want to infinite loop</span></div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    <span class="comment">// in the legalizer.</span></div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a84458721a72ec165f39c359c1e36268f">fewerElementsIf</a>(<a class="code" href="AMDGPULegalizerInfo_8cpp.html#aed4feaa9baf8df7fe949b9a5ce246646">elementTypeIsLegal</a>(0), <a class="code" href="namespacellvm_1_1LegalizeMutations.html#a5574ba0db2a42fa195db009f06f1d731">LegalizeMutations::scalarize</a>(0))</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#ae3b3ae26031c3fa6eebaaf218dffc10c">alwaysLegal</a>();</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160; </div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;  <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({G_SEXT, G_ZEXT, G_ANYEXT})</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    .legalFor({{S64, S32}, {S32, S16}, {S64, S16},</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;               {S32, S1}, {S64, S1}, {S16, S1}})</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    .<a class="code" href="namespacellvm_1_1LegalizeMutations.html#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0)</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    .clampScalar(0, S32, S64)</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    .widenScalarToNextPow2(1, 32);</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160; </div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  <span class="comment">// TODO: Split s1-&gt;s64 during regbankselect for VALU.</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  <span class="keyword">auto</span> &amp;IToFP = <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({G_SITOFP, G_UITOFP})</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;                    .legalFor({{S32, S32}, {S64, S32}, {S16, S32}})</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;                    .lowerIf(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#ae56d6ae68f8659cfaa29fb7cb601f111">typeIs</a>(1, S1))</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;                    .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af56ef6d2982131944aab4e6c249d7269">customFor</a>({{S32, S64}, {S64, S64}});</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  <span class="keywordflow">if</span> (ST.has16BitInsts())</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    IToFP.<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({{S16, S16}});</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;  IToFP.<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6fb778e7cc82464d03d353b0cfe292b">clampScalar</a>(1, S32, S64)</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;       .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#ab7414b66de51a2dd2f255c46b782157a">minScalar</a>(0, S32)</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;       .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6ec49293cfc66ba0163caa2da451201">scalarize</a>(0)</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;       .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#ab38b237c564a670c78640d09642faa40">widenScalarToNextPow2</a>(1);</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160; </div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  <span class="keyword">auto</span> &amp;FPToI = <a class="code" href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">getActionDefinitionsBuilder</a>({G_FPTOSI, G_FPTOUI})</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    .legalFor({{S32, S32}, {S32, S64}, {S32, S16}})</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    .customFor({{S64, S32}, {S64, S64}})</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    .narrowScalarFor({{S64, S16}}, <a class="code" href="namespacellvm_1_1LegalizeMutations.html#acd331b959990c033f8d612adf7701b05">changeTo</a>(0, S32));</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  <span class="keywordflow">if</span> (ST.has16BitInsts())</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    FPToI.<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">legalFor</a>({{S16, S16}});</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    FPToI.<a class="code" href="classllvm_1_1LegalizeRuleSet.html#ab7414b66de51a2dd2f255c46b782157a">minScalar</a>(1, S32);</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160; </div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;  FPToI.<a class="code" href="classllvm_1_1LegalizeRuleSet.html#ab7414b66de51a2dd2f255c46b782157a">minScalar</a>(0, S32)</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;       .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#ab38b237c564a670c78640d09642faa40">widenScalarToNextPow2</a>(0, 32)</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;       .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af6ec49293cfc66ba0163caa2da451201">scalarize</a>(0)</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;       .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#a8001d93939045f0e2c4b82e1b5eab30a">lower</a>();</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160; </div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  getActionDefinitionsBuilder(G_INTRINSIC_FPTRUNC_ROUND)</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;      .<a class="code" href="classllvm_1_1LegalizeRuleSet.html#af56ef6d2982131944aab4e6c249d7269">customFor</a>({S16, S32})</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;      .<a class="code" href="namespacellvm_1_1LegalizeMutations.html#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0)</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;      .lower();</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160; </div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  <span class="comment">// Lower roundeven into G_FRINT</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  getActionDefinitionsBuilder({G_INTRINSIC_ROUND, G_INTRINSIC_ROUNDEVEN})</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    .<a class="code" href="namespacellvm_1_1LegalizeMutations.html#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0)</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    .lower();</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160; </div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.has16BitInsts()) {</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    getActionDefinitionsBuilder({G_INTRINSIC_TRUNC, G_FCEIL, G_FRINT})</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;      .legalFor({S16, S32, S64})</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;      .clampScalar(0, S16, S64)</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;      .scalarize(0);</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.getGeneration() &gt;= <a class="code" href="classllvm_1_1AMDGPUSubtarget.html#a53c0ee4138bfbf9e0410a65e0eaa36e2a5a040cb5d61ebf76561fcb74c4a77970">AMDGPUSubtarget::SEA_ISLANDS</a>) {</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    getActionDefinitionsBuilder({G_INTRINSIC_TRUNC, G_FCEIL, G_FRINT})</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;      .legalFor({S32, S64})</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;      .clampScalar(0, S32, S64)</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;      .scalarize(0);</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    getActionDefinitionsBuilder({G_INTRINSIC_TRUNC, G_FCEIL, G_FRINT})</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;      .legalFor({S32})</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;      .customFor({S64})</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;      .clampScalar(0, S32, S64)</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;      .scalarize(0);</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;  }</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160; </div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;  getActionDefinitionsBuilder(G_PTR_ADD)</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    .legalIf(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#ad7ac7032baa62cc00002886633b9f281">all</a>(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#a3a162108a998b12a5f51009e450d898c">isPointer</a>(0), <a class="code" href="namespacellvm_1_1LegalityPredicates.html#a7fe85e30d27726cff2560b3a859f6d90">sameSize</a>(0, 1)))</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    .scalarize(0)</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    .scalarSameSizeAs(1, 0);</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160; </div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;  getActionDefinitionsBuilder(G_PTRMASK)</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    .legalIf(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#ad7ac7032baa62cc00002886633b9f281">all</a>(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#a7fe85e30d27726cff2560b3a859f6d90">sameSize</a>(0, 1), <a class="code" href="namespacellvm_1_1LegalityPredicates.html#a3b65801c5b31890a1d1cd8a0038aee87">typeInSet</a>(1, {S64, S32})))</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    .scalarSameSizeAs(1, 0)</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    .scalarize(0);</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160; </div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;  <span class="keyword">auto</span> &amp;CmpBuilder =</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    getActionDefinitionsBuilder(G_ICMP)</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    <span class="comment">// The compare output type differs based on the register bank of the output,</span></div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    <span class="comment">// so make both s1 and s32 legal.</span></div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    <span class="comment">// Scalar compares producing output in scc will be promoted to s32, as that</span></div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    <span class="comment">// is the allocatable register type that will be needed for the copy from</span></div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    <span class="comment">// scc. This will be promoted during RegBankSelect, and we assume something</span></div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    <span class="comment">// before that won&#39;t try to use s32 result types.</span></div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    <span class="comment">// Vector compares producing an output in vcc/SGPR will use s1 in VCC reg</span></div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    <span class="comment">// bank.</span></div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    .legalForCartesianProduct(</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;      {S1}, {S32, S64, GlobalPtr, LocalPtr, ConstantPtr, PrivatePtr, FlatPtr})</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    .legalForCartesianProduct(</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;      {S32}, {S32, S64, GlobalPtr, LocalPtr, ConstantPtr, PrivatePtr, FlatPtr});</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.has16BitInsts()) {</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    CmpBuilder.legalFor({{S1, S16}});</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;  }</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160; </div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;  CmpBuilder</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    .widenScalarToNextPow2(1)</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    .clampScalar(1, S32, S64)</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    .scalarize(0)</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    .legalIf(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#ad7ac7032baa62cc00002886633b9f281">all</a>(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#a3b65801c5b31890a1d1cd8a0038aee87">typeInSet</a>(0, {S1, S32}), <a class="code" href="namespacellvm_1_1LegalityPredicates.html#a3a162108a998b12a5f51009e450d898c">isPointer</a>(1)));</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160; </div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  getActionDefinitionsBuilder(G_FCMP)</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    .legalForCartesianProduct({S1}, <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.has16BitInsts() ? FPTypes16 : FPTypesBase)</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    .widenScalarToNextPow2(1)</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    .clampScalar(1, S32, S64)</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    .scalarize(0);</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160; </div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;  <span class="comment">// FIXME: fpow has a selection pattern that should move to custom lowering.</span></div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;  <span class="keyword">auto</span> &amp;Exp2Ops = getActionDefinitionsBuilder({G_FEXP2, G_FLOG2});</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.has16BitInsts())</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    Exp2Ops.legalFor({S32, S16});</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    Exp2Ops.legalFor({S32});</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  Exp2Ops.clampScalar(0, MinScalarFPTy, S32);</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;  Exp2Ops.scalarize(0);</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160; </div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;  <span class="keyword">auto</span> &amp;ExpOps = getActionDefinitionsBuilder({G_FEXP, G_FLOG, G_FLOG10, G_FPOW});</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.has16BitInsts())</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    ExpOps.customFor({{S32}, {S16}});</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    ExpOps.customFor({S32});</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;  ExpOps.clampScalar(0, MinScalarFPTy, S32)</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;        .scalarize(0);</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160; </div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;  getActionDefinitionsBuilder(G_FPOWI)</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    .clampScalar(0, MinScalarFPTy, S32)</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    .lower();</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160; </div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;  <span class="comment">// The 64-bit versions produce 32-bit results, but only on the SALU.</span></div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;  getActionDefinitionsBuilder(G_CTPOP)</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    .legalFor({{S32, S32}, {S32, S64}})</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    .clampScalar(0, S32, S32)</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    .widenScalarToNextPow2(1, 32)</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    .clampScalar(1, S32, S64)</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    .scalarize(0)</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    .widenScalarToNextPow2(0, 32);</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160; </div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  <span class="comment">// If no 16 bit instr is available, lower into different instructions.</span></div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.has16BitInsts())</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    getActionDefinitionsBuilder(G_IS_FPCLASS)</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;        .legalForCartesianProduct({S1}, FPTypes16)</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;        .widenScalarToNextPow2(1)</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;        .scalarize(0)</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;        .lower();</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    getActionDefinitionsBuilder(G_IS_FPCLASS)</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;        .legalForCartesianProduct({S1}, FPTypesBase)</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;        .lowerFor({S1, S16})</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;        .widenScalarToNextPow2(1)</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;        .scalarize(0)</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        .lower();</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160; </div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;  <span class="comment">// The hardware instructions return a different result on 0 than the generic</span></div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  <span class="comment">// instructions expect. The hardware produces -1, but these produce the</span></div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;  <span class="comment">// bitwidth.</span></div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;  getActionDefinitionsBuilder({G_CTLZ, G_CTTZ})</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    .<a class="code" href="namespacellvm_1_1LegalizeMutations.html#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0)</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    .clampScalar(0, S32, S32)</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    .clampScalar(1, S32, S64)</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    .widenScalarToNextPow2(0, 32)</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    .widenScalarToNextPow2(1, 32)</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    .custom();</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160; </div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;  <span class="comment">// The 64-bit versions produce 32-bit results, but only on the SALU.</span></div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;  getActionDefinitionsBuilder({G_CTLZ_ZERO_UNDEF, G_CTTZ_ZERO_UNDEF})</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    .legalFor({{S32, S32}, {S32, S64}})</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    .clampScalar(0, S32, S32)</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    .clampScalar(1, S32, S64)</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    .scalarize(0)</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    .widenScalarToNextPow2(0, 32)</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    .widenScalarToNextPow2(1, 32);</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160; </div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;  <span class="comment">// S64 is only legal on SALU, and needs to be broken into 32-bit elements in</span></div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;  <span class="comment">// RegBankSelect.</span></div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;  getActionDefinitionsBuilder(G_BITREVERSE)</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    .legalFor({S32, S64})</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    .clampScalar(0, S32, S64)</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    .scalarize(0)</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    .widenScalarToNextPow2(0);</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160; </div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.has16BitInsts()) {</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    getActionDefinitionsBuilder(G_BSWAP)</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;      .legalFor({S16, S32, V2S16})</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;      .clampMaxNumElementsStrict(0, S16, 2)</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;      <span class="comment">// FIXME: Fixing non-power-of-2 before clamp is workaround for</span></div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;      <span class="comment">// narrowScalar limitation.</span></div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;      .widenScalarToNextPow2(0)</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;      .clampScalar(0, S16, S32)</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;      .scalarize(0);</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160; </div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasVOP3PInsts()) {</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;      getActionDefinitionsBuilder({G_SMIN, G_SMAX, G_UMIN, G_UMAX, G_ABS})</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;        .legalFor({S32, S16, V2S16})</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;        .moreElementsIf(<a class="code" href="AMDGPULegalizerInfo_8cpp.html#a0dbe048033c8b5adaf283b8fe7de3ba1">isSmallOddVector</a>(0), <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a0e3fd79bb281f248eefd08814023d8c8">oneMoreElement</a>(0))</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;        .clampMaxNumElements(0, S16, 2)</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;        .minScalar(0, S16)</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;        .widenScalarToNextPow2(0)</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;        .scalarize(0)</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;        .lower();</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;      getActionDefinitionsBuilder({G_SMIN, G_SMAX, G_UMIN, G_UMAX, G_ABS})</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;        .legalFor({S32, S16})</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;        .widenScalarToNextPow2(0)</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;        .minScalar(0, S16)</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;        .scalarize(0)</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;        .lower();</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    }</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    <span class="comment">// TODO: Should have same legality without v_perm_b32</span></div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    getActionDefinitionsBuilder(G_BSWAP)</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;      .legalFor({S32})</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;      .lowerIf(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#aff9e886f18a84258e4f794e31aad0bd9">scalarNarrowerThan</a>(0, 32))</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;      <span class="comment">// FIXME: Fixing non-power-of-2 before clamp is workaround for</span></div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;      <span class="comment">// narrowScalar limitation.</span></div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;      .widenScalarToNextPow2(0)</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;      .maxScalar(0, S32)</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;      .scalarize(0)</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;      .lower();</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160; </div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    getActionDefinitionsBuilder({G_SMIN, G_SMAX, G_UMIN, G_UMAX, G_ABS})</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;      .legalFor({S32})</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;      .minScalar(0, S32)</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;      .widenScalarToNextPow2(0)</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;      .scalarize(0)</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;      .lower();</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;  }</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160; </div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;  getActionDefinitionsBuilder(G_INTTOPTR)</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;      <span class="comment">// List the common cases</span></div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;      .legalForCartesianProduct(AddrSpaces64, {S64})</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;      .legalForCartesianProduct(AddrSpaces32, {S32})</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;      .<a class="code" href="namespacellvm_1_1LegalizeMutations.html#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0)</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;      <span class="comment">// Accept any address space as long as the size matches</span></div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;      .legalIf(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#a7fe85e30d27726cff2560b3a859f6d90">sameSize</a>(0, 1))</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;      .widenScalarIf(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#a45c9d1ec6a1b46697b0363f2c8a605c5">smallerThan</a>(1, 0),</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;                     [](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;                       <span class="keywordflow">return</span> std::pair(</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;                           1, <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0].getSizeInBits()));</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;                     })</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;      .narrowScalarIf(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#a58d4c5153a7d50efd2b3e8408193dfab">largerThan</a>(1, 0), [](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;        <span class="keywordflow">return</span> std::pair(1, <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0].getSizeInBits()));</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;      });</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160; </div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;  getActionDefinitionsBuilder(G_PTRTOINT)</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;      <span class="comment">// List the common cases</span></div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;      .legalForCartesianProduct(AddrSpaces64, {S64})</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;      .legalForCartesianProduct(AddrSpaces32, {S32})</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;      .<a class="code" href="namespacellvm_1_1LegalizeMutations.html#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0)</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;      <span class="comment">// Accept any address space as long as the size matches</span></div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;      .legalIf(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#a7fe85e30d27726cff2560b3a859f6d90">sameSize</a>(0, 1))</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;      .widenScalarIf(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#a45c9d1ec6a1b46697b0363f2c8a605c5">smallerThan</a>(0, 1),</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;                     [](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;                       <span class="keywordflow">return</span> std::pair(</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;                           0, <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[1].getSizeInBits()));</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;                     })</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;      .narrowScalarIf(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#a58d4c5153a7d50efd2b3e8408193dfab">largerThan</a>(0, 1), [](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;        <span class="keywordflow">return</span> std::pair(0, <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[1].getSizeInBits()));</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;      });</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160; </div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;  getActionDefinitionsBuilder(G_ADDRSPACE_CAST)</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    .scalarize(0)</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    .custom();</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160; </div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> needToSplitMemOp = [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query,</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;                                    <span class="keywordtype">bool</span> IsLoad) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0];</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160; </div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    <span class="comment">// Split vector extloads.</span></div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    <span class="keywordtype">unsigned</span> MemSize = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#a9e26ab57991dfde2757e4790a626d6a3">MMODescrs</a>[0].MemoryTy.getSizeInBits();</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160; </div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    <span class="keywordflow">if</span> (DstTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() &amp;&amp; DstTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() &gt; MemSize)</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160; </div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> PtrTy = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[1];</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    <span class="keywordtype">unsigned</span> AS = PtrTy.<a class="code" href="classllvm_1_1LLT.html#ac33fa4c8cfeb9287f51f95404a459de8">getAddressSpace</a>();</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    <span class="keywordflow">if</span> (MemSize &gt; <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a807f9ab682878abe0a704736d1f9f298">maxSizeForAddrSpace</a>(<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>, AS, IsLoad,</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;                                      Query.<a class="code" href="structllvm_1_1LegalityQuery.html#a9e26ab57991dfde2757e4790a626d6a3">MMODescrs</a>[0].Ordering !=</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;                                          <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7a56a57d29a3f9dda8671b4d6490a94b08">AtomicOrdering::NotAtomic</a>))</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160; </div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    <span class="comment">// Catch weird sized loads that don&#39;t evenly divide into the access sizes</span></div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <span class="comment">// TODO: May be able to widen depending on alignment etc.</span></div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    <span class="keywordtype">unsigned</span> NumRegs = (MemSize + 31) / 32;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    <span class="keywordflow">if</span> (NumRegs == 3) {</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasDwordx3LoadStores())</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;      <span class="comment">// If the alignment allows, these should have been widened.</span></div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2_32</a>(NumRegs))</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    }</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160; </div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;  };</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160; </div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  <span class="keywordtype">unsigned</span> GlobalAlign32 = <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasUnalignedBufferAccessEnabled() ? 0 : 32;</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;  <span class="keywordtype">unsigned</span> GlobalAlign16 = <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasUnalignedBufferAccessEnabled() ? 0 : 16;</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;  <span class="keywordtype">unsigned</span> GlobalAlign8 = <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasUnalignedBufferAccessEnabled() ? 0 : 8;</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160; </div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;  <span class="comment">// TODO: Refine based on subtargets which support unaligned access or 128-bit</span></div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;  <span class="comment">// LDS</span></div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;  <span class="comment">// TODO: Unsupported flat for SI.</span></div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160; </div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> : {G_LOAD, G_STORE}) {</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> IsStore = <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> == G_STORE;</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160; </div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    <span class="keyword">auto</span> &amp;Actions = getActionDefinitionsBuilder(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>);</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    <span class="comment">// Explicitly list some common cases.</span></div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    <span class="comment">// TODO: Does this help compile time at all?</span></div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    Actions.legalForTypesWithMemDesc({{S32, GlobalPtr, S32, GlobalAlign32},</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;                                      {V2S32, GlobalPtr, V2S32, GlobalAlign32},</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;                                      {V4S32, GlobalPtr, V4S32, GlobalAlign32},</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;                                      {S64, GlobalPtr, S64, GlobalAlign32},</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;                                      {V2S64, GlobalPtr, V2S64, GlobalAlign32},</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;                                      {V2S16, GlobalPtr, V2S16, GlobalAlign32},</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;                                      {S32, GlobalPtr, S8, GlobalAlign8},</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;                                      {S32, GlobalPtr, S16, GlobalAlign16},</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160; </div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;                                      {S32, LocalPtr, S32, 32},</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;                                      {S64, LocalPtr, S64, 32},</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;                                      {V2S32, LocalPtr, V2S32, 32},</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;                                      {S32, LocalPtr, S8, 8},</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;                                      {S32, LocalPtr, S16, 16},</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;                                      {V2S16, LocalPtr, S32, 32},</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160; </div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;                                      {S32, PrivatePtr, S32, 32},</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;                                      {S32, PrivatePtr, S8, 8},</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;                                      {S32, PrivatePtr, S16, 16},</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;                                      {V2S16, PrivatePtr, S32, 32},</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160; </div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;                                      {S32, ConstantPtr, S32, GlobalAlign32},</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;                                      {V2S32, ConstantPtr, V2S32, GlobalAlign32},</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;                                      {V4S32, ConstantPtr, V4S32, GlobalAlign32},</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;                                      {S64, ConstantPtr, S64, GlobalAlign32},</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;                                      {V2S32, ConstantPtr, V2S32, GlobalAlign32}});</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    Actions.legalIf(</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;      [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#ad2c8a875d4d2a4e73f7a48e64226b265">isLoadStoreLegal</a>(<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>, Query);</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;      });</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160; </div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    <span class="comment">// Constant 32-bit is handled by addrspacecasting the 32-bit pointer to</span></div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    <span class="comment">// 64-bits.</span></div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    <span class="comment">// TODO: Should generalize bitcast action into coerce, which will also cover</span></div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    <span class="comment">// inserting addrspacecasts.</span></div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    Actions.customIf(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#ae56d6ae68f8659cfaa29fb7cb601f111">typeIs</a>(1, Constant32Ptr));</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160; </div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    <span class="comment">// Turn any illegal element vectors into something easier to deal</span></div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    <span class="comment">// with. These will ultimately produce 32-bit scalar shifts to extract the</span></div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    <span class="comment">// parts anyway.</span></div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    <span class="comment">// For odd 16-bit element vectors, prefer to split those into pieces with</span></div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    <span class="comment">// 16-bit vector parts.</span></div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    Actions.bitcastIf(</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;      [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a1c42298ffb49a95c87577d3e5de46aea">shouldBitcastLoadStoreType</a>(<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>, Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0],</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;                                          Query.<a class="code" href="structllvm_1_1LegalityQuery.html#a9e26ab57991dfde2757e4790a626d6a3">MMODescrs</a>[0].MemoryTy);</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;      }, <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a6eb46b558dd23ba908853adcc6ba76b7">bitcastToRegisterType</a>(0));</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160; </div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    <span class="keywordflow">if</span> (!IsStore) {</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;      <span class="comment">// Widen suitably aligned loads by loading extra bytes. The standard</span></div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;      <span class="comment">// legalization actions can&#39;t properly express widening memory operands.</span></div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;      Actions.customIf([=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a2d595a51e66614b8adb83efbc8114401">shouldWidenLoad</a>(<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>, Query, G_LOAD);</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;      });</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    }</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160; </div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    <span class="comment">// FIXME: load/store narrowing should be moved to lower action</span></div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;    Actions</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;        .narrowScalarIf(</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;            [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;              <span class="keywordflow">return</span> !Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0].isVector() &amp;&amp;</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;                     needToSplitMemOp(Query, <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> == G_LOAD);</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;            },</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;            [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) -&gt; std::pair&lt;unsigned, LLT&gt; {</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;              <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0];</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;              <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> PtrTy = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[1];</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160; </div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;              <span class="keyword">const</span> <span class="keywordtype">unsigned</span> DstSize = DstTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;              <span class="keywordtype">unsigned</span> MemSize = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#a9e26ab57991dfde2757e4790a626d6a3">MMODescrs</a>[0].MemoryTy.getSizeInBits();</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160; </div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;              <span class="comment">// Split extloads.</span></div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;              <span class="keywordflow">if</span> (DstSize &gt; MemSize)</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;                <span class="keywordflow">return</span> std::pair(0, <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(MemSize));</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160; </div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;              <span class="keywordtype">unsigned</span> MaxSize = <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a807f9ab682878abe0a704736d1f9f298">maxSizeForAddrSpace</a>(</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;                  <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>, PtrTy.<a class="code" href="classllvm_1_1LLT.html#ac33fa4c8cfeb9287f51f95404a459de8">getAddressSpace</a>(), <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> == G_LOAD,</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;                  Query.<a class="code" href="structllvm_1_1LegalityQuery.html#a9e26ab57991dfde2757e4790a626d6a3">MMODescrs</a>[0].Ordering != <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7a56a57d29a3f9dda8671b4d6490a94b08">AtomicOrdering::NotAtomic</a>);</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;              <span class="keywordflow">if</span> (MemSize &gt; MaxSize)</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;                <span class="keywordflow">return</span> std::pair(0, <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(MaxSize));</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160; </div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;              <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="structllvm_1_1Align.html">Align</a> = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#a9e26ab57991dfde2757e4790a626d6a3">MMODescrs</a>[0].AlignInBits;</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;              <span class="keywordflow">return</span> std::pair(0, <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(<a class="code" href="structllvm_1_1Align.html">Align</a>));</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;            })</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;        .fewerElementsIf(</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;            [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;              <span class="keywordflow">return</span> Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0].isVector() &amp;&amp;</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;                     needToSplitMemOp(Query, <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> == G_LOAD);</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;            },</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;            [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) -&gt; std::pair&lt;unsigned, LLT&gt; {</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;              <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0];</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;              <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> PtrTy = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[1];</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160; </div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;              <a class="code" href="classllvm_1_1LLT.html">LLT</a> EltTy = DstTy.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>();</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;              <span class="keywordtype">unsigned</span> MaxSize = <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a807f9ab682878abe0a704736d1f9f298">maxSizeForAddrSpace</a>(</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;                  <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>, PtrTy.<a class="code" href="classllvm_1_1LLT.html#ac33fa4c8cfeb9287f51f95404a459de8">getAddressSpace</a>(), <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> == G_LOAD,</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;                  Query.<a class="code" href="structllvm_1_1LegalityQuery.html#a9e26ab57991dfde2757e4790a626d6a3">MMODescrs</a>[0].Ordering != <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7a56a57d29a3f9dda8671b4d6490a94b08">AtomicOrdering::NotAtomic</a>);</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160; </div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;              <span class="comment">// FIXME: Handle widened to power of 2 results better. This ends</span></div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;              <span class="comment">// up scalarizing.</span></div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;              <span class="comment">// FIXME: 3 element stores scalarized on SI</span></div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160; </div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;              <span class="comment">// Split if it&#39;s too large for the address space.</span></div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;              <span class="keywordtype">unsigned</span> MemSize = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#a9e26ab57991dfde2757e4790a626d6a3">MMODescrs</a>[0].MemoryTy.getSizeInBits();</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;              <span class="keywordflow">if</span> (MemSize &gt; MaxSize) {</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;                <span class="keywordtype">unsigned</span> NumElts = DstTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>();</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;                <span class="keywordtype">unsigned</span> EltSize = EltTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160; </div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;                <span class="keywordflow">if</span> (MaxSize % EltSize == 0) {</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;                  <span class="keywordflow">return</span> std::pair(</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;                      0, <a class="code" href="classllvm_1_1LLT.html#ae74a60e5edcee0609a1e4fddc62a8a01">LLT::scalarOrVector</a>(</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;                             <a class="code" href="classllvm_1_1ElementCount.html#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(MaxSize / EltSize), EltTy));</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;                }</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160; </div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;                <span class="keywordtype">unsigned</span> NumPieces = MemSize / MaxSize;</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160; </div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;                <span class="comment">// FIXME: Refine when odd breakdowns handled</span></div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;                <span class="comment">// The scalars will need to be re-legalized.</span></div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;                <span class="keywordflow">if</span> (NumPieces == 1 || NumPieces &gt;= NumElts ||</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;                    NumElts % NumPieces != 0)</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;                  <span class="keywordflow">return</span> std::pair(0, EltTy);</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160; </div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;                <span class="keywordflow">return</span> std::pair(0,</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;                                 <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(NumElts / NumPieces, EltTy));</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;              }</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160; </div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;              <span class="comment">// FIXME: We could probably handle weird extending loads better.</span></div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;              <span class="keywordflow">if</span> (DstTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() &gt; MemSize)</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;                <span class="keywordflow">return</span> std::pair(0, EltTy);</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160; </div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;              <span class="keywordtype">unsigned</span> EltSize = EltTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;              <span class="keywordtype">unsigned</span> DstSize = DstTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;              <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2_32</a>(DstSize)) {</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;                <span class="comment">// We&#39;re probably decomposing an odd sized store. Try to split</span></div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;                <span class="comment">// to the widest type. TODO: Account for alignment. As-is it</span></div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;                <span class="comment">// should be OK, since the new parts will be further legalized.</span></div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;                <span class="keywordtype">unsigned</span> FloorSize = <a class="code" href="namespacellvm.html#ae22967d11b695d268992470debfae4b2">llvm::bit_floor</a>(DstSize);</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;                <span class="keywordflow">return</span> std::pair(</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;                    0, <a class="code" href="classllvm_1_1LLT.html#ae74a60e5edcee0609a1e4fddc62a8a01">LLT::scalarOrVector</a>(</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;                           <a class="code" href="classllvm_1_1ElementCount.html#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(FloorSize / EltSize), EltTy));</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;              }</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160; </div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;              <span class="comment">// May need relegalization for the scalars.</span></div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;              <span class="keywordflow">return</span> std::pair(0, EltTy);</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;            })</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    .minScalar(0, S32)</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    .narrowScalarIf(<a class="code" href="AMDGPULegalizerInfo_8cpp.html#ab92c68720091c48aa146f82db0f9ce88">isWideScalarExtLoadTruncStore</a>(0), <a class="code" href="namespacellvm_1_1LegalizeMutations.html#acd331b959990c033f8d612adf7701b05">changeTo</a>(0, S32))</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;    .widenScalarToNextPow2(0)</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    .moreElementsIf(<a class="code" href="AMDGPULegalizerInfo_8cpp.html#a144b2ed41ce4f22842225b0b1b117a58">vectorSmallerThan</a>(0, 32), <a class="code" href="AMDGPULegalizerInfo_8cpp.html#ad64f039266036a2ac4d704000928d65b">moreEltsToNext32Bit</a>(0))</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    .lower();</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;  }</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160; </div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;  <span class="comment">// FIXME: Unaligned accesses not lowered.</span></div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;  <span class="keyword">auto</span> &amp;ExtLoads = getActionDefinitionsBuilder({G_SEXTLOAD, G_ZEXTLOAD})</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;                       .legalForTypesWithMemDesc({{S32, GlobalPtr, S8, 8},</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;                                                  {S32, GlobalPtr, S16, 2 * 8},</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;                                                  {S32, LocalPtr, S8, 8},</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;                                                  {S32, LocalPtr, S16, 16},</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;                                                  {S32, PrivatePtr, S8, 8},</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;                                                  {S32, PrivatePtr, S16, 16},</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;                                                  {S32, ConstantPtr, S8, 8},</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;                                                  {S32, ConstantPtr, S16, 2 * 8}})</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;                       .legalIf(</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;                         [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) -&gt; <span class="keywordtype">bool</span> {</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;                           <span class="keywordflow">return</span> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#ad2c8a875d4d2a4e73f7a48e64226b265">isLoadStoreLegal</a>(<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>, Query);</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;                         });</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160; </div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasFlatAddressSpace()) {</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    ExtLoads.legalForTypesWithMemDesc(</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;        {{S32, FlatPtr, S8, 8}, {S32, FlatPtr, S16, 16}});</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;  }</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160; </div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;  <span class="comment">// Constant 32-bit is handled by addrspacecasting the 32-bit pointer to</span></div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;  <span class="comment">// 64-bits.</span></div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;  <span class="comment">// TODO: Should generalize bitcast action into coerce, which will also cover</span></div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;  <span class="comment">// inserting addrspacecasts.</span></div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;  ExtLoads.customIf(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#ae56d6ae68f8659cfaa29fb7cb601f111">typeIs</a>(1, Constant32Ptr));</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160; </div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;  ExtLoads.clampScalar(0, S32, S32)</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;          .widenScalarToNextPow2(0)</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;          .lower();</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160; </div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;  <span class="keyword">auto</span> &amp;Atomics = getActionDefinitionsBuilder(</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;    {G_ATOMICRMW_XCHG, G_ATOMICRMW_ADD, G_ATOMICRMW_SUB,</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;     G_ATOMICRMW_AND, G_ATOMICRMW_OR, G_ATOMICRMW_XOR,</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;     G_ATOMICRMW_MAX, G_ATOMICRMW_MIN, G_ATOMICRMW_UMAX,</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;     G_ATOMICRMW_UMIN, G_ATOMICRMW_UINC_WRAP, G_ATOMICRMW_UDEC_WRAP})</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;    .legalFor({{S32, GlobalPtr}, {S32, LocalPtr},</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;               {S64, GlobalPtr}, {S64, LocalPtr},</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;               {S32, RegionPtr}, {S64, RegionPtr}});</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasFlatAddressSpace()) {</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    Atomics.legalFor({{S32, FlatPtr}, {S64, FlatPtr}});</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;  }</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160; </div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;  <span class="keyword">auto</span> &amp;Atomic = getActionDefinitionsBuilder(G_ATOMICRMW_FADD);</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasLDSFPAtomicAdd()) {</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;    Atomic.legalFor({{S32, LocalPtr}, {S32, RegionPtr}});</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasGFX90AInsts())</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;      Atomic.legalFor({{S64, LocalPtr}});</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasGFX940Insts())</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;      Atomic.legalFor({{V2S16, LocalPtr}});</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;  }</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasAtomicFaddInsts())</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    Atomic.legalFor({{S32, GlobalPtr}});</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasFlatAtomicFaddF32Inst())</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;    Atomic.legalFor({{S32, FlatPtr}});</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160; </div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasGFX90AInsts()) {</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    <span class="comment">// These are legal with some caveats, and should have undergone expansion in</span></div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    <span class="comment">// the IR in most situations</span></div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;    <span class="comment">// TODO: Move atomic expansion into legalizer</span></div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    Atomic.legalFor({</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;        {S32, GlobalPtr},</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;        {S64, GlobalPtr},</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;        {S64, FlatPtr}</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;      });</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;  }</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160; </div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;  <span class="comment">// BUFFER/FLAT_ATOMIC_CMP_SWAP on GCN GPUs needs input marshalling, and output</span></div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;  <span class="comment">// demarshalling</span></div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;  getActionDefinitionsBuilder(G_ATOMIC_CMPXCHG)</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    .customFor({{S32, GlobalPtr}, {S64, GlobalPtr},</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;                {S32, FlatPtr}, {S64, FlatPtr}})</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    .legalFor({{S32, LocalPtr}, {S64, LocalPtr},</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;               {S32, RegionPtr}, {S64, RegionPtr}});</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;  <span class="comment">// TODO: Pointer types, any 32-bit or 64-bit vector</span></div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160; </div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;  <span class="comment">// Condition should be s32 for scalar, s1 for vector.</span></div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;  getActionDefinitionsBuilder(G_SELECT)</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;      .legalForCartesianProduct({S32, S64, S16, V2S32, V2S16, V4S16, GlobalPtr,</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;                                 LocalPtr, FlatPtr, PrivatePtr,</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;                                 <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(2, LocalPtr),</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;                                 <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(2, PrivatePtr)},</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;                                {S1, S32})</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;      .clampScalar(0, S16, S64)</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;      .scalarize(1)</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;      .moreElementsIf(<a class="code" href="AMDGPULegalizerInfo_8cpp.html#a0dbe048033c8b5adaf283b8fe7de3ba1">isSmallOddVector</a>(0), <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a0e3fd79bb281f248eefd08814023d8c8">oneMoreElement</a>(0))</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;      .fewerElementsIf(<a class="code" href="AMDGPULegalizerInfo_8cpp.html#a8e4a67e6620c2b437e4b7a7707ac0914">numElementsNotEven</a>(0), <a class="code" href="namespacellvm_1_1LegalizeMutations.html#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0))</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;      .clampMaxNumElements(0, S32, 2)</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;      .clampMaxNumElements(0, LocalPtr, 2)</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;      .clampMaxNumElements(0, PrivatePtr, 2)</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;      .scalarize(0)</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;      .widenScalarToNextPow2(0)</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;      .legalIf(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#ad7ac7032baa62cc00002886633b9f281">all</a>(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#a3a162108a998b12a5f51009e450d898c">isPointer</a>(0), <a class="code" href="namespacellvm_1_1LegalityPredicates.html#a3b65801c5b31890a1d1cd8a0038aee87">typeInSet</a>(1, {S1, S32})));</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160; </div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;  <span class="comment">// TODO: Only the low 4/5/6 bits of the shift amount are observed, so we can</span></div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;  <span class="comment">// be more flexible with the shift amount type.</span></div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;  <span class="keyword">auto</span> &amp;Shifts = getActionDefinitionsBuilder({G_SHL, G_LSHR, G_ASHR})</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    .legalFor({{S32, S32}, {S64, S32}});</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.has16BitInsts()) {</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasVOP3PInsts()) {</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;      Shifts.legalFor({{S16, S16}, {V2S16, V2S16}})</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;            .clampMaxNumElements(0, S16, 2);</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;      Shifts.legalFor({{S16, S16}});</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160; </div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;    <span class="comment">// TODO: Support 16-bit shift amounts for all types</span></div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;    Shifts.widenScalarIf(</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;      [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;        <span class="comment">// Use 16-bit shift amounts for any 16-bit shift. Otherwise we want a</span></div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;        <span class="comment">// 32-bit amount.</span></div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> ValTy = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0];</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> AmountTy = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[1];</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;        <span class="keywordflow">return</span> ValTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() &lt;= 16 &amp;&amp;</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;               AmountTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() &lt; 16;</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;      }, <a class="code" href="namespacellvm_1_1LegalizeMutations.html#acd331b959990c033f8d612adf7701b05">changeTo</a>(1, S16));</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;    Shifts.maxScalarIf(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#ae56d6ae68f8659cfaa29fb7cb601f111">typeIs</a>(0, S16), 1, S16);</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;    Shifts.clampScalar(1, S32, S32);</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;    Shifts.widenScalarToNextPow2(0, 16);</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    Shifts.clampScalar(0, S16, S64);</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160; </div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;    getActionDefinitionsBuilder({G_SSHLSAT, G_USHLSAT})</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;      .minScalar(0, S16)</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;      .scalarize(0)</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;      .lower();</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;    <span class="comment">// Make sure we legalize the shift amount type first, as the general</span></div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    <span class="comment">// expansion for the shifted type will produce much worse code if it hasn&#39;t</span></div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    <span class="comment">// been truncated already.</span></div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    Shifts.clampScalar(1, S32, S32);</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;    Shifts.widenScalarToNextPow2(0, 32);</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    Shifts.clampScalar(0, S32, S64);</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160; </div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    getActionDefinitionsBuilder({G_SSHLSAT, G_USHLSAT})</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;      .minScalar(0, S32)</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;      .scalarize(0)</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;      .lower();</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;  }</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;  Shifts.scalarize(0);</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160; </div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> : {G_EXTRACT_VECTOR_ELT, G_INSERT_VECTOR_ELT}) {</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;    <span class="keywordtype">unsigned</span> VecTypeIdx = <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> == G_EXTRACT_VECTOR_ELT ? 1 : 0;</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;    <span class="keywordtype">unsigned</span> EltTypeIdx = <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> == G_EXTRACT_VECTOR_ELT ? 0 : 1;</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;    <span class="keywordtype">unsigned</span> IdxTypeIdx = 2;</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160; </div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;    getActionDefinitionsBuilder(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>)</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;      .customIf([=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;          <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> EltTy = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[EltTypeIdx];</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;          <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> VecTy = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[VecTypeIdx];</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;          <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> IdxTy = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[IdxTypeIdx];</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;          <span class="keyword">const</span> <span class="keywordtype">unsigned</span> EltSize = EltTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;          <span class="keywordflow">return</span> (EltSize == 32 || EltSize == 64) &amp;&amp;</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;                  VecTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() % 32 == 0 &amp;&amp;</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;                  VecTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() &lt;= <a class="code" href="AMDGPULegalizerInfo_8cpp.html#aabec8e9bc89e3e905a71769f8be922c1">MaxRegisterSize</a> &amp;&amp;</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;                  IdxTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() == 32;</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;        })</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;      .bitcastIf(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#ad7ac7032baa62cc00002886633b9f281">all</a>(<a class="code" href="AMDGPULegalizerInfo_8cpp.html#afa3cedfbe23049312e516145f0e46cbb">sizeIsMultipleOf32</a>(VecTypeIdx), <a class="code" href="namespacellvm_1_1LegalityPredicates.html#a87c5e76f97f435ea42bccaa6242aba92">scalarOrEltNarrowerThan</a>(VecTypeIdx, 32)),</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;                 <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a0aab1c76215e1773caa058744d6ae6af">bitcastToVectorElement32</a>(VecTypeIdx))</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;      <span class="comment">//.bitcastIf(vectorSmallerThan(1, 32), bitcastToScalar(1))</span></div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;      .bitcastIf(</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;        <a class="code" href="namespacellvm_1_1LegalityPredicates.html#ad7ac7032baa62cc00002886633b9f281">all</a>(<a class="code" href="AMDGPULegalizerInfo_8cpp.html#afa3cedfbe23049312e516145f0e46cbb">sizeIsMultipleOf32</a>(VecTypeIdx), <a class="code" href="namespacellvm_1_1LegalityPredicates.html#a0460dde35b7517637d8ac040900d42ba">scalarOrEltWiderThan</a>(VecTypeIdx, 64)),</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;        [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;          <span class="comment">// For &gt; 64-bit element types, try to turn this into a 64-bit</span></div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;          <span class="comment">// element vector since we may be able to do better indexing</span></div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;          <span class="comment">// if this is scalar. If not, fall back to 32.</span></div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;          <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> EltTy = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[EltTypeIdx];</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;          <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> VecTy = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[VecTypeIdx];</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;          <span class="keyword">const</span> <span class="keywordtype">unsigned</span> DstEltSize = EltTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;          <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1ARMII.html#a7d414894ef8cdc39b147eb7e0d7e4305a479711d0ab662307550fc709665589ea">VecSize</a> = VecTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160; </div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;          <span class="keyword">const</span> <span class="keywordtype">unsigned</span> TargetEltSize = DstEltSize % 64 == 0 ? 64 : 32;</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;          <span class="keywordflow">return</span> std::pair(</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;              VecTypeIdx,</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;              <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(<a class="code" href="namespacellvm_1_1ARMII.html#a7d414894ef8cdc39b147eb7e0d7e4305a479711d0ab662307550fc709665589ea">VecSize</a> / TargetEltSize, TargetEltSize));</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;        })</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;      .clampScalar(EltTypeIdx, S32, S64)</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;      .clampScalar(VecTypeIdx, S32, S64)</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;      .clampScalar(IdxTypeIdx, S32, S32)</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;      .clampMaxNumElements(VecTypeIdx, S32, 32)</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;      <span class="comment">// TODO: Clamp elements for 64-bit vectors?</span></div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;      <span class="comment">// It should only be necessary with variable indexes.</span></div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;      <span class="comment">// As a last resort, lower to the stack</span></div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;      .lower();</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;  }</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160; </div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;  getActionDefinitionsBuilder(G_EXTRACT_VECTOR_ELT)</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;    .unsupportedIf([=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> &amp;EltTy = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[1].getElementType();</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;        <span class="keywordflow">return</span> Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[0] != EltTy;</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;      });</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160; </div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> : {G_EXTRACT, G_INSERT}) {</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    <span class="keywordtype">unsigned</span> BigTyIdx = <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> == G_EXTRACT ? 1 : 0;</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    <span class="keywordtype">unsigned</span> LitTyIdx = <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> == G_EXTRACT ? 0 : 1;</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160; </div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;    <span class="comment">// FIXME: Doesn&#39;t handle extract of illegal sizes.</span></div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;    getActionDefinitionsBuilder(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>)</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;      .lowerIf(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#ad7ac7032baa62cc00002886633b9f281">all</a>(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#ae56d6ae68f8659cfaa29fb7cb601f111">typeIs</a>(LitTyIdx, S16), <a class="code" href="namespacellvm_1_1LegalityPredicates.html#aa72a80bbb62a1013bb4f43253a4bad1b">sizeIs</a>(BigTyIdx, 32)))</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;      .lowerIf([=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;          <span class="comment">// Sub-vector(or single element) insert and extract.</span></div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;          <span class="comment">// TODO: verify immediate offset here since lower only works with</span></div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;          <span class="comment">// whole elements.</span></div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;          <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> BigTy = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[BigTyIdx];</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;          <span class="keywordflow">return</span> BigTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>();</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;        })</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;      <span class="comment">// FIXME: Multiples of 16 should not be legal.</span></div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;      .legalIf([=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;          <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> BigTy = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[BigTyIdx];</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;          <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> LitTy = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[LitTyIdx];</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;          <span class="keywordflow">return</span> (BigTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() % 32 == 0) &amp;&amp;</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;                 (LitTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() % 16 == 0);</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;        })</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;      .widenScalarIf(</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;        [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;          <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> BigTy = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[BigTyIdx];</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;          <span class="keywordflow">return</span> (BigTy.<a class="code" href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>() &lt; 16);</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;        },</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;        <a class="code" href="namespacellvm_1_1LegalizeMutations.html#ac48512a9f1e26744de1b6940b4adb68f">LegalizeMutations::widenScalarOrEltToNextPow2</a>(BigTyIdx, 16))</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;      .widenScalarIf(</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;        [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;          <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> LitTy = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[LitTyIdx];</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;          <span class="keywordflow">return</span> (LitTy.<a class="code" href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">getScalarSizeInBits</a>() &lt; 16);</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;        },</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;        <a class="code" href="namespacellvm_1_1LegalizeMutations.html#ac48512a9f1e26744de1b6940b4adb68f">LegalizeMutations::widenScalarOrEltToNextPow2</a>(LitTyIdx, 16))</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;      .moreElementsIf(<a class="code" href="AMDGPULegalizerInfo_8cpp.html#a0dbe048033c8b5adaf283b8fe7de3ba1">isSmallOddVector</a>(BigTyIdx), <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a0e3fd79bb281f248eefd08814023d8c8">oneMoreElement</a>(BigTyIdx))</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;      .widenScalarToNextPow2(BigTyIdx, 32);</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160; </div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;  }</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160; </div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;  <span class="keyword">auto</span> &amp;BuildVector = getActionDefinitionsBuilder(G_BUILD_VECTOR)</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    .legalForCartesianProduct(AllS32Vectors, {S32})</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;    .legalForCartesianProduct(AllS64Vectors, {S64})</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;    .clampNumElements(0, V16S32, V32S32)</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;    .clampNumElements(0, V2S64, V16S64)</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;    .fewerElementsIf(<a class="code" href="AMDGPULegalizerInfo_8cpp.html#a3d552c29a563f3462800870d14e72b0f">isWideVec16</a>(0), <a class="code" href="namespacellvm_1_1LegalizeMutations.html#acd331b959990c033f8d612adf7701b05">changeTo</a>(0, V2S16));</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160; </div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasScalarPackInsts()) {</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;    BuildVector</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;      <span class="comment">// FIXME: Should probably widen s1 vectors straight to s32</span></div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;      .minScalarOrElt(0, S16)</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;      .minScalar(1, S16);</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160; </div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;    getActionDefinitionsBuilder(G_BUILD_VECTOR_TRUNC)</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;      .legalFor({V2S16, S32})</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;      .lower();</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;    BuildVector.customFor({V2S16, S16});</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    BuildVector.minScalarOrElt(0, S32);</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160; </div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;    getActionDefinitionsBuilder(G_BUILD_VECTOR_TRUNC)</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;      .customFor({V2S16, S32})</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;      .lower();</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;  }</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160; </div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;  BuildVector.legalIf(<a class="code" href="AMDGPULegalizerInfo_8cpp.html#a2ea867ab6af309ac37d89c0ac9242600">isRegisterType</a>(0));</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160; </div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;  <span class="comment">// FIXME: Clamp maximum size</span></div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;  getActionDefinitionsBuilder(G_CONCAT_VECTORS)</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;    .legalIf(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#ad7ac7032baa62cc00002886633b9f281">all</a>(<a class="code" href="AMDGPULegalizerInfo_8cpp.html#a2ea867ab6af309ac37d89c0ac9242600">isRegisterType</a>(0), <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a2ea867ab6af309ac37d89c0ac9242600">isRegisterType</a>(1)))</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    .clampMaxNumElements(0, S32, 32)</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;    .clampMaxNumElements(1, S16, 2) <span class="comment">// TODO: Make 4?</span></div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;    .clampMaxNumElements(0, S16, 64);</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160; </div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;  getActionDefinitionsBuilder(G_SHUFFLE_VECTOR).lower();</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160; </div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;  <span class="comment">// Merge/Unmerge</span></div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> : {G_MERGE_VALUES, G_UNMERGE_VALUES}) {</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;    <span class="keywordtype">unsigned</span> BigTyIdx = <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> == G_MERGE_VALUES ? 0 : 1;</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;    <span class="keywordtype">unsigned</span> LitTyIdx = <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> == G_MERGE_VALUES ? 1 : 0;</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160; </div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;    <span class="keyword">auto</span> notValidElt = [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query, <span class="keywordtype">unsigned</span> TypeIdx) {</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[TypeIdx];</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;      <span class="keywordflow">if</span> (Ty.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>()) {</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> &amp;EltTy = Ty.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>();</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;        <span class="keywordflow">if</span> (EltTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() &lt; 8 || EltTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() &gt; 512)</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;        <span class="keywordflow">if</span> (!llvm::has_single_bit&lt;uint32_t&gt;(EltTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>()))</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;      }</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;    };</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160; </div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;    <span class="keyword">auto</span> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a> = getActionDefinitionsBuilder(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>)</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;      .legalIf(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#ad7ac7032baa62cc00002886633b9f281">all</a>(<a class="code" href="AMDGPULegalizerInfo_8cpp.html#a2ea867ab6af309ac37d89c0ac9242600">isRegisterType</a>(0), <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a2ea867ab6af309ac37d89c0ac9242600">isRegisterType</a>(1)))</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;      .lowerFor({{S16, V2S16}})</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;      .lowerIf([=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;          <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> BigTy = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[BigTyIdx];</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;          <span class="keywordflow">return</span> BigTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() == 32;</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;        })</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;      <span class="comment">// Try to widen to s16 first for small types.</span></div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;      <span class="comment">// TODO: Only do this on targets with legal s16 shifts</span></div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;      .minScalarOrEltIf(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#aff9e886f18a84258e4f794e31aad0bd9">scalarNarrowerThan</a>(LitTyIdx, 16), LitTyIdx, S16)</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;      .widenScalarToNextPow2(LitTyIdx, <span class="comment">/*Min*/</span> 16)</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;      .moreElementsIf(<a class="code" href="AMDGPULegalizerInfo_8cpp.html#a0dbe048033c8b5adaf283b8fe7de3ba1">isSmallOddVector</a>(BigTyIdx), <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a0e3fd79bb281f248eefd08814023d8c8">oneMoreElement</a>(BigTyIdx))</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;      .fewerElementsIf(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#ad7ac7032baa62cc00002886633b9f281">all</a>(<a class="code" href="namespacellvm_1_1LegalityPredicates.html#ae56d6ae68f8659cfaa29fb7cb601f111">typeIs</a>(0, S16), <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a2d0beabfcf00e6fd23c97eff8ee516a6">vectorWiderThan</a>(1, 32),</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;                           <a class="code" href="namespacellvm_1_1LegalityPredicates.html#a7e87df9fdd3792e1b0c27ccf85466cfe">elementTypeIs</a>(1, S16)),</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;                       <a class="code" href="namespacellvm_1_1LegalizeMutations.html#acd331b959990c033f8d612adf7701b05">changeTo</a>(1, V2S16))</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;      <span class="comment">// Clamp the little scalar to s8-s256 and make it a power of 2. It&#39;s not</span></div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;      <span class="comment">// worth considering the multiples of 64 since 2*192 and 2*384 are not</span></div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;      <span class="comment">// valid.</span></div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;      .clampScalar(LitTyIdx, S32, S512)</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;      .widenScalarToNextPow2(LitTyIdx, <span class="comment">/*Min*/</span> 32)</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;      <span class="comment">// Break up vectors with weird elements into scalars</span></div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;      .fewerElementsIf(</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;        [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) { <span class="keywordflow">return</span> notValidElt(Query, LitTyIdx); },</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;        <a class="code" href="namespacellvm_1_1LegalizeMutations.html#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0))</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;      .fewerElementsIf(</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;        [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) { <span class="keywordflow">return</span> notValidElt(Query, BigTyIdx); },</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;        <a class="code" href="namespacellvm_1_1LegalizeMutations.html#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(1))</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;      .clampScalar(BigTyIdx, S32, MaxScalar);</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160; </div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> == G_MERGE_VALUES) {</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.widenScalarIf(</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;        <span class="comment">// TODO: Use 16-bit shifts if legal for 8-bit values?</span></div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;        [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;          <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[LitTyIdx];</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;          <span class="keywordflow">return</span> Ty.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() &lt; 32;</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;        },</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;        <a class="code" href="namespacellvm_1_1LegalizeMutations.html#acd331b959990c033f8d612adf7701b05">changeTo</a>(LitTyIdx, S32));</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    }</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160; </div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.widenScalarIf(</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;      [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[BigTyIdx];</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;        <span class="keywordflow">return</span> !llvm::has_single_bit&lt;uint32_t&gt;(Ty.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>()) &amp;&amp;</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;               Ty.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() % 16 != 0;</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;      },</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;      [=](<span class="keyword">const</span> <a class="code" href="structllvm_1_1LegalityQuery.html">LegalityQuery</a> &amp;Query) {</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;        <span class="comment">// Pick the next power of 2, or a multiple of 64 over 128.</span></div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;        <span class="comment">// Whichever is smaller.</span></div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> &amp;Ty = Query.<a class="code" href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">Types</a>[BigTyIdx];</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;        <span class="keywordtype">unsigned</span> NewSizeInBits = 1 &lt;&lt; <a class="code" href="namespacellvm.html#a058782b98991f0719657d9008d3df41b">Log2_32_Ceil</a>(Ty.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() + 1);</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;        <span class="keywordflow">if</span> (NewSizeInBits &gt;= 256) {</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;          <span class="keywordtype">unsigned</span> RoundedTo = alignTo&lt;64&gt;(Ty.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() + 1);</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;          <span class="keywordflow">if</span> (RoundedTo &lt; NewSizeInBits)</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;            NewSizeInBits = RoundedTo;</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;        }</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;        <span class="keywordflow">return</span> std::pair(BigTyIdx, <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(NewSizeInBits));</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;      })</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;      <span class="comment">// Any vectors left are the wrong size. Scalarize them.</span></div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;      .<a class="code" href="namespacellvm_1_1LegalizeMutations.html#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0)</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;      .scalarize(1);</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;  }</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160; </div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;  <span class="comment">// S64 is only legal on SALU, and needs to be broken into 32-bit elements in</span></div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;  <span class="comment">// RegBankSelect.</span></div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;  <span class="keyword">auto</span> &amp;SextInReg = getActionDefinitionsBuilder(G_SEXT_INREG)</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    .legalFor({{S32}, {S64}});</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160; </div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasVOP3PInsts()) {</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;    SextInReg.lowerFor({{V2S16}})</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;      <span class="comment">// Prefer to reduce vector widths for 16-bit vectors before lowering, to</span></div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;      <span class="comment">// get more vector shift opportunities, since we&#39;ll get those when</span></div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;      <span class="comment">// expanded.</span></div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;      .clampMaxNumElementsStrict(0, S16, 2);</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.has16BitInsts()) {</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;    SextInReg.lowerFor({{S32}, {S64}, {S16}});</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;    <span class="comment">// Prefer to promote to s32 before lowering if we don&#39;t have 16-bit</span></div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    <span class="comment">// shifts. This avoid a lot of intermediate truncate and extend operations.</span></div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;    SextInReg.lowerFor({{S32}, {S64}});</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;  }</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160; </div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;  SextInReg</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;    .scalarize(0)</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;    .clampScalar(0, S32, S64)</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;    .lower();</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160; </div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;  getActionDefinitionsBuilder({G_ROTR, G_ROTL})</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;    .<a class="code" href="namespacellvm_1_1LegalizeMutations.html#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0)</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;    .lower();</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160; </div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;  <span class="comment">// TODO: Only Try to form v2s16 with legal packed instructions.</span></div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;  getActionDefinitionsBuilder(G_FSHR)</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;    .legalFor({{S32, S32}})</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;    .lowerFor({{V2S16, V2S16}})</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;    .clampMaxNumElementsStrict(0, S16, 2)</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;    .scalarize(0)</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    .lower();</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160; </div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasVOP3PInsts()) {</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    getActionDefinitionsBuilder(G_FSHL)</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;      .lowerFor({{V2S16, V2S16}})</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;      .clampMaxNumElementsStrict(0, S16, 2)</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;      .scalarize(0)</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;      .lower();</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;    getActionDefinitionsBuilder(G_FSHL)</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;      .scalarize(0)</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;      .lower();</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;  }</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160; </div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;  getActionDefinitionsBuilder(G_READCYCLECOUNTER)</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;    .legalFor({S64});</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160; </div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;  getActionDefinitionsBuilder(G_FENCE)</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;    .alwaysLegal();</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160; </div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;  getActionDefinitionsBuilder({G_SMULO, G_UMULO})</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;      .<a class="code" href="namespacellvm_1_1LegalizeMutations.html#a5574ba0db2a42fa195db009f06f1d731">scalarize</a>(0)</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;      .minScalar(0, S32)</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;      .lower();</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160; </div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;  getActionDefinitionsBuilder({G_SBFX, G_UBFX})</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;      .legalFor({{S32, S32}, {S64, S32}})</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;      .clampScalar(1, S32, S32)</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;      .clampScalar(0, S32, S64)</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;      .widenScalarToNextPow2(0)</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;      .scalarize(0);</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160; </div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;  getActionDefinitionsBuilder({</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;      <span class="comment">// TODO: Verify V_BFI_B32 is generated from expanded bit ops</span></div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;      G_FCOPYSIGN,</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160; </div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;      G_ATOMIC_CMPXCHG_WITH_SUCCESS,</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;      G_ATOMICRMW_NAND,</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;      G_ATOMICRMW_FSUB,</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;      G_READ_REGISTER,</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;      G_WRITE_REGISTER,</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160; </div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;      G_SADDO, G_SSUBO,</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160; </div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;       <span class="comment">// TODO: Implement</span></div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;      G_FMINIMUM, G_FMAXIMUM}).lower();</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160; </div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;  getActionDefinitionsBuilder({G_MEMCPY, G_MEMCPY_INLINE, G_MEMMOVE, G_MEMSET})</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;      .lower();</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160; </div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;  getActionDefinitionsBuilder({G_VASTART, G_VAARG, G_BRJT, G_JUMP_TABLE,</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;        G_INDEXED_LOAD, G_INDEXED_SEXTLOAD,</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;        G_INDEXED_ZEXTLOAD, G_INDEXED_STORE})</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;    .<a class="code" href="BinaryFormat_2MachO_8cpp.html#a1a923abcc65272bfe81c0e7081c32421">unsupported</a>();</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160; </div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;  getLegacyLegalizerInfo().computeTables();</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;  <a class="code" href="PPCCTRLoopsVerify_8cpp.html#a593cc2f204f7b2edc16ee222c37c3196">verify</a>(*<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.getInstrInfo());</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;}</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160; </div>
<div class="line"><a name="l01744"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#ab05b1cb6f4e3a49faedd2cc34c74ff77"> 1744</a></span>&#160;<span class="keywordtype">bool</span> AMDGPULegalizerInfo::legalizeCustom(<a class="code" href="classllvm_1_1LegalizerHelper.html">LegalizerHelper</a> &amp;Helper,</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;                                         <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;  <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> = Helper.<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>;</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;  <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMRI();</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160; </div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode()) {</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_ADDRSPACE_CAST:</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a805950c6af7deaddb2d8fbcaf4ea011b">legalizeAddrSpaceCast</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FRINT:</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a6f7197d20955f93cdb3d88403ce7c040">legalizeFrint</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FCEIL:</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#ae468aab9eee24365f029a78836e6435d">legalizeFceil</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FREM:</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a594e9cb4df0c39f1f5263fb07273b19f">legalizeFrem</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_INTRINSIC_TRUNC:</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a0e7378d479179ae1df0b61b83c637a4d">legalizeIntrinsicTrunc</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SITOFP:</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#abb023d557c720f8730e0c266c1cd0f9c">legalizeITOFP</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_UITOFP:</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#abb023d557c720f8730e0c266c1cd0f9c">legalizeITOFP</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FPTOSI:</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#ac6475a6b99e088697d90032ddab24447">legalizeFPTOI</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FPTOUI:</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#ac6475a6b99e088697d90032ddab24447">legalizeFPTOI</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FMINNUM:</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FMAXNUM:</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FMINNUM_IEEE:</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FMAXNUM_IEEE:</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a91b85787aa32d7f1f0d38d59a77cee68">legalizeMinNumMaxNum</a>(Helper, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_EXTRACT_VECTOR_ELT:</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#aec28181fa8c84646c097212f19e379f1">legalizeExtractVectorElt</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_INSERT_VECTOR_ELT:</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a762e3485a3d139ec7ed9d30a7f38f74d">legalizeInsertVectorElt</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FSIN:</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FCOS:</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#aaac467545afeead836946e5842563fea">legalizeSinCos</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_GLOBAL_VALUE:</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a04975f118b224e8cd322d1aa86f2ceb2">legalizeGlobalValue</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_LOAD:</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SEXTLOAD:</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_ZEXTLOAD:</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#af13d2c38b3bf7586a8f07d511eda68e8">legalizeLoad</a>(Helper, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FMAD:</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a4774d239d20e55380840e775aed66efc">legalizeFMad</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FDIV:</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a4f3b6abeaf9c509c93062f2246a0f40b">legalizeFDIV</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_UDIV:</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_UREM:</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_UDIVREM:</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a1d0eafc5b0af4bf05b288d62caa72ac9">legalizeUnsignedDIV_REM</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SDIV:</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SREM:</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_SDIVREM:</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#aba263b2348b84c2d9a10adc0a42d9606">legalizeSignedDIV_REM</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_ATOMIC_CMPXCHG:</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a22a60a10a1cda01d7cef79f4634984dc">legalizeAtomicCmpXChg</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FLOG:</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a5229692968517de20adc8a76f8cdc736">legalizeFlog</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1numbers.html#af3e2d8495c95a22754b51a3504e95709">numbers::ln2f</a>);</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FLOG10:</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a5229692968517de20adc8a76f8cdc736">legalizeFlog</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1numbers.html#af3e2d8495c95a22754b51a3504e95709">numbers::ln2f</a> / <a class="code" href="namespacellvm_1_1numbers.html#a54065ab2811468d221bcdfa0eaf74012">numbers::ln10f</a>);</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FEXP:</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a5552c2fa1505412508e493149af31543">legalizeFExp</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FPOW:</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#abf712aff736a372430ea6ea027fe32e5">legalizeFPow</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_FFLOOR:</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a44186e632d4bab1d35012ed738a23870">legalizeFFloor</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_BUILD_VECTOR:</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_BUILD_VECTOR_TRUNC:</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a4117d1ecf36af9158c825fb376c4082e">legalizeBuildVector</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_MUL:</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a2645b2c5fc9b404821322ad403c87810">legalizeMul</a>(Helper, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_CTLZ:</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_CTTZ:</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a40f12f2bde2de188bff061f11bcd976c">legalizeCTLZ_CTTZ</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;  <span class="keywordflow">case</span> TargetOpcode::G_INTRINSIC_FPTRUNC_ROUND:</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a07267e1f318ef8357bce5a08d60f78de">legalizeFPTruncRound</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;  }</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160; </div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;  <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;expected switch to return&quot;</span>);</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;}</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160; </div>
<div class="line"><a name="l01827"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a2fd97f50411bc650c7f9f6e3118147f4"> 1827</a></span>&#160;<a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a2fd97f50411bc650c7f9f6e3118147f4">AMDGPULegalizerInfo::getSegmentAperture</a>(</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;  <span class="keywordtype">unsigned</span> AS,</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;  <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;  <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMF();</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1GCNSubtarget.html">GCNSubtarget</a> &amp;ST = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1GCNSubtarget.html">GCNSubtarget</a>&gt;();</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S32 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S64 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64);</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160; </div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(AS == <a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3fa77b1c964e2ff99057bf5e75140457abe">AMDGPUAS::LOCAL_ADDRESS</a> || AS == <a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3faec164f45437d8827346f2d8ec645479a">AMDGPUAS::PRIVATE_ADDRESS</a>);</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160; </div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;  <span class="keywordflow">if</span> (ST.hasApertureRegs()) {</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;    <span class="comment">// Note: this register is somewhat broken. When used as a 32-bit operand,</span></div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;    <span class="comment">// it only returns zeroes. The real value is in the upper 32 bits.</span></div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;    <span class="comment">// Thus, we must emit extract the high 32 bits.</span></div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> ApertureRegNo = (AS == <a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3fa77b1c964e2ff99057bf5e75140457abe">AMDGPUAS::LOCAL_ADDRESS</a>)</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;                                       ? AMDGPU::SRC_SHARED_BASE</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;                                       : AMDGPU::SRC_PRIVATE_BASE;</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;    <span class="comment">// FIXME: It would be more natural to emit a COPY here, but then copy</span></div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;    <span class="comment">// coalescing would kick in and it would think it&#39;s okay to use the &quot;HI&quot;</span></div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;    <span class="comment">// subregister (instead of extracting the HI 32 bits) which is an artificial</span></div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;    <span class="comment">// (unusable) register.</span></div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;    <span class="comment">//  Register TableGen definitions would need an overhaul to get rid of the</span></div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;    <span class="comment">//  artificial &quot;HI&quot; aperture registers and prevent this kind of issue from</span></div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;    <span class="comment">//  happening.</span></div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(S64);</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;    <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a965a15cef77a97f0e17f9f26fd5be53e">setRegClass</a>(Dst, &amp;AMDGPU::SReg_64RegClass);</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildInstr(AMDGPU::S_MOV_B64, {Dst}, {<a class="code" href="classllvm_1_1Register.html">Register</a>(ApertureRegNo)});</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUnmerge(S32, Dst).getReg(1);</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;  }</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160; </div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;  <span class="comment">// TODO: can we be smarter about machine pointer info?</span></div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;  <a class="code" href="structllvm_1_1MachinePointerInfo.html">MachinePointerInfo</a> PtrInfo(<a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3faa6d3112da64eecbdbb50aacb5f8251e8">AMDGPUAS::CONSTANT_ADDRESS</a>);</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> LoadAddr = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;    <a class="code" href="classllvm_1_1LLT.html#a7ff0361855acbbe71b15b8dc6003fbc5">LLT::pointer</a>(<a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3faa6d3112da64eecbdbb50aacb5f8251e8">AMDGPUAS::CONSTANT_ADDRESS</a>, 64));</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;  <span class="comment">// For code object version 5, private_base and shared_base are passed through</span></div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;  <span class="comment">// implicit kernargs.</span></div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPU.html#a393a9a9f611c326cabf217b4c360e2e6">AMDGPU::getCodeObjectVersion</a>(*MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>()) &gt;=</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;      <a class="code" href="namespacellvm_1_1AMDGPU.html#ab8edae44cec4167ac46ac7f60ecb4dafabd2438b14a6a1a27fae653284aaa3cb4">AMDGPU::AMDHSA_COV5</a>) {</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;    <a class="code" href="classllvm_1_1AMDGPUTargetLowering.html#aabb66ae6636b6dbd45c1b66dd9353821">AMDGPUTargetLowering::ImplicitParameter</a> Param =</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;        AS == <a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3fa77b1c964e2ff99057bf5e75140457abe">AMDGPUAS::LOCAL_ADDRESS</a> ? <a class="code" href="classllvm_1_1AMDGPUTargetLowering.html#aabb66ae6636b6dbd45c1b66dd9353821a2e50c74ac7d9d4346f7ed1fa7d65802a">AMDGPUTargetLowering::SHARED_BASE</a></div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;                                      : <a class="code" href="classllvm_1_1AMDGPUTargetLowering.html#aabb66ae6636b6dbd45c1b66dd9353821a2ebed7459a9c75beedcb87a45b3800cf">AMDGPUTargetLowering::PRIVATE_BASE</a>;</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> =</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;        ST.getTargetLowering()-&gt;getImplicitParameterOffset(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMF(), Param);</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160; </div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> KernargPtrReg = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;        <a class="code" href="classllvm_1_1LLT.html#a7ff0361855acbbe71b15b8dc6003fbc5">LLT::pointer</a>(<a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3faa6d3112da64eecbdbb50aacb5f8251e8">AMDGPUAS::CONSTANT_ADDRESS</a>, 64));</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160; </div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#ae63198baedfab72494f0d79823e99b75">loadInputValue</a>(KernargPtrReg, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;                        <a class="code" href="structllvm_1_1AMDGPUFunctionArgInfo.html#a0e789059bf7f286b7f6bc75b43aac98baf32f3fd30ae548866dc7e45092dd90b9">AMDGPUFunctionArgInfo::KERNARG_SEGMENT_PTR</a>))</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1Register.html">Register</a>();</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160; </div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;    <a class="code" href="classllvm_1_1MachineMemOperand.html">MachineMemOperand</a> *MMO = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a0d496cc15e312863869a384532968143">getMachineMemOperand</a>(</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;        PtrInfo,</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;        <a class="code" href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2dda7d12be6206e5b0026c71bbcd5cb76494">MachineMemOperand::MOLoad</a> | <a class="code" href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2dda7b999a936bc7a4d45dfadbe356e77b3f">MachineMemOperand::MODereferenceable</a> |</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;            <a class="code" href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2ddac63dd9c4fe69bfeaac7a363fda846ac6">MachineMemOperand::MOInvariant</a>,</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;        <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32), <a class="code" href="namespacellvm.html#acd6aa057934751aaac54e5c18bcc18eb">commonAlignment</a>(<a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(64), <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>));</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160; </div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;    <span class="comment">// Pointer address</span></div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildPtrAdd(LoadAddr, KernargPtrReg,</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;                  <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(<a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64), <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>).getReg(0));</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;    <span class="comment">// Load address</span></div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildLoad(S32, LoadAddr, *MMO).getReg(0);</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;  }</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160; </div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> QueuePtr = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;    <a class="code" href="classllvm_1_1LLT.html#a7ff0361855acbbe71b15b8dc6003fbc5">LLT::pointer</a>(<a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3faa6d3112da64eecbdbb50aacb5f8251e8">AMDGPUAS::CONSTANT_ADDRESS</a>, 64));</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160; </div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#ae63198baedfab72494f0d79823e99b75">loadInputValue</a>(QueuePtr, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="structllvm_1_1AMDGPUFunctionArgInfo.html#a0e789059bf7f286b7f6bc75b43aac98ba32b5333e2f708d7eeb05c12e415b8fd4">AMDGPUFunctionArgInfo::QUEUE_PTR</a>))</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1Register.html">Register</a>();</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160; </div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;  <span class="comment">// Offset into amd_queue_t for group_segment_aperture_base_hi /</span></div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;  <span class="comment">// private_segment_aperture_base_hi.</span></div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;  <a class="code" href="classuint32__t.html">uint32_t</a> StructOffset = (AS == <a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3fa77b1c964e2ff99057bf5e75140457abe">AMDGPUAS::LOCAL_ADDRESS</a>) ? 0x40 : 0x44;</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160; </div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;  <a class="code" href="classllvm_1_1MachineMemOperand.html">MachineMemOperand</a> *MMO = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a0d496cc15e312863869a384532968143">getMachineMemOperand</a>(</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;      PtrInfo,</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;      <a class="code" href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2dda7d12be6206e5b0026c71bbcd5cb76494">MachineMemOperand::MOLoad</a> | <a class="code" href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2dda7b999a936bc7a4d45dfadbe356e77b3f">MachineMemOperand::MODereferenceable</a> |</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;          <a class="code" href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2ddac63dd9c4fe69bfeaac7a363fda846ac6">MachineMemOperand::MOInvariant</a>,</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;      <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32), <a class="code" href="namespacellvm.html#acd6aa057934751aaac54e5c18bcc18eb">commonAlignment</a>(<a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(64), StructOffset));</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160; </div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildPtrAdd(LoadAddr, QueuePtr,</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;                <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(<a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64), StructOffset).getReg(0));</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildLoad(S32, LoadAddr, *MMO).getReg(0);</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;}</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;<span class="comment">/// Return true if the value is a known valid address, such that a null check is</span></div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;<span class="comment">/// not necessary.</span></div>
<div class="line"><a name="l01915"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#aff707b57a26889c4290a79001f12fd20"> 1915</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#aff707b57a26889c4290a79001f12fd20">isKnownNonNull</a>(<a class="code" href="classllvm_1_1Register.html">Register</a> Val, <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;                           <span class="keyword">const</span> <a class="code" href="classllvm_1_1AMDGPUTargetMachine.html">AMDGPUTargetMachine</a> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#ab76052bb166c65901edb603a3e1f03ab">TM</a>, <span class="keywordtype">unsigned</span> AddrSpace) {</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a> = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a40d954b9cf9ee8b545a78725f2549cba">getVRegDef</a>(Val);</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>-&gt;getOpcode()) {</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;  <span class="keywordflow">case</span> AMDGPU::G_FRAME_INDEX:</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;  <span class="keywordflow">case</span> AMDGPU::G_GLOBAL_VALUE:</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;  <span class="keywordflow">case</span> AMDGPU::G_BLOCK_ADDR:</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;  <span class="keywordflow">case</span> AMDGPU::G_CONSTANT: {</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>-&gt;getOperand(1).getCImm();</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;    <span class="keywordflow">return</span> CI-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#aa8f4be0661aa64f5b1f20b15e93bb403">getSExtValue</a>() != <a class="code" href="PassBuilderBindings_8cpp.html#ab76052bb166c65901edb603a3e1f03ab">TM</a>.getNullPointerValue(AddrSpace);</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;  }</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;  }</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160; </div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;}</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160; </div>
<div class="line"><a name="l01934"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a805950c6af7deaddb2d8fbcaf4ea011b"> 1934</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a805950c6af7deaddb2d8fbcaf4ea011b">AMDGPULegalizerInfo::legalizeAddrSpaceCast</a>(</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;  <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMF();</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160; </div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S32 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160; </div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst);</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcTy = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Src);</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;  <span class="keywordtype">unsigned</span> DestAS = DstTy.<a class="code" href="classllvm_1_1LLT.html#ac33fa4c8cfeb9287f51f95404a459de8">getAddressSpace</a>();</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;  <span class="keywordtype">unsigned</span> SrcAS = SrcTy.<a class="code" href="classllvm_1_1LLT.html#ac33fa4c8cfeb9287f51f95404a459de8">getAddressSpace</a>();</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160; </div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;  <span class="comment">// TODO: Avoid reloading from the queue ptr for each cast, or at least each</span></div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;  <span class="comment">// vector element.</span></div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!DstTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>());</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160; </div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1AMDGPUTargetMachine.html">AMDGPUTargetMachine</a> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#ab76052bb166c65901edb603a3e1f03ab">TM</a></div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;    = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classllvm_1_1AMDGPUTargetMachine.html">AMDGPUTargetMachine</a> &amp;<span class="keyword">&gt;</span>(MF.<a class="code" href="classllvm_1_1MachineFunction.html#ae68d159179d37dc7969439d842e2644f">getTarget</a>());</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160; </div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="PassBuilderBindings_8cpp.html#ab76052bb166c65901edb603a3e1f03ab">TM</a>.isNoopAddrSpaceCast(SrcAS, DestAS)) {</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.setDesc(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getTII().get(TargetOpcode::G_BITCAST));</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;  }</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160; </div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;  <span class="keywordflow">if</span> (SrcAS == <a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3faaa1e27e4fc68e5706a4b7bbaed447c14">AMDGPUAS::FLAT_ADDRESS</a> &amp;&amp;</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;      (DestAS == <a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3fa77b1c964e2ff99057bf5e75140457abe">AMDGPUAS::LOCAL_ADDRESS</a> ||</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;       DestAS == <a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3faec164f45437d8827346f2d8ec645479a">AMDGPUAS::PRIVATE_ADDRESS</a>)) {</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AMDGPULegalizerInfo_8cpp.html#aff707b57a26889c4290a79001f12fd20">isKnownNonNull</a>(Src, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="PassBuilderBindings_8cpp.html#ab76052bb166c65901edb603a3e1f03ab">TM</a>, SrcAS)) {</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;      <span class="comment">// Extract low 32-bits of the pointer.</span></div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildExtract(Dst, Src, 0);</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;    }</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160; </div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;    <span class="keywordtype">unsigned</span> NullVal = <a class="code" href="PassBuilderBindings_8cpp.html#ab76052bb166c65901edb603a3e1f03ab">TM</a>.getNullPointerValue(DestAS);</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160; </div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;    <span class="keyword">auto</span> SegmentNull = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(DstTy, NullVal);</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;    <span class="keyword">auto</span> FlatNull = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(SrcTy, 0);</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160; </div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;    <span class="comment">// Extract low 32-bits of the pointer.</span></div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;    <span class="keyword">auto</span> PtrLo32 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildExtract(DstTy, Src, 0);</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160; </div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;    <span class="keyword">auto</span> CmpRes =</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;        <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildICmp(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP_NE</a>, <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1), Src, FlatNull.getReg(0));</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildSelect(Dst, CmpRes, PtrLo32, SegmentNull.getReg(0));</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160; </div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;  }</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160; </div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;  <span class="keywordflow">if</span> (DestAS == <a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3faaa1e27e4fc68e5706a4b7bbaed447c14">AMDGPUAS::FLAT_ADDRESS</a> &amp;&amp;</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;      (SrcAS == <a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3fa77b1c964e2ff99057bf5e75140457abe">AMDGPUAS::LOCAL_ADDRESS</a> ||</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;       SrcAS == <a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3faec164f45437d8827346f2d8ec645479a">AMDGPUAS::PRIVATE_ADDRESS</a>)) {</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> ApertureReg = <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a2fd97f50411bc650c7f9f6e3118147f4">getSegmentAperture</a>(SrcAS, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;    <span class="keywordflow">if</span> (!ApertureReg.<a class="code" href="classllvm_1_1Register.html#a4a6966b99e305bd6f01fb17c645ae3da">isValid</a>())</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160; </div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;    <span class="comment">// Coerce the type of the low half of the result so we can use merge_values.</span></div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> SrcAsInt = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildPtrToInt(S32, Src).getReg(0);</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160; </div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;    <span class="comment">// TODO: Should we allow mismatched types but matching sizes in merges to</span></div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;    <span class="comment">// avoid the ptrtoint?</span></div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;    <span class="keyword">auto</span> BuildPtr = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildMergeLikeInstr(DstTy, {SrcAsInt, ApertureReg});</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160; </div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AMDGPULegalizerInfo_8cpp.html#aff707b57a26889c4290a79001f12fd20">isKnownNonNull</a>(Src, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="PassBuilderBindings_8cpp.html#ab76052bb166c65901edb603a3e1f03ab">TM</a>, SrcAS)) {</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildCopy(Dst, BuildPtr);</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;    }</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160; </div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;    <span class="keyword">auto</span> SegmentNull = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(SrcTy, <a class="code" href="PassBuilderBindings_8cpp.html#ab76052bb166c65901edb603a3e1f03ab">TM</a>.getNullPointerValue(SrcAS));</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;    <span class="keyword">auto</span> FlatNull = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(DstTy, <a class="code" href="PassBuilderBindings_8cpp.html#ab76052bb166c65901edb603a3e1f03ab">TM</a>.getNullPointerValue(DestAS));</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160; </div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;    <span class="keyword">auto</span> CmpRes = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildICmp(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP_NE</a>, <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1), Src,</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;                              SegmentNull.getReg(0));</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160; </div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildSelect(Dst, CmpRes, BuildPtr, FlatNull);</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160; </div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;  }</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160; </div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;  <span class="keywordflow">if</span> (DestAS == <a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3fa1caf1e287a5fe7250388d66ed72aa0c1">AMDGPUAS::CONSTANT_ADDRESS_32BIT</a> &amp;&amp;</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;      SrcTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() == 64) {</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;    <span class="comment">// Truncate.</span></div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildExtract(Dst, Src, 0);</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;  }</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160; </div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;  <span class="keywordflow">if</span> (SrcAS == <a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3fa1caf1e287a5fe7250388d66ed72aa0c1">AMDGPUAS::CONSTANT_ADDRESS_32BIT</a> &amp;&amp;</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;      DstTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() == 64) {</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SIMachineFunctionInfo.html">SIMachineFunctionInfo</a> *<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a> = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1SIMachineFunctionInfo.html">SIMachineFunctionInfo</a>&gt;();</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;    <a class="code" href="classuint32__t.html">uint32_t</a> AddrHiVal = <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>-&gt;get32BitAddressHighBits();</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;    <span class="keyword">auto</span> PtrLo = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildPtrToInt(S32, Src);</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;    <span class="keyword">auto</span> HighAddr = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(S32, AddrHiVal);</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildMergeLikeInstr(Dst, {PtrLo, HighAddr});</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;  }</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160; </div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;  <a class="code" href="classllvm_1_1DiagnosticInfoUnsupported.html">DiagnosticInfoUnsupported</a> InvalidAddrSpaceCast(</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;      MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>(), <span class="stringliteral">&quot;invalid addrspacecast&quot;</span>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getDebugLoc());</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160; </div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;Ctx = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#a9fffac2512fe651f0d5e37e27f5bd51c">getContext</a>();</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;  Ctx.<a class="code" href="classllvm_1_1LLVMContext.html#aad03ef5cfbe6e7cad076d9e45ba06592">diagnose</a>(InvalidAddrSpaceCast);</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUndef(Dst);</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;}</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160; </div>
<div class="line"><a name="l02047"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a6f7197d20955f93cdb3d88403ce7c040"> 2047</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a6f7197d20955f93cdb3d88403ce7c040">AMDGPULegalizerInfo::legalizeFrint</a>(</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;  <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Src);</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Ty.<a class="code" href="classllvm_1_1LLT.html#a3989251b1a714fc8296685f77eac6e87">isScalar</a>() &amp;&amp; Ty.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() == 64);</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160; </div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;  <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> C1Val(<a class="code" href="structllvm_1_1APFloatBase.html#a6ba7c3d54a5a714f7a27861ee114cce3">APFloat::IEEEdouble</a>(), <span class="stringliteral">&quot;0x1.0p+52&quot;</span>);</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;  <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> C2Val(<a class="code" href="structllvm_1_1APFloatBase.html#a6ba7c3d54a5a714f7a27861ee114cce3">APFloat::IEEEdouble</a>(), <span class="stringliteral">&quot;0x1.fffffffffffffp+51&quot;</span>);</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160; </div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;  <span class="keyword">auto</span> <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFConstant(Ty, C1Val);</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;  <span class="keyword">auto</span> CopySign = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFCopysign(Ty, <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, Src);</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160; </div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;  <span class="comment">// TODO: Should this propagate fast-math-flags?</span></div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;  <span class="keyword">auto</span> Tmp1 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFAdd(Ty, Src, CopySign);</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;  <span class="keyword">auto</span> Tmp2 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFSub(Ty, Tmp1, CopySign);</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160; </div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;  <span class="keyword">auto</span> C2 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFConstant(Ty, C2Val);</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;  <span class="keyword">auto</span> Fabs = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFAbs(Ty, Src);</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160; </div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;  <span class="keyword">auto</span> <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFCmp(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba4c399f525bbcf03d72af4b303e6eeca8">CmpInst::FCMP_OGT</a>, <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1), Fabs, C2);</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildSelect(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg(), <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, Src, Tmp2);</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;}</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160; </div>
<div class="line"><a name="l02073"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#ae468aab9eee24365f029a78836e6435d"> 2073</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#ae468aab9eee24365f029a78836e6435d">AMDGPULegalizerInfo::legalizeFceil</a>(</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;  <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160; </div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S1 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1);</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S64 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64);</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160; </div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Src) == S64);</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160; </div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;  <span class="comment">// result = trunc(src)</span></div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;  <span class="comment">// if (src &gt; 0.0 &amp;&amp; src != result)</span></div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;  <span class="comment">//   result += 1.0</span></div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160; </div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;  <span class="keyword">auto</span> Trunc = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildIntrinsicTrunc(S64, Src);</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160; </div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> Zero = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFConstant(S64, 0.0);</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> One = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFConstant(S64, 1.0);</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;  <span class="keyword">auto</span> Lt0 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFCmp(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba4c399f525bbcf03d72af4b303e6eeca8">CmpInst::FCMP_OGT</a>, S1, Src, Zero);</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;  <span class="keyword">auto</span> NeTrunc = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFCmp(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba8a80b27ca29fe2076b9bbdee02c65464">CmpInst::FCMP_ONE</a>, S1, Src, Trunc);</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildAnd(S1, Lt0, NeTrunc);</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;  <span class="keyword">auto</span> Add = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildSelect(S64, <a class="code" href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">And</a>, One, Zero);</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160; </div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;  <span class="comment">// TODO: Should this propagate fast-math-flags?</span></div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFAdd(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg(), Trunc, Add);</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;}</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160; </div>
<div class="line"><a name="l02102"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a594e9cb4df0c39f1f5263fb07273b19f"> 2102</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a594e9cb4df0c39f1f5263fb07273b19f">AMDGPULegalizerInfo::legalizeFrem</a>(</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;  <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> Src0Reg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> Src1Reg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;    <span class="keyword">auto</span> Flags = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags();</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(DstReg);</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160; </div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;    <span class="keyword">auto</span> Div = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFDiv(Ty, Src0Reg, Src1Reg, Flags);</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;    <span class="keyword">auto</span> Trunc = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildIntrinsicTrunc(Ty, Div, Flags);</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;    <span class="keyword">auto</span> Neg = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFNeg(Ty, Trunc, Flags);</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMA(DstReg, Neg, Src1Reg, Src0Reg, Flags);</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;}</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160; </div>
<div class="line"><a name="l02119"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#a47ea7f32b98178dbcb9bf3d1ff00daa1"> 2119</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a47ea7f32b98178dbcb9bf3d1ff00daa1">extractF64Exponent</a>(<a class="code" href="classllvm_1_1Register.html">Register</a> Hi,</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;                                              <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) {</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> FractBits = 52;</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> ExpBits = 11;</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> S32 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160; </div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;  <span class="keyword">auto</span> Const0 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(S32, FractBits - 32);</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;  <span class="keyword">auto</span> Const1 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(S32, ExpBits);</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160; </div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;  <span class="keyword">auto</span> ExpPart = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildIntrinsic(Intrinsic::amdgcn_ubfe, {S32}, <span class="keyword">false</span>)</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;    .addUse(Hi)</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;    .addUse(Const0.getReg(0))</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;    .addUse(Const1.getReg(0));</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160; </div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildSub(S32, ExpPart, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(S32, 1023));</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;}</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160; </div>
<div class="line"><a name="l02136"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a0e7378d479179ae1df0b61b83c637a4d"> 2136</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a0e7378d479179ae1df0b61b83c637a4d">AMDGPULegalizerInfo::legalizeIntrinsicTrunc</a>(</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;  <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S1 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1);</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S32 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S64 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64);</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160; </div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Src) == S64);</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160; </div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;  <span class="comment">// TODO: Should this use extract since the low half is unused?</span></div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;  <span class="keyword">auto</span> Unmerge = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUnmerge({S32, S32}, Src);</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Hi = Unmerge.getReg(1);</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160; </div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;  <span class="comment">// Extract the upper half, since this is where we will find the sign and</span></div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;  <span class="comment">// exponent.</span></div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;  <span class="keyword">auto</span> Exp = <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a47ea7f32b98178dbcb9bf3d1ff00daa1">extractF64Exponent</a>(Hi, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160; </div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> FractBits = 52;</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160; </div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;  <span class="comment">// Extract the sign bit.</span></div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> SignBitMask = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(S32, UINT32_C(1) &lt;&lt; 31);</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;  <span class="keyword">auto</span> SignBit = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildAnd(S32, Hi, SignBitMask);</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160; </div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> FractMask = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(S64, (UINT64_C(1) &lt;&lt; FractBits) - 1);</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160; </div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> Zero32 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(S32, 0);</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160; </div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;  <span class="comment">// Extend back to 64-bits.</span></div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;  <span class="keyword">auto</span> SignBit64 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildMergeLikeInstr(S64, {Zero32, SignBit});</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160; </div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;  <span class="keyword">auto</span> Shr = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildAShr(S64, FractMask, Exp);</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;  <span class="keyword">auto</span> Not = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildNot(S64, Shr);</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;  <span class="keyword">auto</span> Tmp0 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildAnd(S64, Src, Not);</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;  <span class="keyword">auto</span> FiftyOne = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(S32, FractBits - 1);</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160; </div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;  <span class="keyword">auto</span> ExpLt0 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildICmp(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">CmpInst::ICMP_SLT</a>, S1, Exp, Zero32);</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;  <span class="keyword">auto</span> ExpGt51 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildICmp(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">CmpInst::ICMP_SGT</a>, S1, Exp, FiftyOne);</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160; </div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;  <span class="keyword">auto</span> Tmp1 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildSelect(S64, ExpLt0, SignBit64, Tmp0);</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildSelect(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg(), ExpGt51, Src, Tmp1);</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;}</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160; </div>
<div class="line"><a name="l02181"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#abb023d557c720f8730e0c266c1cd0f9c"> 2181</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#abb023d557c720f8730e0c266c1cd0f9c">AMDGPULegalizerInfo::legalizeITOFP</a>(</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;  <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <span class="keywordtype">bool</span> <a class="code" href="NVPTXISelLowering_8cpp.html#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160; </div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160; </div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S64 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64);</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S32 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160; </div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Src) == S64);</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160; </div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;  <span class="keyword">auto</span> Unmerge = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUnmerge({S32, S32}, Src);</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;  <span class="keyword">auto</span> ThirtyTwo = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(S32, 32);</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160; </div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst) == S64) {</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;    <span class="keyword">auto</span> CvtHi = <a class="code" href="NVPTXISelLowering_8cpp.html#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a> ? <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildSITOFP(S64, Unmerge.getReg(1))</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;                        : <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUITOFP(S64, Unmerge.getReg(1));</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160; </div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;    <span class="keyword">auto</span> CvtLo = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUITOFP(S64, Unmerge.getReg(0));</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;    <span class="keyword">auto</span> LdExp = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildIntrinsic(Intrinsic::amdgcn_ldexp, {S64}, <span class="keyword">false</span>)</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;                     .addUse(CvtHi.getReg(0))</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;                     .addUse(ThirtyTwo.getReg(0));</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160; </div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;    <span class="comment">// TODO: Should this propagate fast-math-flags?</span></div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFAdd(Dst, LdExp, CvtLo);</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;  }</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160; </div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst) == S32);</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160; </div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;  <span class="keyword">auto</span> One = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(S32, 1);</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160; </div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> ShAmt;</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="NVPTXISelLowering_8cpp.html#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a>) {</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;    <span class="keyword">auto</span> ThirtyOne = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(S32, 31);</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;    <span class="keyword">auto</span> <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildXor(S32, Unmerge.getReg(0), Unmerge.getReg(1));</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;    <span class="keyword">auto</span> OppositeSign = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildAShr(S32, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, ThirtyOne);</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;    <span class="keyword">auto</span> MaxShAmt = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildAdd(S32, ThirtyTwo, OppositeSign);</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;    <span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28afdd8238d6005774fe2bb9067de76eb8c">LS</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildIntrinsic(Intrinsic::amdgcn_sffbh, {S32},</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;                               <span class="comment">/*HasSideEffects=*/</span><span class="keyword">false</span>)</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;                  .addUse(Unmerge.getReg(1));</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;    <span class="keyword">auto</span> LS2 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildSub(S32, <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28afdd8238d6005774fe2bb9067de76eb8c">LS</a>, One);</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;    ShAmt = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUMin(S32, LS2, MaxShAmt);</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;  } <span class="keywordflow">else</span></div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;    ShAmt = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildCTLZ(S32, Unmerge.getReg(1));</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;  <span class="keyword">auto</span> Norm = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildShl(S64, Src, ShAmt);</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;  <span class="keyword">auto</span> Unmerge2 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUnmerge({S32, S32}, Norm);</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;  <span class="keyword">auto</span> Adjust = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUMin(S32, One, Unmerge2.getReg(0));</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;  <span class="keyword">auto</span> Norm2 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildOr(S32, Unmerge2.getReg(1), Adjust);</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;  <span class="keyword">auto</span> FVal = <a class="code" href="NVPTXISelLowering_8cpp.html#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a> ? <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildSITOFP(S32, Norm2) : <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUITOFP(S32, Norm2);</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;  <span class="keyword">auto</span> Scale = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildSub(S32, ThirtyTwo, ShAmt);</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildIntrinsic(Intrinsic::amdgcn_ldexp, <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Register&gt;</a>{Dst},</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;                   <span class="comment">/*HasSideEffects=*/</span><span class="keyword">false</span>)</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;      .addUse(FVal.getReg(0))</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;      .addUse(Scale.getReg(0));</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;}</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160; </div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;<span class="comment">// TODO: Copied from DAG implementation. Verify logic and document how this</span></div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;<span class="comment">// actually works.</span></div>
<div class="line"><a name="l02244"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#ac6475a6b99e088697d90032ddab24447"> 2244</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#ac6475a6b99e088697d90032ddab24447">AMDGPULegalizerInfo::legalizeFPTOI</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;                                        <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;                                        <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;                                        <span class="keywordtype">bool</span> <a class="code" href="NVPTXISelLowering_8cpp.html#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160; </div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160; </div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S64 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64);</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S32 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160; </div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcLT = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Src);</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((SrcLT == S32 || SrcLT == S64) &amp;&amp; <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst) == S64);</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160; </div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;  <span class="keywordtype">unsigned</span> Flags = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags();</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160; </div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;  <span class="comment">// The basic idea of converting a floating point number into a pair of 32-bit</span></div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;  <span class="comment">// integers is illustrated as follows:</span></div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;  <span class="comment">//     tf := trunc(val);</span></div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;  <span class="comment">//    hif := floor(tf * 2^-32);</span></div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;  <span class="comment">//    lof := tf - hif * 2^32; // lof is always positive due to floor.</span></div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;  <span class="comment">//     hi := fptoi(hif);</span></div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;  <span class="comment">//     lo := fptoi(lof);</span></div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;  <span class="keyword">auto</span> Trunc = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildIntrinsicTrunc(SrcLT, Src, Flags);</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> Sign;</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="NVPTXISelLowering_8cpp.html#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a> &amp;&amp; SrcLT == S32) {</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;    <span class="comment">// However, a 32-bit floating point number has only 23 bits mantissa and</span></div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;    <span class="comment">// it&#39;s not enough to hold all the significant bits of `lof` if val is</span></div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;    <span class="comment">// negative. To avoid the loss of precision, We need to take the absolute</span></div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;    <span class="comment">// value after truncating and flip the result back based on the original</span></div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;    <span class="comment">// signedness.</span></div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;    Sign = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildAShr(S32, Src, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(S32, 31));</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;    Trunc = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFAbs(S32, Trunc, Flags);</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;  }</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> K0, K1;</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;  <span class="keywordflow">if</span> (SrcLT == S64) {</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;    K0 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFConstant(</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;        S64, llvm::bit_cast&lt;double&gt;(UINT64_C(<span class="comment">/*2^-32*/</span> 0x3df0000000000000)));</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;    K1 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFConstant(</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;        S64, llvm::bit_cast&lt;double&gt;(UINT64_C(<span class="comment">/*-2^32*/</span> 0xc1f0000000000000)));</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;    K0 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFConstant(</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;        S32, llvm::bit_cast&lt;float&gt;(UINT32_C(<span class="comment">/*2^-32*/</span> 0x2f800000)));</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;    K1 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFConstant(</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;        S32, llvm::bit_cast&lt;float&gt;(UINT32_C(<span class="comment">/*-2^32*/</span> 0xcf800000)));</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;  }</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160; </div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;  <span class="keyword">auto</span> <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMul(SrcLT, Trunc, K0, Flags);</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;  <span class="keyword">auto</span> FloorMul = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFFloor(SrcLT, <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>, Flags);</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;  <span class="keyword">auto</span> Fma = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMA(SrcLT, FloorMul, K1, Trunc, Flags);</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160; </div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;  <span class="keyword">auto</span> Hi = (<a class="code" href="NVPTXISelLowering_8cpp.html#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a> &amp;&amp; SrcLT == S64) ? <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFPTOSI(S32, FloorMul)</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;                                     : <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFPTOUI(S32, FloorMul);</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;  <span class="keyword">auto</span> Lo = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFPTOUI(S32, Fma);</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160; </div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="NVPTXISelLowering_8cpp.html#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a> &amp;&amp; SrcLT == S32) {</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;    <span class="comment">// Flip the result based on the signedness, which is either all 0s or 1s.</span></div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;    Sign = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildMergeLikeInstr(S64, {Sign, Sign});</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;    <span class="comment">// r := xor({lo, hi}, sign) - sign;</span></div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildSub(Dst, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildXor(S64, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildMergeLikeInstr(S64, {Lo, Hi}), Sign),</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;               Sign);</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;  } <span class="keywordflow">else</span></div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildMergeLikeInstr(Dst, {Lo, Hi});</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160; </div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;}</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160; </div>
<div class="line"><a name="l02314"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a91b85787aa32d7f1f0d38d59a77cee68"> 2314</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a91b85787aa32d7f1f0d38d59a77cee68">AMDGPULegalizerInfo::legalizeMinNumMaxNum</a>(<a class="code" href="classllvm_1_1LegalizerHelper.html">LegalizerHelper</a> &amp;Helper,</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;                                               <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = Helper.<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>.<a class="code" href="classllvm_1_1MachineIRBuilder.html#ac0ca0a03e016a6da0766af3c725a7c47">getMF</a>();</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SIMachineFunctionInfo.html">SIMachineFunctionInfo</a> *MFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1SIMachineFunctionInfo.html">SIMachineFunctionInfo</a>&gt;();</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160; </div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> IsIEEEOp = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == AMDGPU::G_FMINNUM_IEEE ||</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;                        <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == AMDGPU::G_FMAXNUM_IEEE;</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160; </div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;  <span class="comment">// With ieee_mode disabled, the instructions have the correct behavior</span></div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;  <span class="comment">// already for G_FMINNUM/G_FMAXNUM</span></div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;  <span class="keywordflow">if</span> (!MFI-&gt;<a class="code" href="classllvm_1_1SIMachineFunctionInfo.html#aa3c9b23b5cd32396cbf267f31becca3f">getMode</a>().<a class="code" href="structllvm_1_1AMDGPU_1_1SIModeRegisterDefaults.html#a05d4f9c4d9e486f4fd3d69a89121e107">IEEE</a>)</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;    <span class="keywordflow">return</span> !IsIEEEOp;</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160; </div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;  <span class="keywordflow">if</span> (IsIEEEOp)</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160; </div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;  <span class="keywordflow">return</span> Helper.<a class="code" href="classllvm_1_1LegalizerHelper.html#a105bd213837c5c2e30520113d885b8f3">lowerFMinNumMaxNum</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) == <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">LegalizerHelper::Legalized</a>;</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;}</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160; </div>
<div class="line"><a name="l02333"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#aec28181fa8c84646c097212f19e379f1"> 2333</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#aec28181fa8c84646c097212f19e379f1">AMDGPULegalizerInfo::legalizeExtractVectorElt</a>(</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;  <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;  <span class="comment">// TODO: Should move some of this into LegalizerHelper.</span></div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160; </div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;  <span class="comment">// TODO: Promote dynamic indexing of s16 to s32</span></div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160; </div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;  <span class="comment">// FIXME: Artifact combiner probably should have replaced the truncated</span></div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;  <span class="comment">// constant before this, so we shouldn&#39;t need</span></div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;  <span class="comment">// getIConstantVRegValWithLookThrough.</span></div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;  std::optional&lt;ValueAndVReg&gt; MaybeIdxVal =</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;      <a class="code" href="namespacellvm.html#ac76eb82370e997f967454f441effbbff">getIConstantVRegValWithLookThrough</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg(), <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>);</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;  <span class="keywordflow">if</span> (!MaybeIdxVal) <span class="comment">// Dynamic case will be selected to register indexing.</span></div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;  <span class="keyword">const</span> <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> IdxVal = MaybeIdxVal-&gt;Value.<a class="code" href="classllvm_1_1APInt.html#a217e0207d9cc8e046c2dccbf0e4bb198">getZExtValue</a>();</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160; </div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Vec = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160; </div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> VecTy = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Vec);</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> EltTy = VecTy.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>();</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(EltTy == <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst));</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160; </div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;  <span class="keywordflow">if</span> (IdxVal &lt; VecTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>()) {</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;    <span class="keyword">auto</span> Unmerge = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUnmerge(EltTy, Vec);</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildCopy(Dst, Unmerge.getReg(IdxVal));</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUndef(Dst);</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;  }</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160; </div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;}</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160; </div>
<div class="line"><a name="l02367"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a762e3485a3d139ec7ed9d30a7f38f74d"> 2367</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a762e3485a3d139ec7ed9d30a7f38f74d">AMDGPULegalizerInfo::legalizeInsertVectorElt</a>(</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;  <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;  <span class="comment">// TODO: Should move some of this into LegalizerHelper.</span></div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160; </div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;  <span class="comment">// TODO: Promote dynamic indexing of s16 to s32</span></div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160; </div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;  <span class="comment">// FIXME: Artifact combiner probably should have replaced the truncated</span></div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;  <span class="comment">// constant before this, so we shouldn&#39;t need</span></div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;  <span class="comment">// getIConstantVRegValWithLookThrough.</span></div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;  std::optional&lt;ValueAndVReg&gt; MaybeIdxVal =</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;      <a class="code" href="namespacellvm.html#ac76eb82370e997f967454f441effbbff">getIConstantVRegValWithLookThrough</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getReg(), <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>);</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;  <span class="keywordflow">if</span> (!MaybeIdxVal) <span class="comment">// Dynamic case will be selected to register indexing.</span></div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160; </div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;  <span class="keyword">const</span> <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> IdxVal = MaybeIdxVal-&gt;Value.<a class="code" href="classllvm_1_1APInt.html#a217e0207d9cc8e046c2dccbf0e4bb198">getZExtValue</a>();</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Vec = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69bad5006873d15f9569d1cf09deef3c6363">Ins</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160; </div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> VecTy = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Vec);</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> EltTy = VecTy.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>();</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(EltTy == <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69bad5006873d15f9569d1cf09deef3c6363">Ins</a>));</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;  (void)<a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69bad5006873d15f9569d1cf09deef3c6363">Ins</a>;</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160; </div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;  <span class="keywordtype">unsigned</span> NumElts = VecTy.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>();</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;  <span class="keywordflow">if</span> (IdxVal &lt; NumElts) {</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 8&gt;</a> SrcRegs;</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumElts; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;      SrcRegs.push_back(<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(EltTy));</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUnmerge(SrcRegs, Vec);</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160; </div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;    SrcRegs[IdxVal] = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildMergeLikeInstr(Dst, SrcRegs);</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUndef(Dst);</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;  }</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160; </div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;}</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160; </div>
<div class="line"><a name="l02409"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#aaac467545afeead836946e5842563fea"> 2409</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#aaac467545afeead836946e5842563fea">AMDGPULegalizerInfo::legalizeSinCos</a>(</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;  <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160; </div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> SrcReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(DstReg);</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;  <span class="keywordtype">unsigned</span> Flags = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags();</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160; </div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> TrigVal;</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;  <span class="keyword">auto</span> OneOver2Pi = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFConstant(Ty, 0.5 * <a class="code" href="namespacellvm_1_1numbers.html#a3a6cc17866b369b529f20fbb54183134">numbers::inv_pi</a>);</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;  <span class="keywordflow">if</span> (ST.<a class="code" href="classllvm_1_1AMDGPUSubtarget.html#aa6975b36563949898665ba4634f54eb8">hasTrigReducedRange</a>()) {</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;    <span class="keyword">auto</span> MulVal = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMul(Ty, SrcReg, OneOver2Pi, Flags);</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;    TrigVal = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildIntrinsic(Intrinsic::amdgcn_fract, {Ty}, <span class="keyword">false</span>)</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;      .addUse(MulVal.getReg(0))</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;      .setMIFlags(Flags).getReg(0);</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;  } <span class="keywordflow">else</span></div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;    TrigVal = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMul(Ty, SrcReg, OneOver2Pi, Flags).getReg(0);</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160; </div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;  <a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">Intrinsic::ID</a> TrigIntrin = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == AMDGPU::G_FSIN ?</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;    Intrinsic::amdgcn_sin : Intrinsic::amdgcn_cos;</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildIntrinsic(TrigIntrin, <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Register&gt;</a>(DstReg), <span class="keyword">false</span>)</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;      .addUse(TrigVal)</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;      .setMIFlags(Flags);</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;}</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160; </div>
<div class="line"><a name="l02437"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a6006bd8b7a7155240e3a11c12d104c50"> 2437</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a6006bd8b7a7155240e3a11c12d104c50">AMDGPULegalizerInfo::buildPCRelGlobalAddress</a>(<a class="code" href="classllvm_1_1Register.html">Register</a> DstReg, <a class="code" href="classllvm_1_1LLT.html">LLT</a> PtrTy,</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;                                                  <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;                                                  <span class="keyword">const</span> <a class="code" href="classllvm_1_1GlobalValue.html">GlobalValue</a> *GV,</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;                                                  int64_t <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>,</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;                                                  <span class="keywordtype">unsigned</span> GAFlags)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isInt&lt;32&gt;(<a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> + 4) &amp;&amp; <span class="stringliteral">&quot;32-bit offset is expected!&quot;</span>);</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;  <span class="comment">// In order to support pc-relative addressing, SI_PC_ADD_REL_OFFSET is lowered</span></div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;  <span class="comment">// to the following code sequence:</span></div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;  <span class="comment">// For constant address space:</span></div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;  <span class="comment">//   s_getpc_b64 s[0:1]</span></div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;  <span class="comment">//   s_add_u32 s0, s0, $symbol</span></div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;  <span class="comment">//   s_addc_u32 s1, s1, 0</span></div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;  <span class="comment">//   s_getpc_b64 returns the address of the s_add_u32 instruction and then</span></div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;  <span class="comment">//   a fixup or relocation is emitted to replace $symbol with a literal</span></div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;  <span class="comment">//   constant, which is a pc-relative offset from the encoding of the $symbol</span></div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;  <span class="comment">//   operand to the global variable.</span></div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;  <span class="comment">// For global address space:</span></div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;  <span class="comment">//   s_getpc_b64 s[0:1]</span></div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;  <span class="comment">//   s_add_u32 s0, s0, $symbol@{gotpc}rel32@lo</span></div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;  <span class="comment">//   s_addc_u32 s1, s1, $symbol@{gotpc}rel32@hi</span></div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;  <span class="comment">//   s_getpc_b64 returns the address of the s_add_u32 instruction and then</span></div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;  <span class="comment">//   fixups or relocations are emitted to replace $symbol@*@lo and</span></div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;  <span class="comment">//   $symbol@*@hi with lower 32 bits and higher 32 bits of a literal constant,</span></div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;  <span class="comment">//   which is a 64-bit pc-relative offset from the encoding of the $symbol</span></div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;  <span class="comment">//   operand to the global variable.</span></div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;  <span class="comment">// What we want here is an offset from the value returned by s_getpc</span></div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;  <span class="comment">// (which is the address of the s_add_u32 instruction) to the global</span></div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;  <span class="comment">// variable, but since the encoding of $symbol starts 4 bytes after the start</span></div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;  <span class="comment">// of the s_add_u32 instruction, we end up with an offset that is 4 bytes too</span></div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;  <span class="comment">// small. This requires us to add 4 to the global variable offset in order to</span></div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;  <span class="comment">// compute the correct address. Similarly for the s_addc_u32 instruction, the</span></div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;  <span class="comment">// encoding of $symbol starts 12 bytes after the start of the s_add_u32</span></div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;  <span class="comment">// instruction.</span></div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160; </div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> ConstPtrTy = <a class="code" href="classllvm_1_1LLT.html#a7ff0361855acbbe71b15b8dc6003fbc5">LLT::pointer</a>(<a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3faa6d3112da64eecbdbb50aacb5f8251e8">AMDGPUAS::CONSTANT_ADDRESS</a>, 64);</div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160; </div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> PCReg = PtrTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() != 32 ? DstReg :</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMRI()-&gt;createGenericVirtualRegister(ConstPtrTy);</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160; </div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a> MIB = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildInstr(AMDGPU::SI_PC_ADD_REL_OFFSET)</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;    .addDef(PCReg);</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160; </div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;  MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a3fba722f44bac58d79e82bd232525152">addGlobalAddress</a>(GV, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> + 4, GAFlags);</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;  <span class="keywordflow">if</span> (GAFlags == <a class="code" href="classllvm_1_1SIInstrInfo.html#ade90146180a53b9d9edc077b933e70bbab9b475527cd46e49f6208722a1034e92">SIInstrInfo::MO_NONE</a>)</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;    MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(0);</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;    MIB.<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a3fba722f44bac58d79e82bd232525152">addGlobalAddress</a>(GV, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> + 12, GAFlags + 1);</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160; </div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMRI()-&gt;setRegClass(PCReg, &amp;AMDGPU::SReg_64RegClass);</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160; </div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;  <span class="keywordflow">if</span> (PtrTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() == 32)</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildExtract(DstReg, PCReg, 0);</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160; }</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160; </div>
<div class="line"><a name="l02497"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a04975f118b224e8cd322d1aa86f2ceb2"> 2497</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a04975f118b224e8cd322d1aa86f2ceb2">AMDGPULegalizerInfo::legalizeGlobalValue</a>(</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;  <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(DstReg);</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;  <span class="keywordtype">unsigned</span> AS = Ty.<a class="code" href="classllvm_1_1LLT.html#ac33fa4c8cfeb9287f51f95404a459de8">getAddressSpace</a>();</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160; </div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1GlobalValue.html">GlobalValue</a> *GV = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getGlobal();</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMF();</div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;  <a class="code" href="classllvm_1_1SIMachineFunctionInfo.html">SIMachineFunctionInfo</a> *MFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1SIMachineFunctionInfo.html">SIMachineFunctionInfo</a>&gt;();</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160; </div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;  <span class="keywordflow">if</span> (AS == <a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3fa77b1c964e2ff99057bf5e75140457abe">AMDGPUAS::LOCAL_ADDRESS</a> || AS == <a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3fa5b71ba6fa435ec288aba849e113721a7">AMDGPUAS::REGION_ADDRESS</a>) {</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;    <span class="keywordflow">if</span> (!MFI-&gt;<a class="code" href="classllvm_1_1AMDGPUMachineFunction.html#ac1af3affe7a4cee4c8f08afbd7e20282">isModuleEntryFunction</a>() &amp;&amp;</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;        !GV-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>().<a class="code" href="classllvm_1_1StringRef.html#aa3595f2a07a2268edcfbf41ffa40cabf">equals</a>(<span class="stringliteral">&quot;llvm.amdgcn.module.lds&quot;</span>)) {</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;Fn = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>();</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;      <a class="code" href="classllvm_1_1DiagnosticInfoUnsupported.html">DiagnosticInfoUnsupported</a> BadLDSDecl(</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;        Fn, <span class="stringliteral">&quot;local memory global used by non-kernel function&quot;</span>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getDebugLoc(),</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;        <a class="code" href="namespacellvm.html#abfcab32516704f11d146c757f402ad5ca1cde8c8828756cdaf2a93260e247ae31">DS_Warning</a>);</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;      Fn.<a class="code" href="classllvm_1_1Function.html#a9fffac2512fe651f0d5e37e27f5bd51c">getContext</a>().<a class="code" href="classllvm_1_1LLVMContext.html#aad03ef5cfbe6e7cad076d9e45ba06592">diagnose</a>(BadLDSDecl);</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160; </div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;      <span class="comment">// We currently don&#39;t have a way to correctly allocate LDS objects that</span></div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;      <span class="comment">// aren&#39;t directly associated with a kernel. We do force inlining of</span></div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;      <span class="comment">// functions that use local objects. However, if these dead functions are</span></div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;      <span class="comment">// not eliminated, we don&#39;t want a compile time error. Just emit a warning</span></div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;      <span class="comment">// and a trap, since there should be no callable path here.</span></div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildIntrinsic(Intrinsic::trap, <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Register&gt;</a>(), <span class="keyword">true</span>);</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUndef(DstReg);</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;    }</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160; </div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;    <span class="comment">// TODO: We could emit code to handle the initialization somewhere.</span></div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;    <span class="comment">// We ignore the initializer for now and legalize it to allow selection.</span></div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;    <span class="comment">// The initializer will anyway get errored out during assembly emission.</span></div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SITargetLowering.html">SITargetLowering</a> *TLI = ST.<a class="code" href="classllvm_1_1GCNSubtarget.html#aadc55ee80218e97fbccb05099877eb51">getTargetLowering</a>();</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;    <span class="keywordflow">if</span> (!TLI-&gt;<a class="code" href="classllvm_1_1SITargetLowering.html#ab870ac74feb45bb48a75027da41c0784">shouldUseLDSConstAddress</a>(GV)) {</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).setTargetFlags(<a class="code" href="classllvm_1_1SIInstrInfo.html#ade90146180a53b9d9edc077b933e70bbafe82a0bc03151bffd10d66929b1ed545">SIInstrInfo::MO_ABS32_LO</a>);</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">// Leave in place;</span></div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;    }</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160; </div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;    <span class="keywordflow">if</span> (AS == <a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3fa77b1c964e2ff99057bf5e75140457abe">AMDGPUAS::LOCAL_ADDRESS</a> &amp;&amp; GV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a1847e956a0087fefdb49e2a9583c7d18">hasExternalLinkage</a>()) {</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = GV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a29e0b1c558b350347e2652b35b26fea8">getValueType</a>();</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;      <span class="comment">// HIP uses an unsized array `extern __shared__ T s[]` or similar</span></div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;      <span class="comment">// zero-sized type in other languages to declare the dynamic shared</span></div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;      <span class="comment">// memory which size is not known at the compile time. They will be</span></div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;      <span class="comment">// allocated by the runtime and placed directly after the static</span></div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;      <span class="comment">// allocated ones. They all share the same offset.</span></div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getDataLayout().getTypeAllocSize(Ty).isZero()) {</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;        <span class="comment">// Adjust alignment for that dynamic shared memory array.</span></div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;        MFI-&gt;<a class="code" href="classllvm_1_1AMDGPUMachineFunction.html#a7f7f60c7a80cc2debd00a9bded1e0b06">setDynLDSAlign</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getDataLayout(), *cast&lt;GlobalVariable&gt;(GV));</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;        <a class="code" href="classllvm_1_1LLT.html">LLT</a> S32 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;        <span class="keyword">auto</span> Sz =</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;            <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildIntrinsic(Intrinsic::amdgcn_groupstaticsize, {S32}, <span class="keyword">false</span>);</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;        <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildIntToPtr(DstReg, Sz);</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;        <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;      }</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;    }</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160; </div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(DstReg, MFI-&gt;<a class="code" href="classllvm_1_1AMDGPUMachineFunction.html#aafb5cd8f55deecfdc2acb25c44491a36">allocateLDSGlobal</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getDataLayout(),</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;                                                   *cast&lt;GlobalVariable&gt;(GV)));</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;  }</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160; </div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SITargetLowering.html">SITargetLowering</a> *TLI = ST.<a class="code" href="classllvm_1_1GCNSubtarget.html#aadc55ee80218e97fbccb05099877eb51">getTargetLowering</a>();</div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160; </div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;  <span class="keywordflow">if</span> (TLI-&gt;<a class="code" href="classllvm_1_1SITargetLowering.html#a88e01d7fa3f418c441946a2200eb12c0">shouldEmitFixup</a>(GV)) {</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;    <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a6006bd8b7a7155240e3a11c12d104c50">buildPCRelGlobalAddress</a>(DstReg, Ty, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, GV, 0);</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;  }</div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160; </div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;  <span class="keywordflow">if</span> (TLI-&gt;<a class="code" href="classllvm_1_1SITargetLowering.html#acf18fd06c03bc65cbbf30fe2dc9201e0">shouldEmitPCReloc</a>(GV)) {</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;    <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a6006bd8b7a7155240e3a11c12d104c50">buildPCRelGlobalAddress</a>(DstReg, Ty, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, GV, 0, <a class="code" href="classllvm_1_1SIInstrInfo.html#ade90146180a53b9d9edc077b933e70bba563c4436cfc2d24b41acd1cfd4357977">SIInstrInfo::MO_REL32</a>);</div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;  }</div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160; </div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> PtrTy = <a class="code" href="classllvm_1_1LLT.html#a7ff0361855acbbe71b15b8dc6003fbc5">LLT::pointer</a>(<a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3faa6d3112da64eecbdbb50aacb5f8251e8">AMDGPUAS::CONSTANT_ADDRESS</a>, 64);</div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> GOTAddr = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(PtrTy);</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160; </div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> LoadTy = Ty.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() == 32 ? PtrTy : Ty;</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;  <a class="code" href="classllvm_1_1MachineMemOperand.html">MachineMemOperand</a> *GOTMMO = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a0d496cc15e312863869a384532968143">getMachineMemOperand</a>(</div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;      <a class="code" href="structllvm_1_1MachinePointerInfo.html#aa70144cee705b3f0db7f53ff3bf004e9">MachinePointerInfo::getGOT</a>(MF),</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;      <a class="code" href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2dda7d12be6206e5b0026c71bbcd5cb76494">MachineMemOperand::MOLoad</a> | <a class="code" href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2dda7b999a936bc7a4d45dfadbe356e77b3f">MachineMemOperand::MODereferenceable</a> |</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;          <a class="code" href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2ddac63dd9c4fe69bfeaac7a363fda846ac6">MachineMemOperand::MOInvariant</a>,</div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;      LoadTy, <a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(8));</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160; </div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;  <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a6006bd8b7a7155240e3a11c12d104c50">buildPCRelGlobalAddress</a>(GOTAddr, PtrTy, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, GV, 0, <a class="code" href="classllvm_1_1SIInstrInfo.html#ade90146180a53b9d9edc077b933e70bbaf8bf104f053c930813dce1aa8b9f9f7c">SIInstrInfo::MO_GOTPCREL32</a>);</div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160; </div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;  <span class="keywordflow">if</span> (Ty.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() == 32) {</div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;    <span class="comment">// Truncate if this is a 32-bit constant address.</span></div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;    <span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildLoad(PtrTy, GOTAddr, *GOTMMO);</div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildExtract(DstReg, <a class="code" href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">Load</a>, 0);</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;  } <span class="keywordflow">else</span></div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildLoad(DstReg, GOTAddr, *GOTMMO);</div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160; </div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;}</div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160; </div>
<div class="line"><a name="l02599"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#acbd3ab3957032feb181df036bb6a8d27"> 2599</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#acbd3ab3957032feb181df036bb6a8d27">widenToNextPowerOf2</a>(<a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty) {</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;  <span class="keywordflow">if</span> (Ty.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>())</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;    <span class="keywordflow">return</span> Ty.<a class="code" href="classllvm_1_1LLT.html#adabd45e67a1847750a117317b5ef8f9f">changeElementCount</a>(</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;        <a class="code" href="classllvm_1_1ElementCount.html#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(<a class="code" href="namespacellvm.html#a5542d44947f8d964b5ce3b20ea719b44">PowerOf2Ceil</a>(Ty.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>())));</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(<a class="code" href="namespacellvm.html#a5542d44947f8d964b5ce3b20ea719b44">PowerOf2Ceil</a>(Ty.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>()));</div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;}</div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160; </div>
<div class="line"><a name="l02606"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#af13d2c38b3bf7586a8f07d511eda68e8"> 2606</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#af13d2c38b3bf7586a8f07d511eda68e8">AMDGPULegalizerInfo::legalizeLoad</a>(<a class="code" href="classllvm_1_1LegalizerHelper.html">LegalizerHelper</a> &amp;Helper,</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;                                       <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;  <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> = Helper.<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>;</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;  <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMRI();</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;  <a class="code" href="classllvm_1_1GISelChangeObserver.html">GISelChangeObserver</a> &amp;Observer = Helper.<a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>;</div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160; </div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> PtrReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> PtrTy = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(PtrReg);</div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;  <span class="keywordtype">unsigned</span> AddrSpace = PtrTy.<a class="code" href="classllvm_1_1LLT.html#ac33fa4c8cfeb9287f51f95404a459de8">getAddressSpace</a>();</div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160; </div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;  <span class="keywordflow">if</span> (AddrSpace == <a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3fa1caf1e287a5fe7250388d66ed72aa0c1">AMDGPUAS::CONSTANT_ADDRESS_32BIT</a>) {</div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> ConstPtr = <a class="code" href="classllvm_1_1LLT.html#a7ff0361855acbbe71b15b8dc6003fbc5">LLT::pointer</a>(<a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3faa6d3112da64eecbdbb50aacb5f8251e8">AMDGPUAS::CONSTANT_ADDRESS</a>, 64);</div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;    <span class="keyword">auto</span> Cast = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildAddrSpaceCast(ConstPtr, PtrReg);</div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;    Observer.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).setReg(Cast.getReg(0));</div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;    Observer.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;  }</div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160; </div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() != AMDGPU::G_LOAD)</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160; </div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> ValReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> ValTy = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(ValReg);</div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160; </div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;  <a class="code" href="classllvm_1_1MachineMemOperand.html">MachineMemOperand</a> *MMO = *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.memoperands_begin();</div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> ValSize = ValTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> MemTy = MMO-&gt;<a class="code" href="classllvm_1_1MachineMemOperand.html#a3e9d2a9063bce7f5b3d7dd21fd05c79d">getMemoryType</a>();</div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;  <span class="keyword">const</span> <a class="code" href="structllvm_1_1Align.html">Align</a> MemAlign = MMO-&gt;<a class="code" href="classllvm_1_1MachineMemOperand.html#abc15369ab4cc583332950b913e2ef1dd">getAlign</a>();</div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> MemSize = MemTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;  <span class="keyword">const</span> <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> AlignInBits = 8 * MemAlign.<a class="code" href="structllvm_1_1Align.html#a80735739b49cf97a491922c8f9af2cc1">value</a>();</div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160; </div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;  <span class="comment">// Widen non-power-of-2 loads to the alignment if needed</span></div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AMDGPULegalizerInfo_8cpp.html#a2d595a51e66614b8adb83efbc8114401">shouldWidenLoad</a>(ST, MemTy, AlignInBits, AddrSpace, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode())) {</div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> WideMemSize = <a class="code" href="namespacellvm.html#a5542d44947f8d964b5ce3b20ea719b44">PowerOf2Ceil</a>(MemSize);</div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160; </div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;    <span class="comment">// This was already the correct extending load result type, so just adjust</span></div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;    <span class="comment">// the memory type.</span></div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;    <span class="keywordflow">if</span> (WideMemSize == ValSize) {</div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;      <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMF();</div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160; </div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;      <a class="code" href="classllvm_1_1MachineMemOperand.html">MachineMemOperand</a> *WideMMO =</div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;          MF.<a class="code" href="classllvm_1_1MachineFunction.html#a0d496cc15e312863869a384532968143">getMachineMemOperand</a>(MMO, 0, WideMemSize / 8);</div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;      Observer.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.setMemRefs(MF, {WideMMO});</div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;      Observer.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;    }</div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160; </div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;    <span class="comment">// Don&#39;t bother handling edge case that should probably never be produced.</span></div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;    <span class="keywordflow">if</span> (ValSize &gt; WideMemSize)</div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160; </div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> WideTy = <a class="code" href="AMDGPULegalizerInfo_8cpp.html#acbd3ab3957032feb181df036bb6a8d27">widenToNextPowerOf2</a>(ValTy);</div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160; </div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> WideLoad;</div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;    <span class="keywordflow">if</span> (!WideTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>()) {</div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;      WideLoad = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildLoadFromOffset(WideTy, PtrReg, *MMO, 0).getReg(0);</div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildTrunc(ValReg, WideLoad).getReg(0);</div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;      <span class="comment">// Extract the subvector.</span></div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160; </div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="AMDGPULegalizerInfo_8cpp.html#a2ea867ab6af309ac37d89c0ac9242600">isRegisterType</a>(ValTy)) {</div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;        <span class="comment">// If this a case where G_EXTRACT is legal, use it.</span></div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;        <span class="comment">// (e.g. &lt;3 x s32&gt; -&gt; &lt;4 x s32&gt;)</span></div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;        WideLoad = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildLoadFromOffset(WideTy, PtrReg, *MMO, 0).getReg(0);</div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;        <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildExtract(ValReg, WideLoad, 0);</div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;        <span class="comment">// For cases where the widened type isn&#39;t a nice register value, unmerge</span></div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;        <span class="comment">// from a widened register (e.g. &lt;3 x s16&gt; -&gt; &lt;4 x s16&gt;)</span></div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;        WideLoad = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildLoadFromOffset(WideTy, PtrReg, *MMO, 0).getReg(0);</div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;        <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildDeleteTrailingVectorElements(ValReg, WideLoad);</div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;      }</div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;    }</div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160; </div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;  }</div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160; </div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;}</div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160; </div>
<div class="line"><a name="l02688"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a4774d239d20e55380840e775aed66efc"> 2688</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a4774d239d20e55380840e775aed66efc">AMDGPULegalizerInfo::legalizeFMad</a>(</div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;  <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg());</div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Ty.<a class="code" href="classllvm_1_1LLT.html#a3989251b1a714fc8296685f77eac6e87">isScalar</a>());</div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160; </div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMF();</div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SIMachineFunctionInfo.html">SIMachineFunctionInfo</a> *MFI = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">getInfo</a>&lt;<a class="code" href="classllvm_1_1SIMachineFunctionInfo.html">SIMachineFunctionInfo</a>&gt;();</div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160; </div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;  <span class="comment">// TODO: Always legal with future ftz flag.</span></div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;  <span class="comment">// FIXME: Do we need just output?</span></div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;  <span class="keywordflow">if</span> (Ty == <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32) &amp;&amp; !MFI-&gt;<a class="code" href="classllvm_1_1SIMachineFunctionInfo.html#aa3c9b23b5cd32396cbf267f31becca3f">getMode</a>().<a class="code" href="structllvm_1_1AMDGPU_1_1SIModeRegisterDefaults.html#a0ef164720b5caf7cfa0f82014098052f">allFP32Denormals</a>())</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;  <span class="keywordflow">if</span> (Ty == <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(16) &amp;&amp; !MFI-&gt;<a class="code" href="classllvm_1_1SIMachineFunctionInfo.html#aa3c9b23b5cd32396cbf267f31becca3f">getMode</a>().<a class="code" href="structllvm_1_1AMDGPU_1_1SIModeRegisterDefaults.html#a3d440dcf070de6b886a26184866b78b5">allFP64FP16Denormals</a>())</div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160; </div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;  <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> HelperBuilder(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;  <a class="code" href="classllvm_1_1GISelObserverWrapper.html">GISelObserverWrapper</a> DummyObserver;</div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html">LegalizerHelper</a> Helper(MF, DummyObserver, HelperBuilder);</div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;  <span class="keywordflow">return</span> Helper.<a class="code" href="classllvm_1_1LegalizerHelper.html#aac36a82fb8a9d486c3b59ccab7769e4d">lowerFMad</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) == <a class="code" href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">LegalizerHelper::Legalized</a>;</div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;}</div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160; </div>
<div class="line"><a name="l02710"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a22a60a10a1cda01d7cef79f4634984dc"> 2710</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a22a60a10a1cda01d7cef79f4634984dc">AMDGPULegalizerInfo::legalizeAtomicCmpXChg</a>(</div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> PtrReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> CmpVal = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> NewVal = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getReg();</div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160; </div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm_1_1AMDGPU.html#a22dc5c679c09756d04fe07f9e22baf84">AMDGPU::isFlatGlobalAddrSpace</a>(<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(PtrReg).<a class="code" href="classllvm_1_1LLT.html#ac33fa4c8cfeb9287f51f95404a459de8">getAddressSpace</a>()) &amp;&amp;</div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;         <span class="stringliteral">&quot;this should not have been custom lowered&quot;</span>);</div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160; </div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> ValTy = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(CmpVal);</div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> VecTy = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(2, ValTy);</div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160; </div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> PackedVal = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildBuildVector(VecTy, { NewVal, CmpVal }).<a class="code" href="MipsDisassembler_8cpp.html#a15b5b86944f6df97d2c3659d77f51f91">getReg</a>(0);</div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160; </div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildInstr(AMDGPU::G_AMDGPU_ATOMIC_CMPXCHG)</div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;    .addDef(DstReg)</div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;    .addUse(PtrReg)</div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;    .addUse(PackedVal)</div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;    .setMemRefs(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.memoperands());</div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160; </div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;}</div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160; </div>
<div class="line"><a name="l02735"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a5229692968517de20adc8a76f8cdc736"> 2735</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a5229692968517de20adc8a76f8cdc736">AMDGPULegalizerInfo::legalizeFlog</a>(</div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <span class="keywordtype">double</span> Log2BaseInverted)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMRI()-&gt;getType(Dst);</div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;  <span class="keywordtype">unsigned</span> Flags = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags();</div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160; </div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;  <span class="keyword">auto</span> Log2Operand = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFLog2(Ty, Src, Flags);</div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;  <span class="keyword">auto</span> Log2BaseInvertedOperand = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFConstant(Ty, Log2BaseInverted);</div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160; </div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMul(Dst, Log2Operand, Log2BaseInvertedOperand, Flags);</div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;}</div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160; </div>
<div class="line"><a name="l02750"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a5552c2fa1505412508e493149af31543"> 2750</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a5552c2fa1505412508e493149af31543">AMDGPULegalizerInfo::legalizeFExp</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;                                       <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;  <span class="keywordtype">unsigned</span> Flags = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags();</div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMRI()-&gt;getType(Dst);</div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160; </div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;  <span class="keyword">auto</span> K = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFConstant(Ty, <a class="code" href="namespacellvm_1_1numbers.html#ade6685e01ad5a5f6cb3dc9cfa7a59a4f">numbers::log2e</a>);</div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;  <span class="keyword">auto</span> <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMul(Ty, Src, K, Flags);</div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFExp2(Dst, <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>, Flags);</div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;}</div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160; </div>
<div class="line"><a name="l02764"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#abf712aff736a372430ea6ea027fe32e5"> 2764</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#abf712aff736a372430ea6ea027fe32e5">AMDGPULegalizerInfo::legalizeFPow</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;                                       <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src0 = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src1 = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;  <span class="keywordtype">unsigned</span> Flags = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags();</div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMRI()-&gt;getType(Dst);</div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S16 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(16);</div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S32 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160; </div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;  <span class="keywordflow">if</span> (Ty == S32) {</div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;    <span class="keyword">auto</span> Log = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFLog2(S32, Src0, Flags);</div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;    <span class="keyword">auto</span> <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildIntrinsic(Intrinsic::amdgcn_fmul_legacy, {S32}, <span class="keyword">false</span>)</div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;      .addUse(Log.getReg(0))</div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;      .addUse(Src1)</div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;      .setMIFlags(Flags);</div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFExp2(Dst, <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>, Flags);</div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Ty == S16) {</div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;    <span class="comment">// There&#39;s no f16 fmul_legacy, so we need to convert for it.</span></div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;    <span class="keyword">auto</span> Log = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFLog2(S16, Src0, Flags);</div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;    <span class="keyword">auto</span> Ext0 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFPExt(S32, Log, Flags);</div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;    <span class="keyword">auto</span> Ext1 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFPExt(S32, Src1, Flags);</div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;    <span class="keyword">auto</span> <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildIntrinsic(Intrinsic::amdgcn_fmul_legacy, {S32}, <span class="keyword">false</span>)</div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;      .addUse(Ext0.getReg(0))</div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;      .addUse(Ext1.getReg(0))</div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;      .setMIFlags(Flags);</div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160; </div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFExp2(Dst, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFPTrunc(S16, <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>), Flags);</div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;  } <span class="keywordflow">else</span></div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160; </div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;}</div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160; </div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;<span class="comment">// Find a source register, ignoring any possible source modifiers.</span></div>
<div class="line"><a name="l02800"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#a716801caf6a489a6af735be940932003"> 2800</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a716801caf6a489a6af735be940932003">stripAnySourceMods</a>(<a class="code" href="classllvm_1_1Register.html">Register</a> OrigSrc, <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>) {</div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> ModSrc = OrigSrc;</div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *SrcFNeg = <a class="code" href="namespacellvm.html#a0edf31d256ecb3ac003bf2d81a576c9e">getOpcodeDef</a>(AMDGPU::G_FNEG, ModSrc, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>)) {</div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;    ModSrc = SrcFNeg-&gt;getOperand(1).getReg();</div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *SrcFAbs = <a class="code" href="namespacellvm.html#a0edf31d256ecb3ac003bf2d81a576c9e">getOpcodeDef</a>(AMDGPU::G_FABS, ModSrc, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>))</div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;      ModSrc = SrcFAbs-&gt;getOperand(1).getReg();</div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *SrcFAbs = <a class="code" href="namespacellvm.html#a0edf31d256ecb3ac003bf2d81a576c9e">getOpcodeDef</a>(AMDGPU::G_FABS, ModSrc, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>))</div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;    ModSrc = SrcFAbs-&gt;getOperand(1).getReg();</div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;  <span class="keywordflow">return</span> ModSrc;</div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;}</div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160; </div>
<div class="line"><a name="l02811"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a44186e632d4bab1d35012ed738a23870"> 2811</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a44186e632d4bab1d35012ed738a23870">AMDGPULegalizerInfo::legalizeFFloor</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;                                         <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;                                         <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160; </div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S1 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1);</div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S64 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64);</div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> OrigSrc = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;  <span class="keywordtype">unsigned</span> Flags = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags();</div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ST.<a class="code" href="classllvm_1_1GCNSubtarget.html#aec23a7dbd85b61497ca147984ce54cbe">hasFractBug</a>() &amp;&amp; <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst) == S64 &amp;&amp;</div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;         <span class="stringliteral">&quot;this should not have been custom lowered&quot;</span>);</div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160; </div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;  <span class="comment">// V_FRACT is buggy on SI, so the F32 version is never used and (x-floor(x))</span></div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;  <span class="comment">// is used instead. However, SI doesn&#39;t have V_FLOOR_F64, so the most</span></div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;  <span class="comment">// efficient way to implement it is using V_FRACT_F64. The workaround for the</span></div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;  <span class="comment">// V_FRACT bug is:</span></div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;  <span class="comment">//    fract(x) = isnan(x) ? x : min(V_FRACT(x), 0.99999999999999999)</span></div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;  <span class="comment">// Convert floor(x) to (x - fract(x))</span></div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160; </div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;  <span class="keyword">auto</span> Fract = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildIntrinsic(Intrinsic::amdgcn_fract, {S64}, <span class="keyword">false</span>)</div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;    .addUse(OrigSrc)</div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;    .setMIFlags(Flags);</div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160; </div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;  <span class="comment">// Give source modifier matching some assistance before obscuring a foldable</span></div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;  <span class="comment">// pattern.</span></div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160; </div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;  <span class="comment">// TODO: We can avoid the neg on the fract? The input sign to fract</span></div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;  <span class="comment">// shouldn&#39;t matter?</span></div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> ModSrc = <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a716801caf6a489a6af735be940932003">stripAnySourceMods</a>(OrigSrc, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>);</div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160; </div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;  <span class="keyword">auto</span> Const =</div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFConstant(S64, llvm::bit_cast&lt;double&gt;(0x3fefffffffffffff));</div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160; </div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Min = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(S64);</div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160; </div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;  <span class="comment">// We don&#39;t need to concern ourselves with the snan handling difference, so</span></div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;  <span class="comment">// use the one which will directly select.</span></div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SIMachineFunctionInfo.html">SIMachineFunctionInfo</a> *MFI = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMF().getInfo&lt;<a class="code" href="classllvm_1_1SIMachineFunctionInfo.html">SIMachineFunctionInfo</a>&gt;();</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;  <span class="keywordflow">if</span> (MFI-&gt;<a class="code" href="classllvm_1_1SIMachineFunctionInfo.html#aa3c9b23b5cd32396cbf267f31becca3f">getMode</a>().<a class="code" href="structllvm_1_1AMDGPU_1_1SIModeRegisterDefaults.html#a05d4f9c4d9e486f4fd3d69a89121e107">IEEE</a>)</div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMinNumIEEE(Min, Fract, Const, Flags);</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMinNum(Min, Fract, Const, Flags);</div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160; </div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> CorrectedFract = Min;</div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlag(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518aba11aa58176a446ba70d4f0ad0e04418">MachineInstr::FmNoNans</a>)) {</div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;    <span class="keyword">auto</span> IsNan = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFCmp(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa3213b645e029aba8bb1b85213607d5e">CmpInst::FCMP_ORD</a>, S1, ModSrc, ModSrc, Flags);</div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;    CorrectedFract = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildSelect(S64, IsNan, ModSrc, Min, Flags).getReg(0);</div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;  }</div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160; </div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;  <span class="keyword">auto</span> NegFract = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFNeg(S64, CorrectedFract, Flags);</div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFAdd(Dst, OrigSrc, NegFract, Flags);</div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160; </div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;}</div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160; </div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;<span class="comment">// Turn an illegal packed v2s16 build vector into bit operations.</span></div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;<span class="comment">// TODO: This should probably be a bitcast action in LegalizerHelper.</span></div>
<div class="line"><a name="l02870"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a4117d1ecf36af9158c825fb376c4082e"> 2870</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a4117d1ecf36af9158c825fb376c4082e">AMDGPULegalizerInfo::legalizeBuildVector</a>(</div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S32 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S16 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(16);</div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst) == <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(2, 16));</div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160; </div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src0 = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src1 = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160; </div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == AMDGPU::G_BUILD_VECTOR_TRUNC) {</div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Src0) == S32);</div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;    Src0 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildTrunc(S16, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg()).getReg(0);</div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;    Src1 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildTrunc(S16, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg()).getReg(0);</div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;  }</div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160; </div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;  <span class="keyword">auto</span> <a class="code" href="R600ClauseMergePass_8cpp.html#aba99928790de45fa7aa12b47fbd828ff">Merge</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildMergeLikeInstr(S32, {Src0, Src1});</div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildBitcast(Dst, <a class="code" href="R600ClauseMergePass_8cpp.html#aba99928790de45fa7aa12b47fbd828ff">Merge</a>);</div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160; </div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;}</div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160; </div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;<span class="comment">// Build a big integer multiply or multiply-add using MAD_64_32 instructions.</span></div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;<span class="comment">// Source and accumulation registers must all be 32-bits.</span></div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;<span class="comment">// TODO: When the multiply is uniform, we should produce a code sequence</span></div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;<span class="comment">// that is better suited to instruction selection on the SALU. Instead of</span></div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;<span class="comment">// the outer loop going over parts of the result, the outer loop should go</span></div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;<span class="comment">// over parts of one of the factors. This should result in instruction</span></div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;<span class="comment">// selection that makes full use of S_ADDC_U32 instructions.</span></div>
<div class="line"><a name="l02902"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a01959fee9db67c3a625348ae39489c5e"> 2902</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a01959fee9db67c3a625348ae39489c5e">AMDGPULegalizerInfo::buildMultiply</a>(</div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;    <a class="code" href="classllvm_1_1LegalizerHelper.html">LegalizerHelper</a> &amp;Helper, <a class="code" href="classllvm_1_1MutableArrayRef.html">MutableArrayRef&lt;Register&gt;</a> Accum,</div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Register&gt;</a> Src0, <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Register&gt;</a> Src1,</div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;    <span class="keywordtype">bool</span> UsePartialMad64_32, <span class="keywordtype">bool</span> SeparateOddAlignedProducts)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;  <span class="comment">// Use (possibly empty) vectors of S1 registers to represent the set of</span></div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;  <span class="comment">// carries from one pair of positions to the next.</span></div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;  <span class="keyword">using</span> Carry = <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 2&gt;</a>;</div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160; </div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;  <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> = Helper.<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>;</div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160; </div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S1 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1);</div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S32 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S64 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64);</div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160; </div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Zero32;</div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Zero64;</div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160; </div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;  <span class="keyword">auto</span> getZero32 = [&amp;]() -&gt; <a class="code" href="classllvm_1_1Register.html">Register</a> {</div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;    <span class="keywordflow">if</span> (!Zero32)</div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;      Zero32 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(S32, 0).getReg(0);</div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;    <span class="keywordflow">return</span> Zero32;</div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;  };</div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;  <span class="keyword">auto</span> getZero64 = [&amp;]() -&gt; <a class="code" href="classllvm_1_1Register.html">Register</a> {</div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;    <span class="keywordflow">if</span> (!Zero64)</div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;      Zero64 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(S64, 0).getReg(0);</div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;    <span class="keywordflow">return</span> Zero64;</div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;  };</div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160; </div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;  <span class="comment">// Merge the given carries into the 32-bit LocalAccum, which is modified</span></div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;  <span class="comment">// in-place.</span></div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;  <span class="comment">// Returns the carry-out, which is a single S1 register or null.</span></div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;  <span class="keyword">auto</span> mergeCarry =</div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;      [&amp;](<a class="code" href="classllvm_1_1Register.html">Register</a> &amp;LocalAccum, <span class="keyword">const</span> Carry &amp;CarryIn) -&gt; <a class="code" href="classllvm_1_1Register.html">Register</a> {</div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;        <span class="keywordflow">if</span> (CarryIn.empty())</div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1Register.html">Register</a>();</div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160; </div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;        <span class="keywordtype">bool</span> HaveCarryOut = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;        <a class="code" href="classllvm_1_1Register.html">Register</a> CarryAccum;</div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;        <span class="keywordflow">if</span> (CarryIn.size() == 1) {</div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;          <span class="keywordflow">if</span> (!LocalAccum) {</div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;            LocalAccum = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildZExt(S32, CarryIn[0]).getReg(0);</div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1Register.html">Register</a>();</div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;          }</div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160; </div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;          CarryAccum = getZero32();</div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;          CarryAccum = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildZExt(S32, CarryIn[0]).getReg(0);</div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1 &lt; CarryIn.size(); ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;            CarryAccum =</div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;                <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUAdde(S32, S1, CarryAccum, getZero32(), CarryIn[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>])</div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;                    .getReg(0);</div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;          }</div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160; </div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;          <span class="keywordflow">if</span> (!LocalAccum) {</div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;            LocalAccum = getZero32();</div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;            HaveCarryOut = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;          }</div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;        }</div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160; </div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;        <span class="keyword">auto</span> Add =</div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;            <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUAdde(S32, S1, CarryAccum, LocalAccum, CarryIn.back());</div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;        LocalAccum = Add.getReg(0);</div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;        <span class="keywordflow">return</span> HaveCarryOut ? Add.getReg(1) : <a class="code" href="classllvm_1_1Register.html">Register</a>();</div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;      };</div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160; </div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;  <span class="comment">// Build a multiply-add chain to compute</span></div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;  <span class="comment">//   LocalAccum + (partial products at DstIndex)</span></div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;  <span class="comment">//       + (opportunistic subset of CarryIn)</span></div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;  <span class="comment">// LocalAccum is an array of one or two 32-bit registers that are updated</span></div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;  <span class="comment">// in-place. The incoming registers may be null.</span></div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;  <span class="comment">// In some edge cases, carry-ins can be consumed &quot;for free&quot;. In that case,</span></div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;  <span class="comment">// the consumed carry bits are removed from CarryIn in-place.</span></div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;  <span class="keyword">auto</span> buildMadChain =</div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;      [&amp;](<a class="code" href="classllvm_1_1MutableArrayRef.html">MutableArrayRef&lt;Register&gt;</a> LocalAccum, <span class="keywordtype">unsigned</span> DstIndex, Carry &amp;CarryIn)</div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;          -&gt; Carry {</div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((DstIndex + 1 &lt; Accum.size() &amp;&amp; LocalAccum.size() == 2) ||</div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;               (DstIndex + 1 &gt;= Accum.size() &amp;&amp; LocalAccum.size() == 1));</div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160; </div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;        Carry CarryOut;</div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;        <span class="keywordtype">unsigned</span> j0 = 0;</div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160; </div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;        <span class="comment">// Use plain 32-bit multiplication for the most significant part of the</span></div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;        <span class="comment">// result by default.</span></div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;        <span class="keywordflow">if</span> (LocalAccum.size() == 1 &amp;&amp;</div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;            (!UsePartialMad64_32 || !CarryIn.empty())) {</div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;          <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;            <span class="keywordtype">unsigned</span> j1 = DstIndex - j0;</div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;            <span class="keyword">auto</span> <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildMul(S32, Src0[j0], Src1[j1]);</div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;            <span class="keywordflow">if</span> (!LocalAccum[0]) {</div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;              LocalAccum[0] = <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>.getReg(0);</div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;              <span class="keywordflow">if</span> (CarryIn.empty()) {</div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;                LocalAccum[0] = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildAdd(S32, LocalAccum[0], <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>).getReg(0);</div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;              } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;                LocalAccum[0] =</div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;                    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUAdde(S32, S1, LocalAccum[0], <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>, CarryIn.back())</div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;                        .getReg(0);</div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;                CarryIn.pop_back();</div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;              }</div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;            }</div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;            ++j0;</div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;          } <span class="keywordflow">while</span> (j0 &lt;= DstIndex &amp;&amp; (!UsePartialMad64_32 || !CarryIn.empty()));</div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;        }</div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160; </div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;        <span class="comment">// Build full 64-bit multiplies.</span></div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;        <span class="keywordflow">if</span> (j0 &lt;= DstIndex) {</div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;          <span class="keywordtype">bool</span> HaveSmallAccum = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;          <a class="code" href="classllvm_1_1Register.html">Register</a> Tmp;</div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160; </div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;          <span class="keywordflow">if</span> (LocalAccum[0]) {</div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;            <span class="keywordflow">if</span> (LocalAccum.size() == 1) {</div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;              Tmp = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildAnyExt(S64, LocalAccum[0]).getReg(0);</div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;              HaveSmallAccum = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (LocalAccum[1]) {</div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;              Tmp = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildMergeLikeInstr(S64, LocalAccum).getReg(0);</div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;              HaveSmallAccum = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;              Tmp = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildZExt(S64, LocalAccum[0]).getReg(0);</div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;              HaveSmallAccum = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;            }</div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;            <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(LocalAccum.size() == 1 || !LocalAccum[1]);</div>
<div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;            Tmp = getZero64();</div>
<div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;            HaveSmallAccum = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;          }</div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160; </div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;          <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;            <span class="keywordtype">unsigned</span> j1 = DstIndex - j0;</div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;            <span class="keyword">auto</span> Mad = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildInstr(AMDGPU::G_AMDGPU_MAD_U64_U32, {S64, S1},</div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;                                    {Src0[j0], Src1[j1], Tmp});</div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;            Tmp = Mad.getReg(0);</div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;            <span class="keywordflow">if</span> (!HaveSmallAccum)</div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;              CarryOut.push_back(Mad.getReg(1));</div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;            HaveSmallAccum = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;            ++j0;</div>
<div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;          } <span class="keywordflow">while</span> (j0 &lt;= DstIndex);</div>
<div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160; </div>
<div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;          <span class="keyword">auto</span> Unmerge = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUnmerge(S32, Tmp);</div>
<div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;          LocalAccum[0] = Unmerge.getReg(0);</div>
<div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;          <span class="keywordflow">if</span> (LocalAccum.size() &gt; 1)</div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;            LocalAccum[1] = Unmerge.getReg(1);</div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;        }</div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160; </div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;        <span class="keywordflow">return</span> CarryOut;</div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;      };</div>
<div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160; </div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;  <span class="comment">// Outer multiply loop, iterating over destination parts from least</span></div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;  <span class="comment">// significant to most significant parts.</span></div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;  <span class="comment">// The columns of the following diagram correspond to the destination parts</span></div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;  <span class="comment">// affected by one iteration of the outer loop (ignoring boundary</span></div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;  <span class="comment">// conditions).</span></div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;  <span class="comment">//   Dest index relative to 2 * i:      1 0 -1</span></div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;  <span class="comment">//                                      ------</span></div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;  <span class="comment">//   Carries from previous iteration:     e o</span></div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;  <span class="comment">//   Even-aligned partial product sum:  E E .</span></div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;  <span class="comment">//   Odd-aligned partial product sum:     O O</span></div>
<div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;  <span class="comment">// &#39;o&#39; is OddCarry, &#39;e&#39; is EvenCarry.</span></div>
<div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;  <span class="comment">// EE and OO are computed from partial products via buildMadChain and use</span></div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;  <span class="comment">// accumulation where possible and appropriate.</span></div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> SeparateOddCarry;</div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;  Carry EvenCarry;</div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;  Carry OddCarry;</div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160; </div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;= Accum.size() / 2; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;    Carry OddCarryIn = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(OddCarry);</div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;    Carry EvenCarryIn = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(EvenCarry);</div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;    OddCarry.clear();</div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;    EvenCarry.clear();</div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160; </div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;    <span class="comment">// Partial products at offset 2 * i.</span></div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;    <span class="keywordflow">if</span> (2 * <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; Accum.size()) {</div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;      <span class="keyword">auto</span> LocalAccum = Accum.<a class="code" href="classllvm_1_1MutableArrayRef.html#a3c0eaacba04956ad90add513b021413b">drop_front</a>(2 * <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>).take_front(2);</div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;      EvenCarry = buildMadChain(LocalAccum, 2 * <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, EvenCarryIn);</div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;    }</div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160; </div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;    <span class="comment">// Partial products at offset 2 * i - 1.</span></div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt; 0) {</div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;      <span class="keywordflow">if</span> (!SeparateOddAlignedProducts) {</div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;        <span class="keyword">auto</span> LocalAccum = Accum.<a class="code" href="classllvm_1_1MutableArrayRef.html#a3c0eaacba04956ad90add513b021413b">drop_front</a>(2 * <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1).take_front(2);</div>
<div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;        OddCarry = buildMadChain(LocalAccum, 2 * <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1, OddCarryIn);</div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;        <span class="keywordtype">bool</span> IsHighest = 2 * <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt;= Accum.size();</div>
<div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;        <a class="code" href="classllvm_1_1Register.html">Register</a> SeparateOddOut[2];</div>
<div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;        <span class="keyword">auto</span> LocalAccum = <a class="code" href="namespacellvm.html#a99416758c13252bef45320a6ba6aa09c">MutableArrayRef</a>(SeparateOddOut)</div>
<div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;                              .take_front(IsHighest ? 1 : 2);</div>
<div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;        OddCarry = buildMadChain(LocalAccum, 2 * <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1, OddCarryIn);</div>
<div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160; </div>
<div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;        <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *Lo;</div>
<div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160; </div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> == 1) {</div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;          <span class="keywordflow">if</span> (!IsHighest)</div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;            Lo = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUAddo(S32, S1, Accum[2 * <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1], SeparateOddOut[0]);</div>
<div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;            Lo = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildAdd(S32, Accum[2 * <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1], SeparateOddOut[0]);</div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;          Lo = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUAdde(S32, S1, Accum[2 * <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1], SeparateOddOut[0],</div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;                            SeparateOddCarry);</div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;        }</div>
<div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;        Accum[2 * <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1] = Lo-&gt;getOperand(0).getReg();</div>
<div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160; </div>
<div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;        <span class="keywordflow">if</span> (!IsHighest) {</div>
<div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;          <span class="keyword">auto</span> Hi = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUAdde(S32, S1, Accum[2 * <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], SeparateOddOut[1],</div>
<div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;                                Lo-&gt;getOperand(1).getReg());</div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;          Accum[2 * <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = Hi.getReg(0);</div>
<div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;          SeparateOddCarry = Hi.getReg(1);</div>
<div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;        }</div>
<div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;      }</div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;    }</div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160; </div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;    <span class="comment">// Add in the carries from the previous iteration</span></div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt; 0) {</div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Register.html">Register</a> CarryOut = mergeCarry(Accum[2 * <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1], OddCarryIn))</div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;        EvenCarryIn.push_back(CarryOut);</div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160; </div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;      <span class="keywordflow">if</span> (2 * <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; Accum.size()) {</div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Register.html">Register</a> CarryOut = mergeCarry(Accum[2 * <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], EvenCarryIn))</div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;          OddCarry.push_back(CarryOut);</div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;      }</div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;    }</div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;  }</div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;}</div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160; </div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;<span class="comment">// Custom narrowing of wide multiplies using wide multiply-add instructions.</span></div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;<span class="comment">// TODO: If the multiply is followed by an addition, we should attempt to</span></div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;<span class="comment">// integrate it to make better use of V_MAD_U64_U32&#39;s multiply-add capabilities.</span></div>
<div class="line"><a name="l03136"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a2645b2c5fc9b404821322ad403c87810"> 3136</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a2645b2c5fc9b404821322ad403c87810">AMDGPULegalizerInfo::legalizeMul</a>(<a class="code" href="classllvm_1_1LegalizerHelper.html">LegalizerHelper</a> &amp;Helper,</div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;                                      <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ST.<a class="code" href="classllvm_1_1GCNSubtarget.html#a553d27729038fcbd05ec618b71feaf3d">hasMad64_32</a>());</div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == TargetOpcode::G_MUL);</div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160; </div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;  <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> = Helper.<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>;</div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;  <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMRI();</div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160; </div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src0 = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src1 = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160; </div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(DstReg);</div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Ty.<a class="code" href="classllvm_1_1LLT.html#a3989251b1a714fc8296685f77eac6e87">isScalar</a>());</div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160; </div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;  <span class="keywordtype">unsigned</span> Size = Ty.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;  <span class="keywordtype">unsigned</span> NumParts = Size / 32;</div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((Size % 32) == 0);</div>
<div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NumParts &gt;= 2);</div>
<div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160; </div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;  <span class="comment">// Whether to use MAD_64_32 for partial products whose high half is</span></div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;  <span class="comment">// discarded. This avoids some ADD instructions but risks false dependency</span></div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;  <span class="comment">// stalls on some subtargets in some cases.</span></div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> UsePartialMad64_32 = ST.<a class="code" href="classllvm_1_1GCNSubtarget.html#ace4de1de19cbe837c578fb3654b6c998">getGeneration</a>() &lt; <a class="code" href="classllvm_1_1AMDGPUSubtarget.html#a53c0ee4138bfbf9e0410a65e0eaa36e2a0a29519a2da61e1cf78d898e26fef446">AMDGPUSubtarget::GFX10</a>;</div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160; </div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;  <span class="comment">// Whether to compute odd-aligned partial products separately. This is</span></div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;  <span class="comment">// advisable on subtargets where the accumulator of MAD_64_32 must be placed</span></div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;  <span class="comment">// in an even-aligned VGPR.</span></div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> SeparateOddAlignedProducts = ST.<a class="code" href="classllvm_1_1GCNSubtarget.html#a8263d2c3a266941b3669828ecf1db53e">hasFullRate64Ops</a>();</div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160; </div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> S32 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</div>
<div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 2&gt;</a> Src0Parts, Src1Parts;</div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumParts; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;    Src0Parts.push_back(<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(S32));</div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;    Src1Parts.push_back(<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(S32));</div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;  }</div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUnmerge(Src0Parts, Src0);</div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUnmerge(Src1Parts, Src1);</div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160; </div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 2&gt;</a> AccumRegs(NumParts);</div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;  <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a01959fee9db67c3a625348ae39489c5e">buildMultiply</a>(Helper, AccumRegs, Src0Parts, Src1Parts, UsePartialMad64_32,</div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;                SeparateOddAlignedProducts);</div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160; </div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildMergeLikeInstr(DstReg, AccumRegs);</div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160; </div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;}</div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160; </div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;<span class="comment">// Legalize ctlz/cttz to ffbh/ffbl instead of the default legalization to</span></div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;<span class="comment">// ctlz/cttz_zero_undef. This allows us to fix up the result for the zero input</span></div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;<span class="comment">// case with a single min instruction instead of a compare+select.</span></div>
<div class="line"><a name="l03188"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a40f12f2bde2de188bff061f11bcd976c"> 3188</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a40f12f2bde2de188bff061f11bcd976c">AMDGPULegalizerInfo::legalizeCTLZ_CTTZ</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;                                            <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;                                            <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst);</div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> SrcTy = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Src);</div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160; </div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;  <span class="keywordtype">unsigned</span> NewOpc = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == AMDGPU::G_CTLZ</div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;                        ? AMDGPU::G_AMDGPU_FFBH_U32</div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;                        : AMDGPU::G_AMDGPU_FFBL_B32;</div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;  <span class="keyword">auto</span> Tmp = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildInstr(NewOpc, {DstTy}, {Src});</div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUMin(Dst, Tmp, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(DstTy, SrcTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>()));</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160; </div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;}</div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160; </div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;<span class="comment">// Check that this is a G_XOR x, -1</span></div>
<div class="line"><a name="l03207"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#accff22ec9fbd872b5976a4a2dc20ef56"> 3207</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#accff22ec9fbd872b5976a4a2dc20ef56">isNot</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() != TargetOpcode::G_XOR)</div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;  <span class="keyword">auto</span> ConstVal = <a class="code" href="namespacellvm.html#a56f5d55460d7e31fc6c3318882f36ac7">getIConstantVRegSExtVal</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg(), <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>);</div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;  <span class="keywordflow">return</span> ConstVal &amp;&amp; *ConstVal == -1;</div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;}</div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160; </div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;<span class="comment">// Return the use branch instruction, otherwise null if the usage is invalid.</span></div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *</div>
<div class="line"><a name="l03216"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#a4f88913d78dbe180ac456ab4777dea86"> 3216</a></span>&#160;<a class="code" href="AMDGPULegalizerInfo_8cpp.html#a4f88913d78dbe180ac456ab4777dea86">verifyCFIntrinsic</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *&amp;Br,</div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;                  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *&amp;UncondBrTarget, <span class="keywordtype">bool</span> &amp;Negated) {</div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> CondDef = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a01bf72631b0bc836a8c07fe840b13233">hasOneNonDBGUse</a>(CondDef))</div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160; </div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;  <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *Parent = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getParent();</div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a> = &amp;*<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a741b5105cca6e98538c79acf275ca733">use_instr_nodbg_begin</a>(CondDef);</div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160; </div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AMDGPULegalizerInfo_8cpp.html#accff22ec9fbd872b5976a4a2dc20ef56">isNot</a>(<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, *<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a>)) {</div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> NegatedCond = <a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a>-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">getOperand</a>(0).<a class="code" href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">getReg</a>();</div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a01bf72631b0bc836a8c07fe840b13233">hasOneNonDBGUse</a>(NegatedCond))</div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160; </div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;    <span class="comment">// We&#39;re deleting the def of this value, so we need to remove it.</span></div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;    <a class="code" href="namespacellvm.html#abfbb7869d5e1d000bcca6867dd813178">eraseInstr</a>(*<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>);</div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160; </div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;    <a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a> = &amp;*<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a741b5105cca6e98538c79acf275ca733">use_instr_nodbg_begin</a>(NegatedCond);</div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;    Negated = <span class="keyword">true</span>;</div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;  }</div>
<div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160; </div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a>-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a002fd916e7206e01d512eeb06d405cf0">getParent</a>() != Parent || <a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a>-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a0363204b5fbab08a46f5a7cd7f376f78">getOpcode</a>() != AMDGPU::G_BRCOND)</div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160; </div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;  <span class="comment">// Make sure the cond br is followed by a G_BR, or is the last instruction.</span></div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;  <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> Next = std::next(<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a>-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>());</div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;  <span class="keywordflow">if</span> (Next == Parent-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a>()) {</div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;    <a class="code" href="classllvm_1_1ilist__iterator.html">MachineFunction::iterator</a> NextMBB = std::next(Parent-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>());</div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;    <span class="keywordflow">if</span> (NextMBB == Parent-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">getParent</a>()-&gt;<a class="code" href="classllvm_1_1MachineFunction.html#a9d017af749f76484cb9aec9ff6e4330c">end</a>()) <span class="comment">// Illegal intrinsic use.</span></div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;    UncondBrTarget = &amp;*NextMBB;</div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;    <span class="keywordflow">if</span> (Next-&gt;getOpcode() != AMDGPU::G_BR)</div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;    Br = &amp;*Next;</div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;    UncondBrTarget = Br-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">getOperand</a>(0).<a class="code" href="classllvm_1_1MachineOperand.html#a9b48cb80ee1534c2b51d789b673137c1">getMBB</a>();</div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;  }</div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160; </div>
<div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a>;</div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;}</div>
<div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160; </div>
<div class="line"><a name="l03257"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#ae63198baedfab72494f0d79823e99b75"> 3257</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#ae63198baedfab72494f0d79823e99b75">AMDGPULegalizerInfo::loadInputValue</a>(<a class="code" href="classllvm_1_1Register.html">Register</a> DstReg, <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,</div>
<div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;                                         <span class="keyword">const</span> <a class="code" href="structllvm_1_1ArgDescriptor.html">ArgDescriptor</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>,</div>
<div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;                                         <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *ArgRC,</div>
<div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;                                         <a class="code" href="classllvm_1_1LLT.html">LLT</a> ArgTy)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;  <a class="code" href="classllvm_1_1MCRegister.html">MCRegister</a> SrcReg = <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>-&gt;getRegister();</div>
<div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1Register.html#af4aef3aa547629015801993f9d393109">Register::isPhysicalRegister</a>(SrcReg) &amp;&amp; <span class="stringliteral">&quot;Physical register expected&quot;</span>);</div>
<div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DstReg.<a class="code" href="classllvm_1_1Register.html#aebafd86dde59b5a05b22e8720e808a9d">isVirtual</a>() &amp;&amp; <span class="stringliteral">&quot;Virtual register expected&quot;</span>);</div>
<div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160; </div>
<div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> LiveIn = <a class="code" href="namespacellvm.html#a02134e88cd18139c71d9274c7d287ac3">getFunctionLiveInPhysReg</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMF(), <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getTII(), SrcReg,</div>
<div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;                                             *ArgRC, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getDebugLoc(), ArgTy);</div>
<div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>-&gt;isMasked()) {</div>
<div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;    <span class="comment">// TODO: Should we try to emit this once in the entry block?</span></div>
<div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S32 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</div>
<div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> = <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>-&gt;getMask();</div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a> = llvm::countr_zero&lt;unsigned&gt;(<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a>);</div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160; </div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> AndMaskSrc = LiveIn;</div>
<div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160; </div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;    <span class="comment">// TODO: Avoid clearing the high bits if we know workitem id y/z are always</span></div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;    <span class="comment">// 0.</span></div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a> != 0) {</div>
<div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;      <span class="keyword">auto</span> ShiftAmt = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(S32, <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>);</div>
<div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;      AndMaskSrc = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildLShr(S32, LiveIn, ShiftAmt).getReg(0);</div>
<div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;    }</div>
<div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160; </div>
<div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildAnd(DstReg, AndMaskSrc, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(S32, <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">Mask</a> &gt;&gt; <a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>));</div>
<div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildCopy(DstReg, LiveIn);</div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;  }</div>
<div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160; </div>
<div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;}</div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160; </div>
<div class="line"><a name="l03290"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a724c83948fec4d3162f4620ec6f61a7a"> 3290</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#ae63198baedfab72494f0d79823e99b75">AMDGPULegalizerInfo::loadInputValue</a>(</div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg, <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,</div>
<div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;    <a class="code" href="structllvm_1_1AMDGPUFunctionArgInfo.html#a0e789059bf7f286b7f6bc75b43aac98b">AMDGPUFunctionArgInfo::PreloadedValue</a> ArgType)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SIMachineFunctionInfo.html">SIMachineFunctionInfo</a> *MFI = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMF().getInfo&lt;<a class="code" href="classllvm_1_1SIMachineFunctionInfo.html">SIMachineFunctionInfo</a>&gt;();</div>
<div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;  <span class="keyword">const</span> <a class="code" href="structllvm_1_1ArgDescriptor.html">ArgDescriptor</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>;</div>
<div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *ArgRC;</div>
<div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> ArgTy;</div>
<div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;  std::tie(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>, ArgRC, ArgTy) = MFI-&gt;<a class="code" href="classllvm_1_1SIMachineFunctionInfo.html#a1ed290a69b0cfd44ce4b21cf61338d61">getPreloadedValue</a>(ArgType);</div>
<div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160; </div>
<div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>) {</div>
<div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;    <span class="keywordflow">if</span> (ArgType == <a class="code" href="structllvm_1_1AMDGPUFunctionArgInfo.html#a0e789059bf7f286b7f6bc75b43aac98baf32f3fd30ae548866dc7e45092dd90b9">AMDGPUFunctionArgInfo::KERNARG_SEGMENT_PTR</a>) {</div>
<div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;      <span class="comment">// The intrinsic may appear when we have a 0 sized kernarg segment, in which</span></div>
<div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;      <span class="comment">// case the pointer argument may be missing and we use null.</span></div>
<div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(DstReg, 0);</div>
<div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;    }</div>
<div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160; </div>
<div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;    <span class="comment">// It&#39;s undefined behavior if a function marked with the amdgpu-no-*</span></div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;    <span class="comment">// attributes uses the corresponding intrinsic.</span></div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUndef(DstReg);</div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;  }</div>
<div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160; </div>
<div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>-&gt;isRegister() || !<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>-&gt;getRegister().isValid())</div>
<div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// TODO: Handle these</span></div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#ae63198baedfab72494f0d79823e99b75">loadInputValue</a>(DstReg, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>, ArgRC, ArgTy);</div>
<div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;}</div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160; </div>
<div class="line"><a name="l03318"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a59e8a7f7af57ac84f0bfa83a2e6cd4c3"> 3318</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a59e8a7f7af57ac84f0bfa83a2e6cd4c3">AMDGPULegalizerInfo::legalizePreloadedArgIntrin</a>(</div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,</div>
<div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;    <a class="code" href="structllvm_1_1AMDGPUFunctionArgInfo.html#a0e789059bf7f286b7f6bc75b43aac98b">AMDGPUFunctionArgInfo::PreloadedValue</a> ArgType)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#ae63198baedfab72494f0d79823e99b75">loadInputValue</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg(), <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, ArgType))</div>
<div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160; </div>
<div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;}</div>
<div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160; </div>
<div class="line"><a name="l03328"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#a79158bc80349e2c5ecd857cb098db65e"> 3328</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a79158bc80349e2c5ecd857cb098db65e">replaceWithConstant</a>(<a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;                                int64_t <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg(), <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;}</div>
<div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160; </div>
<div class="line"><a name="l03335"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#af7e4619611fab877c69f6ec0a1d57525"> 3335</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#af7e4619611fab877c69f6ec0a1d57525">AMDGPULegalizerInfo::legalizeWorkitemIDIntrinsic</a>(</div>
<div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,</div>
<div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;    <span class="keywordtype">unsigned</span> Dim, <a class="code" href="structllvm_1_1AMDGPUFunctionArgInfo.html#a0e789059bf7f286b7f6bc75b43aac98b">AMDGPUFunctionArgInfo::PreloadedValue</a> ArgType)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feeda2f101663d054cffa9c9956f30e7ecf7d">MaxID</a> = ST.<a class="code" href="classllvm_1_1AMDGPUSubtarget.html#a58a778423d8bdcf6b6f94172ff8271b2">getMaxWorkitemID</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMF().getFunction(), Dim);</div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feeda2f101663d054cffa9c9956f30e7ecf7d">MaxID</a> == 0)</div>
<div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a79158bc80349e2c5ecd857cb098db65e">replaceWithConstant</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, 0);</div>
<div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160; </div>
<div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SIMachineFunctionInfo.html">SIMachineFunctionInfo</a> *MFI = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMF().getInfo&lt;<a class="code" href="classllvm_1_1SIMachineFunctionInfo.html">SIMachineFunctionInfo</a>&gt;();</div>
<div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;  <span class="keyword">const</span> <a class="code" href="structllvm_1_1ArgDescriptor.html">ArgDescriptor</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>;</div>
<div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a> *ArgRC;</div>
<div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> ArgTy;</div>
<div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;  std::tie(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>, ArgRC, ArgTy) = MFI-&gt;<a class="code" href="classllvm_1_1SIMachineFunctionInfo.html#a1ed290a69b0cfd44ce4b21cf61338d61">getPreloadedValue</a>(ArgType);</div>
<div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160; </div>
<div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>) {</div>
<div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;    <span class="comment">// It&#39;s undefined behavior if a function marked with the amdgpu-no-*</span></div>
<div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;    <span class="comment">// attributes uses the corresponding intrinsic.</span></div>
<div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUndef(DstReg);</div>
<div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;  }</div>
<div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160; </div>
<div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>-&gt;isMasked()) {</div>
<div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;    <span class="comment">// Don&#39;t bother inserting AssertZext for packed IDs since we&#39;re emitting the</span></div>
<div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;    <span class="comment">// masking operations anyway.</span></div>
<div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;    <span class="comment">// TODO: We could assert the top bit is 0 for the source copy.</span></div>
<div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#ae63198baedfab72494f0d79823e99b75">loadInputValue</a>(DstReg, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, ArgType))</div>
<div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> TmpReg = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(<a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32));</div>
<div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#ae63198baedfab72494f0d79823e99b75">loadInputValue</a>(TmpReg, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, ArgType))</div>
<div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildAssertZExt(DstReg, TmpReg, <a class="code" href="namespacellvm.html#a37c1fdede126353d80c3753dfe06f3c7">llvm::bit_width</a>(<a class="code" href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feeda2f101663d054cffa9c9956f30e7ecf7d">MaxID</a>));</div>
<div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;  }</div>
<div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160; </div>
<div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;}</div>
<div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160; </div>
<div class="line"><a name="l03375"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#adeb18e3c3ca254b1eac668a91c0a18e8"> 3375</a></span>&#160;<a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#adeb18e3c3ca254b1eac668a91c0a18e8">AMDGPULegalizerInfo::getKernargParameterPtr</a>(<a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,</div>
<div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;                                                     int64_t <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> PtrTy = <a class="code" href="classllvm_1_1LLT.html#a7ff0361855acbbe71b15b8dc6003fbc5">LLT::pointer</a>(<a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3faa6d3112da64eecbdbb50aacb5f8251e8">AMDGPUAS::CONSTANT_ADDRESS</a>, 64);</div>
<div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> KernArgReg = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMRI()-&gt;createGenericVirtualRegister(PtrTy);</div>
<div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160; </div>
<div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;  <span class="comment">// TODO: If we passed in the base kernel offset we could have a better</span></div>
<div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;  <span class="comment">// alignment than 4, but we don&#39;t really need it.</span></div>
<div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#ae63198baedfab72494f0d79823e99b75">loadInputValue</a>(KernArgReg, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,</div>
<div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;                      <a class="code" href="structllvm_1_1AMDGPUFunctionArgInfo.html#a0e789059bf7f286b7f6bc75b43aac98baf32f3fd30ae548866dc7e45092dd90b9">AMDGPUFunctionArgInfo::KERNARG_SEGMENT_PTR</a>))</div>
<div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;failed to find kernarg segment ptr&quot;</span>);</div>
<div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160; </div>
<div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;  <span class="keyword">auto</span> COffset = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(<a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64), <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>);</div>
<div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;  <span class="comment">// TODO: Should get nuw</span></div>
<div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildPtrAdd(PtrTy, KernArgReg, COffset).getReg(0);</div>
<div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;}</div>
<div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;<span class="comment">/// Legalize a value that&#39;s loaded from kernel arguments. This is only used by</span></div>
<div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;<span class="comment">/// legacy intrinsics.</span></div>
<div class="line"><a name="l03393"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#acd7e869bdfe172fce447a9d289343d1a"> 3393</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#acd7e869bdfe172fce447a9d289343d1a">AMDGPULegalizerInfo::legalizeKernargMemParameter</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;                                                      <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,</div>
<div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;                                                      <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>,</div>
<div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;                                                      <a class="code" href="structllvm_1_1Align.html">Align</a> Alignment)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160; </div>
<div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMRI()-&gt;getType(DstReg) == <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32) &amp;&amp;</div>
<div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;         <span class="stringliteral">&quot;unexpected kernarg parameter type&quot;</span>);</div>
<div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160; </div>
<div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a> = <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#adeb18e3c3ca254b1eac668a91c0a18e8">getKernargParameterPtr</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>);</div>
<div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;  <a class="code" href="structllvm_1_1MachinePointerInfo.html">MachinePointerInfo</a> PtrInfo(<a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3faa6d3112da64eecbdbb50aacb5f8251e8">AMDGPUAS::CONSTANT_ADDRESS</a>);</div>
<div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildLoad(DstReg, <a class="code" href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a>, PtrInfo, <a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(4),</div>
<div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;              <a class="code" href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2dda7b999a936bc7a4d45dfadbe356e77b3f">MachineMemOperand::MODereferenceable</a> |</div>
<div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;                  <a class="code" href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2ddac63dd9c4fe69bfeaac7a363fda846ac6">MachineMemOperand::MOInvariant</a>);</div>
<div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;}</div>
<div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160; </div>
<div class="line"><a name="l03411"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a4f3b6abeaf9c509c93062f2246a0f40b"> 3411</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a4f3b6abeaf9c509c93062f2246a0f40b">AMDGPULegalizerInfo::legalizeFDIV</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;                                       <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</div>
<div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;                                       <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst);</div>
<div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> S16 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(16);</div>
<div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> S32 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</div>
<div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> S64 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64);</div>
<div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160; </div>
<div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;  <span class="keywordflow">if</span> (DstTy == S16)</div>
<div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a6451bf061f754edbcd6043a20bfc663c">legalizeFDIV16</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;  <span class="keywordflow">if</span> (DstTy == S32)</div>
<div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a464ac3e6051fb78eb3ee985975d17cb2">legalizeFDIV32</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;  <span class="keywordflow">if</span> (DstTy == S64)</div>
<div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a30fc420ff83b1e2c4ab42e86d9071e34">legalizeFDIV64</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160; </div>
<div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;}</div>
<div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160; </div>
<div class="line"><a name="l03430"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a3db547888c8d2ed5323f320bb5763014"> 3430</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a3db547888c8d2ed5323f320bb5763014">AMDGPULegalizerInfo::legalizeUnsignedDIV_REM32Impl</a>(<a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,</div>
<div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;                                                        <a class="code" href="classllvm_1_1Register.html">Register</a> DstDivReg,</div>
<div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;                                                        <a class="code" href="classllvm_1_1Register.html">Register</a> DstRemReg,</div>
<div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;                                                        <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>,</div>
<div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;                                                        <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S1 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1);</div>
<div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S32 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</div>
<div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160; </div>
<div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;  <span class="comment">// See AMDGPUCodeGenPrepare::expandDivRem32 for a description of the</span></div>
<div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;  <span class="comment">// algorithm used here.</span></div>
<div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160; </div>
<div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;  <span class="comment">// Initial estimate of inv(y).</span></div>
<div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;  <span class="keyword">auto</span> FloatY = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUITOFP(S32, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;  <span class="keyword">auto</span> RcpIFlag = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildInstr(AMDGPU::G_AMDGPU_RCP_IFLAG, {S32}, {FloatY});</div>
<div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;  <span class="keyword">auto</span> Scale = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFConstant(S32, llvm::bit_cast&lt;float&gt;(0x4f7ffffe));</div>
<div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;  <span class="keyword">auto</span> ScaledY = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMul(S32, RcpIFlag, Scale);</div>
<div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFPTOUI(S32, ScaledY);</div>
<div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160; </div>
<div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;  <span class="comment">// One round of UNR.</span></div>
<div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;  <span class="keyword">auto</span> NegY = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildSub(S32, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(S32, 0), <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;  <span class="keyword">auto</span> NegYZ = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildMul(S32, NegY, <a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>);</div>
<div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;  <a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildAdd(S32, <a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUMulH(S32, <a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>, NegYZ));</div>
<div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160; </div>
<div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;  <span class="comment">// Quotient/remainder estimate.</span></div>
<div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;  <span class="keyword">auto</span> Q = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUMulH(S32, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">Z</a>);</div>
<div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;  <span class="keyword">auto</span> R = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildSub(S32, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildMul(S32, Q, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>));</div>
<div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160; </div>
<div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;  <span class="comment">// First quotient/remainder refinement.</span></div>
<div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;  <span class="keyword">auto</span> One = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(S32, 1);</div>
<div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;  <span class="keyword">auto</span> <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildICmp(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">CmpInst::ICMP_UGE</a>, S1, R, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;  <span class="keywordflow">if</span> (DstDivReg)</div>
<div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;    Q = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildSelect(S32, <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildAdd(S32, Q, One), Q);</div>
<div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;  R = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildSelect(S32, <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildSub(S32, R, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>), R);</div>
<div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160; </div>
<div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;  <span class="comment">// Second quotient/remainder refinement.</span></div>
<div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;  <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildICmp(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">CmpInst::ICMP_UGE</a>, S1, R, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;  <span class="keywordflow">if</span> (DstDivReg)</div>
<div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildSelect(DstDivReg, <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildAdd(S32, Q, One), Q);</div>
<div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160; </div>
<div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;  <span class="keywordflow">if</span> (DstRemReg)</div>
<div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildSelect(DstRemReg, <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildSub(S32, R, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>), R);</div>
<div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;}</div>
<div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160; </div>
<div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;<span class="comment">// Build integer reciprocal sequence around V_RCP_IFLAG_F32</span></div>
<div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;<span class="comment">// Return lo, hi of result</span></div>
<div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;<span class="comment">// %cvt.lo = G_UITOFP Val.lo</span></div>
<div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;<span class="comment">// %cvt.hi = G_UITOFP Val.hi</span></div>
<div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;<span class="comment">// %mad = G_FMAD %cvt.hi, 2**32, %cvt.lo</span></div>
<div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;<span class="comment">// %rcp = G_AMDGPU_RCP_IFLAG %mad</span></div>
<div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;<span class="comment">// %mul1 = G_FMUL %rcp, 0x5f7ffffc</span></div>
<div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;<span class="comment">// %mul2 = G_FMUL %mul1, 2**(-32)</span></div>
<div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;<span class="comment">// %trunc = G_INTRINSIC_TRUNC %mul2</span></div>
<div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;<span class="comment">// %mad2 = G_FMAD %trunc, -(2**32), %mul1</span></div>
<div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;<span class="comment">// return {G_FPTOUI %mad2, G_FPTOUI %trunc}</span></div>
<div class="line"><a name="l03486"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#a69fd9b044c902e826f57ef7710514e42"> 3486</a></span>&#160;<span class="keyword">static</span> std::pair&lt;Register, Register&gt; <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a69fd9b044c902e826f57ef7710514e42">emitReciprocalU64</a>(<a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,</div>
<div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;                                                       <a class="code" href="classllvm_1_1Register.html">Register</a> Val) {</div>
<div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S32 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</div>
<div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;  <span class="keyword">auto</span> Unmerge = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUnmerge(S32, Val);</div>
<div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160; </div>
<div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;  <span class="keyword">auto</span> CvtLo = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUITOFP(S32, Unmerge.getReg(0));</div>
<div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;  <span class="keyword">auto</span> CvtHi = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUITOFP(S32, Unmerge.getReg(1));</div>
<div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160; </div>
<div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;  <span class="keyword">auto</span> Mad = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMAD(</div>
<div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;      S32, CvtHi, <span class="comment">// 2**32</span></div>
<div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFConstant(S32, llvm::bit_cast&lt;float&gt;(0x4f800000)), CvtLo);</div>
<div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160; </div>
<div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;  <span class="keyword">auto</span> Rcp = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildInstr(AMDGPU::G_AMDGPU_RCP_IFLAG, {S32}, {Mad});</div>
<div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;  <span class="keyword">auto</span> Mul1 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMul(</div>
<div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;      S32, Rcp, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFConstant(S32, llvm::bit_cast&lt;float&gt;(0x5f7ffffc)));</div>
<div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160; </div>
<div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;  <span class="comment">// 2**(-32)</span></div>
<div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;  <span class="keyword">auto</span> Mul2 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMul(</div>
<div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;      S32, Mul1, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFConstant(S32, llvm::bit_cast&lt;float&gt;(0x2f800000)));</div>
<div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;  <span class="keyword">auto</span> Trunc = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildIntrinsicTrunc(S32, Mul2);</div>
<div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160; </div>
<div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;  <span class="comment">// -(2**32)</span></div>
<div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;  <span class="keyword">auto</span> Mad2 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMAD(</div>
<div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;      S32, Trunc, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFConstant(S32, llvm::bit_cast&lt;float&gt;(0xcf800000)),</div>
<div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;      Mul1);</div>
<div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160; </div>
<div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;  <span class="keyword">auto</span> ResultLo = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFPTOUI(S32, Mad2);</div>
<div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;  <span class="keyword">auto</span> ResultHi = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFPTOUI(S32, Trunc);</div>
<div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160; </div>
<div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;  <span class="keywordflow">return</span> {ResultLo.getReg(0), ResultHi.getReg(0)};</div>
<div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;}</div>
<div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160; </div>
<div class="line"><a name="l03518"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a93bbde2af63d129f752ef7c3a0f84c15"> 3518</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a93bbde2af63d129f752ef7c3a0f84c15">AMDGPULegalizerInfo::legalizeUnsignedDIV_REM64Impl</a>(<a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,</div>
<div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;                                                        <a class="code" href="classllvm_1_1Register.html">Register</a> DstDivReg,</div>
<div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;                                                        <a class="code" href="classllvm_1_1Register.html">Register</a> DstRemReg,</div>
<div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;                                                        <a class="code" href="classllvm_1_1Register.html">Register</a> Numer,</div>
<div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;                                                        <a class="code" href="classllvm_1_1Register.html">Register</a> Denom)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S32 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</div>
<div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S64 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64);</div>
<div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S1 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1);</div>
<div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> RcpLo, RcpHi;</div>
<div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160; </div>
<div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;  std::tie(RcpLo, RcpHi) = <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a69fd9b044c902e826f57ef7710514e42">emitReciprocalU64</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, Denom);</div>
<div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160; </div>
<div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;  <span class="keyword">auto</span> Rcp = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildMergeLikeInstr(S64, {RcpLo, RcpHi});</div>
<div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160; </div>
<div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;  <span class="keyword">auto</span> Zero64 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(S64, 0);</div>
<div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;  <span class="keyword">auto</span> NegDenom = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildSub(S64, Zero64, Denom);</div>
<div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160; </div>
<div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;  <span class="keyword">auto</span> MulLo1 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildMul(S64, NegDenom, Rcp);</div>
<div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;  <span class="keyword">auto</span> MulHi1 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUMulH(S64, Rcp, MulLo1);</div>
<div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160; </div>
<div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;  <span class="keyword">auto</span> UnmergeMulHi1 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUnmerge(S32, MulHi1);</div>
<div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> MulHi1_Lo = UnmergeMulHi1.getReg(0);</div>
<div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> MulHi1_Hi = UnmergeMulHi1.getReg(1);</div>
<div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160; </div>
<div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;  <span class="keyword">auto</span> Add1_Lo = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUAddo(S32, S1, RcpLo, MulHi1_Lo);</div>
<div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;  <span class="keyword">auto</span> Add1_Hi = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUAdde(S32, S1, RcpHi, MulHi1_Hi, Add1_Lo.getReg(1));</div>
<div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;  <span class="keyword">auto</span> Add1 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildMergeLikeInstr(S64, {Add1_Lo, Add1_Hi});</div>
<div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160; </div>
<div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;  <span class="keyword">auto</span> MulLo2 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildMul(S64, NegDenom, Add1);</div>
<div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;  <span class="keyword">auto</span> MulHi2 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUMulH(S64, Add1, MulLo2);</div>
<div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;  <span class="keyword">auto</span> UnmergeMulHi2 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUnmerge(S32, MulHi2);</div>
<div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> MulHi2_Lo = UnmergeMulHi2.getReg(0);</div>
<div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> MulHi2_Hi = UnmergeMulHi2.getReg(1);</div>
<div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160; </div>
<div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;  <span class="keyword">auto</span> Zero32 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(S32, 0);</div>
<div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;  <span class="keyword">auto</span> Add2_Lo = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUAddo(S32, S1, Add1_Lo, MulHi2_Lo);</div>
<div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;  <span class="keyword">auto</span> Add2_Hi = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUAdde(S32, S1, Add1_Hi, MulHi2_Hi, Add2_Lo.getReg(1));</div>
<div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;  <span class="keyword">auto</span> Add2 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildMergeLikeInstr(S64, {Add2_Lo, Add2_Hi});</div>
<div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160; </div>
<div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;  <span class="keyword">auto</span> UnmergeNumer = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUnmerge(S32, Numer);</div>
<div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> NumerLo = UnmergeNumer.getReg(0);</div>
<div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> NumerHi = UnmergeNumer.getReg(1);</div>
<div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160; </div>
<div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;  <span class="keyword">auto</span> MulHi3 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUMulH(S64, Numer, Add2);</div>
<div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;  <span class="keyword">auto</span> Mul3 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildMul(S64, Denom, MulHi3);</div>
<div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;  <span class="keyword">auto</span> UnmergeMul3 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUnmerge(S32, Mul3);</div>
<div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Mul3_Lo = UnmergeMul3.getReg(0);</div>
<div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Mul3_Hi = UnmergeMul3.getReg(1);</div>
<div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;  <span class="keyword">auto</span> Sub1_Lo = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUSubo(S32, S1, NumerLo, Mul3_Lo);</div>
<div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;  <span class="keyword">auto</span> Sub1_Hi = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUSube(S32, S1, NumerHi, Mul3_Hi, Sub1_Lo.getReg(1));</div>
<div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;  <span class="keyword">auto</span> Sub1_Mi = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildSub(S32, NumerHi, Mul3_Hi);</div>
<div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;  <span class="keyword">auto</span> Sub1 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildMergeLikeInstr(S64, {Sub1_Lo, Sub1_Hi});</div>
<div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160; </div>
<div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;  <span class="keyword">auto</span> UnmergeDenom = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUnmerge(S32, Denom);</div>
<div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DenomLo = UnmergeDenom.getReg(0);</div>
<div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DenomHi = UnmergeDenom.getReg(1);</div>
<div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160; </div>
<div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;  <span class="keyword">auto</span> CmpHi = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildICmp(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">CmpInst::ICMP_UGE</a>, S1, Sub1_Hi, DenomHi);</div>
<div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;  <span class="keyword">auto</span> <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildSExt(S32, CmpHi);</div>
<div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160; </div>
<div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;  <span class="keyword">auto</span> CmpLo = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildICmp(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">CmpInst::ICMP_UGE</a>, S1, Sub1_Lo, DenomLo);</div>
<div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;  <span class="keyword">auto</span> C2 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildSExt(S32, CmpLo);</div>
<div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160; </div>
<div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;  <span class="keyword">auto</span> CmpEq = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildICmp(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">CmpInst::ICMP_EQ</a>, S1, Sub1_Hi, DenomHi);</div>
<div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;  <span class="keyword">auto</span> C3 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildSelect(S32, CmpEq, C2, <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>);</div>
<div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160; </div>
<div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;  <span class="comment">// TODO: Here and below portions of the code can be enclosed into if/endif.</span></div>
<div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;  <span class="comment">// Currently control flow is unconditional and we have 4 selects after</span></div>
<div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;  <span class="comment">// potential endif to substitute PHIs.</span></div>
<div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160; </div>
<div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;  <span class="comment">// if C3 != 0 ...</span></div>
<div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;  <span class="keyword">auto</span> Sub2_Lo = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUSubo(S32, S1, Sub1_Lo, DenomLo);</div>
<div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;  <span class="keyword">auto</span> Sub2_Mi = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUSube(S32, S1, Sub1_Mi, DenomHi, Sub1_Lo.getReg(1));</div>
<div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;  <span class="keyword">auto</span> Sub2_Hi = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUSube(S32, S1, Sub2_Mi, Zero32, Sub2_Lo.getReg(1));</div>
<div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;  <span class="keyword">auto</span> Sub2 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildMergeLikeInstr(S64, {Sub2_Lo, Sub2_Hi});</div>
<div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160; </div>
<div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;  <span class="keyword">auto</span> One64 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(S64, 1);</div>
<div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;  <span class="keyword">auto</span> Add3 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildAdd(S64, MulHi3, One64);</div>
<div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160; </div>
<div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;  <span class="keyword">auto</span> C4 =</div>
<div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildSExt(S32, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildICmp(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">CmpInst::ICMP_UGE</a>, S1, Sub2_Hi, DenomHi));</div>
<div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;  <span class="keyword">auto</span> C5 =</div>
<div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildSExt(S32, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildICmp(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">CmpInst::ICMP_UGE</a>, S1, Sub2_Lo, DenomLo));</div>
<div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;  <span class="keyword">auto</span> C6 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildSelect(</div>
<div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;      S32, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildICmp(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">CmpInst::ICMP_EQ</a>, S1, Sub2_Hi, DenomHi), C5, C4);</div>
<div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160; </div>
<div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;  <span class="comment">// if (C6 != 0)</span></div>
<div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;  <span class="keyword">auto</span> Add4 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildAdd(S64, Add3, One64);</div>
<div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;  <span class="keyword">auto</span> Sub3_Lo = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUSubo(S32, S1, Sub2_Lo, DenomLo);</div>
<div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160; </div>
<div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;  <span class="keyword">auto</span> Sub3_Mi = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUSube(S32, S1, Sub2_Mi, DenomHi, Sub2_Lo.getReg(1));</div>
<div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;  <span class="keyword">auto</span> Sub3_Hi = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUSube(S32, S1, Sub3_Mi, Zero32, Sub3_Lo.getReg(1));</div>
<div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;  <span class="keyword">auto</span> Sub3 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildMergeLikeInstr(S64, {Sub3_Lo, Sub3_Hi});</div>
<div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160; </div>
<div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;  <span class="comment">// endif C6</span></div>
<div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;  <span class="comment">// endif C3</span></div>
<div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160; </div>
<div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;  <span class="keywordflow">if</span> (DstDivReg) {</div>
<div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;    <span class="keyword">auto</span> Sel1 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildSelect(</div>
<div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;        S64, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildICmp(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP_NE</a>, S1, C6, Zero32), Add4, Add3);</div>
<div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildSelect(DstDivReg, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildICmp(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP_NE</a>, S1, C3, Zero32),</div>
<div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;                  Sel1, MulHi3);</div>
<div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;  }</div>
<div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160; </div>
<div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;  <span class="keywordflow">if</span> (DstRemReg) {</div>
<div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;    <span class="keyword">auto</span> Sel2 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildSelect(</div>
<div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;        S64, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildICmp(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP_NE</a>, S1, C6, Zero32), Sub3, Sub2);</div>
<div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildSelect(DstRemReg, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildICmp(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP_NE</a>, S1, C3, Zero32),</div>
<div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;                  Sel2, Sub1);</div>
<div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;  }</div>
<div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;}</div>
<div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160; </div>
<div class="line"><a name="l03630"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a1d0eafc5b0af4bf05b288d62caa72ac9"> 3630</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a1d0eafc5b0af4bf05b288d62caa72ac9">AMDGPULegalizerInfo::legalizeUnsignedDIV_REM</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;                                                  <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</div>
<div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;                                                  <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstDivReg, DstRemReg;</div>
<div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode()) {</div>
<div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unexpected opcode!&quot;</span>);</div>
<div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;  <span class="keywordflow">case</span> AMDGPU::G_UDIV: {</div>
<div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;    DstDivReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;  }</div>
<div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;  <span class="keywordflow">case</span> AMDGPU::G_UREM: {</div>
<div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;    DstRemReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;  }</div>
<div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;  <span class="keywordflow">case</span> AMDGPU::G_UDIVREM: {</div>
<div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;    DstDivReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;    DstRemReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;  }</div>
<div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;  }</div>
<div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160; </div>
<div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S64 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64);</div>
<div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S32 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</div>
<div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> FirstSrcOpIdx = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumExplicitDefs();</div>
<div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Num = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(FirstSrcOpIdx).getReg();</div>
<div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Den = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(FirstSrcOpIdx + 1).getReg();</div>
<div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg());</div>
<div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160; </div>
<div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;  <span class="keywordflow">if</span> (Ty == S32)</div>
<div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;    <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a3db547888c8d2ed5323f320bb5763014">legalizeUnsignedDIV_REM32Impl</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, DstDivReg, DstRemReg, Num, Den);</div>
<div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Ty == S64)</div>
<div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;    <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a93bbde2af63d129f752ef7c3a0f84c15">legalizeUnsignedDIV_REM64Impl</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, DstDivReg, DstRemReg, Num, Den);</div>
<div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160; </div>
<div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;}</div>
<div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160; </div>
<div class="line"><a name="l03670"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#aba263b2348b84c2d9a10adc0a42d9606"> 3670</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#aba263b2348b84c2d9a10adc0a42d9606">AMDGPULegalizerInfo::legalizeSignedDIV_REM</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;                                                <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</div>
<div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;                                                <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S64 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64);</div>
<div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S32 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</div>
<div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160; </div>
<div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg());</div>
<div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;  <span class="keywordflow">if</span> (Ty != S32 &amp;&amp; Ty != S64)</div>
<div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160; </div>
<div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> FirstSrcOpIdx = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumExplicitDefs();</div>
<div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(FirstSrcOpIdx).getReg();</div>
<div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(FirstSrcOpIdx + 1).getReg();</div>
<div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160; </div>
<div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;  <span class="keyword">auto</span> SignBitOffset = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(S32, Ty.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() - 1);</div>
<div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;  <span class="keyword">auto</span> LHSign = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildAShr(Ty, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, SignBitOffset);</div>
<div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;  <span class="keyword">auto</span> RHSign = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildAShr(Ty, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, SignBitOffset);</div>
<div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160; </div>
<div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;  <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildAdd(Ty, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, LHSign).getReg(0);</div>
<div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;  <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildAdd(Ty, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, RHSign).getReg(0);</div>
<div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160; </div>
<div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;  <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildXor(Ty, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, LHSign).getReg(0);</div>
<div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;  <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildXor(Ty, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, RHSign).getReg(0);</div>
<div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160; </div>
<div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstDivReg, DstRemReg, TmpDivReg, TmpRemReg;</div>
<div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode()) {</div>
<div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unexpected opcode!&quot;</span>);</div>
<div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;  <span class="keywordflow">case</span> AMDGPU::G_SDIV: {</div>
<div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;    DstDivReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;    TmpDivReg = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(Ty);</div>
<div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;  }</div>
<div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;  <span class="keywordflow">case</span> AMDGPU::G_SREM: {</div>
<div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;    DstRemReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;    TmpRemReg = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(Ty);</div>
<div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;  }</div>
<div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;  <span class="keywordflow">case</span> AMDGPU::G_SDIVREM: {</div>
<div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;    DstDivReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;    DstRemReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;    TmpDivReg = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(Ty);</div>
<div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;    TmpRemReg = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(Ty);</div>
<div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;  }</div>
<div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;  }</div>
<div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160; </div>
<div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;  <span class="keywordflow">if</span> (Ty == S32)</div>
<div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;    <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a3db547888c8d2ed5323f320bb5763014">legalizeUnsignedDIV_REM32Impl</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, TmpDivReg, TmpRemReg, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;    <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a93bbde2af63d129f752ef7c3a0f84c15">legalizeUnsignedDIV_REM64Impl</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, TmpDivReg, TmpRemReg, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160; </div>
<div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;  <span class="keywordflow">if</span> (DstDivReg) {</div>
<div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;    <span class="keyword">auto</span> Sign = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildXor(Ty, LHSign, RHSign).getReg(0);</div>
<div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;    <span class="keyword">auto</span> SignXor = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildXor(Ty, TmpDivReg, Sign).getReg(0);</div>
<div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildSub(DstDivReg, SignXor, Sign);</div>
<div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;  }</div>
<div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160; </div>
<div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;  <span class="keywordflow">if</span> (DstRemReg) {</div>
<div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;    <span class="keyword">auto</span> Sign = LHSign.getReg(0); <span class="comment">// Remainder sign is the same as LHS</span></div>
<div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;    <span class="keyword">auto</span> SignXor = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildXor(Ty, TmpRemReg, Sign).getReg(0);</div>
<div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildSub(DstRemReg, SignXor, Sign);</div>
<div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;  }</div>
<div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160; </div>
<div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;}</div>
<div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160; </div>
<div class="line"><a name="l03738"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#aa71647a93d5e73c28332b6e52407979c"> 3738</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#aa71647a93d5e73c28332b6e52407979c">AMDGPULegalizerInfo::legalizeFastUnsafeFDIV</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;                                                 <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</div>
<div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;                                                 <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Res = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;  <a class="code" href="classuint16__t.html">uint16_t</a> Flags = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags();</div>
<div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> ResTy = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Res);</div>
<div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160; </div>
<div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMF();</div>
<div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;  <span class="keywordtype">bool</span> AllowInaccurateRcp = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ae68d159179d37dc7969439d842e2644f">getTarget</a>().<a class="code" href="classllvm_1_1TargetMachine.html#ab1fb67187fc37e569cc5171cbebba873">Options</a>.<a class="code" href="classllvm_1_1TargetOptions.html#a0544e2966374684ff74255e5a4290fa7">UnsafeFPMath</a> ||</div>
<div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;                            <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlag(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4802af6d0cf3b900adb6296bccedf2a0">MachineInstr::FmAfn</a>);</div>
<div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160; </div>
<div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;  <span class="keywordflow">if</span> (!AllowInaccurateRcp)</div>
<div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160; </div>
<div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> CLHS = <a class="code" href="namespacellvm.html#a1175ca529ece1df77d922f75a8726f56">getConstantFPVRegVal</a>(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>)) {</div>
<div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;    <span class="comment">// 1 / x -&gt; RCP(x)</span></div>
<div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;    <span class="keywordflow">if</span> (CLHS-&gt;isExactlyValue(1.0)) {</div>
<div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildIntrinsic(Intrinsic::amdgcn_rcp, Res, <span class="keyword">false</span>)</div>
<div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;        .addUse(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>)</div>
<div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;        .setMIFlags(Flags);</div>
<div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160; </div>
<div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;    }</div>
<div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160; </div>
<div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;    <span class="comment">// -1 / x -&gt; RCP( FNEG(x) )</span></div>
<div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;    <span class="keywordflow">if</span> (CLHS-&gt;isExactlyValue(-1.0)) {</div>
<div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;      <span class="keyword">auto</span> FNeg = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFNeg(ResTy, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, Flags);</div>
<div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildIntrinsic(Intrinsic::amdgcn_rcp, Res, <span class="keyword">false</span>)</div>
<div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;        .addUse(FNeg.getReg(0))</div>
<div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;        .setMIFlags(Flags);</div>
<div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160; </div>
<div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;    }</div>
<div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;  }</div>
<div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160; </div>
<div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;  <span class="comment">// x / y -&gt; x * (1.0 / y)</span></div>
<div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0ea480770519d97b188b42a1a0aa660a3db">RCP</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildIntrinsic(Intrinsic::amdgcn_rcp, {ResTy}, <span class="keyword">false</span>)</div>
<div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;    .addUse(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>)</div>
<div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;    .setMIFlags(Flags);</div>
<div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMul(Res, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0ea480770519d97b188b42a1a0aa660a3db">RCP</a>, Flags);</div>
<div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160; </div>
<div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;}</div>
<div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160; </div>
<div class="line"><a name="l03787"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#ac0184339c875630ffed0e19b55899b82"> 3787</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#ac0184339c875630ffed0e19b55899b82">AMDGPULegalizerInfo::legalizeFastUnsafeFDIV64</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;                                                   <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</div>
<div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;                                                   <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Res = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;  <a class="code" href="classuint16__t.html">uint16_t</a> Flags = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags();</div>
<div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> ResTy = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Res);</div>
<div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160; </div>
<div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMF();</div>
<div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;  <span class="keywordtype">bool</span> AllowInaccurateRcp = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ae68d159179d37dc7969439d842e2644f">getTarget</a>().<a class="code" href="classllvm_1_1TargetMachine.html#ab1fb67187fc37e569cc5171cbebba873">Options</a>.<a class="code" href="classllvm_1_1TargetOptions.html#a0544e2966374684ff74255e5a4290fa7">UnsafeFPMath</a> ||</div>
<div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;                            <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlag(<a class="code" href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4802af6d0cf3b900adb6296bccedf2a0">MachineInstr::FmAfn</a>);</div>
<div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160; </div>
<div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;  <span class="keywordflow">if</span> (!AllowInaccurateRcp)</div>
<div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160; </div>
<div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;  <span class="keyword">auto</span> NegY = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFNeg(ResTy, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;  <span class="keyword">auto</span> One = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFConstant(ResTy, 1.0);</div>
<div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160; </div>
<div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;  <span class="keyword">auto</span> R = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildIntrinsic(Intrinsic::amdgcn_rcp, {ResTy}, <span class="keyword">false</span>)</div>
<div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;    .addUse(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)</div>
<div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;    .setMIFlags(Flags);</div>
<div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160; </div>
<div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;  <span class="keyword">auto</span> Tmp0 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMA(ResTy, NegY, R, One);</div>
<div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;  R = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMA(ResTy, Tmp0, R, R);</div>
<div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160; </div>
<div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;  <span class="keyword">auto</span> Tmp1 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMA(ResTy, NegY, R, One);</div>
<div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;  R = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMA(ResTy, Tmp1, R, R);</div>
<div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160; </div>
<div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMul(ResTy, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, R);</div>
<div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;  <span class="keyword">auto</span> Tmp2 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMA(ResTy, NegY, <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160; </div>
<div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMA(Res, Tmp2, R, <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>);</div>
<div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;}</div>
<div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160; </div>
<div class="line"><a name="l03824"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a6451bf061f754edbcd6043a20bfc663c"> 3824</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a6451bf061f754edbcd6043a20bfc663c">AMDGPULegalizerInfo::legalizeFDIV16</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;                                         <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</div>
<div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;                                         <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#aa71647a93d5e73c28332b6e52407979c">legalizeFastUnsafeFDIV</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))</div>
<div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160; </div>
<div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Res = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160; </div>
<div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;  <a class="code" href="classuint16__t.html">uint16_t</a> Flags = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags();</div>
<div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160; </div>
<div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> S16 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(16);</div>
<div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> S32 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</div>
<div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160; </div>
<div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;  <span class="keyword">auto</span> LHSExt = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFPExt(S32, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, Flags);</div>
<div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;  <span class="keyword">auto</span> RHSExt = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFPExt(S32, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, Flags);</div>
<div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160; </div>
<div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0ea480770519d97b188b42a1a0aa660a3db">RCP</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildIntrinsic(Intrinsic::amdgcn_rcp, {S32}, <span class="keyword">false</span>)</div>
<div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;    .addUse(RHSExt.getReg(0))</div>
<div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;    .setMIFlags(Flags);</div>
<div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160; </div>
<div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;  <span class="keyword">auto</span> QUOT = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMul(S32, LHSExt, <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0ea480770519d97b188b42a1a0aa660a3db">RCP</a>, Flags);</div>
<div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;  <span class="keyword">auto</span> RDst = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFPTrunc(S16, QUOT, Flags);</div>
<div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160; </div>
<div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildIntrinsic(Intrinsic::amdgcn_div_fixup, Res, <span class="keyword">false</span>)</div>
<div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;    .addUse(RDst.getReg(0))</div>
<div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;    .addUse(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>)</div>
<div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;    .addUse(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>)</div>
<div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;    .setMIFlags(Flags);</div>
<div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160; </div>
<div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;}</div>
<div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160; </div>
<div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;<span class="comment">// Enable or disable FP32 denorm mode. When &#39;Enable&#39; is true, emit instructions</span></div>
<div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;<span class="comment">// to enable denorm mode. When &#39;Enable&#39; is false, disable denorm mode.</span></div>
<div class="line"><a name="l03861"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#a2260e90dbd0d262a9e7cdfc621342e99"> 3861</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a2260e90dbd0d262a9e7cdfc621342e99">toggleSPDenormMode</a>(<span class="keywordtype">bool</span> Enable,</div>
<div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;                               <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,</div>
<div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;                               <span class="keyword">const</span> <a class="code" href="classllvm_1_1GCNSubtarget.html">GCNSubtarget</a> &amp;<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>,</div>
<div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;                               AMDGPU::SIModeRegisterDefaults <a class="code" href="SIWholeQuadMode_8cpp.html#a0c198437833c48138f49e3589bd08773">Mode</a>) {</div>
<div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;  <span class="comment">// Set SP denorm mode to this value.</span></div>
<div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;  <span class="keywordtype">unsigned</span> SPDenormMode =</div>
<div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;    <a class="code" href="DwarfDebug_8cpp.html#aaf2a32c0f2738e57cac623b73b2c88aba80cb2080e90221d1f5b425387d9bd030">Enable</a> ? <a class="code" href="SIDefines_8h.html#a794476833214d5191d905cb35da453a8">FP_DENORM_FLUSH_NONE</a> : <a class="code" href="SIWholeQuadMode_8cpp.html#a0c198437833c48138f49e3589bd08773">Mode</a>.fpDenormModeSPValue();</div>
<div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160; </div>
<div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasDenormModeInst()) {</div>
<div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;    <span class="comment">// Preserve default FP64FP16 denorm mode while updating FP32 mode.</span></div>
<div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;    <a class="code" href="classuint32__t.html">uint32_t</a> DPDenormModeDefault = <a class="code" href="SIWholeQuadMode_8cpp.html#a0c198437833c48138f49e3589bd08773">Mode</a>.fpDenormModeDPValue();</div>
<div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160; </div>
<div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;    <a class="code" href="classuint32__t.html">uint32_t</a> NewDenormModeValue = SPDenormMode | (DPDenormModeDefault &lt;&lt; 2);</div>
<div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildInstr(AMDGPU::S_DENORM_MODE)</div>
<div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;      .addImm(NewDenormModeValue);</div>
<div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160; </div>
<div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;    <span class="comment">// Select FP32 bit field in mode register.</span></div>
<div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;    <span class="keywordtype">unsigned</span> SPDenormModeBitField = <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a018924463515df5f66f3c5a039750da8aebfc48ed48afe18e84417d0de513b6bb">AMDGPU::Hwreg::ID_MODE</a> |</div>
<div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;                                    (4 &lt;&lt; <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6110fc30bc7311a6cf99814530362e21aac0a8352cc7cdb2686e5536f915725f1">AMDGPU::Hwreg::OFFSET_SHIFT_</a>) |</div>
<div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;                                    (1 &lt;&lt; <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a2dd789820f1036a942eb3ee6a4b8a71da607eee7dd279e8007ab5c43c71f1a2bb">AMDGPU::Hwreg::WIDTH_M1_SHIFT_</a>);</div>
<div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160; </div>
<div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildInstr(AMDGPU::S_SETREG_IMM32_B32)</div>
<div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;      .addImm(SPDenormMode)</div>
<div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;      .addImm(SPDenormModeBitField);</div>
<div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;  }</div>
<div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;}</div>
<div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160; </div>
<div class="line"><a name="l03889"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a464ac3e6051fb78eb3ee985975d17cb2"> 3889</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a464ac3e6051fb78eb3ee985975d17cb2">AMDGPULegalizerInfo::legalizeFDIV32</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;                                         <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</div>
<div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;                                         <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#aa71647a93d5e73c28332b6e52407979c">legalizeFastUnsafeFDIV</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))</div>
<div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160; </div>
<div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Res = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SIMachineFunctionInfo.html">SIMachineFunctionInfo</a> *MFI = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMF().getInfo&lt;<a class="code" href="classllvm_1_1SIMachineFunctionInfo.html">SIMachineFunctionInfo</a>&gt;();</div>
<div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;  <a class="code" href="structllvm_1_1AMDGPU_1_1SIModeRegisterDefaults.html">AMDGPU::SIModeRegisterDefaults</a> <a class="code" href="SIWholeQuadMode_8cpp.html#a0c198437833c48138f49e3589bd08773">Mode</a> = MFI-&gt;<a class="code" href="classllvm_1_1SIMachineFunctionInfo.html#aa3c9b23b5cd32396cbf267f31becca3f">getMode</a>();</div>
<div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160; </div>
<div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;  <a class="code" href="classuint16__t.html">uint16_t</a> Flags = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags();</div>
<div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160; </div>
<div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> S32 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</div>
<div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> S1 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1);</div>
<div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160; </div>
<div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;  <span class="keyword">auto</span> One = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFConstant(S32, 1.0<a class="code" href="include_2llvm_2Demangle_2README_8txt.html#a9d56f6c541a0ab888755f9bc198b8eca">f</a>);</div>
<div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160; </div>
<div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;  <span class="keyword">auto</span> DenominatorScaled =</div>
<div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildIntrinsic(Intrinsic::amdgcn_div_scale, {S32, S1}, <span class="keyword">false</span>)</div>
<div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;      .addUse(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>)</div>
<div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;      .addUse(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>)</div>
<div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;      .addImm(0)</div>
<div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;      .setMIFlags(Flags);</div>
<div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;  <span class="keyword">auto</span> NumeratorScaled =</div>
<div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildIntrinsic(Intrinsic::amdgcn_div_scale, {S32, S1}, <span class="keyword">false</span>)</div>
<div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;      .addUse(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>)</div>
<div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;      .addUse(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>)</div>
<div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;      .addImm(1)</div>
<div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;      .setMIFlags(Flags);</div>
<div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160; </div>
<div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;  <span class="keyword">auto</span> ApproxRcp = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildIntrinsic(Intrinsic::amdgcn_rcp, {S32}, <span class="keyword">false</span>)</div>
<div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;    .addUse(DenominatorScaled.getReg(0))</div>
<div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;    .setMIFlags(Flags);</div>
<div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;  <span class="keyword">auto</span> NegDivScale0 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFNeg(S32, DenominatorScaled, Flags);</div>
<div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160; </div>
<div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;  <span class="comment">// FIXME: Doesn&#39;t correctly model the FP mode switch, and the FP operations</span></div>
<div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;  <span class="comment">// aren&#39;t modeled as reading it.</span></div>
<div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="SIWholeQuadMode_8cpp.html#a0c198437833c48138f49e3589bd08773">Mode</a>.allFP32Denormals())</div>
<div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;    <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a2260e90dbd0d262a9e7cdfc621342e99">toggleSPDenormMode</a>(<span class="keyword">true</span>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, ST, <a class="code" href="SIWholeQuadMode_8cpp.html#a0c198437833c48138f49e3589bd08773">Mode</a>);</div>
<div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160; </div>
<div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;  <span class="keyword">auto</span> Fma0 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMA(S32, NegDivScale0, ApproxRcp, One, Flags);</div>
<div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;  <span class="keyword">auto</span> Fma1 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMA(S32, Fma0, ApproxRcp, ApproxRcp, Flags);</div>
<div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;  <span class="keyword">auto</span> <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMul(S32, NumeratorScaled, Fma1, Flags);</div>
<div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;  <span class="keyword">auto</span> Fma2 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMA(S32, NegDivScale0, <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>, NumeratorScaled, Flags);</div>
<div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;  <span class="keyword">auto</span> Fma3 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMA(S32, Fma2, Fma1, <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>, Flags);</div>
<div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160;  <span class="keyword">auto</span> Fma4 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMA(S32, NegDivScale0, Fma3, NumeratorScaled, Flags);</div>
<div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160; </div>
<div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="SIWholeQuadMode_8cpp.html#a0c198437833c48138f49e3589bd08773">Mode</a>.allFP32Denormals())</div>
<div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;    <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a2260e90dbd0d262a9e7cdfc621342e99">toggleSPDenormMode</a>(<span class="keyword">false</span>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, ST, <a class="code" href="SIWholeQuadMode_8cpp.html#a0c198437833c48138f49e3589bd08773">Mode</a>);</div>
<div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160; </div>
<div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;  <span class="keyword">auto</span> Fmas = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildIntrinsic(Intrinsic::amdgcn_div_fmas, {S32}, <span class="keyword">false</span>)</div>
<div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;    .addUse(Fma4.getReg(0))</div>
<div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;    .addUse(Fma1.getReg(0))</div>
<div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;    .addUse(Fma3.getReg(0))</div>
<div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;    .addUse(NumeratorScaled.getReg(1))</div>
<div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;    .setMIFlags(Flags);</div>
<div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160; </div>
<div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildIntrinsic(Intrinsic::amdgcn_div_fixup, Res, <span class="keyword">false</span>)</div>
<div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;    .addUse(Fmas.getReg(0))</div>
<div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;    .addUse(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>)</div>
<div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;    .addUse(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>)</div>
<div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;    .setMIFlags(Flags);</div>
<div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160; </div>
<div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;}</div>
<div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160; </div>
<div class="line"><a name="l03958"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a30fc420ff83b1e2c4ab42e86d9071e34"> 3958</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a30fc420ff83b1e2c4ab42e86d9071e34">AMDGPULegalizerInfo::legalizeFDIV64</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;                                         <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</div>
<div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;                                         <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#ac0184339c875630ffed0e19b55899b82">legalizeFastUnsafeFDIV64</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))</div>
<div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160; </div>
<div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Res = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160; </div>
<div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;  <a class="code" href="classuint16__t.html">uint16_t</a> Flags = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags();</div>
<div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160; </div>
<div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> S64 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64);</div>
<div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> S1 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1);</div>
<div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160; </div>
<div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;  <span class="keyword">auto</span> One = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFConstant(S64, 1.0);</div>
<div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160; </div>
<div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;  <span class="keyword">auto</span> DivScale0 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildIntrinsic(Intrinsic::amdgcn_div_scale, {S64, S1}, <span class="keyword">false</span>)</div>
<div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;    .addUse(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>)</div>
<div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;    .addUse(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>)</div>
<div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;    .addImm(0)</div>
<div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;    .setMIFlags(Flags);</div>
<div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160; </div>
<div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;  <span class="keyword">auto</span> NegDivScale0 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFNeg(S64, DivScale0.getReg(0), Flags);</div>
<div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160; </div>
<div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;  <span class="keyword">auto</span> Rcp = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildIntrinsic(Intrinsic::amdgcn_rcp, {S64}, <span class="keyword">false</span>)</div>
<div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;    .addUse(DivScale0.getReg(0))</div>
<div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;    .setMIFlags(Flags);</div>
<div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160; </div>
<div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;  <span class="keyword">auto</span> Fma0 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMA(S64, NegDivScale0, Rcp, One, Flags);</div>
<div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;  <span class="keyword">auto</span> Fma1 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMA(S64, Rcp, Fma0, Rcp, Flags);</div>
<div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;  <span class="keyword">auto</span> Fma2 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMA(S64, NegDivScale0, Fma1, One, Flags);</div>
<div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160; </div>
<div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;  <span class="keyword">auto</span> DivScale1 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildIntrinsic(Intrinsic::amdgcn_div_scale, {S64, S1}, <span class="keyword">false</span>)</div>
<div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;    .addUse(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>)</div>
<div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;    .addUse(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>)</div>
<div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;    .addImm(1)</div>
<div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;    .setMIFlags(Flags);</div>
<div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160; </div>
<div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;  <span class="keyword">auto</span> Fma3 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMA(S64, Fma1, Fma2, Fma1, Flags);</div>
<div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;  <span class="keyword">auto</span> <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMul(S64, DivScale1.getReg(0), Fma3, Flags);</div>
<div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;  <span class="keyword">auto</span> Fma4 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMA(S64, NegDivScale0, <a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>, DivScale1.getReg(0), Flags);</div>
<div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160; </div>
<div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Scale;</div>
<div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;  <span class="keywordflow">if</span> (!ST.<a class="code" href="classllvm_1_1GCNSubtarget.html#a0fa696e47a30e77762a75d6eb8fe1e34">hasUsableDivScaleConditionOutput</a>()) {</div>
<div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;    <span class="comment">// Workaround a hardware bug on SI where the condition output from div_scale</span></div>
<div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;    <span class="comment">// is not usable.</span></div>
<div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160; </div>
<div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> S32 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</div>
<div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160; </div>
<div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;    <span class="keyword">auto</span> NumUnmerge = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUnmerge(S32, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>);</div>
<div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;    <span class="keyword">auto</span> DenUnmerge = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUnmerge(S32, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>);</div>
<div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160;    <span class="keyword">auto</span> Scale0Unmerge = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUnmerge(S32, DivScale0);</div>
<div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;    <span class="keyword">auto</span> Scale1Unmerge = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUnmerge(S32, DivScale1);</div>
<div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160; </div>
<div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;    <span class="keyword">auto</span> CmpNum = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildICmp(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>, S1, NumUnmerge.getReg(1),</div>
<div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;                              Scale1Unmerge.getReg(1));</div>
<div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;    <span class="keyword">auto</span> CmpDen = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildICmp(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>, S1, DenUnmerge.getReg(1),</div>
<div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;                              Scale0Unmerge.getReg(1));</div>
<div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;    Scale = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildXor(S1, CmpNum, CmpDen).getReg(0);</div>
<div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;    Scale = DivScale1.getReg(1);</div>
<div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;  }</div>
<div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160; </div>
<div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;  <span class="keyword">auto</span> Fmas = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildIntrinsic(Intrinsic::amdgcn_div_fmas, {S64}, <span class="keyword">false</span>)</div>
<div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;    .addUse(Fma4.getReg(0))</div>
<div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;    .addUse(Fma3.getReg(0))</div>
<div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;    .addUse(<a class="code" href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a>.getReg(0))</div>
<div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;    .addUse(Scale)</div>
<div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;    .setMIFlags(Flags);</div>
<div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160; </div>
<div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildIntrinsic(Intrinsic::amdgcn_div_fixup, <a class="code" href="namespacellvm.html#ab9c6b351507d3c0730f4290919d43a12">ArrayRef</a>(Res), <span class="keyword">false</span>)</div>
<div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;      .addUse(Fmas.getReg(0))</div>
<div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;      .addUse(<a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>)</div>
<div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;      .addUse(<a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>)</div>
<div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;      .setMIFlags(Flags);</div>
<div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160; </div>
<div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;}</div>
<div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160; </div>
<div class="line"><a name="l04039"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a6f737d47e92bb08927c272b12fba32d8"> 4039</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a6f737d47e92bb08927c272b12fba32d8">AMDGPULegalizerInfo::legalizeFDIVFastIntrin</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;                                                 <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</div>
<div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;                                                 <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Res = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getReg();</div>
<div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;  <a class="code" href="classuint16__t.html">uint16_t</a> Flags = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags();</div>
<div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160; </div>
<div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> S32 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</div>
<div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> S1 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(1);</div>
<div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160; </div>
<div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;  <span class="keyword">auto</span> Abs = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFAbs(S32, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, Flags);</div>
<div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> C0Val(1.0<a class="code" href="include_2llvm_2Demangle_2README_8txt.html#a9d56f6c541a0ab888755f9bc198b8eca">f</a>);</div>
<div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160; </div>
<div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;  <span class="keyword">auto</span> C0 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(S32, 0x6f800000);</div>
<div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;  <span class="keyword">auto</span> <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(S32, 0x2f800000);</div>
<div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;  <span class="keyword">auto</span> C2 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(S32, llvm::bit_cast&lt;uint32_t&gt;(1.0<a class="code" href="include_2llvm_2Demangle_2README_8txt.html#a9d56f6c541a0ab888755f9bc198b8eca">f</a>));</div>
<div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160; </div>
<div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;  <span class="keyword">auto</span> CmpRes = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFCmp(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba4c399f525bbcf03d72af4b303e6eeca8">CmpInst::FCMP_OGT</a>, S1, Abs, C0, Flags);</div>
<div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;  <span class="keyword">auto</span> Sel = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildSelect(S32, CmpRes, <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, C2, Flags);</div>
<div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160; </div>
<div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;  <span class="keyword">auto</span> Mul0 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMul(S32, <a class="code" href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a>, Sel, Flags);</div>
<div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160; </div>
<div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0ea480770519d97b188b42a1a0aa660a3db">RCP</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildIntrinsic(Intrinsic::amdgcn_rcp, {S32}, <span class="keyword">false</span>)</div>
<div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;    .addUse(Mul0.getReg(0))</div>
<div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;    .setMIFlags(Flags);</div>
<div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160; </div>
<div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160;  <span class="keyword">auto</span> Mul1 = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMul(S32, <a class="code" href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a>, <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0ea480770519d97b188b42a1a0aa660a3db">RCP</a>, Flags);</div>
<div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160; </div>
<div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMul(Res, Sel, Mul1, Flags);</div>
<div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160; </div>
<div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;}</div>
<div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160; </div>
<div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;<span class="comment">// Expand llvm.amdgcn.rsq.clamp on targets that don&#39;t support the instruction.</span></div>
<div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;<span class="comment">// FIXME: Why do we handle this one but not other removed instructions?</span></div>
<div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;<span class="comment">// Reciprocal square root.  The clamp prevents infinite results, clamping</span></div>
<div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;<span class="comment">// infinities to max_float.  D.f = 1.0 / sqrt(S0.f), result clamped to</span></div>
<div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;<span class="comment">// +-max_float.</span></div>
<div class="line"><a name="l04080"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a68b29f4aff8a6db0040bc8e00a520116"> 4080</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a68b29f4aff8a6db0040bc8e00a520116">AMDGPULegalizerInfo::legalizeRsqClampIntrinsic</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;                                                    <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</div>
<div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;                                                    <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160;  <span class="keywordflow">if</span> (ST.<a class="code" href="classllvm_1_1GCNSubtarget.html#ace4de1de19cbe837c578fb3654b6c998">getGeneration</a>() &lt; <a class="code" href="classllvm_1_1AMDGPUSubtarget.html#a53c0ee4138bfbf9e0410a65e0eaa36e2aef8609af541a5b1b01484b29d0f62534">AMDGPUSubtarget::VOLCANIC_ISLANDS</a>)</div>
<div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160; </div>
<div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Src = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;  <span class="keyword">auto</span> Flags = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getFlags();</div>
<div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160; </div>
<div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst);</div>
<div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160; </div>
<div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;  <span class="keyword">const</span> <a class="code" href="structllvm_1_1fltSemantics.html">fltSemantics</a> *FltSemantics;</div>
<div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;  <span class="keywordflow">if</span> (Ty == <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32))</div>
<div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160;    FltSemantics = &amp;<a class="code" href="structllvm_1_1APFloatBase.html#a0c5765e9acba977f6e462c2917276d8f">APFloat::IEEEsingle</a>();</div>
<div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Ty == <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64))</div>
<div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;    FltSemantics = &amp;<a class="code" href="structllvm_1_1APFloatBase.html#a6ba7c3d54a5a714f7a27861ee114cce3">APFloat::IEEEdouble</a>();</div>
<div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160; </div>
<div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160;  <span class="keyword">auto</span> Rsq = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildIntrinsic(Intrinsic::amdgcn_rsq, {Ty}, <span class="keyword">false</span>)</div>
<div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160;    .addUse(Src)</div>
<div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160;    .setMIFlags(Flags);</div>
<div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160; </div>
<div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;  <span class="comment">// We don&#39;t need to concern ourselves with the snan handling difference, since</span></div>
<div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160;  <span class="comment">// the rsq quieted (or not) so use the one which will directly select.</span></div>
<div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SIMachineFunctionInfo.html">SIMachineFunctionInfo</a> *MFI = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMF().getInfo&lt;<a class="code" href="classllvm_1_1SIMachineFunctionInfo.html">SIMachineFunctionInfo</a>&gt;();</div>
<div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> UseIEEE = MFI-&gt;<a class="code" href="classllvm_1_1SIMachineFunctionInfo.html#aa3c9b23b5cd32396cbf267f31becca3f">getMode</a>().<a class="code" href="structllvm_1_1AMDGPU_1_1SIModeRegisterDefaults.html#a05d4f9c4d9e486f4fd3d69a89121e107">IEEE</a>;</div>
<div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160; </div>
<div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;  <span class="keyword">auto</span> MaxFlt = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFConstant(Ty, <a class="code" href="classllvm_1_1APFloat.html#aaa67fe0741c2b3712630ae636f8c2c20">APFloat::getLargest</a>(*FltSemantics));</div>
<div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;  <span class="keyword">auto</span> ClampMax = UseIEEE ? <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMinNumIEEE(Ty, Rsq, MaxFlt, Flags) :</div>
<div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160;                            <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMinNum(Ty, Rsq, MaxFlt, Flags);</div>
<div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160; </div>
<div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160;  <span class="keyword">auto</span> MinFlt = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFConstant(Ty, <a class="code" href="classllvm_1_1APFloat.html#aaa67fe0741c2b3712630ae636f8c2c20">APFloat::getLargest</a>(*FltSemantics, <span class="keyword">true</span>));</div>
<div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160; </div>
<div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;  <span class="keywordflow">if</span> (UseIEEE)</div>
<div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMaxNumIEEE(Dst, ClampMax, MinFlt, Flags);</div>
<div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildFMaxNum(Dst, ClampMax, MinFlt, Flags);</div>
<div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;}</div>
<div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160; </div>
<div class="line"><a name="l04123"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#ae6ede36b7d19177c32526e21fe6ee882"> 4123</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#ae6ede36b7d19177c32526e21fe6ee882">getDSFPAtomicOpcode</a>(<a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">Intrinsic::ID</a> IID) {</div>
<div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;  <span class="keywordflow">switch</span> (IID) {</div>
<div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_ds_fadd:</div>
<div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;    <span class="keywordflow">return</span> AMDGPU::G_ATOMICRMW_FADD;</div>
<div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_ds_fmin:</div>
<div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;    <span class="keywordflow">return</span> AMDGPU::G_AMDGPU_ATOMIC_FMIN;</div>
<div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_ds_fmax:</div>
<div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160;    <span class="keywordflow">return</span> AMDGPU::G_AMDGPU_ATOMIC_FMAX;</div>
<div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;not a DS FP intrinsic&quot;</span>);</div>
<div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160;  }</div>
<div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;}</div>
<div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160; </div>
<div class="line"><a name="l04136"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a4e7c460c9087646310b0001a0b46d336"> 4136</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a4e7c460c9087646310b0001a0b46d336">AMDGPULegalizerInfo::legalizeDSAtomicFPIntrinsic</a>(<a class="code" href="classllvm_1_1LegalizerHelper.html">LegalizerHelper</a> &amp;Helper,</div>
<div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;                                                      <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160;                                                      <a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">Intrinsic::ID</a> IID)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160;  <a class="code" href="classllvm_1_1GISelChangeObserver.html">GISelChangeObserver</a> &amp;Observer = Helper.<a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>;</div>
<div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;  Observer.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160; </div>
<div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.setDesc(ST.<a class="code" href="classllvm_1_1GCNSubtarget.html#a4bbc0f0059b8fc54fdd919e558f0b911">getInstrInfo</a>()-&gt;get(<a class="code" href="AMDGPULegalizerInfo_8cpp.html#ae6ede36b7d19177c32526e21fe6ee882">getDSFPAtomicOpcode</a>(IID)));</div>
<div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160; </div>
<div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160;  <span class="comment">// The remaining operands were used to set fields in the MemOperand on</span></div>
<div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160;  <span class="comment">// construction.</span></div>
<div class="line"><a name="l04146"></a><span class="lineno"> 4146</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 6; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &gt; 3; --<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.removeOperand(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160; </div>
<div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.removeOperand(1); <span class="comment">// Remove the intrinsic ID.</span></div>
<div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;  Observer.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;}</div>
<div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160; </div>
<div class="line"><a name="l04154"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#ad7c01a9166d49578fc9cb3162a87f396"> 4154</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#ad7c01a9166d49578fc9cb3162a87f396">AMDGPULegalizerInfo::getImplicitArgPtr</a>(<a class="code" href="classllvm_1_1Register.html">Register</a> DstReg,</div>
<div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;                                            <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</div>
<div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;                                            <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;  <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> =</div>
<div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;    ST.<a class="code" href="classllvm_1_1GCNSubtarget.html#aadc55ee80218e97fbccb05099877eb51">getTargetLowering</a>()-&gt;<a class="code" href="classllvm_1_1AMDGPUTargetLowering.html#a5a663b4deab0378b73e460588d96871a">getImplicitParameterOffset</a>(</div>
<div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMF(), <a class="code" href="classllvm_1_1AMDGPUTargetLowering.html#aabb66ae6636b6dbd45c1b66dd9353821a3b608a404034c22b030fca524632ebb0">AMDGPUTargetLowering::FIRST_IMPLICIT</a>);</div>
<div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> DstTy = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(DstReg);</div>
<div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> IdxTy = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(DstTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>());</div>
<div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160; </div>
<div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> KernargPtrReg = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(DstTy);</div>
<div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#ae63198baedfab72494f0d79823e99b75">loadInputValue</a>(KernargPtrReg, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,</div>
<div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;                      <a class="code" href="structllvm_1_1AMDGPUFunctionArgInfo.html#a0e789059bf7f286b7f6bc75b43aac98baf32f3fd30ae548866dc7e45092dd90b9">AMDGPUFunctionArgInfo::KERNARG_SEGMENT_PTR</a>))</div>
<div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160; </div>
<div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;  <span class="comment">// FIXME: This should be nuw</span></div>
<div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildPtrAdd(DstReg, KernargPtrReg, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(IdxTy, <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>).getReg(0));</div>
<div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;}</div>
<div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160; </div>
<div class="line"><a name="l04173"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a8bc1455f0ec29a33f76adecf8e668af8"> 4173</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a8bc1455f0ec29a33f76adecf8e668af8">AMDGPULegalizerInfo::legalizeImplicitArgPtr</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;                                                 <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</div>
<div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;                                                 <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SIMachineFunctionInfo.html">SIMachineFunctionInfo</a> *MFI = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMF().getInfo&lt;<a class="code" href="classllvm_1_1SIMachineFunctionInfo.html">SIMachineFunctionInfo</a>&gt;();</div>
<div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;  <span class="keywordflow">if</span> (!MFI-&gt;<a class="code" href="classllvm_1_1AMDGPUMachineFunction.html#ab37f1839fd82f8b84b7a2ca87b289c46">isEntryFunction</a>()) {</div>
<div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a59e8a7f7af57ac84f0bfa83a2e6cd4c3">legalizePreloadedArgIntrin</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,</div>
<div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;                                      <a class="code" href="structllvm_1_1AMDGPUFunctionArgInfo.html#a0e789059bf7f286b7f6bc75b43aac98ba42b0ab73a3671c39fa2798ffe9e80747">AMDGPUFunctionArgInfo::IMPLICIT_ARG_PTR</a>);</div>
<div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;  }</div>
<div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160; </div>
<div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#ad7c01a9166d49578fc9cb3162a87f396">getImplicitArgPtr</a>(DstReg, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))</div>
<div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160; </div>
<div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;}</div>
<div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160; </div>
<div class="line"><a name="l04190"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a3bf20d7d5d2943a38d01c00d1aa82104"> 4190</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a3bf20d7d5d2943a38d01c00d1aa82104">AMDGPULegalizerInfo::getLDSKernelId</a>(<a class="code" href="classllvm_1_1Register.html">Register</a> DstReg,</div>
<div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;                                         <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</div>
<div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;                                         <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMF().getFunction();</div>
<div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;  std::optional&lt;uint32_t&gt; KnownSize =</div>
<div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;      <a class="code" href="classllvm_1_1AMDGPUMachineFunction.html#a13726c00b6a447734d47ecaae49ebbd0">AMDGPUMachineFunction::getLDSKernelIdMetadata</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160;  <span class="keywordflow">if</span> (KnownSize.has_value())</div>
<div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(DstReg, *KnownSize);</div>
<div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160;}</div>
<div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160; </div>
<div class="line"><a name="l04201"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#ab40f765949a66d4973d528dcf38615fc"> 4201</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#ab40f765949a66d4973d528dcf38615fc">AMDGPULegalizerInfo::legalizeLDSKernelId</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;                                              <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</div>
<div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;                                              <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160; </div>
<div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SIMachineFunctionInfo.html">SIMachineFunctionInfo</a> *MFI = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMF().getInfo&lt;<a class="code" href="classllvm_1_1SIMachineFunctionInfo.html">SIMachineFunctionInfo</a>&gt;();</div>
<div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;  <span class="keywordflow">if</span> (!MFI-&gt;<a class="code" href="classllvm_1_1AMDGPUMachineFunction.html#ab37f1839fd82f8b84b7a2ca87b289c46">isEntryFunction</a>()) {</div>
<div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a59e8a7f7af57ac84f0bfa83a2e6cd4c3">legalizePreloadedArgIntrin</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,</div>
<div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;                                      <a class="code" href="structllvm_1_1AMDGPUFunctionArgInfo.html#a0e789059bf7f286b7f6bc75b43aac98ba20d047732dd4b74606c9c63280727fa3">AMDGPUFunctionArgInfo::LDS_KERNEL_ID</a>);</div>
<div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160;  }</div>
<div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160; </div>
<div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a3bf20d7d5d2943a38d01c00d1aa82104">getLDSKernelId</a>(DstReg, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))</div>
<div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04214"></a><span class="lineno"> 4214</span>&#160; </div>
<div class="line"><a name="l04215"></a><span class="lineno"> 4215</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04217"></a><span class="lineno"> 4217</span>&#160;}</div>
<div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160; </div>
<div class="line"><a name="l04219"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a1a1ef8cdc87d83bb4e114e897e86d58c"> 4219</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a1a1ef8cdc87d83bb4e114e897e86d58c">AMDGPULegalizerInfo::legalizeIsAddrSpace</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;                                              <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</div>
<div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;                                              <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,</div>
<div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;                                              <span class="keywordtype">unsigned</span> AddrSpace)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> ApertureReg = <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a2fd97f50411bc650c7f9f6e3118147f4">getSegmentAperture</a>(AddrSpace, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;  <span class="keyword">auto</span> Unmerge = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUnmerge(<a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32), <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg());</div>
<div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Hi32 = Unmerge.getReg(1);</div>
<div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160; </div>
<div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildICmp(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0), Hi32, ApertureReg);</div>
<div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l04229"></a><span class="lineno"> 4229</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160;}</div>
<div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160; </div>
<div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;<span class="comment">// The raw.(t)buffer and struct.(t)buffer intrinsics have two offset args:</span></div>
<div class="line"><a name="l04233"></a><span class="lineno"> 4233</span>&#160;<span class="comment">// offset (the offset that is included in bounds checking and swizzling, to be</span></div>
<div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160;<span class="comment">// split between the instruction&#39;s voffset and immoffset fields) and soffset</span></div>
<div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;<span class="comment">// (the offset that is excluded from bounds checking and swizzling, to go in</span></div>
<div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;<span class="comment">// the instruction&#39;s soffset field).  This function takes the first kind of</span></div>
<div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;<span class="comment">// offset and figures out how to split it between voffset and immoffset.</span></div>
<div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160;std::pair&lt;Register, unsigned&gt;</div>
<div class="line"><a name="l04239"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a14daf64c8f1ebcbe259a41854f49ad12"> 4239</a></span>&#160;<a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a14daf64c8f1ebcbe259a41854f49ad12">AMDGPULegalizerInfo::splitBufferOffsets</a>(<a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,</div>
<div class="line"><a name="l04240"></a><span class="lineno"> 4240</span>&#160;                                        <a class="code" href="classllvm_1_1Register.html">Register</a> OrigOffset)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> MaxImm = 4095;</div>
<div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> BaseReg;</div>
<div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;  <span class="keywordtype">unsigned</span> ImmOffset;</div>
<div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S32 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</div>
<div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160;  <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMRI();</div>
<div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160; </div>
<div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;  std::tie(BaseReg, ImmOffset) =</div>
<div class="line"><a name="l04248"></a><span class="lineno"> 4248</span>&#160;      <a class="code" href="namespacellvm_1_1AMDGPU.html#a0aae3b4716371b7413849fa7d20df1ac">AMDGPU::getBaseWithConstantOffset</a>(<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, OrigOffset);</div>
<div class="line"><a name="l04249"></a><span class="lineno"> 4249</span>&#160; </div>
<div class="line"><a name="l04250"></a><span class="lineno"> 4250</span>&#160;  <span class="comment">// If BaseReg is a pointer, convert it to int.</span></div>
<div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(BaseReg).<a class="code" href="classllvm_1_1LLT.html#a9d825f5954d7bd527aea490668c624c6">isPointer</a>())</div>
<div class="line"><a name="l04252"></a><span class="lineno"> 4252</span>&#160;    BaseReg = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildPtrToInt(<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(OrigOffset), BaseReg).getReg(0);</div>
<div class="line"><a name="l04253"></a><span class="lineno"> 4253</span>&#160; </div>
<div class="line"><a name="l04254"></a><span class="lineno"> 4254</span>&#160;  <span class="comment">// If the immediate value is too big for the immoffset field, put the value</span></div>
<div class="line"><a name="l04255"></a><span class="lineno"> 4255</span>&#160;  <span class="comment">// and -4096 into the immoffset field so that the value that is copied/added</span></div>
<div class="line"><a name="l04256"></a><span class="lineno"> 4256</span>&#160;  <span class="comment">// for the voffset field is a multiple of 4096, and it stands more chance</span></div>
<div class="line"><a name="l04257"></a><span class="lineno"> 4257</span>&#160;  <span class="comment">// of being CSEd with the copy/add for another similar load/store.</span></div>
<div class="line"><a name="l04258"></a><span class="lineno"> 4258</span>&#160;  <span class="comment">// However, do not do that rounding down to a multiple of 4096 if that is a</span></div>
<div class="line"><a name="l04259"></a><span class="lineno"> 4259</span>&#160;  <span class="comment">// negative number, as it appears to be illegal to have a negative offset</span></div>
<div class="line"><a name="l04260"></a><span class="lineno"> 4260</span>&#160;  <span class="comment">// in the vgpr, even if adding the immediate offset makes it positive.</span></div>
<div class="line"><a name="l04261"></a><span class="lineno"> 4261</span>&#160;  <span class="keywordtype">unsigned</span> Overflow = ImmOffset &amp; ~MaxImm;</div>
<div class="line"><a name="l04262"></a><span class="lineno"> 4262</span>&#160;  ImmOffset -= Overflow;</div>
<div class="line"><a name="l04263"></a><span class="lineno"> 4263</span>&#160;  <span class="keywordflow">if</span> ((int32_t)Overflow &lt; 0) {</div>
<div class="line"><a name="l04264"></a><span class="lineno"> 4264</span>&#160;    Overflow += ImmOffset;</div>
<div class="line"><a name="l04265"></a><span class="lineno"> 4265</span>&#160;    ImmOffset = 0;</div>
<div class="line"><a name="l04266"></a><span class="lineno"> 4266</span>&#160;  }</div>
<div class="line"><a name="l04267"></a><span class="lineno"> 4267</span>&#160; </div>
<div class="line"><a name="l04268"></a><span class="lineno"> 4268</span>&#160;  <span class="keywordflow">if</span> (Overflow != 0) {</div>
<div class="line"><a name="l04269"></a><span class="lineno"> 4269</span>&#160;    <span class="keywordflow">if</span> (!BaseReg) {</div>
<div class="line"><a name="l04270"></a><span class="lineno"> 4270</span>&#160;      BaseReg = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(S32, Overflow).getReg(0);</div>
<div class="line"><a name="l04271"></a><span class="lineno"> 4271</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04272"></a><span class="lineno"> 4272</span>&#160;      <span class="keyword">auto</span> OverflowVal = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(S32, Overflow);</div>
<div class="line"><a name="l04273"></a><span class="lineno"> 4273</span>&#160;      BaseReg = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildAdd(S32, BaseReg, OverflowVal).getReg(0);</div>
<div class="line"><a name="l04274"></a><span class="lineno"> 4274</span>&#160;    }</div>
<div class="line"><a name="l04275"></a><span class="lineno"> 4275</span>&#160;  }</div>
<div class="line"><a name="l04276"></a><span class="lineno"> 4276</span>&#160; </div>
<div class="line"><a name="l04277"></a><span class="lineno"> 4277</span>&#160;  <span class="keywordflow">if</span> (!BaseReg)</div>
<div class="line"><a name="l04278"></a><span class="lineno"> 4278</span>&#160;    BaseReg = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(S32, 0).getReg(0);</div>
<div class="line"><a name="l04279"></a><span class="lineno"> 4279</span>&#160; </div>
<div class="line"><a name="l04280"></a><span class="lineno"> 4280</span>&#160;  <span class="keywordflow">return</span> std::pair(BaseReg, ImmOffset);</div>
<div class="line"><a name="l04281"></a><span class="lineno"> 4281</span>&#160;}</div>
<div class="line"><a name="l04282"></a><span class="lineno"> 4282</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l04283"></a><span class="lineno"> 4283</span>&#160;<span class="comment">/// Update \p MMO based on the offset inputs to a raw/struct buffer intrinsic.</span></div>
<div class="line"><a name="l04284"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#ad19d3a061adf35e67b35092cfee60864"> 4284</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#ad19d3a061adf35e67b35092cfee60864">AMDGPULegalizerInfo::updateBufferMMO</a>(<a class="code" href="classllvm_1_1MachineMemOperand.html">MachineMemOperand</a> *MMO,</div>
<div class="line"><a name="l04285"></a><span class="lineno"> 4285</span>&#160;                                          <a class="code" href="classllvm_1_1Register.html">Register</a> VOffset, <a class="code" href="classllvm_1_1Register.html">Register</a> SOffset,</div>
<div class="line"><a name="l04286"></a><span class="lineno"> 4286</span>&#160;                                          <span class="keywordtype">unsigned</span> ImmOffset, <a class="code" href="classllvm_1_1Register.html">Register</a> VIndex,</div>
<div class="line"><a name="l04287"></a><span class="lineno"> 4287</span>&#160;                                          <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l04288"></a><span class="lineno"> 4288</span>&#160;  std::optional&lt;ValueAndVReg&gt; MaybeVOffsetVal =</div>
<div class="line"><a name="l04289"></a><span class="lineno"> 4289</span>&#160;      <a class="code" href="namespacellvm.html#ac76eb82370e997f967454f441effbbff">getIConstantVRegValWithLookThrough</a>(VOffset, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>);</div>
<div class="line"><a name="l04290"></a><span class="lineno"> 4290</span>&#160;  std::optional&lt;ValueAndVReg&gt; MaybeSOffsetVal =</div>
<div class="line"><a name="l04291"></a><span class="lineno"> 4291</span>&#160;      <a class="code" href="namespacellvm.html#ac76eb82370e997f967454f441effbbff">getIConstantVRegValWithLookThrough</a>(SOffset, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>);</div>
<div class="line"><a name="l04292"></a><span class="lineno"> 4292</span>&#160;  std::optional&lt;ValueAndVReg&gt; MaybeVIndexVal =</div>
<div class="line"><a name="l04293"></a><span class="lineno"> 4293</span>&#160;      <a class="code" href="namespacellvm.html#ac76eb82370e997f967454f441effbbff">getIConstantVRegValWithLookThrough</a>(VIndex, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>);</div>
<div class="line"><a name="l04294"></a><span class="lineno"> 4294</span>&#160;  <span class="comment">// If the combined VOffset + SOffset + ImmOffset + strided VIndex is constant,</span></div>
<div class="line"><a name="l04295"></a><span class="lineno"> 4295</span>&#160;  <span class="comment">// update the MMO with that offset. The stride is unknown so we can only do</span></div>
<div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160;  <span class="comment">// this if VIndex is constant 0.</span></div>
<div class="line"><a name="l04297"></a><span class="lineno"> 4297</span>&#160;  <span class="keywordflow">if</span> (MaybeVOffsetVal &amp;&amp; MaybeSOffsetVal &amp;&amp; MaybeVIndexVal &amp;&amp;</div>
<div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160;      MaybeVIndexVal-&gt;Value == 0) {</div>
<div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> TotalOffset = MaybeVOffsetVal-&gt;Value.<a class="code" href="classllvm_1_1APInt.html#a217e0207d9cc8e046c2dccbf0e4bb198">getZExtValue</a>() +</div>
<div class="line"><a name="l04300"></a><span class="lineno"> 4300</span>&#160;                           MaybeSOffsetVal-&gt;Value.getZExtValue() + ImmOffset;</div>
<div class="line"><a name="l04301"></a><span class="lineno"> 4301</span>&#160;    MMO-&gt;<a class="code" href="classllvm_1_1MachineMemOperand.html#a9b7acc8555a4466888d20106e3812548">setOffset</a>(TotalOffset);</div>
<div class="line"><a name="l04302"></a><span class="lineno"> 4302</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04303"></a><span class="lineno"> 4303</span>&#160;    <span class="comment">// We don&#39;t have a constant combined offset to use in the MMO. Give up.</span></div>
<div class="line"><a name="l04304"></a><span class="lineno"> 4304</span>&#160;    MMO-&gt;<a class="code" href="classllvm_1_1MachineMemOperand.html#a606d73cbc9cc6210d626ec4b12c6c32e">setValue</a>((<a class="code" href="classllvm_1_1Value.html">Value</a> *)<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160;  }</div>
<div class="line"><a name="l04306"></a><span class="lineno"> 4306</span>&#160;}</div>
<div class="line"><a name="l04307"></a><span class="lineno"> 4307</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l04308"></a><span class="lineno"> 4308</span>&#160;<span class="comment">/// Handle register layout difference for f16 images for some subtargets.</span></div>
<div class="line"><a name="l04309"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a3dcd2bcf223daced673ed18e4ad47efa"> 4309</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a3dcd2bcf223daced673ed18e4ad47efa">AMDGPULegalizerInfo::handleD16VData</a>(<a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,</div>
<div class="line"><a name="l04310"></a><span class="lineno"> 4310</span>&#160;                                             <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</div>
<div class="line"><a name="l04311"></a><span class="lineno"> 4311</span>&#160;                                             <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>,</div>
<div class="line"><a name="l04312"></a><span class="lineno"> 4312</span>&#160;                                             <span class="keywordtype">bool</span> ImageStore)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l04313"></a><span class="lineno"> 4313</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S16 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(16);</div>
<div class="line"><a name="l04314"></a><span class="lineno"> 4314</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S32 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</div>
<div class="line"><a name="l04315"></a><span class="lineno"> 4315</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> StoreVT = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l04316"></a><span class="lineno"> 4316</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(StoreVT.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() &amp;&amp; StoreVT.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>() == S16);</div>
<div class="line"><a name="l04317"></a><span class="lineno"> 4317</span>&#160; </div>
<div class="line"><a name="l04318"></a><span class="lineno"> 4318</span>&#160;  <span class="keywordflow">if</span> (ST.<a class="code" href="classllvm_1_1GCNSubtarget.html#ad30b3c952ed576256171d49971ec9241">hasUnpackedD16VMem</a>()) {</div>
<div class="line"><a name="l04319"></a><span class="lineno"> 4319</span>&#160;    <span class="keyword">auto</span> Unmerge = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUnmerge(S16, <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l04320"></a><span class="lineno"> 4320</span>&#160; </div>
<div class="line"><a name="l04321"></a><span class="lineno"> 4321</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 4&gt;</a> WideRegs;</div>
<div class="line"><a name="l04322"></a><span class="lineno"> 4322</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = Unmerge-&gt;getNumOperands() - 1; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l04323"></a><span class="lineno"> 4323</span>&#160;      WideRegs.push_back(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildAnyExt(S32, Unmerge.getReg(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)).getReg(0));</div>
<div class="line"><a name="l04324"></a><span class="lineno"> 4324</span>&#160; </div>
<div class="line"><a name="l04325"></a><span class="lineno"> 4325</span>&#160;    <span class="keywordtype">int</span> NumElts = StoreVT.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>();</div>
<div class="line"><a name="l04326"></a><span class="lineno"> 4326</span>&#160; </div>
<div class="line"><a name="l04327"></a><span class="lineno"> 4327</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildBuildVector(<a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(NumElts, S32), WideRegs)</div>
<div class="line"><a name="l04328"></a><span class="lineno"> 4328</span>&#160;        .getReg(0);</div>
<div class="line"><a name="l04329"></a><span class="lineno"> 4329</span>&#160;  }</div>
<div class="line"><a name="l04330"></a><span class="lineno"> 4330</span>&#160; </div>
<div class="line"><a name="l04331"></a><span class="lineno"> 4331</span>&#160;  <span class="keywordflow">if</span> (ImageStore &amp;&amp; ST.<a class="code" href="classllvm_1_1GCNSubtarget.html#a0e70db1e8483e587c41a315dfad8c88a">hasImageStoreD16Bug</a>()) {</div>
<div class="line"><a name="l04332"></a><span class="lineno"> 4332</span>&#160;    <span class="keywordflow">if</span> (StoreVT.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>() == 2) {</div>
<div class="line"><a name="l04333"></a><span class="lineno"> 4333</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 4&gt;</a> PackedRegs;</div>
<div class="line"><a name="l04334"></a><span class="lineno"> 4334</span>&#160;      <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildBitcast(S32, <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>).getReg(0);</div>
<div class="line"><a name="l04335"></a><span class="lineno"> 4335</span>&#160;      PackedRegs.push_back(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l04336"></a><span class="lineno"> 4336</span>&#160;      PackedRegs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#ad0b3d8447f88377b62d9c019f3c4e118">resize</a>(2, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUndef(S32).getReg(0));</div>
<div class="line"><a name="l04337"></a><span class="lineno"> 4337</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildBuildVector(<a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(2, S32), PackedRegs)</div>
<div class="line"><a name="l04338"></a><span class="lineno"> 4338</span>&#160;          .getReg(0);</div>
<div class="line"><a name="l04339"></a><span class="lineno"> 4339</span>&#160;    }</div>
<div class="line"><a name="l04340"></a><span class="lineno"> 4340</span>&#160; </div>
<div class="line"><a name="l04341"></a><span class="lineno"> 4341</span>&#160;    <span class="keywordflow">if</span> (StoreVT.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>() == 3) {</div>
<div class="line"><a name="l04342"></a><span class="lineno"> 4342</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 4&gt;</a> PackedRegs;</div>
<div class="line"><a name="l04343"></a><span class="lineno"> 4343</span>&#160;      <span class="keyword">auto</span> Unmerge = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUnmerge(S16, <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l04344"></a><span class="lineno"> 4344</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = Unmerge-&gt;getNumOperands() - 1; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l04345"></a><span class="lineno"> 4345</span>&#160;        PackedRegs.push_back(Unmerge.getReg(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div>
<div class="line"><a name="l04346"></a><span class="lineno"> 4346</span>&#160;      PackedRegs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#ad0b3d8447f88377b62d9c019f3c4e118">resize</a>(6, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUndef(S16).getReg(0));</div>
<div class="line"><a name="l04347"></a><span class="lineno"> 4347</span>&#160;      <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildBuildVector(<a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(6, S16), PackedRegs).getReg(0);</div>
<div class="line"><a name="l04348"></a><span class="lineno"> 4348</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildBitcast(<a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(3, S32), <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>).getReg(0);</div>
<div class="line"><a name="l04349"></a><span class="lineno"> 4349</span>&#160;    }</div>
<div class="line"><a name="l04350"></a><span class="lineno"> 4350</span>&#160; </div>
<div class="line"><a name="l04351"></a><span class="lineno"> 4351</span>&#160;    <span class="keywordflow">if</span> (StoreVT.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>() == 4) {</div>
<div class="line"><a name="l04352"></a><span class="lineno"> 4352</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 4&gt;</a> PackedRegs;</div>
<div class="line"><a name="l04353"></a><span class="lineno"> 4353</span>&#160;      <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildBitcast(<a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(2, S32), <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>).getReg(0);</div>
<div class="line"><a name="l04354"></a><span class="lineno"> 4354</span>&#160;      <span class="keyword">auto</span> Unmerge = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUnmerge(S32, <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>);</div>
<div class="line"><a name="l04355"></a><span class="lineno"> 4355</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = Unmerge-&gt;getNumOperands() - 1; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l04356"></a><span class="lineno"> 4356</span>&#160;        PackedRegs.push_back(Unmerge.getReg(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div>
<div class="line"><a name="l04357"></a><span class="lineno"> 4357</span>&#160;      PackedRegs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#ad0b3d8447f88377b62d9c019f3c4e118">resize</a>(4, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUndef(S32).getReg(0));</div>
<div class="line"><a name="l04358"></a><span class="lineno"> 4358</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildBuildVector(<a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(4, S32), PackedRegs)</div>
<div class="line"><a name="l04359"></a><span class="lineno"> 4359</span>&#160;          .getReg(0);</div>
<div class="line"><a name="l04360"></a><span class="lineno"> 4360</span>&#160;    }</div>
<div class="line"><a name="l04361"></a><span class="lineno"> 4361</span>&#160; </div>
<div class="line"><a name="l04362"></a><span class="lineno"> 4362</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;invalid data type&quot;</span>);</div>
<div class="line"><a name="l04363"></a><span class="lineno"> 4363</span>&#160;  }</div>
<div class="line"><a name="l04364"></a><span class="lineno"> 4364</span>&#160; </div>
<div class="line"><a name="l04365"></a><span class="lineno"> 4365</span>&#160;  <span class="keywordflow">if</span> (StoreVT == <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(3, S16)) {</div>
<div class="line"><a name="l04366"></a><span class="lineno"> 4366</span>&#160;    <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildPadVectorWithUndefElements(<a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(4, S16), <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>)</div>
<div class="line"><a name="l04367"></a><span class="lineno"> 4367</span>&#160;              .getReg(0);</div>
<div class="line"><a name="l04368"></a><span class="lineno"> 4368</span>&#160;  }</div>
<div class="line"><a name="l04369"></a><span class="lineno"> 4369</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>;</div>
<div class="line"><a name="l04370"></a><span class="lineno"> 4370</span>&#160;}</div>
<div class="line"><a name="l04371"></a><span class="lineno"> 4371</span>&#160; </div>
<div class="line"><a name="l04372"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a89cb241c17c5ea1f61fe099207f77eef"> 4372</a></span>&#160;<a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a89cb241c17c5ea1f61fe099207f77eef">AMDGPULegalizerInfo::fixStoreSourceType</a>(</div>
<div class="line"><a name="l04373"></a><span class="lineno"> 4373</span>&#160;  <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="classllvm_1_1Register.html">Register</a> VData, <span class="keywordtype">bool</span> IsFormat)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l04374"></a><span class="lineno"> 4374</span>&#160;  <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> *<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMRI();</div>
<div class="line"><a name="l04375"></a><span class="lineno"> 4375</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(VData);</div>
<div class="line"><a name="l04376"></a><span class="lineno"> 4376</span>&#160; </div>
<div class="line"><a name="l04377"></a><span class="lineno"> 4377</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S16 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(16);</div>
<div class="line"><a name="l04378"></a><span class="lineno"> 4378</span>&#160; </div>
<div class="line"><a name="l04379"></a><span class="lineno"> 4379</span>&#160;  <span class="comment">// Fixup illegal register types for i8 stores.</span></div>
<div class="line"><a name="l04380"></a><span class="lineno"> 4380</span>&#160;  <span class="keywordflow">if</span> (Ty == <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(8) || Ty == S16) {</div>
<div class="line"><a name="l04381"></a><span class="lineno"> 4381</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> AnyExt = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildAnyExt(<a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32), VData).getReg(0);</div>
<div class="line"><a name="l04382"></a><span class="lineno"> 4382</span>&#160;    <span class="keywordflow">return</span> AnyExt;</div>
<div class="line"><a name="l04383"></a><span class="lineno"> 4383</span>&#160;  }</div>
<div class="line"><a name="l04384"></a><span class="lineno"> 4384</span>&#160; </div>
<div class="line"><a name="l04385"></a><span class="lineno"> 4385</span>&#160;  <span class="keywordflow">if</span> (Ty.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>()) {</div>
<div class="line"><a name="l04386"></a><span class="lineno"> 4386</span>&#160;    <span class="keywordflow">if</span> (Ty.<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>() == S16 &amp;&amp; Ty.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>() &lt;= 4) {</div>
<div class="line"><a name="l04387"></a><span class="lineno"> 4387</span>&#160;      <span class="keywordflow">if</span> (IsFormat)</div>
<div class="line"><a name="l04388"></a><span class="lineno"> 4388</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a3dcd2bcf223daced673ed18e4ad47efa">handleD16VData</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, *<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, VData);</div>
<div class="line"><a name="l04389"></a><span class="lineno"> 4389</span>&#160;    }</div>
<div class="line"><a name="l04390"></a><span class="lineno"> 4390</span>&#160;  }</div>
<div class="line"><a name="l04391"></a><span class="lineno"> 4391</span>&#160; </div>
<div class="line"><a name="l04392"></a><span class="lineno"> 4392</span>&#160;  <span class="keywordflow">return</span> VData;</div>
<div class="line"><a name="l04393"></a><span class="lineno"> 4393</span>&#160;}</div>
<div class="line"><a name="l04394"></a><span class="lineno"> 4394</span>&#160; </div>
<div class="line"><a name="l04395"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a5ab017387bbf480d9b9c710b6ed1c138"> 4395</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a5ab017387bbf480d9b9c710b6ed1c138">AMDGPULegalizerInfo::legalizeBufferStore</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l04396"></a><span class="lineno"> 4396</span>&#160;                                              <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</div>
<div class="line"><a name="l04397"></a><span class="lineno"> 4397</span>&#160;                                              <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,</div>
<div class="line"><a name="l04398"></a><span class="lineno"> 4398</span>&#160;                                              <span class="keywordtype">bool</span> IsTyped,</div>
<div class="line"><a name="l04399"></a><span class="lineno"> 4399</span>&#160;                                              <span class="keywordtype">bool</span> IsFormat)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l04400"></a><span class="lineno"> 4400</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> VData = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l04401"></a><span class="lineno"> 4401</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(VData);</div>
<div class="line"><a name="l04402"></a><span class="lineno"> 4402</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> EltTy = Ty.<a class="code" href="classllvm_1_1LLT.html#ae4165ca7bcbee300d5e9c065adcc1415">getScalarType</a>();</div>
<div class="line"><a name="l04403"></a><span class="lineno"> 4403</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> IsD16 = IsFormat &amp;&amp; (EltTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() == 16);</div>
<div class="line"><a name="l04404"></a><span class="lineno"> 4404</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S32 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</div>
<div class="line"><a name="l04405"></a><span class="lineno"> 4405</span>&#160; </div>
<div class="line"><a name="l04406"></a><span class="lineno"> 4406</span>&#160;  VData = <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a89cb241c17c5ea1f61fe099207f77eef">fixStoreSourceType</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, VData, IsFormat);</div>
<div class="line"><a name="l04407"></a><span class="lineno"> 4407</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> RSrc = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l04408"></a><span class="lineno"> 4408</span>&#160; </div>
<div class="line"><a name="l04409"></a><span class="lineno"> 4409</span>&#160;  <a class="code" href="classllvm_1_1MachineMemOperand.html">MachineMemOperand</a> *MMO = *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.memoperands_begin();</div>
<div class="line"><a name="l04410"></a><span class="lineno"> 4410</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> MemSize = MMO-&gt;<a class="code" href="classllvm_1_1MachineMemOperand.html#a7a1ac8a07c8ce92e71dc9769d2932ae0">getSize</a>();</div>
<div class="line"><a name="l04411"></a><span class="lineno"> 4411</span>&#160; </div>
<div class="line"><a name="l04412"></a><span class="lineno"> 4412</span>&#160;  <span class="keywordtype">unsigned</span> ImmOffset;</div>
<div class="line"><a name="l04413"></a><span class="lineno"> 4413</span>&#160; </div>
<div class="line"><a name="l04414"></a><span class="lineno"> 4414</span>&#160;  <span class="comment">// The typed intrinsics add an immediate after the registers.</span></div>
<div class="line"><a name="l04415"></a><span class="lineno"> 4415</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> NumVIndexOps = IsTyped ? 8 : 7;</div>
<div class="line"><a name="l04416"></a><span class="lineno"> 4416</span>&#160; </div>
<div class="line"><a name="l04417"></a><span class="lineno"> 4417</span>&#160;  <span class="comment">// The struct intrinsic variants add one additional operand over raw.</span></div>
<div class="line"><a name="l04418"></a><span class="lineno"> 4418</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> HasVIndex = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumOperands() == NumVIndexOps;</div>
<div class="line"><a name="l04419"></a><span class="lineno"> 4419</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> VIndex;</div>
<div class="line"><a name="l04420"></a><span class="lineno"> 4420</span>&#160;  <span class="keywordtype">int</span> OpOffset = 0;</div>
<div class="line"><a name="l04421"></a><span class="lineno"> 4421</span>&#160;  <span class="keywordflow">if</span> (HasVIndex) {</div>
<div class="line"><a name="l04422"></a><span class="lineno"> 4422</span>&#160;    VIndex = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getReg();</div>
<div class="line"><a name="l04423"></a><span class="lineno"> 4423</span>&#160;    OpOffset = 1;</div>
<div class="line"><a name="l04424"></a><span class="lineno"> 4424</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04425"></a><span class="lineno"> 4425</span>&#160;    VIndex = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(S32, 0).getReg(0);</div>
<div class="line"><a name="l04426"></a><span class="lineno"> 4426</span>&#160;  }</div>
<div class="line"><a name="l04427"></a><span class="lineno"> 4427</span>&#160; </div>
<div class="line"><a name="l04428"></a><span class="lineno"> 4428</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> VOffset = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3 + OpOffset).getReg();</div>
<div class="line"><a name="l04429"></a><span class="lineno"> 4429</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> SOffset = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(4 + OpOffset).getReg();</div>
<div class="line"><a name="l04430"></a><span class="lineno"> 4430</span>&#160; </div>
<div class="line"><a name="l04431"></a><span class="lineno"> 4431</span>&#160;  <span class="keywordtype">unsigned</span> Format = 0;</div>
<div class="line"><a name="l04432"></a><span class="lineno"> 4432</span>&#160;  <span class="keywordflow">if</span> (IsTyped) {</div>
<div class="line"><a name="l04433"></a><span class="lineno"> 4433</span>&#160;    Format = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(5 + OpOffset).getImm();</div>
<div class="line"><a name="l04434"></a><span class="lineno"> 4434</span>&#160;    ++OpOffset;</div>
<div class="line"><a name="l04435"></a><span class="lineno"> 4435</span>&#160;  }</div>
<div class="line"><a name="l04436"></a><span class="lineno"> 4436</span>&#160; </div>
<div class="line"><a name="l04437"></a><span class="lineno"> 4437</span>&#160;  <span class="keywordtype">unsigned</span> AuxiliaryData = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(5 + OpOffset).getImm();</div>
<div class="line"><a name="l04438"></a><span class="lineno"> 4438</span>&#160; </div>
<div class="line"><a name="l04439"></a><span class="lineno"> 4439</span>&#160;  std::tie(VOffset, ImmOffset) = <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a14daf64c8f1ebcbe259a41854f49ad12">splitBufferOffsets</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, VOffset);</div>
<div class="line"><a name="l04440"></a><span class="lineno"> 4440</span>&#160;  <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#ad19d3a061adf35e67b35092cfee60864">updateBufferMMO</a>(MMO, VOffset, SOffset, ImmOffset, VIndex, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>);</div>
<div class="line"><a name="l04441"></a><span class="lineno"> 4441</span>&#160; </div>
<div class="line"><a name="l04442"></a><span class="lineno"> 4442</span>&#160;  <span class="keywordtype">unsigned</span> Opc;</div>
<div class="line"><a name="l04443"></a><span class="lineno"> 4443</span>&#160;  <span class="keywordflow">if</span> (IsTyped) {</div>
<div class="line"><a name="l04444"></a><span class="lineno"> 4444</span>&#160;    Opc = IsD16 ? AMDGPU::G_AMDGPU_TBUFFER_STORE_FORMAT_D16 :</div>
<div class="line"><a name="l04445"></a><span class="lineno"> 4445</span>&#160;                  AMDGPU::G_AMDGPU_TBUFFER_STORE_FORMAT;</div>
<div class="line"><a name="l04446"></a><span class="lineno"> 4446</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (IsFormat) {</div>
<div class="line"><a name="l04447"></a><span class="lineno"> 4447</span>&#160;    Opc = IsD16 ? AMDGPU::G_AMDGPU_BUFFER_STORE_FORMAT_D16 :</div>
<div class="line"><a name="l04448"></a><span class="lineno"> 4448</span>&#160;                  AMDGPU::G_AMDGPU_BUFFER_STORE_FORMAT;</div>
<div class="line"><a name="l04449"></a><span class="lineno"> 4449</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04450"></a><span class="lineno"> 4450</span>&#160;    <span class="keywordflow">switch</span> (MemSize) {</div>
<div class="line"><a name="l04451"></a><span class="lineno"> 4451</span>&#160;    <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l04452"></a><span class="lineno"> 4452</span>&#160;      Opc = AMDGPU::G_AMDGPU_BUFFER_STORE_BYTE;</div>
<div class="line"><a name="l04453"></a><span class="lineno"> 4453</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04454"></a><span class="lineno"> 4454</span>&#160;    <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l04455"></a><span class="lineno"> 4455</span>&#160;      Opc = AMDGPU::G_AMDGPU_BUFFER_STORE_SHORT;</div>
<div class="line"><a name="l04456"></a><span class="lineno"> 4456</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04457"></a><span class="lineno"> 4457</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l04458"></a><span class="lineno"> 4458</span>&#160;      Opc = AMDGPU::G_AMDGPU_BUFFER_STORE;</div>
<div class="line"><a name="l04459"></a><span class="lineno"> 4459</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04460"></a><span class="lineno"> 4460</span>&#160;    }</div>
<div class="line"><a name="l04461"></a><span class="lineno"> 4461</span>&#160;  }</div>
<div class="line"><a name="l04462"></a><span class="lineno"> 4462</span>&#160; </div>
<div class="line"><a name="l04463"></a><span class="lineno"> 4463</span>&#160;  <span class="keyword">auto</span> MIB = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildInstr(Opc)</div>
<div class="line"><a name="l04464"></a><span class="lineno"> 4464</span>&#160;    .addUse(VData)              <span class="comment">// vdata</span></div>
<div class="line"><a name="l04465"></a><span class="lineno"> 4465</span>&#160;    .addUse(RSrc)               <span class="comment">// rsrc</span></div>
<div class="line"><a name="l04466"></a><span class="lineno"> 4466</span>&#160;    .addUse(VIndex)             <span class="comment">// vindex</span></div>
<div class="line"><a name="l04467"></a><span class="lineno"> 4467</span>&#160;    .addUse(VOffset)            <span class="comment">// voffset</span></div>
<div class="line"><a name="l04468"></a><span class="lineno"> 4468</span>&#160;    .addUse(SOffset)            <span class="comment">// soffset</span></div>
<div class="line"><a name="l04469"></a><span class="lineno"> 4469</span>&#160;    .addImm(ImmOffset);         <span class="comment">// offset(imm)</span></div>
<div class="line"><a name="l04470"></a><span class="lineno"> 4470</span>&#160; </div>
<div class="line"><a name="l04471"></a><span class="lineno"> 4471</span>&#160;  <span class="keywordflow">if</span> (IsTyped)</div>
<div class="line"><a name="l04472"></a><span class="lineno"> 4472</span>&#160;    MIB.addImm(Format);</div>
<div class="line"><a name="l04473"></a><span class="lineno"> 4473</span>&#160; </div>
<div class="line"><a name="l04474"></a><span class="lineno"> 4474</span>&#160;  MIB.addImm(AuxiliaryData)      <span class="comment">// cachepolicy, swizzled buffer(imm)</span></div>
<div class="line"><a name="l04475"></a><span class="lineno"> 4475</span>&#160;     .addImm(HasVIndex ? -1 : 0) <span class="comment">// idxen(imm)</span></div>
<div class="line"><a name="l04476"></a><span class="lineno"> 4476</span>&#160;     .addMemOperand(MMO);</div>
<div class="line"><a name="l04477"></a><span class="lineno"> 4477</span>&#160; </div>
<div class="line"><a name="l04478"></a><span class="lineno"> 4478</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l04479"></a><span class="lineno"> 4479</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04480"></a><span class="lineno"> 4480</span>&#160;}</div>
<div class="line"><a name="l04481"></a><span class="lineno"> 4481</span>&#160; </div>
<div class="line"><a name="l04482"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#ae6e9dca782411211a3526572f6ebeb33"> 4482</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#ae6e9dca782411211a3526572f6ebeb33">buildBufferLoad</a>(<span class="keywordtype">unsigned</span> Opc, <a class="code" href="classllvm_1_1Register.html">Register</a> LoadDstReg, <a class="code" href="classllvm_1_1Register.html">Register</a> RSrc,</div>
<div class="line"><a name="l04483"></a><span class="lineno"> 4483</span>&#160;                            <a class="code" href="classllvm_1_1Register.html">Register</a> VIndex, <a class="code" href="classllvm_1_1Register.html">Register</a> VOffset, <a class="code" href="classllvm_1_1Register.html">Register</a> SOffset,</div>
<div class="line"><a name="l04484"></a><span class="lineno"> 4484</span>&#160;                            <span class="keywordtype">unsigned</span> ImmOffset, <span class="keywordtype">unsigned</span> Format,</div>
<div class="line"><a name="l04485"></a><span class="lineno"> 4485</span>&#160;                            <span class="keywordtype">unsigned</span> AuxiliaryData, <a class="code" href="classllvm_1_1MachineMemOperand.html">MachineMemOperand</a> *MMO,</div>
<div class="line"><a name="l04486"></a><span class="lineno"> 4486</span>&#160;                            <span class="keywordtype">bool</span> IsTyped, <span class="keywordtype">bool</span> HasVIndex, <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) {</div>
<div class="line"><a name="l04487"></a><span class="lineno"> 4487</span>&#160;  <span class="keyword">auto</span> MIB = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildInstr(Opc)</div>
<div class="line"><a name="l04488"></a><span class="lineno"> 4488</span>&#160;                 .addDef(LoadDstReg) <span class="comment">// vdata</span></div>
<div class="line"><a name="l04489"></a><span class="lineno"> 4489</span>&#160;                 .addUse(RSrc)       <span class="comment">// rsrc</span></div>
<div class="line"><a name="l04490"></a><span class="lineno"> 4490</span>&#160;                 .addUse(VIndex)     <span class="comment">// vindex</span></div>
<div class="line"><a name="l04491"></a><span class="lineno"> 4491</span>&#160;                 .addUse(VOffset)    <span class="comment">// voffset</span></div>
<div class="line"><a name="l04492"></a><span class="lineno"> 4492</span>&#160;                 .addUse(SOffset)    <span class="comment">// soffset</span></div>
<div class="line"><a name="l04493"></a><span class="lineno"> 4493</span>&#160;                 .addImm(ImmOffset); <span class="comment">// offset(imm)</span></div>
<div class="line"><a name="l04494"></a><span class="lineno"> 4494</span>&#160; </div>
<div class="line"><a name="l04495"></a><span class="lineno"> 4495</span>&#160;  <span class="keywordflow">if</span> (IsTyped)</div>
<div class="line"><a name="l04496"></a><span class="lineno"> 4496</span>&#160;    MIB.addImm(Format);</div>
<div class="line"><a name="l04497"></a><span class="lineno"> 4497</span>&#160; </div>
<div class="line"><a name="l04498"></a><span class="lineno"> 4498</span>&#160;  MIB.addImm(AuxiliaryData)       <span class="comment">// cachepolicy, swizzled buffer(imm)</span></div>
<div class="line"><a name="l04499"></a><span class="lineno"> 4499</span>&#160;      .addImm(HasVIndex ? -1 : 0) <span class="comment">// idxen(imm)</span></div>
<div class="line"><a name="l04500"></a><span class="lineno"> 4500</span>&#160;      .addMemOperand(MMO);</div>
<div class="line"><a name="l04501"></a><span class="lineno"> 4501</span>&#160;}</div>
<div class="line"><a name="l04502"></a><span class="lineno"> 4502</span>&#160; </div>
<div class="line"><a name="l04503"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#abf66d0f3f6789a70e423158446adf607"> 4503</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#abf66d0f3f6789a70e423158446adf607">AMDGPULegalizerInfo::legalizeBufferLoad</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l04504"></a><span class="lineno"> 4504</span>&#160;                                             <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</div>
<div class="line"><a name="l04505"></a><span class="lineno"> 4505</span>&#160;                                             <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,</div>
<div class="line"><a name="l04506"></a><span class="lineno"> 4506</span>&#160;                                             <span class="keywordtype">bool</span> IsFormat,</div>
<div class="line"><a name="l04507"></a><span class="lineno"> 4507</span>&#160;                                             <span class="keywordtype">bool</span> IsTyped)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l04508"></a><span class="lineno"> 4508</span>&#160;  <span class="comment">// FIXME: Verifier should enforce 1 MMO for these intrinsics.</span></div>
<div class="line"><a name="l04509"></a><span class="lineno"> 4509</span>&#160;  <a class="code" href="classllvm_1_1MachineMemOperand.html">MachineMemOperand</a> *MMO = *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.memoperands_begin();</div>
<div class="line"><a name="l04510"></a><span class="lineno"> 4510</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> MemTy = MMO-&gt;<a class="code" href="classllvm_1_1MachineMemOperand.html#a3e9d2a9063bce7f5b3d7dd21fd05c79d">getMemoryType</a>();</div>
<div class="line"><a name="l04511"></a><span class="lineno"> 4511</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S32 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</div>
<div class="line"><a name="l04512"></a><span class="lineno"> 4512</span>&#160; </div>
<div class="line"><a name="l04513"></a><span class="lineno"> 4513</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l04514"></a><span class="lineno"> 4514</span>&#160; </div>
<div class="line"><a name="l04515"></a><span class="lineno"> 4515</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> StatusDst;</div>
<div class="line"><a name="l04516"></a><span class="lineno"> 4516</span>&#160;  <span class="keywordtype">int</span> OpOffset = 0;</div>
<div class="line"><a name="l04517"></a><span class="lineno"> 4517</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumExplicitDefs() == 1 || <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumExplicitDefs() == 2);</div>
<div class="line"><a name="l04518"></a><span class="lineno"> 4518</span>&#160;  <span class="keywordtype">bool</span> IsTFE = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumExplicitDefs() == 2;</div>
<div class="line"><a name="l04519"></a><span class="lineno"> 4519</span>&#160;  <span class="keywordflow">if</span> (IsTFE) {</div>
<div class="line"><a name="l04520"></a><span class="lineno"> 4520</span>&#160;    StatusDst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l04521"></a><span class="lineno"> 4521</span>&#160;    ++OpOffset;</div>
<div class="line"><a name="l04522"></a><span class="lineno"> 4522</span>&#160;  }</div>
<div class="line"><a name="l04523"></a><span class="lineno"> 4523</span>&#160; </div>
<div class="line"><a name="l04524"></a><span class="lineno"> 4524</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> RSrc = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2 + OpOffset).getReg();</div>
<div class="line"><a name="l04525"></a><span class="lineno"> 4525</span>&#160; </div>
<div class="line"><a name="l04526"></a><span class="lineno"> 4526</span>&#160;  <span class="comment">// The typed intrinsics add an immediate after the registers.</span></div>
<div class="line"><a name="l04527"></a><span class="lineno"> 4527</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> NumVIndexOps = IsTyped ? 8 : 7;</div>
<div class="line"><a name="l04528"></a><span class="lineno"> 4528</span>&#160; </div>
<div class="line"><a name="l04529"></a><span class="lineno"> 4529</span>&#160;  <span class="comment">// The struct intrinsic variants add one additional operand over raw.</span></div>
<div class="line"><a name="l04530"></a><span class="lineno"> 4530</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> HasVIndex = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumOperands() == NumVIndexOps + OpOffset;</div>
<div class="line"><a name="l04531"></a><span class="lineno"> 4531</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> VIndex;</div>
<div class="line"><a name="l04532"></a><span class="lineno"> 4532</span>&#160;  <span class="keywordflow">if</span> (HasVIndex) {</div>
<div class="line"><a name="l04533"></a><span class="lineno"> 4533</span>&#160;    VIndex = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3 + OpOffset).getReg();</div>
<div class="line"><a name="l04534"></a><span class="lineno"> 4534</span>&#160;    ++OpOffset;</div>
<div class="line"><a name="l04535"></a><span class="lineno"> 4535</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04536"></a><span class="lineno"> 4536</span>&#160;    VIndex = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(S32, 0).getReg(0);</div>
<div class="line"><a name="l04537"></a><span class="lineno"> 4537</span>&#160;  }</div>
<div class="line"><a name="l04538"></a><span class="lineno"> 4538</span>&#160; </div>
<div class="line"><a name="l04539"></a><span class="lineno"> 4539</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> VOffset = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3 + OpOffset).getReg();</div>
<div class="line"><a name="l04540"></a><span class="lineno"> 4540</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> SOffset = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(4 + OpOffset).getReg();</div>
<div class="line"><a name="l04541"></a><span class="lineno"> 4541</span>&#160; </div>
<div class="line"><a name="l04542"></a><span class="lineno"> 4542</span>&#160;  <span class="keywordtype">unsigned</span> Format = 0;</div>
<div class="line"><a name="l04543"></a><span class="lineno"> 4543</span>&#160;  <span class="keywordflow">if</span> (IsTyped) {</div>
<div class="line"><a name="l04544"></a><span class="lineno"> 4544</span>&#160;    Format = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(5 + OpOffset).getImm();</div>
<div class="line"><a name="l04545"></a><span class="lineno"> 4545</span>&#160;    ++OpOffset;</div>
<div class="line"><a name="l04546"></a><span class="lineno"> 4546</span>&#160;  }</div>
<div class="line"><a name="l04547"></a><span class="lineno"> 4547</span>&#160; </div>
<div class="line"><a name="l04548"></a><span class="lineno"> 4548</span>&#160;  <span class="keywordtype">unsigned</span> AuxiliaryData = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(5 + OpOffset).getImm();</div>
<div class="line"><a name="l04549"></a><span class="lineno"> 4549</span>&#160;  <span class="keywordtype">unsigned</span> ImmOffset;</div>
<div class="line"><a name="l04550"></a><span class="lineno"> 4550</span>&#160; </div>
<div class="line"><a name="l04551"></a><span class="lineno"> 4551</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst);</div>
<div class="line"><a name="l04552"></a><span class="lineno"> 4552</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> EltTy = Ty.<a class="code" href="classllvm_1_1LLT.html#ae4165ca7bcbee300d5e9c065adcc1415">getScalarType</a>();</div>
<div class="line"><a name="l04553"></a><span class="lineno"> 4553</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> IsD16 = IsFormat &amp;&amp; (EltTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() == 16);</div>
<div class="line"><a name="l04554"></a><span class="lineno"> 4554</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> Unpacked = ST.<a class="code" href="classllvm_1_1GCNSubtarget.html#ad30b3c952ed576256171d49971ec9241">hasUnpackedD16VMem</a>();</div>
<div class="line"><a name="l04555"></a><span class="lineno"> 4555</span>&#160; </div>
<div class="line"><a name="l04556"></a><span class="lineno"> 4556</span>&#160;  std::tie(VOffset, ImmOffset) = <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a14daf64c8f1ebcbe259a41854f49ad12">splitBufferOffsets</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, VOffset);</div>
<div class="line"><a name="l04557"></a><span class="lineno"> 4557</span>&#160;  <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#ad19d3a061adf35e67b35092cfee60864">updateBufferMMO</a>(MMO, VOffset, SOffset, ImmOffset, VIndex, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>);</div>
<div class="line"><a name="l04558"></a><span class="lineno"> 4558</span>&#160; </div>
<div class="line"><a name="l04559"></a><span class="lineno"> 4559</span>&#160;  <span class="keywordtype">unsigned</span> Opc;</div>
<div class="line"><a name="l04560"></a><span class="lineno"> 4560</span>&#160; </div>
<div class="line"><a name="l04561"></a><span class="lineno"> 4561</span>&#160;  <span class="comment">// TODO: Support TFE for typed and narrow loads.</span></div>
<div class="line"><a name="l04562"></a><span class="lineno"> 4562</span>&#160;  <span class="keywordflow">if</span> (IsTyped) {</div>
<div class="line"><a name="l04563"></a><span class="lineno"> 4563</span>&#160;    <span class="keywordflow">if</span> (IsTFE)</div>
<div class="line"><a name="l04564"></a><span class="lineno"> 4564</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04565"></a><span class="lineno"> 4565</span>&#160;    Opc = IsD16 ? AMDGPU::G_AMDGPU_TBUFFER_LOAD_FORMAT_D16 :</div>
<div class="line"><a name="l04566"></a><span class="lineno"> 4566</span>&#160;                  AMDGPU::G_AMDGPU_TBUFFER_LOAD_FORMAT;</div>
<div class="line"><a name="l04567"></a><span class="lineno"> 4567</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (IsFormat) {</div>
<div class="line"><a name="l04568"></a><span class="lineno"> 4568</span>&#160;    <span class="keywordflow">if</span> (IsD16) {</div>
<div class="line"><a name="l04569"></a><span class="lineno"> 4569</span>&#160;      <span class="keywordflow">if</span> (IsTFE)</div>
<div class="line"><a name="l04570"></a><span class="lineno"> 4570</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04571"></a><span class="lineno"> 4571</span>&#160;      Opc = AMDGPU::G_AMDGPU_BUFFER_LOAD_FORMAT_D16;</div>
<div class="line"><a name="l04572"></a><span class="lineno"> 4572</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04573"></a><span class="lineno"> 4573</span>&#160;      Opc = IsTFE ? AMDGPU::G_AMDGPU_BUFFER_LOAD_FORMAT_TFE</div>
<div class="line"><a name="l04574"></a><span class="lineno"> 4574</span>&#160;                  : AMDGPU::G_AMDGPU_BUFFER_LOAD_FORMAT;</div>
<div class="line"><a name="l04575"></a><span class="lineno"> 4575</span>&#160;    }</div>
<div class="line"><a name="l04576"></a><span class="lineno"> 4576</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04577"></a><span class="lineno"> 4577</span>&#160;    <span class="keywordflow">if</span> (IsTFE)</div>
<div class="line"><a name="l04578"></a><span class="lineno"> 4578</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04579"></a><span class="lineno"> 4579</span>&#160;    <span class="keywordflow">switch</span> (MemTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>()) {</div>
<div class="line"><a name="l04580"></a><span class="lineno"> 4580</span>&#160;    <span class="keywordflow">case</span> 8:</div>
<div class="line"><a name="l04581"></a><span class="lineno"> 4581</span>&#160;      Opc = AMDGPU::G_AMDGPU_BUFFER_LOAD_UBYTE;</div>
<div class="line"><a name="l04582"></a><span class="lineno"> 4582</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04583"></a><span class="lineno"> 4583</span>&#160;    <span class="keywordflow">case</span> 16:</div>
<div class="line"><a name="l04584"></a><span class="lineno"> 4584</span>&#160;      Opc = AMDGPU::G_AMDGPU_BUFFER_LOAD_USHORT;</div>
<div class="line"><a name="l04585"></a><span class="lineno"> 4585</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04586"></a><span class="lineno"> 4586</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l04587"></a><span class="lineno"> 4587</span>&#160;      Opc = AMDGPU::G_AMDGPU_BUFFER_LOAD;</div>
<div class="line"><a name="l04588"></a><span class="lineno"> 4588</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04589"></a><span class="lineno"> 4589</span>&#160;    }</div>
<div class="line"><a name="l04590"></a><span class="lineno"> 4590</span>&#160;  }</div>
<div class="line"><a name="l04591"></a><span class="lineno"> 4591</span>&#160; </div>
<div class="line"><a name="l04592"></a><span class="lineno"> 4592</span>&#160;  <span class="keywordflow">if</span> (IsTFE) {</div>
<div class="line"><a name="l04593"></a><span class="lineno"> 4593</span>&#160;    <span class="keywordtype">unsigned</span> NumValueDWords = <a class="code" href="namespacellvm.html#a1a14592c2ae220a319c7c85ee545c96f">divideCeil</a>(Ty.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>(), 32);</div>
<div class="line"><a name="l04594"></a><span class="lineno"> 4594</span>&#160;    <span class="keywordtype">unsigned</span> NumLoadDWords = NumValueDWords + 1;</div>
<div class="line"><a name="l04595"></a><span class="lineno"> 4595</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> LoadTy = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(NumLoadDWords, S32);</div>
<div class="line"><a name="l04596"></a><span class="lineno"> 4596</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> LoadDstReg = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMRI()-&gt;createGenericVirtualRegister(LoadTy);</div>
<div class="line"><a name="l04597"></a><span class="lineno"> 4597</span>&#160;    <a class="code" href="AMDGPULegalizerInfo_8cpp.html#ae6e9dca782411211a3526572f6ebeb33">buildBufferLoad</a>(Opc, LoadDstReg, RSrc, VIndex, VOffset, SOffset, ImmOffset,</div>
<div class="line"><a name="l04598"></a><span class="lineno"> 4598</span>&#160;                    Format, AuxiliaryData, MMO, IsTyped, HasVIndex, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l04599"></a><span class="lineno"> 4599</span>&#160;    <span class="keywordflow">if</span> (NumValueDWords == 1) {</div>
<div class="line"><a name="l04600"></a><span class="lineno"> 4600</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUnmerge({Dst, StatusDst}, LoadDstReg);</div>
<div class="line"><a name="l04601"></a><span class="lineno"> 4601</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04602"></a><span class="lineno"> 4602</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 5&gt;</a> LoadElts;</div>
<div class="line"><a name="l04603"></a><span class="lineno"> 4603</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != NumValueDWords; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l04604"></a><span class="lineno"> 4604</span>&#160;        LoadElts.push_back(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMRI()-&gt;createGenericVirtualRegister(S32));</div>
<div class="line"><a name="l04605"></a><span class="lineno"> 4605</span>&#160;      LoadElts.push_back(StatusDst);</div>
<div class="line"><a name="l04606"></a><span class="lineno"> 4606</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUnmerge(LoadElts, LoadDstReg);</div>
<div class="line"><a name="l04607"></a><span class="lineno"> 4607</span>&#160;      LoadElts.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aae26f659b722d1d053b93b5f1735f52f">truncate</a>(NumValueDWords);</div>
<div class="line"><a name="l04608"></a><span class="lineno"> 4608</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildMergeLikeInstr(Dst, LoadElts);</div>
<div class="line"><a name="l04609"></a><span class="lineno"> 4609</span>&#160;    }</div>
<div class="line"><a name="l04610"></a><span class="lineno"> 4610</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((!IsD16 &amp;&amp; MemTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() &lt; 32) ||</div>
<div class="line"><a name="l04611"></a><span class="lineno"> 4611</span>&#160;             (IsD16 &amp;&amp; !Ty.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>())) {</div>
<div class="line"><a name="l04612"></a><span class="lineno"> 4612</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> LoadDstReg = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMRI()-&gt;createGenericVirtualRegister(S32);</div>
<div class="line"><a name="l04613"></a><span class="lineno"> 4613</span>&#160;    <a class="code" href="AMDGPULegalizerInfo_8cpp.html#ae6e9dca782411211a3526572f6ebeb33">buildBufferLoad</a>(Opc, LoadDstReg, RSrc, VIndex, VOffset, SOffset, ImmOffset,</div>
<div class="line"><a name="l04614"></a><span class="lineno"> 4614</span>&#160;                    Format, AuxiliaryData, MMO, IsTyped, HasVIndex, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l04615"></a><span class="lineno"> 4615</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.setInsertPt(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMBB(), ++<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getInsertPt());</div>
<div class="line"><a name="l04616"></a><span class="lineno"> 4616</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildTrunc(Dst, LoadDstReg);</div>
<div class="line"><a name="l04617"></a><span class="lineno"> 4617</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Unpacked &amp;&amp; IsD16 &amp;&amp; Ty.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>()) {</div>
<div class="line"><a name="l04618"></a><span class="lineno"> 4618</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> UnpackedTy = Ty.<a class="code" href="classllvm_1_1LLT.html#aaa6f42b31892a929914872c879e4b365">changeElementSize</a>(32);</div>
<div class="line"><a name="l04619"></a><span class="lineno"> 4619</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> LoadDstReg = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMRI()-&gt;createGenericVirtualRegister(UnpackedTy);</div>
<div class="line"><a name="l04620"></a><span class="lineno"> 4620</span>&#160;    <a class="code" href="AMDGPULegalizerInfo_8cpp.html#ae6e9dca782411211a3526572f6ebeb33">buildBufferLoad</a>(Opc, LoadDstReg, RSrc, VIndex, VOffset, SOffset, ImmOffset,</div>
<div class="line"><a name="l04621"></a><span class="lineno"> 4621</span>&#160;                    Format, AuxiliaryData, MMO, IsTyped, HasVIndex, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l04622"></a><span class="lineno"> 4622</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.setInsertPt(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMBB(), ++<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getInsertPt());</div>
<div class="line"><a name="l04623"></a><span class="lineno"> 4623</span>&#160;    <span class="comment">// FIXME: G_TRUNC should work, but legalization currently fails</span></div>
<div class="line"><a name="l04624"></a><span class="lineno"> 4624</span>&#160;    <span class="keyword">auto</span> Unmerge = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUnmerge(S32, LoadDstReg);</div>
<div class="line"><a name="l04625"></a><span class="lineno"> 4625</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 4&gt;</a> Repack;</div>
<div class="line"><a name="l04626"></a><span class="lineno"> 4626</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> = Unmerge-&gt;getNumOperands() - 1; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l04627"></a><span class="lineno"> 4627</span>&#160;      Repack.push_back(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildTrunc(EltTy, Unmerge.getReg(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)).getReg(0));</div>
<div class="line"><a name="l04628"></a><span class="lineno"> 4628</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildMergeLikeInstr(Dst, Repack);</div>
<div class="line"><a name="l04629"></a><span class="lineno"> 4629</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04630"></a><span class="lineno"> 4630</span>&#160;    <a class="code" href="AMDGPULegalizerInfo_8cpp.html#ae6e9dca782411211a3526572f6ebeb33">buildBufferLoad</a>(Opc, Dst, RSrc, VIndex, VOffset, SOffset, ImmOffset, Format,</div>
<div class="line"><a name="l04631"></a><span class="lineno"> 4631</span>&#160;                    AuxiliaryData, MMO, IsTyped, HasVIndex, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l04632"></a><span class="lineno"> 4632</span>&#160;  }</div>
<div class="line"><a name="l04633"></a><span class="lineno"> 4633</span>&#160; </div>
<div class="line"><a name="l04634"></a><span class="lineno"> 4634</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l04635"></a><span class="lineno"> 4635</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04636"></a><span class="lineno"> 4636</span>&#160;}</div>
<div class="line"><a name="l04637"></a><span class="lineno"> 4637</span>&#160; </div>
<div class="line"><a name="l04638"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#aeb19add07877585827f7b9b2deca8ff2"> 4638</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#aeb19add07877585827f7b9b2deca8ff2">AMDGPULegalizerInfo::legalizeAtomicIncDec</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l04639"></a><span class="lineno"> 4639</span>&#160;                                               <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,</div>
<div class="line"><a name="l04640"></a><span class="lineno"> 4640</span>&#160;                                               <span class="keywordtype">bool</span> IsInc)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l04641"></a><span class="lineno"> 4641</span>&#160;  <span class="keywordtype">unsigned</span> Opc = IsInc ? AMDGPU::G_ATOMICRMW_UINC_WRAP :</div>
<div class="line"><a name="l04642"></a><span class="lineno"> 4642</span>&#160;                         AMDGPU::G_ATOMICRMW_UDEC_WRAP;</div>
<div class="line"><a name="l04643"></a><span class="lineno"> 4643</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildInstr(Opc)</div>
<div class="line"><a name="l04644"></a><span class="lineno"> 4644</span>&#160;    .addDef(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg())</div>
<div class="line"><a name="l04645"></a><span class="lineno"> 4645</span>&#160;    .addUse(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg())</div>
<div class="line"><a name="l04646"></a><span class="lineno"> 4646</span>&#160;    .addUse(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getReg())</div>
<div class="line"><a name="l04647"></a><span class="lineno"> 4647</span>&#160;    .cloneMemRefs(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l04648"></a><span class="lineno"> 4648</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l04649"></a><span class="lineno"> 4649</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04650"></a><span class="lineno"> 4650</span>&#160;}</div>
<div class="line"><a name="l04651"></a><span class="lineno"> 4651</span>&#160; </div>
<div class="line"><a name="l04652"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#a0356a7c051be3c82d2c7da7e0bdb229c"> 4652</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a0356a7c051be3c82d2c7da7e0bdb229c">getBufferAtomicPseudo</a>(<a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">Intrinsic::ID</a> IntrID) {</div>
<div class="line"><a name="l04653"></a><span class="lineno"> 4653</span>&#160;  <span class="keywordflow">switch</span> (IntrID) {</div>
<div class="line"><a name="l04654"></a><span class="lineno"> 4654</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_raw_buffer_atomic_swap:</div>
<div class="line"><a name="l04655"></a><span class="lineno"> 4655</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_struct_buffer_atomic_swap:</div>
<div class="line"><a name="l04656"></a><span class="lineno"> 4656</span>&#160;    <span class="keywordflow">return</span> AMDGPU::G_AMDGPU_BUFFER_ATOMIC_SWAP;</div>
<div class="line"><a name="l04657"></a><span class="lineno"> 4657</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_raw_buffer_atomic_add:</div>
<div class="line"><a name="l04658"></a><span class="lineno"> 4658</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_struct_buffer_atomic_add:</div>
<div class="line"><a name="l04659"></a><span class="lineno"> 4659</span>&#160;    <span class="keywordflow">return</span> AMDGPU::G_AMDGPU_BUFFER_ATOMIC_ADD;</div>
<div class="line"><a name="l04660"></a><span class="lineno"> 4660</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_raw_buffer_atomic_sub:</div>
<div class="line"><a name="l04661"></a><span class="lineno"> 4661</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_struct_buffer_atomic_sub:</div>
<div class="line"><a name="l04662"></a><span class="lineno"> 4662</span>&#160;    <span class="keywordflow">return</span> AMDGPU::G_AMDGPU_BUFFER_ATOMIC_SUB;</div>
<div class="line"><a name="l04663"></a><span class="lineno"> 4663</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_raw_buffer_atomic_smin:</div>
<div class="line"><a name="l04664"></a><span class="lineno"> 4664</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_struct_buffer_atomic_smin:</div>
<div class="line"><a name="l04665"></a><span class="lineno"> 4665</span>&#160;    <span class="keywordflow">return</span> AMDGPU::G_AMDGPU_BUFFER_ATOMIC_SMIN;</div>
<div class="line"><a name="l04666"></a><span class="lineno"> 4666</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_raw_buffer_atomic_umin:</div>
<div class="line"><a name="l04667"></a><span class="lineno"> 4667</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_struct_buffer_atomic_umin:</div>
<div class="line"><a name="l04668"></a><span class="lineno"> 4668</span>&#160;    <span class="keywordflow">return</span> AMDGPU::G_AMDGPU_BUFFER_ATOMIC_UMIN;</div>
<div class="line"><a name="l04669"></a><span class="lineno"> 4669</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_raw_buffer_atomic_smax:</div>
<div class="line"><a name="l04670"></a><span class="lineno"> 4670</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_struct_buffer_atomic_smax:</div>
<div class="line"><a name="l04671"></a><span class="lineno"> 4671</span>&#160;    <span class="keywordflow">return</span> AMDGPU::G_AMDGPU_BUFFER_ATOMIC_SMAX;</div>
<div class="line"><a name="l04672"></a><span class="lineno"> 4672</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_raw_buffer_atomic_umax:</div>
<div class="line"><a name="l04673"></a><span class="lineno"> 4673</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_struct_buffer_atomic_umax:</div>
<div class="line"><a name="l04674"></a><span class="lineno"> 4674</span>&#160;    <span class="keywordflow">return</span> AMDGPU::G_AMDGPU_BUFFER_ATOMIC_UMAX;</div>
<div class="line"><a name="l04675"></a><span class="lineno"> 4675</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_raw_buffer_atomic_and:</div>
<div class="line"><a name="l04676"></a><span class="lineno"> 4676</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_struct_buffer_atomic_and:</div>
<div class="line"><a name="l04677"></a><span class="lineno"> 4677</span>&#160;    <span class="keywordflow">return</span> AMDGPU::G_AMDGPU_BUFFER_ATOMIC_AND;</div>
<div class="line"><a name="l04678"></a><span class="lineno"> 4678</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_raw_buffer_atomic_or:</div>
<div class="line"><a name="l04679"></a><span class="lineno"> 4679</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_struct_buffer_atomic_or:</div>
<div class="line"><a name="l04680"></a><span class="lineno"> 4680</span>&#160;    <span class="keywordflow">return</span> AMDGPU::G_AMDGPU_BUFFER_ATOMIC_OR;</div>
<div class="line"><a name="l04681"></a><span class="lineno"> 4681</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_raw_buffer_atomic_xor:</div>
<div class="line"><a name="l04682"></a><span class="lineno"> 4682</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_struct_buffer_atomic_xor:</div>
<div class="line"><a name="l04683"></a><span class="lineno"> 4683</span>&#160;    <span class="keywordflow">return</span> AMDGPU::G_AMDGPU_BUFFER_ATOMIC_XOR;</div>
<div class="line"><a name="l04684"></a><span class="lineno"> 4684</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_raw_buffer_atomic_inc:</div>
<div class="line"><a name="l04685"></a><span class="lineno"> 4685</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_struct_buffer_atomic_inc:</div>
<div class="line"><a name="l04686"></a><span class="lineno"> 4686</span>&#160;    <span class="keywordflow">return</span> AMDGPU::G_AMDGPU_BUFFER_ATOMIC_INC;</div>
<div class="line"><a name="l04687"></a><span class="lineno"> 4687</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_raw_buffer_atomic_dec:</div>
<div class="line"><a name="l04688"></a><span class="lineno"> 4688</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_struct_buffer_atomic_dec:</div>
<div class="line"><a name="l04689"></a><span class="lineno"> 4689</span>&#160;    <span class="keywordflow">return</span> AMDGPU::G_AMDGPU_BUFFER_ATOMIC_DEC;</div>
<div class="line"><a name="l04690"></a><span class="lineno"> 4690</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_raw_buffer_atomic_cmpswap:</div>
<div class="line"><a name="l04691"></a><span class="lineno"> 4691</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_struct_buffer_atomic_cmpswap:</div>
<div class="line"><a name="l04692"></a><span class="lineno"> 4692</span>&#160;    <span class="keywordflow">return</span> AMDGPU::G_AMDGPU_BUFFER_ATOMIC_CMPSWAP;</div>
<div class="line"><a name="l04693"></a><span class="lineno"> 4693</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_raw_buffer_atomic_fadd:</div>
<div class="line"><a name="l04694"></a><span class="lineno"> 4694</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_struct_buffer_atomic_fadd:</div>
<div class="line"><a name="l04695"></a><span class="lineno"> 4695</span>&#160;    <span class="keywordflow">return</span> AMDGPU::G_AMDGPU_BUFFER_ATOMIC_FADD;</div>
<div class="line"><a name="l04696"></a><span class="lineno"> 4696</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_raw_buffer_atomic_fmin:</div>
<div class="line"><a name="l04697"></a><span class="lineno"> 4697</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_struct_buffer_atomic_fmin:</div>
<div class="line"><a name="l04698"></a><span class="lineno"> 4698</span>&#160;    <span class="keywordflow">return</span> AMDGPU::G_AMDGPU_BUFFER_ATOMIC_FMIN;</div>
<div class="line"><a name="l04699"></a><span class="lineno"> 4699</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_raw_buffer_atomic_fmax:</div>
<div class="line"><a name="l04700"></a><span class="lineno"> 4700</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_struct_buffer_atomic_fmax:</div>
<div class="line"><a name="l04701"></a><span class="lineno"> 4701</span>&#160;    <span class="keywordflow">return</span> AMDGPU::G_AMDGPU_BUFFER_ATOMIC_FMAX;</div>
<div class="line"><a name="l04702"></a><span class="lineno"> 4702</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l04703"></a><span class="lineno"> 4703</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;unhandled atomic opcode&quot;</span>);</div>
<div class="line"><a name="l04704"></a><span class="lineno"> 4704</span>&#160;  }</div>
<div class="line"><a name="l04705"></a><span class="lineno"> 4705</span>&#160;}</div>
<div class="line"><a name="l04706"></a><span class="lineno"> 4706</span>&#160; </div>
<div class="line"><a name="l04707"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a3cc7860fbf211f566f62809ac1144023"> 4707</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a3cc7860fbf211f566f62809ac1144023">AMDGPULegalizerInfo::legalizeBufferAtomic</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l04708"></a><span class="lineno"> 4708</span>&#160;                                               <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,</div>
<div class="line"><a name="l04709"></a><span class="lineno"> 4709</span>&#160;                                               <a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">Intrinsic::ID</a> IID)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l04710"></a><span class="lineno"> 4710</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> IsCmpSwap = IID == Intrinsic::amdgcn_raw_buffer_atomic_cmpswap ||</div>
<div class="line"><a name="l04711"></a><span class="lineno"> 4711</span>&#160;                         IID == Intrinsic::amdgcn_struct_buffer_atomic_cmpswap;</div>
<div class="line"><a name="l04712"></a><span class="lineno"> 4712</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> HasReturn = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumExplicitDefs() != 0;</div>
<div class="line"><a name="l04713"></a><span class="lineno"> 4713</span>&#160; </div>
<div class="line"><a name="l04714"></a><span class="lineno"> 4714</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst;</div>
<div class="line"><a name="l04715"></a><span class="lineno"> 4715</span>&#160; </div>
<div class="line"><a name="l04716"></a><span class="lineno"> 4716</span>&#160;  <span class="keywordtype">int</span> OpOffset = 0;</div>
<div class="line"><a name="l04717"></a><span class="lineno"> 4717</span>&#160;  <span class="keywordflow">if</span> (HasReturn) {</div>
<div class="line"><a name="l04718"></a><span class="lineno"> 4718</span>&#160;    <span class="comment">// A few FP atomics do not support return values.</span></div>
<div class="line"><a name="l04719"></a><span class="lineno"> 4719</span>&#160;    Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l04720"></a><span class="lineno"> 4720</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04721"></a><span class="lineno"> 4721</span>&#160;    OpOffset = -1;</div>
<div class="line"><a name="l04722"></a><span class="lineno"> 4722</span>&#160;  }</div>
<div class="line"><a name="l04723"></a><span class="lineno"> 4723</span>&#160; </div>
<div class="line"><a name="l04724"></a><span class="lineno"> 4724</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> VData = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2 + OpOffset).getReg();</div>
<div class="line"><a name="l04725"></a><span class="lineno"> 4725</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> CmpVal;</div>
<div class="line"><a name="l04726"></a><span class="lineno"> 4726</span>&#160; </div>
<div class="line"><a name="l04727"></a><span class="lineno"> 4727</span>&#160;  <span class="keywordflow">if</span> (IsCmpSwap) {</div>
<div class="line"><a name="l04728"></a><span class="lineno"> 4728</span>&#160;    CmpVal = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3 + OpOffset).getReg();</div>
<div class="line"><a name="l04729"></a><span class="lineno"> 4729</span>&#160;    ++OpOffset;</div>
<div class="line"><a name="l04730"></a><span class="lineno"> 4730</span>&#160;  }</div>
<div class="line"><a name="l04731"></a><span class="lineno"> 4731</span>&#160; </div>
<div class="line"><a name="l04732"></a><span class="lineno"> 4732</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> RSrc = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3 + OpOffset).getReg();</div>
<div class="line"><a name="l04733"></a><span class="lineno"> 4733</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> NumVIndexOps = (IsCmpSwap ? 8 : 7) + HasReturn;</div>
<div class="line"><a name="l04734"></a><span class="lineno"> 4734</span>&#160; </div>
<div class="line"><a name="l04735"></a><span class="lineno"> 4735</span>&#160;  <span class="comment">// The struct intrinsic variants add one additional operand over raw.</span></div>
<div class="line"><a name="l04736"></a><span class="lineno"> 4736</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> HasVIndex = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumOperands() == NumVIndexOps;</div>
<div class="line"><a name="l04737"></a><span class="lineno"> 4737</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> VIndex;</div>
<div class="line"><a name="l04738"></a><span class="lineno"> 4738</span>&#160;  <span class="keywordflow">if</span> (HasVIndex) {</div>
<div class="line"><a name="l04739"></a><span class="lineno"> 4739</span>&#160;    VIndex = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(4 + OpOffset).getReg();</div>
<div class="line"><a name="l04740"></a><span class="lineno"> 4740</span>&#160;    ++OpOffset;</div>
<div class="line"><a name="l04741"></a><span class="lineno"> 4741</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04742"></a><span class="lineno"> 4742</span>&#160;    VIndex = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(<a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32), 0).<a class="code" href="MipsDisassembler_8cpp.html#a15b5b86944f6df97d2c3659d77f51f91">getReg</a>(0);</div>
<div class="line"><a name="l04743"></a><span class="lineno"> 4743</span>&#160;  }</div>
<div class="line"><a name="l04744"></a><span class="lineno"> 4744</span>&#160; </div>
<div class="line"><a name="l04745"></a><span class="lineno"> 4745</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> VOffset = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(4 + OpOffset).getReg();</div>
<div class="line"><a name="l04746"></a><span class="lineno"> 4746</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> SOffset = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(5 + OpOffset).getReg();</div>
<div class="line"><a name="l04747"></a><span class="lineno"> 4747</span>&#160;  <span class="keywordtype">unsigned</span> AuxiliaryData = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(6 + OpOffset).getImm();</div>
<div class="line"><a name="l04748"></a><span class="lineno"> 4748</span>&#160; </div>
<div class="line"><a name="l04749"></a><span class="lineno"> 4749</span>&#160;  <a class="code" href="classllvm_1_1MachineMemOperand.html">MachineMemOperand</a> *MMO = *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.memoperands_begin();</div>
<div class="line"><a name="l04750"></a><span class="lineno"> 4750</span>&#160; </div>
<div class="line"><a name="l04751"></a><span class="lineno"> 4751</span>&#160;  <span class="keywordtype">unsigned</span> ImmOffset;</div>
<div class="line"><a name="l04752"></a><span class="lineno"> 4752</span>&#160;  std::tie(VOffset, ImmOffset) = <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a14daf64c8f1ebcbe259a41854f49ad12">splitBufferOffsets</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, VOffset);</div>
<div class="line"><a name="l04753"></a><span class="lineno"> 4753</span>&#160;  <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#ad19d3a061adf35e67b35092cfee60864">updateBufferMMO</a>(MMO, VOffset, SOffset, ImmOffset, VIndex, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMRI());</div>
<div class="line"><a name="l04754"></a><span class="lineno"> 4754</span>&#160; </div>
<div class="line"><a name="l04755"></a><span class="lineno"> 4755</span>&#160;  <span class="keyword">auto</span> MIB = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildInstr(<a class="code" href="AMDGPULegalizerInfo_8cpp.html#a0356a7c051be3c82d2c7da7e0bdb229c">getBufferAtomicPseudo</a>(IID));</div>
<div class="line"><a name="l04756"></a><span class="lineno"> 4756</span>&#160; </div>
<div class="line"><a name="l04757"></a><span class="lineno"> 4757</span>&#160;  <span class="keywordflow">if</span> (HasReturn)</div>
<div class="line"><a name="l04758"></a><span class="lineno"> 4758</span>&#160;    MIB.addDef(Dst);</div>
<div class="line"><a name="l04759"></a><span class="lineno"> 4759</span>&#160; </div>
<div class="line"><a name="l04760"></a><span class="lineno"> 4760</span>&#160;  MIB.addUse(VData); <span class="comment">// vdata</span></div>
<div class="line"><a name="l04761"></a><span class="lineno"> 4761</span>&#160; </div>
<div class="line"><a name="l04762"></a><span class="lineno"> 4762</span>&#160;  <span class="keywordflow">if</span> (IsCmpSwap)</div>
<div class="line"><a name="l04763"></a><span class="lineno"> 4763</span>&#160;    MIB.addReg(CmpVal);</div>
<div class="line"><a name="l04764"></a><span class="lineno"> 4764</span>&#160; </div>
<div class="line"><a name="l04765"></a><span class="lineno"> 4765</span>&#160;  MIB.addUse(RSrc)               <span class="comment">// rsrc</span></div>
<div class="line"><a name="l04766"></a><span class="lineno"> 4766</span>&#160;     .addUse(VIndex)             <span class="comment">// vindex</span></div>
<div class="line"><a name="l04767"></a><span class="lineno"> 4767</span>&#160;     .addUse(VOffset)            <span class="comment">// voffset</span></div>
<div class="line"><a name="l04768"></a><span class="lineno"> 4768</span>&#160;     .addUse(SOffset)            <span class="comment">// soffset</span></div>
<div class="line"><a name="l04769"></a><span class="lineno"> 4769</span>&#160;     .addImm(ImmOffset)          <span class="comment">// offset(imm)</span></div>
<div class="line"><a name="l04770"></a><span class="lineno"> 4770</span>&#160;     .addImm(AuxiliaryData)      <span class="comment">// cachepolicy, swizzled buffer(imm)</span></div>
<div class="line"><a name="l04771"></a><span class="lineno"> 4771</span>&#160;     .addImm(HasVIndex ? -1 : 0) <span class="comment">// idxen(imm)</span></div>
<div class="line"><a name="l04772"></a><span class="lineno"> 4772</span>&#160;     .addMemOperand(MMO);</div>
<div class="line"><a name="l04773"></a><span class="lineno"> 4773</span>&#160; </div>
<div class="line"><a name="l04774"></a><span class="lineno"> 4774</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l04775"></a><span class="lineno"> 4775</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04776"></a><span class="lineno"> 4776</span>&#160;}</div>
<div class="line"><a name="l04777"></a><span class="lineno"> 4777</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l04778"></a><span class="lineno"> 4778</span>&#160;<span class="comment">/// Turn a set of s16 typed registers in \p AddrRegs into a dword sized</span></div>
<div class="line"><a name="l04779"></a><span class="lineno"> 4779</span>&#160;<span class="comment">/// vector with s16 typed elements.</span></div>
<div class="line"><a name="l04780"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#a0022aa73e6337684561159d1f7929966"> 4780</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a0022aa73e6337684561159d1f7929966">packImage16bitOpsToDwords</a>(<a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l04781"></a><span class="lineno"> 4781</span>&#160;                                      <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Register&gt;</a> &amp;PackedAddrs,</div>
<div class="line"><a name="l04782"></a><span class="lineno"> 4782</span>&#160;                                      <span class="keywordtype">unsigned</span> ArgOffset,</div>
<div class="line"><a name="l04783"></a><span class="lineno"> 4783</span>&#160;                                      <span class="keyword">const</span> AMDGPU::ImageDimIntrinsicInfo *<a class="code" href="AMDGPUBaseInfo_8cpp.html#ad18f9973176b870e59d30b81d8a1091e">Intr</a>,</div>
<div class="line"><a name="l04784"></a><span class="lineno"> 4784</span>&#160;                                      <span class="keywordtype">bool</span> IsA16, <span class="keywordtype">bool</span> IsG16) {</div>
<div class="line"><a name="l04785"></a><span class="lineno"> 4785</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S16 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(16);</div>
<div class="line"><a name="l04786"></a><span class="lineno"> 4786</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> V2S16 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(2, 16);</div>
<div class="line"><a name="l04787"></a><span class="lineno"> 4787</span>&#160;  <span class="keyword">auto</span> EndIdx = <a class="code" href="AMDGPUBaseInfo_8cpp.html#ad18f9973176b870e59d30b81d8a1091e">Intr</a>-&gt;VAddrEnd;</div>
<div class="line"><a name="l04788"></a><span class="lineno"> 4788</span>&#160; </div>
<div class="line"><a name="l04789"></a><span class="lineno"> 4789</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="AMDGPUBaseInfo_8cpp.html#ad18f9973176b870e59d30b81d8a1091e">Intr</a>-&gt;VAddrStart; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; EndIdx; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++) {</div>
<div class="line"><a name="l04790"></a><span class="lineno"> 4790</span>&#160;    <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;<a class="code" href="classllvm_1_1SrcOp.html">SrcOp</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(ArgOffset + <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04791"></a><span class="lineno"> 4791</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1SrcOp.html">SrcOp</a>.isReg())</div>
<div class="line"><a name="l04792"></a><span class="lineno"> 4792</span>&#160;      <span class="keywordflow">continue</span>; <span class="comment">// _L to _LZ may have eliminated this.</span></div>
<div class="line"><a name="l04793"></a><span class="lineno"> 4793</span>&#160; </div>
<div class="line"><a name="l04794"></a><span class="lineno"> 4794</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> AddrReg = <a class="code" href="classllvm_1_1SrcOp.html">SrcOp</a>.<a class="code" href="classllvm_1_1SrcOp.html#ae229785d0c8a8ce25d34be18fe150a54">getReg</a>();</div>
<div class="line"><a name="l04795"></a><span class="lineno"> 4795</span>&#160; </div>
<div class="line"><a name="l04796"></a><span class="lineno"> 4796</span>&#160;    <span class="keywordflow">if</span> ((I &lt; Intr-&gt;GradientStart) ||</div>
<div class="line"><a name="l04797"></a><span class="lineno"> 4797</span>&#160;        (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &gt;= <a class="code" href="AMDGPUBaseInfo_8cpp.html#ad18f9973176b870e59d30b81d8a1091e">Intr</a>-&gt;GradientStart &amp;&amp; I &lt; Intr-&gt;CoordStart &amp;&amp; !IsG16) ||</div>
<div class="line"><a name="l04798"></a><span class="lineno"> 4798</span>&#160;        (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &gt;= <a class="code" href="AMDGPUBaseInfo_8cpp.html#ad18f9973176b870e59d30b81d8a1091e">Intr</a>-&gt;CoordStart &amp;&amp; !IsA16)) {</div>
<div class="line"><a name="l04799"></a><span class="lineno"> 4799</span>&#160;      <span class="keywordflow">if</span> ((I &lt; Intr-&gt;GradientStart) &amp;&amp; IsA16 &amp;&amp;</div>
<div class="line"><a name="l04800"></a><span class="lineno"> 4800</span>&#160;          (<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMRI()-&gt;getType(AddrReg) == S16)) {</div>
<div class="line"><a name="l04801"></a><span class="lineno"> 4801</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> == <a class="code" href="AMDGPUBaseInfo_8cpp.html#ad18f9973176b870e59d30b81d8a1091e">Intr</a>-&gt;BiasIndex &amp;&amp; <span class="stringliteral">&quot;Got unexpected 16-bit extra argument&quot;</span>);</div>
<div class="line"><a name="l04802"></a><span class="lineno"> 4802</span>&#160;        <span class="comment">// Special handling of bias when A16 is on. Bias is of type half but</span></div>
<div class="line"><a name="l04803"></a><span class="lineno"> 4803</span>&#160;        <span class="comment">// occupies full 32-bit.</span></div>
<div class="line"><a name="l04804"></a><span class="lineno"> 4804</span>&#160;        PackedAddrs.push_back(</div>
<div class="line"><a name="l04805"></a><span class="lineno"> 4805</span>&#160;            <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildBuildVector(V2S16, {AddrReg, B.buildUndef(S16).getReg(0)})</div>
<div class="line"><a name="l04806"></a><span class="lineno"> 4806</span>&#160;                .getReg(0));</div>
<div class="line"><a name="l04807"></a><span class="lineno"> 4807</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04808"></a><span class="lineno"> 4808</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!IsA16 || <a class="code" href="AMDGPUBaseInfo_8cpp.html#ad18f9973176b870e59d30b81d8a1091e">Intr</a>-&gt;NumBiasArgs == 0 || <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="AMDGPUBaseInfo_8cpp.html#ad18f9973176b870e59d30b81d8a1091e">Intr</a>-&gt;BiasIndex) &amp;&amp;</div>
<div class="line"><a name="l04809"></a><span class="lineno"> 4809</span>&#160;               <span class="stringliteral">&quot;Bias needs to be converted to 16 bit in A16 mode&quot;</span>);</div>
<div class="line"><a name="l04810"></a><span class="lineno"> 4810</span>&#160;        <span class="comment">// Handle any gradient or coordinate operands that should not be packed</span></div>
<div class="line"><a name="l04811"></a><span class="lineno"> 4811</span>&#160;        AddrReg = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildBitcast(V2S16, AddrReg).getReg(0);</div>
<div class="line"><a name="l04812"></a><span class="lineno"> 4812</span>&#160;        PackedAddrs.push_back(AddrReg);</div>
<div class="line"><a name="l04813"></a><span class="lineno"> 4813</span>&#160;      }</div>
<div class="line"><a name="l04814"></a><span class="lineno"> 4814</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04815"></a><span class="lineno"> 4815</span>&#160;      <span class="comment">// Dz/dh, dz/dv and the last odd coord are packed with undef. Also, in 1D,</span></div>
<div class="line"><a name="l04816"></a><span class="lineno"> 4816</span>&#160;      <span class="comment">// derivatives dx/dh and dx/dv are packed with undef.</span></div>
<div class="line"><a name="l04817"></a><span class="lineno"> 4817</span>&#160;      <span class="keywordflow">if</span> (((<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> + 1) &gt;= EndIdx) ||</div>
<div class="line"><a name="l04818"></a><span class="lineno"> 4818</span>&#160;          ((<a class="code" href="AMDGPUBaseInfo_8cpp.html#ad18f9973176b870e59d30b81d8a1091e">Intr</a>-&gt;NumGradients / 2) % 2 == 1 &amp;&amp;</div>
<div class="line"><a name="l04819"></a><span class="lineno"> 4819</span>&#160;           (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> == <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span><span class="keyword">&gt;</span>(<a class="code" href="AMDGPUBaseInfo_8cpp.html#ad18f9973176b870e59d30b81d8a1091e">Intr</a>-&gt;GradientStart +</div>
<div class="line"><a name="l04820"></a><span class="lineno"> 4820</span>&#160;                                       (<a class="code" href="AMDGPUBaseInfo_8cpp.html#ad18f9973176b870e59d30b81d8a1091e">Intr</a>-&gt;NumGradients / 2) - 1) ||</div>
<div class="line"><a name="l04821"></a><span class="lineno"> 4821</span>&#160;            <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> == <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span><span class="keyword">&gt;</span>(<a class="code" href="AMDGPUBaseInfo_8cpp.html#ad18f9973176b870e59d30b81d8a1091e">Intr</a>-&gt;GradientStart +</div>
<div class="line"><a name="l04822"></a><span class="lineno"> 4822</span>&#160;                                       <a class="code" href="AMDGPUBaseInfo_8cpp.html#ad18f9973176b870e59d30b81d8a1091e">Intr</a>-&gt;NumGradients - 1))) ||</div>
<div class="line"><a name="l04823"></a><span class="lineno"> 4823</span>&#160;          <span class="comment">// Check for _L to _LZ optimization</span></div>
<div class="line"><a name="l04824"></a><span class="lineno"> 4824</span>&#160;          !<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(ArgOffset + <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> + 1).isReg()) {</div>
<div class="line"><a name="l04825"></a><span class="lineno"> 4825</span>&#160;        PackedAddrs.push_back(</div>
<div class="line"><a name="l04826"></a><span class="lineno"> 4826</span>&#160;            <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildBuildVector(V2S16, {AddrReg, B.buildUndef(S16).getReg(0)})</div>
<div class="line"><a name="l04827"></a><span class="lineno"> 4827</span>&#160;                .getReg(0));</div>
<div class="line"><a name="l04828"></a><span class="lineno"> 4828</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04829"></a><span class="lineno"> 4829</span>&#160;        PackedAddrs.push_back(</div>
<div class="line"><a name="l04830"></a><span class="lineno"> 4830</span>&#160;            <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildBuildVector(</div>
<div class="line"><a name="l04831"></a><span class="lineno"> 4831</span>&#160;                 V2S16, {AddrReg, MI.getOperand(ArgOffset + I + 1).getReg()})</div>
<div class="line"><a name="l04832"></a><span class="lineno"> 4832</span>&#160;                .getReg(0));</div>
<div class="line"><a name="l04833"></a><span class="lineno"> 4833</span>&#160;        ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l04834"></a><span class="lineno"> 4834</span>&#160;      }</div>
<div class="line"><a name="l04835"></a><span class="lineno"> 4835</span>&#160;    }</div>
<div class="line"><a name="l04836"></a><span class="lineno"> 4836</span>&#160;  }</div>
<div class="line"><a name="l04837"></a><span class="lineno"> 4837</span>&#160;}</div>
<div class="line"><a name="l04838"></a><span class="lineno"> 4838</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l04839"></a><span class="lineno"> 4839</span>&#160;<span class="comment">/// Convert from separate vaddr components to a single vector address register,</span></div>
<div class="line"><a name="l04840"></a><span class="lineno"> 4840</span>&#160;<span class="comment">/// and replace the remaining operands with $noreg.</span></div>
<div class="line"><a name="l04841"></a><span class="lineno"><a class="line" href="AMDGPULegalizerInfo_8cpp.html#ad049a79d46df2c25561d90e9d80fb5e3"> 4841</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="AMDGPULegalizerInfo_8cpp.html#ad049a79d46df2c25561d90e9d80fb5e3">convertImageAddrToPacked</a>(<a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l04842"></a><span class="lineno"> 4842</span>&#160;                                     <span class="keywordtype">int</span> DimIdx, <span class="keywordtype">int</span> NumVAddrs) {</div>
<div class="line"><a name="l04843"></a><span class="lineno"> 4843</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S32 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</div>
<div class="line"><a name="l04844"></a><span class="lineno"> 4844</span>&#160;  (void)S32;</div>
<div class="line"><a name="l04845"></a><span class="lineno"> 4845</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 8&gt;</a> AddrRegs;</div>
<div class="line"><a name="l04846"></a><span class="lineno"> 4846</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != NumVAddrs; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l04847"></a><span class="lineno"> 4847</span>&#160;    <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;<a class="code" href="classllvm_1_1SrcOp.html">SrcOp</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(DimIdx + <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04848"></a><span class="lineno"> 4848</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SrcOp.html">SrcOp</a>.isReg()) {</div>
<div class="line"><a name="l04849"></a><span class="lineno"> 4849</span>&#160;      AddrRegs.push_back(<a class="code" href="classllvm_1_1SrcOp.html">SrcOp</a>.<a class="code" href="classllvm_1_1SrcOp.html#ae229785d0c8a8ce25d34be18fe150a54">getReg</a>());</div>
<div class="line"><a name="l04850"></a><span class="lineno"> 4850</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMRI()-&gt;getType(<a class="code" href="classllvm_1_1SrcOp.html">SrcOp</a>.<a class="code" href="classllvm_1_1SrcOp.html#ae229785d0c8a8ce25d34be18fe150a54">getReg</a>()) == S32);</div>
<div class="line"><a name="l04851"></a><span class="lineno"> 4851</span>&#160;    }</div>
<div class="line"><a name="l04852"></a><span class="lineno"> 4852</span>&#160;  }</div>
<div class="line"><a name="l04853"></a><span class="lineno"> 4853</span>&#160; </div>
<div class="line"><a name="l04854"></a><span class="lineno"> 4854</span>&#160;  <span class="keywordtype">int</span> NumAddrRegs = AddrRegs.size();</div>
<div class="line"><a name="l04855"></a><span class="lineno"> 4855</span>&#160;  <span class="keywordflow">if</span> (NumAddrRegs != 1) {</div>
<div class="line"><a name="l04856"></a><span class="lineno"> 4856</span>&#160;    <span class="keyword">auto</span> VAddr =</div>
<div class="line"><a name="l04857"></a><span class="lineno"> 4857</span>&#160;        <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildBuildVector(<a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(NumAddrRegs, 32), AddrRegs);</div>
<div class="line"><a name="l04858"></a><span class="lineno"> 4858</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(DimIdx).setReg(VAddr.getReg(0));</div>
<div class="line"><a name="l04859"></a><span class="lineno"> 4859</span>&#160;  }</div>
<div class="line"><a name="l04860"></a><span class="lineno"> 4860</span>&#160; </div>
<div class="line"><a name="l04861"></a><span class="lineno"> 4861</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 1; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != NumVAddrs; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l04862"></a><span class="lineno"> 4862</span>&#160;    <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;<a class="code" href="classllvm_1_1SrcOp.html">SrcOp</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(DimIdx + <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l04863"></a><span class="lineno"> 4863</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SrcOp.html">SrcOp</a>.isReg())</div>
<div class="line"><a name="l04864"></a><span class="lineno"> 4864</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(DimIdx + <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>).setReg(AMDGPU::NoRegister);</div>
<div class="line"><a name="l04865"></a><span class="lineno"> 4865</span>&#160;  }</div>
<div class="line"><a name="l04866"></a><span class="lineno"> 4866</span>&#160;}</div>
<div class="line"><a name="l04867"></a><span class="lineno"> 4867</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l04868"></a><span class="lineno"> 4868</span>&#160;<span class="comment">/// Rewrite image intrinsics to use register layouts expected by the subtarget.</span></div>
<div class="line"><a name="l04869"></a><span class="lineno"> 4869</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l04870"></a><span class="lineno"> 4870</span>&#160;<span class="comment">/// Depending on the subtarget, load/store with 16-bit element data need to be</span></div>
<div class="line"><a name="l04871"></a><span class="lineno"> 4871</span>&#160;<span class="comment">/// rewritten to use the low half of 32-bit registers, or directly use a packed</span></div>
<div class="line"><a name="l04872"></a><span class="lineno"> 4872</span>&#160;<span class="comment">/// layout. 16-bit addresses should also sometimes be packed into 32-bit</span></div>
<div class="line"><a name="l04873"></a><span class="lineno"> 4873</span>&#160;<span class="comment">/// registers.</span></div>
<div class="line"><a name="l04874"></a><span class="lineno"> 4874</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l04875"></a><span class="lineno"> 4875</span>&#160;<span class="comment">/// We don&#39;t want to directly select image instructions just yet, but also want</span></div>
<div class="line"><a name="l04876"></a><span class="lineno"> 4876</span>&#160;<span class="comment">/// to exposes all register repacking to the legalizer/combiners. We also don&#39;t</span></div>
<div class="line"><a name="l04877"></a><span class="lineno"> 4877</span>&#160;<span class="comment">/// want a selected instruction entering RegBankSelect. In order to avoid</span></div>
<div class="line"><a name="l04878"></a><span class="lineno"> 4878</span>&#160;<span class="comment">/// defining a multitude of intermediate image instructions, directly hack on</span></div>
<div class="line"><a name="l04879"></a><span class="lineno"> 4879</span>&#160;<span class="comment">/// the intrinsic&#39;s arguments. In cases like a16 addresses, this requires</span></div>
<div class="line"><a name="l04880"></a><span class="lineno"> 4880</span>&#160;<span class="comment">/// padding now unnecessary arguments with $noreg.</span></div>
<div class="line"><a name="l04881"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#ad0be6e871a184d6f7b814515324eee1b"> 4881</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#ad0be6e871a184d6f7b814515324eee1b">AMDGPULegalizerInfo::legalizeImageIntrinsic</a>(</div>
<div class="line"><a name="l04882"></a><span class="lineno"> 4882</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="classllvm_1_1GISelChangeObserver.html">GISelChangeObserver</a> &amp;Observer,</div>
<div class="line"><a name="l04883"></a><span class="lineno"> 4883</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1AMDGPU_1_1ImageDimIntrinsicInfo.html">AMDGPU::ImageDimIntrinsicInfo</a> *<a class="code" href="AMDGPUBaseInfo_8cpp.html#ad18f9973176b870e59d30b81d8a1091e">Intr</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l04884"></a><span class="lineno"> 4884</span>&#160; </div>
<div class="line"><a name="l04885"></a><span class="lineno"> 4885</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getMF();</div>
<div class="line"><a name="l04886"></a><span class="lineno"> 4886</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> NumDefs = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumExplicitDefs();</div>
<div class="line"><a name="l04887"></a><span class="lineno"> 4887</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> ArgOffset = NumDefs + 1;</div>
<div class="line"><a name="l04888"></a><span class="lineno"> 4888</span>&#160;  <span class="keywordtype">bool</span> IsTFE = NumDefs == 2;</div>
<div class="line"><a name="l04889"></a><span class="lineno"> 4889</span>&#160;  <span class="comment">// We are only processing the operands of d16 image operations on subtargets</span></div>
<div class="line"><a name="l04890"></a><span class="lineno"> 4890</span>&#160;  <span class="comment">// that use the unpacked register layout, or need to repack the TFE result.</span></div>
<div class="line"><a name="l04891"></a><span class="lineno"> 4891</span>&#160; </div>
<div class="line"><a name="l04892"></a><span class="lineno"> 4892</span>&#160;  <span class="comment">// TODO: Do we need to guard against already legalized intrinsics?</span></div>
<div class="line"><a name="l04893"></a><span class="lineno"> 4893</span>&#160;  <span class="keyword">const</span> <a class="code" href="structllvm_1_1AMDGPU_1_1MIMGBaseOpcodeInfo.html">AMDGPU::MIMGBaseOpcodeInfo</a> *BaseOpcode =</div>
<div class="line"><a name="l04894"></a><span class="lineno"> 4894</span>&#160;      <a class="code" href="namespacellvm_1_1AMDGPU.html#a8adcca4377f5dfb320d2f81a84a9998e">AMDGPU::getMIMGBaseOpcodeInfo</a>(<a class="code" href="AMDGPUBaseInfo_8cpp.html#ad18f9973176b870e59d30b81d8a1091e">Intr</a>-&gt;BaseOpcode);</div>
<div class="line"><a name="l04895"></a><span class="lineno"> 4895</span>&#160; </div>
<div class="line"><a name="l04896"></a><span class="lineno"> 4896</span>&#160;  <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> *<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMRI();</div>
<div class="line"><a name="l04897"></a><span class="lineno"> 4897</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S32 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</div>
<div class="line"><a name="l04898"></a><span class="lineno"> 4898</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S16 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(16);</div>
<div class="line"><a name="l04899"></a><span class="lineno"> 4899</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> V2S16 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(2, 16);</div>
<div class="line"><a name="l04900"></a><span class="lineno"> 4900</span>&#160; </div>
<div class="line"><a name="l04901"></a><span class="lineno"> 4901</span>&#160;  <span class="keywordtype">unsigned</span> DMask = 0;</div>
<div class="line"><a name="l04902"></a><span class="lineno"> 4902</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> VData = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(NumDefs == 0 ? 1 : 0).getReg();</div>
<div class="line"><a name="l04903"></a><span class="lineno"> 4903</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(VData);</div>
<div class="line"><a name="l04904"></a><span class="lineno"> 4904</span>&#160; </div>
<div class="line"><a name="l04905"></a><span class="lineno"> 4905</span>&#160;  <span class="comment">// Check for 16 bit addresses and pack if true.</span></div>
<div class="line"><a name="l04906"></a><span class="lineno"> 4906</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> GradTy =</div>
<div class="line"><a name="l04907"></a><span class="lineno"> 4907</span>&#160;      <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(ArgOffset + <a class="code" href="AMDGPUBaseInfo_8cpp.html#ad18f9973176b870e59d30b81d8a1091e">Intr</a>-&gt;GradientStart).getReg());</div>
<div class="line"><a name="l04908"></a><span class="lineno"> 4908</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> AddrTy =</div>
<div class="line"><a name="l04909"></a><span class="lineno"> 4909</span>&#160;      <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(ArgOffset + <a class="code" href="AMDGPUBaseInfo_8cpp.html#ad18f9973176b870e59d30b81d8a1091e">Intr</a>-&gt;CoordStart).getReg());</div>
<div class="line"><a name="l04910"></a><span class="lineno"> 4910</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> IsG16 =</div>
<div class="line"><a name="l04911"></a><span class="lineno"> 4911</span>&#160;      ST.<a class="code" href="classllvm_1_1GCNSubtarget.html#aaac87839eb0077c44120678bcab56bc9">hasG16</a>() ? (BaseOpcode-&gt;<a class="code" href="structllvm_1_1AMDGPU_1_1MIMGBaseOpcodeInfo.html#a0adbb6ce25f3ffd10c57280e27cc2cd2">Gradients</a> &amp;&amp; GradTy == S16) : GradTy == S16;</div>
<div class="line"><a name="l04912"></a><span class="lineno"> 4912</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> IsA16 = AddrTy == S16;</div>
<div class="line"><a name="l04913"></a><span class="lineno"> 4913</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> IsD16 = Ty.<a class="code" href="classllvm_1_1LLT.html#ae4165ca7bcbee300d5e9c065adcc1415">getScalarType</a>() == S16;</div>
<div class="line"><a name="l04914"></a><span class="lineno"> 4914</span>&#160; </div>
<div class="line"><a name="l04915"></a><span class="lineno"> 4915</span>&#160;  <span class="keywordtype">int</span> DMaskLanes = 0;</div>
<div class="line"><a name="l04916"></a><span class="lineno"> 4916</span>&#160;  <span class="keywordflow">if</span> (!BaseOpcode-&gt;<a class="code" href="structllvm_1_1AMDGPU_1_1MIMGBaseOpcodeInfo.html#a9b768edaf13fa245f7f32392066e8214">Atomic</a>) {</div>
<div class="line"><a name="l04917"></a><span class="lineno"> 4917</span>&#160;    DMask = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(ArgOffset + <a class="code" href="AMDGPUBaseInfo_8cpp.html#ad18f9973176b870e59d30b81d8a1091e">Intr</a>-&gt;DMaskIndex).getImm();</div>
<div class="line"><a name="l04918"></a><span class="lineno"> 4918</span>&#160;    <span class="keywordflow">if</span> (BaseOpcode-&gt;<a class="code" href="structllvm_1_1AMDGPU_1_1MIMGBaseOpcodeInfo.html#a08a241a250332ee93cf1dce846b01cad">Gather4</a>) {</div>
<div class="line"><a name="l04919"></a><span class="lineno"> 4919</span>&#160;      DMaskLanes = 4;</div>
<div class="line"><a name="l04920"></a><span class="lineno"> 4920</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (DMask != 0) {</div>
<div class="line"><a name="l04921"></a><span class="lineno"> 4921</span>&#160;      DMaskLanes = <a class="code" href="namespacellvm.html#a0eea77e7bfa82e0219d2ec7b4efbc94f">llvm::popcount</a>(DMask);</div>
<div class="line"><a name="l04922"></a><span class="lineno"> 4922</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!IsTFE &amp;&amp; !BaseOpcode-&gt;<a class="code" href="structllvm_1_1AMDGPU_1_1MIMGBaseOpcodeInfo.html#a89201ea82f62bd544438593981c5b8ff">Store</a>) {</div>
<div class="line"><a name="l04923"></a><span class="lineno"> 4923</span>&#160;      <span class="comment">// If dmask is 0, this is a no-op load. This can be eliminated.</span></div>
<div class="line"><a name="l04924"></a><span class="lineno"> 4924</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUndef(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0));</div>
<div class="line"><a name="l04925"></a><span class="lineno"> 4925</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l04926"></a><span class="lineno"> 4926</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l04927"></a><span class="lineno"> 4927</span>&#160;    }</div>
<div class="line"><a name="l04928"></a><span class="lineno"> 4928</span>&#160;  }</div>
<div class="line"><a name="l04929"></a><span class="lineno"> 4929</span>&#160; </div>
<div class="line"><a name="l04930"></a><span class="lineno"> 4930</span>&#160;  Observer.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l04931"></a><span class="lineno"> 4931</span>&#160;  <span class="keyword">auto</span> ChangedInstr = <a class="code" href="namespacellvm.html#ab2e3dbebd68e69d77c227682fc8e3ba2">make_scope_exit</a>([&amp;] { Observer.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>); });</div>
<div class="line"><a name="l04932"></a><span class="lineno"> 4932</span>&#160; </div>
<div class="line"><a name="l04933"></a><span class="lineno"> 4933</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> StoreOpcode = IsD16 ? AMDGPU::G_AMDGPU_INTRIN_IMAGE_STORE_D16</div>
<div class="line"><a name="l04934"></a><span class="lineno"> 4934</span>&#160;                                     : AMDGPU::G_AMDGPU_INTRIN_IMAGE_STORE;</div>
<div class="line"><a name="l04935"></a><span class="lineno"> 4935</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> LoadOpcode = IsD16 ? AMDGPU::G_AMDGPU_INTRIN_IMAGE_LOAD_D16</div>
<div class="line"><a name="l04936"></a><span class="lineno"> 4936</span>&#160;                                    : AMDGPU::G_AMDGPU_INTRIN_IMAGE_LOAD;</div>
<div class="line"><a name="l04937"></a><span class="lineno"> 4937</span>&#160;  <span class="keywordtype">unsigned</span> NewOpcode = NumDefs == 0 ? StoreOpcode : LoadOpcode;</div>
<div class="line"><a name="l04938"></a><span class="lineno"> 4938</span>&#160; </div>
<div class="line"><a name="l04939"></a><span class="lineno"> 4939</span>&#160;  <span class="comment">// Track that we legalized this</span></div>
<div class="line"><a name="l04940"></a><span class="lineno"> 4940</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.setDesc(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getTII().get(NewOpcode));</div>
<div class="line"><a name="l04941"></a><span class="lineno"> 4941</span>&#160; </div>
<div class="line"><a name="l04942"></a><span class="lineno"> 4942</span>&#160;  <span class="comment">// Expecting to get an error flag since TFC is on - and dmask is 0 Force</span></div>
<div class="line"><a name="l04943"></a><span class="lineno"> 4943</span>&#160;  <span class="comment">// dmask to be at least 1 otherwise the instruction will fail</span></div>
<div class="line"><a name="l04944"></a><span class="lineno"> 4944</span>&#160;  <span class="keywordflow">if</span> (IsTFE &amp;&amp; DMask == 0) {</div>
<div class="line"><a name="l04945"></a><span class="lineno"> 4945</span>&#160;    DMask = 0x1;</div>
<div class="line"><a name="l04946"></a><span class="lineno"> 4946</span>&#160;    DMaskLanes = 1;</div>
<div class="line"><a name="l04947"></a><span class="lineno"> 4947</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(ArgOffset + <a class="code" href="AMDGPUBaseInfo_8cpp.html#ad18f9973176b870e59d30b81d8a1091e">Intr</a>-&gt;DMaskIndex).setImm(DMask);</div>
<div class="line"><a name="l04948"></a><span class="lineno"> 4948</span>&#160;  }</div>
<div class="line"><a name="l04949"></a><span class="lineno"> 4949</span>&#160; </div>
<div class="line"><a name="l04950"></a><span class="lineno"> 4950</span>&#160;  <span class="keywordflow">if</span> (BaseOpcode-&gt;<a class="code" href="structllvm_1_1AMDGPU_1_1MIMGBaseOpcodeInfo.html#a9b768edaf13fa245f7f32392066e8214">Atomic</a>) {</div>
<div class="line"><a name="l04951"></a><span class="lineno"> 4951</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> VData0 = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l04952"></a><span class="lineno"> 4952</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(VData0);</div>
<div class="line"><a name="l04953"></a><span class="lineno"> 4953</span>&#160; </div>
<div class="line"><a name="l04954"></a><span class="lineno"> 4954</span>&#160;    <span class="comment">// TODO: Allow atomic swap and bit ops for v2s16/v4s16</span></div>
<div class="line"><a name="l04955"></a><span class="lineno"> 4955</span>&#160;    <span class="keywordflow">if</span> (Ty.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>())</div>
<div class="line"><a name="l04956"></a><span class="lineno"> 4956</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04957"></a><span class="lineno"> 4957</span>&#160; </div>
<div class="line"><a name="l04958"></a><span class="lineno"> 4958</span>&#160;    <span class="keywordflow">if</span> (BaseOpcode-&gt;<a class="code" href="structllvm_1_1AMDGPU_1_1MIMGBaseOpcodeInfo.html#a3b6665b446a6192cc2b5ecf51082ea83">AtomicX2</a>) {</div>
<div class="line"><a name="l04959"></a><span class="lineno"> 4959</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> VData1 = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getReg();</div>
<div class="line"><a name="l04960"></a><span class="lineno"> 4960</span>&#160;      <span class="comment">// The two values are packed in one register.</span></div>
<div class="line"><a name="l04961"></a><span class="lineno"> 4961</span>&#160;      <a class="code" href="classllvm_1_1LLT.html">LLT</a> PackedTy = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(2, Ty);</div>
<div class="line"><a name="l04962"></a><span class="lineno"> 4962</span>&#160;      <span class="keyword">auto</span> <a class="code" href="X86InterleavedAccess_8cpp.html#a76c9562101f54d25482f88ae29ed6131">Concat</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildBuildVector(PackedTy, {VData0, VData1});</div>
<div class="line"><a name="l04963"></a><span class="lineno"> 4963</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).setReg(<a class="code" href="X86InterleavedAccess_8cpp.html#a76c9562101f54d25482f88ae29ed6131">Concat</a>.getReg(0));</div>
<div class="line"><a name="l04964"></a><span class="lineno"> 4964</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).setReg(AMDGPU::NoRegister);</div>
<div class="line"><a name="l04965"></a><span class="lineno"> 4965</span>&#160;    }</div>
<div class="line"><a name="l04966"></a><span class="lineno"> 4966</span>&#160;  }</div>
<div class="line"><a name="l04967"></a><span class="lineno"> 4967</span>&#160; </div>
<div class="line"><a name="l04968"></a><span class="lineno"> 4968</span>&#160;  <span class="keywordtype">unsigned</span> CorrectedNumVAddrs = <a class="code" href="AMDGPUBaseInfo_8cpp.html#ad18f9973176b870e59d30b81d8a1091e">Intr</a>-&gt;NumVAddrs;</div>
<div class="line"><a name="l04969"></a><span class="lineno"> 4969</span>&#160; </div>
<div class="line"><a name="l04970"></a><span class="lineno"> 4970</span>&#160;  <span class="comment">// Rewrite the addressing register layout before doing anything else.</span></div>
<div class="line"><a name="l04971"></a><span class="lineno"> 4971</span>&#160;  <span class="keywordflow">if</span> (BaseOpcode-&gt;<a class="code" href="structllvm_1_1AMDGPU_1_1MIMGBaseOpcodeInfo.html#a0adbb6ce25f3ffd10c57280e27cc2cd2">Gradients</a> &amp;&amp; !ST.<a class="code" href="classllvm_1_1GCNSubtarget.html#aaac87839eb0077c44120678bcab56bc9">hasG16</a>() &amp;&amp; (IsA16 != IsG16)) {</div>
<div class="line"><a name="l04972"></a><span class="lineno"> 4972</span>&#160;    <span class="comment">// 16 bit gradients are supported, but are tied to the A16 control</span></div>
<div class="line"><a name="l04973"></a><span class="lineno"> 4973</span>&#160;    <span class="comment">// so both gradients and addresses must be 16 bit</span></div>
<div class="line"><a name="l04974"></a><span class="lineno"> 4974</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04975"></a><span class="lineno"> 4975</span>&#160;  }</div>
<div class="line"><a name="l04976"></a><span class="lineno"> 4976</span>&#160; </div>
<div class="line"><a name="l04977"></a><span class="lineno"> 4977</span>&#160;  <span class="keywordflow">if</span> (IsA16 &amp;&amp; !ST.<a class="code" href="classllvm_1_1GCNSubtarget.html#a0985b28a440a19cc9e6b8229e75b5152">hasA16</a>()) {</div>
<div class="line"><a name="l04978"></a><span class="lineno"> 4978</span>&#160;    <span class="comment">// A16 not supported</span></div>
<div class="line"><a name="l04979"></a><span class="lineno"> 4979</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l04980"></a><span class="lineno"> 4980</span>&#160;  }</div>
<div class="line"><a name="l04981"></a><span class="lineno"> 4981</span>&#160; </div>
<div class="line"><a name="l04982"></a><span class="lineno"> 4982</span>&#160;  <span class="keywordflow">if</span> (IsA16 || IsG16) {</div>
<div class="line"><a name="l04983"></a><span class="lineno"> 4983</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AMDGPUBaseInfo_8cpp.html#ad18f9973176b870e59d30b81d8a1091e">Intr</a>-&gt;NumVAddrs &gt; 1) {</div>
<div class="line"><a name="l04984"></a><span class="lineno"> 4984</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 4&gt;</a> PackedRegs;</div>
<div class="line"><a name="l04985"></a><span class="lineno"> 4985</span>&#160; </div>
<div class="line"><a name="l04986"></a><span class="lineno"> 4986</span>&#160;      <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a0022aa73e6337684561159d1f7929966">packImage16bitOpsToDwords</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, PackedRegs, ArgOffset, <a class="code" href="AMDGPUBaseInfo_8cpp.html#ad18f9973176b870e59d30b81d8a1091e">Intr</a>, IsA16,</div>
<div class="line"><a name="l04987"></a><span class="lineno"> 4987</span>&#160;                                IsG16);</div>
<div class="line"><a name="l04988"></a><span class="lineno"> 4988</span>&#160; </div>
<div class="line"><a name="l04989"></a><span class="lineno"> 4989</span>&#160;      <span class="comment">// See also below in the non-a16 branch</span></div>
<div class="line"><a name="l04990"></a><span class="lineno"> 4990</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">bool</span> UseNSA = ST.<a class="code" href="classllvm_1_1GCNSubtarget.html#a90329091d5d23e8a4bac1a2803d252b2">hasNSAEncoding</a>() &amp;&amp;</div>
<div class="line"><a name="l04991"></a><span class="lineno"> 4991</span>&#160;                          PackedRegs.size() &gt;= ST.<a class="code" href="classllvm_1_1GCNSubtarget.html#a86673715704dada21e3529d93a5376e8">getNSAThreshold</a>(MF) &amp;&amp;</div>
<div class="line"><a name="l04992"></a><span class="lineno"> 4992</span>&#160;                          PackedRegs.size() &lt;= ST.<a class="code" href="classllvm_1_1GCNSubtarget.html#ae1917134ea7a60d6d706cd919e236aae">getNSAMaxSize</a>();</div>
<div class="line"><a name="l04993"></a><span class="lineno"> 4993</span>&#160; </div>
<div class="line"><a name="l04994"></a><span class="lineno"> 4994</span>&#160;      <span class="keywordflow">if</span> (!UseNSA &amp;&amp; PackedRegs.size() &gt; 1) {</div>
<div class="line"><a name="l04995"></a><span class="lineno"> 4995</span>&#160;        <a class="code" href="classllvm_1_1LLT.html">LLT</a> PackedAddrTy = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(2 * PackedRegs.size(), 16);</div>
<div class="line"><a name="l04996"></a><span class="lineno"> 4996</span>&#160;        <span class="keyword">auto</span> <a class="code" href="X86InterleavedAccess_8cpp.html#a76c9562101f54d25482f88ae29ed6131">Concat</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConcatVectors(PackedAddrTy, PackedRegs);</div>
<div class="line"><a name="l04997"></a><span class="lineno"> 4997</span>&#160;        PackedRegs[0] = <a class="code" href="X86InterleavedAccess_8cpp.html#a76c9562101f54d25482f88ae29ed6131">Concat</a>.getReg(0);</div>
<div class="line"><a name="l04998"></a><span class="lineno"> 4998</span>&#160;        PackedRegs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#ad0b3d8447f88377b62d9c019f3c4e118">resize</a>(1);</div>
<div class="line"><a name="l04999"></a><span class="lineno"> 4999</span>&#160;      }</div>
<div class="line"><a name="l05000"></a><span class="lineno"> 5000</span>&#160; </div>
<div class="line"><a name="l05001"></a><span class="lineno"> 5001</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">unsigned</span> NumPacked = PackedRegs.size();</div>
<div class="line"><a name="l05002"></a><span class="lineno"> 5002</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="AMDGPUBaseInfo_8cpp.html#ad18f9973176b870e59d30b81d8a1091e">Intr</a>-&gt;VAddrStart; I &lt; Intr-&gt;VAddrEnd; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++) {</div>
<div class="line"><a name="l05003"></a><span class="lineno"> 5003</span>&#160;        <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;<a class="code" href="classllvm_1_1SrcOp.html">SrcOp</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(ArgOffset + <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l05004"></a><span class="lineno"> 5004</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1SrcOp.html">SrcOp</a>.isReg()) {</div>
<div class="line"><a name="l05005"></a><span class="lineno"> 5005</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1SrcOp.html">SrcOp</a>.isImm() &amp;&amp; <a class="code" href="classllvm_1_1SrcOp.html">SrcOp</a>.<a class="code" href="classllvm_1_1SrcOp.html#a9370c0de85c12bd0062063b7fcbc64ed">getImm</a>() == 0);</div>
<div class="line"><a name="l05006"></a><span class="lineno"> 5006</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l05007"></a><span class="lineno"> 5007</span>&#160;        }</div>
<div class="line"><a name="l05008"></a><span class="lineno"> 5008</span>&#160; </div>
<div class="line"><a name="l05009"></a><span class="lineno"> 5009</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1SrcOp.html">SrcOp</a>.<a class="code" href="classllvm_1_1SrcOp.html#ae229785d0c8a8ce25d34be18fe150a54">getReg</a>() != AMDGPU::NoRegister);</div>
<div class="line"><a name="l05010"></a><span class="lineno"> 5010</span>&#160; </div>
<div class="line"><a name="l05011"></a><span class="lineno"> 5011</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> - <a class="code" href="AMDGPUBaseInfo_8cpp.html#ad18f9973176b870e59d30b81d8a1091e">Intr</a>-&gt;VAddrStart &lt; NumPacked)</div>
<div class="line"><a name="l05012"></a><span class="lineno"> 5012</span>&#160;          <a class="code" href="classllvm_1_1SrcOp.html">SrcOp</a>.setReg(PackedRegs[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> - <a class="code" href="AMDGPUBaseInfo_8cpp.html#ad18f9973176b870e59d30b81d8a1091e">Intr</a>-&gt;VAddrStart]);</div>
<div class="line"><a name="l05013"></a><span class="lineno"> 5013</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l05014"></a><span class="lineno"> 5014</span>&#160;          <a class="code" href="classllvm_1_1SrcOp.html">SrcOp</a>.setReg(AMDGPU::NoRegister);</div>
<div class="line"><a name="l05015"></a><span class="lineno"> 5015</span>&#160;      }</div>
<div class="line"><a name="l05016"></a><span class="lineno"> 5016</span>&#160;    }</div>
<div class="line"><a name="l05017"></a><span class="lineno"> 5017</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05018"></a><span class="lineno"> 5018</span>&#160;    <span class="comment">// If the register allocator cannot place the address registers contiguously</span></div>
<div class="line"><a name="l05019"></a><span class="lineno"> 5019</span>&#160;    <span class="comment">// without introducing moves, then using the non-sequential address encoding</span></div>
<div class="line"><a name="l05020"></a><span class="lineno"> 5020</span>&#160;    <span class="comment">// is always preferable, since it saves VALU instructions and is usually a</span></div>
<div class="line"><a name="l05021"></a><span class="lineno"> 5021</span>&#160;    <span class="comment">// wash in terms of code size or even better.</span></div>
<div class="line"><a name="l05022"></a><span class="lineno"> 5022</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l05023"></a><span class="lineno"> 5023</span>&#160;    <span class="comment">// However, we currently have no way of hinting to the register allocator</span></div>
<div class="line"><a name="l05024"></a><span class="lineno"> 5024</span>&#160;    <span class="comment">// that MIMG addresses should be placed contiguously when it is possible to</span></div>
<div class="line"><a name="l05025"></a><span class="lineno"> 5025</span>&#160;    <span class="comment">// do so, so force non-NSA for the common 2-address case as a heuristic.</span></div>
<div class="line"><a name="l05026"></a><span class="lineno"> 5026</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l05027"></a><span class="lineno"> 5027</span>&#160;    <span class="comment">// SIShrinkInstructions will convert NSA encodings to non-NSA after register</span></div>
<div class="line"><a name="l05028"></a><span class="lineno"> 5028</span>&#160;    <span class="comment">// allocation when possible.</span></div>
<div class="line"><a name="l05029"></a><span class="lineno"> 5029</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l05030"></a><span class="lineno"> 5030</span>&#160;    <span class="comment">// TODO: we can actually allow partial NSA where the final register is a</span></div>
<div class="line"><a name="l05031"></a><span class="lineno"> 5031</span>&#160;    <span class="comment">// contiguous set of the remaining addresses.</span></div>
<div class="line"><a name="l05032"></a><span class="lineno"> 5032</span>&#160;    <span class="comment">// This could help where there are more addresses than supported.</span></div>
<div class="line"><a name="l05033"></a><span class="lineno"> 5033</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> UseNSA = ST.<a class="code" href="classllvm_1_1GCNSubtarget.html#a90329091d5d23e8a4bac1a2803d252b2">hasNSAEncoding</a>() &amp;&amp;</div>
<div class="line"><a name="l05034"></a><span class="lineno"> 5034</span>&#160;                        CorrectedNumVAddrs &gt;= ST.<a class="code" href="classllvm_1_1GCNSubtarget.html#a86673715704dada21e3529d93a5376e8">getNSAThreshold</a>(MF) &amp;&amp;</div>
<div class="line"><a name="l05035"></a><span class="lineno"> 5035</span>&#160;                        CorrectedNumVAddrs &lt;= ST.<a class="code" href="classllvm_1_1GCNSubtarget.html#ae1917134ea7a60d6d706cd919e236aae">getNSAMaxSize</a>();</div>
<div class="line"><a name="l05036"></a><span class="lineno"> 5036</span>&#160; </div>
<div class="line"><a name="l05037"></a><span class="lineno"> 5037</span>&#160;    <span class="keywordflow">if</span> (!UseNSA &amp;&amp; <a class="code" href="AMDGPUBaseInfo_8cpp.html#ad18f9973176b870e59d30b81d8a1091e">Intr</a>-&gt;NumVAddrs &gt; 1)</div>
<div class="line"><a name="l05038"></a><span class="lineno"> 5038</span>&#160;      <a class="code" href="AMDGPULegalizerInfo_8cpp.html#ad049a79d46df2c25561d90e9d80fb5e3">convertImageAddrToPacked</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, ArgOffset + <a class="code" href="AMDGPUBaseInfo_8cpp.html#ad18f9973176b870e59d30b81d8a1091e">Intr</a>-&gt;VAddrStart,</div>
<div class="line"><a name="l05039"></a><span class="lineno"> 5039</span>&#160;                               <a class="code" href="AMDGPUBaseInfo_8cpp.html#ad18f9973176b870e59d30b81d8a1091e">Intr</a>-&gt;NumVAddrs);</div>
<div class="line"><a name="l05040"></a><span class="lineno"> 5040</span>&#160;  }</div>
<div class="line"><a name="l05041"></a><span class="lineno"> 5041</span>&#160; </div>
<div class="line"><a name="l05042"></a><span class="lineno"> 5042</span>&#160;  <span class="keywordtype">int</span> Flags = 0;</div>
<div class="line"><a name="l05043"></a><span class="lineno"> 5043</span>&#160;  <span class="keywordflow">if</span> (IsA16)</div>
<div class="line"><a name="l05044"></a><span class="lineno"> 5044</span>&#160;    Flags |= 1;</div>
<div class="line"><a name="l05045"></a><span class="lineno"> 5045</span>&#160;  <span class="keywordflow">if</span> (IsG16)</div>
<div class="line"><a name="l05046"></a><span class="lineno"> 5046</span>&#160;    Flags |= 2;</div>
<div class="line"><a name="l05047"></a><span class="lineno"> 5047</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.addOperand(<a class="code" href="classllvm_1_1MachineOperand.html#ab09679b541a6ba1219b3602569847364">MachineOperand::CreateImm</a>(Flags));</div>
<div class="line"><a name="l05048"></a><span class="lineno"> 5048</span>&#160; </div>
<div class="line"><a name="l05049"></a><span class="lineno"> 5049</span>&#160;  <span class="keywordflow">if</span> (BaseOpcode-&gt;<a class="code" href="structllvm_1_1AMDGPU_1_1MIMGBaseOpcodeInfo.html#a89201ea82f62bd544438593981c5b8ff">Store</a>) { <span class="comment">// No TFE for stores?</span></div>
<div class="line"><a name="l05050"></a><span class="lineno"> 5050</span>&#160;    <span class="comment">// TODO: Handle dmask trim</span></div>
<div class="line"><a name="l05051"></a><span class="lineno"> 5051</span>&#160;    <span class="keywordflow">if</span> (!Ty.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() || !IsD16)</div>
<div class="line"><a name="l05052"></a><span class="lineno"> 5052</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05053"></a><span class="lineno"> 5053</span>&#160; </div>
<div class="line"><a name="l05054"></a><span class="lineno"> 5054</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> RepackedReg = <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a3dcd2bcf223daced673ed18e4ad47efa">handleD16VData</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, *<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, VData, <span class="keyword">true</span>);</div>
<div class="line"><a name="l05055"></a><span class="lineno"> 5055</span>&#160;    <span class="keywordflow">if</span> (RepackedReg != VData) {</div>
<div class="line"><a name="l05056"></a><span class="lineno"> 5056</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).setReg(RepackedReg);</div>
<div class="line"><a name="l05057"></a><span class="lineno"> 5057</span>&#160;    }</div>
<div class="line"><a name="l05058"></a><span class="lineno"> 5058</span>&#160; </div>
<div class="line"><a name="l05059"></a><span class="lineno"> 5059</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05060"></a><span class="lineno"> 5060</span>&#160;  }</div>
<div class="line"><a name="l05061"></a><span class="lineno"> 5061</span>&#160; </div>
<div class="line"><a name="l05062"></a><span class="lineno"> 5062</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l05063"></a><span class="lineno"> 5063</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> EltTy = Ty.<a class="code" href="classllvm_1_1LLT.html#ae4165ca7bcbee300d5e9c065adcc1415">getScalarType</a>();</div>
<div class="line"><a name="l05064"></a><span class="lineno"> 5064</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> NumElts = Ty.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>() ? Ty.<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>() : 1;</div>
<div class="line"><a name="l05065"></a><span class="lineno"> 5065</span>&#160; </div>
<div class="line"><a name="l05066"></a><span class="lineno"> 5066</span>&#160;  <span class="comment">// Confirm that the return type is large enough for the dmask specified</span></div>
<div class="line"><a name="l05067"></a><span class="lineno"> 5067</span>&#160;  <span class="keywordflow">if</span> (NumElts &lt; DMaskLanes)</div>
<div class="line"><a name="l05068"></a><span class="lineno"> 5068</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05069"></a><span class="lineno"> 5069</span>&#160; </div>
<div class="line"><a name="l05070"></a><span class="lineno"> 5070</span>&#160;  <span class="keywordflow">if</span> (NumElts &gt; 4 || DMaskLanes &gt; 4)</div>
<div class="line"><a name="l05071"></a><span class="lineno"> 5071</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05072"></a><span class="lineno"> 5072</span>&#160; </div>
<div class="line"><a name="l05073"></a><span class="lineno"> 5073</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> AdjustedNumElts = DMaskLanes == 0 ? 1 : DMaskLanes;</div>
<div class="line"><a name="l05074"></a><span class="lineno"> 5074</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> AdjustedTy =</div>
<div class="line"><a name="l05075"></a><span class="lineno"> 5075</span>&#160;      Ty.<a class="code" href="classllvm_1_1LLT.html#adabd45e67a1847750a117317b5ef8f9f">changeElementCount</a>(<a class="code" href="classllvm_1_1ElementCount.html#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(AdjustedNumElts));</div>
<div class="line"><a name="l05076"></a><span class="lineno"> 5076</span>&#160; </div>
<div class="line"><a name="l05077"></a><span class="lineno"> 5077</span>&#160;  <span class="comment">// The raw dword aligned data component of the load. The only legal cases</span></div>
<div class="line"><a name="l05078"></a><span class="lineno"> 5078</span>&#160;  <span class="comment">// where this matters should be when using the packed D16 format, for</span></div>
<div class="line"><a name="l05079"></a><span class="lineno"> 5079</span>&#160;  <span class="comment">// s16 -&gt; &lt;2 x s16&gt;, and &lt;3 x s16&gt; -&gt; &lt;4 x s16&gt;,</span></div>
<div class="line"><a name="l05080"></a><span class="lineno"> 5080</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> RoundedTy;</div>
<div class="line"><a name="l05081"></a><span class="lineno"> 5081</span>&#160; </div>
<div class="line"><a name="l05082"></a><span class="lineno"> 5082</span>&#160;  <span class="comment">// S32 vector to cover all data, plus TFE result element.</span></div>
<div class="line"><a name="l05083"></a><span class="lineno"> 5083</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> TFETy;</div>
<div class="line"><a name="l05084"></a><span class="lineno"> 5084</span>&#160; </div>
<div class="line"><a name="l05085"></a><span class="lineno"> 5085</span>&#160;  <span class="comment">// Register type to use for each loaded component. Will be S32 or V2S16.</span></div>
<div class="line"><a name="l05086"></a><span class="lineno"> 5086</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> RegTy;</div>
<div class="line"><a name="l05087"></a><span class="lineno"> 5087</span>&#160; </div>
<div class="line"><a name="l05088"></a><span class="lineno"> 5088</span>&#160;  <span class="keywordflow">if</span> (IsD16 &amp;&amp; ST.<a class="code" href="classllvm_1_1GCNSubtarget.html#ad30b3c952ed576256171d49971ec9241">hasUnpackedD16VMem</a>()) {</div>
<div class="line"><a name="l05089"></a><span class="lineno"> 5089</span>&#160;    RoundedTy =</div>
<div class="line"><a name="l05090"></a><span class="lineno"> 5090</span>&#160;        <a class="code" href="classllvm_1_1LLT.html#ae74a60e5edcee0609a1e4fddc62a8a01">LLT::scalarOrVector</a>(<a class="code" href="classllvm_1_1ElementCount.html#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(AdjustedNumElts), 32);</div>
<div class="line"><a name="l05091"></a><span class="lineno"> 5091</span>&#160;    TFETy = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(AdjustedNumElts + 1, 32);</div>
<div class="line"><a name="l05092"></a><span class="lineno"> 5092</span>&#160;    RegTy = S32;</div>
<div class="line"><a name="l05093"></a><span class="lineno"> 5093</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05094"></a><span class="lineno"> 5094</span>&#160;    <span class="keywordtype">unsigned</span> EltSize = EltTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l05095"></a><span class="lineno"> 5095</span>&#160;    <span class="keywordtype">unsigned</span> RoundedElts = (AdjustedTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() + 31) / 32;</div>
<div class="line"><a name="l05096"></a><span class="lineno"> 5096</span>&#160;    <span class="keywordtype">unsigned</span> RoundedSize = 32 * RoundedElts;</div>
<div class="line"><a name="l05097"></a><span class="lineno"> 5097</span>&#160;    RoundedTy = <a class="code" href="classllvm_1_1LLT.html#ae74a60e5edcee0609a1e4fddc62a8a01">LLT::scalarOrVector</a>(</div>
<div class="line"><a name="l05098"></a><span class="lineno"> 5098</span>&#160;        <a class="code" href="classllvm_1_1ElementCount.html#a584cb8dfa0090b33a969c4dda27337f6">ElementCount::getFixed</a>(RoundedSize / EltSize), EltSize);</div>
<div class="line"><a name="l05099"></a><span class="lineno"> 5099</span>&#160;    TFETy = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(RoundedSize / 32 + 1, S32);</div>
<div class="line"><a name="l05100"></a><span class="lineno"> 5100</span>&#160;    RegTy = !IsTFE &amp;&amp; EltSize == 16 ? V2S16 : S32;</div>
<div class="line"><a name="l05101"></a><span class="lineno"> 5101</span>&#160;  }</div>
<div class="line"><a name="l05102"></a><span class="lineno"> 5102</span>&#160; </div>
<div class="line"><a name="l05103"></a><span class="lineno"> 5103</span>&#160;  <span class="comment">// The return type does not need adjustment.</span></div>
<div class="line"><a name="l05104"></a><span class="lineno"> 5104</span>&#160;  <span class="comment">// TODO: Should we change s16 case to s32 or &lt;2 x s16&gt;?</span></div>
<div class="line"><a name="l05105"></a><span class="lineno"> 5105</span>&#160;  <span class="keywordflow">if</span> (!IsTFE &amp;&amp; (RoundedTy == Ty || !Ty.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>()))</div>
<div class="line"><a name="l05106"></a><span class="lineno"> 5106</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05107"></a><span class="lineno"> 5107</span>&#160; </div>
<div class="line"><a name="l05108"></a><span class="lineno"> 5108</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst1Reg;</div>
<div class="line"><a name="l05109"></a><span class="lineno"> 5109</span>&#160; </div>
<div class="line"><a name="l05110"></a><span class="lineno"> 5110</span>&#160;  <span class="comment">// Insert after the instruction.</span></div>
<div class="line"><a name="l05111"></a><span class="lineno"> 5111</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.setInsertPt(*<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getParent(), ++<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getIterator());</div>
<div class="line"><a name="l05112"></a><span class="lineno"> 5112</span>&#160; </div>
<div class="line"><a name="l05113"></a><span class="lineno"> 5113</span>&#160;  <span class="comment">// TODO: For TFE with d16, if we used a TFE type that was a multiple of &lt;2 x</span></div>
<div class="line"><a name="l05114"></a><span class="lineno"> 5114</span>&#160;  <span class="comment">// s16&gt; instead of s32, we would only need 1 bitcast instead of multiple.</span></div>
<div class="line"><a name="l05115"></a><span class="lineno"> 5115</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> LoadResultTy = IsTFE ? TFETy : RoundedTy;</div>
<div class="line"><a name="l05116"></a><span class="lineno"> 5116</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> ResultNumRegs = LoadResultTy.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() / 32;</div>
<div class="line"><a name="l05117"></a><span class="lineno"> 5117</span>&#160; </div>
<div class="line"><a name="l05118"></a><span class="lineno"> 5118</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> NewResultReg = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(LoadResultTy);</div>
<div class="line"><a name="l05119"></a><span class="lineno"> 5119</span>&#160; </div>
<div class="line"><a name="l05120"></a><span class="lineno"> 5120</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).setReg(NewResultReg);</div>
<div class="line"><a name="l05121"></a><span class="lineno"> 5121</span>&#160; </div>
<div class="line"><a name="l05122"></a><span class="lineno"> 5122</span>&#160;  <span class="comment">// In the IR, TFE is supposed to be used with a 2 element struct return</span></div>
<div class="line"><a name="l05123"></a><span class="lineno"> 5123</span>&#160;  <span class="comment">// type. The instruction really returns these two values in one contiguous</span></div>
<div class="line"><a name="l05124"></a><span class="lineno"> 5124</span>&#160;  <span class="comment">// register, with one additional dword beyond the loaded data. Rewrite the</span></div>
<div class="line"><a name="l05125"></a><span class="lineno"> 5125</span>&#160;  <span class="comment">// return type to use a single register result.</span></div>
<div class="line"><a name="l05126"></a><span class="lineno"> 5126</span>&#160; </div>
<div class="line"><a name="l05127"></a><span class="lineno"> 5127</span>&#160;  <span class="keywordflow">if</span> (IsTFE) {</div>
<div class="line"><a name="l05128"></a><span class="lineno"> 5128</span>&#160;    Dst1Reg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l05129"></a><span class="lineno"> 5129</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(Dst1Reg) != S32)</div>
<div class="line"><a name="l05130"></a><span class="lineno"> 5130</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05131"></a><span class="lineno"> 5131</span>&#160; </div>
<div class="line"><a name="l05132"></a><span class="lineno"> 5132</span>&#160;    <span class="comment">// TODO: Make sure the TFE operand bit is set.</span></div>
<div class="line"><a name="l05133"></a><span class="lineno"> 5133</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.removeOperand(1);</div>
<div class="line"><a name="l05134"></a><span class="lineno"> 5134</span>&#160; </div>
<div class="line"><a name="l05135"></a><span class="lineno"> 5135</span>&#160;    <span class="comment">// Handle the easy case that requires no repack instructions.</span></div>
<div class="line"><a name="l05136"></a><span class="lineno"> 5136</span>&#160;    <span class="keywordflow">if</span> (Ty == S32) {</div>
<div class="line"><a name="l05137"></a><span class="lineno"> 5137</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUnmerge({DstReg, Dst1Reg}, NewResultReg);</div>
<div class="line"><a name="l05138"></a><span class="lineno"> 5138</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05139"></a><span class="lineno"> 5139</span>&#160;    }</div>
<div class="line"><a name="l05140"></a><span class="lineno"> 5140</span>&#160;  }</div>
<div class="line"><a name="l05141"></a><span class="lineno"> 5141</span>&#160; </div>
<div class="line"><a name="l05142"></a><span class="lineno"> 5142</span>&#160;  <span class="comment">// Now figure out how to copy the new result register back into the old</span></div>
<div class="line"><a name="l05143"></a><span class="lineno"> 5143</span>&#160;  <span class="comment">// result.</span></div>
<div class="line"><a name="l05144"></a><span class="lineno"> 5144</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 5&gt;</a> ResultRegs(ResultNumRegs, Dst1Reg);</div>
<div class="line"><a name="l05145"></a><span class="lineno"> 5145</span>&#160; </div>
<div class="line"><a name="l05146"></a><span class="lineno"> 5146</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> NumDataRegs = IsTFE ? ResultNumRegs - 1  : ResultNumRegs;</div>
<div class="line"><a name="l05147"></a><span class="lineno"> 5147</span>&#160; </div>
<div class="line"><a name="l05148"></a><span class="lineno"> 5148</span>&#160;  <span class="keywordflow">if</span> (ResultNumRegs == 1) {</div>
<div class="line"><a name="l05149"></a><span class="lineno"> 5149</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!IsTFE);</div>
<div class="line"><a name="l05150"></a><span class="lineno"> 5150</span>&#160;    ResultRegs[0] = NewResultReg;</div>
<div class="line"><a name="l05151"></a><span class="lineno"> 5151</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05152"></a><span class="lineno"> 5152</span>&#160;    <span class="comment">// We have to repack into a new vector of some kind.</span></div>
<div class="line"><a name="l05153"></a><span class="lineno"> 5153</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != NumDataRegs; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l05154"></a><span class="lineno"> 5154</span>&#160;      ResultRegs[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(RegTy);</div>
<div class="line"><a name="l05155"></a><span class="lineno"> 5155</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUnmerge(ResultRegs, NewResultReg);</div>
<div class="line"><a name="l05156"></a><span class="lineno"> 5156</span>&#160; </div>
<div class="line"><a name="l05157"></a><span class="lineno"> 5157</span>&#160;    <span class="comment">// Drop the final TFE element to get the data part. The TFE result is</span></div>
<div class="line"><a name="l05158"></a><span class="lineno"> 5158</span>&#160;    <span class="comment">// directly written to the right place already.</span></div>
<div class="line"><a name="l05159"></a><span class="lineno"> 5159</span>&#160;    <span class="keywordflow">if</span> (IsTFE)</div>
<div class="line"><a name="l05160"></a><span class="lineno"> 5160</span>&#160;      ResultRegs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#ad0b3d8447f88377b62d9c019f3c4e118">resize</a>(NumDataRegs);</div>
<div class="line"><a name="l05161"></a><span class="lineno"> 5161</span>&#160;  }</div>
<div class="line"><a name="l05162"></a><span class="lineno"> 5162</span>&#160; </div>
<div class="line"><a name="l05163"></a><span class="lineno"> 5163</span>&#160;  <span class="comment">// For an s16 scalar result, we form an s32 result with a truncate regardless</span></div>
<div class="line"><a name="l05164"></a><span class="lineno"> 5164</span>&#160;  <span class="comment">// of packed vs. unpacked.</span></div>
<div class="line"><a name="l05165"></a><span class="lineno"> 5165</span>&#160;  <span class="keywordflow">if</span> (IsD16 &amp;&amp; !Ty.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>()) {</div>
<div class="line"><a name="l05166"></a><span class="lineno"> 5166</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildTrunc(DstReg, ResultRegs[0]);</div>
<div class="line"><a name="l05167"></a><span class="lineno"> 5167</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05168"></a><span class="lineno"> 5168</span>&#160;  }</div>
<div class="line"><a name="l05169"></a><span class="lineno"> 5169</span>&#160; </div>
<div class="line"><a name="l05170"></a><span class="lineno"> 5170</span>&#160;  <span class="comment">// Avoid a build/concat_vector of 1 entry.</span></div>
<div class="line"><a name="l05171"></a><span class="lineno"> 5171</span>&#160;  <span class="keywordflow">if</span> (Ty == V2S16 &amp;&amp; NumDataRegs == 1 &amp;&amp; !ST.<a class="code" href="classllvm_1_1GCNSubtarget.html#ad30b3c952ed576256171d49971ec9241">hasUnpackedD16VMem</a>()) {</div>
<div class="line"><a name="l05172"></a><span class="lineno"> 5172</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildBitcast(DstReg, ResultRegs[0]);</div>
<div class="line"><a name="l05173"></a><span class="lineno"> 5173</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05174"></a><span class="lineno"> 5174</span>&#160;  }</div>
<div class="line"><a name="l05175"></a><span class="lineno"> 5175</span>&#160; </div>
<div class="line"><a name="l05176"></a><span class="lineno"> 5176</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Ty.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>());</div>
<div class="line"><a name="l05177"></a><span class="lineno"> 5177</span>&#160; </div>
<div class="line"><a name="l05178"></a><span class="lineno"> 5178</span>&#160;  <span class="keywordflow">if</span> (IsD16) {</div>
<div class="line"><a name="l05179"></a><span class="lineno"> 5179</span>&#160;    <span class="comment">// For packed D16 results with TFE enabled, all the data components are</span></div>
<div class="line"><a name="l05180"></a><span class="lineno"> 5180</span>&#160;    <span class="comment">// S32. Cast back to the expected type.</span></div>
<div class="line"><a name="l05181"></a><span class="lineno"> 5181</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l05182"></a><span class="lineno"> 5182</span>&#160;    <span class="comment">// TODO: We don&#39;t really need to use load s32 elements. We would only need one</span></div>
<div class="line"><a name="l05183"></a><span class="lineno"> 5183</span>&#160;    <span class="comment">// cast for the TFE result if a multiple of v2s16 was used.</span></div>
<div class="line"><a name="l05184"></a><span class="lineno"> 5184</span>&#160;    <span class="keywordflow">if</span> (RegTy != V2S16 &amp;&amp; !ST.<a class="code" href="classllvm_1_1GCNSubtarget.html#ad30b3c952ed576256171d49971ec9241">hasUnpackedD16VMem</a>()) {</div>
<div class="line"><a name="l05185"></a><span class="lineno"> 5185</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Register.html">Register</a> &amp;<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> : ResultRegs)</div>
<div class="line"><a name="l05186"></a><span class="lineno"> 5186</span>&#160;        <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildBitcast(V2S16, <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>).getReg(0);</div>
<div class="line"><a name="l05187"></a><span class="lineno"> 5187</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ST.<a class="code" href="classllvm_1_1GCNSubtarget.html#ad30b3c952ed576256171d49971ec9241">hasUnpackedD16VMem</a>()) {</div>
<div class="line"><a name="l05188"></a><span class="lineno"> 5188</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Register.html">Register</a> &amp;<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> : ResultRegs)</div>
<div class="line"><a name="l05189"></a><span class="lineno"> 5189</span>&#160;        <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildTrunc(S16, <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>).getReg(0);</div>
<div class="line"><a name="l05190"></a><span class="lineno"> 5190</span>&#160;    }</div>
<div class="line"><a name="l05191"></a><span class="lineno"> 5191</span>&#160;  }</div>
<div class="line"><a name="l05192"></a><span class="lineno"> 5192</span>&#160; </div>
<div class="line"><a name="l05193"></a><span class="lineno"> 5193</span>&#160;  <span class="keyword">auto</span> padWithUndef = [&amp;](<a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty, <span class="keywordtype">int</span> NumElts) {</div>
<div class="line"><a name="l05194"></a><span class="lineno"> 5194</span>&#160;    <span class="keywordflow">if</span> (NumElts == 0)</div>
<div class="line"><a name="l05195"></a><span class="lineno"> 5195</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l05196"></a><span class="lineno"> 5196</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320dab502f975742e9bff6d6dd7b49439b806">Undef</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUndef(Ty).getReg(0);</div>
<div class="line"><a name="l05197"></a><span class="lineno"> 5197</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != NumElts; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l05198"></a><span class="lineno"> 5198</span>&#160;      ResultRegs.push_back(<a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320dab502f975742e9bff6d6dd7b49439b806">Undef</a>);</div>
<div class="line"><a name="l05199"></a><span class="lineno"> 5199</span>&#160;  };</div>
<div class="line"><a name="l05200"></a><span class="lineno"> 5200</span>&#160; </div>
<div class="line"><a name="l05201"></a><span class="lineno"> 5201</span>&#160;  <span class="comment">// Pad out any elements eliminated due to the dmask.</span></div>
<div class="line"><a name="l05202"></a><span class="lineno"> 5202</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> ResTy = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(ResultRegs[0]);</div>
<div class="line"><a name="l05203"></a><span class="lineno"> 5203</span>&#160;  <span class="keywordflow">if</span> (!ResTy.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>()) {</div>
<div class="line"><a name="l05204"></a><span class="lineno"> 5204</span>&#160;    padWithUndef(ResTy, NumElts - ResultRegs.size());</div>
<div class="line"><a name="l05205"></a><span class="lineno"> 5205</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildBuildVector(DstReg, ResultRegs);</div>
<div class="line"><a name="l05206"></a><span class="lineno"> 5206</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05207"></a><span class="lineno"> 5207</span>&#160;  }</div>
<div class="line"><a name="l05208"></a><span class="lineno"> 5208</span>&#160; </div>
<div class="line"><a name="l05209"></a><span class="lineno"> 5209</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!ST.<a class="code" href="classllvm_1_1GCNSubtarget.html#ad30b3c952ed576256171d49971ec9241">hasUnpackedD16VMem</a>() &amp;&amp; ResTy == V2S16);</div>
<div class="line"><a name="l05210"></a><span class="lineno"> 5210</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> RegsToCover = (Ty.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() + 31) / 32;</div>
<div class="line"><a name="l05211"></a><span class="lineno"> 5211</span>&#160; </div>
<div class="line"><a name="l05212"></a><span class="lineno"> 5212</span>&#160;  <span class="comment">// Deal with the one annoying legal case.</span></div>
<div class="line"><a name="l05213"></a><span class="lineno"> 5213</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> V3S16 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(3, 16);</div>
<div class="line"><a name="l05214"></a><span class="lineno"> 5214</span>&#160;  <span class="keywordflow">if</span> (Ty == V3S16) {</div>
<div class="line"><a name="l05215"></a><span class="lineno"> 5215</span>&#160;    <span class="keywordflow">if</span> (IsTFE) {</div>
<div class="line"><a name="l05216"></a><span class="lineno"> 5216</span>&#160;      <span class="keywordflow">if</span> (ResultRegs.size() == 1) {</div>
<div class="line"><a name="l05217"></a><span class="lineno"> 5217</span>&#160;        NewResultReg = ResultRegs[0];</div>
<div class="line"><a name="l05218"></a><span class="lineno"> 5218</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ResultRegs.size() == 2) {</div>
<div class="line"><a name="l05219"></a><span class="lineno"> 5219</span>&#160;        <a class="code" href="classllvm_1_1LLT.html">LLT</a> V4S16 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(4, 16);</div>
<div class="line"><a name="l05220"></a><span class="lineno"> 5220</span>&#160;        NewResultReg = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConcatVectors(V4S16, ResultRegs).getReg(0);</div>
<div class="line"><a name="l05221"></a><span class="lineno"> 5221</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05222"></a><span class="lineno"> 5222</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05223"></a><span class="lineno"> 5223</span>&#160;      }</div>
<div class="line"><a name="l05224"></a><span class="lineno"> 5224</span>&#160;    }</div>
<div class="line"><a name="l05225"></a><span class="lineno"> 5225</span>&#160; </div>
<div class="line"><a name="l05226"></a><span class="lineno"> 5226</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(DstReg).<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>() &lt;</div>
<div class="line"><a name="l05227"></a><span class="lineno"> 5227</span>&#160;        <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(NewResultReg).<a class="code" href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">getNumElements</a>()) {</div>
<div class="line"><a name="l05228"></a><span class="lineno"> 5228</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildDeleteTrailingVectorElements(DstReg, NewResultReg);</div>
<div class="line"><a name="l05229"></a><span class="lineno"> 5229</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05230"></a><span class="lineno"> 5230</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildPadVectorWithUndefElements(DstReg, NewResultReg);</div>
<div class="line"><a name="l05231"></a><span class="lineno"> 5231</span>&#160;    }</div>
<div class="line"><a name="l05232"></a><span class="lineno"> 5232</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05233"></a><span class="lineno"> 5233</span>&#160;  }</div>
<div class="line"><a name="l05234"></a><span class="lineno"> 5234</span>&#160; </div>
<div class="line"><a name="l05235"></a><span class="lineno"> 5235</span>&#160;  padWithUndef(ResTy, RegsToCover - ResultRegs.size());</div>
<div class="line"><a name="l05236"></a><span class="lineno"> 5236</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConcatVectors(DstReg, ResultRegs);</div>
<div class="line"><a name="l05237"></a><span class="lineno"> 5237</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05238"></a><span class="lineno"> 5238</span>&#160;}</div>
<div class="line"><a name="l05239"></a><span class="lineno"> 5239</span>&#160; </div>
<div class="line"><a name="l05240"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#ae0d1532576a7c6e3bda2d8966700d27a"> 5240</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#ae0d1532576a7c6e3bda2d8966700d27a">AMDGPULegalizerInfo::legalizeSBufferLoad</a>(</div>
<div class="line"><a name="l05241"></a><span class="lineno"> 5241</span>&#160;  <a class="code" href="classllvm_1_1LegalizerHelper.html">LegalizerHelper</a> &amp;Helper, <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l05242"></a><span class="lineno"> 5242</span>&#160;  <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> = Helper.<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>;</div>
<div class="line"><a name="l05243"></a><span class="lineno"> 5243</span>&#160;  <a class="code" href="classllvm_1_1GISelChangeObserver.html">GISelChangeObserver</a> &amp;Observer = Helper.<a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>;</div>
<div class="line"><a name="l05244"></a><span class="lineno"> 5244</span>&#160; </div>
<div class="line"><a name="l05245"></a><span class="lineno"> 5245</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l05246"></a><span class="lineno"> 5246</span>&#160;  <a class="code" href="classllvm_1_1LLT.html">LLT</a> Ty = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMRI()-&gt;getType(Dst);</div>
<div class="line"><a name="l05247"></a><span class="lineno"> 5247</span>&#160;  <span class="keywordtype">unsigned</span> Size = Ty.<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>();</div>
<div class="line"><a name="l05248"></a><span class="lineno"> 5248</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMF();</div>
<div class="line"><a name="l05249"></a><span class="lineno"> 5249</span>&#160; </div>
<div class="line"><a name="l05250"></a><span class="lineno"> 5250</span>&#160;  Observer.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">changingInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l05251"></a><span class="lineno"> 5251</span>&#160; </div>
<div class="line"><a name="l05252"></a><span class="lineno"> 5252</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AMDGPULegalizerInfo_8cpp.html#a1c42298ffb49a95c87577d3e5de46aea">shouldBitcastLoadStoreType</a>(ST, Ty, <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(Size))) {</div>
<div class="line"><a name="l05253"></a><span class="lineno"> 5253</span>&#160;    Ty = <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a639711ef50cb300db9e9ade1445ccf07">getBitcastRegisterType</a>(Ty);</div>
<div class="line"><a name="l05254"></a><span class="lineno"> 5254</span>&#160;    Helper.<a class="code" href="classllvm_1_1LegalizerHelper.html#aaa02ab5ab2c50cce96f4fec73c8186c3">bitcastDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, Ty, 0);</div>
<div class="line"><a name="l05255"></a><span class="lineno"> 5255</span>&#160;    Dst = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l05256"></a><span class="lineno"> 5256</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.setInsertPt(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMBB(), <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l05257"></a><span class="lineno"> 5257</span>&#160;  }</div>
<div class="line"><a name="l05258"></a><span class="lineno"> 5258</span>&#160; </div>
<div class="line"><a name="l05259"></a><span class="lineno"> 5259</span>&#160;  <span class="comment">// FIXME: We don&#39;t really need this intermediate instruction. The intrinsic</span></div>
<div class="line"><a name="l05260"></a><span class="lineno"> 5260</span>&#160;  <span class="comment">// should be fixed to have a memory operand. Since it&#39;s readnone, we&#39;re not</span></div>
<div class="line"><a name="l05261"></a><span class="lineno"> 5261</span>&#160;  <span class="comment">// allowed to add one.</span></div>
<div class="line"><a name="l05262"></a><span class="lineno"> 5262</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.setDesc(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getTII().get(AMDGPU::G_AMDGPU_S_BUFFER_LOAD));</div>
<div class="line"><a name="l05263"></a><span class="lineno"> 5263</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.removeOperand(1); <span class="comment">// Remove intrinsic ID</span></div>
<div class="line"><a name="l05264"></a><span class="lineno"> 5264</span>&#160; </div>
<div class="line"><a name="l05265"></a><span class="lineno"> 5265</span>&#160;  <span class="comment">// FIXME: When intrinsic definition is fixed, this should have an MMO already.</span></div>
<div class="line"><a name="l05266"></a><span class="lineno"> 5266</span>&#160;  <span class="comment">// TODO: Should this use datalayout alignment?</span></div>
<div class="line"><a name="l05267"></a><span class="lineno"> 5267</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> MemSize = (Size + 7) / 8;</div>
<div class="line"><a name="l05268"></a><span class="lineno"> 5268</span>&#160;  <span class="keyword">const</span> <a class="code" href="structllvm_1_1Align.html">Align</a> MemAlign(4);</div>
<div class="line"><a name="l05269"></a><span class="lineno"> 5269</span>&#160;  <a class="code" href="classllvm_1_1MachineMemOperand.html">MachineMemOperand</a> *MMO = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a0d496cc15e312863869a384532968143">getMachineMemOperand</a>(</div>
<div class="line"><a name="l05270"></a><span class="lineno"> 5270</span>&#160;      <a class="code" href="structllvm_1_1MachinePointerInfo.html">MachinePointerInfo</a>(),</div>
<div class="line"><a name="l05271"></a><span class="lineno"> 5271</span>&#160;      <a class="code" href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2dda7d12be6206e5b0026c71bbcd5cb76494">MachineMemOperand::MOLoad</a> | <a class="code" href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2dda7b999a936bc7a4d45dfadbe356e77b3f">MachineMemOperand::MODereferenceable</a> |</div>
<div class="line"><a name="l05272"></a><span class="lineno"> 5272</span>&#160;          <a class="code" href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2ddac63dd9c4fe69bfeaac7a363fda846ac6">MachineMemOperand::MOInvariant</a>,</div>
<div class="line"><a name="l05273"></a><span class="lineno"> 5273</span>&#160;      MemSize, MemAlign);</div>
<div class="line"><a name="l05274"></a><span class="lineno"> 5274</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.addMemOperand(MF, MMO);</div>
<div class="line"><a name="l05275"></a><span class="lineno"> 5275</span>&#160; </div>
<div class="line"><a name="l05276"></a><span class="lineno"> 5276</span>&#160;  <span class="comment">// There are no 96-bit result scalar loads, but widening to 128-bit should</span></div>
<div class="line"><a name="l05277"></a><span class="lineno"> 5277</span>&#160;  <span class="comment">// always be legal. We may need to restore this to a 96-bit result if it turns</span></div>
<div class="line"><a name="l05278"></a><span class="lineno"> 5278</span>&#160;  <span class="comment">// out this needs to be converted to a vector load during RegBankSelect.</span></div>
<div class="line"><a name="l05279"></a><span class="lineno"> 5279</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2_32</a>(Size)) {</div>
<div class="line"><a name="l05280"></a><span class="lineno"> 5280</span>&#160;    <span class="keywordflow">if</span> (Ty.<a class="code" href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">isVector</a>())</div>
<div class="line"><a name="l05281"></a><span class="lineno"> 5281</span>&#160;      Helper.<a class="code" href="classllvm_1_1LegalizerHelper.html#a25a4c14864c6f574bc99e19e15a8b4d2">moreElementsVectorDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AMDGPULegalizerInfo_8cpp.html#ae6dc00935578ac3d7b43326b5f02b2bc">getPow2VectorType</a>(Ty), 0);</div>
<div class="line"><a name="l05282"></a><span class="lineno"> 5282</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l05283"></a><span class="lineno"> 5283</span>&#160;      Helper.<a class="code" href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">widenScalarDst</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AMDGPULegalizerInfo_8cpp.html#ae9bc1717e31ed947b2eae89a230c744b">getPow2ScalarType</a>(Ty), 0);</div>
<div class="line"><a name="l05284"></a><span class="lineno"> 5284</span>&#160;  }</div>
<div class="line"><a name="l05285"></a><span class="lineno"> 5285</span>&#160; </div>
<div class="line"><a name="l05286"></a><span class="lineno"> 5286</span>&#160;  Observer.<a class="code" href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">changedInstr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l05287"></a><span class="lineno"> 5287</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05288"></a><span class="lineno"> 5288</span>&#160;}</div>
<div class="line"><a name="l05289"></a><span class="lineno"> 5289</span>&#160; </div>
<div class="line"><a name="l05290"></a><span class="lineno"> 5290</span>&#160;<span class="comment">// TODO: Move to selection</span></div>
<div class="line"><a name="l05291"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a880b2600880891353accd4a93efedace"> 5291</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a880b2600880891353accd4a93efedace">AMDGPULegalizerInfo::legalizeTrapIntrinsic</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l05292"></a><span class="lineno"> 5292</span>&#160;                                                <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>,</div>
<div class="line"><a name="l05293"></a><span class="lineno"> 5293</span>&#160;                                                <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l05294"></a><span class="lineno"> 5294</span>&#160;  <span class="keywordflow">if</span> (!ST.<a class="code" href="classllvm_1_1GCNSubtarget.html#a83c4915f87ee24cf4648d46b2a2acf0a">isTrapHandlerEnabled</a>() ||</div>
<div class="line"><a name="l05295"></a><span class="lineno"> 5295</span>&#160;      ST.<a class="code" href="classllvm_1_1GCNSubtarget.html#a62a67f91a73c5a80be0a080a7d6f3c30">getTrapHandlerAbi</a>() != <a class="code" href="classllvm_1_1GCNSubtarget.html#a347289a8e670a14bc5c60464df2f445caf778ffa73665e8e41448bf12f1350f02">GCNSubtarget::TrapHandlerAbi::AMDHSA</a>)</div>
<div class="line"><a name="l05296"></a><span class="lineno"> 5296</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#aff7dfc9d1d4355acbd741d76ce27fca1">legalizeTrapEndpgm</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l05297"></a><span class="lineno"> 5297</span>&#160; </div>
<div class="line"><a name="l05298"></a><span class="lineno"> 5298</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Module.html">Module</a> *<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMF().getFunction().getParent();</div>
<div class="line"><a name="l05299"></a><span class="lineno"> 5299</span>&#160;  <span class="keywordtype">unsigned</span> CodeObjectVersion = <a class="code" href="namespacellvm_1_1AMDGPU.html#a393a9a9f611c326cabf217b4c360e2e6">AMDGPU::getCodeObjectVersion</a>(*<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>);</div>
<div class="line"><a name="l05300"></a><span class="lineno"> 5300</span>&#160;  <span class="keywordflow">if</span> (CodeObjectVersion &lt;= <a class="code" href="namespacellvm_1_1AMDGPU.html#ab8edae44cec4167ac46ac7f60ecb4dafa74a9d014dc6c0bcf178cd8df1156a200">AMDGPU::AMDHSA_COV3</a>)</div>
<div class="line"><a name="l05301"></a><span class="lineno"> 5301</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#af9de933caeeaebd4387c7c62f02a3bbd">legalizeTrapHsaQueuePtr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l05302"></a><span class="lineno"> 5302</span>&#160; </div>
<div class="line"><a name="l05303"></a><span class="lineno"> 5303</span>&#160;  <span class="keywordflow">return</span> ST.<a class="code" href="classllvm_1_1GCNSubtarget.html#a49c35e81b626716f6e81656a7d301a2f">supportsGetDoorbellID</a>() ?</div>
<div class="line"><a name="l05304"></a><span class="lineno"> 5304</span>&#160;         <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a22adf879f91d77dee4214883f1b94a07">legalizeTrapHsa</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) : <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#af9de933caeeaebd4387c7c62f02a3bbd">legalizeTrapHsaQueuePtr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l05305"></a><span class="lineno"> 5305</span>&#160;}</div>
<div class="line"><a name="l05306"></a><span class="lineno"> 5306</span>&#160; </div>
<div class="line"><a name="l05307"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#aff7dfc9d1d4355acbd741d76ce27fca1"> 5307</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#aff7dfc9d1d4355acbd741d76ce27fca1">AMDGPULegalizerInfo::legalizeTrapEndpgm</a>(</div>
<div class="line"><a name="l05308"></a><span class="lineno"> 5308</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l05309"></a><span class="lineno"> 5309</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildInstr(AMDGPU::S_ENDPGM).addImm(0);</div>
<div class="line"><a name="l05310"></a><span class="lineno"> 5310</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l05311"></a><span class="lineno"> 5311</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05312"></a><span class="lineno"> 5312</span>&#160;}</div>
<div class="line"><a name="l05313"></a><span class="lineno"> 5313</span>&#160; </div>
<div class="line"><a name="l05314"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#af9de933caeeaebd4387c7c62f02a3bbd"> 5314</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#af9de933caeeaebd4387c7c62f02a3bbd">AMDGPULegalizerInfo::legalizeTrapHsaQueuePtr</a>(</div>
<div class="line"><a name="l05315"></a><span class="lineno"> 5315</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l05316"></a><span class="lineno"> 5316</span>&#160;  <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMF();</div>
<div class="line"><a name="l05317"></a><span class="lineno"> 5317</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S64 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64);</div>
<div class="line"><a name="l05318"></a><span class="lineno"> 5318</span>&#160; </div>
<div class="line"><a name="l05319"></a><span class="lineno"> 5319</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> SGPR01(AMDGPU::SGPR0_SGPR1);</div>
<div class="line"><a name="l05320"></a><span class="lineno"> 5320</span>&#160;  <span class="comment">// For code object version 5, queue_ptr is passed through implicit kernarg.</span></div>
<div class="line"><a name="l05321"></a><span class="lineno"> 5321</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPU.html#a393a9a9f611c326cabf217b4c360e2e6">AMDGPU::getCodeObjectVersion</a>(*MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">getParent</a>()) &gt;=</div>
<div class="line"><a name="l05322"></a><span class="lineno"> 5322</span>&#160;      <a class="code" href="namespacellvm_1_1AMDGPU.html#ab8edae44cec4167ac46ac7f60ecb4dafabd2438b14a6a1a27fae653284aaa3cb4">AMDGPU::AMDHSA_COV5</a>) {</div>
<div class="line"><a name="l05323"></a><span class="lineno"> 5323</span>&#160;    <a class="code" href="classllvm_1_1AMDGPUTargetLowering.html#aabb66ae6636b6dbd45c1b66dd9353821">AMDGPUTargetLowering::ImplicitParameter</a> Param =</div>
<div class="line"><a name="l05324"></a><span class="lineno"> 5324</span>&#160;        <a class="code" href="classllvm_1_1AMDGPUTargetLowering.html#aabb66ae6636b6dbd45c1b66dd9353821aa0198e1c8a37613471dfc9d64c02beed">AMDGPUTargetLowering::QUEUE_PTR</a>;</div>
<div class="line"><a name="l05325"></a><span class="lineno"> 5325</span>&#160;    <a class="code" href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a> <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a> =</div>
<div class="line"><a name="l05326"></a><span class="lineno"> 5326</span>&#160;        ST.<a class="code" href="classllvm_1_1GCNSubtarget.html#aadc55ee80218e97fbccb05099877eb51">getTargetLowering</a>()-&gt;<a class="code" href="classllvm_1_1AMDGPUTargetLowering.html#a5a663b4deab0378b73e460588d96871a">getImplicitParameterOffset</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMF(), Param);</div>
<div class="line"><a name="l05327"></a><span class="lineno"> 5327</span>&#160; </div>
<div class="line"><a name="l05328"></a><span class="lineno"> 5328</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> KernargPtrReg = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(</div>
<div class="line"><a name="l05329"></a><span class="lineno"> 5329</span>&#160;        <a class="code" href="classllvm_1_1LLT.html#a7ff0361855acbbe71b15b8dc6003fbc5">LLT::pointer</a>(<a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3faa6d3112da64eecbdbb50aacb5f8251e8">AMDGPUAS::CONSTANT_ADDRESS</a>, 64));</div>
<div class="line"><a name="l05330"></a><span class="lineno"> 5330</span>&#160; </div>
<div class="line"><a name="l05331"></a><span class="lineno"> 5331</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#ae63198baedfab72494f0d79823e99b75">loadInputValue</a>(KernargPtrReg, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,</div>
<div class="line"><a name="l05332"></a><span class="lineno"> 5332</span>&#160;                        <a class="code" href="structllvm_1_1AMDGPUFunctionArgInfo.html#a0e789059bf7f286b7f6bc75b43aac98baf32f3fd30ae548866dc7e45092dd90b9">AMDGPUFunctionArgInfo::KERNARG_SEGMENT_PTR</a>))</div>
<div class="line"><a name="l05333"></a><span class="lineno"> 5333</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05334"></a><span class="lineno"> 5334</span>&#160; </div>
<div class="line"><a name="l05335"></a><span class="lineno"> 5335</span>&#160;    <span class="comment">// TODO: can we be smarter about machine pointer info?</span></div>
<div class="line"><a name="l05336"></a><span class="lineno"> 5336</span>&#160;    <a class="code" href="structllvm_1_1MachinePointerInfo.html">MachinePointerInfo</a> PtrInfo(<a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3faa6d3112da64eecbdbb50aacb5f8251e8">AMDGPUAS::CONSTANT_ADDRESS</a>);</div>
<div class="line"><a name="l05337"></a><span class="lineno"> 5337</span>&#160;    <a class="code" href="classllvm_1_1MachineMemOperand.html">MachineMemOperand</a> *MMO = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a0d496cc15e312863869a384532968143">getMachineMemOperand</a>(</div>
<div class="line"><a name="l05338"></a><span class="lineno"> 5338</span>&#160;        PtrInfo,</div>
<div class="line"><a name="l05339"></a><span class="lineno"> 5339</span>&#160;        <a class="code" href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2dda7d12be6206e5b0026c71bbcd5cb76494">MachineMemOperand::MOLoad</a> | <a class="code" href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2dda7b999a936bc7a4d45dfadbe356e77b3f">MachineMemOperand::MODereferenceable</a> |</div>
<div class="line"><a name="l05340"></a><span class="lineno"> 5340</span>&#160;            <a class="code" href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2ddac63dd9c4fe69bfeaac7a363fda846ac6">MachineMemOperand::MOInvariant</a>,</div>
<div class="line"><a name="l05341"></a><span class="lineno"> 5341</span>&#160;        <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64), <a class="code" href="namespacellvm.html#acd6aa057934751aaac54e5c18bcc18eb">commonAlignment</a>(<a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(64), <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>));</div>
<div class="line"><a name="l05342"></a><span class="lineno"> 5342</span>&#160; </div>
<div class="line"><a name="l05343"></a><span class="lineno"> 5343</span>&#160;    <span class="comment">// Pointer address</span></div>
<div class="line"><a name="l05344"></a><span class="lineno"> 5344</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> LoadAddr = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(</div>
<div class="line"><a name="l05345"></a><span class="lineno"> 5345</span>&#160;        <a class="code" href="classllvm_1_1LLT.html#a7ff0361855acbbe71b15b8dc6003fbc5">LLT::pointer</a>(<a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3faa6d3112da64eecbdbb50aacb5f8251e8">AMDGPUAS::CONSTANT_ADDRESS</a>, 64));</div>
<div class="line"><a name="l05346"></a><span class="lineno"> 5346</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildPtrAdd(LoadAddr, KernargPtrReg,</div>
<div class="line"><a name="l05347"></a><span class="lineno"> 5347</span>&#160;                  <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(<a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(64), <a class="code" href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">Offset</a>).getReg(0));</div>
<div class="line"><a name="l05348"></a><span class="lineno"> 5348</span>&#160;    <span class="comment">// Load address</span></div>
<div class="line"><a name="l05349"></a><span class="lineno"> 5349</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> Temp = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildLoad(S64, LoadAddr, *MMO).getReg(0);</div>
<div class="line"><a name="l05350"></a><span class="lineno"> 5350</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildCopy(SGPR01, Temp);</div>
<div class="line"><a name="l05351"></a><span class="lineno"> 5351</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildInstr(AMDGPU::S_TRAP)</div>
<div class="line"><a name="l05352"></a><span class="lineno"> 5352</span>&#160;        .addImm(<span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span><span class="keyword">&gt;</span>(<a class="code" href="classllvm_1_1GCNSubtarget.html#a80e7aa469ce27c761eef3c645e55ed88a47de73eb7c73a07ac2cfc17fc3533f33">GCNSubtarget::TrapID::LLVMAMDHSATrap</a>))</div>
<div class="line"><a name="l05353"></a><span class="lineno"> 5353</span>&#160;        .addReg(SGPR01, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da0fec8ba6f4a4dc758b725205985eee99">RegState::Implicit</a>);</div>
<div class="line"><a name="l05354"></a><span class="lineno"> 5354</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l05355"></a><span class="lineno"> 5355</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05356"></a><span class="lineno"> 5356</span>&#160;  }</div>
<div class="line"><a name="l05357"></a><span class="lineno"> 5357</span>&#160; </div>
<div class="line"><a name="l05358"></a><span class="lineno"> 5358</span>&#160;  <span class="comment">// Pass queue pointer to trap handler as input, and insert trap instruction</span></div>
<div class="line"><a name="l05359"></a><span class="lineno"> 5359</span>&#160;  <span class="comment">// Reference: https://llvm.org/docs/AMDGPUUsage.html#trap-handler-abi</span></div>
<div class="line"><a name="l05360"></a><span class="lineno"> 5360</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> LiveIn =</div>
<div class="line"><a name="l05361"></a><span class="lineno"> 5361</span>&#160;    <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(<a class="code" href="classllvm_1_1LLT.html#a7ff0361855acbbe71b15b8dc6003fbc5">LLT::pointer</a>(<a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3faa6d3112da64eecbdbb50aacb5f8251e8">AMDGPUAS::CONSTANT_ADDRESS</a>, 64));</div>
<div class="line"><a name="l05362"></a><span class="lineno"> 5362</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#ae63198baedfab72494f0d79823e99b75">loadInputValue</a>(LiveIn, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="structllvm_1_1AMDGPUFunctionArgInfo.html#a0e789059bf7f286b7f6bc75b43aac98ba32b5333e2f708d7eeb05c12e415b8fd4">AMDGPUFunctionArgInfo::QUEUE_PTR</a>))</div>
<div class="line"><a name="l05363"></a><span class="lineno"> 5363</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05364"></a><span class="lineno"> 5364</span>&#160; </div>
<div class="line"><a name="l05365"></a><span class="lineno"> 5365</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildCopy(SGPR01, LiveIn);</div>
<div class="line"><a name="l05366"></a><span class="lineno"> 5366</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildInstr(AMDGPU::S_TRAP)</div>
<div class="line"><a name="l05367"></a><span class="lineno"> 5367</span>&#160;      .addImm(<span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span><span class="keyword">&gt;</span>(<a class="code" href="classllvm_1_1GCNSubtarget.html#a80e7aa469ce27c761eef3c645e55ed88a47de73eb7c73a07ac2cfc17fc3533f33">GCNSubtarget::TrapID::LLVMAMDHSATrap</a>))</div>
<div class="line"><a name="l05368"></a><span class="lineno"> 5368</span>&#160;      .addReg(SGPR01, <a class="code" href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da0fec8ba6f4a4dc758b725205985eee99">RegState::Implicit</a>);</div>
<div class="line"><a name="l05369"></a><span class="lineno"> 5369</span>&#160; </div>
<div class="line"><a name="l05370"></a><span class="lineno"> 5370</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l05371"></a><span class="lineno"> 5371</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05372"></a><span class="lineno"> 5372</span>&#160;}</div>
<div class="line"><a name="l05373"></a><span class="lineno"> 5373</span>&#160; </div>
<div class="line"><a name="l05374"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a22adf879f91d77dee4214883f1b94a07"> 5374</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a22adf879f91d77dee4214883f1b94a07">AMDGPULegalizerInfo::legalizeTrapHsa</a>(</div>
<div class="line"><a name="l05375"></a><span class="lineno"> 5375</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l05376"></a><span class="lineno"> 5376</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildInstr(AMDGPU::S_TRAP)</div>
<div class="line"><a name="l05377"></a><span class="lineno"> 5377</span>&#160;      .addImm(<span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span><span class="keyword">&gt;</span>(<a class="code" href="classllvm_1_1GCNSubtarget.html#a80e7aa469ce27c761eef3c645e55ed88a47de73eb7c73a07ac2cfc17fc3533f33">GCNSubtarget::TrapID::LLVMAMDHSATrap</a>));</div>
<div class="line"><a name="l05378"></a><span class="lineno"> 5378</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l05379"></a><span class="lineno"> 5379</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05380"></a><span class="lineno"> 5380</span>&#160;}</div>
<div class="line"><a name="l05381"></a><span class="lineno"> 5381</span>&#160; </div>
<div class="line"><a name="l05382"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a30cbed3ba22ea175c004159fb3bd5289"> 5382</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a30cbed3ba22ea175c004159fb3bd5289">AMDGPULegalizerInfo::legalizeDebugTrapIntrinsic</a>(</div>
<div class="line"><a name="l05383"></a><span class="lineno"> 5383</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l05384"></a><span class="lineno"> 5384</span>&#160;  <span class="comment">// Is non-HSA path or trap-handler disabled? Then, report a warning</span></div>
<div class="line"><a name="l05385"></a><span class="lineno"> 5385</span>&#160;  <span class="comment">// accordingly</span></div>
<div class="line"><a name="l05386"></a><span class="lineno"> 5386</span>&#160;  <span class="keywordflow">if</span> (!ST.<a class="code" href="classllvm_1_1GCNSubtarget.html#a83c4915f87ee24cf4648d46b2a2acf0a">isTrapHandlerEnabled</a>() ||</div>
<div class="line"><a name="l05387"></a><span class="lineno"> 5387</span>&#160;      ST.<a class="code" href="classllvm_1_1GCNSubtarget.html#a62a67f91a73c5a80be0a080a7d6f3c30">getTrapHandlerAbi</a>() != <a class="code" href="classllvm_1_1GCNSubtarget.html#a347289a8e670a14bc5c60464df2f445caf778ffa73665e8e41448bf12f1350f02">GCNSubtarget::TrapHandlerAbi::AMDHSA</a>) {</div>
<div class="line"><a name="l05388"></a><span class="lineno"> 5388</span>&#160;    <a class="code" href="classllvm_1_1DiagnosticInfoUnsupported.html">DiagnosticInfoUnsupported</a> NoTrap(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMF().getFunction(),</div>
<div class="line"><a name="l05389"></a><span class="lineno"> 5389</span>&#160;                                     <span class="stringliteral">&quot;debugtrap handler not supported&quot;</span>,</div>
<div class="line"><a name="l05390"></a><span class="lineno"> 5390</span>&#160;                                     <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getDebugLoc(), <a class="code" href="namespacellvm.html#abfcab32516704f11d146c757f402ad5ca1cde8c8828756cdaf2a93260e247ae31">DS_Warning</a>);</div>
<div class="line"><a name="l05391"></a><span class="lineno"> 5391</span>&#160;    <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;Ctx = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMF().getFunction().getContext();</div>
<div class="line"><a name="l05392"></a><span class="lineno"> 5392</span>&#160;    Ctx.<a class="code" href="classllvm_1_1LLVMContext.html#aad03ef5cfbe6e7cad076d9e45ba06592">diagnose</a>(NoTrap);</div>
<div class="line"><a name="l05393"></a><span class="lineno"> 5393</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05394"></a><span class="lineno"> 5394</span>&#160;    <span class="comment">// Insert debug-trap instruction</span></div>
<div class="line"><a name="l05395"></a><span class="lineno"> 5395</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildInstr(AMDGPU::S_TRAP)</div>
<div class="line"><a name="l05396"></a><span class="lineno"> 5396</span>&#160;        .addImm(<span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span><span class="keyword">&gt;</span>(<a class="code" href="classllvm_1_1GCNSubtarget.html#a80e7aa469ce27c761eef3c645e55ed88a094657b2a471074638cef694d53f50d8">GCNSubtarget::TrapID::LLVMAMDHSADebugTrap</a>));</div>
<div class="line"><a name="l05397"></a><span class="lineno"> 5397</span>&#160;  }</div>
<div class="line"><a name="l05398"></a><span class="lineno"> 5398</span>&#160; </div>
<div class="line"><a name="l05399"></a><span class="lineno"> 5399</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l05400"></a><span class="lineno"> 5400</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05401"></a><span class="lineno"> 5401</span>&#160;}</div>
<div class="line"><a name="l05402"></a><span class="lineno"> 5402</span>&#160; </div>
<div class="line"><a name="l05403"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a94974538095721fcce4cf479555bc25c"> 5403</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a94974538095721fcce4cf479555bc25c">AMDGPULegalizerInfo::legalizeBVHIntrinsic</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l05404"></a><span class="lineno"> 5404</span>&#160;                                               <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l05405"></a><span class="lineno"> 5405</span>&#160;  <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMRI();</div>
<div class="line"><a name="l05406"></a><span class="lineno"> 5406</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S16 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(16);</div>
<div class="line"><a name="l05407"></a><span class="lineno"> 5407</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> S32 = <a class="code" href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">LLT::scalar</a>(32);</div>
<div class="line"><a name="l05408"></a><span class="lineno"> 5408</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> V2S16 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(2, 16);</div>
<div class="line"><a name="l05409"></a><span class="lineno"> 5409</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1LLT.html">LLT</a> V3S32 = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(3, 32);</div>
<div class="line"><a name="l05410"></a><span class="lineno"> 5410</span>&#160; </div>
<div class="line"><a name="l05411"></a><span class="lineno"> 5411</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DstReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg();</div>
<div class="line"><a name="l05412"></a><span class="lineno"> 5412</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> NodePtr = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l05413"></a><span class="lineno"> 5413</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> RayExtent = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getReg();</div>
<div class="line"><a name="l05414"></a><span class="lineno"> 5414</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> RayOrigin = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(4).getReg();</div>
<div class="line"><a name="l05415"></a><span class="lineno"> 5415</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> RayDir = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(5).getReg();</div>
<div class="line"><a name="l05416"></a><span class="lineno"> 5416</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> RayInvDir = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(6).getReg();</div>
<div class="line"><a name="l05417"></a><span class="lineno"> 5417</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> TDescr = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(7).getReg();</div>
<div class="line"><a name="l05418"></a><span class="lineno"> 5418</span>&#160; </div>
<div class="line"><a name="l05419"></a><span class="lineno"> 5419</span>&#160;  <span class="keywordflow">if</span> (!ST.<a class="code" href="classllvm_1_1GCNSubtarget.html#a7bf65bf4917efcfd2afded9f48afcfee">hasGFX10_AEncoding</a>()) {</div>
<div class="line"><a name="l05420"></a><span class="lineno"> 5420</span>&#160;    <a class="code" href="classllvm_1_1DiagnosticInfoUnsupported.html">DiagnosticInfoUnsupported</a> BadIntrin(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMF().getFunction(),</div>
<div class="line"><a name="l05421"></a><span class="lineno"> 5421</span>&#160;                                        <span class="stringliteral">&quot;intrinsic not supported on subtarget&quot;</span>,</div>
<div class="line"><a name="l05422"></a><span class="lineno"> 5422</span>&#160;                                        <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getDebugLoc());</div>
<div class="line"><a name="l05423"></a><span class="lineno"> 5423</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMF().getFunction().getContext().diagnose(BadIntrin);</div>
<div class="line"><a name="l05424"></a><span class="lineno"> 5424</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05425"></a><span class="lineno"> 5425</span>&#160;  }</div>
<div class="line"><a name="l05426"></a><span class="lineno"> 5426</span>&#160; </div>
<div class="line"><a name="l05427"></a><span class="lineno"> 5427</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> IsGFX11Plus = <a class="code" href="namespacellvm_1_1AMDGPU.html#aa5f3cd2ec6af3adbc143654720b1214b">AMDGPU::isGFX11Plus</a>(ST);</div>
<div class="line"><a name="l05428"></a><span class="lineno"> 5428</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> IsA16 = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(RayDir).<a class="code" href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">getElementType</a>().<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() == 16;</div>
<div class="line"><a name="l05429"></a><span class="lineno"> 5429</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> Is64 = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">getType</a>(NodePtr).<a class="code" href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">getSizeInBits</a>() == 64;</div>
<div class="line"><a name="l05430"></a><span class="lineno"> 5430</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> NumVDataDwords = 4;</div>
<div class="line"><a name="l05431"></a><span class="lineno"> 5431</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> NumVAddrDwords = IsA16 ? (Is64 ? 9 : 8) : (Is64 ? 12 : 11);</div>
<div class="line"><a name="l05432"></a><span class="lineno"> 5432</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> NumVAddrs = IsGFX11Plus ? (IsA16 ? 4 : 5) : NumVAddrDwords;</div>
<div class="line"><a name="l05433"></a><span class="lineno"> 5433</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> UseNSA = ST.<a class="code" href="classllvm_1_1GCNSubtarget.html#a90329091d5d23e8a4bac1a2803d252b2">hasNSAEncoding</a>() &amp;&amp; NumVAddrs &lt;= ST.<a class="code" href="classllvm_1_1GCNSubtarget.html#ae1917134ea7a60d6d706cd919e236aae">getNSAMaxSize</a>();</div>
<div class="line"><a name="l05434"></a><span class="lineno"> 5434</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> BaseOpcodes[2][2] = {</div>
<div class="line"><a name="l05435"></a><span class="lineno"> 5435</span>&#160;      {AMDGPU::IMAGE_BVH_INTERSECT_RAY, AMDGPU::IMAGE_BVH_INTERSECT_RAY_a16},</div>
<div class="line"><a name="l05436"></a><span class="lineno"> 5436</span>&#160;      {AMDGPU::IMAGE_BVH64_INTERSECT_RAY,</div>
<div class="line"><a name="l05437"></a><span class="lineno"> 5437</span>&#160;       AMDGPU::IMAGE_BVH64_INTERSECT_RAY_a16}};</div>
<div class="line"><a name="l05438"></a><span class="lineno"> 5438</span>&#160;  <span class="keywordtype">int</span> Opcode;</div>
<div class="line"><a name="l05439"></a><span class="lineno"> 5439</span>&#160;  <span class="keywordflow">if</span> (UseNSA) {</div>
<div class="line"><a name="l05440"></a><span class="lineno"> 5440</span>&#160;    Opcode = <a class="code" href="namespacellvm_1_1AMDGPU.html#a176f799037e98f7743008924c4b72266">AMDGPU::getMIMGOpcode</a>(BaseOpcodes[Is64][IsA16],</div>
<div class="line"><a name="l05441"></a><span class="lineno"> 5441</span>&#160;                                   IsGFX11Plus ? AMDGPU::MIMGEncGfx11NSA</div>
<div class="line"><a name="l05442"></a><span class="lineno"> 5442</span>&#160;                                               : AMDGPU::MIMGEncGfx10NSA,</div>
<div class="line"><a name="l05443"></a><span class="lineno"> 5443</span>&#160;                                   NumVDataDwords, NumVAddrDwords);</div>
<div class="line"><a name="l05444"></a><span class="lineno"> 5444</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05445"></a><span class="lineno"> 5445</span>&#160;    Opcode = <a class="code" href="namespacellvm_1_1AMDGPU.html#a176f799037e98f7743008924c4b72266">AMDGPU::getMIMGOpcode</a>(</div>
<div class="line"><a name="l05446"></a><span class="lineno"> 5446</span>&#160;        BaseOpcodes[Is64][IsA16],</div>
<div class="line"><a name="l05447"></a><span class="lineno"> 5447</span>&#160;        IsGFX11Plus ? AMDGPU::MIMGEncGfx11Default : AMDGPU::MIMGEncGfx10Default,</div>
<div class="line"><a name="l05448"></a><span class="lineno"> 5448</span>&#160;        NumVDataDwords, NumVAddrDwords);</div>
<div class="line"><a name="l05449"></a><span class="lineno"> 5449</span>&#160;  }</div>
<div class="line"><a name="l05450"></a><span class="lineno"> 5450</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Opcode != -1);</div>
<div class="line"><a name="l05451"></a><span class="lineno"> 5451</span>&#160; </div>
<div class="line"><a name="l05452"></a><span class="lineno"> 5452</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Register, 12&gt;</a> Ops;</div>
<div class="line"><a name="l05453"></a><span class="lineno"> 5453</span>&#160;  <span class="keywordflow">if</span> (UseNSA &amp;&amp; IsGFX11Plus) {</div>
<div class="line"><a name="l05454"></a><span class="lineno"> 5454</span>&#160;    <span class="keyword">auto</span> packLanes = [&amp;Ops, &amp;S32, &amp;V3S32, &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>](<a class="code" href="classllvm_1_1Register.html">Register</a> Src) {</div>
<div class="line"><a name="l05455"></a><span class="lineno"> 5455</span>&#160;      <span class="keyword">auto</span> Unmerge = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUnmerge({S32, S32, S32}, Src);</div>
<div class="line"><a name="l05456"></a><span class="lineno"> 5456</span>&#160;      <span class="keyword">auto</span> Merged = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildMergeLikeInstr(</div>
<div class="line"><a name="l05457"></a><span class="lineno"> 5457</span>&#160;          V3S32, {Unmerge.getReg(0), Unmerge.getReg(1), Unmerge.getReg(2)});</div>
<div class="line"><a name="l05458"></a><span class="lineno"> 5458</span>&#160;      Ops.push_back(Merged.getReg(0));</div>
<div class="line"><a name="l05459"></a><span class="lineno"> 5459</span>&#160;    };</div>
<div class="line"><a name="l05460"></a><span class="lineno"> 5460</span>&#160; </div>
<div class="line"><a name="l05461"></a><span class="lineno"> 5461</span>&#160;    Ops.push_back(NodePtr);</div>
<div class="line"><a name="l05462"></a><span class="lineno"> 5462</span>&#160;    Ops.push_back(RayExtent);</div>
<div class="line"><a name="l05463"></a><span class="lineno"> 5463</span>&#160;    packLanes(RayOrigin);</div>
<div class="line"><a name="l05464"></a><span class="lineno"> 5464</span>&#160; </div>
<div class="line"><a name="l05465"></a><span class="lineno"> 5465</span>&#160;    <span class="keywordflow">if</span> (IsA16) {</div>
<div class="line"><a name="l05466"></a><span class="lineno"> 5466</span>&#160;      <span class="keyword">auto</span> UnmergeRayDir = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUnmerge({S16, S16, S16}, RayDir);</div>
<div class="line"><a name="l05467"></a><span class="lineno"> 5467</span>&#160;      <span class="keyword">auto</span> UnmergeRayInvDir = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUnmerge({S16, S16, S16}, RayInvDir);</div>
<div class="line"><a name="l05468"></a><span class="lineno"> 5468</span>&#160;      <span class="keyword">auto</span> MergedDir = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildMergeLikeInstr(</div>
<div class="line"><a name="l05469"></a><span class="lineno"> 5469</span>&#160;          V3S32,</div>
<div class="line"><a name="l05470"></a><span class="lineno"> 5470</span>&#160;          {<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildBitcast(</div>
<div class="line"><a name="l05471"></a><span class="lineno"> 5471</span>&#160;                S32, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildMergeLikeInstr(V2S16, {UnmergeRayInvDir.getReg(0),</div>
<div class="line"><a name="l05472"></a><span class="lineno"> 5472</span>&#160;                                                   UnmergeRayDir.getReg(0)}))</div>
<div class="line"><a name="l05473"></a><span class="lineno"> 5473</span>&#160;               .getReg(0),</div>
<div class="line"><a name="l05474"></a><span class="lineno"> 5474</span>&#160;           <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildBitcast(</div>
<div class="line"><a name="l05475"></a><span class="lineno"> 5475</span>&#160;                S32, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildMergeLikeInstr(V2S16, {UnmergeRayInvDir.getReg(1),</div>
<div class="line"><a name="l05476"></a><span class="lineno"> 5476</span>&#160;                                                   UnmergeRayDir.getReg(1)}))</div>
<div class="line"><a name="l05477"></a><span class="lineno"> 5477</span>&#160;               .getReg(0),</div>
<div class="line"><a name="l05478"></a><span class="lineno"> 5478</span>&#160;           <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildBitcast(</div>
<div class="line"><a name="l05479"></a><span class="lineno"> 5479</span>&#160;                S32, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildMergeLikeInstr(V2S16, {UnmergeRayInvDir.getReg(2),</div>
<div class="line"><a name="l05480"></a><span class="lineno"> 5480</span>&#160;                                                   UnmergeRayDir.getReg(2)}))</div>
<div class="line"><a name="l05481"></a><span class="lineno"> 5481</span>&#160;               .getReg(0)});</div>
<div class="line"><a name="l05482"></a><span class="lineno"> 5482</span>&#160;      Ops.push_back(MergedDir.getReg(0));</div>
<div class="line"><a name="l05483"></a><span class="lineno"> 5483</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05484"></a><span class="lineno"> 5484</span>&#160;      packLanes(RayDir);</div>
<div class="line"><a name="l05485"></a><span class="lineno"> 5485</span>&#160;      packLanes(RayInvDir);</div>
<div class="line"><a name="l05486"></a><span class="lineno"> 5486</span>&#160;    }</div>
<div class="line"><a name="l05487"></a><span class="lineno"> 5487</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05488"></a><span class="lineno"> 5488</span>&#160;    <span class="keywordflow">if</span> (Is64) {</div>
<div class="line"><a name="l05489"></a><span class="lineno"> 5489</span>&#160;      <span class="keyword">auto</span> Unmerge = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUnmerge({S32, S32}, NodePtr);</div>
<div class="line"><a name="l05490"></a><span class="lineno"> 5490</span>&#160;      Ops.push_back(Unmerge.getReg(0));</div>
<div class="line"><a name="l05491"></a><span class="lineno"> 5491</span>&#160;      Ops.push_back(Unmerge.getReg(1));</div>
<div class="line"><a name="l05492"></a><span class="lineno"> 5492</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05493"></a><span class="lineno"> 5493</span>&#160;      Ops.push_back(NodePtr);</div>
<div class="line"><a name="l05494"></a><span class="lineno"> 5494</span>&#160;    }</div>
<div class="line"><a name="l05495"></a><span class="lineno"> 5495</span>&#160;    Ops.push_back(RayExtent);</div>
<div class="line"><a name="l05496"></a><span class="lineno"> 5496</span>&#160; </div>
<div class="line"><a name="l05497"></a><span class="lineno"> 5497</span>&#160;    <span class="keyword">auto</span> packLanes = [&amp;Ops, &amp;S32, &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>](<a class="code" href="classllvm_1_1Register.html">Register</a> Src) {</div>
<div class="line"><a name="l05498"></a><span class="lineno"> 5498</span>&#160;      <span class="keyword">auto</span> Unmerge = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUnmerge({S32, S32, S32}, Src);</div>
<div class="line"><a name="l05499"></a><span class="lineno"> 5499</span>&#160;      Ops.push_back(Unmerge.getReg(0));</div>
<div class="line"><a name="l05500"></a><span class="lineno"> 5500</span>&#160;      Ops.push_back(Unmerge.getReg(1));</div>
<div class="line"><a name="l05501"></a><span class="lineno"> 5501</span>&#160;      Ops.push_back(Unmerge.getReg(2));</div>
<div class="line"><a name="l05502"></a><span class="lineno"> 5502</span>&#160;    };</div>
<div class="line"><a name="l05503"></a><span class="lineno"> 5503</span>&#160; </div>
<div class="line"><a name="l05504"></a><span class="lineno"> 5504</span>&#160;    packLanes(RayOrigin);</div>
<div class="line"><a name="l05505"></a><span class="lineno"> 5505</span>&#160;    <span class="keywordflow">if</span> (IsA16) {</div>
<div class="line"><a name="l05506"></a><span class="lineno"> 5506</span>&#160;      <span class="keyword">auto</span> UnmergeRayDir = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUnmerge({S16, S16, S16}, RayDir);</div>
<div class="line"><a name="l05507"></a><span class="lineno"> 5507</span>&#160;      <span class="keyword">auto</span> UnmergeRayInvDir = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildUnmerge({S16, S16, S16}, RayInvDir);</div>
<div class="line"><a name="l05508"></a><span class="lineno"> 5508</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> R1 = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(S32);</div>
<div class="line"><a name="l05509"></a><span class="lineno"> 5509</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="MathExtras_8h.html#a9211f62d8e1e6de999eaa63ec0f6ae02">R2</a> = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(S32);</div>
<div class="line"><a name="l05510"></a><span class="lineno"> 5510</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> R3 = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">createGenericVirtualRegister</a>(S32);</div>
<div class="line"><a name="l05511"></a><span class="lineno"> 5511</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildMergeLikeInstr(R1,</div>
<div class="line"><a name="l05512"></a><span class="lineno"> 5512</span>&#160;                            {UnmergeRayDir.getReg(0), UnmergeRayDir.getReg(1)});</div>
<div class="line"><a name="l05513"></a><span class="lineno"> 5513</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildMergeLikeInstr(</div>
<div class="line"><a name="l05514"></a><span class="lineno"> 5514</span>&#160;          <a class="code" href="MathExtras_8h.html#a9211f62d8e1e6de999eaa63ec0f6ae02">R2</a>, {UnmergeRayDir.getReg(2), UnmergeRayInvDir.getReg(0)});</div>
<div class="line"><a name="l05515"></a><span class="lineno"> 5515</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildMergeLikeInstr(</div>
<div class="line"><a name="l05516"></a><span class="lineno"> 5516</span>&#160;          R3, {UnmergeRayInvDir.getReg(1), UnmergeRayInvDir.getReg(2)});</div>
<div class="line"><a name="l05517"></a><span class="lineno"> 5517</span>&#160;      Ops.push_back(R1);</div>
<div class="line"><a name="l05518"></a><span class="lineno"> 5518</span>&#160;      Ops.push_back(<a class="code" href="MathExtras_8h.html#a9211f62d8e1e6de999eaa63ec0f6ae02">R2</a>);</div>
<div class="line"><a name="l05519"></a><span class="lineno"> 5519</span>&#160;      Ops.push_back(R3);</div>
<div class="line"><a name="l05520"></a><span class="lineno"> 5520</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05521"></a><span class="lineno"> 5521</span>&#160;      packLanes(RayDir);</div>
<div class="line"><a name="l05522"></a><span class="lineno"> 5522</span>&#160;      packLanes(RayInvDir);</div>
<div class="line"><a name="l05523"></a><span class="lineno"> 5523</span>&#160;    }</div>
<div class="line"><a name="l05524"></a><span class="lineno"> 5524</span>&#160;  }</div>
<div class="line"><a name="l05525"></a><span class="lineno"> 5525</span>&#160; </div>
<div class="line"><a name="l05526"></a><span class="lineno"> 5526</span>&#160;  <span class="keywordflow">if</span> (!UseNSA) {</div>
<div class="line"><a name="l05527"></a><span class="lineno"> 5527</span>&#160;    <span class="comment">// Build a single vector containing all the operands so far prepared.</span></div>
<div class="line"><a name="l05528"></a><span class="lineno"> 5528</span>&#160;    <a class="code" href="classllvm_1_1LLT.html">LLT</a> OpTy = <a class="code" href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">LLT::fixed_vector</a>(Ops.size(), 32);</div>
<div class="line"><a name="l05529"></a><span class="lineno"> 5529</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> MergedOps = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildMergeLikeInstr(OpTy, Ops).getReg(0);</div>
<div class="line"><a name="l05530"></a><span class="lineno"> 5530</span>&#160;    Ops.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div>
<div class="line"><a name="l05531"></a><span class="lineno"> 5531</span>&#160;    Ops.push_back(MergedOps);</div>
<div class="line"><a name="l05532"></a><span class="lineno"> 5532</span>&#160;  }</div>
<div class="line"><a name="l05533"></a><span class="lineno"> 5533</span>&#160; </div>
<div class="line"><a name="l05534"></a><span class="lineno"> 5534</span>&#160;  <span class="keyword">auto</span> MIB = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildInstr(AMDGPU::G_AMDGPU_INTRIN_BVH_INTERSECT_RAY)</div>
<div class="line"><a name="l05535"></a><span class="lineno"> 5535</span>&#160;    .addDef(DstReg)</div>
<div class="line"><a name="l05536"></a><span class="lineno"> 5536</span>&#160;    .addImm(Opcode);</div>
<div class="line"><a name="l05537"></a><span class="lineno"> 5537</span>&#160; </div>
<div class="line"><a name="l05538"></a><span class="lineno"> 5538</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Register.html">Register</a> R : Ops) {</div>
<div class="line"><a name="l05539"></a><span class="lineno"> 5539</span>&#160;    MIB.addUse(R);</div>
<div class="line"><a name="l05540"></a><span class="lineno"> 5540</span>&#160;  }</div>
<div class="line"><a name="l05541"></a><span class="lineno"> 5541</span>&#160; </div>
<div class="line"><a name="l05542"></a><span class="lineno"> 5542</span>&#160;  MIB.addUse(TDescr)</div>
<div class="line"><a name="l05543"></a><span class="lineno"> 5543</span>&#160;     .addImm(IsA16 ? 1 : 0)</div>
<div class="line"><a name="l05544"></a><span class="lineno"> 5544</span>&#160;     .cloneMemRefs(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l05545"></a><span class="lineno"> 5545</span>&#160; </div>
<div class="line"><a name="l05546"></a><span class="lineno"> 5546</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l05547"></a><span class="lineno"> 5547</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05548"></a><span class="lineno"> 5548</span>&#160;}</div>
<div class="line"><a name="l05549"></a><span class="lineno"> 5549</span>&#160; </div>
<div class="line"><a name="l05550"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a07267e1f318ef8357bce5a08d60f78de"> 5550</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a07267e1f318ef8357bce5a08d60f78de">AMDGPULegalizerInfo::legalizeFPTruncRound</a>(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l05551"></a><span class="lineno"> 5551</span>&#160;                                               <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l05552"></a><span class="lineno"> 5552</span>&#160;  <span class="keywordtype">unsigned</span> Opc;</div>
<div class="line"><a name="l05553"></a><span class="lineno"> 5553</span>&#160;  <span class="keywordtype">int</span> RoundMode = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getImm();</div>
<div class="line"><a name="l05554"></a><span class="lineno"> 5554</span>&#160; </div>
<div class="line"><a name="l05555"></a><span class="lineno"> 5555</span>&#160;  <span class="keywordflow">if</span> (RoundMode == (<span class="keywordtype">int</span>)<a class="code" href="namespacellvm.html#ab7af0c09900daed62bbdb01dba180f7ca9f5fca8e6c87d7107d7203b4c2ccd1af">RoundingMode::TowardPositive</a>)</div>
<div class="line"><a name="l05556"></a><span class="lineno"> 5556</span>&#160;    Opc = AMDGPU::G_FPTRUNC_ROUND_UPWARD;</div>
<div class="line"><a name="l05557"></a><span class="lineno"> 5557</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (RoundMode == (<span class="keywordtype">int</span>)<a class="code" href="namespacellvm.html#ab7af0c09900daed62bbdb01dba180f7cacd6fee581a325642b84f1af5c0be5140">RoundingMode::TowardNegative</a>)</div>
<div class="line"><a name="l05558"></a><span class="lineno"> 5558</span>&#160;    Opc = AMDGPU::G_FPTRUNC_ROUND_DOWNWARD;</div>
<div class="line"><a name="l05559"></a><span class="lineno"> 5559</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l05560"></a><span class="lineno"> 5560</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05561"></a><span class="lineno"> 5561</span>&#160; </div>
<div class="line"><a name="l05562"></a><span class="lineno"> 5562</span>&#160;  <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildInstr(Opc)</div>
<div class="line"><a name="l05563"></a><span class="lineno"> 5563</span>&#160;      .addDef(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg())</div>
<div class="line"><a name="l05564"></a><span class="lineno"> 5564</span>&#160;      .addUse(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg());</div>
<div class="line"><a name="l05565"></a><span class="lineno"> 5565</span>&#160; </div>
<div class="line"><a name="l05566"></a><span class="lineno"> 5566</span>&#160;  <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l05567"></a><span class="lineno"> 5567</span>&#160; </div>
<div class="line"><a name="l05568"></a><span class="lineno"> 5568</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05569"></a><span class="lineno"> 5569</span>&#160;}</div>
<div class="line"><a name="l05570"></a><span class="lineno"> 5570</span>&#160; </div>
<div class="line"><a name="l05571"></a><span class="lineno"><a class="line" href="classllvm_1_1AMDGPULegalizerInfo.html#a5892da00df1f8fb432eab72498344583"> 5571</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a5892da00df1f8fb432eab72498344583">AMDGPULegalizerInfo::legalizeIntrinsic</a>(<a class="code" href="classllvm_1_1LegalizerHelper.html">LegalizerHelper</a> &amp;Helper,</div>
<div class="line"><a name="l05572"></a><span class="lineno"> 5572</span>&#160;                                            <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l05573"></a><span class="lineno"> 5573</span>&#160;  <a class="code" href="classllvm_1_1MachineIRBuilder.html">MachineIRBuilder</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> = Helper.<a class="code" href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">MIRBuilder</a>;</div>
<div class="line"><a name="l05574"></a><span class="lineno"> 5574</span>&#160;  <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMRI();</div>
<div class="line"><a name="l05575"></a><span class="lineno"> 5575</span>&#160; </div>
<div class="line"><a name="l05576"></a><span class="lineno"> 5576</span>&#160;  <span class="comment">// Replace the use G_BRCOND with the exec manipulate and branch pseudos.</span></div>
<div class="line"><a name="l05577"></a><span class="lineno"> 5577</span>&#160;  <span class="keyword">auto</span> IntrID = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getIntrinsicID();</div>
<div class="line"><a name="l05578"></a><span class="lineno"> 5578</span>&#160;  <span class="keywordflow">switch</span> (IntrID) {</div>
<div class="line"><a name="l05579"></a><span class="lineno"> 5579</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_if:</div>
<div class="line"><a name="l05580"></a><span class="lineno"> 5580</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_else: {</div>
<div class="line"><a name="l05581"></a><span class="lineno"> 5581</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *Br = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l05582"></a><span class="lineno"> 5582</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *UncondBrTarget = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l05583"></a><span class="lineno"> 5583</span>&#160;    <span class="keywordtype">bool</span> Negated = <span class="keyword">false</span>;</div>
<div class="line"><a name="l05584"></a><span class="lineno"> 5584</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *BrCond =</div>
<div class="line"><a name="l05585"></a><span class="lineno"> 5585</span>&#160;            <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a4f88913d78dbe180ac456ab4777dea86">verifyCFIntrinsic</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, Br, UncondBrTarget, Negated)) {</div>
<div class="line"><a name="l05586"></a><span class="lineno"> 5586</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1SIRegisterInfo.html">SIRegisterInfo</a> *<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a></div>
<div class="line"><a name="l05587"></a><span class="lineno"> 5587</span>&#160;        = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classllvm_1_1SIRegisterInfo.html">SIRegisterInfo</a> *<span class="keyword">&gt;</span>(<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#aed4562ccf898feaf2eb6cf5555b5084d">getTargetRegisterInfo</a>());</div>
<div class="line"><a name="l05588"></a><span class="lineno"> 5588</span>&#160; </div>
<div class="line"><a name="l05589"></a><span class="lineno"> 5589</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l05590"></a><span class="lineno"> 5590</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="classllvm_1_1Use.html">Use</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getReg();</div>
<div class="line"><a name="l05591"></a><span class="lineno"> 5591</span>&#160; </div>
<div class="line"><a name="l05592"></a><span class="lineno"> 5592</span>&#160;      <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *CondBrTarget = BrCond-&gt;getOperand(1).getMBB();</div>
<div class="line"><a name="l05593"></a><span class="lineno"> 5593</span>&#160; </div>
<div class="line"><a name="l05594"></a><span class="lineno"> 5594</span>&#160;      <span class="keywordflow">if</span> (Negated)</div>
<div class="line"><a name="l05595"></a><span class="lineno"> 5595</span>&#160;        <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(CondBrTarget, UncondBrTarget);</div>
<div class="line"><a name="l05596"></a><span class="lineno"> 5596</span>&#160; </div>
<div class="line"><a name="l05597"></a><span class="lineno"> 5597</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.setInsertPt(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMBB(), BrCond-&gt;getIterator());</div>
<div class="line"><a name="l05598"></a><span class="lineno"> 5598</span>&#160;      <span class="keywordflow">if</span> (IntrID == Intrinsic::amdgcn_if) {</div>
<div class="line"><a name="l05599"></a><span class="lineno"> 5599</span>&#160;        <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildInstr(AMDGPU::SI_IF)</div>
<div class="line"><a name="l05600"></a><span class="lineno"> 5600</span>&#160;          .addDef(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>)</div>
<div class="line"><a name="l05601"></a><span class="lineno"> 5601</span>&#160;          .addUse(<a class="code" href="classllvm_1_1Use.html">Use</a>)</div>
<div class="line"><a name="l05602"></a><span class="lineno"> 5602</span>&#160;          .addMBB(UncondBrTarget);</div>
<div class="line"><a name="l05603"></a><span class="lineno"> 5603</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05604"></a><span class="lineno"> 5604</span>&#160;        <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildInstr(AMDGPU::SI_ELSE)</div>
<div class="line"><a name="l05605"></a><span class="lineno"> 5605</span>&#160;            .addDef(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>)</div>
<div class="line"><a name="l05606"></a><span class="lineno"> 5606</span>&#160;            .addUse(<a class="code" href="classllvm_1_1Use.html">Use</a>)</div>
<div class="line"><a name="l05607"></a><span class="lineno"> 5607</span>&#160;            .addMBB(UncondBrTarget);</div>
<div class="line"><a name="l05608"></a><span class="lineno"> 5608</span>&#160;      }</div>
<div class="line"><a name="l05609"></a><span class="lineno"> 5609</span>&#160; </div>
<div class="line"><a name="l05610"></a><span class="lineno"> 5610</span>&#160;      <span class="keywordflow">if</span> (Br) {</div>
<div class="line"><a name="l05611"></a><span class="lineno"> 5611</span>&#160;        Br-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">getOperand</a>(0).<a class="code" href="classllvm_1_1MachineOperand.html#a98e9c9e8ef7cbb6c4aa89a38f21decfa">setMBB</a>(CondBrTarget);</div>
<div class="line"><a name="l05612"></a><span class="lineno"> 5612</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l05613"></a><span class="lineno"> 5613</span>&#160;        <span class="comment">// The IRTranslator skips inserting the G_BR for fallthrough cases, but</span></div>
<div class="line"><a name="l05614"></a><span class="lineno"> 5614</span>&#160;        <span class="comment">// since we&#39;re swapping branch targets it needs to be reinserted.</span></div>
<div class="line"><a name="l05615"></a><span class="lineno"> 5615</span>&#160;        <span class="comment">// FIXME: IRTranslator should probably not do this</span></div>
<div class="line"><a name="l05616"></a><span class="lineno"> 5616</span>&#160;        <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildBr(*CondBrTarget);</div>
<div class="line"><a name="l05617"></a><span class="lineno"> 5617</span>&#160;      }</div>
<div class="line"><a name="l05618"></a><span class="lineno"> 5618</span>&#160; </div>
<div class="line"><a name="l05619"></a><span class="lineno"> 5619</span>&#160;      <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a965a15cef77a97f0e17f9f26fd5be53e">setRegClass</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>, <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>-&gt;getWaveMaskRegClass());</div>
<div class="line"><a name="l05620"></a><span class="lineno"> 5620</span>&#160;      <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a965a15cef77a97f0e17f9f26fd5be53e">setRegClass</a>(<a class="code" href="classllvm_1_1Use.html">Use</a>, <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>-&gt;getWaveMaskRegClass());</div>
<div class="line"><a name="l05621"></a><span class="lineno"> 5621</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l05622"></a><span class="lineno"> 5622</span>&#160;      BrCond-&gt;eraseFromParent();</div>
<div class="line"><a name="l05623"></a><span class="lineno"> 5623</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05624"></a><span class="lineno"> 5624</span>&#160;    }</div>
<div class="line"><a name="l05625"></a><span class="lineno"> 5625</span>&#160; </div>
<div class="line"><a name="l05626"></a><span class="lineno"> 5626</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05627"></a><span class="lineno"> 5627</span>&#160;  }</div>
<div class="line"><a name="l05628"></a><span class="lineno"> 5628</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_loop: {</div>
<div class="line"><a name="l05629"></a><span class="lineno"> 5629</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *Br = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l05630"></a><span class="lineno"> 5630</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *UncondBrTarget = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l05631"></a><span class="lineno"> 5631</span>&#160;    <span class="keywordtype">bool</span> Negated = <span class="keyword">false</span>;</div>
<div class="line"><a name="l05632"></a><span class="lineno"> 5632</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *BrCond =</div>
<div class="line"><a name="l05633"></a><span class="lineno"> 5633</span>&#160;            <a class="code" href="AMDGPULegalizerInfo_8cpp.html#a4f88913d78dbe180ac456ab4777dea86">verifyCFIntrinsic</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, Br, UncondBrTarget, Negated)) {</div>
<div class="line"><a name="l05634"></a><span class="lineno"> 5634</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1SIRegisterInfo.html">SIRegisterInfo</a> *<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a></div>
<div class="line"><a name="l05635"></a><span class="lineno"> 5635</span>&#160;        = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classllvm_1_1SIRegisterInfo.html">SIRegisterInfo</a> *<span class="keyword">&gt;</span>(<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#aed4562ccf898feaf2eb6cf5555b5084d">getTargetRegisterInfo</a>());</div>
<div class="line"><a name="l05636"></a><span class="lineno"> 5636</span>&#160; </div>
<div class="line"><a name="l05637"></a><span class="lineno"> 5637</span>&#160;      <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *CondBrTarget = BrCond-&gt;getOperand(1).getMBB();</div>
<div class="line"><a name="l05638"></a><span class="lineno"> 5638</span>&#160;      <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getReg();</div>
<div class="line"><a name="l05639"></a><span class="lineno"> 5639</span>&#160; </div>
<div class="line"><a name="l05640"></a><span class="lineno"> 5640</span>&#160;      <span class="keywordflow">if</span> (Negated)</div>
<div class="line"><a name="l05641"></a><span class="lineno"> 5641</span>&#160;        <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(CondBrTarget, UncondBrTarget);</div>
<div class="line"><a name="l05642"></a><span class="lineno"> 5642</span>&#160; </div>
<div class="line"><a name="l05643"></a><span class="lineno"> 5643</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.setInsertPt(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMBB(), BrCond-&gt;getIterator());</div>
<div class="line"><a name="l05644"></a><span class="lineno"> 5644</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildInstr(AMDGPU::SI_LOOP)</div>
<div class="line"><a name="l05645"></a><span class="lineno"> 5645</span>&#160;        .addUse(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>)</div>
<div class="line"><a name="l05646"></a><span class="lineno"> 5646</span>&#160;        .addMBB(UncondBrTarget);</div>
<div class="line"><a name="l05647"></a><span class="lineno"> 5647</span>&#160; </div>
<div class="line"><a name="l05648"></a><span class="lineno"> 5648</span>&#160;      <span class="keywordflow">if</span> (Br)</div>
<div class="line"><a name="l05649"></a><span class="lineno"> 5649</span>&#160;        Br-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">getOperand</a>(0).<a class="code" href="classllvm_1_1MachineOperand.html#a98e9c9e8ef7cbb6c4aa89a38f21decfa">setMBB</a>(CondBrTarget);</div>
<div class="line"><a name="l05650"></a><span class="lineno"> 5650</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l05651"></a><span class="lineno"> 5651</span>&#160;        <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildBr(*CondBrTarget);</div>
<div class="line"><a name="l05652"></a><span class="lineno"> 5652</span>&#160; </div>
<div class="line"><a name="l05653"></a><span class="lineno"> 5653</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l05654"></a><span class="lineno"> 5654</span>&#160;      BrCond-&gt;eraseFromParent();</div>
<div class="line"><a name="l05655"></a><span class="lineno"> 5655</span>&#160;      <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a965a15cef77a97f0e17f9f26fd5be53e">setRegClass</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>, <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>-&gt;getWaveMaskRegClass());</div>
<div class="line"><a name="l05656"></a><span class="lineno"> 5656</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05657"></a><span class="lineno"> 5657</span>&#160;    }</div>
<div class="line"><a name="l05658"></a><span class="lineno"> 5658</span>&#160; </div>
<div class="line"><a name="l05659"></a><span class="lineno"> 5659</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l05660"></a><span class="lineno"> 5660</span>&#160;  }</div>
<div class="line"><a name="l05661"></a><span class="lineno"> 5661</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_kernarg_segment_ptr:</div>
<div class="line"><a name="l05662"></a><span class="lineno"> 5662</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1AMDGPU.html#a3cc437d6699fb55c69e78b5d0cad641d">AMDGPU::isKernel</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.getMF().getFunction().getCallingConv())) {</div>
<div class="line"><a name="l05663"></a><span class="lineno"> 5663</span>&#160;      <span class="comment">// This only makes sense to call in a kernel, so just lower to null.</span></div>
<div class="line"><a name="l05664"></a><span class="lineno"> 5664</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg(), 0);</div>
<div class="line"><a name="l05665"></a><span class="lineno"> 5665</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l05666"></a><span class="lineno"> 5666</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05667"></a><span class="lineno"> 5667</span>&#160;    }</div>
<div class="line"><a name="l05668"></a><span class="lineno"> 5668</span>&#160; </div>
<div class="line"><a name="l05669"></a><span class="lineno"> 5669</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a59e8a7f7af57ac84f0bfa83a2e6cd4c3">legalizePreloadedArgIntrin</a>(</div>
<div class="line"><a name="l05670"></a><span class="lineno"> 5670</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="structllvm_1_1AMDGPUFunctionArgInfo.html#a0e789059bf7f286b7f6bc75b43aac98baf32f3fd30ae548866dc7e45092dd90b9">AMDGPUFunctionArgInfo::KERNARG_SEGMENT_PTR</a>);</div>
<div class="line"><a name="l05671"></a><span class="lineno"> 5671</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_implicitarg_ptr:</div>
<div class="line"><a name="l05672"></a><span class="lineno"> 5672</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a8bc1455f0ec29a33f76adecf8e668af8">legalizeImplicitArgPtr</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l05673"></a><span class="lineno"> 5673</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_workitem_id_x:</div>
<div class="line"><a name="l05674"></a><span class="lineno"> 5674</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#af7e4619611fab877c69f6ec0a1d57525">legalizeWorkitemIDIntrinsic</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, 0,</div>
<div class="line"><a name="l05675"></a><span class="lineno"> 5675</span>&#160;                                       <a class="code" href="structllvm_1_1AMDGPUFunctionArgInfo.html#a0e789059bf7f286b7f6bc75b43aac98baed4ee8d30a77bb954964f9910e8cdcb6">AMDGPUFunctionArgInfo::WORKITEM_ID_X</a>);</div>
<div class="line"><a name="l05676"></a><span class="lineno"> 5676</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_workitem_id_y:</div>
<div class="line"><a name="l05677"></a><span class="lineno"> 5677</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#af7e4619611fab877c69f6ec0a1d57525">legalizeWorkitemIDIntrinsic</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, 1,</div>
<div class="line"><a name="l05678"></a><span class="lineno"> 5678</span>&#160;                                       <a class="code" href="structllvm_1_1AMDGPUFunctionArgInfo.html#a0e789059bf7f286b7f6bc75b43aac98ba99b2fc1acb49563d2e3ad89278385103">AMDGPUFunctionArgInfo::WORKITEM_ID_Y</a>);</div>
<div class="line"><a name="l05679"></a><span class="lineno"> 5679</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_workitem_id_z:</div>
<div class="line"><a name="l05680"></a><span class="lineno"> 5680</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#af7e4619611fab877c69f6ec0a1d57525">legalizeWorkitemIDIntrinsic</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, 2,</div>
<div class="line"><a name="l05681"></a><span class="lineno"> 5681</span>&#160;                                       <a class="code" href="structllvm_1_1AMDGPUFunctionArgInfo.html#a0e789059bf7f286b7f6bc75b43aac98baeefc8c0370c3704fada7f546da0b6086">AMDGPUFunctionArgInfo::WORKITEM_ID_Z</a>);</div>
<div class="line"><a name="l05682"></a><span class="lineno"> 5682</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_workgroup_id_x:</div>
<div class="line"><a name="l05683"></a><span class="lineno"> 5683</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a59e8a7f7af57ac84f0bfa83a2e6cd4c3">legalizePreloadedArgIntrin</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,</div>
<div class="line"><a name="l05684"></a><span class="lineno"> 5684</span>&#160;                                      <a class="code" href="structllvm_1_1AMDGPUFunctionArgInfo.html#a0e789059bf7f286b7f6bc75b43aac98bac8cd3961f0697f74c890c302ff8cd370">AMDGPUFunctionArgInfo::WORKGROUP_ID_X</a>);</div>
<div class="line"><a name="l05685"></a><span class="lineno"> 5685</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_workgroup_id_y:</div>
<div class="line"><a name="l05686"></a><span class="lineno"> 5686</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a59e8a7f7af57ac84f0bfa83a2e6cd4c3">legalizePreloadedArgIntrin</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,</div>
<div class="line"><a name="l05687"></a><span class="lineno"> 5687</span>&#160;                                      <a class="code" href="structllvm_1_1AMDGPUFunctionArgInfo.html#a0e789059bf7f286b7f6bc75b43aac98ba9df85a25300bb504ac893643b387629b">AMDGPUFunctionArgInfo::WORKGROUP_ID_Y</a>);</div>
<div class="line"><a name="l05688"></a><span class="lineno"> 5688</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_workgroup_id_z:</div>
<div class="line"><a name="l05689"></a><span class="lineno"> 5689</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a59e8a7f7af57ac84f0bfa83a2e6cd4c3">legalizePreloadedArgIntrin</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,</div>
<div class="line"><a name="l05690"></a><span class="lineno"> 5690</span>&#160;                                      <a class="code" href="structllvm_1_1AMDGPUFunctionArgInfo.html#a0e789059bf7f286b7f6bc75b43aac98baf438f1c55b41dc280fcc1d3455a5c741">AMDGPUFunctionArgInfo::WORKGROUP_ID_Z</a>);</div>
<div class="line"><a name="l05691"></a><span class="lineno"> 5691</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_lds_kernel_id:</div>
<div class="line"><a name="l05692"></a><span class="lineno"> 5692</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a59e8a7f7af57ac84f0bfa83a2e6cd4c3">legalizePreloadedArgIntrin</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,</div>
<div class="line"><a name="l05693"></a><span class="lineno"> 5693</span>&#160;                                      <a class="code" href="structllvm_1_1AMDGPUFunctionArgInfo.html#a0e789059bf7f286b7f6bc75b43aac98ba20d047732dd4b74606c9c63280727fa3">AMDGPUFunctionArgInfo::LDS_KERNEL_ID</a>);</div>
<div class="line"><a name="l05694"></a><span class="lineno"> 5694</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_dispatch_ptr:</div>
<div class="line"><a name="l05695"></a><span class="lineno"> 5695</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a59e8a7f7af57ac84f0bfa83a2e6cd4c3">legalizePreloadedArgIntrin</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,</div>
<div class="line"><a name="l05696"></a><span class="lineno"> 5696</span>&#160;                                      <a class="code" href="structllvm_1_1AMDGPUFunctionArgInfo.html#a0e789059bf7f286b7f6bc75b43aac98bac637a232c5c5f79fa806ae4958a1ff2a">AMDGPUFunctionArgInfo::DISPATCH_PTR</a>);</div>
<div class="line"><a name="l05697"></a><span class="lineno"> 5697</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_queue_ptr:</div>
<div class="line"><a name="l05698"></a><span class="lineno"> 5698</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a59e8a7f7af57ac84f0bfa83a2e6cd4c3">legalizePreloadedArgIntrin</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,</div>
<div class="line"><a name="l05699"></a><span class="lineno"> 5699</span>&#160;                                      <a class="code" href="structllvm_1_1AMDGPUFunctionArgInfo.html#a0e789059bf7f286b7f6bc75b43aac98ba32b5333e2f708d7eeb05c12e415b8fd4">AMDGPUFunctionArgInfo::QUEUE_PTR</a>);</div>
<div class="line"><a name="l05700"></a><span class="lineno"> 5700</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_implicit_buffer_ptr:</div>
<div class="line"><a name="l05701"></a><span class="lineno"> 5701</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a59e8a7f7af57ac84f0bfa83a2e6cd4c3">legalizePreloadedArgIntrin</a>(</div>
<div class="line"><a name="l05702"></a><span class="lineno"> 5702</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="structllvm_1_1AMDGPUFunctionArgInfo.html#a0e789059bf7f286b7f6bc75b43aac98bacc30be6da6e4621e76201b6ee1b7d2ac">AMDGPUFunctionArgInfo::IMPLICIT_BUFFER_PTR</a>);</div>
<div class="line"><a name="l05703"></a><span class="lineno"> 5703</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_dispatch_id:</div>
<div class="line"><a name="l05704"></a><span class="lineno"> 5704</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a59e8a7f7af57ac84f0bfa83a2e6cd4c3">legalizePreloadedArgIntrin</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,</div>
<div class="line"><a name="l05705"></a><span class="lineno"> 5705</span>&#160;                                      <a class="code" href="structllvm_1_1AMDGPUFunctionArgInfo.html#a0e789059bf7f286b7f6bc75b43aac98bab51517a3febb0cdc35645334784ff805">AMDGPUFunctionArgInfo::DISPATCH_ID</a>);</div>
<div class="line"><a name="l05706"></a><span class="lineno"> 5706</span>&#160;  <span class="keywordflow">case</span> Intrinsic::r600_read_ngroups_x:</div>
<div class="line"><a name="l05707"></a><span class="lineno"> 5707</span>&#160;    <span class="comment">// TODO: Emit error for hsa</span></div>
<div class="line"><a name="l05708"></a><span class="lineno"> 5708</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#acd7e869bdfe172fce447a9d289343d1a">legalizeKernargMemParameter</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,</div>
<div class="line"><a name="l05709"></a><span class="lineno"> 5709</span>&#160;                                       <a class="code" href="namespacellvm_1_1SI_1_1KernelInputOffsets.html#a58b4eae4b0a45d478c7c0f3959b04612a857fe4edfc845f9b0eee86ace55971c8">SI::KernelInputOffsets::NGROUPS_X</a>);</div>
<div class="line"><a name="l05710"></a><span class="lineno"> 5710</span>&#160;  <span class="keywordflow">case</span> Intrinsic::r600_read_ngroups_y:</div>
<div class="line"><a name="l05711"></a><span class="lineno"> 5711</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#acd7e869bdfe172fce447a9d289343d1a">legalizeKernargMemParameter</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,</div>
<div class="line"><a name="l05712"></a><span class="lineno"> 5712</span>&#160;                                       <a class="code" href="namespacellvm_1_1SI_1_1KernelInputOffsets.html#a58b4eae4b0a45d478c7c0f3959b04612a114e8b572de0ca0a14b4beec74337b9f">SI::KernelInputOffsets::NGROUPS_Y</a>);</div>
<div class="line"><a name="l05713"></a><span class="lineno"> 5713</span>&#160;  <span class="keywordflow">case</span> Intrinsic::r600_read_ngroups_z:</div>
<div class="line"><a name="l05714"></a><span class="lineno"> 5714</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#acd7e869bdfe172fce447a9d289343d1a">legalizeKernargMemParameter</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,</div>
<div class="line"><a name="l05715"></a><span class="lineno"> 5715</span>&#160;                                       <a class="code" href="namespacellvm_1_1SI_1_1KernelInputOffsets.html#a58b4eae4b0a45d478c7c0f3959b04612a50479b16c92722ed623d81fe63879639">SI::KernelInputOffsets::NGROUPS_Z</a>);</div>
<div class="line"><a name="l05716"></a><span class="lineno"> 5716</span>&#160;  <span class="keywordflow">case</span> Intrinsic::r600_read_local_size_x:</div>
<div class="line"><a name="l05717"></a><span class="lineno"> 5717</span>&#160;    <span class="comment">// TODO: Could insert G_ASSERT_ZEXT from s16</span></div>
<div class="line"><a name="l05718"></a><span class="lineno"> 5718</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#acd7e869bdfe172fce447a9d289343d1a">legalizeKernargMemParameter</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1SI_1_1KernelInputOffsets.html#a58b4eae4b0a45d478c7c0f3959b04612aad70bdccb9143514e90e2ffed213e4ae">SI::KernelInputOffsets::LOCAL_SIZE_X</a>);</div>
<div class="line"><a name="l05719"></a><span class="lineno"> 5719</span>&#160;  <span class="keywordflow">case</span> Intrinsic::r600_read_local_size_y:</div>
<div class="line"><a name="l05720"></a><span class="lineno"> 5720</span>&#160;    <span class="comment">// TODO: Could insert G_ASSERT_ZEXT from s16</span></div>
<div class="line"><a name="l05721"></a><span class="lineno"> 5721</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#acd7e869bdfe172fce447a9d289343d1a">legalizeKernargMemParameter</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>,  <a class="code" href="namespacellvm_1_1SI_1_1KernelInputOffsets.html#a58b4eae4b0a45d478c7c0f3959b04612a89d4956fc6fdfd046ec5650281c75e6b">SI::KernelInputOffsets::LOCAL_SIZE_Y</a>);</div>
<div class="line"><a name="l05722"></a><span class="lineno"> 5722</span>&#160;    <span class="comment">// TODO: Could insert G_ASSERT_ZEXT from s16</span></div>
<div class="line"><a name="l05723"></a><span class="lineno"> 5723</span>&#160;  <span class="keywordflow">case</span> Intrinsic::r600_read_local_size_z:</div>
<div class="line"><a name="l05724"></a><span class="lineno"> 5724</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#acd7e869bdfe172fce447a9d289343d1a">legalizeKernargMemParameter</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1SI_1_1KernelInputOffsets.html#a58b4eae4b0a45d478c7c0f3959b04612a8397b2e7a714eebb964c86930299ba2e">SI::KernelInputOffsets::LOCAL_SIZE_Z</a>);</div>
<div class="line"><a name="l05725"></a><span class="lineno"> 5725</span>&#160;  <span class="keywordflow">case</span> Intrinsic::r600_read_global_size_x:</div>
<div class="line"><a name="l05726"></a><span class="lineno"> 5726</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#acd7e869bdfe172fce447a9d289343d1a">legalizeKernargMemParameter</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1SI_1_1KernelInputOffsets.html#a58b4eae4b0a45d478c7c0f3959b04612acaf6a7dc31f80148ce9ad3eaa8871db2">SI::KernelInputOffsets::GLOBAL_SIZE_X</a>);</div>
<div class="line"><a name="l05727"></a><span class="lineno"> 5727</span>&#160;  <span class="keywordflow">case</span> Intrinsic::r600_read_global_size_y:</div>
<div class="line"><a name="l05728"></a><span class="lineno"> 5728</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#acd7e869bdfe172fce447a9d289343d1a">legalizeKernargMemParameter</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1SI_1_1KernelInputOffsets.html#a58b4eae4b0a45d478c7c0f3959b04612aa0fc2d47a80ef17faaee718a2659384d">SI::KernelInputOffsets::GLOBAL_SIZE_Y</a>);</div>
<div class="line"><a name="l05729"></a><span class="lineno"> 5729</span>&#160;  <span class="keywordflow">case</span> Intrinsic::r600_read_global_size_z:</div>
<div class="line"><a name="l05730"></a><span class="lineno"> 5730</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#acd7e869bdfe172fce447a9d289343d1a">legalizeKernargMemParameter</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1SI_1_1KernelInputOffsets.html#a58b4eae4b0a45d478c7c0f3959b04612a517d5b2e170532fbf6c01d5b69d7b7d6">SI::KernelInputOffsets::GLOBAL_SIZE_Z</a>);</div>
<div class="line"><a name="l05731"></a><span class="lineno"> 5731</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_fdiv_fast:</div>
<div class="line"><a name="l05732"></a><span class="lineno"> 5732</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a6f737d47e92bb08927c272b12fba32d8">legalizeFDIVFastIntrin</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l05733"></a><span class="lineno"> 5733</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_is_shared:</div>
<div class="line"><a name="l05734"></a><span class="lineno"> 5734</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a1a1ef8cdc87d83bb4e114e897e86d58c">legalizeIsAddrSpace</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3fa77b1c964e2ff99057bf5e75140457abe">AMDGPUAS::LOCAL_ADDRESS</a>);</div>
<div class="line"><a name="l05735"></a><span class="lineno"> 5735</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_is_private:</div>
<div class="line"><a name="l05736"></a><span class="lineno"> 5736</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a1a1ef8cdc87d83bb4e114e897e86d58c">legalizeIsAddrSpace</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3faec164f45437d8827346f2d8ec645479a">AMDGPUAS::PRIVATE_ADDRESS</a>);</div>
<div class="line"><a name="l05737"></a><span class="lineno"> 5737</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_wavefrontsize: {</div>
<div class="line"><a name="l05738"></a><span class="lineno"> 5738</span>&#160;    <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>.buildConstant(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0), ST.<a class="code" href="classllvm_1_1AMDGPUSubtarget.html#ae66cd705df2870244a05921f551ff131">getWavefrontSize</a>());</div>
<div class="line"><a name="l05739"></a><span class="lineno"> 5739</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.eraseFromParent();</div>
<div class="line"><a name="l05740"></a><span class="lineno"> 5740</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05741"></a><span class="lineno"> 5741</span>&#160;  }</div>
<div class="line"><a name="l05742"></a><span class="lineno"> 5742</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_s_buffer_load:</div>
<div class="line"><a name="l05743"></a><span class="lineno"> 5743</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#ae0d1532576a7c6e3bda2d8966700d27a">legalizeSBufferLoad</a>(Helper, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l05744"></a><span class="lineno"> 5744</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_raw_buffer_store:</div>
<div class="line"><a name="l05745"></a><span class="lineno"> 5745</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_struct_buffer_store:</div>
<div class="line"><a name="l05746"></a><span class="lineno"> 5746</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a5ab017387bbf480d9b9c710b6ed1c138">legalizeBufferStore</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l05747"></a><span class="lineno"> 5747</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_raw_buffer_store_format:</div>
<div class="line"><a name="l05748"></a><span class="lineno"> 5748</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_struct_buffer_store_format:</div>
<div class="line"><a name="l05749"></a><span class="lineno"> 5749</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a5ab017387bbf480d9b9c710b6ed1c138">legalizeBufferStore</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <span class="keyword">false</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l05750"></a><span class="lineno"> 5750</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_raw_tbuffer_store:</div>
<div class="line"><a name="l05751"></a><span class="lineno"> 5751</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_struct_tbuffer_store:</div>
<div class="line"><a name="l05752"></a><span class="lineno"> 5752</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a5ab017387bbf480d9b9c710b6ed1c138">legalizeBufferStore</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <span class="keyword">true</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l05753"></a><span class="lineno"> 5753</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_raw_buffer_load:</div>
<div class="line"><a name="l05754"></a><span class="lineno"> 5754</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_struct_buffer_load:</div>
<div class="line"><a name="l05755"></a><span class="lineno"> 5755</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#abf66d0f3f6789a70e423158446adf607">legalizeBufferLoad</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l05756"></a><span class="lineno"> 5756</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_raw_buffer_load_format:</div>
<div class="line"><a name="l05757"></a><span class="lineno"> 5757</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_struct_buffer_load_format:</div>
<div class="line"><a name="l05758"></a><span class="lineno"> 5758</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#abf66d0f3f6789a70e423158446adf607">legalizeBufferLoad</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <span class="keyword">true</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l05759"></a><span class="lineno"> 5759</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_raw_tbuffer_load:</div>
<div class="line"><a name="l05760"></a><span class="lineno"> 5760</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_struct_tbuffer_load:</div>
<div class="line"><a name="l05761"></a><span class="lineno"> 5761</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#abf66d0f3f6789a70e423158446adf607">legalizeBufferLoad</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <span class="keyword">true</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l05762"></a><span class="lineno"> 5762</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_raw_buffer_atomic_swap:</div>
<div class="line"><a name="l05763"></a><span class="lineno"> 5763</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_struct_buffer_atomic_swap:</div>
<div class="line"><a name="l05764"></a><span class="lineno"> 5764</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_raw_buffer_atomic_add:</div>
<div class="line"><a name="l05765"></a><span class="lineno"> 5765</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_struct_buffer_atomic_add:</div>
<div class="line"><a name="l05766"></a><span class="lineno"> 5766</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_raw_buffer_atomic_sub:</div>
<div class="line"><a name="l05767"></a><span class="lineno"> 5767</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_struct_buffer_atomic_sub:</div>
<div class="line"><a name="l05768"></a><span class="lineno"> 5768</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_raw_buffer_atomic_smin:</div>
<div class="line"><a name="l05769"></a><span class="lineno"> 5769</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_struct_buffer_atomic_smin:</div>
<div class="line"><a name="l05770"></a><span class="lineno"> 5770</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_raw_buffer_atomic_umin:</div>
<div class="line"><a name="l05771"></a><span class="lineno"> 5771</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_struct_buffer_atomic_umin:</div>
<div class="line"><a name="l05772"></a><span class="lineno"> 5772</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_raw_buffer_atomic_smax:</div>
<div class="line"><a name="l05773"></a><span class="lineno"> 5773</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_struct_buffer_atomic_smax:</div>
<div class="line"><a name="l05774"></a><span class="lineno"> 5774</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_raw_buffer_atomic_umax:</div>
<div class="line"><a name="l05775"></a><span class="lineno"> 5775</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_struct_buffer_atomic_umax:</div>
<div class="line"><a name="l05776"></a><span class="lineno"> 5776</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_raw_buffer_atomic_and:</div>
<div class="line"><a name="l05777"></a><span class="lineno"> 5777</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_struct_buffer_atomic_and:</div>
<div class="line"><a name="l05778"></a><span class="lineno"> 5778</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_raw_buffer_atomic_or:</div>
<div class="line"><a name="l05779"></a><span class="lineno"> 5779</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_struct_buffer_atomic_or:</div>
<div class="line"><a name="l05780"></a><span class="lineno"> 5780</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_raw_buffer_atomic_xor:</div>
<div class="line"><a name="l05781"></a><span class="lineno"> 5781</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_struct_buffer_atomic_xor:</div>
<div class="line"><a name="l05782"></a><span class="lineno"> 5782</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_raw_buffer_atomic_inc:</div>
<div class="line"><a name="l05783"></a><span class="lineno"> 5783</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_struct_buffer_atomic_inc:</div>
<div class="line"><a name="l05784"></a><span class="lineno"> 5784</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_raw_buffer_atomic_dec:</div>
<div class="line"><a name="l05785"></a><span class="lineno"> 5785</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_struct_buffer_atomic_dec:</div>
<div class="line"><a name="l05786"></a><span class="lineno"> 5786</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_raw_buffer_atomic_cmpswap:</div>
<div class="line"><a name="l05787"></a><span class="lineno"> 5787</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_struct_buffer_atomic_cmpswap:</div>
<div class="line"><a name="l05788"></a><span class="lineno"> 5788</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_raw_buffer_atomic_fmin:</div>
<div class="line"><a name="l05789"></a><span class="lineno"> 5789</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_struct_buffer_atomic_fmin:</div>
<div class="line"><a name="l05790"></a><span class="lineno"> 5790</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_raw_buffer_atomic_fmax:</div>
<div class="line"><a name="l05791"></a><span class="lineno"> 5791</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_struct_buffer_atomic_fmax:</div>
<div class="line"><a name="l05792"></a><span class="lineno"> 5792</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_raw_buffer_atomic_fadd:</div>
<div class="line"><a name="l05793"></a><span class="lineno"> 5793</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_struct_buffer_atomic_fadd:</div>
<div class="line"><a name="l05794"></a><span class="lineno"> 5794</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a3cc7860fbf211f566f62809ac1144023">legalizeBufferAtomic</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, IntrID);</div>
<div class="line"><a name="l05795"></a><span class="lineno"> 5795</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_atomic_inc:</div>
<div class="line"><a name="l05796"></a><span class="lineno"> 5796</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#aeb19add07877585827f7b9b2deca8ff2">legalizeAtomicIncDec</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l05797"></a><span class="lineno"> 5797</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_atomic_dec:</div>
<div class="line"><a name="l05798"></a><span class="lineno"> 5798</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#aeb19add07877585827f7b9b2deca8ff2">legalizeAtomicIncDec</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l05799"></a><span class="lineno"> 5799</span>&#160;  <span class="keywordflow">case</span> Intrinsic::trap:</div>
<div class="line"><a name="l05800"></a><span class="lineno"> 5800</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a880b2600880891353accd4a93efedace">legalizeTrapIntrinsic</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l05801"></a><span class="lineno"> 5801</span>&#160;  <span class="keywordflow">case</span> Intrinsic::debugtrap:</div>
<div class="line"><a name="l05802"></a><span class="lineno"> 5802</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a30cbed3ba22ea175c004159fb3bd5289">legalizeDebugTrapIntrinsic</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l05803"></a><span class="lineno"> 5803</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_rsq_clamp:</div>
<div class="line"><a name="l05804"></a><span class="lineno"> 5804</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a68b29f4aff8a6db0040bc8e00a520116">legalizeRsqClampIntrinsic</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l05805"></a><span class="lineno"> 5805</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_ds_fadd:</div>
<div class="line"><a name="l05806"></a><span class="lineno"> 5806</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_ds_fmin:</div>
<div class="line"><a name="l05807"></a><span class="lineno"> 5807</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_ds_fmax:</div>
<div class="line"><a name="l05808"></a><span class="lineno"> 5808</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a4e7c460c9087646310b0001a0b46d336">legalizeDSAtomicFPIntrinsic</a>(Helper, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, IntrID);</div>
<div class="line"><a name="l05809"></a><span class="lineno"> 5809</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_image_bvh_intersect_ray:</div>
<div class="line"><a name="l05810"></a><span class="lineno"> 5810</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#a94974538095721fcce4cf479555bc25c">legalizeBVHIntrinsic</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l05811"></a><span class="lineno"> 5811</span>&#160;  <span class="keywordflow">default</span>: {</div>
<div class="line"><a name="l05812"></a><span class="lineno"> 5812</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="structllvm_1_1AMDGPU_1_1ImageDimIntrinsicInfo.html">AMDGPU::ImageDimIntrinsicInfo</a> *ImageDimIntr =</div>
<div class="line"><a name="l05813"></a><span class="lineno"> 5813</span>&#160;            <a class="code" href="namespacellvm_1_1AMDGPU.html#a3f263a048bfe2f3f16b9bd70a01031f6">AMDGPU::getImageDimIntrinsicInfo</a>(IntrID))</div>
<div class="line"><a name="l05814"></a><span class="lineno"> 5814</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1AMDGPULegalizerInfo.html#ad0be6e871a184d6f7b814515324eee1b">legalizeImageIntrinsic</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, Helper.<a class="code" href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">Observer</a>, ImageDimIntr);</div>
<div class="line"><a name="l05815"></a><span class="lineno"> 5815</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05816"></a><span class="lineno"> 5816</span>&#160;  }</div>
<div class="line"><a name="l05817"></a><span class="lineno"> 5817</span>&#160;  }</div>
<div class="line"><a name="l05818"></a><span class="lineno"> 5818</span>&#160; </div>
<div class="line"><a name="l05819"></a><span class="lineno"> 5819</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l05820"></a><span class="lineno"> 5820</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="alib_2Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00029">README.txt:29</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RegState_html_aef4cc0c855dc833e2a9d58a50703320dab502f975742e9bff6d6dd7b49439b806"><div class="ttname"><a href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320dab502f975742e9bff6d6dd7b49439b806">llvm::RegState::Undef</a></div><div class="ttdeci">@ Undef</div><div class="ttdoc">Value of the register doesn't matter.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00052">MachineInstrBuilder.h:52</a></div></div>
<div class="ttc" id="aMIPatternMatch_8h_html"><div class="ttname"><a href="MIPatternMatch_8h.html">MIPatternMatch.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineMemOperand_html_a606d73cbc9cc6210d626ec4b12c6c32e"><div class="ttname"><a href="classllvm_1_1MachineMemOperand.html#a606d73cbc9cc6210d626ec4b12c6c32e">llvm::MachineMemOperand::setValue</a></div><div class="ttdeci">void setValue(const Value *NewSV)</div><div class="ttdoc">Change the SourceValue for this MachineMemOperand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineMemOperand_8h_source.html#l00317">MachineMemOperand.h:317</a></div></div>
<div class="ttc" id="astructllvm_1_1AMDGPUFunctionArgInfo_html_a0e789059bf7f286b7f6bc75b43aac98b"><div class="ttname"><a href="structllvm_1_1AMDGPUFunctionArgInfo.html#a0e789059bf7f286b7f6bc75b43aac98b">llvm::AMDGPUFunctionArgInfo::PreloadedValue</a></div><div class="ttdeci">PreloadedValue</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUArgumentUsageInfo_8h_source.html#l00098">AMDGPUArgumentUsageInfo.h:98</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_html_ab8edae44cec4167ac46ac7f60ecb4dafa74a9d014dc6c0bcf178cd8df1156a200"><div class="ttname"><a href="namespacellvm_1_1AMDGPU.html#ab8edae44cec4167ac46ac7f60ecb4dafa74a9d014dc6c0bcf178cd8df1156a200">llvm::AMDGPU::AMDHSA_COV3</a></div><div class="ttdeci">@ AMDHSA_COV3</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUBaseInfo_8h_source.html#l00049">AMDGPUBaseInfo.h:49</a></div></div>
<div class="ttc" id="astructllvm_1_1AMDGPUFunctionArgInfo_html_a0e789059bf7f286b7f6bc75b43aac98ba32b5333e2f708d7eeb05c12e415b8fd4"><div class="ttname"><a href="structllvm_1_1AMDGPUFunctionArgInfo.html#a0e789059bf7f286b7f6bc75b43aac98ba32b5333e2f708d7eeb05c12e415b8fd4">llvm::AMDGPUFunctionArgInfo::QUEUE_PTR</a></div><div class="ttdeci">@ QUEUE_PTR</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUArgumentUsageInfo_8h_source.html#l00102">AMDGPUArgumentUsageInfo.h:102</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_ab38b237c564a670c78640d09642faa40"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#ab38b237c564a670c78640d09642faa40">llvm::LegalizeRuleSet::widenScalarToNextPow2</a></div><div class="ttdeci">LegalizeRuleSet &amp; widenScalarToNextPow2(unsigned TypeIdx, unsigned MinSize=0)</div><div class="ttdoc">Widen the scalar to the next power of two that is at least MinSize.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00877">LegalizerInfo.h:877</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_af7e4619611fab877c69f6ec0a1d57525"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#af7e4619611fab877c69f6ec0a1d57525">llvm::AMDGPULegalizerInfo::legalizeWorkitemIDIntrinsic</a></div><div class="ttdeci">bool legalizeWorkitemIDIntrinsic(MachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;B, unsigned Dim, AMDGPUFunctionArgInfo::PreloadedValue ArgType) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l03335">AMDGPULegalizerInfo.cpp:3335</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_html_a393a9a9f611c326cabf217b4c360e2e6"><div class="ttname"><a href="namespacellvm_1_1AMDGPU.html#a393a9a9f611c326cabf217b4c360e2e6">llvm::AMDGPU::getCodeObjectVersion</a></div><div class="ttdeci">unsigned getCodeObjectVersion(const Module &amp;M)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUBaseInfo_8cpp_source.html#l00153">AMDGPUBaseInfo.cpp:153</a></div></div>
<div class="ttc" id="aNVPTXISelLowering_8cpp_html_ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246"><div class="ttname"><a href="NVPTXISelLowering_8cpp.html#ae1a90b5d85643644483b2ca70da4d13faed3fa7a5efe80dad3ea3d86cc14be246">Signed</a></div><div class="ttdeci">@ Signed</div><div class="ttdef"><b>Definition:</b> <a href="NVPTXISelLowering_8cpp_source.html#l04884">NVPTXISelLowering.cpp:4884</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPUMachineFunction_html_a13726c00b6a447734d47ecaae49ebbd0"><div class="ttname"><a href="classllvm_1_1AMDGPUMachineFunction.html#a13726c00b6a447734d47ecaae49ebbd0">llvm::AMDGPUMachineFunction::getLDSKernelIdMetadata</a></div><div class="ttdeci">static std::optional&lt; uint32_t &gt; getLDSKernelIdMetadata(const Function &amp;F)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUMachineFunction_8cpp_source.html#l00203">AMDGPUMachineFunction.cpp:203</a></div></div>
<div class="ttc" id="aIRTranslator_8cpp_html_abe44dfdea65b4f7e11e0a608ab708b76"><div class="ttname"><a href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a></div><div class="ttdeci">IRTranslator LLVM IR MI</div><div class="ttdef"><b>Definition:</b> <a href="IRTranslator_8cpp_source.html#l00109">IRTranslator.cpp:109</a></div></div>
<div class="ttc" id="aR600ClauseMergePass_8cpp_html_aba99928790de45fa7aa12b47fbd828ff"><div class="ttname"><a href="R600ClauseMergePass_8cpp.html#aba99928790de45fa7aa12b47fbd828ff">Merge</a></div><div class="ttdeci">R600 Clause Merge</div><div class="ttdef"><b>Definition:</b> <a href="R600ClauseMergePass_8cpp_source.html#l00070">R600ClauseMergePass.cpp:70</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_a4f1ceb770fe3446bfb2b3fa26858098f"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">llvm::MachineInstrBuilder::addImm</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addImm(int64_t Val) const</div><div class="ttdoc">Add a new immediate operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00131">MachineInstrBuilder.h:131</a></div></div>
<div class="ttc" id="anamespacellvm_html_a37c1fdede126353d80c3753dfe06f3c7"><div class="ttname"><a href="namespacellvm.html#a37c1fdede126353d80c3753dfe06f3c7">llvm::bit_width</a></div><div class="ttdeci">int bit_width(T Value)</div><div class="ttdoc">Returns the number of bits needed to represent Value if Value is nonzero.</div><div class="ttdef"><b>Definition:</b> <a href="bit_8h_source.html#l00281">bit.h:281</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="anamespacellvm_1_1LegalityPredicates_html_a0460dde35b7517637d8ac040900d42ba"><div class="ttname"><a href="namespacellvm_1_1LegalityPredicates.html#a0460dde35b7517637d8ac040900d42ba">llvm::LegalityPredicates::scalarOrEltWiderThan</a></div><div class="ttdeci">LegalityPredicate scalarOrEltWiderThan(unsigned TypeIdx, unsigned Size)</div><div class="ttdoc">True iff the specified type index is a scalar or a vector with an element type that's wider than the ...</div><div class="ttdef"><b>Definition:</b> <a href="LegalityPredicates_8cpp_source.html#l00141">LegalityPredicates.cpp:141</a></div></div>
<div class="ttc" id="anamespacellvm_1_1tgtok_html_abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a"><div class="ttname"><a href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">llvm::tgtok::Def</a></div><div class="ttdeci">@ Def</div><div class="ttdef"><b>Definition:</b> <a href="TGLexer_8h_source.html#l00050">TGLexer.h:50</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a8bc1455f0ec29a33f76adecf8e668af8"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a8bc1455f0ec29a33f76adecf8e668af8">llvm::AMDGPULegalizerInfo::legalizeImplicitArgPtr</a></div><div class="ttdeci">bool legalizeImplicitArgPtr(MachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;B) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l04173">AMDGPULegalizerInfo.cpp:4173</a></div></div>
<div class="ttc" id="alib_2Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2X86_2README_8txt_source.html#l00252">README.txt:252</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_a1c42298ffb49a95c87577d3e5de46aea"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#a1c42298ffb49a95c87577d3e5de46aea">shouldBitcastLoadStoreType</a></div><div class="ttdeci">static bool shouldBitcastLoadStoreType(const GCNSubtarget &amp;ST, const LLT Ty, const LLT MemTy)</div><div class="ttdoc">Return true if a load or store of the type should be lowered with a bitcast to a different type.</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l00365">AMDGPULegalizerInfo.cpp:365</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">llvm::CmpInst::ICMP_EQ</a></div><div class="ttdeci">@ ICMP_EQ</div><div class="ttdoc">equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00739">InstrTypes.h:739</a></div></div>
<div class="ttc" id="aAArch64ExpandPseudoInsts_8cpp_html_a6cf2f8996b1e9aaf2d7a435aaa62382f"><div class="ttname"><a href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a></div><div class="ttdeci">MachineInstrBuilder &amp; UseMI</div><div class="ttdef"><b>Definition:</b> <a href="AArch64ExpandPseudoInsts_8cpp_source.html#l00107">AArch64ExpandPseudoInsts.cpp:107</a></div></div>
<div class="ttc" id="astructllvm_1_1AMDGPU_1_1MIMGBaseOpcodeInfo_html_a89201ea82f62bd544438593981c5b8ff"><div class="ttname"><a href="structllvm_1_1AMDGPU_1_1MIMGBaseOpcodeInfo.html#a89201ea82f62bd544438593981c5b8ff">llvm::AMDGPU::MIMGBaseOpcodeInfo::Store</a></div><div class="ttdeci">bool Store</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUBaseInfo_8h_source.html#l00345">AMDGPUBaseInfo.h:345</a></div></div>
<div class="ttc" id="astructllvm_1_1AMDGPU_1_1MIMGBaseOpcodeInfo_html_a0adbb6ce25f3ffd10c57280e27cc2cd2"><div class="ttname"><a href="structllvm_1_1AMDGPU_1_1MIMGBaseOpcodeInfo.html#a0adbb6ce25f3ffd10c57280e27cc2cd2">llvm::AMDGPU::MIMGBaseOpcodeInfo::Gradients</a></div><div class="ttdeci">bool Gradients</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUBaseInfo_8h_source.html#l00352">AMDGPUBaseInfo.h:352</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPUAS_html_ab1843c6566c95d94d6e36a857b8d2b3fa77b1c964e2ff99057bf5e75140457abe"><div class="ttname"><a href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3fa77b1c964e2ff99057bf5e75140457abe">llvm::AMDGPUAS::LOCAL_ADDRESS</a></div><div class="ttdeci">@ LOCAL_ADDRESS</div><div class="ttdoc">Address space for local memory.</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPU_8h_source.html#l00377">AMDGPU.h:377</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a1847e956a0087fefdb49e2a9583c7d18"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a1847e956a0087fefdb49e2a9583c7d18">llvm::GlobalValue::hasExternalLinkage</a></div><div class="ttdeci">bool hasExternalLinkage() const</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00506">GlobalValue.h:506</a></div></div>
<div class="ttc" id="aclassllvm_1_1DiagnosticInfoUnsupported_html"><div class="ttname"><a href="classllvm_1_1DiagnosticInfoUnsupported.html">llvm::DiagnosticInfoUnsupported</a></div><div class="ttdoc">Diagnostic information for unsupported feature in backend.</div><div class="ttdef"><b>Definition:</b> <a href="DiagnosticInfo_8h_source.html#l01008">DiagnosticInfo.h:1008</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineMemOperand_html_abc15369ab4cc583332950b913e2ef1dd"><div class="ttname"><a href="classllvm_1_1MachineMemOperand.html#abc15369ab4cc583332950b913e2ef1dd">llvm::MachineMemOperand::getAlign</a></div><div class="ttdeci">Align getAlign() const</div><div class="ttdoc">Return the minimum known alignment in bytes of the actual memory reference.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8cpp_source.html#l01130">MachineOperand.cpp:1130</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_html_aa5f3cd2ec6af3adbc143654720b1214b"><div class="ttname"><a href="namespacellvm_1_1AMDGPU.html#aa5f3cd2ec6af3adbc143654720b1214b">llvm::AMDGPU::isGFX11Plus</a></div><div class="ttdeci">bool isGFX11Plus(const MCSubtargetInfo &amp;STI)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUBaseInfo_8cpp_source.html#l01990">AMDGPUBaseInfo.cpp:1990</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_a2d0beabfcf00e6fd23c97eff8ee516a6"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#a2d0beabfcf00e6fd23c97eff8ee516a6">vectorWiderThan</a></div><div class="ttdeci">static LegalityPredicate vectorWiderThan(unsigned TypeIdx, unsigned Size)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l00170">AMDGPULegalizerInfo.cpp:170</a></div></div>
<div class="ttc" id="astructllvm_1_1APFloatBase_html_a0c5765e9acba977f6e462c2917276d8f"><div class="ttname"><a href="structllvm_1_1APFloatBase.html#a0c5765e9acba977f6e462c2917276d8f">llvm::APFloatBase::IEEEsingle</a></div><div class="ttdeci">static const fltSemantics &amp; IEEEsingle() LLVM_READNONE</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8cpp_source.html#l00244">APFloat.cpp:244</a></div></div>
<div class="ttc" id="aSIMachineFunctionInfo_8h_html"><div class="ttname"><a href="SIMachineFunctionInfo_8h.html">SIMachineFunctionInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerInfo_html_a32539827696dafee94ee79c3321b4245"><div class="ttname"><a href="classllvm_1_1LegalizerInfo.html#a32539827696dafee94ee79c3321b4245">llvm::LegalizerInfo::getActionDefinitionsBuilder</a></div><div class="ttdeci">LegalizeRuleSet &amp; getActionDefinitionsBuilder(unsigned Opcode)</div><div class="ttdoc">Get the action definition builder for the given opcode.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8cpp_source.html#l00288">LegalizerInfo.cpp:288</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html">llvm::MachineRegisterInfo</a></div><div class="ttdoc">MachineRegisterInfo - Keep track of information for virtual and physical registers,...</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00051">MachineRegisterInfo.h:51</a></div></div>
<div class="ttc" id="astructllvm_1_1ArgDescriptor_html"><div class="ttname"><a href="structllvm_1_1ArgDescriptor.html">llvm::ArgDescriptor</a></div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUArgumentUsageInfo_8h_source.html#l00023">AMDGPUArgumentUsageInfo.h:23</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_ae6dc00935578ac3d7b43326b5f02b2bc"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#ae6dc00935578ac3d7b43326b5f02b2bc">getPow2VectorType</a></div><div class="ttdeci">static LLT getPow2VectorType(LLT Ty)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l00050">AMDGPULegalizerInfo.cpp:50</a></div></div>
<div class="ttc" id="aAArch64MIPeepholeOpt_8cpp_html_a9c374320ed4e895f9afa199987182bd2"><div class="ttname"><a href="AArch64MIPeepholeOpt_8cpp.html#a9c374320ed4e895f9afa199987182bd2">RegSize</a></div><div class="ttdeci">unsigned RegSize</div><div class="ttdef"><b>Definition:</b> <a href="AArch64MIPeepholeOpt_8cpp_source.html#l00123">AArch64MIPeepholeOpt.cpp:123</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_acbd3ab3957032feb181df036bb6a8d27"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#acbd3ab3957032feb181df036bb6a8d27">widenToNextPowerOf2</a></div><div class="ttdeci">static LLT widenToNextPowerOf2(LLT Ty)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l02599">AMDGPULegalizerInfo.cpp:2599</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00059">Function.h:59</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_ad049a79d46df2c25561d90e9d80fb5e3"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#ad049a79d46df2c25561d90e9d80fb5e3">convertImageAddrToPacked</a></div><div class="ttdeci">static void convertImageAddrToPacked(MachineIRBuilder &amp;B, MachineInstr &amp;MI, int DimIdx, int NumVAddrs)</div><div class="ttdoc">Convert from separate vaddr components to a single vector address register, and replace the remaining...</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l04841">AMDGPULegalizerInfo.cpp:4841</a></div></div>
<div class="ttc" id="anamespacellvm_1_1SI_1_1KernelInputOffsets_html_a58b4eae4b0a45d478c7c0f3959b04612aa0fc2d47a80ef17faaee718a2659384d"><div class="ttname"><a href="namespacellvm_1_1SI_1_1KernelInputOffsets.html#a58b4eae4b0a45d478c7c0f3959b04612aa0fc2d47a80ef17faaee718a2659384d">llvm::SI::KernelInputOffsets::GLOBAL_SIZE_Y</a></div><div class="ttdeci">@ GLOBAL_SIZE_Y</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8h_source.html#l01340">SIInstrInfo.h:1340</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0edf31d256ecb3ac003bf2d81a576c9e"><div class="ttname"><a href="namespacellvm.html#a0edf31d256ecb3ac003bf2d81a576c9e">llvm::getOpcodeDef</a></div><div class="ttdeci">MachineInstr * getOpcodeDef(unsigned Opcode, Register Reg, const MachineRegisterInfo &amp;MRI)</div><div class="ttdoc">See if Reg is defined by an single def instruction that is Opcode.</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2GlobalISel_2Utils_8cpp_source.html#l00475">Utils.cpp:475</a></div></div>
<div class="ttc" id="astructllvm_1_1AMDGPU_1_1SIModeRegisterDefaults_html_a05d4f9c4d9e486f4fd3d69a89121e107"><div class="ttname"><a href="structllvm_1_1AMDGPU_1_1SIModeRegisterDefaults.html#a05d4f9c4d9e486f4fd3d69a89121e107">llvm::AMDGPU::SIModeRegisterDefaults::IEEE</a></div><div class="ttdeci">bool IEEE</div><div class="ttdoc">Floating point opcodes that support exception flag gathering quiet and propagate signaling NaN inputs...</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUBaseInfo_8h_source.html#l01325">AMDGPUBaseInfo.h:1325</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_a2a2df5a25b9c703e74e82b48a75d0c3d"><div class="ttname"><a href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a></div><div class="ttdeci">instcombine should handle this C2 when C1</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00263">README.txt:263</a></div></div>
<div class="ttc" id="aclassllvm_1_1SIInstrInfo_html_ade90146180a53b9d9edc077b933e70bbaf8bf104f053c930813dce1aa8b9f9f7c"><div class="ttname"><a href="classllvm_1_1SIInstrInfo.html#ade90146180a53b9d9edc077b933e70bbaf8bf104f053c930813dce1aa8b9f9f7c">llvm::SIInstrInfo::MO_GOTPCREL32</a></div><div class="ttdeci">@ MO_GOTPCREL32</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8h_source.html#l00161">SIInstrInfo.h:161</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSubtarget_html_ae1917134ea7a60d6d706cd919e236aae"><div class="ttname"><a href="classllvm_1_1GCNSubtarget.html#ae1917134ea7a60d6d706cd919e236aae">llvm::GCNSubtarget::getNSAMaxSize</a></div><div class="ttdeci">unsigned getNSAMaxSize() const</div><div class="ttdef"><b>Definition:</b> <a href="GCNSubtarget_8h_source.html#l00934">GCNSubtarget.h:934</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_ab92c68720091c48aa146f82db0f9ce88"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#ab92c68720091c48aa146f82db0f9ce88">isWideScalarExtLoadTruncStore</a></div><div class="ttdeci">static LegalityPredicate isWideScalarExtLoadTruncStore(unsigned TypeIdx)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l00230">AMDGPULegalizerInfo.cpp:230</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01199">SmallVector.h:1199</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac76eb82370e997f967454f441effbbff"><div class="ttname"><a href="namespacellvm.html#ac76eb82370e997f967454f441effbbff">llvm::getIConstantVRegValWithLookThrough</a></div><div class="ttdeci">std::optional&lt; ValueAndVReg &gt; getIConstantVRegValWithLookThrough(Register VReg, const MachineRegisterInfo &amp;MRI, bool LookThroughInstrs=true)</div><div class="ttdoc">If VReg is defined by a statically evaluable chain of instructions rooted on a G_CONSTANT returns its...</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2GlobalISel_2Utils_8cpp_source.html#l00409">Utils.cpp:409</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a9d017af749f76484cb9aec9ff6e4330c"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a9d017af749f76484cb9aec9ff6e4330c">llvm::MachineFunction::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00872">MachineFunction.h:872</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_af56ef6d2982131944aab4e6c249d7269"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#af56ef6d2982131944aab4e6c249d7269">llvm::LegalizeRuleSet::customFor</a></div><div class="ttdeci">LegalizeRuleSet &amp; customFor(std::initializer_list&lt; LLT &gt; Types)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00840">LegalizerInfo.h:840</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a1a1ef8cdc87d83bb4e114e897e86d58c"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a1a1ef8cdc87d83bb4e114e897e86d58c">llvm::AMDGPULegalizerInfo::legalizeIsAddrSpace</a></div><div class="ttdeci">bool legalizeIsAddrSpace(MachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;B, unsigned AddrSpace) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l04219">AMDGPULegalizerInfo.cpp:4219</a></div></div>
<div class="ttc" id="astructllvm_1_1AMDGPU_1_1MIMGBaseOpcodeInfo_html_a08a241a250332ee93cf1dce846b01cad"><div class="ttname"><a href="structllvm_1_1AMDGPU_1_1MIMGBaseOpcodeInfo.html#a08a241a250332ee93cf1dce846b01cad">llvm::AMDGPU::MIMGBaseOpcodeInfo::Gather4</a></div><div class="ttdeci">bool Gather4</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUBaseInfo_8h_source.html#l00349">AMDGPUBaseInfo.h:349</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a0d496cc15e312863869a384532968143"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a0d496cc15e312863869a384532968143">llvm::MachineFunction::getMachineMemOperand</a></div><div class="ttdeci">MachineMemOperand * getMachineMemOperand(MachinePointerInfo PtrInfo, MachineMemOperand::Flags f, uint64_t s, Align base_alignment, const AAMDNodes &amp;AAInfo=AAMDNodes(), const MDNode *Ranges=nullptr, SyncScope::ID SSID=SyncScope::System, AtomicOrdering Ordering=AtomicOrdering::NotAtomic, AtomicOrdering FailureOrdering=AtomicOrdering::NotAtomic)</div><div class="ttdoc">getMachineMemOperand - Allocate a new MachineMemOperand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8cpp_source.html#l00469">MachineFunction.cpp:469</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPUTargetLowering_html_aabb66ae6636b6dbd45c1b66dd9353821aa0198e1c8a37613471dfc9d64c02beed"><div class="ttname"><a href="classllvm_1_1AMDGPUTargetLowering.html#aabb66ae6636b6dbd45c1b66dd9353821aa0198e1c8a37613471dfc9d64c02beed">llvm::AMDGPUTargetLowering::QUEUE_PTR</a></div><div class="ttdeci">@ QUEUE_PTR</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUISelLowering_8h_source.html#l00337">AMDGPUISelLowering.h:337</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba8a80b27ca29fe2076b9bbdee02c65464"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba8a80b27ca29fe2076b9bbdee02c65464">llvm::CmpInst::FCMP_ONE</a></div><div class="ttdeci">@ FCMP_ONE</div><div class="ttdoc">0 1 1 0 True if ordered and operands are unequal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00726">InstrTypes.h:726</a></div></div>
<div class="ttc" id="astructllvm_1_1AMDGPU_1_1ImageDimIntrinsicInfo_html"><div class="ttname"><a href="structllvm_1_1AMDGPU_1_1ImageDimIntrinsicInfo.html">llvm::AMDGPU::ImageDimIntrinsicInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUInstrInfo_8h_source.html#l00047">AMDGPUInstrInfo.h:47</a></div></div>
<div class="ttc" id="anamespacellvm_1_1X86Disassembler_html_a1e59b79e1d09149912cad9c0ef2809ad"><div class="ttname"><a href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">llvm::X86Disassembler::Reg</a></div><div class="ttdeci">Reg</div><div class="ttdoc">All possible values of the reg field in the ModR/M byte.</div><div class="ttdef"><b>Definition:</b> <a href="X86DisassemblerDecoder_8h_source.html#l00462">X86DisassemblerDecoder.h:462</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_aed4562ccf898feaf2eb6cf5555b5084d"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#aed4562ccf898feaf2eb6cf5555b5084d">llvm::MachineRegisterInfo::getTargetRegisterInfo</a></div><div class="ttdeci">const TargetRegisterInfo * getTargetRegisterInfo() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00156">MachineRegisterInfo.h:156</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineMemOperand_html_aaa2020e47e35179234b9ea27d555b2ddac63dd9c4fe69bfeaac7a363fda846ac6"><div class="ttname"><a href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2ddac63dd9c4fe69bfeaac7a363fda846ac6">llvm::MachineMemOperand::MOInvariant</a></div><div class="ttdeci">@ MOInvariant</div><div class="ttdoc">The memory access always returns the same value (or traps).</div><div class="ttdef"><b>Definition:</b> <a href="MachineMemOperand_8h_source.html#l00144">MachineMemOperand.h:144</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">llvm::CmpInst::ICMP_NE</a></div><div class="ttdeci">@ ICMP_NE</div><div class="ttdoc">not equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00740">InstrTypes.h:740</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_a67021459c7ef8f9a634b4eac7ffd0f96"><div class="ttname"><a href="classllvm_1_1LLT.html#a67021459c7ef8f9a634b4eac7ffd0f96">llvm::LLT::scalar</a></div><div class="ttdeci">static constexpr LLT scalar(unsigned SizeInBits)</div><div class="ttdoc">Get a low-level scalar or aggregate &quot;bag of bits&quot;.</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00042">LowLevelTypeImpl.h:42</a></div></div>
<div class="ttc" id="anamespacellvm_1_1LegalityPredicates_html_ab82dcf447c1a6ace035cab178a049b39"><div class="ttname"><a href="namespacellvm_1_1LegalityPredicates.html#ab82dcf447c1a6ace035cab178a049b39">llvm::LegalityPredicates::typeIsNot</a></div><div class="ttdeci">LegalityPredicate typeIsNot(unsigned TypeIdx, LLT Type)</div><div class="ttdoc">True iff the given type index is not the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00259">LegalizerInfo.h:259</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPUSubtarget_html_a53c0ee4138bfbf9e0410a65e0eaa36e2a5a040cb5d61ebf76561fcb74c4a77970"><div class="ttname"><a href="classllvm_1_1AMDGPUSubtarget.html#a53c0ee4138bfbf9e0410a65e0eaa36e2a5a040cb5d61ebf76561fcb74c4a77970">llvm::AMDGPUSubtarget::SEA_ISLANDS</a></div><div class="ttdeci">@ SEA_ISLANDS</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUSubtarget_8h_source.html#l00038">AMDGPUSubtarget.h:38</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_ae63198baedfab72494f0d79823e99b75"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#ae63198baedfab72494f0d79823e99b75">llvm::AMDGPULegalizerInfo::loadInputValue</a></div><div class="ttdeci">bool loadInputValue(Register DstReg, MachineIRBuilder &amp;B, const ArgDescriptor *Arg, const TargetRegisterClass *ArgRC, LLT ArgTy) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l03257">AMDGPULegalizerInfo.cpp:3257</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_a741b5105cca6e98538c79acf275ca733"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a741b5105cca6e98538c79acf275ca733">llvm::MachineRegisterInfo::use_instr_nodbg_begin</a></div><div class="ttdeci">use_instr_nodbg_iterator use_instr_nodbg_begin(Register RegNo) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00557">MachineRegisterInfo.h:557</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_ac6f0c363a0260f50a2e3dae5b8c00d21"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#ac6f0c363a0260f50a2e3dae5b8c00d21">loadStoreBitcastWorkaround</a></div><div class="ttdeci">static bool loadStoreBitcastWorkaround(const LLT Ty)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l00339">AMDGPULegalizerInfo.cpp:339</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a14daf64c8f1ebcbe259a41854f49ad12"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a14daf64c8f1ebcbe259a41854f49ad12">llvm::AMDGPULegalizerInfo::splitBufferOffsets</a></div><div class="ttdeci">std::pair&lt; Register, unsigned &gt; splitBufferOffsets(MachineIRBuilder &amp;B, Register OrigOffset) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l04239">AMDGPULegalizerInfo.cpp:4239</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_afa3cedfbe23049312e516145f0e46cbb"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#afa3cedfbe23049312e516145f0e46cbb">sizeIsMultipleOf32</a></div><div class="ttdeci">static LegalityPredicate sizeIsMultipleOf32(unsigned TypeIdx)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l00080">AMDGPULegalizerInfo.cpp:80</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">llvm::CmpInst::ICMP_SGT</a></div><div class="ttdeci">@ ICMP_SGT</div><div class="ttdoc">signed greater than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00745">InstrTypes.h:745</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a9fffac2512fe651f0d5e37e27f5bd51c"><div class="ttname"><a href="classllvm_1_1Function.html#a9fffac2512fe651f0d5e37e27f5bd51c">llvm::Function::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">getContext - Return a reference to the LLVMContext associated with this function.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00315">Function.cpp:315</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_a8db36c82f32d6f6a4d35a00e55be03a8"><div class="ttname"><a href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a></div><div class="ttdeci">bool Shift</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00468">README.txt:468</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_aaa6f42b31892a929914872c879e4b365"><div class="ttname"><a href="classllvm_1_1LLT.html#aaa6f42b31892a929914872c879e4b365">llvm::LLT::changeElementSize</a></div><div class="ttdeci">constexpr LLT changeElementSize(unsigned NewEltSize) const</div><div class="ttdoc">If this type is a vector, return a vector with the same number of elements but the new element size.</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00187">LowLevelTypeImpl.h:187</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a594e9cb4df0c39f1f5263fb07273b19f"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a594e9cb4df0c39f1f5263fb07273b19f">llvm::AMDGPULegalizerInfo::legalizeFrem</a></div><div class="ttdeci">bool legalizeFrem(MachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;B) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l02102">AMDGPULegalizerInfo.cpp:2102</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdoc">The instances of the Type class are immutable: once they are created, they are never changed.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_aac36a82fb8a9d486c3b59ccab7769e4d"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#aac36a82fb8a9d486c3b59ccab7769e4d">llvm::LegalizerHelper::lowerFMad</a></div><div class="ttdeci">LegalizeResult lowerFMad(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l06533">LegalizerHelper.cpp:6533</a></div></div>
<div class="ttc" id="anamespacellvm_1_1LegalityPredicates_html_a58d4c5153a7d50efd2b3e8408193dfab"><div class="ttname"><a href="namespacellvm_1_1LegalityPredicates.html#a58d4c5153a7d50efd2b3e8408193dfab">llvm::LegalityPredicates::largerThan</a></div><div class="ttdeci">LegalityPredicate largerThan(unsigned TypeIdx0, unsigned TypeIdx1)</div><div class="ttdoc">True iff the first type index has a larger total bit size than second type index.</div><div class="ttdef"><b>Definition:</b> <a href="LegalityPredicates_8cpp_source.html#l00125">LegalityPredicates.cpp:125</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARMII_html_a7d414894ef8cdc39b147eb7e0d7e4305a479711d0ab662307550fc709665589ea"><div class="ttname"><a href="namespacellvm_1_1ARMII.html#a7d414894ef8cdc39b147eb7e0d7e4305a479711d0ab662307550fc709665589ea">llvm::ARMII::VecSize</a></div><div class="ttdeci">@ VecSize</div><div class="ttdef"><b>Definition:</b> <a href="MCTargetDesc_2ARMBaseInfo_8h_source.html#l00421">ARMBaseInfo.h:421</a></div></div>
<div class="ttc" id="aclassllvm_1_1ElementCount_html_a584cb8dfa0090b33a969c4dda27337f6"><div class="ttname"><a href="classllvm_1_1ElementCount.html#a584cb8dfa0090b33a969c4dda27337f6">llvm::ElementCount::getFixed</a></div><div class="ttdeci">static constexpr ElementCount getFixed(ScalarTy MinVal)</div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00291">TypeSize.h:291</a></div></div>
<div class="ttc" id="anamespacellvm_1_1tgtok_html_abbc5259d649363016626e2529fabe0c5a3c0710aa6b054662f67b480712fa2b95"><div class="ttname"><a href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a3c0710aa6b054662f67b480712fa2b95">llvm::tgtok::Bits</a></div><div class="ttdeci">@ Bits</div><div class="ttdef"><b>Definition:</b> <a href="TGLexer_8h_source.html#l00050">TGLexer.h:50</a></div></div>
<div class="ttc" id="anamespacellvm_1_1LegalityPredicates_html_aff9e886f18a84258e4f794e31aad0bd9"><div class="ttname"><a href="namespacellvm_1_1LegalityPredicates.html#aff9e886f18a84258e4f794e31aad0bd9">llvm::LegalityPredicates::scalarNarrowerThan</a></div><div class="ttdeci">LegalityPredicate scalarNarrowerThan(unsigned TypeIdx, unsigned Size)</div><div class="ttdoc">True iff the specified type index is a scalar that's narrower than the given size.</div><div class="ttdef"><b>Definition:</b> <a href="LegalityPredicates_8cpp_source.html#l00101">LegalityPredicates.cpp:101</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSubtarget_html_a83c4915f87ee24cf4648d46b2a2acf0a"><div class="ttname"><a href="classllvm_1_1GCNSubtarget.html#a83c4915f87ee24cf4648d46b2a2acf0a">llvm::GCNSubtarget::isTrapHandlerEnabled</a></div><div class="ttdeci">bool isTrapHandlerEnabled() const</div><div class="ttdef"><b>Definition:</b> <a href="GCNSubtarget_8h_source.html#l00555">GCNSubtarget.h:555</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_aafacf84de1cb994a92dc045f4aa1d518a4802af6d0cf3b900adb6296bccedf2a0"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a4802af6d0cf3b900adb6296bccedf2a0">llvm::MachineInstr::FmAfn</a></div><div class="ttdeci">@ FmAfn</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00100">MachineInstr.h:100</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineMemOperand_html"><div class="ttname"><a href="classllvm_1_1MachineMemOperand.html">llvm::MachineMemOperand</a></div><div class="ttdoc">A description of a memory reference used in the backend.</div><div class="ttdef"><b>Definition:</b> <a href="MachineMemOperand_8h_source.html#l00127">MachineMemOperand.h:127</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_aff707b57a26889c4290a79001f12fd20"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#aff707b57a26889c4290a79001f12fd20">isKnownNonNull</a></div><div class="ttdeci">static bool isKnownNonNull(Register Val, MachineRegisterInfo &amp;MRI, const AMDGPUTargetMachine &amp;TM, unsigned AddrSpace)</div><div class="ttdoc">Return true if the value is a known valid address, such that a null check is not necessary.</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l01915">AMDGPULegalizerInfo.cpp:1915</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineMemOperand_html_aaa2020e47e35179234b9ea27d555b2dda7b999a936bc7a4d45dfadbe356e77b3f"><div class="ttname"><a href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2dda7b999a936bc7a4d45dfadbe356e77b3f">llvm::MachineMemOperand::MODereferenceable</a></div><div class="ttdeci">@ MODereferenceable</div><div class="ttdoc">The memory access is dereferenceable (i.e., doesn't trap).</div><div class="ttdef"><b>Definition:</b> <a href="MachineMemOperand_8h_source.html#l00142">MachineMemOperand.h:142</a></div></div>
<div class="ttc" id="anamespacellvm_1_1LegalityPredicates_html_a7e87df9fdd3792e1b0c27ccf85466cfe"><div class="ttname"><a href="namespacellvm_1_1LegalityPredicates.html#a7e87df9fdd3792e1b0c27ccf85466cfe">llvm::LegalityPredicates::elementTypeIs</a></div><div class="ttdeci">LegalityPredicate elementTypeIs(unsigned TypeIdx, LLT EltTy)</div><div class="ttdoc">True if the type index is a vector with element type EltTy.</div><div class="ttdef"><b>Definition:</b> <a href="LegalityPredicates_8cpp_source.html#l00093">LegalityPredicates.cpp:93</a></div></div>
<div class="ttc" id="aclassllvm_1_1SITargetLowering_html_a88e01d7fa3f418c441946a2200eb12c0"><div class="ttname"><a href="classllvm_1_1SITargetLowering.html#a88e01d7fa3f418c441946a2200eb12c0">llvm::SITargetLowering::shouldEmitFixup</a></div><div class="ttdeci">bool shouldEmitFixup(const GlobalValue *GV) const</div><div class="ttdef"><b>Definition:</b> <a href="SIISelLowering_8cpp_source.html#l05199">SIISelLowering.cpp:5199</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSubtarget_html_aec23a7dbd85b61497ca147984ce54cbe"><div class="ttname"><a href="classllvm_1_1GCNSubtarget.html#aec23a7dbd85b61497ca147984ce54cbe">llvm::GCNSubtarget::hasFractBug</a></div><div class="ttdeci">bool hasFractBug() const</div><div class="ttdef"><b>Definition:</b> <a href="GCNSubtarget_8h_source.html#l00351">GCNSubtarget.h:351</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSubtarget_html_a90329091d5d23e8a4bac1a2803d252b2"><div class="ttname"><a href="classllvm_1_1GCNSubtarget.html#a90329091d5d23e8a4bac1a2803d252b2">llvm::GCNSubtarget::hasNSAEncoding</a></div><div class="ttdeci">bool hasNSAEncoding() const</div><div class="ttdef"><b>Definition:</b> <a href="GCNSubtarget_8h_source.html#l00932">GCNSubtarget.h:932</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSubtarget_html_a80e7aa469ce27c761eef3c645e55ed88a094657b2a471074638cef694d53f50d8"><div class="ttname"><a href="classllvm_1_1GCNSubtarget.html#a80e7aa469ce27c761eef3c645e55ed88a094657b2a471074638cef694d53f50d8">llvm::GCNSubtarget::TrapID::LLVMAMDHSADebugTrap</a></div><div class="ttdeci">@ LLVMAMDHSADebugTrap</div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_aa26c4ddd5be38780eb5b4fff05938fe1"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#aa26c4ddd5be38780eb5b4fff05938fe1">llvm::LegalizeRuleSet::maxScalar</a></div><div class="ttdeci">LegalizeRuleSet &amp; maxScalar(unsigned TypeIdx, const LLT Ty)</div><div class="ttdoc">Ensure the scalar is at most as wide as Ty.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00979">LegalizerInfo.h:979</a></div></div>
<div class="ttc" id="astructllvm_1_1AMDGPU_1_1SIModeRegisterDefaults_html"><div class="ttname"><a href="structllvm_1_1AMDGPU_1_1SIModeRegisterDefaults.html">llvm::AMDGPU::SIModeRegisterDefaults</a></div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUBaseInfo_8h_source.html#l01320">AMDGPUBaseInfo.h:1320</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a762e3485a3d139ec7ed9d30a7f38f74d"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a762e3485a3d139ec7ed9d30a7f38f74d">llvm::AMDGPULegalizerInfo::legalizeInsertVectorElt</a></div><div class="ttdeci">bool legalizeInsertVectorElt(MachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;B) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l02367">AMDGPULegalizerInfo.cpp:2367</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_ae6ede36b7d19177c32526e21fe6ee882"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#ae6ede36b7d19177c32526e21fe6ee882">getDSFPAtomicOpcode</a></div><div class="ttdeci">static unsigned getDSFPAtomicOpcode(Intrinsic::ID IID)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l04123">AMDGPULegalizerInfo.cpp:4123</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSubtarget_html"><div class="ttname"><a href="classllvm_1_1GCNSubtarget.html">llvm::GCNSubtarget</a></div><div class="ttdef"><b>Definition:</b> <a href="GCNSubtarget_8h_source.html#l00032">GCNSubtarget.h:32</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_ae0d1532576a7c6e3bda2d8966700d27a"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#ae0d1532576a7c6e3bda2d8966700d27a">llvm::AMDGPULegalizerInfo::legalizeSBufferLoad</a></div><div class="ttdeci">bool legalizeSBufferLoad(LegalizerHelper &amp;Helper, MachineInstr &amp;MI) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l05240">AMDGPULegalizerInfo.cpp:5240</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab4d4bc901fedd8857f647dcc2c0d71de"><div class="ttname"><a href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">llvm::max</a></div><div class="ttdeci">Expected&lt; ExpressionValue &gt; max(const ExpressionValue &amp;Lhs, const ExpressionValue &amp;Rhs)</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8cpp_source.html#l00337">FileCheck.cpp:337</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_a8e4a67e6620c2b437e4b7a7707ac0914"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#a8e4a67e6620c2b437e4b7a7707ac0914">numElementsNotEven</a></div><div class="ttdeci">static LegalityPredicate numElementsNotEven(unsigned TypeIdx)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l00177">AMDGPULegalizerInfo.cpp:177</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_af13d2c38b3bf7586a8f07d511eda68e8"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#af13d2c38b3bf7586a8f07d511eda68e8">llvm::AMDGPULegalizerInfo::legalizeLoad</a></div><div class="ttdeci">bool legalizeLoad(LegalizerHelper &amp;Helper, MachineInstr &amp;MI) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l02606">AMDGPULegalizerInfo.cpp:2606</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MipsISD_html_a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8"><div class="ttname"><a href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">llvm::MipsISD::Ret</a></div><div class="ttdeci">@ Ret</div><div class="ttdef"><b>Definition:</b> <a href="MipsISelLowering_8h_source.html#l00119">MipsISelLowering.h:119</a></div></div>
<div class="ttc" id="aMachineIRBuilder_8h_html"><div class="ttname"><a href="MachineIRBuilder_8h.html">MachineIRBuilder.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5542d44947f8d964b5ce3b20ea719b44"><div class="ttname"><a href="namespacellvm.html#a5542d44947f8d964b5ce3b20ea719b44">llvm::PowerOf2Ceil</a></div><div class="ttdeci">uint64_t PowerOf2Ceil(uint64_t A)</div><div class="ttdoc">Returns the power of two which is greater than or equal to the given value.</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00469">MathExtras.h:469</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a87b8bfbbe9d8f7146d7f20a5fb42efd0"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a87b8bfbbe9d8f7146d7f20a5fb42efd0">RHS</a></div><div class="ttdeci">Value * RHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00076">X86PartialReduction.cpp:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a30cbed3ba22ea175c004159fb3bd5289"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a30cbed3ba22ea175c004159fb3bd5289">llvm::AMDGPULegalizerInfo::legalizeDebugTrapIntrinsic</a></div><div class="ttdeci">bool legalizeDebugTrapIntrinsic(MachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;B) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l05382">AMDGPULegalizerInfo.cpp:5382</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_a7da5cc6e8aadd4d5fb6dd68f8ec12b7e"><div class="ttname"><a href="classllvm_1_1LLT.html#a7da5cc6e8aadd4d5fb6dd68f8ec12b7e">llvm::LLT::isVector</a></div><div class="ttdeci">constexpr bool isVector() const</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00129">LowLevelTypeImpl.h:129</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_af6ec49293cfc66ba0163caa2da451201"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#af6ec49293cfc66ba0163caa2da451201">llvm::LegalizeRuleSet::scalarize</a></div><div class="ttdeci">LegalizeRuleSet &amp; scalarize(unsigned TypeIdx)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00911">LegalizerInfo.h:911</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6dec2b5d3e04b47adf4d918d678e81c9"><div class="ttname"><a href="namespacellvm.html#a6dec2b5d3e04b47adf4d918d678e81c9">llvm::isPowerOf2_32</a></div><div class="ttdeci">constexpr bool isPowerOf2_32(uint32_t Value)</div><div class="ttdoc">Return true if the argument is a power of two &gt; 0.</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00292">MathExtras.h:292</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_a4dcf08a04e17ce028ce83be250f2b0f9"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#a4dcf08a04e17ce028ce83be250f2b0f9">llvm::LegalizeRuleSet::clampMaxNumElementsStrict</a></div><div class="ttdeci">LegalizeRuleSet &amp; clampMaxNumElementsStrict(unsigned TypeIdx, const LLT EltTy, unsigned NumElts)</div><div class="ttdoc">Express EltTy vectors strictly using vectors with NumElts elements (or scalars when NumElts equals 1)...</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l01172">LegalizerInfo.h:1172</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a22a60a10a1cda01d7cef79f4634984dc"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a22a60a10a1cda01d7cef79f4634984dc">llvm::AMDGPULegalizerInfo::legalizeAtomicCmpXChg</a></div><div class="ttdeci">bool legalizeAtomicCmpXChg(MachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;B) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l02710">AMDGPULegalizerInfo.cpp:2710</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_a8001d93939045f0e2c4b82e1b5eab30a"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#a8001d93939045f0e2c4b82e1b5eab30a">llvm::LegalizeRuleSet::lower</a></div><div class="ttdeci">LegalizeRuleSet &amp; lower()</div><div class="ttdoc">The instruction is lowered.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00659">LegalizerInfo.h:659</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html">llvm::LegalizerHelper</a></div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8h_source.html#l00046">LegalizerHelper.h:46</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_ad2c8a875d4d2a4e73f7a48e64226b265"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#ad2c8a875d4d2a4e73f7a48e64226b265">isLoadStoreLegal</a></div><div class="ttdeci">static bool isLoadStoreLegal(const GCNSubtarget &amp;ST, const LegalityQuery &amp;Query)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l00357">AMDGPULegalizerInfo.cpp:357</a></div></div>
<div class="ttc" id="anamespacellvm_1_1LegalizeMutations_html_acd331b959990c033f8d612adf7701b05"><div class="ttname"><a href="namespacellvm_1_1LegalizeMutations.html#acd331b959990c033f8d612adf7701b05">llvm::LegalizeMutations::changeTo</a></div><div class="ttdeci">LegalizeMutation changeTo(unsigned TypeIdx, LLT Ty)</div><div class="ttdoc">Select this specific type for the given type index.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizeMutations_8cpp_source.html#l00017">LegalizeMutations.cpp:17</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_aa24450f600cabd7212bd264a6dbc190c"><div class="ttname"><a href="classllvm_1_1LLT.html#aa24450f600cabd7212bd264a6dbc190c">llvm::LLT::getElementType</a></div><div class="ttdeci">constexpr LLT getElementType() const</div><div class="ttdoc">Returns the vector's element type. Only valid for vector types.</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00257">LowLevelTypeImpl.h:257</a></div></div>
<div class="ttc" id="anamespacellvm_1_1SPII_html_a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f"><div class="ttname"><a href="namespacellvm_1_1SPII.html#a1c7202c6054fef862bbed45957747cdfa5069619ca8fdce305534f3fe85091a0f">llvm::SPII::Load</a></div><div class="ttdeci">@ Load</div><div class="ttdef"><b>Definition:</b> <a href="SparcInstrInfo_8h_source.html#l00032">SparcInstrInfo.h:32</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba4c399f525bbcf03d72af4b303e6eeca8"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba4c399f525bbcf03d72af4b303e6eeca8">llvm::CmpInst::FCMP_OGT</a></div><div class="ttdeci">@ FCMP_OGT</div><div class="ttdoc">0 0 1 0 True if ordered and greater than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00722">InstrTypes.h:722</a></div></div>
<div class="ttc" id="anamespacellvm_1_1LegalityPredicates_html_a3a162108a998b12a5f51009e450d898c"><div class="ttname"><a href="namespacellvm_1_1LegalityPredicates.html#a3a162108a998b12a5f51009e450d898c">llvm::LegalityPredicates::isPointer</a></div><div class="ttdeci">LegalityPredicate isPointer(unsigned TypeIdx)</div><div class="ttdoc">True iff the specified type index is a pointer (with any address space).</div><div class="ttdef"><b>Definition:</b> <a href="LegalityPredicates_8cpp_source.html#l00079">LegalityPredicates.cpp:79</a></div></div>
<div class="ttc" id="aMachineSink_8cpp_html_a0f36ed1bc17fc1aa97fe291c439a0698"><div class="ttname"><a href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a></div><div class="ttdeci">unsigned const TargetRegisterInfo * TRI</div><div class="ttdef"><b>Definition:</b> <a href="MachineSink_8cpp_source.html#l01628">MachineSink.cpp:1628</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40ab81f279502bb9ca74e6629cfb62844be"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40ab81f279502bb9ca74e6629cfb62844be">llvm::cl::ReallyHidden</a></div><div class="ttdeci">@ ReallyHidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00139">CommandLine.h:139</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_aabec8e9bc89e3e905a71769f8be922c1"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#aabec8e9bc89e3e905a71769f8be922c1">MaxRegisterSize</a></div><div class="ttdeci">static constexpr unsigned MaxRegisterSize</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l00047">AMDGPULegalizerInfo.cpp:47</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_a716801caf6a489a6af735be940932003"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#a716801caf6a489a6af735be940932003">stripAnySourceMods</a></div><div class="ttdeci">static Register stripAnySourceMods(Register OrigSrc, MachineRegisterInfo &amp;MRI)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l02800">AMDGPULegalizerInfo.cpp:2800</a></div></div>
<div class="ttc" id="anamespacellvm_html_a56f5d55460d7e31fc6c3318882f36ac7"><div class="ttname"><a href="namespacellvm.html#a56f5d55460d7e31fc6c3318882f36ac7">llvm::getIConstantVRegSExtVal</a></div><div class="ttdeci">std::optional&lt; int64_t &gt; getIConstantVRegSExtVal(Register VReg, const MachineRegisterInfo &amp;MRI)</div><div class="ttdoc">If VReg is defined by a G_CONSTANT fits in int64_t returns it.</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2GlobalISel_2Utils_8cpp_source.html#l00300">Utils.cpp:300</a></div></div>
<div class="ttc" id="astructllvm_1_1AMDGPUFunctionArgInfo_html_a0e789059bf7f286b7f6bc75b43aac98bac8cd3961f0697f74c890c302ff8cd370"><div class="ttname"><a href="structllvm_1_1AMDGPUFunctionArgInfo.html#a0e789059bf7f286b7f6bc75b43aac98bac8cd3961f0697f74c890c302ff8cd370">llvm::AMDGPUFunctionArgInfo::WORKGROUP_ID_X</a></div><div class="ttdeci">@ WORKGROUP_ID_X</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUArgumentUsageInfo_8h_source.html#l00107">AMDGPUArgumentUsageInfo.h:107</a></div></div>
<div class="ttc" id="anamespacellvm_html_acd6aa057934751aaac54e5c18bcc18eb"><div class="ttname"><a href="namespacellvm.html#acd6aa057934751aaac54e5c18bcc18eb">llvm::commonAlignment</a></div><div class="ttdeci">Align commonAlignment(Align A, uint64_t Offset)</div><div class="ttdoc">Returns the alignment that satisfies both alignments.</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00212">Alignment.h:212</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00055">MD5.cpp:55</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_a37e356f8716e1bf292a3f999818f7a1e"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#a37e356f8716e1bf292a3f999818f7a1e">llvm::LegalizeRuleSet::legalIf</a></div><div class="ttdeci">LegalizeRuleSet &amp; legalIf(LegalityPredicate Predicate)</div><div class="ttdoc">The instruction is legal if predicate is true.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00586">LegalizerInfo.h:586</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a5229692968517de20adc8a76f8cdc736"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a5229692968517de20adc8a76f8cdc736">llvm::AMDGPULegalizerInfo::legalizeFlog</a></div><div class="ttdeci">bool legalizeFlog(MachineInstr &amp;MI, MachineIRBuilder &amp;B, double Log2BaseInverted) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l02735">AMDGPULegalizerInfo.cpp:2735</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSubtarget_html_a4bbc0f0059b8fc54fdd919e558f0b911"><div class="ttname"><a href="classllvm_1_1GCNSubtarget.html#a4bbc0f0059b8fc54fdd919e558f0b911">llvm::GCNSubtarget::getInstrInfo</a></div><div class="ttdeci">const SIInstrInfo * getInstrInfo() const override</div><div class="ttdef"><b>Definition:</b> <a href="GCNSubtarget_8h_source.html#l00222">GCNSubtarget.h:222</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_html_a3cc437d6699fb55c69e78b5d0cad641d"><div class="ttname"><a href="namespacellvm_1_1AMDGPU.html#a3cc437d6699fb55c69e78b5d0cad641d">llvm::AMDGPU::isKernel</a></div><div class="ttdeci">LLVM_READNONE bool isKernel(CallingConv::ID CC)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUBaseInfo_8h_source.html#l01106">AMDGPUBaseInfo.h:1106</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_ab7414b66de51a2dd2f255c46b782157a"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#ab7414b66de51a2dd2f255c46b782157a">llvm::LegalizeRuleSet::minScalar</a></div><div class="ttdeci">LegalizeRuleSet &amp; minScalar(unsigned TypeIdx, const LLT Ty)</div><div class="ttdoc">Ensure the scalar is at least as wide as Ty.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00945">LegalizerInfo.h:945</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSubtarget_html_a7bf65bf4917efcfd2afded9f48afcfee"><div class="ttname"><a href="classllvm_1_1GCNSubtarget.html#a7bf65bf4917efcfd2afded9f48afcfee">llvm::GCNSubtarget::hasGFX10_AEncoding</a></div><div class="ttdeci">bool hasGFX10_AEncoding() const</div><div class="ttdef"><b>Definition:</b> <a href="GCNSubtarget_8h_source.html#l00936">GCNSubtarget.h:936</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a93bbde2af63d129f752ef7c3a0f84c15"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a93bbde2af63d129f752ef7c3a0f84c15">llvm::AMDGPULegalizerInfo::legalizeUnsignedDIV_REM64Impl</a></div><div class="ttdeci">void legalizeUnsignedDIV_REM64Impl(MachineIRBuilder &amp;B, Register DstDivReg, Register DstRemReg, Register Num, Register Den) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l03518">AMDGPULegalizerInfo.cpp:3518</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_ae4165ca7bcbee300d5e9c065adcc1415"><div class="ttname"><a href="classllvm_1_1LLT.html#ae4165ca7bcbee300d5e9c065adcc1415">llvm::LLT::getScalarType</a></div><div class="ttdeci">constexpr LLT getScalarType() const</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00174">LowLevelTypeImpl.h:174</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_af6ee8616537a0f758b8962b4e5076b35"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#af6ee8616537a0f758b8962b4e5076b35">isRegisterVectorType</a></div><div class="ttdeci">static bool isRegisterVectorType(LLT Ty)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l00193">AMDGPULegalizerInfo.cpp:193</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_a639711ef50cb300db9e9ade1445ccf07"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#a639711ef50cb300db9e9ade1445ccf07">getBitcastRegisterType</a></div><div class="ttdeci">static LLT getBitcastRegisterType(const LLT Ty)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l00134">AMDGPULegalizerInfo.cpp:134</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_ac6475a6b99e088697d90032ddab24447"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#ac6475a6b99e088697d90032ddab24447">llvm::AMDGPULegalizerInfo::legalizeFPTOI</a></div><div class="ttdeci">bool legalizeFPTOI(MachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;B, bool Signed) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l02244">AMDGPULegalizerInfo.cpp:2244</a></div></div>
<div class="ttc" id="aAMDGPULibCalls_8cpp_html_afecf1cc1292b07f57d343c0f4d682044"><div class="ttname"><a href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a></div><div class="ttdeci">amdgpu Simplify well known AMD library false FunctionCallee Value * Arg</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULibCalls_8cpp_source.html#l00187">AMDGPULibCalls.cpp:187</a></div></div>
<div class="ttc" id="anamespacellvm_html_a02134e88cd18139c71d9274c7d287ac3"><div class="ttname"><a href="namespacellvm.html#a02134e88cd18139c71d9274c7d287ac3">llvm::getFunctionLiveInPhysReg</a></div><div class="ttdeci">Register getFunctionLiveInPhysReg(MachineFunction &amp;MF, const TargetInstrInfo &amp;TII, MCRegister PhysReg, const TargetRegisterClass &amp;RC, const DebugLoc &amp;DL, LLT RegTy=LLT())</div><div class="ttdoc">Return a virtual register corresponding to the incoming argument register PhysReg.</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2GlobalISel_2Utils_8cpp_source.html#l00729">Utils.cpp:729</a></div></div>
<div class="ttc" id="anamespacellvm_1_1BitmaskEnumDetail_html_a91efa71de05b0c2d00730a0279f58658"><div class="ttname"><a href="namespacellvm_1_1BitmaskEnumDetail.html#a91efa71de05b0c2d00730a0279f58658">llvm::BitmaskEnumDetail::Mask</a></div><div class="ttdeci">constexpr std::underlying_type_t&lt; E &gt; Mask()</div><div class="ttdoc">Get a bitmask with 1s in all places up to the high-order bit of E's largest value.</div><div class="ttdef"><b>Definition:</b> <a href="BitmaskEnum_8h_source.html#l00080">BitmaskEnum.h:80</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_a9e1483f7215664a2315c53c3558d9a8d"><div class="ttname"><a href="X86PartialReduction_8cpp.html#a9e1483f7215664a2315c53c3558d9a8d">LHS</a></div><div class="ttdeci">Value * LHS</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00075">X86PartialReduction.cpp:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html"><div class="ttname"><a href="classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">This is the shared class of boolean and integer constants.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00078">Constants.h:78</a></div></div>
<div class="ttc" id="aMathExtras_8h_html_a9211f62d8e1e6de999eaa63ec0f6ae02"><div class="ttname"><a href="MathExtras_8h.html#a9211f62d8e1e6de999eaa63ec0f6ae02">R2</a></div><div class="ttdeci">#define R2(n)</div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a4f3b6abeaf9c509c93062f2246a0f40b"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a4f3b6abeaf9c509c93062f2246a0f40b">llvm::AMDGPULegalizerInfo::legalizeFDIV</a></div><div class="ttdeci">bool legalizeFDIV(MachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;B) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l03411">AMDGPULegalizerInfo.cpp:3411</a></div></div>
<div class="ttc" id="aclassllvm_1_1MutableArrayRef_html_a3c0eaacba04956ad90add513b021413b"><div class="ttname"><a href="classllvm_1_1MutableArrayRef.html#a3c0eaacba04956ad90add513b021413b">llvm::MutableArrayRef::drop_front</a></div><div class="ttdeci">MutableArrayRef&lt; T &gt; drop_front(size_t N=1) const</div><div class="ttdoc">Drop the first N elements of the array.</div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00385">ArrayRef.h:385</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_aac9ffa01f634953a291122d63c8df338"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#aac9ffa01f634953a291122d63c8df338">llvm::LegalizeRuleSet::customIf</a></div><div class="ttdeci">LegalizeRuleSet &amp; customIf(LegalityPredicate Predicate)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00834">LegalizerInfo.h:834</a></div></div>
<div class="ttc" id="astructllvm_1_1AMDGPUFunctionArgInfo_html_a0e789059bf7f286b7f6bc75b43aac98baf32f3fd30ae548866dc7e45092dd90b9"><div class="ttname"><a href="structllvm_1_1AMDGPUFunctionArgInfo.html#a0e789059bf7f286b7f6bc75b43aac98baf32f3fd30ae548866dc7e45092dd90b9">llvm::AMDGPUFunctionArgInfo::KERNARG_SEGMENT_PTR</a></div><div class="ttdeci">@ KERNARG_SEGMENT_PTR</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUArgumentUsageInfo_8h_source.html#l00103">AMDGPUArgumentUsageInfo.h:103</a></div></div>
<div class="ttc" id="aclassllvm_1_1SIInstrInfo_html_ade90146180a53b9d9edc077b933e70bbab9b475527cd46e49f6208722a1034e92"><div class="ttname"><a href="classllvm_1_1SIInstrInfo.html#ade90146180a53b9d9edc077b933e70bbab9b475527cd46e49f6208722a1034e92">llvm::SIInstrInfo::MO_NONE</a></div><div class="ttdeci">@ MO_NONE</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8h_source.html#l00157">SIInstrInfo.h:157</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_aae26f659b722d1d053b93b5f1735f52f"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aae26f659b722d1d053b93b5f1735f52f">llvm::SmallVectorImpl::truncate</a></div><div class="ttdeci">void truncate(size_type N)</div><div class="ttdoc">Like resize, but requires that N is less than size().</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00648">SmallVector.h:648</a></div></div>
<div class="ttc" id="anamespacellvm_1_1LegalityPredicates_html_ae56d6ae68f8659cfaa29fb7cb601f111"><div class="ttname"><a href="namespacellvm_1_1LegalityPredicates.html#ae56d6ae68f8659cfaa29fb7cb601f111">llvm::LegalityPredicates::typeIs</a></div><div class="ttdeci">LegalityPredicate typeIs(unsigned TypeIdx, LLT TypesInit)</div><div class="ttdoc">True iff the given type index is the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="LegalityPredicates_8cpp_source.html#l00028">LegalityPredicates.cpp:28</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a0e7378d479179ae1df0b61b83c637a4d"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a0e7378d479179ae1df0b61b83c637a4d">llvm::AMDGPULegalizerInfo::legalizeIntrinsicTrunc</a></div><div class="ttdeci">bool legalizeIntrinsicTrunc(MachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;B) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l02136">AMDGPULegalizerInfo.cpp:2136</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_aed4feaa9baf8df7fe949b9a5ce246646"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#aed4feaa9baf8df7fe949b9a5ce246646">elementTypeIsLegal</a></div><div class="ttdeci">static LegalityPredicate elementTypeIsLegal(unsigned TypeIdx)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l00218">AMDGPULegalizerInfo.cpp:218</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPUTargetMachine_html"><div class="ttname"><a href="classllvm_1_1AMDGPUTargetMachine.html">llvm::AMDGPUTargetMachine</a></div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUTargetMachine_8h_source.html#l00029">AMDGPUTargetMachine.h:29</a></div></div>
<div class="ttc" id="anamespacellvm_html_aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b"><div class="ttname"><a href="namespacellvm.html#aac36edd0f1ce976f0025c98e88d3830eac33315685a0cba3ce53be378b3c7874b">llvm::RecurKind::And</a></div><div class="ttdeci">@ And</div><div class="ttdoc">Bitwise or logical AND of integers.</div></div>
<div class="ttc" id="aBinaryFormat_2ELF_8h_html"><div class="ttname"><a href="BinaryFormat_2ELF_8h.html">ELF.h</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_a0022aa73e6337684561159d1f7929966"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#a0022aa73e6337684561159d1f7929966">packImage16bitOpsToDwords</a></div><div class="ttdeci">static void packImage16bitOpsToDwords(MachineIRBuilder &amp;B, MachineInstr &amp;MI, SmallVectorImpl&lt; Register &gt; &amp;PackedAddrs, unsigned ArgOffset, const AMDGPU::ImageDimIntrinsicInfo *Intr, bool IsA16, bool IsG16)</div><div class="ttdoc">Turn a set of s16 typed registers in AddrRegs into a dword sized vector with s16 typed elements.</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l04780">AMDGPULegalizerInfo.cpp:4780</a></div></div>
<div class="ttc" id="aclassllvm_1_1MutableArrayRef_html"><div class="ttname"><a href="classllvm_1_1MutableArrayRef.html">llvm::MutableArrayRef</a></div><div class="ttdoc">MutableArrayRef - Represent a mutable reference to an array (0 or more elements consecutively in memo...</div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00027">ArrayRef.h:27</a></div></div>
<div class="ttc" id="astructllvm_1_1AMDGPUFunctionArgInfo_html_a0e789059bf7f286b7f6bc75b43aac98ba42b0ab73a3671c39fa2798ffe9e80747"><div class="ttname"><a href="structllvm_1_1AMDGPUFunctionArgInfo.html#a0e789059bf7f286b7f6bc75b43aac98ba42b0ab73a3671c39fa2798ffe9e80747">llvm::AMDGPUFunctionArgInfo::IMPLICIT_ARG_PTR</a></div><div class="ttdeci">@ IMPLICIT_ARG_PTR</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUArgumentUsageInfo_8h_source.html#l00112">AMDGPUArgumentUsageInfo.h:112</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSubtarget_html_a0985b28a440a19cc9e6b8229e75b5152"><div class="ttname"><a href="classllvm_1_1GCNSubtarget.html#a0985b28a440a19cc9e6b8229e75b5152">llvm::GCNSubtarget::hasA16</a></div><div class="ttdeci">bool hasA16() const</div><div class="ttdef"><b>Definition:</b> <a href="GCNSubtarget_8h_source.html#l00918">GCNSubtarget.h:918</a></div></div>
<div class="ttc" id="aMipsDisassembler_8cpp_html_a15b5b86944f6df97d2c3659d77f51f91"><div class="ttname"><a href="MipsDisassembler_8cpp.html#a15b5b86944f6df97d2c3659d77f51f91">getReg</a></div><div class="ttdeci">static unsigned getReg(const MCDisassembler *D, unsigned RC, unsigned RegNo)</div><div class="ttdef"><b>Definition:</b> <a href="MipsDisassembler_8cpp_source.html#l00521">MipsDisassembler.cpp:521</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_ab09679b541a6ba1219b3602569847364"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ab09679b541a6ba1219b3602569847364">llvm::MachineOperand::CreateImm</a></div><div class="ttdeci">static MachineOperand CreateImm(int64_t Val)</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00815">MachineOperand.h:815</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1Hwreg_html_a018924463515df5f66f3c5a039750da8aebfc48ed48afe18e84417d0de513b6bb"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a018924463515df5f66f3c5a039750da8aebfc48ed48afe18e84417d0de513b6bb">llvm::AMDGPU::Hwreg::ID_MODE</a></div><div class="ttdeci">@ ID_MODE</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00395">SIDefines.h:395</a></div></div>
<div class="ttc" id="astructllvm_1_1AMDGPUFunctionArgInfo_html_a0e789059bf7f286b7f6bc75b43aac98bacc30be6da6e4621e76201b6ee1b7d2ac"><div class="ttname"><a href="structllvm_1_1AMDGPUFunctionArgInfo.html#a0e789059bf7f286b7f6bc75b43aac98bacc30be6da6e4621e76201b6ee1b7d2ac">llvm::AMDGPUFunctionArgInfo::IMPLICIT_BUFFER_PTR</a></div><div class="ttdeci">@ IMPLICIT_BUFFER_PTR</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUArgumentUsageInfo_8h_source.html#l00111">AMDGPUArgumentUsageInfo.h:111</a></div></div>
<div class="ttc" id="ainclude_2llvm_2Demangle_2README_8txt_html_a9d56f6c541a0ab888755f9bc198b8eca"><div class="ttname"><a href="include_2llvm_2Demangle_2README_8txt.html#a9d56f6c541a0ab888755f9bc198b8eca">f</a></div><div class="ttdeci">Itanium Name Demangler i e convert the string _Z1fv into f()&quot;. You can also use the CRTP base ManglingParser to perform some simple analysis on the mangled name</div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="anamespacellvm_1_1LegalityPredicates_html_a45c9d1ec6a1b46697b0363f2c8a605c5"><div class="ttname"><a href="namespacellvm_1_1LegalityPredicates.html#a45c9d1ec6a1b46697b0363f2c8a605c5">llvm::LegalityPredicates::smallerThan</a></div><div class="ttdeci">LegalityPredicate smallerThan(unsigned TypeIdx0, unsigned TypeIdx1)</div><div class="ttdoc">True iff the first type index has a smaller total bit size than second type index.</div><div class="ttdef"><b>Definition:</b> <a href="LegalityPredicates_8cpp_source.html#l00117">LegalityPredicates.cpp:117</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a5552c2fa1505412508e493149af31543"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a5552c2fa1505412508e493149af31543">llvm::AMDGPULegalizerInfo::legalizeFExp</a></div><div class="ttdeci">bool legalizeFExp(MachineInstr &amp;MI, MachineIRBuilder &amp;B) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l02750">AMDGPULegalizerInfo.cpp:2750</a></div></div>
<div class="ttc" id="anamespacellvm_html_abfcab32516704f11d146c757f402ad5ca1cde8c8828756cdaf2a93260e247ae31"><div class="ttname"><a href="namespacellvm.html#abfcab32516704f11d146c757f402ad5ca1cde8c8828756cdaf2a93260e247ae31">llvm::DS_Warning</a></div><div class="ttdeci">@ DS_Warning</div><div class="ttdef"><b>Definition:</b> <a href="DiagnosticInfo_8h_source.html#l00051">DiagnosticInfo.h:51</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_ac2dc0fa143c9f2127f0501734577a0a0"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ac2dc0fa143c9f2127f0501734577a0a0">llvm::MachineFunction::getInfo</a></div><div class="ttdeci">Ty * getInfo()</div><div class="ttdoc">getInfo - Keep track of various per-function pieces of information for backends that would like to do...</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00770">MachineFunction.h:770</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a25a4c14864c6f574bc99e19e15a8b4d2"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a25a4c14864c6f574bc99e19e15a8b4d2">llvm::LegalizerHelper::moreElementsVectorDst</a></div><div class="ttdeci">void moreElementsVectorDst(MachineInstr &amp;MI, LLT MoreTy, unsigned OpIdx)</div><div class="ttdoc">Legalize a single operand OpIdx of the machine instruction MI as a Def by performing it with addition...</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l01472">LegalizerHelper.cpp:1472</a></div></div>
<div class="ttc" id="aclassllvm_1_1SIMachineFunctionInfo_html_a1ed290a69b0cfd44ce4b21cf61338d61"><div class="ttname"><a href="classllvm_1_1SIMachineFunctionInfo.html#a1ed290a69b0cfd44ce4b21cf61338d61">llvm::SIMachineFunctionInfo::getPreloadedValue</a></div><div class="ttdeci">std::tuple&lt; const ArgDescriptor *, const TargetRegisterClass *, LLT &gt; getPreloadedValue(AMDGPUFunctionArgInfo::PreloadedValue Value) const</div><div class="ttdef"><b>Definition:</b> <a href="SIMachineFunctionInfo_8h_source.html#l00830">SIMachineFunctionInfo.h:830</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_a1b1955725d8c86c73337fdf8aa0e3ef0"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#a1b1955725d8c86c73337fdf8aa0e3ef0">llvm::LegalizeRuleSet::moreElementsIf</a></div><div class="ttdeci">LegalizeRuleSet &amp; moreElementsIf(LegalityPredicate Predicate, LegalizeMutation Mutation)</div><div class="ttdoc">Add more elements to reach the type selected by the mutation if the predicate is true.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00783">LegalizerInfo.h:783</a></div></div>
<div class="ttc" id="astructllvm_1_1AMDGPU_1_1MIMGBaseOpcodeInfo_html"><div class="ttname"><a href="structllvm_1_1AMDGPU_1_1MIMGBaseOpcodeInfo.html">llvm::AMDGPU::MIMGBaseOpcodeInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUBaseInfo_8h_source.html#l00343">AMDGPUBaseInfo.h:343</a></div></div>
<div class="ttc" id="aAMDGPUBaseInfo_8cpp_html_ad18f9973176b870e59d30b81d8a1091e"><div class="ttname"><a href="AMDGPUBaseInfo_8cpp.html#ad18f9973176b870e59d30b81d8a1091e">Intr</a></div><div class="ttdeci">unsigned Intr</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUBaseInfo_8cpp_source.html#l02664">AMDGPUBaseInfo.cpp:2664</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_ae468aab9eee24365f029a78836e6435d"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#ae468aab9eee24365f029a78836e6435d">llvm::AMDGPULegalizerInfo::legalizeFceil</a></div><div class="ttdeci">bool legalizeFceil(MachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;B) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l02073">AMDGPULegalizerInfo.cpp:2073</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A, *B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00086">README_ALTIVEC.txt:86</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_a69fd9b044c902e826f57ef7710514e42"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#a69fd9b044c902e826f57ef7710514e42">emitReciprocalU64</a></div><div class="ttdeci">static std::pair&lt; Register, Register &gt; emitReciprocalU64(MachineIRBuilder &amp;B, Register Val)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l03486">AMDGPULegalizerInfo.cpp:3486</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_a3f7a45f6e10668a5f702e26bca80d18e"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">llvm::MachineInstr::getOperand</a></div><div class="ttdeci">const MachineOperand &amp; getOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00526">MachineInstr.h:526</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0eea77e7bfa82e0219d2ec7b4efbc94f"><div class="ttname"><a href="namespacellvm.html#a0eea77e7bfa82e0219d2ec7b4efbc94f">llvm::popcount</a></div><div class="ttdeci">int popcount(T Value) noexcept</div><div class="ttdoc">Count the number of set bits in a value.</div><div class="ttdef"><b>Definition:</b> <a href="bit_8h_source.html#l00349">bit.h:349</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSubtarget_html_aadc55ee80218e97fbccb05099877eb51"><div class="ttname"><a href="classllvm_1_1GCNSubtarget.html#aadc55ee80218e97fbccb05099877eb51">llvm::GCNSubtarget::getTargetLowering</a></div><div class="ttdeci">const SITargetLowering * getTargetLowering() const override</div><div class="ttdef"><b>Definition:</b> <a href="GCNSubtarget_8h_source.html#l00230">GCNSubtarget.h:230</a></div></div>
<div class="ttc" id="aOcamlGCPrinter_8cpp_html_afcf2f797ed287a723263583c9b1c1bce"><div class="ttname"><a href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a></div><div class="ttdeci">static GCMetadataPrinterRegistry::Add&lt; OcamlGCMetadataPrinter &gt; Y(&quot;ocaml&quot;, &quot;ocaml 3.10-compatible collector&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1Register_html_af4aef3aa547629015801993f9d393109"><div class="ttname"><a href="classllvm_1_1Register.html#af4aef3aa547629015801993f9d393109">llvm::Register::isPhysicalRegister</a></div><div class="ttdeci">static bool isPhysicalRegister(unsigned Reg)</div><div class="ttdoc">Return true if the specified register number is in the physical register namespace.</div><div class="ttdef"><b>Definition:</b> <a href="Register_8h_source.html#l00065">Register.h:65</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPUMachineFunction_html_aafb5cd8f55deecfdc2acb25c44491a36"><div class="ttname"><a href="classllvm_1_1AMDGPUMachineFunction.html#aafb5cd8f55deecfdc2acb25c44491a36">llvm::AMDGPUMachineFunction::allocateLDSGlobal</a></div><div class="ttdeci">unsigned allocateLDSGlobal(const DataLayout &amp;DL, const GlobalVariable &amp;GV)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUMachineFunction_8h_source.html#l00100">AMDGPUMachineFunction.h:100</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetRegisterClass_html"><div class="ttname"><a href="classllvm_1_1TargetRegisterClass.html">llvm::TargetRegisterClass</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00045">TargetRegisterInfo.h:45</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a6451bf061f754edbcd6043a20bfc663c"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a6451bf061f754edbcd6043a20bfc663c">llvm::AMDGPULegalizerInfo::legalizeFDIV16</a></div><div class="ttdeci">bool legalizeFDIV16(MachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;B) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l03824">AMDGPULegalizerInfo.cpp:3824</a></div></div>
<div class="ttc" id="astructllvm_1_1AMDGPUFunctionArgInfo_html_a0e789059bf7f286b7f6bc75b43aac98ba99b2fc1acb49563d2e3ad89278385103"><div class="ttname"><a href="structllvm_1_1AMDGPUFunctionArgInfo.html#a0e789059bf7f286b7f6bc75b43aac98ba99b2fc1acb49563d2e3ad89278385103">llvm::AMDGPUFunctionArgInfo::WORKITEM_ID_Y</a></div><div class="ttdeci">@ WORKITEM_ID_Y</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUArgumentUsageInfo_8h_source.html#l00116">AMDGPUArgumentUsageInfo.h:116</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_a84458721a72ec165f39c359c1e36268f"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#a84458721a72ec165f39c359c1e36268f">llvm::LegalizeRuleSet::fewerElementsIf</a></div><div class="ttdeci">LegalizeRuleSet &amp; fewerElementsIf(LegalityPredicate Predicate, LegalizeMutation Mutation)</div><div class="ttdoc">Remove elements to reach the type selected by the mutation if the predicate is true.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00792">LegalizerInfo.h:792</a></div></div>
<div class="ttc" id="anamespacellvm_html_afb65eef479f0473d0fe1666b80155237"><div class="ttname"><a href="namespacellvm.html#afb65eef479f0473d0fe1666b80155237">llvm::NextPowerOf2</a></div><div class="ttdeci">constexpr uint64_t NextPowerOf2(uint64_t A)</div><div class="ttdoc">Returns the next power of two (in 64-bits) that is strictly greater than A.</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00450">MathExtras.h:450</a></div></div>
<div class="ttc" id="astructllvm_1_1MachinePointerInfo_html_aa70144cee705b3f0db7f53ff3bf004e9"><div class="ttname"><a href="structllvm_1_1MachinePointerInfo.html#aa70144cee705b3f0db7f53ff3bf004e9">llvm::MachinePointerInfo::getGOT</a></div><div class="ttdeci">static MachinePointerInfo getGOT(MachineFunction &amp;MF)</div><div class="ttdoc">Return a MachinePointerInfo record that refers to a GOT entry.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8cpp_source.html#l01058">MachineOperand.cpp:1058</a></div></div>
<div class="ttc" id="anamespacellvm_1_1numbers_html_a54065ab2811468d221bcdfa0eaf74012"><div class="ttname"><a href="namespacellvm_1_1numbers.html#a54065ab2811468d221bcdfa0eaf74012">llvm::numbers::ln10f</a></div><div class="ttdeci">constexpr float ln10f</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00049">MathExtras.h:49</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a7abf5fb4071cb25dbce06dfb5ee3c937"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a></div><div class="ttdeci">static GCRegistry::Add&lt; OcamlGC &gt; B(&quot;ocaml&quot;, &quot;ocaml 3.10-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html"><div class="ttname"><a href="classllvm_1_1MachineOperand.html">llvm::MachineOperand</a></div><div class="ttdoc">MachineOperand class - Representation of each machine instruction operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00048">MachineOperand.h:48</a></div></div>
<div class="ttc" id="aX86InterleavedAccess_8cpp_html_a76c9562101f54d25482f88ae29ed6131"><div class="ttname"><a href="X86InterleavedAccess_8cpp.html#a76c9562101f54d25482f88ae29ed6131">Concat</a></div><div class="ttdeci">static constexpr int Concat[]</div><div class="ttdef"><b>Definition:</b> <a href="X86InterleavedAccess_8cpp_source.html#l00239">X86InterleavedAccess.cpp:239</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html_ac0ca0a03e016a6da0766af3c725a7c47"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html#ac0ca0a03e016a6da0766af3c725a7c47">llvm::MachineIRBuilder::getMF</a></div><div class="ttdeci">MachineFunction &amp; getMF()</div><div class="ttdoc">Getter for the function we currently build.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l00273">MachineIRBuilder.h:273</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_a3989251b1a714fc8296685f77eac6e87"><div class="ttname"><a href="classllvm_1_1LLT.html#a3989251b1a714fc8296685f77eac6e87">llvm::LLT::isScalar</a></div><div class="ttdeci">constexpr bool isScalar() const</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00123">LowLevelTypeImpl.h:123</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a217e0207d9cc8e046c2dccbf0e4bb198"><div class="ttname"><a href="classllvm_1_1APInt.html#a217e0207d9cc8e046c2dccbf0e4bb198">llvm::APInt::getZExtValue</a></div><div class="ttdeci">uint64_t getZExtValue() const</div><div class="ttdoc">Get zero extended value.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01494">APInt.h:1494</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPUAS_html_ab1843c6566c95d94d6e36a857b8d2b3fa1caf1e287a5fe7250388d66ed72aa0c1"><div class="ttname"><a href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3fa1caf1e287a5fe7250388d66ed72aa0c1">llvm::AMDGPUAS::CONSTANT_ADDRESS_32BIT</a></div><div class="ttdeci">@ CONSTANT_ADDRESS_32BIT</div><div class="ttdoc">Address space for 32-bit constant memory.</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPU_8h_source.html#l00380">AMDGPU.h:380</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_ae74a60e5edcee0609a1e4fddc62a8a01"><div class="ttname"><a href="classllvm_1_1LLT.html#ae74a60e5edcee0609a1e4fddc62a8a01">llvm::LLT::scalarOrVector</a></div><div class="ttdeci">static constexpr LLT scalarOrVector(ElementCount EC, LLT ScalarTy)</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00100">LowLevelTypeImpl.h:100</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_ad0b3d8447f88377b62d9c019f3c4e118"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#ad0b3d8447f88377b62d9c019f3c4e118">llvm::SmallVectorImpl::resize</a></div><div class="ttdeci">void resize(size_type N)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00642">SmallVector.h:642</a></div></div>
<div class="ttc" id="anamespacellvm_html_a99416758c13252bef45320a6ba6aa09c"><div class="ttname"><a href="namespacellvm.html#a99416758c13252bef45320a6ba6aa09c">llvm::MutableArrayRef</a></div><div class="ttdeci">MutableArrayRef(T &amp;OneElt) -&gt; MutableArrayRef&lt; T &gt;</div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a94974538095721fcce4cf479555bc25c"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a94974538095721fcce4cf479555bc25c">llvm::AMDGPULegalizerInfo::legalizeBVHIntrinsic</a></div><div class="ttdeci">bool legalizeBVHIntrinsic(MachineInstr &amp;MI, MachineIRBuilder &amp;B) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l05403">AMDGPULegalizerInfo.cpp:5403</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPUTargetLowering_html_aabb66ae6636b6dbd45c1b66dd9353821a2ebed7459a9c75beedcb87a45b3800cf"><div class="ttname"><a href="classllvm_1_1AMDGPUTargetLowering.html#aabb66ae6636b6dbd45c1b66dd9353821a2ebed7459a9c75beedcb87a45b3800cf">llvm::AMDGPUTargetLowering::PRIVATE_BASE</a></div><div class="ttdeci">@ PRIVATE_BASE</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUISelLowering_8h_source.html#l00335">AMDGPUISelLowering.h:335</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a59e8a7f7af57ac84f0bfa83a2e6cd4c3"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a59e8a7f7af57ac84f0bfa83a2e6cd4c3">llvm::AMDGPULegalizerInfo::legalizePreloadedArgIntrin</a></div><div class="ttdeci">bool legalizePreloadedArgIntrin(MachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;B, AMDGPUFunctionArgInfo::PreloadedValue ArgType) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l03318">AMDGPULegalizerInfo.cpp:3318</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a89cb241c17c5ea1f61fe099207f77eef"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a89cb241c17c5ea1f61fe099207f77eef">llvm::AMDGPULegalizerInfo::fixStoreSourceType</a></div><div class="ttdeci">Register fixStoreSourceType(MachineIRBuilder &amp;B, Register VData, bool IsFormat) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l04372">AMDGPULegalizerInfo.cpp:4372</a></div></div>
<div class="ttc" id="aCSEInfo_8cpp_html_a75f8a8519c2c9b30e7c06dc5e256fffa"><div class="ttname"><a href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a></div><div class="ttdeci">Analysis containing CSE Info</div><div class="ttdef"><b>Definition:</b> <a href="CSEInfo_8cpp_source.html#l00027">CSEInfo.cpp:27</a></div></div>
<div class="ttc" id="aclassllvm_1_1GISelChangeObserver_html_a1f637715070a99aa4140444e12697f9a"><div class="ttname"><a href="classllvm_1_1GISelChangeObserver.html#a1f637715070a99aa4140444e12697f9a">llvm::GISelChangeObserver::changingInstr</a></div><div class="ttdeci">virtual void changingInstr(MachineInstr &amp;MI)=0</div><div class="ttdoc">This instruction is about to be mutated in some way.</div></div>
<div class="ttc" id="aclassllvm_1_1SIRegisterInfo_html"><div class="ttname"><a href="classllvm_1_1SIRegisterInfo.html">llvm::SIRegisterInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="SIRegisterInfo_8h_source.html#l00030">SIRegisterInfo.h:30</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPUSubtarget_html_a58a778423d8bdcf6b6f94172ff8271b2"><div class="ttname"><a href="classllvm_1_1AMDGPUSubtarget.html#a58a778423d8bdcf6b6f94172ff8271b2">llvm::AMDGPUSubtarget::getMaxWorkitemID</a></div><div class="ttdeci">unsigned getMaxWorkitemID(const Function &amp;Kernel, unsigned Dimension) const</div><div class="ttdoc">Return the maximum workitem ID value in the function, for the given (0, 1, 2) dimension.</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUSubtarget_8cpp_source.html#l00464">AMDGPUSubtarget.cpp:464</a></div></div>
<div class="ttc" id="aclassllvm_1_1SIInstrInfo_html_ade90146180a53b9d9edc077b933e70bba563c4436cfc2d24b41acd1cfd4357977"><div class="ttname"><a href="classllvm_1_1SIInstrInfo.html#ade90146180a53b9d9edc077b933e70bba563c4436cfc2d24b41acd1cfd4357977">llvm::SIInstrInfo::MO_REL32</a></div><div class="ttdeci">@ MO_REL32</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8h_source.html#l00166">SIInstrInfo.h:166</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_a2e9c70ce46c94a7dbccb0aefd6219571"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#a2e9c70ce46c94a7dbccb0aefd6219571">llvm::LegalizeRuleSet::clampMaxNumElements</a></div><div class="ttdeci">LegalizeRuleSet &amp; clampMaxNumElements(unsigned TypeIdx, const LLT EltTy, unsigned MaxElements)</div><div class="ttdoc">Limit the number of elements in EltTy vectors to at most MaxElements.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l01131">LegalizerInfo.h:1131</a></div></div>
<div class="ttc" id="aELFObjHandler_8cpp_html_a043cdaf7b89aaeeb127be5d93411637f"><div class="ttname"><a href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a></div><div class="ttdeci">uint64_t Align</div><div class="ttdef"><b>Definition:</b> <a href="ELFObjHandler_8cpp_source.html#l00082">ELFObjHandler.cpp:82</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_accff22ec9fbd872b5976a4a2dc20ef56"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#accff22ec9fbd872b5976a4a2dc20ef56">isNot</a></div><div class="ttdeci">static bool isNot(const MachineRegisterInfo &amp;MRI, const MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l03207">AMDGPULegalizerInfo.cpp:3207</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a880b2600880891353accd4a93efedace"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a880b2600880891353accd4a93efedace">llvm::AMDGPULegalizerInfo::legalizeTrapIntrinsic</a></div><div class="ttdeci">bool legalizeTrapIntrinsic(MachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;B) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l05291">AMDGPULegalizerInfo.cpp:5291</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_html_a176f799037e98f7743008924c4b72266"><div class="ttname"><a href="namespacellvm_1_1AMDGPU.html#a176f799037e98f7743008924c4b72266">llvm::AMDGPU::getMIMGOpcode</a></div><div class="ttdeci">int getMIMGOpcode(unsigned BaseOpcode, unsigned MIMGEncoding, unsigned VDataDwords, unsigned VAddrDwords)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUBaseInfo_8cpp_source.html#l00225">AMDGPUBaseInfo.cpp:225</a></div></div>
<div class="ttc" id="astructllvm_1_1Align_html"><div class="ttname"><a href="structllvm_1_1Align.html">llvm::Align</a></div><div class="ttdoc">This struct is a compact representation of a valid (non-zero power of two) alignment.</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00039">Alignment.h:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_a40d954b9cf9ee8b545a78725f2549cba"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a40d954b9cf9ee8b545a78725f2549cba">llvm::MachineRegisterInfo::getVRegDef</a></div><div class="ttdeci">MachineInstr * getVRegDef(Register Reg) const</div><div class="ttdoc">getVRegDef - Return the machine instr that defines the specified virtual register or null if none is ...</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00398">MachineRegisterInfo.cpp:398</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a04975f118b224e8cd322d1aa86f2ceb2"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a04975f118b224e8cd322d1aa86f2ceb2">llvm::AMDGPULegalizerInfo::legalizeGlobalValue</a></div><div class="ttdeci">bool legalizeGlobalValue(MachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;B) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l02497">AMDGPULegalizerInfo.cpp:2497</a></div></div>
<div class="ttc" id="aclassllvm_1_1SITargetLowering_html_a21805127d5ae570ea5776ee098c951f1"><div class="ttname"><a href="classllvm_1_1SITargetLowering.html#a21805127d5ae570ea5776ee098c951f1">llvm::SITargetLowering::allowsMisalignedMemoryAccessesImpl</a></div><div class="ttdeci">bool allowsMisalignedMemoryAccessesImpl(unsigned Size, unsigned AddrSpace, Align Alignment, MachineMemOperand::Flags Flags=MachineMemOperand::MONone, unsigned *IsFast=nullptr) const</div><div class="ttdef"><b>Definition:</b> <a href="SIISelLowering_8cpp_source.html#l01401">SIISelLowering.cpp:1401</a></div></div>
<div class="ttc" id="aErlangGCPrinter_8cpp_html_a74b474c0616ab55c1d9487f11fd31d26"><div class="ttname"><a href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a></div><div class="ttdeci">static GCMetadataPrinterRegistry::Add&lt; ErlangGCPrinter &gt; X(&quot;erlang&quot;, &quot;erlang-compatible garbage collector&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_a956ffd0de93798f523683b447646dd92"><div class="ttname"><a href="classllvm_1_1LLT.html#a956ffd0de93798f523683b447646dd92">llvm::LLT::getSizeInBits</a></div><div class="ttdeci">constexpr TypeSize getSizeInBits() const</div><div class="ttdoc">Returns the total size of the type. Must only be called on sized types.</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00159">LowLevelTypeImpl.h:159</a></div></div>
<div class="ttc" id="anamespacellvm_1_1SI_1_1KernelInputOffsets_html_a58b4eae4b0a45d478c7c0f3959b04612a50479b16c92722ed623d81fe63879639"><div class="ttname"><a href="namespacellvm_1_1SI_1_1KernelInputOffsets.html#a58b4eae4b0a45d478c7c0f3959b04612a50479b16c92722ed623d81fe63879639">llvm::SI::KernelInputOffsets::NGROUPS_Z</a></div><div class="ttdeci">@ NGROUPS_Z</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8h_source.html#l01338">SIInstrInfo.h:1338</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html">llvm::MachineBasicBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00094">MachineBasicBlock.h:94</a></div></div>
<div class="ttc" id="anamespacellvm_html_a058782b98991f0719657d9008d3df41b"><div class="ttname"><a href="namespacellvm.html#a058782b98991f0719657d9008d3df41b">llvm::Log2_32_Ceil</a></div><div class="ttdeci">unsigned Log2_32_Ceil(uint32_t Value)</div><div class="ttdoc">Return the ceil log base 2 of the specified value, 32 if the value is zero.</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00395">MathExtras.h:395</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html_aa3595f2a07a2268edcfbf41ffa40cabf"><div class="ttname"><a href="classllvm_1_1StringRef.html#aa3595f2a07a2268edcfbf41ffa40cabf">llvm::StringRef::equals</a></div><div class="ttdeci">bool equals(StringRef RHS) const</div><div class="ttdoc">equals - Check for string equality, this is more efficient than compare() when the relative ordering ...</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00164">StringRef.h:164</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a07267e1f318ef8357bce5a08d60f78de"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a07267e1f318ef8357bce5a08d60f78de">llvm::AMDGPULegalizerInfo::legalizeFPTruncRound</a></div><div class="ttdeci">bool legalizeFPTruncRound(MachineInstr &amp;MI, MachineIRBuilder &amp;B) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l05550">AMDGPULegalizerInfo.cpp:5550</a></div></div>
<div class="ttc" id="aclassllvm_1_1SIInstrInfo_html_ade90146180a53b9d9edc077b933e70bbafe82a0bc03151bffd10d66929b1ed545"><div class="ttname"><a href="classllvm_1_1SIInstrInfo.html#ade90146180a53b9d9edc077b933e70bbafe82a0bc03151bffd10d66929b1ed545">llvm::SIInstrInfo::MO_ABS32_LO</a></div><div class="ttdeci">@ MO_ABS32_LO</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8h_source.html#l00173">SIInstrInfo.h:173</a></div></div>
<div class="ttc" id="aADT_2tmp_8txt_html_a07ed0bfaa124c15897944fe3eaa971ab"><div class="ttname"><a href="ADT_2tmp_8txt.html#a07ed0bfaa124c15897944fe3eaa971ab">uint64_t</a></div><div class="ttdeci">Class for arbitrary precision integers APInt is a functional replacement for common case unsigned integer type like unsigned long or uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="ADT_2tmp_8txt_source.html#l00001">tmp.txt:1</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_aeb19add07877585827f7b9b2deca8ff2"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#aeb19add07877585827f7b9b2deca8ff2">llvm::AMDGPULegalizerInfo::legalizeAtomicIncDec</a></div><div class="ttdeci">bool legalizeAtomicIncDec(MachineInstr &amp;MI, MachineIRBuilder &amp;B, bool IsInc) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l04638">AMDGPULegalizerInfo.cpp:4638</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPUSubtarget_html_ae66cd705df2870244a05921f551ff131"><div class="ttname"><a href="classllvm_1_1AMDGPUSubtarget.html#ae66cd705df2870244a05921f551ff131">llvm::AMDGPUSubtarget::getWavefrontSize</a></div><div class="ttdeci">unsigned getWavefrontSize() const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUSubtarget_8h_source.html#l00202">AMDGPUSubtarget.h:202</a></div></div>
<div class="ttc" id="aclassllvm_1_1SrcOp_html_a9370c0de85c12bd0062063b7fcbc64ed"><div class="ttname"><a href="classllvm_1_1SrcOp.html#a9370c0de85c12bd0062063b7fcbc64ed">llvm::SrcOp::getImm</a></div><div class="ttdeci">int64_t getImm() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l00202">MachineIRBuilder.h:202</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1Hwreg_html_a2dd789820f1036a942eb3ee6a4b8a71da607eee7dd279e8007ab5c43c71f1a2bb"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a2dd789820f1036a942eb3ee6a4b8a71da607eee7dd279e8007ab5c43c71f1a2bb">llvm::AMDGPU::Hwreg::WIDTH_M1_SHIFT_</a></div><div class="ttdeci">@ WIDTH_M1_SHIFT_</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00443">SIDefines.h:443</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPUAS_html_ab1843c6566c95d94d6e36a857b8d2b3fabf4559ef958a13c33f6ec7ed13fd44e5"><div class="ttname"><a href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3fabf4559ef958a13c33f6ec7ed13fd44e5">llvm::AMDGPUAS::GLOBAL_ADDRESS</a></div><div class="ttdeci">@ GLOBAL_ADDRESS</div><div class="ttdoc">Address space for global memory (RAT0, VTX0).</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPU_8h_source.html#l00373">AMDGPU.h:373</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPUSubtarget_html_a53c0ee4138bfbf9e0410a65e0eaa36e2a0a29519a2da61e1cf78d898e26fef446"><div class="ttname"><a href="classllvm_1_1AMDGPUSubtarget.html#a53c0ee4138bfbf9e0410a65e0eaa36e2a0a29519a2da61e1cf78d898e26fef446">llvm::AMDGPUSubtarget::GFX10</a></div><div class="ttdeci">@ GFX10</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUSubtarget_8h_source.html#l00041">AMDGPUSubtarget.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1GISelChangeObserver_html_a45a05a932f80f51023592ff5131d56a5"><div class="ttname"><a href="classllvm_1_1GISelChangeObserver.html#a45a05a932f80f51023592ff5131d56a5">llvm::GISelChangeObserver::changedInstr</a></div><div class="ttdeci">virtual void changedInstr(MachineInstr &amp;MI)=0</div><div class="ttdoc">This instruction was mutated in some way.</div></div>
<div class="ttc" id="aclassllvm_1_1Register_html_aebafd86dde59b5a05b22e8720e808a9d"><div class="ttname"><a href="classllvm_1_1Register.html#aebafd86dde59b5a05b22e8720e808a9d">llvm::Register::isVirtual</a></div><div class="ttdeci">bool isVirtual() const</div><div class="ttdoc">Return true if the specified register number is in the virtual register namespace.</div><div class="ttdef"><b>Definition:</b> <a href="Register_8h_source.html#l00091">Register.h:91</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a325f6b611ef9ec06798d3b4eb9572093"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">llvm::MachineFunction::getSubtarget</a></div><div class="ttdeci">const TargetSubtargetInfo &amp; getSubtarget() const</div><div class="ttdoc">getSubtarget - Return the subtarget for which this machine code is being compiled.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00672">MachineFunction.h:672</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a6f737d47e92bb08927c272b12fba32d8"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a6f737d47e92bb08927c272b12fba32d8">llvm::AMDGPULegalizerInfo::legalizeFDIVFastIntrin</a></div><div class="ttdeci">bool legalizeFDIVFastIntrin(MachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;B) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l04039">AMDGPULegalizerInfo.cpp:4039</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_a0e3fd79bb281f248eefd08814023d8c8"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#a0e3fd79bb281f248eefd08814023d8c8">oneMoreElement</a></div><div class="ttdeci">static LegalizeMutation oneMoreElement(unsigned TypeIdx)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l00095">AMDGPULegalizerInfo.cpp:95</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_ad7c01a9166d49578fc9cb3162a87f396"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#ad7c01a9166d49578fc9cb3162a87f396">llvm::AMDGPULegalizerInfo::getImplicitArgPtr</a></div><div class="ttdeci">bool getImplicitArgPtr(Register DstReg, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;B) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l04154">AMDGPULegalizerInfo.cpp:4154</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt&lt; bool &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1APFloat_html"><div class="ttname"><a href="classllvm_1_1APFloat.html">llvm::APFloat</a></div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00744">APFloat.h:744</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html"><div class="ttname"><a href="classllvm_1_1GlobalValue.html">llvm::GlobalValue</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00044">GlobalValue.h:44</a></div></div>
<div class="ttc" id="anamespacellvm_html_a1a14592c2ae220a319c7c85ee545c96f"><div class="ttname"><a href="namespacellvm.html#a1a14592c2ae220a319c7c85ee545c96f">llvm::divideCeil</a></div><div class="ttdeci">uint64_t divideCeil(uint64_t Numerator, uint64_t Denominator)</div><div class="ttdoc">Returns the integer ceil(Numerator / Denominator).</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00522">MathExtras.h:522</a></div></div>
<div class="ttc" id="anamespacellvm_1_1LegalizeMutations_html_a5574ba0db2a42fa195db009f06f1d731"><div class="ttname"><a href="namespacellvm_1_1LegalizeMutations.html#a5574ba0db2a42fa195db009f06f1d731">llvm::LegalizeMutations::scalarize</a></div><div class="ttdeci">LegalizeMutation scalarize(unsigned TypeIdx)</div><div class="ttdoc">Break up the vector type for the given type index into the element type.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizeMutations_8cpp_source.html#l00108">LegalizeMutations.cpp:108</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineIRBuilder_html"><div class="ttname"><a href="classllvm_1_1MachineIRBuilder.html">llvm::MachineIRBuilder</a></div><div class="ttdoc">Helper class to build MachineInstr.</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l00221">MachineIRBuilder.h:221</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_a51b92ff153c76b49d9036c331fc534c2"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#a51b92ff153c76b49d9036c331fc534c2">llvm::LegalizeRuleSet::legalFor</a></div><div class="ttdeci">LegalizeRuleSet &amp; legalFor(std::initializer_list&lt; LLT &gt; Types)</div><div class="ttdoc">The instruction is legal when type index 0 is any type in the given list.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00593">LegalizerInfo.h:593</a></div></div>
<div class="ttc" id="astructllvm_1_1AMDGPUFunctionArgInfo_html_a0e789059bf7f286b7f6bc75b43aac98baf438f1c55b41dc280fcc1d3455a5c741"><div class="ttname"><a href="structllvm_1_1AMDGPUFunctionArgInfo.html#a0e789059bf7f286b7f6bc75b43aac98baf438f1c55b41dc280fcc1d3455a5c741">llvm::AMDGPUFunctionArgInfo::WORKGROUP_ID_Z</a></div><div class="ttdeci">@ WORKGROUP_ID_Z</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUArgumentUsageInfo_8h_source.html#l00109">AMDGPUArgumentUsageInfo.h:109</a></div></div>
<div class="ttc" id="anamespacellvm_html_abfbb7869d5e1d000bcca6867dd813178"><div class="ttname"><a href="namespacellvm.html#abfbb7869d5e1d000bcca6867dd813178">llvm::eraseInstr</a></div><div class="ttdeci">void eraseInstr(MachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, LostDebugLocObserver *LocObserver=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2GlobalISel_2Utils_8cpp_source.html#l01362">Utils.cpp:1362</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html"><div class="ttname"><a href="classllvm_1_1MachineInstr.html">llvm::MachineInstr</a></div><div class="ttdoc">Representation of each machine instruction.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00066">MachineInstr.h:66</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html">llvm::MachineInstrBuilder</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00069">MachineInstrBuilder.h:69</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSubtarget_html_a62a67f91a73c5a80be0a080a7d6f3c30"><div class="ttname"><a href="classllvm_1_1GCNSubtarget.html#a62a67f91a73c5a80be0a080a7d6f3c30">llvm::GCNSubtarget::getTrapHandlerAbi</a></div><div class="ttdeci">TrapHandlerAbi getTrapHandlerAbi() const</div><div class="ttdef"><b>Definition:</b> <a href="GCNSubtarget_8h_source.html#l00411">GCNSubtarget.h:411</a></div></div>
<div class="ttc" id="astructllvm_1_1AMDGPUFunctionArgInfo_html_a0e789059bf7f286b7f6bc75b43aac98baeefc8c0370c3704fada7f546da0b6086"><div class="ttname"><a href="structllvm_1_1AMDGPUFunctionArgInfo.html#a0e789059bf7f286b7f6bc75b43aac98baeefc8c0370c3704fada7f546da0b6086">llvm::AMDGPUFunctionArgInfo::WORKITEM_ID_Z</a></div><div class="ttdeci">@ WORKITEM_ID_Z</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUArgumentUsageInfo_8h_source.html#l00117">AMDGPUArgumentUsageInfo.h:117</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a3dcd2bcf223daced673ed18e4ad47efa"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a3dcd2bcf223daced673ed18e4ad47efa">llvm::AMDGPULegalizerInfo::handleD16VData</a></div><div class="ttdeci">Register handleD16VData(MachineIRBuilder &amp;B, MachineRegisterInfo &amp;MRI, Register Reg, bool ImageStore=false) const</div><div class="ttdoc">Handle register layout difference for f16 images for some subtargets.</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l04309">AMDGPULegalizerInfo.cpp:4309</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_ae9bc1717e31ed947b2eae89a230c744b"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#ae9bc1717e31ed947b2eae89a230c744b">getPow2ScalarType</a></div><div class="ttdeci">static LLT getPow2ScalarType(LLT Ty)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l00057">AMDGPULegalizerInfo.cpp:57</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a9e1fc23a17e97d2d1732e753ae9251ac"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a9e1fc23a17e97d2d1732e753ae9251ac">llvm::GlobalValue::getParent</a></div><div class="ttdeci">Module * getParent()</div><div class="ttdoc">Get the module that this global value is contained inside of...</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00652">GlobalValue.h:652</a></div></div>
<div class="ttc" id="anamespacellvm_1_1SI_1_1KernelInputOffsets_html_a58b4eae4b0a45d478c7c0f3959b04612aad70bdccb9143514e90e2ffed213e4ae"><div class="ttname"><a href="namespacellvm_1_1SI_1_1KernelInputOffsets.html#a58b4eae4b0a45d478c7c0f3959b04612aad70bdccb9143514e90e2ffed213e4ae">llvm::SI::KernelInputOffsets::LOCAL_SIZE_X</a></div><div class="ttdeci">@ LOCAL_SIZE_X</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8h_source.html#l01342">SIInstrInfo.h:1342</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARM__MB_html_ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2"><div class="ttname"><a href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">llvm::ARM_MB::ST</a></div><div class="ttdeci">@ ST</div><div class="ttdef"><b>Definition:</b> <a href="MCTargetDesc_2ARMBaseInfo_8h_source.html#l00073">ARMBaseInfo.h:73</a></div></div>
<div class="ttc" id="anamespacellvm_1_1LegalityPredicates_html_ad7ac7032baa62cc00002886633b9f281"><div class="ttname"><a href="namespacellvm_1_1LegalityPredicates.html#ad7ac7032baa62cc00002886633b9f281">llvm::LegalityPredicates::all</a></div><div class="ttdeci">Predicate all(Predicate P0, Predicate P1)</div><div class="ttdoc">True iff P0 and P1 are true.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00228">LegalizerInfo.h:228</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_html_a0aae3b4716371b7413849fa7d20df1ac"><div class="ttname"><a href="namespacellvm_1_1AMDGPU.html#a0aae3b4716371b7413849fa7d20df1ac">llvm::AMDGPU::getBaseWithConstantOffset</a></div><div class="ttdeci">std::pair&lt; Register, unsigned &gt; getBaseWithConstantOffset(MachineRegisterInfo &amp;MRI, Register Reg, GISelKnownBits *KnownBits=nullptr)</div><div class="ttdoc">Returns base register and constant offset.</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUGlobalISelUtils_8cpp_source.html#l00020">AMDGPUGlobalISelUtils.cpp:20</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPUAS_html_ab1843c6566c95d94d6e36a857b8d2b3faec164f45437d8827346f2d8ec645479a"><div class="ttname"><a href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3faec164f45437d8827346f2d8ec645479a">llvm::AMDGPUAS::PRIVATE_ADDRESS</a></div><div class="ttdeci">@ PRIVATE_ADDRESS</div><div class="ttdoc">Address space for private memory.</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPU_8h_source.html#l00378">AMDGPU.h:378</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_adabd45e67a1847750a117317b5ef8f9f"><div class="ttname"><a href="classllvm_1_1LLT.html#adabd45e67a1847750a117317b5ef8f9f">llvm::LLT::changeElementCount</a></div><div class="ttdeci">constexpr LLT changeElementCount(ElementCount EC) const</div><div class="ttdoc">Return a vector or scalar with the same element type and the new element count.</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00196">LowLevelTypeImpl.h:196</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_ae6e9dca782411211a3526572f6ebeb33"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#ae6e9dca782411211a3526572f6ebeb33">buildBufferLoad</a></div><div class="ttdeci">static void buildBufferLoad(unsigned Opc, Register LoadDstReg, Register RSrc, Register VIndex, Register VOffset, Register SOffset, unsigned ImmOffset, unsigned Format, unsigned AuxiliaryData, MachineMemOperand *MMO, bool IsTyped, bool HasVIndex, MachineIRBuilder &amp;B)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l04482">AMDGPULegalizerInfo.cpp:4482</a></div></div>
<div class="ttc" id="astructllvm_1_1MachinePointerInfo_html"><div class="ttname"><a href="structllvm_1_1MachinePointerInfo.html">llvm::MachinePointerInfo</a></div><div class="ttdoc">This class contains a discriminated union of information about pointers in memory operands,...</div><div class="ttdef"><b>Definition:</b> <a href="MachineMemOperand_8h_source.html#l00039">MachineMemOperand.h:39</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_ad3a99906764c35b2694ae90fa57744a5"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">move</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional move</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00546">README.txt:546</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_a0dbe048033c8b5adaf283b8fe7de3ba1"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#a0dbe048033c8b5adaf283b8fe7de3ba1">isSmallOddVector</a></div><div class="ttdeci">static LegalityPredicate isSmallOddVector(unsigned TypeIdx)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l00066">AMDGPULegalizerInfo.cpp:66</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLVMContext_html"><div class="ttname"><a href="classllvm_1_1LLVMContext.html">llvm::LLVMContext</a></div><div class="ttdoc">This is an important class for using LLVM in a threaded context.</div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00067">LLVMContext.h:67</a></div></div>
<div class="ttc" id="astructllvm_1_1AMDGPU_1_1SIModeRegisterDefaults_html_a3d440dcf070de6b886a26184866b78b5"><div class="ttname"><a href="structllvm_1_1AMDGPU_1_1SIModeRegisterDefaults.html#a3d440dcf070de6b886a26184866b78b5">llvm::AMDGPU::SIModeRegisterDefaults::allFP64FP16Denormals</a></div><div class="ttdeci">bool allFP64FP16Denormals() const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUBaseInfo_8h_source.html#l01363">AMDGPUBaseInfo.h:1363</a></div></div>
<div class="ttc" id="astructllvm_1_1AMDGPUFunctionArgInfo_html_a0e789059bf7f286b7f6bc75b43aac98baed4ee8d30a77bb954964f9910e8cdcb6"><div class="ttname"><a href="structllvm_1_1AMDGPUFunctionArgInfo.html#a0e789059bf7f286b7f6bc75b43aac98baed4ee8d30a77bb954964f9910e8cdcb6">llvm::AMDGPUFunctionArgInfo::WORKITEM_ID_X</a></div><div class="ttdeci">@ WORKITEM_ID_X</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUArgumentUsageInfo_8h_source.html#l00115">AMDGPUArgumentUsageInfo.h:115</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RegState_html_aef4cc0c855dc833e2a9d58a50703320da0fec8ba6f4a4dc758b725205985eee99"><div class="ttname"><a href="namespacellvm_1_1RegState.html#aef4cc0c855dc833e2a9d58a50703320da0fec8ba6f4a4dc758b725205985eee99">llvm::RegState::Implicit</a></div><div class="ttdeci">@ Implicit</div><div class="ttdoc">Not emitted register (e.g. carry, or temporary result).</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00046">MachineInstrBuilder.h:46</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPUMachineFunction_html_ab37f1839fd82f8b84b7a2ca87b289c46"><div class="ttname"><a href="classllvm_1_1AMDGPUMachineFunction.html#ab37f1839fd82f8b84b7a2ca87b289c46">llvm::AMDGPUMachineFunction::isEntryFunction</a></div><div class="ttdeci">bool isEntryFunction() const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUMachineFunction_8h_source.html#l00082">AMDGPUMachineFunction.h:82</a></div></div>
<div class="ttc" id="aSIDefines_8h_html_a794476833214d5191d905cb35da453a8"><div class="ttname"><a href="SIDefines_8h.html#a794476833214d5191d905cb35da453a8">FP_DENORM_FLUSH_NONE</a></div><div class="ttdeci">#define FP_DENORM_FLUSH_NONE</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l01047">SIDefines.h:1047</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00445">CommandLine.h:445</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSubtarget_html_a0e70db1e8483e587c41a315dfad8c88a"><div class="ttname"><a href="classllvm_1_1GCNSubtarget.html#a0e70db1e8483e587c41a315dfad8c88a">llvm::GCNSubtarget::hasImageStoreD16Bug</a></div><div class="ttdeci">bool hasImageStoreD16Bug() const</div><div class="ttdef"><b>Definition:</b> <a href="GCNSubtarget_8h_source.html#l00926">GCNSubtarget.h:926</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_af6fb778e7cc82464d03d353b0cfe292b"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#af6fb778e7cc82464d03d353b0cfe292b">llvm::LegalizeRuleSet::clampScalar</a></div><div class="ttdeci">LegalizeRuleSet &amp; clampScalar(unsigned TypeIdx, const LLT MinTy, const LLT MaxTy)</div><div class="ttdoc">Limit the range of scalar sizes to MinTy and MaxTy.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l01006">LegalizerInfo.h:1006</a></div></div>
<div class="ttc" id="anamespacellvm_1_1numbers_html_ade6685e01ad5a5f6cb3dc9cfa7a59a4f"><div class="ttname"><a href="namespacellvm_1_1numbers.html#ade6685e01ad5a5f6cb3dc9cfa7a59a4f">llvm::numbers::log2e</a></div><div class="ttdeci">constexpr double log2e</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00035">MathExtras.h:35</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineMemOperand_html_a9b7acc8555a4466888d20106e3812548"><div class="ttname"><a href="classllvm_1_1MachineMemOperand.html#a9b7acc8555a4466888d20106e3812548">llvm::MachineMemOperand::setOffset</a></div><div class="ttdeci">void setOffset(int64_t NewOffset)</div><div class="ttdef"><b>Definition:</b> <a href="MachineMemOperand_8h_source.html#l00319">MachineMemOperand.h:319</a></div></div>
<div class="ttc" id="aAMDGPUGlobalISelUtils_8h_html"><div class="ttname"><a href="AMDGPUGlobalISelUtils_8h.html">AMDGPUGlobalISelUtils.h</a></div></div>
<div class="ttc" id="aDwarfDebug_8cpp_html_aaf2a32c0f2738e57cac623b73b2c88aba80cb2080e90221d1f5b425387d9bd030"><div class="ttname"><a href="DwarfDebug_8cpp.html#aaf2a32c0f2738e57cac623b73b2c88aba80cb2080e90221d1f5b425387d9bd030">Enable</a></div><div class="ttdeci">@ Enable</div><div class="ttdef"><b>Definition:</b> <a href="DwarfDebug_8cpp_source.html#l00086">DwarfDebug.cpp:86</a></div></div>
<div class="ttc" id="aclassllvm_1_1SITargetLowering_html_ab870ac74feb45bb48a75027da41c0784"><div class="ttname"><a href="classllvm_1_1SITargetLowering.html#ab870ac74feb45bb48a75027da41c0784">llvm::SITargetLowering::shouldUseLDSConstAddress</a></div><div class="ttdeci">bool shouldUseLDSConstAddress(const GlobalValue *GV) const</div><div class="ttdef"><b>Definition:</b> <a href="SIISelLowering_8cpp_source.html#l05219">SIISelLowering.cpp:5219</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetMachine_html_ab1fb67187fc37e569cc5171cbebba873"><div class="ttname"><a href="classllvm_1_1TargetMachine.html#ab1fb67187fc37e569cc5171cbebba873">llvm::TargetMachine::Options</a></div><div class="ttdeci">TargetOptions Options</div><div class="ttdef"><b>Definition:</b> <a href="Target_2TargetMachine_8h_source.html#l00119">TargetMachine.h:119</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_a71181d67d0bf68c3b8a535ec20463f90"><div class="ttname"><a href="classllvm_1_1LLT.html#a71181d67d0bf68c3b8a535ec20463f90">llvm::LLT::getNumElements</a></div><div class="ttdeci">constexpr uint16_t getNumElements() const</div><div class="ttdoc">Returns the number of elements in a vector LLT.</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00133">LowLevelTypeImpl.h:133</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="anamespacestd_html_ab8424022895aee3e366fb9a32f2883cb"><div class="ttname"><a href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a></div><div class="ttdeci">void swap(llvm::BitVector &amp;LHS, llvm::BitVector &amp;RHS)</div><div class="ttdoc">Implement std::swap in terms of BitVector swap.</div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00853">BitVector.h:853</a></div></div>
<div class="ttc" id="anamespacellvm_html_afee35431ecf461b5ea8e58d3f05e1ba1"><div class="ttname"><a href="namespacellvm.html#afee35431ecf461b5ea8e58d3f05e1ba1">llvm::LegalityPredicate</a></div><div class="ttdeci">std::function&lt; bool(const LegalityQuery &amp;)&gt; LegalityPredicate</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00199">LegalizerInfo.h:199</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a4e21760f681d6f97f95c8414e7b83ea5"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a4e21760f681d6f97f95c8414e7b83ea5">llvm::MachineBasicBlock::getParent</a></div><div class="ttdeci">const MachineFunction * getParent() const</div><div class="ttdoc">Return the MachineFunction containing this basic block.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00265">MachineBasicBlock.h:265</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_html_a22dc5c679c09756d04fe07f9e22baf84"><div class="ttname"><a href="namespacellvm_1_1AMDGPU.html#a22dc5c679c09756d04fe07f9e22baf84">llvm::AMDGPU::isFlatGlobalAddrSpace</a></div><div class="ttdeci">bool isFlatGlobalAddrSpace(unsigned AS)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPU_8h_source.html#l00420">AMDGPU.h:420</a></div></div>
<div class="ttc" id="anamespacellvm_1_1LegalityPredicates_html_a3b65801c5b31890a1d1cd8a0038aee87"><div class="ttname"><a href="namespacellvm_1_1LegalityPredicates.html#a3b65801c5b31890a1d1cd8a0038aee87">llvm::LegalityPredicates::typeInSet</a></div><div class="ttdeci">LegalityPredicate typeInSet(unsigned TypeIdx, std::initializer_list&lt; LLT &gt; TypesInit)</div><div class="ttdoc">True iff the given type index is one of the specified types.</div><div class="ttdef"><b>Definition:</b> <a href="LegalityPredicates_8cpp_source.html#l00034">LegalityPredicates.cpp:34</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a22adf879f91d77dee4214883f1b94a07"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a22adf879f91d77dee4214883f1b94a07">llvm::AMDGPULegalizerInfo::legalizeTrapHsa</a></div><div class="ttdeci">bool legalizeTrapHsa(MachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;B) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l05374">AMDGPULegalizerInfo.cpp:5374</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">llvm::CmpInst::ICMP_UGE</a></div><div class="ttdeci">@ ICMP_UGE</div><div class="ttdoc">unsigned greater or equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00742">InstrTypes.h:742</a></div></div>
<div class="ttc" id="aTargetLibraryInfo_8cpp_html_aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053"><div class="ttname"><a href="TargetLibraryInfo_8cpp.html#aca185e6d0e9f423dbb24440206454872a11dbf501abf829b3ab7049c2d3a8a053">Ptr</a></div><div class="ttdeci">@ Ptr</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8cpp_source.html#l00062">TargetLibraryInfo.cpp:62</a></div></div>
<div class="ttc" id="aSIWholeQuadMode_8cpp_html_a0c198437833c48138f49e3589bd08773"><div class="ttname"><a href="SIWholeQuadMode_8cpp.html#a0c198437833c48138f49e3589bd08773">Mode</a></div><div class="ttdeci">SI Whole Quad Mode</div><div class="ttdef"><b>Definition:</b> <a href="SIWholeQuadMode_8cpp_source.html#l00262">SIWholeQuadMode.cpp:262</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineMemOperand_html_a3e9d2a9063bce7f5b3d7dd21fd05c79d"><div class="ttname"><a href="classllvm_1_1MachineMemOperand.html#a3e9d2a9063bce7f5b3d7dd21fd05c79d">llvm::MachineMemOperand::getMemoryType</a></div><div class="ttdeci">LLT getMemoryType() const</div><div class="ttdoc">Return the memory type of the memory reference.</div><div class="ttdef"><b>Definition:</b> <a href="MachineMemOperand_8h_source.html#l00232">MachineMemOperand.h:232</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a5ab017387bbf480d9b9c710b6ed1c138"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a5ab017387bbf480d9b9c710b6ed1c138">llvm::AMDGPULegalizerInfo::legalizeBufferStore</a></div><div class="ttdeci">bool legalizeBufferStore(MachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;B, bool IsTyped, bool IsFormat) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l04395">AMDGPULegalizerInfo.cpp:4395</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_a9694f2906cfe1d6d35bbe6742c67dff0"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a9694f2906cfe1d6d35bbe6742c67dff0">llvm::MachineRegisterInfo::createGenericVirtualRegister</a></div><div class="ttdeci">Register createGenericVirtualRegister(LLT Ty, StringRef Name=&quot;&quot;)</div><div class="ttdoc">Create and return a new generic virtual register with low-level type Ty.</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00185">MachineRegisterInfo.cpp:185</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_ac0035d7c1c860501c877c20e6e93297b"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">llvm::MachineOperand::getReg</a></div><div class="ttdeci">Register getReg() const</div><div class="ttdoc">getReg - Returns the register number.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00369">MachineOperand.h:369</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html"><div class="ttname"><a href="classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">A Module instance is used to store all the information related to an LLVM module.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00065">Module.h:65</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab7af0c09900daed62bbdb01dba180f7cacd6fee581a325642b84f1af5c0be5140"><div class="ttname"><a href="namespacellvm.html#ab7af0c09900daed62bbdb01dba180f7cacd6fee581a325642b84f1af5c0be5140">llvm::RoundingMode::TowardNegative</a></div><div class="ttdeci">@ TowardNegative</div><div class="ttdoc">roundTowardNegative.</div></div>
<div class="ttc" id="astructllvm_1_1AMDGPU_1_1MIMGBaseOpcodeInfo_html_a3b6665b446a6192cc2b5ecf51082ea83"><div class="ttname"><a href="structllvm_1_1AMDGPU_1_1MIMGBaseOpcodeInfo.html#a3b6665b446a6192cc2b5ecf51082ea83">llvm::AMDGPU::MIMGBaseOpcodeInfo::AtomicX2</a></div><div class="ttdeci">bool AtomicX2</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUBaseInfo_8h_source.html#l00347">AMDGPUBaseInfo.h:347</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a4e7c460c9087646310b0001a0b46d336"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a4e7c460c9087646310b0001a0b46d336">llvm::AMDGPULegalizerInfo::legalizeDSAtomicFPIntrinsic</a></div><div class="ttdeci">bool legalizeDSAtomicFPIntrinsic(LegalizerHelper &amp;Helper, MachineInstr &amp;MI, Intrinsic::ID IID) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l04136">AMDGPULegalizerInfo.cpp:4136</a></div></div>
<div class="ttc" id="aAssumeBundleBuilder_8cpp_html_afb136e0532bcaed86521b462e6538d62"><div class="ttname"><a href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a></div><div class="ttdeci">assume Assume Builder</div><div class="ttdef"><b>Definition:</b> <a href="AssumeBundleBuilder_8cpp_source.html#l00651">AssumeBundleBuilder.cpp:651</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_a3b5805e73f162bbb84584fbc2091806e"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#a3b5805e73f162bbb84584fbc2091806e">fewerEltsToSize64Vector</a></div><div class="ttdeci">static LegalizeMutation fewerEltsToSize64Vector(unsigned TypeIdx)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l00104">AMDGPULegalizerInfo.cpp:104</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html"><div class="ttname"><a href="classllvm_1_1MachineFunction.html">llvm::MachineFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00258">MachineFunction.h:258</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_adeb18e3c3ca254b1eac668a91c0a18e8"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#adeb18e3c3ca254b1eac668a91c0a18e8">llvm::AMDGPULegalizerInfo::getKernargParameterPtr</a></div><div class="ttdeci">Register getKernargParameterPtr(MachineIRBuilder &amp;B, int64_t Offset) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l03375">AMDGPULegalizerInfo.cpp:3375</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_a7ff0361855acbbe71b15b8dc6003fbc5"><div class="ttname"><a href="classllvm_1_1LLT.html#a7ff0361855acbbe71b15b8dc6003fbc5">llvm::LLT::pointer</a></div><div class="ttdeci">static constexpr LLT pointer(unsigned AddressSpace, unsigned SizeInBits)</div><div class="ttdoc">Get a low-level pointer in the given address space.</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00049">LowLevelTypeImpl.h:49</a></div></div>
<div class="ttc" id="astructllvm_1_1LegalityQuery_html_afd4ab894cdbdc5888a2d10fa5e5f8333"><div class="ttname"><a href="structllvm_1_1LegalityQuery.html#afd4ab894cdbdc5888a2d10fa5e5f8333">llvm::LegalityQuery::Opcode</a></div><div class="ttdeci">unsigned Opcode</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00109">LegalizerInfo.h:109</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">llvm::CmpInst::ICMP_SLT</a></div><div class="ttdeci">@ ICMP_SLT</div><div class="ttdoc">signed less than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00747">InstrTypes.h:747</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_abf712aff736a372430ea6ea027fe32e5"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#abf712aff736a372430ea6ea027fe32e5">llvm::AMDGPULegalizerInfo::legalizeFPow</a></div><div class="ttdeci">bool legalizeFPow(MachineInstr &amp;MI, MachineIRBuilder &amp;B) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l02764">AMDGPULegalizerInfo.cpp:2764</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_html_a8adcca4377f5dfb320d2f81a84a9998e"><div class="ttname"><a href="namespacellvm_1_1AMDGPU.html#a8adcca4377f5dfb320d2f81a84a9998e">llvm::AMDGPU::getMIMGBaseOpcodeInfo</a></div><div class="ttdeci">const LLVM_READONLY MIMGBaseOpcodeInfo * getMIMGBaseOpcodeInfo(unsigned BaseOpcode)</div></div>
<div class="ttc" id="aclassllvm_1_1GCNTargetMachine_html"><div class="ttname"><a href="classllvm_1_1GCNTargetMachine.html">llvm::GCNTargetMachine</a></div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUTargetMachine_8h_source.html#l00074">AMDGPUTargetMachine.h:74</a></div></div>
<div class="ttc" id="astructllvm_1_1LegalityQuery_html"><div class="ttname"><a href="structllvm_1_1LegalityQuery.html">llvm::LegalityQuery</a></div><div class="ttdoc">The LegalityQuery object bundles together all the information that's needed to decide whether a given...</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00108">LegalizerInfo.h:108</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a6f7197d20955f93cdb3d88403ce7c040"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a6f7197d20955f93cdb3d88403ce7c040">llvm::AMDGPULegalizerInfo::legalizeFrint</a></div><div class="ttdeci">bool legalizeFrint(MachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;B) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l02047">AMDGPULegalizerInfo.cpp:2047</a></div></div>
<div class="ttc" id="astructllvm_1_1AMDGPUFunctionArgInfo_html_a0e789059bf7f286b7f6bc75b43aac98bab51517a3febb0cdc35645334784ff805"><div class="ttname"><a href="structllvm_1_1AMDGPUFunctionArgInfo.html#a0e789059bf7f286b7f6bc75b43aac98bab51517a3febb0cdc35645334784ff805">llvm::AMDGPUFunctionArgInfo::DISPATCH_ID</a></div><div class="ttdeci">@ DISPATCH_ID</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUArgumentUsageInfo_8h_source.html#l00104">AMDGPUArgumentUsageInfo.h:104</a></div></div>
<div class="ttc" id="anamespacellvm_1_1SI_1_1KernelInputOffsets_html_a58b4eae4b0a45d478c7c0f3959b04612a114e8b572de0ca0a14b4beec74337b9f"><div class="ttname"><a href="namespacellvm_1_1SI_1_1KernelInputOffsets.html#a58b4eae4b0a45d478c7c0f3959b04612a114e8b572de0ca0a14b4beec74337b9f">llvm::SI::KernelInputOffsets::NGROUPS_Y</a></div><div class="ttdeci">@ NGROUPS_Y</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8h_source.html#l01337">SIInstrInfo.h:1337</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPUSubtarget_html_aa6975b36563949898665ba4634f54eb8"><div class="ttname"><a href="classllvm_1_1AMDGPUSubtarget.html#aa6975b36563949898665ba4634f54eb8">llvm::AMDGPUSubtarget::hasTrigReducedRange</a></div><div class="ttdeci">bool hasTrigReducedRange() const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUSubtarget_8h_source.html#l00194">AMDGPUSubtarget.h:194</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPUTargetLowering_html_a5a663b4deab0378b73e460588d96871a"><div class="ttname"><a href="classllvm_1_1AMDGPUTargetLowering.html#a5a663b4deab0378b73e460588d96871a">llvm::AMDGPUTargetLowering::getImplicitParameterOffset</a></div><div class="ttdeci">uint32_t getImplicitParameterOffset(const MachineFunction &amp;MF, const ImplicitParameter Param) const</div><div class="ttdoc">Helper function that returns the byte offset of the given type of implicit parameter.</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUISelLowering_8cpp_source.html#l04444">AMDGPUISelLowering.cpp:4444</a></div></div>
<div class="ttc" id="astructllvm_1_1AMDGPUFunctionArgInfo_html_a0e789059bf7f286b7f6bc75b43aac98ba20d047732dd4b74606c9c63280727fa3"><div class="ttname"><a href="structllvm_1_1AMDGPUFunctionArgInfo.html#a0e789059bf7f286b7f6bc75b43aac98ba20d047732dd4b74606c9c63280727fa3">llvm::AMDGPUFunctionArgInfo::LDS_KERNEL_ID</a></div><div class="ttdeci">@ LDS_KERNEL_ID</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUArgumentUsageInfo_8h_source.html#l00106">AMDGPUArgumentUsageInfo.h:106</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a2645b2c5fc9b404821322ad403c87810"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a2645b2c5fc9b404821322ad403c87810">llvm::AMDGPULegalizerInfo::legalizeMul</a></div><div class="ttdeci">bool legalizeMul(LegalizerHelper &amp;Helper, MachineInstr &amp;MI) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l03136">AMDGPULegalizerInfo.cpp:3136</a></div></div>
<div class="ttc" id="aclassllvm_1_1SIMachineFunctionInfo_html_aa3c9b23b5cd32396cbf267f31becca3f"><div class="ttname"><a href="classllvm_1_1SIMachineFunctionInfo.html#aa3c9b23b5cd32396cbf267f31becca3f">llvm::SIMachineFunctionInfo::getMode</a></div><div class="ttdeci">AMDGPU::SIModeRegisterDefaults getMode() const</div><div class="ttdef"><b>Definition:</b> <a href="SIMachineFunctionInfo_8h_source.html#l00554">SIMachineFunctionInfo.h:554</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_a9d825f5954d7bd527aea490668c624c6"><div class="ttname"><a href="classllvm_1_1LLT.html#a9d825f5954d7bd527aea490668c624c6">llvm::LLT::isPointer</a></div><div class="ttdeci">constexpr bool isPointer() const</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00125">LowLevelTypeImpl.h:125</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef</a></div><div class="ttdoc">ArrayRef - Represent a constant reference to an array (0 or more elements consecutively in memory),...</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00033">APInt.h:33</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a9b48cb80ee1534c2b51d789b673137c1"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a9b48cb80ee1534c2b51d789b673137c1">llvm::MachineOperand::getMBB</a></div><div class="ttdeci">MachineBasicBlock * getMBB() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00571">MachineOperand.h:571</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a01959fee9db67c3a625348ae39489c5e"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a01959fee9db67c3a625348ae39489c5e">llvm::AMDGPULegalizerInfo::buildMultiply</a></div><div class="ttdeci">void buildMultiply(LegalizerHelper &amp;Helper, MutableArrayRef&lt; Register &gt; Accum, ArrayRef&lt; Register &gt; Src0, ArrayRef&lt; Register &gt; Src1, bool UsePartialMad64_32, bool SeparateOddAlignedProducts) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l02902">AMDGPULegalizerInfo.cpp:2902</a></div></div>
<div class="ttc" id="aX86PartialReduction_8cpp_html_ae0f503db91504a3f3440ab81260e4134"><div class="ttname"><a href="X86PartialReduction_8cpp.html#ae0f503db91504a3f3440ab81260e4134">Mul</a></div><div class="ttdeci">BinaryOperator * Mul</div><div class="ttdef"><b>Definition:</b> <a href="X86PartialReduction_8cpp_source.html#l00070">X86PartialReduction.cpp:70</a></div></div>
<div class="ttc" id="aclassllvm_1_1SrcOp_html_ae229785d0c8a8ce25d34be18fe150a54"><div class="ttname"><a href="classllvm_1_1SrcOp.html#ae229785d0c8a8ce25d34be18fe150a54">llvm::SrcOp::getReg</a></div><div class="ttdeci">Register getReg() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l00180">MachineIRBuilder.h:180</a></div></div>
<div class="ttc" id="aBasicBlockSections_8cpp_html_a5fd0741d696f28faf65b33f6c6af8fda"><div class="ttname"><a href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a></div><div class="ttdeci">SmallVector&lt; MachineOperand, 4 &gt; Cond</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockSections_8cpp_source.html#l00137">BasicBlockSections.cpp:137</a></div></div>
<div class="ttc" id="astructllvm_1_1APFloatBase_html_a6ba7c3d54a5a714f7a27861ee114cce3"><div class="ttname"><a href="structllvm_1_1APFloatBase.html#a6ba7c3d54a5a714f7a27861ee114cce3">llvm::APFloatBase::IEEEdouble</a></div><div class="ttdeci">static const fltSemantics &amp; IEEEdouble() LLVM_READNONE</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8cpp_source.html#l00247">APFloat.cpp:247</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_ab6681792605e467459f8a618fe57b705"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#ab6681792605e467459f8a618fe57b705">llvm::LegalizeRuleSet::clampScalarOrElt</a></div><div class="ttdeci">LegalizeRuleSet &amp; clampScalarOrElt(unsigned TypeIdx, const LLT MinTy, const LLT MaxTy)</div><div class="ttdoc">Limit the range of scalar sizes to MinTy and MaxTy.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l01013">LegalizerInfo.h:1013</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_a0356a7c051be3c82d2c7da7e0bdb229c"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#a0356a7c051be3c82d2c7da7e0bdb229c">getBufferAtomicPseudo</a></div><div class="ttdeci">static unsigned getBufferAtomicPseudo(Intrinsic::ID IntrID)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l04652">AMDGPULegalizerInfo.cpp:4652</a></div></div>
<div class="ttc" id="aAMDGPU_8h_html"><div class="ttname"><a href="AMDGPU_8h.html">AMDGPU.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_a0363204b5fbab08a46f5a7cd7f376f78"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a0363204b5fbab08a46f5a7cd7f376f78">llvm::MachineInstr::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const</div><div class="ttdoc">Returns the opcode of this MachineInstr.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00516">MachineInstr.h:516</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_a01bf72631b0bc836a8c07fe840b13233"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a01bf72631b0bc836a8c07fe840b13233">llvm::MachineRegisterInfo::hasOneNonDBGUse</a></div><div class="ttdeci">bool hasOneNonDBGUse(Register RegNo) const</div><div class="ttdoc">hasOneNonDBGUse - Return true if there is exactly one non-Debug use of the specified register.</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00417">MachineRegisterInfo.cpp:417</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1Hwreg_html_a6110fc30bc7311a6cf99814530362e21aac0a8352cc7cdb2686e5536f915725f1"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6110fc30bc7311a6cf99814530362e21aac0a8352cc7cdb2686e5536f915725f1">llvm::AMDGPU::Hwreg::OFFSET_SHIFT_</a></div><div class="ttdeci">@ OFFSET_SHIFT_</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00434">SIDefines.h:434</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_a79158bc80349e2c5ecd857cb098db65e"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#a79158bc80349e2c5ecd857cb098db65e">replaceWithConstant</a></div><div class="ttdeci">static bool replaceWithConstant(MachineIRBuilder &amp;B, MachineInstr &amp;MI, int64_t C)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l03328">AMDGPULegalizerInfo.cpp:3328</a></div></div>
<div class="ttc" id="anamespacellvm_html_a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4"><div class="ttname"><a href="namespacellvm.html#a05f5b9a11bdcc5feba62899f95dcf878a3134224cba2545bc57954d3b072aebb4">llvm::Offset</a></div><div class="ttdeci">@ Offset</div><div class="ttdef"><b>Definition:</b> <a href="DWP_8cpp_source.html#l00406">DWP.cpp:406</a></div></div>
<div class="ttc" id="aSupport_2ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdoc">Marks that the current location is not supposed to be reachable.</div><div class="ttdef"><b>Definition:</b> <a href="Support_2ErrorHandling_8h_source.html#l00143">ErrorHandling.h:143</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a30fc420ff83b1e2c4ab42e86d9071e34"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a30fc420ff83b1e2c4ab42e86d9071e34">llvm::AMDGPULegalizerInfo::legalizeFDIV64</a></div><div class="ttdeci">bool legalizeFDIV64(MachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;B) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l03958">AMDGPULegalizerInfo.cpp:3958</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSubtarget_html_a49c35e81b626716f6e81656a7d301a2f"><div class="ttname"><a href="classllvm_1_1GCNSubtarget.html#a49c35e81b626716f6e81656a7d301a2f">llvm::GCNSubtarget::supportsGetDoorbellID</a></div><div class="ttdeci">bool supportsGetDoorbellID() const</div><div class="ttdef"><b>Definition:</b> <a href="GCNSubtarget_8h_source.html#l00415">GCNSubtarget.h:415</a></div></div>
<div class="ttc" id="aclassuint32__t_html"><div class="ttname"><a href="classuint32__t.html">uint32_t</a></div></div>
<div class="ttc" id="aclassllvm_1_1ilist__node__impl_html_af719fc783be6589465137d997701a432"><div class="ttname"><a href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">llvm::ilist_node_impl::getIterator</a></div><div class="ttdeci">self_iterator getIterator()</div><div class="ttdef"><b>Definition:</b> <a href="ilist__node_8h_source.html#l00082">ilist_node.h:82</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_aa910c5e501ff9679cc81de15bf3b9c1d"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#aa910c5e501ff9679cc81de15bf3b9c1d">llvm::LegalizerHelper::Observer</a></div><div class="ttdeci">GISelChangeObserver &amp; Observer</div><div class="ttdoc">To keep track of changes made by the LegalizerHelper.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8h_source.html#l00053">LegalizerHelper.h:53</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_a807f9ab682878abe0a704736d1f9f298"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#a807f9ab682878abe0a704736d1f9f298">maxSizeForAddrSpace</a></div><div class="ttdeci">static unsigned maxSizeForAddrSpace(const GCNSubtarget &amp;ST, unsigned AS, bool IsLoad, bool IsAtomic)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l00241">AMDGPULegalizerInfo.cpp:241</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_a812ebabddd1ad2d8f8bbc6194346e2ed"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#a812ebabddd1ad2d8f8bbc6194346e2ed">isLoadStoreSizeLegal</a></div><div class="ttdeci">static bool isLoadStoreSizeLegal(const GCNSubtarget &amp;ST, const LegalityQuery &amp;Query)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l00267">AMDGPULegalizerInfo.cpp:267</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_aec28181fa8c84646c097212f19e379f1"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#aec28181fa8c84646c097212f19e379f1">llvm::AMDGPULegalizerInfo::legalizeExtractVectorElt</a></div><div class="ttdeci">bool legalizeExtractVectorElt(MachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;B) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l02333">AMDGPULegalizerInfo.cpp:2333</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_a2d595a51e66614b8adb83efbc8114401"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#a2d595a51e66614b8adb83efbc8114401">shouldWidenLoad</a></div><div class="ttdeci">static bool shouldWidenLoad(const GCNSubtarget &amp;ST, LLT MemoryTy, uint64_t AlignInBits, unsigned AddrSpace, unsigned Opcode)</div><div class="ttdoc">Return true if we should legalize a load by widening an odd sized memory access up to the alignment.</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l00384">AMDGPULegalizerInfo.cpp:384</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a5b166ae228ebbfdb96736d6022f3feeda2f101663d054cffa9c9956f30e7ecf7d"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a5b166ae228ebbfdb96736d6022f3feeda2f101663d054cffa9c9956f30e7ecf7d">llvm::CallingConv::MaxID</a></div><div class="ttdeci">@ MaxID</div><div class="ttdoc">The highest possible ID. Must be some 2^k - 1.</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00241">CallingConv.h:241</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_aa8f4be0661aa64f5b1f20b15e93bb403"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#aa8f4be0661aa64f5b1f20b15e93bb403">llvm::ConstantInt::getSExtValue</a></div><div class="ttdeci">int64_t getSExtValue() const</div><div class="ttdoc">Return the constant as a 64-bit integer value after it has been sign extended as appropriate for the ...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00147">Constants.h:147</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_a002fd916e7206e01d512eeb06d405cf0"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a002fd916e7206e01d512eeb06d405cf0">llvm::MachineInstr::getParent</a></div><div class="ttdeci">const MachineBasicBlock * getParent() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00313">MachineInstr.h:313</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_adb5c319f5905c1d3ca9eb5df546388c5"><div class="ttname"><a href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">Return a constant reference to the value's name.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00308">Value.cpp:308</a></div></div>
<div class="ttc" id="aclassllvm_1_1GISelChangeObserver_html"><div class="ttname"><a href="classllvm_1_1GISelChangeObserver.html">llvm::GISelChangeObserver</a></div><div class="ttdoc">Abstract class that contains various methods for clients to notify about changes.</div><div class="ttdef"><b>Definition:</b> <a href="GISelChangeObserver_8h_source.html#l00029">GISelChangeObserver.h:29</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_aff7dfc9d1d4355acbd741d76ce27fca1"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#aff7dfc9d1d4355acbd741d76ce27fca1">llvm::AMDGPULegalizerInfo::legalizeTrapEndpgm</a></div><div class="ttdeci">bool legalizeTrapEndpgm(MachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;B) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l05307">AMDGPULegalizerInfo.cpp:5307</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a6006bd8b7a7155240e3a11c12d104c50"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a6006bd8b7a7155240e3a11c12d104c50">llvm::AMDGPULegalizerInfo::buildPCRelGlobalAddress</a></div><div class="ttdeci">bool buildPCRelGlobalAddress(Register DstReg, LLT PtrTy, MachineIRBuilder &amp;B, const GlobalValue *GV, int64_t Offset, unsigned GAFlags=SIInstrInfo::MO_NONE) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l02437">AMDGPULegalizerInfo.cpp:2437</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_aaa02ab5ab2c50cce96f4fec73c8186c3"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#aaa02ab5ab2c50cce96f4fec73c8186c3">llvm::LegalizerHelper::bitcastDst</a></div><div class="ttdeci">void bitcastDst(MachineInstr &amp;MI, LLT CastTy, unsigned OpIdx)</div><div class="ttdoc">Legalize a single operand OpIdx of the machine instruction MI as a def by inserting a G_BITCAST from ...</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l01494">LegalizerHelper.cpp:1494</a></div></div>
<div class="ttc" id="anamespacellvm_1_1LegalizeMutations_html_ac48512a9f1e26744de1b6940b4adb68f"><div class="ttname"><a href="namespacellvm_1_1LegalizeMutations.html#ac48512a9f1e26744de1b6940b4adb68f">llvm::LegalizeMutations::widenScalarOrEltToNextPow2</a></div><div class="ttdeci">LegalizeMutation widenScalarOrEltToNextPow2(unsigned TypeIdx, unsigned Min=0)</div><div class="ttdoc">Widen the scalar type or vector element type for the given type index to the next power of 2.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizeMutations_8cpp_source.html#l00077">LegalizeMutations.cpp:77</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a5892da00df1f8fb432eab72498344583"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a5892da00df1f8fb432eab72498344583">llvm::AMDGPULegalizerInfo::legalizeIntrinsic</a></div><div class="ttdeci">bool legalizeIntrinsic(LegalizerHelper &amp;Helper, MachineInstr &amp;MI) const override</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l05571">AMDGPULegalizerInfo.cpp:5571</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineMemOperand_html_aaa2020e47e35179234b9ea27d555b2dda7d12be6206e5b0026c71bbcd5cb76494"><div class="ttname"><a href="classllvm_1_1MachineMemOperand.html#aaa2020e47e35179234b9ea27d555b2dda7d12be6206e5b0026c71bbcd5cb76494">llvm::MachineMemOperand::MOLoad</a></div><div class="ttdeci">@ MOLoad</div><div class="ttdoc">The memory access reads data.</div><div class="ttdef"><b>Definition:</b> <a href="MachineMemOperand_8h_source.html#l00134">MachineMemOperand.h:134</a></div></div>
<div class="ttc" id="aAArch64AdvSIMDScalarPass_8cpp_html_aacd2ab195054a3e6a74bfbb9d5d571c8"><div class="ttname"><a href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a></div><div class="ttdeci">unsigned const MachineRegisterInfo * MRI</div><div class="ttdef"><b>Definition:</b> <a href="AArch64AdvSIMDScalarPass_8cpp_source.html#l00105">AArch64AdvSIMDScalarPass.cpp:105</a></div></div>
<div class="ttc" id="aclassllvm_1_1Register_html"><div class="ttname"><a href="classllvm_1_1Register.html">llvm::Register</a></div><div class="ttdoc">Wrapper class representing virtual and physical registers.</div><div class="ttdef"><b>Definition:</b> <a href="Register_8h_source.html#l00019">Register.h:19</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab2e3dbebd68e69d77c227682fc8e3ba2"><div class="ttname"><a href="namespacellvm.html#ab2e3dbebd68e69d77c227682fc8e3ba2">llvm::make_scope_exit</a></div><div class="ttdeci">detail::scope_exit&lt; std::decay_t&lt; Callable &gt; &gt; make_scope_exit(Callable &amp;&amp;F)</div><div class="ttdef"><b>Definition:</b> <a href="ScopeExit_8h_source.html#l00059">ScopeExit.h:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_abb023d557c720f8730e0c266c1cd0f9c"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#abb023d557c720f8730e0c266c1cd0f9c">llvm::AMDGPULegalizerInfo::legalizeITOFP</a></div><div class="ttdeci">bool legalizeITOFP(MachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;B, bool Signed) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l02181">AMDGPULegalizerInfo.cpp:2181</a></div></div>
<div class="ttc" id="anamespacellvm_1_1LegalityPredicates_html_a082316e51330aeb051eaed458a9f8304"><div class="ttname"><a href="namespacellvm_1_1LegalityPredicates.html#a082316e51330aeb051eaed458a9f8304">llvm::LegalityPredicates::isScalar</a></div><div class="ttdeci">LegalityPredicate isScalar(unsigned TypeIdx)</div><div class="ttdoc">True iff the specified type index is a scalar.</div><div class="ttdef"><b>Definition:</b> <a href="LegalityPredicates_8cpp_source.html#l00067">LegalityPredicates.cpp:67</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_a4f88913d78dbe180ac456ab4777dea86"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#a4f88913d78dbe180ac456ab4777dea86">verifyCFIntrinsic</a></div><div class="ttdeci">static MachineInstr * verifyCFIntrinsic(MachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, MachineInstr *&amp;Br, MachineBasicBlock *&amp;UncondBrTarget, bool &amp;Negated)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l03216">AMDGPULegalizerInfo.cpp:3216</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_acd7e869bdfe172fce447a9d289343d1a"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#acd7e869bdfe172fce447a9d289343d1a">llvm::AMDGPULegalizerInfo::legalizeKernargMemParameter</a></div><div class="ttdeci">bool legalizeKernargMemParameter(MachineInstr &amp;MI, MachineIRBuilder &amp;B, uint64_t Offset, Align Alignment=Align(4)) const</div><div class="ttdoc">Legalize a value that's loaded from kernel arguments.</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l03393">AMDGPULegalizerInfo.cpp:3393</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPUTargetLowering_html_aabb66ae6636b6dbd45c1b66dd9353821a2e50c74ac7d9d4346f7ed1fa7d65802a"><div class="ttname"><a href="classllvm_1_1AMDGPUTargetLowering.html#aabb66ae6636b6dbd45c1b66dd9353821a2e50c74ac7d9d4346f7ed1fa7d65802a">llvm::AMDGPUTargetLowering::SHARED_BASE</a></div><div class="ttdeci">@ SHARED_BASE</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUISelLowering_8h_source.html#l00336">AMDGPUISelLowering.h:336</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_aba263b2348b84c2d9a10adc0a42d9606"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#aba263b2348b84c2d9a10adc0a42d9606">llvm::AMDGPULegalizerInfo::legalizeSignedDIV_REM</a></div><div class="ttdeci">bool legalizeSignedDIV_REM(MachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;B) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l03670">AMDGPULegalizerInfo.cpp:3670</a></div></div>
<div class="ttc" id="anamespacellvm_1_1numbers_html_a3a6cc17866b369b529f20fbb54183134"><div class="ttname"><a href="namespacellvm_1_1numbers.html#a3a6cc17866b369b529f20fbb54183134">llvm::numbers::inv_pi</a></div><div class="ttdeci">constexpr double inv_pi</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00038">MathExtras.h:38</a></div></div>
<div class="ttc" id="aAMDGPUInstrInfo_8h_html"><div class="ttname"><a href="AMDGPUInstrInfo_8h.html">AMDGPUInstrInfo.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1LegalityPredicates_html_a87c5e76f97f435ea42bccaa6242aba92"><div class="ttname"><a href="namespacellvm_1_1LegalityPredicates.html#a87c5e76f97f435ea42bccaa6242aba92">llvm::LegalityPredicates::scalarOrEltNarrowerThan</a></div><div class="ttdeci">LegalityPredicate scalarOrEltNarrowerThan(unsigned TypeIdx, unsigned Size)</div><div class="ttdoc">True iff the specified type index is a scalar or vector with an element type that's narrower than the...</div><div class="ttdef"><b>Definition:</b> <a href="LegalityPredicates_8cpp_source.html#l00133">LegalityPredicates.cpp:133</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLVMContext_html_aad03ef5cfbe6e7cad076d9e45ba06592"><div class="ttname"><a href="classllvm_1_1LLVMContext.html#aad03ef5cfbe6e7cad076d9e45ba06592">llvm::LLVMContext::diagnose</a></div><div class="ttdeci">void diagnose(const DiagnosticInfo &amp;DI)</div><div class="ttdoc">Report a message to the currently installed diagnostic handler.</div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8cpp_source.html#l00248">LLVMContext.cpp:248</a></div></div>
<div class="ttc" id="anamespacellvm_1_1LegalityPredicates_html_aa72a80bbb62a1013bb4f43253a4bad1b"><div class="ttname"><a href="namespacellvm_1_1LegalityPredicates.html#aa72a80bbb62a1013bb4f43253a4bad1b">llvm::LegalityPredicates::sizeIs</a></div><div class="ttdeci">LegalityPredicate sizeIs(unsigned TypeIdx, unsigned Size)</div><div class="ttdoc">True if the total bitwidth of the specified type index is Size bits.</div><div class="ttdef"><b>Definition:</b> <a href="LegalityPredicates_8cpp_source.html#l00172">LegalityPredicates.cpp:172</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPUISD_html_a739d53294bc38cd6b0b23332f9994c0ea480770519d97b188b42a1a0aa660a3db"><div class="ttname"><a href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0ea480770519d97b188b42a1a0aa660a3db">llvm::AMDGPUISD::RCP</a></div><div class="ttdeci">@ RCP</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUISelLowering_8h_source.html#l00428">AMDGPUISelLowering.h:428</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_ae3b3ae26031c3fa6eebaaf218dffc10c"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#ae3b3ae26031c3fa6eebaaf218dffc10c">llvm::LegalizeRuleSet::alwaysLegal</a></div><div class="ttdeci">LegalizeRuleSet &amp; alwaysLegal()</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00643">LegalizerInfo.h:643</a></div></div>
<div class="ttc" id="astructllvm_1_1AMDGPUFunctionArgInfo_html_a0e789059bf7f286b7f6bc75b43aac98ba9df85a25300bb504ac893643b387629b"><div class="ttname"><a href="structllvm_1_1AMDGPUFunctionArgInfo.html#a0e789059bf7f286b7f6bc75b43aac98ba9df85a25300bb504ac893643b387629b">llvm::AMDGPUFunctionArgInfo::WORKGROUP_ID_Y</a></div><div class="ttdeci">@ WORKGROUP_ID_Y</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUArgumentUsageInfo_8h_source.html#l00108">AMDGPUArgumentUsageInfo.h:108</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a4b21394c138cc5ae719510bb529ee099"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">llvm::MachineFunction::getFunction</a></div><div class="ttdeci">Function &amp; getFunction()</div><div class="ttdoc">Return the LLVM function that this machine code represents.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00638">MachineFunction.h:638</a></div></div>
<div class="ttc" id="aclassuint16__t_html"><div class="ttname"><a href="classuint16__t.html">uint16_t</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSubtarget_html_a8263d2c3a266941b3669828ecf1db53e"><div class="ttname"><a href="classllvm_1_1GCNSubtarget.html#a8263d2c3a266941b3669828ecf1db53e">llvm::GCNSubtarget::hasFullRate64Ops</a></div><div class="ttdeci">bool hasFullRate64Ops() const</div><div class="ttdef"><b>Definition:</b> <a href="GCNSubtarget_8h_source.html#l00333">GCNSubtarget.h:333</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_ae68d159179d37dc7969439d842e2644f"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ae68d159179d37dc7969439d842e2644f">llvm::MachineFunction::getTarget</a></div><div class="ttdeci">const LLVMTargetMachine &amp; getTarget() const</div><div class="ttdoc">getTarget - Return the target machine this machine code is compiled with</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00668">MachineFunction.h:668</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a3cc7860fbf211f566f62809ac1144023"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a3cc7860fbf211f566f62809ac1144023">llvm::AMDGPULegalizerInfo::legalizeBufferAtomic</a></div><div class="ttdeci">bool legalizeBufferAtomic(MachineInstr &amp;MI, MachineIRBuilder &amp;B, Intrinsic::ID IID) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l04707">AMDGPULegalizerInfo.cpp:4707</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_af704613be9bed4ecd92e5aee263c2d5f"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#af704613be9bed4ecd92e5aee263c2d5f">llvm::LegalizerHelper::widenScalarDst</a></div><div class="ttdeci">void widenScalarDst(MachineInstr &amp;MI, LLT WideTy, unsigned OpIdx=0, unsigned TruncOpcode=TargetOpcode::G_TRUNC)</div><div class="ttdoc">Legalize a single operand OpIdx of the machine instruction MI as a Def by extending the operand's typ...</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l01454">LegalizerHelper.cpp:1454</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPUSubtarget_html_a53c0ee4138bfbf9e0410a65e0eaa36e2aef8609af541a5b1b01484b29d0f62534"><div class="ttname"><a href="classllvm_1_1AMDGPUSubtarget.html#a53c0ee4138bfbf9e0410a65e0eaa36e2aef8609af541a5b1b01484b29d0f62534">llvm::AMDGPUSubtarget::VOLCANIC_ISLANDS</a></div><div class="ttdeci">@ VOLCANIC_ISLANDS</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUSubtarget_8h_source.html#l00039">AMDGPUSubtarget.h:39</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1SendMsg_html_a8594419a4ddfad2c9a79279c490e466d"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">llvm::AMDGPU::SendMsg::Op</a></div><div class="ttdeci">Op</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00357">SIDefines.h:357</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSubtarget_html_ad30b3c952ed576256171d49971ec9241"><div class="ttname"><a href="classllvm_1_1GCNSubtarget.html#ad30b3c952ed576256171d49971ec9241">llvm::GCNSubtarget::hasUnpackedD16VMem</a></div><div class="ttdeci">bool hasUnpackedD16VMem() const</div><div class="ttdef"><b>Definition:</b> <a href="GCNSubtarget_8h_source.html#l00669">GCNSubtarget.h:669</a></div></div>
<div class="ttc" id="astructllvm_1_1AMDGPU_1_1MIMGBaseOpcodeInfo_html_a9b768edaf13fa245f7f32392066e8214"><div class="ttname"><a href="structllvm_1_1AMDGPU_1_1MIMGBaseOpcodeInfo.html#a9b768edaf13fa245f7f32392066e8214">llvm::AMDGPU::MIMGBaseOpcodeInfo::Atomic</a></div><div class="ttdeci">bool Atomic</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUBaseInfo_8h_source.html#l00346">AMDGPUBaseInfo.h:346</a></div></div>
<div class="ttc" id="aclassllvm_1_1ilist__iterator_html"><div class="ttname"><a href="classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdoc">Iterator for intrusive lists based on ilist_node.</div><div class="ttdef"><b>Definition:</b> <a href="ilist__iterator_8h_source.html#l00057">ilist_iterator.h:57</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPUMachineFunction_html_ac1af3affe7a4cee4c8f08afbd7e20282"><div class="ttname"><a href="classllvm_1_1AMDGPUMachineFunction.html#ac1af3affe7a4cee4c8f08afbd7e20282">llvm::AMDGPUMachineFunction::isModuleEntryFunction</a></div><div class="ttdeci">bool isModuleEntryFunction() const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUMachineFunction_8h_source.html#l00086">AMDGPUMachineFunction.h:86</a></div></div>
<div class="ttc" id="astructllvm_1_1Align_html_a80735739b49cf97a491922c8f9af2cc1"><div class="ttname"><a href="structllvm_1_1Align.html#a80735739b49cf97a491922c8f9af2cc1">llvm::Align::value</a></div><div class="ttdeci">uint64_t value() const</div><div class="ttdoc">This is a hole in the type system and should not be abused.</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00085">Alignment.h:85</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineMemOperand_html_a7a1ac8a07c8ce92e71dc9769d2932ae0"><div class="ttname"><a href="classllvm_1_1MachineMemOperand.html#a7a1ac8a07c8ce92e71dc9769d2932ae0">llvm::MachineMemOperand::getSize</a></div><div class="ttdeci">uint64_t getSize() const</div><div class="ttdoc">Return the size in bytes of the memory reference.</div><div class="ttdef"><b>Definition:</b> <a href="MachineMemOperand_8h_source.html#l00235">MachineMemOperand.h:235</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_a3d552c29a563f3462800870d14e72b0f"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#a3d552c29a563f3462800870d14e72b0f">isWideVec16</a></div><div class="ttdeci">static LegalityPredicate isWideVec16(unsigned TypeIdx)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l00087">AMDGPULegalizerInfo.cpp:87</a></div></div>
<div class="ttc" id="anamespacellvm_html_ae22967d11b695d268992470debfae4b2"><div class="ttname"><a href="namespacellvm.html#ae22967d11b695d268992470debfae4b2">llvm::bit_floor</a></div><div class="ttdeci">T bit_floor(T Value)</div><div class="ttdoc">Returns the largest integral power of two no greater than Value if Value is nonzero.</div><div class="ttdef"><b>Definition:</b> <a href="bit_8h_source.html#l00291">bit.h:291</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a2fd97f50411bc650c7f9f6e3118147f4"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a2fd97f50411bc650c7f9f6e3118147f4">llvm::AMDGPULegalizerInfo::getSegmentAperture</a></div><div class="ttdeci">Register getSegmentAperture(unsigned AddrSpace, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;B) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l01827">AMDGPULegalizerInfo.cpp:1827</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64CC_html_abfa1f7dce576430da99eed57807c7f28afdd8238d6005774fe2bb9067de76eb8c"><div class="ttname"><a href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28afdd8238d6005774fe2bb9067de76eb8c">llvm::AArch64CC::LS</a></div><div class="ttdeci">@ LS</div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00264">AArch64BaseInfo.h:264</a></div></div>
<div class="ttc" id="astructllvm_1_1LegalityQuery_html_a9e26ab57991dfde2757e4790a626d6a3"><div class="ttname"><a href="structllvm_1_1LegalityQuery.html#a9e26ab57991dfde2757e4790a626d6a3">llvm::LegalityQuery::MMODescrs</a></div><div class="ttdeci">ArrayRef&lt; MemDesc &gt; MMODescrs</div><div class="ttdoc">Operations which require memory can use this to place requirements on the memory type for each MMO.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00128">LegalizerInfo.h:128</a></div></div>
<div class="ttc" id="astructllvm_1_1fltSemantics_html"><div class="ttname"><a href="structllvm_1_1fltSemantics.html">llvm::fltSemantics</a></div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8cpp_source.html#l00097">APFloat.cpp:97</a></div></div>
<div class="ttc" id="aclassllvm_1_1SITargetLowering_html"><div class="ttname"><a href="classllvm_1_1SITargetLowering.html">llvm::SITargetLowering</a></div><div class="ttdef"><b>Definition:</b> <a href="SIISelLowering_8h_source.html#l00031">SIISelLowering.h:31</a></div></div>
<div class="ttc" id="aDiagnosticInfo_8h_html"><div class="ttname"><a href="DiagnosticInfo_8h.html">DiagnosticInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSubtarget_html_aaac87839eb0077c44120678bcab56bc9"><div class="ttname"><a href="classllvm_1_1GCNSubtarget.html#aaac87839eb0077c44120678bcab56bc9">llvm::GCNSubtarget::hasG16</a></div><div class="ttdeci">bool hasG16() const</div><div class="ttdef"><b>Definition:</b> <a href="GCNSubtarget_8h_source.html#l00920">GCNSubtarget.h:920</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_html_a3f263a048bfe2f3f16b9bd70a01031f6"><div class="ttname"><a href="namespacellvm_1_1AMDGPU.html#a3f263a048bfe2f3f16b9bd70a01031f6">llvm::AMDGPU::getImageDimIntrinsicInfo</a></div><div class="ttdeci">const ImageDimIntrinsicInfo * getImageDimIntrinsicInfo(unsigned Intr)</div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_af9de933caeeaebd4387c7c62f02a3bbd"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#af9de933caeeaebd4387c7c62f02a3bbd">llvm::AMDGPULegalizerInfo::legalizeTrapHsaQueuePtr</a></div><div class="ttdeci">bool legalizeTrapHsaQueuePtr(MachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;B) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l05314">AMDGPULegalizerInfo.cpp:5314</a></div></div>
<div class="ttc" id="aPPCCTRLoopsVerify_8cpp_html_a593cc2f204f7b2edc16ee222c37c3196"><div class="ttname"><a href="PPCCTRLoopsVerify_8cpp.html#a593cc2f204f7b2edc16ee222c37c3196">verify</a></div><div class="ttdeci">ppc ctr loops verify</div><div class="ttdef"><b>Definition:</b> <a href="PPCCTRLoopsVerify_8cpp_source.html#l00076">PPCCTRLoopsVerify.cpp:76</a></div></div>
<div class="ttc" id="aLegalizerHelper_8h_html"><div class="ttname"><a href="LegalizerHelper_8h.html">LegalizerHelper.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARCCC_html_a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4"><div class="ttname"><a href="namespacellvm_1_1ARCCC.html#a9a81d9a1b379cf08150b22e81d7dd006aceb189306b941666e679bf556207c1e4">llvm::ARCCC::Z</a></div><div class="ttdeci">@ Z</div><div class="ttdef"><b>Definition:</b> <a href="ARCInfo_8h_source.html#l00041">ARCInfo.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a3bf20d7d5d2943a38d01c00d1aa82104"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a3bf20d7d5d2943a38d01c00d1aa82104">llvm::AMDGPULegalizerInfo::getLDSKernelId</a></div><div class="ttdeci">bool getLDSKernelId(Register DstReg, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;B) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l04190">AMDGPULegalizerInfo.cpp:4190</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a68b29f4aff8a6db0040bc8e00a520116"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a68b29f4aff8a6db0040bc8e00a520116">llvm::AMDGPULegalizerInfo::legalizeRsqClampIntrinsic</a></div><div class="ttdeci">bool legalizeRsqClampIntrinsic(MachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;B) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l04080">AMDGPULegalizerInfo.cpp:4080</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_aafacf84de1cb994a92dc045f4aa1d518aba11aa58176a446ba70d4f0ad0e04418"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518aba11aa58176a446ba70d4f0ad0e04418">llvm::MachineInstr::FmNoNans</a></div><div class="ttdeci">@ FmNoNans</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00090">MachineInstr.h:90</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_ac33fa4c8cfeb9287f51f95404a459de8"><div class="ttname"><a href="classllvm_1_1LLT.html#ac33fa4c8cfeb9287f51f95404a459de8">llvm::LLT::getAddressSpace</a></div><div class="ttdeci">constexpr unsigned getAddressSpace() const</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00247">LowLevelTypeImpl.h:247</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00614">SmallVector.h:614</a></div></div>
<div class="ttc" id="aBinaryFormat_2MachO_8cpp_html_a1a923abcc65272bfe81c0e7081c32421"><div class="ttname"><a href="BinaryFormat_2MachO_8cpp.html#a1a923abcc65272bfe81c0e7081c32421">unsupported</a></div><div class="ttdeci">static Error unsupported(const char *Str, const Triple &amp;T)</div><div class="ttdef"><b>Definition:</b> <a href="BinaryFormat_2MachO_8cpp_source.html#l00071">MachO.cpp:71</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a44186e632d4bab1d35012ed738a23870"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a44186e632d4bab1d35012ed738a23870">llvm::AMDGPULegalizerInfo::legalizeFFloor</a></div><div class="ttdeci">bool legalizeFFloor(MachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;B) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l02811">AMDGPULegalizerInfo.cpp:2811</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_a0aab1c76215e1773caa058744d6ae6af"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#a0aab1c76215e1773caa058744d6ae6af">bitcastToVectorElement32</a></div><div class="ttdeci">static LegalizeMutation bitcastToVectorElement32(unsigned TypeIdx)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l00153">AMDGPULegalizerInfo.cpp:153</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a40f12f2bde2de188bff061f11bcd976c"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a40f12f2bde2de188bff061f11bcd976c">llvm::AMDGPULegalizerInfo::legalizeCTLZ_CTTZ</a></div><div class="ttdeci">bool legalizeCTLZ_CTTZ(MachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;B) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l03188">AMDGPULegalizerInfo.cpp:3188</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a4774d239d20e55380840e775aed66efc"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a4774d239d20e55380840e775aed66efc">llvm::AMDGPULegalizerInfo::legalizeFMad</a></div><div class="ttdeci">bool legalizeFMad(MachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;B) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l02688">AMDGPULegalizerInfo.cpp:2688</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSubtarget_html_a80e7aa469ce27c761eef3c645e55ed88a47de73eb7c73a07ac2cfc17fc3533f33"><div class="ttname"><a href="classllvm_1_1GCNSubtarget.html#a80e7aa469ce27c761eef3c645e55ed88a47de73eb7c73a07ac2cfc17fc3533f33">llvm::GCNSubtarget::TrapID::LLVMAMDHSATrap</a></div><div class="ttdeci">@ LLVMAMDHSATrap</div></div>
<div class="ttc" id="anamespacellvm_1_1SI_1_1KernelInputOffsets_html_a58b4eae4b0a45d478c7c0f3959b04612a89d4956fc6fdfd046ec5650281c75e6b"><div class="ttname"><a href="namespacellvm_1_1SI_1_1KernelInputOffsets.html#a58b4eae4b0a45d478c7c0f3959b04612a89d4956fc6fdfd046ec5650281c75e6b">llvm::SI::KernelInputOffsets::LOCAL_SIZE_Y</a></div><div class="ttdeci">@ LOCAL_SIZE_Y</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8h_source.html#l01343">SIInstrInfo.h:1343</a></div></div>
<div class="ttc" id="astructllvm_1_1AMDGPUFunctionArgInfo_html_a0e789059bf7f286b7f6bc75b43aac98bac637a232c5c5f79fa806ae4958a1ff2a"><div class="ttname"><a href="structllvm_1_1AMDGPUFunctionArgInfo.html#a0e789059bf7f286b7f6bc75b43aac98bac637a232c5c5f79fa806ae4958a1ff2a">llvm::AMDGPUFunctionArgInfo::DISPATCH_PTR</a></div><div class="ttdeci">@ DISPATCH_PTR</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUArgumentUsageInfo_8h_source.html#l00101">AMDGPUArgumentUsageInfo.h:101</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a105bd213837c5c2e30520113d885b8f3"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a105bd213837c5c2e30520113d885b8f3">llvm::LegalizerHelper::lowerFMinNumMaxNum</a></div><div class="ttdeci">LegalizeResult lowerFMinNumMaxNum(MachineInstr &amp;MI)</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8cpp_source.html#l06503">LegalizerHelper.cpp:6503</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_aa71647a93d5e73c28332b6e52407979c"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#aa71647a93d5e73c28332b6e52407979c">llvm::AMDGPULegalizerInfo::legalizeFastUnsafeFDIV</a></div><div class="ttdeci">bool legalizeFastUnsafeFDIV(MachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;B) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l03738">AMDGPULegalizerInfo.cpp:3738</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSubtarget_html_ace4de1de19cbe837c578fb3654b6c998"><div class="ttname"><a href="classllvm_1_1GCNSubtarget.html#ace4de1de19cbe837c578fb3654b6c998">llvm::GCNSubtarget::getGeneration</a></div><div class="ttdeci">Generation getGeneration() const</div><div class="ttdef"><b>Definition:</b> <a href="GCNSubtarget_8h_source.html#l00273">GCNSubtarget.h:273</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSubtarget_html_a347289a8e670a14bc5c60464df2f445caf778ffa73665e8e41448bf12f1350f02"><div class="ttname"><a href="classllvm_1_1GCNSubtarget.html#a347289a8e670a14bc5c60464df2f445caf778ffa73665e8e41448bf12f1350f02">llvm::GCNSubtarget::TrapHandlerAbi::AMDHSA</a></div><div class="ttdeci">@ AMDHSA</div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_abf66d0f3f6789a70e423158446adf607"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#abf66d0f3f6789a70e423158446adf607">llvm::AMDGPULegalizerInfo::legalizeBufferLoad</a></div><div class="ttdeci">bool legalizeBufferLoad(MachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;B, bool IsFormat, bool IsTyped) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l04503">AMDGPULegalizerInfo.cpp:4503</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_a3fba722f44bac58d79e82bd232525152"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#a3fba722f44bac58d79e82bd232525152">llvm::MachineInstrBuilder::addGlobalAddress</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addGlobalAddress(const GlobalValue *GV, int64_t Offset=0, unsigned TargetFlags=0) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00177">MachineInstrBuilder.h:177</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_a3986167503ccf79606f2249e660c9961"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#a3986167503ccf79606f2249e660c9961">isRegisterSize</a></div><div class="ttdeci">static bool isRegisterSize(unsigned Size)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l00184">AMDGPULegalizerInfo.cpp:184</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a805950c6af7deaddb2d8fbcaf4ea011b"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a805950c6af7deaddb2d8fbcaf4ea011b">llvm::AMDGPULegalizerInfo::legalizeAddrSpaceCast</a></div><div class="ttdeci">bool legalizeAddrSpaceCast(MachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;B) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l01934">AMDGPULegalizerInfo.cpp:1934</a></div></div>
<div class="ttc" id="anamespacellvm_1_1SI_1_1KernelInputOffsets_html_a58b4eae4b0a45d478c7c0f3959b04612a857fe4edfc845f9b0eee86ace55971c8"><div class="ttname"><a href="namespacellvm_1_1SI_1_1KernelInputOffsets.html#a58b4eae4b0a45d478c7c0f3959b04612a857fe4edfc845f9b0eee86ace55971c8">llvm::SI::KernelInputOffsets::NGROUPS_X</a></div><div class="ttdeci">@ NGROUPS_X</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8h_source.html#l01336">SIInstrInfo.h:1336</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8h_html"><div class="ttname"><a href="AMDGPULegalizerInfo_8h.html">AMDGPULegalizerInfo.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1SI_1_1KernelInputOffsets_html_a58b4eae4b0a45d478c7c0f3959b04612a517d5b2e170532fbf6c01d5b69d7b7d6"><div class="ttname"><a href="namespacellvm_1_1SI_1_1KernelInputOffsets.html#a58b4eae4b0a45d478c7c0f3959b04612a517d5b2e170532fbf6c01d5b69d7b7d6">llvm::SI::KernelInputOffsets::GLOBAL_SIZE_Z</a></div><div class="ttdeci">@ GLOBAL_SIZE_Z</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8h_source.html#l01341">SIInstrInfo.h:1341</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPUAS_html_ab1843c6566c95d94d6e36a857b8d2b3fa5b71ba6fa435ec288aba849e113721a7"><div class="ttname"><a href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3fa5b71ba6fa435ec288aba849e113721a7">llvm::AMDGPUAS::REGION_ADDRESS</a></div><div class="ttdeci">@ REGION_ADDRESS</div><div class="ttdoc">Address space for region memory. (GDS)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPU_8h_source.html#l00374">AMDGPU.h:374</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a44a4d4c034685aa34a4e8f62b0976e6c"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a44a4d4c034685aa34a4e8f62b0976e6c">llvm::AMDGPULegalizerInfo::AMDGPULegalizerInfo</a></div><div class="ttdeci">AMDGPULegalizerInfo(const GCNSubtarget &amp;ST, const GCNTargetMachine &amp;TM)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l00428">AMDGPULegalizerInfo.cpp:428</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_a5dc0a32516ce31f495b440d47287028b"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a5dc0a32516ce31f495b440d47287028b">llvm::MachineRegisterInfo::getType</a></div><div class="ttdeci">LLT getType(Register Reg) const</div><div class="ttdoc">Get the low-level type of Reg or LLT{} if Reg is not a generic (target independent) virtual register.</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00759">MachineRegisterInfo.h:759</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a4117d1ecf36af9158c825fb376c4082e"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a4117d1ecf36af9158c825fb376c4082e">llvm::AMDGPULegalizerInfo::legalizeBuildVector</a></div><div class="ttdeci">bool legalizeBuildVector(MachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;B) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l02870">AMDGPULegalizerInfo.cpp:2870</a></div></div>
<div class="ttc" id="astructllvm_1_1LegalityQuery_html_ab28fca6f8145be28b70ad89bb0c741b0"><div class="ttname"><a href="structllvm_1_1LegalityQuery.html#ab28fca6f8145be28b70ad89bb0c741b0">llvm::LegalityQuery::Types</a></div><div class="ttdeci">ArrayRef&lt; LLT &gt; Types</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00110">LegalizerInfo.h:110</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a1d0eafc5b0af4bf05b288d62caa72ac9"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a1d0eafc5b0af4bf05b288d62caa72ac9">llvm::AMDGPULegalizerInfo::legalizeUnsignedDIV_REM</a></div><div class="ttdeci">bool legalizeUnsignedDIV_REM(MachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;B) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l03630">AMDGPULegalizerInfo.cpp:3630</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSubtarget_html_a86673715704dada21e3529d93a5376e8"><div class="ttname"><a href="classllvm_1_1GCNSubtarget.html#a86673715704dada21e3529d93a5376e8">llvm::GCNSubtarget::getNSAThreshold</a></div><div class="ttdeci">unsigned getNSAThreshold(const MachineFunction &amp;MF) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUSubtarget_8cpp_source.html#l00975">AMDGPUSubtarget.cpp:975</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_a2ea867ab6af309ac37d89c0ac9242600"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#a2ea867ab6af309ac37d89c0ac9242600">isRegisterType</a></div><div class="ttdeci">static bool isRegisterType(LLT Ty)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l00200">AMDGPULegalizerInfo.cpp:200</a></div></div>
<div class="ttc" id="anamespacellvm_1_1SI_1_1KernelInputOffsets_html_a58b4eae4b0a45d478c7c0f3959b04612a8397b2e7a714eebb964c86930299ba2e"><div class="ttname"><a href="namespacellvm_1_1SI_1_1KernelInputOffsets.html#a58b4eae4b0a45d478c7c0f3959b04612a8397b2e7a714eebb964c86930299ba2e">llvm::SI::KernelInputOffsets::LOCAL_SIZE_Z</a></div><div class="ttdeci">@ LOCAL_SIZE_Z</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8h_source.html#l01344">SIInstrInfo.h:1344</a></div></div>
<div class="ttc" id="aclassllvm_1_1Register_html_a4a6966b99e305bd6f01fb17c645ae3da"><div class="ttname"><a href="classllvm_1_1Register.html#a4a6966b99e305bd6f01fb17c645ae3da">llvm::Register::isValid</a></div><div class="ttdeci">bool isValid() const</div><div class="ttdef"><b>Definition:</b> <a href="Register_8h_source.html#l00126">Register.h:126</a></div></div>
<div class="ttc" id="aregcomp_8c_html_a0240ac851181b84ac374872dc5434ee4"><div class="ttname"><a href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></div><div class="ttdeci">#define N</div></div>
<div class="ttc" id="anamespacellvm_html_ab7af0c09900daed62bbdb01dba180f7ca9f5fca8e6c87d7107d7203b4c2ccd1af"><div class="ttname"><a href="namespacellvm.html#ab7af0c09900daed62bbdb01dba180f7ca9f5fca8e6c87d7107d7203b4c2ccd1af">llvm::RoundingMode::TowardPositive</a></div><div class="ttdeci">@ TowardPositive</div><div class="ttdoc">roundTowardPositive.</div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_a31648fb7411d04ec274b46d8dd635564"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#a31648fb7411d04ec274b46d8dd635564">isRegisterVectorElementType</a></div><div class="ttdeci">static bool isRegisterVectorElementType(LLT EltTy)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l00188">AMDGPULegalizerInfo.cpp:188</a></div></div>
<div class="ttc" id="aclassllvm_1_1SIMachineFunctionInfo_html"><div class="ttname"><a href="classllvm_1_1SIMachineFunctionInfo.html">llvm::SIMachineFunctionInfo</a></div><div class="ttdoc">This class keeps track of the SPI_SP_INPUT_ADDR config register, which tells the hardware which inter...</div><div class="ttdef"><b>Definition:</b> <a href="SIMachineFunctionInfo_8h_source.html#l00358">SIMachineFunctionInfo.h:358</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_ae50d11fc026093629c27142780ff1405"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#ae50d11fc026093629c27142780ff1405">llvm::LegalizerHelper::MIRBuilder</a></div><div class="ttdeci">MachineIRBuilder &amp; MIRBuilder</div><div class="ttdoc">Expose MIRBuilder so clients can set their own RecordInsertInstruction functions.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8h_source.html#l00050">LegalizerHelper.h:50</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_ac0184339c875630ffed0e19b55899b82"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#ac0184339c875630ffed0e19b55899b82">llvm::AMDGPULegalizerInfo::legalizeFastUnsafeFDIV64</a></div><div class="ttdeci">bool legalizeFastUnsafeFDIV64(MachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;B) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l03787">AMDGPULegalizerInfo.cpp:3787</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a98e9c9e8ef7cbb6c4aa89a38f21decfa"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a98e9c9e8ef7cbb6c4aa89a38f21decfa">llvm::MachineOperand::setMBB</a></div><div class="ttdeci">void setMBB(MachineBasicBlock *MBB)</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00727">MachineOperand.h:727</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPUAS_html_ab1843c6566c95d94d6e36a857b8d2b3faaa1e27e4fc68e5706a4b7bbaed447c14"><div class="ttname"><a href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3faaa1e27e4fc68e5706a4b7bbaed447c14">llvm::AMDGPUAS::FLAT_ADDRESS</a></div><div class="ttdeci">@ FLAT_ADDRESS</div><div class="ttdoc">Address space for flat memory.</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPU_8h_source.html#l00372">AMDGPU.h:372</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_ad0be6e871a184d6f7b814515324eee1b"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#ad0be6e871a184d6f7b814515324eee1b">llvm::AMDGPULegalizerInfo::legalizeImageIntrinsic</a></div><div class="ttdeci">bool legalizeImageIntrinsic(MachineInstr &amp;MI, MachineIRBuilder &amp;B, GISelChangeObserver &amp;Observer, const AMDGPU::ImageDimIntrinsicInfo *ImageDimIntr) const</div><div class="ttdoc">Rewrite image intrinsics to use register layouts expected by the subtarget.</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l04881">AMDGPULegalizerInfo.cpp:4881</a></div></div>
<div class="ttc" id="aScopeExit_8h_html"><div class="ttname"><a href="ScopeExit_8h.html">ScopeExit.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1SI_1_1KernelInputOffsets_html_a58b4eae4b0a45d478c7c0f3959b04612acaf6a7dc31f80148ce9ad3eaa8871db2"><div class="ttname"><a href="namespacellvm_1_1SI_1_1KernelInputOffsets.html#a58b4eae4b0a45d478c7c0f3959b04612acaf6a7dc31f80148ce9ad3eaa8871db2">llvm::SI::KernelInputOffsets::GLOBAL_SIZE_X</a></div><div class="ttdeci">@ GLOBAL_SIZE_X</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8h_source.html#l01339">SIInstrInfo.h:1339</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MipsISD_html_a422daf9aa810935178671306b651d69bad5006873d15f9569d1cf09deef3c6363"><div class="ttname"><a href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69bad5006873d15f9569d1cf09deef3c6363">llvm::MipsISD::Ins</a></div><div class="ttdeci">@ Ins</div><div class="ttdef"><b>Definition:</b> <a href="MipsISelLowering_8h_source.html#l00160">MipsISelLowering.h:160</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_a62e6c26793769f611ca8477969c1d686"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#a62e6c26793769f611ca8477969c1d686">llvm::LegalizeRuleSet::custom</a></div><div class="ttdeci">LegalizeRuleSet &amp; custom()</div><div class="ttdoc">Unconditionally custom lower.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00871">LegalizerInfo.h:871</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_a2260e90dbd0d262a9e7cdfc621342e99"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#a2260e90dbd0d262a9e7cdfc621342e99">toggleSPDenormMode</a></div><div class="ttdeci">static void toggleSPDenormMode(bool Enable, MachineIRBuilder &amp;B, const GCNSubtarget &amp;ST, AMDGPU::SIModeRegisterDefaults Mode)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l03861">AMDGPULegalizerInfo.cpp:3861</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl&lt; Register &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1SITargetLowering_html_acf18fd06c03bc65cbbf30fe2dc9201e0"><div class="ttname"><a href="classllvm_1_1SITargetLowering.html#acf18fd06c03bc65cbbf30fe2dc9201e0">llvm::SITargetLowering::shouldEmitPCReloc</a></div><div class="ttdeci">bool shouldEmitPCReloc(const GlobalValue *GV) const</div><div class="ttdef"><b>Definition:</b> <a href="SIISelLowering_8cpp_source.html#l05215">SIISelLowering.cpp:5215</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c33e33f2b308b4ea58e1a65dcd754de"><div class="ttname"><a href="namespacellvm.html#a7c33e33f2b308b4ea58e1a65dcd754de">llvm::LegalizeMutation</a></div><div class="ttdeci">std::function&lt; std::pair&lt; unsigned, LLT &gt;(const LegalityQuery &amp;)&gt; LegalizeMutation</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00201">LegalizerInfo.h:201</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetOptions_html_a0544e2966374684ff74255e5a4290fa7"><div class="ttname"><a href="classllvm_1_1TargetOptions.html#a0544e2966374684ff74255e5a4290fa7">llvm::TargetOptions::UnsafeFPMath</a></div><div class="ttdeci">unsigned UnsafeFPMath</div><div class="ttdoc">UnsafeFPMath - This flag is enabled when the -enable-unsafe-fp-math flag is specified on the command ...</div><div class="ttdef"><b>Definition:</b> <a href="TargetOptions_8h_source.html#l00163">TargetOptions.h:163</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a91b85787aa32d7f1f0d38d59a77cee68"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a91b85787aa32d7f1f0d38d59a77cee68">llvm::AMDGPULegalizerInfo::legalizeMinNumMaxNum</a></div><div class="ttdeci">bool legalizeMinNumMaxNum(LegalizerHelper &amp;Helper, MachineInstr &amp;MI) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l02314">AMDGPULegalizerInfo.cpp:2314</a></div></div>
<div class="ttc" id="aclassllvm_1_1GISelObserverWrapper_html"><div class="ttname"><a href="classllvm_1_1GISelObserverWrapper.html">llvm::GISelObserverWrapper</a></div><div class="ttdoc">Simple wrapper observer that takes several observers, and calls each one for each event.</div><div class="ttdef"><b>Definition:</b> <a href="GISelChangeObserver_8h_source.html#l00066">GISelChangeObserver.h:66</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a464ac3e6051fb78eb3ee985975d17cb2"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a464ac3e6051fb78eb3ee985975d17cb2">llvm::AMDGPULegalizerInfo::legalizeFDIV32</a></div><div class="ttdeci">bool legalizeFDIV32(MachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;B) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l03889">AMDGPULegalizerInfo.cpp:3889</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_a144b2ed41ce4f22842225b0b1b117a58"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#a144b2ed41ce4f22842225b0b1b117a58">vectorSmallerThan</a></div><div class="ttdeci">static LegalityPredicate vectorSmallerThan(unsigned TypeIdx, unsigned Size)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l00163">AMDGPULegalizerInfo.cpp:163</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab9c6b351507d3c0730f4290919d43a12"><div class="ttname"><a href="namespacellvm.html#ab9c6b351507d3c0730f4290919d43a12">llvm::ArrayRef</a></div><div class="ttdeci">ArrayRef(const T &amp;OneElt) -&gt; ArrayRef&lt; T &gt;</div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a29e0b1c558b350347e2652b35b26fea8"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a29e0b1c558b350347e2652b35b26fea8">llvm::GlobalValue::getValueType</a></div><div class="ttdeci">Type * getValueType() const</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00292">GlobalValue.h:292</a></div></div>
<div class="ttc" id="aPassBuilderBindings_8cpp_html_ab76052bb166c65901edb603a3e1f03ab"><div class="ttname"><a href="PassBuilderBindings_8cpp.html#ab76052bb166c65901edb603a3e1f03ab">TM</a></div><div class="ttdeci">const char LLVMTargetMachineRef TM</div><div class="ttdef"><b>Definition:</b> <a href="PassBuilderBindings_8cpp_source.html#l00047">PassBuilderBindings.cpp:47</a></div></div>
<div class="ttc" id="anamespacellvm_html_a1175ca529ece1df77d922f75a8726f56"><div class="ttname"><a href="namespacellvm.html#a1175ca529ece1df77d922f75a8726f56">llvm::getConstantFPVRegVal</a></div><div class="ttdeci">const ConstantFP * getConstantFPVRegVal(Register VReg, const MachineRegisterInfo &amp;MRI)</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_2GlobalISel_2Utils_8cpp_source.html#l00434">Utils.cpp:434</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_a3db547888c8d2ed5323f320bb5763014"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#a3db547888c8d2ed5323f320bb5763014">llvm::AMDGPULegalizerInfo::legalizeUnsignedDIV_REM32Impl</a></div><div class="ttdeci">void legalizeUnsignedDIV_REM32Impl(MachineIRBuilder &amp;B, Register DstDivReg, Register DstRemReg, Register Num, Register Den) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l03430">AMDGPULegalizerInfo.cpp:3430</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00411">CommandLine.h:411</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_aaac467545afeead836946e5842563fea"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#aaac467545afeead836946e5842563fea">llvm::AMDGPULegalizerInfo::legalizeSinCos</a></div><div class="ttdeci">bool legalizeSinCos(MachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;B) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l02409">AMDGPULegalizerInfo.cpp:2409</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPUTargetLowering_html_aabb66ae6636b6dbd45c1b66dd9353821"><div class="ttname"><a href="classllvm_1_1AMDGPUTargetLowering.html#aabb66ae6636b6dbd45c1b66dd9353821">llvm::AMDGPUTargetLowering::ImplicitParameter</a></div><div class="ttdeci">ImplicitParameter</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUISelLowering_8h_source.html#l00333">AMDGPUISelLowering.h:333</a></div></div>
<div class="ttc" id="anamespacellvm_1_1LegalityPredicates_html_a7fe85e30d27726cff2560b3a859f6d90"><div class="ttname"><a href="namespacellvm_1_1LegalityPredicates.html#a7fe85e30d27726cff2560b3a859f6d90">llvm::LegalityPredicates::sameSize</a></div><div class="ttdeci">LegalityPredicate sameSize(unsigned TypeIdx0, unsigned TypeIdx1)</div><div class="ttdoc">True iff the specified type indices are both the same bit size.</div><div class="ttdef"><b>Definition:</b> <a href="LegalityPredicates_8cpp_source.html#l00178">LegalityPredicates.cpp:178</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_ad19d3a061adf35e67b35092cfee60864"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#ad19d3a061adf35e67b35092cfee60864">llvm::AMDGPULegalizerInfo::updateBufferMMO</a></div><div class="ttdeci">void updateBufferMMO(MachineMemOperand *MMO, Register VOffset, Register SOffset, unsigned ImmOffset, Register VIndex, MachineRegisterInfo &amp;MRI) const</div><div class="ttdoc">Update MMO based on the offset inputs to a raw/struct buffer intrinsic.</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l04284">AMDGPULegalizerInfo.cpp:4284</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBundleIterator_html"><div class="ttname"><a href="classllvm_1_1MachineInstrBundleIterator.html">llvm::MachineInstrBundleIterator&lt; MachineInstr &gt;</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_a09eff726b407c3dfd6363c47c26856fd"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#a09eff726b407c3dfd6363c47c26856fd">EnableNewLegality</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; EnableNewLegality(&quot;amdgpu-global-isel-new-legality&quot;, cl::desc(&quot;Use GlobalISel desired legality, rather than try to use&quot; &quot;rules compatible with selection patterns&quot;), cl::init(false), cl::ReallyHidden)</div></div>
<div class="ttc" id="anamespacellvm_1_1numbers_html_af3e2d8495c95a22754b51a3504e95709"><div class="ttname"><a href="namespacellvm_1_1numbers.html#af3e2d8495c95a22754b51a3504e95709">llvm::numbers::ln2f</a></div><div class="ttdeci">constexpr float ln2f</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00048">MathExtras.h:48</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_html_ab8edae44cec4167ac46ac7f60ecb4dafabd2438b14a6a1a27fae653284aaa3cb4"><div class="ttname"><a href="namespacellvm_1_1AMDGPU.html#ab8edae44cec4167ac46ac7f60ecb4dafabd2438b14a6a1a27fae653284aaa3cb4">llvm::AMDGPU::AMDHSA_COV5</a></div><div class="ttdeci">@ AMDHSA_COV5</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUBaseInfo_8h_source.html#l00051">AMDGPUBaseInfo.h:51</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_a6eb46b558dd23ba908853adcc6ba76b7"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#a6eb46b558dd23ba908853adcc6ba76b7">bitcastToRegisterType</a></div><div class="ttdeci">static LegalizeMutation bitcastToRegisterType(unsigned TypeIdx)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l00146">AMDGPULegalizerInfo.cpp:146</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_ad64f039266036a2ac4d704000928d65b"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#ad64f039266036a2ac4d704000928d65b">moreEltsToNext32Bit</a></div><div class="ttdeci">static LegalizeMutation moreEltsToNext32Bit(unsigned TypeIdx)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l00118">AMDGPULegalizerInfo.cpp:118</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSubtarget_html_a553d27729038fcbd05ec618b71feaf3d"><div class="ttname"><a href="classllvm_1_1GCNSubtarget.html#a553d27729038fcbd05ec618b71feaf3d">llvm::GCNSubtarget::hasMad64_32</a></div><div class="ttdeci">bool hasMad64_32() const</div><div class="ttdef"><b>Definition:</b> <a href="GCNSubtarget_8h_source.html#l00678">GCNSubtarget.h:678</a></div></div>
<div class="ttc" id="astructllvm_1_1AMDGPU_1_1SIModeRegisterDefaults_html_a0ef164720b5caf7cfa0f82014098052f"><div class="ttname"><a href="structllvm_1_1AMDGPU_1_1SIModeRegisterDefaults.html#a0ef164720b5caf7cfa0f82014098052f">llvm::AMDGPU::SIModeRegisterDefaults::allFP32Denormals</a></div><div class="ttdeci">bool allFP32Denormals() const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUBaseInfo_8h_source.html#l01359">AMDGPUBaseInfo.h:1359</a></div></div>
<div class="ttc" id="aclassllvm_1_1APFloat_html_aaa67fe0741c2b3712630ae636f8c2c20"><div class="ttname"><a href="classllvm_1_1APFloat.html#aaa67fe0741c2b3712630ae636f8c2c20">llvm::APFloat::getLargest</a></div><div class="ttdeci">static APFloat getLargest(const fltSemantics &amp;Sem, bool Negative=false)</div><div class="ttdoc">Returns the largest finite number in the given semantics.</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00970">APFloat.h:970</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00074">Value.h:74</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPULegalizerInfo_html_ab40f765949a66d4973d528dcf38615fc"><div class="ttname"><a href="classllvm_1_1AMDGPULegalizerInfo.html#ab40f765949a66d4973d528dcf38615fc">llvm::AMDGPULegalizerInfo::legalizeLDSKernelId</a></div><div class="ttdeci">bool legalizeLDSKernelId(MachineInstr &amp;MI, MachineRegisterInfo &amp;MRI, MachineIRBuilder &amp;B) const</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l04201">AMDGPULegalizerInfo.cpp:4201</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizerHelper_html_a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31"><div class="ttname"><a href="classllvm_1_1LegalizerHelper.html#a97444fdd32d8610e39f82294399f3adca3d3565113157e799383dddc11c02ae31">llvm::LegalizerHelper::Legalized</a></div><div class="ttdeci">@ Legalized</div><div class="ttdoc">Instruction has been legalized and the MachineFunction changed.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerHelper_8h_source.html#l00067">LegalizerHelper.h:67</a></div></div>
<div class="ttc" id="aAMDGPUTargetMachine_8h_html"><div class="ttname"><a href="AMDGPUTargetMachine_8h.html">AMDGPUTargetMachine.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_acbc921830578e2741be6549db716c0ce"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">llvm::MachineBasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00311">MachineBasicBlock.h:311</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegalizeRuleSet_html_a1dd89b108ca049d44fc41716b8173787"><div class="ttname"><a href="classllvm_1_1LegalizeRuleSet.html#a1dd89b108ca049d44fc41716b8173787">llvm::LegalizeRuleSet::widenScalarToNextMultipleOf</a></div><div class="ttdeci">LegalizeRuleSet &amp; widenScalarToNextMultipleOf(unsigned TypeIdx, unsigned Size)</div><div class="ttdoc">Widen the scalar to the next multiple of Size.</div><div class="ttdef"><b>Definition:</b> <a href="LegalizerInfo_8h_source.html#l00887">LegalizerInfo.h:887</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPUAS_html_ab1843c6566c95d94d6e36a857b8d2b3faa6d3112da64eecbdbb50aacb5f8251e8"><div class="ttname"><a href="namespacellvm_1_1AMDGPUAS.html#ab1843c6566c95d94d6e36a857b8d2b3faa6d3112da64eecbdbb50aacb5f8251e8">llvm::AMDGPUAS::CONSTANT_ADDRESS</a></div><div class="ttdeci">@ CONSTANT_ADDRESS</div><div class="ttdoc">Address space for constant memory (VTX2).</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPU_8h_source.html#l00376">AMDGPU.h:376</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9bccbe67aaab722783ca4e7c504aaaa7a56a57d29a3f9dda8671b4d6490a94b08"><div class="ttname"><a href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7a56a57d29a3f9dda8671b4d6490a94b08">llvm::AtomicOrdering::NotAtomic</a></div><div class="ttdeci">@ NotAtomic</div></div>
<div class="ttc" id="aclassllvm_1_1SrcOp_html"><div class="ttname"><a href="classllvm_1_1SrcOp.html">llvm::SrcOp</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineIRBuilder_8h_source.html#l00128">MachineIRBuilder.h:128</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78baa3213b645e029aba8bb1b85213607d5e"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa3213b645e029aba8bb1b85213607d5e">llvm::CmpInst::FCMP_ORD</a></div><div class="ttdeci">@ FCMP_ORD</div><div class="ttdoc">0 1 1 1 True if ordered (no nans)</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00727">InstrTypes.h:727</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_a965a15cef77a97f0e17f9f26fd5be53e"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a965a15cef77a97f0e17f9f26fd5be53e">llvm::MachineRegisterInfo::setRegClass</a></div><div class="ttdeci">void setRegClass(Register Reg, const TargetRegisterClass *RC)</div><div class="ttdoc">setRegClass - Set the register class of the specified virtual register.</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00057">MachineRegisterInfo.cpp:57</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_a32472b5afd0ae6edb4a233a25056a6aa"><div class="ttname"><a href="classllvm_1_1LLT.html#a32472b5afd0ae6edb4a233a25056a6aa">llvm::LLT::getScalarSizeInBits</a></div><div class="ttdeci">constexpr unsigned getScalarSizeInBits() const</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00233">LowLevelTypeImpl.h:233</a></div></div>
<div class="ttc" id="aclassllvm_1_1Use_html"><div class="ttname"><a href="classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdoc">A Use represents the edge between a Value definition and its users.</div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00043">Use.h:43</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCRegister_html"><div class="ttname"><a href="classllvm_1_1MCRegister.html">llvm::MCRegister</a></div><div class="ttdoc">Wrapper class representing physical registers. Should be passed by value.</div><div class="ttdef"><b>Definition:</b> <a href="MCRegister_8h_source.html#l00024">MCRegister.h:24</a></div></div>
<div class="ttc" id="aAMDGPUBaseInfo_8h_html"><div class="ttname"><a href="AMDGPUBaseInfo_8h.html">AMDGPUBaseInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSubtarget_html_a0fa696e47a30e77762a75d6eb8fe1e34"><div class="ttname"><a href="classllvm_1_1GCNSubtarget.html#a0fa696e47a30e77762a75d6eb8fe1e34">llvm::GCNSubtarget::hasUsableDivScaleConditionOutput</a></div><div class="ttdeci">bool hasUsableDivScaleConditionOutput() const</div><div class="ttdoc">Condition output from div_scale is usable.</div><div class="ttdef"><b>Definition:</b> <a href="GCNSubtarget_8h_source.html#l00431">GCNSubtarget.h:431</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Intrinsic_html_a80add6b3b1cdaec560907995127adc16"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">llvm::Intrinsic::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00039">TargetTransformInfo.h:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPUTargetLowering_html_aabb66ae6636b6dbd45c1b66dd9353821a3b608a404034c22b030fca524632ebb0"><div class="ttname"><a href="classllvm_1_1AMDGPUTargetLowering.html#aabb66ae6636b6dbd45c1b66dd9353821a3b608a404034c22b030fca524632ebb0">llvm::AMDGPUTargetLowering::FIRST_IMPLICIT</a></div><div class="ttdeci">@ FIRST_IMPLICIT</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUISelLowering_8h_source.html#l00334">AMDGPUISelLowering.h:334</a></div></div>
<div class="ttc" id="aclassllvm_1_1AMDGPUMachineFunction_html_a7f7f60c7a80cc2debd00a9bded1e0b06"><div class="ttname"><a href="classllvm_1_1AMDGPUMachineFunction.html#a7f7f60c7a80cc2debd00a9bded1e0b06">llvm::AMDGPUMachineFunction::setDynLDSAlign</a></div><div class="ttdeci">void setDynLDSAlign(const DataLayout &amp;DL, const GlobalVariable &amp;GV)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUMachineFunction_8cpp_source.html#l00217">AMDGPUMachineFunction.cpp:217</a></div></div>
<div class="ttc" id="aAMDGPULegalizerInfo_8cpp_html_a47ea7f32b98178dbcb9bf3d1ff00daa1"><div class="ttname"><a href="AMDGPULegalizerInfo_8cpp.html#a47ea7f32b98178dbcb9bf3d1ff00daa1">extractF64Exponent</a></div><div class="ttdeci">static MachineInstrBuilder extractF64Exponent(Register Hi, MachineIRBuilder &amp;B)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULegalizerInfo_8cpp_source.html#l02119">AMDGPULegalizerInfo.cpp:2119</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html"><div class="ttname"><a href="classllvm_1_1LLT.html">llvm::LLT</a></div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00039">LowLevelTypeImpl.h:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLT_html_acd1eca3232b7b3072543294cd2377a37"><div class="ttname"><a href="classllvm_1_1LLT.html#acd1eca3232b7b3072543294cd2377a37">llvm::LLT::fixed_vector</a></div><div class="ttdeci">static constexpr LLT fixed_vector(unsigned NumElements, unsigned ScalarSizeInBits)</div><div class="ttdoc">Get a low-level fixed-width vector of some number of elements and element width.</div><div class="ttdef"><b>Definition:</b> <a href="LowLevelTypeImpl_8h_source.html#l00076">LowLevelTypeImpl.h:76</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 7 2023 10:09:08 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
